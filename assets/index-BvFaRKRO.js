const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/secp256k1-C1skrRLD.js","assets/hmac-C6dShuGc.js","assets/secp256k1-CtG9OmCR.js","assets/embedded-wallet-CZqxM-M7.js","assets/if-defined-C4ECkyIm.js","assets/index-CTTAYjzC.js","assets/index-D6IT4-df.js","assets/ref-CwWzEwCo.js","assets/index-DCuqExWE.js","assets/index-DeheHgbU.js","assets/index-B1pIWkIO.js","assets/index-WwyrI4xD.js","assets/index-QHTLUJkc.js","assets/index-A8JWeROJ.js","assets/index-DWj-82cH.js","assets/email-Dpdt7hZ_.js","assets/index-BfXq2ntQ.js","assets/socials-BUf45RwO.js","assets/index-D9_kD5Ag.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-Dxim76uT.js","assets/index-BTOL1aGs.js","assets/index-rc369PQT.js","assets/index-EZkwEFa6.js","assets/swaps-CuOHneJX.js","assets/index-BadK66o-.js","assets/index-CpZHAAZz.js","assets/index-CTuviSfW.js","assets/send-AiNZ1cx9.js","assets/index-Du9dmT3g.js","assets/index-DEq-7OUN.js","assets/receive-CUhA4Zs5.js","assets/index-D2JlyXM1.js","assets/onramp-DKPiPFav.js","assets/index-z7Nv5xPo.js","assets/index-GLOp2GMg.js","assets/index-Cqb8LZt3.js","assets/transactions-bnut60-v.js","assets/index-jP9DvueQ.js","assets/index-Crxv1cPe.js","assets/index-DsvBmrSI.js","assets/index-Co4NiQfL.js","assets/index-TIFUdpjb.js","assets/w3m-modal-C6_99zWK.js"])))=>i.map(i=>d[i]);
var SI=t=>{throw TypeError(t)};var db=(t,e,n)=>e.has(t)||SI("Cannot "+n);var z=(t,e,n)=>(db(t,e,"read from private field"),n?n.call(t):e.get(t)),Te=(t,e,n)=>e.has(t)?SI("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ye=(t,e,n,r)=>(db(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ke=(t,e,n)=>(db(t,e,"access private method"),n);var jm=(t,e,n,r)=>({set _(s){ye(t,e,s,n)},get _(){return z(t,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var rn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function j0(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var rR={exports:{}},U0={},sR={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gg=Symbol.for("react.element"),UU=Symbol.for("react.portal"),LU=Symbol.for("react.fragment"),MU=Symbol.for("react.strict_mode"),BU=Symbol.for("react.profiler"),FU=Symbol.for("react.provider"),zU=Symbol.for("react.context"),qU=Symbol.for("react.forward_ref"),WU=Symbol.for("react.suspense"),HU=Symbol.for("react.memo"),VU=Symbol.for("react.lazy"),AI=Symbol.iterator;function GU(t){return t===null||typeof t!="object"?null:(t=AI&&t[AI]||t["@@iterator"],typeof t=="function"?t:null)}var iR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oR=Object.assign,aR={};function Ch(t,e,n){this.props=t,this.context=e,this.refs=aR,this.updater=n||iR}Ch.prototype.isReactComponent={};Ch.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ch.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cR(){}cR.prototype=Ch.prototype;function qx(t,e,n){this.props=t,this.context=e,this.refs=aR,this.updater=n||iR}var Wx=qx.prototype=new cR;Wx.constructor=qx;oR(Wx,Ch.prototype);Wx.isPureReactComponent=!0;var II=Array.isArray,lR=Object.prototype.hasOwnProperty,Hx={current:null},uR={key:!0,ref:!0,__self:!0,__source:!0};function dR(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)lR.call(e,r)&&!uR.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Gg,type:t,key:i,ref:o,props:s,_owner:Hx.current}}function KU(t,e){return{$$typeof:Gg,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vx(t){return typeof t=="object"&&t!==null&&t.$$typeof===Gg}function YU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var TI=/\/+/g;function hb(t,e){return typeof t=="object"&&t!==null&&t.key!=null?YU(""+t.key):e.toString(36)}function Gy(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Gg:case UU:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+hb(o,0):r,II(s)?(n="",t!=null&&(n=t.replace(TI,"$&/")+"/"),Gy(s,e,n,"",function(l){return l})):s!=null&&(Vx(s)&&(s=KU(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(TI,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",II(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+hb(i,a);o+=Gy(i,e,n,c,s)}else if(c=GU(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+hb(i,a++),o+=Gy(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Um(t,e,n){if(t==null)return t;var r=[],s=0;return Gy(t,r,"","",function(i){return e.call(n,i,s++)}),r}function QU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tr={current:null},Ky={transition:null},JU={ReactCurrentDispatcher:Tr,ReactCurrentBatchConfig:Ky,ReactCurrentOwner:Hx};function hR(){throw Error("act(...) is not supported in production builds of React.")}Xe.Children={map:Um,forEach:function(t,e,n){Um(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Um(t,function(){e++}),e},toArray:function(t){return Um(t,function(e){return e})||[]},only:function(t){if(!Vx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Xe.Component=Ch;Xe.Fragment=LU;Xe.Profiler=BU;Xe.PureComponent=qx;Xe.StrictMode=MU;Xe.Suspense=WU;Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JU;Xe.act=hR;Xe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=oR({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Hx.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)lR.call(e,c)&&!uR.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:Gg,type:t.type,key:s,ref:i,props:r,_owner:o}};Xe.createContext=function(t){return t={$$typeof:zU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:FU,_context:t},t.Consumer=t};Xe.createElement=dR;Xe.createFactory=function(t){var e=dR.bind(null,t);return e.type=t,e};Xe.createRef=function(){return{current:null}};Xe.forwardRef=function(t){return{$$typeof:qU,render:t}};Xe.isValidElement=Vx;Xe.lazy=function(t){return{$$typeof:VU,_payload:{_status:-1,_result:t},_init:QU}};Xe.memo=function(t,e){return{$$typeof:HU,type:t,compare:e===void 0?null:e}};Xe.startTransition=function(t){var e=Ky.transition;Ky.transition={};try{t()}finally{Ky.transition=e}};Xe.unstable_act=hR;Xe.useCallback=function(t,e){return Tr.current.useCallback(t,e)};Xe.useContext=function(t){return Tr.current.useContext(t)};Xe.useDebugValue=function(){};Xe.useDeferredValue=function(t){return Tr.current.useDeferredValue(t)};Xe.useEffect=function(t,e){return Tr.current.useEffect(t,e)};Xe.useId=function(){return Tr.current.useId()};Xe.useImperativeHandle=function(t,e,n){return Tr.current.useImperativeHandle(t,e,n)};Xe.useInsertionEffect=function(t,e){return Tr.current.useInsertionEffect(t,e)};Xe.useLayoutEffect=function(t,e){return Tr.current.useLayoutEffect(t,e)};Xe.useMemo=function(t,e){return Tr.current.useMemo(t,e)};Xe.useReducer=function(t,e,n){return Tr.current.useReducer(t,e,n)};Xe.useRef=function(t){return Tr.current.useRef(t)};Xe.useState=function(t){return Tr.current.useState(t)};Xe.useSyncExternalStore=function(t,e,n){return Tr.current.useSyncExternalStore(t,e,n)};Xe.useTransition=function(){return Tr.current.useTransition()};Xe.version="18.3.1";sR.exports=Xe;var M=sR.exports;const qs=gu(M);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZU=M,XU=Symbol.for("react.element"),eL=Symbol.for("react.fragment"),tL=Object.prototype.hasOwnProperty,nL=ZU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rL={key:!0,ref:!0,__self:!0,__source:!0};function fR(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)tL.call(e,r)&&!rL.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:XU,type:t,key:i,ref:o,props:s,_owner:nL.current}}U0.Fragment=eL;U0.jsx=fR;U0.jsxs=fR;rR.exports=U0;var m=rR.exports,O_={},pR={exports:{}},Es={},gR={exports:{}},mR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(T,k){var L=T.length;T.push(k);e:for(;0<L;){var W=L-1>>>1,K=T[W];if(0<s(K,k))T[W]=k,T[L]=K,L=W;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var k=T[0],L=T.pop();if(L!==k){T[0]=L;e:for(var W=0,K=T.length,Z=K>>>1;W<Z;){var Q=2*(W+1)-1,te=T[Q],oe=Q+1,me=T[oe];if(0>s(te,L))oe<K&&0>s(me,te)?(T[W]=me,T[oe]=L,W=oe):(T[W]=te,T[Q]=L,W=Q);else if(oe<K&&0>s(me,L))T[W]=me,T[oe]=L,W=oe;else break e}}return k}function s(T,k){var L=T.sortIndex-k.sortIndex;return L!==0?L:T.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(T){for(var k=n(l);k!==null;){if(k.callback===null)r(l);else if(k.startTime<=T)r(l),k.sortIndex=k.expirationTime,e(c,k);else break;k=n(l)}}function E(T){if(g=!1,v(T),!p)if(n(c)!==null)p=!0,I(_);else{var k=n(l);k!==null&&U(E,k.startTime-T)}}function _(T,k){p=!1,g&&(g=!1,w(N),N=-1),f=!0;var L=h;try{for(v(k),d=n(c);d!==null&&(!(d.expirationTime>k)||T&&!R());){var W=d.callback;if(typeof W=="function"){d.callback=null,h=d.priorityLevel;var K=W(d.expirationTime<=k);k=t.unstable_now(),typeof K=="function"?d.callback=K:d===n(c)&&r(c),v(k)}else r(c);d=n(c)}if(d!==null)var Z=!0;else{var Q=n(l);Q!==null&&U(E,Q.startTime-k),Z=!1}return Z}finally{d=null,h=L,f=!1}}var x=!1,S=null,N=-1,C=5,O=-1;function R(){return!(t.unstable_now()-O<C)}function B(){if(S!==null){var T=t.unstable_now();O=T;var k=!0;try{k=S(!0,T)}finally{k?H():(x=!1,S=null)}}else x=!1}var H;if(typeof b=="function")H=function(){b(B)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,A=F.port2;F.port1.onmessage=B,H=function(){A.postMessage(null)}}else H=function(){y(B,0)};function I(T){S=T,x||(x=!0,H())}function U(T,k){N=y(function(){T(t.unstable_now())},k)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(T){T.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,I(_))},t.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<T?Math.floor(1e3/T):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(T){switch(h){case 1:case 2:case 3:var k=3;break;default:k=h}var L=h;h=k;try{return T()}finally{h=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(T,k){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var L=h;h=T;try{return k()}finally{h=L}},t.unstable_scheduleCallback=function(T,k,L){var W=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?W+L:W):L=W,T){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=L+K,T={id:u++,callback:k,priorityLevel:T,startTime:L,expirationTime:K,sortIndex:-1},L>W?(T.sortIndex=L,e(l,T),n(c)===null&&T===n(l)&&(g?(w(N),N=-1):g=!0,U(E,L-W))):(T.sortIndex=K,e(c,T),p||f||(p=!0,I(_))),T},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(T){var k=h;return function(){var L=h;h=k;try{return T.apply(this,arguments)}finally{h=L}}}})(mR);gR.exports=mR;var sL=gR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iL=M,bs=sL;function ie(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yR=new Set,Sp={};function mu(t,e){th(t,e),th(t+"Capture",e)}function th(t,e){for(Sp[t]=e,t=0;t<e.length;t++)yR.add(e[t])}var Qo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),R_=Object.prototype.hasOwnProperty,oL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,NI={},PI={};function aL(t){return R_.call(PI,t)?!0:R_.call(NI,t)?!1:oL.test(t)?PI[t]=!0:(NI[t]=!0,!1)}function cL(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function lL(t,e,n,r){if(e===null||typeof e>"u"||cL(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nr(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Vn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Vn[t]=new Nr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Vn[e]=new Nr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Vn[t]=new Nr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Vn[t]=new Nr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Vn[t]=new Nr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Vn[t]=new Nr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Vn[t]=new Nr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Vn[t]=new Nr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Vn[t]=new Nr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Gx=/[\-:]([a-z])/g;function Kx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Gx,Kx);Vn[e]=new Nr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Gx,Kx);Vn[e]=new Nr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Gx,Kx);Vn[e]=new Nr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Vn[t]=new Nr(t,1,!1,t.toLowerCase(),null,!1,!1)});Vn.xlinkHref=new Nr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Vn[t]=new Nr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Yx(t,e,n,r){var s=Vn.hasOwnProperty(e)?Vn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lL(e,n,s,r)&&(n=null),r||s===null?aL(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var oa=iL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lm=Symbol.for("react.element"),pd=Symbol.for("react.portal"),gd=Symbol.for("react.fragment"),Qx=Symbol.for("react.strict_mode"),$_=Symbol.for("react.profiler"),wR=Symbol.for("react.provider"),vR=Symbol.for("react.context"),Jx=Symbol.for("react.forward_ref"),D_=Symbol.for("react.suspense"),j_=Symbol.for("react.suspense_list"),Zx=Symbol.for("react.memo"),ja=Symbol.for("react.lazy"),bR=Symbol.for("react.offscreen"),kI=Symbol.iterator;function Gh(t){return t===null||typeof t!="object"?null:(t=kI&&t[kI]||t["@@iterator"],typeof t=="function"?t:null)}var Zt=Object.assign,fb;function Pf(t){if(fb===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);fb=e&&e[1]||""}return`
`+fb+t}var pb=!1;function gb(t,e){if(!t||pb)return"";pb=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{pb=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Pf(t):""}function uL(t){switch(t.tag){case 5:return Pf(t.type);case 16:return Pf("Lazy");case 13:return Pf("Suspense");case 19:return Pf("SuspenseList");case 0:case 2:case 15:return t=gb(t.type,!1),t;case 11:return t=gb(t.type.render,!1),t;case 1:return t=gb(t.type,!0),t;default:return""}}function U_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case gd:return"Fragment";case pd:return"Portal";case $_:return"Profiler";case Qx:return"StrictMode";case D_:return"Suspense";case j_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vR:return(t.displayName||"Context")+".Consumer";case wR:return(t._context.displayName||"Context")+".Provider";case Jx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zx:return e=t.displayName||null,e!==null?e:U_(t.type)||"Memo";case ja:e=t._payload,t=t._init;try{return U_(t(e))}catch{}}return null}function dL(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U_(e);case 8:return e===Qx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Oc(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _R(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function hL(t){var e=_R(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Mm(t){t._valueTracker||(t._valueTracker=hL(t))}function ER(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=_R(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function xw(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function L_(t,e){var n=e.checked;return Zt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function OI(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Oc(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function CR(t,e){e=e.checked,e!=null&&Yx(t,"checked",e,!1)}function M_(t,e){CR(t,e);var n=Oc(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?B_(t,e.type,n):e.hasOwnProperty("defaultValue")&&B_(t,e.type,Oc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function RI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function B_(t,e,n){(e!=="number"||xw(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var kf=Array.isArray;function Nd(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Oc(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function F_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ie(91));return Zt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $I(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ie(92));if(kf(n)){if(1<n.length)throw Error(ie(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Oc(n)}}function xR(t,e){var n=Oc(e.value),r=Oc(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function DI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function SR(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function z_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?SR(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bm,AR=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bm=Bm||document.createElement("div"),Bm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ap(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Gf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fL=["Webkit","ms","Moz","O"];Object.keys(Gf).forEach(function(t){fL.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gf[e]=Gf[t]})});function IR(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Gf.hasOwnProperty(t)&&Gf[t]?(""+e).trim():e+"px"}function TR(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=IR(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var pL=Zt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function q_(t,e){if(e){if(pL[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ie(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ie(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ie(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ie(62))}}function W_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var H_=null;function Xx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var V_=null,Pd=null,kd=null;function jI(t){if(t=Qg(t)){if(typeof V_!="function")throw Error(ie(280));var e=t.stateNode;e&&(e=z0(e),V_(t.stateNode,t.type,e))}}function NR(t){Pd?kd?kd.push(t):kd=[t]:Pd=t}function PR(){if(Pd){var t=Pd,e=kd;if(kd=Pd=null,jI(t),e)for(t=0;t<e.length;t++)jI(e[t])}}function kR(t,e){return t(e)}function OR(){}var mb=!1;function RR(t,e,n){if(mb)return t(e,n);mb=!0;try{return kR(t,e,n)}finally{mb=!1,(Pd!==null||kd!==null)&&(OR(),PR())}}function Ip(t,e){var n=t.stateNode;if(n===null)return null;var r=z0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ie(231,e,typeof n));return n}var G_=!1;if(Qo)try{var Kh={};Object.defineProperty(Kh,"passive",{get:function(){G_=!0}}),window.addEventListener("test",Kh,Kh),window.removeEventListener("test",Kh,Kh)}catch{G_=!1}function gL(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var Kf=!1,Sw=null,Aw=!1,K_=null,mL={onError:function(t){Kf=!0,Sw=t}};function yL(t,e,n,r,s,i,o,a,c){Kf=!1,Sw=null,gL.apply(mL,arguments)}function wL(t,e,n,r,s,i,o,a,c){if(yL.apply(this,arguments),Kf){if(Kf){var l=Sw;Kf=!1,Sw=null}else throw Error(ie(198));Aw||(Aw=!0,K_=l)}}function yu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function $R(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function UI(t){if(yu(t)!==t)throw Error(ie(188))}function vL(t){var e=t.alternate;if(!e){if(e=yu(t),e===null)throw Error(ie(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return UI(s),t;if(i===r)return UI(s),e;i=i.sibling}throw Error(ie(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(ie(189))}}if(n.alternate!==r)throw Error(ie(190))}if(n.tag!==3)throw Error(ie(188));return n.stateNode.current===n?t:e}function DR(t){return t=vL(t),t!==null?jR(t):null}function jR(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jR(t);if(e!==null)return e;t=t.sibling}return null}var UR=bs.unstable_scheduleCallback,LI=bs.unstable_cancelCallback,bL=bs.unstable_shouldYield,_L=bs.unstable_requestPaint,an=bs.unstable_now,EL=bs.unstable_getCurrentPriorityLevel,eS=bs.unstable_ImmediatePriority,LR=bs.unstable_UserBlockingPriority,Iw=bs.unstable_NormalPriority,CL=bs.unstable_LowPriority,MR=bs.unstable_IdlePriority,L0=null,no=null;function xL(t){if(no&&typeof no.onCommitFiberRoot=="function")try{no.onCommitFiberRoot(L0,t,void 0,(t.current.flags&128)===128)}catch{}}var _i=Math.clz32?Math.clz32:IL,SL=Math.log,AL=Math.LN2;function IL(t){return t>>>=0,t===0?32:31-(SL(t)/AL|0)|0}var Fm=64,zm=4194304;function Of(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tw(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Of(a):(i&=o,i!==0&&(r=Of(i)))}else o=n&~s,o!==0?r=Of(o):i!==0&&(r=Of(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-_i(e),s=1<<n,r|=t[n],e&=~s;return r}function TL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function NL(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-_i(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=TL(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function Y_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function BR(){var t=Fm;return Fm<<=1,!(Fm&4194240)&&(Fm=64),t}function yb(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Kg(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-_i(e),t[e]=n}function PL(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-_i(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function tS(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-_i(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var _t=0;function FR(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zR,nS,qR,WR,HR,Q_=!1,qm=[],pc=null,gc=null,mc=null,Tp=new Map,Np=new Map,Ha=[],kL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function MI(t,e){switch(t){case"focusin":case"focusout":pc=null;break;case"dragenter":case"dragleave":gc=null;break;case"mouseover":case"mouseout":mc=null;break;case"pointerover":case"pointerout":Tp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Np.delete(e.pointerId)}}function Yh(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Qg(e),e!==null&&nS(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function OL(t,e,n,r,s){switch(e){case"focusin":return pc=Yh(pc,t,e,n,r,s),!0;case"dragenter":return gc=Yh(gc,t,e,n,r,s),!0;case"mouseover":return mc=Yh(mc,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Tp.set(i,Yh(Tp.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Np.set(i,Yh(Np.get(i)||null,t,e,n,r,s)),!0}return!1}function VR(t){var e=vl(t.target);if(e!==null){var n=yu(e);if(n!==null){if(e=n.tag,e===13){if(e=$R(n),e!==null){t.blockedOn=e,HR(t.priority,function(){qR(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yy(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=J_(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);H_=r,n.target.dispatchEvent(r),H_=null}else return e=Qg(n),e!==null&&nS(e),t.blockedOn=n,!1;e.shift()}return!0}function BI(t,e,n){Yy(t)&&n.delete(e)}function RL(){Q_=!1,pc!==null&&Yy(pc)&&(pc=null),gc!==null&&Yy(gc)&&(gc=null),mc!==null&&Yy(mc)&&(mc=null),Tp.forEach(BI),Np.forEach(BI)}function Qh(t,e){t.blockedOn===e&&(t.blockedOn=null,Q_||(Q_=!0,bs.unstable_scheduleCallback(bs.unstable_NormalPriority,RL)))}function Pp(t){function e(s){return Qh(s,t)}if(0<qm.length){Qh(qm[0],t);for(var n=1;n<qm.length;n++){var r=qm[n];r.blockedOn===t&&(r.blockedOn=null)}}for(pc!==null&&Qh(pc,t),gc!==null&&Qh(gc,t),mc!==null&&Qh(mc,t),Tp.forEach(e),Np.forEach(e),n=0;n<Ha.length;n++)r=Ha[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ha.length&&(n=Ha[0],n.blockedOn===null);)VR(n),n.blockedOn===null&&Ha.shift()}var Od=oa.ReactCurrentBatchConfig,Nw=!0;function $L(t,e,n,r){var s=_t,i=Od.transition;Od.transition=null;try{_t=1,rS(t,e,n,r)}finally{_t=s,Od.transition=i}}function DL(t,e,n,r){var s=_t,i=Od.transition;Od.transition=null;try{_t=4,rS(t,e,n,r)}finally{_t=s,Od.transition=i}}function rS(t,e,n,r){if(Nw){var s=J_(t,e,n,r);if(s===null)Ib(t,e,r,Pw,n),MI(t,r);else if(OL(s,t,e,n,r))r.stopPropagation();else if(MI(t,r),e&4&&-1<kL.indexOf(t)){for(;s!==null;){var i=Qg(s);if(i!==null&&zR(i),i=J_(t,e,n,r),i===null&&Ib(t,e,r,Pw,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ib(t,e,r,null,n)}}var Pw=null;function J_(t,e,n,r){if(Pw=null,t=Xx(r),t=vl(t),t!==null)if(e=yu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=$R(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Pw=t,null}function GR(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(EL()){case eS:return 1;case LR:return 4;case Iw:case CL:return 16;case MR:return 536870912;default:return 16}default:return 16}}var ac=null,sS=null,Qy=null;function KR(){if(Qy)return Qy;var t,e=sS,n=e.length,r,s="value"in ac?ac.value:ac.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Qy=s.slice(t,1<r?1-r:void 0)}function Jy(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wm(){return!0}function FI(){return!1}function Cs(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Wm:FI,this.isPropagationStopped=FI,this}return Zt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wm)},persist:function(){},isPersistent:Wm}),e}var xh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},iS=Cs(xh),Yg=Zt({},xh,{view:0,detail:0}),jL=Cs(Yg),wb,vb,Jh,M0=Zt({},Yg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jh&&(Jh&&t.type==="mousemove"?(wb=t.screenX-Jh.screenX,vb=t.screenY-Jh.screenY):vb=wb=0,Jh=t),wb)},movementY:function(t){return"movementY"in t?t.movementY:vb}}),zI=Cs(M0),UL=Zt({},M0,{dataTransfer:0}),LL=Cs(UL),ML=Zt({},Yg,{relatedTarget:0}),bb=Cs(ML),BL=Zt({},xh,{animationName:0,elapsedTime:0,pseudoElement:0}),FL=Cs(BL),zL=Zt({},xh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qL=Cs(zL),WL=Zt({},xh,{data:0}),qI=Cs(WL),HL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function KL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=GL[t])?!!e[t]:!1}function oS(){return KL}var YL=Zt({},Yg,{key:function(t){if(t.key){var e=HL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Jy(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?VL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oS,charCode:function(t){return t.type==="keypress"?Jy(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jy(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),QL=Cs(YL),JL=Zt({},M0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),WI=Cs(JL),ZL=Zt({},Yg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oS}),XL=Cs(ZL),eM=Zt({},xh,{propertyName:0,elapsedTime:0,pseudoElement:0}),tM=Cs(eM),nM=Zt({},M0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),rM=Cs(nM),sM=[9,13,27,32],aS=Qo&&"CompositionEvent"in window,Yf=null;Qo&&"documentMode"in document&&(Yf=document.documentMode);var iM=Qo&&"TextEvent"in window&&!Yf,YR=Qo&&(!aS||Yf&&8<Yf&&11>=Yf),HI=" ",VI=!1;function QR(t,e){switch(t){case"keyup":return sM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function JR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var md=!1;function oM(t,e){switch(t){case"compositionend":return JR(e);case"keypress":return e.which!==32?null:(VI=!0,HI);case"textInput":return t=e.data,t===HI&&VI?null:t;default:return null}}function aM(t,e){if(md)return t==="compositionend"||!aS&&QR(t,e)?(t=KR(),Qy=sS=ac=null,md=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return YR&&e.locale!=="ko"?null:e.data;default:return null}}var cM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function GI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!cM[t.type]:e==="textarea"}function ZR(t,e,n,r){NR(r),e=kw(e,"onChange"),0<e.length&&(n=new iS("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Qf=null,kp=null;function lM(t){l3(t,0)}function B0(t){var e=vd(t);if(ER(e))return t}function uM(t,e){if(t==="change")return e}var XR=!1;if(Qo){var _b;if(Qo){var Eb="oninput"in document;if(!Eb){var KI=document.createElement("div");KI.setAttribute("oninput","return;"),Eb=typeof KI.oninput=="function"}_b=Eb}else _b=!1;XR=_b&&(!document.documentMode||9<document.documentMode)}function YI(){Qf&&(Qf.detachEvent("onpropertychange",e3),kp=Qf=null)}function e3(t){if(t.propertyName==="value"&&B0(kp)){var e=[];ZR(e,kp,t,Xx(t)),RR(lM,e)}}function dM(t,e,n){t==="focusin"?(YI(),Qf=e,kp=n,Qf.attachEvent("onpropertychange",e3)):t==="focusout"&&YI()}function hM(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return B0(kp)}function fM(t,e){if(t==="click")return B0(e)}function pM(t,e){if(t==="input"||t==="change")return B0(e)}function gM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ai=typeof Object.is=="function"?Object.is:gM;function Op(t,e){if(Ai(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!R_.call(e,s)||!Ai(t[s],e[s]))return!1}return!0}function QI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function JI(t,e){var n=QI(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=QI(n)}}function t3(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?t3(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function n3(){for(var t=window,e=xw();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=xw(t.document)}return e}function cS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mM(t){var e=n3(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&t3(n.ownerDocument.documentElement,n)){if(r!==null&&cS(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=JI(n,i);var o=JI(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yM=Qo&&"documentMode"in document&&11>=document.documentMode,yd=null,Z_=null,Jf=null,X_=!1;function ZI(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;X_||yd==null||yd!==xw(r)||(r=yd,"selectionStart"in r&&cS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Jf&&Op(Jf,r)||(Jf=r,r=kw(Z_,"onSelect"),0<r.length&&(e=new iS("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=yd)))}function Hm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wd={animationend:Hm("Animation","AnimationEnd"),animationiteration:Hm("Animation","AnimationIteration"),animationstart:Hm("Animation","AnimationStart"),transitionend:Hm("Transition","TransitionEnd")},Cb={},r3={};Qo&&(r3=document.createElement("div").style,"AnimationEvent"in window||(delete wd.animationend.animation,delete wd.animationiteration.animation,delete wd.animationstart.animation),"TransitionEvent"in window||delete wd.transitionend.transition);function F0(t){if(Cb[t])return Cb[t];if(!wd[t])return t;var e=wd[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in r3)return Cb[t]=e[n];return t}var s3=F0("animationend"),i3=F0("animationiteration"),o3=F0("animationstart"),a3=F0("transitionend"),c3=new Map,XI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qc(t,e){c3.set(t,e),mu(e,[t])}for(var xb=0;xb<XI.length;xb++){var Sb=XI[xb],wM=Sb.toLowerCase(),vM=Sb[0].toUpperCase()+Sb.slice(1);qc(wM,"on"+vM)}qc(s3,"onAnimationEnd");qc(i3,"onAnimationIteration");qc(o3,"onAnimationStart");qc("dblclick","onDoubleClick");qc("focusin","onFocus");qc("focusout","onBlur");qc(a3,"onTransitionEnd");th("onMouseEnter",["mouseout","mouseover"]);th("onMouseLeave",["mouseout","mouseover"]);th("onPointerEnter",["pointerout","pointerover"]);th("onPointerLeave",["pointerout","pointerover"]);mu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mu("onBeforeInput",["compositionend","keypress","textInput","paste"]);mu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rf));function e2(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,wL(r,e,void 0,t),t.currentTarget=null}function l3(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;e2(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;e2(s,a,l),i=c}}}if(Aw)throw t=K_,Aw=!1,K_=null,t}function Lt(t,e){var n=e[sE];n===void 0&&(n=e[sE]=new Set);var r=t+"__bubble";n.has(r)||(u3(e,t,2,!1),n.add(r))}function Ab(t,e,n){var r=0;e&&(r|=4),u3(n,t,r,e)}var Vm="_reactListening"+Math.random().toString(36).slice(2);function Rp(t){if(!t[Vm]){t[Vm]=!0,yR.forEach(function(n){n!=="selectionchange"&&(bM.has(n)||Ab(n,!1,t),Ab(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Vm]||(e[Vm]=!0,Ab("selectionchange",!1,e))}}function u3(t,e,n,r){switch(GR(e)){case 1:var s=$L;break;case 4:s=DL;break;default:s=rS}n=s.bind(null,e,n,t),s=void 0,!G_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ib(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=vl(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}RR(function(){var l=i,u=Xx(n),d=[];e:{var h=c3.get(t);if(h!==void 0){var f=iS,p=t;switch(t){case"keypress":if(Jy(n)===0)break e;case"keydown":case"keyup":f=QL;break;case"focusin":p="focus",f=bb;break;case"focusout":p="blur",f=bb;break;case"beforeblur":case"afterblur":f=bb;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=zI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=LL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=XL;break;case s3:case i3:case o3:f=FL;break;case a3:f=tM;break;case"scroll":f=jL;break;case"wheel":f=rM;break;case"copy":case"cut":case"paste":f=qL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=WI}var g=(e&4)!==0,y=!g&&t==="scroll",w=g?h!==null?h+"Capture":null:h;g=[];for(var b=l,v;b!==null;){v=b;var E=v.stateNode;if(v.tag===5&&E!==null&&(v=E,w!==null&&(E=Ip(b,w),E!=null&&g.push($p(b,E,v)))),y)break;b=b.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==H_&&(p=n.relatedTarget||n.fromElement)&&(vl(p)||p[Jo]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?vl(p):null,p!==null&&(y=yu(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=zI,E="onMouseLeave",w="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=WI,E="onPointerLeave",w="onPointerEnter",b="pointer"),y=f==null?h:vd(f),v=p==null?h:vd(p),h=new g(E,b+"leave",f,n,u),h.target=y,h.relatedTarget=v,E=null,vl(u)===l&&(g=new g(w,b+"enter",p,n,u),g.target=v,g.relatedTarget=y,E=g),y=E,f&&p)t:{for(g=f,w=p,b=0,v=g;v;v=Ru(v))b++;for(v=0,E=w;E;E=Ru(E))v++;for(;0<b-v;)g=Ru(g),b--;for(;0<v-b;)w=Ru(w),v--;for(;b--;){if(g===w||w!==null&&g===w.alternate)break t;g=Ru(g),w=Ru(w)}g=null}else g=null;f!==null&&t2(d,h,f,g,!1),p!==null&&y!==null&&t2(d,y,p,g,!0)}}e:{if(h=l?vd(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var _=uM;else if(GI(h))if(XR)_=pM;else{_=hM;var x=dM}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=fM);if(_&&(_=_(t,l))){ZR(d,_,n,u);break e}x&&x(t,h,l),t==="focusout"&&(x=h._wrapperState)&&x.controlled&&h.type==="number"&&B_(h,"number",h.value)}switch(x=l?vd(l):window,t){case"focusin":(GI(x)||x.contentEditable==="true")&&(yd=x,Z_=l,Jf=null);break;case"focusout":Jf=Z_=yd=null;break;case"mousedown":X_=!0;break;case"contextmenu":case"mouseup":case"dragend":X_=!1,ZI(d,n,u);break;case"selectionchange":if(yM)break;case"keydown":case"keyup":ZI(d,n,u)}var S;if(aS)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else md?QR(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(YR&&n.locale!=="ko"&&(md||N!=="onCompositionStart"?N==="onCompositionEnd"&&md&&(S=KR()):(ac=u,sS="value"in ac?ac.value:ac.textContent,md=!0)),x=kw(l,N),0<x.length&&(N=new qI(N,t,null,n,u),d.push({event:N,listeners:x}),S?N.data=S:(S=JR(n),S!==null&&(N.data=S)))),(S=iM?oM(t,n):aM(t,n))&&(l=kw(l,"onBeforeInput"),0<l.length&&(u=new qI("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=S))}l3(d,e)})}function $p(t,e,n){return{instance:t,listener:e,currentTarget:n}}function kw(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ip(t,n),i!=null&&r.unshift($p(t,i,s)),i=Ip(t,e),i!=null&&r.push($p(t,i,s))),t=t.return}return r}function Ru(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function t2(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=Ip(n,i),c!=null&&o.unshift($p(n,c,a))):s||(c=Ip(n,i),c!=null&&o.push($p(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var _M=/\r\n?/g,EM=/\u0000|\uFFFD/g;function n2(t){return(typeof t=="string"?t:""+t).replace(_M,`
`).replace(EM,"")}function Gm(t,e,n){if(e=n2(e),n2(t)!==e&&n)throw Error(ie(425))}function Ow(){}var eE=null,tE=null;function nE(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rE=typeof setTimeout=="function"?setTimeout:void 0,CM=typeof clearTimeout=="function"?clearTimeout:void 0,r2=typeof Promise=="function"?Promise:void 0,xM=typeof queueMicrotask=="function"?queueMicrotask:typeof r2<"u"?function(t){return r2.resolve(null).then(t).catch(SM)}:rE;function SM(t){setTimeout(function(){throw t})}function Tb(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Pp(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Pp(e)}function yc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function s2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Sh=Math.random().toString(36).slice(2),Xi="__reactFiber$"+Sh,Dp="__reactProps$"+Sh,Jo="__reactContainer$"+Sh,sE="__reactEvents$"+Sh,AM="__reactListeners$"+Sh,IM="__reactHandles$"+Sh;function vl(t){var e=t[Xi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Jo]||n[Xi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=s2(t);t!==null;){if(n=t[Xi])return n;t=s2(t)}return e}t=n,n=t.parentNode}return null}function Qg(t){return t=t[Xi]||t[Jo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ie(33))}function z0(t){return t[Dp]||null}var iE=[],bd=-1;function Wc(t){return{current:t}}function Ft(t){0>bd||(t.current=iE[bd],iE[bd]=null,bd--)}function $t(t,e){bd++,iE[bd]=t.current,t.current=e}var Rc={},hr=Wc(Rc),Jr=Wc(!1),Vl=Rc;function nh(t,e){var n=t.type.contextTypes;if(!n)return Rc;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Zr(t){return t=t.childContextTypes,t!=null}function Rw(){Ft(Jr),Ft(hr)}function i2(t,e,n){if(hr.current!==Rc)throw Error(ie(168));$t(hr,e),$t(Jr,n)}function d3(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ie(108,dL(t)||"Unknown",s));return Zt({},n,r)}function $w(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Rc,Vl=hr.current,$t(hr,t),$t(Jr,Jr.current),!0}function o2(t,e,n){var r=t.stateNode;if(!r)throw Error(ie(169));n?(t=d3(t,e,Vl),r.__reactInternalMemoizedMergedChildContext=t,Ft(Jr),Ft(hr),$t(hr,t)):Ft(Jr),$t(Jr,n)}var $o=null,q0=!1,Nb=!1;function h3(t){$o===null?$o=[t]:$o.push(t)}function TM(t){q0=!0,h3(t)}function Hc(){if(!Nb&&$o!==null){Nb=!0;var t=0,e=_t;try{var n=$o;for(_t=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}$o=null,q0=!1}catch(s){throw $o!==null&&($o=$o.slice(t+1)),UR(eS,Hc),s}finally{_t=e,Nb=!1}}return null}var _d=[],Ed=0,Dw=null,jw=0,Ms=[],Bs=0,Gl=null,Fo=1,zo="";function ll(t,e){_d[Ed++]=jw,_d[Ed++]=Dw,Dw=t,jw=e}function f3(t,e,n){Ms[Bs++]=Fo,Ms[Bs++]=zo,Ms[Bs++]=Gl,Gl=t;var r=Fo;t=zo;var s=32-_i(r)-1;r&=~(1<<s),n+=1;var i=32-_i(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Fo=1<<32-_i(e)+s|n<<s|r,zo=i+t}else Fo=1<<i|n<<s|r,zo=t}function lS(t){t.return!==null&&(ll(t,1),f3(t,1,0))}function uS(t){for(;t===Dw;)Dw=_d[--Ed],_d[Ed]=null,jw=_d[--Ed],_d[Ed]=null;for(;t===Gl;)Gl=Ms[--Bs],Ms[Bs]=null,zo=Ms[--Bs],Ms[Bs]=null,Fo=Ms[--Bs],Ms[Bs]=null}var ys=null,gs=null,Ht=!1,pi=null;function p3(t,e){var n=Fs(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function a2(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ys=t,gs=yc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ys=t,gs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Gl!==null?{id:Fo,overflow:zo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Fs(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ys=t,gs=null,!0):!1;default:return!1}}function oE(t){return(t.mode&1)!==0&&(t.flags&128)===0}function aE(t){if(Ht){var e=gs;if(e){var n=e;if(!a2(t,e)){if(oE(t))throw Error(ie(418));e=yc(n.nextSibling);var r=ys;e&&a2(t,e)?p3(r,n):(t.flags=t.flags&-4097|2,Ht=!1,ys=t)}}else{if(oE(t))throw Error(ie(418));t.flags=t.flags&-4097|2,Ht=!1,ys=t}}}function c2(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ys=t}function Km(t){if(t!==ys)return!1;if(!Ht)return c2(t),Ht=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!nE(t.type,t.memoizedProps)),e&&(e=gs)){if(oE(t))throw g3(),Error(ie(418));for(;e;)p3(t,e),e=yc(e.nextSibling)}if(c2(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ie(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){gs=yc(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}gs=null}}else gs=ys?yc(t.stateNode.nextSibling):null;return!0}function g3(){for(var t=gs;t;)t=yc(t.nextSibling)}function rh(){gs=ys=null,Ht=!1}function dS(t){pi===null?pi=[t]:pi.push(t)}var NM=oa.ReactCurrentBatchConfig;function Zh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ie(309));var r=n.stateNode}if(!r)throw Error(ie(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ie(284));if(!n._owner)throw Error(ie(290,t))}return t}function Ym(t,e){throw t=Object.prototype.toString.call(e),Error(ie(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function l2(t){var e=t._init;return e(t._payload)}function m3(t){function e(w,b){if(t){var v=w.deletions;v===null?(w.deletions=[b],w.flags|=16):v.push(b)}}function n(w,b){if(!t)return null;for(;b!==null;)e(w,b),b=b.sibling;return null}function r(w,b){for(w=new Map;b!==null;)b.key!==null?w.set(b.key,b):w.set(b.index,b),b=b.sibling;return w}function s(w,b){return w=_c(w,b),w.index=0,w.sibling=null,w}function i(w,b,v){return w.index=v,t?(v=w.alternate,v!==null?(v=v.index,v<b?(w.flags|=2,b):v):(w.flags|=2,b)):(w.flags|=1048576,b)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,b,v,E){return b===null||b.tag!==6?(b=jb(v,w.mode,E),b.return=w,b):(b=s(b,v),b.return=w,b)}function c(w,b,v,E){var _=v.type;return _===gd?u(w,b,v.props.children,E,v.key):b!==null&&(b.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ja&&l2(_)===b.type)?(E=s(b,v.props),E.ref=Zh(w,b,v),E.return=w,E):(E=sw(v.type,v.key,v.props,null,w.mode,E),E.ref=Zh(w,b,v),E.return=w,E)}function l(w,b,v,E){return b===null||b.tag!==4||b.stateNode.containerInfo!==v.containerInfo||b.stateNode.implementation!==v.implementation?(b=Ub(v,w.mode,E),b.return=w,b):(b=s(b,v.children||[]),b.return=w,b)}function u(w,b,v,E,_){return b===null||b.tag!==7?(b=Fl(v,w.mode,E,_),b.return=w,b):(b=s(b,v),b.return=w,b)}function d(w,b,v){if(typeof b=="string"&&b!==""||typeof b=="number")return b=jb(""+b,w.mode,v),b.return=w,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Lm:return v=sw(b.type,b.key,b.props,null,w.mode,v),v.ref=Zh(w,null,b),v.return=w,v;case pd:return b=Ub(b,w.mode,v),b.return=w,b;case ja:var E=b._init;return d(w,E(b._payload),v)}if(kf(b)||Gh(b))return b=Fl(b,w.mode,v,null),b.return=w,b;Ym(w,b)}return null}function h(w,b,v,E){var _=b!==null?b.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return _!==null?null:a(w,b,""+v,E);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Lm:return v.key===_?c(w,b,v,E):null;case pd:return v.key===_?l(w,b,v,E):null;case ja:return _=v._init,h(w,b,_(v._payload),E)}if(kf(v)||Gh(v))return _!==null?null:u(w,b,v,E,null);Ym(w,v)}return null}function f(w,b,v,E,_){if(typeof E=="string"&&E!==""||typeof E=="number")return w=w.get(v)||null,a(b,w,""+E,_);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Lm:return w=w.get(E.key===null?v:E.key)||null,c(b,w,E,_);case pd:return w=w.get(E.key===null?v:E.key)||null,l(b,w,E,_);case ja:var x=E._init;return f(w,b,v,x(E._payload),_)}if(kf(E)||Gh(E))return w=w.get(v)||null,u(b,w,E,_,null);Ym(b,E)}return null}function p(w,b,v,E){for(var _=null,x=null,S=b,N=b=0,C=null;S!==null&&N<v.length;N++){S.index>N?(C=S,S=null):C=S.sibling;var O=h(w,S,v[N],E);if(O===null){S===null&&(S=C);break}t&&S&&O.alternate===null&&e(w,S),b=i(O,b,N),x===null?_=O:x.sibling=O,x=O,S=C}if(N===v.length)return n(w,S),Ht&&ll(w,N),_;if(S===null){for(;N<v.length;N++)S=d(w,v[N],E),S!==null&&(b=i(S,b,N),x===null?_=S:x.sibling=S,x=S);return Ht&&ll(w,N),_}for(S=r(w,S);N<v.length;N++)C=f(S,w,N,v[N],E),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?N:C.key),b=i(C,b,N),x===null?_=C:x.sibling=C,x=C);return t&&S.forEach(function(R){return e(w,R)}),Ht&&ll(w,N),_}function g(w,b,v,E){var _=Gh(v);if(typeof _!="function")throw Error(ie(150));if(v=_.call(v),v==null)throw Error(ie(151));for(var x=_=null,S=b,N=b=0,C=null,O=v.next();S!==null&&!O.done;N++,O=v.next()){S.index>N?(C=S,S=null):C=S.sibling;var R=h(w,S,O.value,E);if(R===null){S===null&&(S=C);break}t&&S&&R.alternate===null&&e(w,S),b=i(R,b,N),x===null?_=R:x.sibling=R,x=R,S=C}if(O.done)return n(w,S),Ht&&ll(w,N),_;if(S===null){for(;!O.done;N++,O=v.next())O=d(w,O.value,E),O!==null&&(b=i(O,b,N),x===null?_=O:x.sibling=O,x=O);return Ht&&ll(w,N),_}for(S=r(w,S);!O.done;N++,O=v.next())O=f(S,w,N,O.value,E),O!==null&&(t&&O.alternate!==null&&S.delete(O.key===null?N:O.key),b=i(O,b,N),x===null?_=O:x.sibling=O,x=O);return t&&S.forEach(function(B){return e(w,B)}),Ht&&ll(w,N),_}function y(w,b,v,E){if(typeof v=="object"&&v!==null&&v.type===gd&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Lm:e:{for(var _=v.key,x=b;x!==null;){if(x.key===_){if(_=v.type,_===gd){if(x.tag===7){n(w,x.sibling),b=s(x,v.props.children),b.return=w,w=b;break e}}else if(x.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ja&&l2(_)===x.type){n(w,x.sibling),b=s(x,v.props),b.ref=Zh(w,x,v),b.return=w,w=b;break e}n(w,x);break}else e(w,x);x=x.sibling}v.type===gd?(b=Fl(v.props.children,w.mode,E,v.key),b.return=w,w=b):(E=sw(v.type,v.key,v.props,null,w.mode,E),E.ref=Zh(w,b,v),E.return=w,w=E)}return o(w);case pd:e:{for(x=v.key;b!==null;){if(b.key===x)if(b.tag===4&&b.stateNode.containerInfo===v.containerInfo&&b.stateNode.implementation===v.implementation){n(w,b.sibling),b=s(b,v.children||[]),b.return=w,w=b;break e}else{n(w,b);break}else e(w,b);b=b.sibling}b=Ub(v,w.mode,E),b.return=w,w=b}return o(w);case ja:return x=v._init,y(w,b,x(v._payload),E)}if(kf(v))return p(w,b,v,E);if(Gh(v))return g(w,b,v,E);Ym(w,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,b!==null&&b.tag===6?(n(w,b.sibling),b=s(b,v),b.return=w,w=b):(n(w,b),b=jb(v,w.mode,E),b.return=w,w=b),o(w)):n(w,b)}return y}var sh=m3(!0),y3=m3(!1),Uw=Wc(null),Lw=null,Cd=null,hS=null;function fS(){hS=Cd=Lw=null}function pS(t){var e=Uw.current;Ft(Uw),t._currentValue=e}function cE(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Rd(t,e){Lw=t,hS=Cd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yr=!0),t.firstContext=null)}function Hs(t){var e=t._currentValue;if(hS!==t)if(t={context:t,memoizedValue:e,next:null},Cd===null){if(Lw===null)throw Error(ie(308));Cd=t,Lw.dependencies={lanes:0,firstContext:t}}else Cd=Cd.next=t;return e}var bl=null;function gS(t){bl===null?bl=[t]:bl.push(t)}function w3(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,gS(e)):(n.next=s.next,s.next=n),e.interleaved=n,Zo(t,r)}function Zo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ua=!1;function mS(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function v3(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function wc(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ot&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Zo(t,n)}return s=r.interleaved,s===null?(e.next=e,gS(r)):(e.next=s.next,s.next=e),r.interleaved=e,Zo(t,n)}function Zy(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tS(t,n)}}function u2(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Mw(t,e,n,r){var s=t.updateQueue;Ua=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Zt({},d,h);break e;case 2:Ua=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Yl|=o,t.lanes=o,t.memoizedState=d}}function d2(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ie(191,s));s.call(r)}}}var Jg={},ro=Wc(Jg),jp=Wc(Jg),Up=Wc(Jg);function _l(t){if(t===Jg)throw Error(ie(174));return t}function yS(t,e){switch($t(Up,e),$t(jp,t),$t(ro,Jg),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:z_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=z_(e,t)}Ft(ro),$t(ro,e)}function ih(){Ft(ro),Ft(jp),Ft(Up)}function b3(t){_l(Up.current);var e=_l(ro.current),n=z_(e,t.type);e!==n&&($t(jp,t),$t(ro,n))}function wS(t){jp.current===t&&(Ft(ro),Ft(jp))}var Yt=Wc(0);function Bw(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pb=[];function vS(){for(var t=0;t<Pb.length;t++)Pb[t]._workInProgressVersionPrimary=null;Pb.length=0}var Xy=oa.ReactCurrentDispatcher,kb=oa.ReactCurrentBatchConfig,Kl=0,Jt=null,bn=null,Nn=null,Fw=!1,Zf=!1,Lp=0,PM=0;function er(){throw Error(ie(321))}function bS(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ai(t[n],e[n]))return!1;return!0}function _S(t,e,n,r,s,i){if(Kl=i,Jt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xy.current=t===null||t.memoizedState===null?$M:DM,t=n(r,s),Zf){i=0;do{if(Zf=!1,Lp=0,25<=i)throw Error(ie(301));i+=1,Nn=bn=null,e.updateQueue=null,Xy.current=jM,t=n(r,s)}while(Zf)}if(Xy.current=zw,e=bn!==null&&bn.next!==null,Kl=0,Nn=bn=Jt=null,Fw=!1,e)throw Error(ie(300));return t}function ES(){var t=Lp!==0;return Lp=0,t}function Wi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?Jt.memoizedState=Nn=t:Nn=Nn.next=t,Nn}function Vs(){if(bn===null){var t=Jt.alternate;t=t!==null?t.memoizedState:null}else t=bn.next;var e=Nn===null?Jt.memoizedState:Nn.next;if(e!==null)Nn=e,bn=t;else{if(t===null)throw Error(ie(310));bn=t,t={memoizedState:bn.memoizedState,baseState:bn.baseState,baseQueue:bn.baseQueue,queue:bn.queue,next:null},Nn===null?Jt.memoizedState=Nn=t:Nn=Nn.next=t}return Nn}function Mp(t,e){return typeof e=="function"?e(t):e}function Ob(t){var e=Vs(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var r=bn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((Kl&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,Jt.lanes|=u,Yl|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,Ai(r,e.memoizedState)||(Yr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Jt.lanes|=i,Yl|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Rb(t){var e=Vs(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Ai(i,e.memoizedState)||(Yr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function _3(){}function E3(t,e){var n=Jt,r=Vs(),s=e(),i=!Ai(r.memoizedState,s);if(i&&(r.memoizedState=s,Yr=!0),r=r.queue,CS(S3.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Nn!==null&&Nn.memoizedState.tag&1){if(n.flags|=2048,Bp(9,x3.bind(null,n,r,s,e),void 0,null),Rn===null)throw Error(ie(349));Kl&30||C3(n,e,s)}return s}function C3(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Jt.updateQueue,e===null?(e={lastEffect:null,stores:null},Jt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function x3(t,e,n,r){e.value=n,e.getSnapshot=r,A3(e)&&I3(t)}function S3(t,e,n){return n(function(){A3(e)&&I3(t)})}function A3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ai(t,n)}catch{return!0}}function I3(t){var e=Zo(t,1);e!==null&&Ei(e,t,1,-1)}function h2(t){var e=Wi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mp,lastRenderedState:t},e.queue=t,t=t.dispatch=RM.bind(null,Jt,t),[e.memoizedState,t]}function Bp(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Jt.updateQueue,e===null?(e={lastEffect:null,stores:null},Jt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function T3(){return Vs().memoizedState}function ew(t,e,n,r){var s=Wi();Jt.flags|=t,s.memoizedState=Bp(1|e,n,void 0,r===void 0?null:r)}function W0(t,e,n,r){var s=Vs();r=r===void 0?null:r;var i=void 0;if(bn!==null){var o=bn.memoizedState;if(i=o.destroy,r!==null&&bS(r,o.deps)){s.memoizedState=Bp(e,n,i,r);return}}Jt.flags|=t,s.memoizedState=Bp(1|e,n,i,r)}function f2(t,e){return ew(8390656,8,t,e)}function CS(t,e){return W0(2048,8,t,e)}function N3(t,e){return W0(4,2,t,e)}function P3(t,e){return W0(4,4,t,e)}function k3(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function O3(t,e,n){return n=n!=null?n.concat([t]):null,W0(4,4,k3.bind(null,e,t),n)}function xS(){}function R3(t,e){var n=Vs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bS(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function $3(t,e){var n=Vs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bS(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function D3(t,e,n){return Kl&21?(Ai(n,e)||(n=BR(),Jt.lanes|=n,Yl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yr=!0),t.memoizedState=n)}function kM(t,e){var n=_t;_t=n!==0&&4>n?n:4,t(!0);var r=kb.transition;kb.transition={};try{t(!1),e()}finally{_t=n,kb.transition=r}}function j3(){return Vs().memoizedState}function OM(t,e,n){var r=bc(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},U3(t))L3(e,n);else if(n=w3(t,e,n,r),n!==null){var s=Er();Ei(n,t,r,s),M3(n,e,r)}}function RM(t,e,n){var r=bc(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(U3(t))L3(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Ai(a,o)){var c=e.interleaved;c===null?(s.next=s,gS(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=w3(t,e,s,r),n!==null&&(s=Er(),Ei(n,t,r,s),M3(n,e,r))}}function U3(t){var e=t.alternate;return t===Jt||e!==null&&e===Jt}function L3(t,e){Zf=Fw=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function M3(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tS(t,n)}}var zw={readContext:Hs,useCallback:er,useContext:er,useEffect:er,useImperativeHandle:er,useInsertionEffect:er,useLayoutEffect:er,useMemo:er,useReducer:er,useRef:er,useState:er,useDebugValue:er,useDeferredValue:er,useTransition:er,useMutableSource:er,useSyncExternalStore:er,useId:er,unstable_isNewReconciler:!1},$M={readContext:Hs,useCallback:function(t,e){return Wi().memoizedState=[t,e===void 0?null:e],t},useContext:Hs,useEffect:f2,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ew(4194308,4,k3.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ew(4194308,4,t,e)},useInsertionEffect:function(t,e){return ew(4,2,t,e)},useMemo:function(t,e){var n=Wi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Wi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=OM.bind(null,Jt,t),[r.memoizedState,t]},useRef:function(t){var e=Wi();return t={current:t},e.memoizedState=t},useState:h2,useDebugValue:xS,useDeferredValue:function(t){return Wi().memoizedState=t},useTransition:function(){var t=h2(!1),e=t[0];return t=kM.bind(null,t[1]),Wi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Jt,s=Wi();if(Ht){if(n===void 0)throw Error(ie(407));n=n()}else{if(n=e(),Rn===null)throw Error(ie(349));Kl&30||C3(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,f2(S3.bind(null,r,i,t),[t]),r.flags|=2048,Bp(9,x3.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Wi(),e=Rn.identifierPrefix;if(Ht){var n=zo,r=Fo;n=(r&~(1<<32-_i(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Lp++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=PM++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},DM={readContext:Hs,useCallback:R3,useContext:Hs,useEffect:CS,useImperativeHandle:O3,useInsertionEffect:N3,useLayoutEffect:P3,useMemo:$3,useReducer:Ob,useRef:T3,useState:function(){return Ob(Mp)},useDebugValue:xS,useDeferredValue:function(t){var e=Vs();return D3(e,bn.memoizedState,t)},useTransition:function(){var t=Ob(Mp)[0],e=Vs().memoizedState;return[t,e]},useMutableSource:_3,useSyncExternalStore:E3,useId:j3,unstable_isNewReconciler:!1},jM={readContext:Hs,useCallback:R3,useContext:Hs,useEffect:CS,useImperativeHandle:O3,useInsertionEffect:N3,useLayoutEffect:P3,useMemo:$3,useReducer:Rb,useRef:T3,useState:function(){return Rb(Mp)},useDebugValue:xS,useDeferredValue:function(t){var e=Vs();return bn===null?e.memoizedState=t:D3(e,bn.memoizedState,t)},useTransition:function(){var t=Rb(Mp)[0],e=Vs().memoizedState;return[t,e]},useMutableSource:_3,useSyncExternalStore:E3,useId:j3,unstable_isNewReconciler:!1};function li(t,e){if(t&&t.defaultProps){e=Zt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function lE(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Zt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var H0={isMounted:function(t){return(t=t._reactInternals)?yu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Er(),s=bc(t),i=Wo(r,s);i.payload=e,n!=null&&(i.callback=n),e=wc(t,i,s),e!==null&&(Ei(e,t,s,r),Zy(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Er(),s=bc(t),i=Wo(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=wc(t,i,s),e!==null&&(Ei(e,t,s,r),Zy(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Er(),r=bc(t),s=Wo(n,r);s.tag=2,e!=null&&(s.callback=e),e=wc(t,s,r),e!==null&&(Ei(e,t,r,n),Zy(e,t,r))}};function p2(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Op(n,r)||!Op(s,i):!0}function B3(t,e,n){var r=!1,s=Rc,i=e.contextType;return typeof i=="object"&&i!==null?i=Hs(i):(s=Zr(e)?Vl:hr.current,r=e.contextTypes,i=(r=r!=null)?nh(t,s):Rc),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=H0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function g2(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&H0.enqueueReplaceState(e,e.state,null)}function uE(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},mS(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Hs(i):(i=Zr(e)?Vl:hr.current,s.context=nh(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(lE(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&H0.enqueueReplaceState(s,s.state,null),Mw(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function oh(t,e){try{var n="",r=e;do n+=uL(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function $b(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function dE(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var UM=typeof WeakMap=="function"?WeakMap:Map;function F3(t,e,n){n=Wo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ww||(Ww=!0,_E=r),dE(t,e)},n}function z3(t,e,n){n=Wo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){dE(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){dE(t,e),typeof r!="function"&&(vc===null?vc=new Set([this]):vc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function m2(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new UM;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=JM.bind(null,t,e,n),e.then(t,t))}function y2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function w2(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Wo(-1,1),e.tag=2,wc(n,e,1))),n.lanes|=1),t)}var LM=oa.ReactCurrentOwner,Yr=!1;function vr(t,e,n,r){e.child=t===null?y3(e,null,n,r):sh(e,t.child,n,r)}function v2(t,e,n,r,s){n=n.render;var i=e.ref;return Rd(e,s),r=_S(t,e,n,r,i,s),n=ES(),t!==null&&!Yr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xo(t,e,s)):(Ht&&n&&lS(e),e.flags|=1,vr(t,e,r,s),e.child)}function b2(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!OS(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,q3(t,e,i,r,s)):(t=sw(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Op,n(o,r)&&t.ref===e.ref)return Xo(t,e,s)}return e.flags|=1,t=_c(i,r),t.ref=e.ref,t.return=e,e.child=t}function q3(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Op(i,r)&&t.ref===e.ref)if(Yr=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Yr=!0);else return e.lanes=t.lanes,Xo(t,e,s)}return hE(t,e,n,r,s)}function W3(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$t(Sd,ds),ds|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$t(Sd,ds),ds|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,$t(Sd,ds),ds|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,$t(Sd,ds),ds|=r;return vr(t,e,s,n),e.child}function H3(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function hE(t,e,n,r,s){var i=Zr(n)?Vl:hr.current;return i=nh(e,i),Rd(e,s),n=_S(t,e,n,r,i,s),r=ES(),t!==null&&!Yr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xo(t,e,s)):(Ht&&r&&lS(e),e.flags|=1,vr(t,e,n,s),e.child)}function _2(t,e,n,r,s){if(Zr(n)){var i=!0;$w(e)}else i=!1;if(Rd(e,s),e.stateNode===null)tw(t,e),B3(e,n,r),uE(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Hs(l):(l=Zr(n)?Vl:hr.current,l=nh(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&g2(e,o,r,l),Ua=!1;var h=e.memoizedState;o.state=h,Mw(e,r,o,s),c=e.memoizedState,a!==r||h!==c||Jr.current||Ua?(typeof u=="function"&&(lE(e,n,u,r),c=e.memoizedState),(a=Ua||p2(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,v3(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:li(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Hs(c):(c=Zr(n)?Vl:hr.current,c=nh(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&g2(e,o,r,c),Ua=!1,h=e.memoizedState,o.state=h,Mw(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||Jr.current||Ua?(typeof f=="function"&&(lE(e,n,f,r),p=e.memoizedState),(l=Ua||p2(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return fE(t,e,n,r,i,s)}function fE(t,e,n,r,s,i){H3(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&o2(e,n,!1),Xo(t,e,i);r=e.stateNode,LM.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=sh(e,t.child,null,i),e.child=sh(e,null,a,i)):vr(t,e,a,i),e.memoizedState=r.state,s&&o2(e,n,!0),e.child}function V3(t){var e=t.stateNode;e.pendingContext?i2(t,e.pendingContext,e.pendingContext!==e.context):e.context&&i2(t,e.context,!1),yS(t,e.containerInfo)}function E2(t,e,n,r,s){return rh(),dS(s),e.flags|=256,vr(t,e,n,r),e.child}var pE={dehydrated:null,treeContext:null,retryLane:0};function gE(t){return{baseLanes:t,cachePool:null,transitions:null}}function G3(t,e,n){var r=e.pendingProps,s=Yt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),$t(Yt,s&1),t===null)return aE(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=K0(o,r,0,null),t=Fl(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=gE(n),e.memoizedState=pE,t):SS(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return MM(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=_c(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=_c(a,i):(i=Fl(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?gE(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=pE,r}return i=t.child,t=i.sibling,r=_c(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function SS(t,e){return e=K0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qm(t,e,n,r){return r!==null&&dS(r),sh(e,t.child,null,n),t=SS(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function MM(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=$b(Error(ie(422))),Qm(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=K0({mode:"visible",children:r.children},s,0,null),i=Fl(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&sh(e,t.child,null,o),e.child.memoizedState=gE(o),e.memoizedState=pE,i);if(!(e.mode&1))return Qm(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(ie(419)),r=$b(i,r,void 0),Qm(t,e,o,r)}if(a=(o&t.childLanes)!==0,Yr||a){if(r=Rn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Zo(t,s),Ei(r,t,s,-1))}return kS(),r=$b(Error(ie(421))),Qm(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=ZM.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,gs=yc(s.nextSibling),ys=e,Ht=!0,pi=null,t!==null&&(Ms[Bs++]=Fo,Ms[Bs++]=zo,Ms[Bs++]=Gl,Fo=t.id,zo=t.overflow,Gl=e),e=SS(e,r.children),e.flags|=4096,e)}function C2(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),cE(t.return,e,n)}function Db(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function K3(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(vr(t,e,r.children,n),r=Yt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&C2(t,n,e);else if(t.tag===19)C2(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if($t(Yt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Bw(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Db(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Bw(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Db(e,!0,n,null,i);break;case"together":Db(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function tw(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Yl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ie(153));if(e.child!==null){for(t=e.child,n=_c(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_c(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function BM(t,e,n){switch(e.tag){case 3:V3(e),rh();break;case 5:b3(e);break;case 1:Zr(e.type)&&$w(e);break;case 4:yS(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;$t(Uw,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?($t(Yt,Yt.current&1),e.flags|=128,null):n&e.child.childLanes?G3(t,e,n):($t(Yt,Yt.current&1),t=Xo(t,e,n),t!==null?t.sibling:null);$t(Yt,Yt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return K3(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$t(Yt,Yt.current),r)break;return null;case 22:case 23:return e.lanes=0,W3(t,e,n)}return Xo(t,e,n)}var Y3,mE,Q3,J3;Y3=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mE=function(){};Q3=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,_l(ro.current);var i=null;switch(n){case"input":s=L_(t,s),r=L_(t,r),i=[];break;case"select":s=Zt({},s,{value:void 0}),r=Zt({},r,{value:void 0}),i=[];break;case"textarea":s=F_(t,s),r=F_(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ow)}q_(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Sp.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Sp.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Lt("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};J3=function(t,e,n,r){n!==r&&(e.flags|=4)};function Xh(t,e){if(!Ht)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function tr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function FM(t,e,n){var r=e.pendingProps;switch(uS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tr(e),null;case 1:return Zr(e.type)&&Rw(),tr(e),null;case 3:return r=e.stateNode,ih(),Ft(Jr),Ft(hr),vS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Km(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,pi!==null&&(xE(pi),pi=null))),mE(t,e),tr(e),null;case 5:wS(e);var s=_l(Up.current);if(n=e.type,t!==null&&e.stateNode!=null)Q3(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ie(166));return tr(e),null}if(t=_l(ro.current),Km(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Xi]=e,r[Dp]=i,t=(e.mode&1)!==0,n){case"dialog":Lt("cancel",r),Lt("close",r);break;case"iframe":case"object":case"embed":Lt("load",r);break;case"video":case"audio":for(s=0;s<Rf.length;s++)Lt(Rf[s],r);break;case"source":Lt("error",r);break;case"img":case"image":case"link":Lt("error",r),Lt("load",r);break;case"details":Lt("toggle",r);break;case"input":OI(r,i),Lt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Lt("invalid",r);break;case"textarea":$I(r,i),Lt("invalid",r)}q_(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Gm(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Gm(r.textContent,a,t),s=["children",""+a]):Sp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Lt("scroll",r)}switch(n){case"input":Mm(r),RI(r,i,!0);break;case"textarea":Mm(r),DI(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ow)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=SR(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Xi]=e,t[Dp]=r,Y3(t,e,!1,!1),e.stateNode=t;e:{switch(o=W_(n,r),n){case"dialog":Lt("cancel",t),Lt("close",t),s=r;break;case"iframe":case"object":case"embed":Lt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Rf.length;s++)Lt(Rf[s],t);s=r;break;case"source":Lt("error",t),s=r;break;case"img":case"image":case"link":Lt("error",t),Lt("load",t),s=r;break;case"details":Lt("toggle",t),s=r;break;case"input":OI(t,r),s=L_(t,r),Lt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Zt({},r,{value:void 0}),Lt("invalid",t);break;case"textarea":$I(t,r),s=F_(t,r),Lt("invalid",t);break;default:s=r}q_(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?TR(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&AR(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ap(t,c):typeof c=="number"&&Ap(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Sp.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Lt("scroll",t):c!=null&&Yx(t,i,c,o))}switch(n){case"input":Mm(t),RI(t,r,!1);break;case"textarea":Mm(t),DI(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Oc(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Nd(t,!!r.multiple,i,!1):r.defaultValue!=null&&Nd(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ow)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return tr(e),null;case 6:if(t&&e.stateNode!=null)J3(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ie(166));if(n=_l(Up.current),_l(ro.current),Km(e)){if(r=e.stateNode,n=e.memoizedProps,r[Xi]=e,(i=r.nodeValue!==n)&&(t=ys,t!==null))switch(t.tag){case 3:Gm(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Gm(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xi]=e,e.stateNode=r}return tr(e),null;case 13:if(Ft(Yt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ht&&gs!==null&&e.mode&1&&!(e.flags&128))g3(),rh(),e.flags|=98560,i=!1;else if(i=Km(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ie(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ie(317));i[Xi]=e}else rh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;tr(e),i=!1}else pi!==null&&(xE(pi),pi=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Yt.current&1?Cn===0&&(Cn=3):kS())),e.updateQueue!==null&&(e.flags|=4),tr(e),null);case 4:return ih(),mE(t,e),t===null&&Rp(e.stateNode.containerInfo),tr(e),null;case 10:return pS(e.type._context),tr(e),null;case 17:return Zr(e.type)&&Rw(),tr(e),null;case 19:if(Ft(Yt),i=e.memoizedState,i===null)return tr(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Xh(i,!1);else{if(Cn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Bw(t),o!==null){for(e.flags|=128,Xh(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $t(Yt,Yt.current&1|2),e.child}t=t.sibling}i.tail!==null&&an()>ah&&(e.flags|=128,r=!0,Xh(i,!1),e.lanes=4194304)}else{if(!r)if(t=Bw(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Xh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ht)return tr(e),null}else 2*an()-i.renderingStartTime>ah&&n!==1073741824&&(e.flags|=128,r=!0,Xh(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=an(),e.sibling=null,n=Yt.current,$t(Yt,r?n&1|2:n&1),e):(tr(e),null);case 22:case 23:return PS(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ds&1073741824&&(tr(e),e.subtreeFlags&6&&(e.flags|=8192)):tr(e),null;case 24:return null;case 25:return null}throw Error(ie(156,e.tag))}function zM(t,e){switch(uS(e),e.tag){case 1:return Zr(e.type)&&Rw(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ih(),Ft(Jr),Ft(hr),vS(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wS(e),null;case 13:if(Ft(Yt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ie(340));rh()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ft(Yt),null;case 4:return ih(),null;case 10:return pS(e.type._context),null;case 22:case 23:return PS(),null;case 24:return null;default:return null}}var Jm=!1,dr=!1,qM=typeof WeakSet=="function"?WeakSet:Set,xe=null;function xd(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){nn(t,e,r)}else n.current=null}function yE(t,e,n){try{n()}catch(r){nn(t,e,r)}}var x2=!1;function WM(t,e){if(eE=Nw,t=n3(),cS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tE={focusedElem:t,selectionRange:n},Nw=!1,xe=e;xe!==null;)if(e=xe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,xe=t;else for(;xe!==null;){e=xe;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,y=p.memoizedState,w=e.stateNode,b=w.getSnapshotBeforeUpdate(e.elementType===e.type?g:li(e.type,g),y);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch(E){nn(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,xe=t;break}xe=e.return}return p=x2,x2=!1,p}function Xf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&yE(e,n,i)}s=s.next}while(s!==r)}}function V0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function wE(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Z3(t){var e=t.alternate;e!==null&&(t.alternate=null,Z3(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xi],delete e[Dp],delete e[sE],delete e[AM],delete e[IM])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function X3(t){return t.tag===5||t.tag===3||t.tag===4}function S2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||X3(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ow));else if(r!==4&&(t=t.child,t!==null))for(vE(t,e,n),t=t.sibling;t!==null;)vE(t,e,n),t=t.sibling}function bE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(bE(t,e,n),t=t.sibling;t!==null;)bE(t,e,n),t=t.sibling}var qn=null,hi=!1;function fa(t,e,n){for(n=n.child;n!==null;)e$(t,e,n),n=n.sibling}function e$(t,e,n){if(no&&typeof no.onCommitFiberUnmount=="function")try{no.onCommitFiberUnmount(L0,n)}catch{}switch(n.tag){case 5:dr||xd(n,e);case 6:var r=qn,s=hi;qn=null,fa(t,e,n),qn=r,hi=s,qn!==null&&(hi?(t=qn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qn.removeChild(n.stateNode));break;case 18:qn!==null&&(hi?(t=qn,n=n.stateNode,t.nodeType===8?Tb(t.parentNode,n):t.nodeType===1&&Tb(t,n),Pp(t)):Tb(qn,n.stateNode));break;case 4:r=qn,s=hi,qn=n.stateNode.containerInfo,hi=!0,fa(t,e,n),qn=r,hi=s;break;case 0:case 11:case 14:case 15:if(!dr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&yE(n,e,o),s=s.next}while(s!==r)}fa(t,e,n);break;case 1:if(!dr&&(xd(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){nn(n,e,a)}fa(t,e,n);break;case 21:fa(t,e,n);break;case 22:n.mode&1?(dr=(r=dr)||n.memoizedState!==null,fa(t,e,n),dr=r):fa(t,e,n);break;default:fa(t,e,n)}}function A2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new qM),e.forEach(function(r){var s=XM.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ei(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:qn=a.stateNode,hi=!1;break e;case 3:qn=a.stateNode.containerInfo,hi=!0;break e;case 4:qn=a.stateNode.containerInfo,hi=!0;break e}a=a.return}if(qn===null)throw Error(ie(160));e$(i,o,s),qn=null,hi=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){nn(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)t$(e,t),e=e.sibling}function t$(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ei(e,t),Di(t),r&4){try{Xf(3,t,t.return),V0(3,t)}catch(g){nn(t,t.return,g)}try{Xf(5,t,t.return)}catch(g){nn(t,t.return,g)}}break;case 1:ei(e,t),Di(t),r&512&&n!==null&&xd(n,n.return);break;case 5:if(ei(e,t),Di(t),r&512&&n!==null&&xd(n,n.return),t.flags&32){var s=t.stateNode;try{Ap(s,"")}catch(g){nn(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&CR(s,i),W_(a,o);var l=W_(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?TR(s,d):u==="dangerouslySetInnerHTML"?AR(s,d):u==="children"?Ap(s,d):Yx(s,u,d,l)}switch(a){case"input":M_(s,i);break;case"textarea":xR(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Nd(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?Nd(s,!!i.multiple,i.defaultValue,!0):Nd(s,!!i.multiple,i.multiple?[]:"",!1))}s[Dp]=i}catch(g){nn(t,t.return,g)}}break;case 6:if(ei(e,t),Di(t),r&4){if(t.stateNode===null)throw Error(ie(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){nn(t,t.return,g)}}break;case 3:if(ei(e,t),Di(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pp(e.containerInfo)}catch(g){nn(t,t.return,g)}break;case 4:ei(e,t),Di(t);break;case 13:ei(e,t),Di(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(TS=an())),r&4&&A2(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(dr=(l=dr)||u,ei(e,t),dr=l):ei(e,t),Di(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(xe=t,u=t.child;u!==null;){for(d=xe=u;xe!==null;){switch(h=xe,f=h.child,h.tag){case 0:case 11:case 14:case 15:Xf(4,h,h.return);break;case 1:xd(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){nn(r,n,g)}}break;case 5:xd(h,h.return);break;case 22:if(h.memoizedState!==null){T2(d);continue}}f!==null?(f.return=h,xe=f):T2(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=IR("display",o))}catch(g){nn(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){nn(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ei(e,t),Di(t),r&4&&A2(t);break;case 21:break;default:ei(e,t),Di(t)}}function Di(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(X3(n)){var r=n;break e}n=n.return}throw Error(ie(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ap(s,""),r.flags&=-33);var i=S2(t);bE(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=S2(t);vE(t,a,o);break;default:throw Error(ie(161))}}catch(c){nn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function HM(t,e,n){xe=t,n$(t)}function n$(t,e,n){for(var r=(t.mode&1)!==0;xe!==null;){var s=xe,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Jm;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||dr;a=Jm;var l=dr;if(Jm=o,(dr=c)&&!l)for(xe=s;xe!==null;)o=xe,c=o.child,o.tag===22&&o.memoizedState!==null?N2(s):c!==null?(c.return=o,xe=c):N2(s);for(;i!==null;)xe=i,n$(i),i=i.sibling;xe=s,Jm=a,dr=l}I2(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,xe=i):I2(t)}}function I2(t){for(;xe!==null;){var e=xe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dr||V0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!dr)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:li(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&d2(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}d2(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Pp(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ie(163))}dr||e.flags&512&&wE(e)}catch(h){nn(e,e.return,h)}}if(e===t){xe=null;break}if(n=e.sibling,n!==null){n.return=e.return,xe=n;break}xe=e.return}}function T2(t){for(;xe!==null;){var e=xe;if(e===t){xe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,xe=n;break}xe=e.return}}function N2(t){for(;xe!==null;){var e=xe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{V0(4,e)}catch(c){nn(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){nn(e,s,c)}}var i=e.return;try{wE(e)}catch(c){nn(e,i,c)}break;case 5:var o=e.return;try{wE(e)}catch(c){nn(e,o,c)}}}catch(c){nn(e,e.return,c)}if(e===t){xe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,xe=a;break}xe=e.return}}var VM=Math.ceil,qw=oa.ReactCurrentDispatcher,AS=oa.ReactCurrentOwner,Ws=oa.ReactCurrentBatchConfig,ot=0,Rn=null,fn=null,Hn=0,ds=0,Sd=Wc(0),Cn=0,Fp=null,Yl=0,G0=0,IS=0,ep=null,Gr=null,TS=0,ah=1/0,Oo=null,Ww=!1,_E=null,vc=null,Zm=!1,cc=null,Hw=0,tp=0,EE=null,nw=-1,rw=0;function Er(){return ot&6?an():nw!==-1?nw:nw=an()}function bc(t){return t.mode&1?ot&2&&Hn!==0?Hn&-Hn:NM.transition!==null?(rw===0&&(rw=BR()),rw):(t=_t,t!==0||(t=window.event,t=t===void 0?16:GR(t.type)),t):1}function Ei(t,e,n,r){if(50<tp)throw tp=0,EE=null,Error(ie(185));Kg(t,n,r),(!(ot&2)||t!==Rn)&&(t===Rn&&(!(ot&2)&&(G0|=n),Cn===4&&Va(t,Hn)),Xr(t,r),n===1&&ot===0&&!(e.mode&1)&&(ah=an()+500,q0&&Hc()))}function Xr(t,e){var n=t.callbackNode;NL(t,e);var r=Tw(t,t===Rn?Hn:0);if(r===0)n!==null&&LI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&LI(n),e===1)t.tag===0?TM(P2.bind(null,t)):h3(P2.bind(null,t)),xM(function(){!(ot&6)&&Hc()}),n=null;else{switch(FR(r)){case 1:n=eS;break;case 4:n=LR;break;case 16:n=Iw;break;case 536870912:n=MR;break;default:n=Iw}n=u$(n,r$.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function r$(t,e){if(nw=-1,rw=0,ot&6)throw Error(ie(327));var n=t.callbackNode;if($d()&&t.callbackNode!==n)return null;var r=Tw(t,t===Rn?Hn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Vw(t,r);else{e=r;var s=ot;ot|=2;var i=i$();(Rn!==t||Hn!==e)&&(Oo=null,ah=an()+500,Bl(t,e));do try{YM();break}catch(a){s$(t,a)}while(!0);fS(),qw.current=i,ot=s,fn!==null?e=0:(Rn=null,Hn=0,e=Cn)}if(e!==0){if(e===2&&(s=Y_(t),s!==0&&(r=s,e=CE(t,s))),e===1)throw n=Fp,Bl(t,0),Va(t,r),Xr(t,an()),n;if(e===6)Va(t,r);else{if(s=t.current.alternate,!(r&30)&&!GM(s)&&(e=Vw(t,r),e===2&&(i=Y_(t),i!==0&&(r=i,e=CE(t,i))),e===1))throw n=Fp,Bl(t,0),Va(t,r),Xr(t,an()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ie(345));case 2:ul(t,Gr,Oo);break;case 3:if(Va(t,r),(r&130023424)===r&&(e=TS+500-an(),10<e)){if(Tw(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Er(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=rE(ul.bind(null,t,Gr,Oo),e);break}ul(t,Gr,Oo);break;case 4:if(Va(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-_i(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=an()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*VM(r/1960))-r,10<r){t.timeoutHandle=rE(ul.bind(null,t,Gr,Oo),r);break}ul(t,Gr,Oo);break;case 5:ul(t,Gr,Oo);break;default:throw Error(ie(329))}}}return Xr(t,an()),t.callbackNode===n?r$.bind(null,t):null}function CE(t,e){var n=ep;return t.current.memoizedState.isDehydrated&&(Bl(t,e).flags|=256),t=Vw(t,e),t!==2&&(e=Gr,Gr=n,e!==null&&xE(e)),t}function xE(t){Gr===null?Gr=t:Gr.push.apply(Gr,t)}function GM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ai(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Va(t,e){for(e&=~IS,e&=~G0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-_i(e),r=1<<n;t[n]=-1,e&=~r}}function P2(t){if(ot&6)throw Error(ie(327));$d();var e=Tw(t,0);if(!(e&1))return Xr(t,an()),null;var n=Vw(t,e);if(t.tag!==0&&n===2){var r=Y_(t);r!==0&&(e=r,n=CE(t,r))}if(n===1)throw n=Fp,Bl(t,0),Va(t,e),Xr(t,an()),n;if(n===6)throw Error(ie(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ul(t,Gr,Oo),Xr(t,an()),null}function NS(t,e){var n=ot;ot|=1;try{return t(e)}finally{ot=n,ot===0&&(ah=an()+500,q0&&Hc())}}function Ql(t){cc!==null&&cc.tag===0&&!(ot&6)&&$d();var e=ot;ot|=1;var n=Ws.transition,r=_t;try{if(Ws.transition=null,_t=1,t)return t()}finally{_t=r,Ws.transition=n,ot=e,!(ot&6)&&Hc()}}function PS(){ds=Sd.current,Ft(Sd)}function Bl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,CM(n)),fn!==null)for(n=fn.return;n!==null;){var r=n;switch(uS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Rw();break;case 3:ih(),Ft(Jr),Ft(hr),vS();break;case 5:wS(r);break;case 4:ih();break;case 13:Ft(Yt);break;case 19:Ft(Yt);break;case 10:pS(r.type._context);break;case 22:case 23:PS()}n=n.return}if(Rn=t,fn=t=_c(t.current,null),Hn=ds=e,Cn=0,Fp=null,IS=G0=Yl=0,Gr=ep=null,bl!==null){for(e=0;e<bl.length;e++)if(n=bl[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}bl=null}return t}function s$(t,e){do{var n=fn;try{if(fS(),Xy.current=zw,Fw){for(var r=Jt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Fw=!1}if(Kl=0,Nn=bn=Jt=null,Zf=!1,Lp=0,AS.current=null,n===null||n.return===null){Cn=1,Fp=e,fn=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Hn,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=y2(o);if(f!==null){f.flags&=-257,w2(f,o,a,i,e),f.mode&1&&m2(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){m2(i,l,e),kS();break e}c=Error(ie(426))}}else if(Ht&&a.mode&1){var y=y2(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),w2(y,o,a,i,e),dS(oh(c,a));break e}}i=c=oh(c,a),Cn!==4&&(Cn=2),ep===null?ep=[i]:ep.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=F3(i,c,e);u2(i,w);break e;case 1:a=c;var b=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(vc===null||!vc.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=z3(i,a,e);u2(i,E);break e}}i=i.return}while(i!==null)}a$(n)}catch(_){e=_,fn===n&&n!==null&&(fn=n=n.return);continue}break}while(!0)}function i$(){var t=qw.current;return qw.current=zw,t===null?zw:t}function kS(){(Cn===0||Cn===3||Cn===2)&&(Cn=4),Rn===null||!(Yl&268435455)&&!(G0&268435455)||Va(Rn,Hn)}function Vw(t,e){var n=ot;ot|=2;var r=i$();(Rn!==t||Hn!==e)&&(Oo=null,Bl(t,e));do try{KM();break}catch(s){s$(t,s)}while(!0);if(fS(),ot=n,qw.current=r,fn!==null)throw Error(ie(261));return Rn=null,Hn=0,Cn}function KM(){for(;fn!==null;)o$(fn)}function YM(){for(;fn!==null&&!bL();)o$(fn)}function o$(t){var e=l$(t.alternate,t,ds);t.memoizedProps=t.pendingProps,e===null?a$(t):fn=e,AS.current=null}function a$(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=zM(n,e),n!==null){n.flags&=32767,fn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Cn=6,fn=null;return}}else if(n=FM(n,e,ds),n!==null){fn=n;return}if(e=e.sibling,e!==null){fn=e;return}fn=e=t}while(e!==null);Cn===0&&(Cn=5)}function ul(t,e,n){var r=_t,s=Ws.transition;try{Ws.transition=null,_t=1,QM(t,e,n,r)}finally{Ws.transition=s,_t=r}return null}function QM(t,e,n,r){do $d();while(cc!==null);if(ot&6)throw Error(ie(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ie(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(PL(t,i),t===Rn&&(fn=Rn=null,Hn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zm||(Zm=!0,u$(Iw,function(){return $d(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ws.transition,Ws.transition=null;var o=_t;_t=1;var a=ot;ot|=4,AS.current=null,WM(t,n),t$(n,t),mM(tE),Nw=!!eE,tE=eE=null,t.current=n,HM(n),_L(),ot=a,_t=o,Ws.transition=i}else t.current=n;if(Zm&&(Zm=!1,cc=t,Hw=s),i=t.pendingLanes,i===0&&(vc=null),xL(n.stateNode),Xr(t,an()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ww)throw Ww=!1,t=_E,_E=null,t;return Hw&1&&t.tag!==0&&$d(),i=t.pendingLanes,i&1?t===EE?tp++:(tp=0,EE=t):tp=0,Hc(),null}function $d(){if(cc!==null){var t=FR(Hw),e=Ws.transition,n=_t;try{if(Ws.transition=null,_t=16>t?16:t,cc===null)var r=!1;else{if(t=cc,cc=null,Hw=0,ot&6)throw Error(ie(331));var s=ot;for(ot|=4,xe=t.current;xe!==null;){var i=xe,o=i.child;if(xe.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(xe=l;xe!==null;){var u=xe;switch(u.tag){case 0:case 11:case 15:Xf(8,u,i)}var d=u.child;if(d!==null)d.return=u,xe=d;else for(;xe!==null;){u=xe;var h=u.sibling,f=u.return;if(Z3(u),u===l){xe=null;break}if(h!==null){h.return=f,xe=h;break}xe=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}xe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,xe=o;else e:for(;xe!==null;){if(i=xe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Xf(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,xe=w;break e}xe=i.return}}var b=t.current;for(xe=b;xe!==null;){o=xe;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,xe=v;else e:for(o=b;xe!==null;){if(a=xe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:V0(9,a)}}catch(_){nn(a,a.return,_)}if(a===o){xe=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,xe=E;break e}xe=a.return}}if(ot=s,Hc(),no&&typeof no.onPostCommitFiberRoot=="function")try{no.onPostCommitFiberRoot(L0,t)}catch{}r=!0}return r}finally{_t=n,Ws.transition=e}}return!1}function k2(t,e,n){e=oh(n,e),e=F3(t,e,1),t=wc(t,e,1),e=Er(),t!==null&&(Kg(t,1,e),Xr(t,e))}function nn(t,e,n){if(t.tag===3)k2(t,t,n);else for(;e!==null;){if(e.tag===3){k2(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vc===null||!vc.has(r))){t=oh(n,t),t=z3(e,t,1),e=wc(e,t,1),t=Er(),e!==null&&(Kg(e,1,t),Xr(e,t));break}}e=e.return}}function JM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Er(),t.pingedLanes|=t.suspendedLanes&n,Rn===t&&(Hn&n)===n&&(Cn===4||Cn===3&&(Hn&130023424)===Hn&&500>an()-TS?Bl(t,0):IS|=n),Xr(t,e)}function c$(t,e){e===0&&(t.mode&1?(e=zm,zm<<=1,!(zm&130023424)&&(zm=4194304)):e=1);var n=Er();t=Zo(t,e),t!==null&&(Kg(t,e,n),Xr(t,n))}function ZM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),c$(t,n)}function XM(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ie(314))}r!==null&&r.delete(e),c$(t,n)}var l$;l$=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Jr.current)Yr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Yr=!1,BM(t,e,n);Yr=!!(t.flags&131072)}else Yr=!1,Ht&&e.flags&1048576&&f3(e,jw,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;tw(t,e),t=e.pendingProps;var s=nh(e,hr.current);Rd(e,n),s=_S(null,e,r,t,s,n);var i=ES();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zr(r)?(i=!0,$w(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,mS(e),s.updater=H0,e.stateNode=s,s._reactInternals=e,uE(e,r,t,n),e=fE(null,e,r,!0,i,n)):(e.tag=0,Ht&&i&&lS(e),vr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(tw(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=tB(r),t=li(r,t),s){case 0:e=hE(null,e,r,t,n);break e;case 1:e=_2(null,e,r,t,n);break e;case 11:e=v2(null,e,r,t,n);break e;case 14:e=b2(null,e,r,li(r.type,t),n);break e}throw Error(ie(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:li(r,s),hE(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:li(r,s),_2(t,e,r,s,n);case 3:e:{if(V3(e),t===null)throw Error(ie(387));r=e.pendingProps,i=e.memoizedState,s=i.element,v3(t,e),Mw(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=oh(Error(ie(423)),e),e=E2(t,e,r,n,s);break e}else if(r!==s){s=oh(Error(ie(424)),e),e=E2(t,e,r,n,s);break e}else for(gs=yc(e.stateNode.containerInfo.firstChild),ys=e,Ht=!0,pi=null,n=y3(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(rh(),r===s){e=Xo(t,e,n);break e}vr(t,e,r,n)}e=e.child}return e;case 5:return b3(e),t===null&&aE(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,nE(r,s)?o=null:i!==null&&nE(r,i)&&(e.flags|=32),H3(t,e),vr(t,e,o,n),e.child;case 6:return t===null&&aE(e),null;case 13:return G3(t,e,n);case 4:return yS(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=sh(e,null,r,n):vr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:li(r,s),v2(t,e,r,s,n);case 7:return vr(t,e,e.pendingProps,n),e.child;case 8:return vr(t,e,e.pendingProps.children,n),e.child;case 12:return vr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,$t(Uw,r._currentValue),r._currentValue=o,i!==null)if(Ai(i.value,o)){if(i.children===s.children&&!Jr.current){e=Xo(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Wo(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),cE(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ie(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),cE(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}vr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Rd(e,n),s=Hs(s),r=r(s),e.flags|=1,vr(t,e,r,n),e.child;case 14:return r=e.type,s=li(r,e.pendingProps),s=li(r.type,s),b2(t,e,r,s,n);case 15:return q3(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:li(r,s),tw(t,e),e.tag=1,Zr(r)?(t=!0,$w(e)):t=!1,Rd(e,n),B3(e,r,s),uE(e,r,s,n),fE(null,e,r,!0,t,n);case 19:return K3(t,e,n);case 22:return W3(t,e,n)}throw Error(ie(156,e.tag))};function u$(t,e){return UR(t,e)}function eB(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fs(t,e,n,r){return new eB(t,e,n,r)}function OS(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tB(t){if(typeof t=="function")return OS(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Jx)return 11;if(t===Zx)return 14}return 2}function _c(t,e){var n=t.alternate;return n===null?(n=Fs(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function sw(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")OS(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case gd:return Fl(n.children,s,i,e);case Qx:o=8,s|=8;break;case $_:return t=Fs(12,n,e,s|2),t.elementType=$_,t.lanes=i,t;case D_:return t=Fs(13,n,e,s),t.elementType=D_,t.lanes=i,t;case j_:return t=Fs(19,n,e,s),t.elementType=j_,t.lanes=i,t;case bR:return K0(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case wR:o=10;break e;case vR:o=9;break e;case Jx:o=11;break e;case Zx:o=14;break e;case ja:o=16,r=null;break e}throw Error(ie(130,t==null?t:typeof t,""))}return e=Fs(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Fl(t,e,n,r){return t=Fs(7,t,r,e),t.lanes=n,t}function K0(t,e,n,r){return t=Fs(22,t,r,e),t.elementType=bR,t.lanes=n,t.stateNode={isHidden:!1},t}function jb(t,e,n){return t=Fs(6,t,null,e),t.lanes=n,t}function Ub(t,e,n){return e=Fs(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function nB(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yb(0),this.expirationTimes=yb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yb(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function RS(t,e,n,r,s,i,o,a,c){return t=new nB(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Fs(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mS(i),t}function rB(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pd,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function d$(t){if(!t)return Rc;t=t._reactInternals;e:{if(yu(t)!==t||t.tag!==1)throw Error(ie(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ie(171))}if(t.tag===1){var n=t.type;if(Zr(n))return d3(t,n,e)}return e}function h$(t,e,n,r,s,i,o,a,c){return t=RS(n,r,!0,t,s,i,o,a,c),t.context=d$(null),n=t.current,r=Er(),s=bc(n),i=Wo(r,s),i.callback=e??null,wc(n,i,s),t.current.lanes=s,Kg(t,s,r),Xr(t,r),t}function Y0(t,e,n,r){var s=e.current,i=Er(),o=bc(s);return n=d$(n),e.context===null?e.context=n:e.pendingContext=n,e=Wo(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=wc(s,e,o),t!==null&&(Ei(t,s,o,i),Zy(t,s,o)),o}function Gw(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function O2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $S(t,e){O2(t,e),(t=t.alternate)&&O2(t,e)}function sB(){return null}var f$=typeof reportError=="function"?reportError:function(t){console.error(t)};function DS(t){this._internalRoot=t}Q0.prototype.render=DS.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ie(409));Y0(t,e,null,null)};Q0.prototype.unmount=DS.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ql(function(){Y0(null,t,null,null)}),e[Jo]=null}};function Q0(t){this._internalRoot=t}Q0.prototype.unstable_scheduleHydration=function(t){if(t){var e=WR();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ha.length&&e!==0&&e<Ha[n].priority;n++);Ha.splice(n,0,t),n===0&&VR(t)}};function jS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function J0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function R2(){}function iB(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=Gw(o);i.call(l)}}var o=h$(e,r,t,0,null,!1,!1,"",R2);return t._reactRootContainer=o,t[Jo]=o.current,Rp(t.nodeType===8?t.parentNode:t),Ql(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=Gw(c);a.call(l)}}var c=RS(t,0,!1,null,null,!1,!1,"",R2);return t._reactRootContainer=c,t[Jo]=c.current,Rp(t.nodeType===8?t.parentNode:t),Ql(function(){Y0(e,c,n,r)}),c}function Z0(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Gw(o);a.call(c)}}Y0(e,o,t,s)}else o=iB(n,e,t,s,r);return Gw(o)}zR=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Of(e.pendingLanes);n!==0&&(tS(e,n|1),Xr(e,an()),!(ot&6)&&(ah=an()+500,Hc()))}break;case 13:Ql(function(){var r=Zo(t,1);if(r!==null){var s=Er();Ei(r,t,1,s)}}),$S(t,1)}};nS=function(t){if(t.tag===13){var e=Zo(t,134217728);if(e!==null){var n=Er();Ei(e,t,134217728,n)}$S(t,134217728)}};qR=function(t){if(t.tag===13){var e=bc(t),n=Zo(t,e);if(n!==null){var r=Er();Ei(n,t,e,r)}$S(t,e)}};WR=function(){return _t};HR=function(t,e){var n=_t;try{return _t=t,e()}finally{_t=n}};V_=function(t,e,n){switch(e){case"input":if(M_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=z0(r);if(!s)throw Error(ie(90));ER(r),M_(r,s)}}}break;case"textarea":xR(t,n);break;case"select":e=n.value,e!=null&&Nd(t,!!n.multiple,e,!1)}};kR=NS;OR=Ql;var oB={usingClientEntryPoint:!1,Events:[Qg,vd,z0,NR,PR,NS]},ef={findFiberByHostInstance:vl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aB={bundleType:ef.bundleType,version:ef.version,rendererPackageName:ef.rendererPackageName,rendererConfig:ef.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oa.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=DR(t),t===null?null:t.stateNode},findFiberByHostInstance:ef.findFiberByHostInstance||sB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xm.isDisabled&&Xm.supportsFiber)try{L0=Xm.inject(aB),no=Xm}catch{}}Es.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oB;Es.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jS(e))throw Error(ie(200));return rB(t,e,null,n)};Es.createRoot=function(t,e){if(!jS(t))throw Error(ie(299));var n=!1,r="",s=f$;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=RS(t,1,!1,null,null,n,!1,r,s),t[Jo]=e.current,Rp(t.nodeType===8?t.parentNode:t),new DS(e)};Es.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ie(188)):(t=Object.keys(t).join(","),Error(ie(268,t)));return t=DR(e),t=t===null?null:t.stateNode,t};Es.flushSync=function(t){return Ql(t)};Es.hydrate=function(t,e,n){if(!J0(e))throw Error(ie(200));return Z0(null,t,e,!0,n)};Es.hydrateRoot=function(t,e,n){if(!jS(t))throw Error(ie(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=f$;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=h$(e,null,t,1,n??null,s,!1,i,o),t[Jo]=e.current,Rp(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Q0(e)};Es.render=function(t,e,n){if(!J0(e))throw Error(ie(200));return Z0(null,t,e,!1,n)};Es.unmountComponentAtNode=function(t){if(!J0(t))throw Error(ie(40));return t._reactRootContainer?(Ql(function(){Z0(null,null,t,!1,function(){t._reactRootContainer=null,t[Jo]=null})}),!0):!1};Es.unstable_batchedUpdates=NS;Es.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!J0(n))throw Error(ie(200));if(t==null||t._reactInternals===void 0)throw Error(ie(38));return Z0(t,e,n,!1,r)};Es.version="18.3.1-next-f1338f8080-20240426";function p$(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(p$)}catch(t){console.error(t)}}p$(),pR.exports=Es;var US=pR.exports,$2=US;O_.createRoot=$2.createRoot,O_.hydrateRoot=$2.hydrateRoot;const g$="2.31.4";let tf={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${g$}`},ne=class SE extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof SE?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof SE&&n.cause.docsPath||n.docsPath,i=(a=tf.getDocsUrl)==null?void 0:a.call(tf,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...tf.version?[`Version: ${tf.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=g$}walk(e){return m$(this,e)}};function m$(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?m$(t.cause,e):e?null:t}let y$=class extends ne{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class cB extends ne{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}let lB=class extends ne{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};class w$ extends ne{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}let v$=class extends ne{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class D2 extends ne{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function Ah(t,{dir:e,size:n=32}={}){return typeof t=="string"?Ec(t,{dir:e,size:n}):uB(t,{dir:e,size:n})}function Ec(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new v$({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function uB(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new v$({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}function ea(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function ln(t){return ea(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function Ih(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const dB=new TextEncoder;function X0(t,e={}){return typeof t=="number"||typeof t=="bigint"?fB(t,e):typeof t=="boolean"?hB(t,e):ea(t)?co(t,e):Dd(t,e)}function hB(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Ni(n,{size:e.size}),Ah(n,{size:e.size})):n}const wo={zero:48,nine:57,A:65,F:70,a:97,f:102};function j2(t){if(t>=wo.zero&&t<=wo.nine)return t-wo.zero;if(t>=wo.A&&t<=wo.F)return t-(wo.A-10);if(t>=wo.a&&t<=wo.f)return t-(wo.a-10)}function co(t,e={}){let n=t;e.size&&(Ni(n,{size:e.size}),n=Ah(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=j2(r.charCodeAt(a++)),l=j2(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new ne(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function fB(t,e){const n=Ue(t,e);return co(n)}function Dd(t,e={}){const n=dB.encode(t);return typeof e.size=="number"?(Ni(n,{size:e.size}),Ah(n,{dir:"right",size:e.size})):n}function Ni(t,{size:e}){if(ln(t)>e)throw new lB({givenSize:ln(t),maxSize:e})}function ta(t,e={}){const{signed:n}=e;e.size&&Ni(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function na(t,e={}){return Number(ta(t,e))}function b$(t,e={}){let n=co(t);return e.size&&(Ni(n,{size:e.size}),n=Ih(n,{dir:"right"})),new TextDecoder().decode(n)}const pB=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Jl(t,e={}){return typeof t=="number"||typeof t=="bigint"?Ue(t,e):typeof t=="string"?ev(t,e):typeof t=="boolean"?_$(t,e):Ar(t,e)}function _$(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Ni(n,{size:e.size}),Ah(n,{size:e.size})):n}function Ar(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=pB[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Ni(r,{size:e.size}),Ah(r,{dir:"right",size:e.size})):r}function Ue(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new y$({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Ah(a,{size:r}):a}const gB=new TextEncoder;function ev(t,e={}){const n=gB.encode(t);return Ar(n,e)}async function mB(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:Ue(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function $c(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new NB(t.type);return`${t.name}(${tv(t.inputs,{includeName:e})})`}function tv(t,{includeName:e=!1}={}){return t?t.map(n=>yB(n,{includeName:e})).join(e?", ":","):""}function yB(t,{includeName:e}){return t.type.startsWith("tuple")?`(${tv(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class wB extends ne{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class U2 extends ne{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class E$ extends ne{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${tv(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class nv extends ne{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class vB extends ne{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class bB extends ne{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${ln(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class _B extends ne{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class C_e extends ne{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class x_e extends ne{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class C$ extends ne{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class EB extends ne{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class x$ extends ne{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class Kw extends ne{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class CB extends ne{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class S_e extends ne{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class xB extends ne{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${$c(e.abiItem)}\`, and`,`\`${n.type}\` in \`${$c(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class SB extends ne{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class AE extends ne{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${tv(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class S$ extends ne{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${$c(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class AB extends ne{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class IB extends ne{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class TB extends ne{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class NB extends ne{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function Dc(t){return typeof t[0]=="string"?rv(t):PB(t)}function PB(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function rv(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}class jc extends ne{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}let sv=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const ey=BigInt(2**32-1),L2=BigInt(32);function kB(t,e=!1){return e?{h:Number(t&ey),l:Number(t>>L2&ey)}:{h:Number(t>>L2&ey)|0,l:Number(t&ey)|0}}function OB(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=kB(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const RB=(t,e,n)=>t<<n|e>>>32-n,$B=(t,e,n)=>e<<n|t>>>32-n,DB=(t,e,n)=>e<<n-32|t>>>64-n,jB=(t,e,n)=>t<<n-32|e>>>64-n,$u=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function UB(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Yw(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Zl(t,...e){if(!UB(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function I_e(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Yw(t.outputLen),Yw(t.blockLen)}function Qw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function A$(t,e){Zl(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function LB(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function zp(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Lb(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ji(t,e){return t<<32-e|t>>>e}const MB=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function BB(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function FB(t){for(let e=0;e<t.length;e++)t[e]=BB(t[e]);return t}const M2=MB?t=>t:FB,I$=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",zB=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function T_e(t){if(Zl(t),I$)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=zB[t[n]];return e}const vo={_0:48,_9:57,A:65,F:70,a:97,f:102};function B2(t){if(t>=vo._0&&t<=vo._9)return t-vo._0;if(t>=vo.A&&t<=vo.F)return t-(vo.A-10);if(t>=vo.a&&t<=vo.f)return t-(vo.a-10)}function N_e(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(I$)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=B2(t.charCodeAt(i)),a=B2(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function qB(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function iv(t){return typeof t=="string"&&(t=qB(t)),Zl(t),t}function P_e(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Zl(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class T${}function N$(t){const e=r=>t().update(iv(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function WB(t){const e=(r,s)=>t(s).update(iv(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function k_e(t=32){if($u&&typeof $u.getRandomValues=="function")return $u.getRandomValues(new Uint8Array(t));if($u&&typeof $u.randomBytes=="function")return Uint8Array.from($u.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const HB=BigInt(0),nf=BigInt(1),VB=BigInt(2),GB=BigInt(7),KB=BigInt(256),YB=BigInt(113),P$=[],k$=[],O$=[];for(let t=0,e=nf,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],P$.push(2*(5*r+n)),k$.push((t+1)*(t+2)/2%64);let s=HB;for(let i=0;i<7;i++)e=(e<<nf^(e>>GB)*YB)%KB,e&VB&&(s^=nf<<(nf<<BigInt(i))-nf);O$.push(s)}const R$=OB(O$,!0),QB=R$[0],JB=R$[1],F2=(t,e,n)=>n>32?DB(t,e,n):RB(t,e,n),z2=(t,e,n)=>n>32?jB(t,e,n):$B(t,e,n);function $$(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=F2(l,u,1)^n[a],h=z2(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=k$[o],c=F2(s,i,a),l=z2(s,i,a),u=P$[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=QB[r],t[1]^=JB[r]}zp(n)}class Zg extends T${constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Yw(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=LB(this.state)}clone(){return this._cloneInto()}keccak(){M2(this.state32),$$(this.state32,this.rounds),M2(this.state32),this.posOut=0,this.pos=0}update(e){Qw(this),e=iv(e),Zl(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Qw(this,!1),Zl(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Yw(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(A$(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,zp(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Zg(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Vc=(t,e,n)=>N$(()=>new Zg(e,t,n)),ZB=Vc(6,144,224/8),XB=Vc(6,136,256/8),eF=Vc(6,104,384/8),tF=Vc(6,72,512/8),nF=Vc(1,144,224/8),LS=Vc(1,136,256/8),rF=Vc(1,104,384/8),sF=Vc(1,72,512/8),D$=(t,e,n)=>WB((r={})=>new Zg(e,t,r.dkLen===void 0?n:r.dkLen,!0)),iF=D$(31,168,128/8),oF=D$(31,136,256/8),O_e=Object.freeze(Object.defineProperty({__proto__:null,Keccak:Zg,keccakP:$$,keccak_224:nF,keccak_256:LS,keccak_384:rF,keccak_512:sF,sha3_224:ZB,sha3_256:XB,sha3_384:eF,sha3_512:tF,shake128:iF,shake256:oF},Symbol.toStringTag,{value:"Module"}));function Th(t,e){const n=e||"hex",r=LS(ea(t,{strict:!1})?X0(t):t);return n==="bytes"?r:Jl(r)}const Mb=new sv(8192);function Xg(t,e){if(Mb.has(`${t}.${e}`))return Mb.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=Th(Dd(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return Mb.set(`${t}.${e}`,i),i}function lc(t,e){if(!Ii(t,{strict:!1}))throw new jc({address:t});return Xg(t,e)}const aF=/^0x[a-fA-F0-9]{40}$/,Bb=new sv(8192);function Ii(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(Bb.has(r))return Bb.get(r);const s=aF.test(t)?t.toLowerCase()===t?!0:n?Xg(t)===t:!0:!1;return Bb.set(r,s),s}function Jw(t,e,n,{strict:r}={}){return ea(t,{strict:!1})?IE(t,e,n,{strict:r}):L$(t,e,n,{strict:r})}function j$(t,e){if(typeof e=="number"&&e>0&&e>ln(t)-1)throw new w$({offset:e,position:"start",size:ln(t)})}function U$(t,e,n){if(typeof e=="number"&&typeof n=="number"&&ln(t)!==n-e)throw new w$({offset:n,position:"end",size:ln(t)})}function L$(t,e,n,{strict:r}={}){j$(t,e);const s=t.slice(e,n);return r&&U$(s,e,n),s}function IE(t,e,n,{strict:r}={}){j$(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&U$(s,e,n),s}const cF=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,M$=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function B$(t,e){if(t.length!==e.length)throw new _B({expectedLength:t.length,givenLength:e.length});const n=lF({params:t,values:e}),r=BS(n);return r.length===0?"0x":r}function lF({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(MS({param:t[r],value:e[r]}));return n}function MS({param:t,value:e}){const n=FS(t.type);if(n){const[r,s]=n;return dF(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return mF(e,{param:t});if(t.type==="address")return uF(e);if(t.type==="bool")return fF(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=M$.exec(t.type)??[];return pF(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return hF(e,{param:t});if(t.type==="string")return gF(e);throw new AB(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function BS(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=ln(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(Ue(e+s,{size:32})),r.push(a),s+=ln(a)):n.push(a)}return Dc([...n,...r])}function uF(t){if(!Ii(t))throw new jc({address:t});return{dynamic:!1,encoded:Ec(t.toLowerCase())}}function dF(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new TB(t);if(!r&&t.length!==e)throw new vB({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=MS({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=BS(i);if(r){const a=Ue(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?Dc([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Dc(i.map(({encoded:o})=>o))}}function hF(t,{param:e}){const[,n]=e.type.split("bytes"),r=ln(t);if(!n){let s=t;return r%32!==0&&(s=Ec(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:Dc([Ec(Ue(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new bB({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:Ec(t,{dir:"right"})}}function fF(t){if(typeof t!="boolean")throw new ne(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Ec(_$(t))}}function pF(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new y$({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Ue(t,{size:32,signed:e})}}function gF(t){const e=ev(t),n=Math.ceil(ln(e)/32),r=[];for(let s=0;s<n;s++)r.push(Ec(Jw(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Dc([Ec(Ue(ln(e),{size:32})),...r])}}function mF(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=MS({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?BS(r):Dc(r.map(({encoded:s})=>s))}}function FS(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const Fb="/docs/contract/encodeDeployData";function zS(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new wB({docsPath:Fb});if(!("inputs"in s))throw new U2({docsPath:Fb});if(!s.inputs||s.inputs.length===0)throw new U2({docsPath:Fb});const i=B$(s.inputs,n);return rv([r,i])}function Gn(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class wu extends ne{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class iw extends ne{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function yF(t){const e=Th(`0x${t.substring(4)}`).substring(26);return Xg(`0x${e}`)}const wF="modulepreload",vF=function(t){return"/"+t},q2={},on=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=vF(c),c in q2)return;q2[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":wF,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function bF({hash:t,signature:e}){const n=ea(t)?t:Jl(t),{secp256k1:r}=await on(async()=>{const{secp256k1:o}=await import("./secp256k1-C1skrRLD.js");return{secp256k1:o}},__vite__mapDeps([0,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=W2(f);return new r.Signature(ta(l),ta(u)).addRecoveryBit(p)}const o=ea(e)?e:Jl(e);if(ln(o)!==65)throw new Error("invalid signature length");const a=na(`0x${o.slice(130)}`),c=W2(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function W2(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function _F({hash:t,signature:e}){return yF(await bF({hash:t,signature:e}))}class H2 extends ne{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class F$ extends ne{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class EF extends ne{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const CF={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new EF({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new F$({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new H2({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new H2({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function qS(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(CF);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function xF(t,e="hex"){const n=z$(t),r=qS(new Uint8Array(n.length));return n.encode(r),e==="hex"?Ar(r.bytes):r.bytes}function z$(t){return Array.isArray(t)?SF(t.map(e=>z$(e))):AF(t)}function SF(t){const e=t.reduce((s,i)=>s+i.length,0),n=q$(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function AF(t){const e=typeof t=="string"?co(t):t,n=q$(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function q$(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new ne("Length is too large.")}function IF(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=Th(rv(["0x05",xF([e?Ue(e):"0x",s,n?Ue(n):"0x"])]));return r==="bytes"?co(i):i}async function W$(t){const{authorization:e,signature:n}=t;return _F({hash:IF(e),signature:n??e})}class TE extends ne{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class TF extends ne{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class NF extends ne{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class H$ extends ne{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function V$({chain:t,currentChainId:e}){if(!t)throw new NF;if(e!==t.id)throw new TF({chain:t,currentChainId:e})}const PF={gwei:9,wei:18},kF={ether:-9,wei:9},OF={ether:-18,gwei:-9};function Nh(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function es(t,e="wei"){return Nh(t,kF[e])}class El extends ne{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(El,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(El,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class Zw extends ne{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${es(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(Zw,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class NE extends ne{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${es(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(NE,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class PE extends ne{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(PE,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class kE extends ne{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(kE,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class OE extends ne{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(OE,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class RE extends ne{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(RE,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class $E extends ne{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty($E,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class DE extends ne{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(DE,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class jE extends ne{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(jE,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class Xw extends ne{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${es(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${es(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(Xw,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class ov extends ne{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function WS(t,e="wei"){return Nh(t,PF[e])}function em(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class RF extends ne{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class $F extends ne{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",em(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class DF extends ne{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=em({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${WS(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${es(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${es(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${es(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class G$ extends ne{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class K$ extends ne{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class jF extends ne{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const Cr=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),UF=t=>t,HS=t=>t;class np extends ne{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${HS(o)}`,e&&`Request body: ${Cr(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class VS extends ne{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${HS(r)}`,`Request body: ${Cr(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class V2 extends ne{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${HS(n)}`,`Request body: ${Cr(e)}`],name:"TimeoutError"})}}const LF=-1;class ns extends ne{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof VS?e.code:n??LF}}class xs extends ns{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class qp extends ns{constructor(e){super(e,{code:qp.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(qp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Wp extends ns{constructor(e){super(e,{code:Wp.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Wp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Hp extends ns{constructor(e,{method:n}={}){super(e,{code:Hp.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(Hp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Vp extends ns{constructor(e){super(e,{code:Vp.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Vp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Xl extends ns{constructor(e){super(e,{code:Xl.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Xl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Gp extends ns{constructor(e){super(e,{code:Gp.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Gp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Kp extends ns{constructor(e){super(e,{code:Kp.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Kp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Cc extends ns{constructor(e){super(e,{code:Cc.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Cc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class ch extends ns{constructor(e){super(e,{code:ch.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(ch,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Cl extends ns{constructor(e,{method:n}={}){super(e,{code:Cl.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Cl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class lh extends ns{constructor(e){super(e,{code:lh.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(lh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Yp extends ns{constructor(e){super(e,{code:Yp.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Yp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class vn extends xs{constructor(e){super(e,{code:vn.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(vn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Qp extends xs{constructor(e){super(e,{code:Qp.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(Qp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Jp extends xs{constructor(e,{method:n}={}){super(e,{code:Jp.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(Jp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Zp extends xs{constructor(e){super(e,{code:Zp.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Zp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Xp extends xs{constructor(e){super(e,{code:Xp.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Xp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class lo extends xs{constructor(e){super(e,{code:lo.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(lo,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class uh extends xs{constructor(e){super(e,{code:uh.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(uh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class eg extends xs{constructor(e){super(e,{code:eg.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(eg,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class tg extends xs{constructor(e){super(e,{code:tg.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(tg,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class ng extends xs{constructor(e){super(e,{code:ng.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(ng,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class rg extends xs{constructor(e){super(e,{code:rg.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(rg,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class sg extends xs{constructor(e){super(e,{code:sg.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(sg,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class dh extends xs{constructor(e){super(e,{code:dh.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(dh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class MF extends ns{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function GS(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof ne?t.walk(s=>(s==null?void 0:s.code)===El.code):t;return r instanceof ne?new El({cause:t,message:r.details}):El.nodeMessage.test(n)?new El({cause:t,message:t.details}):Zw.nodeMessage.test(n)?new Zw({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):NE.nodeMessage.test(n)?new NE({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):PE.nodeMessage.test(n)?new PE({cause:t,nonce:e==null?void 0:e.nonce}):kE.nodeMessage.test(n)?new kE({cause:t,nonce:e==null?void 0:e.nonce}):OE.nodeMessage.test(n)?new OE({cause:t,nonce:e==null?void 0:e.nonce}):RE.nodeMessage.test(n)?new RE({cause:t}):$E.nodeMessage.test(n)?new $E({cause:t,gas:e==null?void 0:e.gas}):DE.nodeMessage.test(n)?new DE({cause:t,gas:e==null?void 0:e.gas}):jE.nodeMessage.test(n)?new jE({cause:t}):Xw.nodeMessage.test(n)?new Xw({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new ov({cause:t})}function Y$(t,{docsPath:e,...n}){const r=(()=>{const s=GS(t,n);return s instanceof ov?t:s})();return new DF(r,{docsPath:e,...n})}function KS(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const BF={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function av(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=FF(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>Ar(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=Ue(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=Ue(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=Ue(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=Ue(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=Ue(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=Ue(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=BF[t.type]),typeof t.value<"u"&&(e.value=Ue(t.value)),e}function FF(t){return t.map(e=>({address:e.address,r:e.r?Ue(BigInt(e.r)):e.r,s:e.s?Ue(BigInt(e.s)):e.s,chainId:Ue(e.chainId),nonce:Ue(e.nonce),...typeof e.yParity<"u"?{yParity:Ue(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:Ue(e.v)}:{}}))}function At(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const zF=2n**256n-1n;function tm(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?Gn(e):void 0;if(o&&!Ii(o.address))throw new jc({address:o.address});if(i&&!Ii(i))throw new jc({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new RF;if(r&&r>zF)throw new Zw({maxFeePerGas:r});if(s&&r&&s>r)throw new Xw({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function nm(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return na(e)}class qF extends ne{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class YS extends ne{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class WF extends ne{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${es(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class Q$ extends ne{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const J$={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Z$(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?na(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?na(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?J$[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=HF(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function HF(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function VF(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:Z$(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function ig(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?Ue(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new Q$({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||VF)(c)}async function X$(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function GF(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await At(t,ig,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return ta(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):At(t,ig,"getBlock")({}),At(t,X$,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new YS;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function G2(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new qF;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await At(t,ig,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new YS;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await GF(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await At(t,X$,"getGasPrice")({}))}}class KF extends ne{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=em({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${WS(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${es(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${es(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${es(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function YF(t,{docsPath:e,...n}){const r=(()=>{const s=GS(t,n);return s instanceof ov?t:s})();return new KF(r,{docsPath:e,...n})}class QF extends ne{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class JF extends ne{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function K2(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function ZF(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=K2(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=K2(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function Y2(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new D2({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new D2({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function XF(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=Ue(e)),n!==void 0&&(o.nonce=Ue(n)),r!==void 0&&(o.state=Y2(r)),s!==void 0){if(o.state)throw new JF;o.stateDiff=Y2(s)}return o}function eD(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Ii(n,{strict:!1}))throw new jc({address:n});if(e[n])throw new QF({address:n});e[n]=XF(r)}return e}async function tD(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?Ue(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function nD(t,e){var s,i,o;const{account:n=t.account}=e,r=n?Gn(n):void 0;try{let F=function(I){const{block:U,request:T,rpcStateOverride:k}=I;return t.request({method:"eth_estimateGas",params:k?[T,U??"latest",k]:U?[T,U]:[T]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:b,nonce:v,value:E,stateOverride:_,...x}=await cv(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),N=(typeof d=="bigint"?Ue(d):void 0)||h,C=eD(_),O=await(async()=>{if(x.to)return x.to;if(c&&c.length>0)return await W$({authorization:c[0]}).catch(()=>{throw new ne("`to` is required. Could not infer from `authorizationList`")})})();tm(e);const R=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,H=(R||av)({...KS(x,{format:R}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:b,nonce:v,to:O,value:E});let A=BigInt(await F({block:N,request:H,rpcStateOverride:C}));if(c){const I=await tD(t,{address:H.from}),U=await Promise.all(c.map(async T=>{const{address:k}=T,L=await F({block:N,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:k,value:Ue(I)},rpcStateOverride:C}).catch(()=>100000n);return 2n*BigInt(L)}));A+=U.reduce((T,k)=>T+k,0n)}return A}catch(a){throw YF(a,{...e,account:r,chain:t.chain})}}async function rD(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?Ue(r):n]},{dedupe:!!r});return na(s)}function sD(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>co(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>Ar(i))}function iD(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>co(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>co(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>Ar(o))}function e9(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function t9(t,e,n){return t&e^~t&n}function n9(t,e,n){return t&e^t&n^e&n}class r9 extends T${constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Lb(this.buffer)}update(e){Qw(this),e=iv(e),Zl(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Lb(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Qw(this),A$(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,zp(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;e9(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Lb(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const pa=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),s9=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ga=new Uint32Array(64);class i9 extends r9{constructor(e=32){super(64,e,8,!1),this.A=pa[0]|0,this.B=pa[1]|0,this.C=pa[2]|0,this.D=pa[3]|0,this.E=pa[4]|0,this.F=pa[5]|0,this.G=pa[6]|0,this.H=pa[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)ga[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=ga[d-15],f=ga[d-2],p=ji(h,7)^ji(h,18)^h>>>3,g=ji(f,17)^ji(f,19)^f>>>10;ga[d]=g+ga[d-7]+p+ga[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=ji(a,6)^ji(a,11)^ji(a,25),f=u+h+t9(a,c,l)+s9[d]+ga[d]|0,g=(ji(r,2)^ji(r,13)^ji(r,22))+n9(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){zp(ga)}destroy(){this.set(0,0,0,0,0,0,0,0),zp(this.buffer)}}const o9=N$(()=>new i9),a9=o9;function c9(t,e){return a9(ea(t,{strict:!1})?X0(t):t)}function l9(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=c9(e);return s.set([n],0),r==="bytes"?s:Ar(s)}function u9(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(l9({commitment:i,to:r,version:n}));return s}const Q2=6,oD=32,QS=4096,aD=oD*QS,J2=aD*Q2-1-1*QS*Q2;class d9 extends ne{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class h9 extends ne{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function f9(t){const e=typeof t.data=="string"?co(t.data):t.data,n=ln(e);if(!n)throw new h9;if(n>J2)throw new d9({maxSize:J2,size:n});const r=[];let s=!0,i=0;for(;s;){const o=qS(new Uint8Array(aD));let a=0;for(;a<QS;){const c=e.slice(i,i+(oD-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>Ar(o.bytes))}function p9(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??f9({data:e}),i=t.commitments??sD({blobs:s,kzg:n,to:r}),o=t.proofs??iD({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function g9(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new $F({transaction:t})}const cD=["blobVersionedHashes","chainId","fees","gas","nonce","type"],Z2=new Map;async function cv(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=cD,type:u}=e,d=n&&Gn(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await At(t,ig,"getBlock")({blockTag:"latest"}),f)}let g;async function y(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await At(t,nm,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const w=await y();h.nonce=await c.consume({address:d.address,chainId:w,client:t})}else h.nonce=await At(t,rD,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const w=sD({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const b=u9({commitments:w,to:"hex"});h.blobVersionedHashes=b}if(l.includes("sidecars")){const b=iD({blobs:r,commitments:w,kzg:o}),v=p9({blobs:r,commitments:w,proofs:b,to:"hex"});h.sidecars=v}}if(l.includes("chainId")&&(h.chainId=await y()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=g9(h)}catch{let w=Z2.get(t.uid);if(typeof w>"u"){const b=await p();w=typeof(b==null?void 0:b.baseFeePerGas)=="bigint",Z2.set(t.uid,w)}h.type=w?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const w=await p(),{maxFeePerGas:b,maxPriorityFeePerGas:v}=await G2(t,{block:w,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<v)throw new WF({maxPriorityFeePerGas:v});h.maxPriorityFeePerGas=v,h.maxFeePerGas=b}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new YS;if(typeof e.gasPrice>"u"){const w=await p(),{gasPrice:b}=await G2(t,{block:w,chain:s,request:h,type:"legacy"});h.gasPrice=b}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await At(t,nD,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),tm(h),delete h.parameters,h}async function lD(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const zb=new sv(128);async function rm(t,e){var b,v,E,_;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...y}=e;if(typeof n>"u")throw new wu({docsPath:"/docs/actions/wallet/sendTransaction"});const w=n?Gn(n):null;try{tm(e);const x=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await W$({authorization:i[0]}).catch(()=>{throw new ne("`to` is required. Could not infer from `authorizationList`.")})})();if((w==null?void 0:w.type)==="json-rpc"||w===null){let S;r!==null&&(S=await At(t,nm,"getChainId")({}),V$({currentChainId:S,chain:r}));const N=(E=(v=(b=t.chain)==null?void 0:b.formatters)==null?void 0:v.transactionRequest)==null?void 0:E.format,O=(N||av)({...KS(y,{format:N}),accessList:s,authorizationList:i,blobs:o,chainId:S,data:a,from:w==null?void 0:w.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:x,type:p,value:g}),R=zb.get(t.uid),B=R?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:B,params:[O]},{retryCount:0})}catch(H){if(R===!1)throw H;const F=H;if(F.name==="InvalidInputRpcError"||F.name==="InvalidParamsRpcError"||F.name==="MethodNotFoundRpcError"||F.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[O]},{retryCount:0}).then(A=>(zb.set(t.uid,!0),A)).catch(A=>{const I=A;throw I.name==="MethodNotFoundRpcError"||I.name==="MethodNotSupportedRpcError"?(zb.set(t.uid,!1),F):I});throw F}}if((w==null?void 0:w.type)==="local"){const S=await At(t,cv,"prepareTransactionRequest")({account:w,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:w.nonceManager,parameters:[...cD,"sidecars"],type:p,value:g,...y,to:x}),N=(_=r==null?void 0:r.serializers)==null?void 0:_.transaction,C=await w.signTransaction(S,{serializer:N});return await At(t,lD,"sendRawTransaction")({serializedTransaction:C})}throw(w==null?void 0:w.type)==="smart"?new iw({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new iw({docsPath:"/docs/actions/wallet/sendTransaction",type:w==null?void 0:w.type})}catch(x){throw x instanceof iw?x:Y$(x,{...e,account:w,chain:e.chain||void 0})}}function m9(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=zS({abi:n,args:r,bytecode:s});return rm(t,{...i,...i.authorizationList?{to:null}:{},data:o})}const UE=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],R_e=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],y9=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],w9=[...y9,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}];function v9(t,e={}){typeof e.size<"u"&&Ni(t,{size:e.size});const n=Ar(t,e);return ta(n,e)}function b9(t,e={}){let n=t;if(typeof e.size<"u"&&(Ni(n,{size:e.size}),n=Ih(n)),n.length>1||n[0]>1)throw new cB(n);return!!n[0]}function Ho(t,e={}){typeof e.size<"u"&&Ni(t,{size:e.size});const n=Ar(t,e);return na(n,e)}function _9(t,e={}){let n=t;return typeof e.size<"u"&&(Ni(n,{size:e.size}),n=Ih(n,{dir:"right"})),new TextDecoder().decode(n)}function lv(t,e){const n=typeof e=="string"?co(e):e,r=qS(n);if(ln(n)===0&&t.length>0)throw new nv;if(ln(e)&&ln(e)<32)throw new E$({data:typeof e=="string"?e:Ar(e),params:t,size:ln(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=jd(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function jd(t,e,{staticPosition:n}){const r=FS(e.type);if(r){const[s,i]=r;return C9(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return I9(t,e,{staticPosition:n});if(e.type==="address")return E9(t);if(e.type==="bool")return x9(t);if(e.type.startsWith("bytes"))return S9(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return A9(t,e);if(e.type==="string")return T9(t,{staticPosition:n});throw new IB(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const X2=32,LE=32;function E9(t){const e=t.readBytes(32);return[Xg(Ar(L$(e,-20))),32]}function C9(t,e,{length:n,staticPosition:r}){if(!n){const o=Ho(t.readBytes(LE)),a=r+o,c=a+X2;t.setPosition(a);const l=Ho(t.readBytes(X2)),u=og(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=jd(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(og(e)){const o=Ho(t.readBytes(LE)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=jd(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=jd(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function x9(t){return[b9(t.readBytes(32),{size:32}),32]}function S9(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=Ho(t.readBytes(32));t.setPosition(n+o);const a=Ho(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[Ar(c),32]}return[Ar(t.readBytes(Number.parseInt(s),32)),32]}function A9(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?v9(s,{signed:n}):Ho(s,{signed:n}),32]}function I9(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(og(e)){const o=Ho(t.readBytes(LE)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=jd(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=jd(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function T9(t,{staticPosition:e}){const n=Ho(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Ho(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=_9(Ih(i));return t.setPosition(e+32),[o,32]}function og(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(og);const n=FS(t.type);return!!(n&&og({...t,type:n[1]}))}const N9=t=>Th(X0(t));function P9(t){return N9(t)}const k9="1.0.8";let Ys=class ME extends Error{constructor(e,n={}){var o;const r=n.cause instanceof ME?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof ME&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${k9}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function aa(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const uD=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,dD=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,hD=/^\(.+?\).*?$/,eT=/^tuple(?<array>(\[(\d*)\])*)$/;function BE(t){let e=t.type;if(eT.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=BE(i),s<n-1&&(e+=", ")}const r=aa(eT,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,BE({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function rf(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=BE(s),r!==n-1&&(e+=", ")}return e}function O9(t){var e;return t.type==="function"?`function ${t.name}(${rf(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${rf(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${rf(t.inputs)})`:t.type==="error"?`error ${t.name}(${rf(t.inputs)})`:t.type==="constructor"?`constructor(${rf(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const fD=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function R9(t){return fD.test(t)}function $9(t){return aa(fD,t)}const pD=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function D9(t){return pD.test(t)}function j9(t){return aa(pD,t)}const gD=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function U9(t){return gD.test(t)}function L9(t){return aa(gD,t)}const mD=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function yD(t){return mD.test(t)}function M9(t){return aa(mD,t)}const wD=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function B9(t){return wD.test(t)}function F9(t){return aa(wD,t)}const vD=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function z9(t){return vD.test(t)}function q9(t){return aa(vD,t)}const W9=/^receive\(\) external payable$/;function H9(t){return W9.test(t)}const V9=new Set(["indexed"]),FE=new Set(["calldata","memory","storage"]);class G9 extends Ys{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class K9 extends Ys{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class Y9 extends Ys{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class Q9 extends Ys{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class J9 extends Ys{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class Z9 extends Ys{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class X9 extends Ys{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Ph extends Ys{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class e7 extends Ys{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class t7 extends Ys{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class n7 extends Ys{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class r7 extends Ys{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function s7(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const qb=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function i7(t,e={}){if(U9(t))return o7(t,e);if(D9(t))return a7(t,e);if(R9(t))return c7(t,e);if(B9(t))return l7(t,e);if(z9(t))return u7(t);if(H9(t))return{type:"receive",stateMutability:"payable"};throw new e7({signature:t})}function o7(t,e={}){const n=L9(t);if(!n)throw new Ph({signature:t,type:"function"});const r=yi(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(eu(r[a],{modifiers:FE,structs:e,type:"function"}));const o=[];if(n.returns){const a=yi(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(eu(a[l],{modifiers:FE,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function a7(t,e={}){const n=j9(t);if(!n)throw new Ph({signature:t,type:"event"});const r=yi(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(eu(r[o],{modifiers:V9,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function c7(t,e={}){const n=$9(t);if(!n)throw new Ph({signature:t,type:"error"});const r=yi(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(eu(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function l7(t,e={}){const n=F9(t);if(!n)throw new Ph({signature:t,type:"constructor"});const r=yi(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(eu(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function u7(t){const e=q9(t);if(!e)throw new Ph({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const d7=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,h7=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,f7=/^u?int$/;function eu(t,e){var d,h;const n=s7(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(qb.has(n))return qb.get(n);const r=hD.test(t),s=aa(r?h7:d7,t);if(!s)throw new Y9({param:t});if(s.name&&g7(s.name))throw new Q9({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=yi(s.type),p=[],g=f.length;for(let y=0;y<g;y++)p.push(eu(f[y],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(f7.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!bD(c))throw new K9({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new J9({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(FE.has(s.modifier)&&!m7(c,!!s.array))throw new Z9({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return qb.set(n,u),u}function yi(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?yi(a,[...e,n.trim()]):yi(a,e,`${n}${o}`,r);case"(":return yi(a,e,`${n}${o}`,r+1);case")":return yi(a,e,`${n}${o}`,r-1);default:return yi(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new r7({current:n,depth:r});return e.push(n.trim()),e}function bD(t){return t==="address"||t==="bool"||t==="function"||t==="string"||uD.test(t)||dD.test(t)}const p7=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function g7(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||uD.test(t)||dD.test(t)||p7.test(t)}function m7(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function y7(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!yD(a))continue;const c=M9(a);if(!c)throw new Ph({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=eu(p,{type:"struct"});u.push(g)}if(!u.length)throw new t7({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=_D(c,e)}return r}const w7=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function _D(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(hD.test(o.type))r.push(o);else{const c=aa(w7,o.type);if(!(c!=null&&c.type))throw new X9({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new n7({type:u});r.push({...o,type:`tuple${l??""}`,components:_D(e[u]??[],e,new Set([...n,u]))})}else if(bD(u))r.push(o);else throw new G9({type:u})}}return r}function ED(t){const e=y7(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];yD(i)||n.push(i7(i,e))}return n}function v7(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new ne("Unable to normalize signature.");return s}const b7=t=>{const e=typeof t=="string"?t:O9(t);return v7(e)};function CD(t){return P9(b7(t))}const JS=CD,ZS=t=>Jw(CD(t),0,4);function XS(t){const{abi:e,args:n=[],name:r}=t,s=ea(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?ZS(a)===r:a.type==="event"?JS(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?zE(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=xD(a.inputs,o.inputs,n);if(l)throw new xB({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function zE(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Ii(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>zE(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>zE(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function xD(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return xD(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Ii(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Ii(n[r],{strict:!1}):!1)return o}}const Wb="/docs/contract/decodeFunctionResult";function eA(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=XS({abi:e,args:n,name:r});if(!a)throw new Kw(r,{docsPath:Wb});i=a}if(i.type!=="function")throw new Kw(void 0,{docsPath:Wb});if(!i.outputs)throw new CB(i.name,{docsPath:Wb});const o=lv(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const tT="/docs/contract/encodeFunctionData";function _7(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=XS({abi:e,args:n,name:r});if(!i)throw new Kw(r,{docsPath:tT});s=i}if(s.type!=="function")throw new Kw(void 0,{docsPath:tT});return{abi:[s],functionName:ZS($c(s))}}function sm(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:_7(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?B$(s.inputs,e??[]):void 0;return rv([i,o??"0x"])}function tA({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new TE({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new TE({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const SD={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},E7={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},C7={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function x7(t){const{abi:e,data:n}=t,r=Jw(n,0,4);if(r==="0x")throw new nv;const i=[...e||[],E7,C7].find(o=>o.type==="error"&&r===ZS($c(o)));if(!i)throw new C$(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?lv(i.inputs,Jw(n,4)):void 0,errorName:i.name}}function AD({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?Cr(e[i]):e[i]}`).join(", ")})`}class S7 extends ne{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var y;const p=n?Gn(n):void 0;let g=em({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${WS(h)} ${((y=s==null?void 0:s.nativeCurrency)==null?void 0:y.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${es(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${es(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${es(l)} gwei`,nonce:u});f&&(g+=`
${ZF(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class ID extends ne{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=XS({abi:n,args:r,name:o}),l=c?AD({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?$c(c,{includeName:!0}):void 0,d=em({address:s&&UF(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class qE extends ne{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=x7({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=SD[f]}else{const f=u?$c(u,{includeName:!0}):void 0,p=u&&h?AD({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof C$&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class A7 extends ne{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class I7 extends ne{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class nA extends ne{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function T7(t,e){var r,s,i,o,a,c;if(!(t instanceof ne))return!1;const n=t.walk(l=>l instanceof qE);return n instanceof qE?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||n.reason===SD[50]):!1}function N7(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return ea(e)?e:null}function P7(t){return`[${t.slice(2)}]`}function k7(t){const e=new Uint8Array(32).fill(0);return t?N7(t)||Th(Dd(t)):Ar(e)}function O7(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(Dd(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=Dd(s[i]);o.byteLength>255&&(o=Dd(P7(k7(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const R7=3;function e0(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof nA?t:t instanceof ne?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof nv?new A7({functionName:i}):[R7,Xl.code].includes(c)&&(l||u||d||h)?new qE({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof VS?u:h??d}):t;return new ID(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}const $7="0.1.1";function D7(){return $7}let TD=class WE extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof WE){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof WE&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${D7()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return ND(this,e)}};function ND(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?ND(t.cause,e):e?null:t}function j7(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new M7({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}function Do(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new L7({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?U7(c,r):c}function U7(t,e){return j7(t,{dir:"left",size:e})}let L7=class extends TD{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}},M7=class extends TD{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function B7(t){return{address:t.address,amount:Do(t.amount),index:Do(t.index),validatorIndex:Do(t.validatorIndex)}}function F7(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:Do(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:Do(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:Do(t.gasLimit)},...typeof t.number=="bigint"&&{number:Do(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:Do(t.prevRandao)},...typeof t.time=="bigint"&&{time:Do(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(B7)}}}const z7="0x82ad56cb",q7="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",W7="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe";function H7(t,{docsPath:e,...n}){const r=(()=>{const s=GS(t,n);return s instanceof ov?t:s})();return new S7(r,{docsPath:e,...n})}function rA(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const Hb=new Map;function PD({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>Hb.delete(e),a=()=>c().map(({args:u})=>u),c=()=>Hb.get(e)||[],l=u=>Hb.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=rA();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function kD(t,e){var H,F,A,I;const{account:n=t.account,authorizationList:r,batch:s=!!((H=t.batch)!=null&&H.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:b,nonce:v,to:E,value:_,stateOverride:x,...S}=e,N=n?Gn(n):void 0;if(u&&(h||f))throw new ne("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&E)throw new ne("Cannot provide both `code` & `to` as parameters.");const C=u&&d,O=h&&f&&E&&d,R=C||O,B=C?K7({code:u,data:d}):O?Y7({data:d,factory:h,factoryData:f,to:E}):d;try{tm(e);const T=(typeof i=="bigint"?Ue(i):void 0)||o,k=l?F7(l):void 0,L=eD(x),W=(I=(A=(F=t.chain)==null?void 0:F.formatters)==null?void 0:A.transactionRequest)==null?void 0:I.format,Z=(W||av)({...KS(S,{format:W}),from:N==null?void 0:N.address,accessList:a,authorizationList:r,blobs:c,data:B,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:b,nonce:v,to:R?void 0:E,value:_});if(s&&V7({request:Z})&&!L&&!k)try{return await G7(t,{...Z,blockNumber:i,blockTag:o})}catch(oe){if(!(oe instanceof H$)&&!(oe instanceof TE))throw oe}const Q=(()=>{const oe=[Z,T];return L&&k?[...oe,L,k]:L?[...oe,L]:k?[...oe,{},k]:oe})(),te=await t.request({method:"eth_call",params:Q});return te==="0x"?{data:void 0}:{data:te}}catch(U){const T=Q7(U),{offchainLookup:k,offchainLookupSignature:L}=await on(async()=>{const{offchainLookup:W,offchainLookupSignature:K}=await import("./ccip-BISyOXRe.js");return{offchainLookup:W,offchainLookupSignature:K}},[]);if(t.ccipRead!==!1&&(T==null?void 0:T.slice(0,10))===L&&E)return{data:await k(t,{data:T,to:E})};throw R&&(T==null?void 0:T.slice(0,10))==="0x101bb98d"?new I7({factory:h}):H7(U,{...e,account:N,chain:t.chain})}}function V7({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(z7)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function G7(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new H$;l=tA({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?Ue(s):void 0)||i,{schedule:h}=PD({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(y){return y.reduce((b,{data:v})=>b+(v.length-2),0)>n*2},fn:async y=>{const w=y.map(E=>({allowFailure:!0,callData:E.data,target:E.to})),b=sm({abi:UE,args:[w],functionName:"aggregate3"}),v=await t.request({method:"eth_call",params:[{data:b,to:l},d]});return eA({abi:UE,args:[w],functionName:"aggregate3",data:v||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new nA({data:f});return f==="0x"?{data:void 0}:{data:f}}function K7(t){const{code:e,data:n}=t;return zS({abi:ED(["constructor(bytes, bytes)"]),bytecode:q7,args:[e,n]})}function Y7(t){const{data:e,factory:n,factoryData:r,to:s}=t;return zS({abi:ED(["constructor(address, bytes, address, bytes)"]),bytecode:W7,args:[s,e,n,r]})}function Q7(t){var n;if(!(t instanceof ne))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function sA(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=sm({abi:n,args:s,functionName:i});try{const{data:c}=await At(t,kD,"call")({...o,data:a,to:r});return eA({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw e0(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function J7(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=tA({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:w9,functionName:"reverse",args:[Jl(O7(c))],blockNumber:n,blockTag:r},u=At(t,sA,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(T7(l))return null;throw l}}function Z7(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function X7(t){const e=Z7(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}const ez=new Map,tz=new Map;function nz(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,ez),r=e(t,tz);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function rz(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=nz(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const sz=t=>`blockNumber.${t}`;async function iz(t,{cacheTime:e=t.cacheTime}={}){const n=await rz(()=>t.request({method:"eth_blockNumber"}),{cacheKey:sz(t.uid),cacheTime:e});return BigInt(n)}function OD(t,e){if(!Ii(t,{strict:!1}))throw new jc({address:t});if(!Ii(e,{strict:!1}))throw new jc({address:e});return t.toLowerCase()===e.toLowerCase()}const nT="/docs/contract/decodeEventLog";function oz(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new EB({docsPath:nT});const c=e.find(g=>g.type==="event"&&o===JS($c(g)));if(!(c&&"name"in c)||c.type!=="event")throw new x$(o,{docsPath:nT});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,y)=>[g,y]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[y,w]=f[g],b=a[g];if(!b)throw new S$({abiItem:c,param:y});h[d?w:y.name||w]=az({param:y,value:b})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=lv(p,n);if(g)if(d)for(let y=0;y<u.length;y++)h[y]=h[y]??g.shift();else for(let y=0;y<p.length;y++)h[p[y].name]=g[y]}catch(g){if(i)throw g instanceof E$||g instanceof F$?new AE({abiItem:c,data:n,params:p,size:ln(n)}):g}else if(i)throw new AE({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function az({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(lv([t],e)||[])[0]}function cz(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===JS(u));if(!c)return null;const l=oz({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!lz({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof x$)return null;if(c instanceof AE||c instanceof S$){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function lz(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?OD(o,a):i.type==="string"||i.type==="bytes"?Th(X0(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function RD(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function uz(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>RD(i));return!("abi"in e)||!e.abi?s:cz({abi:e.abi,logs:s,strict:n})}async function $D(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?Ue(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,Ue(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,Ue(i)]},{dedupe:!!a}),!c)throw new G$({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||Z$)(c)}const DD={"0x0":"reverted","0x1":"success"};function dz(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>RD(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?na(t.transactionIndex):null,status:t.status?DD[t.status]:null,type:t.type?J$[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}async function rT(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new K$({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||dz)(n)}async function hz(t,e){var w;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((w=t.batch)==null?void 0:w.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=tA({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let b=0;b<l.length;b++){const{abi:v,address:E,args:_,functionName:x}=l[b];try{const S=sm({abi:v,args:_,functionName:x});p+=(S.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(S.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:S,target:E}]}catch(S){const N=e0(S,{abi:v,address:E,args:_,docsPath:"/docs/contract/multicall",functionName:x,sender:n});if(!r)throw N;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:E}]}}const g=await Promise.allSettled(h.map(b=>At(t,sA,"readContract")({abi:UE,account:n,address:d,args:[b],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),y=[];for(let b=0;b<g.length;b++){const v=g[b];if(v.status==="rejected"){if(!r)throw v.reason;for(let _=0;_<h[b].length;_++)y.push({status:"failure",error:v.reason,result:void 0});continue}const E=v.value;for(let _=0;_<E.length;_++){const{returnData:x,success:S}=E[_],{callData:N}=h[b][_],{abi:C,address:O,functionName:R,args:B}=l[y.length];try{if(N==="0x")throw new nv;if(!S)throw new nA({data:x});const H=eA({abi:C,args:B,data:x,functionName:R});y.push(r?{result:H,status:"success"}:H)}catch(H){const F=e0(H,{abi:C,address:O,args:B,docsPath:"/docs/contract/multicall",functionName:R});if(!r)throw F;y.push({error:F,result:void 0,status:"failure"})}}}if(y.length!==l.length)throw new ne("multicall results mismatch");return y}const ty=new sv(8192);function fz(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(ty.get(n))return ty.get(n);const r=t().finally(()=>ty.delete(n));return ty.set(n,r),r}async function t0(t){return new Promise(e=>setTimeout(e,t))}function n0(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await t0(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function pz(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new Cl(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new Cl(new Error("method not supported"),{method:l});const u=s?ev(`${c}.${Cr(n)}`):void 0;return fz(()=>n0(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case qp.code:throw new qp(f);case Wp.code:throw new Wp(f);case Hp.code:throw new Hp(f,{method:n.method});case Vp.code:throw new Vp(f);case Xl.code:throw new Xl(f);case Gp.code:throw new Gp(f);case Kp.code:throw new Kp(f);case Cc.code:throw new Cc(f);case ch.code:throw new ch(f);case Cl.code:throw new Cl(f,{method:n.method});case lh.code:throw new lh(f);case Yp.code:throw new Yp(f);case vn.code:throw new vn(f);case Qp.code:throw new Qp(f);case Jp.code:throw new Jp(f);case Zp.code:throw new Zp(f);case Xp.code:throw new Xp(f);case lo.code:throw new lo(f);case uh.code:throw new uh(f);case eg.code:throw new eg(f);case tg.code:throw new tg(f);case ng.code:throw new ng(f);case rg.code:throw new rg(f);case sg.code:throw new sg(f);case dh.code:throw new dh(f);case 5e3:throw new vn(f);default:throw h instanceof ne?h:new MF(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof np){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>gz(h)}),{enabled:s,id:u})}}function gz(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===lh.code||t.code===Xl.code:t instanceof np&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function mz(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function jD(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function yz(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const sT=yz();function wz(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await jD(async({signal:p})=>{const g={...a,body:Array.isArray(r)?Cr(r.map(v=>({jsonrpc:"2.0",id:v.id??sT.take(),...v}))):Cr({jsonrpc:"2.0",id:r.id??sT.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},y=new Request(t,g),w=await(s==null?void 0:s(y,g))??{...g,url:t};return await fetch(w.url??t,w)},{errorInstance:new V2({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new np({body:r,details:Cr(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof np||h instanceof V2?h:new np({body:r,cause:h,url:t})}}}}class vz extends ne{constructor({domain:e}){super(`Invalid domain "${Cr(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class bz extends ne{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class _z extends ne{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function Ez(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return Cr({domain:o,message:a,primaryType:r,types:s})}function Cz(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(M$);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,y,w]=h;Ue(d,{signed:y==="int",size:Number.parseInt(w)/8})}if(u==="address"&&typeof d=="string"&&!Ii(d))throw new jc({address:d});const f=u.match(cF);if(f){const[g,y]=f;if(y&&ln(d)!==Number.parseInt(y))throw new SB({expectedSize:Number.parseInt(y),givenSize:ln(d)})}const p=s[u];p&&(Sz(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new vz({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new bz({primaryType:r,types:s})}function xz({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Sz(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new _z({type:t})}class Az extends ne{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function Iz(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new Az({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}const Vb=new Map,iT=new Map;let Tz=0;function ag(t,e,n){const r=++Tz,s=()=>Vb.get(t)||[],i=()=>{const u=s();Vb.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=iT.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(Vb.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&iT.set(t,l),o}function iA(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await t0(c);const l=async()=>{s&&(await t({unpoll:i}),await t0(r),l())};l()})(),i}function Nz(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=Cr(["watchBlockNumber",t.uid,e,n,o]);return ag(d,{onBlockNumber:r,onError:s},h=>iA(async()=>{var f;try{const p=await At(t,iz,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=Cr(["watchBlockNumber",t.uid,e,n]);return ag(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const w=t.transport.transports.find(b=>b.config.type==="webSocket"||b.config.type==="ipc");return w?w.value:t.transport}return t.transport})(),{unsubscribe:y}=await g.subscribe({params:["newHeads"],onData(w){var v;if(!f)return;const b=ta((v=w.result)==null?void 0:v.number);h.onBlockNumber(b,c),c=b},onError(w){var b;(b=h.onError)==null||b.call(h,w)}});p=y,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function Pz(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function kz(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=Cr(["watchPendingTransactions",t.uid,e,i]);return ag(l,{onTransactions:r,onError:n},u=>{let d;const h=iA(async()=>{var f;try{if(!d)try{d=await At(t,X7,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await At(t,uz,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await At(t,Pz,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function Oz(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>Xg(r))}async function Rz(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function $z(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?Gn(n):void 0,i=r?[s==null?void 0:s.address,[Ue(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}const UD="0x5792579257925792579257925792579257925792579257925792579257925792",LD=Ue(0,{size:32});async function Dz(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?Gn(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?sm({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?Dc([p,f.dataSuffix]):p,to:f.to,value:f.value?Ue(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:Ue(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(b=>!b.optional)){const b="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new uh(new ne(b,{details:b}))}if(a&&d.length>1){const w="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new dh(new ne(w,{details:w}))}const p=[];for(const w of d){const b=rm(t,{account:u,chain:s,data:w.data,to:w.to,value:w.value?ta(w.value):void 0});p.push(b),o>0&&await new Promise(v=>setTimeout(v,o))}const g=await Promise.allSettled(p);if(g.every(w=>w.status==="rejected"))throw g[0].reason;const y=g.map(w=>w.status==="fulfilled"?w.value:LD);return{id:Dc([...y,Ue(s.id,{size:32}),UD])}}throw Y$(h,{...e,account:u,chain:e.chain})}}async function MD(t,e){async function n(u){if(u.endsWith(UD.slice(2))){const h=Ih(IE(u,-64,-32)),f=IE(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(y=>LD.slice(2)!==y?t.request({method:"eth_getTransactionReceipt",params:[`0x${y}`]},{dedupe:!0}):void 0)),g=p.some(y=>y===null)?100:p.every(y=>(y==null?void 0:y.status)==="0x1")?200:p.every(y=>(y==null?void 0:y.status)==="0x0")?500:600;return{atomic:!1,chainId:na(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?na(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:ta(u.blockNumber),gasUsed:ta(u.gasUsed),status:DD[u.status]})))??[],statusCode:l,status:c,version:o}}async function jz(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function Uz(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=Cr(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=rA();let u;const d=ag(o,{resolve:c,reject:l},h=>{const f=iA(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await MD(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new Lz({id:n}))},i):void 0,await a}class Lz extends ne{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}async function Mz(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=Cr(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:y,reject:w}=rA(),b=a?setTimeout(()=>{p(),f(),w(new jF({hash:n}))},a):void 0;return f=ag(c,{onReplaced:r,resolve:y,reject:w},v=>{p=At(t,Nz,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(E){const _=S=>{clearTimeout(b),p(),S(),f()};let x=E;if(!h)try{if(d){if(e>1&&(!d.blockNumber||x-d.blockNumber+1n<e))return;_(()=>v.resolve(d));return}if(l||(h=!0,await n0(async()=>{l=await At(t,$D,"getTransaction")({hash:n}),l.blockNumber&&(x=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await At(t,rT,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||x-d.blockNumber+1n<e))return;_(()=>v.resolve(d))}catch(S){if(S instanceof G$||S instanceof K$){if(!l){h=!1;return}try{u=l,h=!0;const N=await n0(()=>At(t,ig,"getBlock")({blockNumber:x,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:R})=>R instanceof Q$});h=!1;const C=N.transactions.find(({from:R,nonce:B})=>R===u.from&&B===u.nonce);if(!C||(d=await At(t,rT,"getTransactionReceipt")({hash:C.hash}),e>1&&(!d.blockNumber||x-d.blockNumber+1n<e)))return;let O="replaced";C.to===u.to&&C.value===u.value&&C.input===u.input?O="repriced":C.from===C.to&&C.value===0n&&(O="cancelled"),_(()=>{var R;(R=v.onReplaced)==null||R.call(v,{reason:O,replacedTransaction:u,transaction:C,transactionReceipt:d}),v.resolve(d)})}catch(N){_(()=>v.reject(N))}}else _(()=>v.reject(S))}}})}),g}async function Bz(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>lc(n))}async function Fz(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function BD(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new wu({docsPath:"/docs/eip7702/prepareAuthorization"});const i=Gn(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:Gn(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await At(t,nm,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await At(t,rD,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&OD(o.address,i.address))&&(a.nonce+=1)),a}async function zz(t,e){const{account:n=t.account}=e;if(!n)throw new wu({docsPath:"/docs/eip7702/signAuthorization"});const r=Gn(n);if(!r.signAuthorization)throw new iw({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await BD(t,e);return r.signAuthorization(s)}async function qz(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new wu({docsPath:"/docs/actions/wallet/signTransaction"});const i=Gn(n);tm({account:i,...e});const o=await At(t,nm,"getChainId")({});r!==null&&V$({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||av;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:Ue(o),from:i.address}]},{retryCount:0})}async function FD(t,{account:e=t.account,message:n}){if(!e)throw new wu({docsPath:"/docs/actions/wallet/signMessage"});const r=Gn(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?ev(n):n.raw instanceof Uint8Array?Jl(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function Wz(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new wu({docsPath:"/docs/actions/wallet/signTypedData"});const o=Gn(n),a={EIP712Domain:xz({domain:r}),...e.types};if(Cz({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=Ez({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function Hz(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:Ue(e)}]},{retryCount:0})}async function Vz(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}async function zD(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new wu({docsPath:"/docs/contract/writeContract"});const l=r?Gn(r):null,u=sm({abi:n,args:i,functionName:a});try{return await At(t,rm,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw e0(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function ws(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const ow="2.17.3",Gz=()=>`@wagmi/core@${ow}`;var qD=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},r0,WD;let ca=class HE extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return Gz()}constructor(e,n={}){var i;super(),r0.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof HE?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof HE&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return qD(this,r0,"m",WD).call(this,this,e)}};r0=new WeakSet,WD=function t(e,n){return n!=null&&n(e)?e:e.cause?qD(this,r0,"m",t).call(this,e.cause,n):e};class cg extends ca{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class Kz extends ca{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class Yz extends ca{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class Qz extends ca{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class Jz extends ca{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class Zz extends ca{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function aw(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new Kz;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const VE=256;let ny=VE,ry;function HD(t=11){if(!ry||ny+t>VE*2){ry="",ny=0;for(let e=0;e<VE;e++)ry+=(256+Math.random()*256|0).toString(16).substring(1)}return ry.substring(ny,ny+++t)}function VD(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?Gn(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},y={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:HD()};function w(b){return v=>{const E=v(b);for(const x in y)delete E[x];const _={...b,...E};return Object.assign(_,{extend:w(_)})}}return Object.assign(y,{extend:w(y)})}function oA({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=HD();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:pz(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function Xz(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>oA({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function oT(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=eq,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=oA({key:n,name:r,async request({method:g,params:y}){let w;const b=async(v=0)=>{const E=h[v]({...d,chain:c,retryCount:0,timeout:u});try{const _=await E.request({method:g,params:y});return f({method:g,params:y,response:_,transport:E,status:"success"}),_}catch(_){if(f({error:_,method:g,params:y,transport:E,status:"error"}),i(_)||v===h.length-1||(w??(w=h.slice(v+1).some(x=>{const{include:S,exclude:N}=x({chain:c}).config.methods||{};return S?S.includes(g):N?!N.includes(g):!0})),!w))throw _;return b(v+1)}};return b()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};tq({chain:c,interval:g.interval??l,onTransports:y=>h=y,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function eq(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===ch.code||t.code===vn.code||El.nodeMessage.test(t.message)||t.code===5e3))}function tq({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const y=g({chain:t,retryCount:0,timeout:i}),w=Date.now();let b,v;try{await(r?r({transport:y}):y.request({method:"net_listening"})),v=1}catch{v=0}finally{b=Date.now()}return{latency:b-w,success:v}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:y})=>y)))),p=o.map((g,y)=>{const w=u.map(x=>x[y].latency),v=1-w.reduce((x,S)=>x+S,0)/w.length/f,E=u.map(x=>x[y].success),_=E.reduce((x,S)=>x+S,0)/E.length;return _===0?[0,y]:[l*v+c*_,y]}).sort((g,y)=>y[0]-g[0]);n(p.map(([,g])=>o[g])),await t0(e),d()};d()}class nq extends ne{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function sy(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},y=e.retryCount??h,w=f??e.timeout??1e4,b=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!b)throw new nq;const v=wz(b,{fetchOptions:r,onRequest:a,onResponse:c,timeout:w});return oA({key:s,methods:i,name:o,async request({method:E,params:_}){const x={method:E,params:_},{schedule:S}=PD({id:b,wait:g,shouldSplitBatch(R){return R.length>p},fn:R=>v.request({body:R}),sort:(R,B)=>R.id-B.id}),N=async R=>n?S(R):[await v.request({body:R})],[{error:C,result:O}]=await N(x);if(u)return{error:C,result:O};if(C)throw new VS({body:x,error:C,url:b});return O},retryCount:y,retryDelay:l,timeout:w,type:"http"},{fetchOptions:r,url:b})}}function rq(t){return{addChain:e=>mB(t,e),deployContract:e=>m9(t,e),getAddresses:()=>Oz(t),getCallsStatus:e=>MD(t,e),getCapabilities:e=>$z(t,e),getChainId:()=>nm(t),getPermissions:()=>Rz(t),prepareAuthorization:e=>BD(t,e),prepareTransactionRequest:e=>cv(t,e),requestAddresses:()=>Bz(t),requestPermissions:e=>Fz(t,e),sendCalls:e=>Dz(t,e),sendRawTransaction:e=>lD(t,e),sendTransaction:e=>rm(t,e),showCallsStatus:e=>jz(t,e),signAuthorization:e=>zz(t,e),signMessage:e=>FD(t,e),signTransaction:e=>qz(t,e),signTypedData:e=>Wz(t,e),switchChain:e=>Hz(t,e),waitForCallsStatus:e=>Uz(t,e),watchAsset:e=>Vz(t,e),writeContract:e=>zD(t,e)}}async function im(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new Zz({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new Yz;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new Jz({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=Gn(e.account??n.accounts[0]);if(o&&(o.address=lc(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new Qz({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return VD({account:o,chain:a,name:"Connector Client",transport:l=>Xz(c)({...l,retryCount:0})})}async function GD(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function sq(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await im(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return ws(o,nD,"estimateGas")({...s,account:i})}function KD(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(OF[t])}function Ud(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function iq(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return ws(o,hz,"multicall")({allowFailure:n,contracts:s,...i})}function oq(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return ws(s,sA,"readContract")(r)}async function aq(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>iq(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof ID)throw c;const l=()=>o.map(u=>oq(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function cq(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await aT(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await aT(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=b$(Ih(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await ws(c,tD,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:Nh(u,KD(a)),symbol:d.nativeCurrency.symbol,value:u}}async function aT(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await aq(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=Nh(c??"0",KD(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function cT(t){return t.state.chainId}function tu(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!tu(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!tu(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let iy=[];function Gi(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||tu(iy,e)?iy:(iy=e,e)}let Gb=[];function lT(t){const e=t.connectors;return tu(Gb,e)?Gb:(Gb=e,e)}function lq(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return ws(s,J7,"getEnsName")(r)}async function uq(t,e={}){return(await im(t,e)).extend(rq)}async function dq(t,e){const{account:n,chainId:r,...s}=e,i=n??Ud(t).address,o=t.getClient({chainId:r});return ws(o,cv,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let Kb=!1;async function GE(t,e={}){var l,u;if(Kb)return[];Kb=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const y=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:y}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),Kb=!1,a}async function hq(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await im(t,{account:n??void 0,chainId:r,connector:s}),await ws(o,rm,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function fq(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await im(t,{account:n,connector:r}),ws(i,FD,"signMessage")({...s,...n?{account:n}:{}})}class La extends ca{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class pq extends ca{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function uT(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new pq({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new cg;return t.setState(a=>({...a,chainId:r})),i}function YD(t,e){const{onChange:n}=e;return t.subscribe(()=>Ud(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return tu(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function gq(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function mq(t,e){const{onChange:n}=e;return t.subscribe(()=>Gi(t),n,{equalityFn:tu})}function QD(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function yq(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=ws(l,kz,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}async function wq(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await ws(i,Mz,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await ws(i,$D,"getTransaction")({hash:a.transactionHash}),d=await ws(i,kD,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?b$(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function vq(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await im(t,{account:n??void 0,chainId:r,connector:s}),await ws(o,zD,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function j_e(t){return t}uv.type="injected";function uv(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...bq[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:uv.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,y,w,b;const d=await this.getProvider();if(!d)throw new La;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(y=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:y.map(E=>lc(E)),h.length>0&&(h=await this.getAccounts())}catch(v){const E=v;if(E.code===vn.code)throw new vn(E);if(E.code===Cc.code)throw E}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(_=>lc(_))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let v=await this.getChainId();if(l&&v!==l){const E=await this.switchChain({chainId:l}).catch(_=>{if(_.code===vn.code)throw _;return{id:v}});v=(E==null?void 0:E.id)??v}return e&&await((w=c.storage)==null?void 0:w.removeItem(`${this.id}.disconnected`)),t.target||await((b=c.storage)==null?void 0:b.setItem("injected.connected",!0)),{accounts:h,chainId:v}}catch(v){const E=v;throw E.code===vn.code?new vn(E):E.code===Cc.code?new Cc(E):E}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new La;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await jD(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new La;return(await l.request({method:"eth_accounts"})).map(d=>lc(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new La;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=cw(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(w=>window.addEventListener("ethereum#initialized",()=>w(p()),{once:!0}))]:[],new Promise(w=>setTimeout(()=>w(p()),g))]))return!0}throw new La}return!!(await n0(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,y,w;const d=await this.getProvider();if(!d)throw new La;const h=c.chains.find(b=>b.id===u);if(!h)throw new lo(new cg);const f=new Promise(b=>{const v=E=>{"chainId"in E&&E.chainId===u&&(c.emitter.off("change",v),b())};c.emitter.on("change",v)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:Ue(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(b){const v=b;if(v.code===4902||((g=(p=v==null?void 0:v.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:E,..._}=h.blockExplorers??{};let x;l!=null&&l.blockExplorerUrls?x=l.blockExplorerUrls:E&&(x=[E.url,...Object.values(_).map(C=>C.url)]);let S;(y=l==null?void 0:l.rpcUrls)!=null&&y.length?S=l.rpcUrls:S=[((w=h.rpcUrls.default)==null?void 0:w.http[0])??""];const N={blockExplorerUrls:x,chainId:Ue(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:S};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[N]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new vn(new Error("User rejected switch after adding network."))}),f]),h}catch(E){throw new vn(E)}throw v.code===vn.code?new vn(v):new lo(v)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>lc(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const bq={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:cw(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return cw(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:cw(t,"isPhantom")}}};function cw(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function _q(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function Eq(){const t=new Set;let e=[];const n=()=>_q(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const Cq=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},xq=Cq;function Sq(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const KE=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return KE(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return KE(r)(n)}}}},Aq=(t,e)=>(n,r,s)=>{let i={storage:Sq(()=>localStorage),partialize:g=>g,version:0,merge:(g,y)=>({...y,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,y)=>{d(g,y),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,y;if(!l)return;o=!1,a.forEach(b=>{var v;return b((v=r())!=null?v:h)});const w=((y=i.onRehydrateStorage)==null?void 0:y.call(i,(g=r())!=null?g:h))||void 0;return KE(l.getItem.bind(l))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var v;const[E,_]=b;if(f=i.merge(_,(v=r())!=null?v:h),n(f,!0),E)return u()}).then(()=>{w==null||w(f,void 0),f=r(),o=!0,c.forEach(b=>b(f))}).catch(b=>{w==null||w(void 0,b)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},Iq=Aq,dT=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},Yb=t=>t?dT(t):dT;var JD={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var y=this._events[g],w=arguments.length,b,v;if(y.fn){switch(y.once&&this.removeListener(l,y.fn,void 0,!0),w){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,h),!0;case 5:return y.fn.call(y.context,u,d,h,f),!0;case 6:return y.fn.call(y.context,u,d,h,f,p),!0}for(v=1,b=new Array(w-1);v<w;v++)b[v-1]=arguments[v];y.fn.apply(y.context,b)}else{var E=y.length,_;for(v=0;v<E;v++)switch(y[v].once&&this.removeListener(l,y[v].fn,void 0,!0),w){case 1:y[v].fn.call(y[v].context);break;case 2:y[v].fn.call(y[v].context,u);break;case 3:y[v].fn.call(y[v].context,u,d);break;case 4:y[v].fn.call(y[v].context,u,d,h);break;default:if(!b)for(_=1,b=new Array(w-1);_<w;_++)b[_-1]=arguments[_];y[v].fn.apply(y[v].context,b)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,y=[],w=p.length;g<w;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&y.push(p[g]);y.length?this._events[f]=y.length===1?y[0]:y:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(JD);var Tq=JD.exports;const Nq=gu(Tq);class Pq{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new Nq})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function kq(t){return new Pq(t)}function Oq(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function hT(t,e){return t.slice(0,e).join(".")||"."}function fT(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function Rq(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=fT(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=fT(s,c);if(u!==0)return r?e.call(this,a,c,hT(i,u)):`[ref=${hT(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function $q(t,e,n,r){return JSON.stringify(t,Rq((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function Dq(t){const{deserialize:e=Oq,key:n="wagmi",serialize:r=$q,storage:s=ZD}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const ZD={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function jq(){const t=typeof window<"u"&&window.localStorage?window.localStorage:ZD;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const YE=256;let oy=YE,ay;function Uq(t=11){if(!ay||oy+t>YE*2){ay="",oy=0;for(let e=0;e<YE;e++)ay+=(256+Math.random()*256|0).toString(16).substring(1)}return ay.substring(oy,oy+++t)}function Lq(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=Dq({storage:jq()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?Eq():void 0,a=Yb(()=>i.chains),c=Yb(()=>{const _=[],x=new Set;for(const S of i.connectors??[]){const N=l(S);if(_.push(N),!s&&N.rdns){const C=typeof N.rdns=="string"?[N.rdns]:N.rdns;for(const O of C)x.add(O)}}if(!s&&o){const S=o.getProviders();for(const N of S)x.has(N.info.rdns)||_.push(l(u(N)))}return _});function l(_){var N;const x=kq(Uq()),S={..._({emitter:x,chains:a.getState(),storage:n,transports:i.transports}),emitter:x,uid:x.uid};return x.on("connect",v),(N=S.setup)==null||N.call(S),S}function u(_){const{info:x}=_,S=_.provider;return uv({target:{...x,id:x.rdns,provider:S}})}const d=new Map;function h(_={}){const x=_.chainId??y.getState().chainId,S=a.getState().find(C=>C.id===x);if(_.chainId&&!S)throw new cg;{const C=d.get(y.getState().chainId);if(C&&!S)return C;if(!S)throw new cg}{const C=d.get(x);if(C)return C}let N;if(i.client)N=i.client({chain:S});else{const C=S.id,O=a.getState().map(H=>H.id),R={},B=Object.entries(i);for(const[H,F]of B)if(!(H==="chains"||H==="client"||H==="connectors"||H==="transports"))if(typeof F=="object")if(C in F)R[H]=F[C];else{if(O.some(I=>I in F))continue;R[H]=F}else R[H]=F;N=VD({...R,chain:S,batch:R.batch??{multicall:!0},transport:H=>i.transports[C]({...H,connectors:c})})}return d.set(x,N),N}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";ow.startsWith(g)?p=Number.parseInt(ow.replace(g,"")):p=Number.parseInt(ow.split(".")[0]??"0");const y=Yb(xq(n?Iq(f,{migrate(_,x){if(x===p)return _;const S=f(),N=w(_,S.chainId);return{...S,chainId:N}},name:"store",partialize(_){return{connections:{__type:"Map",value:Array.from(_.connections.entries()).map(([x,S])=>{const{id:N,name:C,type:O,uid:R}=S.connector;return[x,{...S,connector:{id:N,name:C,type:O,uid:R}}]})},chainId:_.chainId,current:_.current}},merge(_,x){typeof _=="object"&&_&&"status"in _&&delete _.status;const S=w(_,x.chainId);return{...x,..._,chainId:S}},skipHydration:s,storage:n,version:p}):f));y.setState(f());function w(_,x){return _&&typeof _=="object"&&"chainId"in _&&typeof _.chainId=="number"&&a.getState().some(S=>S.id===_.chainId)?_.chainId:x}r&&y.subscribe(({connections:_,current:x})=>{var S;return x?(S=_.get(x))==null?void 0:S.chainId:void 0},_=>{if(a.getState().some(S=>S.id===_))return y.setState(S=>({...S,chainId:_??S.chainId}))}),o==null||o.subscribe(_=>{const x=new Set,S=new Set;for(const C of c.getState())if(x.add(C.id),C.rdns){const O=typeof C.rdns=="string"?[C.rdns]:C.rdns;for(const R of O)S.add(R)}const N=[];for(const C of _){if(S.has(C.info.rdns))continue;const O=l(u(C));x.has(O.id)||N.push(O)}n&&!y.persist.hasHydrated()||c.setState(C=>[...C,...N],!0)});function b(_){y.setState(x=>{const S=x.connections.get(_.uid);return S?{...x,connections:new Map(x.connections).set(_.uid,{accounts:_.accounts??S.accounts,chainId:_.chainId??S.chainId,connector:S.connector})}:x})}function v(_){y.getState().status==="connecting"||y.getState().status==="reconnecting"||y.setState(x=>{const S=c.getState().find(N=>N.uid===_.uid);return S?(S.emitter.listenerCount("connect")&&S.emitter.off("connect",b),S.emitter.listenerCount("change")||S.emitter.on("change",b),S.emitter.listenerCount("disconnect")||S.emitter.on("disconnect",E),{...x,connections:new Map(x.connections).set(_.uid,{accounts:_.accounts,chainId:_.chainId,connector:S}),current:_.uid,status:"connected"}):x})}function E(_){y.setState(x=>{const S=x.connections.get(_.uid);if(S){const C=S.connector;C.emitter.listenerCount("change")&&S.connector.emitter.off("change",b),C.emitter.listenerCount("disconnect")&&S.connector.emitter.off("disconnect",E),C.emitter.listenerCount("connect")||S.connector.emitter.on("connect",v)}if(x.connections.delete(_.uid),x.connections.size===0)return{...x,connections:new Map,current:null,status:"disconnected"};const N=x.connections.values().next().value;return{...x,connections:new Map(x.connections),current:N.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return y.getState()},setState(_){let x;typeof _=="function"?x=_(y.getState()):x=_;const S=f();typeof x!="object"&&(x=S),Object.keys(S).some(C=>!(C in x))&&(x=S),y.setState(x,!0)},subscribe(_,x,S){return y.subscribe(_,x,S?{...S,fireImmediately:S.emitImmediately}:void 0)},_internal:{mipd:o,store:y,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(_){const x=typeof _=="function"?_(a.getState()):_;if(x.length!==0)return a.setState(x,!0)},subscribe(_){return a.subscribe(_)}},connectors:{providerDetailToConnector:u,setup:l,setState(_){return c.setState(typeof _=="function"?_(c.getState()):_,!0)},subscribe(_){return c.subscribe(_)}},events:{change:b,connect:v,disconnect:E}}}}function Mq(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?GE(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function Bq(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=Mq(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=M.useRef(!0);return M.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const XD=M.createContext(void 0);function Fq(t){const{children:e,config:n}=t,r={value:n};return M.createElement(Bq,t,M.createElement(XD.Provider,r,e))}const zq="2.15.6",qq=()=>`wagmi@${zq}`;let Wq=class extends ca{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return qq()}};class Hq extends Wq{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function Gc(t={}){const e=t.config??M.useContext(XD);if(!e)throw new Hq;return e}var e5={exports:{}},t5={},n5={exports:{}},r5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hh=M;function Vq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gq=typeof Object.is=="function"?Object.is:Vq,Kq=hh.useState,Yq=hh.useEffect,Qq=hh.useLayoutEffect,Jq=hh.useDebugValue;function Zq(t,e){var n=e(),r=Kq({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Qq(function(){s.value=n,s.getSnapshot=e,Qb(s)&&i({inst:s})},[t,n,e]),Yq(function(){return Qb(s)&&i({inst:s}),t(function(){Qb(s)&&i({inst:s})})},[t]),Jq(n),n}function Qb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gq(t,n)}catch{return!0}}function Xq(t,e){return e()}var eW=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Xq:Zq;r5.useSyncExternalStore=hh.useSyncExternalStore!==void 0?hh.useSyncExternalStore:eW;n5.exports=r5;var tW=n5.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dv=M,nW=tW;function rW(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sW=typeof Object.is=="function"?Object.is:rW,iW=nW.useSyncExternalStore,oW=dv.useRef,aW=dv.useEffect,cW=dv.useMemo,lW=dv.useDebugValue;t5.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=oW(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=cW(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,sW(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=iW(t,i[0],i[1]);return aW(function(){o.hasValue=!0,o.value=a},[a]),lW(a),a};e5.exports=t5;var uW=e5.exports;const Jb=t=>typeof t=="object"&&!Array.isArray(t);function dW(t,e,n=e,r=tu){const s=M.useRef([]),i=uW.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(Jb(o)&&Jb(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return M.useMemo(()=>{if(Jb(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function hv(t={}){const e=Gc(t);return dW(n=>YD(e,{onChange:n}),()=>Ud(e))}var kh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},nu=typeof window>"u"||"Deno"in globalThis;function br(){}function hW(t,e){return typeof t=="function"?t(e):t}function QE(t){return typeof t=="number"&&t>=0&&t!==1/0}function s5(t,e){return Math.max(t+(e||0)-Date.now(),0)}function xc(t,e){return typeof t=="function"?t(e):t}function gi(t,e){return typeof t=="function"?t(e):t}function pT(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==aA(o,e.options))return!1}else if(!lg(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function gT(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(ru(e.options.mutationKey)!==ru(i))return!1}else if(!lg(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function aA(t,e){return((e==null?void 0:e.queryKeyHashFn)||ru)(t)}function ru(t){return JSON.stringify(t,(e,n)=>JE(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function lg(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>lg(t[n],e[n])):!1}function i5(t,e){if(t===e)return t;const n=mT(t)&&mT(e);if(n||JE(t)&&JE(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=i5(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function s0(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function mT(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function JE(t){if(!yT(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!yT(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function yT(t){return Object.prototype.toString.call(t)==="[object Object]"}function fW(t){return new Promise(e=>{setTimeout(e,t)})}function ZE(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?i5(t,e):e}function pW(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function gW(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var cA=Symbol();function o5(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===cA?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function a5(t,e){return typeof t=="function"?t(...e):!!t}var kl,Ja,qd,VO,mW=(VO=class extends kh{constructor(){super();Te(this,kl);Te(this,Ja);Te(this,qd);ye(this,qd,e=>{if(!nu&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){z(this,Ja)||this.setEventListener(z(this,qd))}onUnsubscribe(){var e;this.hasListeners()||((e=z(this,Ja))==null||e.call(this),ye(this,Ja,void 0))}setEventListener(e){var n;ye(this,qd,e),(n=z(this,Ja))==null||n.call(this),ye(this,Ja,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){z(this,kl)!==e&&(ye(this,kl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof z(this,kl)=="boolean"?z(this,kl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},kl=new WeakMap,Ja=new WeakMap,qd=new WeakMap,VO),lA=new mW,Wd,Za,Hd,GO,yW=(GO=class extends kh{constructor(){super();Te(this,Wd,!0);Te(this,Za);Te(this,Hd);ye(this,Hd,e=>{if(!nu&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){z(this,Za)||this.setEventListener(z(this,Hd))}onUnsubscribe(){var e;this.hasListeners()||((e=z(this,Za))==null||e.call(this),ye(this,Za,void 0))}setEventListener(e){var n;ye(this,Hd,e),(n=z(this,Za))==null||n.call(this),ye(this,Za,e(this.setOnline.bind(this)))}setOnline(e){z(this,Wd)!==e&&(ye(this,Wd,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return z(this,Wd)}},Wd=new WeakMap,Za=new WeakMap,Hd=new WeakMap,GO),i0=new yW;function XE(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function wW(t){return Math.min(1e3*2**t,3e4)}function c5(t){return(t??"online")==="online"?i0.isOnline():!0}var l5=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Zb(t){return t instanceof l5}function u5(t){let e=!1,n=0,r=!1,s;const i=XE(),o=g=>{var y;r||(h(new l5(g)),(y=t.abort)==null||y.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>lA.isFocused()&&(t.networkMode==="always"||i0.isOnline())&&t.canRun(),u=()=>c5(t.networkMode)&&t.canRun(),d=g=>{var y;r||(r=!0,(y=t.onSuccess)==null||y.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var y;r||(r=!0,(y=t.onError)==null||y.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var y;s=w=>{(r||l())&&g(w)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const y=n===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(w){g=Promise.reject(w)}Promise.resolve(g).then(d).catch(w=>{var x;if(r)return;const b=t.retry??(nu?0:3),v=t.retryDelay??wW,E=typeof v=="function"?v(n,w):v,_=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,w);if(e||!_){h(w);return}n++,(x=t.onFail)==null||x.call(t,n,w),fW(E).then(()=>l()?void 0:f()).then(()=>{e?h(w):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var vW=t=>setTimeout(t,0);function bW(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=vW;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var En=bW(),Ol,KO,d5=(KO=class{constructor(){Te(this,Ol)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),QE(this.gcTime)&&ye(this,Ol,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(nu?1/0:5*60*1e3))}clearGcTimeout(){z(this,Ol)&&(clearTimeout(z(this,Ol)),ye(this,Ol,void 0))}},Ol=new WeakMap,KO),Vd,Rl,js,$l,ur,qg,Dl,ui,To,YO,_W=(YO=class extends d5{constructor(e){super();Te(this,ui);Te(this,Vd);Te(this,Rl);Te(this,js);Te(this,$l);Te(this,ur);Te(this,qg);Te(this,Dl);ye(this,Dl,!1),ye(this,qg,e.defaultOptions),this.setOptions(e.options),this.observers=[],ye(this,$l,e.client),ye(this,js,z(this,$l).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ye(this,Vd,EW(this.options)),this.state=e.state??z(this,Vd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=z(this,ur))==null?void 0:e.promise}setOptions(e){this.options={...z(this,qg),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&z(this,js).remove(this)}setData(e,n){const r=ZE(this.state.data,e,this.options);return Ke(this,ui,To).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Ke(this,ui,To).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=z(this,ur))==null?void 0:r.promise;return(s=z(this,ur))==null||s.cancel(e),n?n.then(br).catch(br):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(z(this,Vd))}isActive(){return this.observers.some(e=>gi(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===cA||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>xc(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!s5(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=z(this,ur))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=z(this,ur))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),z(this,js).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(z(this,ur)&&(z(this,Dl)?z(this,ur).cancel({revert:!0}):z(this,ur).cancelRetry()),this.scheduleGc()),z(this,js).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ke(this,ui,To).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(z(this,ur))return z(this,ur).continueRetry(),z(this,ur).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(ye(this,Dl,!0),r.signal)})},i=()=>{const h=o5(this.options,n),p=(()=>{const g={client:z(this,$l),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return ye(this,Dl,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:z(this,$l),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),ye(this,Rl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&Ke(this,ui,To).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,y;Zb(h)&&h.silent||Ke(this,ui,To).call(this,{type:"error",error:h}),Zb(h)||((p=(f=z(this,js).config).onError)==null||p.call(f,h,this),(y=(g=z(this,js).config).onSettled)==null||y.call(g,this.state.data,h,this)),this.scheduleGc()};return ye(this,ur,u5({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,y;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(w){c(w);return}(p=(f=z(this,js).config).onSuccess)==null||p.call(f,h,this),(y=(g=z(this,js).config).onSettled)==null||y.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{Ke(this,ui,To).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{Ke(this,ui,To).call(this,{type:"pause"})},onContinue:()=>{Ke(this,ui,To).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),z(this,ur).start()}},Vd=new WeakMap,Rl=new WeakMap,js=new WeakMap,$l=new WeakMap,ur=new WeakMap,qg=new WeakMap,Dl=new WeakMap,ui=new WeakSet,To=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...h5(r.data,this.options),fetchMeta:e.meta??null};case"success":return ye(this,Rl,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Zb(s)&&s.revert&&z(this,Rl)?{...z(this,Rl),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),En.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),z(this,js).notify({query:this,type:"updated",action:e})})},YO);function h5(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:c5(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function EW(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ki,QO,CW=(QO=class extends kh{constructor(e={}){super();Te(this,Ki);this.config=e,ye(this,Ki,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??aA(s,n);let o=this.get(i);return o||(o=new _W({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){z(this,Ki).has(e.queryHash)||(z(this,Ki).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=z(this,Ki).get(e.queryHash);n&&(e.destroy(),n===e&&z(this,Ki).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){En.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return z(this,Ki).get(e)}getAll(){return[...z(this,Ki).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>pT(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>pT(e,r)):n}notify(e){En.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){En.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){En.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ki=new WeakMap,QO),Yi,yr,jl,Qi,Oa,JO,xW=(JO=class extends d5{constructor(e){super();Te(this,Qi);Te(this,Yi);Te(this,yr);Te(this,jl);this.mutationId=e.mutationId,ye(this,yr,e.mutationCache),ye(this,Yi,[]),this.state=e.state||f5(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){z(this,Yi).includes(e)||(z(this,Yi).push(e),this.clearGcTimeout(),z(this,yr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ye(this,Yi,z(this,Yi).filter(n=>n!==e)),this.scheduleGc(),z(this,yr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){z(this,Yi).length||(this.state.status==="pending"?this.scheduleGc():z(this,yr).remove(this))}continue(){var e;return((e=z(this,jl))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,y,w,b,v,E,_,x,S,N;const n=()=>{Ke(this,Qi,Oa).call(this,{type:"continue"})};ye(this,jl,u5({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(C,O)=>{Ke(this,Qi,Oa).call(this,{type:"failed",failureCount:C,error:O})},onPause:()=>{Ke(this,Qi,Oa).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>z(this,yr).canRun(this)}));const r=this.state.status==="pending",s=!z(this,jl).canStart();try{if(r)n();else{Ke(this,Qi,Oa).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=z(this,yr).config).onMutate)==null?void 0:o.call(i,e,this));const O=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));O!==this.state.context&&Ke(this,Qi,Oa).call(this,{type:"pending",context:O,variables:e,isPaused:s})}const C=await z(this,jl).start();return await((u=(l=z(this,yr).config).onSuccess)==null?void 0:u.call(l,C,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,C,e,this.state.context)),await((p=(f=z(this,yr).config).onSettled)==null?void 0:p.call(f,C,null,this.state.variables,this.state.context,this)),await((y=(g=this.options).onSettled)==null?void 0:y.call(g,C,null,e,this.state.context)),Ke(this,Qi,Oa).call(this,{type:"success",data:C}),C}catch(C){try{throw await((b=(w=z(this,yr).config).onError)==null?void 0:b.call(w,C,e,this.state.context,this)),await((E=(v=this.options).onError)==null?void 0:E.call(v,C,e,this.state.context)),await((x=(_=z(this,yr).config).onSettled)==null?void 0:x.call(_,void 0,C,this.state.variables,this.state.context,this)),await((N=(S=this.options).onSettled)==null?void 0:N.call(S,void 0,C,e,this.state.context)),C}finally{Ke(this,Qi,Oa).call(this,{type:"error",error:C})}}finally{z(this,yr).runNext(this)}}},Yi=new WeakMap,yr=new WeakMap,jl=new WeakMap,Qi=new WeakSet,Oa=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),En.batch(()=>{z(this,Yi).forEach(r=>{r.onMutationUpdate(e)}),z(this,yr).notify({mutation:this,type:"updated",action:e})})},JO);function f5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Uo,di,Wg,ZO,SW=(ZO=class extends kh{constructor(e={}){super();Te(this,Uo);Te(this,di);Te(this,Wg);this.config=e,ye(this,Uo,new Set),ye(this,di,new Map),ye(this,Wg,0)}build(e,n,r){const s=new xW({mutationCache:this,mutationId:++jm(this,Wg)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){z(this,Uo).add(e);const n=cy(e);if(typeof n=="string"){const r=z(this,di).get(n);r?r.push(e):z(this,di).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(z(this,Uo).delete(e)){const n=cy(e);if(typeof n=="string"){const r=z(this,di).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&z(this,di).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=cy(e);if(typeof n=="string"){const r=z(this,di).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=cy(e);if(typeof n=="string"){const s=(r=z(this,di).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){En.batch(()=>{z(this,Uo).forEach(e=>{this.notify({type:"removed",mutation:e})}),z(this,Uo).clear(),z(this,di).clear()})}getAll(){return Array.from(z(this,Uo))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>gT(n,r))}findAll(e={}){return this.getAll().filter(n=>gT(e,n))}notify(e){En.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return En.batch(()=>Promise.all(e.map(n=>n.continue().catch(br))))}},Uo=new WeakMap,di=new WeakMap,Wg=new WeakMap,ZO);function cy(t){var e;return(e=t.options.scope)==null?void 0:e.id}function wT(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const y=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},w=o5(e.options,e.fetchOptions),b=async(v,E,_)=>{if(g)return Promise.reject();if(E==null&&v.pages.length)return Promise.resolve(v);const S=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:E,direction:_?"backward":"forward",meta:e.options.meta};return y(R),R})(),N=await w(S),{maxPages:C}=e.options,O=_?gW:pW;return{pages:O(v.pages,N,C),pageParams:O(v.pageParams,E,C)}};if(s&&i.length){const v=s==="backward",E=v?AW:vT,_={pages:i,pageParams:o},x=E(r,_);a=await b(_,x,v)}else{const v=t??i.length;do{const E=c===0?o[0]??r.initialPageParam:vT(r,a);if(c>0&&E==null)break;a=await b(a,E),c++}while(c<v)}return a};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function vT(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function AW(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var tn,Xa,ec,Gd,Kd,tc,Yd,Qd,XO,IW=(XO=class{constructor(t={}){Te(this,tn);Te(this,Xa);Te(this,ec);Te(this,Gd);Te(this,Kd);Te(this,tc);Te(this,Yd);Te(this,Qd);ye(this,tn,t.queryCache||new CW),ye(this,Xa,t.mutationCache||new SW),ye(this,ec,t.defaultOptions||{}),ye(this,Gd,new Map),ye(this,Kd,new Map),ye(this,tc,0)}mount(){jm(this,tc)._++,z(this,tc)===1&&(ye(this,Yd,lA.subscribe(async t=>{t&&(await this.resumePausedMutations(),z(this,tn).onFocus())})),ye(this,Qd,i0.subscribe(async t=>{t&&(await this.resumePausedMutations(),z(this,tn).onOnline())})))}unmount(){var t,e;jm(this,tc)._--,z(this,tc)===0&&((t=z(this,Yd))==null||t.call(this),ye(this,Yd,void 0),(e=z(this,Qd))==null||e.call(this),ye(this,Qd,void 0))}isFetching(t){return z(this,tn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return z(this,Xa).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=z(this,tn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=z(this,tn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(xc(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return z(this,tn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=z(this,tn).get(r.queryHash),i=s==null?void 0:s.state.data,o=hW(e,i);if(o!==void 0)return z(this,tn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return En.batch(()=>z(this,tn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=z(this,tn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=z(this,tn);En.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=z(this,tn);return En.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=En.batch(()=>z(this,tn).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(br).catch(br)}invalidateQueries(t,e={}){return En.batch(()=>(z(this,tn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=En.batch(()=>z(this,tn).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(br)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(br)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=z(this,tn).build(this,e);return n.isStaleByTime(xc(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(br).catch(br)}fetchInfiniteQuery(t){return t.behavior=wT(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(br).catch(br)}ensureInfiniteQueryData(t){return t.behavior=wT(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return i0.isOnline()?z(this,Xa).resumePausedMutations():Promise.resolve()}getQueryCache(){return z(this,tn)}getMutationCache(){return z(this,Xa)}getDefaultOptions(){return z(this,ec)}setDefaultOptions(t){ye(this,ec,t)}setQueryDefaults(t,e){z(this,Gd).set(ru(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...z(this,Gd).values()],n={};return e.forEach(r=>{lg(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){z(this,Kd).set(ru(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...z(this,Kd).values()],n={};return e.forEach(r=>{lg(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...z(this,ec).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=aA(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===cA&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...z(this,ec).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){z(this,tn).clear(),z(this,Xa).clear()}},tn=new WeakMap,Xa=new WeakMap,ec=new WeakMap,Gd=new WeakMap,Kd=new WeakMap,tc=new WeakMap,Yd=new WeakMap,Qd=new WeakMap,XO),Fr,nt,Hg,wr,Ul,Jd,nc,rc,Vg,Zd,Xd,Ll,Ml,sc,eh,mt,$f,eC,tC,nC,rC,sC,iC,oC,p5,eR,TW=(eR=class extends kh{constructor(e,n){super();Te(this,mt);Te(this,Fr);Te(this,nt);Te(this,Hg);Te(this,wr);Te(this,Ul);Te(this,Jd);Te(this,nc);Te(this,rc);Te(this,Vg);Te(this,Zd);Te(this,Xd);Te(this,Ll);Te(this,Ml);Te(this,sc);Te(this,eh,new Set);this.options=n,ye(this,Fr,e),ye(this,rc,null),ye(this,nc,XE()),this.options.experimental_prefetchInRender||z(this,nc).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(z(this,nt).addObserver(this),bT(z(this,nt),this.options)?Ke(this,mt,$f).call(this):this.updateResult(),Ke(this,mt,rC).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return aC(z(this,nt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return aC(z(this,nt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ke(this,mt,sC).call(this),Ke(this,mt,iC).call(this),z(this,nt).removeObserver(this)}setOptions(e){const n=this.options,r=z(this,nt);if(this.options=z(this,Fr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof gi(this.options.enabled,z(this,nt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ke(this,mt,oC).call(this),z(this,nt).setOptions(this.options),n._defaulted&&!s0(this.options,n)&&z(this,Fr).getQueryCache().notify({type:"observerOptionsUpdated",query:z(this,nt),observer:this});const s=this.hasListeners();s&&_T(z(this,nt),r,this.options,n)&&Ke(this,mt,$f).call(this),this.updateResult(),s&&(z(this,nt)!==r||gi(this.options.enabled,z(this,nt))!==gi(n.enabled,z(this,nt))||xc(this.options.staleTime,z(this,nt))!==xc(n.staleTime,z(this,nt)))&&Ke(this,mt,eC).call(this);const i=Ke(this,mt,tC).call(this);s&&(z(this,nt)!==r||gi(this.options.enabled,z(this,nt))!==gi(n.enabled,z(this,nt))||i!==z(this,sc))&&Ke(this,mt,nC).call(this,i)}getOptimisticResult(e){const n=z(this,Fr).getQueryCache().build(z(this,Fr),e),r=this.createResult(n,e);return PW(this,r)&&(ye(this,wr,r),ye(this,Jd,this.options),ye(this,Ul,z(this,nt).state)),r}getCurrentResult(){return z(this,wr)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){z(this,eh).add(e)}getCurrentQuery(){return z(this,nt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=z(this,Fr).defaultQueryOptions(e),r=z(this,Fr).getQueryCache().build(z(this,Fr),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Ke(this,mt,$f).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),z(this,wr)))}createResult(e,n){var C;const r=z(this,nt),s=this.options,i=z(this,wr),o=z(this,Ul),a=z(this,Jd),l=e!==r?e.state:z(this,Hg),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const O=this.hasListeners(),R=!O&&bT(e,n),B=O&&_T(e,r,n,s);(R||B)&&(d={...d,...h5(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:y}=d;f=d.data;let w=!1;if(n.placeholderData!==void 0&&f===void 0&&y==="pending"){let O;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(O=i.data,w=!0):O=typeof n.placeholderData=="function"?n.placeholderData((C=z(this,Xd))==null?void 0:C.state.data,z(this,Xd)):n.placeholderData,O!==void 0&&(y="success",f=ZE(i==null?void 0:i.data,O,n),h=!0)}if(n.select&&f!==void 0&&!w)if(i&&f===(o==null?void 0:o.data)&&n.select===z(this,Vg))f=z(this,Zd);else try{ye(this,Vg,n.select),f=n.select(f),f=ZE(i==null?void 0:i.data,f,n),ye(this,Zd,f),ye(this,rc,null)}catch(O){ye(this,rc,O)}z(this,rc)&&(p=z(this,rc),f=z(this,Zd),g=Date.now(),y="error");const b=d.fetchStatus==="fetching",v=y==="pending",E=y==="error",_=v&&b,x=f!==void 0,N={status:y,fetchStatus:d.fetchStatus,isPending:v,isSuccess:y==="success",isError:E,isInitialLoading:_,isLoading:_,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:b,isRefetching:b&&!v,isLoadingError:E&&!x,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:E&&x,isStale:uA(e,n),refetch:this.refetch,promise:z(this,nc)};if(this.options.experimental_prefetchInRender){const O=H=>{N.status==="error"?H.reject(N.error):N.data!==void 0&&H.resolve(N.data)},R=()=>{const H=ye(this,nc,N.promise=XE());O(H)},B=z(this,nc);switch(B.status){case"pending":e.queryHash===r.queryHash&&O(B);break;case"fulfilled":(N.status==="error"||N.data!==B.value)&&R();break;case"rejected":(N.status!=="error"||N.error!==B.reason)&&R();break}}return N}updateResult(){const e=z(this,wr),n=this.createResult(z(this,nt),this.options);if(ye(this,Ul,z(this,nt).state),ye(this,Jd,this.options),z(this,Ul).data!==void 0&&ye(this,Xd,z(this,nt)),s0(n,e))return;ye(this,wr,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!z(this,eh).size)return!0;const o=new Set(i??z(this,eh));return this.options.throwOnError&&o.add("error"),Object.keys(z(this,wr)).some(a=>{const c=a;return z(this,wr)[c]!==e[c]&&o.has(c)})};Ke(this,mt,p5).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ke(this,mt,rC).call(this)}},Fr=new WeakMap,nt=new WeakMap,Hg=new WeakMap,wr=new WeakMap,Ul=new WeakMap,Jd=new WeakMap,nc=new WeakMap,rc=new WeakMap,Vg=new WeakMap,Zd=new WeakMap,Xd=new WeakMap,Ll=new WeakMap,Ml=new WeakMap,sc=new WeakMap,eh=new WeakMap,mt=new WeakSet,$f=function(e){Ke(this,mt,oC).call(this);let n=z(this,nt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(br)),n},eC=function(){Ke(this,mt,sC).call(this);const e=xc(this.options.staleTime,z(this,nt));if(nu||z(this,wr).isStale||!QE(e))return;const r=s5(z(this,wr).dataUpdatedAt,e)+1;ye(this,Ll,setTimeout(()=>{z(this,wr).isStale||this.updateResult()},r))},tC=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(z(this,nt)):this.options.refetchInterval)??!1},nC=function(e){Ke(this,mt,iC).call(this),ye(this,sc,e),!(nu||gi(this.options.enabled,z(this,nt))===!1||!QE(z(this,sc))||z(this,sc)===0)&&ye(this,Ml,setInterval(()=>{(this.options.refetchIntervalInBackground||lA.isFocused())&&Ke(this,mt,$f).call(this)},z(this,sc)))},rC=function(){Ke(this,mt,eC).call(this),Ke(this,mt,nC).call(this,Ke(this,mt,tC).call(this))},sC=function(){z(this,Ll)&&(clearTimeout(z(this,Ll)),ye(this,Ll,void 0))},iC=function(){z(this,Ml)&&(clearInterval(z(this,Ml)),ye(this,Ml,void 0))},oC=function(){const e=z(this,Fr).getQueryCache().build(z(this,Fr),this.options);if(e===z(this,nt))return;const n=z(this,nt);ye(this,nt,e),ye(this,Hg,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},p5=function(e){En.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(z(this,wr))}),z(this,Fr).getQueryCache().notify({query:z(this,nt),type:"observerResultsUpdated"})})},eR);function NW(t,e){return gi(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function bT(t,e){return NW(t,e)||t.state.data!==void 0&&aC(t,e,e.refetchOnMount)}function aC(t,e,n){if(gi(e.enabled,t)!==!1&&xc(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&uA(t,e)}return!1}function _T(t,e,n,r){return(t!==e||gi(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&uA(t,n)}function uA(t,e){return gi(e.enabled,t)!==!1&&t.isStaleByTime(xc(e.staleTime,t))}function PW(t,e){return!s0(t.getCurrentResult(),e)}var ic,oc,zr,Lo,Yo,lw,cC,tR,kW=(tR=class extends kh{constructor(n,r){super();Te(this,Yo);Te(this,ic);Te(this,oc);Te(this,zr);Te(this,Lo);ye(this,ic,n),this.setOptions(r),this.bindMethods(),Ke(this,Yo,lw).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=z(this,ic).defaultMutationOptions(n),s0(this.options,r)||z(this,ic).getMutationCache().notify({type:"observerOptionsUpdated",mutation:z(this,zr),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&ru(r.mutationKey)!==ru(this.options.mutationKey)?this.reset():((s=z(this,zr))==null?void 0:s.state.status)==="pending"&&z(this,zr).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=z(this,zr))==null||n.removeObserver(this)}onMutationUpdate(n){Ke(this,Yo,lw).call(this),Ke(this,Yo,cC).call(this,n)}getCurrentResult(){return z(this,oc)}reset(){var n;(n=z(this,zr))==null||n.removeObserver(this),ye(this,zr,void 0),Ke(this,Yo,lw).call(this),Ke(this,Yo,cC).call(this)}mutate(n,r){var s;return ye(this,Lo,r),(s=z(this,zr))==null||s.removeObserver(this),ye(this,zr,z(this,ic).getMutationCache().build(z(this,ic),this.options)),z(this,zr).addObserver(this),z(this,zr).execute(n)}},ic=new WeakMap,oc=new WeakMap,zr=new WeakMap,Lo=new WeakMap,Yo=new WeakSet,lw=function(){var r;const n=((r=z(this,zr))==null?void 0:r.state)??f5();ye(this,oc,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},cC=function(n){En.batch(()=>{var r,s,i,o,a,c,l,u;if(z(this,Lo)&&this.hasListeners()){const d=z(this,oc).variables,h=z(this,oc).context;(n==null?void 0:n.type)==="success"?((s=(r=z(this,Lo)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=z(this,Lo)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=z(this,Lo)).onError)==null||c.call(a,n.error,d,h),(u=(l=z(this,Lo)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(z(this,oc))})})},tR);function OW(t){return JSON.stringify(t,(e,n)=>RW(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function RW(t){if(!ET(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!ET(n)||!n.hasOwnProperty("isPrototypeOf"))}function ET(t){return Object.prototype.toString.call(t)==="[object Object]"}function g5(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:y,getNextPageParam:w,initialPageParam:b,_optimisticResults:v,enabled:E,notifyOnChangeProps:_,placeholderData:x,refetchInterval:S,refetchIntervalInBackground:N,refetchOnMount:C,refetchOnReconnect:O,refetchOnWindowFocus:R,retryOnMount:B,select:H,staleTime:F,suspense:A,throwOnError:I,config:U,connector:T,query:k,...L}=t;return L}function $W(t){return{mutationFn(e){return aw(t,e)},mutationKey:["connect"]}}function DW(t){return{mutationFn(e){return GD(t,e)},mutationKey:["disconnect"]}}function jW(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return lq(t,{...i,address:r})},queryKey:UW(e)}}function UW(t={}){return["ensName",g5(t)]}function LW(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return uq(t,{...o,connector:r})},queryKey:MW(e)}}function MW(t={}){const{connector:e,...n}=t;return["walletClient",{...g5(n),connectorUid:e==null?void 0:e.uid}]}var m5=M.createContext(void 0),dA=t=>{const e=M.useContext(m5);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},BW=({client:t,children:e})=>(M.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(m5.Provider,{value:t,children:e})),y5=M.createContext(!1),FW=()=>M.useContext(y5);y5.Provider;function zW(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var qW=M.createContext(zW()),WW=()=>M.useContext(qW),HW=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},VW=t=>{M.useEffect(()=>{t.clearReset()},[t])},GW=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||a5(n,[t.error,r])),KW=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},YW=(t,e)=>t.isLoading&&t.isFetching&&!e,QW=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,CT=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function JW(t,e,n){var d,h,f,p,g;const r=FW(),s=WW(),i=dA(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",KW(o),HW(o,s),VW(s);const a=!i.getQueryCache().get(o.queryHash),[c]=M.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(M.useSyncExternalStore(M.useCallback(y=>{const w=u?c.subscribe(En.batchCalls(y)):br;return c.updateResult(),w},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),M.useEffect(()=>{c.setOptions(o)},[o,c]),QW(o,l))throw CT(o,c,s);if(GW({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!nu&&YW(l,r)){const y=a?CT(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;y==null||y.catch(br).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function ZW(t,e){return JW(t,TW)}function w5(t,e){const n=dA(),[r]=M.useState(()=>new kW(n,t));M.useEffect(()=>{r.setOptions(t)},[r,t]);const s=M.useSyncExternalStore(M.useCallback(o=>r.subscribe(En.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=M.useCallback((o,a)=>{r.mutate(o,a).catch(br)},[r]);if(s.error&&a5(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function v5(t){const e=ZW({...t,queryKeyHashFn:OW});return e.queryKey=t.queryKey,e}function b5(t={}){const e=Gc(t);return M.useSyncExternalStore(n=>gq(e,{onChange:n}),()=>cT(e),()=>cT(e))}function XW(t={}){const e=Gc(t);return M.useSyncExternalStore(n=>QD(e,{onChange:n}),()=>lT(e),()=>lT(e))}function _5(t={}){const{mutation:e}=t,n=Gc(t),r=$W(n),{mutate:s,mutateAsync:i,...o}=w5({...e,...r});return M.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:XW({config:n})}}function eH(t={}){const e=Gc(t);return M.useSyncExternalStore(n=>mq(e,{onChange:n}),()=>Gi(e),()=>Gi(e))}function E5(t={}){const{mutation:e}=t,n=Gc(t),r=DW(n),{mutate:s,mutateAsync:i,...o}=w5({...e,...r});return{...o,connectors:eH({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function C5(t={}){const{address:e,query:n={}}=t,r=Gc(t),s=b5({config:r}),i=jW(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return v5({...n,...i,enabled:o})}function x5(t={}){const{query:e={},...n}=t,r=Gc(n),s=dA(),{address:i,connector:o,status:a}=hv({config:r}),c=b5({config:r}),l=t.connector??o,{queryKey:u,...d}=LW(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=M.useRef(i);return M.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),v5({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}const tH="_verified_lvyh0_1",hA={verified:tH},nH=()=>m.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:hA.verified,children:m.jsx("g",{children:m.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),rH=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:hA.verified,children:m.jsxs("g",{children:[m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[m.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),m.jsx("stop",{offset:".539",stopColor:"#cd8105"}),m.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),m.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),m.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[m.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),m.jsx("stop",{offset:".406",stopColor:"#e2b719"}),m.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),m.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[m.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),m.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),m.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),sH=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:hA.verified,children:m.jsx("g",{children:m.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function S5(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=S5(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Sc(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=S5(t))&&(r&&(r+=" "),r+=e);return r}const iH="_root_98iqw_1",oH="_article_98iqw_21",xT={root:iH,article:oH},fA=({className:t,children:e})=>m.jsx("div",{className:Sc("react-tweet-theme",xT.root,t),children:m.jsx("article",{className:xT.article,children:e})}),A5=t=>m.jsx("img",{...t}),aH="_header_nqq4j_1",cH="_avatar_nqq4j_11",lH="_avatarOverflow_nqq4j_16",uH="_avatarSquare_nqq4j_23",dH="_avatarShadow_nqq4j_26",hH="_author_nqq4j_37",fH="_authorLink_nqq4j_44",pH="_authorVerified_nqq4j_53",gH="_authorLinkText_nqq4j_56",mH="_authorMeta_nqq4j_63",yH="_authorFollow_nqq4j_66",wH="_username_nqq4j_69",vH="_follow_nqq4j_74",bH="_separator_nqq4j_82",_H="_brand_nqq4j_86",EH="_twitterIcon_nqq4j_90",Un={header:aH,avatar:cH,avatarOverflow:lH,avatarSquare:uH,avatarShadow:dH,author:hH,authorLink:fH,authorVerified:pH,authorLinkText:gH,authorMeta:mH,authorFollow:yH,username:wH,follow:vH,separator:bH,brand:_H,twitterIcon:EH},CH="_verifiedOld_lcna5_1",xH="_verifiedBlue_lcna5_4",SH="_verifiedGovernment_lcna5_7",Xb={verifiedOld:CH,verifiedBlue:xH,verifiedGovernment:SH},I5=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=m.jsx(nH,{}),s=Xb.verifiedBlue;if(n)switch(t.is_blue_verified||(s=Xb.verifiedOld),t.verified_type){case"Government":r=m.jsx(sH,{}),s=Xb.verifiedGovernment;break;case"Business":r=m.jsx(rH,{}),s=null;break}return n?m.jsx("div",{className:Sc(e,s),children:r}):null},AH=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:A5,{user:s}=t;return m.jsxs("div",{className:Un.header,children:[m.jsxs("a",{href:t.url,className:Un.avatar,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:Sc(Un.avatarOverflow,s.profile_image_shape==="Square"&&Un.avatarSquare),children:m.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),m.jsx("div",{className:Un.avatarOverflow,children:m.jsx("div",{className:Un.avatarShadow})})]}),m.jsxs("div",{className:Un.author,children:[m.jsxs("a",{href:t.url,className:Un.authorLink,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:Un.authorLinkText,children:m.jsx("span",{title:s.name,children:s.name})}),m.jsx(I5,{user:s,className:Un.authorVerified})]}),m.jsxs("div",{className:Un.authorMeta,children:[m.jsx("a",{href:t.url,className:Un.username,target:"_blank",rel:"noopener noreferrer",children:m.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),m.jsxs("div",{className:Un.authorFollow,children:[m.jsx("span",{className:Un.separator,children:"·"}),m.jsx("a",{href:s.follow_url,className:Un.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),m.jsx("a",{href:t.url,className:Un.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:Un.twitterIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},IH="_root_1ec15_1",TH={root:IH},NH=({tweet:t})=>m.jsxs("a",{href:t.in_reply_to_url,className:TH.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),PH="_root_eihfa_1",kH={root:PH},OH=({href:t,children:e})=>m.jsx("a",{href:t,className:kH.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),RH="_root_1xq52_1",$H={root:RH},DH=({tweet:t})=>m.jsx("p",{className:$H.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return m.jsx(OH,{href:e.href,children:e.text},n);case"media":return;default:return m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),ST=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,T5=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,jH=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,UH=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,LH=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,MH=t=>`https://x.com/hashtag/${t.text}`,BH=t=>`https://x.com/search?q=%24${t.text}`,FH=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,N5=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},zH=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},qH=t=>{const e=zH(t);return e.length>1?e[1]:e[0]},lC=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function AT(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return sf(n,"hashtag",t.entities.hashtags),sf(n,"mention",t.entities.user_mentions),sf(n,"url",t.entities.urls),sf(n,"symbol",t.entities.symbols),t.entities.media&&sf(n,"media",t.entities.media),WH(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:MH(r),text:s});case"mention":return Object.assign(r,{href:T5(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:BH(r),text:s});default:return Object.assign(r,{text:s})}})}function sf(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function WH(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const HH=t=>({...t,url:ST(t),user:{...t.user,url:T5(t),follow_url:LH(t)},like_url:jH(t),reply_url:UH(t),in_reply_to_url:t.in_reply_to_screen_name?FH(t):void 0,entities:AT(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:ST(t.quoted_tweet),entities:AT(t.quoted_tweet)}:void 0}),VH="_root_g9tkv_1",GH="_rounded_g9tkv_6",KH="_mediaWrapper_g9tkv_10",YH="_grid2Columns_g9tkv_17",QH="_grid3_g9tkv_20",JH="_grid2x2_g9tkv_23",ZH="_mediaContainer_g9tkv_26",XH="_mediaLink_g9tkv_34",eV="_skeleton_g9tkv_38",tV="_image_g9tkv_43",cs={root:VH,rounded:GH,mediaWrapper:KH,grid2Columns:YH,grid3:QH,grid2x2:JH,mediaContainer:ZH,mediaLink:XH,skeleton:eV,image:tV},nV="_anchor_fp31d_1",rV="_videoButton_fp31d_17",sV="_videoButtonIcon_fp31d_35",iV="_watchOnTwitter_fp31d_44",oV="_viewReplies_fp31d_60",Du={anchor:nV,videoButton:rV,videoButtonIcon:sV,watchOnTwitter:iV,viewReplies:oV},aV=({tweet:t,media:e})=>{const[n,r]=M.useState(!0),[s,i]=M.useState(!1),[o,a]=M.useState(!1),c=qH(e);let l=0;return m.jsxs(m.Fragment,{children:[m.jsx("video",{className:cs.image,poster:N5(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:m.jsx("source",{src:c.url,type:c.content_type})}),n&&m.jsx("button",{type:"button",className:Du.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:m.jsx("svg",{viewBox:"0 0 24 24",className:Du.videoButtonIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&m.jsx("div",{className:Du.watchOnTwitter,children:m.jsx("a",{href:t.url,className:Du.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&m.jsx("a",{href:t.url,className:Sc(Du.anchor,Du.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},cV=t=>m.jsx("img",{...t}),IT=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},P5=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:cV;return m.jsx("div",{className:Sc(cs.root,!n&&cs.rounded),children:m.jsx("div",{className:Sc(cs.mediaWrapper,o>1&&cs.grid2Columns,o===3&&cs.grid3,o>4&&cs.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>m.jsx(M.Fragment,{children:l.type==="photo"?m.jsxs("a",{href:t.url,className:Sc(cs.mediaContainer,cs.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:cs.skeleton,style:IT(l,o)}),m.jsx(c,{src:N5(l,"small"),alt:l.ext_alt_text||"Image",className:cs.image,draggable:!0})]},l.media_url_https):m.jsxs("div",{className:cs.mediaContainer,children:[m.jsx("div",{className:cs.skeleton,style:IT(l,o)}),m.jsx(aV,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},lV={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},uV=new Intl.DateTimeFormat("en-US",lV),dV=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},hV=t=>{const e=dV(uV.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n} · ${r}`},fV="_root_i24yn_1",pV={root:fV},gV=({tweet:t})=>{const e=new Date(t.created_at),n=hV(e);return m.jsx("a",{className:pV.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:m.jsx("time",{dateTime:e.toISOString(),children:n})})},mV="_info_19qcj_1",yV="_infoLink_19qcj_10",wV="_infoIcon_19qcj_30",e1={info:mV,infoLink:yV,infoIcon:wV},vV=({tweet:t})=>m.jsxs("div",{className:e1.info,children:[m.jsx(gV,{tweet:t}),m.jsx("a",{className:e1.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:e1.infoIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),bV="_actions_n2anf_1",_V="_like_n2anf_13",EV="_reply_n2anf_14",CV="_copy_n2anf_15",xV="_likeIconWrapper_n2anf_27",SV="_likeCount_n2anf_30",AV="_replyIconWrapper_n2anf_35",IV="_copyIconWrapper_n2anf_36",TV="_likeIcon_n2anf_27",NV="_replyIcon_n2anf_35",PV="_copyIcon_n2anf_36",kV="_replyText_n2anf_56",OV="_copyText_n2anf_57",qr={actions:bV,like:_V,reply:EV,copy:CV,likeIconWrapper:xV,likeCount:SV,replyIconWrapper:AV,copyIconWrapper:IV,likeIcon:TV,replyIcon:NV,copyIcon:PV,replyText:kV,copyText:OV},RV=({tweet:t})=>{const[e,n]=M.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return M.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),m.jsxs("button",{type:"button",className:qr.copy,"aria-label":"Copy link",onClick:r,children:[m.jsx("div",{className:qr.copyIconWrapper,children:e?m.jsx("svg",{viewBox:"0 0 24 24",className:qr.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):m.jsx("svg",{viewBox:"0 0 24 24",className:qr.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),m.jsx("span",{className:qr.copyText,children:e?"Copied!":"Copy link"})]})},$V=({tweet:t})=>{const e=lC(t.favorite_count);return m.jsxs("div",{className:qr.actions,children:[m.jsxs("a",{className:qr.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[m.jsx("div",{className:qr.likeIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:qr.likeIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),m.jsx("span",{className:qr.likeCount,children:e})]}),m.jsxs("a",{className:qr.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[m.jsx("div",{className:qr.replyIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:qr.replyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),m.jsx("span",{className:qr.replyText,children:"Reply"})]}),m.jsx(RV,{tweet:t})]})},DV="_replies_1cutb_1",jV="_link_1cutb_4",UV="_text_1cutb_23",t1={replies:DV,link:jV,text:UV},LV=({tweet:t})=>m.jsx("div",{className:t1.replies,children:m.jsx("a",{className:t1.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:m.jsx("span",{className:t1.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${lC(t.conversation_count)} reply`:`Read ${lC(t.conversation_count)} replies`})})}),MV="_root_q5799_1",BV="_article_q5799_16",TT={root:MV,article:BV},FV=({tweet:t,children:e})=>m.jsx("div",{className:TT.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:m.jsx("article",{className:TT.article,children:e})}),zV="_header_r31i5_1",qV="_avatar_r31i5_11",WV="_avatarSquare_r31i5_17",HV="_author_r31i5_21",VV="_authorText_r31i5_26",GV="_username_r31i5_33",Xc={header:zV,avatar:qV,avatarSquare:WV,author:HV,authorText:VV,username:GV},KV=({tweet:t})=>{const{user:e}=t;return m.jsxs("div",{className:Xc.header,children:[m.jsx("a",{href:t.url,className:Xc.avatar,target:"_blank",rel:"noopener noreferrer",children:m.jsx("div",{className:Sc(Xc.avatarOverflow,e.profile_image_shape==="Square"&&Xc.avatarSquare),children:m.jsx(A5,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),m.jsxs("div",{className:Xc.author,children:[m.jsx("div",{className:Xc.authorText,children:m.jsx("span",{title:e.name,children:e.name})}),m.jsx(I5,{user:e}),m.jsx("div",{className:Xc.username,children:m.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},YV="_root_175ot_1",QV={root:YV},JV=({tweet:t})=>m.jsx("p",{className:QV.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),ZV=({tweet:t})=>{var e;return m.jsxs(FV,{tweet:t,children:[m.jsx(KV,{tweet:t}),m.jsx(JV,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?m.jsx(P5,{quoted:!0,tweet:t}):null]})},XV=({tweet:t,components:e})=>{var n;const r=M.useMemo(()=>HH(t),[t]);return m.jsxs(fA,{children:[m.jsx(AH,{tweet:r,components:e}),r.in_reply_to_status_id_str&&m.jsx(NH,{tweet:r}),m.jsx(DH,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?m.jsx(P5,{tweet:r,components:e}):null,r.quoted_tweet&&m.jsx(ZV,{tweet:r.quoted_tweet}),m.jsx(vV,{tweet:r}),m.jsx($V,{tweet:r}),m.jsx(LV,{tweet:r})]})},eG="_root_16yxa_1",tG={root:eG},nG=t=>m.jsx(fA,{children:m.jsxs("div",{className:tG.root,children:[m.jsx("h3",{children:"Tweet not found"}),m.jsx("p",{children:"The embedded tweet could not be found…"})]})}),rG="_skeleton_oi7hr_1",sG={skeleton:rG},ly=({style:t})=>m.jsx("span",{className:sG.skeleton,style:t}),iG="_root_17qqv_1",oG={root:iG},aG=()=>m.jsxs(fA,{className:oG.root,children:[m.jsx(ly,{style:{height:"3rem",marginBottom:"0.75rem"}}),m.jsx(ly,{style:{height:"6rem",margin:"0.5rem 0"}}),m.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),m.jsx(ly,{style:{height:"2rem"}}),m.jsx(ly,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]});var k5={exports:{}},O5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fh=M;function cG(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var lG=typeof Object.is=="function"?Object.is:cG,uG=fh.useState,dG=fh.useEffect,hG=fh.useLayoutEffect,fG=fh.useDebugValue;function pG(t,e){var n=e(),r=uG({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return hG(function(){s.value=n,s.getSnapshot=e,n1(s)&&i({inst:s})},[t,n,e]),dG(function(){return n1(s)&&i({inst:s}),t(function(){n1(s)&&i({inst:s})})},[t]),fG(n),n}function n1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!lG(t,n)}catch{return!0}}function gG(t,e){return e()}var mG=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?gG:pG;O5.useSyncExternalStore=fh.useSyncExternalStore!==void 0?fh.useSyncExternalStore:mG;k5.exports=O5;var yG=k5.exports;const R5=0,$5=1,D5=2,NT=3;var PT=Object.prototype.hasOwnProperty;function uC(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&uC(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(PT.call(t,n)&&++r&&!PT.call(e,n)||!(n in e)||!uC(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const Mo=new WeakMap,uc=()=>{},_r=uc(),dC=Object,it=t=>t===_r,eo=t=>typeof t=="function",Uc=(t,e)=>({...t,...e}),j5=t=>eo(t.then),r1={},uy={},pA="undefined",om=typeof window!=pA,hC=typeof document!=pA,wG=om&&"Deno"in window,vG=()=>om&&typeof window.requestAnimationFrame!=pA,U5=(t,e)=>{const n=Mo.get(t);return[()=>!it(e)&&t.get(e)||r1,r=>{if(!it(e)){const s=t.get(e);e in uy||(uy[e]=s),n[5](e,Uc(s,r),s||r1)}},n[6],()=>!it(e)&&e in uy?uy[e]:!it(e)&&t.get(e)||r1]};let fC=!0;const bG=()=>fC,[pC,gC]=om&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[uc,uc],_G=()=>{const t=hC&&document.visibilityState;return it(t)||t!=="hidden"},EG=t=>(hC&&document.addEventListener("visibilitychange",t),pC("focus",t),()=>{hC&&document.removeEventListener("visibilitychange",t),gC("focus",t)}),CG=t=>{const e=()=>{fC=!0,t()},n=()=>{fC=!1};return pC("online",e),pC("offline",n),()=>{gC("online",e),gC("offline",n)}},xG={isOnline:bG,isVisible:_G},SG={initFocus:EG,initReconnect:CG},kT=!qs.useId,ug=!om||wG,AG=t=>vG()?window.requestAnimationFrame(t):setTimeout(t,1),s1=ug?M.useEffect:M.useLayoutEffect,i1=typeof navigator<"u"&&navigator.connection,OT=!ug&&i1&&(["slow-2g","2g"].includes(i1.effectiveType)||i1.saveData),dy=new WeakMap,o1=(t,e)=>dC.prototype.toString.call(t)===`[object ${e}]`;let IG=0;const mC=t=>{const e=typeof t,n=o1(t,"Date"),r=o1(t,"RegExp"),s=o1(t,"Object");let i,o;if(dC(t)===t&&!n&&!r){if(i=dy.get(t),i)return i;if(i=++IG+"~",dy.set(t,i),Array.isArray(t)){for(i="@",o=0;o<t.length;o++)i+=mC(t[o])+",";dy.set(t,i)}if(s){i="#";const a=dC.keys(t).sort();for(;!it(o=a.pop());)it(t[o])||(i+=o+":"+mC(t[o])+",");dy.set(t,i)}}else i=n?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return i},gA=t=>{if(eo(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?mC(t):"",[t,e]};let TG=0;const yC=()=>++TG;async function L5(...t){const[e,n,r,s]=t,i=Uc({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(eo(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=gA(h);if(!f)return;const[p,g]=U5(e,f),[y,w,b,v]=Mo.get(e),E=()=>{const H=y[f];return(eo(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete b[f],delete v[f],H&&H[0])?H[0](D5).then(()=>p().data):p().data};if(t.length<3)return E();let _=r,x;const S=yC();w[f]=[S,0];const N=!it(c),C=p(),O=C.data,R=C._c,B=it(R)?O:R;if(N&&(c=eo(c)?c(B,O):c,g({data:c,_c:B})),eo(_))try{_=_(B)}catch(H){x=H}if(_&&j5(_))if(_=await _.catch(H=>{x=H}),S!==w[f][0]){if(x)throw x;return _}else x&&N&&l(x)&&(o=!0,g({data:B,_c:_r}));if(o&&!x)if(eo(o)){const H=o(_,B);g({data:H,error:_r,_c:_r})}else g({data:_,error:_r,_c:_r});if(w[f][1]=yC(),Promise.resolve(E()).then(()=>{g({_c:_r})}),x){if(u)throw x;return}return _}}const RT=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},NG=(t,e)=>{if(!Mo.has(t)){const n=Uc(SG,e),r=Object.create(null),s=L5.bind(_r,t);let i=uc;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!Mo.has(t)&&(Mo.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!ug)){const u=n.initFocus(setTimeout.bind(_r,RT.bind(_r,r,R5))),d=n.initReconnect(setTimeout.bind(_r,RT.bind(_r,r,$5)));i=()=>{u&&u(),d&&d(),Mo.delete(t)}}};return l(),[t,s,l,i]}return[t,Mo.get(t)[4]]},PG=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!it(i)&&o>i||setTimeout(r,a,s)},kG=uC,[M5,OG]=NG(new Map),RG=Uc({onLoadingSlow:uc,onSuccess:uc,onError:uc,onErrorRetry:PG,onDiscarded:uc,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:OT?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:OT?5e3:3e3,compare:kG,isPaused:()=>!1,cache:M5,mutate:OG,fallback:{}},xG),$G=(t,e)=>{const n=Uc(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=Uc(s,o))}return n},DG=M.createContext({}),jG="$inf$",B5=om&&window.__SWR_DEVTOOLS_USE__,UG=B5?window.__SWR_DEVTOOLS_USE__:[],LG=()=>{B5&&(window.__SWR_DEVTOOLS_REACT__=qs)},MG=t=>eo(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],BG=()=>Uc(RG,M.useContext(DG)),FG=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=gA(e),[,,,a]=Mo.get(M5);if(o.startsWith(jG))return n(...i);const c=a[o];return it(c)?n(...i):(delete a[o],c)}),r),zG=UG.concat(FG),qG=t=>function(...n){const r=BG(),[s,i,o]=MG(n),a=$G(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(zG);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},WG=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};LG();const a1=qs.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),c1={dedupe:!0},HG=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,y]=Mo.get(r),[w,b]=gA(t),v=M.useRef(!1),E=M.useRef(!1),_=M.useRef(w),x=M.useRef(e),S=M.useRef(n),N=()=>S.current,C=()=>N().isVisible()&&N().isOnline(),[O,R,B,H]=U5(r,w),F=M.useRef({}).current,A=it(o)?it(n.fallback)?_r:n.fallback[w]:o,I=(Fe,ze)=>{for(const qt in F){const Tt=qt;if(Tt==="data"){if(!s(Fe[Tt],ze[Tt])&&(!it(Fe[Tt])||!s(te,ze[Tt])))return!1}else if(ze[Tt]!==Fe[Tt])return!1}return!0},U=M.useMemo(()=>{const Fe=!w||!e?!1:it(a)?N().isPaused()||i?!1:c!==!1:a,ze=Vt=>{const jn=Uc(Vt);return delete jn._k,Fe?{isValidating:!0,isLoading:!0,...jn}:jn},qt=O(),Tt=H(),xn=ze(qt),ss=qt===Tt?xn:ze(Tt);let jt=xn;return[()=>{const Vt=ze(O());return I(Vt,jt)?(jt.data=Vt.data,jt.isLoading=Vt.isLoading,jt.isValidating=Vt.isValidating,jt.error=Vt.error,jt):(jt=Vt,Vt)},()=>ss]},[r,w]),T=yG.useSyncExternalStore(M.useCallback(Fe=>B(w,(ze,qt)=>{I(qt,ze)||Fe()}),[r,w]),U[0],U[1]),k=!v.current,L=f[w]&&f[w].length>0,W=T.data,K=it(W)?A&&j5(A)?a1(A):A:W,Z=T.error,Q=M.useRef(K),te=h?it(W)?it(Q.current)?K:Q.current:W:K,oe=L&&!it(Z)?!1:k&&!it(a)?a:N().isPaused()?!1:i?it(K)?!1:c:it(K)||c,me=!!(w&&e&&k&&oe),je=it(T.isValidating)?me:T.isValidating,Oe=it(T.isLoading)?me:T.isLoading,Le=M.useCallback(async Fe=>{const ze=x.current;if(!w||!ze||E.current||N().isPaused())return!1;let qt,Tt,xn=!0;const ss=Fe||{},jt=!g[w]||!ss.dedupe,Vt=()=>kT?!E.current&&w===_.current&&v.current:w===_.current,jn={isValidating:!1,isLoading:!1},Oi=()=>{R(jn)},Xs=()=>{const Xt=g[w];Xt&&Xt[1]===Tt&&delete g[w]},is={isValidating:!0};it(O().data)&&(is.isLoading=!0);try{if(jt&&(R(is),n.loadingTimeout&&it(O().data)&&setTimeout(()=>{xn&&Vt()&&N().onLoadingSlow(w,n)},n.loadingTimeout),g[w]=[ze(b),yC()]),[qt,Tt]=g[w],qt=await qt,jt&&setTimeout(Xs,n.dedupingInterval),!g[w]||g[w][1]!==Tt)return jt&&Vt()&&N().onDiscarded(w),!1;jn.error=_r;const Xt=p[w];if(!it(Xt)&&(Tt<=Xt[0]||Tt<=Xt[1]||Xt[1]===0))return Oi(),jt&&Vt()&&N().onDiscarded(w),!1;const Xn=O().data;jn.data=s(Xn,qt)?Xn:qt,jt&&Vt()&&N().onSuccess(qt,w,n)}catch(Xt){Xs();const Xn=N(),{shouldRetryOnError:mo}=Xn;Xn.isPaused()||(jn.error=Xt,jt&&Vt()&&(Xn.onError(Xt,w,Xn),(mo===!0||eo(mo)&&mo(Xt))&&(!N().revalidateOnFocus||!N().revalidateOnReconnect||C())&&Xn.onErrorRetry(Xt,w,Xn,Qc=>{const Ri=f[w];Ri&&Ri[0]&&Ri[0](NT,Qc)},{retryCount:(ss.retryCount||0)+1,dedupe:!0})))}return xn=!1,Oi(),!0},[w,r]),Je=M.useCallback((...Fe)=>L5(r,_.current,...Fe),[]);if(s1(()=>{x.current=e,S.current=n,it(W)||(Q.current=W)}),s1(()=>{if(!w)return;const Fe=Le.bind(_r,c1);let ze=0;N().revalidateOnFocus&&(ze=Date.now()+N().focusThrottleInterval);const Tt=WG(w,f,(xn,ss={})=>{if(xn==R5){const jt=Date.now();N().revalidateOnFocus&&jt>ze&&C()&&(ze=jt+N().focusThrottleInterval,Fe())}else if(xn==$5)N().revalidateOnReconnect&&C()&&Fe();else{if(xn==D5)return Le();if(xn==NT)return Le(ss)}});return E.current=!1,_.current=w,v.current=!0,R({_k:b}),oe&&(it(K)||ug?Fe():AG(Fe)),()=>{E.current=!0,Tt()}},[w]),s1(()=>{let Fe;function ze(){const Tt=eo(l)?l(O().data):l;Tt&&Fe!==-1&&(Fe=setTimeout(qt,Tt))}function qt(){!O().error&&(u||N().isVisible())&&(d||N().isOnline())?Le(c1).then(ze):ze()}return ze(),()=>{Fe&&(clearTimeout(Fe),Fe=-1)}},[l,u,d,w]),M.useDebugValue(te),i&&it(K)&&w){if(!kT&&ug)throw new Error("Fallback data is required when using Suspense in SSR.");x.current=e,S.current=n,E.current=!1;const Fe=y[w];if(!it(Fe)){const ze=Je(Fe);a1(ze)}if(it(Z)){const ze=Le(c1);it(te)||(ze.status="fulfilled",ze.value=!0),a1(ze)}else throw Z}return{mutate:Je,get data(){return F.data=!0,te},get error(){return F.error=!0,Z},get isValidating(){return F.isValidating=!0,je},get isLoading(){return F.isLoading=!0,Oe}}},$T=qG(HG);class VG extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const GG=$T.default||$T,KG="https://react-tweet.vercel.app";async function YG([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new VG({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const QG=(t,e,n)=>{const{isLoading:r,data:s,error:i}=GG(()=>e||t?[e||t&&`${KG}/api/tweet/${t}`,n]:null,YG,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},JG=({id:t,apiUrl:e,fallback:n=m.jsx(aG,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=QG(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||nG;return m.jsx(l,{error:i?i(a):a})}return m.jsx(XV,{tweet:o,components:r})};var fv={exports:{}},F5={},z5={exports:{}},ZG="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",XG=ZG,eK=XG;function q5(){}function W5(){}W5.resetWarningCache=q5;var tK=function(){function t(r,s,i,o,a,c){if(c!==eK){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:W5,resetWarningCache:q5};return n.PropTypes=n,n};z5.exports=tK();var H5=z5.exports;function V5(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=V5(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function DT(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=V5(t))&&(r&&(r+=" "),r+=e);return r}const nK=Object.freeze(Object.defineProperty({__proto__:null,clsx:DT,default:DT},Symbol.toStringTag,{value:"Module"})),rK=j0(nK);var sn={},po={};Object.defineProperty(po,"__esModule",{value:!0});po.dontSetMe=cK;po.findInArray=sK;po.int=aK;po.isFunction=iK;po.isNum=oK;function sK(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function iK(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function oK(t){return typeof t=="number"&&!isNaN(t)}function aK(t){return parseInt(t,10)}function cK(t,e,n){if(t[e])return new Error("Invalid prop ".concat(e," passed to ").concat(n," - do not set this, set it on the child."))}var vu={};Object.defineProperty(vu,"__esModule",{value:!0});vu.browserPrefixToKey=K5;vu.browserPrefixToStyle=lK;vu.default=void 0;vu.getPrefix=G5;const l1=["Moz","Webkit","O","ms"];function G5(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const n=(t=window.document)===null||t===void 0||(t=t.documentElement)===null||t===void 0?void 0:t.style;if(!n||e in n)return"";for(let r=0;r<l1.length;r++)if(K5(e,l1[r])in n)return l1[r];return""}function K5(t,e){return e?"".concat(e).concat(uK(t)):t}function lK(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t}function uK(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}vu.default=G5();Object.defineProperty(sn,"__esModule",{value:!0});sn.addClassName=J5;sn.addEvent=fK;sn.addUserSelectStyles=xK;sn.createCSSTransform=bK;sn.createSVGTransform=_K;sn.getTouch=EK;sn.getTouchIdentifier=CK;sn.getTranslation=mA;sn.innerHeight=yK;sn.innerWidth=wK;sn.matchesSelector=Q5;sn.matchesSelectorAndParentsTo=hK;sn.offsetXYFromParent=vK;sn.outerHeight=gK;sn.outerWidth=mK;sn.removeClassName=Z5;sn.removeEvent=pK;sn.removeUserSelectStyles=SK;var vs=po,jT=dK(vu);function Y5(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(Y5=function(r){return r?n:e})(t)}function dK(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=Y5(e);if(n&&n.has(t))return n.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}let hy="";function Q5(t,e){return hy||(hy=(0,vs.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,vs.isFunction)(t[n])})),(0,vs.isFunction)(t[hy])?t[hy](e):!1}function hK(t,e,n){let r=t;do{if(Q5(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function fK(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function pK(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function gK(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,vs.int)(n.borderTopWidth),e+=(0,vs.int)(n.borderBottomWidth),e}function mK(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,vs.int)(n.borderLeftWidth),e+=(0,vs.int)(n.borderRightWidth),e}function yK(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,vs.int)(n.paddingTop),e-=(0,vs.int)(n.paddingBottom),e}function wK(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,vs.int)(n.paddingLeft),e-=(0,vs.int)(n.paddingRight),e}function vK(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function bK(t,e){const n=mA(t,e,"px");return{[(0,jT.browserPrefixToKey)("transform",jT.default)]:n}}function _K(t,e){return mA(t,e,"")}function mA(t,e,n){let{x:r,y:s}=t,i="translate(".concat(r).concat(n,",").concat(s).concat(n,")");if(e){const o="".concat(typeof e.x=="string"?e.x:e.x+n),a="".concat(typeof e.y=="string"?e.y:e.y+n);i="translate(".concat(o,", ").concat(a,")")+i}return i}function EK(t,e){return t.targetTouches&&(0,vs.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,vs.findInArray)(t.changedTouches,n=>e===n.identifier)}function CK(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function xK(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&J5(t.body,"react-draggable-transparent-selection")}function SK(t){if(t)try{if(t.body&&Z5(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function J5(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function Z5(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var go={};Object.defineProperty(go,"__esModule",{value:!0});go.canDragX=TK;go.canDragY=NK;go.createCoreData=kK;go.createDraggableData=OK;go.getBoundPosition=AK;go.getControlPosition=PK;go.snapToGrid=IK;var ls=po,Ad=sn;function AK(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:RK(r);const s=yA(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=i.querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,ls.int)(u.paddingLeft)+(0,ls.int)(l.marginLeft),top:-s.offsetTop+(0,ls.int)(u.paddingTop)+(0,ls.int)(l.marginTop),right:(0,Ad.innerWidth)(c)-(0,Ad.outerWidth)(s)-s.offsetLeft+(0,ls.int)(u.paddingRight)-(0,ls.int)(l.marginRight),bottom:(0,Ad.innerHeight)(c)-(0,Ad.outerHeight)(s)-s.offsetTop+(0,ls.int)(u.paddingBottom)-(0,ls.int)(l.marginBottom)}}return(0,ls.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,ls.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,ls.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,ls.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function IK(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function TK(t){return t.props.axis==="both"||t.props.axis==="x"}function NK(t){return t.props.axis==="both"||t.props.axis==="y"}function PK(t,e,n){const r=typeof e=="number"?(0,Ad.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=yA(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,Ad.offsetXYFromParent)(r||t,i,n.props.scale)}function kK(t,e,n){const r=!(0,ls.isNum)(t.lastX),s=yA(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function OK(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function RK(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function yA(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var pv={},gv={};Object.defineProperty(gv,"__esModule",{value:!0});gv.default=$K;function $K(){}Object.defineProperty(pv,"__esModule",{value:!0});pv.default=void 0;var u1=jK(M),Pr=wA(H5),DK=wA(US),nr=sn,ma=go,d1=po,of=wA(gv);function wA(t){return t&&t.__esModule?t:{default:t}}function X5(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(X5=function(r){return r?n:e})(t)}function jK(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=X5(e);if(n&&n.has(t))return n.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function mr(t,e,n){return e=UK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UK(t){var e=LK(t,"string");return typeof e=="symbol"?e:String(e)}function LK(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const ii={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let ya=ii.mouse,mv=class extends u1.Component{constructor(){super(...arguments),mr(this,"dragging",!1),mr(this,"lastX",NaN),mr(this,"lastY",NaN),mr(this,"touchIdentifier",null),mr(this,"mounted",!1),mr(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,nr.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,nr.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&e.preventDefault();const s=(0,nr.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,ma.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,ma.createCoreData)(this,o,a);(0,of.default)("DraggableCore: handleDragStart: %j",c),(0,of.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,nr.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,nr.addEvent)(r,ya.move,this.handleDrag),(0,nr.addEvent)(r,ya.stop,this.handleDragStop))}),mr(this,"handleDrag",e=>{const n=(0,ma.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,ma.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,ma.createCoreData)(this,r,s);if((0,of.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),mr(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,ma.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,ma.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,ma.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,nr.removeUserSelectStyles)(a.ownerDocument),(0,of.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,of.default)("DraggableCore: Removing handlers"),(0,nr.removeEvent)(a.ownerDocument,ya.move,this.handleDrag),(0,nr.removeEvent)(a.ownerDocument,ya.stop,this.handleDragStop))}),mr(this,"onMouseDown",e=>(ya=ii.mouse,this.handleDragStart(e))),mr(this,"onMouseUp",e=>(ya=ii.mouse,this.handleDragStop(e))),mr(this,"onTouchStart",e=>(ya=ii.touch,this.handleDragStart(e))),mr(this,"onTouchEnd",e=>(ya=ii.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,nr.addEvent)(e,ii.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,nr.removeEvent)(n,ii.mouse.move,this.handleDrag),(0,nr.removeEvent)(n,ii.touch.move,this.handleDrag),(0,nr.removeEvent)(n,ii.mouse.stop,this.handleDragStop),(0,nr.removeEvent)(n,ii.touch.stop,this.handleDragStop),(0,nr.removeEvent)(e,ii.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,nr.removeUserSelectStyles)(n)}}findDOMNode(){var e,n;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(n=this.props)===null||n===void 0||(n=n.nodeRef)===null||n===void 0?void 0:n.current:DK.default.findDOMNode(this)}render(){return u1.cloneElement(u1.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};pv.default=mv;mr(mv,"displayName","DraggableCore");mr(mv,"propTypes",{allowAnyClick:Pr.default.bool,children:Pr.default.node.isRequired,disabled:Pr.default.bool,enableUserSelectHack:Pr.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Pr.default.arrayOf(Pr.default.number),handle:Pr.default.string,cancel:Pr.default.string,nodeRef:Pr.default.object,onStart:Pr.default.func,onDrag:Pr.default.func,onStop:Pr.default.func,onMouseDown:Pr.default.func,scale:Pr.default.number,className:d1.dontSetMe,style:d1.dontSetMe,transform:d1.dontSetMe});mr(mv,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=h(M),n=u(H5),r=u(US),s=u(rK),i=sn,o=go,a=po,c=u(pv),l=u(gv);function u(b){return b&&b.__esModule?b:{default:b}}function d(b){if(typeof WeakMap!="function")return null;var v=new WeakMap,E=new WeakMap;return(d=function(_){return _?E:v})(b)}function h(b,v){if(b&&b.__esModule)return b;if(b===null||typeof b!="object"&&typeof b!="function")return{default:b};var E=d(v);if(E&&E.has(b))return E.get(b);var _={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in b)if(S!=="default"&&Object.prototype.hasOwnProperty.call(b,S)){var N=x?Object.getOwnPropertyDescriptor(b,S):null;N&&(N.get||N.set)?Object.defineProperty(_,S,N):_[S]=b[S]}return _.default=b,E&&E.set(b,_),_}function f(){return f=Object.assign?Object.assign.bind():function(b){for(var v=1;v<arguments.length;v++){var E=arguments[v];for(var _ in E)Object.prototype.hasOwnProperty.call(E,_)&&(b[_]=E[_])}return b},f.apply(this,arguments)}function p(b,v,E){return v=g(v),v in b?Object.defineProperty(b,v,{value:E,enumerable:!0,configurable:!0,writable:!0}):b[v]=E,b}function g(b){var v=y(b,"string");return typeof v=="symbol"?v:String(v)}function y(b,v){if(typeof b!="object"||b===null)return b;var E=b[Symbol.toPrimitive];if(E!==void 0){var _=E.call(b,v);if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(b)}class w extends e.Component{static getDerivedStateFromProps(v,E){let{position:_}=v,{prevPropsPosition:x}=E;return _&&(!x||_.x!==x.x||_.y!==x.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:_,prevPropsPosition:x}),{x:_.x,y:_.y,prevPropsPosition:{..._}}):null}constructor(v){super(v),p(this,"onDragStart",(E,_)=>{if((0,l.default)("Draggable: onDragStart: %j",_),this.props.onStart(E,(0,o.createDraggableData)(this,_))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),p(this,"onDrag",(E,_)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",_);const x=(0,o.createDraggableData)(this,_),S={x:x.x,y:x.y,slackX:0,slackY:0};if(this.props.bounds){const{x:C,y:O}=S;S.x+=this.state.slackX,S.y+=this.state.slackY;const[R,B]=(0,o.getBoundPosition)(this,S.x,S.y);S.x=R,S.y=B,S.slackX=this.state.slackX+(C-S.x),S.slackY=this.state.slackY+(O-S.y),x.x=S.x,x.y=S.y,x.deltaX=S.x-this.state.x,x.deltaY=S.y-this.state.y}if(this.props.onDrag(E,x)===!1)return!1;this.setState(S)}),p(this,"onDragStop",(E,_)=>{if(!this.state.dragging||this.props.onStop(E,(0,o.createDraggableData)(this,_))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",_);const S={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:C,y:O}=this.props.position;S.x=C,S.y=O}this.setState(S)}),this.state={dragging:!1,dragged:!1,x:v.position?v.position.x:v.defaultPosition.x,y:v.position?v.position.y:v.defaultPosition.y,prevPropsPosition:{...v.position},slackX:0,slackY:0,isElementSVG:!1},v.position&&!(v.onDrag||v.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var v,E;return(v=(E=this.props)===null||E===void 0||(E=E.nodeRef)===null||E===void 0?void 0:E.current)!==null&&v!==void 0?v:r.default.findDOMNode(this)}render(){const{axis:v,bounds:E,children:_,defaultPosition:x,defaultClassName:S,defaultClassNameDragging:N,defaultClassNameDragged:C,position:O,positionOffset:R,scale:B,...H}=this.props;let F={},A=null;const U=!!!O||this.state.dragging,T=O||x,k={x:(0,o.canDragX)(this)&&U?this.state.x:T.x,y:(0,o.canDragY)(this)&&U?this.state.y:T.y};this.state.isElementSVG?A=(0,i.createSVGTransform)(k,R):F=(0,i.createCSSTransform)(k,R);const L=(0,s.default)(_.props.className||"",S,{[N]:this.state.dragging,[C]:this.state.dragged});return e.createElement(c.default,f({},H,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(_),{className:L,style:{..._.props.style,...F},transform:A}))}}t.default=w,p(w,"displayName","Draggable"),p(w,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),p(w,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(F5);const{default:e8,DraggableCore:MK}=F5;fv.exports=e8;fv.exports.default=e8;fv.exports.DraggableCore=MK;var BK=fv.exports;const am=gu(BK);function Qt(){return Qt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qt.apply(null,arguments)}function t8(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var n8={exports:{}},Ct={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dn=typeof Symbol=="function"&&Symbol.for,vA=Dn?Symbol.for("react.element"):60103,bA=Dn?Symbol.for("react.portal"):60106,yv=Dn?Symbol.for("react.fragment"):60107,wv=Dn?Symbol.for("react.strict_mode"):60108,vv=Dn?Symbol.for("react.profiler"):60114,bv=Dn?Symbol.for("react.provider"):60109,_v=Dn?Symbol.for("react.context"):60110,_A=Dn?Symbol.for("react.async_mode"):60111,Ev=Dn?Symbol.for("react.concurrent_mode"):60111,Cv=Dn?Symbol.for("react.forward_ref"):60112,xv=Dn?Symbol.for("react.suspense"):60113,FK=Dn?Symbol.for("react.suspense_list"):60120,Sv=Dn?Symbol.for("react.memo"):60115,Av=Dn?Symbol.for("react.lazy"):60116,zK=Dn?Symbol.for("react.block"):60121,qK=Dn?Symbol.for("react.fundamental"):60117,WK=Dn?Symbol.for("react.responder"):60118,HK=Dn?Symbol.for("react.scope"):60119;function Ss(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case vA:switch(t=t.type,t){case _A:case Ev:case yv:case vv:case wv:case xv:return t;default:switch(t=t&&t.$$typeof,t){case _v:case Cv:case Av:case Sv:case bv:return t;default:return e}}case bA:return e}}}function r8(t){return Ss(t)===Ev}Ct.AsyncMode=_A;Ct.ConcurrentMode=Ev;Ct.ContextConsumer=_v;Ct.ContextProvider=bv;Ct.Element=vA;Ct.ForwardRef=Cv;Ct.Fragment=yv;Ct.Lazy=Av;Ct.Memo=Sv;Ct.Portal=bA;Ct.Profiler=vv;Ct.StrictMode=wv;Ct.Suspense=xv;Ct.isAsyncMode=function(t){return r8(t)||Ss(t)===_A};Ct.isConcurrentMode=r8;Ct.isContextConsumer=function(t){return Ss(t)===_v};Ct.isContextProvider=function(t){return Ss(t)===bv};Ct.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===vA};Ct.isForwardRef=function(t){return Ss(t)===Cv};Ct.isFragment=function(t){return Ss(t)===yv};Ct.isLazy=function(t){return Ss(t)===Av};Ct.isMemo=function(t){return Ss(t)===Sv};Ct.isPortal=function(t){return Ss(t)===bA};Ct.isProfiler=function(t){return Ss(t)===vv};Ct.isStrictMode=function(t){return Ss(t)===wv};Ct.isSuspense=function(t){return Ss(t)===xv};Ct.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===yv||t===Ev||t===vv||t===wv||t===xv||t===FK||typeof t=="object"&&t!==null&&(t.$$typeof===Av||t.$$typeof===Sv||t.$$typeof===bv||t.$$typeof===_v||t.$$typeof===Cv||t.$$typeof===qK||t.$$typeof===WK||t.$$typeof===HK||t.$$typeof===zK)};Ct.typeOf=Ss;n8.exports=Ct;var VK=n8.exports,EA=VK,GK={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},KK={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},YK={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s8={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},CA={};CA[EA.ForwardRef]=YK;CA[EA.Memo]=s8;function UT(t){return EA.isMemo(t)?s8:CA[t.$$typeof]||GK}var QK=Object.defineProperty,JK=Object.getOwnPropertyNames,LT=Object.getOwnPropertySymbols,ZK=Object.getOwnPropertyDescriptor,XK=Object.getPrototypeOf,MT=Object.prototype;function i8(t,e,n){if(typeof e!="string"){if(MT){var r=XK(e);r&&r!==MT&&i8(t,r,n)}var s=JK(e);LT&&(s=s.concat(LT(e)));for(var i=UT(t),o=UT(e),a=0;a<s.length;++a){var c=s[a];if(!KK[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=ZK(e,c);try{QK(t,c,l)}catch{}}}}return t}var eY=i8;const tY=gu(eY);var o8={};Object.defineProperty(o8,"__esModule",{value:!0});o8.default=nY;function nY(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function fy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o0(){return o0=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o0.apply(this,arguments)}function rY(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function wa(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sY(t){var e=function(n){rY(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,fy(wa(wa(i)),"cachedTheme",void 0),fy(wa(wa(i)),"lastOuterTheme",void 0),fy(wa(wa(i)),"lastTheme",void 0),fy(wa(wa(i)),"renderProvider",function(l){var u=i.props.children;return qs.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?o0({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?qs.createElement(t.Consumer,null,this.renderProvider):null},r}(qs.Component);return e}function iY(t){return function(n){var r=qs.forwardRef(function(s,i){return qs.createElement(t.Consumer,null,function(o){return qs.createElement(n,o0({theme:o,ref:i},s))})});return tY(r,n),r}}function oY(t){var e=function(){var r=qs.useContext(t);return r};return e}function aY(t){return{context:t,withTheme:iY(t),useTheme:oY(t),ThemeProvider:sY(t)}}var a8=M.createContext();aY(a8);var BT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oh=(typeof window>"u"?"undefined":BT(window))==="object"&&(typeof document>"u"?"undefined":BT(document))==="object"&&document.nodeType===9;function dg(t){"@babel/helpers - typeof";return dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dg(t)}function cY(t,e){if(dg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(dg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function lY(t){var e=cY(t,"string");return dg(e)=="symbol"?e:e+""}function uY(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lY(r.key),r)}}function xA(t,e,n){return e&&uY(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function wC(t,e){return wC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},wC(t,e)}function c8(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,wC(t,e)}function FT(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var dY={}.constructor;function vC(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(vC);if(t.constructor!==dY)return t;var e={};for(var n in t)e[n]=vC(t[n]);return e}function Iv(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=vC(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var zT=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},zl=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=zT(e[r]," ");else n=zT(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function Rh(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function af(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function hg(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=Rh(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=af(f+":"+u+zl(p)+";",o))}}else for(var g in a){var y=a[g];y!=null&&(r&&(r+=l),r+=af(g+":"+u+zl(y)+";",o))}for(var w in e){var b=e[w];b!=null&&w!=="fallbacks"&&(r&&(r+=l),r+=af(w+":"+u+zl(b)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),af(""+t+u+"{"+r,o)+af("}",o))}var hY=/([[\].#*$><+~=|^:(),"'`\s])/g,qT=typeof CSS<"u"&&CSS.escape,SA=function(t){return qT?qT(t):t.replace(hY,"\\$1")},l8=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),bC=function(t){c8(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(FT(FT(o)),l),o.selectorText="."+SA(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=zl(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Qt({},s,{allowEmpty:!0}):s;return hg(this.selectorText,this.style,a)},xA(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(l8),fY={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new bC(e,n,r)}},h1={indent:1,children:!0},pY=/@([\w-]+)/,gY=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(pY);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new Tv(Qt({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=h1);var s=Rh(r),i=s.linebreak;if(r.indent==null&&(r.indent=h1.indent),r.children==null&&(r.children=h1.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),mY=/@container|@media|@supports\s+/,yY={onCreateRule:function(e,n,r){return mY.test(e)?new gY(e,n,r):null}},f1={indent:1,children:!0},wY=/@keyframes\s+([\w-]+)/,_C=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(wY);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:SA(c(this,a)),this.rules=new Tv(Qt({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],Qt({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=f1);var s=Rh(r),i=s.linebreak;if(r.indent==null&&(r.indent=f1.indent),r.children==null&&(r.children=f1.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),vY=/@keyframes\s+/,bY=/\$([\w-]+)/g,EC=function(e,n){return typeof e=="string"?e.replace(bY,function(r,s){return s in n?n[s]:r}):e},WT=function(e,n,r){var s=e[n],i=EC(s,r);i!==s&&(e[n]=i)},_Y={onCreateRule:function(e,n,r){return typeof e=="string"&&vY.test(e)?new _C(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&WT(e,"animation-name",r.keyframes),"animation"in e&&WT(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return EC(e,s.keyframes);case"animation-name":return EC(e,s.keyframes);default:return e}}},EY=function(t){c8(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Qt({},s,{allowEmpty:!0}):s;return hg(this.key,this.style,a)},e}(l8),CY={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new EY(e,n,r):null}},xY=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=Rh(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=hg(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return hg(this.at,this.style,r)},t}(),SY=/@font-face/,AY={onCreateRule:function(e,n,r){return SY.test(e)?new xY(e,n,r):null}},IY=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return hg(this.key,this.style,r)},t}(),TY={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new IY(e,n,r):null}},NY=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),PY={"@charset":!0,"@import":!0,"@namespace":!0},kY={onCreateRule:function(e,n,r){return e in PY?new NY(e,n,r):null}},HT=[fY,yY,_Y,CY,AY,TY,kY],OY={process:!0},VT={force:!0,process:!0},Tv=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=Qt({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+SA(this.classes[p]));var g=Iv(p,s,f);if(!g)return null;this.register(g);var y=f.index===void 0?this.index.length:f.index;return this.index.splice(y,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=Qt({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof bC?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof _C&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof bC?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof _C&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=OY);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,VT)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,VT)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=Rh(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),u8=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Qt({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new Tv(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),RY=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),$Y=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=t8(s,["attached"]),a=Rh(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},xA(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),rp=new $Y,CC=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),xC="2f1acc6c3a606b082e5eef5e54414ffb";CC[xC]==null&&(CC[xC]=0);var GT=CC[xC]++,KT=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+GT+a+n:c+i.key+"-"+GT+(a?"-"+a:"")+"-"+n};return r},d8=function(e){var n;return function(){return n||(n=e()),n}},DY=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},jY=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=zl(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},UY=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},LY=function(e,n){return e.selectorText=n,e.selectorText===n},h8=d8(function(){return document.querySelector("head")});function MY(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function BY(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function FY(t){for(var e=h8(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function zY(t){var e=rp.registry;if(e.length>0){var n=MY(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=BY(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=FY(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function qY(t,e){var n=e.insertionPoint,r=zY(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}h8().appendChild(t)}var WY=d8(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),YT=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},QT=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},HY=function(){var e=document.createElement("style");return e.textContent=`
`,e},VY=function(){function t(n){this.getPropertyValue=DY,this.setProperty=jY,this.removeProperty=UY,this.setSelector=LY,this.hasInsertedRules=!1,this.cssRules=[],n&&rp.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||HY(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=WY();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){qY(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=QT(i,s);if(a=YT(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=QT(i,s),d=YT(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof u8&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),GY=0,KY=function(){function t(n){this.id=GY++,this.version="10.10.0",this.plugins=new RY,this.options={id:{minify:!1},createGenerateId:KT,Renderer:Oh?VY:null,plugins:[]},this.generateId=KT({minify:!1});for(var r=0;r<HT.length;r++)this.plugins.use(HT[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=Qt({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=rp.index===0?0:rp.index+1);var a=new u8(r,Qt({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),rp.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=Qt({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=Iv(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),f8=function(e){return new KY(e)},JT=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},xA(t,[{key:"size",get:function(){return this.length}}]),t}(),AA=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function p8(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=p8(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */f8();var g8=Date.now(),p1="fnValues"+g8,g1="fnStyle"+ ++g8,YY=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=Iv(n,{},s);return i[g1]=r,i},onProcessStyle:function(n,r){if(p1 in r||g1 in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[p1]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[g1];a&&(o.style=a(n)||{});var c=o[p1];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function QY(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var cd;typeof self<"u"?cd=self:typeof window<"u"?cd=window:typeof global<"u"?cd=global:typeof module<"u"?cd=module:cd=Function("return this")();var ZT=QY(cd),XT=function(e){return e&&e[ZT]&&e===e[ZT]()},JY=function(e){return{onCreateRule:function(r,s,i){if(!XT(s))return null;var o=s,a=Iv(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!XT(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},ZY=/;\n/,XY=function(e){for(var n={},r=e.split(ZY),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},eQ=function(e){typeof e.style=="string"&&(e.style=XY(e.style))};function tQ(){return{onProcessRule:eQ}}var Ac="@global",SC="@global ",nQ=function(){function t(n,r,s){this.type="global",this.at=Ac,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new Tv(Qt({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),rQ=function(){function t(n,r,s){this.type="global",this.at=Ac,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(SC.length);this.rule=s.jss.createRule(i,r,Qt({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),sQ=/\s*,\s*/g;function m8(t,e){for(var n=t.split(sQ),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function iQ(t,e){var n=t.options,r=t.style,s=r?r[Ac]:null;if(s){for(var i in s)e.addRule(i,s[i],Qt({},n,{selector:m8(i,t.selector)}));delete r[Ac]}}function oQ(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,Ac.length)!==Ac)){var i=m8(s.substr(Ac.length),t.selector);e.addRule(i,r[s],Qt({},n,{selector:i})),delete r[s]}}function aQ(){function t(n,r,s){if(!n)return null;if(n===Ac)return new nQ(n,r,s);if(n[0]==="@"&&n.substr(0,SC.length)===SC)return new rQ(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(iQ(n,r),oQ(n,r))}return{onCreateRule:t,onProcessRule:e}}var uw=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},m1="extendCurrValue"+Date.now();function cQ(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];xl(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?Qt({},t,{extend:l}):t.extend[c];xl(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){xl(t.extend.extend,e,n,r);continue}if(uw(t.extend[d])){d in r||(r[d]={}),xl(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function lQ(t,e,n,r){for(var s in t)if(s!=="extend"){if(uw(r[s])&&uw(t[s])){xl(t[s],e,n,r[s]);continue}if(uw(t[s])){r[s]=xl(t[s],e,n);continue}r[s]=t[s]}}function xl(t,e,n,r){return r===void 0&&(r={}),cQ(t,e,n,r),lQ(t,e,n,r),r}function uQ(){function t(n,r,s){return"extend"in n?xl(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[m1])s.prop(i,null);return s[m1]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[m1]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var eN=/\s*,\s*/g,dQ=/&/g,hQ=/\$([\w-]+)/g;function fQ(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(eN),a=s.split(eN),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(dQ,u):u+" "+h}return c}function n(s,i,o){if(o)return Qt({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=Qt({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(hQ,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],Qt({},l,{selector:p})):c.addRule(g,s[d],Qt({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function AC(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=AC(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return AC(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function pQ(){function t(e,n){return"composes"in e&&(AC(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var gQ=/[A-Z]/g,mQ=/^ms-/,y1={};function yQ(t){return"-"+t.toLowerCase()}function y8(t){if(y1.hasOwnProperty(t))return y1[t];var e=t.replace(gQ,yQ);return y1[t]=mQ.test(e)?"-"+e:e}function a0(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:y8(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(a0):e.fallbacks=a0(t.fallbacks)),e}function wQ(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=a0(n[r]);return n}return a0(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=y8(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var J=AA&&CSS?CSS.px:"px",py=AA&&CSS?CSS.ms:"ms",ju=AA&&CSS?CSS.percent:"%",vQ={"animation-delay":py,"animation-duration":py,"background-position":J,"background-position-x":J,"background-position-y":J,"background-size":J,border:J,"border-bottom":J,"border-bottom-left-radius":J,"border-bottom-right-radius":J,"border-bottom-width":J,"border-left":J,"border-left-width":J,"border-radius":J,"border-right":J,"border-right-width":J,"border-top":J,"border-top-left-radius":J,"border-top-right-radius":J,"border-top-width":J,"border-width":J,"border-block":J,"border-block-end":J,"border-block-end-width":J,"border-block-start":J,"border-block-start-width":J,"border-block-width":J,"border-inline":J,"border-inline-end":J,"border-inline-end-width":J,"border-inline-start":J,"border-inline-start-width":J,"border-inline-width":J,"border-start-start-radius":J,"border-start-end-radius":J,"border-end-start-radius":J,"border-end-end-radius":J,margin:J,"margin-bottom":J,"margin-left":J,"margin-right":J,"margin-top":J,"margin-block":J,"margin-block-end":J,"margin-block-start":J,"margin-inline":J,"margin-inline-end":J,"margin-inline-start":J,padding:J,"padding-bottom":J,"padding-left":J,"padding-right":J,"padding-top":J,"padding-block":J,"padding-block-end":J,"padding-block-start":J,"padding-inline":J,"padding-inline-end":J,"padding-inline-start":J,"mask-position-x":J,"mask-position-y":J,"mask-size":J,height:J,width:J,"min-height":J,"max-height":J,"min-width":J,"max-width":J,bottom:J,left:J,top:J,right:J,inset:J,"inset-block":J,"inset-block-end":J,"inset-block-start":J,"inset-inline":J,"inset-inline-end":J,"inset-inline-start":J,"box-shadow":J,"text-shadow":J,"column-gap":J,"column-rule":J,"column-rule-width":J,"column-width":J,"font-size":J,"font-size-delta":J,"letter-spacing":J,"text-decoration-thickness":J,"text-indent":J,"text-stroke":J,"text-stroke-width":J,"word-spacing":J,motion:J,"motion-offset":J,outline:J,"outline-offset":J,"outline-width":J,perspective:J,"perspective-origin-x":ju,"perspective-origin-y":ju,"transform-origin":ju,"transform-origin-x":ju,"transform-origin-y":ju,"transform-origin-z":ju,"transition-delay":py,"transition-duration":py,"vertical-align":J,"flex-basis":J,"shape-margin":J,size:J,gap:J,grid:J,"grid-gap":J,"row-gap":J,"grid-row-gap":J,"grid-column-gap":J,"grid-template-rows":J,"grid-template-columns":J,"grid-auto-rows":J,"grid-auto-columns":J,"box-shadow-x":J,"box-shadow-y":J,"box-shadow-blur":J,"box-shadow-spread":J,"font-line-height":J,"text-shadow-x":J,"text-shadow-y":J,"text-shadow-blur":J};function w8(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var bQ=w8(vQ);function sp(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=sp(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=sp(s,e[s],n);else for(var i in e)e[i]=sp(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||bQ[t];return o&&!(e===0&&o===J)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function _Q(t){t===void 0&&(t={});var e=w8(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=sp(o,s[o],e);return s}function r(s,i){return sp(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var EQ={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},CQ={position:!0,size:!0},gy={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},w1={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function xQ(t,e,n){return t.map(function(r){return b8(r,e,n,!1,!0)})}function v8(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?v8(t[0],e,n,r):typeof t[0]=="object"?xQ(t,e,r):[t]}function b8(t,e,n,r,s){if(!(gy[e]||w1[e]))return[];var i=[];if(w1[e]&&(t=SQ(t,n,w1[e],r)),Object.keys(t).length)for(var o in gy[e]){if(t[o]){Array.isArray(t[o])?i.push(CQ[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}gy[e][o]!=null&&i.push(gy[e][o])}return!i.length||s?i:[i]}function SQ(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=fg((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function fg(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=fg(t.fallbacks[i],e,!0);continue}t[r]=v8(s,r,EQ,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=fg(t.fallbacks,e,!0);continue}t[r]=b8(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function AQ(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=fg(e[r],n);return e}return fg(e,n)}return{onProcessStyle:t}}function IC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function IQ(t){if(Array.isArray(t))return IC(t)}function TQ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function NQ(t,e){if(t){if(typeof t=="string")return IC(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?IC(t,e):void 0}}function PQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kQ(t){return IQ(t)||TQ(t)||NQ(t)||PQ()}var Df="",TC="",_8="",E8="",OQ=Oh&&"ontouchstart"in document.documentElement;if(Oh){var v1={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},RQ=document.createElement("p"),b1=RQ.style,$Q="Transform";for(var _1 in v1)if(_1+$Q in b1){Df=_1,TC=v1[_1];break}Df==="Webkit"&&"msHyphens"in b1&&(Df="ms",TC=v1.ms,E8="edge"),Df==="Webkit"&&"-apple-trailing-word"in b1&&(_8="apple")}var Ve={js:Df,css:TC,vendor:_8,browser:E8,isTouch:OQ};function DQ(t){return t[1]==="-"||Ve.js==="ms"?t:"@"+Ve.css+"keyframes"+t.substr(10)}var jQ={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:Ve.js==="ms"?"-webkit-"+e:Ve.css+e}},UQ={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:Ve.js==="Webkit"?Ve.css+"print-"+e:e}},LQ=/[-\s]+(.)?/g;function MQ(t,e){return e?e.toUpperCase():""}function IA(t){return t.replace(LQ,MQ)}function Lc(t){return IA("-"+t)}var BQ={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(Ve.js==="Webkit"){var r="mask-image";if(IA(r)in n)return e;if(Ve.js+Lc(r)in n)return Ve.css+e}return e}},FQ={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:Ve.vendor==="apple"&&!Ve.isTouch?Ve.css+e:e}},zQ={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:Ve.css+e}},qQ={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:Ve.css+e}},WQ={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:Ve.js==="Webkit"||Ve.js==="ms"&&Ve.browser!=="edge"?Ve.css+e:e}},HQ={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:Ve.js==="Moz"||Ve.js==="ms"||Ve.vendor==="apple"?Ve.css+e:e}},VQ={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(Ve.js==="Webkit"){var r="WebkitColumn"+Lc(e);return r in n?Ve.css+"column-"+e:!1}if(Ve.js==="Moz"){var s="page"+Lc(e);return s in n?"page-"+e:!1}return!1}},GQ={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(Ve.js==="Moz")return e;var r=e.replace("-inline","");return Ve.js+Lc(r)in n?Ve.css+r:!1}},KQ={supportedProperty:function(e,n){return IA(e)in n?e:!1}},YQ={supportedProperty:function(e,n){var r=Lc(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:Ve.js+r in n?Ve.css+e:Ve.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},QQ={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:Ve.js==="ms"?""+Ve.css+e:e}},JQ={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:Ve.js==="ms"?Ve.css+"scroll-chaining":e}},ZQ={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},XQ={supportedProperty:function(e,n){var r=ZQ[e];return r&&Ve.js+Lc(r)in n?Ve.css+r:!1}},C8={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},eJ=Object.keys(C8),tJ=function(e){return Ve.css+e},nJ={supportedProperty:function(e,n,r){var s=r.multiple;if(eJ.indexOf(e)>-1){var i=C8[e];if(!Array.isArray(i))return Ve.js+Lc(i)in n?Ve.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(Ve.js+Lc(i[0])in n))return!1;return i.map(tJ)}return!1}},x8=[jQ,UQ,BQ,FQ,zQ,qQ,WQ,HQ,VQ,GQ,KQ,YQ,QQ,JQ,XQ,nJ],tN=x8.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),rJ=x8.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,kQ(e.noPrefill)),t},[]),jf,pl={};if(Oh){jf=document.createElement("p");var E1=window.getComputedStyle(document.documentElement,"");for(var C1 in E1)isNaN(C1)||(pl[E1[C1]]=E1[C1]);rJ.forEach(function(t){return delete pl[t]})}function NC(t,e){if(e===void 0&&(e={}),!jf)return t;if(pl[t]!=null)return pl[t];(t==="transition"||t==="transform")&&(e[t]=t in jf.style);for(var n=0;n<tN.length&&(pl[t]=tN[n](t,jf.style,e),!pl[t]);n++);try{jf.style[t]=""}catch{return!1}return pl[t]}var Uu={},sJ={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},iJ=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Ra;function oJ(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?NC(e):", "+NC(n);return r||e||n}Oh&&(Ra=document.createElement("p"));function nN(t,e){var n=e;if(!Ra||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(Uu[r]!=null)return Uu[r];try{Ra.style[t]=n}catch{return Uu[r]=!1,!1}if(sJ[t])n=n.replace(iJ,oJ);else if(Ra.style[t]===""&&(n=Ve.css+n,n==="-ms-flex"&&(Ra.style[t]="-ms-flexbox"),Ra.style[t]=n,Ra.style[t]===""))return Uu[r]=!1,!1;return Ra.style[t]="",Uu[r]=n,Uu[r]}function aJ(){function t(s){if(s.type==="keyframes"){var i=s;i.at=DQ(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=NC(i);c&&c!==i&&(a=!0);var l=!1,u=nN(c,zl(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return nN(i,zl(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function cJ(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var lJ=function(e){return e===void 0&&(e={}),{plugins:[YY(),JY(e.observable),tQ(),aQ(),uQ(),fQ(),pQ(),wQ(),_Q(e.defaultUnit),AQ(),aJ(),cJ()]}},uJ=Number.MIN_SAFE_INTEGER||-1e9,dJ=function(){return uJ++},hJ=M.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!Oh}),rN=new Map,TA=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new JT),r[n];var s=rN.get(n);return s||(s=new JT,rN.set(n,s)),s},sN=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=TA(r,s);o.manage(i),r.registry&&r.registry.add(n)}},fJ=function(e){if(e.sheet){var n=TA(e.context,e.index);n.unmanage(e.theme)}},pJ=f8(lJ()),S8=new WeakMap,A8=function(e){return S8.get(e)},gJ=function(e,n){S8.set(e,n)},mJ=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function yJ(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",Qt({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var wJ=function(e){if(!e.context.disableStylesGeneration){var n=TA(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||pJ,i=mJ(e),o=p8(i),a=s.createStyleSheet(i,yJ(e,o!==null));return gJ(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},vJ=function(e,n){for(var r in n)e.deleteRule(n[r])},bJ=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},_J=function(e,n){var r=A8(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},EJ=function(e,n){if(!n)return e.classes;var r=A8(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function iN(t){return t?M.useEffect:qs.useInsertionEffect||M.useLayoutEffect}var x1={},Pi=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?dJ():s,o=r.theming,a=r.name,c=t8(r,["index","theming","name"]),l=o&&o.context||a8,u=function(f){return typeof e=="function"&&(f||M.useContext(l))||x1},d={};return function(f){var p=M.useRef(!0),g=M.useContext(hJ),y=u(f&&f.theme),w=M.useMemo(function(){var _=wJ({context:g,styles:e,name:a,theme:y,index:i,sheetOptions:c});return _&&g.isSSR&&sN({index:i,context:g,sheet:_,theme:y}),[_,_?_J(_,f):null]},[g,y]),b=w[0],v=w[1];iN(g.isSSR)(function(){b&&v&&!p.current&&bJ(f,b,v)},[f]),iN(g.isSSR)(function(){return b&&sN({index:i,context:g,sheet:b,theme:y}),function(){b&&(fJ({index:i,context:g,sheet:b,theme:y}),v&&vJ(b,v))}},[b]);var E=M.useMemo(function(){return b&&v?EJ(b,v):d},[b,v]);return M.useDebugValue(E),M.useDebugValue(y===x1?"No theme":y),M.useEffect(function(){p.current=!1}),E}};const CJ=Pi({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function S1({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=CJ(),d=M.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=m.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[m.jsx("img",{src:t,alt:e,className:u.iconImage}),m.jsx("span",{className:u.iconLabel,children:e})]});return o?f:m.jsx(am,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const xJ=Pi({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function $s({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=xJ({isOpen:e}),u=M.useRef(null),d=()=>{r&&r(t)};return m.jsx(am,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:m.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[m.jsxs("div",{className:l.header,children:[m.jsx("span",{children:i||t.replace("-popup","")}),m.jsxs("div",{className:l.titleBarButtons,children:[m.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),m.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:"✕"})]})]}),m.jsx("div",{className:l.content,children:s})]})})}const A1=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],SJ=80,AJ=80,IJ=10,TJ=10,NJ=10,PJ=10,kJ=({onIconClick:t})=>{const e=A1.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:NJ+d*(SJ+IJ),y:PJ+u*(AJ+TJ)},u++,u>=4&&(u=0,d++)}),l},[r,s]=M.useState(n()),[i,o]=M.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return m.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:m.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>m.jsx(S1,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&m.jsx($s,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:A1.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>m.jsx(S1,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&m.jsx($s,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:A1.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>m.jsx(S1,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},OJ=Pi({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),RJ=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=M.useState(!1),[o,a]=M.useState(new Date),c=OJ({isOpen:s});M.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return m.jsxs("div",{className:c.taskbar,children:[m.jsxs("div",{className:c.leftSection,children:[m.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),m.jsx("div",{className:c.windows,children:t.map(h=>m.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),m.jsxs("div",{className:c.rightSection,children:[m.jsxs("div",{className:c.statusSection,children:[m.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:m.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),m.jsx("div",{className:c.clock,children:l(o)})]}),s&&m.jsxs("div",{className:c.menu,children:[m.jsx("a",{href:"https://dexscreener.com/solana/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Dexscreener"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function I8(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function NA(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function T8(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function PA(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function N8(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function P8(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=`https://api.opensea.io/api/v2/collection/${t}/nfts?chain=solana&limit=${e}&include_orders=true`;try{const i=await fetch(r,{headers:{"X-API-KEY":n}});if(!i.ok)throw new Error(`Failed to get OpenSea Solana NFTs: ${i.statusText}`);const o=await i.json();console.log("Solana collection response:",o),console.log("Sample NFT from response:",o.nfts[0]),console.log("Sample NFT owners:",(s=o.nfts[0])==null?void 0:s.owners),console.log("Sample NFT full structure:",JSON.stringify(o.nfts[0],null,2));const a=o.nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"SOL",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea Solana NFTs:",i),i}}async function $J(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=[`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false&include_metadata=true`];for(const i of r){console.log("Trying OpenSea endpoint:",i);try{const o=await fetch(i,{headers:{"X-API-KEY":n}});if(console.log("Response status:",o.status),!o.ok){const c=await o.text();console.error("API Error response:",c);continue}const a=await o.json();if(console.log("Raw API response:",a),console.log("Number of NFTs returned:",((s=a.nfts)==null?void 0:s.length)||0),a.nfts&&a.nfts.length>0){const c=a.nfts.map(l=>({id:l.identifier,address:l.contract,token_id:parseInt(l.identifier,10),attributes:JSON.stringify(l.traits||[]),name:l.name||`#${l.identifier}`,image_url:l.image_url,owner_of:t,block_minted:0,contract_type:"SOL",description:l.description||"",image:l.image_url,image_url_shrunk:l.image_url,animation_url:l.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:"",num_items:1,created_at:l.updated_at||new Date().toISOString(),updated_at:l.updated_at||new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}));return console.log("Transformed NFTs:",c.length),{page:1,pageSize:e,totalCount:c.length,totalPages:1,data:c}}}catch(o){console.error("Error with endpoint:",i,o);continue}}return console.log("All OpenSea endpoints failed, returning empty result"),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]}}const DJ=Pi({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),jJ=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=DJ({isOpen:t}),i=M.useRef(null),[o,a]=M.useState([]),[c,l]=M.useState(!1),[u,d]=M.useState(!1),[h,f]=M.useState({}),[p,g]=M.useState(null),{data:y}=x5();M.useEffect(()=>{t&&r&&w()},[t,r]);const w=async()=>{l(!0),g(null);try{const x=await I8(r);a(x);const S={};x.forEach(N=>{S[N.id]=0}),f(S)}catch(x){g(x.message)}finally{l(!1)}},b=(x,S)=>{f(N=>({...N,[x]:Math.max(0,S)}))},v=async()=>{const x=Object.entries(h).filter(([,S])=>S>0).map(([S,N])=>({id:S,quantity:N}));if(x.length===0){g("Please select at least one item to mint");return}if(!y){g("Wallet not connected");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const S=await T8(r,x);if(console.log("Mint API result:",S),S.success&&S.mintTransaction){console.log("Got mint transaction:",S.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const N=await y.sendTransaction({to:S.mintTransaction.to,value:BigInt(S.mintTransaction.value),data:S.mintTransaction.data});console.log("Transaction sent successfully:",N),alert(`NFT Minted Successfully: Transaction Hash - ${N}`),e()}catch(N){console.error("Transaction sending failed:",N),g("Transaction failed: "+N.message)}}else throw new Error(S.message||"Could not retrieve minting transaction.")}catch(S){console.error("Minting failed:",S),g("Minting failed: "+S.message)}finally{d(!1)}},E=(x,S)=>`${parseFloat(x)} ${S}`,_=()=>{n&&n()};return t?m.jsx(am,{nodeRef:i,handle:`.${s.header}`,children:m.jsxs("div",{ref:i,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"Mint Pixelawbster"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:_,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),m.jsxs("div",{className:s.content,children:[p&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:p}),c?m.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{children:"Available Lists:"}),o.map(x=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:x.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",E(x.token_price,x.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",x.wallet_limit===4294967295?"Unlimited":x.wallet_limit," per wallet"]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[m.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),m.jsx("input",{type:"number",min:"0",max:x.wallet_limit===4294967295?999:x.wallet_limit,value:h[x.id]||0,onChange:S=>b(x.id,parseInt(S.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},x.id))]}),m.jsx("button",{onClick:v,disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},UJ=Pi({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),LJ=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},MJ=({nft:t,onClose:e})=>{const n=UJ(),r=M.useRef(null),s=LJ(t.attributes);return m.jsx(am,{nodeRef:r,handle:`.${n.header}`,children:m.jsxs("div",{className:n.popup,ref:r,children:[m.jsxs("div",{className:n.header,children:[m.jsxs("span",{children:[t.name," - Details"]}),m.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),m.jsxs("div",{className:n.content,children:[m.jsx("img",{src:t.image_url,alt:t.name,className:n.detailImage}),m.jsx("h3",{children:"Traits"}),m.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):m.jsx("li",{children:"No traits found."})})]})]})})},BJ=Symbol(),oN=Object.getPrototypeOf,PC=new WeakMap,FJ=t=>t&&(PC.has(t)?PC.get(t):oN(t)===Object.prototype||oN(t)===Array.prototype),zJ=t=>FJ(t)&&t[BJ]||null,aN=(t,e=!0)=>{PC.set(t,e)},c0={},I1=t=>typeof t=="object"&&t!==null,Ma=new WeakMap,Uf=new WeakSet,qJ=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>I1(l)&&!Uf.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return aN(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:y}=Reflect.getOwnPropertyDescriptor(l,p),w={value:g,enumerable:y,configurable:!0};if(Uf.has(g))aN(g,!1);else if(g instanceof Promise)delete w.value,w.get=()=>d(g);else if(Ma.has(g)){const[b,v]=Ma.get(g);w.value=i(b,v(),d)}Object.defineProperty(f,p,w)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!I1(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(C,O=++a[0])=>{d!==O&&(d=O,h.forEach(R=>R(C,O)))};let p=a[1];const g=(C=++a[1])=>(p!==C&&!h.size&&(p=C,w.forEach(([O])=>{const R=O[1](C);R>d&&(d=R)})),d),y=C=>(O,R)=>{const B=[...O];B[1]=[C,...B[1]],f(B,R)},w=new Map,b=(C,O)=>{if((c0?"production":void 0)!=="production"&&w.has(C))throw new Error("prop listener already exists");if(h.size){const R=O[3](y(C));w.set(C,[O,R])}else w.set(C,[O])},v=C=>{var O;const R=w.get(C);R&&(w.delete(C),(O=R[1])==null||O.call(R))},E=C=>(h.add(C),h.size===1&&w.forEach(([R,B],H)=>{if((c0?"production":void 0)!=="production"&&B)throw new Error("remove already exists");const F=R[3](y(H));w.set(H,[R,F])}),()=>{h.delete(C),h.size===0&&w.forEach(([R,B],H)=>{B&&(B(),w.set(H,[R]))})}),_=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),S=e(_,{deleteProperty(C,O){const R=Reflect.get(C,O);v(O);const B=Reflect.deleteProperty(C,O);return B&&f(["delete",[O],R]),B},set(C,O,R,B){const H=Reflect.has(C,O),F=Reflect.get(C,O,B);if(H&&(t(F,R)||o.has(R)&&t(F,o.get(R))))return!0;v(O),I1(R)&&(R=zJ(R)||R);let A=R;if(R instanceof Promise)R.then(I=>{R.status="fulfilled",R.value=I,f(["resolve",[O],I])}).catch(I=>{R.status="rejected",R.reason=I,f(["reject",[O],I])});else{!Ma.has(R)&&n(R)&&(A=c(R));const I=!Uf.has(A)&&Ma.get(A);I&&b(O,I)}return Reflect.set(C,O,A,B),f(["set",[O],R,F]),!0}});o.set(l,S);const N=[_,g,i,E];return Ma.set(S,N),Reflect.ownKeys(l).forEach(C=>{const O=Object.getOwnPropertyDescriptor(l,C);"value"in O&&(S[C]=l[C],delete O.value,delete O.writable),Object.defineProperty(_,C,O)}),S})=>[c,Ma,Uf,t,e,n,r,s,i,o,a],[WJ]=qJ();function Dt(t={}){return WJ(t)}function Kn(t,e,n){const r=Ma.get(t);(c0?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function pg(t,e){const n=Ma.get(t);(c0?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function su(t){return Uf.add(t),t}function Yn(t,e,n,r){let s=t[e];return Kn(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function HJ(t){const e=Dt({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var cN={};const X={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof cN<"u"?cN.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},gg={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=X.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var VJ=20,GJ=1,iu=1e6,lN=1e6,KJ=-7,YJ=21,QJ=!1,cm="[big.js] ",bu=cm+"Invalid ",Nv=bu+"decimal places",JJ=bu+"rounding mode",k8=cm+"Division by zero",Et={},so=void 0,ZJ=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function O8(){function t(e){var n=this;if(!(n instanceof t))return e===so?O8():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(bu+"value");e=e===0&&1/e<0?"-0":String(e)}XJ(n,e)}n.constructor=t}return t.prototype=Et,t.DP=VJ,t.RM=GJ,t.NE=KJ,t.PE=YJ,t.strict=QJ,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function XJ(t,e){var n,r,s;if(!ZJ.test(e))throw Error(bu+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function _u(t,e,n,r){var s=t.c;if(n===so&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(JJ);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==so))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==so||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function Eu(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}Et.abs=function(){var t=new this.constructor(this);return t.s=1,t};Et.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};Et.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>iu)throw Error(Nv);if(!s[0])throw Error(k8);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),y=g.length,w=t,b=w.c=[],v=0,E=o+(w.e=e.e-t.e)+1;for(w.s=i,i=E<0?0:E,h.unshift(0);y++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(y=g.length))u=a>y?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=y==a?s:h;y;){if(g[--y]<c[y]){for(d=y;d&&!g[--d];)g[d]=9;--g[d],g[y]+=10}g[y]-=c[y]}for(;!g[0];)g.shift()}else break}b[v++]=u?l:++l,g[0]&&u?g[y]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==so)&&i--);return!b[0]&&v!=1&&(b.shift(),w.e--,E--),v>E&&_u(w,E,n.RM,g[0]!==so),w};Et.eq=function(t){return this.cmp(t)===0};Et.gt=function(t){return this.cmp(t)>0};Et.gte=function(t){return this.cmp(t)>-1};Et.lt=function(t){return this.cmp(t)<0};Et.lte=function(t){return this.cmp(t)<1};Et.minus=Et.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};Et.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(k8);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};Et.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};Et.plus=Et.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};Et.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-lN||t>lN)throw Error(bu+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};Et.prec=function(t,e){if(t!==~~t||t<1||t>iu)throw Error(bu+"precision");return _u(new this.constructor(this),t,e)};Et.round=function(t,e){if(t===so)t=0;else if(t!==~~t||t<-iu||t>iu)throw Error(Nv);return _u(new this.constructor(this),t+this.e+1,e)};Et.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(cm+"No square root");i=Math.sqrt(+Eu(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return _u(t,(s.DP-=4)+t.e+1,s.RM)};Et.times=Et.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};Et.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==so){if(t!==~~t||t<0||t>iu)throw Error(Nv);for(n=_u(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return Eu(n,!0,!!r)};Et.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==so){if(t!==~~t||t<0||t>iu)throw Error(Nv);for(n=_u(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return Eu(n,!1,!!r)};Et[Symbol.for("nodejs.util.inspect.custom")]=Et.toJSON=Et.toString=function(){var t=this,e=t.constructor;return Eu(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};Et.toNumber=function(){var t=+Eu(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(cm+"Imprecise conversion");return t};Et.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==so){if(t!==~~t||t<1||t>iu)throw Error(bu+"precision");for(n=_u(new r(n),t,e);n.c.length<t;)n.c.push(0)}return Eu(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};Et.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(cm+"valueOf disallowed");return Eu(t,t.e<=e.NE||t.e>=e.PE,!0)};var cf=O8();const eZ={bigNumber(t){return t?new cf(t):new cf(0)},multiply(t,e){if(t===void 0||e===void 0)return new cf(0);const n=new cf(t),r=new cf(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},tZ=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],nZ=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],rZ=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],sZ={getERC20Abi:t=>X.USDT_CONTRACT_ADDRESSES.includes(t)?rZ:tZ,getSwapAbi:()=>nZ},hs={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},Me={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function T1(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const $e={setItem(t,e){Lf()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Lf())return localStorage.getItem(t)||void 0},removeItem(t){Lf()&&localStorage.removeItem(t)},clear(){Lf()&&localStorage.clear()}};function Lf(){return typeof window<"u"&&typeof localStorage<"u"}function qo(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var uN={};const N1=(typeof process<"u"&&typeof uN<"u"?uN.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",R8=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]},{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]}],iZ="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",vt={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:N1,SECURE_SITE_DASHBOARD:`${N1}/dashboard`,SECURE_SITE_FAVICON:`${N1}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld","coinbase"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},he={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=he.getActiveNamespace(),e=he.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{$e.setItem(Me.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=$e.getItem(Me.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{$e.removeItem(Me.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{$e.setItem(Me.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{$e.setItem(Me.ACTIVE_CAIP_NETWORK_ID,t),he.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return $e.getItem(Me.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{$e.removeItem(Me.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=T1(t);$e.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=he.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),$e.setItem(Me.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=$e.getItem(Me.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=T1(t);$e.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return $e.getItem(Me.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=T1(t);return $e.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{$e.setItem(Me.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return $e.getItem(Me.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{$e.removeItem(Me.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return $e.getItem(Me.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=$e.getItem(Me.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{$e.setItem(Me.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return $e.getItem(Me.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=$e.getItem(Me.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));$e.setItem(Me.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=he.getConnectedNamespaces();e.includes(t)||(e.push(t),he.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=he.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),he.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return $e.getItem(Me.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{$e.setItem(Me.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{$e.removeItem(Me.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=$e.getItem(Me.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=he.getBalanceCache();$e.setItem(Me.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=he.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;he.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=he.getBalanceCache();e[t.caipAddress]=t,$e.setItem(Me.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=$e.getItem(Me.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=he.getBalanceCache();$e.setItem(Me.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=he.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),he.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=he.getNativeBalanceCache();e[t.caipAddress]=t,$e.setItem(Me.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=$e.getItem(Me.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=he.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;he.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=he.getEnsCache();e[t.address]=t,$e.setItem(Me.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=he.getEnsCache();$e.setItem(Me.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=$e.getItem(Me.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=he.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;he.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=he.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},$e.setItem(Me.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=he.getIdentityCache();$e.setItem(Me.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{$e.removeItem(Me.PORTFOLIO_CACHE),$e.removeItem(Me.NATIVE_BALANCE_CACHE),$e.removeItem(Me.ENS_CACHE),$e.removeItem(Me.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{$e.setItem(Me.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=$e.getItem(Me.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=he.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===X.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};$e.setItem(Me.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=$e.getItem(Me.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=he.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),$e.setItem(Me.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=$e.getItem(Me.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=he.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),$e.setItem(Me.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=he.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),$e.setItem(Me.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(he.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},Ae={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return Ae.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=vt.TEN_SEC_MS:!0},isAllowedRetry(t,e=vt.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(Ae.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+vt.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(Ae.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!Ae.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?he.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,Ae.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return X.W3M_API_URL},getBlockchainApiUrl(){return X.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return X.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?vt.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in X.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function lf(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class lm{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await lf(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await lf(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await lf(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await lf(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await lf(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const oZ={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?vt.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(Ae.isTelegram()){if(Ae.isIos())return t.filter(e=>e!=="google");if(Ae.isMac())return t.filter(e=>e!=="x");if(Ae.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},Pe=Dt({features:vt.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:vt.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),se={state:Pe,subscribeKey(t,e){return Yn(Pe,t,e)},setOptions(t){Object.assign(Pe,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...Pe.remoteFeatures,...t};Pe.remoteFeatures=e,(n=Pe.remoteFeatures)!=null&&n.socials&&(Pe.remoteFeatures.socials=oZ.filterSocialsByPlatform(Pe.remoteFeatures.socials))},setFeatures(t){if(!t)return;Pe.features||(Pe.features=vt.DEFAULT_FEATURES);const e={...Pe.features,...t};Pe.features=e},setProjectId(t){Pe.projectId=t},setCustomRpcUrls(t){Pe.customRpcUrls=t},setAllWallets(t){Pe.allWallets=t},setIncludeWalletIds(t){Pe.includeWalletIds=t},setExcludeWalletIds(t){Pe.excludeWalletIds=t},setFeaturedWalletIds(t){Pe.featuredWalletIds=t},setTokens(t){Pe.tokens=t},setTermsConditionsUrl(t){Pe.termsConditionsUrl=t},setPrivacyPolicyUrl(t){Pe.privacyPolicyUrl=t},setCustomWallets(t){Pe.customWallets=t},setIsSiweEnabled(t){Pe.isSiweEnabled=t},setIsUniversalProvider(t){Pe.isUniversalProvider=t},setSdkVersion(t){Pe.sdkVersion=t},setMetadata(t){Pe.metadata=t},setDisableAppend(t){Pe.disableAppend=t},setEIP6963Enabled(t){Pe.enableEIP6963=t},setDebug(t){Pe.debug=t},setEnableWalletConnect(t){Pe.enableWalletConnect=t},setEnableWalletGuide(t){Pe.enableWalletGuide=t},setEnableAuthLogger(t){Pe.enableAuthLogger=t},setEnableWallets(t){Pe.enableWallets=t},setPreferUniversalLinks(t){Pe.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){Pe.hasMultipleAddresses=t},setSIWX(t){Pe.siwx=t},setConnectMethodsOrder(t){Pe.features={...Pe.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){Pe.features={...Pe.features,walletFeaturesOrder:t}},setSocialsOrder(t){Pe.remoteFeatures={...Pe.remoteFeatures,socials:t}},setCollapseWallets(t){Pe.features={...Pe.features,collapseWallets:t}},setEnableEmbedded(t){Pe.enableEmbedded=t},setAllowUnsupportedChain(t){Pe.allowUnsupportedChain=t},setManualWCControl(t){Pe.manualWCControl=t},setEnableNetworkSwitch(t){Pe.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(Pe.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){Pe.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return Pe.universalProviderConfigOverride},getSnapshot(){return pg(Pe)}},aZ=Object.freeze({enabled:!0,events:[]}),cZ=new lm({baseUrl:Ae.getAnalyticsUrl(),clientId:null}),lZ=5,uZ=60*1e3,va=Dt({...aZ}),dZ={state:va,subscribeKey(t,e){return Yn(va,t,e)},async sendError(t,e){if(!va.enabled)return;const n=Date.now();if(va.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<uZ}).length>=lZ)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};va.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=se.state;await cZ.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:Ae.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){va.enabled=!0},disable(){va.enabled=!1},clearEvents(){va.events=[]}};class ph extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,ph.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,ph):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function dN(t,e){const n=t instanceof ph?t:new ph(t instanceof Error?t.message:String(t),e,t);throw dZ.sendError(n,n.category),n}function As(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return dN(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return dN(a,e)}},n[r]=i}else n[r]=s}),n}const Ji={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},hZ={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Ji.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Ji.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Ji.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Ji.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===X.CHAIN.SOLANA&&t===Ji.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Ji.COINBASE.url}/dapp?cb_url=${r}`)}},os=Dt({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),fZ={state:os,subscribeNetworkImages(t){return Kn(os.networkImages,()=>t(os.networkImages))},subscribeKey(t,e){return Yn(os,t,e)},subscribe(t){return Kn(os,()=>t(os))},setWalletImage(t,e){os.walletImages[t]=e},setNetworkImage(t,e){os.networkImages[t]=e},setChainImage(t,e){os.chainImages[t]=e},setConnectorImage(t,e){os.connectorImages={...os.connectorImages,[t]:e}},setTokenImage(t,e){os.tokenImages[t]=e},setCurrencyImage(t,e){os.currencyImages[t]=e}},mi=As(fZ),pZ={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},P1=Dt({networkImagePromises:{}}),$8={async fetchWalletImage(t){if(t)return await Ie._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(P1.networkImagePromises[t]||(P1.networkImagePromises[t]=Ie._fetchNetworkImage(t)),await P1.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return mi.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return mi.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return mi.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return mi.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return mi.state.connectorImages[t.imageId]},getChainImage(t){return mi.state.networkImages[pZ[t]]}},ba=Dt({message:"",variant:"info",open:!1}),gZ={state:ba,subscribeKey(t,e){return Yn(ba,t,e)},open(t,e){const{debug:n}=se.state,{shortMessage:r,longMessage:s}=t;n&&(ba.message=r,ba.variant=e,ba.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){ba.open=!1,ba.message="",ba.variant="info"}},dn=As(gZ),mZ=Ae.getAnalyticsUrl(),yZ=new lm({baseUrl:mZ,clientId:null}),wZ=["MODAL_CREATED"],bo=Dt({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),bt={state:bo,subscribe(t){return Kn(bo,()=>t(bo))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=se.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=de.state.address;if(wZ.includes(t.data.event)||typeof window>"u")return;await yZ.post({path:"/e",params:bt.getSdkProperties(),body:{eventId:Ae.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),bo.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===X.HTTP_STATUS_CODES.FORBIDDEN&&!bo.reportedErrors.FORBIDDEN&&(dn.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Lf()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),bo.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;bo.timestamp=Date.now(),bo.data=t,(e=se.state.features)!=null&&e.analytics&&bt._sendAnalyticsEvent(bo)}},vZ=Ae.getApiUrl(),kr=new lm({baseUrl:vZ,clientId:null}),bZ=40,hN=4,_Z=20,qe=Dt({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Ie={state:qe,subscribeKey(t,e){return Yn(qe,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=se.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return se.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${kr.baseUrl}/getWalletImage/${t}`,n=await kr.getBlob({path:e,params:Ie._getSdkProperties()});mi.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${kr.baseUrl}/public/getAssetImage/${t}`,n=await kr.getBlob({path:e,params:Ie._getSdkProperties()});mi.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${kr.baseUrl}/public/getAssetImage/${t}`,n=await kr.getBlob({path:e,params:Ie._getSdkProperties()});mi.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${kr.baseUrl}/public/getCurrencyImage/${t}`,n=await kr.getBlob({path:e,params:Ie._getSdkProperties()});mi.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${kr.baseUrl}/public/getTokenImage/${t}`,n=await kr.getBlob({path:e,params:Ie._getSdkProperties()});mi.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return Ae.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Ji.COINBASE.id?!0:D.state.activeChain==="solana"&&(n.id===Ji.SOLFLARE.id||n.id===Ji.PHANTOM.id)):t},async fetchProjectConfig(){return(await kr.get({path:"/appkit/v1/config",params:Ie._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await kr.get({path:"/projects/v1/origins",params:Ie._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===X.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=X.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=D.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!$8.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>Ie._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=fe.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>Ie._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Ie._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Ie._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];Ie._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Ji).map(o=>o.id));const r=await kr.get({path:"/getWallets",params:{...Ie._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:Ie._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=se.state;if(t!=null&&t.length){const e={...Ie._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??hN,include:t},{data:n}=await Ie.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Ie._fetchWalletImage(i))),qe.featured=r,qe.allFeatured=r}},async fetchRecommendedWallets(){try{qe.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=se.state,r=[...e??[],...n??[]].filter(Boolean),s=D.getRequestedCaipNetworkIds().join(","),i={page:1,entries:hN,include:t,exclude:r,chains:s},{data:o,count:a}=await Ie.fetchWallets(i),c=he.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>Ie._fetchWalletImage(d))),qe.recommended=o,qe.allRecommended=o,qe.count=a??0}catch{}finally{qe.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=se.state,s=D.getRequestedCaipNetworkIds().join(","),i=[...qe.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:bZ,include:e,exclude:i,chains:s},{data:a,count:c}=await Ie.fetchWallets(o),l=a.slice(0,_Z).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>Ie._fetchWalletImage(u))),qe.wallets=Ae.uniqueBy([...qe.wallets,...Ie._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),qe.count=c>qe.count?c:qe.count,qe.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await Ie.fetchWallets(e);n&&n.forEach(r=>{qe.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=se.state,s=D.getRequestedCaipNetworkIds().join(",");qe.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await Ie.fetchWallets(i);bt.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Ie._fetchWalletImage(c)),Ae.wait(300)]),qe.search=Ie._filterOutExtensions(o)},initPromise(t,e){const n=qe.promises[t];return n||(qe.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&Ie.initPromise("connectorImages",Ie.fetchConnectorImages),e&&Ie.initPromise("featuredWallets",Ie.fetchFeaturedWallets),n&&Ie.initPromise("recommendedWallets",Ie.fetchRecommendedWallets),r&&Ie.initPromise("networkImages",Ie.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=se.state.features)!=null&&t.analytics&&Ie.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await kr.get({path:"/getAnalyticsConfig",params:Ie._getSdkProperties()});se.setFeatures({analytics:t})}catch{se.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){qe.featured=qe.allFeatured,qe.recommended=qe.allRecommended;return}const e=D.getRequestedCaipNetworkIds().join(",");qe.featured=qe.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),qe.recommended=qe.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),qe.filteredWallets=qe.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){qe.filteredWallets=[]},setFilterByNamespace(t){if(!t){qe.featured=qe.allFeatured,qe.recommended=qe.allRecommended;return}const e=D.getRequestedCaipNetworkIds().join(",");qe.featured=qe.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),qe.recommended=qe.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),qe.filteredWallets=qe.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},xt=Dt({view:"Connect",history:["Connect"],transactionStack:[]}),EZ={state:xt,subscribeKey(t,e){return Yn(xt,t,e)},pushTransactionStack(t){xt.transactionStack.push(t)},popTransactionStack(t){const e=xt.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Re.goBack();break;case"cancel":s==null||s(),Re.goBack();break}},push(t,e){t!==xt.view&&(xt.view=t,xt.history.push(t),xt.data=e)},reset(t,e){xt.view=t,xt.history=[t],xt.data=e},replace(t,e){xt.history.at(-1)===t||(xt.view=t,xt.history[xt.history.length-1]=t,xt.data=e)},goBack(){var r;const t=D.state.activeCaipAddress,e=Re.state.view==="ConnectingFarcaster",n=!t&&e;if(xt.history.length>1){xt.history.pop();const[s]=xt.history.slice(-1);s&&(t&&s==="Connect"?xt.view="Account":xt.view=s)}else gt.close();(r=xt.data)!=null&&r.wallet&&(xt.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){de.setFarcasterUrl(void 0,D.state.activeChain);const a=fe.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=pg(se.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(xt.history.length>1){xt.history=xt.history.slice(0,t+1);const[e]=xt.history.slice(-1);e&&(xt.view=e)}},goBackOrCloseModal(){Re.state.history.length>1?Re.goBack():gt.close()}},Re=As(EZ),_o=Dt({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),kC={state:_o,subscribe(t){return Kn(_o,()=>t(_o))},setThemeMode(t){_o.themeMode=t;try{const e=fe.getAuthConnector();if(e){const n=kC.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:qo(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){_o.themeVariables={..._o.themeVariables,...t};try{const e=fe.getAuthConnector();if(e){const n=kC.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:qo(_o.themeVariables,_o.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return pg(_o)}},Wr=As(kC),D8={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},at=Dt({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...D8},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),CZ={state:at,subscribe(t){return Kn(at,()=>{t(at)})},subscribeKey(t,e){return Yn(at,t,e)},initialize(t){t.forEach(e=>{const n=he.getConnectedConnectorId(e);n&&fe.setConnectorId(n,e)})},setActiveConnector(t){t&&(at.activeConnector=su(t))},setConnectors(t){t.filter(s=>!at.allConnectors.some(i=>i.id===s.id&&fe.getConnectorName(i.name)===fe.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&at.allConnectors.push(su(s))});const n=fe.getEnabledNamespaces(),r=fe.getEnabledConnectors(n);at.connectors=fe.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(at.filterByNamespaceMap).forEach(e=>{at.filterByNamespaceMap[e]=!1}),t.forEach(e=>{at.filterByNamespaceMap[e]=!0}),fe.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){at.filterByNamespaceMap[t]=e,fe.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=fe.getEnabledNamespaces(),e=fe.getEnabledConnectors(t),n=fe.areAllNamespacesEnabled();at.connectors=fe.mergeMultiChainConnectors(e),n?Ie.clearFilterByNamespaces():Ie.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(at.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return at.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(at.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=fe.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===X.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=fe.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===X.CONNECTOR_ID.AUTH){const s=t,i=pg(se.state),o=Wr.getSnapshot().themeMode,a=Wr.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:qo(a,o)}),fe.setConnectors([t])}else fe.setConnectors([t])},getAuthConnector(t){var r;const e=t||D.state.activeChain,n=at.connectors.find(s=>s.id===X.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return at.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return at.allConnectors.find(e=>e.id===t)},getConnector(t,e){return at.allConnectors.filter(r=>r.chain===D.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=pg(se.state),r=Wr.getSnapshot().themeMode,s=Wr.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:qo(s,r)})},getConnectorsByNamespace(t){const e=at.allConnectors.filter(n=>n.chain===t);return fe.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=fe.getConnector(t.id,t.rdns),n=D.state.activeChain;hZ.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?Re.push("ConnectingExternal",{connector:e}):Re.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?fe.getConnectorsByNamespace(t):fe.mergeMultiChainConnectors(at.allConnectors)},setFilterByNamespace(t){at.filterByNamespace=t,at.connectors=fe.getConnectors(t),Ie.setFilterByNamespace(t)},setConnectorId(t,e){t&&(at.activeConnectorIds={...at.activeConnectorIds,[e]:t},he.setConnectedConnectorId(e,t))},removeConnectorId(t){at.activeConnectorIds={...at.activeConnectorIds,[t]:void 0},he.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return at.activeConnectorIds[t]},isConnected(t){return t?!!at.activeConnectorIds[t]:Object.values(at.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){at.activeConnectorIds={...D8}}},fe=As(CZ),mg={getConnectionStatus(t,e){const n=fe.state.activeConnectorIds[e],r=_e.state.connections.get(e)??[];return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},validateAccountSwitch({namespace:t,connection:e,address:n}){if(t===X.CHAIN.BITCOIN){if(!n)throw new Error("Address parameter is required for switching bip122 connection");const{type:s}=e.accounts.find(i=>i.address.toLowerCase()===n.toLowerCase())??{};if(typeof s=="string"&&s!=="payment")throw new Error(`Switching to non-payment accounts is not allowed for ${t}`)}},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},filterConnectionsByAccountType(t,e){return t.map(n=>{const r=n.accounts.filter(s=>typeof s.type=="string"?s.type.toLowerCase()===e.toLowerCase():!0);return{...n,accounts:r}})},getConnectionsData(t){const e=_e.state.connections.get(t)??[],n=e.filter(a=>!a.recent),r=fe.state.activeConnectorIds[t],i=e.filter(a=>a.recent).filter(a=>fe.getConnectorById(a.connectorId)),o=mg.excludeExistingConnections([...n.map(a=>a.connectorId),...r?[r]:[]],i);return{connections:n,recentConnections:o}}};var gh={};const xZ="https://secure.walletconnect.org/sdk",SZ=(typeof process<"u"&&typeof gh<"u"?gh.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||xZ,AZ=(typeof process<"u"&&typeof gh<"u"?gh.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",IZ=(typeof process<"u"&&typeof gh<"u"?gh.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ce={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},$n={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},TZ=1e3,Bo={checkNamespaceConnectorId(t,e){return fe.getConnectorId(t)===e},isSocialProvider(t){return vt.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&fe.setActiveConnector(e),s==null||s(Ae.isMobile()&&t),r){const l=gt.subscribeKey("open",u=>{u||(Re.state.view!==r&&Re.replace(r),l(),a(new Error("Modal closed")))})}const c=D.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&gt.close(),c(),o(hs.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=D.subscribeKey("activeCaipAddress",s=>{s&&(gt.close(),r(),e(hs.parseCaipAddress(s)))});_e.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=de.state.socialWindow,i=de.state.socialProvider,o=!1,a=null;const c=D.subscribeKey("activeCaipAddress",l=>{l&&(e&&gt.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===X.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=fe.getAuthConnector();if(g&&!o){s&&(s.close(),de.setSocialWindow(void 0,D.state.activeChain),s=de.state.socialWindow),o=!0;const y=f.data.resultUri;if(i&&bt.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}}),await g.provider.connectSocial(y),i){he.setConnectedSocialProvider(i),await _e.connectExternal({id:g.id,type:g.type,socialUri:y},g.chain);const w=D.state.activeCaipAddress;if(!w){u(new Error("Failed to connect"));return}l(hs.parseCaipAddress(w)),bt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&bt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&bt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(de.setSocialProvider(t,D.state.activeChain),i=de.state.socialProvider,bt.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=gt.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=fe.getAuthConnector();if(p&&!de.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();de.setFarcasterUrl(g,D.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=fe.getAuthConnector();a=Ae.returnOpenHref(`${X.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){de.setSocialWindow(a,D.state.activeChain),s=de.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=gt.subscribeKey("open",c=>{c||(Re.state.view!==e&&Re.replace(e),a(),i(new Error("Modal closed")))})}const o=D.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&gt.close(),o(),s(hs.parseCaipAddress(a)))})})},async updateEmail(){const t=he.getConnectedConnectorId(D.state.activeChain),e=fe.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==X.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return Re.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(gt.close(),clearInterval(i),o(),r({email:a}))},TZ),o=gt.subscribeKey("open",a=>{a||(Re.state.view!=="Connect"&&Re.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){var n;return D.checkIfSmartAccountEnabled()&&((n=de.state.preferredAccountTypes)==null?void 0:n[t])===$n.ACCOUNT_TYPES.EOA}},dl=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),mn=Dt({...dl}),NZ={state:mn,subscribeKey(t,e){return Yn(mn,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=Ae.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){mn.message=dl.message,mn.variant=dl.variant,mn.svg=dl.svg,mn.open=dl.open,mn.autoClose=dl.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=dl.autoClose}){mn.open?(mn.open=!1,setTimeout(()=>{mn.message=t,mn.variant=n,mn.svg=e,mn.open=!0,mn.autoClose=r},150)):(mn.message=t,mn.variant=n,mn.svg=e,mn.open=!0,mn.autoClose=r)}},wi=NZ,Pt=Dt({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),PZ={state:Pt,subscribe(t){return Kn(Pt,()=>t(Pt))},setLastNetworkInView(t){Pt.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Pt.loading=!0;try{const s=await ke.fetchTransactions({account:t,cursor:Pt.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=D.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=Mf.filterSpamTransactions(s.data),o=Mf.filterByConnectedChain(i),a=[...Pt.transactions,...o];Pt.loading=!1,e==="coinbase"?Pt.coinbaseTransactions=Mf.groupTransactionsByYearAndMonth(Pt.coinbaseTransactions,s.data):(Pt.transactions=a,Pt.transactionsByYear=Mf.groupTransactionsByYearAndMonth(Pt.transactionsByYear,o)),Pt.empty=a.length===0,Pt.next=s.next?s.next:void 0}catch{const i=D.state.activeChain;bt.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:se.state.projectId,cursor:Pt.next,isSmartAccount:((r=de.state.preferredAccountTypes)==null?void 0:r[i])===$n.ACCOUNT_TYPES.SMART_ACCOUNT}}),wi.showError("Failed to fetch transactions"),Pt.loading=!1,Pt.empty=!0,Pt.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=D.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Pt.next=void 0},resetTransactions(){Pt.transactions=[],Pt.transactionsByYear={},Pt.lastNetworkInView=void 0,Pt.loading=!1,Pt.empty=!1,Pt.next=void 0}},Mf=As(PZ,"API_ERROR"),rt=Dt({connections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let el;const kZ={state:rt,subscribe(t){return Kn(rt,()=>t(rt))},subscribeKey(t,e){return Yn(rt,t,e)},_getClient(){return rt._client},setClient(t){rt._client=su(t)},initialize(t){const e=he.getConnections();for(const n of t){const r=n.namespace;if(r){const s=rt.connections.get(r)??[],i=e[r]??[],o=[...s,...i];rt.connections.set(r,o)}}},async connectWalletConnect(){var t,e,n,r;if(Ae.isTelegram()||Ae.isSafari()&&Ae.isIos()){if(el){await el,el=void 0;return}if(!Ae.isPairingExpired(rt==null?void 0:rt.wcPairingExpiry)){const s=rt.wcUri;rt.wcUri=s;return}el=(e=(t=_e._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),_e.state.status="connecting",await el,el=void 0,rt.wcPairingExpiry=void 0,_e.state.status="connected"}else await((r=(n=_e._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=_e._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&D.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=_e._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||D.state.activeChain;e&&fe.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;gt.setLoading(!0,D.state.activeChain);const n=fe.getAuthConnector();n&&(de.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),he.setPreferredAccountTypes(de.state.preferredAccountTypes??{[e]:t}),await _e.reconnectExternal(n),gt.setLoading(!1,D.state.activeChain),bt.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=D.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=_e._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=_e._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=_e._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=_e._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=_e._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=_e._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=_e._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=_e._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=_e._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=_e._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=_e._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=_e._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){rt.wcUri=void 0,rt.wcPairingExpiry=void 0,rt.wcLinking=void 0,rt.recentWallet=void 0,rt.status="disconnected",Mf.resetTransactions(),he.deleteWalletConnectDeepLink()},resetUri(){rt.wcUri=void 0,rt.wcPairingExpiry=void 0,el=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=_e.state;t&&he.setWalletConnectDeepLink(t),e&&he.setAppKitRecent(e),bt.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Re.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){rt.wcBasic=t},setUri(t){rt.wcUri=t,rt.wcPairingExpiry=Ae.getPairingExpiry()},setWcLinking(t){rt.wcLinking=t},setWcError(t){rt.wcError=t,rt.buffering=!1},setRecentWallet(t){rt.recentWallet=t},setBuffering(t){rt.buffering=t},setStatus(t){rt.status=t},setIsSwitchingConnection(t){rt.isSwitchingConnection=t},async disconnect({id:t,namespace:e}={}){var n;try{await((n=_e._getClient())==null?void 0:n.disconnect({id:t,chainNamespace:e}))}catch(r){throw new ph("Failed to disconnect","INTERNAL_SDK_ERROR",r)}},setConnections(t,e){rt.connections=new Map(rt.connections.set(e,t))},async handleAuthAccountSwitch({address:t,connection:e,namespace:n}){var o;const r=(o=e.accounts.find(a=>a.type==="smartAccount"))==null?void 0:o.address,i=(r==null?void 0:r.toLowerCase())===t.toLowerCase()&&Bo.canSwitchToSmartAccount(n)?"smartAccount":"eoa";await _e.setPreferredAccountType(i,n)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=fe.getConnectorById(t.connectorId),s=t.connectorId===X.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);const i=await _e.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return s&&n&&await _e.handleAuthAccountSwitch({address:n,connection:t,namespace:e}),i==null?void 0:i.address},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=fe.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===X.CONNECTOR_ID.AUTH,a=t.connectorId===X.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&Bo.isSocialProvider(i)){const{address:d}=await Bo.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){gt.open({view:"ConnectingFarcaster"})},onConnect(){Re.replace("ProfileWallets")}});c=d}else{const{address:d}=await Bo.connectEmail({closeModalOnConnect:r,onOpen(){gt.open({view:"EmailLogin"})},onConnect(){Re.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await Bo.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){gt.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){Re.replace("ProfileWallets")}});c=d}else{const d=await _e.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await _e.handleAuthAccountSwitch({address:n,connection:t,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){mg.validateAccountSwitch({namespace:n,connection:t,address:e});let i;const o=de.getCaipAddress(n);if(o){const{address:c}=hs.parseCaipAddress(o);i=c}const a=mg.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await _e.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await _e.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},_e=As(kZ),Lu=Dt({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),io={state:Lu,subscribe(t){return Kn(Lu,()=>t(Lu))},subscribeOpen(t){return Yn(Lu,"open",t)},set(t){Object.assign(Lu,{...Lu,...t})}};function OZ(t){const e=Array.from(D.state.chains.keys());let n=[];return t?(n.push([t,D.state.chains.get(t)]),Bo.checkNamespaceConnectorId(t,X.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&Bo.checkNamespaceConnectorId(r,X.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,D.state.chains.get(r)])}):Bo.checkNamespaceConnectorId(t,X.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&Bo.checkNamespaceConnectorId(r,X.CONNECTOR_ID.AUTH)&&n.push([r,D.state.chains.get(r)])})):n=Array.from(D.state.chains.entries()),n}function j8(){var r,s;const t=((r=D.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=D.state.activeCaipNetwork)==null?void 0:s.id)||1,n=vt.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}const RZ={async getTokenList(){var r;const t=D.state.activeCaipNetwork,e=await ke.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=D.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(_e==null?void 0:_e.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await ke.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await ke.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=_e.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await kA.getMyTokensWithBalance(t);return de.setTokenBalance(e,D.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:j8(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},wt=Dt({tokenBalances:[],loading:!1}),$Z={state:wt,subscribe(t){return Kn(wt,()=>t(wt))},subscribeKey(t,e){return Yn(wt,t,e)},setToken(t){t&&(wt.token=su(t))},setTokenAmount(t){wt.sendTokenAmount=t},setReceiverAddress(t){wt.receiverAddress=t},setReceiverProfileImageUrl(t){wt.receiverProfileImageUrl=t},setReceiverProfileName(t){wt.receiverProfileName=t},setNetworkBalanceInUsd(t){wt.networkBalanceInUSD=t},setLoading(t){wt.loading=t},async sendToken(){var t;try{switch(ft.setLoading(!0),(t=D.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await ft.sendEvmToken();return;case"solana":await ft.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{ft.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=D.state.activeChain,e=(n=de.state.preferredAccountTypes)==null?void 0:n[t];if(!ft.state.sendTokenAmount||!ft.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!ft.state.token)throw new Error("A token is required");(r=ft.state.token)!=null&&r.address?(bt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===$n.ACCOUNT_TYPES.SMART_ACCOUNT,token:ft.state.token.address,amount:ft.state.sendTokenAmount,network:((s=D.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await ft.sendERC20Token({receiverAddress:ft.state.receiverAddress,tokenAddress:ft.state.token.address,sendTokenAmount:ft.state.sendTokenAmount,decimals:ft.state.token.quantity.decimals})):(bt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===$n.ACCOUNT_TYPES.SMART_ACCOUNT,token:ft.state.token.symbol||"",amount:ft.state.sendTokenAmount,network:((i=D.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await ft.sendNativeToken({receiverAddress:ft.state.receiverAddress,sendTokenAmount:ft.state.sendTokenAmount,decimals:ft.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;wt.loading=!0;const e=(i=D.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=D.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=D.state.activeCaipAddress,s=r?Ae.getPlainAddress(r):void 0;if(wt.lastRetry&&!Ae.isAllowedRetry(wt.lastRetry,30*vt.ONE_SEC_MS))return wt.loading=!1,[];try{if(s&&e&&n){const a=await kA.getMyTokensWithBalance();return wt.tokenBalances=a,wt.lastRetry=void 0,a}}catch(a){wt.lastRetry=Date.now(),t==null||t(a),wi.showError("Token Balance Unavailable")}finally{wt.loading=!1}return[]},fetchNetworkBalance(){if(wt.tokenBalances.length===0)return;const t=RZ.mapBalancesToSwapTokens(wt.tokenBalances);if(!t)return;const e=t.find(n=>n.address===j8());e&&(wt.networkBalanceInUSD=e?eZ.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;Re.pushTransactionStack({});const e=t.receiverAddress,n=de.state.address,r=_e.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await _e.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),bt.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=de.state.preferredAccountTypes)==null?void 0:i.eip155)===$n.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=ft.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=D.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=_e._getClient())==null||c.updateBalance("eip155"),ft.resetSend()},async sendERC20Token(t){Re.pushTransactionStack({onSuccess(){Re.replace("Account")}});const e=_e.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(de.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=Ae.getPlainAddress(t.tokenAddress);await _e.writeContract({fromAddress:de.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:sZ.getERC20Abi(n),chainNamespace:"eip155"}),ft.resetSend()}},async sendSolanaToken(){var t;if(!ft.state.sendTokenAmount||!ft.state.receiverAddress)throw new Error("An amount and receiver address are required");Re.pushTransactionStack({onSuccess(){Re.replace("Account")}}),await _e.sendTransaction({chainNamespace:"solana",to:ft.state.receiverAddress,value:ft.state.sendTokenAmount}),(t=_e._getClient())==null||t.updateBalance("solana"),ft.resetSend()},resetSend(){wt.token=void 0,wt.sendTokenAmount=void 0,wt.receiverAddress=void 0,wt.receiverProfileImageUrl=void 0,wt.receiverProfileName=void 0,wt.loading=!1,wt.tokenBalances=[]}},ft=As($Z),k1={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},my={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},pe=Dt({chains:HJ(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),DZ={state:pe,subscribe(t){return Kn(pe,()=>{t(pe)})},subscribeKey(t,e){return Yn(pe,t,e)},subscribeChainProp(t,e,n){let r;return Kn(pe.chains,()=>{var i;const s=n||pe.activeChain;if(s){const o=(i=pe.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=he.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=se.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(pe.noAdapters=!0),pe.noAdapters||(pe.activeChain=a==null?void 0:a.namespace,pe.activeCaipNetwork=i,D.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),pe.activeChain&&io.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);D.state.chains.set(u,{namespace:u,networkState:Dt({...my,caipNetwork:d==null?void 0:d[0]}),accountState:Dt(k1),caipNetworks:d??[],...n}),D.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(pe.activeChain===t){const r=Array.from(pe.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&D.setActiveCaipNetwork(s)}}pe.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){pe.chains.set(t.namespace,{namespace:t.namespace,networkState:{...my,caipNetwork:r[0]},accountState:k1,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),D.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=pe.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),pe.chains.set(t.chainNamespace,{...e,caipNetworks:r}),D.setRequestedCaipNetworks(r,t.chainNamespace),fe.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=pe.chains.get(t);if(n){const o=((r=pe.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&D.setActiveCaipNetwork(n.caipNetworks[0]),pe.chains.set(t,{...n,caipNetworks:a}),D.setRequestedCaipNetworks(a||[],t),a.length===0&&fe.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=pe.chains.get(t);n&&(n.networkState={...n.networkState||my,...e},pe.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=pe.chains.get(t);if(r){const s={...r.accountState||k1,...e};pe.chains.set(t,{...r,accountState:s}),(pe.chains.size===1||pe.activeChain===t)&&(e.caipAddress&&(pe.activeCaipAddress=e.caipAddress),de.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=pe.chains.get(t);if(n){const r={...n.networkState||my,...e};pe.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){D.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&fe.removeConnectorId(n)},setActiveNamespace(t){var r,s;pe.activeChain=t;const e=t?pe.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(pe.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,pe.activeCaipNetwork=n,D.setChainNetworkData(t,{caipNetwork:n}),he.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),io.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;pe.activeChain!==t.chainNamespace&&D.setIsSwitchingNamespace(!0);const e=pe.chains.get(t.chainNamespace);pe.activeChain=t.chainNamespace,pe.activeCaipNetwork=t,D.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?pe.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:pe.activeCaipAddress=void 0,D.setAccountProp("caipAddress",pe.activeCaipAddress,t.chainNamespace),e&&de.replaceState(e.accountState),ft.resetSend(),io.set({activeChain:pe.activeChain,selectedNetworkId:(i=pe.activeCaipNetwork)==null?void 0:i.caipNetworkId}),he.setActiveCaipNetworkId(t.caipNetworkId),!D.checkIfSupportedNetwork(t.chainNamespace)&&se.state.enableNetworkSwitch&&!se.state.allowUnsupportedChain&&!_e.state.wcBasic&&D.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=pe.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==D.state.activeChain,n=(s=D.getNetworkData(t))==null?void 0:s.caipNetwork,r=D.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await D.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=D.state.chains.get(D.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=pe.activeCaipNetwork)==null?void 0:o.id)})),r=D.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&gt.close()}catch{Re.goBack()}bt.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||pe.activeChain,n=pe.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||pe.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=pe.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=pe.activeChain;if(e&&(n=e),!n)return;const r=(s=pe.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=pe.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=pe.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return Ae.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return pe.chains.forEach(e=>{const n=D.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){D.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=D.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));fe.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return pe.chains.forEach(e=>{const n=D.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return pe.activeCaipNetwork},getActiveCaipAddress(){return pe.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=pe.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=D.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());D.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||pe.activeCaipNetwork,r=D.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!pe.activeChain)return!0;const e=D.getRequestedCaipNetworks(pe.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){D.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=gg.caipNetworkIdToNumber((r=pe.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=pe.activeChain;if(!e||!t)return!1;const n=D.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){gt.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=pe.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&vt.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){D.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");pe.activeCaipAddress=void 0,D.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),fe.removeConnectorId(e)},setIsSwitchingNamespace(t){pe.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(pe.chains.forEach(s=>{X.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=pe.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=D.state.chains.get(t))==null?void 0:e.accountState:de.state},getNetworkData(t){var n;const e=t||pe.activeChain;if(e)return(n=D.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=D.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=fe.state.filterByNamespace;return(t?[pe.chains.get(t)]:Array.from(pe.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?D.getRequestedCaipNetworks(t):D.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){pe.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return pe.lastConnectedSIWECaipNetwork}},D=As(DZ),jZ={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},U8=Ae.getBlockchainApiUrl(),Or=Dt({clientId:null,api:new lm({baseUrl:U8,clientId:null}),supportedChains:{http:[],ws:[]}}),ke={state:Or,async get(t){const{st:e,sv:n}=ke.getSdkProperties(),r=se.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Or.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=se.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Or.supportedChains.http.length||await ke.getSupportedNetworks()}catch{return!1}return Or.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await ke.get({path:"v1/supported-chains"});return Or.supportedChains=t,t}catch{return Or.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await ke.isNetworkSupported(e))return{avatar:"",name:""};const r=he.getIdentityFromCacheForAddress(t);if(r)return r;const s=await ke.get({path:`/v1/identity/${t}`,params:{sender:D.state.activeCaipAddress?Ae.getPlainAddress(D.state.activeCaipAddress):void 0}});return he.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await ke.isNetworkSupported((a=D.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?ke.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await ke.isNetworkSupported((o=D.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?ke.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await ke.isNetworkSupported((n=D.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?ke.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await ke.isNetworkSupported((n=D.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Or.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:se.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await ke.isNetworkSupported((r=D.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?ke.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=ke.getSdkProperties();if(!await ke.isNetworkSupported((s=D.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return ke.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await ke.isNetworkSupported((o=D.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Or.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:vt.CONVERT_SLIPPAGE_TOLERANCE},projectId:se.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=ke.getSdkProperties();if(!await ke.isNetworkSupported((o=D.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return ke.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=ke.getSdkProperties();if(!await ke.isNetworkSupported((l=D.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return wi.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=he.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await ke.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return he.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await ke.isNetworkSupported((n=D.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?ke.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await ke.isNetworkSupported((n=D.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?ke.get({path:`/v1/profile/reverse/${t}`,params:{sender:de.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await ke.isNetworkSupported((n=D.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?ke.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await ke.isNetworkSupported((i=D.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Or.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await ke.isNetworkSupported((a=D.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Or.api.post({path:"/v1/generators/onrampurl",params:{projectId:se.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await ke.isNetworkSupported((e=D.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await ke.get({path:"/v1/onramp/options"})}catch{return jZ}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await ke.isNetworkSupported((s=D.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Or.api.post({path:"/v1/onramp/quote",params:{projectId:se.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await ke.isNetworkSupported((n=D.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?ke.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await ke.isNetworkSupported((s=D.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Or.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:se.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Or.clientId=t,Or.api=new lm({baseUrl:U8,clientId:t})}},O1={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Nh(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},kA={async getMyTokensWithBalance(t){const e=de.state.address,n=D.state.activeCaipNetwork,r=fe.getConnectorId("eip155")===X.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=he.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace==="eip155"&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await ke.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=O1.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await _e.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await _e.walletGetAssets({account:t,chainFilter:[s]});if(!O1.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>O1.createBalance(l,e.caipNetworkId));return he.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},Ts=Dt({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),UZ={state:Ts,replaceState(t){t&&Object.assign(Ts,su(t))},subscribe(t){return D.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return D.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){D.setAccountProp("status",t,e)},getCaipAddress(t){return D.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?Ae.getPlainAddress(t):void 0;e===D.state.activeChain&&(D.state.activeCaipAddress=t),D.setAccountProp("caipAddress",t,e),D.setAccountProp("address",n,e)},setBalance(t,e,n){D.setAccountProp("balance",t,n),D.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){D.setAccountProp("profileName",t,e)},setProfileImage(t,e){D.setAccountProp("profileImage",t,e)},setUser(t,e){D.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){D.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){D.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){D.setAccountProp("currentTab",t,D.state.activeChain)},setTokenBalance(t,e){t&&D.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){D.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){D.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=D.getAccountProp("addressLabels",n)||new Map;r.set(t,e),D.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=D.getAccountProp("addressLabels",e)||new Map;n.delete(t),D.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){D.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){D.setAccountProp("preferredAccountTypes",{...Ts.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){Ts.preferredAccountTypes=t},setSocialProvider(t,e){t&&D.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){D.setAccountProp("socialWindow",t?su(t):void 0,e)},setFarcasterUrl(t,e){D.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Ts.balanceLoading=!0;const e=(i=D.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=D.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=D.state.activeCaipAddress,s=r?Ae.getPlainAddress(r):void 0;if(Ts.lastRetry&&!Ae.isAllowedRetry(Ts.lastRetry,30*vt.ONE_SEC_MS))return Ts.balanceLoading=!1,[];try{if(s&&e&&n){const a=await kA.getMyTokensWithBalance();return de.setTokenBalance(a,n),Ts.lastRetry=void 0,Ts.balanceLoading=!1,a}}catch(a){Ts.lastRetry=Date.now(),t==null||t(a),wi.showError("Token Balance Unavailable")}finally{Ts.balanceLoading=!1}return[]},resetAccount(t){D.resetAccount(t)}},de=As(UZ),LZ={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=D.state.activeCaipNetwork,r=Re.state.data;if(t.id===(n==null?void 0:n.id))return;const i=de.getCaipAddress(D.state.activeChain),o=t.chainNamespace!==D.state.activeChain,a=de.getCaipAddress(t.chainNamespace),l=fe.getConnectorId(D.state.activeChain)===X.CONNECTOR_ID.AUTH,u=X.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Re.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Re.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Re.push("SwitchNetwork",{...r,network:t})}},Rr=Dt({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),MZ={state:Rr,subscribe(t){return Kn(Rr,()=>t(Rr))},subscribeKey(t,e){return Yn(Rr,t,e)},async open(t){var o,a;const e=de.state.status==="connected",n=t==null?void 0:t.namespace,r=D.state.activeChain,s=n&&n!==r,i=(o=D.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(_e.state.wcBasic?Ie.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Ie.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),fe.setFilterByNamespace(t==null?void 0:t.namespace),gt.setLoading(!0,n),n&&s){const c=((a=D.getNetworkData(n))==null?void 0:a.caipNetwork)||D.getRequestedCaipNetworks(n)[0];c&&LZ.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=D.state.noAdapters;se.state.manualWCControl||c&&!i?Ae.isMobile()?Re.reset("AllWallets"):Re.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Re.reset(t.view,t.data):i?Re.reset("Account"):Re.reset("Connect")}Rr.open=!0,io.set({open:!0}),bt.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=se.state.enableEmbedded,e=!!D.state.activeCaipAddress;Rr.open&&bt.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Rr.open=!1,Re.reset("Connect"),gt.clearLoading(),t?e?Re.replace("Account"):Re.push("Connect"):io.set({open:!1}),_e.resetUri()},setLoading(t,e){e&&Rr.loadingNamespaceMap.set(e,t),Rr.loading=t,io.set({loading:t})},clearLoading(){Rr.loadingNamespaceMap.clear(),Rr.loading=!1},shake(){Rr.shake||(Rr.shake=!0,setTimeout(()=>{Rr.shake=!1},500))}},gt=As(MZ),ip={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},OC={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},BZ={providers:R8,selectedProvider:null,error:null,purchaseCurrency:ip,paymentCurrency:OC,purchaseCurrencies:[ip],paymentCurrencies:[],quotesLoading:!1},st=Dt(BZ),FZ={state:st,subscribe(t){return Kn(st,()=>t(st))},subscribeKey(t,e){return Yn(st,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=D.state.activeChain===X.CHAIN.SOLANA?"SOL":"USDC",n=de.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",iZ),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",se.state.projectId),st.selectedProvider={...t,url:r.toString()}}else st.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=R8.filter(r=>e.includes(r.name));st.providers=n}else st.providers=[]},setPurchaseCurrency(t){st.purchaseCurrency=t},setPaymentCurrency(t){st.paymentCurrency=t},setPurchaseAmount(t){RC.state.purchaseAmount=t},setPaymentAmount(t){RC.state.paymentAmount=t},async getAvailableCurrencies(){const t=await ke.getOnrampOptions();st.purchaseCurrencies=t.purchaseCurrencies,st.paymentCurrencies=t.paymentCurrencies,st.paymentCurrency=t.paymentCurrencies[0]||OC,st.purchaseCurrency=t.purchaseCurrencies[0]||ip,await Ie.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await Ie.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;st.quotesLoading=!0;try{const n=await ke.getOnrampQuote({purchaseCurrency:st.purchaseCurrency,paymentCurrency:st.paymentCurrency,amount:((t=st.paymentAmount)==null?void 0:t.toString())||"0",network:(e=st.purchaseCurrency)==null?void 0:e.symbol});return st.quotesLoading=!1,st.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return st.error=n.message,st.quotesLoading=!1,null}finally{st.quotesLoading=!1}},resetState(){st.selectedProvider=null,st.error=null,st.purchaseCurrency=ip,st.paymentCurrency=OC,st.purchaseCurrencies=[ip],st.paymentCurrencies=[],st.paymentAmount=void 0,st.purchaseAmount=void 0,st.quotesLoading=!1}},RC=As(FZ),fN=2147483648,zZ={convertEVMChainIdToCoinType(t){if(t>=fN)throw new Error("Invalid chainId");return(fN|t)>>>0}},Ns=Dt({suggestions:[],loading:!1}),qZ={state:Ns,subscribe(t){return Kn(Ns,()=>t(Ns))},subscribeKey(t,e){return Yn(Ns,t,e)},async resolveName(t){var e,n;try{return await ke.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await ke.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Ns.loading=!0,Ns.suggestions=[];const e=await ke.getEnsNameSuggestions(t);return Ns.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Ns.suggestions}catch(e){const n=op.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Ns.loading=!1}},async getNamesForAddress(t){try{if(!D.state.activeCaipNetwork)return[];const n=he.getEnsFromCacheForAddress(t);if(n)return n;const r=await ke.reverseLookupEnsName({address:t});return he.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=op.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=D.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=de.state.address,r=fe.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");Ns.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Re.pushTransactionStack({onCancel(){Re.replace("RegisterAccountName")}});const i=await _e.signMessage(s);Ns.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=zZ.convertEVMChainIdToCoinType(Number(o));await ke.registerEnsName({coinType:a,address:n,signature:i,message:s}),de.setProfileName(t,e.chainNamespace),Re.replace("RegisterAccountNameSuccess")}catch(s){const i=op.parseEnsApiError(s,`Error registering name ${t}`);throw Re.replace("RegisterAccountName"),new Error(i)}finally{Ns.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},op=As(qZ);var OA={exports:{}},Ld=typeof Reflect=="object"?Reflect:null,pN=Ld&&typeof Ld.apply=="function"?Ld.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},dw;Ld&&typeof Ld.ownKeys=="function"?dw=Ld.ownKeys:Object.getOwnPropertySymbols?dw=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:dw=function(e){return Object.getOwnPropertyNames(e)};function WZ(t){console&&console.warn&&console.warn(t)}var L8=Number.isNaN||function(e){return e!==e};function It(){It.init.call(this)}OA.exports=It;OA.exports.once=KZ;It.EventEmitter=It;It.prototype._events=void 0;It.prototype._eventsCount=0;It.prototype._maxListeners=void 0;var gN=10;function Pv(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(It,"defaultMaxListeners",{enumerable:!0,get:function(){return gN},set:function(t){if(typeof t!="number"||t<0||L8(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");gN=t}});It.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};It.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||L8(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function M8(t){return t._maxListeners===void 0?It.defaultMaxListeners:t._maxListeners}It.prototype.getMaxListeners=function(){return M8(this)};It.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")pN(c,this,n);else for(var l=c.length,u=W8(c,l),r=0;r<l;++r)pN(u[r],this,n);return!0};function B8(t,e,n,r){var s,i,o;if(Pv(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=M8(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,WZ(a)}return t}It.prototype.addListener=function(e,n){return B8(this,e,n,!1)};It.prototype.on=It.prototype.addListener;It.prototype.prependListener=function(e,n){return B8(this,e,n,!0)};function HZ(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function F8(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=HZ.bind(r);return s.listener=n,r.wrapFn=s,s}It.prototype.once=function(e,n){return Pv(n),this.on(e,F8(this,e,n)),this};It.prototype.prependOnceListener=function(e,n){return Pv(n),this.prependListener(e,F8(this,e,n)),this};It.prototype.removeListener=function(e,n){var r,s,i,o,a;if(Pv(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():VZ(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};It.prototype.off=It.prototype.removeListener;It.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function z8(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?GZ(s):W8(s,s.length)}It.prototype.listeners=function(e){return z8(this,e,!0)};It.prototype.rawListeners=function(e){return z8(this,e,!1)};It.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):q8.call(t,e)};It.prototype.listenerCount=q8;function q8(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}It.prototype.eventNames=function(){return this._eventsCount>0?dw(this._events):[]};function W8(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function VZ(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function GZ(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function KZ(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}H8(t,e,i,{once:!0}),e!=="error"&&YZ(t,s,{once:!0})})}function YZ(t,e,n){typeof t.on=="function"&&H8(t,"error",e,n)}function H8(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Qs=OA.exports;const RA=gu(Qs);var le={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $C=function(t,e){return $C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},$C(t,e)};function QZ(t,e){$C(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var DC=function(){return DC=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},DC.apply(this,arguments)};function JZ(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function ZZ(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function XZ(t,e){return function(n,r){e(n,r,t)}}function eX(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function tX(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function nX(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function rX(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function sX(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function jC(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function V8(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function iX(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(V8(arguments[e]));return t}function oX(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function yg(t){return this instanceof yg?(this.v=t,this):new yg(t)}function aX(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof yg?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function cX(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:yg(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function lX(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof jC=="function"?jC(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function uX(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function dX(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function hX(t){return t&&t.__esModule?t:{default:t}}function fX(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function pX(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const gX=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return DC},__asyncDelegator:cX,__asyncGenerator:aX,__asyncValues:lX,__await:yg,__awaiter:tX,__classPrivateFieldGet:fX,__classPrivateFieldSet:pX,__createBinding:rX,__decorate:ZZ,__exportStar:sX,__extends:QZ,__generator:nX,__importDefault:hX,__importStar:dX,__makeTemplateObject:uX,__metadata:eX,__param:XZ,__read:V8,__rest:JZ,__spread:iX,__spreadArrays:oX,__values:jC},Symbol.toStringTag,{value:"Module"})),kv=j0(gX);var R1={},uf={},mN;function mX(){if(mN)return uf;mN=1,Object.defineProperty(uf,"__esModule",{value:!0}),uf.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return uf.delay=t,uf}var tl={},$1={},nl={},yN;function yX(){return yN||(yN=1,Object.defineProperty(nl,"__esModule",{value:!0}),nl.ONE_THOUSAND=nl.ONE_HUNDRED=void 0,nl.ONE_HUNDRED=100,nl.ONE_THOUSAND=1e3),nl}var D1={},wN;function wX(){return wN||(wN=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(D1)),D1}var vN;function G8(){return vN||(vN=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=kv;e.__exportStar(yX(),t),e.__exportStar(wX(),t)}($1)),$1}var bN;function vX(){if(bN)return tl;bN=1,Object.defineProperty(tl,"__esModule",{value:!0}),tl.fromMiliseconds=tl.toMiliseconds=void 0;const t=G8();function e(r){return r*t.ONE_THOUSAND}tl.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return tl.fromMiliseconds=n,tl}var _N;function bX(){return _N||(_N=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=kv;e.__exportStar(mX(),t),e.__exportStar(vX(),t)}(R1)),R1}var Mu={},EN;function _X(){if(EN)return Mu;EN=1,Object.defineProperty(Mu,"__esModule",{value:!0}),Mu.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Mu.Watch=t,Mu.default=t,Mu}var j1={},df={},CN;function EX(){if(CN)return df;CN=1,Object.defineProperty(df,"__esModule",{value:!0}),df.IWatch=void 0;class t{}return df.IWatch=t,df}var xN;function CX(){return xN||(xN=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),kv.__exportStar(EX(),t)}(j1)),j1}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=kv;e.__exportStar(bX(),t),e.__exportStar(_X(),t),e.__exportStar(CX(),t),e.__exportStar(G8(),t)})(le);class Cu{}let xX=class extends Cu{constructor(e){super()}};const SN=le.FIVE_SECONDS,xu={pulse:"heartbeat_pulse"};let SX=class K8 extends xX{constructor(e){super(e),this.events=new Qs.EventEmitter,this.interval=SN,this.interval=(e==null?void 0:e.interval)||SN}static async init(e){const n=new K8(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),le.toMiliseconds(this.interval))}pulse(){this.events.emit(xu.pulse)}};const AX=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,IX=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,TX=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function NX(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){PX(t);return}return e}function PX(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function yy(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!TX.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(AX.test(t)||IX.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,NX)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function kX(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function In(t,...e){try{return kX(t(...e))}catch(n){return Promise.reject(n)}}function OX(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function RX(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function hw(t){if(OX(t))return String(t);if(RX(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return hw(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const UC="base64:";function $X(t){return typeof t=="string"?t:UC+UX(t)}function DX(t){return typeof t!="string"||!t.startsWith(UC)?t:jX(t.slice(UC.length))}function jX(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function UX(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Mr(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function LX(...t){return Mr(t.join(":"))}function wy(t){return t=Mr(t),t?t+":":""}function MX(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function BX(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const FX="memory",zX=()=>{const t=new Map;return{name:FX,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function qX(t={}){const e={mounts:{"":t.driver||zX()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=Mr(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await AN(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",y=Mr(g?p:p.key),w=g?void 0:p.value,b=g||!p.options?u:{...u,...p.options},v=n(y);f(v).items.push({key:y,value:w,relativeKey:v.relativeKey,options:b})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=Mr(l);const{relativeKey:d,driver:h}=n(l);return In(h.hasItem,d,u)},getItem(l,u={}){l=Mr(l);const{relativeKey:d,driver:h}=n(l);return In(h.getItem,d,u).then(f=>yy(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?In(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:LX(d.base,f.key),value:yy(f.value)}))):Promise.all(d.items.map(h=>In(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:yy(f)})))))},getItemRaw(l,u={}){l=Mr(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?In(h.getItemRaw,d,u):In(h.getItem,d,u).then(f=>DX(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Mr(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await In(f.setItem,h,hw(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return In(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:hw(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>In(d.driver.setItem,h.relativeKey,hw(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Mr(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await In(f.setItemRaw,h,u,d);else if(f.setItem)await In(f.setItem,h,$X(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Mr(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await In(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await In(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Mr(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await In(h.getMeta,d,u)),!u.nativeOnly){const p=await In(h.getItem,d+"$",u).then(g=>yy(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var y;l=wy(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const w of d){(y=w.driver.flags)!=null&&y.maxDepth||(p=!1);const b=await In(w.driver.getKeys,w.relativeBase,u);for(const v of b){const E=w.mountpoint+Mr(v);h.some(_=>E.startsWith(_))||f.push(E)}h=[w.mountpoint,...h.filter(v=>!v.startsWith(w.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(w=>(!g||MX(w,u.maxDepth))&&BX(w,l))},async clear(l,u={}){l=wy(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return In(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>IN(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=wy(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(AN(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=wy(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await IN(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=Mr(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Mr(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function AN(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function IN(t){typeof t.dispose=="function"&&await In(t.dispose)}function Su(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function Y8(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=Su(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let U1;function um(){return U1||(U1=Y8("keyval-store","keyval")),U1}function TN(t,e=um()){return e("readonly",n=>Su(n.get(t)))}function WX(t,e,n=um()){return n("readwrite",r=>(r.put(e,t),Su(r.transaction)))}function HX(t,e=um()){return e("readwrite",n=>(n.delete(t),Su(n.transaction)))}function VX(t=um()){return t("readwrite",e=>(e.clear(),Su(e.transaction)))}function GX(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Su(t.transaction)}function KX(t=um()){return t("readonly",e=>{if(e.getAllKeys)return Su(e.getAllKeys());const n=[];return GX(e,r=>n.push(r.key)).then(()=>n)})}const YX=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),QX=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function ou(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return QX(t)}catch{return t}}function ra(t){return typeof t=="string"?t:YX(t)||""}const JX="idb-keyval";var ZX=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=Y8(t.dbName,t.storeName)),{name:JX,options:t,async hasItem(s){return!(typeof await TN(n(s),r)>"u")},async getItem(s){return await TN(n(s),r)??null},setItem(s,i){return WX(n(s),i,r)},removeItem(s){return HX(n(s),r)},getKeys(){return KX(r)},clear(){return VX(r)}}};const XX="WALLET_CONNECT_V2_INDEXED_DB",eee="keyvaluestorage";let tee=class{constructor(){this.indexedDb=qX({driver:ZX({dbName:XX,storeName:eee})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,ra(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var L1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fw={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof L1<"u"&&L1.localStorage?fw.exports=L1.localStorage:typeof window<"u"&&window.localStorage?fw.exports=window.localStorage:fw.exports=new e})();function nee(t){var e;return[t[0],ou((e=t[1])!=null?e:"")]}let ree=class{constructor(){this.localStorage=fw.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(nee)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return ou(n)}async setItem(e,n){this.localStorage.setItem(e,ra(n))}async removeItem(e){this.localStorage.removeItem(e)}};const see="wc_storage_version",NN=1,iee=async(t,e,n)=>{const r=see,s=await e.getItem(r);if(s&&s>=NN){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,NN),n(e),oee(t,o)},oee=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let aee=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new ree;this.storage=e;try{const n=new tee;iee(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};function cee(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var lee=uee;function uee(t,e,n){var r=n&&n.stringify||cee,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const PN=lee;var ld=oo;const wg=bee().console||{},dee={mapHttpRequest:vy,mapHttpResponse:vy,wrapRequestSerializer:M1,wrapResponseSerializer:M1,wrapErrorSerializer:M1,req:vy,res:vy,err:mee};function hee(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function oo(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||wg;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=hee(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=vg),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:yee(t)};c.levels=oo.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=vg,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=LC());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,Bu(l,c,"error","log"),Bu(l,c,"fatal","error"),Bu(l,c,"warn","error"),Bu(l,c,"info","log"),Bu(l,c,"debug","log"),Bu(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const y=g.serializers;if(s&&y){var w=Object.assign({},r,y),b=t.browser.serialize===!0?Object.keys(w):s;delete p.serializers,Ov([p],b,w,this._stdErrSerialize)}function v(E){this._childLevel=(E._childLevel|0)+1,this.error=Fu(E,p,"error"),this.fatal=Fu(E,p,"fatal"),this.warn=Fu(E,p,"warn"),this.info=Fu(E,p,"info"),this.debug=Fu(E,p,"debug"),this.trace=Fu(E,p,"trace"),w&&(this.serializers=w,this._serialize=b),e&&(this._logEvent=LC([].concat(E._logEvent.bindings,p)))}return v.prototype=this,new v(this)}return c}oo.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};oo.stdSerializers=dee;oo.stdTimeFunctions=Object.assign({},{nullTime:Q8,epochTime:J8,unixTime:wee,isoTime:vee});function Bu(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?vg:s[n]?s[n]:wg[n]||wg[r]||vg,fee(t,e,n)}function fee(t,e,n){!t.transmit&&e[n]===vg||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===wg?wg:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&Ov(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,pee(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=oo.levels.values[l],d=oo.levels.values[n];if(d<u)return;gee(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:oo.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function pee(t,e,n,r){t._serialize&&Ov(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=oo.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?PN(s.shift(),s):void 0}else typeof i=="string"&&(i=PN(s.shift(),s));return i!==void 0&&(o.msg=i),o}function Ov(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=oo.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Fu(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function gee(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;Ov(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=LC(c)}function LC(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function mee(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function yee(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?Q8:J8}function vy(){return{}}function M1(t){return t}function vg(){}function Q8(){return!1}function J8(){return Date.now()}function wee(){return Math.round(Date.now()/1e3)}function vee(){return new Date(Date.now()).toISOString()}function bee(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const dm=gu(ld),_ee={level:"info"},hm="custom_context",$A=1e3*1024;let Eee=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},kN=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new Eee(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},Z8=class{constructor(e,n=$A){this.level=e??"error",this.levelValue=ld.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new kN(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===ld.levels.values.error?console.error(e):n===ld.levels.values.warn?console.warn(e):n===ld.levels.values.debug?console.debug(e):n===ld.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(ra({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new kN(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(ra({extraMetadata:e})),new Blob(n,{type:"application/json"})}},Cee=class{constructor(e,n=$A){this.baseChunkLogger=new Z8(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},xee=class{constructor(e,n=$A){this.baseChunkLogger=new Z8(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var See=Object.defineProperty,Aee=Object.defineProperties,Iee=Object.getOwnPropertyDescriptors,ON=Object.getOwnPropertySymbols,Tee=Object.prototype.hasOwnProperty,Nee=Object.prototype.propertyIsEnumerable,RN=(t,e,n)=>e in t?See(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,l0=(t,e)=>{for(var n in e||(e={}))Tee.call(e,n)&&RN(t,n,e[n]);if(ON)for(var n of ON(e))Nee.call(e,n)&&RN(t,n,e[n]);return t},u0=(t,e)=>Aee(t,Iee(e));function $h(t){return u0(l0({},t),{level:(t==null?void 0:t.level)||_ee.level})}function Pee(t,e=hm){return t[e]||""}function kee(t,e,n=hm){return t[n]=e,t}function rs(t,e=hm){let n="";return typeof t.bindings>"u"?n=Pee(t,e):n=t.bindings().context||"",n}function Oee(t,e,n=hm){const r=rs(t,n);return r.trim()?`${r}/${e}`:e}function pr(t,e,n=hm){const r=Oee(t,e,n),s=t.child({context:r});return kee(s,r,n)}function Ree(t){var e,n;const r=new Cee((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:dm(u0(l0({},t.opts),{level:"trace",browser:u0(l0({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function $ee(t){var e;const n=new xee((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:dm(u0(l0({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function DA(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Ree(t):$ee(t)}var Dee=Object.defineProperty,jee=(t,e,n)=>e in t?Dee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$N=(t,e,n)=>jee(t,typeof e!="symbol"?e+"":e,n);let Uee=class extends Cu{constructor(e){super(),this.opts=e,$N(this,"protocol","wc"),$N(this,"version",2)}};var Lee=Object.defineProperty,Mee=(t,e,n)=>e in t?Lee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bee=(t,e,n)=>Mee(t,e+"",n);let Fee=class extends Cu{constructor(e,n){super(),this.core=e,this.logger=n,Bee(this,"records",new Map)}},zee=class{constructor(e,n){this.logger=e,this.core=n}},qee=class extends Cu{constructor(e,n){super(),this.relayer=e,this.logger=n}},Wee=class extends Cu{constructor(e){super()}},Hee=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},Vee=class extends Cu{constructor(e,n){super(),this.relayer=e,this.logger=n}},Gee=class extends Cu{constructor(e,n){super(),this.core=e,this.logger=n}},Kee=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},Yee=class{constructor(e,n){this.projectId=e,this.logger=n}},Qee=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var Jee=Object.defineProperty,Zee=(t,e,n)=>e in t?Jee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,DN=(t,e,n)=>Zee(t,typeof e!="symbol"?e+"":e,n);let Xee=class{constructor(e){this.opts=e,DN(this,"protocol","wc"),DN(this,"version",2)}},ete=class{constructor(e){this.client=e}};function tte(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function X8(t,...e){if(!tte(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function jN(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function nte(t,e){X8(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const zu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const B1=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function rte(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function e6(t){return typeof t=="string"&&(t=rte(t)),X8(t),t}let ste=class{clone(){return this._cloneInto()}};function ite(t){const e=r=>t().update(e6(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function t6(t=32){if(zu&&typeof zu.getRandomValues=="function")return zu.getRandomValues(new Uint8Array(t));if(zu&&typeof zu.randomBytes=="function")return zu.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function ote(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let ate=class extends ste{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=B1(this.buffer)}update(e){jN(this);const{view:n,buffer:r,blockLen:s}=this;e=e6(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=B1(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){jN(this),nte(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;ote(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=B1(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const by=BigInt(2**32-1),MC=BigInt(32);function n6(t,e=!1){return e?{h:Number(t&by),l:Number(t>>MC&by)}:{h:Number(t>>MC&by)|0,l:Number(t&by)|0}}function cte(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=n6(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const lte=(t,e)=>BigInt(t>>>0)<<MC|BigInt(e>>>0),ute=(t,e,n)=>t>>>n,dte=(t,e,n)=>t<<32-n|e>>>n,hte=(t,e,n)=>t>>>n|e<<32-n,fte=(t,e,n)=>t<<32-n|e>>>n,pte=(t,e,n)=>t<<64-n|e>>>n-32,gte=(t,e,n)=>t>>>n-32|e<<64-n,mte=(t,e)=>e,yte=(t,e)=>t,wte=(t,e,n)=>t<<n|e>>>32-n,vte=(t,e,n)=>e<<n|t>>>32-n,bte=(t,e,n)=>e<<n-32|t>>>64-n,_te=(t,e,n)=>t<<n-32|e>>>64-n;function Ete(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const Cte=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),xte=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Ste=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Ate=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,Ite=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),Tte=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Ye={fromBig:n6,split:cte,toBig:lte,shrSH:ute,shrSL:dte,rotrSH:hte,rotrSL:fte,rotrBH:pte,rotrBL:gte,rotr32H:mte,rotr32L:yte,rotlSH:wte,rotlSL:vte,rotlBH:bte,rotlBL:_te,add:Ete,add3L:Cte,add3H:xte,add4L:Ste,add4H:Ate,add5H:Tte,add5L:Ite},[Nte,Pte]=Ye.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),_a=new Uint32Array(80),Ea=new Uint32Array(80);let kte=class extends ate{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let v=0;v<16;v++,n+=4)_a[v]=e.getUint32(n),Ea[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const E=_a[v-15]|0,_=Ea[v-15]|0,x=Ye.rotrSH(E,_,1)^Ye.rotrSH(E,_,8)^Ye.shrSH(E,_,7),S=Ye.rotrSL(E,_,1)^Ye.rotrSL(E,_,8)^Ye.shrSL(E,_,7),N=_a[v-2]|0,C=Ea[v-2]|0,O=Ye.rotrSH(N,C,19)^Ye.rotrBH(N,C,61)^Ye.shrSH(N,C,6),R=Ye.rotrSL(N,C,19)^Ye.rotrBL(N,C,61)^Ye.shrSL(N,C,6),B=Ye.add4L(S,R,Ea[v-7],Ea[v-16]),H=Ye.add4H(B,x,O,_a[v-7],_a[v-16]);_a[v]=H|0,Ea[v]=B|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:y,Hh:w,Hl:b}=this;for(let v=0;v<80;v++){const E=Ye.rotrSH(d,h,14)^Ye.rotrSH(d,h,18)^Ye.rotrBH(d,h,41),_=Ye.rotrSL(d,h,14)^Ye.rotrSL(d,h,18)^Ye.rotrBL(d,h,41),x=d&f^~d&g,S=h&p^~h&y,N=Ye.add5L(b,_,S,Pte[v],Ea[v]),C=Ye.add5H(N,w,E,x,Nte[v],_a[v]),O=N|0,R=Ye.rotrSH(r,s,28)^Ye.rotrBH(r,s,34)^Ye.rotrBH(r,s,39),B=Ye.rotrSL(r,s,28)^Ye.rotrBL(r,s,34)^Ye.rotrBL(r,s,39),H=r&i^r&a^i&a,F=s&o^s&c^o&c;w=g|0,b=y|0,g=f|0,y=p|0,f=d|0,p=h|0,{h:d,l:h}=Ye.add(l|0,u|0,C|0,O|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const A=Ye.add3L(O,B,F);r=Ye.add3H(A,C,R,H),s=A|0}({h:r,l:s}=Ye.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Ye.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Ye.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Ye.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Ye.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Ye.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=Ye.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:w,l:b}=Ye.add(this.Hh|0,this.Hl|0,w|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,y,w,b)}roundClean(){_a.fill(0),Ea.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const Ote=ite(()=>new kte);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jA=BigInt(0),r6=BigInt(1),Rte=BigInt(2);function UA(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function LA(t){if(!UA(t))throw new Error("Uint8Array expected")}function F1(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const $te=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function MA(t){LA(t);let e="";for(let n=0;n<t.length;n++)e+=$te[t[n]];return e}function s6(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?jA:BigInt("0x"+t)}const Eo={_0:48,_9:57,A:65,F:70,a:97,f:102};function UN(t){if(t>=Eo._0&&t<=Eo._9)return t-Eo._0;if(t>=Eo.A&&t<=Eo.F)return t-(Eo.A-10);if(t>=Eo.a&&t<=Eo.f)return t-(Eo.a-10)}function i6(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=UN(t.charCodeAt(i)),a=UN(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Dte(t){return s6(MA(t))}function pw(t){return LA(t),s6(MA(Uint8Array.from(t).reverse()))}function o6(t,e){return i6(t.toString(16).padStart(e*2,"0"))}function BC(t,e){return o6(t,e).reverse()}function Co(t,e,n){let r;if(typeof e=="string")try{r=i6(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(UA(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function LN(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];LA(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const z1=t=>typeof t=="bigint"&&jA<=t;function jte(t,e,n){return z1(t)&&z1(e)&&z1(n)&&e<=t&&t<n}function hf(t,e,n,r){if(!jte(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Ute(t){let e;for(e=0;t>jA;t>>=r6,e+=1);return e}const Lte=t=>(Rte<<BigInt(t-1))-r6,Mte={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||UA(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function BA(t,e,n={}){const r=(s,i,o)=>{const a=Mte[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function MN(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const On=BigInt(0),cn=BigInt(1),gl=BigInt(2),Bte=BigInt(3),FC=BigInt(4),BN=BigInt(5),FN=BigInt(8);function _n(t,e){const n=t%e;return n>=On?n:e+n}function Fte(t,e,n){if(e<On)throw new Error("invalid exponent, negatives unsupported");if(n<=On)throw new Error("invalid modulus");if(n===cn)return On;let r=cn;for(;e>On;)e&cn&&(r=r*t%n),t=t*t%n,e>>=cn;return r}function Ui(t,e,n){let r=t;for(;e-- >On;)r*=r,r%=n;return r}function zN(t,e){if(t===On)throw new Error("invert: expected non-zero number");if(e<=On)throw new Error("invert: expected positive modulus, got "+e);let n=_n(t,e),r=e,s=On,i=cn;for(;n!==On;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==cn)throw new Error("invert: does not exist");return _n(s,e)}function zte(t){const e=(t-cn)/gl;let n,r,s;for(n=t-cn,r=0;n%gl===On;n/=gl,r++);for(s=gl;s<t&&Fte(s,e,t)!==t-cn;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+cn)/FC;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+cn)/gl;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,cn<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function qte(t){if(t%FC===Bte){const e=(t+cn)/FC;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%FN===BN){const e=(t-BN)/FN;return function(n,r){const s=n.mul(r,gl),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,gl),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return zte(t)}const Wte=(t,e)=>(_n(t,e)&cn)===cn,Hte=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Vte(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Hte.reduce((r,s)=>(r[s]="function",r),e);return BA(t,n)}function Gte(t,e,n){if(n<On)throw new Error("invalid exponent, negatives unsupported");if(n===On)return t.ONE;if(n===cn)return e;let r=t.ONE,s=e;for(;n>On;)n&cn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=cn;return r}function Kte(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function a6(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function c6(t,e,n=!1,r={}){if(t<=On)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=a6(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:Lte(s),ZERO:On,ONE:cn,create:c=>_n(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return On<=c&&c<t},is0:c=>c===On,isOdd:c=>(c&cn)===cn,neg:c=>_n(-c,t),eql:(c,l)=>c===l,sqr:c=>_n(c*c,t),add:(c,l)=>_n(c+l,t),sub:(c,l)=>_n(c-l,t),mul:(c,l)=>_n(c*l,t),pow:(c,l)=>Gte(a,c,l),div:(c,l)=>_n(c*zN(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>zN(c,t),sqrt:r.sqrt||(c=>(o||(o=qte(t)),o(a,c))),invertBatch:c=>Kte(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?BC(c,i):o6(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?pw(c):Dte(c)}});return Object.freeze(a)}const qN=BigInt(0),_y=BigInt(1);function q1(t,e){const n=e.negate();return t?n:e}function l6(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function W1(t,e){l6(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function Yte(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Qte(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const H1=new WeakMap,u6=new WeakMap;function V1(t){return u6.get(t)||1}function Jte(t,e){return{constTimeNegate:q1,hasPrecomputes(n){return V1(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>qN;)r&_y&&(s=s.add(i)),i=i.double(),r>>=_y;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=W1(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=W1(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=_y);const g=f,y=f+Math.abs(p)-1,w=h%2!==0,b=p<0;p===0?c=c.add(q1(w,r[g])):a=a.add(q1(b,r[y]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=W1(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===qN)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=_y),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=H1.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&H1.set(r,s(i))),i},wNAFCached(n,r,s){const i=V1(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=V1(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){l6(r,e),u6.set(n,r),H1.delete(n)}}}function Zte(t,e,n,r){if(Yte(n,t),Qte(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=Ute(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function Xte(t){return Vte(t.Fp),BA(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...a6(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const ti=BigInt(0),$r=BigInt(1),Ey=BigInt(2),ene=BigInt(8),tne={zip215:!0};function nne(t){const e=Xte(t);return BA(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function rne(t){const e=nne(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=Ey<<BigInt(a*8)-$r,u=n.create,d=c6(e.n,e.nBitLength),h=e.uvRatio||((A,I)=>{try{return{isValid:!0,value:n.sqrt(A*n.inv(I))}}catch{return{isValid:!1,value:ti}}}),f=e.adjustScalarBytes||(A=>A),p=e.domain||((A,I,U)=>{if(F1("phflag",U),I.length||U)throw new Error("Contexts/pre-hash are not supported");return A});function g(A,I){hf("coordinate "+A,I,ti,l)}function y(A){if(!(A instanceof v))throw new Error("ExtendedPoint expected")}const w=MN((A,I)=>{const{ex:U,ey:T,ez:k}=A,L=A.is0();I==null&&(I=L?ene:n.inv(k));const W=u(U*I),K=u(T*I),Z=u(k*I);if(L)return{x:ti,y:$r};if(Z!==$r)throw new Error("invZ was invalid");return{x:W,y:K}}),b=MN(A=>{const{a:I,d:U}=e;if(A.is0())throw new Error("bad point: ZERO");const{ex:T,ey:k,ez:L,et:W}=A,K=u(T*T),Z=u(k*k),Q=u(L*L),te=u(Q*Q),oe=u(K*I),me=u(Q*u(oe+Z)),je=u(te+u(U*u(K*Z)));if(me!==je)throw new Error("bad point: equation left != right (1)");const Oe=u(T*k),Le=u(L*W);if(Oe!==Le)throw new Error("bad point: equation left != right (2)");return!0});class v{constructor(I,U,T,k){this.ex=I,this.ey=U,this.ez=T,this.et=k,g("x",I),g("y",U),g("z",T),g("t",k),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(I){if(I instanceof v)throw new Error("extended point not allowed");const{x:U,y:T}=I||{};return g("x",U),g("y",T),new v(U,T,$r,u(U*T))}static normalizeZ(I){const U=n.invertBatch(I.map(T=>T.ez));return I.map((T,k)=>T.toAffine(U[k])).map(v.fromAffine)}static msm(I,U){return Zte(v,d,I,U)}_setWindowSize(I){x.setWindowSize(this,I)}assertValidity(){b(this)}equals(I){y(I);const{ex:U,ey:T,ez:k}=this,{ex:L,ey:W,ez:K}=I,Z=u(U*K),Q=u(L*k),te=u(T*K),oe=u(W*k);return Z===Q&&te===oe}is0(){return this.equals(v.ZERO)}negate(){return new v(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:I}=e,{ex:U,ey:T,ez:k}=this,L=u(U*U),W=u(T*T),K=u(Ey*u(k*k)),Z=u(I*L),Q=U+T,te=u(u(Q*Q)-L-W),oe=Z+W,me=oe-K,je=Z-W,Oe=u(te*me),Le=u(oe*je),Je=u(te*je),zt=u(me*oe);return new v(Oe,Le,zt,Je)}add(I){y(I);const{a:U,d:T}=e,{ex:k,ey:L,ez:W,et:K}=this,{ex:Z,ey:Q,ez:te,et:oe}=I;if(U===BigInt(-1)){const jt=u((L-k)*(Q+Z)),Vt=u((L+k)*(Q-Z)),jn=u(Vt-jt);if(jn===ti)return this.double();const Oi=u(W*Ey*oe),Xs=u(K*Ey*te),is=Xs+Oi,Xt=Vt+jt,Xn=Xs-Oi,mo=u(is*jn),Qc=u(Xt*Xn),Ri=u(is*Xn),Jc=u(jn*Xt);return new v(mo,Qc,Jc,Ri)}const me=u(k*Z),je=u(L*Q),Oe=u(K*T*oe),Le=u(W*te),Je=u((k+L)*(Z+Q)-me-je),zt=Le-Oe,Fe=Le+Oe,ze=u(je-U*me),qt=u(Je*zt),Tt=u(Fe*ze),xn=u(Je*ze),ss=u(zt*Fe);return new v(qt,Tt,ss,xn)}subtract(I){return this.add(I.negate())}wNAF(I){return x.wNAFCached(this,I,v.normalizeZ)}multiply(I){const U=I;hf("scalar",U,$r,r);const{p:T,f:k}=this.wNAF(U);return v.normalizeZ([T,k])[0]}multiplyUnsafe(I,U=v.ZERO){const T=I;return hf("scalar",T,ti,r),T===ti?_:this.is0()||T===$r?this:x.wNAFCachedUnsafe(this,T,v.normalizeZ,U)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return x.unsafeLadder(this,r).is0()}toAffine(I){return w(this,I)}clearCofactor(){const{h:I}=e;return I===$r?this:this.multiplyUnsafe(I)}static fromHex(I,U=!1){const{d:T,a:k}=e,L=n.BYTES;I=Co("pointHex",I,L),F1("zip215",U);const W=I.slice(),K=I[L-1];W[L-1]=K&-129;const Z=pw(W),Q=U?l:n.ORDER;hf("pointHex.y",Z,ti,Q);const te=u(Z*Z),oe=u(te-$r),me=u(T*te-k);let{isValid:je,value:Oe}=h(oe,me);if(!je)throw new Error("Point.fromHex: invalid y coordinate");const Le=(Oe&$r)===$r,Je=(K&128)!==0;if(!U&&Oe===ti&&Je)throw new Error("Point.fromHex: x=0 and x_0=1");return Je!==Le&&(Oe=u(-Oe)),v.fromAffine({x:Oe,y:Z})}static fromPrivateKey(I){return C(I).point}toRawBytes(){const{x:I,y:U}=this.toAffine(),T=BC(U,n.BYTES);return T[T.length-1]|=I&$r?128:0,T}toHex(){return MA(this.toRawBytes())}}v.BASE=new v(e.Gx,e.Gy,$r,u(e.Gx*e.Gy)),v.ZERO=new v(ti,$r,$r,ti);const{BASE:E,ZERO:_}=v,x=Jte(v,a*8);function S(A){return _n(A,r)}function N(A){return S(pw(A))}function C(A){const I=n.BYTES;A=Co("private key",A,I);const U=Co("hashed private key",i(A),2*I),T=f(U.slice(0,I)),k=U.slice(I,2*I),L=N(T),W=E.multiply(L),K=W.toRawBytes();return{head:T,prefix:k,scalar:L,point:W,pointBytes:K}}function O(A){return C(A).pointBytes}function R(A=new Uint8Array,...I){const U=LN(...I);return N(i(p(U,Co("context",A),!!s)))}function B(A,I,U={}){A=Co("message",A),s&&(A=s(A));const{prefix:T,scalar:k,pointBytes:L}=C(I),W=R(U.context,T,A),K=E.multiply(W).toRawBytes(),Z=R(U.context,K,L,A),Q=S(W+Z*k);hf("signature.s",Q,ti,r);const te=LN(K,BC(Q,n.BYTES));return Co("result",te,n.BYTES*2)}const H=tne;function F(A,I,U,T=H){const{context:k,zip215:L}=T,W=n.BYTES;A=Co("signature",A,2*W),I=Co("message",I),U=Co("publicKey",U,W),L!==void 0&&F1("zip215",L),s&&(I=s(I));const K=pw(A.slice(W,2*W));let Z,Q,te;try{Z=v.fromHex(U,L),Q=v.fromHex(A.slice(0,W),L),te=E.multiplyUnsafe(K)}catch{return!1}if(!L&&Z.isSmallOrder())return!1;const oe=R(k,Q.toRawBytes(),Z.toRawBytes(),I);return Q.add(Z.multiplyUnsafe(oe)).subtract(te).clearCofactor().equals(v.ZERO)}return E._setWindowSize(8),{CURVE:e,getPublicKey:O,sign:B,verify:F,ExtendedPoint:v,utils:{getExtendedPublicKey:C,randomPrivateKey:()=>o(n.BYTES),precompute(A=8,I=v.BASE){return I._setWindowSize(A),I.multiply(BigInt(3)),I}}}}BigInt(0),BigInt(1);const FA=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),WN=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const sne=BigInt(1),HN=BigInt(2);BigInt(3);const ine=BigInt(5),one=BigInt(8);function ane(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=FA,o=t*t%i*t%i,a=Ui(o,HN,i)*o%i,c=Ui(a,sne,i)*t%i,l=Ui(c,ine,i)*c%i,u=Ui(l,e,i)*l%i,d=Ui(u,n,i)*u%i,h=Ui(d,r,i)*d%i,f=Ui(h,s,i)*h%i,p=Ui(f,s,i)*h%i,g=Ui(p,e,i)*l%i;return{pow_p_5_8:Ui(g,HN,i)*t%i,b2:o}}function cne(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function lne(t,e){const n=FA,r=_n(e*e*e,n),s=_n(r*r*e,n),i=ane(t*s).pow_p_5_8;let o=_n(t*r*i,n);const a=_n(e*o*o,n),c=o,l=_n(o*WN,n),u=a===t,d=a===_n(-t,n),h=a===_n(-t*WN,n);return u&&(o=c),(d||h)&&(o=l),Wte(o,n)&&(o=_n(-o,n)),{isValid:u||d,value:o}}const une=c6(FA,void 0,!0),dne={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:une,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:one,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Ote,randomBytes:t6,adjustScalarBytes:cne,uvRatio:lne},d6=rne(dne),hne="EdDSA",fne="JWT",d0=".",Rv="base64url",h6="utf8",f6="utf8",pne=":",gne="did",mne="key",VN="base58btc",yne="z",wne="K36",vne=32;function zA(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function p6(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?zA(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function g6(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=p6(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return zA(n)}function bne(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,w=0,b=p.length;w!==b&&p[w]===0;)w++,g++;for(var v=(b-w)*u+1>>>0,E=new Uint8Array(v);w!==b;){for(var _=p[w],x=0,S=v-1;(_!==0||x<y)&&S!==-1;S--,x++)_+=256*E[S]>>>0,E[S]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");y=x,w++}for(var N=v-y;N!==v&&E[N]===0;)N++;for(var C=c.repeat(g);N<v;++N)C+=t.charAt(E[N]);return C}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,w=0;p[g]===c;)y++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var E=n[p.charCodeAt(g)];if(E===255)return;for(var _=0,x=b-1;(E!==0||_<w)&&x!==-1;x--,_++)E+=a*v[x]>>>0,v[x]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");w=_,g++}if(p[g]!==" "){for(var S=b-w;S!==b&&v[S]===0;)S++;for(var N=new Uint8Array(y+(b-S)),C=y;S!==b;)N[C++]=v[S++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var _ne=bne,Ene=_ne;const m6=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Cne=t=>new TextEncoder().encode(t),xne=t=>new TextDecoder().decode(t);let Sne=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Ane=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return y6(this,e)}},Ine=class{constructor(e){this.decoders=e}or(e){return y6(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const y6=(t,e)=>new Ine({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let Tne=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Sne(e,n,r),this.decoder=new Ane(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const $v=({name:t,prefix:e,encode:n,decode:r})=>new Tne(t,e,n,r),fm=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=Ene(n,e);return $v({prefix:t,name:e,encode:r,decode:i=>m6(s(i))})},Nne=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Pne=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Qn=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>$v({prefix:e,name:t,encode(s){return Pne(s,r,n)},decode(s){return Nne(s,r,n,t)}}),kne=$v({prefix:"\0",name:"identity",encode:t=>xne(t),decode:t=>Cne(t)});var One=Object.freeze({__proto__:null,identity:kne});const Rne=Qn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var $ne=Object.freeze({__proto__:null,base2:Rne});const Dne=Qn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var jne=Object.freeze({__proto__:null,base8:Dne});const Une=fm({prefix:"9",name:"base10",alphabet:"0123456789"});var Lne=Object.freeze({__proto__:null,base10:Une});const Mne=Qn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Bne=Qn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Fne=Object.freeze({__proto__:null,base16:Mne,base16upper:Bne});const zne=Qn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),qne=Qn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Wne=Qn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Hne=Qn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Vne=Qn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Gne=Qn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Kne=Qn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Yne=Qn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Qne=Qn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Jne=Object.freeze({__proto__:null,base32:zne,base32upper:qne,base32pad:Wne,base32padupper:Hne,base32hex:Vne,base32hexupper:Gne,base32hexpad:Kne,base32hexpadupper:Yne,base32z:Qne});const Zne=fm({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Xne=fm({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var ere=Object.freeze({__proto__:null,base36:Zne,base36upper:Xne});const tre=fm({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),nre=fm({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var rre=Object.freeze({__proto__:null,base58btc:tre,base58flickr:nre});const sre=Qn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ire=Qn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ore=Qn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),are=Qn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var cre=Object.freeze({__proto__:null,base64:sre,base64pad:ire,base64url:ore,base64urlpad:are});const w6=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),lre=w6.reduce((t,e,n)=>(t[n]=e,t),[]),ure=w6.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function dre(t){return t.reduce((e,n)=>(e+=lre[n],e),"")}function hre(t){const e=[];for(const n of t){const r=ure[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const fre=$v({prefix:"🚀",name:"base256emoji",encode:dre,decode:hre});var pre=Object.freeze({__proto__:null,base256emoji:fre}),gre=v6,GN=128,mre=-128,yre=Math.pow(2,31);function v6(t,e,n){e=e||[],n=n||0;for(var r=n;t>=yre;)e[n++]=t&255|GN,t/=128;for(;t&mre;)e[n++]=t&255|GN,t>>>=7;return e[n]=t|0,v6.bytes=n-r+1,e}var wre=zC,vre=128,KN=127;function zC(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw zC.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&KN)<<s:(o&KN)*Math.pow(2,s),s+=7}while(o>=vre);return zC.bytes=i-r,n}var bre=Math.pow(2,7),_re=Math.pow(2,14),Ere=Math.pow(2,21),Cre=Math.pow(2,28),xre=Math.pow(2,35),Sre=Math.pow(2,42),Are=Math.pow(2,49),Ire=Math.pow(2,56),Tre=Math.pow(2,63),Nre=function(t){return t<bre?1:t<_re?2:t<Ere?3:t<Cre?4:t<xre?5:t<Sre?6:t<Are?7:t<Ire?8:t<Tre?9:10},Pre={encode:gre,decode:wre,encodingLength:Nre},b6=Pre;const YN=(t,e,n=0)=>(b6.encode(t,e,n),e),QN=t=>b6.encodingLength(t),qC=(t,e)=>{const n=e.byteLength,r=QN(t),s=r+QN(n),i=new Uint8Array(s+n);return YN(t,i,0),YN(n,i,r),i.set(e,s),new kre(t,n,e,i)};let kre=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const _6=({name:t,code:e,encode:n})=>new Ore(t,e,n);let Ore=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?qC(this.code,n):n.then(r=>qC(this.code,r))}else throw Error("Unknown type, must be binary type")}};const E6=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Rre=_6({name:"sha2-256",code:18,encode:E6("SHA-256")}),$re=_6({name:"sha2-512",code:19,encode:E6("SHA-512")});var Dre=Object.freeze({__proto__:null,sha256:Rre,sha512:$re});const C6=0,jre="identity",x6=m6,Ure=t=>qC(C6,x6(t)),Lre={code:C6,name:jre,encode:x6,digest:Ure};var Mre=Object.freeze({__proto__:null,identity:Lre});new TextEncoder,new TextDecoder;const JN={...One,...$ne,...jne,...Lne,...Fne,...Jne,...ere,...rre,...cre,...pre};({...Dre,...Mre});function S6(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const ZN=S6("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),G1=S6("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=p6(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),A6={utf8:ZN,"utf-8":ZN,hex:JN.base16,latin1:G1,ascii:G1,binary:G1,...JN};function Dv(t,e="utf8"){const n=A6[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function Dh(t,e="utf8"){const n=A6[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?zA(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function XN(t){return ou(Dv(Dh(t,Rv),h6))}function h0(t){return Dv(Dh(ra(t),h6),Rv)}function I6(t){const e=Dh(wne,VN),n=yne+Dv(g6([e,t]),VN);return[gne,mne,n].join(pne)}function Bre(t){return Dv(t,Rv)}function Fre(t){return Dh(t,Rv)}function zre(t){return Dh([h0(t.header),h0(t.payload)].join(d0),f6)}function qre(t){return[h0(t.header),h0(t.payload),Bre(t.signature)].join(d0)}function WC(t){const e=t.split(d0),n=XN(e[0]),r=XN(e[1]),s=Fre(e[2]),i=Dh(e.slice(0,2).join(d0),f6);return{header:n,payload:r,signature:s,data:i}}function eP(t=t6(vne)){const e=d6.getPublicKey(t);return{secretKey:g6([t,e]),publicKey:e}}async function Wre(t,e,n,r,s=le.fromMiliseconds(Date.now())){const i={alg:hne,typ:fne},o=I6(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=zre({header:i,payload:c}),u=d6.sign(l,r.secretKey.slice(0,32));return qre({header:i,payload:c,signature:u})}var tP=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},Hre=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),Vre=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),Gre=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),Kre=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Yre=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Qre=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Jre=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,nP=3,Zre=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Qre]],rP=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Xre(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Yre:typeof navigator<"u"?tse(navigator.userAgent):rse()}function ese(t){return t!==""&&Zre.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function tse(t){var e=ese(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new Kre;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<nP&&(s=tP(tP([],s,!0),sse(nP-s.length),!0)):s=[];var i=s.join("."),o=nse(t),a=Jre.exec(t);return a&&a[1]?new Gre(n,i,o,a[1]):new Hre(n,i,o)}function nse(t){for(var e=0,n=rP.length;e<n;e++){var r=rP[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function rse(){var t=typeof process<"u"&&process.version;return t?new Vre(process.version.slice(1)):null}function sse(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Rt={};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.getLocalStorage=Rt.getLocalStorageOrThrow=Rt.getCrypto=Rt.getCryptoOrThrow=T6=Rt.getLocation=Rt.getLocationOrThrow=qA=Rt.getNavigator=Rt.getNavigatorOrThrow=au=Rt.getDocument=Rt.getDocumentOrThrow=Rt.getFromWindowOrThrow=Rt.getFromWindow=void 0;function Au(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Rt.getFromWindow=Au;function jh(t){const e=Au(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Rt.getFromWindowOrThrow=jh;function ise(){return jh("document")}Rt.getDocumentOrThrow=ise;function ose(){return Au("document")}var au=Rt.getDocument=ose;function ase(){return jh("navigator")}Rt.getNavigatorOrThrow=ase;function cse(){return Au("navigator")}var qA=Rt.getNavigator=cse;function lse(){return jh("location")}Rt.getLocationOrThrow=lse;function use(){return Au("location")}var T6=Rt.getLocation=use;function dse(){return jh("crypto")}Rt.getCryptoOrThrow=dse;function hse(){return Au("crypto")}Rt.getCrypto=hse;function fse(){return jh("localStorage")}Rt.getLocalStorageOrThrow=fse;function pse(){return Au("localStorage")}Rt.getLocalStorage=pse;var WA={};Object.defineProperty(WA,"__esModule",{value:!0});var N6=WA.getWindowMetadata=void 0;const sP=Rt;function gse(){let t,e;try{t=sP.getDocumentOrThrow(),e=sP.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const y=p.getAttribute("href");if(y)if(y.toLowerCase().indexOf("https:")===-1&&y.toLowerCase().indexOf("http:")===-1&&y.indexOf("//")!==0){let w=e.protocol+"//"+e.host;if(y.indexOf("/")===0)w+=y;else{const b=e.pathname.split("/");b.pop();const v=b.join("/");w+=v+"/"+y}h.push(w)}else if(y.indexOf("//")===0){const w=e.protocol+y;h.push(w)}else h.push(y)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(y=>p.getAttribute(y)).filter(y=>y?d.includes(y):!1);if(g.length&&g){const y=p.getAttribute("content");if(y)return y}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}N6=WA.getWindowMetadata=gse;function bg(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function HC(t){return bg(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const P6="2.31.0";let ff={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${P6}`};class cu extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof cu?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof cu&&n.cause.docsPath||n.docsPath,i=(a=ff.getDocsUrl)==null?void 0:a.call(ff,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...ff.version?[`Version: ${ff.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=P6}walk(e){return k6(this,e)}}function k6(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?k6(t.cause,e):e?null:t}class O6 extends cu{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function Uh(t,{dir:e,size:n=32}={}){return typeof t=="string"?mse(t,{dir:e,size:n}):yse(t,{dir:e,size:n})}function mse(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new O6({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function yse(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new O6({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class wse extends cu{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class vse extends cu{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Lh(t,{size:e}){if(HC(t)>e)throw new vse({givenSize:HC(t),maxSize:e})}function VC(t,e={}){const{signed:n}=e;e.size&&Lh(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function bse(t,e={}){return Number(VC(t,e))}const _se=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function GC(t,e={}){return typeof t=="number"||typeof t=="bigint"?$6(t,e):typeof t=="string"?xse(t,e):typeof t=="boolean"?Ese(t,e):R6(t,e)}function Ese(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Lh(n,{size:e.size}),Uh(n,{size:e.size})):n}function R6(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=_se[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Lh(r,{size:e.size}),Uh(r,{dir:"right",size:e.size})):r}function $6(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new wse({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Uh(a,{size:r}):a}const Cse=new TextEncoder;function xse(t,e={}){const n=Cse.encode(t);return R6(n,e)}const Sse=new TextEncoder;function Ase(t,e={}){return typeof t=="number"||typeof t=="bigint"?Tse(t,e):typeof t=="boolean"?Ise(t,e):bg(t)?D6(t,e):j6(t,e)}function Ise(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Lh(n,{size:e.size}),Uh(n,{size:e.size})):n}const xo={zero:48,nine:57,A:65,F:70,a:97,f:102};function iP(t){if(t>=xo.zero&&t<=xo.nine)return t-xo.zero;if(t>=xo.A&&t<=xo.F)return t-(xo.A-10);if(t>=xo.a&&t<=xo.f)return t-(xo.a-10)}function D6(t,e={}){let n=t;e.size&&(Lh(n,{size:e.size}),n=Uh(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=iP(r.charCodeAt(a++)),l=iP(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new cu(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function Tse(t,e){const n=$6(t,e);return D6(n)}function j6(t,e={}){const n=Sse.encode(t);return typeof e.size=="number"?(Lh(n,{size:e.size}),Uh(n,{dir:"right",size:e.size})):n}function U6(t,e){const n=e||"hex",r=LS(bg(t,{strict:!1})?Ase(t):t);return n==="bytes"?r:GC(r)}class Nse extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const K1=new Nse(8192);function Pse(t,e){if(K1.has(`${t}.${e}`))return K1.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=U6(j6(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return K1.set(`${t}.${e}`,i),i}function kse(t){const e=U6(`0x${t.substring(4)}`).substring(26);return Pse(`0x${e}`)}async function Ose({hash:t,signature:e}){const n=bg(t)?t:GC(t),{secp256k1:r}=await on(async()=>{const{secp256k1:o}=await import("./secp256k1-CtG9OmCR.js");return{secp256k1:o}},__vite__mapDeps([2,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=oP(f);return new r.Signature(VC(l),VC(u)).addRecoveryBit(p)}const o=bg(e)?e:GC(e);if(HC(o)!==65)throw new Error("invalid signature length");const a=bse(`0x${o.slice(130)}`),c=oP(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function oP(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function Rse({hash:t,signature:e}){return kse(await Ose({hash:t,signature:e}))}function $se(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let b=l[h],v=0;for(let E=p-1;(b!==0||v<d)&&E!==-1;E--,v++)b+=256*g[E]>>>0,g[E]=b%n>>>0,b=b/n>>>0;if(b!==0)throw new Error("Non-zero carry");d=v,h++}let y=p-d;for(;y!==p&&g[y]===0;)y++;let w=r.repeat(u);for(;y<p;++y)w+=t.charAt(g[y]);return w}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const b=l.charCodeAt(u);if(b>255)return;let v=e[b];if(v===255)return;let E=0;for(let _=f-1;(v!==0||E<h)&&_!==-1;_--,E++)v+=n*p[_]>>>0,p[_]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");h=E,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const y=new Uint8Array(d+(f-g));let w=d;for(;g!==f;)y[w++]=p[g++];return y}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var Dse="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Mh=$se(Dse);function jse(t){const e=t.length;let n=0,r=0;for(;r<e;){let s=t.charCodeAt(r++);if(s&4294967168)if(!(s&4294965248))n+=2;else{if(s>=55296&&s<=56319&&r<e){const i=t.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}s&4294901760?n+=4:n+=3}else{n++;continue}}return n}function Use(t,e,n){const r=t.length;let s=n,i=0;for(;i<r;){let o=t.charCodeAt(i++);if(o&4294967168)if(!(o&4294965248))e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){const a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}o&4294901760?(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128):(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128)}else{e[s++]=o;continue}e[s++]=o&63|128}}const Lse=new TextEncoder,Mse=50;function Bse(t,e,n){Lse.encodeInto(t,e.subarray(n))}function Fse(t,e,n){t.length>Mse?Bse(t,e,n):Use(t,e,n)}const zse=4096;function L6(t,e,n){let r=e;const s=r+n,i=[];let o="";for(;r<s;){const a=t[r++];if(!(a&128))i.push(a);else if((a&224)===192){const c=t[r++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){const c=t[r++]&63,l=t[r++]&63;i.push((a&31)<<12|c<<6|l)}else if((a&248)===240){const c=t[r++]&63,l=t[r++]&63,u=t[r++]&63;let d=(a&7)<<18|c<<12|l<<6|u;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=zse&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const qse=new TextDecoder,Wse=200;function Hse(t,e,n){const r=t.subarray(e,e+n);return qse.decode(r)}function Vse(t,e,n){return n>Wse?Hse(t,e,n):L6(t,e,n)}class Cy{constructor(e,n){this.type=e,this.data=n}}class fs extends Error{constructor(e){super(e);const n=Object.create(fs.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:fs.name})}}const pf=4294967295;function Gse(t,e,n){const r=n/4294967296,s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function M6(t,e,n){const r=Math.floor(n/4294967296),s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function B6(t,e){const n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function Kse(t,e){const n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}const Yse=-1,Qse=4294967296-1,Jse=17179869184-1;function Zse({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=Jse)if(e===0&&t<=Qse){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,r=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|n&3),i.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),M6(r,4,t),n}}function Xse(t){const e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function eie(t){if(t instanceof Date){const e=Xse(t);return Zse(e)}else return null}function tie(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),r=e.getUint32(4),s=(n&3)*4294967296+r,i=n>>>2;return{sec:s,nsec:i}}case 12:{const n=B6(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new fs(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function nie(t){const e=tie(t);return new Date(e.sec*1e3+e.nsec/1e6)}const rie={type:Yse,encode:eie,decode:nie};class f0{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(rie)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=-1-r;return new Cy(o,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=r;return new Cy(o,i)}}}return e instanceof Cy?e:null}decode(e,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(e,n,r):new Cy(n,e)}}f0.defaultCodec=new f0;function sie(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function KC(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):sie(t)?new Uint8Array(t):Uint8Array.from(t)}const iie=100,oie=2048;let aie=class F6{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??f0.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??iie,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??oie,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new F6({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=jse(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),Fse(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=KC(e);this.writeU8a(r)}encodeArray(e,n){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,n+1)}countWithoutUndefined(e,n){let r=0;for(const s of n)e[s]!==void 0&&r++;return r}encodeMap(e,n){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),Gse(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),M6(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function cie(t,e){return new aie(e).encodeSharedRef(t)}function Y1(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const lie=16,uie=16;class die{constructor(e=lie,n=uie){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){const s=this.caches[r-1];e:for(const i of s){const o=i.bytes;for(let a=0;a<r;a++)if(o[a]!==e[n+a])continue e;return i.str}return null}store(e,n){const r=this.caches[e.length-1],s={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,n,r){const s=this.find(e,n,r);if(s!=null)return this.hit++,s;this.miss++;const i=L6(e,n,r),o=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(o,i),i}}const YC="array",ap="map_key",z6="map_value",hie=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new fs("The type of key must be string or number but "+typeof t)};class fie{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=YC,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=ap,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===YC){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===ap||e.type===z6){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const gf=-1,HA=new DataView(new ArrayBuffer(0)),pie=new Uint8Array(HA.buffer);try{HA.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const aP=new RangeError("Insufficient data"),gie=new die;let mie=class q6{constructor(e){this.totalPos=0,this.pos=0,this.view=HA,this.bytes=pie,this.headByte=gf,this.stack=new fie,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??f0.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??pf,this.maxBinLength=(e==null?void 0:e.maxBinLength)??pf,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??pf,this.maxMapLength=(e==null?void 0:e.maxMapLength)??pf,this.maxExtLength=(e==null?void 0:e.maxExtLength)??pf,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:gie,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??hie}clone(){return new q6({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=gf,this.stack.reset()}setBuffer(e){const n=KC(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===gf&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),r=KC(e),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(const a of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),n=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${Y1(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,s=-1;for await(const i of e){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=e-160;n=this.decodeString(s,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new fs(`Unrecognized type byte: ${Y1(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===YC)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===ap){if(n==="__proto__")throw new fs("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=z6;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=ap;continue e}}return n}}readHeadByte(){return this.headByte===gf&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=gf}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new fs(`Unrecognized array type byte: ${Y1(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new fs(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new fs(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){var i;if(e>this.maxStrLength)throw new fs(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw aP;const r=this.pos+n;let s;return this.stateIsMapKey()&&((i=this.keyDecoder)!=null&&i.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,r,e):s=Vse(this.bytes,r,e),this.pos+=n+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===ap:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new fs(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw aP;const r=this.pos+n,s=this.bytes.subarray(r,r+e);return this.pos+=n+e,s}decodeExtension(e,n){if(e>this.maxExtLength)throw new fs(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(e,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=Kse(this.view,this.pos);return this.pos+=8,e}readI64(){const e=B6(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function yie(t,e){return new mie(e).decode(t)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function wie(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function W6(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function p0(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function VA(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function QC(t){if(!Array.isArray(t))throw new Error("array expected")}function g0(t,e){if(!W6(!0,e))throw new Error(`${t}: array of strings expected`)}function vie(t,e){if(!W6(!1,e))throw new Error(`${t}: array of numbers expected`)}function bie(...t){const e=i=>i,n=(i,o)=>a=>i(o(a)),r=t.map(i=>i.encode).reduceRight(n,e),s=t.map(i=>i.decode).reduce(n,e);return{encode:r,decode:s}}function _ie(t){const e=typeof t=="string"?t.split(""):t,n=e.length;g0("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(QC(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(QC(s),s.map(i=>{p0("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return o}))}}function Eie(t=""){return p0("join",t),{encode:e=>(g0("join.decode",e),e.join(t)),decode:e=>(p0("join.decode",e),e.split(t))}}function Cie(t,e="="){return VA(t),p0("padding",e),{encode(n){for(g0("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){g0("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const H6=(t,e)=>e===0?t:H6(e,t%e),m0=(t,e)=>t+(e-H6(t,e)),Q1=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function cP(t,e,n,r){if(QC(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(m0(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${m0(e,n)}`);let s=0,i=0;const o=Q1[e],a=Q1[n]-1,c=[];for(const l of t){if(VA(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(s=s<<e|l,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=n;i-=n)c.push((s>>i-n&a)>>>0);const u=Q1[i];if(u===void 0)throw new Error("invalid carry");s&=u-1}if(s=s<<n-i&a,!r&&i>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&c.push(s>>>0),c}function xie(t,e=!1){if(VA(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(m0(8,t)>32||m0(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!wie(n))throw new Error("radix2.encode input should be Uint8Array");return cP(Array.from(n),8,t,!e)},decode:n=>(vie("radix2.decode",n),Uint8Array.from(cP(n,t,8,e)))}}const Sie=bie(xie(5),_ie("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Cie(5),Eie(""));function GA(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function V6(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?GA(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function cp(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=V6(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return GA(n)}function Aie(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,w=0,b=p.length;w!==b&&p[w]===0;)w++,g++;for(var v=(b-w)*u+1>>>0,E=new Uint8Array(v);w!==b;){for(var _=p[w],x=0,S=v-1;(_!==0||x<y)&&S!==-1;S--,x++)_+=256*E[S]>>>0,E[S]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");y=x,w++}for(var N=v-y;N!==v&&E[N]===0;)N++;for(var C=c.repeat(g);N<v;++N)C+=t.charAt(E[N]);return C}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,w=0;p[g]===c;)y++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var E=n[p.charCodeAt(g)];if(E===255)return;for(var _=0,x=b-1;(E!==0||_<w)&&x!==-1;x--,_++)E+=a*v[x]>>>0,v[x]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");w=_,g++}if(p[g]!==" "){for(var S=b-w;S!==b&&v[S]===0;)S++;for(var N=new Uint8Array(y+(b-S)),C=y;S!==b;)N[C++]=v[S++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Iie=Aie,Tie=Iie;const Nie=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Pie=t=>new TextEncoder().encode(t),kie=t=>new TextDecoder().decode(t);class Oie{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Rie{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return G6(this,e)}}class $ie{constructor(e){this.decoders=e}or(e){return G6(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const G6=(t,e)=>new $ie({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Die{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Oie(e,n,r),this.decoder=new Rie(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const jv=({name:t,prefix:e,encode:n,decode:r})=>new Die(t,e,n,r),pm=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=Tie(n,e);return jv({prefix:t,name:e,encode:r,decode:i=>Nie(s(i))})},jie=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Uie=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Jn=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>jv({prefix:e,name:t,encode(s){return Uie(s,r,n)},decode(s){return jie(s,r,n,t)}}),Lie=jv({prefix:"\0",name:"identity",encode:t=>kie(t),decode:t=>Pie(t)}),Mie=Object.freeze(Object.defineProperty({__proto__:null,identity:Lie},Symbol.toStringTag,{value:"Module"})),Bie=Jn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Fie=Object.freeze(Object.defineProperty({__proto__:null,base2:Bie},Symbol.toStringTag,{value:"Module"})),zie=Jn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),qie=Object.freeze(Object.defineProperty({__proto__:null,base8:zie},Symbol.toStringTag,{value:"Module"})),Wie=pm({prefix:"9",name:"base10",alphabet:"0123456789"}),Hie=Object.freeze(Object.defineProperty({__proto__:null,base10:Wie},Symbol.toStringTag,{value:"Module"})),Vie=Jn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Gie=Jn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Kie=Object.freeze(Object.defineProperty({__proto__:null,base16:Vie,base16upper:Gie},Symbol.toStringTag,{value:"Module"})),Yie=Jn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Qie=Jn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Jie=Jn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Zie=Jn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Xie=Jn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),eoe=Jn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),toe=Jn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),noe=Jn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),roe=Jn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),soe=Object.freeze(Object.defineProperty({__proto__:null,base32:Yie,base32hex:Xie,base32hexpad:toe,base32hexpadupper:noe,base32hexupper:eoe,base32pad:Jie,base32padupper:Zie,base32upper:Qie,base32z:roe},Symbol.toStringTag,{value:"Module"})),ioe=pm({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ooe=pm({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),aoe=Object.freeze(Object.defineProperty({__proto__:null,base36:ioe,base36upper:ooe},Symbol.toStringTag,{value:"Module"})),coe=pm({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),loe=pm({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),uoe=Object.freeze(Object.defineProperty({__proto__:null,base58btc:coe,base58flickr:loe},Symbol.toStringTag,{value:"Module"})),doe=Jn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),hoe=Jn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),foe=Jn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),poe=Jn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),goe=Object.freeze(Object.defineProperty({__proto__:null,base64:doe,base64pad:hoe,base64url:foe,base64urlpad:poe},Symbol.toStringTag,{value:"Module"})),K6=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),moe=K6.reduce((t,e,n)=>(t[n]=e,t),[]),yoe=K6.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function woe(t){return t.reduce((e,n)=>(e+=moe[n],e),"")}function voe(t){const e=[];for(const n of t){const r=yoe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const boe=jv({prefix:"🚀",name:"base256emoji",encode:woe,decode:voe}),_oe=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:boe},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const lP={...Mie,...Fie,...qie,...Hie,...Kie,...soe,...aoe,...uoe,...goe,..._oe};function Y6(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const uP=Y6("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),J1=Y6("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=V6(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),Q6={utf8:uP,"utf-8":uP,hex:lP.base16,latin1:J1,ascii:J1,binary:J1,...lP};function zs(t,e="utf8"){const n=Q6[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?GA(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function ts(t,e="utf8"){const n=Q6[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const Eoe={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},Coe="Input must be an string, Buffer or Uint8Array";function xoe(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(Coe);return e}function Soe(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function xy(t){return(4294967296+t).toString(16).substring(1)}function Aoe(t,e,n){let r=`
`+t+" = ";for(let s=0;s<e.length;s+=2){if(n===32)r+=xy(e[s]).toUpperCase(),r+=" ",r+=xy(e[s+1]).toUpperCase();else if(n===64)r+=xy(e[s+1]).toUpperCase(),r+=xy(e[s]).toUpperCase();else throw new Error("Invalid size "+n);s%6===4?r+=`
`+new Array(t.length+4).join(" "):s<e.length-2&&(r+=" ")}console.log(r)}function Ioe(t,e,n){let r=new Date().getTime();const s=new Uint8Array(e);for(let o=0;o<e;o++)s[o]=o%256;const i=new Date().getTime();console.log("Generated random input in "+(i-r)+"ms"),r=i;for(let o=0;o<n;o++){const a=t(s),c=new Date().getTime(),l=c-r;r=c,console.log("Hashed in "+l+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(l/1e3)*100)/100+" MB PER SECOND")}}var J6={normalizeInput:xoe,toHex:Soe,debugPrint:Aoe,testSpeed:Ioe};const gw=J6;function Sy(t,e,n){const r=t[e]+t[n];let s=t[e+1]+t[n+1];r>=4294967296&&s++,t[e]=r,t[e+1]=s}function dP(t,e,n,r){let s=t[e]+n;n<0&&(s+=4294967296);let i=t[e+1]+r;s>=4294967296&&i++,t[e]=s,t[e+1]=i}function Z6(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Ca(t,e,n,r,s,i){const o=Bf[s],a=Bf[s+1],c=Bf[i],l=Bf[i+1];Sy(We,t,e),dP(We,t,o,a);let u=We[r]^We[t],d=We[r+1]^We[t+1];We[r]=d,We[r+1]=u,Sy(We,n,r),u=We[e]^We[n],d=We[e+1]^We[n+1],We[e]=u>>>24^d<<8,We[e+1]=d>>>24^u<<8,Sy(We,t,e),dP(We,t,c,l),u=We[r]^We[t],d=We[r+1]^We[t+1],We[r]=u>>>16^d<<16,We[r+1]=d>>>16^u<<16,Sy(We,n,r),u=We[e]^We[n],d=We[e+1]^We[n+1],We[e]=d>>>31^u<<1,We[e+1]=u>>>31^d<<1}const X6=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Toe=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],rr=new Uint8Array(Toe.map(function(t){return t*2})),We=new Uint32Array(32),Bf=new Uint32Array(32);function ej(t,e){let n=0;for(n=0;n<16;n++)We[n]=t.h[n],We[n+16]=X6[n];for(We[24]=We[24]^t.t,We[25]=We[25]^t.t/4294967296,e&&(We[28]=~We[28],We[29]=~We[29]),n=0;n<32;n++)Bf[n]=Z6(t.b,4*n);for(n=0;n<12;n++)Ca(0,8,16,24,rr[n*16+0],rr[n*16+1]),Ca(2,10,18,26,rr[n*16+2],rr[n*16+3]),Ca(4,12,20,28,rr[n*16+4],rr[n*16+5]),Ca(6,14,22,30,rr[n*16+6],rr[n*16+7]),Ca(0,10,20,30,rr[n*16+8],rr[n*16+9]),Ca(2,12,22,24,rr[n*16+10],rr[n*16+11]),Ca(4,14,16,26,rr[n*16+12],rr[n*16+13]),Ca(6,8,18,28,rr[n*16+14],rr[n*16+15]);for(n=0;n<16;n++)t.h[n]=t.h[n]^We[n]^We[n+16]}const xa=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function tj(t,e,n,r){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&n.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&r.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const s={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};xa.fill(0),xa[0]=t,e&&(xa[1]=e.length),xa[2]=1,xa[3]=1,n&&xa.set(n,32),r&&xa.set(r,48);for(let i=0;i<16;i++)s.h[i]=X6[i]^Z6(xa,i*4);return e&&(KA(s,e),s.c=128),s}function KA(t,e){for(let n=0;n<e.length;n++)t.c===128&&(t.t+=t.c,ej(t,!1),t.c=0),t.b[t.c++]=e[n]}function nj(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;ej(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3);return e}function rj(t,e,n,r,s){n=n||64,t=gw.normalizeInput(t),r&&(r=gw.normalizeInput(r)),s&&(s=gw.normalizeInput(s));const i=tj(n,e,r,s);return KA(i,t),nj(i)}function Noe(t,e,n,r,s){const i=rj(t,e,n,r,s);return gw.toHex(i)}var Poe={blake2b:rj,blake2bHex:Noe,blake2bInit:tj,blake2bUpdate:KA,blake2bFinal:nj};const sj=J6;function koe(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Sa(t,e,n,r,s,i){ut[t]=ut[t]+ut[e]+s,ut[r]=Ay(ut[r]^ut[t],16),ut[n]=ut[n]+ut[r],ut[e]=Ay(ut[e]^ut[n],12),ut[t]=ut[t]+ut[e]+i,ut[r]=Ay(ut[r]^ut[t],8),ut[n]=ut[n]+ut[r],ut[e]=Ay(ut[e]^ut[n],7)}function Ay(t,e){return t>>>e^t<<32-e}const ij=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),sr=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),ut=new Uint32Array(16),Ln=new Uint32Array(16);function oj(t,e){let n=0;for(n=0;n<8;n++)ut[n]=t.h[n],ut[n+8]=ij[n];for(ut[12]^=t.t,ut[13]^=t.t/4294967296,e&&(ut[14]=~ut[14]),n=0;n<16;n++)Ln[n]=koe(t.b,4*n);for(n=0;n<10;n++)Sa(0,4,8,12,Ln[sr[n*16+0]],Ln[sr[n*16+1]]),Sa(1,5,9,13,Ln[sr[n*16+2]],Ln[sr[n*16+3]]),Sa(2,6,10,14,Ln[sr[n*16+4]],Ln[sr[n*16+5]]),Sa(3,7,11,15,Ln[sr[n*16+6]],Ln[sr[n*16+7]]),Sa(0,5,10,15,Ln[sr[n*16+8]],Ln[sr[n*16+9]]),Sa(1,6,11,12,Ln[sr[n*16+10]],Ln[sr[n*16+11]]),Sa(2,7,8,13,Ln[sr[n*16+12]],Ln[sr[n*16+13]]),Sa(3,4,9,14,Ln[sr[n*16+14]],Ln[sr[n*16+15]]);for(n=0;n<8;n++)t.h[n]^=ut[n]^ut[n+8]}function aj(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=e?e.length:0;if(e&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(ij),b:new Uint8Array(64),c:0,t:0,outlen:t};return r.h[0]^=16842752^n<<8^t,n>0&&(YA(r,e),r.c=64),r}function YA(t,e){for(let n=0;n<e.length;n++)t.c===64&&(t.t+=t.c,oj(t,!1),t.c=0),t.b[t.c++]=e[n]}function cj(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;oj(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3)&255;return e}function lj(t,e,n){n=n||32,t=sj.normalizeInput(t);const r=aj(n,e);return YA(r,t),cj(r)}function Ooe(t,e,n){const r=lj(t,e,n);return sj.toHex(r)}var Roe={blake2s:lj,blake2sHex:Ooe,blake2sInit:aj,blake2sUpdate:YA,blake2sFinal:cj};const mf=Poe,yf=Roe;var $oe={blake2b:mf.blake2b,blake2bHex:mf.blake2bHex,blake2bInit:mf.blake2bInit,blake2bUpdate:mf.blake2bUpdate,blake2bFinal:mf.blake2bFinal,blake2s:yf.blake2s,blake2sHex:yf.blake2sHex,blake2sInit:yf.blake2sInit,blake2sUpdate:yf.blake2sUpdate,blake2sFinal:yf.blake2sFinal},Doe={};const joe=":";function Md(t){const[e,n]=t.split(joe);return{namespace:e,reference:n}}function uj(t,e){return t.includes(":")?[t]:e.chains||[]}var Uoe=Object.defineProperty,Loe=Object.defineProperties,Moe=Object.getOwnPropertyDescriptors,hP=Object.getOwnPropertySymbols,Boe=Object.prototype.hasOwnProperty,Foe=Object.prototype.propertyIsEnumerable,fP=(t,e,n)=>e in t?Uoe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pP=(t,e)=>{for(var n in e||(e={}))Boe.call(e,n)&&fP(t,n,e[n]);if(hP)for(var n of hP(e))Foe.call(e,n)&&fP(t,n,e[n]);return t},zoe=(t,e)=>Loe(t,Moe(e));const qoe="ReactNative",ms={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Woe="js";function y0(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Kc(){return!au()&&!!qA()&&navigator.product===qoe}function Hoe(){return Kc()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function Voe(){return Kc()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Bh(){return!y0()&&!!qA()&&!!au()}function gm(){return Kc()?ms.reactNative:y0()?ms.node:Bh()?ms.browser:ms.unknown}function gP(){var t;try{return Kc()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function Goe(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function Koe(t){var e,n;const r=dj();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),zoe(pP(pP({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function dj(){return N6()||{name:"",description:"",url:"",icons:[""]}}function Yoe(){if(gm()===ms.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=Xre();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Qoe(){var t;const e=gm();return e===ms.browser?[e,((t=T6())==null?void 0:t.host)||"unknown"].join(":"):e}function hj(t,e,n){const r=Yoe(),s=Qoe();return[[t,e].join("-"),[Woe,n].join("-"),r,s].join("/")}function Joe({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=hj(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=Goe(l[1]||"",d);return l[0]+"?"+h}function Sl(t,e){return t.filter(n=>e.includes(n)).length===t.length}function JC(t){return Object.fromEntries(t.entries())}function ZC(t){return new Map(Object.entries(t))}function hl(t=le.FIVE_MINUTES,e){const n=le.toMiliseconds(t||le.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function dc(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function fj(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Zoe(t){return fj("topic",t)}function Xoe(t){return fj("id",t)}function pj(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function wn(t,e){return le.fromMiliseconds(Date.now()+le.toMiliseconds(t))}function Ba(t){return Date.now()>=le.toMiliseconds(t)}function pt(t,e){return`${t}${e?`:${e}`:""}`}function ao(t=[],e=[]){return[...new Set([...t,...e])]}async function eae({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=tae(i,t,e),a=gm();if(a===ms.browser){if(!((r=au())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}nae(o)}else a===ms.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function tae(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${oae(r,!0)}`}else s=`${s}/wc?${r}`;return s}function nae(t){let e="_self";iae()?e="_top":(sae()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function rae(t,e){let n="";try{if(Bh()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function mP(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function yP(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function QA(){return typeof process<"u"&&Doe.IS_VITEST==="true"}function sae(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function iae(){try{return window.self!==window.top}catch{return!1}}function oae(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function gj(t){return Buffer.from(t,"base64").toString("utf-8")}function aae(t){return new Promise(e=>setTimeout(e,t))}const Iy=BigInt(2**32-1),wP=BigInt(32);function mj(t,e=!1){return e?{h:Number(t&Iy),l:Number(t>>wP&Iy)}:{h:Number(t>>wP&Iy)|0,l:Number(t&Iy)|0}}function yj(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=mj(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const vP=(t,e,n)=>t>>>n,bP=(t,e,n)=>t<<32-n|e>>>n,Fa=(t,e,n)=>t>>>n|e<<32-n,za=(t,e,n)=>t<<32-n|e>>>n,Ff=(t,e,n)=>t<<64-n|e>>>n-32,zf=(t,e,n)=>t>>>n-32|e<<64-n,cae=(t,e)=>e,lae=(t,e)=>t,uae=(t,e,n)=>t<<n|e>>>32-n,dae=(t,e,n)=>e<<n|t>>>32-n,hae=(t,e,n)=>e<<n-32|t>>>64-n,fae=(t,e,n)=>t<<n-32|e>>>64-n;function ci(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const JA=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),ZA=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,pae=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),gae=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,mae=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),yae=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,qu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function XA(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function sa(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Gs(t,...e){if(!XA(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function eI(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");sa(t.outputLen),sa(t.blockLen)}function Mc(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function tI(t,e){Gs(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function _g(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Ks(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Z1(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Li(t,e){return t<<32-e|t>>>e}const wj=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function vj(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const No=wj?t=>t:t=>vj(t);function wae(t){for(let e=0;e<t.length;e++)t[e]=vj(t[e]);return t}const qa=wj?t=>t:wae,bj=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",vae=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Eg(t){if(Gs(t),bj)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=vae[t[n]];return e}const So={_0:48,_9:57,A:65,F:70,a:97,f:102};function _P(t){if(t>=So._0&&t<=So._9)return t-So._0;if(t>=So.A&&t<=So.F)return t-(So.A-10);if(t>=So.a&&t<=So.f)return t-(So.a-10)}function nI(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(bj)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=_P(t.charCodeAt(i)),a=_P(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function bae(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Ci(t){return typeof t=="string"&&(t=bae(t)),Gs(t),t}function Al(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Gs(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let Uv=class{};function mm(t){const e=r=>t().update(Ci(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function _ae(t){const e=(r,s)=>t(s).update(Ci(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function Fh(t=32){if(qu&&typeof qu.getRandomValues=="function")return qu.getRandomValues(new Uint8Array(t));if(qu&&typeof qu.randomBytes=="function")return Uint8Array.from(qu.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const Eae=BigInt(0),wf=BigInt(1),Cae=BigInt(2),xae=BigInt(7),Sae=BigInt(256),Aae=BigInt(113),_j=[],Ej=[],Cj=[];for(let t=0,e=wf,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],_j.push(2*(5*r+n)),Ej.push((t+1)*(t+2)/2%64);let s=Eae;for(let i=0;i<7;i++)e=(e<<wf^(e>>xae)*Aae)%Sae,e&Cae&&(s^=wf<<(wf<<BigInt(i))-wf);Cj.push(s)}const xj=yj(Cj,!0),Iae=xj[0],Tae=xj[1],EP=(t,e,n)=>n>32?hae(t,e,n):uae(t,e,n),CP=(t,e,n)=>n>32?fae(t,e,n):dae(t,e,n);function Nae(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=EP(l,u,1)^n[a],h=CP(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Ej[o],c=EP(s,i,a),l=CP(s,i,a),u=_j[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Iae[r],t[1]^=Tae[r]}Ks(n)}let Pae=class Sj extends Uv{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,sa(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=_g(this.state)}clone(){return this._cloneInto()}keccak(){qa(this.state32),Nae(this.state32,this.rounds),qa(this.state32),this.posOut=0,this.pos=0}update(e){Mc(this),e=Ci(e),Gs(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Mc(this,!1),Gs(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return sa(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(tI(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ks(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Sj(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const kae=(t,e,n)=>mm(()=>new Pae(e,t,n)),Oae=kae(1,136,256/8);function Rae(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function $ae(t,e,n){return t&e^~t&n}function Dae(t,e,n){return t&e^t&n^e&n}let Aj=class extends Uv{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Z1(this.buffer)}update(e){Mc(this),e=Ci(e),Gs(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Z1(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Mc(this),tI(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Ks(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Rae(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Z1(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const Aa=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ir=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),or=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),jae=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ia=new Uint32Array(64);let Uae=class extends Aj{constructor(e=32){super(64,e,8,!1),this.A=Aa[0]|0,this.B=Aa[1]|0,this.C=Aa[2]|0,this.D=Aa[3]|0,this.E=Aa[4]|0,this.F=Aa[5]|0,this.G=Aa[6]|0,this.H=Aa[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Ia[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Ia[d-15],f=Ia[d-2],p=Li(h,7)^Li(h,18)^h>>>3,g=Li(f,17)^Li(f,19)^f>>>10;Ia[d]=g+Ia[d-7]+p+Ia[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Li(a,6)^Li(a,11)^Li(a,25),f=u+h+$ae(a,c,l)+jae[d]+Ia[d]|0,p=(Li(r,2)^Li(r,13)^Li(r,22))+Dae(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Ks(Ia)}destroy(){this.set(0,0,0,0,0,0,0,0),Ks(this.buffer)}};const Ij=yj(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Lae=Ij[0],Mae=Ij[1],Ta=new Uint32Array(80),Na=new Uint32Array(80);let rI=class extends Aj{constructor(e=64){super(128,e,16,!1),this.Ah=or[0]|0,this.Al=or[1]|0,this.Bh=or[2]|0,this.Bl=or[3]|0,this.Ch=or[4]|0,this.Cl=or[5]|0,this.Dh=or[6]|0,this.Dl=or[7]|0,this.Eh=or[8]|0,this.El=or[9]|0,this.Fh=or[10]|0,this.Fl=or[11]|0,this.Gh=or[12]|0,this.Gl=or[13]|0,this.Hh=or[14]|0,this.Hl=or[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let v=0;v<16;v++,n+=4)Ta[v]=e.getUint32(n),Na[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const E=Ta[v-15]|0,_=Na[v-15]|0,x=Fa(E,_,1)^Fa(E,_,8)^vP(E,_,7),S=za(E,_,1)^za(E,_,8)^bP(E,_,7),N=Ta[v-2]|0,C=Na[v-2]|0,O=Fa(N,C,19)^Ff(N,C,61)^vP(N,C,6),R=za(N,C,19)^zf(N,C,61)^bP(N,C,6),B=pae(S,R,Na[v-7],Na[v-16]),H=gae(B,x,O,Ta[v-7],Ta[v-16]);Ta[v]=H|0,Na[v]=B|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:y,Hh:w,Hl:b}=this;for(let v=0;v<80;v++){const E=Fa(d,h,14)^Fa(d,h,18)^Ff(d,h,41),_=za(d,h,14)^za(d,h,18)^zf(d,h,41),x=d&f^~d&g,S=h&p^~h&y,N=mae(b,_,S,Mae[v],Na[v]),C=yae(N,w,E,x,Lae[v],Ta[v]),O=N|0,R=Fa(r,s,28)^Ff(r,s,34)^Ff(r,s,39),B=za(r,s,28)^zf(r,s,34)^zf(r,s,39),H=r&i^r&a^i&a,F=s&o^s&c^o&c;w=g|0,b=y|0,g=f|0,y=p|0,f=d|0,p=h|0,{h:d,l:h}=ci(l|0,u|0,C|0,O|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const A=JA(O,B,F);r=ZA(A,C,R,H),s=A|0}({h:r,l:s}=ci(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=ci(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=ci(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=ci(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=ci(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=ci(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=ci(this.Gh|0,this.Gl|0,g|0,y|0),{h:w,l:b}=ci(this.Hh|0,this.Hl|0,w|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,y,w,b)}roundClean(){Ks(Ta,Na)}destroy(){Ks(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Bae=class extends rI{constructor(){super(48),this.Ah=ir[0]|0,this.Al=ir[1]|0,this.Bh=ir[2]|0,this.Bl=ir[3]|0,this.Ch=ir[4]|0,this.Cl=ir[5]|0,this.Dh=ir[6]|0,this.Dl=ir[7]|0,this.Eh=ir[8]|0,this.El=ir[9]|0,this.Fh=ir[10]|0,this.Fl=ir[11]|0,this.Gh=ir[12]|0,this.Gl=ir[13]|0,this.Hh=ir[14]|0,this.Hl=ir[15]|0}};const ar=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);let Fae=class extends rI{constructor(){super(32),this.Ah=ar[0]|0,this.Al=ar[1]|0,this.Bh=ar[2]|0,this.Bl=ar[3]|0,this.Ch=ar[4]|0,this.Cl=ar[5]|0,this.Dh=ar[6]|0,this.Dl=ar[7]|0,this.Eh=ar[8]|0,this.El=ar[9]|0,this.Fh=ar[10]|0,this.Fl=ar[11]|0,this.Gh=ar[12]|0,this.Gl=ar[13]|0,this.Hh=ar[14]|0,this.Hl=ar[15]|0}};const Lv=mm(()=>new Uae),zae=mm(()=>new rI),qae=mm(()=>new Bae),Wae=mm(()=>new Fae),Hae=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),yn=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),ge=new Uint32Array(32);function Pa(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=ge[2*t],l=ge[2*t+1],u=ge[2*e],d=ge[2*e+1],h=ge[2*n],f=ge[2*n+1],p=ge[2*r],g=ge[2*r+1],y=JA(c,u,o);l=ZA(y,l,d,a),c=y|0,{Dh:g,Dl:p}={Dh:g^l,Dl:p^c},{Dh:g,Dl:p}={Dh:cae(g,p),Dl:lae(g)},{h:f,l:h}=ci(f,h,g,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:Fa(d,u,24),Bl:za(d,u,24)},ge[2*t]=c,ge[2*t+1]=l,ge[2*e]=u,ge[2*e+1]=d,ge[2*n]=h,ge[2*n+1]=f,ge[2*r]=p,ge[2*r+1]=g}function ka(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=ge[2*t],l=ge[2*t+1],u=ge[2*e],d=ge[2*e+1],h=ge[2*n],f=ge[2*n+1],p=ge[2*r],g=ge[2*r+1],y=JA(c,u,o);l=ZA(y,l,d,a),c=y|0,{Dh:g,Dl:p}={Dh:g^l,Dl:p^c},{Dh:g,Dl:p}={Dh:Fa(g,p,16),Dl:za(g,p,16)},{h:f,l:h}=ci(f,h,g,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:Ff(d,u,63),Bl:zf(d,u,63)},ge[2*t]=c,ge[2*t+1]=l,ge[2*e]=u,ge[2*e+1]=d,ge[2*n]=h,ge[2*n+1]=f,ge[2*r]=p,ge[2*r+1]=g}function Vae(t,e={},n,r,s){if(sa(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class Gae extends Uv{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,sa(e),sa(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=_g(this.buffer)}update(e){Mc(this),e=Ci(e),Gs(e);const{blockLen:n,buffer:r,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===n&&(qa(s),this.compress(s,0,!1),qa(s),this.pos=0);const l=Math.min(n-this.pos,i-c),u=o+c;if(l===n&&!(u%4)&&c+l<i){const d=new Uint32Array(a,u,Math.floor((i-c)/4));qa(d);for(let h=0;c+n<i;h+=s.length,c+=n)this.length+=n,this.compress(d,h,!1);qa(d);continue}r.set(e.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(e){Mc(this),tI(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,Ks(this.buffer.subarray(n)),qa(r),this.compress(r,0,!0),qa(r);const s=_g(e);this.get().forEach((i,o)=>s[o]=No(i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(n),e.destroyed=i,e.finished=s,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class Kae extends Gae{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=yn[0]|0,this.v0h=yn[1]|0,this.v1l=yn[2]|0,this.v1h=yn[3]|0,this.v2l=yn[4]|0,this.v2h=yn[5]|0,this.v3l=yn[6]|0,this.v3h=yn[7]|0,this.v4l=yn[8]|0,this.v4h=yn[9]|0,this.v5l=yn[10]|0,this.v5h=yn[11]|0,this.v6l=yn[12]|0,this.v6h=yn[13]|0,this.v7l=yn[14]|0,this.v7h=yn[15]|0,Vae(n,e,64,16,16);let{key:r,personalization:s,salt:i}=e,o=0;if(r!==void 0&&(r=Ci(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=Ci(i);const a=_g(i);this.v4l^=No(a[0]),this.v4h^=No(a[1]),this.v5l^=No(a[2]),this.v5h^=No(a[3])}if(s!==void 0){s=Ci(s);const a=_g(s);this.v6l^=No(a[0]),this.v6h^=No(a[1]),this.v7l^=No(a[2]),this.v7h^=No(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:l,v4h:u,v5l:d,v5h:h,v6l:f,v6h:p,v7l:g,v7h:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=d|0,this.v5h=h|0,this.v6l=f|0,this.v6h=p|0,this.v7l=g|0,this.v7h=y|0}compress(e,n,r){this.get().forEach((c,l)=>ge[l]=c),ge.set(yn,16);let{h:s,l:i}=mj(BigInt(this.length));ge[24]=yn[8]^i,ge[25]=yn[9]^s,r&&(ge[28]=~ge[28],ge[29]=~ge[29]);let o=0;const a=Hae;for(let c=0;c<12;c++)Pa(0,4,8,12,e,n+2*a[o++]),ka(0,4,8,12,e,n+2*a[o++]),Pa(1,5,9,13,e,n+2*a[o++]),ka(1,5,9,13,e,n+2*a[o++]),Pa(2,6,10,14,e,n+2*a[o++]),ka(2,6,10,14,e,n+2*a[o++]),Pa(3,7,11,15,e,n+2*a[o++]),ka(3,7,11,15,e,n+2*a[o++]),Pa(0,5,10,15,e,n+2*a[o++]),ka(0,5,10,15,e,n+2*a[o++]),Pa(1,6,11,12,e,n+2*a[o++]),ka(1,6,11,12,e,n+2*a[o++]),Pa(2,7,8,13,e,n+2*a[o++]),ka(2,7,8,13,e,n+2*a[o++]),Pa(3,4,9,14,e,n+2*a[o++]),ka(3,4,9,14,e,n+2*a[o++]);this.v0l^=ge[0]^ge[16],this.v0h^=ge[1]^ge[17],this.v1l^=ge[2]^ge[18],this.v1h^=ge[3]^ge[19],this.v2l^=ge[4]^ge[20],this.v2h^=ge[5]^ge[21],this.v3l^=ge[6]^ge[22],this.v3h^=ge[7]^ge[23],this.v4l^=ge[8]^ge[24],this.v4h^=ge[9]^ge[25],this.v5l^=ge[10]^ge[26],this.v5h^=ge[11]^ge[27],this.v6l^=ge[12]^ge[28],this.v6h^=ge[13]^ge[29],this.v7l^=ge[14]^ge[30],this.v7h^=ge[15]^ge[31],Ks(ge)}destroy(){this.destroyed=!0,Ks(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Yae=_ae(t=>new Kae(t)),Qae="https://rpc.walletconnect.org/v1";function Tj(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(Oae(n)).toString("hex")}async function Jae(t,e,n,r,s,i){switch(n.t){case"eip191":return await Zae(t,e,n.s);case"eip1271":return await Xae(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function Zae(t,e,n){return(await Rse({hash:Tj(e),signature:n})).toLowerCase()===t.toLowerCase()}async function Xae(t,e,n,r,s,i){const o=Md(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l=n.substring(2),u=(l.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:Tj(e)).substring(2),h=a+d+c+u+l,f=await fetch(`${i||Qae}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:ece(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function ece(){return Date.now()+Math.floor(Math.random()*1e3)}function tce(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return Mh.encode(i)}function nce(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const s=Yae(r,{dkLen:32});return Mh.encode(s)}function xP(t){const e=new Uint8Array(Lv(rce(t)));return Mh.encode(e)}function rce(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function SP(t){const e=Buffer.from(t,"base64"),n=yie(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=cie(n),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(r)]),o=Wae(i);return Sie.encode(o).replace(/=+$/,"")}function X1(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function sce(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(X1(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(X1(n.length)),s.push(n),s.push(Buffer.from([26])),s.push(X1(r.length)),s.push(r);const i=Buffer.concat(s),o=Lv(i);return Buffer.from(o).toString("hex").toUpperCase()}var ice=Object.defineProperty,oce=Object.defineProperties,ace=Object.getOwnPropertyDescriptors,AP=Object.getOwnPropertySymbols,cce=Object.prototype.hasOwnProperty,lce=Object.prototype.propertyIsEnumerable,IP=(t,e,n)=>e in t?ice(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uce=(t,e)=>{for(var n in e||(e={}))cce.call(e,n)&&IP(t,n,e[n]);if(AP)for(var n of AP(e))lce.call(e,n)&&IP(t,n,e[n]);return t},dce=(t,e)=>oce(t,ace(e));const hce="did:pkh:",sI=t=>t==null?void 0:t.split(":"),fce=t=>{const e=t&&sI(t);if(e)return t.includes(hce)?e[3]:e[1]},XC=t=>{const e=t&&sI(t);if(e)return e[2]+":"+e[3]},w0=t=>{const e=t&&sI(t);if(e)return e.pop()};async function TP(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=Nj(s,s.iss),o=w0(s.iss);return await Jae(o,i,r,XC(s.iss),n)}const Nj=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=w0(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${fce(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=mw(t.resources);if(p){const g=Cg(p);s=Ece(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function pce(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function gce(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function lu(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function mce(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:yce(e,n,r)}}}function yce(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function Pj(t){return lu(t),`urn:recap:${pce(t).replace(/=/g,"")}`}function Cg(t){const e=gce(t.replace("urn:recap:",""));return lu(e),e}function wce(t,e,n){const r=mce(t,e,n);return Pj(r)}function vce(t){return t&&t.includes("urn:recap:")}function bce(t,e){const n=Cg(t),r=Cg(e),s=_ce(n,r);return Pj(s)}function _ce(t,e){lu(t),lu(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=dce(uce({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function Ece(t="",e){lu(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function NP(t){var e;const n=Cg(t);lu(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function PP(t){const e=Cg(t);lu(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function mw(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return vce(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function kj(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ex(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function e_(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Vr(t,...e){if(!kj(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function kP(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Cce(t,e){Vr(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Ic(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function mh(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function xce(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const Sce=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Ace(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function tx(t){if(typeof t=="string")t=Ace(t);else if(kj(t))t=nx(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function Ice(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Tce(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const Nce=(t,e)=>{function n(r,...s){if(Vr(r),!Sce)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Vr(l):Vr(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&Vr(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Vr(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Vr(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Vr(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function OP(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!kce(e))throw new Error("invalid output, must be aligned");return e}function RP(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function Pce(t,e,n){ex(n);const r=new Uint8Array(16),s=xce(r);return RP(s,0,BigInt(e),n),RP(s,8,BigInt(t),n),r}function kce(t){return t.byteOffset%4===0}function nx(t){return Uint8Array.from(t)}const Oj=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Oce=Oj("expand 16-byte k"),Rce=Oj("expand 32-byte k"),$ce=Ic(Oce),Dce=Ic(Rce);function ct(t,e){return t<<e|t>>>32-e}function rx(t){return t.byteOffset%4===0}const Ty=64,jce=16,Rj=2**32-1,$P=new Uint32Array;function Uce(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(Ty),u=Ic(l),d=rx(s)&&rx(i),h=d?Ic(s):$P,f=d?Ic(i):$P;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=Rj)throw new Error("arx: counter overflow");const g=Math.min(Ty,c-p);if(d&&g===Ty){const y=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let w=0,b;w<jce;w++)b=y+w,f[b]=h[b]^u[w];p+=Ty;continue}for(let y=0,w;y<g;y++)w=p+y,i[w]=s[w]^l[y];p+=g}}function Lce(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=Ice({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return e_(s),e_(o),ex(i),ex(n),(a,c,l,u,d=0)=>{Vr(a),Vr(c),Vr(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),Vr(u),e_(d),d<0||d>=Rj)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,y;if(p===32)f.push(g=nx(a)),y=Dce;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),y=$ce,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);rx(c)||f.push(c=nx(c));const w=Ic(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(y,w,Ic(c.subarray(0,16)),w),c=c.subarray(16)}const b=16-s;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const E=new Uint8Array(12);E.set(c,i?0:12-c.length),c=E,f.push(c)}const v=Ic(c);return Uce(t,y,w,v,l,u,d,o),mh(...f),u}}const Mn=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class Mce{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=tx(e),Vr(e,32);const n=Mn(e,0),r=Mn(e,2),s=Mn(e,4),i=Mn(e,6),o=Mn(e,8),a=Mn(e,10),c=Mn(e,12),l=Mn(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Mn(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],y=o[9],w=Mn(e,n+0),b=Mn(e,n+2),v=Mn(e,n+4),E=Mn(e,n+6),_=Mn(e,n+8),x=Mn(e,n+10),S=Mn(e,n+12),N=Mn(e,n+14);let C=i[0]+(w&8191),O=i[1]+((w>>>13|b<<3)&8191),R=i[2]+((b>>>10|v<<6)&8191),B=i[3]+((v>>>7|E<<9)&8191),H=i[4]+((E>>>4|_<<12)&8191),F=i[5]+(_>>>1&8191),A=i[6]+((_>>>14|x<<2)&8191),I=i[7]+((x>>>11|S<<5)&8191),U=i[8]+((S>>>8|N<<8)&8191),T=i[9]+(N>>>5|s),k=0,L=k+C*a+O*(5*y)+R*(5*g)+B*(5*p)+H*(5*f);k=L>>>13,L&=8191,L+=F*(5*h)+A*(5*d)+I*(5*u)+U*(5*l)+T*(5*c),k+=L>>>13,L&=8191;let W=k+C*c+O*a+R*(5*y)+B*(5*g)+H*(5*p);k=W>>>13,W&=8191,W+=F*(5*f)+A*(5*h)+I*(5*d)+U*(5*u)+T*(5*l),k+=W>>>13,W&=8191;let K=k+C*l+O*c+R*a+B*(5*y)+H*(5*g);k=K>>>13,K&=8191,K+=F*(5*p)+A*(5*f)+I*(5*h)+U*(5*d)+T*(5*u),k+=K>>>13,K&=8191;let Z=k+C*u+O*l+R*c+B*a+H*(5*y);k=Z>>>13,Z&=8191,Z+=F*(5*g)+A*(5*p)+I*(5*f)+U*(5*h)+T*(5*d),k+=Z>>>13,Z&=8191;let Q=k+C*d+O*u+R*l+B*c+H*a;k=Q>>>13,Q&=8191,Q+=F*(5*y)+A*(5*g)+I*(5*p)+U*(5*f)+T*(5*h),k+=Q>>>13,Q&=8191;let te=k+C*h+O*d+R*u+B*l+H*c;k=te>>>13,te&=8191,te+=F*a+A*(5*y)+I*(5*g)+U*(5*p)+T*(5*f),k+=te>>>13,te&=8191;let oe=k+C*f+O*h+R*d+B*u+H*l;k=oe>>>13,oe&=8191,oe+=F*c+A*a+I*(5*y)+U*(5*g)+T*(5*p),k+=oe>>>13,oe&=8191;let me=k+C*p+O*f+R*h+B*d+H*u;k=me>>>13,me&=8191,me+=F*l+A*c+I*a+U*(5*y)+T*(5*g),k+=me>>>13,me&=8191;let je=k+C*g+O*p+R*f+B*h+H*d;k=je>>>13,je&=8191,je+=F*u+A*l+I*c+U*a+T*(5*y),k+=je>>>13,je&=8191;let Oe=k+C*y+O*g+R*p+B*f+H*h;k=Oe>>>13,Oe&=8191,Oe+=F*d+A*u+I*l+U*c+T*a,k+=Oe>>>13,Oe&=8191,k=(k<<2)+k|0,k=k+L|0,L=k&8191,k=k>>>13,W+=k,i[0]=L,i[1]=W,i[2]=K,i[3]=Z,i[4]=Q,i[5]=te,i[6]=oe,i[7]=me,i[8]=je,i[9]=Oe}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;mh(r)}update(e){kP(this),e=tx(e),Vr(e);const{buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){mh(this.h,this.r,this.buffer,this.pad)}digestInto(e){kP(this),Cce(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function Bce(t){const e=(r,s)=>t(s).update(tx(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const Fce=Bce(t=>new Mce(t));function zce(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],y=e[6],w=e[7],b=s,v=n[0],E=n[1],_=n[2],x=o,S=a,N=c,C=l,O=u,R=d,B=h,H=f,F=p,A=g,I=y,U=w,T=b,k=v,L=E,W=_;for(let Z=0;Z<i;Z+=2)x=x+O|0,T=ct(T^x,16),F=F+T|0,O=ct(O^F,12),x=x+O|0,T=ct(T^x,8),F=F+T|0,O=ct(O^F,7),S=S+R|0,k=ct(k^S,16),A=A+k|0,R=ct(R^A,12),S=S+R|0,k=ct(k^S,8),A=A+k|0,R=ct(R^A,7),N=N+B|0,L=ct(L^N,16),I=I+L|0,B=ct(B^I,12),N=N+B|0,L=ct(L^N,8),I=I+L|0,B=ct(B^I,7),C=C+H|0,W=ct(W^C,16),U=U+W|0,H=ct(H^U,12),C=C+H|0,W=ct(W^C,8),U=U+W|0,H=ct(H^U,7),x=x+R|0,W=ct(W^x,16),I=I+W|0,R=ct(R^I,12),x=x+R|0,W=ct(W^x,8),I=I+W|0,R=ct(R^I,7),S=S+B|0,T=ct(T^S,16),U=U+T|0,B=ct(B^U,12),S=S+B|0,T=ct(T^S,8),U=U+T|0,B=ct(B^U,7),N=N+H|0,k=ct(k^N,16),F=F+k|0,H=ct(H^F,12),N=N+H|0,k=ct(k^N,8),F=F+k|0,H=ct(H^F,7),C=C+O|0,L=ct(L^C,16),A=A+L|0,O=ct(O^A,12),C=C+O|0,L=ct(L^C,8),A=A+L|0,O=ct(O^A,7);let K=0;r[K++]=o+x|0,r[K++]=a+S|0,r[K++]=c+N|0,r[K++]=l+C|0,r[K++]=u+O|0,r[K++]=d+R|0,r[K++]=h+B|0,r[K++]=f+H|0,r[K++]=p+F|0,r[K++]=g+A|0,r[K++]=y+I|0,r[K++]=w+U|0,r[K++]=b+T|0,r[K++]=v+k|0,r[K++]=E+L|0,r[K++]=_+W|0}const qce=Lce(zce,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Wce=new Uint8Array(16),DP=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(Wce.subarray(n))},Hce=new Uint8Array(32);function jP(t,e,n,r,s){const i=t(e,n,Hce),o=Fce.create(i);s&&DP(o,s),DP(o,r);const a=Pce(r.length,s?s.length:0,!0);o.update(a);const c=o.digest();return mh(i,a),c}const Vce=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=OP(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=jP(t,e,n,a,r);return i.set(c,o),mh(c),i},decrypt(s,i){i=OP(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=jP(t,e,n,o,r);if(!Tce(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),mh(c),i}}),$j=Nce({blockSize:64,nonceLength:12,tagLength:16},Vce(qce));let Dj=class extends Uv{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,eI(e);const r=Ci(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Ks(i)}update(e){return Mc(this),this.iHash.update(e),this}digestInto(e){Mc(this),Gs(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Mv=(t,e,n)=>new Dj(t,e).update(n).digest();Mv.create=(t,e)=>new Dj(t,e);function Gce(t,e,n){return eI(t),n===void 0&&(n=new Uint8Array(t.outputLen)),Mv(t,Ci(n),Ci(e))}const t_=Uint8Array.from([0]),UP=Uint8Array.of();function Kce(t,e,n,r=32){eI(t),sa(r);const s=t.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);n===void 0&&(n=UP);const o=new Uint8Array(i*s),a=Mv.create(t,e),c=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let u=0;u<i;u++)t_[0]=u+1,c.update(u===0?UP:l).update(n).update(t_).digestInto(l),o.set(l,s*u),a._cloneInto(c);return a.destroy(),c.destroy(),Ks(l,t_),o.slice(0,r)}const Yce=(t,e,n,r,s)=>Kce(t,Gce(t,e,n),r,s),Bv=Lv,iI=BigInt(0),sx=BigInt(1);function v0(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function Ny(t){const e=t.toString(16);return e.length&1?"0"+e:e}function jj(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?iI:BigInt("0x"+t)}function Fv(t){return jj(Eg(t))}function b0(t){return Gs(t),jj(Eg(Uint8Array.from(t).reverse()))}function oI(t,e){return nI(t.toString(16).padStart(e*2,"0"))}function aI(t,e){return oI(t,e).reverse()}function Hr(t,e,n){let r;if(typeof e=="string")try{r=nI(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(XA(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const n_=t=>typeof t=="bigint"&&iI<=t;function Qce(t,e,n){return n_(t)&&n_(e)&&n_(n)&&e<=t&&t<n}function ix(t,e,n,r){if(!Qce(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Jce(t){let e;for(e=0;t>iI;t>>=sx,e+=1);return e}const zv=t=>(sx<<BigInt(t))-sx;function Zce(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=h=>new Uint8Array(h),s=h=>Uint8Array.of(h);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...h)=>n(o,i,...h),u=(h=r(0))=>{o=l(s(0),h),i=l(),h.length!==0&&(o=l(s(1),h),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const f=[];for(;h<e;){i=l();const p=i.slice();f.push(p),h+=i.length}return Al(...f)};return(h,f)=>{c(),u(h);let p;for(;!(p=f(d()));)u();return c(),p}}function qv(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function LP(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Qr=BigInt(0),xr=BigInt(1),Il=BigInt(2),Xce=BigInt(3),Uj=BigInt(4),Lj=BigInt(5),Mj=BigInt(8);function Ls(t,e){const n=t%e;return n>=Qr?n:e+n}function oi(t,e,n){let r=t;for(;e-- >Qr;)r*=r,r%=n;return r}function MP(t,e){if(t===Qr)throw new Error("invert: expected non-zero number");if(e<=Qr)throw new Error("invert: expected positive modulus, got "+e);let n=Ls(t,e),r=e,s=Qr,i=xr;for(;n!==Qr;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==xr)throw new Error("invert: does not exist");return Ls(s,e)}function Bj(t,e){const n=(t.ORDER+xr)/Uj,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function ele(t,e){const n=(t.ORDER-Lj)/Mj,r=t.mul(e,Il),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Il),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function tle(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-xr,n=0;for(;e%Il===Qr;)e/=Il,n++;let r=Il;const s=zh(t);for(;BP(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Bj;let i=s.pow(r,e);const o=(e+xr)/Il;return function(a,c){if(a.is0(c))return c;if(BP(a,c)!==1)throw new Error("Cannot find square root");let l=n,u=a.mul(a.ONE,i),d=a.pow(c,e),h=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let f=1,p=a.sqr(d);for(;!a.eql(p,a.ONE);)if(f++,p=a.sqr(p),f===l)throw new Error("Cannot find square root");const g=xr<<BigInt(l-f-1),y=a.pow(u,g);l=f,u=a.sqr(y),d=a.mul(d,u),h=a.mul(h,y)}return h}}function nle(t){return t%Uj===Xce?Bj:t%Mj===Lj?ele:tle(t)}const rle=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function sle(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=rle.reduce((r,s)=>(r[s]="function",r),e);return qv(t,n),t}function ile(t,e,n){if(n<Qr)throw new Error("invalid exponent, negatives unsupported");if(n===Qr)return t.ONE;if(n===xr)return e;let r=t.ONE,s=e;for(;n>Qr;)n&xr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=xr;return r}function Fj(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function BP(t,e){const n=(t.ORDER-xr)/Il,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function ole(t,e){e!==void 0&&sa(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function zh(t,e,n=!1,r={}){if(t<=Qr)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=ole(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:zv(o),ZERO:Qr,ONE:xr,create:u=>Ls(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return Qr<=u&&u<t},is0:u=>u===Qr,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&xr)===xr,neg:u=>Ls(-u,t),eql:(u,d)=>u===d,sqr:u=>Ls(u*u,t),add:(u,d)=>Ls(u+d,t),sub:(u,d)=>Ls(u-d,t),mul:(u,d)=>Ls(u*d,t),pow:(u,d)=>ile(l,u,d),div:(u,d)=>Ls(u*MP(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>MP(u,t),sqrt:i||(u=>(c||(c=nle(t)),c(l,u))),toBytes:u=>n?aI(u,a):oI(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?b0(u):Fv(u)},invertBatch:u=>Fj(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function zj(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function qj(t){const e=zj(t);return e+Math.ceil(e/2)}function ale(t,e,n=!1){const r=t.length,s=zj(e),i=qj(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?b0(t):Fv(t),a=Ls(o,e-xr)+xr;return n?aI(a,s):oI(a,s)}const yh=BigInt(0),Tl=BigInt(1);function lp(t,e){const n=e.negate();return t?n:e}function cle(t,e,n){const r=i=>i.pz,s=Fj(t.Fp,n.map(r));return n.map((i,o)=>i.toAffine(s[o])).map(t.fromAffine)}function Wj(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function r_(t,e){Wj(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=zv(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function FP(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Tl);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function lle(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function ule(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const s_=new WeakMap,Hj=new WeakMap;function i_(t){return Hj.get(t)||1}function zP(t){if(t!==yh)throw new Error("invalid wNAF")}function dle(t,e){return{constTimeNegate:lp,hasPrecomputes(n){return i_(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>yh;)r&Tl&&(s=s.add(i)),i=i.double(),r>>=Tl;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=r_(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=r_(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=FP(s,c,a);s=l,d?o=o.add(lp(f,r[p])):i=i.add(lp(h,r[u]))}return zP(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=r_(n,e);for(let a=0;a<o.windows&&s!==yh;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=FP(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return zP(s),i},getPrecomputes(n,r,s){let i=s_.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),s_.set(r,i))),i},wNAFCached(n,r,s){const i=i_(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=i_(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){Wj(r,e),Hj.set(n,r),s_.delete(n)}}}function hle(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>yh||r>yh;)n&Tl&&(i=i.add(s)),r&Tl&&(o=o.add(s)),s=s.double(),n>>=Tl,r>>=Tl;return{p1:i,p2:o}}function fle(t,e,n,r){lle(n,t),ule(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=Jce(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=zv(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const y=r[g],w=Number(y>>BigInt(f)&l);u[w]=u[w].add(n[g])}let p=o;for(let g=u.length-1,y=o;g>0;g--)y=y.add(u[g]),p=p.add(y);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function qP(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return sle(e),e}else return zh(t)}function ple(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const o of["p","n","h"]){const a=e[o];if(!(typeof a=="bigint"&&a>yh))throw new Error(`CURVE.${o} must be positive bigint`)}const r=qP(e.p,n.Fp),s=qP(e.n,n.Fn),i=["Gx","Gy","a","b"];for(const o of i)if(!r.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const vf=BigInt(0),Wu=BigInt(1),Py=BigInt(2);function gle(t){return qv(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function mle(t){const e=gle(t),{P:n,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const c=o||Fh,l=a?255:448,u=a?32:56,d=BigInt(a?9:5),h=BigInt(a?121665:39081),f=a?Py**BigInt(254):Py**BigInt(447),p=a?BigInt(8)*Py**BigInt(251)-Wu:BigInt(4)*Py**BigInt(445)-Wu,g=f+p+Wu,y=C=>Ls(C,n),w=b(d);function b(C){return aI(y(C),u)}function v(C){const O=Hr("u coordinate",C,u);return a&&(O[31]&=127),y(b0(O))}function E(C){return b0(s(Hr("scalar",C,u)))}function _(C,O){const R=N(v(O),E(C));if(R===vf)throw new Error("invalid private or public key received");return b(R)}function x(C){return _(C,w)}function S(C,O,R){const B=y(C*(O-R));return O=y(O-B),R=y(R+B),{x_2:O,x_3:R}}function N(C,O){ix("u",C,vf,n),ix("scalar",O,f,g);const R=O,B=C;let H=Wu,F=vf,A=C,I=Wu,U=vf;for(let k=BigInt(l-1);k>=vf;k--){const L=R>>k&Wu;U^=L,{x_2:H,x_3:A}=S(U,H,A),{x_2:F,x_3:I}=S(U,F,I),U=L;const W=H+F,K=y(W*W),Z=H-F,Q=y(Z*Z),te=K-Q,oe=A+I,me=A-I,je=y(me*W),Oe=y(oe*Z),Le=je+Oe,Je=je-Oe;A=y(Le*Le),I=y(B*y(Je*Je)),H=y(K*Q),F=y(te*(K+y(h*te)))}({x_2:H,x_3:A}=S(U,H,A)),{x_2:F,x_3:I}=S(U,F,I);const T=i(F);return y(H*T)}return{scalarMult:_,scalarMultBase:x,getSharedSecret:(C,O)=>_(C,O),getPublicKey:C=>x(C),utils:{randomPrivateKey:()=>c(u)},GuBytes:w.slice()}}BigInt(0);const yle=BigInt(1),WP=BigInt(2),wle=BigInt(3),vle=BigInt(5);BigInt(8);const Vj={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function ble(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=Vj.p,o=t*t%i*t%i,a=oi(o,WP,i)*o%i,c=oi(a,yle,i)*t%i,l=oi(c,vle,i)*c%i,u=oi(l,e,i)*l%i,d=oi(u,n,i)*u%i,h=oi(d,r,i)*d%i,f=oi(h,s,i)*h%i,p=oi(f,s,i)*h%i,g=oi(p,e,i)*l%i;return{pow_p_5_8:oi(g,WP,i)*t%i,b2:o}}function _le(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const ox=(()=>{const t=Vj.p;return mle({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=ble(e);return Ls(oi(n,wle,t)*r,t)},adjustScalarBytes:_le})})();function HP(t){t.lowS!==void 0&&v0("lowS",t.lowS),t.prehash!==void 0&&v0("prehash",t.prehash)}class Ele extends Error{constructor(e=""){super(e)}}const jo={Err:Ele,_tlv:{encode:(t,e)=>{const{Err:n}=jo;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Ny(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Ny(s.length/2|128):"";return Ny(t)+i+s+e},decode(t,e){const{Err:n}=jo;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=jo;if(t<up)throw new e("integer: negative integers are not allowed");let n=Ny(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=jo;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Fv(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=jo,s=Hr("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=jo,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},up=BigInt(0),dp=BigInt(1),Cle=BigInt(2),ky=BigInt(3),xle=BigInt(4);function Sle(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function Gj(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=Hr("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function Ale(t,e={}){const{Fp:n,Fn:r}=ple("weierstrass",t,e),{h:s,n:i}=t;qv(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(N,C,O){const{x:R,y:B}=C.toAffine(),H=n.toBytes(R);if(v0("isCompressed",O),O){a();const F=!n.isOdd(B);return Al(Kj(F),H)}else return Al(Uint8Array.of(4),H,n.toBytes(B))}function l(N){Gs(N);const C=n.BYTES,O=C+1,R=2*C+1,B=N.length,H=N[0],F=N.subarray(1);if(B===O&&(H===2||H===3)){const A=n.fromBytes(F);if(!n.isValid(A))throw new Error("bad point: is not on curve, wrong x");const I=h(A);let U;try{U=n.sqrt(I)}catch(k){const L=k instanceof Error?": "+k.message:"";throw new Error("bad point: is not on curve, sqrt error"+L)}a();const T=n.isOdd(U);return(H&1)===1!==T&&(U=n.neg(U)),{x:A,y:U}}else if(B===R&&H===4){const A=n.fromBytes(F.subarray(C*0,C*1)),I=n.fromBytes(F.subarray(C*1,C*2));if(!f(A,I))throw new Error("bad point: is not on curve");return{x:A,y:I}}else throw new Error(`bad point: got length ${B}, expected compressed=${O} or uncompressed=${R}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=Sle(n,t.a,t.b);function f(N,C){const O=n.sqr(C),R=h(N);return n.eql(O,R)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,ky),xle),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function y(N,C,O=!1){if(!n.isValid(C)||O&&n.is0(C))throw new Error(`bad point coordinate ${N}`);return C}function w(N){if(!(N instanceof _))throw new Error("ProjectivePoint expected")}const b=LP((N,C)=>{const{px:O,py:R,pz:B}=N;if(n.eql(B,n.ONE))return{x:O,y:R};const H=N.is0();C==null&&(C=H?n.ONE:n.inv(B));const F=n.mul(O,C),A=n.mul(R,C),I=n.mul(B,C);if(H)return{x:n.ZERO,y:n.ZERO};if(!n.eql(I,n.ONE))throw new Error("invZ was invalid");return{x:F,y:A}}),v=LP(N=>{if(N.is0()){if(e.allowInfinityPoint&&!n.is0(N.py))return;throw new Error("bad point: ZERO")}const{x:C,y:O}=N.toAffine();if(!n.isValid(C)||!n.isValid(O))throw new Error("bad point: x or y not field elements");if(!f(C,O))throw new Error("bad point: equation left != right");if(!N.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function E(N,C,O,R,B){return O=new _(n.mul(O.px,N),O.py,O.pz),C=lp(R,C),O=lp(B,O),C.add(O)}class _{constructor(C,O,R){this.px=y("x",C),this.py=y("y",O,!0),this.pz=y("z",R),Object.freeze(this)}static fromAffine(C){const{x:O,y:R}=C||{};if(!C||!n.isValid(O)||!n.isValid(R))throw new Error("invalid affine point");if(C instanceof _)throw new Error("projective point not allowed");return n.is0(O)&&n.is0(R)?_.ZERO:new _(O,R,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(C){return cle(_,"pz",C)}static fromBytes(C){return Gs(C),_.fromHex(C)}static fromHex(C){const O=_.fromAffine(d(Hr("pointHex",C)));return O.assertValidity(),O}static fromPrivateKey(C){const O=Gj(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return _.BASE.multiply(O(C))}static msm(C,O){return fle(_,r,C,O)}precompute(C=8,O=!0){return S.setWindowSize(this,C),O||this.multiply(ky),this}_setWindowSize(C){this.precompute(C)}assertValidity(){v(this)}hasEvenY(){const{y:C}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(C)}equals(C){w(C);const{px:O,py:R,pz:B}=this,{px:H,py:F,pz:A}=C,I=n.eql(n.mul(O,A),n.mul(H,B)),U=n.eql(n.mul(R,A),n.mul(F,B));return I&&U}negate(){return new _(this.px,n.neg(this.py),this.pz)}double(){const{a:C,b:O}=t,R=n.mul(O,ky),{px:B,py:H,pz:F}=this;let A=n.ZERO,I=n.ZERO,U=n.ZERO,T=n.mul(B,B),k=n.mul(H,H),L=n.mul(F,F),W=n.mul(B,H);return W=n.add(W,W),U=n.mul(B,F),U=n.add(U,U),A=n.mul(C,U),I=n.mul(R,L),I=n.add(A,I),A=n.sub(k,I),I=n.add(k,I),I=n.mul(A,I),A=n.mul(W,A),U=n.mul(R,U),L=n.mul(C,L),W=n.sub(T,L),W=n.mul(C,W),W=n.add(W,U),U=n.add(T,T),T=n.add(U,T),T=n.add(T,L),T=n.mul(T,W),I=n.add(I,T),L=n.mul(H,F),L=n.add(L,L),T=n.mul(L,W),A=n.sub(A,T),U=n.mul(L,k),U=n.add(U,U),U=n.add(U,U),new _(A,I,U)}add(C){w(C);const{px:O,py:R,pz:B}=this,{px:H,py:F,pz:A}=C;let I=n.ZERO,U=n.ZERO,T=n.ZERO;const k=t.a,L=n.mul(t.b,ky);let W=n.mul(O,H),K=n.mul(R,F),Z=n.mul(B,A),Q=n.add(O,R),te=n.add(H,F);Q=n.mul(Q,te),te=n.add(W,K),Q=n.sub(Q,te),te=n.add(O,B);let oe=n.add(H,A);return te=n.mul(te,oe),oe=n.add(W,Z),te=n.sub(te,oe),oe=n.add(R,B),I=n.add(F,A),oe=n.mul(oe,I),I=n.add(K,Z),oe=n.sub(oe,I),T=n.mul(k,te),I=n.mul(L,Z),T=n.add(I,T),I=n.sub(K,T),T=n.add(K,T),U=n.mul(I,T),K=n.add(W,W),K=n.add(K,W),Z=n.mul(k,Z),te=n.mul(L,te),K=n.add(K,Z),Z=n.sub(W,Z),Z=n.mul(k,Z),te=n.add(te,Z),W=n.mul(K,te),U=n.add(U,W),W=n.mul(oe,te),I=n.mul(Q,I),I=n.sub(I,W),W=n.mul(Q,K),T=n.mul(oe,T),T=n.add(T,W),new _(I,U,T)}subtract(C){return this.add(C.negate())}is0(){return this.equals(_.ZERO)}multiply(C){const{endo:O}=e;if(!r.isValidNot0(C))throw new Error("invalid scalar: out of range");let R,B;const H=F=>S.wNAFCached(this,F,_.normalizeZ);if(O){const{k1neg:F,k1:A,k2neg:I,k2:U}=O.splitScalar(C),{p:T,f:k}=H(A),{p:L,f:W}=H(U);B=k.add(W),R=E(O.beta,T,L,F,I)}else{const{p:F,f:A}=H(C);R=F,B=A}return _.normalizeZ([R,B])[0]}multiplyUnsafe(C){const{endo:O}=e,R=this;if(!r.isValid(C))throw new Error("invalid scalar: out of range");if(C===up||R.is0())return _.ZERO;if(C===dp)return R;if(S.hasPrecomputes(this))return this.multiply(C);if(O){const{k1neg:B,k1:H,k2neg:F,k2:A}=O.splitScalar(C),{p1:I,p2:U}=hle(_,R,H,A);return E(O.beta,I,U,B,F)}else return S.wNAFCachedUnsafe(R,C)}multiplyAndAddUnsafe(C,O,R){const B=this.multiplyUnsafe(O).add(C.multiplyUnsafe(R));return B.is0()?void 0:B}toAffine(C){return b(this,C)}isTorsionFree(){const{isTorsionFree:C}=e;return s===dp?!0:C?C(_,this):S.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:C}=e;return s===dp?this:C?C(_,this):this.multiplyUnsafe(s)}toBytes(C=!0){return v0("isCompressed",C),this.assertValidity(),u(_,this,C)}toRawBytes(C=!0){return this.toBytes(C)}toHex(C=!0){return Eg(this.toBytes(C))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}_.BASE=new _(t.Gx,t.Gy,n.ONE),_.ZERO=new _(n.ZERO,n.ONE,n.ZERO),_.Fp=n,_.Fn=r;const x=r.BITS,S=dle(_,e.endo?Math.ceil(x/2):x);return _}function Kj(t){return Uint8Array.of(t?2:3)}function Ile(t,e,n={}){qv(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||Fh,s=e.hmac||((R,...B)=>Mv(e.hash,R,Al(...B))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(R){const B=a>>dp;return R>B}function u(R){return l(R)?o.neg(R):R}function d(R,B){if(!o.isValidNot0(B))throw new Error(`invalid signature ${R}: out of range 1..CURVE.n`)}class h{constructor(B,H,F){d("r",B),d("s",H),this.r=B,this.s=H,F!=null&&(this.recovery=F),Object.freeze(this)}static fromCompact(B){const H=o.BYTES,F=Hr("compactSignature",B,H*2);return new h(o.fromBytes(F.subarray(0,H)),o.fromBytes(F.subarray(H,H*2)))}static fromDER(B){const{r:H,s:F}=jo.toSig(Hr("DER",B));return new h(H,F)}assertValidity(){}addRecoveryBit(B){return new h(this.r,this.s,B)}recoverPublicKey(B){const H=i.ORDER,{r:F,s:A,recovery:I}=this;if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");if(a*Cle<H&&I>1)throw new Error("recovery id is ambiguous for h>1 curve");const U=I===2||I===3?F+a:F;if(!i.isValid(U))throw new Error("recovery id 2 or 3 invalid");const T=i.toBytes(U),k=t.fromHex(Al(Kj((I&1)===0),T)),L=o.inv(U),W=v(Hr("msgHash",B)),K=o.create(-W*L),Z=o.create(A*L),Q=t.BASE.multiplyUnsafe(K).add(k.multiplyUnsafe(Z));if(Q.is0())throw new Error("point at infinify");return Q.assertValidity(),Q}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(B){if(B==="compact")return Al(o.toBytes(this.r),o.toBytes(this.s));if(B==="der")return nI(jo.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Eg(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Eg(this.toBytes("compact"))}}const f=Gj(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(R){try{return f(R),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const R=a;return ale(r(qj(R)),R)},precompute(R=8,B=t.BASE){return B.precompute(R,!1)}};function g(R,B=!0){return t.fromPrivateKey(R).toBytes(B)}function y(R){if(typeof R=="bigint")return!1;if(R instanceof t)return!0;const B=Hr("key",R).length,H=i.BYTES,F=H+1,A=2*H+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===F))return B===F||B===A}function w(R,B,H=!0){if(y(R)===!0)throw new Error("first arg must be private key");if(y(B)===!1)throw new Error("second arg must be public key");return t.fromHex(B).multiply(f(R)).toBytes(H)}const b=e.bits2int||function(R){if(R.length>8192)throw new Error("input is too large");const B=Fv(R),H=R.length*8-c;return H>0?B>>BigInt(H):B},v=e.bits2int_modN||function(R){return o.create(b(R))},E=zv(c);function _(R){return ix("num < 2^"+c,R,up,E),o.toBytes(R)}function x(R,B,H=S){if(["recovered","canonical"].some(Q=>Q in H))throw new Error("sign() legacy options not supported");const{hash:F}=e;let{lowS:A,prehash:I,extraEntropy:U}=H;A==null&&(A=!0),R=Hr("msgHash",R),HP(H),I&&(R=Hr("prehashed msgHash",F(R)));const T=v(R),k=f(B),L=[_(k),_(T)];if(U!=null&&U!==!1){const Q=U===!0?r(i.BYTES):U;L.push(Hr("extraEntropy",Q))}const W=Al(...L),K=T;function Z(Q){const te=b(Q);if(!o.isValidNot0(te))return;const oe=o.inv(te),me=t.BASE.multiply(te).toAffine(),je=o.create(me.x);if(je===up)return;const Oe=o.create(oe*o.create(K+je*k));if(Oe===up)return;let Le=(me.x===je?0:2)|Number(me.y&dp),Je=Oe;return A&&l(Oe)&&(Je=u(Oe),Le^=1),new h(je,Je,Le)}return{seed:W,k2sig:Z}}const S={lowS:e.lowS,prehash:!1},N={lowS:e.lowS,prehash:!1};function C(R,B,H=S){const{seed:F,k2sig:A}=x(R,B,H);return Zce(e.hash.outputLen,o.BYTES,s)(F,A)}t.BASE.precompute(8);function O(R,B,H,F=N){const A=R;B=Hr("msgHash",B),H=Hr("publicKey",H),HP(F);const{lowS:I,prehash:U,format:T}=F;if("strict"in F)throw new Error("options.strict was renamed to lowS");if(T!==void 0&&!["compact","der","js"].includes(T))throw new Error('format must be "compact", "der" or "js"');const k=typeof A=="string"||XA(A),L=!k&&!T&&typeof A=="object"&&A!==null&&typeof A.r=="bigint"&&typeof A.s=="bigint";if(!k&&!L)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let W,K;try{if(L)if(T===void 0||T==="js")W=new h(A.r,A.s);else throw new Error("invalid format");if(k){try{T!=="compact"&&(W=h.fromDER(A))}catch(Le){if(!(Le instanceof jo.Err))throw Le}!W&&T!=="der"&&(W=h.fromCompact(A))}K=t.fromHex(H)}catch{return!1}if(!W||I&&W.hasHighS())return!1;U&&(B=e.hash(B));const{r:Z,s:Q}=W,te=v(B),oe=o.inv(Q),me=o.create(te*oe),je=o.create(Z*oe),Oe=t.BASE.multiplyUnsafe(me).add(K.multiplyUnsafe(je));return Oe.is0()?!1:o.create(Oe.x)===Z}return Object.freeze({getPublicKey:g,getSharedSecret:w,sign:C,verify:O,utils:p,Point:t,Signature:h})}function Tle(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=zh(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function Nle(t){const{CURVE:e,curveOpts:n}=Tle(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function Ple(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function kle(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=Nle(t),s=Ale(e,n),i=Ile(s,r,n);return Ple(t,i)}function ax(t,e){const n=r=>kle({...t,hash:r});return{...n(e),create:n}}const Yj={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},Qj={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},Jj={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Ole=zh(Yj.p),Rle=zh(Qj.p),$le=zh(Jj.p),Dle=ax({...Yj,Fp:Ole,lowS:!1},Lv);ax({...Qj,Fp:Rle,lowS:!1},qae),ax({...Jj,Fp:$le,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},zae);const jle=Dle,Zj="base10",Sr="base16",vi="base64pad",Ga="base64url",ym="utf8",Xj=0,Vo=1,wm=2,Ule=0,VP=1,hp=12,cI=32;function Lle(){const t=ox.utils.randomPrivateKey(),e=ox.getPublicKey(t);return{privateKey:ts(t,Sr),publicKey:ts(e,Sr)}}function cx(){const t=Fh(cI);return ts(t,Sr)}function Mle(t,e){const n=ox.getSharedSecret(zs(t,Sr),zs(e,Sr)),r=Yce(Bv,n,void 0,void 0,cI);return ts(r,Sr)}function yw(t){const e=Bv(zs(t,Sr));return ts(e,Sr)}function Zi(t){const e=Bv(zs(t,ym));return ts(e,Sr)}function e4(t){return zs(`${t}`,Zj)}function uu(t){return Number(ts(t,Zj))}function t4(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function n4(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function Ble(t){const e=e4(typeof t.type<"u"?t.type:Xj);if(uu(e)===Vo&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?zs(t.senderPublicKey,Sr):void 0,r=typeof t.iv<"u"?zs(t.iv,Sr):Fh(hp),s=zs(t.symKey,Sr),i=$j(s,r).encrypt(zs(t.message,ym)),o=r4({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===Ga?t4(o):o}function Fle(t){const e=zs(t.symKey,Sr),{sealed:n,iv:r}=xg({encoded:t.encoded,encoding:t.encoding}),s=$j(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return ts(s,ym)}function zle(t,e){const n=e4(wm),r=Fh(hp),s=zs(t,ym),i=r4({type:n,sealed:s,iv:r});return e===Ga?t4(i):i}function qle(t,e){const{sealed:n}=xg({encoded:t,encoding:e});return ts(n,ym)}function r4(t){if(uu(t.type)===wm)return ts(cp([t.type,t.sealed]),vi);if(uu(t.type)===Vo){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ts(cp([t.type,t.senderPublicKey,t.iv,t.sealed]),vi)}return ts(cp([t.type,t.iv,t.sealed]),vi)}function xg(t){const e=(t.encoding||vi)===Ga?n4(t.encoded):t.encoded,n=zs(e,vi),r=n.slice(Ule,VP),s=VP;if(uu(r)===Vo){const c=s+cI,l=c+hp,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(uu(r)===wm){const c=n.slice(s),l=Fh(hp);return{type:r,sealed:c,iv:l}}const i=s+hp,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function Wle(t,e){const n=xg({encoded:t,encoding:e==null?void 0:e.encoding});return s4({type:uu(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?ts(n.senderPublicKey,Sr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function s4(t){const e=(t==null?void 0:t.type)||Xj;if(e===Vo){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function GP(t){return t.type===Vo&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function KP(t){return t.type===wm}function Hle(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return cp([new Uint8Array([4]),e,n])}function Vle(t,e){const[n,r,s]=t.split("."),i=Buffer.from(n4(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=Bv(c),u=Hle(e);if(!jle.verify(cp([o,a]),l,u))throw new Error("Invalid signature");return WC(t).payload}const Gle="irn";function _0(t){return(t==null?void 0:t.relay)||{protocol:Gle}}function qf(t){const e=Eoe[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function Kle(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function YP(t){if(!t.includes("wc:")){const l=gj(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:Yle(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:Kle(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function Yle(t){return t.startsWith("//")?t.substring(2):t}function Qle(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function QP(t){const e=new URLSearchParams,n=Qle(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function Oy(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var Jle=Object.defineProperty,Zle=Object.defineProperties,Xle=Object.getOwnPropertyDescriptors,JP=Object.getOwnPropertySymbols,eue=Object.prototype.hasOwnProperty,tue=Object.prototype.propertyIsEnumerable,ZP=(t,e,n)=>e in t?Jle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nue=(t,e)=>{for(var n in e||(e={}))eue.call(e,n)&&ZP(t,n,e[n]);if(JP)for(var n of JP(e))tue.call(e,n)&&ZP(t,n,e[n]);return t},rue=(t,e)=>Zle(t,Xle(e));function qh(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function sue(t){const e=[];return Object.values(t).forEach(n=>{e.push(...qh(n.accounts))}),e}function iue(t,e){const n=[];return Object.values(t).forEach(r=>{qh(r.accounts).includes(e)&&n.push(...r.methods)}),n}function oue(t,e){const n=[];return Object.values(t).forEach(r=>{qh(r.accounts).includes(e)&&n.push(...r.events)}),n}function Wv(t){return t.includes(":")}function Id(t){return Wv(t)?t.split(":")[0]:t}function XP(t){var e,n,r;const s={};if(!Tc(t))return s;for(const[i,o]of Object.entries(t)){const a=Wv(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=Id(i);s[u]=rue(nue({},s[u]),{chains:ao(a,(e=s[u])==null?void 0:e.chains),methods:ao(c,(n=s[u])==null?void 0:n.methods),events:ao(l,(r=s[u])==null?void 0:r.events)})}return s}function aue(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function ek(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=aue(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=ao(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function cue(t,e){var n,r,s,i,o,a;const c=XP(t),l=XP(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:ao((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:ao((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:ao((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const lue={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},uue={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ue(t,e){const{message:n,code:r}=uue[t];return{message:e?`${n} ${e}`:n,code:r}}function Wt(t,e){const{message:n,code:r}=lue[t];return{message:e?`${n} ${e}`:n,code:r}}function Go(t,e){return!!Array.isArray(t)}function Tc(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Wn(t){return typeof t>"u"}function hn(t,e){return e&&Wn(t)?!0:typeof t=="string"&&!!t.trim().length}function lI(t,e){return e&&Wn(t)?!0:typeof t=="number"&&!isNaN(t)}function due(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return Sl(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=qh(a),d=n[o];(!Sl(uj(o,d),u)||!Sl(d.methods,c)||!Sl(d.events,l))&&(i=!1)}),i):!1}function E0(t){return hn(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function hue(t){if(hn(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&E0(n)}}return!1}function fue(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(hn(t,!1)){if(e(t))return!0;const n=gj(t);return e(n)}}catch{}return!1}function pue(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function gue(t){return t==null?void 0:t.topic}function mue(t,e){let n=null;return hn(t==null?void 0:t.publicKey,!1)||(n=ue("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function tk(t){let e=!0;return Go(t)?t.length&&(e=t.every(n=>hn(n,!1))):e=!1,e}function yue(t,e,n){let r=null;return Go(e)&&e.length?e.forEach(s=>{r||E0(s)||(r=Wt("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):E0(t)||(r=Wt("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function wue(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=yue(s,uj(s,i),`${e} ${n}`);o&&(r=o)}),r}function vue(t,e){let n=null;return Go(t)?t.forEach(r=>{n||hue(r)||(n=Wt("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Wt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function bue(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=vue(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function _ue(t,e){let n=null;return tk(t==null?void 0:t.methods)?tk(t==null?void 0:t.events)||(n=Wt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=Wt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function i4(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=_ue(r,`${e}, namespace`);s&&(n=s)}),n}function Eue(t,e,n){let r=null;if(t&&Tc(t)){const s=i4(t,e);s&&(r=s);const i=wue(t,e,n);i&&(r=i)}else r=ue("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function o_(t,e){let n=null;if(t&&Tc(t)){const r=i4(t,e);r&&(n=r);const s=bue(t,e);s&&(n=s)}else n=ue("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function o4(t){return hn(t.protocol,!0)}function Cue(t,e){let n=!1;return t?t&&Go(t)&&t.length&&t.forEach(r=>{n=o4(r)}):n=!0,n}function xue(t){return typeof t=="number"}function Br(t){return typeof t<"u"&&typeof t!==null}function Sue(t){return!(!t||typeof t!="object"||!t.code||!lI(t.code,!1)||!t.message||!hn(t.message,!1))}function Aue(t){return!(Wn(t)||!hn(t.method,!1))}function Iue(t){return!(Wn(t)||Wn(t.result)&&Wn(t.error)||!lI(t.id,!1)||!hn(t.jsonrpc,!1))}function Tue(t){return!(Wn(t)||!hn(t.name,!1))}function nk(t,e){return!(!E0(e)||!sue(t).includes(e))}function Nue(t,e,n){return hn(n,!1)?iue(t,e).includes(n):!1}function Pue(t,e,n){return hn(n,!1)?oue(t,e).includes(n):!1}function rk(t,e,n){let r=null;const s=kue(t),i=Oue(e),o=Object.keys(s),a=Object.keys(i),c=sk(Object.keys(t)),l=sk(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=ue("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),Sl(o,a)||(r=ue("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=qh(e[d].accounts);h.includes(d)||(r=ue("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(Sl(s[d].methods,i[d].methods)?Sl(s[d].events,i[d].events)||(r=ue("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=ue("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function kue(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function sk(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Oue(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=qh(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function Rue(t,e){return lI(t,!1)&&t<=e.max&&t>=e.min}function ik(){const t=gm();return new Promise(e=>{switch(t){case ms.browser:e($ue());break;case ms.reactNative:e(Due());break;case ms.node:e(jue());break;default:e(!0)}})}function $ue(){return Bh()&&(navigator==null?void 0:navigator.onLine)}async function Due(){if(Kc()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function jue(){return!0}function Uue(t){switch(gm()){case ms.browser:Lue(t);break;case ms.reactNative:Mue(t);break}}function Lue(t){!Kc()&&Bh()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function Mue(t){Kc()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function Bue(){var t;return Bh()&&au()?((t=au())==null?void 0:t.visibilityState)==="visible":!0}const a_={};class bf{static get(e){return a_[e]}static set(e,n){a_[e]=n}static delete(e){delete a_[e]}}function Fue(t){const e=Mh.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function zue({publicKey:t,signature:e,payload:n}){var r;const s=lx(n.method),i=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),o=Hue(n.address),a=n.era==="00"?new Uint8Array([0]):lx(n.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),l=new Uint8Array([c&255,c>>8&255]),u=BigInt(`0x${Wue(n.tip)}`),d=Gue(u),h=new Uint8Array([0,...t,o,...e,...a,...l,...d,...s]),f=Vue(h.length+1);return new Uint8Array([...f,i,...h])}function que(t){const e=lx(t),n=$oe.blake2b(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function lx(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function Wue(t){return t.startsWith("0x")?t.slice(2):t}function Hue(t){const e=Mh.decode(t)[0];return e===42?0:e===60?2:1}function Vue(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function Gue(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function Kue(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=Fue(t.transaction.address),r=zue({publicKey:n,signature:e,payload:t.transaction}),s=Buffer.from(r).toString("hex");return que(s)}const Yue="PARSE_ERROR",Que="INVALID_REQUEST",Jue="METHOD_NOT_FOUND",Zue="INVALID_PARAMS",a4="INTERNAL_ERROR",uI="SERVER_ERROR",Xue=[-32700,-32600,-32601,-32602,-32603],fp={[Yue]:{code:-32700,message:"Parse error"},[Que]:{code:-32600,message:"Invalid Request"},[Jue]:{code:-32601,message:"Method not found"},[Zue]:{code:-32602,message:"Invalid params"},[a4]:{code:-32603,message:"Internal error"},[uI]:{code:-32e3,message:"Server error"}},c4=uI;function ede(t){return Xue.includes(t)}function ok(t){return Object.keys(fp).includes(t)?fp[t]:fp[c4]}function tde(t){const e=Object.values(fp).find(n=>n.code===t);return e||fp[c4]}function l4(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var u4={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ux=function(t,e){return ux=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},ux(t,e)};function nde(t,e){ux(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var dx=function(){return dx=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},dx.apply(this,arguments)};function rde(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function sde(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function ide(t,e){return function(n,r){e(n,r,t)}}function ode(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ade(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function cde(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function lde(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function ude(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function hx(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function d4(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function dde(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d4(arguments[e]));return t}function hde(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function Sg(t){return this instanceof Sg?(this.v=t,this):new Sg(t)}function fde(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof Sg?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function pde(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:Sg(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function gde(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof hx=="function"?hx(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function mde(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function yde(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function wde(t){return t&&t.__esModule?t:{default:t}}function vde(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function bde(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const _de=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return dx},__asyncDelegator:pde,__asyncGenerator:fde,__asyncValues:gde,__await:Sg,__awaiter:ade,__classPrivateFieldGet:vde,__classPrivateFieldSet:bde,__createBinding:lde,__decorate:sde,__exportStar:ude,__extends:nde,__generator:cde,__importDefault:wde,__importStar:yde,__makeTemplateObject:mde,__metadata:ode,__param:ide,__read:d4,__rest:rde,__spread:dde,__spreadArrays:hde,__values:hx},Symbol.toStringTag,{value:"Module"})),Ede=j0(_de);var Ao={},ak;function Cde(){if(ak)return Ao;ak=1,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.isBrowserCryptoAvailable=Ao.getSubtleCrypto=Ao.getBrowerCrypto=void 0;function t(){return(rn==null?void 0:rn.crypto)||(rn==null?void 0:rn.msCrypto)||{}}Ao.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}Ao.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return Ao.isBrowserCryptoAvailable=n,Ao}var Io={},ck;function xde(){if(ck)return Io;ck=1,Object.defineProperty(Io,"__esModule",{value:!0}),Io.isBrowser=Io.isNode=Io.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Io.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Io.isNode=e;function n(){return!t()&&!e()}return Io.isBrowser=n,Io}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ede;e.__exportStar(Cde(),t),e.__exportStar(xde(),t)})(u4);function Hi(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function Nl(t=6){return BigInt(Hi(t))}function hc(t,e,n){return{id:n||Hi(),jsonrpc:"2.0",method:t,params:e}}function Hv(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Vv(t,e,n){return{id:t,jsonrpc:"2.0",error:Sde(e)}}function Sde(t,e){return typeof t>"u"?ok(a4):(typeof t=="string"&&(t=Object.assign(Object.assign({},ok(uI)),{message:t})),ede(t.code)&&(t=tde(t.code)),t)}let Ade=class{},Ide=class extends Ade{constructor(){super()}},Tde=class extends Ide{constructor(e){super()}};const Nde="^https?:",Pde="^wss?:";function kde(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function h4(t,e){const n=kde(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function lk(t){return h4(t,Nde)}function uk(t){return h4(t,Pde)}function Ode(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function f4(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function dI(t){return f4(t)&&"method"in t}function Gv(t){return f4(t)&&(Vi(t)||Us(t))}function Vi(t){return"result"in t}function Us(t){return"error"in t}let Js=class extends Tde{constructor(e){super(e),this.events=new Qs.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(hc(e.method,e.params||[],e.id||Nl().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Us(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Gv(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const Rde=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),$de=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",dk=t=>t.split("?")[0],hk=10,Dde=Rde();let jde=class{constructor(e){if(this.url=e,this.events=new Qs.EventEmitter,this.registering=!1,!uk(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(ra(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!uk(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=u4.isReactNative()?void 0:{rejectUnauthorized:!Ode(e)},i=new Dde(e,[],s);$de()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?ou(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=Vv(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return l4(e,dk(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>hk&&this.events.setMaxListeners(hk)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${dk(this.url)}`));return this.events.emit("register_error",n),n}};var Ude={};const p4="wc",g4=2,fx="core",uo=`${p4}@2:${fx}:`,Lde={logger:"error"},Mde={database:":memory:"},Bde="crypto",fk="client_ed25519_seed",Fde=le.ONE_DAY,zde="keychain",qde="0.3",Wde="messages",Hde="0.3",pk=le.SIX_HOURS,Vde="publisher",m4="irn",Gde="error",y4="wss://relay.walletconnect.org",Kde="relayer",Pn={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Yde="_subscription",Ps={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Qde=.1,px="2.21.3",Mt={link_mode:"link_mode",relay:"relay"},ww={inbound:"inbound",outbound:"outbound"},Jde="0.3",Zde="WALLETCONNECT_CLIENT_ID",gk="WALLETCONNECT_LINK_MODE_APPS",us={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Xde="subscription",ehe="0.3",the="pairing",nhe="0.3",_f={wc_pairingDelete:{req:{ttl:le.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:le.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:le.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:le.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:le.ONE_DAY,prompt:!1,tag:0},res:{ttl:le.ONE_DAY,prompt:!1,tag:0}}},ml={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},ni={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},rhe="history",she="0.3",ihe="expirer",Ds={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},ohe="0.3",ahe="verify-api",che="https://verify.walletconnect.com",w4="https://verify.walletconnect.org",pp=w4,lhe=`${pp}/v3`,uhe=[che,w4],dhe="echo",hhe="https://echo.walletconnect.com",qi={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Po={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},ri={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},rl={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},sl={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Ef={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},fhe=.1,phe="event-client",ghe=86400,mhe="https://pulse.walletconnect.org/batch";function yhe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,w=0,b=p.length;w!==b&&p[w]===0;)w++,g++;for(var v=(b-w)*u+1>>>0,E=new Uint8Array(v);w!==b;){for(var _=p[w],x=0,S=v-1;(_!==0||x<y)&&S!==-1;S--,x++)_+=256*E[S]>>>0,E[S]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");y=x,w++}for(var N=v-y;N!==v&&E[N]===0;)N++;for(var C=c.repeat(g);N<v;++N)C+=t.charAt(E[N]);return C}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,w=0;p[g]===c;)y++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var E=n[p.charCodeAt(g)];if(E===255)return;for(var _=0,x=b-1;(E!==0||_<w)&&x!==-1;x--,_++)E+=a*v[x]>>>0,v[x]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");w=_,g++}if(p[g]!==" "){for(var S=b-w;S!==b&&v[S]===0;)S++;for(var N=new Uint8Array(y+(b-S)),C=y;S!==b;)N[C++]=v[S++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var whe=yhe,vhe=whe;const v4=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},bhe=t=>new TextEncoder().encode(t),_he=t=>new TextDecoder().decode(t);class Ehe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Che{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return b4(this,e)}}class xhe{constructor(e){this.decoders=e}or(e){return b4(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const b4=(t,e)=>new xhe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class She{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Ehe(e,n,r),this.decoder=new Che(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Kv=({name:t,prefix:e,encode:n,decode:r})=>new She(t,e,n,r),vm=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=vhe(n,e);return Kv({prefix:t,name:e,encode:r,decode:i=>v4(s(i))})},Ahe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Ihe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Zn=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Kv({prefix:e,name:t,encode(s){return Ihe(s,r,n)},decode(s){return Ahe(s,r,n,t)}}),The=Kv({prefix:"\0",name:"identity",encode:t=>_he(t),decode:t=>bhe(t)});var Nhe=Object.freeze({__proto__:null,identity:The});const Phe=Zn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var khe=Object.freeze({__proto__:null,base2:Phe});const Ohe=Zn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Rhe=Object.freeze({__proto__:null,base8:Ohe});const $he=vm({prefix:"9",name:"base10",alphabet:"0123456789"});var Dhe=Object.freeze({__proto__:null,base10:$he});const jhe=Zn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Uhe=Zn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Lhe=Object.freeze({__proto__:null,base16:jhe,base16upper:Uhe});const Mhe=Zn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Bhe=Zn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Fhe=Zn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),zhe=Zn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),qhe=Zn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Whe=Zn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Hhe=Zn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Vhe=Zn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ghe=Zn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Khe=Object.freeze({__proto__:null,base32:Mhe,base32upper:Bhe,base32pad:Fhe,base32padupper:zhe,base32hex:qhe,base32hexupper:Whe,base32hexpad:Hhe,base32hexpadupper:Vhe,base32z:Ghe});const Yhe=vm({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Qhe=vm({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Jhe=Object.freeze({__proto__:null,base36:Yhe,base36upper:Qhe});const Zhe=vm({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Xhe=vm({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var efe=Object.freeze({__proto__:null,base58btc:Zhe,base58flickr:Xhe});const tfe=Zn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),nfe=Zn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),rfe=Zn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),sfe=Zn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var ife=Object.freeze({__proto__:null,base64:tfe,base64pad:nfe,base64url:rfe,base64urlpad:sfe});const _4=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),ofe=_4.reduce((t,e,n)=>(t[n]=e,t),[]),afe=_4.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function cfe(t){return t.reduce((e,n)=>(e+=ofe[n],e),"")}function lfe(t){const e=[];for(const n of t){const r=afe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const ufe=Kv({prefix:"🚀",name:"base256emoji",encode:cfe,decode:lfe});var dfe=Object.freeze({__proto__:null,base256emoji:ufe}),hfe=E4,mk=128,ffe=-128,pfe=Math.pow(2,31);function E4(t,e,n){e=e||[],n=n||0;for(var r=n;t>=pfe;)e[n++]=t&255|mk,t/=128;for(;t&ffe;)e[n++]=t&255|mk,t>>>=7;return e[n]=t|0,E4.bytes=n-r+1,e}var gfe=gx,mfe=128,yk=127;function gx(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw gx.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&yk)<<s:(o&yk)*Math.pow(2,s),s+=7}while(o>=mfe);return gx.bytes=i-r,n}var yfe=Math.pow(2,7),wfe=Math.pow(2,14),vfe=Math.pow(2,21),bfe=Math.pow(2,28),_fe=Math.pow(2,35),Efe=Math.pow(2,42),Cfe=Math.pow(2,49),xfe=Math.pow(2,56),Sfe=Math.pow(2,63),Afe=function(t){return t<yfe?1:t<wfe?2:t<vfe?3:t<bfe?4:t<_fe?5:t<Efe?6:t<Cfe?7:t<xfe?8:t<Sfe?9:10},Ife={encode:hfe,decode:gfe,encodingLength:Afe},C4=Ife;const wk=(t,e,n=0)=>(C4.encode(t,e,n),e),vk=t=>C4.encodingLength(t),mx=(t,e)=>{const n=e.byteLength,r=vk(t),s=r+vk(n),i=new Uint8Array(s+n);return wk(t,i,0),wk(n,i,r),i.set(e,s),new Tfe(t,n,e,i)};class Tfe{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const x4=({name:t,code:e,encode:n})=>new Nfe(t,e,n);class Nfe{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?mx(this.code,n):n.then(r=>mx(this.code,r))}else throw Error("Unknown type, must be binary type")}}const S4=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Pfe=x4({name:"sha2-256",code:18,encode:S4("SHA-256")}),kfe=x4({name:"sha2-512",code:19,encode:S4("SHA-512")});var Ofe=Object.freeze({__proto__:null,sha256:Pfe,sha512:kfe});const A4=0,Rfe="identity",I4=v4,$fe=t=>mx(A4,I4(t)),Dfe={code:A4,name:Rfe,encode:I4,digest:$fe};var jfe=Object.freeze({__proto__:null,identity:Dfe});new TextEncoder,new TextDecoder;const bk={...Nhe,...khe,...Rhe,...Dhe,...Lhe,...Khe,...Jhe,...efe,...ife,...dfe};({...Ofe,...jfe});function T4(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Ufe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?T4(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function N4(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const _k=N4("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),c_=N4("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=Ufe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),Lfe={utf8:_k,"utf-8":_k,hex:bk.base16,latin1:c_,ascii:c_,binary:c_,...bk};function Mfe(t,e="utf8"){const n=Lfe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?T4(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var Bfe=Object.defineProperty,Ffe=(t,e,n)=>e in t?Bfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mi=(t,e,n)=>Ffe(t,typeof e!="symbol"?e+"":e,n);class zfe{constructor(e,n){this.core=e,this.logger=n,Mi(this,"keychain",new Map),Mi(this,"name",zde),Mi(this,"version",qde),Mi(this,"initialized",!1),Mi(this,"storagePrefix",uo),Mi(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),Mi(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),Mi(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),Mi(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=ue("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),Mi(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=pr(n,this.name)}get context(){return rs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,JC(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ZC(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}var qfe=Object.defineProperty,Wfe=(t,e,n)=>e in t?qfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bn=(t,e,n)=>Wfe(t,typeof e!="symbol"?e+"":e,n);class Hfe{constructor(e,n,r){this.core=e,this.logger=n,Bn(this,"name",Bde),Bn(this,"keychain"),Bn(this,"randomSessionIdentifier",cx()),Bn(this,"initialized",!1),Bn(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Bn(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Bn(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=eP(s);return I6(i.publicKey)}),Bn(this,"generateKeyPair",()=>{this.isInitialized();const s=Lle();return this.setPrivateKey(s.publicKey,s.privateKey)}),Bn(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=eP(i),a=this.randomSessionIdentifier;return await Wre(a,s,Fde,o)}),Bn(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=Mle(a,i);return this.setSymKey(c,o)}),Bn(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||yw(s);return await this.keychain.set(o,s),o}),Bn(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Bn(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Bn(this,"encode",async(s,i,o)=>{this.isInitialized();const a=s4(o),c=ra(i);if(KP(a))return zle(c,o==null?void 0:o.encoding);if(GP(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return Ble({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),Bn(this,"decode",async(s,i,o)=>{this.isInitialized();const a=Wle(i,o);if(KP(a)){const c=qle(i,o==null?void 0:o.encoding);return ou(c)}if(GP(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=Fle({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return ou(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Bn(this,"getPayloadType",(s,i=vi)=>{const o=xg({encoded:s,encoding:i});return uu(o.type)}),Bn(this,"getPayloadSenderPublicKey",(s,i=vi)=>{const o=xg({encoded:s,encoding:i});return o.senderPublicKey?ts(o.senderPublicKey,Sr):void 0}),this.core=e,this.logger=pr(n,this.name),this.keychain=r||new zfe(this.core,this.logger)}get context(){return rs(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(fk)}catch{e=cx(),await this.keychain.set(fk,e)}return Mfe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Vfe=Object.defineProperty,Gfe=Object.defineProperties,Kfe=Object.getOwnPropertyDescriptors,Ek=Object.getOwnPropertySymbols,Yfe=Object.prototype.hasOwnProperty,Qfe=Object.prototype.propertyIsEnumerable,yx=(t,e,n)=>e in t?Vfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jfe=(t,e)=>{for(var n in e||(e={}))Yfe.call(e,n)&&yx(t,n,e[n]);if(Ek)for(var n of Ek(e))Qfe.call(e,n)&&yx(t,n,e[n]);return t},Zfe=(t,e)=>Gfe(t,Kfe(e)),as=(t,e,n)=>yx(t,typeof e!="symbol"?e+"":e,n);class Xfe extends zee{constructor(e,n){super(e,n),this.logger=e,this.core=n,as(this,"messages",new Map),as(this,"messagesWithoutClientAck",new Map),as(this,"name",Wde),as(this,"version",Hde),as(this,"initialized",!1),as(this,"storagePrefix",uo),as(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),as(this,"set",async(r,s,i)=>{this.isInitialized();const o=Zi(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===ww.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,Zfe(Jfe({},c),{[o]:s}))}return await this.persist(),o}),as(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),as(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),as(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Zi(s);return typeof i[o]<"u"}),as(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Zi(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),as(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=pr(e,this.name),this.core=n}get context(){return rs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,JC(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,JC(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ZC(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?ZC(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}var epe=Object.defineProperty,tpe=Object.defineProperties,npe=Object.getOwnPropertyDescriptors,Ck=Object.getOwnPropertySymbols,rpe=Object.prototype.hasOwnProperty,spe=Object.prototype.propertyIsEnumerable,wx=(t,e,n)=>e in t?epe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ry=(t,e)=>{for(var n in e||(e={}))rpe.call(e,n)&&wx(t,n,e[n]);if(Ck)for(var n of Ck(e))spe.call(e,n)&&wx(t,n,e[n]);return t},l_=(t,e)=>tpe(t,npe(e)),si=(t,e,n)=>wx(t,typeof e!="symbol"?e+"":e,n);class ipe extends qee{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,si(this,"events",new Qs.EventEmitter),si(this,"name",Vde),si(this,"queue",new Map),si(this,"publishTimeout",le.toMiliseconds(le.ONE_MINUTE)),si(this,"initialPublishTimeout",le.toMiliseconds(le.ONE_SECOND*15)),si(this,"needsTransportRestart",!1),si(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||pk,c=_0(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||Nl().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const y=({id:b})=>{h.opts.id===b&&(this.removeRequestFromQueue(b),this.relayer.events.removeListener(Pn.publish,y),g(h))};this.relayer.events.on(Pn.publish,y);const w=dc(new Promise((b,v)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(b).catch(E=>{this.logger.warn(E,E==null?void 0:E.message),v(E)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await w,this.events.removeListener(Pn.publish,y)}catch(b){this.queue.set(d,l_(Ry({},h),{attempt:1})),this.logger.warn(b,b==null?void 0:b.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await dc(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),si(this,"on",(r,s)=>{this.events.on(r,s)}),si(this,"once",(r,s)=>{this.events.once(r,s)}),si(this,"off",(r,s)=>{this.events.off(r,s)}),si(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=pr(n,this.name),this.registerEventListeners()}get context(){return rs(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=pk,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:qf(_0().protocol).publish,params:Ry({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};Wn((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),Wn((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(Pn.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,l_(Ry({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(l_(Ry({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(xu.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Pn.connection_stalled);return}this.checkQueue()}),this.relayer.on(Pn.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var ope=Object.defineProperty,ape=(t,e,n)=>e in t?ope(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hu=(t,e,n)=>ape(t,typeof e!="symbol"?e+"":e,n);class cpe{constructor(){Hu(this,"map",new Map),Hu(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),Hu(this,"get",e=>this.map.get(e)||[]),Hu(this,"exists",(e,n)=>this.get(e).includes(n)),Hu(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Hu(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var lpe=Object.defineProperty,upe=Object.defineProperties,dpe=Object.getOwnPropertyDescriptors,xk=Object.getOwnPropertySymbols,hpe=Object.prototype.hasOwnProperty,fpe=Object.prototype.propertyIsEnumerable,vx=(t,e,n)=>e in t?lpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cf=(t,e)=>{for(var n in e||(e={}))hpe.call(e,n)&&vx(t,n,e[n]);if(xk)for(var n of xk(e))fpe.call(e,n)&&vx(t,n,e[n]);return t},u_=(t,e)=>upe(t,dpe(e)),Nt=(t,e,n)=>vx(t,typeof e!="symbol"?e+"":e,n);class ppe extends Vee{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Nt(this,"subscriptions",new Map),Nt(this,"topicMap",new cpe),Nt(this,"events",new Qs.EventEmitter),Nt(this,"name",Xde),Nt(this,"version",ehe),Nt(this,"pending",new Map),Nt(this,"cached",[]),Nt(this,"initialized",!1),Nt(this,"storagePrefix",uo),Nt(this,"subscribeTimeout",le.toMiliseconds(le.ONE_MINUTE)),Nt(this,"initialSubscribeTimeout",le.toMiliseconds(le.ONE_SECOND*15)),Nt(this,"clientId"),Nt(this,"batchSubscribeTopicsLimit",500),Nt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Nt(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=_0(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),Nt(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),Nt(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),Nt(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),Nt(this,"on",(r,s)=>{this.events.on(r,s)}),Nt(this,"once",(r,s)=>{this.events.once(r,s)}),Nt(this,"off",(r,s)=>{this.events.off(r,s)}),Nt(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),Nt(this,"start",async()=>{await this.onConnect()}),Nt(this,"stop",async()=>{await this.onDisconnect()}),Nt(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Nt(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),Nt(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(xu.pulse,async()=>{await this.checkPending()}),this.events.on(us.created,async r=>{const s=us.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(us.deleted,async r=>{const s=us.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=pr(n,this.name),this.clientId=""}get context(){return rs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=_0(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=Wt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===Mt.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:qf(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===Mt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},le.toMiliseconds(le.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(us.created,d),u(h.id))};this.events.on(us.created,d);try{const h=await dc(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(us.created,d),u(h)}catch{}}),l=await dc(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Pn.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:qf(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await dc(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Pn.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:qf(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await dc(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Pn.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:qf(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,u_(Cf({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,Cf({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,Cf({},n)),this.topicMap.set(n.topic,e),this.events.emit(us.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(us.deleted,u_(Cf({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(us.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(us.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>u_(Cf({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await aae(le.toMiliseconds(le.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Zi(e+await this.getClientId())}}var gpe=Object.defineProperty,Sk=Object.getOwnPropertySymbols,mpe=Object.prototype.hasOwnProperty,ype=Object.prototype.propertyIsEnumerable,bx=(t,e,n)=>e in t?gpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ak=(t,e)=>{for(var n in e||(e={}))mpe.call(e,n)&&bx(t,n,e[n]);if(Sk)for(var n of Sk(e))ype.call(e,n)&&bx(t,n,e[n]);return t},lt=(t,e,n)=>bx(t,typeof e!="symbol"?e+"":e,n);class wpe extends Wee{constructor(e){super(e),lt(this,"protocol","wc"),lt(this,"version",2),lt(this,"core"),lt(this,"logger"),lt(this,"events",new Qs.EventEmitter),lt(this,"provider"),lt(this,"messages"),lt(this,"subscriber"),lt(this,"publisher"),lt(this,"name",Kde),lt(this,"transportExplicitlyClosed",!1),lt(this,"initialized",!1),lt(this,"connectionAttemptInProgress",!1),lt(this,"relayUrl"),lt(this,"projectId"),lt(this,"packageName"),lt(this,"bundleId"),lt(this,"hasExperiencedNetworkDisruption",!1),lt(this,"pingTimeout"),lt(this,"heartBeatTimeout",le.toMiliseconds(le.THIRTY_SECONDS+le.FIVE_SECONDS)),lt(this,"reconnectTimeout"),lt(this,"connectPromise"),lt(this,"reconnectInProgress",!1),lt(this,"requestsInFlight",[]),lt(this,"connectTimeout",le.toMiliseconds(le.ONE_SECOND*15)),lt(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||Nl().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),lt(this,"resetPingTimeout",()=>{y0()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),lt(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),lt(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(Pn.connect)}),lt(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),lt(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(Pn.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),lt(this,"registerProviderListeners",()=>{this.provider.on(Ps.payload,this.onPayloadHandler),this.provider.on(Ps.connect,this.onConnectHandler),this.provider.on(Ps.disconnect,this.onDisconnectHandler),this.provider.on(Ps.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?pr(e.logger,this.name):dm($h({level:e.logger||Gde})),this.messages=new Xfe(this.logger,e.core),this.subscriber=new ppe(this,this.logger),this.publisher=new ipe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||y4,this.projectId=e.projectId,Hoe()?this.packageName=gP():Voe()&&(this.bundleId=gP()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e==null?void 0:e.message))}get context(){return rs(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:Mt.relay},ww.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(us.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(us.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,Ak({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await dc(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await ik())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=wn(le.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(Pn.message,e),await this.recordMessageEvent(e,ww.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(Ps.disconnect,i),await dc(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Ps.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Ps.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Ps.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,le.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(y0())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Js(new jde(Joe({sdkVersion:px,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),dI(e)){if(!e.method.endsWith(Yde))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:Mt.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Ak({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else Gv(e)&&this.events.emit(Pn.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,ww.inbound),this.events.emit(Pn.message,e))}async acknowledgePayload(e){const n=Hv(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Ps.payload,this.onPayloadHandler),this.provider.off(Ps.connect,this.onConnectHandler),this.provider.off(Ps.disconnect,this.onDisconnectHandler),this.provider.off(Ps.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await ik();Uue(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(xu.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&Bue())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Pn.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},le.toMiliseconds(Qde)))))}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function vpe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function Ik(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Tk(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const bpe="[object RegExp]",_pe="[object String]",Epe="[object Number]",Cpe="[object Boolean]",Nk="[object Arguments]",xpe="[object Symbol]",Spe="[object Date]",Ape="[object Map]",Ipe="[object Set]",Tpe="[object Array]",Npe="[object Function]",Ppe="[object ArrayBuffer]",d_="[object Object]",kpe="[object Error]",Ope="[object DataView]",Rpe="[object Uint8Array]",$pe="[object Uint8ClampedArray]",Dpe="[object Uint16Array]",jpe="[object Uint32Array]",Upe="[object BigUint64Array]",Lpe="[object Int8Array]",Mpe="[object Int16Array]",Bpe="[object Int32Array]",Fpe="[object BigInt64Array]",zpe="[object Float32Array]",qpe="[object Float64Array]";function Wpe(){}function Pk(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function Hpe(t,e,n){return Wf(t,e,void 0,void 0,void 0,void 0,n)}function Wf(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return gp(t,e,i,o)}return gp(t,e,i,o)}function gp(t,e,n,r){if(Object.is(t,e))return!0;let s=Tk(t),i=Tk(e);if(s===Nk&&(s=d_),i===Nk&&(i=d_),s!==i)return!1;switch(s){case _pe:return t.toString()===e.toString();case Epe:{const c=t.valueOf(),l=e.valueOf();return vpe(c,l)}case Cpe:case Spe:case xpe:return Object.is(t.valueOf(),e.valueOf());case bpe:return t.source===e.source&&t.flags===e.flags;case Npe:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case Ape:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!Wf(l,e.get(c),c,t,e,n,r))return!1;return!0}case Ipe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>Wf(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case Tpe:case Rpe:case $pe:case Dpe:case jpe:case Upe:case Lpe:case Mpe:case Bpe:case Fpe:case zpe:case qpe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!Wf(t[c],e[c],c,t,e,n,r))return!1;return!0}case Ppe:return t.byteLength!==e.byteLength?!1:gp(new Uint8Array(t),new Uint8Array(e),n,r);case Ope:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:gp(new Uint8Array(t),new Uint8Array(e),n,r);case kpe:return t.name===e.name&&t.message===e.message;case d_:{if(!(gp(t.constructor,e.constructor,n,r)||Pk(t)&&Pk(e)))return!1;const c=[...Object.keys(t),...Ik(t)],l=[...Object.keys(e),...Ik(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!Wf(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function Vpe(t,e){return Hpe(t,e,Wpe)}var Gpe=Object.defineProperty,kk=Object.getOwnPropertySymbols,Kpe=Object.prototype.hasOwnProperty,Ype=Object.prototype.propertyIsEnumerable,_x=(t,e,n)=>e in t?Gpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ok=(t,e)=>{for(var n in e||(e={}))Kpe.call(e,n)&&_x(t,n,e[n]);if(kk)for(var n of kk(e))Ype.call(e,n)&&_x(t,n,e[n]);return t},Dr=(t,e,n)=>_x(t,typeof e!="symbol"?e+"":e,n);class Iu extends Hee{constructor(e,n,r,s=uo,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Dr(this,"map",new Map),Dr(this,"version",Jde),Dr(this,"cached",[]),Dr(this,"initialized",!1),Dr(this,"getKey"),Dr(this,"storagePrefix",uo),Dr(this,"recentlyDeleted",[]),Dr(this,"recentlyDeletedLimit",200),Dr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Wn(o)?this.map.set(this.getKey(o),o):pue(o)?this.map.set(o.id,o):gue(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Dr(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Dr(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Dr(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>Vpe(a[c],o[c]))):this.values)),Dr(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=Ok(Ok({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Dr(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=pr(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return rs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=ue("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Qpe=Object.defineProperty,Jpe=(t,e,n)=>e in t?Qpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,et=(t,e,n)=>Jpe(t,typeof e!="symbol"?e+"":e,n);class Zpe{constructor(e,n){this.core=e,this.logger=n,et(this,"name",the),et(this,"version",nhe),et(this,"events",new RA),et(this,"pairings"),et(this,"initialized",!1),et(this,"storagePrefix",uo),et(this,"ignoredPayloadTypes",[Vo]),et(this,"registeredMethods",[]),et(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),et(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),et(this,"create",async r=>{this.isInitialized();const s=cx(),i=await this.core.crypto.setSymKey(s),o=wn(le.FIVE_MINUTES),a={protocol:m4},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=QP({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(ml.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),et(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[qi.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=YP(r.uri);s.props.properties.topic=i,s.addTrace(qi.pairing_uri_validation_success),s.addTrace(qi.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(qi.existing_pairing),u.active)throw s.setError(Po.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(qi.pairing_not_expired)}const d=c||wn(le.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(qi.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(ml.create,h),s.addTrace(qi.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(qi.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Po.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(Po.subscribe_pairing_topic_failure),f}return s.addTrace(qi.subscribe_pairing_topic_success),h}),et(this,"activate",async({topic:r})=>{this.isInitialized();const s=wn(le.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),et(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=hl();this.events.once(pt("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),et(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),et(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),et(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),et(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Wt("USER_DISCONNECTED")),await this.deletePairing(s))}),et(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return QP({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),et(this,"sendRequest",async(r,s,i)=>{const o=hc(s,i),a=await this.core.crypto.encode(r,o),c=_f[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),et(this,"sendResult",async(r,s,i)=>{const o=Hv(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=_f[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),et(this,"sendError",async(r,s,i)=>{const o=Vv(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=_f[c]?_f[c].res:_f.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),et(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,Wt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),et(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Ba(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),et(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),et(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),et(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(ml.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),et(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{Vi(s)?this.events.emit(pt("pairing_ping",i),{}):Us(s)&&this.events.emit(pt("pairing_ping",i),{error:s.error})},500)}),et(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(ml.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),et(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=Wt("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),et(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(Wt("WC_METHOD_UNSUPPORTED",r))}),et(this,"isValidPair",(r,s)=>{var i;if(!Br(r)){const{message:a}=ue("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(Po.malformed_pairing_uri),new Error(a)}if(!fue(r.uri)){const{message:a}=ue("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(Po.malformed_pairing_uri),new Error(a)}const o=YP(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=ue("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Po.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=ue("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Po.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&le.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(Po.pairing_expired);const{message:a}=ue("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),et(this,"isValidPing",async r=>{if(!Br(r)){const{message:i}=ue("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),et(this,"isValidDisconnect",async r=>{if(!Br(r)){const{message:i}=ue("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),et(this,"isValidPairingTopic",async r=>{if(!hn(r,!1)){const{message:s}=ue("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=ue("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Ba(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=ue("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=pr(n,this.name),this.pairings=new Iu(this.core,this.logger,this.name,this.storagePrefix)}get context(){return rs(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Pn.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==Mt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);dI(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):Gv(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Ds.expired,async e=>{const{topic:n}=pj(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(ml.expire,{topic:n}))})}}var Xpe=Object.defineProperty,ege=(t,e,n)=>e in t?Xpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fn=(t,e,n)=>ege(t,typeof e!="symbol"?e+"":e,n);class tge extends Fee{constructor(e,n){super(e,n),this.core=e,this.logger=n,Fn(this,"records",new Map),Fn(this,"events",new Qs.EventEmitter),Fn(this,"name",rhe),Fn(this,"version",she),Fn(this,"cached",[]),Fn(this,"initialized",!1),Fn(this,"storagePrefix",uo),Fn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Fn(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:wn(le.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(ni.created,o)}),Fn(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Us(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(ni.updated,s))}),Fn(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),Fn(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(ni.deleted,i)}}),this.persist()}),Fn(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),Fn(this,"on",(r,s)=>{this.events.on(r,s)}),Fn(this,"once",(r,s)=>{this.events.once(r,s)}),Fn(this,"off",(r,s)=>{this.events.off(r,s)}),Fn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=pr(n,this.name)}get context(){return rs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:hc(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ni.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ni.created,e=>{const n=ni.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(ni.updated,e=>{const n=ni.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(ni.deleted,e=>{const n=ni.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(xu.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{le.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(ni.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}var nge=Object.defineProperty,rge=(t,e,n)=>e in t?nge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cr=(t,e,n)=>rge(t,typeof e!="symbol"?e+"":e,n);class sge extends Gee{constructor(e,n){super(e,n),this.core=e,this.logger=n,cr(this,"expirations",new Map),cr(this,"events",new Qs.EventEmitter),cr(this,"name",ihe),cr(this,"version",ohe),cr(this,"cached",[]),cr(this,"initialized",!1),cr(this,"storagePrefix",uo),cr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),cr(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),cr(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(Ds.created,{target:i,expiration:o})}),cr(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),cr(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Ds.deleted,{target:s,expiration:i})}}),cr(this,"on",(r,s)=>{this.events.on(r,s)}),cr(this,"once",(r,s)=>{this.events.once(r,s)}),cr(this,"off",(r,s)=>{this.events.off(r,s)}),cr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=pr(n,this.name)}get context(){return rs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Zoe(e);if(typeof e=="number")return Xoe(e);const{message:n}=ue("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Ds.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;le.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(Ds.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(xu.pulse,()=>this.checkExpirations()),this.events.on(Ds.created,e=>{const n=Ds.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Ds.expired,e=>{const n=Ds.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Ds.deleted,e=>{const n=Ds.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}var ige=Object.defineProperty,oge=(t,e,n)=>e in t?ige(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,un=(t,e,n)=>oge(t,typeof e!="symbol"?e+"":e,n);class age extends Kee{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,un(this,"name",ahe),un(this,"abortController"),un(this,"isDevEnv"),un(this,"verifyUrlV3",lhe),un(this,"storagePrefix",uo),un(this,"version",g4),un(this,"publicKey"),un(this,"fetchPromise"),un(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&le.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),un(this,"register",async s=>{if(!Bh()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=au(),u=this.startAbortTimer(le.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",y),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const y=w=>{if(w.data&&typeof w.data=="string")try{const b=JSON.parse(w.data);if(b.type==="verify_attestation"){if(WC(b.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",y),h(b.attestation===null?"":b.attestation)}}catch(b){this.logger.warn(b)}};l.body.appendChild(g),window.addEventListener("message",y,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),un(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(WC(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),un(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(le.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),un(this,"getVerifyUrl",s=>{let i=s||pp;return uhe.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${pp}`),i=pp),i}),un(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(le.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),un(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),un(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),un(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),un(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),un(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),un(this,"validateAttestation",(s,i)=>{const o=Vle(s,i.publicKey),a={hasExpired:le.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=pr(n,this.name),this.abortController=new AbortController,this.isDevEnv=QA(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return rs(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),le.toMiliseconds(e))}}var cge=Object.defineProperty,lge=(t,e,n)=>e in t?cge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rk=(t,e,n)=>lge(t,typeof e!="symbol"?e+"":e,n);class uge extends Yee{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,Rk(this,"context",dhe),Rk(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${hhe}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=pr(n,this.context)}}var dge=Object.defineProperty,$k=Object.getOwnPropertySymbols,hge=Object.prototype.hasOwnProperty,fge=Object.prototype.propertyIsEnumerable,Ex=(t,e,n)=>e in t?dge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xf=(t,e)=>{for(var n in e||(e={}))hge.call(e,n)&&Ex(t,n,e[n]);if($k)for(var n of $k(e))fge.call(e,n)&&Ex(t,n,e[n]);return t},Sn=(t,e,n)=>Ex(t,typeof e!="symbol"?e+"":e,n);class pge extends Qee{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,Sn(this,"context",phe),Sn(this,"storagePrefix",uo),Sn(this,"storageVersion",fhe),Sn(this,"events",new Map),Sn(this,"shouldPersist",!1),Sn(this,"init",async()=>{if(!QA())try{const s={eventId:yP(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:hj(this.core.relayer.protocol,this.core.relayer.version,px)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Sn(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=yP(),u=this.core.projectId||"",d=Date.now(),h=xf({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),Sn(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return xf(xf({},a),this.setMethods(a.eventId))}),Sn(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Sn(this,"setEventListeners",()=>{this.core.heartbeat.on(xu.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{le.fromMiliseconds(Date.now())-le.fromMiliseconds(s.timestamp)>ghe&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Sn(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Sn(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Sn(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Sn(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Sn(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,xf(xf({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Sn(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Sn(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${mhe}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${px}${i}`,{method:"POST",body:JSON.stringify(s)})}),Sn(this,"getAppDomain",()=>dj().url),this.logger=pr(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var gge=Object.defineProperty,Dk=Object.getOwnPropertySymbols,mge=Object.prototype.hasOwnProperty,yge=Object.prototype.propertyIsEnumerable,Cx=(t,e,n)=>e in t?gge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jk=(t,e)=>{for(var n in e||(e={}))mge.call(e,n)&&Cx(t,n,e[n]);if(Dk)for(var n of Dk(e))yge.call(e,n)&&Cx(t,n,e[n]);return t},kt=(t,e,n)=>Cx(t,typeof e!="symbol"?e+"":e,n);let wge=class P4 extends Uee{constructor(e){var n;super(e),kt(this,"protocol",p4),kt(this,"version",g4),kt(this,"name",fx),kt(this,"relayUrl"),kt(this,"projectId"),kt(this,"customStoragePrefix"),kt(this,"events",new Qs.EventEmitter),kt(this,"logger"),kt(this,"heartbeat"),kt(this,"relayer"),kt(this,"crypto"),kt(this,"storage"),kt(this,"history"),kt(this,"expirer"),kt(this,"pairing"),kt(this,"verify"),kt(this,"echoClient"),kt(this,"linkModeSupportedApps"),kt(this,"eventClient"),kt(this,"initialized",!1),kt(this,"logChunkController"),kt(this,"on",(a,c)=>this.events.on(a,c)),kt(this,"once",(a,c)=>this.events.once(a,c)),kt(this,"off",(a,c)=>this.events.off(a,c)),kt(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),kt(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:Mt.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||y4,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=$h({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:Lde.logger,name:fx}),{logger:i,chunkLoggerController:o}=DA({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=pr(i,this.name),this.heartbeat=new SX,this.crypto=new Hfe(this,this.logger,e==null?void 0:e.keychain),this.history=new tge(this,this.logger),this.expirer=new sge(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new aee(jk(jk({},Mde),e==null?void 0:e.storageOptions)),this.relayer=new wpe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Zpe(this,this.logger),this.verify=new age(this,this.logger,this.storage),this.echoClient=new uge(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new pge(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new P4(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(Zde,r),n}get context(){return rs(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(gk,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(gk)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&Ude.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const vge=wge,k4="wc",O4=2,R4="client",hI=`${k4}@${O4}:${R4}:`,h_={name:R4,logger:"error"},Uk="WALLETCONNECT_DEEPLINK_CHOICE",bge="proposal",Lk="Proposal expired",_ge="session",Vu=le.SEVEN_DAYS,Ege="engine",An={wc_sessionPropose:{req:{ttl:le.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:le.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:le.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:le.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:le.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:le.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:le.ONE_DAY,prompt:!1,tag:1104},res:{ttl:le.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:le.ONE_DAY,prompt:!1,tag:1106},res:{ttl:le.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:le.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:le.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:le.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:le.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:le.ONE_DAY,prompt:!1,tag:1112},res:{ttl:le.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:le.ONE_DAY,prompt:!1,tag:1114},res:{ttl:le.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:le.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:le.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:le.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:le.FIVE_MINUTES,prompt:!1,tag:1119}}},f_={min:le.FIVE_MINUTES,max:le.SEVEN_DAYS},Bi={idle:"IDLE",active:"ACTIVE"},Cge={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},xge="request",Sge=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],Age="wc",Ige="auth",Tge="authKeys",Nge="pairingTopics",Pge="requests",Yv=`${Age}@${1.5}:${Ige}:`,vw=`${Yv}:PUB_KEY`;var kge=Object.defineProperty,Oge=Object.defineProperties,Rge=Object.getOwnPropertyDescriptors,Mk=Object.getOwnPropertySymbols,$ge=Object.prototype.hasOwnProperty,Dge=Object.prototype.propertyIsEnumerable,xx=(t,e,n)=>e in t?kge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ut=(t,e)=>{for(var n in e||(e={}))$ge.call(e,n)&&xx(t,n,e[n]);if(Mk)for(var n of Mk(e))Dge.call(e,n)&&xx(t,n,e[n]);return t},jr=(t,e)=>Oge(t,Rge(e)),re=(t,e,n)=>xx(t,typeof e!="symbol"?e+"":e,n);class jge extends ete{constructor(e){super(e),re(this,"name",Ege),re(this,"events",new RA),re(this,"initialized",!1),re(this,"requestQueue",{state:Bi.idle,queue:[]}),re(this,"sessionRequestQueue",{state:Bi.idle,queue:[]}),re(this,"requestQueueDelay",le.ONE_SECOND),re(this,"expectedPairingMethodMap",new Map),re(this,"recentlyDeletedMap",new Map),re(this,"recentlyDeletedLimit",200),re(this,"relayMessageCache",[]),re(this,"pendingSessions",new Map),re(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(An)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},le.toMiliseconds(this.requestQueueDelay)))}),re(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=jr(Ut({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=cue(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const x=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=x.active}}catch(x){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),x}if(!u||!h){const{topic:x,uri:S}=await this.client.core.pairing.create();u=x,d=S}if(!u){const{message:x}=ue("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(x)}const f=await this.client.core.crypto.generateKeyPair(),p=An.wc_sessionPropose.req.ttl||le.FIVE_MINUTES,g=wn(p),y=jr(Ut(Ut({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:m4}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Hi()}),w=pt("session_connect",y.id),{reject:b,resolve:v,done:E}=hl(p,Lk),_=({id:x})=>{x===y.id&&(this.client.events.off("proposal_expire",_),this.pendingSessions.delete(y.id),this.events.emit(w,{error:{message:Lk,code:0}}))};return this.client.events.on("proposal_expire",_),this.events.once(w,({error:x,session:S})=>{this.client.events.off("proposal_expire",_),x?b(x):S&&v(S)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:y,throwOnFailedPublish:!0,clientRpcId:y.id}),await this.setProposal(y.id,y),{uri:d,approval:E}}),re(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),re(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[ri.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(C){throw o.setError(rl.no_internet_connection),C}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(C){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(rl.proposal_not_found),C}try{await this.isValidApprove(n)}catch(C){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(rl.session_approve_namespace_validation_failure),C}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:y,optionalNamespaces:w}=f;let b=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});b||(b=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:ri.session_approve_started,properties:{topic:p,trace:[ri.session_approve_started,ri.session_namespaces_validation_success]}}));const v=await this.client.core.crypto.generateKeyPair(),E=g.publicKey,_=await this.client.core.crypto.generateSharedKey(v,E),x=Ut(Ut(Ut({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:v,metadata:this.client.metadata},expiry:wn(Vu)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),S=Mt.relay;b.addTrace(ri.subscribing_session_topic);try{await this.client.core.relayer.subscribe(_,{transportType:S})}catch(C){throw b.setError(rl.subscribe_session_topic_failure),C}b.addTrace(ri.subscribe_session_topic_success);const N=jr(Ut({},x),{topic:_,requiredNamespaces:y,optionalNamespaces:w,pairingTopic:p,acknowledged:!1,self:x.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:v,transportType:Mt.relay});await this.client.session.set(_,N),b.addTrace(ri.store_session);try{b.addTrace(ri.publishing_session_settle),await this.sendRequest({topic:_,method:"wc_sessionSettle",params:x,throwOnFailedPublish:!0}).catch(C=>{throw b==null||b.setError(rl.session_settle_publish_failure),C}),b.addTrace(ri.session_settle_publish_success),b.addTrace(ri.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:v},throwOnFailedPublish:!0}).catch(C=>{throw b==null||b.setError(rl.session_approve_publish_failure),C}),b.addTrace(ri.session_approve_publish_success)}catch(C){throw this.client.logger.error(C),this.client.session.delete(_,Wt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(_),C}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(_,wn(Vu)),{topic:_,acknowledged:()=>Promise.resolve(this.client.session.get(_))}}),re(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&await this.sendError({id:r,topic:i,error:s,rpcOpts:An.wc_sessionPropose.reject}),await this.deleteProposal(r)}),re(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=hl(),c=Hi(),l=Nl().toString(),u=this.client.session.get(r).namespaces;return this.events.once(pt("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),re(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=Hi(),{done:i,resolve:o,reject:a}=hl();return this.events.once(pt("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,wn(Vu)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),re(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:s,topic:i,expiry:o=An.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===Mt.relay&&await this.confirmOnlineStateOrThrow();const c=Hi(),l=Nl().toString(),{done:u,resolve:d,reject:h}=hl(o,"Request expired. Please try again.");this.events.once(pt("session_request",c),({error:y,result:w})=>{y?h(y):d(w)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:jr(Ut({},s),{expiryTimestamp:wn(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:jr(Ut({},s),{expiryTimestamp:wn(o)}),chainId:r};return await Promise.all([new Promise(async y=>{await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,g)}).catch(w=>h(w)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),y()}),new Promise(async y=>{var w;if(!((w=a.sessionConfig)!=null&&w.disableDeepLink)){const b=await rae(this.client.core.storage,Uk);await eae({id:c,topic:i,wcDeepLink:b})}y()}),u()]).then(y=>y[2])}),re(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===Mt.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Vi(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):Us(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),re(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=Hi(),i=Nl().toString(),{done:o,resolve:a,reject:c}=hl();this.events.once(pt("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),re(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=Nl().toString(),a=Hi();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),re(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Wt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=ue("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),re(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>due(r,n)))),re(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),re(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Mt.link_mode:Mt.relay;o===Mt.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:y}=n,w=[...n.resources||[]],{topic:b,uri:v}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:v}});const E=await this.client.core.crypto.generateKeyPair(),_=yw(E);if(await Promise.all([this.client.auth.authKeys.set(vw,{responseTopic:_,publicKey:E}),this.client.auth.pairingTopics.set(_,{topic:_,pairingTopic:b})]),await this.client.core.relayer.subscribe(_,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${b}`),g.length>0){const{namespace:k}=Md(a[0]);let L=wce(k,"request",g);mw(w)&&(L=bce(L,w.pop())),w.push(L)}const x=y&&y>An.wc_sessionAuthenticate.req.ttl?y:An.wc_sessionAuthenticate.req.ttl,S={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:w},requester:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:wn(x)},N={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},C={requiredNamespaces:{},optionalNamespaces:N,relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:wn(An.wc_sessionPropose.req.ttl),id:Hi()},{done:O,resolve:R,reject:B}=hl(x,"Request expired"),H=Hi(),F=pt("session_connect",C.id),A=pt("session_request",H),I=async({error:k,session:L})=>{this.events.off(A,U),k?B(k):L&&R({session:L})},U=async k=>{var L,W,K;if(await this.deletePendingAuthRequest(H,{message:"fulfilled",code:0}),k.error){const Oe=Wt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return k.error.code===Oe.code?void 0:(this.events.off(F,I),B(k.error.message))}await this.deleteProposal(C.id),this.events.off(F,I);const{cacaos:Z,responder:Q}=k.result,te=[],oe=[];for(const Oe of Z){await TP({cacao:Oe,projectId:this.client.core.projectId})||(this.client.logger.error(Oe,"Signature verification failed"),B(Wt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Le}=Oe,Je=mw(Le.resources),zt=[XC(Le.iss)],Fe=w0(Le.iss);if(Je){const ze=NP(Je),qt=PP(Je);te.push(...ze),zt.push(...qt)}for(const ze of zt)oe.push(`${ze}:${Fe}`)}const me=await this.client.core.crypto.generateSharedKey(E,Q.publicKey);let je;te.length>0&&(je={topic:me,acknowledged:!0,self:{publicKey:E,metadata:this.client.metadata},peer:Q,controller:Q.publicKey,expiry:wn(Vu),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:ek([...new Set(te)],[...new Set(oe)]),transportType:o},await this.client.core.relayer.subscribe(me,{transportType:o}),await this.client.session.set(me,je),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:Q.metadata}),je=this.client.session.get(me)),(L=this.client.metadata.redirect)!=null&&L.linkMode&&(W=Q.metadata.redirect)!=null&&W.linkMode&&(K=Q.metadata.redirect)!=null&&K.universal&&r&&(this.client.core.addLinkModeSupportedApp(Q.metadata.redirect.universal),this.client.session.update(me,{transportType:Mt.link_mode})),R({auths:Z,session:je})};this.events.once(F,I),this.events.once(A,U);let T;try{if(i){const k=hc("wc_sessionAuthenticate",S,H);this.client.core.history.set(b,k);const L=await this.client.core.crypto.encode("",k,{type:wm,encoding:Ga});T=Oy(r,b,L)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:S,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:H}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:C,expiry:An.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:C.id})])}catch(k){throw this.events.off(F,I),this.events.off(A,U),k}return await this.setProposal(C.id,C),await this.setAuthRequest(H,{request:jr(Ut({},S),{verifyContext:{}}),pairingTopic:b,transportType:o}),{uri:T??v,response:O}}),re(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[sl.authenticated_session_approve_started]}});try{this.isInitialized()}catch(y){throw i.setError(Ef.no_internet_connection),y}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(Ef.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||Mt.relay;a===Mt.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=yw(c),d={type:Vo,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const y of s){if(!await TP({cacao:y,projectId:this.client.core.projectId})){i.setError(Ef.invalid_cacao);const _=Wt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:_,encodeOpts:d}),new Error(_.message)}i.addTrace(sl.cacaos_verified);const{p:w}=y,b=mw(w.resources),v=[XC(w.iss)],E=w0(w.iss);if(b){const _=NP(b),x=PP(b);h.push(..._),v.push(...x)}for(const _ of v)f.push(`${_}:${E}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(sl.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:wn(Vu),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:ek([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(sl.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(y){throw i.setError(Ef.subscribe_authenticated_session_topic_failure),y}i.addTrace(sl.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(sl.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(sl.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(y){throw i.setError(Ef.authenticated_session_approve_publish_failure),y}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),re(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===Mt.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=yw(o),l={type:Vo,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:An.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),re(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return Nj(r,s)}),re(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),re(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),re(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Wt("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(Uk).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,Wt("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Bi.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),re(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(rl.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,Wt("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),re(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=Bi.idle,this.client.events.emit("session_request_expire",{id:n}))}),re(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),re(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),re(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,wn(An.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),re(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=Mt.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),re(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||wn(An.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),re(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=hc(s,i,c);let f;const p=!!u;try{const w=p?Ga:vi;f=await this.client.core.crypto.encode(r,h,{encoding:w})}catch(w){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),w}let g;if(Sge.includes(s)){const w=Zi(JSON.stringify(h)),b=Zi(f);g=await this.client.core.verify.register({id:b,decryptedId:w})}const y=An[s].req;if(y.attestation=g,o&&(y.ttl=o),a&&(y.id=a),this.client.core.history.set(r,h),p){const w=Oy(u,r,f);await global.Linking.openURL(w,this.client.name)}else{const w=An[s].req;o&&(w.ttl=o),a&&(w.id=a),w.tvf=jr(Ut({},d),{correlationId:h.id}),l?(w.internal=jr(Ut({},w.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,w)):this.client.core.relayer.publish(r,f,w).catch(b=>this.client.logger.error(b))}return h.id}),re(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=Hv(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?Ga:vi;u=await this.client.core.crypto.encode(s,l,jr(Ut({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{f=this.getTVFParams(r,p.params,i)}catch(g){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${g==null?void 0:g.message}`)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=Oy(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=An[p].res;g.tvf=jr(Ut({},f),{correlationId:r}),o?(g.internal=jr(Ut({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(y=>this.client.logger.error(y))}await this.client.core.history.resolve(l)}),re(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=Vv(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?Ga:vi;u=await this.client.core.crypto.encode(s,l,jr(Ut({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=Oy(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||An[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),re(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Ba(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Ba(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),re(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),re(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),re(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Bi.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Bi.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Bi.idle}),re(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),re(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),re(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=ue("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),re(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),re(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(Po.proposal_listener_not_found)),this.isValidConnect(Ut({},s.params));const u=a.expiryTimestamp||wn(An.wc_sessionPropose.req.ttl),d=Ut({id:c,pairingTopic:r,expiryTimestamp:u,attestation:i,encryptedId:o},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:Zi(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(qi.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:An.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),re(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(Vi(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Us(r)){await this.deleteProposal(i);const o=pt("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),re(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(y=>y.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=jr(Ut(Ut(Ut({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:Mt.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(pt("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),re(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;Vi(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(pt("session_approve",s),{})):Us(r)&&(await this.client.session.delete(n,Wt("USER_DISCONNECTED")),this.events.emit(pt("session_approve",s),{error:r.error}))}),re(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=bf.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:Wt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Ut({topic:n},s));try{bf.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0})}catch(c){throw bf.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),re(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),re(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=pt("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Vi(r)?this.events.emit(pt("session_update",s),{}):Us(r)&&this.events.emit(pt("session_update",s),{error:r.error})}),re(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,wn(Vu)),await this.sendResult({id:s,topic:n,result:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),re(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=pt("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Vi(r)?this.events.emit(pt("session_extend",s),{}):Us(r)&&this.events.emit(pt("session_extend",s),{error:r.error})}),re(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),re(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=pt("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Vi(r)?this.events.emit(pt("session_ping",s),{}):Us(r)&&this.events.emit(pt("session_ping",s),{error:r.error})},500)}),re(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(Pn.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:Wt("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),re(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(Ut({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Zi(JSON.stringify(hc("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===Mt.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),re(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=pt("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Vi(r)?this.events.emit(pt("session_request",s),{result:r.result}):Us(r)&&this.events.emit(pt("session_request",s),{error:r.error})}),re(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=bf.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Ut({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),bf.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),re(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Vi(r)?this.events.emit(pt("session_request",s),{result:r.result}):Us(r)&&this.events.emit(pt("session_request",s),{error:r.error})}),re(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:Zi(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===Mt.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:Vo,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:An.wc_sessionAuthenticate.autoReject,appLink:h})}}),re(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),re(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Bi.idle,this.processSessionRequestQueue()},le.toMiliseconds(this.requestQueueDelay))}),re(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=pt("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(pt("session_request",i.request.id),{error:r})})}),re(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Bi.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Bi.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),re(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),re(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:hc("wc_sessionPropose",jr(Ut({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),re(this,"isValidConnect",async n=>{if(!Br(n)){const{message:l}=ue("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Wn(r)||await this.isValidPairingTopic(r),!Cue(c)){const{message:l}=ue("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Wn(s)&&Tc(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!Wn(i)&&Tc(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Wn(o)||this.validateSessionProps(o,"sessionProperties"),!Wn(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),re(this,"validateNamespaces",(n,r)=>{const s=Eue(n,"connect()",r);if(s)throw new Error(s.message)}),re(this,"isValidApprove",async n=>{if(!Br(n))throw new Error(ue("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=o_(s,"approve()");if(l)throw new Error(l.message);const u=rk(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!hn(i,!0)){const{message:d}=ue("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(Wn(o)||this.validateSessionProps(o,"sessionProperties"),!Wn(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),re(this,"isValidReject",async n=>{if(!Br(n)){const{message:i}=ue("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!Sue(s)){const{message:i}=ue("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),re(this,"isValidSessionSettleRequest",n=>{if(!Br(n)){const{message:l}=ue("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!o4(r)){const{message:l}=ue("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=mue(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=o_(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Ba(o)){const{message:l}=ue("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),re(this,"isValidUpdate",async n=>{if(!Br(n)){const{message:c}=ue("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=o_(s,"update()");if(o)throw new Error(o.message);const a=rk(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),re(this,"isValidExtend",async n=>{if(!Br(n)){const{message:s}=ue("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),re(this,"isValidRequest",async n=>{if(!Br(n)){const{message:c}=ue("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!nk(a,i)){const{message:c}=ue("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!Aue(s)){const{message:c}=ue("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!Nue(a,i,s.method)){const{message:c}=ue("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!Rue(o,f_)){const{message:c}=ue("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${f_.min} and ${f_.max}`);throw new Error(c)}}),re(this,"isValidRespond",async n=>{var r;if(!Br(n)){const{message:o}=ue("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!Iue(i)){const{message:o}=ue("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),re(this,"isValidPing",async n=>{if(!Br(n)){const{message:s}=ue("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),re(this,"isValidEmit",async n=>{if(!Br(n)){const{message:a}=ue("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!nk(o,i)){const{message:a}=ue("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!Tue(s)){const{message:a}=ue("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!Pue(o,i,s.name)){const{message:a}=ue("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),re(this,"isValidDisconnect",async n=>{if(!Br(n)){const{message:s}=ue("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),re(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!hn(s,!1))throw new Error("uri is required parameter");if(!hn(i,!1))throw new Error("domain is required parameter");if(!hn(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>Md(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Md(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),re(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||pp,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Mt.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),re(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=ue("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),re(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),re(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),re(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=ue("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),re(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==Mt.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),re(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),re(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=mP(n,"topic")||"",s=decodeURIComponent(mP(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:Mt.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),re(this,"registerLinkModeListeners",async()=>{var n;if(QA()||Kc()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),re(this,"getTVFParams",(n,r,s)=>{var i,o,a;if(!((i=r.request)!=null&&i.method))return{};const c={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const l=this.extractTxHashesFromResult(r.request,s);c.txHashes=l,c.contractAddresses=this.isValidContractData(r.request.params)?[(a=(o=r.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(l){this.client.logger.warn("Error getting TVF params",l)}return c}),re(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),re(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const i=n.method,o=Cge[i];if(i==="sui_signTransaction")return[nce(r.transactionBytes)];if(i==="near_signTransaction")return[xP(r)];if(i==="near_signTransactions")return r.map(c=>xP(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[Kue({transaction:n.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return Go(r)?r.map(c=>SP(c)):[SP(r)];if(i==="cosmos_signDirect")return[sce(r)];if(typeof r=="string")return[r];const a=r[o.key];if(Go(a))return i==="solana_signAllTransactions"?a.map(c=>tce(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Pn.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(vw)?this.client.auth.authKeys.get(vw):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===Mt.link_mode?Ga:vi});dI(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Zi(r)})):Gv(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Ds.expired,async e=>{const{topic:n,id:r}=pj(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,ue("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,ue("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(ml.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(ml.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!hn(e,!1)){const{message:n}=ue("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=ue("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Ba(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=ue("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!hn(e,!1)){const{message:n}=ue("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=ue("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Ba(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=ue("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=ue("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(hn(e,!1)){const{message:n}=ue("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=ue("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!xue(e)){const{message:n}=ue("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=ue("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Ba(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=ue("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class Uge extends Iu{constructor(e,n){super(e,n,bge,hI),this.core=e,this.logger=n}}let Lge=class extends Iu{constructor(e,n){super(e,n,_ge,hI),this.core=e,this.logger=n}};class Mge extends Iu{constructor(e,n){super(e,n,xge,hI,r=>r.id),this.core=e,this.logger=n}}class Bge extends Iu{constructor(e,n){super(e,n,Tge,Yv,()=>vw),this.core=e,this.logger=n}}class Fge extends Iu{constructor(e,n){super(e,n,Nge,Yv),this.core=e,this.logger=n}}class zge extends Iu{constructor(e,n){super(e,n,Pge,Yv,r=>r.id),this.core=e,this.logger=n}}var qge=Object.defineProperty,Wge=(t,e,n)=>e in t?qge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,p_=(t,e,n)=>Wge(t,typeof e!="symbol"?e+"":e,n);class Hge{constructor(e,n){this.core=e,this.logger=n,p_(this,"authKeys"),p_(this,"pairingTopics"),p_(this,"requests"),this.authKeys=new Bge(this.core,this.logger),this.pairingTopics=new Fge(this.core,this.logger),this.requests=new zge(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var Vge=Object.defineProperty,Gge=(t,e,n)=>e in t?Vge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tt=(t,e,n)=>Gge(t,typeof e!="symbol"?e+"":e,n);let Kge=class $4 extends Xee{constructor(e){super(e),tt(this,"protocol",k4),tt(this,"version",O4),tt(this,"name",h_.name),tt(this,"metadata"),tt(this,"core"),tt(this,"logger"),tt(this,"events",new Qs.EventEmitter),tt(this,"engine"),tt(this,"session"),tt(this,"proposal"),tt(this,"pendingRequest"),tt(this,"auth"),tt(this,"signConfig"),tt(this,"on",(r,s)=>this.events.on(r,s)),tt(this,"once",(r,s)=>this.events.once(r,s)),tt(this,"off",(r,s)=>this.events.off(r,s)),tt(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),tt(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),tt(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),tt(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),tt(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),tt(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),tt(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),tt(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),tt(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),tt(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),tt(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),tt(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),tt(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),tt(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),tt(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),tt(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),tt(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),tt(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),tt(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||h_.name,this.metadata=Koe(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:dm($h({level:(e==null?void 0:e.logger)||h_.logger}));this.core=(e==null?void 0:e.core)||new vge(e),this.logger=pr(n,this.name),this.session=new Lge(this.core,this.logger),this.proposal=new Uge(this.core,this.logger),this.pendingRequest=new Mge(this.core,this.logger),this.engine=new jge(this),this.auth=new Hge(this.core,this.logger)}static async init(e){const n=new $4(e);return await n.initialize(),n}get context(){return rs(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},le.toMiliseconds(le.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var Sx={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof rn<"u"&&rn,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof rn<"u"&&rn||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(A){return A&&DataView.prototype.isPrototypeOf(A)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(A){return A&&u.indexOf(Object.prototype.toString.call(A))>-1};function h(A){if(typeof A!="string"&&(A=String(A)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(A)||A==="")throw new TypeError('Invalid character in header field name: "'+A+'"');return A.toLowerCase()}function f(A){return typeof A!="string"&&(A=String(A)),A}function p(A){var I={next:function(){var U=A.shift();return{done:U===void 0,value:U}}};return c.iterable&&(I[Symbol.iterator]=function(){return I}),I}function g(A){this.map={},A instanceof g?A.forEach(function(I,U){this.append(U,I)},this):Array.isArray(A)?A.forEach(function(I){if(I.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+I.length);this.append(I[0],I[1])},this):A&&Object.getOwnPropertyNames(A).forEach(function(I){this.append(I,A[I])},this)}g.prototype.append=function(A,I){A=h(A),I=f(I);var U=this.map[A];this.map[A]=U?U+", "+I:I},g.prototype.delete=function(A){delete this.map[h(A)]},g.prototype.get=function(A){return A=h(A),this.has(A)?this.map[A]:null},g.prototype.has=function(A){return this.map.hasOwnProperty(h(A))},g.prototype.set=function(A,I){this.map[h(A)]=f(I)},g.prototype.forEach=function(A,I){for(var U in this.map)this.map.hasOwnProperty(U)&&A.call(I,this.map[U],U,this)},g.prototype.keys=function(){var A=[];return this.forEach(function(I,U){A.push(U)}),p(A)},g.prototype.values=function(){var A=[];return this.forEach(function(I){A.push(I)}),p(A)},g.prototype.entries=function(){var A=[];return this.forEach(function(I,U){A.push([U,I])}),p(A)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function y(A){if(!A._noBody){if(A.bodyUsed)return Promise.reject(new TypeError("Already read"));A.bodyUsed=!0}}function w(A){return new Promise(function(I,U){A.onload=function(){I(A.result)},A.onerror=function(){U(A.error)}})}function b(A){var I=new FileReader,U=w(I);return I.readAsArrayBuffer(A),U}function v(A){var I=new FileReader,U=w(I),T=/charset=([A-Za-z0-9_-]+)/.exec(A.type),k=T?T[1]:"utf-8";return I.readAsText(A,k),U}function E(A){for(var I=new Uint8Array(A),U=new Array(I.length),T=0;T<I.length;T++)U[T]=String.fromCharCode(I[T]);return U.join("")}function _(A){if(A.slice)return A.slice(0);var I=new Uint8Array(A.byteLength);return I.set(new Uint8Array(A)),I.buffer}function x(){return this.bodyUsed=!1,this._initBody=function(A){this.bodyUsed=this.bodyUsed,this._bodyInit=A,A?typeof A=="string"?this._bodyText=A:c.blob&&Blob.prototype.isPrototypeOf(A)?this._bodyBlob=A:c.formData&&FormData.prototype.isPrototypeOf(A)?this._bodyFormData=A:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(A)?this._bodyText=A.toString():c.arrayBuffer&&c.blob&&l(A)?(this._bodyArrayBuffer=_(A.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(A)||d(A))?this._bodyArrayBuffer=_(A):this._bodyText=A=Object.prototype.toString.call(A):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof A=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(A)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var A=y(this);if(A)return A;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var A=y(this);return A||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var A=y(this);if(A)return A;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(E(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(O)}),this.json=function(){return this.text().then(JSON.parse)},this}var S=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function N(A){var I=A.toUpperCase();return S.indexOf(I)>-1?I:A}function C(A,I){if(!(this instanceof C))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');I=I||{};var U=I.body;if(A instanceof C){if(A.bodyUsed)throw new TypeError("Already read");this.url=A.url,this.credentials=A.credentials,I.headers||(this.headers=new g(A.headers)),this.method=A.method,this.mode=A.mode,this.signal=A.signal,!U&&A._bodyInit!=null&&(U=A._bodyInit,A.bodyUsed=!0)}else this.url=String(A);if(this.credentials=I.credentials||this.credentials||"same-origin",(I.headers||!this.headers)&&(this.headers=new g(I.headers)),this.method=N(I.method||this.method||"GET"),this.mode=I.mode||this.mode||null,this.signal=I.signal||this.signal||function(){if("AbortController"in a){var L=new AbortController;return L.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&U)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(U),(this.method==="GET"||this.method==="HEAD")&&(I.cache==="no-store"||I.cache==="no-cache")){var T=/([?&])_=[^&]*/;if(T.test(this.url))this.url=this.url.replace(T,"$1_="+new Date().getTime());else{var k=/\?/;this.url+=(k.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}C.prototype.clone=function(){return new C(this,{body:this._bodyInit})};function O(A){var I=new FormData;return A.trim().split("&").forEach(function(U){if(U){var T=U.split("="),k=T.shift().replace(/\+/g," "),L=T.join("=").replace(/\+/g," ");I.append(decodeURIComponent(k),decodeURIComponent(L))}}),I}function R(A){var I=new g,U=A.replace(/\r?\n[\t ]+/g," ");return U.split("\r").map(function(T){return T.indexOf(`
`)===0?T.substr(1,T.length):T}).forEach(function(T){var k=T.split(":"),L=k.shift().trim();if(L){var W=k.join(":").trim();try{I.append(L,W)}catch(K){console.warn("Response "+K.message)}}}),I}x.call(C.prototype);function B(A,I){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(I||(I={}),this.type="default",this.status=I.status===void 0?200:I.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=I.statusText===void 0?"":""+I.statusText,this.headers=new g(I.headers),this.url=I.url||"",this._initBody(A)}x.call(B.prototype),B.prototype.clone=function(){return new B(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},B.error=function(){var A=new B(null,{status:200,statusText:""});return A.ok=!1,A.status=0,A.type="error",A};var H=[301,302,303,307,308];B.redirect=function(A,I){if(H.indexOf(I)===-1)throw new RangeError("Invalid status code");return new B(null,{status:I,headers:{location:A}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(I,U){this.message=I,this.name=U;var T=Error(I);this.stack=T.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function F(A,I){return new Promise(function(U,T){var k=new C(A,I);if(k.signal&&k.signal.aborted)return T(new o.DOMException("Aborted","AbortError"));var L=new XMLHttpRequest;function W(){L.abort()}L.onload=function(){var Q={statusText:L.statusText,headers:R(L.getAllResponseHeaders()||"")};k.url.indexOf("file://")===0&&(L.status<200||L.status>599)?Q.status=200:Q.status=L.status,Q.url="responseURL"in L?L.responseURL:Q.headers.get("X-Request-URL");var te="response"in L?L.response:L.responseText;setTimeout(function(){U(new B(te,Q))},0)},L.onerror=function(){setTimeout(function(){T(new TypeError("Network request failed"))},0)},L.ontimeout=function(){setTimeout(function(){T(new TypeError("Network request timed out"))},0)},L.onabort=function(){setTimeout(function(){T(new o.DOMException("Aborted","AbortError"))},0)};function K(Q){try{return Q===""&&a.location.href?a.location.href:Q}catch{return Q}}if(L.open(k.method,K(k.url),!0),k.credentials==="include"?L.withCredentials=!0:k.credentials==="omit"&&(L.withCredentials=!1),"responseType"in L&&(c.blob?L.responseType="blob":c.arrayBuffer&&(L.responseType="arraybuffer")),I&&typeof I.headers=="object"&&!(I.headers instanceof g||a.Headers&&I.headers instanceof a.Headers)){var Z=[];Object.getOwnPropertyNames(I.headers).forEach(function(Q){Z.push(h(Q)),L.setRequestHeader(Q,f(I.headers[Q]))}),k.headers.forEach(function(Q,te){Z.indexOf(te)===-1&&L.setRequestHeader(te,Q)})}else k.headers.forEach(function(Q,te){L.setRequestHeader(te,Q)});k.signal&&(k.signal.addEventListener("abort",W),L.onreadystatechange=function(){L.readyState===4&&k.signal.removeEventListener("abort",W)}),L.send(typeof k._bodyInit>"u"?null:k._bodyInit)})}return F.polyfill=!0,a.fetch||(a.fetch=F,a.Headers=g,a.Request=C,a.Response=B),o.Headers=g,o.Request=C,o.Response=B,o.fetch=F,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(Sx,Sx.exports);var Yge=Sx.exports;const Bk=gu(Yge);var Qge=Object.defineProperty,Jge=Object.defineProperties,Zge=Object.getOwnPropertyDescriptors,Fk=Object.getOwnPropertySymbols,Xge=Object.prototype.hasOwnProperty,eme=Object.prototype.propertyIsEnumerable,zk=(t,e,n)=>e in t?Qge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qk=(t,e)=>{for(var n in e||(e={}))Xge.call(e,n)&&zk(t,n,e[n]);if(Fk)for(var n of Fk(e))eme.call(e,n)&&zk(t,n,e[n]);return t},Wk=(t,e)=>Jge(t,Zge(e));const tme={Accept:"application/json","Content-Type":"application/json"},nme="POST",Hk={headers:tme,method:nme},Vk=10;let ki=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new Qs.EventEmitter,this.isAvailable=!1,this.registering=!1,!lk(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=ra(e),r=await(await Bk(this.url,Wk(qk({},Hk),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!lk(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=ra({id:1,jsonrpc:"2.0",method:"test",params:[]});await Bk(e,Wk(qk({},Hk),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?ou(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=Vv(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return l4(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Vk&&this.events.setMaxListeners(Vk)}};const Gk="error",rme="wss://relay.walletconnect.org",sme="wc",ime="universal_provider",$y=`${sme}@2:${ime}:`,D4="https://rpc.walletconnect.org/v1/",ud="generic",ome=`${D4}bundler`,Zs={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function fI(t){return t==null||typeof t!="object"&&typeof t!="function"}function j4(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function U4(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const ame="[object RegExp]",L4="[object String]",M4="[object Number]",B4="[object Boolean]",F4="[object Arguments]",cme="[object Symbol]",lme="[object Date]",ume="[object Map]",dme="[object Set]",hme="[object Array]",fme="[object ArrayBuffer]",pme="[object Object]",gme="[object DataView]",mme="[object Uint8Array]",yme="[object Uint8ClampedArray]",wme="[object Uint16Array]",vme="[object Uint32Array]",bme="[object Int8Array]",_me="[object Int16Array]",Eme="[object Int32Array]",Cme="[object Float32Array]",xme="[object Float64Array]";function pI(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Sme(t,e){return Td(t,void 0,t,new Map,e)}function Td(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(fI(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Td(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,Td(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(Td(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(pI(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Td(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),yl(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),yl(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),yl(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,yl(o,t,n,r,s),o}if(typeof t=="object"&&Ame(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),yl(o,t,n,r,s),o}return t}function yl(t,e,n=t,r,s){const i=[...Object.keys(e),...j4(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Td(e[a],a,n,r,s))}}function Ame(t){switch(U4(t)){case F4:case hme:case fme:case gme:case B4:case lme:case Cme:case xme:case bme:case _me:case Eme:case ume:case M4:case pme:case ame:case dme:case L4:case cme:case mme:case yme:case wme:case vme:return!0;default:return!1}}function Ime(t,e){return Sme(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case M4:case L4:case B4:{const o=new t.constructor(t==null?void 0:t.valueOf());return yl(o,t),o}case F4:{const o={};return yl(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function Kk(t){return Ime(t)}function Yk(t){return t!==null&&typeof t=="object"&&U4(t)==="[object Arguments]"}function Qk(t){return typeof t=="object"&&t!==null}function Tme(){}function Nme(t){return pI(t)}function Pme(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function kme(t){if(fI(t))return t;if(Array.isArray(t)||pI(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function Ome(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=Ax(s,o,r,new Map)}return s}function Ax(t,e,n,r){if(fI(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return kme(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...j4(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(Yk(a)&&(a={...a}),Yk(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=Kk(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||Qk(c)&&Qk(a)?t[o]=Ax(c,a,n,r):c==null&&Pme(a)?t[o]=Ax({},a,n,r):c==null&&Nme(a)?t[o]=Kk(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function Rme(t,...e){return Ome(t,...e,Tme)}var $me=Object.defineProperty,Dme=Object.defineProperties,jme=Object.getOwnPropertyDescriptors,Jk=Object.getOwnPropertySymbols,Ume=Object.prototype.hasOwnProperty,Lme=Object.prototype.propertyIsEnumerable,Zk=(t,e,n)=>e in t?$me(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Dy=(t,e)=>{for(var n in e||(e={}))Ume.call(e,n)&&Zk(t,n,e[n]);if(Jk)for(var n of Jk(e))Lme.call(e,n)&&Zk(t,n,e[n]);return t},Mme=(t,e)=>Dme(t,jme(e));function _s(t,e,n){var r;const s=Md(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${D4}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function Tu(t){return t.includes(":")?t.split(":")[1]:t}function z4(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function Bme(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function jy(t={},e={}){const n=Xk(t),r=Xk(e);return Rme(n,r)}function Xk(t){var e,n,r,s,i;const o={};if(!Tc(t))return o;for(const[a,c]of Object.entries(t)){const l=Wv(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=Id(a);o[f]=Mme(Dy(Dy({},o[f]),c),{chains:ao(l,(e=o[f])==null?void 0:e.chains),methods:ao(u,(n=o[f])==null?void 0:n.methods),events:ao(d,(r=o[f])==null?void 0:r.events)}),(Tc(h)||Tc(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=Dy(Dy({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function eO(t){return t.includes(":")?t.split(":")[2]:t}function tO(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=Wv(n)?[n]:r.chains?r.chains:z4(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function g_(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const q4={},ht=t=>q4[t],m_=(t,e)=>{q4[t]=e};var Fme=Object.defineProperty,zme=(t,e,n)=>e in t?Fme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gu=(t,e,n)=>zme(t,typeof e!="symbol"?e+"":e,n);class qme{constructor(e){Gu(this,"name","polkadot"),Gu(this,"client"),Gu(this,"httpProviders"),Gu(this,"events"),Gu(this,"namespace"),Gu(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Zs.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Tu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||_s(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Js(new ki(r,ht("disableProviderPing")))}}var Wme=Object.defineProperty,Hme=Object.defineProperties,Vme=Object.getOwnPropertyDescriptors,nO=Object.getOwnPropertySymbols,Gme=Object.prototype.hasOwnProperty,Kme=Object.prototype.propertyIsEnumerable,Ix=(t,e,n)=>e in t?Wme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rO=(t,e)=>{for(var n in e||(e={}))Gme.call(e,n)&&Ix(t,n,e[n]);if(nO)for(var n of nO(e))Kme.call(e,n)&&Ix(t,n,e[n]);return t},sO=(t,e)=>Hme(t,Vme(e)),Ku=(t,e,n)=>Ix(t,typeof e!="symbol"?e+"":e,n);class Yme{constructor(e){Ku(this,"name","eip155"),Ku(this,"client"),Ku(this,"chainId"),Ku(this,"namespace"),Ku(this,"httpProviders"),Ku(this,"events"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(Zs.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||_s(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Js(new ki(r,ht("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(Tu(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:sO(rO({},u.sessionProperties||{}),{capabilities:sO(rO({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(hc("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${ome}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var Qme=Object.defineProperty,Jme=(t,e,n)=>e in t?Qme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yu=(t,e,n)=>Jme(t,typeof e!="symbol"?e+"":e,n);class Zme{constructor(e){Yu(this,"name","solana"),Yu(this,"client"),Yu(this,"httpProviders"),Yu(this,"events"),Yu(this,"namespace"),Yu(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Zs.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Tu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||_s(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Js(new ki(r,ht("disableProviderPing")))}}var Xme=Object.defineProperty,eye=(t,e,n)=>e in t?Xme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qu=(t,e,n)=>eye(t,typeof e!="symbol"?e+"":e,n);class tye{constructor(e){Qu(this,"name","cosmos"),Qu(this,"client"),Qu(this,"httpProviders"),Qu(this,"events"),Qu(this,"namespace"),Qu(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Zs.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Tu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||_s(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Js(new ki(r,ht("disableProviderPing")))}}var nye=Object.defineProperty,rye=(t,e,n)=>e in t?nye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ju=(t,e,n)=>rye(t,typeof e!="symbol"?e+"":e,n);class sye{constructor(e){Ju(this,"name","algorand"),Ju(this,"client"),Ju(this,"httpProviders"),Ju(this,"events"),Ju(this,"namespace"),Ju(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||_s(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(Zs.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||_s(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Js(new ki(r,ht("disableProviderPing")))}}var iye=Object.defineProperty,oye=(t,e,n)=>e in t?iye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zu=(t,e,n)=>oye(t,typeof e!="symbol"?e+"":e,n);class aye{constructor(e){Zu(this,"name","cip34"),Zu(this,"client"),Zu(this,"httpProviders"),Zu(this,"events"),Zu(this,"namespace"),Zu(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Zs.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=Tu(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Js(new ki(r,ht("disableProviderPing")))}}var cye=Object.defineProperty,lye=(t,e,n)=>e in t?cye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xu=(t,e,n)=>lye(t,typeof e!="symbol"?e+"":e,n);class uye{constructor(e){Xu(this,"name","elrond"),Xu(this,"client"),Xu(this,"httpProviders"),Xu(this,"events"),Xu(this,"namespace"),Xu(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Zs.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Tu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||_s(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Js(new ki(r,ht("disableProviderPing")))}}var dye=Object.defineProperty,hye=(t,e,n)=>e in t?dye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ed=(t,e,n)=>hye(t,typeof e!="symbol"?e+"":e,n);class fye{constructor(e){ed(this,"name","multiversx"),ed(this,"client"),ed(this,"httpProviders"),ed(this,"events"),ed(this,"namespace"),ed(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Zs.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Tu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||_s(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Js(new ki(r,ht("disableProviderPing")))}}var pye=Object.defineProperty,gye=(t,e,n)=>e in t?pye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,td=(t,e,n)=>gye(t,typeof e!="symbol"?e+"":e,n);class mye{constructor(e){td(this,"name","near"),td(this,"client"),td(this,"httpProviders"),td(this,"events"),td(this,"namespace"),td(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||_s(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Zs.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||_s(e,this.namespace);return typeof r>"u"?void 0:new Js(new ki(r,ht("disableProviderPing")))}}var yye=Object.defineProperty,wye=(t,e,n)=>e in t?yye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nd=(t,e,n)=>wye(t,typeof e!="symbol"?e+"":e,n);class vye{constructor(e){nd(this,"name","tezos"),nd(this,"client"),nd(this,"httpProviders"),nd(this,"events"),nd(this,"namespace"),nd(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||_s(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Zs.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||_s(e,this.namespace);return typeof r>"u"?void 0:new Js(new ki(r))}}var bye=Object.defineProperty,_ye=(t,e,n)=>e in t?bye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rd=(t,e,n)=>_ye(t,typeof e!="symbol"?e+"":e,n);class Eye{constructor(e){rd(this,"name",ud),rd(this,"client"),rd(this,"httpProviders"),rd(this,"events"),rd(this,"namespace"),rd(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Zs.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=Md(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||_s(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Js(new ki(r,ht("disableProviderPing")))}}var Cye=Object.defineProperty,xye=Object.defineProperties,Sye=Object.getOwnPropertyDescriptors,iO=Object.getOwnPropertySymbols,Aye=Object.prototype.hasOwnProperty,Iye=Object.prototype.propertyIsEnumerable,Tx=(t,e,n)=>e in t?Cye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Uy=(t,e)=>{for(var n in e||(e={}))Aye.call(e,n)&&Tx(t,n,e[n]);if(iO)for(var n of iO(e))Iye.call(e,n)&&Tx(t,n,e[n]);return t},y_=(t,e)=>xye(t,Sye(e)),ks=(t,e,n)=>Tx(t,typeof e!="symbol"?e+"":e,n);let Tye=class W4{constructor(e){ks(this,"client"),ks(this,"namespaces"),ks(this,"optionalNamespaces"),ks(this,"sessionProperties"),ks(this,"scopedProperties"),ks(this,"events",new RA),ks(this,"rpcProviders",{}),ks(this,"session"),ks(this,"providerOpts"),ks(this,"logger"),ks(this,"uri"),ks(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:dm($h({level:(e==null?void 0:e.logger)||Gk})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new W4(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Uy({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,Hv(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Wt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=tO(this.session.namespaces);this.namespaces=jy(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=tO(s.namespaces);return this.namespaces=jy(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===ud?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(Go(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await Kge.init({core:this.providerOpts.core,logger:this.providerOpts.logger||Gk,relayUrl:this.providerOpts.relayUrl||rme,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>Id(n)))];m_("client",this.client),m_("events",this.events),m_("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=Bme(n,this.session),s=z4(r),i=jy(this.namespaces,this.optionalNamespaces),o=y_(Uy({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new Yme({namespace:o});break;case"algorand":this.rpcProviders[n]=new sye({namespace:o});break;case"solana":this.rpcProviders[n]=new Zme({namespace:o});break;case"cosmos":this.rpcProviders[n]=new tye({namespace:o});break;case"polkadot":this.rpcProviders[n]=new qme({namespace:o});break;case"cip34":this.rpcProviders[n]=new aye({namespace:o});break;case"elrond":this.rpcProviders[n]=new uye({namespace:o});break;case"multiversx":this.rpcProviders[n]=new fye({namespace:o});break;case"near":this.rpcProviders[n]=new mye({namespace:o});break;case"tezos":this.rpcProviders[n]=new vye({namespace:o});break;default:this.rpcProviders[ud]?this.rpcProviders[ud].updateNamespace(o):this.rpcProviders[ud]=new Eye({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&Go(o)&&this.events.emit("accountsChanged",o.map(eO))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=Id(o),l=g_(o)!==g_(a)?`${c}:${g_(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=y_(Uy({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",y_(Uy({},Wt("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Zs.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[ud]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=jy(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>Id(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=Id(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(eO);if(!Go(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${$y}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${$y}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${$y}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith($y)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};const mp={getSIWX(){return se.state.siwx},async initializeIfEnabled(){var i;const t=se.state.siwx,e=D.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(D.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await gt.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),bt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=_e._getClient())==null?void 0:i.disconnect().catch(console.error)),Re.reset("Connect"),wi.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=se.state.siwx,e=Ae.getPlainAddress(D.getActiveCaipAddress()),n=D.getActiveCaipNetwork(),r=_e._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();fe.getConnectorId(n.chainNamespace)===X.CONNECTOR_ID.AUTH&&Re.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),D.setLastConnectedSIWECaipNetwork(n),gt.close(),bt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!gt.state.open||Re.state.view==="ApproveTransaction")&&await gt.open({view:"SIWXSignMessage"}),i.isSmartAccount?wi.showError("This application might not support Smart Accounts"):wi.showError("Signature declined"),bt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=D.getLastConnectedSIWECaipNetwork();r?D.switchActiveNetwork(r):await _e.disconnect()}else gt.close();Re.reset("Connect"),bt.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=D.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,Ae.getPlainAddress(D.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=se.state.siwx,e=Ae.getPlainAddress(D.getActiveCaipAddress()),n=D.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Re.state.view==="ApproveTransaction",r=Re.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=mp.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=D.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(wi.showLoading("Authenticating...",{autoClose:!1}),de.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),bt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:mp.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),bt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:mp.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{wi.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=D.state.activeChain;return{network:((e=D.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=de.state.preferredAccountTypes)==null?void 0:n[t])===$n.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},Bt={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},fc={ConnectorExplorerIds:{[X.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[X.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[X.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[X.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[X.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Bt.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Bt.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Bt.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Bt.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Bt.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Bt.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Bt.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Bt.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Bt.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Bt.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Bt.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[X.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[X.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[X.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[X.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[X.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[X.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[X.CONNECTOR_ID.INJECTED]:"Browser Wallet",[X.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[X.CONNECTOR_ID.COINBASE]:"Coinbase",[X.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[X.CONNECTOR_ID.LEDGER]:"Ledger",[X.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[X.CONNECTOR_ID.INJECTED]:"INJECTED",[X.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[X.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[X.CONNECTOR_ID.AUTH]:"AUTH"}},Ag={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Bt.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=D.state.activeChain;return X.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>fe.getConnectorId(e)===X.CONNECTOR_ID.AUTH&&e===t)}},Nye=new AbortController,Gt={EmbeddedWalletAbortController:Nye,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${Pye()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"},SERVER_ERROR_APP_CONFIGURATION:{shortMessage:"Server Error",longMessage:t=>`Failed to get App Configuration ${t||""}`},RATE_LIMITED_APP_CONFIGURATION:{shortMessage:"Rate Limited",longMessage:"Rate limited when trying to get the App Configuration"}}};function Pye(){return typeof window<"u"}const kye={createLogger(t,e="error"){const n=$h({level:e}),{logger:r}=DA({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},Oye="rpc.walletconnect.org";function oO(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const w_=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],to={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===Oye}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:X.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${X.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return w_.includes(e)?oO(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,y;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((y=r==null?void 0:r[i])==null?void 0:y.map(w=>w.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:fc.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>to.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(sy(a.url,a.config))}),w_.includes(t.caipNetworkId)&&r.push(sy(oO(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(sy(a))}),oT(r)},extendWagmiTransports(t,e,n){if(w_.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return oT([n,sy(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:X.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=he.getActiveCaipNetworkId(),n=D.getAllRequestedCaipNetworks(),r=Array.from(((c=D.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},C0={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Ur=Dt({providers:{...C0},providerIds:{...C0}}),St={state:Ur,subscribeKey(t,e){return Yn(Ur,t,e)},subscribe(t){return Kn(Ur,()=>{t(Ur)})},subscribeProviders(t){return Kn(Ur.providers,()=>t(Ur.providers))},setProvider(t,e){e&&(Ur.providers[t]=su(e))},getProvider(t){return Ur.providers[t]},setProviderId(t,e){e&&(Ur.providerIds[t]=e)},getProviderId(t){if(t)return Ur.providerIds[t]},reset(){Ur.providers={...C0},Ur.providerIds={...C0}},resetChain(t){Ur.providers[t]=void 0,Ur.providerIds[t]=void 0}},aO={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},zn={set(t,e){ps.isClient&&localStorage.setItem(`${Ce.STORAGE_KEY}${t}`,e)},get(t){return ps.isClient?localStorage.getItem(`${Ce.STORAGE_KEY}${t}`):null},delete(t,e){ps.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ce.STORAGE_KEY}${t}`))}},Ly=30*1e3,ps={checkIfAllowedToTriggerEmail(){const t=zn.get(Ce.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Ly){const n=Math.ceil((Ly-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=zn.get(Ce.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Ly)return Math.ceil((Ly-e)/1e3)}return 0},checkIfRequestExists(t){return $n.NOT_SAFE_RPC_METHODS.includes(t.method)||$n.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(aO.transactionHash))||(t==null?void 0:t.match(aO.signedMessage)))?Ce.RPC_RESPONSE_TYPE_TX:Ce.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return $n.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var dt;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(dt||(dt={}));var Nx;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Nx||(Nx={}));const we=dt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ka=t=>{switch(typeof t){case"undefined":return we.undefined;case"string":return we.string;case"number":return isNaN(t)?we.nan:we.number;case"boolean":return we.boolean;case"function":return we.function;case"bigint":return we.bigint;case"symbol":return we.symbol;case"object":return Array.isArray(t)?we.array:t===null?we.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?we.promise:typeof Map<"u"&&t instanceof Map?we.map:typeof Set<"u"&&t instanceof Set?we.set:typeof Date<"u"&&t instanceof Date?we.date:we.object;default:return we.unknown}},ae=dt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Rye=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class xi extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,dt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}xi.create=t=>new xi(t);const Ig=(t,e)=>{let n;switch(t.code){case ae.invalid_type:t.received===we.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ae.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,dt.jsonStringifyReplacer)}`;break;case ae.unrecognized_keys:n=`Unrecognized key(s) in object: ${dt.joinValues(t.keys,", ")}`;break;case ae.invalid_union:n="Invalid input";break;case ae.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${dt.joinValues(t.options)}`;break;case ae.invalid_enum_value:n=`Invalid enum value. Expected ${dt.joinValues(t.options)}, received '${t.received}'`;break;case ae.invalid_arguments:n="Invalid function arguments";break;case ae.invalid_return_type:n="Invalid function return type";break;case ae.invalid_date:n="Invalid date";break;case ae.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:dt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ae.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ae.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ae.custom:n="Invalid input";break;case ae.invalid_intersection_types:n="Intersection results could not be merged";break;case ae.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ae.not_finite:n="Number must be finite";break;default:n=e.defaultError,dt.assertNever(t)}return{message:n}};let H4=Ig;function $ye(t){H4=t}function x0(){return H4}const S0=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},Dye=[];function Ee(t,e){const n=S0({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,x0(),Ig].filter(r=>!!r)});t.common.issues.push(n)}class fr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Be;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return fr.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Be;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Be=Object.freeze({status:"aborted"}),V4=t=>({status:"dirty",value:t}),Ir=t=>({status:"valid",value:t}),Px=t=>t.status==="aborted",kx=t=>t.status==="dirty",Tg=t=>t.status==="valid",A0=t=>typeof Promise<"u"&&t instanceof Promise;var Ne;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ne||(Ne={}));class ho{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const cO=(t,e)=>{if(Tg(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new xi(t.common.issues);return this._error=n,this._error}}};function Ge(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class Qe{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ka(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Ka(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new fr,ctx:{common:e.parent.common,data:e.data,parsedType:Ka(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(A0(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ka(e)},i=this._parseSync({data:e,path:s.path,parent:s});return cO(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ka(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(A0(s)?s:Promise.resolve(s));return cO(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:ae.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Ti({schema:this,typeName:De.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Ko.create(this,this._def)}nullable(){return fu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Si.create(this,this._def)}promise(){return vh.create(this,this._def)}or(e){return Og.create([this,e],this._def)}and(e){return Rg.create(this,e,this._def)}transform(e){return new Ti({...Ge(this._def),schema:this,typeName:De.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Lg({...Ge(this._def),innerType:this,defaultValue:n,typeName:De.ZodDefault})}brand(){return new K4({typeName:De.ZodBranded,type:this,...Ge(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new P0({...Ge(this._def),innerType:this,catchValue:n,typeName:De.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return bm.create(this,e)}readonly(){return O0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const jye=/^c[^\s-]{8,}$/i,Uye=/^[a-z][a-z0-9]*$/,Lye=/^[0-9A-HJKMNP-TV-Z]{26}$/,Mye=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Bye=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Fye="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let v_;const zye=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,qye=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Wye=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function Hye(t,e){return!!((e==="v4"||!e)&&zye.test(t)||(e==="v6"||!e)&&qye.test(t))}class bi extends Qe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==we.string){const i=this._getOrReturnCtx(e);return Ee(i,{code:ae.invalid_type,expected:we.string,received:i.parsedType}),Be}const r=new fr;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Ee(s,{code:ae.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Ee(s,{code:ae.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?Ee(s,{code:ae.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&Ee(s,{code:ae.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")Bye.test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"email",code:ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")v_||(v_=new RegExp(Fye,"u")),v_.test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"emoji",code:ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")Mye.test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"uuid",code:ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")jye.test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"cuid",code:ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")Uye.test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"cuid2",code:ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")Lye.test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"ulid",code:ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Ee(s,{validation:"url",code:ae.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"regex",code:ae.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Ee(s,{code:ae.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ee(s,{code:ae.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ee(s,{code:ae.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?Wye(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{code:ae.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?Hye(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"ip",code:ae.invalid_string,message:i.message}),r.dirty()):dt.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:ae.invalid_string,...Ne.errToObj(r)})}_addCheck(e){return new bi({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ne.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ne.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ne.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ne.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ne.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ne.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ne.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ne.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...Ne.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ne.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Ne.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ne.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ne.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ne.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ne.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ne.errToObj(n)})}nonempty(e){return this.min(1,Ne.errToObj(e))}trim(){return new bi({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new bi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new bi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}bi.create=t=>{var e;return new bi({checks:[],typeName:De.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ge(t)})};function Vye(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Bc extends Qe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==we.number){const i=this._getOrReturnCtx(e);return Ee(i,{code:ae.invalid_type,expected:we.number,received:i.parsedType}),Be}let r;const s=new fr;for(const i of this._def.checks)i.kind==="int"?dt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{code:ae.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:ae.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:ae.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?Vye(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:ae.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{code:ae.not_finite,message:i.message}),s.dirty()):dt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ne.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ne.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ne.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ne.toString(n))}setLimit(e,n,r,s){return new Bc({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ne.toString(s)}]})}_addCheck(e){return new Bc({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ne.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ne.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ne.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ne.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ne.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ne.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ne.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ne.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ne.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&dt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Bc.create=t=>new Bc({checks:[],typeName:De.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ge(t)});class Fc extends Qe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==we.bigint){const i=this._getOrReturnCtx(e);return Ee(i,{code:ae.invalid_type,expected:we.bigint,received:i.parsedType}),Be}let r;const s=new fr;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:ae.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:ae.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:ae.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):dt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ne.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ne.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ne.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ne.toString(n))}setLimit(e,n,r,s){return new Fc({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ne.toString(s)}]})}_addCheck(e){return new Fc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ne.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ne.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ne.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ne.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ne.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Fc.create=t=>{var e;return new Fc({checks:[],typeName:De.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ge(t)})};class Ng extends Qe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==we.boolean){const r=this._getOrReturnCtx(e);return Ee(r,{code:ae.invalid_type,expected:we.boolean,received:r.parsedType}),Be}return Ir(e.data)}}Ng.create=t=>new Ng({typeName:De.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ge(t)});class du extends Qe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==we.date){const i=this._getOrReturnCtx(e);return Ee(i,{code:ae.invalid_type,expected:we.date,received:i.parsedType}),Be}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Ee(i,{code:ae.invalid_date}),Be}const r=new fr;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Ee(s,{code:ae.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Ee(s,{code:ae.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):dt.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new du({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ne.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ne.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}du.create=t=>new du({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:De.ZodDate,...Ge(t)});class I0 extends Qe{_parse(e){if(this._getType(e)!==we.symbol){const r=this._getOrReturnCtx(e);return Ee(r,{code:ae.invalid_type,expected:we.symbol,received:r.parsedType}),Be}return Ir(e.data)}}I0.create=t=>new I0({typeName:De.ZodSymbol,...Ge(t)});class Pg extends Qe{_parse(e){if(this._getType(e)!==we.undefined){const r=this._getOrReturnCtx(e);return Ee(r,{code:ae.invalid_type,expected:we.undefined,received:r.parsedType}),Be}return Ir(e.data)}}Pg.create=t=>new Pg({typeName:De.ZodUndefined,...Ge(t)});class kg extends Qe{_parse(e){if(this._getType(e)!==we.null){const r=this._getOrReturnCtx(e);return Ee(r,{code:ae.invalid_type,expected:we.null,received:r.parsedType}),Be}return Ir(e.data)}}kg.create=t=>new kg({typeName:De.ZodNull,...Ge(t)});class wh extends Qe{constructor(){super(...arguments),this._any=!0}_parse(e){return Ir(e.data)}}wh.create=t=>new wh({typeName:De.ZodAny,...Ge(t)});class ql extends Qe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ir(e.data)}}ql.create=t=>new ql({typeName:De.ZodUnknown,...Ge(t)});class ia extends Qe{_parse(e){const n=this._getOrReturnCtx(e);return Ee(n,{code:ae.invalid_type,expected:we.never,received:n.parsedType}),Be}}ia.create=t=>new ia({typeName:De.ZodNever,...Ge(t)});class T0 extends Qe{_parse(e){if(this._getType(e)!==we.undefined){const r=this._getOrReturnCtx(e);return Ee(r,{code:ae.invalid_type,expected:we.void,received:r.parsedType}),Be}return Ir(e.data)}}T0.create=t=>new T0({typeName:De.ZodVoid,...Ge(t)});class Si extends Qe{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==we.array)return Ee(n,{code:ae.invalid_type,expected:we.array,received:n.parsedType}),Be;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(Ee(n,{code:o?ae.too_big:ae.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Ee(n,{code:ae.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Ee(n,{code:ae.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new ho(n,o,n.path,a)))).then(o=>fr.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new ho(n,o,n.path,a)));return fr.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Si({...this._def,minLength:{value:e,message:Ne.toString(n)}})}max(e,n){return new Si({...this._def,maxLength:{value:e,message:Ne.toString(n)}})}length(e,n){return new Si({...this._def,exactLength:{value:e,message:Ne.toString(n)}})}nonempty(e){return this.min(1,e)}}Si.create=(t,e)=>new Si({type:t,minLength:null,maxLength:null,exactLength:null,typeName:De.ZodArray,...Ge(e)});function dd(t){if(t instanceof Kt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Ko.create(dd(r))}return new Kt({...t._def,shape:()=>e})}else return t instanceof Si?new Si({...t._def,type:dd(t.element)}):t instanceof Ko?Ko.create(dd(t.unwrap())):t instanceof fu?fu.create(dd(t.unwrap())):t instanceof fo?fo.create(t.items.map(e=>dd(e))):t}class Kt extends Qe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=dt.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==we.object){const l=this._getOrReturnCtx(e);return Ee(l,{code:ae.invalid_type,expected:we.object,received:l.parsedType}),Be}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ia&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new ho(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof ia){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(Ee(s,{code:ae.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new ho(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>fr.mergeObjectSync(r,l)):fr.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Ne.errToObj,new Kt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Ne.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new Kt({...this._def,unknownKeys:"strip"})}passthrough(){return new Kt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Kt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Kt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:De.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Kt({...this._def,catchall:e})}pick(e){const n={};return dt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Kt({...this._def,shape:()=>n})}omit(e){const n={};return dt.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Kt({...this._def,shape:()=>n})}deepPartial(){return dd(this)}partial(e){const n={};return dt.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new Kt({...this._def,shape:()=>n})}required(e){const n={};return dt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Ko;)i=i._def.innerType;n[r]=i}}),new Kt({...this._def,shape:()=>n})}keyof(){return G4(dt.objectKeys(this.shape))}}Kt.create=(t,e)=>new Kt({shape:()=>t,unknownKeys:"strip",catchall:ia.create(),typeName:De.ZodObject,...Ge(e)});Kt.strictCreate=(t,e)=>new Kt({shape:()=>t,unknownKeys:"strict",catchall:ia.create(),typeName:De.ZodObject,...Ge(e)});Kt.lazycreate=(t,e)=>new Kt({shape:t,unknownKeys:"strip",catchall:ia.create(),typeName:De.ZodObject,...Ge(e)});class Og extends Qe{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new xi(a.ctx.common.issues));return Ee(n,{code:ae.invalid_union,unionErrors:o}),Be}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new xi(c));return Ee(n,{code:ae.invalid_union,unionErrors:a}),Be}}get options(){return this._def.options}}Og.create=(t,e)=>new Og({options:t,typeName:De.ZodUnion,...Ge(e)});const bw=t=>t instanceof Dg?bw(t.schema):t instanceof Ti?bw(t.innerType()):t instanceof jg?[t.value]:t instanceof zc?t.options:t instanceof Ug?Object.keys(t.enum):t instanceof Lg?bw(t._def.innerType):t instanceof Pg?[void 0]:t instanceof kg?[null]:null;class Qv extends Qe{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==we.object)return Ee(n,{code:ae.invalid_type,expected:we.object,received:n.parsedType}),Be;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Ee(n,{code:ae.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Be)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=bw(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new Qv({typeName:De.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Ge(r)})}}function Ox(t,e){const n=Ka(t),r=Ka(e);if(t===e)return{valid:!0,data:t};if(n===we.object&&r===we.object){const s=dt.objectKeys(e),i=dt.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=Ox(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===we.array&&r===we.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=Ox(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===we.date&&r===we.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Rg extends Qe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(Px(i)||Px(o))return Be;const a=Ox(i.value,o.value);return a.valid?((kx(i)||kx(o))&&n.dirty(),{status:n.value,value:a.data}):(Ee(r,{code:ae.invalid_intersection_types}),Be)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Rg.create=(t,e,n)=>new Rg({left:t,right:e,typeName:De.ZodIntersection,...Ge(n)});class fo extends Qe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==we.array)return Ee(r,{code:ae.invalid_type,expected:we.array,received:r.parsedType}),Be;if(r.data.length<this._def.items.length)return Ee(r,{code:ae.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Be;!this._def.rest&&r.data.length>this._def.items.length&&(Ee(r,{code:ae.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new ho(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>fr.mergeArray(n,o)):fr.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new fo({...this._def,rest:e})}}fo.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new fo({items:t,typeName:De.ZodTuple,rest:null,...Ge(e)})};class $g extends Qe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==we.object)return Ee(r,{code:ae.invalid_type,expected:we.object,received:r.parsedType}),Be;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new ho(r,a,r.path,a)),value:o._parse(new ho(r,r.data[a],r.path,a))});return r.common.async?fr.mergeObjectAsync(n,s):fr.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Qe?new $g({keyType:e,valueType:n,typeName:De.ZodRecord,...Ge(r)}):new $g({keyType:bi.create(),valueType:e,typeName:De.ZodRecord,...Ge(n)})}}class N0 extends Qe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==we.map)return Ee(r,{code:ae.invalid_type,expected:we.map,received:r.parsedType}),Be;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new ho(r,a,r.path,[l,"key"])),value:i._parse(new ho(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return Be;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return Be;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}N0.create=(t,e,n)=>new N0({valueType:e,keyType:t,typeName:De.ZodMap,...Ge(n)});class hu extends Qe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==we.set)return Ee(r,{code:ae.invalid_type,expected:we.set,received:r.parsedType}),Be;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Ee(r,{code:ae.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Ee(r,{code:ae.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return Be;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new ho(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new hu({...this._def,minSize:{value:e,message:Ne.toString(n)}})}max(e,n){return new hu({...this._def,maxSize:{value:e,message:Ne.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}hu.create=(t,e)=>new hu({valueType:t,minSize:null,maxSize:null,typeName:De.ZodSet,...Ge(e)});class Bd extends Qe{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==we.function)return Ee(n,{code:ae.invalid_type,expected:we.function,received:n.parsedType}),Be;function r(a,c){return S0({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,x0(),Ig].filter(l=>!!l),issueData:{code:ae.invalid_arguments,argumentsError:c}})}function s(a,c){return S0({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,x0(),Ig].filter(l=>!!l),issueData:{code:ae.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof vh){const a=this;return Ir(async function(...c){const l=new xi([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return Ir(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new xi([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new xi([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Bd({...this._def,args:fo.create(e).rest(ql.create())})}returns(e){return new Bd({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Bd({args:e||fo.create([]).rest(ql.create()),returns:n||ql.create(),typeName:De.ZodFunction,...Ge(r)})}}class Dg extends Qe{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Dg.create=(t,e)=>new Dg({getter:t,typeName:De.ZodLazy,...Ge(e)});class jg extends Qe{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Ee(n,{received:n.data,code:ae.invalid_literal,expected:this._def.value}),Be}return{status:"valid",value:e.data}}get value(){return this._def.value}}jg.create=(t,e)=>new jg({value:t,typeName:De.ZodLiteral,...Ge(e)});function G4(t,e){return new zc({values:t,typeName:De.ZodEnum,...Ge(e)})}class zc extends Qe{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Ee(n,{expected:dt.joinValues(r),received:n.parsedType,code:ae.invalid_type}),Be}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return Ee(n,{received:n.data,code:ae.invalid_enum_value,options:r}),Be}return Ir(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return zc.create(e)}exclude(e){return zc.create(this.options.filter(n=>!e.includes(n)))}}zc.create=G4;class Ug extends Qe{_parse(e){const n=dt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==we.string&&r.parsedType!==we.number){const s=dt.objectValues(n);return Ee(r,{expected:dt.joinValues(s),received:r.parsedType,code:ae.invalid_type}),Be}if(n.indexOf(e.data)===-1){const s=dt.objectValues(n);return Ee(r,{received:r.data,code:ae.invalid_enum_value,options:s}),Be}return Ir(e.data)}get enum(){return this._def.values}}Ug.create=(t,e)=>new Ug({values:t,typeName:De.ZodNativeEnum,...Ge(e)});class vh extends Qe{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==we.promise&&n.common.async===!1)return Ee(n,{code:ae.invalid_type,expected:we.promise,received:n.parsedType}),Be;const r=n.parsedType===we.promise?n.data:Promise.resolve(n.data);return Ir(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}vh.create=(t,e)=>new vh({type:t,typeName:De.ZodPromise,...Ge(e)});class Ti extends Qe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===De.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Ee(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Be:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Be:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Tg(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Tg(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);dt.assertNever(s)}}Ti.create=(t,e,n)=>new Ti({schema:t,typeName:De.ZodEffects,effect:e,...Ge(n)});Ti.createWithPreprocess=(t,e,n)=>new Ti({schema:e,effect:{type:"preprocess",transform:t},typeName:De.ZodEffects,...Ge(n)});class Ko extends Qe{_parse(e){return this._getType(e)===we.undefined?Ir(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ko.create=(t,e)=>new Ko({innerType:t,typeName:De.ZodOptional,...Ge(e)});class fu extends Qe{_parse(e){return this._getType(e)===we.null?Ir(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}fu.create=(t,e)=>new fu({innerType:t,typeName:De.ZodNullable,...Ge(e)});class Lg extends Qe{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===we.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Lg.create=(t,e)=>new Lg({innerType:t,typeName:De.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ge(e)});class P0 extends Qe{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return A0(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new xi(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new xi(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}P0.create=(t,e)=>new P0({innerType:t,typeName:De.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ge(e)});class k0 extends Qe{_parse(e){if(this._getType(e)!==we.nan){const r=this._getOrReturnCtx(e);return Ee(r,{code:ae.invalid_type,expected:we.nan,received:r.parsedType}),Be}return{status:"valid",value:e.data}}}k0.create=t=>new k0({typeName:De.ZodNaN,...Ge(t)});const Gye=Symbol("zod_brand");class K4 extends Qe{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class bm extends Qe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Be:i.status==="dirty"?(n.dirty(),V4(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Be:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new bm({in:e,out:n,typeName:De.ZodPipeline})}}class O0 extends Qe{_parse(e){const n=this._def.innerType._parse(e);return Tg(n)&&(n.value=Object.freeze(n.value)),n}}O0.create=(t,e)=>new O0({innerType:t,typeName:De.ZodReadonly,...Ge(e)});const Y4=(t,e={},n)=>t?wh.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):wh.create(),Kye={object:Kt.lazycreate};var De;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(De||(De={}));const Yye=(t,e={message:`Input not instance of ${t.name}`})=>Y4(n=>n instanceof t,e),Q4=bi.create,J4=Bc.create,Qye=k0.create,Jye=Fc.create,Z4=Ng.create,Zye=du.create,Xye=I0.create,ewe=Pg.create,twe=kg.create,nwe=wh.create,rwe=ql.create,swe=ia.create,iwe=T0.create,owe=Si.create,awe=Kt.create,cwe=Kt.strictCreate,lwe=Og.create,uwe=Qv.create,dwe=Rg.create,hwe=fo.create,fwe=$g.create,pwe=N0.create,gwe=hu.create,mwe=Bd.create,ywe=Dg.create,wwe=jg.create,vwe=zc.create,bwe=Ug.create,_we=vh.create,lO=Ti.create,Ewe=Ko.create,Cwe=fu.create,xwe=Ti.createWithPreprocess,Swe=bm.create,Awe=()=>Q4().optional(),Iwe=()=>J4().optional(),Twe=()=>Z4().optional(),Nwe={string:t=>bi.create({...t,coerce:!0}),number:t=>Bc.create({...t,coerce:!0}),boolean:t=>Ng.create({...t,coerce:!0}),bigint:t=>Fc.create({...t,coerce:!0}),date:t=>du.create({...t,coerce:!0})},Pwe=Be;var P=Object.freeze({__proto__:null,defaultErrorMap:Ig,setErrorMap:$ye,getErrorMap:x0,makeIssue:S0,EMPTY_PATH:Dye,addIssueToContext:Ee,ParseStatus:fr,INVALID:Be,DIRTY:V4,OK:Ir,isAborted:Px,isDirty:kx,isValid:Tg,isAsync:A0,get util(){return dt},get objectUtil(){return Nx},ZodParsedType:we,getParsedType:Ka,ZodType:Qe,ZodString:bi,ZodNumber:Bc,ZodBigInt:Fc,ZodBoolean:Ng,ZodDate:du,ZodSymbol:I0,ZodUndefined:Pg,ZodNull:kg,ZodAny:wh,ZodUnknown:ql,ZodNever:ia,ZodVoid:T0,ZodArray:Si,ZodObject:Kt,ZodUnion:Og,ZodDiscriminatedUnion:Qv,ZodIntersection:Rg,ZodTuple:fo,ZodRecord:$g,ZodMap:N0,ZodSet:hu,ZodFunction:Bd,ZodLazy:Dg,ZodLiteral:jg,ZodEnum:zc,ZodNativeEnum:Ug,ZodPromise:vh,ZodEffects:Ti,ZodTransformer:Ti,ZodOptional:Ko,ZodNullable:fu,ZodDefault:Lg,ZodCatch:P0,ZodNaN:k0,BRAND:Gye,ZodBranded:K4,ZodPipeline:bm,ZodReadonly:O0,custom:Y4,Schema:Qe,ZodSchema:Qe,late:Kye,get ZodFirstPartyTypeKind(){return De},coerce:Nwe,any:nwe,array:owe,bigint:Jye,boolean:Z4,date:Zye,discriminatedUnion:uwe,effect:lO,enum:vwe,function:mwe,instanceof:Yye,intersection:dwe,lazy:ywe,literal:wwe,map:pwe,nan:Qye,nativeEnum:bwe,never:swe,null:twe,nullable:Cwe,number:J4,object:awe,oboolean:Twe,onumber:Iwe,optional:Ewe,ostring:Awe,pipeline:Swe,preprocess:xwe,promise:_we,record:fwe,set:gwe,strictObject:cwe,string:Q4,symbol:Xye,transformer:lO,tuple:hwe,undefined:ewe,union:lwe,unknown:rwe,void:iwe,NEVER:Pwe,ZodIssueCode:ae,quotelessJson:Rye,ZodError:xi});const en=P.object({message:P.string()});function ve(t){return P.literal(Ce[t])}P.object({accessList:P.array(P.string()),blockHash:P.string().nullable(),blockNumber:P.string().nullable(),chainId:P.string().or(P.number()),from:P.string(),gas:P.string(),hash:P.string(),input:P.string().nullable(),maxFeePerGas:P.string(),maxPriorityFeePerGas:P.string(),nonce:P.string(),r:P.string(),s:P.string(),to:P.string(),transactionIndex:P.string().nullable(),type:P.string(),v:P.string(),value:P.string()});const kwe=P.object({chainId:P.string().or(P.number())}),Owe=P.object({email:P.string().email()}),Rwe=P.object({otp:P.string()}),$we=P.object({uri:P.string(),preferredAccountType:P.optional(P.string()),chainId:P.optional(P.string().or(P.number()))}),Dwe=P.object({chainId:P.optional(P.string().or(P.number())),preferredAccountType:P.optional(P.string()),socialUri:P.optional(P.string())}),jwe=P.object({provider:P.enum(["google","github","apple","facebook","x","discord"])}),Uwe=P.object({email:P.string().email()}),Lwe=P.object({otp:P.string()}),Mwe=P.object({otp:P.string()}),Bwe=P.object({themeMode:P.optional(P.enum(["light","dark"])),themeVariables:P.optional(P.record(P.string(),P.string().or(P.number()))),w3mThemeVariables:P.optional(P.record(P.string(),P.string()))}),Fwe=P.object({metadata:P.object({name:P.string(),description:P.string(),url:P.string(),icons:P.array(P.string())}).optional(),sdkVersion:P.string().optional(),sdkType:P.string().optional(),projectId:P.string()}),zwe=P.object({type:P.string()}),qwe=P.object({action:P.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),Wwe=P.object({url:P.string()}),Hwe=P.object({userName:P.string()}),Vwe=P.object({email:P.string().optional().nullable(),address:P.string(),chainId:P.string().or(P.number()),accounts:P.array(P.object({address:P.string(),type:P.enum([$n.ACCOUNT_TYPES.EOA,$n.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:P.string().optional().nullable(),preferredAccountType:P.optional(P.string())}),Gwe=P.object({action:P.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),Kwe=P.object({email:P.string().email().optional().nullable(),address:P.string(),chainId:P.string().or(P.number()),smartAccountDeployed:P.optional(P.boolean()),accounts:P.array(P.object({address:P.string(),type:P.enum([$n.ACCOUNT_TYPES.EOA,$n.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:P.optional(P.string())}),Ywe=P.object({uri:P.string()}),Qwe=P.object({isConnected:P.boolean()}),Jwe=P.object({chainId:P.string().or(P.number())}),Zwe=P.object({chainId:P.string().or(P.number())}),Xwe=P.object({newEmail:P.string().email()}),e0e=P.object({smartAccountEnabledNetworks:P.array(P.number())});P.object({address:P.string(),isDeployed:P.boolean()});const t0e=P.object({version:P.string().optional()}),n0e=P.object({type:P.string(),address:P.string()}),r0e=P.any(),s0e=P.object({method:P.literal("eth_accounts")}),i0e=P.object({method:P.literal("eth_blockNumber")}),o0e=P.object({method:P.literal("eth_call"),params:P.array(P.any())}),a0e=P.object({method:P.literal("eth_chainId")}),c0e=P.object({method:P.literal("eth_estimateGas"),params:P.array(P.any())}),l0e=P.object({method:P.literal("eth_feeHistory"),params:P.array(P.any())}),u0e=P.object({method:P.literal("eth_gasPrice")}),d0e=P.object({method:P.literal("eth_getAccount"),params:P.array(P.any())}),h0e=P.object({method:P.literal("eth_getBalance"),params:P.array(P.any())}),f0e=P.object({method:P.literal("eth_getBlockByHash"),params:P.array(P.any())}),p0e=P.object({method:P.literal("eth_getBlockByNumber"),params:P.array(P.any())}),g0e=P.object({method:P.literal("eth_getBlockReceipts"),params:P.array(P.any())}),m0e=P.object({method:P.literal("eth_getBlockTransactionCountByHash"),params:P.array(P.any())}),y0e=P.object({method:P.literal("eth_getBlockTransactionCountByNumber"),params:P.array(P.any())}),w0e=P.object({method:P.literal("eth_getCode"),params:P.array(P.any())}),v0e=P.object({method:P.literal("eth_getFilterChanges"),params:P.array(P.any())}),b0e=P.object({method:P.literal("eth_getFilterLogs"),params:P.array(P.any())}),_0e=P.object({method:P.literal("eth_getLogs"),params:P.array(P.any())}),E0e=P.object({method:P.literal("eth_getProof"),params:P.array(P.any())}),C0e=P.object({method:P.literal("eth_getStorageAt"),params:P.array(P.any())}),x0e=P.object({method:P.literal("eth_getTransactionByBlockHashAndIndex"),params:P.array(P.any())}),S0e=P.object({method:P.literal("eth_getTransactionByBlockNumberAndIndex"),params:P.array(P.any())}),A0e=P.object({method:P.literal("eth_getTransactionByHash"),params:P.array(P.any())}),I0e=P.object({method:P.literal("eth_getTransactionCount"),params:P.array(P.any())}),T0e=P.object({method:P.literal("eth_getTransactionReceipt"),params:P.array(P.any())}),N0e=P.object({method:P.literal("eth_getUncleCountByBlockHash"),params:P.array(P.any())}),P0e=P.object({method:P.literal("eth_getUncleCountByBlockNumber"),params:P.array(P.any())}),k0e=P.object({method:P.literal("eth_maxPriorityFeePerGas")}),O0e=P.object({method:P.literal("eth_newBlockFilter")}),R0e=P.object({method:P.literal("eth_newFilter"),params:P.array(P.any())}),$0e=P.object({method:P.literal("eth_newPendingTransactionFilter")}),D0e=P.object({method:P.literal("eth_sendRawTransaction"),params:P.array(P.any())}),j0e=P.object({method:P.literal("eth_syncing"),params:P.array(P.any())}),U0e=P.object({method:P.literal("eth_uninstallFilter"),params:P.array(P.any())}),uO=P.object({method:P.literal("personal_sign"),params:P.array(P.any())}),L0e=P.object({method:P.literal("eth_signTypedData_v4"),params:P.array(P.any())}),M0e=P.object({method:P.literal("eth_sendTransaction"),params:P.array(P.any())}),B0e=P.object({method:P.literal("solana_signMessage"),params:P.object({message:P.string(),pubkey:P.string()})}),F0e=P.object({method:P.literal("solana_signTransaction"),params:P.object({transaction:P.string()})}),z0e=P.object({method:P.literal("solana_signAllTransactions"),params:P.object({transactions:P.array(P.string())})}),q0e=P.object({method:P.literal("solana_signAndSendTransaction"),params:P.object({transaction:P.string(),options:P.object({skipPreflight:P.boolean().optional(),preflightCommitment:P.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:P.number().optional(),minContextSlot:P.number().optional()}).optional()})}),W0e=P.object({method:P.literal("wallet_sendCalls"),params:P.array(P.object({chainId:P.string().or(P.number()).optional(),from:P.string().optional(),version:P.string().optional(),capabilities:P.any().optional(),calls:P.array(P.object({to:P.string().startsWith("0x"),data:P.string().startsWith("0x").optional(),value:P.string().optional()}))}))}),H0e=P.object({method:P.literal("wallet_getCallsStatus"),params:P.array(P.string())}),V0e=P.object({method:P.literal("wallet_getCapabilities")}),G0e=P.object({method:P.literal("wallet_grantPermissions"),params:P.array(P.any())}),K0e=P.object({method:P.literal("wallet_revokePermissions"),params:P.any()}),Y0e=P.object({method:P.literal("wallet_getAssets"),params:P.any()}),dO=P.object({token:P.string()}),be=P.object({id:P.string().optional()}),Sf={appEvent:be.extend({type:ve("APP_SWITCH_NETWORK"),payload:kwe}).or(be.extend({type:ve("APP_CONNECT_EMAIL"),payload:Owe})).or(be.extend({type:ve("APP_CONNECT_DEVICE")})).or(be.extend({type:ve("APP_CONNECT_OTP"),payload:Rwe})).or(be.extend({type:ve("APP_CONNECT_SOCIAL"),payload:$we})).or(be.extend({type:ve("APP_GET_FARCASTER_URI")})).or(be.extend({type:ve("APP_CONNECT_FARCASTER")})).or(be.extend({type:ve("APP_GET_USER"),payload:P.optional(Dwe)})).or(be.extend({type:ve("APP_GET_SOCIAL_REDIRECT_URI"),payload:jwe})).or(be.extend({type:ve("APP_SIGN_OUT")})).or(be.extend({type:ve("APP_IS_CONNECTED"),payload:P.optional(dO)})).or(be.extend({type:ve("APP_GET_CHAIN_ID")})).or(be.extend({type:ve("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(be.extend({type:ve("APP_INIT_SMART_ACCOUNT")})).or(be.extend({type:ve("APP_SET_PREFERRED_ACCOUNT"),payload:zwe})).or(be.extend({type:ve("APP_RPC_REQUEST"),payload:uO.or(Y0e).or(s0e).or(i0e).or(o0e).or(a0e).or(c0e).or(l0e).or(u0e).or(d0e).or(h0e).or(f0e).or(p0e).or(g0e).or(m0e).or(y0e).or(w0e).or(v0e).or(b0e).or(_0e).or(E0e).or(C0e).or(x0e).or(S0e).or(A0e).or(I0e).or(T0e).or(N0e).or(P0e).or(k0e).or(O0e).or(R0e).or($0e).or(D0e).or(j0e).or(U0e).or(uO).or(L0e).or(M0e).or(B0e).or(F0e).or(z0e).or(q0e).or(H0e).or(W0e).or(V0e).or(G0e).or(K0e)})).or(be.extend({type:ve("APP_UPDATE_EMAIL"),payload:Uwe})).or(be.extend({type:ve("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:Lwe})).or(be.extend({type:ve("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:Mwe})).or(be.extend({type:ve("APP_SYNC_THEME"),payload:Bwe})).or(be.extend({type:ve("APP_SYNC_DAPP_DATA"),payload:Fwe})).or(be.extend({type:ve("APP_RELOAD")})),frameEvent:be.extend({type:ve("FRAME_SWITCH_NETWORK_ERROR"),payload:en}).or(be.extend({type:ve("FRAME_SWITCH_NETWORK_SUCCESS"),payload:Zwe})).or(be.extend({type:ve("FRAME_CONNECT_EMAIL_SUCCESS"),payload:qwe})).or(be.extend({type:ve("FRAME_CONNECT_EMAIL_ERROR"),payload:en})).or(be.extend({type:ve("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:Wwe})).or(be.extend({type:ve("FRAME_GET_FARCASTER_URI_ERROR"),payload:en})).or(be.extend({type:ve("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:Hwe})).or(be.extend({type:ve("FRAME_CONNECT_FARCASTER_ERROR"),payload:en})).or(be.extend({type:ve("FRAME_CONNECT_OTP_ERROR"),payload:en})).or(be.extend({type:ve("FRAME_CONNECT_OTP_SUCCESS")})).or(be.extend({type:ve("FRAME_CONNECT_DEVICE_ERROR"),payload:en})).or(be.extend({type:ve("FRAME_CONNECT_DEVICE_SUCCESS")})).or(be.extend({type:ve("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:Vwe})).or(be.extend({type:ve("FRAME_CONNECT_SOCIAL_ERROR"),payload:en})).or(be.extend({type:ve("FRAME_GET_USER_ERROR"),payload:en})).or(be.extend({type:ve("FRAME_GET_USER_SUCCESS"),payload:Kwe})).or(be.extend({type:ve("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:en})).or(be.extend({type:ve("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:Ywe})).or(be.extend({type:ve("FRAME_SIGN_OUT_ERROR"),payload:en})).or(be.extend({type:ve("FRAME_SIGN_OUT_SUCCESS")})).or(be.extend({type:ve("FRAME_IS_CONNECTED_ERROR"),payload:en})).or(be.extend({type:ve("FRAME_IS_CONNECTED_SUCCESS"),payload:Qwe})).or(be.extend({type:ve("FRAME_GET_CHAIN_ID_ERROR"),payload:en})).or(be.extend({type:ve("FRAME_GET_CHAIN_ID_SUCCESS"),payload:Jwe})).or(be.extend({type:ve("FRAME_RPC_REQUEST_ERROR"),payload:en})).or(be.extend({type:ve("FRAME_RPC_REQUEST_SUCCESS"),payload:r0e})).or(be.extend({type:ve("FRAME_SESSION_UPDATE"),payload:dO})).or(be.extend({type:ve("FRAME_UPDATE_EMAIL_ERROR"),payload:en})).or(be.extend({type:ve("FRAME_UPDATE_EMAIL_SUCCESS"),payload:Gwe})).or(be.extend({type:ve("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:en})).or(be.extend({type:ve("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(be.extend({type:ve("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:en})).or(be.extend({type:ve("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:Xwe})).or(be.extend({type:ve("FRAME_SYNC_THEME_ERROR"),payload:en})).or(be.extend({type:ve("FRAME_SYNC_THEME_SUCCESS")})).or(be.extend({type:ve("FRAME_SYNC_DAPP_DATA_ERROR"),payload:en})).or(be.extend({type:ve("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(be.extend({type:ve("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:e0e})).or(be.extend({type:ve("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:en})).or(be.extend({type:ve("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:en})).or(be.extend({type:ve("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:n0e})).or(be.extend({type:ve("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:en})).or(be.extend({type:ve("FRAME_READY"),payload:t0e})).or(be.extend({type:ve("FRAME_RELOAD_ERROR"),payload:en})).or(be.extend({type:ve("FRAME_RELOAD_SUCCESS")}))};function b_(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}class Q0e{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=X.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!b_(Ce.FRAME_EVENT_KEY,l))return;const u=Sf.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}ps.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{ps.isClient&&window.addEventListener("message",({data:o})=>{if(!b_(Ce.FRAME_EVENT_KEY,o))return;const a=Sf.frameEvent.parse(o);i(a)})},onAppEvent:i=>{ps.isClient&&window.addEventListener("message",({data:o})=>{if(!b_(Ce.APP_EVENT_KEY,o))return;const a=Sf.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(ps.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");Sf.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(ps.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");Sf.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),ps.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${SZ}?projectId=${e}&chainId=${r}&version=${IZ}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class J0e{constructor(e){var i;const n=$h({level:AZ}),{logger:r,chunkLoggerController:s}=DA({opts:n});this.logger=pr(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class Z0e{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new J0e(e)),this.abortController=i,this.w3mFrame=new Q0e({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Ce.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!zn.get(Ce.EMAIL_LOGIN_USED_KEY)}getEmail(){return zn.get(Ce.EMAIL)}getUsername(){return zn.get(Ce.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Ce.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{ps.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Ce.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Ce.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Ce.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Ce.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Ce.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Ce.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Ce.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Ce.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Ce.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Ce.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Ce.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Ce.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Ce.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:Ce.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ce.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:Ce.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Ce.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Ce.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:Ce.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Ce.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if($n.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:Ce.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ce.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ce.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Ce.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ce.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ce.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ce.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Ce.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:$n.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ce.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===Ce.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{$n.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Ce.APP_SYNC_DAPP_DATA,Ce.APP_SYNC_THEME,Ce.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Ce.APP_CONNECT_EMAIL,Ce.APP_CONNECT_DEVICE,Ce.APP_CONNECT_OTP,Ce.APP_CONNECT_SOCIAL,Ce.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const y=e;this.openRpcRequests=[...this.openRpcRequests,{...y.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(y,w){var b,v,E;y.id===u&&((v=w==null?void 0:(b=w.logger).info)==null||v.call(b,{framEvent:y,id:u},"Received frame response"),y.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&c(y.payload),c(void 0)):y.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&l(new Error(((E=y.payload)==null?void 0:E.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,y=>h(y,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){zn.set(Ce.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){zn.set(Ce.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&zn.set(Ce.EMAIL,e),zn.set(Ce.EMAIL_LOGIN_USED_KEY,"true"),zn.delete(Ce.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){zn.delete(Ce.EMAIL_LOGIN_USED_KEY),zn.delete(Ce.EMAIL),zn.delete(Ce.LAST_USED_CHAIN_KEY),zn.delete(Ce.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&zn.set(Ce.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=zn.get(Ce.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){zn.set(Ce.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}}class Wl{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return Wl.instance||(Wl.instance=new Z0e({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),Wl.instance}}var hO={};const X0e={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof hO<"u"?hO.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},Rx={filterOutDuplicatesByRDNS(t){const e=se.state.enableEIP6963?fe.state.connectors:[],n=he.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&Ae.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=fe.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=he.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=fe.state,{featuredWalletIds:n}=se.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=se.state.features)==null?void 0:c.connectMethodsOrder),r=e||fe.state.connectors;if(n)return n;const{injected:s,announced:i}=_w.getConnectorsByType(r,Ie.state.recommended,Ie.state.featured),o=s.filter(_w.showConnector),a=i.filter(_w.showConnector);return o.length||a.length?["wallet","email","social"]:X0e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Ie.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&Ie.state.excludedWallets.some(r=>Ag.isLowerCaseMatch(r.name,t.name));return e||n}},_w={getConnectorsByType(t,e,n){const{customWallets:r}=se.state,s=he.getRecentWallets(),i=Rx.filterOutDuplicateWallets(e),o=Rx.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&Ie.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&Ie.state.excludedWallets.some(i=>Ag.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!Ae.isMobile()||Ae.isMobile()&&!e&&!_e.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(D.state.chains.values()).some(n=>fe.getConnectorId(n.namespace)===X.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=se.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=_w.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:se.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(w=>w.isEnabled),p=new Set(f.map(w=>w.type)),g=c.filter(w=>p.has(w)).map(w=>({type:w,isEnabled:!0})),y=f.filter(({type:w})=>!g.some(({type:v})=>v===w));return Array.from(new Set([...g,...y].map(({type:w})=>w)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!Ae.isMobile())return{accounts:[],chainId:void 0};if(t.id===X.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ew=globalThis,gI=Ew.ShadowRoot&&(Ew.ShadyCSS===void 0||Ew.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,mI=Symbol(),fO=new WeakMap;let X4=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==mI)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(gI&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=fO.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&fO.set(n,e))}return e}toString(){return this.cssText}};const Os=t=>new X4(typeof t=="string"?t:t+"",void 0,mI),Fd=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new X4(n,t,mI)},eve=(t,e)=>{if(gI)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=Ew.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},pO=gI?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return Os(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:tve,defineProperty:nve,getOwnPropertyDescriptor:rve,getOwnPropertyNames:sve,getOwnPropertySymbols:ive,getPrototypeOf:ove}=Object,Nc=globalThis,gO=Nc.trustedTypes,ave=gO?gO.emptyScript:"",__=Nc.reactiveElementPolyfillSupport,yp=(t,e)=>t,$x={toAttribute(t,e){switch(e){case Boolean:t=t?ave:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},eU=(t,e)=>!tve(t,e),mO={attribute:!0,type:String,converter:$x,reflect:!1,useDefault:!1,hasChanged:eU};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Nc.litPropertyMetadata??(Nc.litPropertyMetadata=new WeakMap);let hd=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=mO){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&nve(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=rve(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??mO}static _$Ei(){if(this.hasOwnProperty(yp("elementProperties")))return;const e=ove(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(yp("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(yp("properties"))){const n=this.properties,r=[...sve(n),...ive(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(pO(s))}else e!==void 0&&n.push(pO(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return eve(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:$x).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:$x;this._$Em=s,this[s]=c.fromAttribute(n,a.type)??((o=this._$Ej)==null?void 0:o.get(s))??null,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??eU)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};hd.elementStyles=[],hd.shadowRootOptions={mode:"open"},hd[yp("elementProperties")]=new Map,hd[yp("finalized")]=new Map,__==null||__({ReactiveElement:hd}),(Nc.reactiveElementVersions??(Nc.reactiveElementVersions=[])).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const wp=globalThis,R0=wp.trustedTypes,yO=R0?R0.createPolicy("lit-html",{createHTML:t=>t}):void 0,tU="$lit$",Ya=`lit$${Math.random().toFixed(9).slice(2)}$`,nU="?"+Ya,cve=`<${nU}>`,pu=document,Mg=()=>pu.createComment(""),Bg=t=>t===null||typeof t!="object"&&typeof t!="function",yI=Array.isArray,lve=t=>yI(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",E_=`[ 	
\f\r]`,Af=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,wO=/-->/g,vO=/>/g,il=RegExp(`>|${E_}(?:([^\\s"'>=/]+)(${E_}*=${E_}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),bO=/'/g,_O=/"/g,rU=/^(?:script|style|textarea|title)$/i,sU=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),REe=sU(1),$Ee=sU(2),bh=Symbol.for("lit-noChange"),kn=Symbol.for("lit-nothing"),EO=new WeakMap,Pl=pu.createTreeWalker(pu,129);function iU(t,e){if(!yI(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return yO!==void 0?yO.createHTML(e):e}const uve=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=Af;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===Af?u[1]==="!--"?o=wO:u[1]!==void 0?o=vO:u[2]!==void 0?(rU.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=il):u[3]!==void 0&&(o=il):o===il?u[0]===">"?(o=s??Af,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?il:u[3]==='"'?_O:bO):o===_O||o===bO?o=il:o===wO||o===vO?o=Af:(o=il,s=void 0);const f=o===il&&t[a+1].startsWith("/>")?" ":"";i+=o===Af?c+cve:d>=0?(r.push(l),c.slice(0,d)+tU+c.slice(d)+Ya+f):c+Ya+(d===-2?a:f)}return[iU(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class Fg{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=uve(e,n);if(this.el=Fg.createElement(l,r),Pl.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Pl.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(tU)){const h=u[o++],f=s.getAttribute(d).split(Ya),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?hve:p[1]==="?"?fve:p[1]==="@"?pve:Jv}),s.removeAttribute(d)}else d.startsWith(Ya)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(rU.test(s.tagName)){const d=s.textContent.split(Ya),h=d.length-1;if(h>0){s.textContent=R0?R0.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],Mg()),Pl.nextNode(),c.push({type:2,index:++i});s.append(d[h],Mg())}}}else if(s.nodeType===8)if(s.data===nU)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(Ya,d+1))!==-1;)c.push({type:7,index:i}),d+=Ya.length-1}i++}}static createElement(e,n){const r=pu.createElement("template");return r.innerHTML=e,r}}function _h(t,e,n=t,r){var o,a;if(e===bh)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=Bg(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=_h(t,s._$AS(t,e.values),s,r)),e}class dve{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??pu).importNode(n,!0);Pl.currentNode=s;let i=Pl.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new _m(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new gve(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=Pl.nextNode(),o++)}return Pl.currentNode=pu,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class _m{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=kn,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=_h(this,e,n),Bg(e)?e===kn||e==null||e===""?(this._$AH!==kn&&this._$AR(),this._$AH=kn):e!==this._$AH&&e!==bh&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):lve(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==kn&&Bg(this._$AH)?this._$AA.nextSibling.data=e:this.T(pu.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=Fg.createElement(iU(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new dve(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=EO.get(e.strings);return n===void 0&&EO.set(e.strings,n=new Fg(e)),n}k(e){yI(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new _m(this.O(Mg()),this.O(Mg()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class Jv{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=kn,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=kn}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=_h(this,e,n,0),o=!Bg(e)||e!==this._$AH&&e!==bh,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=_h(this,a[r+c],n,c),l===bh&&(l=this._$AH[c]),o||(o=!Bg(l)||l!==this._$AH[c]),l===kn?e=kn:e!==kn&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===kn?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class hve extends Jv{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===kn?void 0:e}}class fve extends Jv{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==kn)}}class pve extends Jv{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=_h(this,e,n,0)??kn)===bh)return;const r=this._$AH,s=e===kn&&r!==kn||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==kn&&(r===kn||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class gve{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){_h(this,e)}}const C_=wp.litHtmlPolyfillSupport;C_==null||C_(Fg,_m),(wp.litHtmlVersions??(wp.litHtmlVersions=[])).push("3.3.0");const mve=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new _m(e.insertBefore(Mg(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Hl=globalThis;class Cw extends hd{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=mve(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return bh}}var nR;Cw._$litElement$=!0,Cw.finalized=!0,(nR=Hl.litElementHydrateSupport)==null||nR.call(Hl,{LitElement:Cw});const x_=Hl.litElementPolyfillSupport;x_==null||x_({LitElement:Cw});(Hl.litElementVersions??(Hl.litElementVersions=[])).push("4.2.0");let vp,Pc,kc;function DEe(t,e){vp=document.createElement("style"),Pc=document.createElement("style"),kc=document.createElement("style"),vp.textContent=zd(t).core.cssText,Pc.textContent=zd(t).dark.cssText,kc.textContent=zd(t).light.cssText,document.head.appendChild(vp),document.head.appendChild(Pc),document.head.appendChild(kc),oU(e)}function oU(t){Pc&&kc&&(t==="light"?(Pc.removeAttribute("media"),kc.media="enabled"):(kc.removeAttribute("media"),Pc.media="enabled"))}function yve(t){vp&&Pc&&kc&&(vp.textContent=zd(t).core.cssText,Pc.textContent=zd(t).dark.cssText,kc.textContent=zd(t).light.cssText)}function zd(t){return{core:Fd`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${Os(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${Os((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${Os((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${Os((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${Os((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Fd`
      :root {
        --w3m-color-mix: ${Os((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${Os(qo(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${Os(qo(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Fd`
      :root {
        --w3m-color-mix: ${Os((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${Os(qo(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${Os(qo(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const jEe=Fd`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,UEe=Fd`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,LEe=Fd`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,Hf={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},aU=mz({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function Em(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const CO=Em({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),xO=Em({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});Em({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});Em({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});Em({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const wve={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},bp={getMethodsByChainNamespace(t){return wve[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case CO.caipNetworkId:u.chains.push(CO.deprecatedCaipNetworkId);break;case xO.caipNetworkId:u.chains.push(xO.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await op.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};class wI{constructor({provider:e,namespace:n}){this.id=X.CONNECTOR_ID.WALLET_CONNECT,this.name=fc.ConnectorNamesMap[X.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=fc.ConnectorImageIds[X.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=D.getCaipNetworks.bind(D),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=se.state.universalProviderConfigOverride,s=bp.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return mp.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:vve})}}const vve=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class cU{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>D.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:X.CONNECTOR_ID.AUTH,type:"AUTH",name:X.CONNECTOR_NAMES.AUTH,provider:e,imageId:fc.ConnectorImageIds[X.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){de.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=de.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof wI);if(!e)throw new Error("WalletConnectConnector not found");return e}}class bve extends cU{setUniversalProvider(e){this.addConnector(new wI({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>Ae.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&vt.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(de.state.balanceLoading&&e.chainId===((c=D.state.activeCaipNetwork)==null?void 0:c.id))return{balance:de.state.balance||"0.00",symbol:de.state.balanceSymbol||""};const s=(await de.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=D.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===X.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:Mh.encode(new TextEncoder().encode(r)),pubkey:s}},(a=D.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=D.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===X.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:Jl(n.id)}]}))}catch(u){if(u.code===Hf.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===Hf.ERROR_INVALID_CHAIN_ID||u.code===Hf.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===Hf.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:Jl(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const _ve=["email","socials","swaps","onramp","activity","reownBranding"],My={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?vt.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?vt.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?vt.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?vt.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?vt.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?vt.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?vt.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?vt.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?vt.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},Eve={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=My[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=My[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return My[t].processApi(e)},processFallbackFeature(t,e){return My[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await Ie.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?vt.DEFAULT_REMOTE_FEATURES:vt.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of _ve){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),vt.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;dn.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class Cve{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=D.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=D.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=D.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return D.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>D.getCaipNetworks(n),this.getActiveChainNamespace=()=>D.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{D.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>D.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>D.state.activeChain===n||!n?D.state.activeCaipAddress:D.getAccountProp("caipAddress",n),this.setClientId=n=>{ke.setClientId(n)},this.getProvider=n=>St.getProvider(n),this.getProviderType=n=>St.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=de.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{de.setCaipAddress(n,r),n&&se.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{de.setBalance(n,r,s)},this.setProfileName=(n,r)=>{de.setProfileName(n,r)},this.setProfileImage=(n,r)=>{de.setProfileImage(n,r)},this.setUser=(n,r)=>{de.setUser(n,r)},this.resetAccount=n=>{de.resetAccount(n)},this.setCaipNetwork=n=>{D.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{D.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{de.setAllAccounts(n,r),se.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{de.setStatus(n,r),fe.isConnected()?he.setConnectionStatus("connected"):he.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>D.getAccountProp("address",n),this.setConnectors=n=>{const r=[...fe.state.allConnectors,...n];fe.setConnectors(r)},this.setConnections=(n,r)=>{_e.setConnections(n,r)},this.fetchIdentity=n=>ke.fetchIdentity(n),this.getReownName=n=>op.getNamesForAddress(n),this.getConnectors=()=>fe.getConnectors(),this.getConnectorImage=n=>$8.getConnectorImage(n),this.getConnections=n=>mg.getConnectionsData(n).connections,this.getRecentConnections=n=>mg.getConnectionsData(n).recentConnections,this.switchConnection=n=>_e.switchConnection(n),this.deleteConnection=n=>he.deleteAddressFromConnection(n),this.setConnectedWalletInfo=(n,r)=>{const s=St.getProviderId(r),i=n?{...n,type:s}:void 0;de.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!D.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{de.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{de.removeAddressLabel(n,r)},this.getAddress=n=>D.state.activeChain===n||!n?de.state.address:D.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>D.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{D.resetNetwork(n)},this.addConnector=n=>{fe.addConnector(n)},this.resetWcConnection=()=>{_e.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{de.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{de.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{D.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{de.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{se.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await Eve.fetchRemoteFeatures(e),se.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&RC.setOnrampProviders(this.remoteFeatures.onramp),((n=se.state.remoteFeatures)!=null&&n.email||Array.isArray((r=se.state.remoteFeatures)==null?void 0:r.socials)&&((s=se.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){try{const e=await Ie.fetchAllowedOrigins();if(!e||!Ae.isClient()){dn.open(Gt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const n=window.location.origin;bp.isOriginAllowed(n,e,Hf.DEFAULT_ALLOWED_ANCESTORS)||dn.open(Gt.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}catch(e){if(!(e instanceof Error)){dn.open(Gt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":dn.open(Gt.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const n=e.cause instanceof Error?e.cause:e;dn.open({shortMessage:Gt.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.shortMessage,longMessage:Gt.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.longMessage(n.message)},"error");break}default:dn.open(Gt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,bt.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Wr.setThemeMode(e.themeMode),e.themeVariables&&Wr.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");D.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&D.setActiveCaipNetwork(n)}initializeConnectionController(e){_e.initialize(e.adapters??[]),_e.setWcBasic(e.basic??!1)}initializeConnectorController(){fe.initialize(this.chainNamespaces)}initializeProjectSettings(e){se.setProjectId(e.projectId),se.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;se.setDebug(e.debug!==!1),se.setEnableWalletConnect(e.enableWalletConnect!==!1),se.setEnableWalletGuide(e.enableWalletGuide!==!1),se.setEnableWallets(e.enableWallets!==!1),se.setEIP6963Enabled(e.enableEIP6963!==!1),se.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),se.setEnableAuthLogger(e.enableAuthLogger!==!1),se.setCustomRpcUrls(e.customRpcUrls),se.setEnableEmbedded(e.enableEmbedded),se.setAllWallets(e.allWallets),se.setIncludeWalletIds(e.includeWalletIds),se.setExcludeWalletIds(e.excludeWalletIds),se.setFeaturedWalletIds(e.featuredWalletIds),se.setTokens(e.tokens),se.setTermsConditionsUrl(e.termsConditionsUrl),se.setPrivacyPolicyUrl(e.privacyPolicyUrl),se.setCustomWallets(e.customWallets),se.setFeatures(e.features),se.setAllowUnsupportedChain(e.allowUnsupportedChain),se.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),se.setPreferUniversalLinks(e.experimental_preferUniversalLinks),se.setDefaultAccountTypes(e.defaultAccountTypes);const n=he.getPreferredAccountTypes()||{},r={...se.state.defaultAccountTypes,...n};de.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),se.setMetadata(e.metadata),se.setDisableAppend(e.disableAppend),se.setEnableEmbedded(e.enableEmbedded),se.setSIWX(e.siwx),!e.projectId){dn.open(Gt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===X.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");se.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return Ae.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=to.getUnsupportedNetwork(`${n}:${e}`);D.setActiveCaipNetwork(r)}}getDefaultNetwork(){return to.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return to.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return to.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?to.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=St.getProvider(e),s=St.getProviderId(e),{caipAddress:i}=D.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),he.removeConnectedNamespace(e),St.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),fe.removeConnectorId(e),D.resetAccount(e),D.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=D.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),he.setConnectedNamespaces([...D.state.chains.keys()]),this.chainNamespaces.forEach(o=>{fe.setConnectorId(Bt.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,y,w,b,v,E;const c=D.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const _=this.getCaipNetworks().find(x=>x.chainNamespace===i);_&&this.setCaipNetwork(_)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((w=(y=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:y.http)==null?void 0:w[0])||((E=(v=(b=d==null?void 0:d.rpcUrls)==null?void 0:b.default)==null?void 0:v.http)==null?void 0:E[0])});if(!h)return;he.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=de.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=D.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),he.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async({chainNamespace:e}={})=>{const n=OZ(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));ft.resetSend(),_e.resetWcConnection(),await mp.clearSessions(),fe.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));he.deleteConnectedSocialProvider(),bt.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(D.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:de.state.address,provider:St.getProvider(D.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(vt.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(D.state.activeChain),s=St.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===X.CHAIN.EVM){const n=this.getAdapter(D.state.activeChain),r=St.getProvider(D.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:de.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:D.state.activeChain}),de.state.profileImage||!1},getEnsAddress:async e=>await bp.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(D.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=St.getProvider(D.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(D.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(D.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(D.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(D.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(D.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(D.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!de.state.address||this.updateNativeBalance(de.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},_e.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(St.getProviderId(D.state.activeChain)===Bt.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=St.getProvider(n),i=St.getProviderId(n);if(e.chainNamespace===D.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===Bt.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=hs.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new bve({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=he.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(he.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=D.state.activeChain===e,c=D.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=de.state.address,i=D.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=D.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=D.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=D.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===X.CHAIN.EVM&&Ae.isSafeApp()&&fe.setConnectorId(X.CONNECTOR_ID.SAFE,e);const n=fe.getConnectorId(e);switch(this.setStatus("connecting",e),n){case X.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case X.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=fe.getConnectorId(e),s=this.getCaipNetwork(e),o=fe.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([Ae.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){var r,s;const e=Object.keys(((s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)||{}),n=this.chainNamespaces.map(async i=>{var u,d,h,f,p;const o=this.getAdapter(i),a=((f=(h=(d=(u=this.universalProvider)==null?void 0:u.session)==null?void 0:d.namespaces)==null?void 0:h[i])==null?void 0:f.accounts)||[],c=(p=D.state.activeCaipNetwork)==null?void 0:p.id,l=a.find(g=>{const{chainId:y}=hs.parseCaipAddress(g);return y===(c==null?void 0:c.toString())})||a[0];if(l){const g=hs.validateCaipAddress(l),{chainId:y,address:w}=hs.parseCaipAddress(g);if(St.setProviderId(i,Bt.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&D.state.activeCaipNetwork&&(o==null?void 0:o.namespace)!==X.CHAIN.EVM){const b=o==null?void 0:o.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:D.state.activeCaipNetwork});St.setProvider(i,b)}else St.setProvider(i,this.universalProvider);fe.setConnectorId(X.CONNECTOR_ID.WALLET_CONNECT,i),he.addConnectedNamespace(i),this.syncWalletConnectAccounts(i),await this.syncAccount({address:w,chainId:y,chainNamespace:i})}else e.includes(i)&&this.setStatus("disconnected",i);this.syncConnectedWalletInfo(i),await D.setApprovedCaipNetworksData(i)});await Promise.all(n)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=hs.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>Ae.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){St.setProviderId(s,e),St.setProvider(s,n),fe.setConnectorId(r,s)}async syncAllAccounts(e){const n=fe.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===D.state.activeChain,r=D.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=he.getActiveNetworkProps(),c=i||a,l=((d=D.state.activeCaipNetwork)==null?void 0:d.name)===X.UNSUPPORTED_NETWORK_NAME,u=D.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(y=>y.id.toString()===c.toString()),p=this.getCaipNetworks().find(y=>y.chainNamespace===o);if(!u&&!f&&!p){const y=this.getApprovedCaipNetworkIds()||[],w=y.find(v=>{var E;return((E=hs.parseCaipNetworkId(v))==null?void 0:E.chainId)===c.toString()}),b=y.find(v=>{var E;return((E=hs.parseCaipNetworkId(v))==null?void 0:E.chainNamespace)===o});f=this.getCaipNetworks().find(v=>v.caipNetworkId===w),p=this.getCaipNetworks().find(v=>v.caipNetworkId===b||"deprecatedCaipNetworkId"in v&&v.deprecatedCaipNetworkId===b)}const g=f||p;(g==null?void 0:g.chainNamespace)===D.state.activeChain?se.state.enableNetworkSwitch&&!se.state.allowUnsupportedChain&&((h=D.state.activeCaipNetwork)==null?void 0:h.name)===X.UNSUPPORTED_NETWORK_NAME?D.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),Ag.isLowerCaseMatch(s,de.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=fe.getConnectorId(e),r=St.getProviderId(e);if(r===Bt.CONNECTOR_TYPE_ANNOUNCED||r===Bt.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===Bt.CONNECTOR_TYPE_WALLET_CONNECT){const i=St.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===X.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===X.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!gg.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=D.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=kye.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};se.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await Tye.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{_e.setUri(e)}),this.universalProvider.on("connect",_e.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),_e.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(bp.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&Ae.isCaipAddress(r[0])&&this.syncAccount(hs.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&Ae.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){bt.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(Gt.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=Gt.ALERT_ERRORS[o];a&&(dn.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&_e.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return gt.open({...e,data:{swap:e.arguments}})}return gt.open(e)}async close(){await this.injectModalUi(),gt.close()}setLoading(e,n){gt.setLoading(e,n)}async disconnect(e){await _e.disconnect({namespace:e})}getSIWX(){return se.state.siwx}getError(){return""}getChainId(){var e;return(e=D.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){dn.open(Gt.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await D.switchActiveNetwork(n)}getWalletProvider(){return D.state.activeChain?St.state.providers[D.state.activeChain]:null}getWalletProviderType(){return St.getProviderId(D.state.activeChain)}subscribeProviders(e){return St.subscribeProviders(e)}getThemeMode(){return Wr.state.themeMode}getThemeVariables(){return Wr.state.themeVariables}setThemeMode(e){Wr.setThemeMode(e),oU(Wr.state.themeMode)}setTermsConditionsUrl(e){se.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){se.setPrivacyPolicyUrl(e)}setThemeVariables(e){Wr.setThemeVariables(e),yve(Wr.state.themeVariables)}subscribeTheme(e){return Wr.subscribe(e)}subscribeConnections(e){return _e.subscribe(e)}getWalletInfo(e){return e?D.getAccountProp("connectedWalletInfo",e):de.state.connectedWalletInfo}getAccount(e){var o;const n=fe.getAuthConnector(e),r=D.getAccountData(e),s=D.state.activeChain,i=he.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:Ae.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===X.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:he.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?D.subscribeChainProp("accountState",r,n):D.subscribe(r),fe.subscribe(r)}subscribeNetwork(e){return D.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e,n){return n?de.subscribeKey("connectedWalletInfo",e,n):de.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){de.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){D.subscribeKey("activeCaipNetwork",e)}getState(){return io.state}subscribeState(e){return io.subscribe(e)}showErrorMessage(e){wi.showError(e)}showSuccessMessage(e){wi.showSuccess(e)}getEvent(){return{...bt.state}}subscribeEvents(e){return bt.subscribe(e)}replace(e){Re.replace(e)}redirect(e){Re.push(e)}popTransactionStack(e){Re.popTransactionStack(e)}isOpen(){return gt.state.open}isTransactionStackEmpty(){return Re.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){se.setFeatures(e)}updateRemoteFeatures(e){se.setRemoteFeatures(e)}updateOptions(e){const r={...se.state||{},...e};se.setOptions(r)}setConnectMethodsOrder(e){se.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){se.setWalletFeaturesOrder(e)}setCollapseWallets(e){se.setCollapseWallets(e)}setSocialsOrder(e){se.setSocialsOrder(e)}getConnectMethodsOrder(){return Rx.getConnectOrderMethod(se.state.features,fe.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||D.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&D.removeNetwork(e,n)}}let SO=!1;class xve extends Cve{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{ps.checkIfRequestExists(n)?ps.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error($n.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage($n.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=ps.checkIfRequestIsSafe(r),i=de.state.address,o=D.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=D.state.activeChain;fe.getConnectorId(n)===X.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=D.state.activeChain,s=r===X.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=se.state.defaultAccountTypes[r],o=(l=de.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;Ag.isLowerCaseMatch(n.address,de.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...de.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>Ae.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[Ae.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...de.state.user||{},username:n},D.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,D.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,D.state.activeChain)})}async syncAuthConnector(e,n){var d,h,f,p;const r=X.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n),s=n===D.state.activeChain;if(!r)return;this.setLoading(!0,n);const i=e.getLoginEmailUsed();this.setLoading(i,n),i&&this.setStatus("connecting",n);const o=e.getEmail(),a=e.getUsername();this.setUser({...((d=de.state)==null?void 0:d.user)||{},username:a,email:o},n),this.setupAuthConnectorListeners(e);const{isConnected:c}=await e.isConnected(),l=Wr.getSnapshot(),u=se.getSnapshot();await Promise.all([e.syncDappData({metadata:u.metadata,sdkVersion:u.sdkVersion,projectId:u.projectId,sdkType:u.sdkType}),e.syncTheme({themeMode:l.themeMode,themeVariables:l.themeVariables,w3mThemeVariables:qo(l.themeVariables,l.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&s&&(c&&((h=this.connectionControllerClient)!=null&&h.connectExternal)?(await((p=this.connectionControllerClient)==null?void 0:p.connectExternal({id:X.CONNECTOR_ID.AUTH,info:{name:X.CONNECTOR_ID.AUTH},type:Bt.CONNECTOR_TYPE_AUTH,provider:e,chainId:(f=D.state.activeCaipNetwork)==null?void 0:f.id,chain:n})),this.setStatus("connected",n)):fe.getConnectorId(n)===X.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),he.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!Ae.isTelegram())return;const r=he.getTelegramSocialProvider();if(!r||!Ae.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;de.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=fe.getAuthConnector();r&&o&&(this.setLoading(!0,e),await _e.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),he.setConnectedSocialProvider(r),he.removeTelegramSocialProvider(),bt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var l,u,d,h;if(!X.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(l=this.remoteFeatures)==null?void 0:l.email,s=Array.isArray((u=this.remoteFeatures)==null?void 0:u.socials)&&this.remoteFeatures.socials.length>0,i=r||s,a=Ag.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&((d=this.options)!=null&&d.projectId)&&i&&(this.authProvider=Wl.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(h=this.getCaipNetwork(a))==null?void 0:h.caipNetworkId,abortController:Gt.EmbeddedWalletAbortController,onTimeout:f=>{f==="iframe_load_failed"?dn.open(Gt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):f==="iframe_request_timeout"?dn.open(Gt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):f==="unverified_domain"&&dn.open(Gt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),io.subscribeOpen(f=>{var p;!f&&this.isTransactionStackEmpty()&&((p=this.authProvider)==null||p.rejectRpcRequests())}));const c=e===D.state.activeChain;this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&Ie.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=D.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=St.getProvider(r),u=St.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=St.getProviderId(n)===Bt.CONNECTOR_TYPE_AUTH,u=St.getProviderId(r),d=u===Bt.CONNECTOR_TYPE_AUTH,h=X.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(D.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:X.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:Bt.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===Bt.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),io.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==X.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=St.getProviderId(e);if(n===Bt.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=he.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(Ae.isClient()&&!SO)try{const e={...vt.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),Ae.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!se.state.disableAppend&&!se.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}SO=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!Ae.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(on(()=>import("./embedded-wallet-CZqxM-M7.js"),__vite__mapDeps([3,4,5,6,7,8,9,10,11,12,13,14]))),n.email&&r.push(on(()=>import("./email-Dpdt7hZ_.js"),__vite__mapDeps([15,4,14,8,13,7,12,16,9]))),n.socials&&r.push(on(()=>import("./socials-BUf45RwO.js"),__vite__mapDeps([17,4,18,7,19,20,13,21,12,8,14,22,6,23]))),n.swaps&&n.swaps.length>0&&r.push(on(()=>import("./swaps-CuOHneJX.js"),__vite__mapDeps([24,4,12,8,25,26,27,6,13,23,9,7]))),e.send&&r.push(on(()=>import("./send-AiNZ1cx9.js"),__vite__mapDeps([28,4,12,8,13,7,19,14,27,6,9,29,30]))),e.receive&&r.push(on(()=>import("./receive-CUhA4Zs5.js"),__vite__mapDeps([31,4,32,6,22]))),n.onramp&&n.onramp.length>0&&r.push(on(()=>import("./onramp-DKPiPFav.js"),__vite__mapDeps([33,4,34,23,13,6,8,35,18,7,19,36,14,12,21,9]))),n.activity&&r.push(on(()=>import("./transactions-bnut60-v.js"),__vite__mapDeps([37,4,38,34,23,13,14,6]))),e.pay&&r.push(on(()=>import("./index-Crxv1cPe.js"),__vite__mapDeps([39,4,12,8,40,6,13,10,35,30,21]))),await Promise.all([...r,on(()=>import("./index-Co4NiQfL.js"),__vite__mapDeps([41,4,6,8,29,13,42,26,10,35,12,11,40,38,34,23,14,25,30,7,9,16,18,19,20,5,21,32,22,36])),on(()=>import("./w3m-modal-C6_99zWK.js"),__vite__mapDeps([43,4,10,6,13,11,8,26,42]))])}}let $a;function Sve(t){t&&($a=t)}function Zv(){if(!$a)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await($a==null?void 0:$a.open(n))}async function e(){await($a==null?void 0:$a.close())}return{open:t,close:e}}const Ave="1.7.10";let By;function Ive(t){return By||(By=new xve({...t,sdkVersion:Ae.generateSdkVersion(t.adapters??[],"react",Ave)}),Sve(By)),By}const Tve=Pi({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),AO=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],Nve=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=Tve({isOpen:t}),{open:i}=Zv(),o=M.useRef(null),[a,c]=M.useState([]),[l,u]=M.useState(!0),[d,h]=M.useState(null),[f,p]=M.useState("all"),[g,y]=M.useState(1),[w,b]=M.useState(1),[v,E]=M.useState(0),[_,x]=M.useState(null),[S,N]=M.useState(AO[0]),[C,O]=M.useState(!1),[R,B]=M.useState(null),H=M.useCallback(async()=>{var k,L;try{if((k=window.solana)!=null&&k.isPhantom){const W=await window.solana.connect();B(W.publicKey.toString());return}if((L=window.solflare)!=null&&L.isSolflare){const W=await window.solflare.connect();B(W.publicKey.toString());return}i()}catch(W){console.error("Failed to connect Solana wallet:",W),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}O(!1)},[i]);M.useEffect(()=>{var k,L;(k=window.solana)!=null&&k.publicKey?B(window.solana.publicKey.toString()):(L=window.solflare)!=null&&L.publicKey&&B(window.solflare.publicKey.toString())},[]),M.useEffect(()=>{t&&(async()=>{var L;u(!0),h(null);try{let W,K=f==="owned"&&r||void 0;if(S.api==="opensea-solana"){if(f==="owned"&&!R){O(!0),u(!1);return}K=R||void 0,W=await P8(S.slug,50),console.log("Fetched Solana NFTs from collection:",W.data.length),f==="owned"&&R&&(console.log("Filtering for owner:",R),console.log("Sample NFT owner data:",(L=W.data[0])==null?void 0:L.owners),console.log("All NFTs owner data:",W.data.map(Q=>({name:Q.name,owners:Q.owners,owner_of:Q.owner_of}))),W.data.some(Q=>Q.owners&&Q.owners.length>0)?(W.data=W.data.filter(Q=>{const te=Q.owners.some(oe=>oe.owner_of&&oe.owner_of.toLowerCase()===R.toLowerCase());return te&&console.log("Found owned NFT:",Q.name),te}),console.log("NFTs after filtering:",W.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else S.api==="opensea"?W=await PA(S.slug,50,K):W=await NA(S.slug,g,50,K);c(W.data),b(W.totalPages),E(W.totalCount)}catch(W){W instanceof Error?h(W.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,S,R]),M.useEffect(()=>{C&&H()},[C,H]);const F=k=>new Date(k).toLocaleDateString(),A=k=>S.api==="opensea-solana"&&(!k.owners||k.owners.length===0)?"Owner data unavailable":k.owners.length>0?`${k.owners[0].owner_of.substring(0,6)}...`:"N/A",I=()=>{n&&n()},U=async k=>{if(S.api==="opensea"&&S.chain)try{const L=await N8(S.chain,k.address,k.token_id.toString()),W={...k,attributes:JSON.stringify(L.traits||[])};x(W)}catch(L){console.error("Failed to fetch full NFT details",L),x(k)}else x(k)},T=k=>{N(k),y(1)};return t?m.jsxs(m.Fragment,{children:[m.jsx(am,{nodeRef:o,handle:`.${s.header}`,children:m.jsxs("div",{ref:o,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"LAWB NFT GALLERY"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:I,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),m.jsx("div",{className:s.collectionSelector,children:AO.map(k=>m.jsx("button",{className:`${s.collectionButton} ${S.slug===k.slug?"active":""}`,onClick:()=>T(k),children:k.name},k.slug))}),m.jsxs("div",{className:s.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),m.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!R,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||R?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||R?1:.6},children:"My NFTs"}),S.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{H()},style:{background:R?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:R?"white":"black",marginLeft:"auto"},children:R?`Solana: ${R.slice(0,4)}...${R.slice(-4)}`:"Connect Solana"})]}),S.api==="opensea-solana"&&!R&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?m.jsx("div",{children:"Loading NFTs..."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${v} total)`,f==="recent"&&`Recently minted NFTs by ${S.api==="opensea-solana"?(R==null?void 0:R.slice(0,6))+"..."+(R==null?void 0:R.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${S.api==="opensea-solana"?(R==null?void 0:R.slice(0,6))+"..."+(R==null?void 0:R.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?m.jsx("div",{children:"No NFTs found."}):m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map(k=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{U(k)},children:[m.jsx("div",{style:{width:"100%",height:"150px",backgroundImage:`url(${k.image_url})`,backgroundSize:"cover",backgroundPosition:"center",marginBottom:"10px",border:"1px solid #ccc"}}),m.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:m.jsxs("strong",{children:["#",k.token_id]})}),m.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",A(k)]}),m.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",F(k.created_at)]})]},k.id))}),f!=="recent"&&w>1&&m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[m.jsx("button",{onClick:()=>y(k=>Math.max(1,k-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),m.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",w]}),m.jsx("button",{onClick:()=>y(k=>Math.min(w,k+1)),disabled:g===w,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===w?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),_&&m.jsx(MJ,{nft:_,onClose:()=>x(null)})]}):null},Pve=Pi({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),kve=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}];function lU(){const t=Pve(),e=M.useRef(null),[n,r]=M.useState(null),[s,i]=M.useState(""),[o,a]=M.useState(""),[c,l]=M.useState(36),[u,d]=M.useState(36),[h,f]=M.useState(!1),[p,g]=M.useState(!1),[y,w]=M.useState(!1),[b,v]=M.useState(!1),[E,_]=M.useState(!1),x=M.useCallback(()=>{const F=T=>{const k=e.current;if(!k)return;T.textAlign="center";const L=(W,K)=>{const Z=W.split(" "),Q=[];let te="";for(let oe=0;oe<Z.length;oe++){const me=te?te+" "+Z[oe]:Z[oe];T.measureText(me).width<=K?te=me:(te&&Q.push(te),te=Z[oe])}return te&&Q.push(te),Q};if(s){T.font=`bold ${c}px Impact`;const W=k.width*.9;(function(){return T.font=`bold ${c}px Impact`,L(s,W)})().forEach((Z,Q)=>{const te=c+10+Q*c*1.2;T.strokeStyle="#000",T.lineWidth=4,T.strokeText(Z,k.width/2,te),T.fillStyle="#fff",T.fillText(Z,k.width/2,te)})}if(o){T.font=`bold ${u}px Impact`;const W=k.width*.9,K=function(){return T.font=`bold ${u}px Impact`,L(o,W)}(),Z=12;K.forEach((Q,te)=>{const oe=k.height-Z-(K.length-1-te)*u*1.2;T.strokeStyle="#000",T.lineWidth=4,T.strokeText(Q,k.width/2,oe),T.fillStyle="#fff",T.fillText(Q,k.width/2,oe)})}},A=T=>{try{h&&S(T),p&&N(T),y&&C(T)}catch{console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead."),f(!1),g(!1),w(!1)}},I=e.current;if(!I)return;const U=I.getContext("2d");if(U)if(U.clearRect(0,0,I.width,I.height),n){console.log("Loading image:",n);const T=new Image;T.crossOrigin="anonymous",T.onload=()=>{console.log("Image loaded successfully:",T.width,"x",T.height);const k=e.current;if(!k||k!==I)return;const L=k.getContext("2d");if(!L)return;L.clearRect(0,0,k.width,k.height);const W=Math.min(k.width/T.width,k.height/T.height),K=(k.width-T.width*W)/2,Z=(k.height-T.height*W)/2;console.log("Drawing image at:",K,Z,"with scale:",W),L.drawImage(T,K,Z,T.width*W,T.height*W),F(L),A(k)},T.onerror=k=>{console.error("Failed to load image:",n,k);const L=e.current;if(!L||L!==I)return;const W=L.getContext("2d");W&&(W.clearRect(0,0,L.width,L.height),W.fillStyle="#333",W.fillRect(0,0,L.width,L.height),F(W),A(L))},T.src=n}else U.fillStyle="#333",U.fillRect(0,0,I.width,I.height),F(U),A(I)},[n,s,c,o,u,h,p,y]),S=F=>{const A=F.getContext("2d");if(!A)return;const I=A.getImageData(0,0,F.width,F.height),U=I.data;for(let T=0;T<U.length;T+=4){const k=U[T],L=U[T+1],W=U[T+2],K=(k+L+W)/3,Z=1.8;U[T]=Math.min(255,K+(k-K)*Z),U[T+1]=Math.min(255,K+(L-K)*Z*.7),U[T+2]=Math.min(255,K+(W-K)*Z*.4);const Q=1.3;U[T]=Math.min(255,Math.max(0,U[T]*Q)),U[T+1]=Math.min(255,Math.max(0,U[T+1]*Q)),U[T+2]=Math.min(255,Math.max(0,U[T+2]*Q))}A.putImageData(I,0,0)},N=F=>{const A=F.getContext("2d");if(!A)return;const I=4,T=A.getImageData(0,0,F.width,F.height).data,k=new Uint8ClampedArray(T);for(let L=0;L<F.height;L+=I)for(let W=0;W<F.width;W+=I){const K=(L*F.width+W)*4,Z=T[K],Q=T[K+1],te=T[K+2],oe=T[K+3];for(let me=0;me<I&&L+me<F.height;me++)for(let je=0;je<I&&W+je<F.width;je++){const Oe=((L+me)*F.width+(W+je))*4;k[Oe]=Z,k[Oe+1]=Q,k[Oe+2]=te,k[Oe+3]=oe}}A.putImageData(new ImageData(k,F.width,F.height),0,0)},C=F=>{const A=F.getContext("2d");if(!A)return;const I=A.getImageData(0,0,F.width,F.height),U=I.data;for(let T=0;T<U.length;T+=4){const k=(Math.random()-.5)*50;U[T]=Math.max(0,Math.min(255,U[T]+k)),U[T+1]=Math.max(0,Math.min(255,U[T+1]+k)),U[T+2]=Math.max(0,Math.min(255,U[T+2]+k))}A.putImageData(I,0,0)};M.useEffect(()=>{x()},[x]);const O=F=>{var I;const A=(I=F.target.files)==null?void 0:I[0];A&&r(URL.createObjectURL(A))},R=()=>{r(null),i(""),a(""),l(36),d(36),f(!1),g(!1),w(!1)},B=()=>{const F=e.current;if(!F)return;const A=document.createElement("a");A.download="meme.png",A.href=F.toDataURL("image/png"),document.body.appendChild(A),A.click(),document.body.removeChild(A)},H=async F=>{_(!0),v(!1);try{console.log("Fetching NFTs for collection:",F);let A;if(F.api==="opensea"){console.log("Using OpenSea API for:",F.slug);const I=await PA(F.slug,50);A=I.data,console.log("OpenSea response:",I)}else if(F.api==="opensea-solana"){console.log("Using OpenSea Solana API for:",F.slug);const I=await P8(F.slug,50);A=I.data,console.log("OpenSea Solana response:",I)}else{console.log("Using Scatter API for:",F.slug);const I=await NA(F.slug,1,50);A=I.data,console.log("Scatter response:",I)}if(A&&A.length>0){const I=A[Math.floor(Math.random()*A.length)],U=I.image||I.image_url||I.image_url_shrunk;console.log("Selected NFT:",I),console.log("Image URL:",U),r(U)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(A){console.error("Error fetching NFTs:",A),alert("Failed to fetch NFT images. Check console for details.")}finally{_(!1)}};return m.jsxs("div",{className:t.container,children:[m.jsxs("div",{className:t.header,children:[m.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),m.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",m.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),m.jsxs("div",{className:t.content,children:[m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Collections"}),m.jsxs("div",{className:t.row,children:[m.jsxs("div",{className:t.dropdown,children:[m.jsx("button",{className:t.button,onClick:()=>v(F=>!F),children:"Collections"}),b&&m.jsx("div",{className:t.dropdownContent,children:kve.map(F=>m.jsx("div",{className:t.dropdownItem,onClick:()=>{H(F)},children:F.name},F.id))})]}),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:O})]}),E&&m.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Text"}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Top Text:"}),m.jsx("input",{className:t.input,type:"text",value:s,onChange:F=>i(F.target.value),placeholder:"Enter top text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:F=>l(Number(F.target.value)),style:{width:60,textAlign:"center"}})]}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Bottom Text:"}),m.jsx("input",{className:t.input,type:"text",value:o,onChange:F=>a(F.target.value),placeholder:"Enter bottom text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:F=>d(Number(F.target.value)),style:{width:60,textAlign:"center"}})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Effects"}),m.jsxs("div",{className:t.row,children:[m.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(F=>!F),children:"Deep Fry"}),m.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(F=>!F),children:"Pixelate"}),m.jsx("button",{className:t.effectButton,style:{background:y?"#00ffff":void 0},onClick:()=>w(F=>!F),children:"Grain"})]})]}),m.jsxs("div",{className:t.actions,children:[m.jsx("button",{className:t.button,onClick:B,children:"Save Image"}),m.jsx("button",{className:t.button,onClick:R,children:"Restart"})]})]}),m.jsx("div",{className:t.memeArea,children:m.jsx("canvas",{ref:e,width:320,height:320,className:t.canvas})})]})}const Ove=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>on(async()=>{const{default:r}=await Promise.resolve().then(()=>Wh);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class vI extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Rve extends vI{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class $ve extends vI{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Dve extends vI{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Dx;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Dx||(Dx={}));var jve=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class Uve{constructor(e,{headers:n={},customFetch:r,region:s=Dx.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=Ove(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return jve(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:c}=n;c||(c=this.region),c&&c!=="any"&&(a["x-region"]=c);let l;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:l}).catch(p=>{throw new Rve(p)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new $ve(u);if(!u.ok)throw new Dve(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield u.json():h==="application/octet-stream"?f=yield u.blob():h==="text/event-stream"?f=u:h==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(s){return{data:null,error:s}}})}}var Kr={},bI={},Xv={},Cm={},eb={},tb={},Lve=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Eh=Lve();const Mve=Eh.fetch,uU=Eh.fetch.bind(Eh),dU=Eh.Headers,Bve=Eh.Request,Fve=Eh.Response,Wh=Object.freeze(Object.defineProperty({__proto__:null,Headers:dU,Request:Bve,Response:Fve,default:uU,fetch:Mve},Symbol.toStringTag,{value:"Module"})),zve=j0(Wh);var nb={};Object.defineProperty(nb,"__esModule",{value:!0});let qve=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};nb.default=qve;var hU=rn&&rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tb,"__esModule",{value:!0});const Wve=hU(zve),Hve=hU(nb);let Vve=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Wve.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,c;let l=null,u=null,d=null,h=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=await i.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=w:u=JSON.parse(w))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");g&&y&&y.length>1&&(d=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await i.text();try{l=JSON.parse(g),Array.isArray(l)&&i.status===404&&(u=[],l=null,h=200,f="OK")}catch{i.status===404&&g===""?(h=204,f="No Content"):l={message:g}}if(l&&this.isMaybeSingle&&(!((c=l==null?void 0:l.details)===null||c===void 0)&&c.includes("0 rows"))&&(l=null,h=200,f="OK"),l&&this.shouldThrowOnError)throw new Hve.default(l)}return{error:l,data:u,count:d,status:h,statusText:f}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};tb.default=Vve;var Gve=rn&&rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(eb,"__esModule",{value:!0});const Kve=Gve(tb);let Yve=class extends Kve.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};eb.default=Yve;var Qve=rn&&rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cm,"__esModule",{value:!0});const Jve=Qve(eb);let Zve=class extends Jve.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Cm.default=Zve;var Xve=rn&&rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xv,"__esModule",{value:!0});const If=Xve(Cm);let ebe=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new If.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){const a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new If.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const c=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){const l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new If.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new If.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new If.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Xv.default=ebe;var rb={},sb={};Object.defineProperty(sb,"__esModule",{value:!0});sb.version=void 0;sb.version="0.0.0-automated";Object.defineProperty(rb,"__esModule",{value:!0});rb.DEFAULT_HEADERS=void 0;const tbe=sb;rb.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${tbe.version}`};var fU=rn&&rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bI,"__esModule",{value:!0});const nbe=fU(Xv),rbe=fU(Cm),sbe=rb;let ibe=class pU{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},sbe.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new nbe.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new pU(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let c;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(o="POST",c=n);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new rbe.default({method:o,url:a,headers:l,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};bI.default=ibe;var Hh=rn&&rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Kr,"__esModule",{value:!0});Kr.PostgrestError=Kr.PostgrestBuilder=Kr.PostgrestTransformBuilder=Kr.PostgrestFilterBuilder=Kr.PostgrestQueryBuilder=Kr.PostgrestClient=void 0;const gU=Hh(bI);Kr.PostgrestClient=gU.default;const mU=Hh(Xv);Kr.PostgrestQueryBuilder=mU.default;const yU=Hh(Cm);Kr.PostgrestFilterBuilder=yU.default;const wU=Hh(eb);Kr.PostgrestTransformBuilder=wU.default;const vU=Hh(tb);Kr.PostgrestBuilder=vU.default;const bU=Hh(nb);Kr.PostgrestError=bU.default;var obe=Kr.default={PostgrestClient:gU.default,PostgrestQueryBuilder:mU.default,PostgrestFilterBuilder:yU.default,PostgrestTransformBuilder:wU.default,PostgrestBuilder:vU.default,PostgrestError:bU.default};const{PostgrestClient:abe,PostgrestQueryBuilder:WEe,PostgrestFilterBuilder:HEe,PostgrestTransformBuilder:VEe,PostgrestBuilder:GEe,PostgrestError:KEe}=obe;function cbe(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const lbe=cbe(),ube="2.11.13",dbe={"X-Client-Info":`realtime-js/${ube}`},hbe="1.0.0",_U=1e4,fbe=1e3;var _p;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(_p||(_p={}));var lr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(lr||(lr={}));var fi;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(fi||(fi={}));var jx;(function(t){t.websocket="websocket"})(jx||(jx={}));var wl;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(wl||(wl={}));class pbe{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const c=r.decode(e.slice(o,o+i));o=o+i;const l=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:l}}}class EU{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ot;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ot||(Ot={}));const IO=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=gbe(o,t,e,s),i),{})},gbe=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?CU(i,o):Ux(o)},CU=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return vbe(e,n)}switch(t){case Ot.bool:return mbe(e);case Ot.float4:case Ot.float8:case Ot.int2:case Ot.int4:case Ot.int8:case Ot.numeric:case Ot.oid:return ybe(e);case Ot.json:case Ot.jsonb:return wbe(e);case Ot.timestamp:return bbe(e);case Ot.abstime:case Ot.date:case Ot.daterange:case Ot.int4range:case Ot.int8range:case Ot.money:case Ot.reltime:case Ot.text:case Ot.time:case Ot.timestamptz:case Ot.timetz:case Ot.tsrange:case Ot.tstzrange:return Ux(e);default:return Ux(e)}},Ux=t=>t,mbe=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},ybe=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},wbe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},vbe=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>CU(e,a))}return t},bbe=t=>typeof t=="string"?t.replace(" ","T"):t,xU=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class S_{constructor(e,n,r={},s=_U){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var TO;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(TO||(TO={}));class Ep{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ep.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=Ep.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ep.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},c={};return this.map(i,(l,u)=>{o[l]||(c[l]=u)}),this.map(o,(l,u)=>{const d=i[l];if(d){const h=u.map(y=>y.presence_ref),f=d.map(y=>y.presence_ref),p=u.filter(y=>f.indexOf(y.presence_ref)<0),g=d.filter(y=>h.indexOf(y.presence_ref)<0);p.length>0&&(a[l]=p),g.length>0&&(c[l]=g)}else a[l]=u}),this.syncDiff(i,{joins:a,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,c)=>{var l;const u=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(c),u.length>0){const d=e[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,u,c)}),this.map(o,(a,c)=>{let l=e[a];if(!l)return;const u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=l,s(a,l,c),l.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var NO;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(NO||(NO={}));var PO;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(PO||(PO={}));var Ro;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ro||(Ro={}));class _I{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=lr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new S_(this,fi.join,this.params,this.timeout),this.rejoinTimer=new EU(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=lr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=lr.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=lr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=lr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fi.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Ep(this),this.broadcastEndpointURL=xU(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==lr.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(Ro.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Ro.CLOSED));const c={},l={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(Ro.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,f=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,p=[];for(let g=0;g<f;g++){const y=h[g],{filter:{event:w,schema:b,table:v,filter:E}}=y,_=u&&u[g];if(_&&_.event===w&&_.schema===b&&_.table===v&&_.filter===E)p.push(Object.assign(Object.assign({},y),{id:_.id}));else{this.unsubscribe(),this.state=lr.errored,e==null||e(Ro.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(Ro.SUBSCRIBED);return}}).receive("error",u=>{this.state=lr.errored,e==null||e(Ro.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ro.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=l.body)===null||s===void 0?void 0:s.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const l=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),l.receive("ok",()=>i("ok")),l.receive("error",()=>i("error")),l.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=lr.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fi.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new S_(this,fi.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new S_(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=fi;if(r&&[a,c,l,u].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var p,g,y;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((y=(g=f.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(f=>f.callback(h,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var p,g,y,w,b,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const E=f.id,_=(p=f.filter)===null||p===void 0?void 0:p.event;return E&&((g=n.ids)===null||g===void 0?void 0:g.includes(E))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const E=(b=(w=f==null?void 0:f.filter)===null||w===void 0?void 0:w.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return E==="*"||E===((v=n==null?void 0:n.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:g,table:y,commit_timestamp:w,type:b,errors:v}=p;h=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:w,eventType:b,new:{},old:{},errors:v}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===lr.closed}_isJoined(){return this.state===lr.joined}_isJoining(){return this.state===lr.joining}_isLeaving(){return this.state===lr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&_I.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(fi.close,{},e)}_onError(e){this._on(fi.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=lr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=IO(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=IO(e.columns,e.old_record)),n}}const kO=()=>{},_be=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ebe{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=dbe,this.params={},this.timeout=_U,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=kO,this.ref=0,this.logger=kO,this.conn=null,this.sendBuffer=[],this.serializer=new pbe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>on(async()=>{const{default:c}=await Promise.resolve().then(()=>Wh);return{default:c}},void 0).then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${jx.websocket}`,this.httpEndpoint=xU(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new EU(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){this.conn||(this.transport||(this.transport=lbe),this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection())}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:hbe}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case _p.connecting:return wl.Connecting;case _p.open:return wl.Open;case _p.closing:return wl.Closing;default:return wl.Closed}}isConnected(){return this.connectionState()===wl.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new _I(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{n&&r.updateJoinPayload({access_token:n,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(fi.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(fbe,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(fi.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([_be],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class EI extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Tn(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Cbe extends EI{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Lx extends EI{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var xbe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const SU=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>on(async()=>{const{default:r}=await Promise.resolve().then(()=>Wh);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Sbe=()=>xbe(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield on(()=>Promise.resolve().then(()=>Wh),void 0)).Response:Response}),Mx=t=>{if(Array.isArray(t))return t.map(n=>Mx(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Mx(r)}),e};var Nu=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const A_=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Abe=(t,e,n)=>Nu(void 0,void 0,void 0,function*(){const r=yield Sbe();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new Cbe(A_(s),t.status||500))}).catch(s=>{e(new Lx(A_(s),s))}):e(new Lx(A_(t),t))}),Ibe=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function xm(t,e,n,r,s,i){return Nu(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,Ibe(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Abe(c,a,r))})})}function $0(t,e,n,r){return Nu(this,void 0,void 0,function*(){return xm(t,"GET",e,n,r)})}function Wa(t,e,n,r,s){return Nu(this,void 0,void 0,function*(){return xm(t,"POST",e,r,s,n)})}function Tbe(t,e,n,r,s){return Nu(this,void 0,void 0,function*(){return xm(t,"PUT",e,r,s,n)})}function Nbe(t,e,n,r){return Nu(this,void 0,void 0,function*(){return xm(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function AU(t,e,n,r,s){return Nu(this,void 0,void 0,function*(){return xm(t,"DELETE",e,r,s,n)})}var Lr=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const Pbe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},OO={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class kbe{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=SU(s)}uploadOrUpdate(e,n,r,s){return Lr(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},OO),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const l=this._removeEmptyFolders(n),u=this._getFinalPath(l),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield d.json();return d.ok?{data:{path:l,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(Tn(i))return{data:null,error:i};throw i}})}upload(e,n,r){return Lr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Lr(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let c;const l=Object.assign({upsert:OO.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",l.cacheControl)):(c=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:u}),h=yield d.json();return d.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(Tn(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return Lr(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Wa(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new EI("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(Tn(r))return{data:null,error:r};throw r}})}update(e,n,r){return Lr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Lr(this,void 0,void 0,function*(){try{return{data:yield Wa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Tn(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Lr(this,void 0,void 0,function*(){try{return{data:{path:(yield Wa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Tn(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Lr(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Wa(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Tn(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Lr(this,void 0,void 0,function*(){try{const s=yield Wa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Tn(s))return{data:null,error:s};throw s}})}download(e,n){return Lr(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield $0(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Tn(a))return{data:null,error:a};throw a}})}info(e){return Lr(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield $0(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Mx(r),error:null}}catch(r){if(Tn(r))return{data:null,error:r};throw r}})}exists(e){return Lr(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Nbe(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Tn(r)&&r instanceof Lx){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}remove(e){return Lr(this,void 0,void 0,function*(){try{return{data:yield AU(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Tn(n))return{data:null,error:n};throw n}})}list(e,n,r){return Lr(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Pbe),n),{prefix:e||""});return{data:yield Wa(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Tn(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Obe="2.7.1",Rbe={"X-Client-Info":`storage-js/${Obe}`};var sd=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class $be{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},Rbe),n),this.fetch=SU(r)}listBuckets(){return sd(this,void 0,void 0,function*(){try{return{data:yield $0(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Tn(e))return{data:null,error:e};throw e}})}getBucket(e){return sd(this,void 0,void 0,function*(){try{return{data:yield $0(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Tn(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return sd(this,void 0,void 0,function*(){try{return{data:yield Wa(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Tn(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return sd(this,void 0,void 0,function*(){try{return{data:yield Tbe(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Tn(r))return{data:null,error:r};throw r}})}emptyBucket(e){return sd(this,void 0,void 0,function*(){try{return{data:yield Wa(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Tn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return sd(this,void 0,void 0,function*(){try{return{data:yield AU(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Tn(n))return{data:null,error:n};throw n}})}}class Dbe extends $be{constructor(e,n={},r){super(e,n,r)}from(e){return new kbe(this.url,this.headers,e,this.fetch)}}const jbe="2.50.1";let Vf="";typeof Deno<"u"?Vf="deno":typeof document<"u"?Vf="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Vf="react-native":Vf="node";const Ube={"X-Client-Info":`supabase-js-${Vf}/${jbe}`},Lbe={headers:Ube},Mbe={schema:"public"},Bbe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Fbe={};var zbe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const qbe=t=>{let e;return t?e=t:typeof fetch>"u"?e=uU:e=fetch,(...n)=>e(...n)},Wbe=()=>typeof Headers>"u"?dU:Headers,Hbe=(t,e,n)=>{const r=qbe(n),s=Wbe();return(i,o)=>zbe(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:t;let l=new s(o==null?void 0:o.headers);return l.has("apikey")||l.set("apikey",t),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:l}))})};var Vbe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};function Gbe(t){return t.endsWith("/")?t:t+"/"}function Kbe(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:c,auth:l,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},l),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Vbe(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}const IU="2.70.0",fd=30*1e3,Bx=3,I_=Bx*fd,Ybe="http://localhost:9999",Qbe="supabase.auth.token",Jbe={"X-Client-Info":`gotrue-js/${IU}`},Fx="X-Supabase-Api-Version",TU={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Zbe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Xbe=6e5;class CI extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function He(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class e1e extends CI{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function t1e(t){return He(t)&&t.name==="AuthApiError"}class NU extends CI{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Yc extends CI{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Da extends Yc{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function n1e(t){return He(t)&&t.name==="AuthSessionMissingError"}class Fy extends Yc{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zy extends Yc{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class qy extends Yc{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function r1e(t){return He(t)&&t.name==="AuthImplicitGrantRedirectError"}class RO extends Yc{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zx extends Yc{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function T_(t){return He(t)&&t.name==="AuthRetryableFetchError"}class $O extends Yc{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Cp extends Yc{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const D0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),DO=` 	
\r=`.split(""),s1e=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<DO.length;e+=1)t[DO[e].charCodeAt(0)]=-2;for(let e=0;e<D0.length;e+=1)t[D0[e].charCodeAt(0)]=e;return t})();function jO(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(D0[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(D0[r]),e.queuedBits-=6}}function PU(t,e,n){const r=s1e[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function UO(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{a1e(o,r,n)};for(let o=0;o<t.length;o+=1)PU(t.charCodeAt(o),s,i);return e.join("")}function i1e(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function o1e(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}i1e(r,e)}}function a1e(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function c1e(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)PU(t.charCodeAt(s),n,r);return new Uint8Array(e)}function l1e(t){const e=[];return o1e(t,n=>e.push(n)),new Uint8Array(e)}function u1e(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>jO(s,n,r)),jO(null,n,r),e.join("")}function d1e(t){return Math.round(Date.now()/1e3)+t}function h1e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ai=()=>typeof window<"u"&&typeof document<"u",ol={tested:!1,writable:!1},xp=()=>{if(!ai())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ol.tested)return ol.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ol.tested=!0,ol.writable=!0}catch{ol.tested=!0,ol.writable=!1}return ol.writable};function f1e(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const kU=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>on(async()=>{const{default:r}=await Promise.resolve().then(()=>Wh);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},p1e=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",OU=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Wy=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Hy=async(t,e)=>{await t.removeItem(e)};class ib{constructor(){this.promise=new ib.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}ib.promiseConstructor=Promise;function N_(t){const e=t.split(".");if(e.length!==3)throw new Cp("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Zbe.test(e[r]))throw new Cp("JWT not in base64url format");return{header:JSON.parse(UO(e[0])),payload:JSON.parse(UO(e[1])),signature:c1e(e[2]),raw:{header:e[0],payload:e[1]}}}async function g1e(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function m1e(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function y1e(t){return("0"+t.toString(16)).substr(-2)}function w1e(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,y1e).join("")}async function v1e(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function b1e(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await v1e(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function id(t,e,n=!1){const r=w1e();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await OU(t,`${e}-code-verifier`,s);const i=await b1e(r);return[i,r===i?"plain":"s256"]}const _1e=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function E1e(t){const e=t.headers.get(Fx);if(!e||!e.match(_1e))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function C1e(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function x1e(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const S1e=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function od(t){if(!S1e.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var A1e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const fl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),I1e=[502,503,504];async function LO(t){var e;if(!p1e(t))throw new zx(fl(t),0);if(I1e.includes(t.status))throw new zx(fl(t),t.status);let n;try{n=await t.json()}catch(i){throw new NU(fl(i),i)}let r;const s=E1e(t);if(s&&s.getTime()>=TU["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new $O(fl(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Da}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new $O(fl(n),t.status,n.weak_password.reasons);throw new e1e(fl(n),t.status||500,r)}const T1e=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ze(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Fx]||(i[Fx]=TU["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await N1e(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function N1e(t,e,n,r,s,i){const o=T1e(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(c){throw console.error(c),new zx(fl(c),0)}if(a.ok||await LO(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(c){await LO(c)}}function ko(t){var e;let n=null;R1e(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=d1e(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function MO(t){const e=ko(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Qa(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function P1e(t){return{data:t,error:null}}function k1e(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=A1e(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function O1e(t){return t}function R1e(t){return t.access_token&&t.refresh_token&&t.expires_in}const P_=["global","local","others"];var $1e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class D1e{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=kU(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=P_[0]){if(P_.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${P_.join(", ")}`);try{return await Ze(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(He(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ze(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Qa})}catch(r){if(He(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=$1e(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ze(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:k1e,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(He(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ze(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Qa})}catch(n){if(He(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,c;try{const l={nextPage:null,lastPage:0,total:0},u=await Ze(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:O1e});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);l[`${y}Page`]=g}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(He(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){od(e);try{return await Ze(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Qa})}catch(n){if(He(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){od(e);try{return await Ze(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Qa})}catch(r){if(He(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){od(e);try{return await Ze(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Qa})}catch(r){if(He(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){od(e.userId);try{const{data:n,error:r}=await Ze(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(He(n))return{data:null,error:n};throw n}}async _deleteFactor(e){od(e.userId),od(e.id);try{return{data:await Ze(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(He(n))return{data:null,error:n};throw n}}}const j1e={getItem:t=>xp()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{xp()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{xp()&&globalThis.localStorage.removeItem(t)}};function BO(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function U1e(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ad={debug:!!(globalThis&&xp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class RU extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class L1e extends RU{}async function M1e(t,e,n){ad.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ad.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){ad.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{ad.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw ad.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new L1e(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ad.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}U1e();const B1e={url:Ybe,storageKey:Qbe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Jbe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function FO(t,e,n){return await n()}class zg{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=zg.nextInstanceID,zg.nextInstanceID+=1,this.instanceID>0&&ai()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},B1e),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new D1e({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=kU(s.fetch),this.lock=s.lock||FO,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ai()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=M1e:this.lock=FO,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:xp()?this.storage=j1e:(this.memoryStorage={},this.storage=BO(this.memoryStorage)):(this.memoryStorage={},this.storage=BO(this.memoryStorage)),ai()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${IU}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=f1e(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),ai()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),r1e(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return He(n)?{error:n}:{error:new NU("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await Ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:ko}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(He(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await id(this.storage,this.storageKey)),i=await Ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:p},xform:ko})}else if("phone"in e){const{phone:u,password:d,options:h}=e;i=await Ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ko})}else throw new zy("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(He(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:MO})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:MO})}else throw new zy("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Fy}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(He(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,o,a,c,l,u,d,h,f;let p,g;if("message"in e)p=e.message,g=e.signature;else{const{chain:y,wallet:w,statement:b,options:v}=e;let E;if(ai())if(typeof w=="object")E=w;else{const x=window;if("solana"in x&&typeof x.solana=="object"&&("signIn"in x.solana&&typeof x.solana.signIn=="function"||"signMessage"in x.solana&&typeof x.solana.signMessage=="function"))E=x.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=w}const _=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in E&&E.signIn){const x=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),b?{statement:b}:null));let S;if(Array.isArray(x)&&x[0]&&typeof x[0]=="object")S=x[0];else if(x&&typeof x=="object"&&"signedMessage"in x&&"signature"in x)S=x;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)p=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),g=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${_.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(r=v==null?void 0:v.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((d=(u=v==null?void 0:v.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...v.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const x=await E.signMessage(new TextEncoder().encode(p),"utf8");if(!x||!(x instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=x}}try{const{data:y,error:w}=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:u1e(g)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:ko});if(w)throw w;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new Fy}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:w})}catch(y){if(He(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(e){const n=await Wy(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ko});if(await Hy(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Fy}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(He(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ko}),{data:c,error:l}=a;return l?{data:{user:null,session:null},error:l}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Fy}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:l})}catch(n){if(He(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:c}=e;let l=null,u=null;this.flowType==="pkce"&&([l,u]=await id(this.storage,this.storageKey));const{error:d}=await Ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:c}=e,{data:l,error:u}=await Ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new zy("You must provide either an email or phone number.")}catch(a){if(He(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Ze(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:ko});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,l=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(s){if(He(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await id(this.storage,this.storageKey)),await Ze(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:P1e})}catch(i){if(He(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Da;const{error:s}=await Ze(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(He(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await Ze(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await Ze(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new zy("You must provide either an email or phone number and a type")}catch(n){if(He(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Wy(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<I_:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,l,u)=>(!o&&l==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,l,u))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Qa}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Da}:await Ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Qa})})}catch(n){if(He(n))return n1e(n)&&(await this._removeSession(),await Hy(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Da;const o=s.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await id(this.storage,this.storageKey));const{data:l,error:u}=await Ze(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:Qa});if(u)throw u;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(He(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Da;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=N_(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(He(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Da;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(He(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!ai())throw new qy("No browser detected.");if(e.error||e.error_description||e.error_code)throw new qy(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new RO("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qy("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new RO("No code detected.");const{data:b,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:c,token_type:l}=e;if(!i||!a||!o||!l)throw new qy("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;c&&(h=parseInt(c));const f=h-u;f*1e3<=fd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const p=h-d;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,u);const{data:g,error:y}=await this._getUser(i);if(y)throw y;const w={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:h,refresh_token:o,token_type:l,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(r){if(He(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Wy(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(t1e(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Hy(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=h1e(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await id(this.storage,this.storageKey,!0));try{return await Ze(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(He(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(He(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,c,l,u;const{data:d,error:h}=i;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ze(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return ai()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(He(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await Ze(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(He(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await m1e(async s=>(s>0&&await g1e(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ze(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ko})),(s,i)=>{const o=200*Math.pow(2,s);return i&&T_(i)&&Date.now()+o-r<fd})}catch(r){if(this._debug(n,"error",r),He(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),ai()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Wy(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<I_;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${I_}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),T_(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Da;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ib;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Da;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),He(i)){const o={session:null,error:i};return T_(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await OU(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Hy(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ai()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),fd);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/fd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${fd}ms, refresh threshold is ${Bx} ticks`),s<=Bx&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof RU)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ai()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await id(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Ze(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(He(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:l}=await Ze(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(He(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await Ze(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(He(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Ze(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(He(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=N_(s.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+Xbe>Date.now()))return r;const{data:s,error:i}=await Ze(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new Cp("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new Cp("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};r=f.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:c}}=N_(r);if(C1e(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:s,signature:o},error:null}}const l=x1e(s.alg),u=await this.fetchJwk(s.kid,n),d=await crypto.subtle.importKey("jwk",u,l,!0,["verify"]);if(!await crypto.subtle.verify(l,d,o,l1e(`${a}.${c}`)))throw new Cp("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(He(r))return{data:null,error:r};throw r}}}zg.nextInstanceID=0;const F1e=zg;class z1e extends F1e{constructor(e){super(e)}}var q1e=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class W1e{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=Gbe(e),c=new URL(a);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const l=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:Mbe,realtime:Fbe,auth:Object.assign(Object.assign({},Bbe),{storageKey:l}),global:Lbe},d=Kbe(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=Hbe(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new abe(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new Uve(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Dbe(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return q1e(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:c},l,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new z1e({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Ebe(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const $U=(t,e,n)=>new W1e(t,e,n),H1e="https://roxwocgknkiqnsgiojgz.supabase.co",V1e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJveHdvY2drbmtpcW5zZ2lvamd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzA3NjMxMTIsImV4cCI6MjA0NjMzOTExMn0.NbLMZom-gk7XYGdV4MtXYcgR8R1s8xthrIQ0hpQfx9Y",al=$U(H1e,V1e),Fi={AI:"ai",ONLINE:"online"},Vy={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},zO=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],G1e=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],K1e=({onClose:t,onMinimize:e})=>{const{address:n}=hv(),[r,s]=M.useState(Fi.AI),[i,o]=M.useState(()=>JSON.parse(JSON.stringify(zO))),[a,c]=M.useState("blue"),[l,u]=M.useState(null),[d,h]=M.useState("active"),[f,p]=M.useState("easy"),[g,y]=M.useState("Connect wallet to play"),[w,b]=M.useState([]),[v,E]=M.useState([]),[_,x]=M.useState([]),[S,N]=M.useState(null),[C,O]=M.useState(!1),[R,B]=M.useState(!1),[H,F]=M.useState(!1),[A,I]=M.useState(!1),[U,T]=M.useState(null),[k,L]=M.useState(""),[W,K]=M.useState(.1),[Z,Q]=M.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),te=M.useRef(null),oe=M.useRef(!1),me=M.useRef(i);M.useEffect(()=>{me.current=i},[i]),M.useEffect(()=>{n?y("Select game mode"):(y("Connect wallet to play"),F(!1),O(!1),B(!1))},[n]),M.useEffect(()=>(console.log("AI worker disabled for testing"),y("AI worker disabled for testing"),()=>{te.current&&te.current.terminate()}),[]),M.useEffect(()=>{je()},[]);const je=async()=>{try{const G=new Promise((V,Y)=>window.setTimeout(()=>Y(new Error("Database timeout")),1e4)),$=al.from("leaderboard").select("*").order("points",{ascending:!1}),{data:j,error:q}=await Promise.race([$,G]);if(q){y("Failed to load leaderboard"),console.error("Leaderboard error:",q);return}j&&E(j)}catch(G){y("Failed to load leaderboard"),console.error("Leaderboard error:",G)}},Oe=async G=>{if(n)try{const $=n.toLowerCase(),{data:j}=await al.from("leaderboard").select("*").eq("username",$).maybeSingle(),q=((j==null?void 0:j.wins)||0)+(G==="win"?1:0),V=((j==null?void 0:j.losses)||0)+(G==="loss"?1:0),Y=((j==null?void 0:j.draws)||0)+(G==="draw"?1:0),ee=q+V+Y,ce=G==="win"?f==="hard"?5:3:G==="draw"?1:0,Se=((j==null?void 0:j.points)||0)+ce;j?await al.from("leaderboard").update({wins:q,losses:V,draws:Y,total_games:ee,points:Se,updated_at:new Date().toISOString()}).eq("username",$):await al.from("leaderboard").insert({username:$,chain_type:"evm",wins:q,losses:V,draws:Y,total_games:ee,points:Se,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),je()}catch($){console.error("Error updating score:",$)}},Le=G=>G&&G===G.toUpperCase()?"red":"blue",Je=(G,$)=>G>=0&&G<8&&$>=0&&$<8,zt=(G,$)=>`${String.fromCharCode(97+$)}${8-G}`,Fe=(G,$)=>{const j=$==="blue"?"k":"K";let q=null;for(let ee=0;ee<8;ee++){for(let ce=0;ce<8;ce++)if(G[ee][ce]===j){q={row:ee,col:ce};break}if(q)break}if(!q)return console.log(`King not found for ${$}`),!1;const V=$==="blue"?"red":"blue",Y=ze(q.row,q.col,V,G);return console.log(`${$} king at ${q.row},${q.col} under attack: ${Y}`),Y},ze=(G,$,j,q)=>{for(let V=0;V<8;V++)for(let Y=0;Y<8;Y++){const ee=q[V][Y];if(ee&&Le(ee)===j&&Xs(ee,V,Y,G,$,!1,j,q))return!0}return!1},qt=(G,$,j,q,V,Y=i)=>{const ee=Y.map(Se=>[...Se]),ce=ee[G][$];return ee[j][q]=ce,ee[G][$]=null,Fe(ee,V)},Tt=(G,$,j,q,V,Y)=>{const ee=G==="blue"?-1:1,ce=G==="blue"?6:1;if(j===V&&q===$+ee)return Y[q][V]===null;if(j===V&&$===ce&&q===$+2*ee)return Y[$+ee][j]===null&&Y[q][V]===null;if(Math.abs(j-V)===1&&q===$+ee){const Se=Y[q][V];return Se!==null&&Le(Se)!==G}if(Math.abs(j-V)===1&&q===$+ee){const Se=Y[$][V];if(Se&&Le(Se)!==G&&Se.toLowerCase()==="p"&&Z.lastPawnDoubleMove&&Z.lastPawnDoubleMove.row===$&&Z.lastPawnDoubleMove.col===V)return!0}return!1},xn=(G,$,j,q,V)=>G!==j&&$!==q?!1:Oi(G,$,j,q,V),ss=(G,$,j,q)=>{const V=Math.abs(G-j),Y=Math.abs($-q);return V===2&&Y===1||V===1&&Y===2},jt=(G,$,j,q,V)=>Math.abs(G-j)!==Math.abs($-q)?!1:Oi(G,$,j,q,V),Vt=(G,$,j,q,V)=>xn(G,$,j,q,V)||jt(G,$,j,q,V),jn=(G,$,j,q,V)=>{const Y=Math.abs($-q),ee=Math.abs(j-V);if(Y<=1&&ee<=1)return!0;if(Y===0&&ee===2){if(G==="blue"&&!Z.blueKingMoved){if(V===6&&!Z.blueRooksMove.right||V===2&&!Z.blueRooksMove.left)return!0}else if(G==="red"&&!Z.redKingMoved&&(V===6&&!Z.redRooksMove.right||V===2&&!Z.redRooksMove.left))return!0}return!1},Oi=(G,$,j,q,V)=>{const Y=G===j?0:(j-G)/Math.abs(j-G),ee=$===q?0:(q-$)/Math.abs(q-$);let ce=G+Y,Se=$+ee;for(;ce!==j||Se!==q;){if(V[ce][Se]!==null)return!1;ce+=Y,Se+=ee}return!0},Xs=(G,$,j,q,V,Y=!0,ee=Le(G),ce=i)=>{if(!Je(q,V))return!1;const Se=ce[q][V];if(Se&&Le(Se)===ee)return!1;const yt=G.toLowerCase();let pn=!1;switch(yt){case"p":pn=Tt(ee,$,j,q,V,ce);break;case"r":pn=xn($,j,q,V,ce);break;case"n":pn=ss($,j,q,V);break;case"b":pn=jt($,j,q,V,ce);break;case"q":pn=Vt($,j,q,V,ce);break;case"k":pn=jn(ee,$,j,q,V);break}return pn&&Y?!qt($,j,q,V,ee,ce):pn},is=(G,$=i,j=a)=>{const q=[],V=$[G.row][G.col];if(!V||Le(V)!==j)return q;for(let Y=0;Y<8;Y++)for(let ee=0;ee<8;ee++)Xs(V,G.row,G.col,Y,ee,!0,j,$)&&q.push({row:Y,col:ee});return q},Xt=(G,$=i)=>{if(!Fe($,G))return!1;for(let j=0;j<8;j++)for(let q=0;q<8;q++){const V=$[j][q];if(V&&Le(V)===G&&is({row:j,col:q},$,G).length>0)return!1}return!0},Xn=(G,$=i)=>{if(Fe($,G))return!1;for(let j=0;j<8;j++)for(let q=0;q<8;q++){const V=$[j][q];if(V&&Le(V)===G&&is({row:j,col:q},$,G).length>0)return!1}return!0},mo=(G,$)=>{if(d!=="active"||oe.current)return;const j=i[G][$],q=j?Le(j):null;if(l&&_.some(V=>V.row===G&&V.col===$)){Qc(l,{row:G,col:$});return}if(j&&q===a){const V=is({row:G,col:$});u({row:G,col:$}),x(V);return}u(null),x([])},Qc=(G,$,j=!1)=>{const q=i[G.row][G.col];if(!q)return;const V=Le(q);if(q.toLowerCase()==="p"&&(V==="blue"&&$.row===0||V==="red"&&$.row===7)){T({from:G,to:$}),I(!0);return}Ri(G,$,"q",j)},Ri=(G,$,j="q",q=!1)=>{const V=i[G.row][G.col];i[$.row][$.col];const Y=Le(V),ee=V?V.toLowerCase():"",ce=i.map(Is=>[...Is]);ce[$.row][$.col]=ee==="p"&&(Y==="blue"&&$.row===0||Y==="red"&&$.row===7)?Y==="blue"?j:j.toUpperCase():V,ce[G.row][G.col]=null;const Se={...Z};ee==="k"?Y==="blue"?Se.blueKingMoved=!0:Se.redKingMoved=!0:ee==="r"&&(Y==="blue"?(G.col===0&&(Se.blueRooksMove.left=!0),G.col===7&&(Se.blueRooksMove.right=!0)):(G.col===0&&(Se.redRooksMove.left=!0),G.col===7&&(Se.redRooksMove.right=!0))),ee==="p"&&Math.abs(G.row-$.row)===2?Se.lastPawnDoubleMove={row:$.row,col:$.col}:Se.lastPawnDoubleMove=null,ee==="k"&&Math.abs(G.col-$.col)===2&&($.col===6?(ce[G.row][7]=null,ce[G.row][5]=Y==="blue"?"r":"R"):$.col===2&&(ce[G.row][0]=null,ce[G.row][3]=Y==="blue"?"r":"R")),o(ce),Q(Se),u(null),x([]),N({from:G,to:$});const yt=`${zt(G.row,G.col)}-${zt($.row,$.col)}`;b(Is=>[...Is,yt]);const pn=$m(a),gn=Jc(ce,pn);if(gn){h(gn),r===Fi.AI&&Oe(gn==="checkmate"?pn==="blue"?"win":"loss":"draw");return}c(pn),!q&&r===Fi.AI&&pn==="red"&&d==="active"?(y("AI is thinking..."),oe.current=!0,setTimeout(()=>{const Is=Sm(ce);Is?((la,gr,$i="q")=>{const Zc=ce[la.row][la.col];if(!Zc)return;const ua=Le(Zc),Vh=Zc.toLowerCase(),Pu=ce.map(ha=>[...ha]);Pu[gr.row][gr.col]=Vh==="p"&&(ua==="blue"&&gr.row===0||ua==="red"&&gr.row===7)?ua==="blue"?$i:$i.toUpperCase():Zc,Pu[la.row][la.col]=null,o(Pu),u(null),x([]),N({from:la,to:gr});const ku=`${zt(la.row,la.col)}-${zt(gr.row,gr.col)}`;b(ha=>[...ha,ku]);const Ou=$m(pn),da=Jc(Pu,Ou);if(da){h(da),r===Fi.AI&&Oe(da==="checkmate"?Ou==="blue"?"win":"loss":"draw");return}c(Ou),y(`Your turn (${Ou})`)})(Is.from,Is.to,"q"):y("AI could not find a move"),oe.current=!1},1e3)):y(`Your turn (${pn})`)},Jc=(G,$)=>(console.log("Checking game end for player:",$),console.log("Is king in check:",Fe(G,$)),Xt($,G)?(console.log("CHECKMATE detected!"),y(`Checkmate! ${$==="blue"?"Red":"Blue"} wins!`),"checkmate"):Xn($,G)?(console.log("STALEMATE detected!"),y("Stalemate! Game is a draw."),"stalemate"):(Fe(G,$)?(console.log("CHECK detected!"),y(`${$==="blue"?"Blue":"Red"} is in check!`)):y(`Your turn (${$})`),null)),Sm=G=>{const $=[];for(let j=0;j<8;j++)for(let q=0;q<8;q++){const V=G[j][q];V&&Le(V)==="red"&&$.push({row:j,col:q})}for(let j=$.length-1;j>0;j--){const q=Math.floor(Math.random()*(j+1));[$[j],$[q]]=[$[q],$[j]]}for(const j of $){const q=is(j,G,"red");if(q.length>0){const V=q[Math.floor(Math.random()*q.length)],Y=G.map(ce=>[...ce]),ee=Y[j.row][j.col];if(Y[V.row][V.col]=ee,Y[j.row][j.col]=null,!Fe(Y,"red"))return{from:j,to:V}}}return null},Am=()=>{o(JSON.parse(JSON.stringify(zO))),c("blue"),u(null),h("active"),b([]),x([]),N(null),F(!1),O(!1),B(!1),y("Select game mode"),Q({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),oe.current&&(oe.current=!1)},Im=()=>{console.log("startAIGame called"),O(!0),B(!1),y("Select difficulty")},ob=()=>{console.log("startMultiplayerGame called"),B(!0),O(!1),y("Set wager and create/join game")},Tm=()=>{console.log("startGame called, difficulty:",f,"gameMode:",r),F(!0),O(!1),B(!1),y(`Your turn (${a})`)},Nm=async()=>{if(n)try{const G=Math.random().toString(36).substring(2,8).toUpperCase(),{error:$}=await al.from("chess_games").insert({game_id:G,blue_player:n,board:JSON.stringify({positions:i,piece_state:Z}),current_player:"blue",game_state:"waiting",bet_amount:W,chain:"evm",is_public:!0});if($)throw $;y(`Game created! Share code: ${G}`)}catch(G){console.error("Error creating game:",G),y("Failed to create game")}},ab=async()=>{if(!(!n||!k))try{const{data:G,error:$}=await al.from("chess_games").select("*").eq("game_id",k).eq("game_state","waiting").single();if($||!G){y("Game not found or already full");return}const{error:j}=await al.from("chess_games").update({red_player:n,game_state:"active",updated_at:new Date().toISOString()}).eq("game_id",k);if(j)throw j;y("Joined game! Waiting for opponent..."),Tm()}catch(G){console.error("Error joining game:",G),y("Failed to join game")}},Pm=G=>`${G.slice(0,6)}...${G.slice(-4)}`,km=(G,$)=>{const j=i[G][$],q=(l==null?void 0:l.row)===G&&(l==null?void 0:l.col)===$,V=_.some(ee=>ee.row===G&&ee.col===$),Y=S&&(S.from.row===G&&S.from.col===$||S.to.row===G&&S.to.col===$);return m.jsxs("div",{className:`square ${q?"selected":""} ${V?"legal-move":""} ${Y?"last-move":""}`,onClick:()=>mo(G,$),children:[j&&m.jsx("div",{className:"piece",style:{backgroundImage:Vy[j]?`url(${Vy[j]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),V&&m.jsx("div",{className:"legal-move-indicator"})]},`${G}-${$}`)},cb=()=>{if(!A||!U)return null;const G=a==="blue"?["q","r","b","n"]:["Q","R","B","N"];return m.jsx("div",{className:"promotion-dialog",children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",children:G.map($=>m.jsx("div",{className:"promotion-piece",onClick:()=>{Ri(U.from,U.to,$),I(!1),T(null)},style:{backgroundImage:Vy[$]?`url(${Vy[$]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},$))})]})})},[lb,ub]=M.useState(null),Om=(G=!1,$="Click a piece to learn more about it.")=>m.jsxs("div",{className:`piece-gallery${G?" piece-gallery-sm":""}`,children:[m.jsx("h3",{children:"Lawbstation Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:G1e.map(j=>m.jsxs("div",{className:"piece-gallery-item",onClick:()=>ub(j.key),children:[m.jsx("img",{src:j.img,alt:j.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:j.name}),lb===j.key&&m.jsx("div",{className:"piece-gallery-desc",children:j.desc})]},j.key))}),m.jsx("div",{className:"piece-gallery-tip",children:$})]}),Rm=()=>m.jsxs("div",{className:"difficulty-selection-row",children:[m.jsx("div",{className:"difficulty-gallery-col",children:Om(!0,"click for chess piece movements")}),m.jsxs("div",{className:"difficulty-controls-col",children:[m.jsxs("div",{className:"difficulty-selection-panel",children:[m.jsx("h3",{children:"Select Difficulty"}),m.jsx("button",{className:`difficulty-btn ${f==="easy"?"selected":""}`,onClick:()=>p("easy"),children:"Easy"}),m.jsx("button",{className:`difficulty-btn ${f==="hard"?"selected":""}`,onClick:()=>p("hard"),children:"Kinda Harder"}),m.jsx("button",{className:"start-btn",onClick:Tm,children:"Start Game"})]}),m.jsx("div",{className:"difficulty-leaderboard-panel",children:m.jsxs("div",{className:"leaderboard",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Points"})]})}),m.jsx("tbody",{children:v.slice(0,10).map((G,$)=>{const j=G;return m.jsxs("tr",{children:[m.jsx("td",{children:$+1}),m.jsx("td",{children:Pm(j.username)}),m.jsx("td",{children:j.wins}),m.jsx("td",{children:j.losses}),m.jsx("td",{children:j.draws}),m.jsx("td",{children:j.points})]},j.username)})})]})})]})})]})]}),$m=G=>G==="blue"?"red":"blue";return n?m.jsxs("div",{className:"chess-game",children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"Lawb Chess"}),m.jsxs("div",{className:"chess-controls",children:[e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:"×"})]})]}),m.jsxs("div",{className:"chess-content",children:[!H&&!C&&!R&&m.jsx("div",{className:"gallery-main-area",children:Om(!1)}),!H&&!C&&!R&&m.jsxs("div",{className:"game-mode-selection",children:[m.jsx("h3",{children:"Select Game Mode"}),m.jsx("button",{className:`mode-btn ${r===Fi.AI?"selected":""}`,onClick:()=>s(Fi.AI),children:"VS the House"}),m.jsx("button",{className:`mode-btn ${r===Fi.ONLINE?"selected":""}`,onClick:()=>s(Fi.ONLINE),disabled:!0,children:"PvP Under Construction"}),m.jsx("button",{className:"start-btn",onClick:()=>{r===Fi.AI?Im():ob()},children:"Continue"})]}),C&&Rm(),R&&m.jsxs("div",{className:"multiplayer-selection",children:[m.jsx("h3",{children:"Multiplayer"}),m.jsxs("div",{className:"wager-input",children:[m.jsx("label",{children:"Wager (ETH):"}),m.jsx("input",{type:"number",value:W,onChange:G=>K(parseFloat(G.target.value)||.1),min:"0.01",step:"0.01"})]}),m.jsx("button",{onClick:Nm,children:"Create Game"}),m.jsxs("div",{className:"join-game",children:[m.jsx("input",{type:"text",value:k,onChange:G=>L(G.target.value),placeholder:"Enter invite code"}),m.jsx("button",{onClick:ab,children:"Join Game"})]}),g&&g.includes("Game created!")&&m.jsx("div",{className:"game-created",children:m.jsx("p",{children:g})})]}),H&&m.jsxs("div",{className:"game-container",children:[m.jsx("div",{className:"left-sidebar",children:m.jsxs("div",{className:"move-history",children:[m.jsx("h4",{children:"Move History"}),m.jsx("div",{className:"moves",children:w.slice().reverse().map((G,$)=>m.jsxs("span",{className:"move",children:[Math.floor((w.length-1-$)/2)+1,".",(w.length-1-$)%2===0?"":" ",G]},w.length-1-$))})]})}),m.jsxs("div",{className:"game-main",children:[m.jsxs("div",{className:"game-info",children:[m.jsx("div",{className:"status",children:g}),m.jsxs("div",{className:"current-player",children:["Current: ",a==="blue"?"Blue":"Red"]}),m.jsxs("div",{className:"wager-display",children:["Wager: ",r===Fi.AI?"NA":`${W} ETH`]})]}),m.jsx("div",{className:"chessboard-container",children:m.jsx("div",{className:"chessboard",children:Array.from({length:8},(G,$)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(j,q)=>km($,q))},$))})}),m.jsxs("div",{className:"game-controls",children:[m.jsx("button",{onClick:Am,children:"New Game"}),m.jsx("button",{onClick:Am,children:"Back to Menu"})]})]}),!H&&!C&&!R&&m.jsx("div",{className:"right-sidebar",children:m.jsxs("div",{className:"leaderboard",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Points"})]})}),m.jsx("tbody",{children:v.slice(0,10).map((G,$)=>{const j=G;return m.jsxs("tr",{children:[m.jsx("td",{children:$+1}),m.jsx("td",{children:Pm(j.username)}),m.jsx("td",{children:j.wins}),m.jsx("td",{children:j.losses}),m.jsx("td",{children:j.draws}),m.jsx("td",{children:j.points})]},j.username)})})]})})]})})]})]}),cb()]}):m.jsxs("div",{className:"chess-game",children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"Lawb Chess"}),m.jsxs("div",{className:"chess-controls",children:[e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:"×"})]})]}),m.jsx("div",{className:"chess-content",children:m.jsx("div",{className:"wallet-required",children:m.jsx("p",{children:"Connect your wallet to play chess"})})})]})},Y1e=Pi({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function Q1e(){const t=Y1e(),{open:e}=Zv(),{address:n,isConnected:r}=hv(),{isPending:s}=_5(),{disconnect:i}=E5(),{data:o}=C5({address:n}),[a,c]=M.useState("pixelawbs-popup"),[l,u]=M.useState(new Set),[d,h]=M.useState(!1),[f,p]=M.useState(!1),[g,y]=M.useState(!1),[w,b]=M.useState(!1),v=M.useRef(null);M.useEffect(()=>{if(a==="halloween-popup"&&v.current){const U=v.current.querySelector("script[data-tiktok-embed]");U&&U.remove();const T=document.createElement("script");T.src="https://www.tiktok.com/embed.js",T.async=!0,T.setAttribute("data-tiktok-embed","true"),v.current.appendChild(T)}},[a]);const E=(U,T,k)=>{if(U==="url"&&k)window.open(k,"_blank");else if(U==="popup"&&T)c(T),u(L=>{const W=new Set(L);return W.delete(T),W}),document.body.offsetWidth;else if(U==="wallet")r?i():e();else if(U==="mint"){if(!n){alert("Please connect your wallet first!");return}h(!0)}else U==="nft-gallery"?p(!0):U==="meme-generator"?y(!0):U==="chess"&&b(!0)},_=()=>c(null),x=U=>{u(T=>new Set(T).add(U)),c(null)},S=U=>{U==="mint-popup"?h(!0):U==="nft-gallery-popup"?p(!0):U==="meme-generator-popup"?y(!0):U==="chess-game-popup"?b(!0):c(U),u(T=>{const k=new Set(T);return k.delete(U),k})},N=()=>h(!1),C=()=>p(!1),O=()=>y(!1),R=()=>b(!1),B=()=>{h(!1),u(U=>new Set(U).add("mint-popup"))},H=()=>{p(!1),u(U=>new Set(U).add("nft-gallery-popup"))},F=()=>{y(!1),u(U=>new Set(U).add("meme-generator-popup"))},A=()=>{b(!1),u(U=>new Set(U).add("chess-game-popup"))},I=m.jsxs("div",{onClick:()=>{r?i():e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:r?"limegreen":"red",fontWeight:"bold"},children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),s?"Connecting...":r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return m.jsxs("div",{className:t.body,children:[m.jsx(kJ,{onIconClick:E}),m.jsx(RJ,{minimizedWindows:Array.from(l),onRestoreWindow:S,walletButton:I,connectionStatus:{connected:r,address:n,ens:o||void 0}}),m.jsxs($s,{id:"chat-popup",isOpen:a==="chat-popup",onClose:_,onMinimize:x,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",m.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),m.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs($s,{id:"purity-popup",isOpen:a==="purity-popup",onClose:_,onMinimize:x,children:[m.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),m.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),m.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),m.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs($s,{id:"lawbstarz-popup",isOpen:a==="lawbstarz-popup",onClose:_,onMinimize:x,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs($s,{id:"lawbstation-popup",isOpen:a==="lawbstation-popup",onClose:_,onMinimize:x,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs($s,{id:"nexus-popup",isOpen:a==="nexus-popup",onClose:_,onMinimize:x,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsxs($s,{id:"lawbsters-popup",isOpen:a==="lawbsters-popup",onClose:_,onMinimize:x,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx(JG,{id:"1620879129850834944"})}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsx($s,{id:"pixelawbs-popup",isOpen:a==="pixelawbs-popup",onClose:_,onMinimize:x,children:(()=>{const U=T=>{T.preventDefault(),c(null),h(!0)};return m.jsxs(m.Fragment,{children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:U,children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),m.jsxs($s,{id:"halloween-popup",isOpen:a==="halloween-popup",onClose:_,onMinimize:x,children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),m.jsx("div",{ref:v,style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:m.jsxs("section",{children:[m.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore 🦞🎃 minting rn on @ourzora via @PC69 ",m.jsx("a",{target:"_blank",rel:"noreferrer",title:"♬ original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:"♬ original sound - wables.eth"})]})})})]}),m.jsxs($s,{id:"lawb-popup",isOpen:a==="lawb-popup",onClose:_,onMinimize:x,children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"🦞 $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{src:"https://dexscreener.com/solana/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&theme=dark&info=0",title:"DexScreener",style:{width:"100%",height:"100%",border:"none"}})})]}),m.jsx(jJ,{isOpen:d,onClose:N,onMinimize:B,walletAddress:n||""}),m.jsx(Nve,{isOpen:f,onClose:C,onMinimize:H,walletAddress:n}),m.jsx($s,{id:"meme-generator-popup",isOpen:g,onClose:O,onMinimize:F,children:m.jsx(lU,{})}),w&&m.jsx(K1e,{onClose:R,onMinimize:A})]})}const J1e=Pi({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),qO=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],Z1e=({onBack:t,walletAddress:e})=>{const n=J1e(),{open:r}=Zv(),[s,i]=M.useState([]),[o,a]=M.useState(!0),[c,l]=M.useState(null),[u,d]=M.useState(qO[0]),[h,f]=M.useState(!1),[p,g]=M.useState(null),[y,w]=M.useState("all"),[b,v]=M.useState(null),E=M.useCallback(async()=>{var N,C;try{if((N=window.solana)!=null&&N.isPhantom){const O=await window.solana.connect();g(O.publicKey.toString());return}if((C=window.solflare)!=null&&C.isSolflare){const O=await window.solflare.connect();g(O.publicKey.toString());return}r()}catch(O){console.error("Failed to connect Solana wallet:",O),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);M.useEffect(()=>{var N,C;(N=window.solana)!=null&&N.publicKey?g(window.solana.publicKey.toString()):(C=window.solflare)!=null&&C.publicKey&&g(window.solflare.publicKey.toString())},[]),M.useEffect(()=>{(async()=>{a(!0);try{let C,O=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}O=p,C=await $J(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",C.data.length)}else u.api==="opensea"?C=await PA(u.slug,100,O):C=await NA(u.slug,1,100,O);y==="owned"&&p&&(console.log("Filtering for owner:",p),C.data.some(B=>B.owners&&B.owners.length>0)?C.data=C.data.filter(B=>B.owners.some(F=>F.owner_of&&F.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),v("Owner data not available for this Solana collection. Showing all NFTs."))),i(C.data)}catch(C){console.error(C)}finally{a(!1)}})()},[e,u,p,y]),M.useEffect(()=>{h&&E()},[h,E]);const _=async N=>{if(a(!0),u.api==="opensea"&&u.chain)try{const C=await N8(u.chain,N.address,N.token_id.toString()),O={...N,attributes:JSON.stringify(C.traits||[])};l(O)}catch(C){console.error("Failed to fetch full NFT details",C),l(N)}else l(N);a(!1)},x=()=>{if(!c)return null;let N=[];try{N=JSON.parse(c.attributes||"[]")}catch(C){console.error("Failed to parse NFT attributes:",C)}return m.jsxs("div",{className:n.detailView,children:[m.jsx("img",{src:c.image,alt:c.name}),m.jsx("h2",{children:c.name}),m.jsx("h4",{children:"Traits:"}),m.jsx("ul",{children:N.map((C,O)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[C.trait_type,":"]})," ",C.value]},O))})]})},S=()=>m.jsxs(m.Fragment,{children:[m.jsx("div",{className:n.collectionSelector,children:qO.map(N=>m.jsx("button",{className:`${n.collectionButton} ${u.slug===N.slug?"active":""}`,onClick:()=>d(N),children:N.name},N.slug))}),m.jsxs("div",{className:n.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>w("all"),style:{background:y==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:y==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>w("owned"),disabled:!e&&!p,style:{background:y==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:y==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{E()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),b&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:b}),u.api==="opensea-solana"&&!p&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?m.jsx("div",{className:n.loading,children:"Loading NFTs..."}):m.jsx("div",{className:n.grid,children:s.map(N=>{let C=N.image||N.image_url||N.image_url_shrunk||"/assets/pixelawb.png";return m.jsxs("div",{className:n.gridItem,onClick:()=>void _(N),children:[m.jsx("img",{src:C,alt:N.name,onError:O=>{O.currentTarget.src!==N.image_url&&N.image_url?O.currentTarget.src=N.image_url:O.currentTarget.src!==N.image_url_shrunk&&N.image_url_shrunk?O.currentTarget.src=N.image_url_shrunk:O.currentTarget.src="/assets/pixelawb.png"}}),m.jsx("span",{children:N.name})]},N.id)})})]})]});return m.jsxs("div",{className:n.galleryContainer,children:[m.jsxs("header",{className:n.header,children:[m.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),m.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),m.jsx("div",{className:n.content,children:o?m.jsx("p",{className:n.loading,children:"Loading..."}):c?x():S()})]})},X1e=Pi({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),Rs=({isOpen:t,onClose:e,title:n,children:r})=>{const s=X1e();return t?m.jsx("div",{className:s.overlay,children:m.jsxs("div",{className:s.popup,children:[m.jsxs("div",{className:s.titleBar,children:[m.jsx("span",{children:n}),m.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:"✕"})]}),m.jsx("div",{className:s.content,children:r})]})}):null},e_e=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=M.useState([]),[i,o]=M.useState(!1),[a,c]=M.useState(!1),[l,u]=M.useState({}),[d,h]=M.useState(null),{data:f}=x5();M.useEffect(()=>{t&&n&&p()},[t,n]);const p=async()=>{o(!0),h(null);try{const E=await I8(n);s(E);const _={};E.forEach(x=>{_[x.id]=0}),u(_)}catch(E){h(E.message)}finally{o(!1)}},g=(E,_)=>{u(x=>({...x,[E]:Math.max(0,_)}))},y=async()=>{const E=Object.entries(l).filter(([,_])=>_>0).map(([_,x])=>({id:_,quantity:x}));if(E.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}c(!0),h(null);try{const _=await T8(n,E);if(_.success&&_.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const x=await f.sendTransaction({to:_.mintTransaction.to,value:BigInt(_.mintTransaction.value),data:_.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${x}`),e()}catch(x){h("Transaction failed: "+x.message)}}else throw new Error(_.message||"Could not retrieve minting transaction.")}catch(_){h("Minting failed: "+_.message)}finally{c(!1)}},w=(E,_)=>`${parseFloat(E)} ${_}`,b={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},v={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return m.jsxs(Rs,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&m.jsx("div",{style:v,children:d}),i?m.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(E=>m.jsxs("div",{style:b,children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:E.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",w(E.token_price,E.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",E.wallet_limit===4294967295?"Unlimited":E.wallet_limit," per wallet"]}),m.jsx("input",{type:"number",min:0,max:E.wallet_limit===4294967295?void 0:E.wallet_limit,value:l[E.id]||"",onChange:_=>g(E.id,parseInt(_.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),m.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},E.id))]}),m.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:y,disabled:a,children:a?"Minting...":"Mint"})]})]})},t_e="https://roxwocgknkiqnsgiojgz.supabase.co",n_e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJveHdvY2drbmtpcW5zZ2lvamd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzA3NjMxMTIsImV4cCI6MjA0NjMzOTExMn0.NbLMZom-gk7XYGdV4MtXYcgR8R1s8xthrIQ0hpQfx9Y",cl=$U(t_e,n_e),zi={AI:"ai",ONLINE:"online"},k_={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},WO=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],r_e=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],s_e=({onClose:t,walletAddress:e})=>{const[n,r]=M.useState(zi.AI),[s,i]=M.useState(()=>JSON.parse(JSON.stringify(WO))),[o,a]=M.useState("blue"),[c,l]=M.useState(null),[u,d]=M.useState("active"),[h,f]=M.useState("easy"),[p,g]=M.useState("Connect wallet to play"),[y,w]=M.useState([]),[b,v]=M.useState([]),[E,_]=M.useState([]),[x,S]=M.useState(null),[N,C]=M.useState(Tf()),[O,R]=M.useState(!1),[B,H]=M.useState(!1),[F,A]=M.useState(!1),[I,U]=M.useState(!1),[T,k]=M.useState(null),[L,W]=M.useState(""),[K,Z]=M.useState(.1),[Q,te]=M.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),oe=M.useRef(null),me=M.useRef(!1),je=M.useRef(s);M.useEffect(()=>{je.current=s},[s]),M.useEffect(()=>{e?g("Select game mode"):(g("Connect wallet to play"),A(!1),R(!1),H(!1))},[e]),M.useEffect(()=>(console.log("AI worker disabled for testing"),g("AI worker disabled for testing"),()=>{oe.current&&oe.current.terminate()}),[]),M.useEffect(()=>{Oe()},[]);const Oe=async()=>{try{const $=new Promise((Y,ee)=>window.setTimeout(()=>ee(new Error("Database timeout")),1e4)),j=cl.from("leaderboard").select("*").order("points",{ascending:!1}),{data:q,error:V}=await Promise.race([j,$]);if(V){g("Failed to load leaderboard"),console.error("Leaderboard error:",V);return}q&&v(q)}catch($){g("Failed to load leaderboard"),console.error("Leaderboard error:",$)}},Le=async $=>{if(e)try{const{data:j}=await cl.from("chess_leaderboard").select("*").eq("username",e.toLowerCase()).eq("chain_type","evm").single();if(j){const q=j,V=q.wins+($==="win"?1:0),Y=q.losses+($==="loss"?1:0),ee=q.draws+($==="draw"?1:0),ce=V+Y+ee,Se=V*3+ee;await cl.from("chess_leaderboard").update({wins:V,losses:Y,draws:ee,total_games:ce,points:Se,updated_at:new Date().toISOString()}).eq("username",e.toLowerCase()).eq("chain_type","evm")}else await cl.from("chess_leaderboard").insert({username:e.toLowerCase(),chain_type:"evm",wins:$==="win"?1:0,losses:$==="loss"?1:0,draws:$==="draw"?1:0,total_games:1,points:$==="win"?3:$==="draw"?1:0,updated_at:new Date().toISOString()});Oe()}catch(j){console.error("Error updating score:",j)}},Je=$=>$&&$===$.toUpperCase()?"red":"blue",zt=($,j)=>$>=0&&$<8&&j>=0&&j<8,Fe=($,j)=>`${String.fromCharCode(97+j)}${8-$}`,ze=($,j)=>{const q=j==="blue"?"k":"K";let V=null;for(let ce=0;ce<8;ce++){for(let Se=0;Se<8;Se++)if($[ce][Se]===q){V={row:ce,col:Se};break}if(V)break}if(!V)return console.log(`King not found for ${j}`),!1;const Y=j==="blue"?"red":"blue",ee=qt(V.row,V.col,Y,$);return console.log(`${j} king at ${V.row},${V.col} under attack: ${ee}`),ee},qt=($,j,q,V)=>{for(let Y=0;Y<8;Y++)for(let ee=0;ee<8;ee++){const ce=V[Y][ee];if(ce&&Je(ce)===q&&is(ce,Y,ee,$,j,!1,q,V))return!0}return!1},Tt=($,j,q,V,Y,ee=s)=>{const ce=ee.map(yt=>[...yt]),Se=ce[$][j];return ce[q][V]=Se,ce[$][j]=null,ze(ce,Y)},xn=($,j,q,V,Y,ee)=>{const ce=$==="blue"?-1:1,Se=$==="blue"?6:1;if(q===Y&&V===j+ce)return ee[V][Y]===null;if(q===Y&&j===Se&&V===j+2*ce)return ee[j+ce][q]===null&&ee[V][Y]===null;if(Math.abs(q-Y)===1&&V===j+ce){const yt=ee[V][Y];return yt!==null&&Je(yt)!==$}if(Math.abs(q-Y)===1&&V===j+ce){const yt=ee[j][Y];if(yt&&Je(yt)!==$&&yt.toLowerCase()==="p"&&Q.lastPawnDoubleMove&&Q.lastPawnDoubleMove.row===j&&Q.lastPawnDoubleMove.col===Y)return!0}return!1},ss=($,j,q,V,Y)=>$!==q&&j!==V?!1:Xs($,j,q,V,Y),jt=($,j,q,V)=>{const Y=Math.abs($-q),ee=Math.abs(j-V);return Y===2&&ee===1||Y===1&&ee===2},Vt=($,j,q,V,Y)=>Math.abs($-q)!==Math.abs(j-V)?!1:Xs($,j,q,V,Y),jn=($,j,q,V,Y)=>ss($,j,q,V,Y)||Vt($,j,q,V,Y),Oi=($,j,q,V,Y)=>{const ee=Math.abs(j-V),ce=Math.abs(q-Y);if(ee<=1&&ce<=1)return!0;if(ee===0&&ce===2){if($==="blue"&&!Q.blueKingMoved){if(Y===6&&!Q.blueRooksMove.right||Y===2&&!Q.blueRooksMove.left)return!0}else if($==="red"&&!Q.redKingMoved&&(Y===6&&!Q.redRooksMove.right||Y===2&&!Q.redRooksMove.left))return!0}return!1},Xs=($,j,q,V,Y)=>{const ee=$===q?0:(q-$)/Math.abs(q-$),ce=j===V?0:(V-j)/Math.abs(V-j);let Se=$+ee,yt=j+ce;for(;Se!==q||yt!==V;){if(Y[Se][yt]!==null)return!1;Se+=ee,yt+=ce}return!0},is=($,j,q,V,Y,ee=!0,ce=Je($),Se=s)=>{if(!zt(V,Y))return!1;const yt=Se[V][Y];if(yt&&Je(yt)===ce)return!1;const pn=$.toLowerCase();let gn=!1;switch(pn){case"p":gn=xn(ce,j,q,V,Y,Se);break;case"r":gn=ss(j,q,V,Y,Se);break;case"n":gn=jt(j,q,V,Y);break;case"b":gn=Vt(j,q,V,Y,Se);break;case"q":gn=jn(j,q,V,Y,Se);break;case"k":gn=Oi(ce,j,q,V,Y);break}return gn&&ee?!Tt(j,q,V,Y,ce,Se):gn},Xt=($,j=s,q=o)=>{const V=[],Y=j[$.row][$.col];if(!Y||Je(Y)!==q)return V;for(let ee=0;ee<8;ee++)for(let ce=0;ce<8;ce++)is(Y,$.row,$.col,ee,ce,!0,q,j)&&V.push({row:ee,col:ce});return V},Xn=($,j=s)=>{if(!ze(j,$))return!1;for(let q=0;q<8;q++)for(let V=0;V<8;V++){const Y=j[q][V];if(Y&&Je(Y)===$&&Xt({row:q,col:V},j,$).length>0)return!1}return!0},mo=($,j=s)=>{if(ze(j,$))return!1;for(let q=0;q<8;q++)for(let V=0;V<8;V++){const Y=j[q][V];if(Y&&Je(Y)===$&&Xt({row:q,col:V},j,$).length>0)return!1}return!0},Qc=($,j)=>{if(u!=="active"||me.current)return;const q=s[$][j],V=q?Je(q):null;if(c&&E.some(Y=>Y.row===$&&Y.col===j)){Ri(c,{row:$,col:j});return}if(q&&V===o){const Y=Xt({row:$,col:j});l({row:$,col:j}),_(Y);return}l(null),_([])},Ri=($,j,q=!1)=>{const V=s[$.row][$.col];if(!V)return;const Y=Je(V);if(V.toLowerCase()==="p"&&(Y==="blue"&&j.row===0||Y==="red"&&j.row===7)){k({from:$,to:j}),U(!0);return}Jc($,j,"q",q)},Jc=($,j,q="q",V=!1)=>{const Y=s[$.row][$.col];s[j.row][j.col];const ee=Je(Y),ce=Y?Y.toLowerCase():"",Se=s.map(yo=>[...yo]);Se[j.row][j.col]=ce==="p"&&(ee==="blue"&&j.row===0||ee==="red"&&j.row===7)?ee==="blue"?q:q.toUpperCase():Y,Se[$.row][$.col]=null;const yt={...Q};ce==="k"?ee==="blue"?yt.blueKingMoved=!0:yt.redKingMoved=!0:ce==="r"&&(ee==="blue"?($.col===0&&(yt.blueRooksMove.left=!0),$.col===7&&(yt.blueRooksMove.right=!0)):($.col===0&&(yt.redRooksMove.left=!0),$.col===7&&(yt.redRooksMove.right=!0))),ce==="p"&&Math.abs($.row-j.row)===2?yt.lastPawnDoubleMove={row:j.row,col:j.col}:yt.lastPawnDoubleMove=null,ce==="k"&&Math.abs($.col-j.col)===2&&(j.col===6?(Se[$.row][7]=null,Se[$.row][5]=ee==="blue"?"r":"R"):j.col===2&&(Se[$.row][0]=null,Se[$.row][3]=ee==="blue"?"r":"R")),i(Se),te(yt),l(null),_([]),S({from:$,to:j});const pn=`${Fe($.row,$.col)}-${Fe(j.row,j.col)}`;w(yo=>[...yo,pn]);const gn=G(o),Is=Sm(Se,gn);if(Is){d(Is),n===zi.AI&&Le(Is==="checkmate"?gn==="blue"?"win":"loss":"draw");return}a(gn),!V&&n===zi.AI&&gn==="red"&&u==="active"?(g("AI is thinking..."),me.current=!0,setTimeout(()=>{const yo=Am(Se);yo?((gr,$i,Zc="q")=>{const ua=Se[gr.row][gr.col];if(!ua)return;const Vh=Je(ua),Pu=ua.toLowerCase(),ku=Se.map(Dm=>[...Dm]);ku[$i.row][$i.col]=Pu==="p"&&(Vh==="blue"&&$i.row===0||Vh==="red"&&$i.row===7)?Vh==="blue"?Zc:Zc.toUpperCase():ua,ku[gr.row][gr.col]=null,i(ku),l(null),_([]),S({from:gr,to:$i});const Ou=`${Fe(gr.row,gr.col)}-${Fe($i.row,$i.col)}`;w(Dm=>[...Dm,Ou]);const da=G(gn),ha=Sm(ku,da);if(ha){d(ha),n===zi.AI&&Le(ha==="checkmate"?da==="blue"?"win":"loss":"draw");return}a(da),g(`Your turn (${da})`)})(yo.from,yo.to,"q"):g("AI could not find a move"),me.current=!1},1e3)):g(`Your turn (${gn})`)},Sm=($,j)=>(console.log("Checking game end for player:",j),console.log("Is king in check:",ze($,j)),Xn(j,$)?(console.log("CHECKMATE detected!"),g(`Checkmate! ${j==="blue"?"Red":"Blue"} wins!`),"checkmate"):mo(j,$)?(console.log("STALEMATE detected!"),g("Stalemate! Game is a draw."),"stalemate"):(ze($,j)?(console.log("CHECK detected!"),g(`${j==="blue"?"Blue":"Red"} is in check!`)):g(`Your turn (${j})`),null)),Am=$=>{const j=[];for(let q=0;q<8;q++)for(let V=0;V<8;V++){const Y=$[q][V];Y&&Je(Y)==="red"&&j.push({row:q,col:V})}for(let q=j.length-1;q>0;q--){const V=Math.floor(Math.random()*(q+1));[j[q],j[V]]=[j[V],j[q]]}for(const q of j){const V=Xt(q,$,"red");if(V.length>0){const Y=V[Math.floor(Math.random()*V.length)],ee=$.map(Se=>[...Se]),ce=ee[q.row][q.col];if(ee[Y.row][Y.col]=ce,ee[q.row][q.col]=null,!ze(ee,"red"))return{from:q,to:Y}}}return null},Im=()=>{i(JSON.parse(JSON.stringify(WO))),a("blue"),l(null),d("active"),w([]),_([]),S(null),A(!1),R(!1),H(!1),g("Select game mode"),te({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),me.current&&(me.current=!1),C(Tf())},ob=()=>{console.log("startAIGame called"),R(!0),H(!1),g("Select difficulty"),C(Tf())},Tm=()=>{console.log("startMultiplayerGame called"),H(!0),R(!1),g("Set wager and create/join game"),C(Tf())},Nm=()=>{console.log("startGame called, difficulty:",h,"gameMode:",n),A(!0),R(!1),H(!1),g(`Your turn (${o})`),C(Tf())},ab=async()=>{if(e)try{const $=Math.random().toString(36).substring(2,8).toUpperCase(),{error:j}=await cl.from("chess_games").insert({game_id:$,blue_player:e,board:JSON.stringify({positions:s,piece_state:Q}),current_player:"blue",game_state:"waiting",bet_amount:K,chain:"evm",is_public:!0});if(j)throw j;g(`Game created! Share code: ${$}`)}catch($){console.error("Error creating game:",$),g("Failed to create game")}},Pm=async()=>{if(!(!e||!L))try{const{data:$,error:j}=await cl.from("chess_games").select("*").eq("game_id",L).eq("game_state","waiting").single();if(j||!$){g("Game not found or already full");return}const{error:q}=await cl.from("chess_games").update({red_player:e,game_state:"active",updated_at:new Date().toISOString()}).eq("game_id",L);if(q)throw q;g("Joined game! Waiting for opponent..."),Nm()}catch($){console.error("Error joining game:",$),g("Failed to join game")}},km=$=>`${$.slice(0,6)}...${$.slice(-4)}`,cb=($,j)=>{const q=s[$][j],V=(c==null?void 0:c.row)===$&&(c==null?void 0:c.col)===j,Y=E.some(ce=>ce.row===$&&ce.col===j),ee=x&&(x.from.row===$&&x.from.col===j||x.to.row===$&&x.to.col===j);return m.jsx("div",{className:`mobile-chess-square ${($+j)%2===0?"light":"dark"} ${V?"selected":""} ${Y?"legal-move":""} ${ee?"last-move":""}`,onClick:()=>Qc($,j),children:q&&m.jsx("img",{src:k_[q],alt:q,className:"mobile-chess-piece"})},`${$}-${j}`)},lb=()=>{if(!I||!T)return null;const $=o==="blue"?["q","r","b","n"]:["Q","R","B","N"];return m.jsx("div",{className:"promotion-dialog",children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",children:$.map(j=>m.jsx("div",{className:"promotion-piece",onClick:()=>{Jc(T.from,T.to,j),U(!1),k(null)},style:{backgroundImage:k_[j]?`url(${k_[j]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},j))})]})})},[ub,Om]=M.useState(null),Rm=($=!1,j="Click a piece to learn more about it.")=>m.jsxs("div",{className:`mobile-chess-piece-gallery${$?" mobile-chess-piece-gallery-sm":""}`,children:[m.jsx("h3",{className:"mobile-chess-section-title",children:"Lawbstation Chess Pieces"}),m.jsx("div",{className:"mobile-chess-piece-gallery-grid",children:r_e.map(q=>m.jsxs("div",{className:"mobile-chess-piece-gallery-item",onClick:()=>Om(q.key),children:[m.jsx("img",{src:q.img,alt:q.name,className:"mobile-chess-piece-gallery-img"}),m.jsx("div",{className:"mobile-chess-piece-gallery-name",children:q.name}),ub===q.key&&m.jsx("div",{className:"mobile-chess-piece-gallery-desc",children:q.desc})]},q.key))}),m.jsx("div",{className:"mobile-chess-piece-gallery-tip",children:j})]}),$m=()=>m.jsxs("div",{className:"mobile-chess-difficulty-selection-row",children:[m.jsx("div",{className:"mobile-chess-difficulty-gallery-col",children:Rm(!0,"click for chess piece movements")}),m.jsxs("div",{className:"mobile-chess-difficulty-controls-col",children:[m.jsxs("div",{className:"mobile-chess-difficulty-selection-panel",children:[m.jsx("h3",{className:"mobile-chess-section-title",children:"Select Difficulty"}),m.jsx("button",{className:`mobile-chess-difficulty-btn ${h==="easy"?"selected":""}`,onClick:()=>f("easy"),children:"Easy"}),m.jsx("button",{className:`mobile-chess-difficulty-btn ${h==="hard"?"selected":""}`,onClick:()=>f("hard"),children:"Kinda Harder"}),m.jsx("button",{className:"mobile-chess-btn",onClick:Nm,children:"Start Game"})]}),m.jsx("div",{className:"mobile-chess-difficulty-leaderboard-panel",children:m.jsxs("div",{className:"mobile-chess-leaderboard",children:[m.jsx("h3",{className:"mobile-chess-section-title",children:"Leaderboard"}),m.jsx("div",{className:"mobile-chess-leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Points"})]})}),m.jsx("tbody",{children:b.slice(0,10).map(($,j)=>{const q=$;return m.jsxs("tr",{children:[m.jsx("td",{children:j+1}),m.jsx("td",{children:km(q.username)}),m.jsx("td",{children:q.wins}),m.jsx("td",{children:q.losses}),m.jsx("td",{children:q.draws}),m.jsx("td",{children:q.points})]},q.username)})})]})})]})})]})]}),G=$=>$==="blue"?"red":"blue";return e?m.jsxs("div",{className:"chess-game",children:[m.jsx("div",{className:"chess-header",children:m.jsx("h2",{children:"Lawb Chess"})}),m.jsxs("div",{className:"chess-content",children:[!F&&!O&&!B&&m.jsx("div",{className:"mobile-chess-piece-gallery",children:Rm(!1)}),!F&&!O&&!B&&m.jsxs("div",{className:"mobile-chess-game-mode-selection",children:[m.jsx("h3",{className:"mobile-chess-section-title",children:"Select Game Mode"}),m.jsx("button",{className:`mobile-chess-btn ${n===zi.AI?"selected":""}`,onClick:()=>r(zi.AI),children:"VS the House"}),m.jsx("button",{className:`mobile-chess-btn ${n===zi.ONLINE?"selected":""}`,onClick:()=>r(zi.ONLINE),disabled:!0,children:"PvP Under Construction"}),m.jsx("button",{className:"mobile-chess-btn",onClick:()=>{n===zi.AI?ob():Tm()},children:"Continue"})]}),O&&$m(),B&&m.jsxs("div",{className:"mobile-chess-multiplayer-selection",children:[m.jsx("h3",{className:"mobile-chess-section-title",children:"Multiplayer"}),m.jsxs("div",{className:"mobile-chess-wager-input",children:[m.jsx("label",{children:"Wager (ETH):"}),m.jsx("input",{type:"number",value:K,onChange:$=>Z(parseFloat($.target.value)||.1),min:"0.01",step:"0.01"})]}),m.jsx("button",{className:"mobile-chess-btn",onClick:ab,children:"Create Game"}),m.jsxs("div",{className:"mobile-chess-join-game",children:[m.jsx("input",{type:"text",value:L,onChange:$=>W($.target.value),placeholder:"Enter invite code"}),m.jsx("button",{className:"mobile-chess-btn",onClick:Pm,children:"Join Game"})]}),p&&p.includes("Game created!")&&m.jsx("div",{className:"mobile-chess-game-created",children:m.jsx("p",{children:p})})]}),F&&m.jsxs("div",{className:"mobile-chess-game-container",children:[m.jsxs("div",{className:"mobile-chess-move-history",children:[m.jsx("h4",{className:"mobile-chess-section-title",children:"Move History"}),m.jsx("div",{className:"mobile-chess-moves",children:y.slice().reverse().map(($,j)=>m.jsxs("span",{className:"mobile-chess-move",children:[Math.floor((y.length-1-j)/2)+1,".",(y.length-1-j)%2===0?"":" ",$]},y.length-1-j))})]}),m.jsxs("div",{className:"mobile-chess-game-main",children:[m.jsxs("div",{className:"mobile-chess-game-info",children:[m.jsx("div",{className:"mobile-chess-status",children:p}),m.jsxs("div",{className:"mobile-chess-current-player",children:["Current: ",o==="blue"?"Blue":"Red"]}),m.jsxs("div",{className:"mobile-chess-wager-display",children:["Wager: ",n===zi.AI?"NA":`${K} ETH`]})]}),m.jsx("div",{className:"mobile-chess-board-wrapper",children:m.jsx("div",{className:"mobile-chess-board",style:{backgroundImage:`url('/images/chessboard${N}.png')`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:Array.from({length:8},($,j)=>m.jsx("div",{className:"mobile-chess-board-row",children:Array.from({length:8},(q,V)=>cb(j,V))},j))})}),m.jsxs("div",{className:"chess-game-controls",children:[m.jsx("button",{className:"start-btn",onClick:Im,children:"New Game"}),m.jsx("button",{className:"start-btn",onClick:Im,children:"Back to Menu"})]})]}),!F&&!O&&!B&&m.jsxs("div",{className:"mobile-chess-leaderboard",children:[m.jsx("h3",{className:"mobile-chess-section-title",children:"Leaderboard"}),m.jsx("div",{className:"mobile-chess-leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Points"})]})}),m.jsx("tbody",{children:b.slice(0,10).map(($,j)=>{const q=$;return m.jsxs("tr",{children:[m.jsx("td",{children:j+1}),m.jsx("td",{children:km(q.username)}),m.jsx("td",{children:q.wins}),m.jsx("td",{children:q.losses}),m.jsx("td",{children:q.draws}),m.jsx("td",{children:q.points})]},q.username)})})]})})]})]})]}),lb()]}):m.jsxs("div",{className:"mobile-chess-container",children:[m.jsxs("div",{className:"mobile-chess-header",children:[m.jsx("h2",{children:"Lawb Chess"}),m.jsx("div",{className:"mobile-chess-controls",children:m.jsx("button",{className:"mobile-chess-btn",onClick:t,children:"×"})})]}),m.jsx("div",{className:"mobile-chess-status",children:m.jsx("p",{children:"Connect your wallet to play chess"})})]})};function Tf(){return Math.floor(Math.random()*6)+1}const i_e=Pi({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),o_e=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],a_e=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],c_e=()=>{const t=i_e(),{open:e}=Zv(),{address:n,isConnected:r}=hv(),{isPending:s}=_5(),{disconnect:i}=E5(),{data:o}=C5({address:n}),[a,c]=M.useState("main"),[l,u]=M.useState(!1),[d,h]=M.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=M.useState(!1),[g,y]=M.useState(!1),[w,b]=M.useState(!1),[v,E]=M.useState(!1),[_,x]=M.useState(!1),[S,N]=M.useState(!1),[C,O]=M.useState(!1),[R,B]=M.useState(!1),[H,F]=M.useState(!1),[A,I]=M.useState(!1),[U,T]=M.useState(!1),[k,L]=M.useState(!1),[W,K]=M.useState(!1),Z=[{label:"Chess",icon:"/images/chessboard5.png",action:()=>K(!0)},{label:"Mint",icon:"/assets/mint.gif",action:()=>y(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>b(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>E(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>x(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],Q=me=>{me.disabled||me.action()};if(M.useEffect(()=>{const me=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(me)},[]),M.useEffect(()=>{u(!0)},[]),a==="gallery")return m.jsx(Z1e,{onBack:()=>c("main"),walletAddress:n||void 0});function te({open:me,onClose:je,title:Oe,nfts:Le}){const Je=zt=>{switch(zt){case"lawbsters":N(!0);break;case"lawbstarz":O(!0);break;case"pixelawbs":B(!0);break;case"halloween":F(!0);break;case"lawbstation":I(!0);break;case"nexus":T(!0);break}};return m.jsx(Rs,{isOpen:me,onClose:je,title:Oe,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:Le.map(zt=>m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>Je(zt.id),children:[m.jsx("img",{src:zt.image,alt:zt.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),m.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:zt.name}),m.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:zt.description})]},zt.id))})})}function oe({open:me,onClose:je}){return me?m.jsxs(Rs,{isOpen:me,onClose:je,title:"$LAWB",children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"🦞 $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}})]}):null}return m.jsxs("div",{className:t.mobileContainer,children:[m.jsx("header",{className:t.header,children:m.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),m.jsx("div",{className:t.iconGrid,children:Z.map(me=>m.jsxs("div",{className:t.icon,onClick:()=>Q(me),children:[m.jsx("img",{src:me.icon,alt:me.label}),m.jsx("span",{children:me.label})]},me.label))}),l&&m.jsxs(Rs,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),y(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&m.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:m.jsxs("div",{className:t.menuModal,onClick:me=>me.stopPropagation(),children:[m.jsx("a",{href:"https://dexscreener.com/solana/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Dexscreener"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),m.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),L(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),m.jsx(e_e,{isOpen:g,onClose:()=>y(!1),walletAddress:n||""}),m.jsx(te,{open:w,onClose:()=>b(!1),title:"EVM NFT'S FOLDER",nfts:o_e}),m.jsx(te,{open:v,onClose:()=>E(!1),title:"SOL NFTS FOLDER",nfts:a_e}),m.jsx(oe,{open:_,onClose:()=>x(!1)}),m.jsxs(Rs,{isOpen:S,onClose:()=>N(!1),title:"Lawbsters",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(Rs,{isOpen:C,onClose:()=>O(!1),title:"Lawbstarz",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Rs,{isOpen:R,onClose:()=>B(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{B(!1),y(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),m.jsxs(Rs,{isOpen:H,onClose:()=>F(!1),title:"A Lawbster Halloween",children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),m.jsxs(Rs,{isOpen:A,onClose:()=>I(!1),title:"Lawbstation",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(Rs,{isOpen:U,onClose:()=>T(!1),title:"Nexus",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsx(Rs,{isOpen:k,onClose:()=>L(!1),title:"Meme Generator",children:m.jsx(lU,{})}),m.jsx(Rs,{isOpen:W,onClose:()=>K(!1),title:"Chess",children:m.jsx(s_e,{onClose:()=>K(!1),walletAddress:n||""})}),m.jsxs("div",{className:t.taskbar,children:[m.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),m.jsxs("div",{className:t.walletStatus,children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),m.jsx("span",{className:t.clock,children:d})]})]})};function l_e(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=M.useState(e(t));function s(){r(e(t))}return M.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}function u_e(t){let e=[],n,r;function s(a){return gg.parseEvmChainId(a)||1}function i(){var a;return n||(n=Wl.getInstance({projectId:t.options.projectId,chainId:(a=D.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?dn.open(Gt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?dn.open(Gt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&dn.open(Gt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:Gt.EmbeddedWalletAbortController})),n}async function o(a={}){var g,y;const c=i();let l=a.chainId;if(a.isReconnecting){const w=gg.parseEvmChainId(c.getLastUsedChainId()||""),b=(g=t.chains)==null?void 0:g[0].id;if(l=w||b,!l)throw new Error("ChainId not found in provider")}const u=(y=de.state.preferredAccountTypes)==null?void 0:y.eip155,{address:d,chainId:h,accounts:f}=await c.connect({chainId:l,preferredAccountType:u,socialUri:a.socialUri});e=(f==null?void 0:f.map(w=>w.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:X.CONNECTOR_ID.AUTH,name:X.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:X.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=Wl.getInstance({projectId:t.options.projectId,chainId:(c=D.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:Gt.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?dn.open(Gt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?dn.open(Gt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&dn.open(Gt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=D.state.activeChain===X.CHAIN.EVM;if(X.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>fe.getConnectorId(h)===X.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l,u;try{const d=a.chains.find(g=>g.id===c);if(!d)throw new lo(new Error("chain not found on connector."));const h=await this.getProvider(),f=(l=de.state.preferredAccountTypes)==null?void 0:l.eip155,p=await h.connect({chainId:c,preferredAccountType:f});return e=((u=p==null?void 0:p.accounts)==null?void 0:u.map(g=>g.address))||[p.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),d}catch(d){throw d instanceof Error?new lo(d):d}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(lc)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}xI.type="walletConnect";function xI(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:xI.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=D.getCaipNetworks(),y=await this.getProvider();if(!y)throw new La;a||(a=this.onDisplayUri,y.on("display_uri",a));const w=await this.isChainsStale();y.session&&w&&await y.disconnect();const b=se.state.universalProviderConfigOverride;if(!y.session||w){const C=bp.createNamespaces(g,b);await y.connect({optionalNamespaces:C,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(O=>Number(O.id)))}const v=await this.getAccounts(),E=await this.getChainId(),_=(p=(f=(h=y.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,x=_==null?void 0:_.some(C=>Number(C.split(":")[1])===E);let S=1;x?S=E:_!=null&&_[0]&&(S=Number(_[0].split(":")[1])),a&&(y.removeListener("display_uri",a),a=void 0),o&&(y.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),y.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),y.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),y.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),y.on("session_delete",c));const N=b==null?void 0:b.defaultChain;return y.setDefaultChain(N??`eip155:${S}`),{accounts:v,chainId:S}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new vn(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var p,g,y;const d=await this.getProvider();if(!((p=d==null?void 0:d.session)!=null&&p.namespaces))return[];const h=(y=(g=d==null?void 0:d.session)==null?void 0:g.namespaces[X.CHAIN.EVM])==null?void 0:y.accounts;return(h==null?void 0:h.map(w=>w.split(":")[2]))??[]},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=he.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const y=he.getStoredActiveCaipNetworkId(),w=e.getCaipNetworks(h),b=w==null?void 0:w.find(v=>v.id===y);b&&b.chainNamespace===X.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(b.id)}))}return r},async getChainId(){var g,y,w,b;const d=(g=e.getCaipNetwork(X.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(b=(w=(y=(await this.getProvider()).session)==null?void 0:y.namespaces[X.CHAIN.EVM])==null?void 0:w.chains)==null?void 0:b[0],p=D.getCaipNetworks().find(v=>v.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,y,w,b;const f=await this.getProvider();if(!f)throw new La;const p=D.getCaipNetworks().find(v=>v.id===h);if(!p)throw new lo(new cg);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:Ue(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const v=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...v,h]),{...p,id:p.id}}catch(v){const E=v;if(/(?:user rejected)/iu.test(E.message))throw new vn(E);try{let _;d!=null&&d.blockExplorerUrls?_=d.blockExplorerUrls:_=(g=p.blockExplorers)!=null&&g.default.url?[(y=p.blockExplorers)==null?void 0:y.default.url]:[];const x=((b=(w=p.rpcUrls)==null?void 0:w.chainDefault)==null?void 0:b.http)||[],S={blockExplorerUrls:_,chainId:Ue(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:x};await f.request({method:"wallet_addEthereumChain",params:[S]});const N=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...N,h]),{...p,id:p.id}}catch(_){throw new vn(_)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>lc(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(D.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[X.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(y=>Number.parseInt(y.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const Nf=Dt({pendingTransactions:0}),HO={state:Nf,subscribeKey(t,e){return Yn(Nf,t,e)},increase(t){Nf[t]+=1},decrease(t){Nf[t]-=1},reset(t){Nf[t]=0}};function d_e(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function h_e(t){if(Ae.isSafeApp()){const{safe:e}=await on(async()=>{const{safe:n}=await import("./index-C77Jx5wG.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function f_e(t){try{const{coinbaseWallet:e}=await on(async()=>{const{coinbaseWallet:n}=await import("./index-C77Jx5wG.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const p_e={enable:!1,pollingInterval:3e4};class g_e extends cU{constructor(e){const n=to.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=X.CHAIN.EVM,this.adapterType=X.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...p_e,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===X.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>Ae.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=Ud(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>Ae.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=Ud(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===X.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=to.getCaipNetworkId(s);i?n[s.id]=to.extendWagmiTransports(s,e.projectId,i):n[s.id]=to.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=Lq({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=yq(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),HO.increase("pendingTransactions")}});const e=HO.subscribeKey("pendingTransactions",n=>{var r;n>=X.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){YD(this.wagmiConfig,{onChange:(e,n)=>{e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"&&(e.address!==(n==null?void 0:n.address)||n.status!=="connected")&&(this.setupWatchPendingTransactions(),this.emit("accountChanged",{address:e.address,chainId:e.chainId}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await f_e(this.wagmiConfig.connectors);s&&n.push(s)}const r=await h_e(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(xI(e,n)),e.enableInjected!==!1&&r.push(uv({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(u_e({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async signMessage(e){try{return{signature:await fq(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=Ud(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await dq(this.wagmiConfig,s);const i=await hq(this.wagmiConfig,s);return await wq(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(gg.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await vq(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await sq(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return Iz(e.value,e.decimals)}formatUnits(e){return Nh(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(e.id===X.CONNECTOR_ID.AUTH||e.id===X.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:fc.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:fc.ConnectorNamesMap[e.id]??e.name,imageId:fc.ConnectorImageIds[e.id],type:fc.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===X.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){QD(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=Gi(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(Ae.isSafeApp()&&n===X.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await aw(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await aw(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await uT(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var u,d,h,f,p;const{id:n,provider:r,type:s,info:i,chainId:o,socialUri:a}=e,c=this.getWagmiConnector(n);if(!c)throw new Error("connectionControllerClient:connectExternal - connector is undefined");if(r&&i&&c.id===X.CONNECTOR_ID.EIP6963&&((u=c.setEip6963Wallet)==null||u.call(c,{provider:r,info:i})),c.uid===((h=(d=this.wagmiConfig)==null?void 0:d.state)==null?void 0:h.current)){const g=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(c.uid);if(g)return{address:g==null?void 0:g.accounts[0],chainId:g==null?void 0:g.chainId,provider:r,type:s,id:n}}const l=await aw(this.wagmiConfig,{connector:c,chainId:o?Number(o):void 0,socialUri:a});return{address:l.accounts[0],chainId:l.chainId,provider:r,type:s,id:n}}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await GE(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=he.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await cq(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});he.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(){const e=Gi(this.wagmiConfig);await Promise.allSettled(e.map(async n=>{const r=this.getWagmiConnector(n.connector.id);r&&await GD(this.wagmiConfig,{connector:r})})),this.wagmiConfig.state.connections.clear()}async switchNetwork(e){var r,s,i,o,a;const{caipNetwork:n}=e;await uT(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:n.name,nativeCurrency:n.nativeCurrency,rpcUrls:[((i=(s=(r=n.rpcUrls)==null?void 0:r.chainDefault)==null?void 0:s.http)==null?void 0:i[0])??""],blockExplorerUrls:[((o=n.blockExplorers)==null?void 0:o.default.url)??""],iconUrls:[((a=n.assets)==null?void 0:a.imageUrl)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=Gi(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=d_e(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=Gi(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=Gi(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=Gi(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setUniversalProvider(e){e.on("connect",()=>{const n=Gi(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(D.state.activeChain==="eip155")return;GE(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new wI({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"}))}}const DU="7c65f27254d6ddd24cf7eedf2685c4fb",m_e={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},jU=new g_e({networks:[aU],projectId:DU,ssr:!1});Ive({adapters:[jU],networks:[aU],projectId:DU,metadata:m_e,features:{analytics:!1}});const y_e=new IW,w_e=()=>l_e("(max-width: 768px)")?m.jsx(c_e,{}):m.jsx(Q1e,{});O_.createRoot(document.getElementById("root")).render(m.jsx(qs.StrictMode,{children:m.jsx(Fq,{config:jU.wagmiConfig,children:m.jsx(BW,{client:y_e,children:m.jsx(w_e,{})})})}));export{$Ee as $,de as A,ke as B,fe as C,Yn as D,op as E,Kn as F,Ie as G,RC as H,Mf as I,mi as J,sZ as K,St as L,gt as M,eZ as N,se as O,hs as P,_w as Q,Re as R,wi as S,Wr as T,mg as U,Ag as V,$n as W,LEe as X,Rx as Y,LZ as Z,mp as _,Cw as a,Th as a$,kn as a0,gu as a1,rn as a2,DEe as a3,eU as a4,$x as a5,bh as a6,on as a7,j_e as a8,lc as a9,OD as aA,kD as aB,Dc as aC,np as aD,ea as aE,N_e as aF,UB as aG,Zl as aH,T_e as aI,P_e as aJ,Yw as aK,k_e as aL,o9 as aM,T$ as aN,I_e as aO,iv as aP,zp as aQ,Qw as aR,j0 as aS,O_e as aT,a9 as aU,DT as aV,Nq as aW,rK as aX,Qs as aY,xz as aZ,Cz as a_,lo as aa,cg as ab,Ue as ac,vn as ad,La as ae,jD as af,uv as ag,Jw as ah,ZS as ai,$c as aj,S_e as ak,lv as al,XS as am,x_e as an,C_e as ao,B$ as ap,rv as aq,Kw as ar,CB as as,TB as at,R_e as au,E7 as av,ne as aw,HS as ax,Cr as ay,x7 as az,vt as b,Jl as b0,ev as b1,Ar as b2,ln as b3,sm as b4,X as c,Ae as d,D as e,bt as f,qo as g,UEe as h,Fd as i,ps as j,_e as k,Bt as l,Z0e as m,dn as n,X0e as o,he as p,Gt as q,jEe as r,ft as s,$8 as t,Dt as u,RZ as v,As as w,REe as x,kA as y,j8 as z};
