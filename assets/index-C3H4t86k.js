const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/secp256k1-BvFHZ8lK.js","assets/hmac-dvkOzgWc.js","assets/secp256k1-T2J7Ug9y.js","assets/embedded-wallet-B9-zVEls.js","assets/if-defined-Do6IgneV.js","assets/index-CVa7PQNb.js","assets/index-BfTjB7-Q.js","assets/ref-UVkWMpz8.js","assets/index-CFwt5PfG.js","assets/index-XgiIiaIz.js","assets/index-VJ-aX9dQ.js","assets/index-Bxp1b8Vt.js","assets/index-D-w41nLZ.js","assets/index-BXh4FUhi.js","assets/index-PkHwHpwb.js","assets/email-Bpx-q0bu.js","assets/index-Dedv0FTG.js","assets/socials-Bn6_4xqf.js","assets/index-B7-HCyrh.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-BpEwCVRr.js","assets/index-B-OYheZF.js","assets/index-Cw9yLa0p.js","assets/index-DbqcrDhF.js","assets/swaps-D9m6svSi.js","assets/index-KJOX9HYi.js","assets/index-BnRJeh_D.js","assets/index-BbmvJzEv.js","assets/send-BPQlv_Ui.js","assets/index-CfOCPR7z.js","assets/index-BRw8S3FQ.js","assets/receive-DUglVX7l.js","assets/index-WaAf1Unh.js","assets/onramp-z3Oq4nEZ.js","assets/index-BjsGPrQO.js","assets/index-Cl24cI6G.js","assets/index-DdI8B8M5.js","assets/transactions-QA1HJfzK.js","assets/index-BnUjkkL2.js","assets/index-DCjLTNt8.js","assets/index-BzmqHm1n.js","assets/index-BGAfRZqx.js","assets/index-CHGe1mju.js","assets/w3m-modal-BlMbo9-_.js"])))=>i.map(i=>d[i]);
var kI=t=>{throw TypeError(t)};var tb=(t,e,n)=>e.has(t)||kI("Cannot "+n);var M=(t,e,n)=>(tb(t,e,"read from private field"),n?n.call(t):e.get(t)),Ae=(t,e,n)=>e.has(t)?kI("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ge=(t,e,n,r)=>(tb(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),He=(t,e,n)=>(tb(t,e,"access private method"),n);var Nm=(t,e,n,r)=>({set _(s){ge(t,e,s,n)},get _(){return M(t,e,r)}});function kL(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var rn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function du(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function P0(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var wR={exports:{}},k0={},vR={exports:{}},Je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg=Symbol.for("react.element"),OL=Symbol.for("react.portal"),RL=Symbol.for("react.fragment"),$L=Symbol.for("react.strict_mode"),DL=Symbol.for("react.profiler"),UL=Symbol.for("react.provider"),jL=Symbol.for("react.context"),LL=Symbol.for("react.forward_ref"),ML=Symbol.for("react.suspense"),BL=Symbol.for("react.memo"),FL=Symbol.for("react.lazy"),OI=Symbol.iterator;function zL(t){return t===null||typeof t!="object"?null:(t=OI&&t[OI]||t["@@iterator"],typeof t=="function"?t:null)}var bR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ER=Object.assign,_R={};function yh(t,e,n){this.props=t,this.context=e,this.refs=_R,this.updater=n||bR}yh.prototype.isReactComponent={};yh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function CR(){}CR.prototype=yh.prototype;function Ux(t,e,n){this.props=t,this.context=e,this.refs=_R,this.updater=n||bR}var jx=Ux.prototype=new CR;jx.constructor=Ux;ER(jx,yh.prototype);jx.isPureReactComponent=!0;var RI=Array.isArray,xR=Object.prototype.hasOwnProperty,Lx={current:null},SR={key:!0,ref:!0,__self:!0,__source:!0};function AR(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)xR.call(e,r)&&!SR.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Vg,type:t,key:i,ref:o,props:s,_owner:Lx.current}}function WL(t,e){return{$$typeof:Vg,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Mx(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vg}function qL(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $I=/\/+/g;function nb(t,e){return typeof t=="object"&&t!==null&&t.key!=null?qL(""+t.key):e.toString(36)}function By(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Vg:case OL:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+nb(o,0):r,RI(s)?(n="",t!=null&&(n=t.replace($I,"$&/")+"/"),By(s,e,n,"",function(l){return l})):s!=null&&(Mx(s)&&(s=WL(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace($I,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",RI(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+nb(i,a);o+=By(i,e,n,c,s)}else if(c=zL(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+nb(i,a++),o+=By(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Pm(t,e,n){if(t==null)return t;var r=[],s=0;return By(t,r,"","",function(i){return e.call(n,i,s++)}),r}function HL(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pr={current:null},Fy={transition:null},VL={ReactCurrentDispatcher:Pr,ReactCurrentBatchConfig:Fy,ReactCurrentOwner:Lx};function IR(){throw Error("act(...) is not supported in production builds of React.")}Je.Children={map:Pm,forEach:function(t,e,n){Pm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Pm(t,function(){e++}),e},toArray:function(t){return Pm(t,function(e){return e})||[]},only:function(t){if(!Mx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Je.Component=yh;Je.Fragment=RL;Je.Profiler=DL;Je.PureComponent=Ux;Je.StrictMode=$L;Je.Suspense=ML;Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VL;Je.act=IR;Je.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ER({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Lx.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)xR.call(e,c)&&!SR.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:Vg,type:t.type,key:s,ref:i,props:r,_owner:o}};Je.createContext=function(t){return t={$$typeof:jL,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:UL,_context:t},t.Consumer=t};Je.createElement=AR;Je.createFactory=function(t){var e=AR.bind(null,t);return e.type=t,e};Je.createRef=function(){return{current:null}};Je.forwardRef=function(t){return{$$typeof:LL,render:t}};Je.isValidElement=Mx;Je.lazy=function(t){return{$$typeof:FL,_payload:{_status:-1,_result:t},_init:HL}};Je.memo=function(t,e){return{$$typeof:BL,type:t,compare:e===void 0?null:e}};Je.startTransition=function(t){var e=Fy.transition;Fy.transition={};try{t()}finally{Fy.transition=e}};Je.unstable_act=IR;Je.useCallback=function(t,e){return Pr.current.useCallback(t,e)};Je.useContext=function(t){return Pr.current.useContext(t)};Je.useDebugValue=function(){};Je.useDeferredValue=function(t){return Pr.current.useDeferredValue(t)};Je.useEffect=function(t,e){return Pr.current.useEffect(t,e)};Je.useId=function(){return Pr.current.useId()};Je.useImperativeHandle=function(t,e,n){return Pr.current.useImperativeHandle(t,e,n)};Je.useInsertionEffect=function(t,e){return Pr.current.useInsertionEffect(t,e)};Je.useLayoutEffect=function(t,e){return Pr.current.useLayoutEffect(t,e)};Je.useMemo=function(t,e){return Pr.current.useMemo(t,e)};Je.useReducer=function(t,e,n){return Pr.current.useReducer(t,e,n)};Je.useRef=function(t){return Pr.current.useRef(t)};Je.useState=function(t){return Pr.current.useState(t)};Je.useSyncExternalStore=function(t,e,n){return Pr.current.useSyncExternalStore(t,e,n)};Je.useTransition=function(){return Pr.current.useTransition()};Je.version="18.3.1";vR.exports=Je;var D=vR.exports;const vs=du(D),GL=kL({__proto__:null,default:vs},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KL=D,YL=Symbol.for("react.element"),JL=Symbol.for("react.fragment"),QL=Object.prototype.hasOwnProperty,ZL=KL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,XL={key:!0,ref:!0,__self:!0,__source:!0};function TR(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)QL.call(e,r)&&!XL.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:YL,type:t,key:i,ref:o,props:s,_owner:ZL.current}}k0.Fragment=JL;k0.jsx=TR;k0.jsxs=TR;wR.exports=k0;var m=wR.exports,CE={},NR={exports:{}},Ss={},PR={exports:{}},kR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,k){var j=P.length;P.push(k);e:for(;0<j;){var z=j-1>>>1,K=P[z];if(0<s(K,k))P[z]=k,P[j]=K,j=z;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var k=P[0],j=P.pop();if(j!==k){P[0]=j;e:for(var z=0,K=P.length,Q=K>>>1;z<Q;){var Y=2*(z+1)-1,Z=P[Y],se=Y+1,Pe=P[se];if(0>s(Z,j))se<K&&0>s(Pe,Z)?(P[z]=Pe,P[se]=j,z=se):(P[z]=Z,P[Y]=j,z=Y);else if(se<K&&0>s(Pe,j))P[z]=Pe,P[se]=j,z=se;else break e}}return k}function s(P,k){var j=P.sortIndex-k.sortIndex;return j!==0?j:P.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(P){for(var k=n(l);k!==null;){if(k.callback===null)r(l);else if(k.startTime<=P)r(l),k.sortIndex=k.expirationTime,e(c,k);else break;k=n(l)}}function _(P){if(g=!1,v(P),!p)if(n(c)!==null)p=!0,A(E);else{var k=n(l);k!==null&&U(_,k.startTime-P)}}function E(P,k){p=!1,g&&(g=!1,y(T),T=-1),f=!0;var j=h;try{for(v(k),d=n(c);d!==null&&(!(d.expirationTime>k)||P&&!R());){var z=d.callback;if(typeof z=="function"){d.callback=null,h=d.priorityLevel;var K=z(d.expirationTime<=k);k=t.unstable_now(),typeof K=="function"?d.callback=K:d===n(c)&&r(c),v(k)}else r(c);d=n(c)}if(d!==null)var Q=!0;else{var Y=n(l);Y!==null&&U(_,Y.startTime-k),Q=!1}return Q}finally{d=null,h=j,f=!1}}var x=!1,S=null,T=-1,C=5,O=-1;function R(){return!(t.unstable_now()-O<C)}function F(){if(S!==null){var P=t.unstable_now();O=P;var k=!0;try{k=S(!0,P)}finally{k?W():(x=!1,S=null)}}else x=!1}var W;if(typeof b=="function")W=function(){b(F)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,I=B.port2;B.port1.onmessage=F,W=function(){I.postMessage(null)}}else W=function(){w(F,0)};function A(P){S=P,x||(x=!0,W())}function U(P,k){T=w(function(){P(t.unstable_now())},k)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,A(E))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(P){switch(h){case 1:case 2:case 3:var k=3;break;default:k=h}var j=h;h=k;try{return P()}finally{h=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,k){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var j=h;h=P;try{return k()}finally{h=j}},t.unstable_scheduleCallback=function(P,k,j){var z=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?z+j:z):j=z,P){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=j+K,P={id:u++,callback:k,priorityLevel:P,startTime:j,expirationTime:K,sortIndex:-1},j>z?(P.sortIndex=j,e(l,P),n(c)===null&&P===n(l)&&(g?(y(T),T=-1):g=!0,U(_,j-z))):(P.sortIndex=K,e(c,P),p||f||(p=!0,A(E))),P},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(P){var k=h;return function(){var j=h;h=k;try{return P.apply(this,arguments)}finally{h=j}}}})(kR);PR.exports=kR;var eM=PR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tM=D,Cs=eM;function re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var OR=new Set,_p={};function hu(t,e){Yd(t,e),Yd(t+"Capture",e)}function Yd(t,e){for(_p[t]=e,t=0;t<e.length;t++)OR.add(e[t])}var Ho=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xE=Object.prototype.hasOwnProperty,nM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,DI={},UI={};function rM(t){return xE.call(UI,t)?!0:xE.call(DI,t)?!1:nM.test(t)?UI[t]=!0:(DI[t]=!0,!1)}function sM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iM(t,e,n,r){if(e===null||typeof e>"u"||sM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kr(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Kn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Kn[t]=new kr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Kn[e]=new kr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Kn[t]=new kr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Kn[t]=new kr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Kn[t]=new kr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Kn[t]=new kr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Kn[t]=new kr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Kn[t]=new kr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Kn[t]=new kr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Bx=/[\-:]([a-z])/g;function Fx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Bx,Fx);Kn[e]=new kr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Bx,Fx);Kn[e]=new kr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Bx,Fx);Kn[e]=new kr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Kn[t]=new kr(t,1,!1,t.toLowerCase(),null,!1,!1)});Kn.xlinkHref=new kr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Kn[t]=new kr(t,1,!1,t.toLowerCase(),null,!0,!0)});function zx(t,e,n,r){var s=Kn.hasOwnProperty(e)?Kn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iM(e,n,s,r)&&(n=null),r||s===null?rM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ta=tM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,km=Symbol.for("react.element"),cd=Symbol.for("react.portal"),ld=Symbol.for("react.fragment"),Wx=Symbol.for("react.strict_mode"),SE=Symbol.for("react.profiler"),RR=Symbol.for("react.provider"),$R=Symbol.for("react.context"),qx=Symbol.for("react.forward_ref"),AE=Symbol.for("react.suspense"),IE=Symbol.for("react.suspense_list"),Hx=Symbol.for("react.memo"),Na=Symbol.for("react.lazy"),DR=Symbol.for("react.offscreen"),jI=Symbol.iterator;function qh(t){return t===null||typeof t!="object"?null:(t=jI&&t[jI]||t["@@iterator"],typeof t=="function"?t:null)}var Qt=Object.assign,rb;function If(t){if(rb===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);rb=e&&e[1]||""}return`
`+rb+t}var sb=!1;function ib(t,e){if(!t||sb)return"";sb=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{sb=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?If(t):""}function oM(t){switch(t.tag){case 5:return If(t.type);case 16:return If("Lazy");case 13:return If("Suspense");case 19:return If("SuspenseList");case 0:case 2:case 15:return t=ib(t.type,!1),t;case 11:return t=ib(t.type.render,!1),t;case 1:return t=ib(t.type,!0),t;default:return""}}function TE(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ld:return"Fragment";case cd:return"Portal";case SE:return"Profiler";case Wx:return"StrictMode";case AE:return"Suspense";case IE:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case $R:return(t.displayName||"Context")+".Consumer";case RR:return(t._context.displayName||"Context")+".Provider";case qx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Hx:return e=t.displayName||null,e!==null?e:TE(t.type)||"Memo";case Na:e=t._payload,t=t._init;try{return TE(t(e))}catch{}}return null}function aM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return TE(e);case 8:return e===Wx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ac(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function UR(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cM(t){var e=UR(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Om(t){t._valueTracker||(t._valueTracker=cM(t))}function jR(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=UR(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ww(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function NE(t,e){var n=e.checked;return Qt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function LI(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ac(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function LR(t,e){e=e.checked,e!=null&&zx(t,"checked",e,!1)}function PE(t,e){LR(t,e);var n=Ac(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?kE(t,e.type,n):e.hasOwnProperty("defaultValue")&&kE(t,e.type,Ac(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function MI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function kE(t,e,n){(e!=="number"||ww(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Tf=Array.isArray;function Cd(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ac(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function OE(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(re(91));return Qt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function BI(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(re(92));if(Tf(n)){if(1<n.length)throw Error(re(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ac(n)}}function MR(t,e){var n=Ac(e.value),r=Ac(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function FI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function BR(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function RE(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?BR(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Rm,FR=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Rm=Rm||document.createElement("div"),Rm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Rm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Cp(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var qf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lM=["Webkit","ms","Moz","O"];Object.keys(qf).forEach(function(t){lM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qf[e]=qf[t]})});function zR(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||qf.hasOwnProperty(t)&&qf[t]?(""+e).trim():e+"px"}function WR(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=zR(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var uM=Qt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $E(t,e){if(e){if(uM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(re(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(re(62))}}function DE(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var UE=null;function Vx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jE=null,xd=null,Sd=null;function zI(t){if(t=Yg(t)){if(typeof jE!="function")throw Error(re(280));var e=t.stateNode;e&&(e=U0(e),jE(t.stateNode,t.type,e))}}function qR(t){xd?Sd?Sd.push(t):Sd=[t]:xd=t}function HR(){if(xd){var t=xd,e=Sd;if(Sd=xd=null,zI(t),e)for(t=0;t<e.length;t++)zI(e[t])}}function VR(t,e){return t(e)}function GR(){}var ob=!1;function KR(t,e,n){if(ob)return t(e,n);ob=!0;try{return VR(t,e,n)}finally{ob=!1,(xd!==null||Sd!==null)&&(GR(),HR())}}function xp(t,e){var n=t.stateNode;if(n===null)return null;var r=U0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(re(231,e,typeof n));return n}var LE=!1;if(Ho)try{var Hh={};Object.defineProperty(Hh,"passive",{get:function(){LE=!0}}),window.addEventListener("test",Hh,Hh),window.removeEventListener("test",Hh,Hh)}catch{LE=!1}function dM(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var Hf=!1,vw=null,bw=!1,ME=null,hM={onError:function(t){Hf=!0,vw=t}};function fM(t,e,n,r,s,i,o,a,c){Hf=!1,vw=null,dM.apply(hM,arguments)}function pM(t,e,n,r,s,i,o,a,c){if(fM.apply(this,arguments),Hf){if(Hf){var l=vw;Hf=!1,vw=null}else throw Error(re(198));bw||(bw=!0,ME=l)}}function fu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function YR(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function WI(t){if(fu(t)!==t)throw Error(re(188))}function gM(t){var e=t.alternate;if(!e){if(e=fu(t),e===null)throw Error(re(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return WI(s),t;if(i===r)return WI(s),e;i=i.sibling}throw Error(re(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(re(189))}}if(n.alternate!==r)throw Error(re(190))}if(n.tag!==3)throw Error(re(188));return n.stateNode.current===n?t:e}function JR(t){return t=gM(t),t!==null?QR(t):null}function QR(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=QR(t);if(e!==null)return e;t=t.sibling}return null}var ZR=Cs.unstable_scheduleCallback,qI=Cs.unstable_cancelCallback,mM=Cs.unstable_shouldYield,yM=Cs.unstable_requestPaint,cn=Cs.unstable_now,wM=Cs.unstable_getCurrentPriorityLevel,Gx=Cs.unstable_ImmediatePriority,XR=Cs.unstable_UserBlockingPriority,Ew=Cs.unstable_NormalPriority,vM=Cs.unstable_LowPriority,e3=Cs.unstable_IdlePriority,O0=null,Xi=null;function bM(t){if(Xi&&typeof Xi.onCommitFiberRoot=="function")try{Xi.onCommitFiberRoot(O0,t,void 0,(t.current.flags&128)===128)}catch{}}var Ci=Math.clz32?Math.clz32:CM,EM=Math.log,_M=Math.LN2;function CM(t){return t>>>=0,t===0?32:31-(EM(t)/_M|0)|0}var $m=64,Dm=4194304;function Nf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _w(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Nf(a):(i&=o,i!==0&&(r=Nf(i)))}else o=n&~s,o!==0?r=Nf(o):i!==0&&(r=Nf(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ci(e),s=1<<n,r|=t[n],e&=~s;return r}function xM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function SM(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ci(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=xM(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function BE(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function t3(){var t=$m;return $m<<=1,!($m&4194240)&&($m=64),t}function ab(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Gg(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ci(e),t[e]=n}function AM(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ci(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Kx(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ci(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Et=0;function n3(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var r3,Yx,s3,i3,o3,FE=!1,Um=[],cc=null,lc=null,uc=null,Sp=new Map,Ap=new Map,La=[],IM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function HI(t,e){switch(t){case"focusin":case"focusout":cc=null;break;case"dragenter":case"dragleave":lc=null;break;case"mouseover":case"mouseout":uc=null;break;case"pointerover":case"pointerout":Sp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ap.delete(e.pointerId)}}function Vh(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Yg(e),e!==null&&Yx(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function TM(t,e,n,r,s){switch(e){case"focusin":return cc=Vh(cc,t,e,n,r,s),!0;case"dragenter":return lc=Vh(lc,t,e,n,r,s),!0;case"mouseover":return uc=Vh(uc,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Sp.set(i,Vh(Sp.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ap.set(i,Vh(Ap.get(i)||null,t,e,n,r,s)),!0}return!1}function a3(t){var e=pl(t.target);if(e!==null){var n=fu(e);if(n!==null){if(e=n.tag,e===13){if(e=YR(n),e!==null){t.blockedOn=e,o3(t.priority,function(){s3(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zy(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=zE(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);UE=r,n.target.dispatchEvent(r),UE=null}else return e=Yg(n),e!==null&&Yx(e),t.blockedOn=n,!1;e.shift()}return!0}function VI(t,e,n){zy(t)&&n.delete(e)}function NM(){FE=!1,cc!==null&&zy(cc)&&(cc=null),lc!==null&&zy(lc)&&(lc=null),uc!==null&&zy(uc)&&(uc=null),Sp.forEach(VI),Ap.forEach(VI)}function Gh(t,e){t.blockedOn===e&&(t.blockedOn=null,FE||(FE=!0,Cs.unstable_scheduleCallback(Cs.unstable_NormalPriority,NM)))}function Ip(t){function e(s){return Gh(s,t)}if(0<Um.length){Gh(Um[0],t);for(var n=1;n<Um.length;n++){var r=Um[n];r.blockedOn===t&&(r.blockedOn=null)}}for(cc!==null&&Gh(cc,t),lc!==null&&Gh(lc,t),uc!==null&&Gh(uc,t),Sp.forEach(e),Ap.forEach(e),n=0;n<La.length;n++)r=La[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<La.length&&(n=La[0],n.blockedOn===null);)a3(n),n.blockedOn===null&&La.shift()}var Ad=ta.ReactCurrentBatchConfig,Cw=!0;function PM(t,e,n,r){var s=Et,i=Ad.transition;Ad.transition=null;try{Et=1,Jx(t,e,n,r)}finally{Et=s,Ad.transition=i}}function kM(t,e,n,r){var s=Et,i=Ad.transition;Ad.transition=null;try{Et=4,Jx(t,e,n,r)}finally{Et=s,Ad.transition=i}}function Jx(t,e,n,r){if(Cw){var s=zE(t,e,n,r);if(s===null)yb(t,e,r,xw,n),HI(t,r);else if(TM(s,t,e,n,r))r.stopPropagation();else if(HI(t,r),e&4&&-1<IM.indexOf(t)){for(;s!==null;){var i=Yg(s);if(i!==null&&r3(i),i=zE(t,e,n,r),i===null&&yb(t,e,r,xw,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else yb(t,e,r,null,n)}}var xw=null;function zE(t,e,n,r){if(xw=null,t=Vx(r),t=pl(t),t!==null)if(e=fu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=YR(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return xw=t,null}function c3(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wM()){case Gx:return 1;case XR:return 4;case Ew:case vM:return 16;case e3:return 536870912;default:return 16}default:return 16}}var ec=null,Qx=null,Wy=null;function l3(){if(Wy)return Wy;var t,e=Qx,n=e.length,r,s="value"in ec?ec.value:ec.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Wy=s.slice(t,1<r?1-r:void 0)}function qy(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jm(){return!0}function GI(){return!1}function As(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?jm:GI,this.isPropagationStopped=GI,this}return Qt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jm)},persist:function(){},isPersistent:jm}),e}var wh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zx=As(wh),Kg=Qt({},wh,{view:0,detail:0}),OM=As(Kg),cb,lb,Kh,R0=Qt({},Kg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Kh&&(Kh&&t.type==="mousemove"?(cb=t.screenX-Kh.screenX,lb=t.screenY-Kh.screenY):lb=cb=0,Kh=t),cb)},movementY:function(t){return"movementY"in t?t.movementY:lb}}),KI=As(R0),RM=Qt({},R0,{dataTransfer:0}),$M=As(RM),DM=Qt({},Kg,{relatedTarget:0}),ub=As(DM),UM=Qt({},wh,{animationName:0,elapsedTime:0,pseudoElement:0}),jM=As(UM),LM=Qt({},wh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),MM=As(LM),BM=Qt({},wh,{data:0}),YI=As(BM),FM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qM(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=WM[t])?!!e[t]:!1}function Xx(){return qM}var HM=Qt({},Kg,{key:function(t){if(t.key){var e=FM[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=qy(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xx,charCode:function(t){return t.type==="keypress"?qy(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qy(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),VM=As(HM),GM=Qt({},R0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),JI=As(GM),KM=Qt({},Kg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xx}),YM=As(KM),JM=Qt({},wh,{propertyName:0,elapsedTime:0,pseudoElement:0}),QM=As(JM),ZM=Qt({},R0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),XM=As(ZM),eB=[9,13,27,32],eS=Ho&&"CompositionEvent"in window,Vf=null;Ho&&"documentMode"in document&&(Vf=document.documentMode);var tB=Ho&&"TextEvent"in window&&!Vf,u3=Ho&&(!eS||Vf&&8<Vf&&11>=Vf),QI=" ",ZI=!1;function d3(t,e){switch(t){case"keyup":return eB.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function h3(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ud=!1;function nB(t,e){switch(t){case"compositionend":return h3(e);case"keypress":return e.which!==32?null:(ZI=!0,QI);case"textInput":return t=e.data,t===QI&&ZI?null:t;default:return null}}function rB(t,e){if(ud)return t==="compositionend"||!eS&&d3(t,e)?(t=l3(),Wy=Qx=ec=null,ud=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return u3&&e.locale!=="ko"?null:e.data;default:return null}}var sB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function XI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!sB[t.type]:e==="textarea"}function f3(t,e,n,r){qR(r),e=Sw(e,"onChange"),0<e.length&&(n=new Zx("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Gf=null,Tp=null;function iB(t){x3(t,0)}function $0(t){var e=fd(t);if(jR(e))return t}function oB(t,e){if(t==="change")return e}var p3=!1;if(Ho){var db;if(Ho){var hb="oninput"in document;if(!hb){var e2=document.createElement("div");e2.setAttribute("oninput","return;"),hb=typeof e2.oninput=="function"}db=hb}else db=!1;p3=db&&(!document.documentMode||9<document.documentMode)}function t2(){Gf&&(Gf.detachEvent("onpropertychange",g3),Tp=Gf=null)}function g3(t){if(t.propertyName==="value"&&$0(Tp)){var e=[];f3(e,Tp,t,Vx(t)),KR(iB,e)}}function aB(t,e,n){t==="focusin"?(t2(),Gf=e,Tp=n,Gf.attachEvent("onpropertychange",g3)):t==="focusout"&&t2()}function cB(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $0(Tp)}function lB(t,e){if(t==="click")return $0(e)}function uB(t,e){if(t==="input"||t==="change")return $0(e)}function dB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ti=typeof Object.is=="function"?Object.is:dB;function Np(t,e){if(Ti(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!xE.call(e,s)||!Ti(t[s],e[s]))return!1}return!0}function n2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function r2(t,e){var n=n2(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=n2(n)}}function m3(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?m3(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function y3(){for(var t=window,e=ww();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ww(t.document)}return e}function tS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hB(t){var e=y3(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&m3(n.ownerDocument.documentElement,n)){if(r!==null&&tS(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=r2(n,i);var o=r2(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fB=Ho&&"documentMode"in document&&11>=document.documentMode,dd=null,WE=null,Kf=null,qE=!1;function s2(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qE||dd==null||dd!==ww(r)||(r=dd,"selectionStart"in r&&tS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Kf&&Np(Kf,r)||(Kf=r,r=Sw(WE,"onSelect"),0<r.length&&(e=new Zx("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=dd)))}function Lm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var hd={animationend:Lm("Animation","AnimationEnd"),animationiteration:Lm("Animation","AnimationIteration"),animationstart:Lm("Animation","AnimationStart"),transitionend:Lm("Transition","TransitionEnd")},fb={},w3={};Ho&&(w3=document.createElement("div").style,"AnimationEvent"in window||(delete hd.animationend.animation,delete hd.animationiteration.animation,delete hd.animationstart.animation),"TransitionEvent"in window||delete hd.transitionend.transition);function D0(t){if(fb[t])return fb[t];if(!hd[t])return t;var e=hd[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in w3)return fb[t]=e[n];return t}var v3=D0("animationend"),b3=D0("animationiteration"),E3=D0("animationstart"),_3=D0("transitionend"),C3=new Map,i2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jc(t,e){C3.set(t,e),hu(e,[t])}for(var pb=0;pb<i2.length;pb++){var gb=i2[pb],pB=gb.toLowerCase(),gB=gb[0].toUpperCase()+gb.slice(1);jc(pB,"on"+gB)}jc(v3,"onAnimationEnd");jc(b3,"onAnimationIteration");jc(E3,"onAnimationStart");jc("dblclick","onDoubleClick");jc("focusin","onFocus");jc("focusout","onBlur");jc(_3,"onTransitionEnd");Yd("onMouseEnter",["mouseout","mouseover"]);Yd("onMouseLeave",["mouseout","mouseover"]);Yd("onPointerEnter",["pointerout","pointerover"]);Yd("onPointerLeave",["pointerout","pointerover"]);hu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hu("onBeforeInput",["compositionend","keypress","textInput","paste"]);hu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mB=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pf));function o2(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,pM(r,e,void 0,t),t.currentTarget=null}function x3(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;o2(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;o2(s,a,l),i=c}}}if(bw)throw t=ME,bw=!1,ME=null,t}function Bt(t,e){var n=e[YE];n===void 0&&(n=e[YE]=new Set);var r=t+"__bubble";n.has(r)||(S3(e,t,2,!1),n.add(r))}function mb(t,e,n){var r=0;e&&(r|=4),S3(n,t,r,e)}var Mm="_reactListening"+Math.random().toString(36).slice(2);function Pp(t){if(!t[Mm]){t[Mm]=!0,OR.forEach(function(n){n!=="selectionchange"&&(mB.has(n)||mb(n,!1,t),mb(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Mm]||(e[Mm]=!0,mb("selectionchange",!1,e))}}function S3(t,e,n,r){switch(c3(e)){case 1:var s=PM;break;case 4:s=kM;break;default:s=Jx}n=s.bind(null,e,n,t),s=void 0,!LE||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function yb(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=pl(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}KR(function(){var l=i,u=Vx(n),d=[];e:{var h=C3.get(t);if(h!==void 0){var f=Zx,p=t;switch(t){case"keypress":if(qy(n)===0)break e;case"keydown":case"keyup":f=VM;break;case"focusin":p="focus",f=ub;break;case"focusout":p="blur",f=ub;break;case"beforeblur":case"afterblur":f=ub;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=KI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=$M;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=YM;break;case v3:case b3:case E3:f=jM;break;case _3:f=QM;break;case"scroll":f=OM;break;case"wheel":f=XM;break;case"copy":case"cut":case"paste":f=MM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=JI}var g=(e&4)!==0,w=!g&&t==="scroll",y=g?h!==null?h+"Capture":null:h;g=[];for(var b=l,v;b!==null;){v=b;var _=v.stateNode;if(v.tag===5&&_!==null&&(v=_,y!==null&&(_=xp(b,y),_!=null&&g.push(kp(b,_,v)))),w)break;b=b.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==UE&&(p=n.relatedTarget||n.fromElement)&&(pl(p)||p[Vo]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?pl(p):null,p!==null&&(w=fu(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=KI,_="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=JI,_="onPointerLeave",y="onPointerEnter",b="pointer"),w=f==null?h:fd(f),v=p==null?h:fd(p),h=new g(_,b+"leave",f,n,u),h.target=w,h.relatedTarget=v,_=null,pl(u)===l&&(g=new g(y,b+"enter",p,n,u),g.target=v,g.relatedTarget=w,_=g),w=_,f&&p)t:{for(g=f,y=p,b=0,v=g;v;v=Iu(v))b++;for(v=0,_=y;_;_=Iu(_))v++;for(;0<b-v;)g=Iu(g),b--;for(;0<v-b;)y=Iu(y),v--;for(;b--;){if(g===y||y!==null&&g===y.alternate)break t;g=Iu(g),y=Iu(y)}g=null}else g=null;f!==null&&a2(d,h,f,g,!1),p!==null&&w!==null&&a2(d,w,p,g,!0)}}e:{if(h=l?fd(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var E=oB;else if(XI(h))if(p3)E=uB;else{E=cB;var x=aB}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(E=lB);if(E&&(E=E(t,l))){f3(d,E,n,u);break e}x&&x(t,h,l),t==="focusout"&&(x=h._wrapperState)&&x.controlled&&h.type==="number"&&kE(h,"number",h.value)}switch(x=l?fd(l):window,t){case"focusin":(XI(x)||x.contentEditable==="true")&&(dd=x,WE=l,Kf=null);break;case"focusout":Kf=WE=dd=null;break;case"mousedown":qE=!0;break;case"contextmenu":case"mouseup":case"dragend":qE=!1,s2(d,n,u);break;case"selectionchange":if(fB)break;case"keydown":case"keyup":s2(d,n,u)}var S;if(eS)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ud?d3(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(u3&&n.locale!=="ko"&&(ud||T!=="onCompositionStart"?T==="onCompositionEnd"&&ud&&(S=l3()):(ec=u,Qx="value"in ec?ec.value:ec.textContent,ud=!0)),x=Sw(l,T),0<x.length&&(T=new YI(T,t,null,n,u),d.push({event:T,listeners:x}),S?T.data=S:(S=h3(n),S!==null&&(T.data=S)))),(S=tB?nB(t,n):rB(t,n))&&(l=Sw(l,"onBeforeInput"),0<l.length&&(u=new YI("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=S))}x3(d,e)})}function kp(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sw(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=xp(t,n),i!=null&&r.unshift(kp(t,i,s)),i=xp(t,e),i!=null&&r.push(kp(t,i,s))),t=t.return}return r}function Iu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function a2(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=xp(n,i),c!=null&&o.unshift(kp(n,c,a))):s||(c=xp(n,i),c!=null&&o.push(kp(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var yB=/\r\n?/g,wB=/\u0000|\uFFFD/g;function c2(t){return(typeof t=="string"?t:""+t).replace(yB,`
`).replace(wB,"")}function Bm(t,e,n){if(e=c2(e),c2(t)!==e&&n)throw Error(re(425))}function Aw(){}var HE=null,VE=null;function GE(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var KE=typeof setTimeout=="function"?setTimeout:void 0,vB=typeof clearTimeout=="function"?clearTimeout:void 0,l2=typeof Promise=="function"?Promise:void 0,bB=typeof queueMicrotask=="function"?queueMicrotask:typeof l2<"u"?function(t){return l2.resolve(null).then(t).catch(EB)}:KE;function EB(t){setTimeout(function(){throw t})}function wb(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ip(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ip(e)}function dc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function u2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var vh=Math.random().toString(36).slice(2),Ji="__reactFiber$"+vh,Op="__reactProps$"+vh,Vo="__reactContainer$"+vh,YE="__reactEvents$"+vh,_B="__reactListeners$"+vh,CB="__reactHandles$"+vh;function pl(t){var e=t[Ji];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vo]||n[Ji]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=u2(t);t!==null;){if(n=t[Ji])return n;t=u2(t)}return e}t=n,n=t.parentNode}return null}function Yg(t){return t=t[Ji]||t[Vo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(re(33))}function U0(t){return t[Op]||null}var JE=[],pd=-1;function Lc(t){return{current:t}}function Wt(t){0>pd||(t.current=JE[pd],JE[pd]=null,pd--)}function Rt(t,e){pd++,JE[pd]=t.current,t.current=e}var Ic={},fr=Lc(Ic),es=Lc(!1),zl=Ic;function Jd(t,e){var n=t.type.contextTypes;if(!n)return Ic;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ts(t){return t=t.childContextTypes,t!=null}function Iw(){Wt(es),Wt(fr)}function d2(t,e,n){if(fr.current!==Ic)throw Error(re(168));Rt(fr,e),Rt(es,n)}function A3(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(re(108,aM(t)||"Unknown",s));return Qt({},n,r)}function Tw(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ic,zl=fr.current,Rt(fr,t),Rt(es,es.current),!0}function h2(t,e,n){var r=t.stateNode;if(!r)throw Error(re(169));n?(t=A3(t,e,zl),r.__reactInternalMemoizedMergedChildContext=t,Wt(es),Wt(fr),Rt(fr,t)):Wt(es),Rt(es,n)}var No=null,j0=!1,vb=!1;function I3(t){No===null?No=[t]:No.push(t)}function xB(t){j0=!0,I3(t)}function Mc(){if(!vb&&No!==null){vb=!0;var t=0,e=Et;try{var n=No;for(Et=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}No=null,j0=!1}catch(s){throw No!==null&&(No=No.slice(t+1)),ZR(Gx,Mc),s}finally{Et=e,vb=!1}}return null}var gd=[],md=0,Nw=null,Pw=0,Fs=[],zs=0,Wl=null,Uo=1,jo="";function sl(t,e){gd[md++]=Pw,gd[md++]=Nw,Nw=t,Pw=e}function T3(t,e,n){Fs[zs++]=Uo,Fs[zs++]=jo,Fs[zs++]=Wl,Wl=t;var r=Uo;t=jo;var s=32-Ci(r)-1;r&=~(1<<s),n+=1;var i=32-Ci(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Uo=1<<32-Ci(e)+s|n<<s|r,jo=i+t}else Uo=1<<i|n<<s|r,jo=t}function nS(t){t.return!==null&&(sl(t,1),T3(t,1,0))}function rS(t){for(;t===Nw;)Nw=gd[--md],gd[md]=null,Pw=gd[--md],gd[md]=null;for(;t===Wl;)Wl=Fs[--zs],Fs[zs]=null,jo=Fs[--zs],Fs[zs]=null,Uo=Fs[--zs],Fs[zs]=null}var bs=null,ys=null,Ht=!1,mi=null;function N3(t,e){var n=Ws(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function f2(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bs=t,ys=dc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bs=t,ys=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Wl!==null?{id:Uo,overflow:jo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ws(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,bs=t,ys=null,!0):!1;default:return!1}}function QE(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ZE(t){if(Ht){var e=ys;if(e){var n=e;if(!f2(t,e)){if(QE(t))throw Error(re(418));e=dc(n.nextSibling);var r=bs;e&&f2(t,e)?N3(r,n):(t.flags=t.flags&-4097|2,Ht=!1,bs=t)}}else{if(QE(t))throw Error(re(418));t.flags=t.flags&-4097|2,Ht=!1,bs=t}}}function p2(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bs=t}function Fm(t){if(t!==bs)return!1;if(!Ht)return p2(t),Ht=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!GE(t.type,t.memoizedProps)),e&&(e=ys)){if(QE(t))throw P3(),Error(re(418));for(;e;)N3(t,e),e=dc(e.nextSibling)}if(p2(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(re(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ys=dc(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ys=null}}else ys=bs?dc(t.stateNode.nextSibling):null;return!0}function P3(){for(var t=ys;t;)t=dc(t.nextSibling)}function Qd(){ys=bs=null,Ht=!1}function sS(t){mi===null?mi=[t]:mi.push(t)}var SB=ta.ReactCurrentBatchConfig;function Yh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(re(309));var r=n.stateNode}if(!r)throw Error(re(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(re(284));if(!n._owner)throw Error(re(290,t))}return t}function zm(t,e){throw t=Object.prototype.toString.call(e),Error(re(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function g2(t){var e=t._init;return e(t._payload)}function k3(t){function e(y,b){if(t){var v=y.deletions;v===null?(y.deletions=[b],y.flags|=16):v.push(b)}}function n(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function s(y,b){return y=gc(y,b),y.index=0,y.sibling=null,y}function i(y,b,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<b?(y.flags|=2,b):v):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,v,_){return b===null||b.tag!==6?(b=Ab(v,y.mode,_),b.return=y,b):(b=s(b,v),b.return=y,b)}function c(y,b,v,_){var E=v.type;return E===ld?u(y,b,v.props.children,_,v.key):b!==null&&(b.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Na&&g2(E)===b.type)?(_=s(b,v.props),_.ref=Yh(y,b,v),_.return=y,_):(_=Qy(v.type,v.key,v.props,null,y.mode,_),_.ref=Yh(y,b,v),_.return=y,_)}function l(y,b,v,_){return b===null||b.tag!==4||b.stateNode.containerInfo!==v.containerInfo||b.stateNode.implementation!==v.implementation?(b=Ib(v,y.mode,_),b.return=y,b):(b=s(b,v.children||[]),b.return=y,b)}function u(y,b,v,_,E){return b===null||b.tag!==7?(b=Ul(v,y.mode,_,E),b.return=y,b):(b=s(b,v),b.return=y,b)}function d(y,b,v){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Ab(""+b,y.mode,v),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case km:return v=Qy(b.type,b.key,b.props,null,y.mode,v),v.ref=Yh(y,null,b),v.return=y,v;case cd:return b=Ib(b,y.mode,v),b.return=y,b;case Na:var _=b._init;return d(y,_(b._payload),v)}if(Tf(b)||qh(b))return b=Ul(b,y.mode,v,null),b.return=y,b;zm(y,b)}return null}function h(y,b,v,_){var E=b!==null?b.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return E!==null?null:a(y,b,""+v,_);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case km:return v.key===E?c(y,b,v,_):null;case cd:return v.key===E?l(y,b,v,_):null;case Na:return E=v._init,h(y,b,E(v._payload),_)}if(Tf(v)||qh(v))return E!==null?null:u(y,b,v,_,null);zm(y,v)}return null}function f(y,b,v,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(v)||null,a(b,y,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case km:return y=y.get(_.key===null?v:_.key)||null,c(b,y,_,E);case cd:return y=y.get(_.key===null?v:_.key)||null,l(b,y,_,E);case Na:var x=_._init;return f(y,b,v,x(_._payload),E)}if(Tf(_)||qh(_))return y=y.get(v)||null,u(b,y,_,E,null);zm(b,_)}return null}function p(y,b,v,_){for(var E=null,x=null,S=b,T=b=0,C=null;S!==null&&T<v.length;T++){S.index>T?(C=S,S=null):C=S.sibling;var O=h(y,S,v[T],_);if(O===null){S===null&&(S=C);break}t&&S&&O.alternate===null&&e(y,S),b=i(O,b,T),x===null?E=O:x.sibling=O,x=O,S=C}if(T===v.length)return n(y,S),Ht&&sl(y,T),E;if(S===null){for(;T<v.length;T++)S=d(y,v[T],_),S!==null&&(b=i(S,b,T),x===null?E=S:x.sibling=S,x=S);return Ht&&sl(y,T),E}for(S=r(y,S);T<v.length;T++)C=f(S,y,T,v[T],_),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?T:C.key),b=i(C,b,T),x===null?E=C:x.sibling=C,x=C);return t&&S.forEach(function(R){return e(y,R)}),Ht&&sl(y,T),E}function g(y,b,v,_){var E=qh(v);if(typeof E!="function")throw Error(re(150));if(v=E.call(v),v==null)throw Error(re(151));for(var x=E=null,S=b,T=b=0,C=null,O=v.next();S!==null&&!O.done;T++,O=v.next()){S.index>T?(C=S,S=null):C=S.sibling;var R=h(y,S,O.value,_);if(R===null){S===null&&(S=C);break}t&&S&&R.alternate===null&&e(y,S),b=i(R,b,T),x===null?E=R:x.sibling=R,x=R,S=C}if(O.done)return n(y,S),Ht&&sl(y,T),E;if(S===null){for(;!O.done;T++,O=v.next())O=d(y,O.value,_),O!==null&&(b=i(O,b,T),x===null?E=O:x.sibling=O,x=O);return Ht&&sl(y,T),E}for(S=r(y,S);!O.done;T++,O=v.next())O=f(S,y,T,O.value,_),O!==null&&(t&&O.alternate!==null&&S.delete(O.key===null?T:O.key),b=i(O,b,T),x===null?E=O:x.sibling=O,x=O);return t&&S.forEach(function(F){return e(y,F)}),Ht&&sl(y,T),E}function w(y,b,v,_){if(typeof v=="object"&&v!==null&&v.type===ld&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case km:e:{for(var E=v.key,x=b;x!==null;){if(x.key===E){if(E=v.type,E===ld){if(x.tag===7){n(y,x.sibling),b=s(x,v.props.children),b.return=y,y=b;break e}}else if(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Na&&g2(E)===x.type){n(y,x.sibling),b=s(x,v.props),b.ref=Yh(y,x,v),b.return=y,y=b;break e}n(y,x);break}else e(y,x);x=x.sibling}v.type===ld?(b=Ul(v.props.children,y.mode,_,v.key),b.return=y,y=b):(_=Qy(v.type,v.key,v.props,null,y.mode,_),_.ref=Yh(y,b,v),_.return=y,y=_)}return o(y);case cd:e:{for(x=v.key;b!==null;){if(b.key===x)if(b.tag===4&&b.stateNode.containerInfo===v.containerInfo&&b.stateNode.implementation===v.implementation){n(y,b.sibling),b=s(b,v.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else e(y,b);b=b.sibling}b=Ib(v,y.mode,_),b.return=y,y=b}return o(y);case Na:return x=v._init,w(y,b,x(v._payload),_)}if(Tf(v))return p(y,b,v,_);if(qh(v))return g(y,b,v,_);zm(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,b!==null&&b.tag===6?(n(y,b.sibling),b=s(b,v),b.return=y,y=b):(n(y,b),b=Ab(v,y.mode,_),b.return=y,y=b),o(y)):n(y,b)}return w}var Zd=k3(!0),O3=k3(!1),kw=Lc(null),Ow=null,yd=null,iS=null;function oS(){iS=yd=Ow=null}function aS(t){var e=kw.current;Wt(kw),t._currentValue=e}function XE(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Id(t,e){Ow=t,iS=yd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zr=!0),t.firstContext=null)}function Vs(t){var e=t._currentValue;if(iS!==t)if(t={context:t,memoizedValue:e,next:null},yd===null){if(Ow===null)throw Error(re(308));yd=t,Ow.dependencies={lanes:0,firstContext:t}}else yd=yd.next=t;return e}var gl=null;function cS(t){gl===null?gl=[t]:gl.push(t)}function R3(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,cS(e)):(n.next=s.next,s.next=n),e.interleaved=n,Go(t,r)}function Go(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Pa=!1;function lS(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $3(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hc(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,st&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Go(t,n)}return s=r.interleaved,s===null?(e.next=e,cS(r)):(e.next=s.next,s.next=e),r.interleaved=e,Go(t,n)}function Hy(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Kx(t,n)}}function m2(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Rw(t,e,n,r){var s=t.updateQueue;Pa=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Qt({},d,h);break e;case 2:Pa=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Hl|=o,t.lanes=o,t.memoizedState=d}}function y2(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(re(191,s));s.call(r)}}}var Jg={},eo=Lc(Jg),Rp=Lc(Jg),$p=Lc(Jg);function ml(t){if(t===Jg)throw Error(re(174));return t}function uS(t,e){switch(Rt($p,e),Rt(Rp,t),Rt(eo,Jg),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:RE(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=RE(e,t)}Wt(eo),Rt(eo,e)}function Xd(){Wt(eo),Wt(Rp),Wt($p)}function D3(t){ml($p.current);var e=ml(eo.current),n=RE(e,t.type);e!==n&&(Rt(Rp,t),Rt(eo,n))}function dS(t){Rp.current===t&&(Wt(eo),Wt(Rp))}var Kt=Lc(0);function $w(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var bb=[];function hS(){for(var t=0;t<bb.length;t++)bb[t]._workInProgressVersionPrimary=null;bb.length=0}var Vy=ta.ReactCurrentDispatcher,Eb=ta.ReactCurrentBatchConfig,ql=0,Jt=null,bn=null,Pn=null,Dw=!1,Yf=!1,Dp=0,AB=0;function tr(){throw Error(re(321))}function fS(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ti(t[n],e[n]))return!1;return!0}function pS(t,e,n,r,s,i){if(ql=i,Jt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vy.current=t===null||t.memoizedState===null?PB:kB,t=n(r,s),Yf){i=0;do{if(Yf=!1,Dp=0,25<=i)throw Error(re(301));i+=1,Pn=bn=null,e.updateQueue=null,Vy.current=OB,t=n(r,s)}while(Yf)}if(Vy.current=Uw,e=bn!==null&&bn.next!==null,ql=0,Pn=bn=Jt=null,Dw=!1,e)throw Error(re(300));return t}function gS(){var t=Dp!==0;return Dp=0,t}function Fi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?Jt.memoizedState=Pn=t:Pn=Pn.next=t,Pn}function Gs(){if(bn===null){var t=Jt.alternate;t=t!==null?t.memoizedState:null}else t=bn.next;var e=Pn===null?Jt.memoizedState:Pn.next;if(e!==null)Pn=e,bn=t;else{if(t===null)throw Error(re(310));bn=t,t={memoizedState:bn.memoizedState,baseState:bn.baseState,baseQueue:bn.baseQueue,queue:bn.queue,next:null},Pn===null?Jt.memoizedState=Pn=t:Pn=Pn.next=t}return Pn}function Up(t,e){return typeof e=="function"?e(t):e}function _b(t){var e=Gs(),n=e.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=t;var r=bn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((ql&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,Jt.lanes|=u,Hl|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,Ti(r,e.memoizedState)||(Zr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Jt.lanes|=i,Hl|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Cb(t){var e=Gs(),n=e.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Ti(i,e.memoizedState)||(Zr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function U3(){}function j3(t,e){var n=Jt,r=Gs(),s=e(),i=!Ti(r.memoizedState,s);if(i&&(r.memoizedState=s,Zr=!0),r=r.queue,mS(B3.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Pn!==null&&Pn.memoizedState.tag&1){if(n.flags|=2048,jp(9,M3.bind(null,n,r,s,e),void 0,null),$n===null)throw Error(re(349));ql&30||L3(n,e,s)}return s}function L3(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Jt.updateQueue,e===null?(e={lastEffect:null,stores:null},Jt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function M3(t,e,n,r){e.value=n,e.getSnapshot=r,F3(e)&&z3(t)}function B3(t,e,n){return n(function(){F3(e)&&z3(t)})}function F3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ti(t,n)}catch{return!0}}function z3(t){var e=Go(t,1);e!==null&&xi(e,t,1,-1)}function w2(t){var e=Fi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Up,lastRenderedState:t},e.queue=t,t=t.dispatch=NB.bind(null,Jt,t),[e.memoizedState,t]}function jp(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Jt.updateQueue,e===null?(e={lastEffect:null,stores:null},Jt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function W3(){return Gs().memoizedState}function Gy(t,e,n,r){var s=Fi();Jt.flags|=t,s.memoizedState=jp(1|e,n,void 0,r===void 0?null:r)}function L0(t,e,n,r){var s=Gs();r=r===void 0?null:r;var i=void 0;if(bn!==null){var o=bn.memoizedState;if(i=o.destroy,r!==null&&fS(r,o.deps)){s.memoizedState=jp(e,n,i,r);return}}Jt.flags|=t,s.memoizedState=jp(1|e,n,i,r)}function v2(t,e){return Gy(8390656,8,t,e)}function mS(t,e){return L0(2048,8,t,e)}function q3(t,e){return L0(4,2,t,e)}function H3(t,e){return L0(4,4,t,e)}function V3(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function G3(t,e,n){return n=n!=null?n.concat([t]):null,L0(4,4,V3.bind(null,e,t),n)}function yS(){}function K3(t,e){var n=Gs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fS(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Y3(t,e){var n=Gs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fS(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function J3(t,e,n){return ql&21?(Ti(n,e)||(n=t3(),Jt.lanes|=n,Hl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zr=!0),t.memoizedState=n)}function IB(t,e){var n=Et;Et=n!==0&&4>n?n:4,t(!0);var r=Eb.transition;Eb.transition={};try{t(!1),e()}finally{Et=n,Eb.transition=r}}function Q3(){return Gs().memoizedState}function TB(t,e,n){var r=pc(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Z3(t))X3(e,n);else if(n=R3(t,e,n,r),n!==null){var s=xr();xi(n,t,r,s),e$(n,e,r)}}function NB(t,e,n){var r=pc(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Z3(t))X3(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Ti(a,o)){var c=e.interleaved;c===null?(s.next=s,cS(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=R3(t,e,s,r),n!==null&&(s=xr(),xi(n,t,r,s),e$(n,e,r))}}function Z3(t){var e=t.alternate;return t===Jt||e!==null&&e===Jt}function X3(t,e){Yf=Dw=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function e$(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Kx(t,n)}}var Uw={readContext:Vs,useCallback:tr,useContext:tr,useEffect:tr,useImperativeHandle:tr,useInsertionEffect:tr,useLayoutEffect:tr,useMemo:tr,useReducer:tr,useRef:tr,useState:tr,useDebugValue:tr,useDeferredValue:tr,useTransition:tr,useMutableSource:tr,useSyncExternalStore:tr,useId:tr,unstable_isNewReconciler:!1},PB={readContext:Vs,useCallback:function(t,e){return Fi().memoizedState=[t,e===void 0?null:e],t},useContext:Vs,useEffect:v2,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Gy(4194308,4,V3.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Gy(4194308,4,t,e)},useInsertionEffect:function(t,e){return Gy(4,2,t,e)},useMemo:function(t,e){var n=Fi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Fi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=TB.bind(null,Jt,t),[r.memoizedState,t]},useRef:function(t){var e=Fi();return t={current:t},e.memoizedState=t},useState:w2,useDebugValue:yS,useDeferredValue:function(t){return Fi().memoizedState=t},useTransition:function(){var t=w2(!1),e=t[0];return t=IB.bind(null,t[1]),Fi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Jt,s=Fi();if(Ht){if(n===void 0)throw Error(re(407));n=n()}else{if(n=e(),$n===null)throw Error(re(349));ql&30||L3(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,v2(B3.bind(null,r,i,t),[t]),r.flags|=2048,jp(9,M3.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Fi(),e=$n.identifierPrefix;if(Ht){var n=jo,r=Uo;n=(r&~(1<<32-Ci(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Dp++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=AB++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},kB={readContext:Vs,useCallback:K3,useContext:Vs,useEffect:mS,useImperativeHandle:G3,useInsertionEffect:q3,useLayoutEffect:H3,useMemo:Y3,useReducer:_b,useRef:W3,useState:function(){return _b(Up)},useDebugValue:yS,useDeferredValue:function(t){var e=Gs();return J3(e,bn.memoizedState,t)},useTransition:function(){var t=_b(Up)[0],e=Gs().memoizedState;return[t,e]},useMutableSource:U3,useSyncExternalStore:j3,useId:Q3,unstable_isNewReconciler:!1},OB={readContext:Vs,useCallback:K3,useContext:Vs,useEffect:mS,useImperativeHandle:G3,useInsertionEffect:q3,useLayoutEffect:H3,useMemo:Y3,useReducer:Cb,useRef:W3,useState:function(){return Cb(Up)},useDebugValue:yS,useDeferredValue:function(t){var e=Gs();return bn===null?e.memoizedState=t:J3(e,bn.memoizedState,t)},useTransition:function(){var t=Cb(Up)[0],e=Gs().memoizedState;return[t,e]},useMutableSource:U3,useSyncExternalStore:j3,useId:Q3,unstable_isNewReconciler:!1};function di(t,e){if(t&&t.defaultProps){e=Qt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function e_(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Qt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var M0={isMounted:function(t){return(t=t._reactInternals)?fu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xr(),s=pc(t),i=Mo(r,s);i.payload=e,n!=null&&(i.callback=n),e=hc(t,i,s),e!==null&&(xi(e,t,s,r),Hy(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xr(),s=pc(t),i=Mo(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=hc(t,i,s),e!==null&&(xi(e,t,s,r),Hy(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xr(),r=pc(t),s=Mo(n,r);s.tag=2,e!=null&&(s.callback=e),e=hc(t,s,r),e!==null&&(xi(e,t,r,n),Hy(e,t,r))}};function b2(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Np(n,r)||!Np(s,i):!0}function t$(t,e,n){var r=!1,s=Ic,i=e.contextType;return typeof i=="object"&&i!==null?i=Vs(i):(s=ts(e)?zl:fr.current,r=e.contextTypes,i=(r=r!=null)?Jd(t,s):Ic),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=M0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function E2(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&M0.enqueueReplaceState(e,e.state,null)}function t_(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},lS(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Vs(i):(i=ts(e)?zl:fr.current,s.context=Jd(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(e_(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&M0.enqueueReplaceState(s,s.state,null),Rw(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function eh(t,e){try{var n="",r=e;do n+=oM(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function xb(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function n_(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var RB=typeof WeakMap=="function"?WeakMap:Map;function n$(t,e,n){n=Mo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Lw||(Lw=!0,h_=r),n_(t,e)},n}function r$(t,e,n){n=Mo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){n_(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){n_(t,e),typeof r!="function"&&(fc===null?fc=new Set([this]):fc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function _2(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new RB;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=GB.bind(null,t,e,n),e.then(t,t))}function C2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function x2(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mo(-1,1),e.tag=2,hc(n,e,1))),n.lanes|=1),t)}var $B=ta.ReactCurrentOwner,Zr=!1;function Er(t,e,n,r){e.child=t===null?O3(e,null,n,r):Zd(e,t.child,n,r)}function S2(t,e,n,r,s){n=n.render;var i=e.ref;return Id(e,s),r=pS(t,e,n,r,i,s),n=gS(),t!==null&&!Zr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ko(t,e,s)):(Ht&&n&&nS(e),e.flags|=1,Er(t,e,r,s),e.child)}function A2(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!SS(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,s$(t,e,i,r,s)):(t=Qy(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Np,n(o,r)&&t.ref===e.ref)return Ko(t,e,s)}return e.flags|=1,t=gc(i,r),t.ref=e.ref,t.return=e,e.child=t}function s$(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Np(i,r)&&t.ref===e.ref)if(Zr=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Zr=!0);else return e.lanes=t.lanes,Ko(t,e,s)}return r_(t,e,n,r,s)}function i$(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rt(vd,fs),fs|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Rt(vd,fs),fs|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Rt(vd,fs),fs|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Rt(vd,fs),fs|=r;return Er(t,e,s,n),e.child}function o$(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function r_(t,e,n,r,s){var i=ts(n)?zl:fr.current;return i=Jd(e,i),Id(e,s),n=pS(t,e,n,r,i,s),r=gS(),t!==null&&!Zr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ko(t,e,s)):(Ht&&r&&nS(e),e.flags|=1,Er(t,e,n,s),e.child)}function I2(t,e,n,r,s){if(ts(n)){var i=!0;Tw(e)}else i=!1;if(Id(e,s),e.stateNode===null)Ky(t,e),t$(e,n,r),t_(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Vs(l):(l=ts(n)?zl:fr.current,l=Jd(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&E2(e,o,r,l),Pa=!1;var h=e.memoizedState;o.state=h,Rw(e,r,o,s),c=e.memoizedState,a!==r||h!==c||es.current||Pa?(typeof u=="function"&&(e_(e,n,u,r),c=e.memoizedState),(a=Pa||b2(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,$3(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:di(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Vs(c):(c=ts(n)?zl:fr.current,c=Jd(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&E2(e,o,r,c),Pa=!1,h=e.memoizedState,o.state=h,Rw(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||es.current||Pa?(typeof f=="function"&&(e_(e,n,f,r),p=e.memoizedState),(l=Pa||b2(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return s_(t,e,n,r,i,s)}function s_(t,e,n,r,s,i){o$(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&h2(e,n,!1),Ko(t,e,i);r=e.stateNode,$B.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Zd(e,t.child,null,i),e.child=Zd(e,null,a,i)):Er(t,e,a,i),e.memoizedState=r.state,s&&h2(e,n,!0),e.child}function a$(t){var e=t.stateNode;e.pendingContext?d2(t,e.pendingContext,e.pendingContext!==e.context):e.context&&d2(t,e.context,!1),uS(t,e.containerInfo)}function T2(t,e,n,r,s){return Qd(),sS(s),e.flags|=256,Er(t,e,n,r),e.child}var i_={dehydrated:null,treeContext:null,retryLane:0};function o_(t){return{baseLanes:t,cachePool:null,transitions:null}}function c$(t,e,n){var r=e.pendingProps,s=Kt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Rt(Kt,s&1),t===null)return ZE(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=z0(o,r,0,null),t=Ul(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=o_(n),e.memoizedState=i_,t):wS(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return DB(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=gc(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=gc(a,i):(i=Ul(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?o_(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=i_,r}return i=t.child,t=i.sibling,r=gc(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function wS(t,e){return e=z0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wm(t,e,n,r){return r!==null&&sS(r),Zd(e,t.child,null,n),t=wS(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function DB(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=xb(Error(re(422))),Wm(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=z0({mode:"visible",children:r.children},s,0,null),i=Ul(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Zd(e,t.child,null,o),e.child.memoizedState=o_(o),e.memoizedState=i_,i);if(!(e.mode&1))return Wm(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(re(419)),r=xb(i,r,void 0),Wm(t,e,o,r)}if(a=(o&t.childLanes)!==0,Zr||a){if(r=$n,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Go(t,s),xi(r,t,s,-1))}return xS(),r=xb(Error(re(421))),Wm(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=KB.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,ys=dc(s.nextSibling),bs=e,Ht=!0,mi=null,t!==null&&(Fs[zs++]=Uo,Fs[zs++]=jo,Fs[zs++]=Wl,Uo=t.id,jo=t.overflow,Wl=e),e=wS(e,r.children),e.flags|=4096,e)}function N2(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),XE(t.return,e,n)}function Sb(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function l$(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Er(t,e,r.children,n),r=Kt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&N2(t,n,e);else if(t.tag===19)N2(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Rt(Kt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&$w(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Sb(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&$w(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Sb(e,!0,n,null,i);break;case"together":Sb(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ky(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ko(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Hl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(re(153));if(e.child!==null){for(t=e.child,n=gc(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gc(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function UB(t,e,n){switch(e.tag){case 3:a$(e),Qd();break;case 5:D3(e);break;case 1:ts(e.type)&&Tw(e);break;case 4:uS(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Rt(kw,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Rt(Kt,Kt.current&1),e.flags|=128,null):n&e.child.childLanes?c$(t,e,n):(Rt(Kt,Kt.current&1),t=Ko(t,e,n),t!==null?t.sibling:null);Rt(Kt,Kt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return l$(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Rt(Kt,Kt.current),r)break;return null;case 22:case 23:return e.lanes=0,i$(t,e,n)}return Ko(t,e,n)}var u$,a_,d$,h$;u$=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};a_=function(){};d$=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ml(eo.current);var i=null;switch(n){case"input":s=NE(t,s),r=NE(t,r),i=[];break;case"select":s=Qt({},s,{value:void 0}),r=Qt({},r,{value:void 0}),i=[];break;case"textarea":s=OE(t,s),r=OE(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Aw)}$E(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(_p.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(_p.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Bt("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};h$=function(t,e,n,r){n!==r&&(e.flags|=4)};function Jh(t,e){if(!Ht)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function nr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function jB(t,e,n){var r=e.pendingProps;switch(rS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nr(e),null;case 1:return ts(e.type)&&Iw(),nr(e),null;case 3:return r=e.stateNode,Xd(),Wt(es),Wt(fr),hS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Fm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mi!==null&&(g_(mi),mi=null))),a_(t,e),nr(e),null;case 5:dS(e);var s=ml($p.current);if(n=e.type,t!==null&&e.stateNode!=null)d$(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(re(166));return nr(e),null}if(t=ml(eo.current),Fm(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Ji]=e,r[Op]=i,t=(e.mode&1)!==0,n){case"dialog":Bt("cancel",r),Bt("close",r);break;case"iframe":case"object":case"embed":Bt("load",r);break;case"video":case"audio":for(s=0;s<Pf.length;s++)Bt(Pf[s],r);break;case"source":Bt("error",r);break;case"img":case"image":case"link":Bt("error",r),Bt("load",r);break;case"details":Bt("toggle",r);break;case"input":LI(r,i),Bt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Bt("invalid",r);break;case"textarea":BI(r,i),Bt("invalid",r)}$E(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Bm(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Bm(r.textContent,a,t),s=["children",""+a]):_p.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Bt("scroll",r)}switch(n){case"input":Om(r),MI(r,i,!0);break;case"textarea":Om(r),FI(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Aw)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=BR(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ji]=e,t[Op]=r,u$(t,e,!1,!1),e.stateNode=t;e:{switch(o=DE(n,r),n){case"dialog":Bt("cancel",t),Bt("close",t),s=r;break;case"iframe":case"object":case"embed":Bt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Pf.length;s++)Bt(Pf[s],t);s=r;break;case"source":Bt("error",t),s=r;break;case"img":case"image":case"link":Bt("error",t),Bt("load",t),s=r;break;case"details":Bt("toggle",t),s=r;break;case"input":LI(t,r),s=NE(t,r),Bt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Qt({},r,{value:void 0}),Bt("invalid",t);break;case"textarea":BI(t,r),s=OE(t,r),Bt("invalid",t);break;default:s=r}$E(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?WR(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&FR(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Cp(t,c):typeof c=="number"&&Cp(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(_p.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Bt("scroll",t):c!=null&&zx(t,i,c,o))}switch(n){case"input":Om(t),MI(t,r,!1);break;case"textarea":Om(t),FI(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ac(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Cd(t,!!r.multiple,i,!1):r.defaultValue!=null&&Cd(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Aw)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return nr(e),null;case 6:if(t&&e.stateNode!=null)h$(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(re(166));if(n=ml($p.current),ml(eo.current),Fm(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ji]=e,(i=r.nodeValue!==n)&&(t=bs,t!==null))switch(t.tag){case 3:Bm(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bm(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ji]=e,e.stateNode=r}return nr(e),null;case 13:if(Wt(Kt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ht&&ys!==null&&e.mode&1&&!(e.flags&128))P3(),Qd(),e.flags|=98560,i=!1;else if(i=Fm(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(re(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(re(317));i[Ji]=e}else Qd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;nr(e),i=!1}else mi!==null&&(g_(mi),mi=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Kt.current&1?Cn===0&&(Cn=3):xS())),e.updateQueue!==null&&(e.flags|=4),nr(e),null);case 4:return Xd(),a_(t,e),t===null&&Pp(e.stateNode.containerInfo),nr(e),null;case 10:return aS(e.type._context),nr(e),null;case 17:return ts(e.type)&&Iw(),nr(e),null;case 19:if(Wt(Kt),i=e.memoizedState,i===null)return nr(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Jh(i,!1);else{if(Cn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=$w(t),o!==null){for(e.flags|=128,Jh(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Rt(Kt,Kt.current&1|2),e.child}t=t.sibling}i.tail!==null&&cn()>th&&(e.flags|=128,r=!0,Jh(i,!1),e.lanes=4194304)}else{if(!r)if(t=$w(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Jh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ht)return nr(e),null}else 2*cn()-i.renderingStartTime>th&&n!==1073741824&&(e.flags|=128,r=!0,Jh(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=cn(),e.sibling=null,n=Kt.current,Rt(Kt,r?n&1|2:n&1),e):(nr(e),null);case 22:case 23:return CS(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?fs&1073741824&&(nr(e),e.subtreeFlags&6&&(e.flags|=8192)):nr(e),null;case 24:return null;case 25:return null}throw Error(re(156,e.tag))}function LB(t,e){switch(rS(e),e.tag){case 1:return ts(e.type)&&Iw(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xd(),Wt(es),Wt(fr),hS(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return dS(e),null;case 13:if(Wt(Kt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(re(340));Qd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Wt(Kt),null;case 4:return Xd(),null;case 10:return aS(e.type._context),null;case 22:case 23:return CS(),null;case 24:return null;default:return null}}var qm=!1,hr=!1,MB=typeof WeakSet=="function"?WeakSet:Set,_e=null;function wd(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){nn(t,e,r)}else n.current=null}function c_(t,e,n){try{n()}catch(r){nn(t,e,r)}}var P2=!1;function BB(t,e){if(HE=Cw,t=y3(),tS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(VE={focusedElem:t,selectionRange:n},Cw=!1,_e=e;_e!==null;)if(e=_e,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,_e=t;else for(;_e!==null;){e=_e;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,w=p.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:di(e.type,g),w);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(_){nn(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,_e=t;break}_e=e.return}return p=P2,P2=!1,p}function Jf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&c_(e,n,i)}s=s.next}while(s!==r)}}function B0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function l_(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function f$(t){var e=t.alternate;e!==null&&(t.alternate=null,f$(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ji],delete e[Op],delete e[YE],delete e[_B],delete e[CB])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function p$(t){return t.tag===5||t.tag===3||t.tag===4}function k2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||p$(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function u_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Aw));else if(r!==4&&(t=t.child,t!==null))for(u_(t,e,n),t=t.sibling;t!==null;)u_(t,e,n),t=t.sibling}function d_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(d_(t,e,n),t=t.sibling;t!==null;)d_(t,e,n),t=t.sibling}var Hn=null,pi=!1;function oa(t,e,n){for(n=n.child;n!==null;)g$(t,e,n),n=n.sibling}function g$(t,e,n){if(Xi&&typeof Xi.onCommitFiberUnmount=="function")try{Xi.onCommitFiberUnmount(O0,n)}catch{}switch(n.tag){case 5:hr||wd(n,e);case 6:var r=Hn,s=pi;Hn=null,oa(t,e,n),Hn=r,pi=s,Hn!==null&&(pi?(t=Hn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Hn.removeChild(n.stateNode));break;case 18:Hn!==null&&(pi?(t=Hn,n=n.stateNode,t.nodeType===8?wb(t.parentNode,n):t.nodeType===1&&wb(t,n),Ip(t)):wb(Hn,n.stateNode));break;case 4:r=Hn,s=pi,Hn=n.stateNode.containerInfo,pi=!0,oa(t,e,n),Hn=r,pi=s;break;case 0:case 11:case 14:case 15:if(!hr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&c_(n,e,o),s=s.next}while(s!==r)}oa(t,e,n);break;case 1:if(!hr&&(wd(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){nn(n,e,a)}oa(t,e,n);break;case 21:oa(t,e,n);break;case 22:n.mode&1?(hr=(r=hr)||n.memoizedState!==null,oa(t,e,n),hr=r):oa(t,e,n);break;default:oa(t,e,n)}}function O2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new MB),e.forEach(function(r){var s=YB.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ti(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Hn=a.stateNode,pi=!1;break e;case 3:Hn=a.stateNode.containerInfo,pi=!0;break e;case 4:Hn=a.stateNode.containerInfo,pi=!0;break e}a=a.return}if(Hn===null)throw Error(re(160));g$(i,o,s),Hn=null,pi=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){nn(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)m$(e,t),e=e.sibling}function m$(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ti(e,t),$i(t),r&4){try{Jf(3,t,t.return),B0(3,t)}catch(g){nn(t,t.return,g)}try{Jf(5,t,t.return)}catch(g){nn(t,t.return,g)}}break;case 1:ti(e,t),$i(t),r&512&&n!==null&&wd(n,n.return);break;case 5:if(ti(e,t),$i(t),r&512&&n!==null&&wd(n,n.return),t.flags&32){var s=t.stateNode;try{Cp(s,"")}catch(g){nn(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&LR(s,i),DE(a,o);var l=DE(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?WR(s,d):u==="dangerouslySetInnerHTML"?FR(s,d):u==="children"?Cp(s,d):zx(s,u,d,l)}switch(a){case"input":PE(s,i);break;case"textarea":MR(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Cd(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?Cd(s,!!i.multiple,i.defaultValue,!0):Cd(s,!!i.multiple,i.multiple?[]:"",!1))}s[Op]=i}catch(g){nn(t,t.return,g)}}break;case 6:if(ti(e,t),$i(t),r&4){if(t.stateNode===null)throw Error(re(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){nn(t,t.return,g)}}break;case 3:if(ti(e,t),$i(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ip(e.containerInfo)}catch(g){nn(t,t.return,g)}break;case 4:ti(e,t),$i(t);break;case 13:ti(e,t),$i(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ES=cn())),r&4&&O2(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(hr=(l=hr)||u,ti(e,t),hr=l):ti(e,t),$i(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(_e=t,u=t.child;u!==null;){for(d=_e=u;_e!==null;){switch(h=_e,f=h.child,h.tag){case 0:case 11:case 14:case 15:Jf(4,h,h.return);break;case 1:wd(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){nn(r,n,g)}}break;case 5:wd(h,h.return);break;case 22:if(h.memoizedState!==null){$2(d);continue}}f!==null?(f.return=h,_e=f):$2(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=zR("display",o))}catch(g){nn(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){nn(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ti(e,t),$i(t),r&4&&O2(t);break;case 21:break;default:ti(e,t),$i(t)}}function $i(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(p$(n)){var r=n;break e}n=n.return}throw Error(re(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Cp(s,""),r.flags&=-33);var i=k2(t);d_(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=k2(t);u_(t,a,o);break;default:throw Error(re(161))}}catch(c){nn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function FB(t,e,n){_e=t,y$(t)}function y$(t,e,n){for(var r=(t.mode&1)!==0;_e!==null;){var s=_e,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||qm;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||hr;a=qm;var l=hr;if(qm=o,(hr=c)&&!l)for(_e=s;_e!==null;)o=_e,c=o.child,o.tag===22&&o.memoizedState!==null?D2(s):c!==null?(c.return=o,_e=c):D2(s);for(;i!==null;)_e=i,y$(i),i=i.sibling;_e=s,qm=a,hr=l}R2(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,_e=i):R2(t)}}function R2(t){for(;_e!==null;){var e=_e;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:hr||B0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!hr)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:di(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&y2(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}y2(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Ip(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}hr||e.flags&512&&l_(e)}catch(h){nn(e,e.return,h)}}if(e===t){_e=null;break}if(n=e.sibling,n!==null){n.return=e.return,_e=n;break}_e=e.return}}function $2(t){for(;_e!==null;){var e=_e;if(e===t){_e=null;break}var n=e.sibling;if(n!==null){n.return=e.return,_e=n;break}_e=e.return}}function D2(t){for(;_e!==null;){var e=_e;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{B0(4,e)}catch(c){nn(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){nn(e,s,c)}}var i=e.return;try{l_(e)}catch(c){nn(e,i,c)}break;case 5:var o=e.return;try{l_(e)}catch(c){nn(e,o,c)}}}catch(c){nn(e,e.return,c)}if(e===t){_e=null;break}var a=e.sibling;if(a!==null){a.return=e.return,_e=a;break}_e=e.return}}var zB=Math.ceil,jw=ta.ReactCurrentDispatcher,vS=ta.ReactCurrentOwner,Hs=ta.ReactCurrentBatchConfig,st=0,$n=null,gn=null,Gn=0,fs=0,vd=Lc(0),Cn=0,Lp=null,Hl=0,F0=0,bS=0,Qf=null,Jr=null,ES=0,th=1/0,Io=null,Lw=!1,h_=null,fc=null,Hm=!1,tc=null,Mw=0,Zf=0,f_=null,Yy=-1,Jy=0;function xr(){return st&6?cn():Yy!==-1?Yy:Yy=cn()}function pc(t){return t.mode&1?st&2&&Gn!==0?Gn&-Gn:SB.transition!==null?(Jy===0&&(Jy=t3()),Jy):(t=Et,t!==0||(t=window.event,t=t===void 0?16:c3(t.type)),t):1}function xi(t,e,n,r){if(50<Zf)throw Zf=0,f_=null,Error(re(185));Gg(t,n,r),(!(st&2)||t!==$n)&&(t===$n&&(!(st&2)&&(F0|=n),Cn===4&&Ma(t,Gn)),ns(t,r),n===1&&st===0&&!(e.mode&1)&&(th=cn()+500,j0&&Mc()))}function ns(t,e){var n=t.callbackNode;SM(t,e);var r=_w(t,t===$n?Gn:0);if(r===0)n!==null&&qI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&qI(n),e===1)t.tag===0?xB(U2.bind(null,t)):I3(U2.bind(null,t)),bB(function(){!(st&6)&&Mc()}),n=null;else{switch(n3(r)){case 1:n=Gx;break;case 4:n=XR;break;case 16:n=Ew;break;case 536870912:n=e3;break;default:n=Ew}n=S$(n,w$.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function w$(t,e){if(Yy=-1,Jy=0,st&6)throw Error(re(327));var n=t.callbackNode;if(Td()&&t.callbackNode!==n)return null;var r=_w(t,t===$n?Gn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Bw(t,r);else{e=r;var s=st;st|=2;var i=b$();($n!==t||Gn!==e)&&(Io=null,th=cn()+500,Dl(t,e));do try{HB();break}catch(a){v$(t,a)}while(!0);oS(),jw.current=i,st=s,gn!==null?e=0:($n=null,Gn=0,e=Cn)}if(e!==0){if(e===2&&(s=BE(t),s!==0&&(r=s,e=p_(t,s))),e===1)throw n=Lp,Dl(t,0),Ma(t,r),ns(t,cn()),n;if(e===6)Ma(t,r);else{if(s=t.current.alternate,!(r&30)&&!WB(s)&&(e=Bw(t,r),e===2&&(i=BE(t),i!==0&&(r=i,e=p_(t,i))),e===1))throw n=Lp,Dl(t,0),Ma(t,r),ns(t,cn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(re(345));case 2:il(t,Jr,Io);break;case 3:if(Ma(t,r),(r&130023424)===r&&(e=ES+500-cn(),10<e)){if(_w(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){xr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=KE(il.bind(null,t,Jr,Io),e);break}il(t,Jr,Io);break;case 4:if(Ma(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ci(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=cn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zB(r/1960))-r,10<r){t.timeoutHandle=KE(il.bind(null,t,Jr,Io),r);break}il(t,Jr,Io);break;case 5:il(t,Jr,Io);break;default:throw Error(re(329))}}}return ns(t,cn()),t.callbackNode===n?w$.bind(null,t):null}function p_(t,e){var n=Qf;return t.current.memoizedState.isDehydrated&&(Dl(t,e).flags|=256),t=Bw(t,e),t!==2&&(e=Jr,Jr=n,e!==null&&g_(e)),t}function g_(t){Jr===null?Jr=t:Jr.push.apply(Jr,t)}function WB(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ti(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ma(t,e){for(e&=~bS,e&=~F0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ci(e),r=1<<n;t[n]=-1,e&=~r}}function U2(t){if(st&6)throw Error(re(327));Td();var e=_w(t,0);if(!(e&1))return ns(t,cn()),null;var n=Bw(t,e);if(t.tag!==0&&n===2){var r=BE(t);r!==0&&(e=r,n=p_(t,r))}if(n===1)throw n=Lp,Dl(t,0),Ma(t,e),ns(t,cn()),n;if(n===6)throw Error(re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,il(t,Jr,Io),ns(t,cn()),null}function _S(t,e){var n=st;st|=1;try{return t(e)}finally{st=n,st===0&&(th=cn()+500,j0&&Mc())}}function Vl(t){tc!==null&&tc.tag===0&&!(st&6)&&Td();var e=st;st|=1;var n=Hs.transition,r=Et;try{if(Hs.transition=null,Et=1,t)return t()}finally{Et=r,Hs.transition=n,st=e,!(st&6)&&Mc()}}function CS(){fs=vd.current,Wt(vd)}function Dl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,vB(n)),gn!==null)for(n=gn.return;n!==null;){var r=n;switch(rS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Iw();break;case 3:Xd(),Wt(es),Wt(fr),hS();break;case 5:dS(r);break;case 4:Xd();break;case 13:Wt(Kt);break;case 19:Wt(Kt);break;case 10:aS(r.type._context);break;case 22:case 23:CS()}n=n.return}if($n=t,gn=t=gc(t.current,null),Gn=fs=e,Cn=0,Lp=null,bS=F0=Hl=0,Jr=Qf=null,gl!==null){for(e=0;e<gl.length;e++)if(n=gl[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}gl=null}return t}function v$(t,e){do{var n=gn;try{if(oS(),Vy.current=Uw,Dw){for(var r=Jt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Dw=!1}if(ql=0,Pn=bn=Jt=null,Yf=!1,Dp=0,vS.current=null,n===null||n.return===null){Cn=1,Lp=e,gn=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Gn,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=C2(o);if(f!==null){f.flags&=-257,x2(f,o,a,i,e),f.mode&1&&_2(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){_2(i,l,e),xS();break e}c=Error(re(426))}}else if(Ht&&a.mode&1){var w=C2(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),x2(w,o,a,i,e),sS(eh(c,a));break e}}i=c=eh(c,a),Cn!==4&&(Cn=2),Qf===null?Qf=[i]:Qf.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=n$(i,c,e);m2(i,y);break e;case 1:a=c;var b=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(fc===null||!fc.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=r$(i,a,e);m2(i,_);break e}}i=i.return}while(i!==null)}_$(n)}catch(E){e=E,gn===n&&n!==null&&(gn=n=n.return);continue}break}while(!0)}function b$(){var t=jw.current;return jw.current=Uw,t===null?Uw:t}function xS(){(Cn===0||Cn===3||Cn===2)&&(Cn=4),$n===null||!(Hl&268435455)&&!(F0&268435455)||Ma($n,Gn)}function Bw(t,e){var n=st;st|=2;var r=b$();($n!==t||Gn!==e)&&(Io=null,Dl(t,e));do try{qB();break}catch(s){v$(t,s)}while(!0);if(oS(),st=n,jw.current=r,gn!==null)throw Error(re(261));return $n=null,Gn=0,Cn}function qB(){for(;gn!==null;)E$(gn)}function HB(){for(;gn!==null&&!mM();)E$(gn)}function E$(t){var e=x$(t.alternate,t,fs);t.memoizedProps=t.pendingProps,e===null?_$(t):gn=e,vS.current=null}function _$(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=LB(n,e),n!==null){n.flags&=32767,gn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Cn=6,gn=null;return}}else if(n=jB(n,e,fs),n!==null){gn=n;return}if(e=e.sibling,e!==null){gn=e;return}gn=e=t}while(e!==null);Cn===0&&(Cn=5)}function il(t,e,n){var r=Et,s=Hs.transition;try{Hs.transition=null,Et=1,VB(t,e,n,r)}finally{Hs.transition=s,Et=r}return null}function VB(t,e,n,r){do Td();while(tc!==null);if(st&6)throw Error(re(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(re(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(AM(t,i),t===$n&&(gn=$n=null,Gn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hm||(Hm=!0,S$(Ew,function(){return Td(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Hs.transition,Hs.transition=null;var o=Et;Et=1;var a=st;st|=4,vS.current=null,BB(t,n),m$(n,t),hB(VE),Cw=!!HE,VE=HE=null,t.current=n,FB(n),yM(),st=a,Et=o,Hs.transition=i}else t.current=n;if(Hm&&(Hm=!1,tc=t,Mw=s),i=t.pendingLanes,i===0&&(fc=null),bM(n.stateNode),ns(t,cn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Lw)throw Lw=!1,t=h_,h_=null,t;return Mw&1&&t.tag!==0&&Td(),i=t.pendingLanes,i&1?t===f_?Zf++:(Zf=0,f_=t):Zf=0,Mc(),null}function Td(){if(tc!==null){var t=n3(Mw),e=Hs.transition,n=Et;try{if(Hs.transition=null,Et=16>t?16:t,tc===null)var r=!1;else{if(t=tc,tc=null,Mw=0,st&6)throw Error(re(331));var s=st;for(st|=4,_e=t.current;_e!==null;){var i=_e,o=i.child;if(_e.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(_e=l;_e!==null;){var u=_e;switch(u.tag){case 0:case 11:case 15:Jf(8,u,i)}var d=u.child;if(d!==null)d.return=u,_e=d;else for(;_e!==null;){u=_e;var h=u.sibling,f=u.return;if(f$(u),u===l){_e=null;break}if(h!==null){h.return=f,_e=h;break}_e=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}_e=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,_e=o;else e:for(;_e!==null;){if(i=_e,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Jf(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,_e=y;break e}_e=i.return}}var b=t.current;for(_e=b;_e!==null;){o=_e;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,_e=v;else e:for(o=b;_e!==null;){if(a=_e,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:B0(9,a)}}catch(E){nn(a,a.return,E)}if(a===o){_e=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,_e=_;break e}_e=a.return}}if(st=s,Mc(),Xi&&typeof Xi.onPostCommitFiberRoot=="function")try{Xi.onPostCommitFiberRoot(O0,t)}catch{}r=!0}return r}finally{Et=n,Hs.transition=e}}return!1}function j2(t,e,n){e=eh(n,e),e=n$(t,e,1),t=hc(t,e,1),e=xr(),t!==null&&(Gg(t,1,e),ns(t,e))}function nn(t,e,n){if(t.tag===3)j2(t,t,n);else for(;e!==null;){if(e.tag===3){j2(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fc===null||!fc.has(r))){t=eh(n,t),t=r$(e,t,1),e=hc(e,t,1),t=xr(),e!==null&&(Gg(e,1,t),ns(e,t));break}}e=e.return}}function GB(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=xr(),t.pingedLanes|=t.suspendedLanes&n,$n===t&&(Gn&n)===n&&(Cn===4||Cn===3&&(Gn&130023424)===Gn&&500>cn()-ES?Dl(t,0):bS|=n),ns(t,e)}function C$(t,e){e===0&&(t.mode&1?(e=Dm,Dm<<=1,!(Dm&130023424)&&(Dm=4194304)):e=1);var n=xr();t=Go(t,e),t!==null&&(Gg(t,e,n),ns(t,n))}function KB(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),C$(t,n)}function YB(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(re(314))}r!==null&&r.delete(e),C$(t,n)}var x$;x$=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||es.current)Zr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Zr=!1,UB(t,e,n);Zr=!!(t.flags&131072)}else Zr=!1,Ht&&e.flags&1048576&&T3(e,Pw,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ky(t,e),t=e.pendingProps;var s=Jd(e,fr.current);Id(e,n),s=pS(null,e,r,t,s,n);var i=gS();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ts(r)?(i=!0,Tw(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,lS(e),s.updater=M0,e.stateNode=s,s._reactInternals=e,t_(e,r,t,n),e=s_(null,e,r,!0,i,n)):(e.tag=0,Ht&&i&&nS(e),Er(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ky(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=QB(r),t=di(r,t),s){case 0:e=r_(null,e,r,t,n);break e;case 1:e=I2(null,e,r,t,n);break e;case 11:e=S2(null,e,r,t,n);break e;case 14:e=A2(null,e,r,di(r.type,t),n);break e}throw Error(re(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:di(r,s),r_(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:di(r,s),I2(t,e,r,s,n);case 3:e:{if(a$(e),t===null)throw Error(re(387));r=e.pendingProps,i=e.memoizedState,s=i.element,$3(t,e),Rw(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=eh(Error(re(423)),e),e=T2(t,e,r,n,s);break e}else if(r!==s){s=eh(Error(re(424)),e),e=T2(t,e,r,n,s);break e}else for(ys=dc(e.stateNode.containerInfo.firstChild),bs=e,Ht=!0,mi=null,n=O3(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qd(),r===s){e=Ko(t,e,n);break e}Er(t,e,r,n)}e=e.child}return e;case 5:return D3(e),t===null&&ZE(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,GE(r,s)?o=null:i!==null&&GE(r,i)&&(e.flags|=32),o$(t,e),Er(t,e,o,n),e.child;case 6:return t===null&&ZE(e),null;case 13:return c$(t,e,n);case 4:return uS(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Zd(e,null,r,n):Er(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:di(r,s),S2(t,e,r,s,n);case 7:return Er(t,e,e.pendingProps,n),e.child;case 8:return Er(t,e,e.pendingProps.children,n),e.child;case 12:return Er(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Rt(kw,r._currentValue),r._currentValue=o,i!==null)if(Ti(i.value,o)){if(i.children===s.children&&!es.current){e=Ko(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Mo(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),XE(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(re(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),XE(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Er(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Id(e,n),s=Vs(s),r=r(s),e.flags|=1,Er(t,e,r,n),e.child;case 14:return r=e.type,s=di(r,e.pendingProps),s=di(r.type,s),A2(t,e,r,s,n);case 15:return s$(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:di(r,s),Ky(t,e),e.tag=1,ts(r)?(t=!0,Tw(e)):t=!1,Id(e,n),t$(e,r,s),t_(e,r,s,n),s_(null,e,r,!0,t,n);case 19:return l$(t,e,n);case 22:return i$(t,e,n)}throw Error(re(156,e.tag))};function S$(t,e){return ZR(t,e)}function JB(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ws(t,e,n,r){return new JB(t,e,n,r)}function SS(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QB(t){if(typeof t=="function")return SS(t)?1:0;if(t!=null){if(t=t.$$typeof,t===qx)return 11;if(t===Hx)return 14}return 2}function gc(t,e){var n=t.alternate;return n===null?(n=Ws(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Qy(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")SS(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ld:return Ul(n.children,s,i,e);case Wx:o=8,s|=8;break;case SE:return t=Ws(12,n,e,s|2),t.elementType=SE,t.lanes=i,t;case AE:return t=Ws(13,n,e,s),t.elementType=AE,t.lanes=i,t;case IE:return t=Ws(19,n,e,s),t.elementType=IE,t.lanes=i,t;case DR:return z0(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case RR:o=10;break e;case $R:o=9;break e;case qx:o=11;break e;case Hx:o=14;break e;case Na:o=16,r=null;break e}throw Error(re(130,t==null?t:typeof t,""))}return e=Ws(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ul(t,e,n,r){return t=Ws(7,t,r,e),t.lanes=n,t}function z0(t,e,n,r){return t=Ws(22,t,r,e),t.elementType=DR,t.lanes=n,t.stateNode={isHidden:!1},t}function Ab(t,e,n){return t=Ws(6,t,null,e),t.lanes=n,t}function Ib(t,e,n){return e=Ws(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ZB(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ab(0),this.expirationTimes=ab(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ab(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function AS(t,e,n,r,s,i,o,a,c){return t=new ZB(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ws(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lS(i),t}function XB(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cd,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function A$(t){if(!t)return Ic;t=t._reactInternals;e:{if(fu(t)!==t||t.tag!==1)throw Error(re(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ts(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(re(171))}if(t.tag===1){var n=t.type;if(ts(n))return A3(t,n,e)}return e}function I$(t,e,n,r,s,i,o,a,c){return t=AS(n,r,!0,t,s,i,o,a,c),t.context=A$(null),n=t.current,r=xr(),s=pc(n),i=Mo(r,s),i.callback=e??null,hc(n,i,s),t.current.lanes=s,Gg(t,s,r),ns(t,r),t}function W0(t,e,n,r){var s=e.current,i=xr(),o=pc(s);return n=A$(n),e.context===null?e.context=n:e.pendingContext=n,e=Mo(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=hc(s,e,o),t!==null&&(xi(t,s,o,i),Hy(t,s,o)),o}function Fw(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function L2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function IS(t,e){L2(t,e),(t=t.alternate)&&L2(t,e)}function eF(){return null}var T$=typeof reportError=="function"?reportError:function(t){console.error(t)};function TS(t){this._internalRoot=t}q0.prototype.render=TS.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(re(409));W0(t,e,null,null)};q0.prototype.unmount=TS.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vl(function(){W0(null,t,null,null)}),e[Vo]=null}};function q0(t){this._internalRoot=t}q0.prototype.unstable_scheduleHydration=function(t){if(t){var e=i3();t={blockedOn:null,target:t,priority:e};for(var n=0;n<La.length&&e!==0&&e<La[n].priority;n++);La.splice(n,0,t),n===0&&a3(t)}};function NS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function H0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function M2(){}function tF(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=Fw(o);i.call(l)}}var o=I$(e,r,t,0,null,!1,!1,"",M2);return t._reactRootContainer=o,t[Vo]=o.current,Pp(t.nodeType===8?t.parentNode:t),Vl(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=Fw(c);a.call(l)}}var c=AS(t,0,!1,null,null,!1,!1,"",M2);return t._reactRootContainer=c,t[Vo]=c.current,Pp(t.nodeType===8?t.parentNode:t),Vl(function(){W0(e,c,n,r)}),c}function V0(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Fw(o);a.call(c)}}W0(e,o,t,s)}else o=tF(n,e,t,s,r);return Fw(o)}r3=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Nf(e.pendingLanes);n!==0&&(Kx(e,n|1),ns(e,cn()),!(st&6)&&(th=cn()+500,Mc()))}break;case 13:Vl(function(){var r=Go(t,1);if(r!==null){var s=xr();xi(r,t,1,s)}}),IS(t,1)}};Yx=function(t){if(t.tag===13){var e=Go(t,134217728);if(e!==null){var n=xr();xi(e,t,134217728,n)}IS(t,134217728)}};s3=function(t){if(t.tag===13){var e=pc(t),n=Go(t,e);if(n!==null){var r=xr();xi(n,t,e,r)}IS(t,e)}};i3=function(){return Et};o3=function(t,e){var n=Et;try{return Et=t,e()}finally{Et=n}};jE=function(t,e,n){switch(e){case"input":if(PE(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=U0(r);if(!s)throw Error(re(90));jR(r),PE(r,s)}}}break;case"textarea":MR(t,n);break;case"select":e=n.value,e!=null&&Cd(t,!!n.multiple,e,!1)}};VR=_S;GR=Vl;var nF={usingClientEntryPoint:!1,Events:[Yg,fd,U0,qR,HR,_S]},Qh={findFiberByHostInstance:pl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rF={bundleType:Qh.bundleType,version:Qh.version,rendererPackageName:Qh.rendererPackageName,rendererConfig:Qh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ta.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=JR(t),t===null?null:t.stateNode},findFiberByHostInstance:Qh.findFiberByHostInstance||eF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vm.isDisabled&&Vm.supportsFiber)try{O0=Vm.inject(rF),Xi=Vm}catch{}}Ss.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nF;Ss.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!NS(e))throw Error(re(200));return XB(t,e,null,n)};Ss.createRoot=function(t,e){if(!NS(t))throw Error(re(299));var n=!1,r="",s=T$;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=AS(t,1,!1,null,null,n,!1,r,s),t[Vo]=e.current,Pp(t.nodeType===8?t.parentNode:t),new TS(e)};Ss.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(re(188)):(t=Object.keys(t).join(","),Error(re(268,t)));return t=JR(e),t=t===null?null:t.stateNode,t};Ss.flushSync=function(t){return Vl(t)};Ss.hydrate=function(t,e,n){if(!H0(e))throw Error(re(200));return V0(null,t,e,!0,n)};Ss.hydrateRoot=function(t,e,n){if(!NS(t))throw Error(re(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=T$;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=I$(e,null,t,1,n??null,s,!1,i,o),t[Vo]=e.current,Pp(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new q0(e)};Ss.render=function(t,e,n){if(!H0(e))throw Error(re(200));return V0(null,t,e,!1,n)};Ss.unmountComponentAtNode=function(t){if(!H0(t))throw Error(re(40));return t._reactRootContainer?(Vl(function(){V0(null,null,t,!1,function(){t._reactRootContainer=null,t[Vo]=null})}),!0):!1};Ss.unstable_batchedUpdates=_S;Ss.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!H0(n))throw Error(re(200));if(t==null||t._reactInternals===void 0)throw Error(re(38));return V0(t,e,n,!1,r)};Ss.version="18.3.1-next-f1338f8080-20240426";function N$(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(N$)}catch(t){console.error(t)}}N$(),NR.exports=Ss;var PS=NR.exports,B2=PS;CE.createRoot=B2.createRoot,CE.hydrateRoot=B2.hydrateRoot;const P$="2.31.4";let Zh={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${P$}`},ee=class m_ extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof m_?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof m_&&n.cause.docsPath||n.docsPath,i=(a=Zh.getDocsUrl)==null?void 0:a.call(Zh,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Zh.version?[`Version: ${Zh.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=P$}walk(e){return k$(this,e)}};function k$(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?k$(t.cause,e):e?null:t}let O$=class extends ee{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class sF extends ee{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}let iF=class extends ee{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};class R$ extends ee{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}let $$=class extends ee{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class F2 extends ee{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function bh(t,{dir:e,size:n=32}={}){return typeof t=="string"?mc(t,{dir:e,size:n}):oF(t,{dir:e,size:n})}function mc(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new $$({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function oF(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new $$({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}function Yo(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function un(t){return Yo(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function Eh(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const aF=new TextEncoder;function G0(t,e={}){return typeof t=="number"||typeof t=="bigint"?lF(t,e):typeof t=="boolean"?cF(t,e):Yo(t)?io(t,e):Nd(t,e)}function cF(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(ki(n,{size:e.size}),bh(n,{size:e.size})):n}const fo={zero:48,nine:57,A:65,F:70,a:97,f:102};function z2(t){if(t>=fo.zero&&t<=fo.nine)return t-fo.zero;if(t>=fo.A&&t<=fo.F)return t-(fo.A-10);if(t>=fo.a&&t<=fo.f)return t-(fo.a-10)}function io(t,e={}){let n=t;e.size&&(ki(n,{size:e.size}),n=bh(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=z2(r.charCodeAt(a++)),l=z2(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new ee(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function lF(t,e){const n=Ue(t,e);return io(n)}function Nd(t,e={}){const n=aF.encode(t);return typeof e.size=="number"?(ki(n,{size:e.size}),bh(n,{dir:"right",size:e.size})):n}function ki(t,{size:e}){if(un(t)>e)throw new iF({givenSize:un(t),maxSize:e})}function Jo(t,e={}){const{signed:n}=e;e.size&&ki(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Qo(t,e={}){return Number(Jo(t,e))}function D$(t,e={}){let n=io(t);return e.size&&(ki(n,{size:e.size}),n=Eh(n,{dir:"right"})),new TextDecoder().decode(n)}const uF=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Gl(t,e={}){return typeof t=="number"||typeof t=="bigint"?Ue(t,e):typeof t=="string"?K0(t,e):typeof t=="boolean"?U$(t,e):Tr(t,e)}function U$(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(ki(n,{size:e.size}),bh(n,{size:e.size})):n}function Tr(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=uF[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(ki(r,{size:e.size}),bh(r,{dir:"right",size:e.size})):r}function Ue(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new O$({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?bh(a,{size:r}):a}const dF=new TextEncoder;function K0(t,e={}){const n=dF.encode(t);return Tr(n,e)}async function hF(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:Ue(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function Tc(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new SF(t.type);return`${t.name}(${Y0(t.inputs,{includeName:e})})`}function Y0(t,{includeName:e=!1}={}){return t?t.map(n=>fF(n,{includeName:e})).join(e?", ":","):""}function fF(t,{includeName:e}){return t.type.startsWith("tuple")?`(${Y0(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class pF extends ee{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class W2 extends ee{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class j$ extends ee{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${Y0(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class J0 extends ee{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class gF extends ee{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class mF extends ee{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${un(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class yF extends ee{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class pCe extends ee{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class gCe extends ee{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class L$ extends ee{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class wF extends ee{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class M$ extends ee{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class zw extends ee{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class vF extends ee{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class mCe extends ee{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class bF extends ee{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Tc(e.abiItem)}\`, and`,`\`${n.type}\` in \`${Tc(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class EF extends ee{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class y_ extends ee{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${Y0(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class B$ extends ee{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Tc(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class _F extends ee{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class CF extends ee{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class xF extends ee{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class SF extends ee{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function Nc(t){return typeof t[0]=="string"?Q0(t):AF(t)}function AF(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function Q0(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}class Pc extends ee{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}let Z0=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const Gm=BigInt(2**32-1),q2=BigInt(32);function IF(t,e=!1){return e?{h:Number(t&Gm),l:Number(t>>q2&Gm)}:{h:Number(t>>q2&Gm)|0,l:Number(t&Gm)|0}}function TF(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=IF(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const NF=(t,e,n)=>t<<n|e>>>32-n,PF=(t,e,n)=>e<<n|t>>>32-n,kF=(t,e,n)=>e<<n-32|t>>>64-n,OF=(t,e,n)=>t<<n-32|e>>>64-n,Tu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function RF(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ww(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Kl(t,...e){if(!RF(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function wCe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Ww(t.outputLen),Ww(t.blockLen)}function qw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function F$(t,e){Kl(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function $F(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Mp(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Tb(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Di(t,e){return t<<32-e|t>>>e}const DF=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function UF(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function jF(t){for(let e=0;e<t.length;e++)t[e]=UF(t[e]);return t}const H2=DF?t=>t:jF,z$=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",LF=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function vCe(t){if(Kl(t),z$)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=LF[t[n]];return e}const po={_0:48,_9:57,A:65,F:70,a:97,f:102};function V2(t){if(t>=po._0&&t<=po._9)return t-po._0;if(t>=po.A&&t<=po.F)return t-(po.A-10);if(t>=po.a&&t<=po.f)return t-(po.a-10)}function bCe(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(z$)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=V2(t.charCodeAt(i)),a=V2(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function MF(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function X0(t){return typeof t=="string"&&(t=MF(t)),Kl(t),t}function ECe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Kl(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class W${}function q$(t){const e=r=>t().update(X0(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function BF(t){const e=(r,s)=>t(s).update(X0(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function _Ce(t=32){if(Tu&&typeof Tu.getRandomValues=="function")return Tu.getRandomValues(new Uint8Array(t));if(Tu&&typeof Tu.randomBytes=="function")return Uint8Array.from(Tu.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const FF=BigInt(0),Xh=BigInt(1),zF=BigInt(2),WF=BigInt(7),qF=BigInt(256),HF=BigInt(113),H$=[],V$=[],G$=[];for(let t=0,e=Xh,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],H$.push(2*(5*r+n)),V$.push((t+1)*(t+2)/2%64);let s=FF;for(let i=0;i<7;i++)e=(e<<Xh^(e>>WF)*HF)%qF,e&zF&&(s^=Xh<<(Xh<<BigInt(i))-Xh);G$.push(s)}const K$=TF(G$,!0),VF=K$[0],GF=K$[1],G2=(t,e,n)=>n>32?kF(t,e,n):NF(t,e,n),K2=(t,e,n)=>n>32?OF(t,e,n):PF(t,e,n);function Y$(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=G2(l,u,1)^n[a],h=K2(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=V$[o],c=G2(s,i,a),l=K2(s,i,a),u=H$[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=VF[r],t[1]^=GF[r]}Mp(n)}class Qg extends W${constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Ww(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=$F(this.state)}clone(){return this._cloneInto()}keccak(){H2(this.state32),Y$(this.state32,this.rounds),H2(this.state32),this.posOut=0,this.pos=0}update(e){qw(this),e=X0(e),Kl(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){qw(this,!1),Kl(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Ww(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(F$(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Mp(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Qg(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Bc=(t,e,n)=>q$(()=>new Qg(e,t,n)),KF=Bc(6,144,224/8),YF=Bc(6,136,256/8),JF=Bc(6,104,384/8),QF=Bc(6,72,512/8),ZF=Bc(1,144,224/8),kS=Bc(1,136,256/8),XF=Bc(1,104,384/8),e9=Bc(1,72,512/8),J$=(t,e,n)=>BF((r={})=>new Qg(e,t,r.dkLen===void 0?n:r.dkLen,!0)),t9=J$(31,168,128/8),n9=J$(31,136,256/8),CCe=Object.freeze(Object.defineProperty({__proto__:null,Keccak:Qg,keccakP:Y$,keccak_224:ZF,keccak_256:kS,keccak_384:XF,keccak_512:e9,sha3_224:KF,sha3_256:YF,sha3_384:JF,sha3_512:QF,shake128:t9,shake256:n9},Symbol.toStringTag,{value:"Module"}));function _h(t,e){const n=e||"hex",r=kS(Yo(t,{strict:!1})?G0(t):t);return n==="bytes"?r:Gl(r)}const Nb=new Z0(8192);function Zg(t,e){if(Nb.has(`${t}.${e}`))return Nb.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=_h(Nd(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return Nb.set(`${t}.${e}`,i),i}function nc(t,e){if(!Ni(t,{strict:!1}))throw new Pc({address:t});return Zg(t,e)}const r9=/^0x[a-fA-F0-9]{40}$/,Pb=new Z0(8192);function Ni(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(Pb.has(r))return Pb.get(r);const s=r9.test(t)?t.toLowerCase()===t?!0:n?Zg(t)===t:!0:!1;return Pb.set(r,s),s}function Hw(t,e,n,{strict:r}={}){return Yo(t,{strict:!1})?w_(t,e,n,{strict:r}):X$(t,e,n,{strict:r})}function Q$(t,e){if(typeof e=="number"&&e>0&&e>un(t)-1)throw new R$({offset:e,position:"start",size:un(t)})}function Z$(t,e,n){if(typeof e=="number"&&typeof n=="number"&&un(t)!==n-e)throw new R$({offset:n,position:"end",size:un(t)})}function X$(t,e,n,{strict:r}={}){Q$(t,e);const s=t.slice(e,n);return r&&Z$(s,e,n),s}function w_(t,e,n,{strict:r}={}){Q$(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&Z$(s,e,n),s}const s9=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,eD=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function tD(t,e){if(t.length!==e.length)throw new yF({expectedLength:t.length,givenLength:e.length});const n=i9({params:t,values:e}),r=RS(n);return r.length===0?"0x":r}function i9({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(OS({param:t[r],value:e[r]}));return n}function OS({param:t,value:e}){const n=$S(t.type);if(n){const[r,s]=n;return a9(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return h9(e,{param:t});if(t.type==="address")return o9(e);if(t.type==="bool")return l9(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=eD.exec(t.type)??[];return u9(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return c9(e,{param:t});if(t.type==="string")return d9(e);throw new _F(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function RS(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=un(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(Ue(e+s,{size:32})),r.push(a),s+=un(a)):n.push(a)}return Nc([...n,...r])}function o9(t){if(!Ni(t))throw new Pc({address:t});return{dynamic:!1,encoded:mc(t.toLowerCase())}}function a9(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new xF(t);if(!r&&t.length!==e)throw new gF({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=OS({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=RS(i);if(r){const a=Ue(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?Nc([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Nc(i.map(({encoded:o})=>o))}}function c9(t,{param:e}){const[,n]=e.type.split("bytes"),r=un(t);if(!n){let s=t;return r%32!==0&&(s=mc(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:Nc([mc(Ue(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new mF({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:mc(t,{dir:"right"})}}function l9(t){if(typeof t!="boolean")throw new ee(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:mc(U$(t))}}function u9(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new O$({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Ue(t,{size:32,signed:e})}}function d9(t){const e=K0(t),n=Math.ceil(un(e)/32),r=[];for(let s=0;s<n;s++)r.push(mc(Hw(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Nc([mc(Ue(un(e),{size:32})),...r])}}function h9(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=OS({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?RS(r):Nc(r.map(({encoded:s})=>s))}}function $S(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const kb="/docs/contract/encodeDeployData";function DS(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new pF({docsPath:kb});if(!("inputs"in s))throw new W2({docsPath:kb});if(!s.inputs||s.inputs.length===0)throw new W2({docsPath:kb});const i=tD(s.inputs,n);return Q0([r,i])}function Yn(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class pu extends ee{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class Zy extends ee{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function f9(t){const e=_h(`0x${t.substring(4)}`).substring(26);return Zg(`0x${e}`)}const p9="modulepreload",g9=function(t){return"/"+t},Y2={},an=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=g9(c),c in Y2)return;Y2[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":p9,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function m9({hash:t,signature:e}){const n=Yo(t)?t:Gl(t),{secp256k1:r}=await an(async()=>{const{secp256k1:o}=await import("./secp256k1-BvFHZ8lK.js");return{secp256k1:o}},__vite__mapDeps([0,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=J2(f);return new r.Signature(Jo(l),Jo(u)).addRecoveryBit(p)}const o=Yo(e)?e:Gl(e);if(un(o)!==65)throw new Error("invalid signature length");const a=Qo(`0x${o.slice(130)}`),c=J2(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function J2(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function y9({hash:t,signature:e}){return f9(await m9({hash:t,signature:e}))}class Q2 extends ee{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class nD extends ee{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class w9 extends ee{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const v9={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new w9({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new nD({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new Q2({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new Q2({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function US(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(v9);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function b9(t,e="hex"){const n=rD(t),r=US(new Uint8Array(n.length));return n.encode(r),e==="hex"?Tr(r.bytes):r.bytes}function rD(t){return Array.isArray(t)?E9(t.map(e=>rD(e))):_9(t)}function E9(t){const e=t.reduce((s,i)=>s+i.length,0),n=sD(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function _9(t){const e=typeof t=="string"?io(t):t,n=sD(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function sD(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new ee("Length is too large.")}function C9(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=_h(Q0(["0x05",b9([e?Ue(e):"0x",s,n?Ue(n):"0x"])]));return r==="bytes"?io(i):i}async function iD(t){const{authorization:e,signature:n}=t;return y9({hash:C9(e),signature:n??e})}class v_ extends ee{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class x9 extends ee{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class S9 extends ee{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class oD extends ee{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function aD({chain:t,currentChainId:e}){if(!t)throw new S9;if(e!==t.id)throw new x9({chain:t,currentChainId:e})}const A9={gwei:9,wei:18},I9={ether:-9,wei:9},T9={ether:-18,gwei:-9};function Ch(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function rs(t,e="wei"){return Ch(t,I9[e])}class yl extends ee{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(yl,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(yl,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class Vw extends ee{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${rs(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(Vw,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class b_ extends ee{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${rs(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(b_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class E_ extends ee{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(E_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class __ extends ee{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(__,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class C_ extends ee{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(C_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class x_ extends ee{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(x_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class S_ extends ee{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(S_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class A_ extends ee{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(A_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class I_ extends ee{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(I_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class Gw extends ee{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${rs(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${rs(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(Gw,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class ev extends ee{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function jS(t,e="wei"){return Ch(t,A9[e])}function Xg(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class N9 extends ee{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class P9 extends ee{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Xg(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class k9 extends ee{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=Xg({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${jS(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${rs(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${rs(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${rs(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class cD extends ee{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class lD extends ee{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class O9 extends ee{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const Sr=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),R9=t=>t,LS=t=>t;class Xf extends ee{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${LS(o)}`,e&&`Request body: ${Sr(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class MS extends ee{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${LS(r)}`,`Request body: ${Sr(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class Z2 extends ee{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${LS(n)}`,`Request body: ${Sr(e)}`],name:"TimeoutError"})}}const $9=-1;class is extends ee{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof MS?e.code:n??$9}}class Is extends is{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class Bp extends is{constructor(e){super(e,{code:Bp.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Bp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Fp extends is{constructor(e){super(e,{code:Fp.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Fp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class zp extends is{constructor(e,{method:n}={}){super(e,{code:zp.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(zp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Wp extends is{constructor(e){super(e,{code:Wp.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Wp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Yl extends is{constructor(e){super(e,{code:Yl.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Yl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class qp extends is{constructor(e){super(e,{code:qp.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(qp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Hp extends is{constructor(e){super(e,{code:Hp.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Hp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class yc extends is{constructor(e){super(e,{code:yc.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(yc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class nh extends is{constructor(e){super(e,{code:nh.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(nh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class wl extends is{constructor(e,{method:n}={}){super(e,{code:wl.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(wl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class rh extends is{constructor(e){super(e,{code:rh.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(rh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Vp extends is{constructor(e){super(e,{code:Vp.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Vp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class vn extends Is{constructor(e){super(e,{code:vn.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(vn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Gp extends Is{constructor(e){super(e,{code:Gp.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(Gp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Kp extends Is{constructor(e,{method:n}={}){super(e,{code:Kp.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(Kp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Yp extends Is{constructor(e){super(e,{code:Yp.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Yp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Jp extends Is{constructor(e){super(e,{code:Jp.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Jp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class oo extends Is{constructor(e){super(e,{code:oo.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(oo,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class sh extends Is{constructor(e){super(e,{code:sh.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(sh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Qp extends Is{constructor(e){super(e,{code:Qp.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Qp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Zp extends Is{constructor(e){super(e,{code:Zp.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Zp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class Xp extends Is{constructor(e){super(e,{code:Xp.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(Xp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class eg extends Is{constructor(e){super(e,{code:eg.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(eg,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class tg extends Is{constructor(e){super(e,{code:tg.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(tg,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class ih extends Is{constructor(e){super(e,{code:ih.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(ih,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class D9 extends is{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function BS(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof ee?t.walk(s=>(s==null?void 0:s.code)===yl.code):t;return r instanceof ee?new yl({cause:t,message:r.details}):yl.nodeMessage.test(n)?new yl({cause:t,message:t.details}):Vw.nodeMessage.test(n)?new Vw({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):b_.nodeMessage.test(n)?new b_({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):E_.nodeMessage.test(n)?new E_({cause:t,nonce:e==null?void 0:e.nonce}):__.nodeMessage.test(n)?new __({cause:t,nonce:e==null?void 0:e.nonce}):C_.nodeMessage.test(n)?new C_({cause:t,nonce:e==null?void 0:e.nonce}):x_.nodeMessage.test(n)?new x_({cause:t}):S_.nodeMessage.test(n)?new S_({cause:t,gas:e==null?void 0:e.gas}):A_.nodeMessage.test(n)?new A_({cause:t,gas:e==null?void 0:e.gas}):I_.nodeMessage.test(n)?new I_({cause:t}):Gw.nodeMessage.test(n)?new Gw({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new ev({cause:t})}function uD(t,{docsPath:e,...n}){const r=(()=>{const s=BS(t,n);return s instanceof ev?t:s})();return new k9(r,{docsPath:e,...n})}function FS(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const U9={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function tv(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=j9(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>Tr(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=Ue(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=Ue(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=Ue(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=Ue(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=Ue(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=Ue(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=U9[t.type]),typeof t.value<"u"&&(e.value=Ue(t.value)),e}function j9(t){return t.map(e=>({address:e.address,r:e.r?Ue(BigInt(e.r)):e.r,s:e.s?Ue(BigInt(e.s)):e.s,chainId:Ue(e.chainId),nonce:Ue(e.nonce),...typeof e.yParity<"u"?{yParity:Ue(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:Ue(e.v)}:{}}))}function At(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const L9=2n**256n-1n;function em(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?Yn(e):void 0;if(o&&!Ni(o.address))throw new Pc({address:o.address});if(i&&!Ni(i))throw new Pc({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new N9;if(r&&r>L9)throw new Vw({maxFeePerGas:r});if(s&&r&&s>r)throw new Gw({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function tm(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return Qo(e)}class M9 extends ee{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class zS extends ee{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class B9 extends ee{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${rs(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class dD extends ee{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const hD={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function fD(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Qo(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Qo(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?hD[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=F9(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function F9(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function z9(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:fD(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function ng(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?Ue(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new dD({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||z9)(c)}async function pD(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function W9(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await At(t,ng,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return Jo(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):At(t,ng,"getBlock")({}),At(t,pD,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new zS;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function X2(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new M9;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await At(t,ng,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new zS;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await W9(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await At(t,pD,"getGasPrice")({}))}}class q9 extends ee{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=Xg({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${jS(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${rs(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${rs(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${rs(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function H9(t,{docsPath:e,...n}){const r=(()=>{const s=BS(t,n);return s instanceof ev?t:s})();return new q9(r,{docsPath:e,...n})}class V9 extends ee{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class G9 extends ee{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function eT(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function K9(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=eT(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=eT(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function tT(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new F2({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new F2({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function Y9(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=Ue(e)),n!==void 0&&(o.nonce=Ue(n)),r!==void 0&&(o.state=tT(r)),s!==void 0){if(o.state)throw new G9;o.stateDiff=tT(s)}return o}function gD(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Ni(n,{strict:!1}))throw new Pc({address:n});if(e[n])throw new V9({address:n});e[n]=Y9(r)}return e}async function mD(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?Ue(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function yD(t,e){var s,i,o;const{account:n=t.account}=e,r=n?Yn(n):void 0;try{let B=function(A){const{block:U,request:P,rpcStateOverride:k}=A;return t.request({method:"eth_estimateGas",params:k?[P,U??"latest",k]:U?[P,U]:[P]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,value:_,stateOverride:E,...x}=await nv(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),T=(typeof d=="bigint"?Ue(d):void 0)||h,C=gD(E),O=await(async()=>{if(x.to)return x.to;if(c&&c.length>0)return await iD({authorization:c[0]}).catch(()=>{throw new ee("`to` is required. Could not infer from `authorizationList`")})})();em(e);const R=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,W=(R||tv)({...FS(x,{format:R}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:O,value:_});let I=BigInt(await B({block:T,request:W,rpcStateOverride:C}));if(c){const A=await mD(t,{address:W.from}),U=await Promise.all(c.map(async P=>{const{address:k}=P,j=await B({block:T,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:k,value:Ue(A)},rpcStateOverride:C}).catch(()=>100000n);return 2n*BigInt(j)}));I+=U.reduce((P,k)=>P+k,0n)}return I}catch(a){throw H9(a,{...e,account:r,chain:t.chain})}}async function wD(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?Ue(r):n]},{dedupe:!!r});return Qo(s)}function vD(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>io(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>Tr(i))}function bD(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>io(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>io(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>Tr(o))}function J9(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function Q9(t,e,n){return t&e^~t&n}function Z9(t,e,n){return t&e^t&n^e&n}class X9 extends W${constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Tb(this.buffer)}update(e){qw(this),e=X0(e),Kl(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Tb(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){qw(this),F$(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Mp(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;J9(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Tb(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const aa=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),e7=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ca=new Uint32Array(64);class t7 extends X9{constructor(e=32){super(64,e,8,!1),this.A=aa[0]|0,this.B=aa[1]|0,this.C=aa[2]|0,this.D=aa[3]|0,this.E=aa[4]|0,this.F=aa[5]|0,this.G=aa[6]|0,this.H=aa[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)ca[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=ca[d-15],f=ca[d-2],p=Di(h,7)^Di(h,18)^h>>>3,g=Di(f,17)^Di(f,19)^f>>>10;ca[d]=g+ca[d-7]+p+ca[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Di(a,6)^Di(a,11)^Di(a,25),f=u+h+Q9(a,c,l)+e7[d]+ca[d]|0,g=(Di(r,2)^Di(r,13)^Di(r,22))+Z9(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Mp(ca)}destroy(){this.set(0,0,0,0,0,0,0,0),Mp(this.buffer)}}const n7=q$(()=>new t7),r7=n7;function s7(t,e){return r7(Yo(t,{strict:!1})?G0(t):t)}function i7(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=s7(e);return s.set([n],0),r==="bytes"?s:Tr(s)}function o7(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(i7({commitment:i,to:r,version:n}));return s}const nT=6,ED=32,WS=4096,_D=ED*WS,rT=_D*nT-1-1*WS*nT;class a7 extends ee{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class c7 extends ee{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function l7(t){const e=typeof t.data=="string"?io(t.data):t.data,n=un(e);if(!n)throw new c7;if(n>rT)throw new a7({maxSize:rT,size:n});const r=[];let s=!0,i=0;for(;s;){const o=US(new Uint8Array(_D));let a=0;for(;a<WS;){const c=e.slice(i,i+(ED-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>Tr(o.bytes))}function u7(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??l7({data:e}),i=t.commitments??vD({blobs:s,kzg:n,to:r}),o=t.proofs??bD({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function d7(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new P9({transaction:t})}const CD=["blobVersionedHashes","chainId","fees","gas","nonce","type"],sT=new Map;async function nv(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=CD,type:u}=e,d=n&&Yn(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await At(t,ng,"getBlock")({blockTag:"latest"}),f)}let g;async function w(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await At(t,tm,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const y=await w();h.nonce=await c.consume({address:d.address,chainId:y,client:t})}else h.nonce=await At(t,wD,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const y=vD({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const b=o7({commitments:y,to:"hex"});h.blobVersionedHashes=b}if(l.includes("sidecars")){const b=bD({blobs:r,commitments:y,kzg:o}),v=u7({blobs:r,commitments:y,proofs:b,to:"hex"});h.sidecars=v}}if(l.includes("chainId")&&(h.chainId=await w()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=d7(h)}catch{let y=sT.get(t.uid);if(typeof y>"u"){const b=await p();y=typeof(b==null?void 0:b.baseFeePerGas)=="bigint",sT.set(t.uid,y)}h.type=y?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const y=await p(),{maxFeePerGas:b,maxPriorityFeePerGas:v}=await X2(t,{block:y,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<v)throw new B9({maxPriorityFeePerGas:v});h.maxPriorityFeePerGas=v,h.maxFeePerGas=b}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new zS;if(typeof e.gasPrice>"u"){const y=await p(),{gasPrice:b}=await X2(t,{block:y,chain:s,request:h,type:"legacy"});h.gasPrice=b}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await At(t,yD,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),em(h),delete h.parameters,h}async function xD(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const Ob=new Z0(128);async function nm(t,e){var b,v,_,E;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...w}=e;if(typeof n>"u")throw new pu({docsPath:"/docs/actions/wallet/sendTransaction"});const y=n?Yn(n):null;try{em(e);const x=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await iD({authorization:i[0]}).catch(()=>{throw new ee("`to` is required. Could not infer from `authorizationList`.")})})();if((y==null?void 0:y.type)==="json-rpc"||y===null){let S;r!==null&&(S=await At(t,tm,"getChainId")({}),aD({currentChainId:S,chain:r}));const T=(_=(v=(b=t.chain)==null?void 0:b.formatters)==null?void 0:v.transactionRequest)==null?void 0:_.format,O=(T||tv)({...FS(w,{format:T}),accessList:s,authorizationList:i,blobs:o,chainId:S,data:a,from:y==null?void 0:y.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:x,type:p,value:g}),R=Ob.get(t.uid),F=R?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:F,params:[O]},{retryCount:0})}catch(W){if(R===!1)throw W;const B=W;if(B.name==="InvalidInputRpcError"||B.name==="InvalidParamsRpcError"||B.name==="MethodNotFoundRpcError"||B.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[O]},{retryCount:0}).then(I=>(Ob.set(t.uid,!0),I)).catch(I=>{const A=I;throw A.name==="MethodNotFoundRpcError"||A.name==="MethodNotSupportedRpcError"?(Ob.set(t.uid,!1),B):A});throw B}}if((y==null?void 0:y.type)==="local"){const S=await At(t,nv,"prepareTransactionRequest")({account:y,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:y.nonceManager,parameters:[...CD,"sidecars"],type:p,value:g,...w,to:x}),T=(E=r==null?void 0:r.serializers)==null?void 0:E.transaction,C=await y.signTransaction(S,{serializer:T});return await At(t,xD,"sendRawTransaction")({serializedTransaction:C})}throw(y==null?void 0:y.type)==="smart"?new Zy({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Zy({docsPath:"/docs/actions/wallet/sendTransaction",type:y==null?void 0:y.type})}catch(x){throw x instanceof Zy?x:uD(x,{...e,account:y,chain:e.chain||void 0})}}function h7(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=DS({abi:n,args:r,bytecode:s});return nm(t,{...i,...i.authorizationList?{to:null}:{},data:o})}const T_=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],xCe=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],f7=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],p7=[...f7,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}];function g7(t,e={}){typeof e.size<"u"&&ki(t,{size:e.size});const n=Tr(t,e);return Jo(n,e)}function m7(t,e={}){let n=t;if(typeof e.size<"u"&&(ki(n,{size:e.size}),n=Eh(n)),n.length>1||n[0]>1)throw new sF(n);return!!n[0]}function Bo(t,e={}){typeof e.size<"u"&&ki(t,{size:e.size});const n=Tr(t,e);return Qo(n,e)}function y7(t,e={}){let n=t;return typeof e.size<"u"&&(ki(n,{size:e.size}),n=Eh(n,{dir:"right"})),new TextDecoder().decode(n)}function rv(t,e){const n=typeof e=="string"?io(e):e,r=US(n);if(un(n)===0&&t.length>0)throw new J0;if(un(e)&&un(e)<32)throw new j$({data:typeof e=="string"?e:Tr(e),params:t,size:un(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=Pd(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function Pd(t,e,{staticPosition:n}){const r=$S(e.type);if(r){const[s,i]=r;return v7(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return C7(t,e,{staticPosition:n});if(e.type==="address")return w7(t);if(e.type==="bool")return b7(t);if(e.type.startsWith("bytes"))return E7(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return _7(t,e);if(e.type==="string")return x7(t,{staticPosition:n});throw new CF(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const iT=32,N_=32;function w7(t){const e=t.readBytes(32);return[Zg(Tr(X$(e,-20))),32]}function v7(t,e,{length:n,staticPosition:r}){if(!n){const o=Bo(t.readBytes(N_)),a=r+o,c=a+iT;t.setPosition(a);const l=Bo(t.readBytes(iT)),u=rg(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=Pd(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(rg(e)){const o=Bo(t.readBytes(N_)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=Pd(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=Pd(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function b7(t){return[m7(t.readBytes(32),{size:32}),32]}function E7(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=Bo(t.readBytes(32));t.setPosition(n+o);const a=Bo(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[Tr(c),32]}return[Tr(t.readBytes(Number.parseInt(s),32)),32]}function _7(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?g7(s,{signed:n}):Bo(s,{signed:n}),32]}function C7(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(rg(e)){const o=Bo(t.readBytes(N_)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=Pd(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=Pd(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function x7(t,{staticPosition:e}){const n=Bo(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Bo(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=y7(Eh(i));return t.setPosition(e+32),[o,32]}function rg(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(rg);const n=$S(t.type);return!!(n&&rg({...t,type:n[1]}))}const S7=t=>_h(G0(t));function A7(t){return S7(t)}const I7="1.0.8";let Js=class P_ extends Error{constructor(e,n={}){var o;const r=n.cause instanceof P_?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof P_&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${I7}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function na(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const SD=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,AD=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,ID=/^\(.+?\).*?$/,oT=/^tuple(?<array>(\[(\d*)\])*)$/;function k_(t){let e=t.type;if(oT.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=k_(i),s<n-1&&(e+=", ")}const r=na(oT,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,k_({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function ef(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=k_(s),r!==n-1&&(e+=", ")}return e}function T7(t){var e;return t.type==="function"?`function ${t.name}(${ef(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${ef(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${ef(t.inputs)})`:t.type==="error"?`error ${t.name}(${ef(t.inputs)})`:t.type==="constructor"?`constructor(${ef(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const TD=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function N7(t){return TD.test(t)}function P7(t){return na(TD,t)}const ND=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function k7(t){return ND.test(t)}function O7(t){return na(ND,t)}const PD=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function R7(t){return PD.test(t)}function $7(t){return na(PD,t)}const kD=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function OD(t){return kD.test(t)}function D7(t){return na(kD,t)}const RD=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function U7(t){return RD.test(t)}function j7(t){return na(RD,t)}const $D=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function L7(t){return $D.test(t)}function M7(t){return na($D,t)}const B7=/^receive\(\) external payable$/;function F7(t){return B7.test(t)}const z7=new Set(["indexed"]),O_=new Set(["calldata","memory","storage"]);class W7 extends Js{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class q7 extends Js{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class H7 extends Js{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class V7 extends Js{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class G7 extends Js{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class K7 extends Js{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class Y7 extends Js{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class xh extends Js{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class J7 extends Js{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class Q7 extends Js{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class Z7 extends Js{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class X7 extends Js{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function ez(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const Rb=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function tz(t,e={}){if(R7(t))return nz(t,e);if(k7(t))return rz(t,e);if(N7(t))return sz(t,e);if(U7(t))return iz(t,e);if(L7(t))return oz(t);if(F7(t))return{type:"receive",stateMutability:"payable"};throw new J7({signature:t})}function nz(t,e={}){const n=$7(t);if(!n)throw new xh({signature:t,type:"function"});const r=vi(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(Jl(r[a],{modifiers:O_,structs:e,type:"function"}));const o=[];if(n.returns){const a=vi(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(Jl(a[l],{modifiers:O_,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function rz(t,e={}){const n=O7(t);if(!n)throw new xh({signature:t,type:"event"});const r=vi(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Jl(r[o],{modifiers:z7,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function sz(t,e={}){const n=P7(t);if(!n)throw new xh({signature:t,type:"error"});const r=vi(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Jl(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function iz(t,e={}){const n=j7(t);if(!n)throw new xh({signature:t,type:"constructor"});const r=vi(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Jl(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function oz(t){const e=M7(t);if(!e)throw new xh({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const az=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,cz=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,lz=/^u?int$/;function Jl(t,e){var d,h;const n=ez(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(Rb.has(n))return Rb.get(n);const r=ID.test(t),s=na(r?cz:az,t);if(!s)throw new H7({param:t});if(s.name&&dz(s.name))throw new V7({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=vi(s.type),p=[],g=f.length;for(let w=0;w<g;w++)p.push(Jl(f[w],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(lz.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!DD(c))throw new q7({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new G7({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(O_.has(s.modifier)&&!hz(c,!!s.array))throw new K7({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return Rb.set(n,u),u}function vi(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?vi(a,[...e,n.trim()]):vi(a,e,`${n}${o}`,r);case"(":return vi(a,e,`${n}${o}`,r+1);case")":return vi(a,e,`${n}${o}`,r-1);default:return vi(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new X7({current:n,depth:r});return e.push(n.trim()),e}function DD(t){return t==="address"||t==="bool"||t==="function"||t==="string"||SD.test(t)||AD.test(t)}const uz=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function dz(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||SD.test(t)||AD.test(t)||uz.test(t)}function hz(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function fz(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!OD(a))continue;const c=D7(a);if(!c)throw new xh({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=Jl(p,{type:"struct"});u.push(g)}if(!u.length)throw new Q7({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=UD(c,e)}return r}const pz=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function UD(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(ID.test(o.type))r.push(o);else{const c=na(pz,o.type);if(!(c!=null&&c.type))throw new Y7({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new Z7({type:u});r.push({...o,type:`tuple${l??""}`,components:UD(e[u]??[],e,new Set([...n,u]))})}else if(DD(u))r.push(o);else throw new W7({type:u})}}return r}function jD(t){const e=fz(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];OD(i)||n.push(tz(i,e))}return n}function gz(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new ee("Unable to normalize signature.");return s}const mz=t=>{const e=typeof t=="string"?t:T7(t);return gz(e)};function LD(t){return A7(mz(t))}const qS=LD,HS=t=>Hw(LD(t),0,4);function VS(t){const{abi:e,args:n=[],name:r}=t,s=Yo(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?HS(a)===r:a.type==="event"?qS(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?R_(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=MD(a.inputs,o.inputs,n);if(l)throw new bF({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function R_(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Ni(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>R_(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>R_(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function MD(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return MD(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Ni(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Ni(n[r],{strict:!1}):!1)return o}}const $b="/docs/contract/decodeFunctionResult";function GS(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=VS({abi:e,args:n,name:r});if(!a)throw new zw(r,{docsPath:$b});i=a}if(i.type!=="function")throw new zw(void 0,{docsPath:$b});if(!i.outputs)throw new vF(i.name,{docsPath:$b});const o=rv(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const aT="/docs/contract/encodeFunctionData";function yz(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=VS({abi:e,args:n,name:r});if(!i)throw new zw(r,{docsPath:aT});s=i}if(s.type!=="function")throw new zw(void 0,{docsPath:aT});return{abi:[s],functionName:HS(Tc(s))}}function rm(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:yz(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?tD(s.inputs,e??[]):void 0;return Q0([i,o??"0x"])}function KS({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new v_({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new v_({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const BD={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},wz={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},vz={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function bz(t){const{abi:e,data:n}=t,r=Hw(n,0,4);if(r==="0x")throw new J0;const i=[...e||[],wz,vz].find(o=>o.type==="error"&&r===HS(Tc(o)));if(!i)throw new L$(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?rv(i.inputs,Hw(n,4)):void 0,errorName:i.name}}function FD({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?Sr(e[i]):e[i]}`).join(", ")})`}class Ez extends ee{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var w;const p=n?Yn(n):void 0;let g=Xg({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${jS(h)} ${((w=s==null?void 0:s.nativeCurrency)==null?void 0:w.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${rs(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${rs(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${rs(l)} gwei`,nonce:u});f&&(g+=`
${K9(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class zD extends ee{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=VS({abi:n,args:r,name:o}),l=c?FD({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?Tc(c,{includeName:!0}):void 0,d=Xg({address:s&&R9(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class $_ extends ee{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=bz({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=BD[f]}else{const f=u?Tc(u,{includeName:!0}):void 0,p=u&&h?FD({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof L$&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class _z extends ee{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class Cz extends ee{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class YS extends ee{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function xz(t,e){var r,s,i,o,a,c;if(!(t instanceof ee))return!1;const n=t.walk(l=>l instanceof $_);return n instanceof $_?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||n.reason===BD[50]):!1}function Sz(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return Yo(e)?e:null}function Az(t){return`[${t.slice(2)}]`}function Iz(t){const e=new Uint8Array(32).fill(0);return t?Sz(t)||_h(Nd(t)):Tr(e)}function Tz(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(Nd(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=Nd(s[i]);o.byteLength>255&&(o=Nd(Az(Iz(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const Nz=3;function Kw(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof YS?t:t instanceof ee?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof J0?new _z({functionName:i}):[Nz,Yl.code].includes(c)&&(l||u||d||h)?new $_({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof MS?u:h??d}):t;return new zD(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}const Pz="0.1.1";function kz(){return Pz}let WD=class D_ extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof D_){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof D_&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${kz()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return qD(this,e)}};function qD(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?qD(t.cause,e):e?null:t}function Oz(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new Dz({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}function Po(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new $z({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Rz(c,r):c}function Rz(t,e){return Oz(t,{dir:"left",size:e})}let $z=class extends WD{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}},Dz=class extends WD{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function Uz(t){return{address:t.address,amount:Po(t.amount),index:Po(t.index),validatorIndex:Po(t.validatorIndex)}}function jz(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:Po(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:Po(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:Po(t.gasLimit)},...typeof t.number=="bigint"&&{number:Po(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:Po(t.prevRandao)},...typeof t.time=="bigint"&&{time:Po(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(Uz)}}}const Lz="0x82ad56cb",Mz="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",Bz="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe";function Fz(t,{docsPath:e,...n}){const r=(()=>{const s=BS(t,n);return s instanceof ev?t:s})();return new Ez(r,{docsPath:e,...n})}function JS(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const Db=new Map;function HD({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>Db.delete(e),a=()=>c().map(({args:u})=>u),c=()=>Db.get(e)||[],l=u=>Db.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=JS();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function VD(t,e){var W,B,I,A;const{account:n=t.account,authorizationList:r,batch:s=!!((W=t.batch)!=null&&W.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:_,value:E,stateOverride:x,...S}=e,T=n?Yn(n):void 0;if(u&&(h||f))throw new ee("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&_)throw new ee("Cannot provide both `code` & `to` as parameters.");const C=u&&d,O=h&&f&&_&&d,R=C||O,F=C?qz({code:u,data:d}):O?Hz({data:d,factory:h,factoryData:f,to:_}):d;try{em(e);const P=(typeof i=="bigint"?Ue(i):void 0)||o,k=l?jz(l):void 0,j=gD(x),z=(A=(I=(B=t.chain)==null?void 0:B.formatters)==null?void 0:I.transactionRequest)==null?void 0:A.format,Q=(z||tv)({...FS(S,{format:z}),from:T==null?void 0:T.address,accessList:a,authorizationList:r,blobs:c,data:F,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:R?void 0:_,value:E});if(s&&zz({request:Q})&&!j&&!k)try{return await Wz(t,{...Q,blockNumber:i,blockTag:o})}catch(se){if(!(se instanceof oD)&&!(se instanceof v_))throw se}const Y=(()=>{const se=[Q,P];return j&&k?[...se,j,k]:j?[...se,j]:k?[...se,{},k]:se})(),Z=await t.request({method:"eth_call",params:Y});return Z==="0x"?{data:void 0}:{data:Z}}catch(U){const P=Vz(U),{offchainLookup:k,offchainLookupSignature:j}=await an(async()=>{const{offchainLookup:z,offchainLookupSignature:K}=await import("./ccip-DZgSh5rr.js");return{offchainLookup:z,offchainLookupSignature:K}},[]);if(t.ccipRead!==!1&&(P==null?void 0:P.slice(0,10))===j&&_)return{data:await k(t,{data:P,to:_})};throw R&&(P==null?void 0:P.slice(0,10))==="0x101bb98d"?new Cz({factory:h}):Fz(U,{...e,account:T,chain:t.chain})}}function zz({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(Lz)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function Wz(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new oD;l=KS({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?Ue(s):void 0)||i,{schedule:h}=HD({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(w){return w.reduce((b,{data:v})=>b+(v.length-2),0)>n*2},fn:async w=>{const y=w.map(_=>({allowFailure:!0,callData:_.data,target:_.to})),b=rm({abi:T_,args:[y],functionName:"aggregate3"}),v=await t.request({method:"eth_call",params:[{data:b,to:l},d]});return GS({abi:T_,args:[y],functionName:"aggregate3",data:v||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new YS({data:f});return f==="0x"?{data:void 0}:{data:f}}function qz(t){const{code:e,data:n}=t;return DS({abi:jD(["constructor(bytes, bytes)"]),bytecode:Mz,args:[e,n]})}function Hz(t){const{data:e,factory:n,factoryData:r,to:s}=t;return DS({abi:jD(["constructor(address, bytes, address, bytes)"]),bytecode:Bz,args:[s,e,n,r]})}function Vz(t){var n;if(!(t instanceof ee))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function QS(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=rm({abi:n,args:s,functionName:i});try{const{data:c}=await At(t,VD,"call")({...o,data:a,to:r});return GS({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw Kw(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function Gz(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=KS({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:p7,functionName:"reverse",args:[Gl(Tz(c))],blockNumber:n,blockTag:r},u=At(t,QS,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(xz(l))return null;throw l}}function Kz(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function Yz(t){const e=Kz(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}const Jz=new Map,Qz=new Map;function Zz(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,Jz),r=e(t,Qz);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function Xz(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=Zz(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const eW=t=>`blockNumber.${t}`;async function tW(t,{cacheTime:e=t.cacheTime}={}){const n=await Xz(()=>t.request({method:"eth_blockNumber"}),{cacheKey:eW(t.uid),cacheTime:e});return BigInt(n)}function GD(t,e){if(!Ni(t,{strict:!1}))throw new Pc({address:t});if(!Ni(e,{strict:!1}))throw new Pc({address:e});return t.toLowerCase()===e.toLowerCase()}const cT="/docs/contract/decodeEventLog";function nW(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new wF({docsPath:cT});const c=e.find(g=>g.type==="event"&&o===qS(Tc(g)));if(!(c&&"name"in c)||c.type!=="event")throw new M$(o,{docsPath:cT});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,w)=>[g,w]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[w,y]=f[g],b=a[g];if(!b)throw new B$({abiItem:c,param:w});h[d?y:w.name||y]=rW({param:w,value:b})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=rv(p,n);if(g)if(d)for(let w=0;w<u.length;w++)h[w]=h[w]??g.shift();else for(let w=0;w<p.length;w++)h[p[w].name]=g[w]}catch(g){if(i)throw g instanceof j$||g instanceof nD?new y_({abiItem:c,data:n,params:p,size:un(n)}):g}else if(i)throw new y_({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function rW({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(rv([t],e)||[])[0]}function sW(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===qS(u));if(!c)return null;const l=nW({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!iW({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof M$)return null;if(c instanceof y_||c instanceof B$){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function iW(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?GD(o,a):i.type==="string"||i.type==="bytes"?_h(G0(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function KD(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function oW(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>KD(i));return!("abi"in e)||!e.abi?s:sW({abi:e.abi,logs:s,strict:n})}async function YD(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?Ue(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,Ue(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,Ue(i)]},{dedupe:!!a}),!c)throw new cD({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||fD)(c)}const JD={"0x0":"reverted","0x1":"success"};function aW(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>KD(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Qo(t.transactionIndex):null,status:t.status?JD[t.status]:null,type:t.type?hD[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}async function lT(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new lD({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||aW)(n)}async function cW(t,e){var y;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((y=t.batch)==null?void 0:y.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=KS({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let b=0;b<l.length;b++){const{abi:v,address:_,args:E,functionName:x}=l[b];try{const S=rm({abi:v,args:E,functionName:x});p+=(S.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(S.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:S,target:_}]}catch(S){const T=Kw(S,{abi:v,address:_,args:E,docsPath:"/docs/contract/multicall",functionName:x,sender:n});if(!r)throw T;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:_}]}}const g=await Promise.allSettled(h.map(b=>At(t,QS,"readContract")({abi:T_,account:n,address:d,args:[b],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),w=[];for(let b=0;b<g.length;b++){const v=g[b];if(v.status==="rejected"){if(!r)throw v.reason;for(let E=0;E<h[b].length;E++)w.push({status:"failure",error:v.reason,result:void 0});continue}const _=v.value;for(let E=0;E<_.length;E++){const{returnData:x,success:S}=_[E],{callData:T}=h[b][E],{abi:C,address:O,functionName:R,args:F}=l[w.length];try{if(T==="0x")throw new J0;if(!S)throw new YS({data:x});const W=GS({abi:C,args:F,data:x,functionName:R});w.push(r?{result:W,status:"success"}:W)}catch(W){const B=Kw(W,{abi:C,address:O,args:F,docsPath:"/docs/contract/multicall",functionName:R});if(!r)throw B;w.push({error:B,result:void 0,status:"failure"})}}}if(w.length!==l.length)throw new ee("multicall results mismatch");return w}const Km=new Z0(8192);function lW(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(Km.get(n))return Km.get(n);const r=t().finally(()=>Km.delete(n));return Km.set(n,r),r}async function Yw(t){return new Promise(e=>setTimeout(e,t))}function Jw(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await Yw(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function uW(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new wl(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new wl(new Error("method not supported"),{method:l});const u=s?K0(`${c}.${Sr(n)}`):void 0;return lW(()=>Jw(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case Bp.code:throw new Bp(f);case Fp.code:throw new Fp(f);case zp.code:throw new zp(f,{method:n.method});case Wp.code:throw new Wp(f);case Yl.code:throw new Yl(f);case qp.code:throw new qp(f);case Hp.code:throw new Hp(f);case yc.code:throw new yc(f);case nh.code:throw new nh(f);case wl.code:throw new wl(f,{method:n.method});case rh.code:throw new rh(f);case Vp.code:throw new Vp(f);case vn.code:throw new vn(f);case Gp.code:throw new Gp(f);case Kp.code:throw new Kp(f);case Yp.code:throw new Yp(f);case Jp.code:throw new Jp(f);case oo.code:throw new oo(f);case sh.code:throw new sh(f);case Qp.code:throw new Qp(f);case Zp.code:throw new Zp(f);case Xp.code:throw new Xp(f);case eg.code:throw new eg(f);case tg.code:throw new tg(f);case ih.code:throw new ih(f);case 5e3:throw new vn(f);default:throw h instanceof ee?h:new D9(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof Xf){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>dW(h)}),{enabled:s,id:u})}}function dW(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===rh.code||t.code===Yl.code:t instanceof Xf&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function hW(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function QD(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function fW(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const uT=fW();function pW(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await QD(async({signal:p})=>{const g={...a,body:Array.isArray(r)?Sr(r.map(v=>({jsonrpc:"2.0",id:v.id??uT.take(),...v}))):Sr({jsonrpc:"2.0",id:r.id??uT.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},w=new Request(t,g),y=await(s==null?void 0:s(w,g))??{...g,url:t};return await fetch(y.url??t,y)},{errorInstance:new Z2({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new Xf({body:r,details:Sr(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof Xf||h instanceof Z2?h:new Xf({body:r,cause:h,url:t})}}}}class gW extends ee{constructor({domain:e}){super(`Invalid domain "${Sr(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class mW extends ee{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class yW extends ee{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function wW(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return Sr({domain:o,message:a,primaryType:r,types:s})}function vW(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(eD);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,w,y]=h;Ue(d,{signed:w==="int",size:Number.parseInt(y)/8})}if(u==="address"&&typeof d=="string"&&!Ni(d))throw new Pc({address:d});const f=u.match(s9);if(f){const[g,w]=f;if(w&&un(d)!==Number.parseInt(w))throw new EF({expectedSize:Number.parseInt(w),givenSize:un(d)})}const p=s[u];p&&(EW(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new gW({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new mW({primaryType:r,types:s})}function bW({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function EW(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new yW({type:t})}class _W extends ee{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function CW(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new _W({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}const Ub=new Map,dT=new Map;let xW=0;function sg(t,e,n){const r=++xW,s=()=>Ub.get(t)||[],i=()=>{const u=s();Ub.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=dT.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(Ub.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&dT.set(t,l),o}function ZS(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await Yw(c);const l=async()=>{s&&(await t({unpoll:i}),await Yw(r),l())};l()})(),i}function SW(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=Sr(["watchBlockNumber",t.uid,e,n,o]);return sg(d,{onBlockNumber:r,onError:s},h=>ZS(async()=>{var f;try{const p=await At(t,tW,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=Sr(["watchBlockNumber",t.uid,e,n]);return sg(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const y=t.transport.transports.find(b=>b.config.type==="webSocket"||b.config.type==="ipc");return y?y.value:t.transport}return t.transport})(),{unsubscribe:w}=await g.subscribe({params:["newHeads"],onData(y){var v;if(!f)return;const b=Jo((v=y.result)==null?void 0:v.number);h.onBlockNumber(b,c),c=b},onError(y){var b;(b=h.onError)==null||b.call(h,y)}});p=w,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function AW(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function IW(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=Sr(["watchPendingTransactions",t.uid,e,i]);return sg(l,{onTransactions:r,onError:n},u=>{let d;const h=ZS(async()=>{var f;try{if(!d)try{d=await At(t,Yz,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await At(t,oW,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await At(t,AW,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function TW(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>Zg(r))}async function NW(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function PW(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?Yn(n):void 0,i=r?[s==null?void 0:s.address,[Ue(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}const ZD="0x5792579257925792579257925792579257925792579257925792579257925792",XD=Ue(0,{size:32});async function kW(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?Yn(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?rm({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?Nc([p,f.dataSuffix]):p,to:f.to,value:f.value?Ue(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:Ue(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(b=>!b.optional)){const b="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new sh(new ee(b,{details:b}))}if(a&&d.length>1){const y="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new ih(new ee(y,{details:y}))}const p=[];for(const y of d){const b=nm(t,{account:u,chain:s,data:y.data,to:y.to,value:y.value?Jo(y.value):void 0});p.push(b),o>0&&await new Promise(v=>setTimeout(v,o))}const g=await Promise.allSettled(p);if(g.every(y=>y.status==="rejected"))throw g[0].reason;const w=g.map(y=>y.status==="fulfilled"?y.value:XD);return{id:Nc([...w,Ue(s.id,{size:32}),ZD])}}throw uD(h,{...e,account:u,chain:e.chain})}}async function e5(t,e){async function n(u){if(u.endsWith(ZD.slice(2))){const h=Eh(w_(u,-64,-32)),f=w_(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(w=>XD.slice(2)!==w?t.request({method:"eth_getTransactionReceipt",params:[`0x${w}`]},{dedupe:!0}):void 0)),g=p.some(w=>w===null)?100:p.every(w=>(w==null?void 0:w.status)==="0x1")?200:p.every(w=>(w==null?void 0:w.status)==="0x0")?500:600;return{atomic:!1,chainId:Qo(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?Qo(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:Jo(u.blockNumber),gasUsed:Jo(u.gasUsed),status:JD[u.status]})))??[],statusCode:l,status:c,version:o}}async function OW(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function RW(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=Sr(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=JS();let u;const d=sg(o,{resolve:c,reject:l},h=>{const f=ZS(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await e5(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new $W({id:n}))},i):void 0,await a}class $W extends ee{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}async function DW(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=Sr(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:w,reject:y}=JS(),b=a?setTimeout(()=>{p(),f(),y(new O9({hash:n}))},a):void 0;return f=sg(c,{onReplaced:r,resolve:w,reject:y},v=>{p=At(t,SW,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(_){const E=S=>{clearTimeout(b),p(),S(),f()};let x=_;if(!h)try{if(d){if(e>1&&(!d.blockNumber||x-d.blockNumber+1n<e))return;E(()=>v.resolve(d));return}if(l||(h=!0,await Jw(async()=>{l=await At(t,YD,"getTransaction")({hash:n}),l.blockNumber&&(x=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await At(t,lT,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||x-d.blockNumber+1n<e))return;E(()=>v.resolve(d))}catch(S){if(S instanceof cD||S instanceof lD){if(!l){h=!1;return}try{u=l,h=!0;const T=await Jw(()=>At(t,ng,"getBlock")({blockNumber:x,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:R})=>R instanceof dD});h=!1;const C=T.transactions.find(({from:R,nonce:F})=>R===u.from&&F===u.nonce);if(!C||(d=await At(t,lT,"getTransactionReceipt")({hash:C.hash}),e>1&&(!d.blockNumber||x-d.blockNumber+1n<e)))return;let O="replaced";C.to===u.to&&C.value===u.value&&C.input===u.input?O="repriced":C.from===C.to&&C.value===0n&&(O="cancelled"),E(()=>{var R;(R=v.onReplaced)==null||R.call(v,{reason:O,replacedTransaction:u,transaction:C,transactionReceipt:d}),v.resolve(d)})}catch(T){E(()=>v.reject(T))}}else E(()=>v.reject(S))}}})}),g}async function UW(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>nc(n))}async function jW(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function t5(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new pu({docsPath:"/docs/eip7702/prepareAuthorization"});const i=Yn(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:Yn(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await At(t,tm,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await At(t,wD,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&GD(o.address,i.address))&&(a.nonce+=1)),a}async function LW(t,e){const{account:n=t.account}=e;if(!n)throw new pu({docsPath:"/docs/eip7702/signAuthorization"});const r=Yn(n);if(!r.signAuthorization)throw new Zy({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await t5(t,e);return r.signAuthorization(s)}async function MW(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new pu({docsPath:"/docs/actions/wallet/signTransaction"});const i=Yn(n);em({account:i,...e});const o=await At(t,tm,"getChainId")({});r!==null&&aD({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||tv;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:Ue(o),from:i.address}]},{retryCount:0})}async function n5(t,{account:e=t.account,message:n}){if(!e)throw new pu({docsPath:"/docs/actions/wallet/signMessage"});const r=Yn(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?K0(n):n.raw instanceof Uint8Array?Gl(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function BW(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new pu({docsPath:"/docs/actions/wallet/signTypedData"});const o=Yn(n),a={EIP712Domain:bW({domain:r}),...e.types};if(vW({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=wW({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function FW(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:Ue(e)}]},{retryCount:0})}async function zW(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}async function r5(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new pu({docsPath:"/docs/contract/writeContract"});const l=r?Yn(r):null,u=rm({abi:n,args:i,functionName:a});try{return await At(t,nm,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw Kw(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function Es(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const Xy="2.17.3",WW=()=>`@wagmi/core@${Xy}`;var s5=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Qw,i5;let ra=class U_ extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return WW()}constructor(e,n={}){var i;super(),Qw.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof U_?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof U_&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return s5(this,Qw,"m",i5).call(this,this,e)}};Qw=new WeakSet,i5=function t(e,n){return n!=null&&n(e)?e:e.cause?s5(this,Qw,"m",t).call(this,e.cause,n):e};class ig extends ra{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class qW extends ra{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class HW extends ra{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class VW extends ra{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class GW extends ra{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class KW extends ra{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function ew(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new qW;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const j_=256;let Ym=j_,Jm;function o5(t=11){if(!Jm||Ym+t>j_*2){Jm="",Ym=0;for(let e=0;e<j_;e++)Jm+=(256+Math.random()*256|0).toString(16).substring(1)}return Jm.substring(Ym,Ym+++t)}function a5(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?Yn(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},w={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:o5()};function y(b){return v=>{const _=v(b);for(const x in w)delete _[x];const E={...b,..._};return Object.assign(E,{extend:y(E)})}}return Object.assign(w,{extend:y(w)})}function XS({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=o5();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:uW(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function YW(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>XS({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function hT(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=JW,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=XS({key:n,name:r,async request({method:g,params:w}){let y;const b=async(v=0)=>{const _=h[v]({...d,chain:c,retryCount:0,timeout:u});try{const E=await _.request({method:g,params:w});return f({method:g,params:w,response:E,transport:_,status:"success"}),E}catch(E){if(f({error:E,method:g,params:w,transport:_,status:"error"}),i(E)||v===h.length-1||(y??(y=h.slice(v+1).some(x=>{const{include:S,exclude:T}=x({chain:c}).config.methods||{};return S?S.includes(g):T?!T.includes(g):!0})),!y))throw E;return b(v+1)}};return b()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};QW({chain:c,interval:g.interval??l,onTransports:w=>h=w,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function JW(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===nh.code||t.code===vn.code||yl.nodeMessage.test(t.message)||t.code===5e3))}function QW({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const w=g({chain:t,retryCount:0,timeout:i}),y=Date.now();let b,v;try{await(r?r({transport:w}):w.request({method:"net_listening"})),v=1}catch{v=0}finally{b=Date.now()}return{latency:b-y,success:v}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:w})=>w)))),p=o.map((g,w)=>{const y=u.map(x=>x[w].latency),v=1-y.reduce((x,S)=>x+S,0)/y.length/f,_=u.map(x=>x[w].success),E=_.reduce((x,S)=>x+S,0)/_.length;return E===0?[0,w]:[l*v+c*E,w]}).sort((g,w)=>w[0]-g[0]);n(p.map(([,g])=>o[g])),await Yw(e),d()};d()}class ZW extends ee{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function Qm(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},w=e.retryCount??h,y=f??e.timeout??1e4,b=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!b)throw new ZW;const v=pW(b,{fetchOptions:r,onRequest:a,onResponse:c,timeout:y});return XS({key:s,methods:i,name:o,async request({method:_,params:E}){const x={method:_,params:E},{schedule:S}=HD({id:b,wait:g,shouldSplitBatch(R){return R.length>p},fn:R=>v.request({body:R}),sort:(R,F)=>R.id-F.id}),T=async R=>n?S(R):[await v.request({body:R})],[{error:C,result:O}]=await T(x);if(u)return{error:C,result:O};if(C)throw new MS({body:x,error:C,url:b});return O},retryCount:w,retryDelay:l,timeout:y,type:"http"},{fetchOptions:r,url:b})}}function XW(t){return{addChain:e=>hF(t,e),deployContract:e=>h7(t,e),getAddresses:()=>TW(t),getCallsStatus:e=>e5(t,e),getCapabilities:e=>PW(t,e),getChainId:()=>tm(t),getPermissions:()=>NW(t),prepareAuthorization:e=>t5(t,e),prepareTransactionRequest:e=>nv(t,e),requestAddresses:()=>UW(t),requestPermissions:e=>jW(t,e),sendCalls:e=>kW(t,e),sendRawTransaction:e=>xD(t,e),sendTransaction:e=>nm(t,e),showCallsStatus:e=>OW(t,e),signAuthorization:e=>LW(t,e),signMessage:e=>n5(t,e),signTransaction:e=>MW(t,e),signTypedData:e=>BW(t,e),switchChain:e=>FW(t,e),waitForCallsStatus:e=>RW(t,e),watchAsset:e=>zW(t,e),writeContract:e=>r5(t,e)}}async function sm(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new KW({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new HW;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new GW({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=Yn(e.account??n.accounts[0]);if(o&&(o.address=nc(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new VW({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return a5({account:o,chain:a,name:"Connector Client",transport:l=>YW(c)({...l,retryCount:0})})}async function c5(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function eq(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await sm(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return Es(o,yD,"estimateGas")({...s,account:i})}function l5(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(T9[t])}function kd(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function tq(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return Es(o,cW,"multicall")({allowFailure:n,contracts:s,...i})}function nq(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Es(s,QS,"readContract")(r)}async function rq(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>tq(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof zD)throw c;const l=()=>o.map(u=>nq(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function sq(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await fT(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await fT(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=D$(Eh(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await Es(c,mD,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:Ch(u,l5(a)),symbol:d.nativeCurrency.symbol,value:u}}async function fT(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await rq(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=Ch(c??"0",l5(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function pT(t){return t.state.chainId}function Ql(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Ql(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!Ql(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let Zm=[];function qi(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||Ql(Zm,e)?Zm:(Zm=e,e)}let jb=[];function gT(t){const e=t.connectors;return Ql(jb,e)?jb:(jb=e,e)}function iq(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Es(s,Gz,"getEnsName")(r)}async function oq(t,e={}){return(await sm(t,e)).extend(XW)}async function aq(t,e){const{account:n,chainId:r,...s}=e,i=n??kd(t).address,o=t.getClient({chainId:r});return Es(o,nv,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let Lb=!1;async function L_(t,e={}){var l,u;if(Lb)return[];Lb=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const w=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:w}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),Lb=!1,a}async function cq(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await sm(t,{account:n??void 0,chainId:r,connector:s}),await Es(o,nm,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function lq(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await sm(t,{account:n,connector:r}),Es(i,n5,"signMessage")({...s,...n?{account:n}:{}})}class ka extends ra{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class uq extends ra{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function mT(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new uq({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new ig;return t.setState(a=>({...a,chainId:r})),i}function u5(t,e){const{onChange:n}=e;return t.subscribe(()=>kd(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return Ql(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function dq(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function hq(t,e){const{onChange:n}=e;return t.subscribe(()=>qi(t),n,{equalityFn:Ql})}function d5(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function fq(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=Es(l,IW,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}async function pq(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await Es(i,DW,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await Es(i,YD,"getTransaction")({hash:a.transactionHash}),d=await Es(i,VD,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?D$(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function gq(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await sm(t,{account:n??void 0,chainId:r,connector:s}),await Es(o,r5,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function ICe(t){return t}sv.type="injected";function sv(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...mq[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:sv.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,w,y,b;const d=await this.getProvider();if(!d)throw new ka;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(w=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:w.map(_=>nc(_)),h.length>0&&(h=await this.getAccounts())}catch(v){const _=v;if(_.code===vn.code)throw new vn(_);if(_.code===yc.code)throw _}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(E=>nc(E))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let v=await this.getChainId();if(l&&v!==l){const _=await this.switchChain({chainId:l}).catch(E=>{if(E.code===vn.code)throw E;return{id:v}});v=(_==null?void 0:_.id)??v}return e&&await((y=c.storage)==null?void 0:y.removeItem(`${this.id}.disconnected`)),t.target||await((b=c.storage)==null?void 0:b.setItem("injected.connected",!0)),{accounts:h,chainId:v}}catch(v){const _=v;throw _.code===vn.code?new vn(_):_.code===yc.code?new yc(_):_}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new ka;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await QD(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new ka;return(await l.request({method:"eth_accounts"})).map(d=>nc(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new ka;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=tw(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(y=>window.addEventListener("ethereum#initialized",()=>y(p()),{once:!0}))]:[],new Promise(y=>setTimeout(()=>y(p()),g))]))return!0}throw new ka}return!!(await Jw(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,w,y;const d=await this.getProvider();if(!d)throw new ka;const h=c.chains.find(b=>b.id===u);if(!h)throw new oo(new ig);const f=new Promise(b=>{const v=_=>{"chainId"in _&&_.chainId===u&&(c.emitter.off("change",v),b())};c.emitter.on("change",v)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:Ue(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(b){const v=b;if(v.code===4902||((g=(p=v==null?void 0:v.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:_,...E}=h.blockExplorers??{};let x;l!=null&&l.blockExplorerUrls?x=l.blockExplorerUrls:_&&(x=[_.url,...Object.values(E).map(C=>C.url)]);let S;(w=l==null?void 0:l.rpcUrls)!=null&&w.length?S=l.rpcUrls:S=[((y=h.rpcUrls.default)==null?void 0:y.http[0])??""];const T={blockExplorerUrls:x,chainId:Ue(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:S};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[T]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new vn(new Error("User rejected switch after adding network."))}),f]),h}catch(_){throw new vn(_)}throw v.code===vn.code?new vn(v):new oo(v)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>nc(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const mq={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:tw(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return tw(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:tw(t,"isPhantom")}}};function tw(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function yq(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function wq(){const t=new Set;let e=[];const n=()=>yq(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const vq=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},bq=vq;function Eq(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const M_=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return M_(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return M_(r)(n)}}}},_q=(t,e)=>(n,r,s)=>{let i={storage:Eq(()=>localStorage),partialize:g=>g,version:0,merge:(g,w)=>({...w,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,w)=>{d(g,w),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,w;if(!l)return;o=!1,a.forEach(b=>{var v;return b((v=r())!=null?v:h)});const y=((w=i.onRehydrateStorage)==null?void 0:w.call(i,(g=r())!=null?g:h))||void 0;return M_(l.getItem.bind(l))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var v;const[_,E]=b;if(f=i.merge(E,(v=r())!=null?v:h),n(f,!0),_)return u()}).then(()=>{y==null||y(f,void 0),f=r(),o=!0,c.forEach(b=>b(f))}).catch(b=>{y==null||y(void 0,b)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},Cq=_q,yT=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},Mb=t=>t?yT(t):yT;var h5={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var w=this._events[g],y=arguments.length,b,v;if(w.fn){switch(w.once&&this.removeListener(l,w.fn,void 0,!0),y){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,u),!0;case 3:return w.fn.call(w.context,u,d),!0;case 4:return w.fn.call(w.context,u,d,h),!0;case 5:return w.fn.call(w.context,u,d,h,f),!0;case 6:return w.fn.call(w.context,u,d,h,f,p),!0}for(v=1,b=new Array(y-1);v<y;v++)b[v-1]=arguments[v];w.fn.apply(w.context,b)}else{var _=w.length,E;for(v=0;v<_;v++)switch(w[v].once&&this.removeListener(l,w[v].fn,void 0,!0),y){case 1:w[v].fn.call(w[v].context);break;case 2:w[v].fn.call(w[v].context,u);break;case 3:w[v].fn.call(w[v].context,u,d);break;case 4:w[v].fn.call(w[v].context,u,d,h);break;default:if(!b)for(E=1,b=new Array(y-1);E<y;E++)b[E-1]=arguments[E];w[v].fn.apply(w[v].context,b)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,w=[],y=p.length;g<y;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&w.push(p[g]);w.length?this._events[f]=w.length===1?w[0]:w:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(h5);var xq=h5.exports;const Sq=du(xq);class Aq{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new Sq})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function Iq(t){return new Aq(t)}function Tq(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function wT(t,e){return t.slice(0,e).join(".")||"."}function vT(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function Nq(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=vT(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=vT(s,c);if(u!==0)return r?e.call(this,a,c,wT(i,u)):`[ref=${wT(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function Pq(t,e,n,r){return JSON.stringify(t,Nq((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function kq(t){const{deserialize:e=Tq,key:n="wagmi",serialize:r=Pq,storage:s=f5}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const f5={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function Oq(){const t=typeof window<"u"&&window.localStorage?window.localStorage:f5;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const B_=256;let Xm=B_,ey;function Rq(t=11){if(!ey||Xm+t>B_*2){ey="",Xm=0;for(let e=0;e<B_;e++)ey+=(256+Math.random()*256|0).toString(16).substring(1)}return ey.substring(Xm,Xm+++t)}function $q(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=kq({storage:Oq()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?wq():void 0,a=Mb(()=>i.chains),c=Mb(()=>{const E=[],x=new Set;for(const S of i.connectors??[]){const T=l(S);if(E.push(T),!s&&T.rdns){const C=typeof T.rdns=="string"?[T.rdns]:T.rdns;for(const O of C)x.add(O)}}if(!s&&o){const S=o.getProviders();for(const T of S)x.has(T.info.rdns)||E.push(l(u(T)))}return E});function l(E){var T;const x=Iq(Rq()),S={...E({emitter:x,chains:a.getState(),storage:n,transports:i.transports}),emitter:x,uid:x.uid};return x.on("connect",v),(T=S.setup)==null||T.call(S),S}function u(E){const{info:x}=E,S=E.provider;return sv({target:{...x,id:x.rdns,provider:S}})}const d=new Map;function h(E={}){const x=E.chainId??w.getState().chainId,S=a.getState().find(C=>C.id===x);if(E.chainId&&!S)throw new ig;{const C=d.get(w.getState().chainId);if(C&&!S)return C;if(!S)throw new ig}{const C=d.get(x);if(C)return C}let T;if(i.client)T=i.client({chain:S});else{const C=S.id,O=a.getState().map(W=>W.id),R={},F=Object.entries(i);for(const[W,B]of F)if(!(W==="chains"||W==="client"||W==="connectors"||W==="transports"))if(typeof B=="object")if(C in B)R[W]=B[C];else{if(O.some(A=>A in B))continue;R[W]=B}else R[W]=B;T=a5({...R,chain:S,batch:R.batch??{multicall:!0},transport:W=>i.transports[C]({...W,connectors:c})})}return d.set(x,T),T}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";Xy.startsWith(g)?p=Number.parseInt(Xy.replace(g,"")):p=Number.parseInt(Xy.split(".")[0]??"0");const w=Mb(bq(n?Cq(f,{migrate(E,x){if(x===p)return E;const S=f(),T=y(E,S.chainId);return{...S,chainId:T}},name:"store",partialize(E){return{connections:{__type:"Map",value:Array.from(E.connections.entries()).map(([x,S])=>{const{id:T,name:C,type:O,uid:R}=S.connector;return[x,{...S,connector:{id:T,name:C,type:O,uid:R}}]})},chainId:E.chainId,current:E.current}},merge(E,x){typeof E=="object"&&E&&"status"in E&&delete E.status;const S=y(E,x.chainId);return{...x,...E,chainId:S}},skipHydration:s,storage:n,version:p}):f));w.setState(f());function y(E,x){return E&&typeof E=="object"&&"chainId"in E&&typeof E.chainId=="number"&&a.getState().some(S=>S.id===E.chainId)?E.chainId:x}r&&w.subscribe(({connections:E,current:x})=>{var S;return x?(S=E.get(x))==null?void 0:S.chainId:void 0},E=>{if(a.getState().some(S=>S.id===E))return w.setState(S=>({...S,chainId:E??S.chainId}))}),o==null||o.subscribe(E=>{const x=new Set,S=new Set;for(const C of c.getState())if(x.add(C.id),C.rdns){const O=typeof C.rdns=="string"?[C.rdns]:C.rdns;for(const R of O)S.add(R)}const T=[];for(const C of E){if(S.has(C.info.rdns))continue;const O=l(u(C));x.has(O.id)||T.push(O)}n&&!w.persist.hasHydrated()||c.setState(C=>[...C,...T],!0)});function b(E){w.setState(x=>{const S=x.connections.get(E.uid);return S?{...x,connections:new Map(x.connections).set(E.uid,{accounts:E.accounts??S.accounts,chainId:E.chainId??S.chainId,connector:S.connector})}:x})}function v(E){w.getState().status==="connecting"||w.getState().status==="reconnecting"||w.setState(x=>{const S=c.getState().find(T=>T.uid===E.uid);return S?(S.emitter.listenerCount("connect")&&S.emitter.off("connect",b),S.emitter.listenerCount("change")||S.emitter.on("change",b),S.emitter.listenerCount("disconnect")||S.emitter.on("disconnect",_),{...x,connections:new Map(x.connections).set(E.uid,{accounts:E.accounts,chainId:E.chainId,connector:S}),current:E.uid,status:"connected"}):x})}function _(E){w.setState(x=>{const S=x.connections.get(E.uid);if(S){const C=S.connector;C.emitter.listenerCount("change")&&S.connector.emitter.off("change",b),C.emitter.listenerCount("disconnect")&&S.connector.emitter.off("disconnect",_),C.emitter.listenerCount("connect")||S.connector.emitter.on("connect",v)}if(x.connections.delete(E.uid),x.connections.size===0)return{...x,connections:new Map,current:null,status:"disconnected"};const T=x.connections.values().next().value;return{...x,connections:new Map(x.connections),current:T.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return w.getState()},setState(E){let x;typeof E=="function"?x=E(w.getState()):x=E;const S=f();typeof x!="object"&&(x=S),Object.keys(S).some(C=>!(C in x))&&(x=S),w.setState(x,!0)},subscribe(E,x,S){return w.subscribe(E,x,S?{...S,fireImmediately:S.emitImmediately}:void 0)},_internal:{mipd:o,store:w,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(E){const x=typeof E=="function"?E(a.getState()):E;if(x.length!==0)return a.setState(x,!0)},subscribe(E){return a.subscribe(E)}},connectors:{providerDetailToConnector:u,setup:l,setState(E){return c.setState(typeof E=="function"?E(c.getState()):E,!0)},subscribe(E){return c.subscribe(E)}},events:{change:b,connect:v,disconnect:_}}}}function Dq(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?L_(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function Uq(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=Dq(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=D.useRef(!0);return D.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const p5=D.createContext(void 0);function jq(t){const{children:e,config:n}=t,r={value:n};return D.createElement(Uq,t,D.createElement(p5.Provider,r,e))}const Lq="2.15.6",Mq=()=>`wagmi@${Lq}`;let Bq=class extends ra{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return Mq()}};class Fq extends Bq{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function Fc(t={}){const e=t.config??D.useContext(p5);if(!e)throw new Fq;return e}var g5={exports:{}},m5={},y5={exports:{}},w5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oh=D;function zq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wq=typeof Object.is=="function"?Object.is:zq,qq=oh.useState,Hq=oh.useEffect,Vq=oh.useLayoutEffect,Gq=oh.useDebugValue;function Kq(t,e){var n=e(),r=qq({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Vq(function(){s.value=n,s.getSnapshot=e,Bb(s)&&i({inst:s})},[t,n,e]),Hq(function(){return Bb(s)&&i({inst:s}),t(function(){Bb(s)&&i({inst:s})})},[t]),Gq(n),n}function Bb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wq(t,n)}catch{return!0}}function Yq(t,e){return e()}var Jq=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Yq:Kq;w5.useSyncExternalStore=oh.useSyncExternalStore!==void 0?oh.useSyncExternalStore:Jq;y5.exports=w5;var Qq=y5.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iv=D,Zq=Qq;function Xq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var eH=typeof Object.is=="function"?Object.is:Xq,tH=Zq.useSyncExternalStore,nH=iv.useRef,rH=iv.useEffect,sH=iv.useMemo,iH=iv.useDebugValue;m5.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=nH(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=sH(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,eH(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=tH(t,i[0],i[1]);return rH(function(){o.hasValue=!0,o.value=a},[a]),iH(a),a};g5.exports=m5;var oH=g5.exports;const Fb=t=>typeof t=="object"&&!Array.isArray(t);function aH(t,e,n=e,r=Ql){const s=D.useRef([]),i=oH.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(Fb(o)&&Fb(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return D.useMemo(()=>{if(Fb(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function im(t={}){const e=Fc(t);return aH(n=>u5(e,{onChange:n}),()=>kd(e))}var Sh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Zl=typeof window>"u"||"Deno"in globalThis;function _r(){}function cH(t,e){return typeof t=="function"?t(e):t}function F_(t){return typeof t=="number"&&t>=0&&t!==1/0}function v5(t,e){return Math.max(t+(e||0)-Date.now(),0)}function wc(t,e){return typeof t=="function"?t(e):t}function yi(t,e){return typeof t=="function"?t(e):t}function bT(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==eA(o,e.options))return!1}else if(!og(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function ET(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Xl(e.options.mutationKey)!==Xl(i))return!1}else if(!og(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function eA(t,e){return((e==null?void 0:e.queryKeyHashFn)||Xl)(t)}function Xl(t){return JSON.stringify(t,(e,n)=>z_(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function og(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>og(t[n],e[n])):!1}function b5(t,e){if(t===e)return t;const n=_T(t)&&_T(e);if(n||z_(t)&&z_(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=b5(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function Zw(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function _T(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function z_(t){if(!CT(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!CT(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function CT(t){return Object.prototype.toString.call(t)==="[object Object]"}function lH(t){return new Promise(e=>{setTimeout(e,t)})}function W_(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?b5(t,e):e}function uH(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function dH(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var tA=Symbol();function E5(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===tA?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function _5(t,e){return typeof t=="function"?t(...e):!!t}var Al,qa,jd,aR,hH=(aR=class extends Sh{constructor(){super();Ae(this,Al);Ae(this,qa);Ae(this,jd);ge(this,jd,e=>{if(!Zl&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){M(this,qa)||this.setEventListener(M(this,jd))}onUnsubscribe(){var e;this.hasListeners()||((e=M(this,qa))==null||e.call(this),ge(this,qa,void 0))}setEventListener(e){var n;ge(this,jd,e),(n=M(this,qa))==null||n.call(this),ge(this,qa,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){M(this,Al)!==e&&(ge(this,Al,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof M(this,Al)=="boolean"?M(this,Al):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Al=new WeakMap,qa=new WeakMap,jd=new WeakMap,aR),nA=new hH,Ld,Ha,Md,cR,fH=(cR=class extends Sh{constructor(){super();Ae(this,Ld,!0);Ae(this,Ha);Ae(this,Md);ge(this,Md,e=>{if(!Zl&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){M(this,Ha)||this.setEventListener(M(this,Md))}onUnsubscribe(){var e;this.hasListeners()||((e=M(this,Ha))==null||e.call(this),ge(this,Ha,void 0))}setEventListener(e){var n;ge(this,Md,e),(n=M(this,Ha))==null||n.call(this),ge(this,Ha,e(this.setOnline.bind(this)))}setOnline(e){M(this,Ld)!==e&&(ge(this,Ld,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return M(this,Ld)}},Ld=new WeakMap,Ha=new WeakMap,Md=new WeakMap,cR),Xw=new fH;function q_(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function pH(t){return Math.min(1e3*2**t,3e4)}function C5(t){return(t??"online")==="online"?Xw.isOnline():!0}var x5=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function zb(t){return t instanceof x5}function S5(t){let e=!1,n=0,r=!1,s;const i=q_(),o=g=>{var w;r||(h(new x5(g)),(w=t.abort)==null||w.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>nA.isFocused()&&(t.networkMode==="always"||Xw.isOnline())&&t.canRun(),u=()=>C5(t.networkMode)&&t.canRun(),d=g=>{var w;r||(r=!0,(w=t.onSuccess)==null||w.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var w;r||(r=!0,(w=t.onError)==null||w.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var w;s=y=>{(r||l())&&g(y)},(w=t.onPause)==null||w.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const w=n===0?t.initialPromise:void 0;try{g=w??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(d).catch(y=>{var x;if(r)return;const b=t.retry??(Zl?0:3),v=t.retryDelay??pH,_=typeof v=="function"?v(n,y):v,E=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,y);if(e||!E){h(y);return}n++,(x=t.onFail)==null||x.call(t,n,y),lH(_).then(()=>l()?void 0:f()).then(()=>{e?h(y):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var gH=t=>setTimeout(t,0);function mH(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=gH;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var _n=mH(),Il,lR,A5=(lR=class{constructor(){Ae(this,Il)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),F_(this.gcTime)&&ge(this,Il,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Zl?1/0:5*60*1e3))}clearGcTimeout(){M(this,Il)&&(clearTimeout(M(this,Il)),ge(this,Il,void 0))}},Il=new WeakMap,lR),Bd,Tl,Ls,Nl,dr,zg,Pl,hi,Co,uR,yH=(uR=class extends A5{constructor(e){super();Ae(this,hi);Ae(this,Bd);Ae(this,Tl);Ae(this,Ls);Ae(this,Nl);Ae(this,dr);Ae(this,zg);Ae(this,Pl);ge(this,Pl,!1),ge(this,zg,e.defaultOptions),this.setOptions(e.options),this.observers=[],ge(this,Nl,e.client),ge(this,Ls,M(this,Nl).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ge(this,Bd,wH(this.options)),this.state=e.state??M(this,Bd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=M(this,dr))==null?void 0:e.promise}setOptions(e){this.options={...M(this,zg),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&M(this,Ls).remove(this)}setData(e,n){const r=W_(this.state.data,e,this.options);return He(this,hi,Co).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){He(this,hi,Co).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=M(this,dr))==null?void 0:r.promise;return(s=M(this,dr))==null||s.cancel(e),n?n.then(_r).catch(_r):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(M(this,Bd))}isActive(){return this.observers.some(e=>yi(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===tA||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>wc(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!v5(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=M(this,dr))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=M(this,dr))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),M(this,Ls).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(M(this,dr)&&(M(this,Pl)?M(this,dr).cancel({revert:!0}):M(this,dr).cancelRetry()),this.scheduleGc()),M(this,Ls).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||He(this,hi,Co).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(M(this,dr))return M(this,dr).continueRetry(),M(this,dr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(ge(this,Pl,!0),r.signal)})},i=()=>{const h=E5(this.options,n),p=(()=>{const g={client:M(this,Nl),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return ge(this,Pl,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:M(this,Nl),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),ge(this,Tl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&He(this,hi,Co).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,w;zb(h)&&h.silent||He(this,hi,Co).call(this,{type:"error",error:h}),zb(h)||((p=(f=M(this,Ls).config).onError)==null||p.call(f,h,this),(w=(g=M(this,Ls).config).onSettled)==null||w.call(g,this.state.data,h,this)),this.scheduleGc()};return ge(this,dr,S5({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,w;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){c(y);return}(p=(f=M(this,Ls).config).onSuccess)==null||p.call(f,h,this),(w=(g=M(this,Ls).config).onSettled)==null||w.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{He(this,hi,Co).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{He(this,hi,Co).call(this,{type:"pause"})},onContinue:()=>{He(this,hi,Co).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),M(this,dr).start()}},Bd=new WeakMap,Tl=new WeakMap,Ls=new WeakMap,Nl=new WeakMap,dr=new WeakMap,zg=new WeakMap,Pl=new WeakMap,hi=new WeakSet,Co=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...I5(r.data,this.options),fetchMeta:e.meta??null};case"success":return ge(this,Tl,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return zb(s)&&s.revert&&M(this,Tl)?{...M(this,Tl),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),_n.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),M(this,Ls).notify({query:this,type:"updated",action:e})})},uR);function I5(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:C5(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function wH(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Hi,dR,vH=(dR=class extends Sh{constructor(e={}){super();Ae(this,Hi);this.config=e,ge(this,Hi,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??eA(s,n);let o=this.get(i);return o||(o=new yH({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){M(this,Hi).has(e.queryHash)||(M(this,Hi).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=M(this,Hi).get(e.queryHash);n&&(e.destroy(),n===e&&M(this,Hi).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){_n.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return M(this,Hi).get(e)}getAll(){return[...M(this,Hi).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>bT(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>bT(e,r)):n}notify(e){_n.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){_n.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){_n.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Hi=new WeakMap,dR),Vi,vr,kl,Gi,Sa,hR,bH=(hR=class extends A5{constructor(e){super();Ae(this,Gi);Ae(this,Vi);Ae(this,vr);Ae(this,kl);this.mutationId=e.mutationId,ge(this,vr,e.mutationCache),ge(this,Vi,[]),this.state=e.state||T5(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){M(this,Vi).includes(e)||(M(this,Vi).push(e),this.clearGcTimeout(),M(this,vr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ge(this,Vi,M(this,Vi).filter(n=>n!==e)),this.scheduleGc(),M(this,vr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){M(this,Vi).length||(this.state.status==="pending"?this.scheduleGc():M(this,vr).remove(this))}continue(){var e;return((e=M(this,kl))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,w,y,b,v,_,E,x,S,T;const n=()=>{He(this,Gi,Sa).call(this,{type:"continue"})};ge(this,kl,S5({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(C,O)=>{He(this,Gi,Sa).call(this,{type:"failed",failureCount:C,error:O})},onPause:()=>{He(this,Gi,Sa).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>M(this,vr).canRun(this)}));const r=this.state.status==="pending",s=!M(this,kl).canStart();try{if(r)n();else{He(this,Gi,Sa).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=M(this,vr).config).onMutate)==null?void 0:o.call(i,e,this));const O=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));O!==this.state.context&&He(this,Gi,Sa).call(this,{type:"pending",context:O,variables:e,isPaused:s})}const C=await M(this,kl).start();return await((u=(l=M(this,vr).config).onSuccess)==null?void 0:u.call(l,C,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,C,e,this.state.context)),await((p=(f=M(this,vr).config).onSettled)==null?void 0:p.call(f,C,null,this.state.variables,this.state.context,this)),await((w=(g=this.options).onSettled)==null?void 0:w.call(g,C,null,e,this.state.context)),He(this,Gi,Sa).call(this,{type:"success",data:C}),C}catch(C){try{throw await((b=(y=M(this,vr).config).onError)==null?void 0:b.call(y,C,e,this.state.context,this)),await((_=(v=this.options).onError)==null?void 0:_.call(v,C,e,this.state.context)),await((x=(E=M(this,vr).config).onSettled)==null?void 0:x.call(E,void 0,C,this.state.variables,this.state.context,this)),await((T=(S=this.options).onSettled)==null?void 0:T.call(S,void 0,C,e,this.state.context)),C}finally{He(this,Gi,Sa).call(this,{type:"error",error:C})}}finally{M(this,vr).runNext(this)}}},Vi=new WeakMap,vr=new WeakMap,kl=new WeakMap,Gi=new WeakSet,Sa=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),_n.batch(()=>{M(this,Vi).forEach(r=>{r.onMutationUpdate(e)}),M(this,vr).notify({mutation:this,type:"updated",action:e})})},hR);function T5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Oo,fi,Wg,fR,EH=(fR=class extends Sh{constructor(e={}){super();Ae(this,Oo);Ae(this,fi);Ae(this,Wg);this.config=e,ge(this,Oo,new Set),ge(this,fi,new Map),ge(this,Wg,0)}build(e,n,r){const s=new bH({mutationCache:this,mutationId:++Nm(this,Wg)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){M(this,Oo).add(e);const n=ty(e);if(typeof n=="string"){const r=M(this,fi).get(n);r?r.push(e):M(this,fi).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(M(this,Oo).delete(e)){const n=ty(e);if(typeof n=="string"){const r=M(this,fi).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&M(this,fi).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=ty(e);if(typeof n=="string"){const r=M(this,fi).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=ty(e);if(typeof n=="string"){const s=(r=M(this,fi).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){_n.batch(()=>{M(this,Oo).forEach(e=>{this.notify({type:"removed",mutation:e})}),M(this,Oo).clear(),M(this,fi).clear()})}getAll(){return Array.from(M(this,Oo))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>ET(n,r))}findAll(e={}){return this.getAll().filter(n=>ET(e,n))}notify(e){_n.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return _n.batch(()=>Promise.all(e.map(n=>n.continue().catch(_r))))}},Oo=new WeakMap,fi=new WeakMap,Wg=new WeakMap,fR);function ty(t){var e;return(e=t.options.scope)==null?void 0:e.id}function xT(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const w=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},y=E5(e.options,e.fetchOptions),b=async(v,_,E)=>{if(g)return Promise.reject();if(_==null&&v.pages.length)return Promise.resolve(v);const S=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:_,direction:E?"backward":"forward",meta:e.options.meta};return w(R),R})(),T=await y(S),{maxPages:C}=e.options,O=E?dH:uH;return{pages:O(v.pages,T,C),pageParams:O(v.pageParams,_,C)}};if(s&&i.length){const v=s==="backward",_=v?_H:ST,E={pages:i,pageParams:o},x=_(r,E);a=await b(E,x,v)}else{const v=t??i.length;do{const _=c===0?o[0]??r.initialPageParam:ST(r,a);if(c>0&&_==null)break;a=await b(a,_),c++}while(c<v)}return a};e.options.persister?e.fetchFn=()=>{var g,w;return(w=(g=e.options).persister)==null?void 0:w.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function ST(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function _H(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var tn,Va,Ga,Fd,zd,Ka,Wd,qd,pR,CH=(pR=class{constructor(t={}){Ae(this,tn);Ae(this,Va);Ae(this,Ga);Ae(this,Fd);Ae(this,zd);Ae(this,Ka);Ae(this,Wd);Ae(this,qd);ge(this,tn,t.queryCache||new vH),ge(this,Va,t.mutationCache||new EH),ge(this,Ga,t.defaultOptions||{}),ge(this,Fd,new Map),ge(this,zd,new Map),ge(this,Ka,0)}mount(){Nm(this,Ka)._++,M(this,Ka)===1&&(ge(this,Wd,nA.subscribe(async t=>{t&&(await this.resumePausedMutations(),M(this,tn).onFocus())})),ge(this,qd,Xw.subscribe(async t=>{t&&(await this.resumePausedMutations(),M(this,tn).onOnline())})))}unmount(){var t,e;Nm(this,Ka)._--,M(this,Ka)===0&&((t=M(this,Wd))==null||t.call(this),ge(this,Wd,void 0),(e=M(this,qd))==null||e.call(this),ge(this,qd,void 0))}isFetching(t){return M(this,tn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return M(this,Va).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=M(this,tn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=M(this,tn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(wc(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return M(this,tn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=M(this,tn).get(r.queryHash),i=s==null?void 0:s.state.data,o=cH(e,i);if(o!==void 0)return M(this,tn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return _n.batch(()=>M(this,tn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=M(this,tn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=M(this,tn);_n.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=M(this,tn);return _n.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=_n.batch(()=>M(this,tn).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(_r).catch(_r)}invalidateQueries(t,e={}){return _n.batch(()=>(M(this,tn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=_n.batch(()=>M(this,tn).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(_r)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(_r)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=M(this,tn).build(this,e);return n.isStaleByTime(wc(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(_r).catch(_r)}fetchInfiniteQuery(t){return t.behavior=xT(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(_r).catch(_r)}ensureInfiniteQueryData(t){return t.behavior=xT(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Xw.isOnline()?M(this,Va).resumePausedMutations():Promise.resolve()}getQueryCache(){return M(this,tn)}getMutationCache(){return M(this,Va)}getDefaultOptions(){return M(this,Ga)}setDefaultOptions(t){ge(this,Ga,t)}setQueryDefaults(t,e){M(this,Fd).set(Xl(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...M(this,Fd).values()],n={};return e.forEach(r=>{og(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){M(this,zd).set(Xl(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...M(this,zd).values()],n={};return e.forEach(r=>{og(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...M(this,Ga).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=eA(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===tA&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...M(this,Ga).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){M(this,tn).clear(),M(this,Va).clear()}},tn=new WeakMap,Va=new WeakMap,Ga=new WeakMap,Fd=new WeakMap,zd=new WeakMap,Ka=new WeakMap,Wd=new WeakMap,qd=new WeakMap,pR),qr,Xe,qg,br,Ol,Hd,Ya,Ja,Hg,Vd,Gd,Rl,$l,Qa,Kd,yt,kf,H_,V_,G_,K_,Y_,J_,Q_,N5,gR,xH=(gR=class extends Sh{constructor(e,n){super();Ae(this,yt);Ae(this,qr);Ae(this,Xe);Ae(this,qg);Ae(this,br);Ae(this,Ol);Ae(this,Hd);Ae(this,Ya);Ae(this,Ja);Ae(this,Hg);Ae(this,Vd);Ae(this,Gd);Ae(this,Rl);Ae(this,$l);Ae(this,Qa);Ae(this,Kd,new Set);this.options=n,ge(this,qr,e),ge(this,Ja,null),ge(this,Ya,q_()),this.options.experimental_prefetchInRender||M(this,Ya).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(M(this,Xe).addObserver(this),AT(M(this,Xe),this.options)?He(this,yt,kf).call(this):this.updateResult(),He(this,yt,K_).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Z_(M(this,Xe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Z_(M(this,Xe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,He(this,yt,Y_).call(this),He(this,yt,J_).call(this),M(this,Xe).removeObserver(this)}setOptions(e){const n=this.options,r=M(this,Xe);if(this.options=M(this,qr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof yi(this.options.enabled,M(this,Xe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");He(this,yt,Q_).call(this),M(this,Xe).setOptions(this.options),n._defaulted&&!Zw(this.options,n)&&M(this,qr).getQueryCache().notify({type:"observerOptionsUpdated",query:M(this,Xe),observer:this});const s=this.hasListeners();s&&IT(M(this,Xe),r,this.options,n)&&He(this,yt,kf).call(this),this.updateResult(),s&&(M(this,Xe)!==r||yi(this.options.enabled,M(this,Xe))!==yi(n.enabled,M(this,Xe))||wc(this.options.staleTime,M(this,Xe))!==wc(n.staleTime,M(this,Xe)))&&He(this,yt,H_).call(this);const i=He(this,yt,V_).call(this);s&&(M(this,Xe)!==r||yi(this.options.enabled,M(this,Xe))!==yi(n.enabled,M(this,Xe))||i!==M(this,Qa))&&He(this,yt,G_).call(this,i)}getOptimisticResult(e){const n=M(this,qr).getQueryCache().build(M(this,qr),e),r=this.createResult(n,e);return AH(this,r)&&(ge(this,br,r),ge(this,Hd,this.options),ge(this,Ol,M(this,Xe).state)),r}getCurrentResult(){return M(this,br)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){M(this,Kd).add(e)}getCurrentQuery(){return M(this,Xe)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=M(this,qr).defaultQueryOptions(e),r=M(this,qr).getQueryCache().build(M(this,qr),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return He(this,yt,kf).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),M(this,br)))}createResult(e,n){var C;const r=M(this,Xe),s=this.options,i=M(this,br),o=M(this,Ol),a=M(this,Hd),l=e!==r?e.state:M(this,qg),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const O=this.hasListeners(),R=!O&&AT(e,n),F=O&&IT(e,r,n,s);(R||F)&&(d={...d,...I5(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:w}=d;f=d.data;let y=!1;if(n.placeholderData!==void 0&&f===void 0&&w==="pending"){let O;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(O=i.data,y=!0):O=typeof n.placeholderData=="function"?n.placeholderData((C=M(this,Gd))==null?void 0:C.state.data,M(this,Gd)):n.placeholderData,O!==void 0&&(w="success",f=W_(i==null?void 0:i.data,O,n),h=!0)}if(n.select&&f!==void 0&&!y)if(i&&f===(o==null?void 0:o.data)&&n.select===M(this,Hg))f=M(this,Vd);else try{ge(this,Hg,n.select),f=n.select(f),f=W_(i==null?void 0:i.data,f,n),ge(this,Vd,f),ge(this,Ja,null)}catch(O){ge(this,Ja,O)}M(this,Ja)&&(p=M(this,Ja),f=M(this,Vd),g=Date.now(),w="error");const b=d.fetchStatus==="fetching",v=w==="pending",_=w==="error",E=v&&b,x=f!==void 0,T={status:w,fetchStatus:d.fetchStatus,isPending:v,isSuccess:w==="success",isError:_,isInitialLoading:E,isLoading:E,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:b,isRefetching:b&&!v,isLoadingError:_&&!x,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:_&&x,isStale:rA(e,n),refetch:this.refetch,promise:M(this,Ya)};if(this.options.experimental_prefetchInRender){const O=W=>{T.status==="error"?W.reject(T.error):T.data!==void 0&&W.resolve(T.data)},R=()=>{const W=ge(this,Ya,T.promise=q_());O(W)},F=M(this,Ya);switch(F.status){case"pending":e.queryHash===r.queryHash&&O(F);break;case"fulfilled":(T.status==="error"||T.data!==F.value)&&R();break;case"rejected":(T.status!=="error"||T.error!==F.reason)&&R();break}}return T}updateResult(){const e=M(this,br),n=this.createResult(M(this,Xe),this.options);if(ge(this,Ol,M(this,Xe).state),ge(this,Hd,this.options),M(this,Ol).data!==void 0&&ge(this,Gd,M(this,Xe)),Zw(n,e))return;ge(this,br,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!M(this,Kd).size)return!0;const o=new Set(i??M(this,Kd));return this.options.throwOnError&&o.add("error"),Object.keys(M(this,br)).some(a=>{const c=a;return M(this,br)[c]!==e[c]&&o.has(c)})};He(this,yt,N5).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&He(this,yt,K_).call(this)}},qr=new WeakMap,Xe=new WeakMap,qg=new WeakMap,br=new WeakMap,Ol=new WeakMap,Hd=new WeakMap,Ya=new WeakMap,Ja=new WeakMap,Hg=new WeakMap,Vd=new WeakMap,Gd=new WeakMap,Rl=new WeakMap,$l=new WeakMap,Qa=new WeakMap,Kd=new WeakMap,yt=new WeakSet,kf=function(e){He(this,yt,Q_).call(this);let n=M(this,Xe).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(_r)),n},H_=function(){He(this,yt,Y_).call(this);const e=wc(this.options.staleTime,M(this,Xe));if(Zl||M(this,br).isStale||!F_(e))return;const r=v5(M(this,br).dataUpdatedAt,e)+1;ge(this,Rl,setTimeout(()=>{M(this,br).isStale||this.updateResult()},r))},V_=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(M(this,Xe)):this.options.refetchInterval)??!1},G_=function(e){He(this,yt,J_).call(this),ge(this,Qa,e),!(Zl||yi(this.options.enabled,M(this,Xe))===!1||!F_(M(this,Qa))||M(this,Qa)===0)&&ge(this,$l,setInterval(()=>{(this.options.refetchIntervalInBackground||nA.isFocused())&&He(this,yt,kf).call(this)},M(this,Qa)))},K_=function(){He(this,yt,H_).call(this),He(this,yt,G_).call(this,He(this,yt,V_).call(this))},Y_=function(){M(this,Rl)&&(clearTimeout(M(this,Rl)),ge(this,Rl,void 0))},J_=function(){M(this,$l)&&(clearInterval(M(this,$l)),ge(this,$l,void 0))},Q_=function(){const e=M(this,qr).getQueryCache().build(M(this,qr),this.options);if(e===M(this,Xe))return;const n=M(this,Xe);ge(this,Xe,e),ge(this,qg,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},N5=function(e){_n.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(M(this,br))}),M(this,qr).getQueryCache().notify({query:M(this,Xe),type:"observerResultsUpdated"})})},gR);function SH(t,e){return yi(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function AT(t,e){return SH(t,e)||t.state.data!==void 0&&Z_(t,e,e.refetchOnMount)}function Z_(t,e,n){if(yi(e.enabled,t)!==!1&&wc(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&rA(t,e)}return!1}function IT(t,e,n,r){return(t!==e||yi(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&rA(t,n)}function rA(t,e){return yi(e.enabled,t)!==!1&&t.isStaleByTime(wc(e.staleTime,t))}function AH(t,e){return!Zw(t.getCurrentResult(),e)}var Za,Xa,Hr,Ro,qo,nw,X_,mR,IH=(mR=class extends Sh{constructor(n,r){super();Ae(this,qo);Ae(this,Za);Ae(this,Xa);Ae(this,Hr);Ae(this,Ro);ge(this,Za,n),this.setOptions(r),this.bindMethods(),He(this,qo,nw).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=M(this,Za).defaultMutationOptions(n),Zw(this.options,r)||M(this,Za).getMutationCache().notify({type:"observerOptionsUpdated",mutation:M(this,Hr),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Xl(r.mutationKey)!==Xl(this.options.mutationKey)?this.reset():((s=M(this,Hr))==null?void 0:s.state.status)==="pending"&&M(this,Hr).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=M(this,Hr))==null||n.removeObserver(this)}onMutationUpdate(n){He(this,qo,nw).call(this),He(this,qo,X_).call(this,n)}getCurrentResult(){return M(this,Xa)}reset(){var n;(n=M(this,Hr))==null||n.removeObserver(this),ge(this,Hr,void 0),He(this,qo,nw).call(this),He(this,qo,X_).call(this)}mutate(n,r){var s;return ge(this,Ro,r),(s=M(this,Hr))==null||s.removeObserver(this),ge(this,Hr,M(this,Za).getMutationCache().build(M(this,Za),this.options)),M(this,Hr).addObserver(this),M(this,Hr).execute(n)}},Za=new WeakMap,Xa=new WeakMap,Hr=new WeakMap,Ro=new WeakMap,qo=new WeakSet,nw=function(){var r;const n=((r=M(this,Hr))==null?void 0:r.state)??T5();ge(this,Xa,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},X_=function(n){_n.batch(()=>{var r,s,i,o,a,c,l,u;if(M(this,Ro)&&this.hasListeners()){const d=M(this,Xa).variables,h=M(this,Xa).context;(n==null?void 0:n.type)==="success"?((s=(r=M(this,Ro)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=M(this,Ro)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=M(this,Ro)).onError)==null||c.call(a,n.error,d,h),(u=(l=M(this,Ro)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(M(this,Xa))})})},mR);function TH(t){return JSON.stringify(t,(e,n)=>NH(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function NH(t){if(!TT(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!TT(n)||!n.hasOwnProperty("isPrototypeOf"))}function TT(t){return Object.prototype.toString.call(t)==="[object Object]"}function P5(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:w,getNextPageParam:y,initialPageParam:b,_optimisticResults:v,enabled:_,notifyOnChangeProps:E,placeholderData:x,refetchInterval:S,refetchIntervalInBackground:T,refetchOnMount:C,refetchOnReconnect:O,refetchOnWindowFocus:R,retryOnMount:F,select:W,staleTime:B,suspense:I,throwOnError:A,config:U,connector:P,query:k,...j}=t;return j}function PH(t){return{mutationFn(e){return ew(t,e)},mutationKey:["connect"]}}function kH(t){return{mutationFn(e){return c5(t,e)},mutationKey:["disconnect"]}}function OH(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return iq(t,{...i,address:r})},queryKey:RH(e)}}function RH(t={}){return["ensName",P5(t)]}function $H(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return oq(t,{...o,connector:r})},queryKey:DH(e)}}function DH(t={}){const{connector:e,...n}=t;return["walletClient",{...P5(n),connectorUid:e==null?void 0:e.uid}]}var k5=D.createContext(void 0),sA=t=>{const e=D.useContext(k5);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},UH=({client:t,children:e})=>(D.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(k5.Provider,{value:t,children:e})),O5=D.createContext(!1),jH=()=>D.useContext(O5);O5.Provider;function LH(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var MH=D.createContext(LH()),BH=()=>D.useContext(MH),FH=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},zH=t=>{D.useEffect(()=>{t.clearReset()},[t])},WH=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||_5(n,[t.error,r])),qH=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},HH=(t,e)=>t.isLoading&&t.isFetching&&!e,VH=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,NT=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function GH(t,e,n){var d,h,f,p,g;const r=jH(),s=BH(),i=sA(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",qH(o),FH(o,s),zH(s);const a=!i.getQueryCache().get(o.queryHash),[c]=D.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(D.useSyncExternalStore(D.useCallback(w=>{const y=u?c.subscribe(_n.batchCalls(w)):_r;return c.updateResult(),y},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),D.useEffect(()=>{c.setOptions(o)},[o,c]),VH(o,l))throw NT(o,c,s);if(WH({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!Zl&&HH(l,r)){const w=a?NT(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;w==null||w.catch(_r).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function KH(t,e){return GH(t,xH)}function R5(t,e){const n=sA(),[r]=D.useState(()=>new IH(n,t));D.useEffect(()=>{r.setOptions(t)},[r,t]);const s=D.useSyncExternalStore(D.useCallback(o=>r.subscribe(_n.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=D.useCallback((o,a)=>{r.mutate(o,a).catch(_r)},[r]);if(s.error&&_5(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function $5(t){const e=KH({...t,queryKeyHashFn:TH});return e.queryKey=t.queryKey,e}function D5(t={}){const e=Fc(t);return D.useSyncExternalStore(n=>dq(e,{onChange:n}),()=>pT(e),()=>pT(e))}function YH(t={}){const e=Fc(t);return D.useSyncExternalStore(n=>d5(e,{onChange:n}),()=>gT(e),()=>gT(e))}function U5(t={}){const{mutation:e}=t,n=Fc(t),r=PH(n),{mutate:s,mutateAsync:i,...o}=R5({...e,...r});return D.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:YH({config:n})}}function JH(t={}){const e=Fc(t);return D.useSyncExternalStore(n=>hq(e,{onChange:n}),()=>qi(e),()=>qi(e))}function j5(t={}){const{mutation:e}=t,n=Fc(t),r=kH(n),{mutate:s,mutateAsync:i,...o}=R5({...e,...r});return{...o,connectors:JH({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function L5(t={}){const{address:e,query:n={}}=t,r=Fc(t),s=D5({config:r}),i=OH(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return $5({...n,...i,enabled:o})}function M5(t={}){const{query:e={},...n}=t,r=Fc(n),s=sA(),{address:i,connector:o,status:a}=im({config:r}),c=D5({config:r}),l=t.connector??o,{queryKey:u,...d}=$H(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=D.useRef(i);return D.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),$5({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}const QH="_verified_lvyh0_1",iA={verified:QH},ZH=()=>m.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:iA.verified,children:m.jsx("g",{children:m.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),XH=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:iA.verified,children:m.jsxs("g",{children:[m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[m.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),m.jsx("stop",{offset:".539",stopColor:"#cd8105"}),m.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),m.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),m.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[m.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),m.jsx("stop",{offset:".406",stopColor:"#e2b719"}),m.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),m.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[m.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),m.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),m.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),eV=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:iA.verified,children:m.jsx("g",{children:m.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function B5(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=B5(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function vc(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=B5(t))&&(r&&(r+=" "),r+=e);return r}const tV="_root_98iqw_1",nV="_article_98iqw_21",PT={root:tV,article:nV},oA=({className:t,children:e})=>m.jsx("div",{className:vc("react-tweet-theme",PT.root,t),children:m.jsx("article",{className:PT.article,children:e})}),F5=t=>m.jsx("img",{...t}),rV="_header_nqq4j_1",sV="_avatar_nqq4j_11",iV="_avatarOverflow_nqq4j_16",oV="_avatarSquare_nqq4j_23",aV="_avatarShadow_nqq4j_26",cV="_author_nqq4j_37",lV="_authorLink_nqq4j_44",uV="_authorVerified_nqq4j_53",dV="_authorLinkText_nqq4j_56",hV="_authorMeta_nqq4j_63",fV="_authorFollow_nqq4j_66",pV="_username_nqq4j_69",gV="_follow_nqq4j_74",mV="_separator_nqq4j_82",yV="_brand_nqq4j_86",wV="_twitterIcon_nqq4j_90",Mn={header:rV,avatar:sV,avatarOverflow:iV,avatarSquare:oV,avatarShadow:aV,author:cV,authorLink:lV,authorVerified:uV,authorLinkText:dV,authorMeta:hV,authorFollow:fV,username:pV,follow:gV,separator:mV,brand:yV,twitterIcon:wV},vV="_verifiedOld_lcna5_1",bV="_verifiedBlue_lcna5_4",EV="_verifiedGovernment_lcna5_7",Wb={verifiedOld:vV,verifiedBlue:bV,verifiedGovernment:EV},z5=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=m.jsx(ZH,{}),s=Wb.verifiedBlue;if(n)switch(t.is_blue_verified||(s=Wb.verifiedOld),t.verified_type){case"Government":r=m.jsx(eV,{}),s=Wb.verifiedGovernment;break;case"Business":r=m.jsx(XH,{}),s=null;break}return n?m.jsx("div",{className:vc(e,s),children:r}):null},_V=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:F5,{user:s}=t;return m.jsxs("div",{className:Mn.header,children:[m.jsxs("a",{href:t.url,className:Mn.avatar,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:vc(Mn.avatarOverflow,s.profile_image_shape==="Square"&&Mn.avatarSquare),children:m.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),m.jsx("div",{className:Mn.avatarOverflow,children:m.jsx("div",{className:Mn.avatarShadow})})]}),m.jsxs("div",{className:Mn.author,children:[m.jsxs("a",{href:t.url,className:Mn.authorLink,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:Mn.authorLinkText,children:m.jsx("span",{title:s.name,children:s.name})}),m.jsx(z5,{user:s,className:Mn.authorVerified})]}),m.jsxs("div",{className:Mn.authorMeta,children:[m.jsx("a",{href:t.url,className:Mn.username,target:"_blank",rel:"noopener noreferrer",children:m.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),m.jsxs("div",{className:Mn.authorFollow,children:[m.jsx("span",{className:Mn.separator,children:"·"}),m.jsx("a",{href:s.follow_url,className:Mn.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),m.jsx("a",{href:t.url,className:Mn.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:Mn.twitterIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},CV="_root_1ec15_1",xV={root:CV},SV=({tweet:t})=>m.jsxs("a",{href:t.in_reply_to_url,className:xV.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),AV="_root_eihfa_1",IV={root:AV},TV=({href:t,children:e})=>m.jsx("a",{href:t,className:IV.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),NV="_root_1xq52_1",PV={root:NV},kV=({tweet:t})=>m.jsx("p",{className:PV.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return m.jsx(TV,{href:e.href,children:e.text},n);case"media":return;default:return m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),kT=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,W5=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,OV=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,RV=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,$V=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,DV=t=>`https://x.com/hashtag/${t.text}`,UV=t=>`https://x.com/search?q=%24${t.text}`,jV=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,q5=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},LV=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},MV=t=>{const e=LV(t);return e.length>1?e[1]:e[0]},eC=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function OT(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return tf(n,"hashtag",t.entities.hashtags),tf(n,"mention",t.entities.user_mentions),tf(n,"url",t.entities.urls),tf(n,"symbol",t.entities.symbols),t.entities.media&&tf(n,"media",t.entities.media),BV(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:DV(r),text:s});case"mention":return Object.assign(r,{href:W5(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:UV(r),text:s});default:return Object.assign(r,{text:s})}})}function tf(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function BV(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const FV=t=>({...t,url:kT(t),user:{...t.user,url:W5(t),follow_url:$V(t)},like_url:OV(t),reply_url:RV(t),in_reply_to_url:t.in_reply_to_screen_name?jV(t):void 0,entities:OT(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:kT(t.quoted_tweet),entities:OT(t.quoted_tweet)}:void 0}),zV="_root_g9tkv_1",WV="_rounded_g9tkv_6",qV="_mediaWrapper_g9tkv_10",HV="_grid2Columns_g9tkv_17",VV="_grid3_g9tkv_20",GV="_grid2x2_g9tkv_23",KV="_mediaContainer_g9tkv_26",YV="_mediaLink_g9tkv_34",JV="_skeleton_g9tkv_38",QV="_image_g9tkv_43",us={root:zV,rounded:WV,mediaWrapper:qV,grid2Columns:HV,grid3:VV,grid2x2:GV,mediaContainer:KV,mediaLink:YV,skeleton:JV,image:QV},ZV="_anchor_fp31d_1",XV="_videoButton_fp31d_17",eG="_videoButtonIcon_fp31d_35",tG="_watchOnTwitter_fp31d_44",nG="_viewReplies_fp31d_60",Nu={anchor:ZV,videoButton:XV,videoButtonIcon:eG,watchOnTwitter:tG,viewReplies:nG},rG=({tweet:t,media:e})=>{const[n,r]=D.useState(!0),[s,i]=D.useState(!1),[o,a]=D.useState(!1),c=MV(e);let l=0;return m.jsxs(m.Fragment,{children:[m.jsx("video",{className:us.image,poster:q5(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:m.jsx("source",{src:c.url,type:c.content_type})}),n&&m.jsx("button",{type:"button",className:Nu.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:m.jsx("svg",{viewBox:"0 0 24 24",className:Nu.videoButtonIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&m.jsx("div",{className:Nu.watchOnTwitter,children:m.jsx("a",{href:t.url,className:Nu.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&m.jsx("a",{href:t.url,className:vc(Nu.anchor,Nu.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},sG=t=>m.jsx("img",{...t}),RT=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},H5=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:sG;return m.jsx("div",{className:vc(us.root,!n&&us.rounded),children:m.jsx("div",{className:vc(us.mediaWrapper,o>1&&us.grid2Columns,o===3&&us.grid3,o>4&&us.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>m.jsx(D.Fragment,{children:l.type==="photo"?m.jsxs("a",{href:t.url,className:vc(us.mediaContainer,us.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:us.skeleton,style:RT(l,o)}),m.jsx(c,{src:q5(l,"small"),alt:l.ext_alt_text||"Image",className:us.image,draggable:!0})]},l.media_url_https):m.jsxs("div",{className:us.mediaContainer,children:[m.jsx("div",{className:us.skeleton,style:RT(l,o)}),m.jsx(rG,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},iG={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},oG=new Intl.DateTimeFormat("en-US",iG),aG=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},cG=t=>{const e=aG(oG.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n} · ${r}`},lG="_root_i24yn_1",uG={root:lG},dG=({tweet:t})=>{const e=new Date(t.created_at),n=cG(e);return m.jsx("a",{className:uG.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:m.jsx("time",{dateTime:e.toISOString(),children:n})})},hG="_info_19qcj_1",fG="_infoLink_19qcj_10",pG="_infoIcon_19qcj_30",qb={info:hG,infoLink:fG,infoIcon:pG},gG=({tweet:t})=>m.jsxs("div",{className:qb.info,children:[m.jsx(dG,{tweet:t}),m.jsx("a",{className:qb.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:qb.infoIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),mG="_actions_n2anf_1",yG="_like_n2anf_13",wG="_reply_n2anf_14",vG="_copy_n2anf_15",bG="_likeIconWrapper_n2anf_27",EG="_likeCount_n2anf_30",_G="_replyIconWrapper_n2anf_35",CG="_copyIconWrapper_n2anf_36",xG="_likeIcon_n2anf_27",SG="_replyIcon_n2anf_35",AG="_copyIcon_n2anf_36",IG="_replyText_n2anf_56",TG="_copyText_n2anf_57",Vr={actions:mG,like:yG,reply:wG,copy:vG,likeIconWrapper:bG,likeCount:EG,replyIconWrapper:_G,copyIconWrapper:CG,likeIcon:xG,replyIcon:SG,copyIcon:AG,replyText:IG,copyText:TG},NG=({tweet:t})=>{const[e,n]=D.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return D.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),m.jsxs("button",{type:"button",className:Vr.copy,"aria-label":"Copy link",onClick:r,children:[m.jsx("div",{className:Vr.copyIconWrapper,children:e?m.jsx("svg",{viewBox:"0 0 24 24",className:Vr.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):m.jsx("svg",{viewBox:"0 0 24 24",className:Vr.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),m.jsx("span",{className:Vr.copyText,children:e?"Copied!":"Copy link"})]})},PG=({tweet:t})=>{const e=eC(t.favorite_count);return m.jsxs("div",{className:Vr.actions,children:[m.jsxs("a",{className:Vr.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[m.jsx("div",{className:Vr.likeIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:Vr.likeIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),m.jsx("span",{className:Vr.likeCount,children:e})]}),m.jsxs("a",{className:Vr.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[m.jsx("div",{className:Vr.replyIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:Vr.replyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),m.jsx("span",{className:Vr.replyText,children:"Reply"})]}),m.jsx(NG,{tweet:t})]})},kG="_replies_1cutb_1",OG="_link_1cutb_4",RG="_text_1cutb_23",Hb={replies:kG,link:OG,text:RG},$G=({tweet:t})=>m.jsx("div",{className:Hb.replies,children:m.jsx("a",{className:Hb.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:m.jsx("span",{className:Hb.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${eC(t.conversation_count)} reply`:`Read ${eC(t.conversation_count)} replies`})})}),DG="_root_q5799_1",UG="_article_q5799_16",$T={root:DG,article:UG},jG=({tweet:t,children:e})=>m.jsx("div",{className:$T.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:m.jsx("article",{className:$T.article,children:e})}),LG="_header_r31i5_1",MG="_avatar_r31i5_11",BG="_avatarSquare_r31i5_17",FG="_author_r31i5_21",zG="_authorText_r31i5_26",WG="_username_r31i5_33",Jc={header:LG,avatar:MG,avatarSquare:BG,author:FG,authorText:zG,username:WG},qG=({tweet:t})=>{const{user:e}=t;return m.jsxs("div",{className:Jc.header,children:[m.jsx("a",{href:t.url,className:Jc.avatar,target:"_blank",rel:"noopener noreferrer",children:m.jsx("div",{className:vc(Jc.avatarOverflow,e.profile_image_shape==="Square"&&Jc.avatarSquare),children:m.jsx(F5,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),m.jsxs("div",{className:Jc.author,children:[m.jsx("div",{className:Jc.authorText,children:m.jsx("span",{title:e.name,children:e.name})}),m.jsx(z5,{user:e}),m.jsx("div",{className:Jc.username,children:m.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},HG="_root_175ot_1",VG={root:HG},GG=({tweet:t})=>m.jsx("p",{className:VG.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),KG=({tweet:t})=>{var e;return m.jsxs(jG,{tweet:t,children:[m.jsx(qG,{tweet:t}),m.jsx(GG,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?m.jsx(H5,{quoted:!0,tweet:t}):null]})},YG=({tweet:t,components:e})=>{var n;const r=D.useMemo(()=>FV(t),[t]);return m.jsxs(oA,{children:[m.jsx(_V,{tweet:r,components:e}),r.in_reply_to_status_id_str&&m.jsx(SV,{tweet:r}),m.jsx(kV,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?m.jsx(H5,{tweet:r,components:e}):null,r.quoted_tweet&&m.jsx(KG,{tweet:r.quoted_tweet}),m.jsx(gG,{tweet:r}),m.jsx(PG,{tweet:r}),m.jsx($G,{tweet:r})]})},JG="_root_16yxa_1",QG={root:JG},ZG=t=>m.jsx(oA,{children:m.jsxs("div",{className:QG.root,children:[m.jsx("h3",{children:"Tweet not found"}),m.jsx("p",{children:"The embedded tweet could not be found…"})]})}),XG="_skeleton_oi7hr_1",eK={skeleton:XG},ny=({style:t})=>m.jsx("span",{className:eK.skeleton,style:t}),tK="_root_17qqv_1",nK={root:tK},rK=()=>m.jsxs(oA,{className:nK.root,children:[m.jsx(ny,{style:{height:"3rem",marginBottom:"0.75rem"}}),m.jsx(ny,{style:{height:"6rem",margin:"0.5rem 0"}}),m.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),m.jsx(ny,{style:{height:"2rem"}}),m.jsx(ny,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]});var V5={exports:{}},G5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ah=D;function sK(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var iK=typeof Object.is=="function"?Object.is:sK,oK=ah.useState,aK=ah.useEffect,cK=ah.useLayoutEffect,lK=ah.useDebugValue;function uK(t,e){var n=e(),r=oK({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return cK(function(){s.value=n,s.getSnapshot=e,Vb(s)&&i({inst:s})},[t,n,e]),aK(function(){return Vb(s)&&i({inst:s}),t(function(){Vb(s)&&i({inst:s})})},[t]),lK(n),n}function Vb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!iK(t,n)}catch{return!0}}function dK(t,e){return e()}var hK=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?dK:uK;G5.useSyncExternalStore=ah.useSyncExternalStore!==void 0?ah.useSyncExternalStore:hK;V5.exports=G5;var fK=V5.exports;const K5=0,Y5=1,J5=2,DT=3;var UT=Object.prototype.hasOwnProperty;function tC(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&tC(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(UT.call(t,n)&&++r&&!UT.call(e,n)||!(n in e)||!tC(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const $o=new WeakMap,rc=()=>{},Cr=rc(),nC=Object,rt=t=>t===Cr,Qi=t=>typeof t=="function",kc=(t,e)=>({...t,...e}),Q5=t=>Qi(t.then),Gb={},ry={},aA="undefined",om=typeof window!=aA,rC=typeof document!=aA,pK=om&&"Deno"in window,gK=()=>om&&typeof window.requestAnimationFrame!=aA,Z5=(t,e)=>{const n=$o.get(t);return[()=>!rt(e)&&t.get(e)||Gb,r=>{if(!rt(e)){const s=t.get(e);e in ry||(ry[e]=s),n[5](e,kc(s,r),s||Gb)}},n[6],()=>!rt(e)&&e in ry?ry[e]:!rt(e)&&t.get(e)||Gb]};let sC=!0;const mK=()=>sC,[iC,oC]=om&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[rc,rc],yK=()=>{const t=rC&&document.visibilityState;return rt(t)||t!=="hidden"},wK=t=>(rC&&document.addEventListener("visibilitychange",t),iC("focus",t),()=>{rC&&document.removeEventListener("visibilitychange",t),oC("focus",t)}),vK=t=>{const e=()=>{sC=!0,t()},n=()=>{sC=!1};return iC("online",e),iC("offline",n),()=>{oC("online",e),oC("offline",n)}},bK={isOnline:mK,isVisible:yK},EK={initFocus:wK,initReconnect:vK},jT=!vs.useId,ag=!om||pK,_K=t=>gK()?window.requestAnimationFrame(t):setTimeout(t,1),Kb=ag?D.useEffect:D.useLayoutEffect,Yb=typeof navigator<"u"&&navigator.connection,LT=!ag&&Yb&&(["slow-2g","2g"].includes(Yb.effectiveType)||Yb.saveData),sy=new WeakMap,Jb=(t,e)=>nC.prototype.toString.call(t)===`[object ${e}]`;let CK=0;const aC=t=>{const e=typeof t,n=Jb(t,"Date"),r=Jb(t,"RegExp"),s=Jb(t,"Object");let i,o;if(nC(t)===t&&!n&&!r){if(i=sy.get(t),i)return i;if(i=++CK+"~",sy.set(t,i),Array.isArray(t)){for(i="@",o=0;o<t.length;o++)i+=aC(t[o])+",";sy.set(t,i)}if(s){i="#";const a=nC.keys(t).sort();for(;!rt(o=a.pop());)rt(t[o])||(i+=o+":"+aC(t[o])+",");sy.set(t,i)}}else i=n?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return i},cA=t=>{if(Qi(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?aC(t):"",[t,e]};let xK=0;const cC=()=>++xK;async function X5(...t){const[e,n,r,s]=t,i=kc({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(Qi(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=cA(h);if(!f)return;const[p,g]=Z5(e,f),[w,y,b,v]=$o.get(e),_=()=>{const W=w[f];return(Qi(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete b[f],delete v[f],W&&W[0])?W[0](J5).then(()=>p().data):p().data};if(t.length<3)return _();let E=r,x;const S=cC();y[f]=[S,0];const T=!rt(c),C=p(),O=C.data,R=C._c,F=rt(R)?O:R;if(T&&(c=Qi(c)?c(F,O):c,g({data:c,_c:F})),Qi(E))try{E=E(F)}catch(W){x=W}if(E&&Q5(E))if(E=await E.catch(W=>{x=W}),S!==y[f][0]){if(x)throw x;return E}else x&&T&&l(x)&&(o=!0,g({data:F,_c:Cr}));if(o&&!x)if(Qi(o)){const W=o(E,F);g({data:W,error:Cr,_c:Cr})}else g({data:E,error:Cr,_c:Cr});if(y[f][1]=cC(),Promise.resolve(_()).then(()=>{g({_c:Cr})}),x){if(u)throw x;return}return E}}const MT=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},SK=(t,e)=>{if(!$o.has(t)){const n=kc(EK,e),r=Object.create(null),s=X5.bind(Cr,t);let i=rc;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!$o.has(t)&&($o.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!ag)){const u=n.initFocus(setTimeout.bind(Cr,MT.bind(Cr,r,K5))),d=n.initReconnect(setTimeout.bind(Cr,MT.bind(Cr,r,Y5)));i=()=>{u&&u(),d&&d(),$o.delete(t)}}};return l(),[t,s,l,i]}return[t,$o.get(t)[4]]},AK=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!rt(i)&&o>i||setTimeout(r,a,s)},IK=tC,[e8,TK]=SK(new Map),NK=kc({onLoadingSlow:rc,onSuccess:rc,onError:rc,onErrorRetry:AK,onDiscarded:rc,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:LT?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:LT?5e3:3e3,compare:IK,isPaused:()=>!1,cache:e8,mutate:TK,fallback:{}},bK),PK=(t,e)=>{const n=kc(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=kc(s,o))}return n},kK=D.createContext({}),OK="$inf$",t8=om&&window.__SWR_DEVTOOLS_USE__,RK=t8?window.__SWR_DEVTOOLS_USE__:[],$K=()=>{t8&&(window.__SWR_DEVTOOLS_REACT__=vs)},DK=t=>Qi(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],UK=()=>kc(NK,D.useContext(kK)),jK=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=cA(e),[,,,a]=$o.get(e8);if(o.startsWith(OK))return n(...i);const c=a[o];return rt(c)?n(...i):(delete a[o],c)}),r),LK=RK.concat(jK),MK=t=>function(...n){const r=UK(),[s,i,o]=DK(n),a=PK(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(LK);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},BK=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};$K();const Qb=vs.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),Zb={dedupe:!0},FK=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,w]=$o.get(r),[y,b]=cA(t),v=D.useRef(!1),_=D.useRef(!1),E=D.useRef(y),x=D.useRef(e),S=D.useRef(n),T=()=>S.current,C=()=>T().isVisible()&&T().isOnline(),[O,R,F,W]=Z5(r,y),B=D.useRef({}).current,I=rt(o)?rt(n.fallback)?Cr:n.fallback[y]:o,A=(it,Le)=>{for(const Dt in B){const Ut=Dt;if(Ut==="data"){if(!s(it[Ut],Le[Ut])&&(!rt(it[Ut])||!s(Z,Le[Ut])))return!1}else if(Le[Ut]!==it[Ut])return!1}return!0},U=D.useMemo(()=>{const it=!y||!e?!1:rt(a)?T().isPaused()||i?!1:c!==!1:a,Le=on=>{const jn=kc(on);return delete jn._k,it?{isValidating:!0,isLoading:!0,...jn}:jn},Dt=O(),Ut=W(),mr=Le(Dt),as=Dt===Ut?mr:Le(Ut);let Xt=mr;return[()=>{const on=Le(O());return A(on,Xt)?(Xt.data=on.data,Xt.isLoading=on.isLoading,Xt.isValidating=on.isValidating,Xt.error=on.error,Xt):(Xt=on,on)},()=>as]},[r,y]),P=fK.useSyncExternalStore(D.useCallback(it=>F(y,(Le,Dt)=>{A(Dt,Le)||it()}),[r,y]),U[0],U[1]),k=!v.current,j=f[y]&&f[y].length>0,z=P.data,K=rt(z)?I&&Q5(I)?Qb(I):I:z,Q=P.error,Y=D.useRef(K),Z=h?rt(z)?rt(Y.current)?K:Y.current:z:K,se=j&&!rt(Q)?!1:k&&!rt(a)?a:T().isPaused()?!1:i?rt(K)?!1:c:rt(K)||c,Pe=!!(y&&e&&k&&se),Oe=rt(P.isValidating)?Pe:P.isValidating,De=rt(P.isLoading)?Pe:P.isLoading,Ke=D.useCallback(async it=>{const Le=x.current;if(!y||!Le||_.current||T().isPaused())return!1;let Dt,Ut,mr=!0;const as=it||{},Xt=!g[y]||!as.dedupe,on=()=>jT?!_.current&&y===E.current&&v.current:y===E.current,jn={isValidating:!1,isLoading:!1},sa=()=>{R(jn)},qc=()=>{const Sn=g[y];Sn&&Sn[1]===Ut&&delete g[y]},ia={isValidating:!0};rt(O().data)&&(ia.isLoading=!0);try{if(Xt&&(R(ia),n.loadingTimeout&&rt(O().data)&&setTimeout(()=>{mr&&on()&&T().onLoadingSlow(y,n)},n.loadingTimeout),g[y]=[Le(b),cC()]),[Dt,Ut]=g[y],Dt=await Dt,Xt&&setTimeout(qc,n.dedupingInterval),!g[y]||g[y][1]!==Ut)return Xt&&on()&&T().onDiscarded(y),!1;jn.error=Cr;const Sn=p[y];if(!rt(Sn)&&(Ut<=Sn[0]||Ut<=Sn[1]||Sn[1]===0))return sa(),Xt&&on()&&T().onDiscarded(y),!1;const Or=O().data;jn.data=s(Or,Dt)?Or:Dt,Xt&&on()&&T().onSuccess(Dt,y,n)}catch(Sn){qc();const Or=T(),{shouldRetryOnError:Hc}=Or;Or.isPaused()||(jn.error=Sn,Xt&&on()&&(Or.onError(Sn,y,Or),(Hc===!0||Qi(Hc)&&Hc(Sn))&&(!T().revalidateOnFocus||!T().revalidateOnReconnect||C())&&Or.onErrorRetry(Sn,y,Or,Au=>{const Vc=f[y];Vc&&Vc[0]&&Vc[0](DT,Au)},{retryCount:(as.retryCount||0)+1,dedupe:!0})))}return mr=!1,sa(),!0},[y,r]),Zt=D.useCallback((...it)=>X5(r,E.current,...it),[]);if(Kb(()=>{x.current=e,S.current=n,rt(z)||(Y.current=z)}),Kb(()=>{if(!y)return;const it=Ke.bind(Cr,Zb);let Le=0;T().revalidateOnFocus&&(Le=Date.now()+T().focusThrottleInterval);const Ut=BK(y,f,(mr,as={})=>{if(mr==K5){const Xt=Date.now();T().revalidateOnFocus&&Xt>Le&&C()&&(Le=Xt+T().focusThrottleInterval,it())}else if(mr==Y5)T().revalidateOnReconnect&&C()&&it();else{if(mr==J5)return Ke();if(mr==DT)return Ke(as)}});return _.current=!1,E.current=y,v.current=!0,R({_k:b}),se&&(rt(K)||ag?it():_K(it)),()=>{_.current=!0,Ut()}},[y]),Kb(()=>{let it;function Le(){const Ut=Qi(l)?l(O().data):l;Ut&&it!==-1&&(it=setTimeout(Dt,Ut))}function Dt(){!O().error&&(u||T().isVisible())&&(d||T().isOnline())?Ke(Zb).then(Le):Le()}return Le(),()=>{it&&(clearTimeout(it),it=-1)}},[l,u,d,y]),D.useDebugValue(Z),i&&rt(K)&&y){if(!jT&&ag)throw new Error("Fallback data is required when using Suspense in SSR.");x.current=e,S.current=n,_.current=!1;const it=w[y];if(!rt(it)){const Le=Zt(it);Qb(Le)}if(rt(Q)){const Le=Ke(Zb);rt(Z)||(Le.status="fulfilled",Le.value=!0),Qb(Le)}else throw Q}return{mutate:Zt,get data(){return B.data=!0,Z},get error(){return B.error=!0,Q},get isValidating(){return B.isValidating=!0,Oe},get isLoading(){return B.isLoading=!0,De}}},BT=MK(FK);class zK extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const WK=BT.default||BT,qK="https://react-tweet.vercel.app";async function HK([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new zK({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const VK=(t,e,n)=>{const{isLoading:r,data:s,error:i}=WK(()=>e||t?[e||t&&`${qK}/api/tweet/${t}`,n]:null,HK,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},GK=({id:t,apiUrl:e,fallback:n=m.jsx(rK,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=VK(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||ZG;return m.jsx(l,{error:i?i(a):a})}return m.jsx(YG,{tweet:o,components:r})};var ov={exports:{}},n8={},r8={exports:{}},KK="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",YK=KK,JK=YK;function s8(){}function i8(){}i8.resetWarningCache=s8;var QK=function(){function t(r,s,i,o,a,c){if(c!==JK){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i8,resetWarningCache:s8};return n.PropTypes=n,n};r8.exports=QK();var o8=r8.exports;function a8(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=a8(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function FT(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=a8(t))&&(r&&(r+=" "),r+=e);return r}const ZK=Object.freeze(Object.defineProperty({__proto__:null,clsx:FT,default:FT},Symbol.toStringTag,{value:"Module"})),XK=P0(ZK);var sn={},uo={};Object.defineProperty(uo,"__esModule",{value:!0});uo.dontSetMe=sY;uo.findInArray=eY;uo.int=rY;uo.isFunction=tY;uo.isNum=nY;function eY(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function tY(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function nY(t){return typeof t=="number"&&!isNaN(t)}function rY(t){return parseInt(t,10)}function sY(t,e,n){if(t[e])return new Error("Invalid prop ".concat(e," passed to ").concat(n," - do not set this, set it on the child."))}var gu={};Object.defineProperty(gu,"__esModule",{value:!0});gu.browserPrefixToKey=l8;gu.browserPrefixToStyle=iY;gu.default=void 0;gu.getPrefix=c8;const Xb=["Moz","Webkit","O","ms"];function c8(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const n=(t=window.document)===null||t===void 0||(t=t.documentElement)===null||t===void 0?void 0:t.style;if(!n||e in n)return"";for(let r=0;r<Xb.length;r++)if(l8(e,Xb[r])in n)return Xb[r];return""}function l8(t,e){return e?"".concat(e).concat(oY(t)):t}function iY(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t}function oY(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}gu.default=c8();Object.defineProperty(sn,"__esModule",{value:!0});sn.addClassName=h8;sn.addEvent=lY;sn.addUserSelectStyles=bY;sn.createCSSTransform=mY;sn.createSVGTransform=yY;sn.getTouch=wY;sn.getTouchIdentifier=vY;sn.getTranslation=lA;sn.innerHeight=fY;sn.innerWidth=pY;sn.matchesSelector=d8;sn.matchesSelectorAndParentsTo=cY;sn.offsetXYFromParent=gY;sn.outerHeight=dY;sn.outerWidth=hY;sn.removeClassName=f8;sn.removeEvent=uY;sn.removeUserSelectStyles=EY;var _s=uo,zT=aY(gu);function u8(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(u8=function(r){return r?n:e})(t)}function aY(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=u8(e);if(n&&n.has(t))return n.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}let iy="";function d8(t,e){return iy||(iy=(0,_s.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,_s.isFunction)(t[n])})),(0,_s.isFunction)(t[iy])?t[iy](e):!1}function cY(t,e,n){let r=t;do{if(d8(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function lY(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function uY(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function dY(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,_s.int)(n.borderTopWidth),e+=(0,_s.int)(n.borderBottomWidth),e}function hY(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,_s.int)(n.borderLeftWidth),e+=(0,_s.int)(n.borderRightWidth),e}function fY(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,_s.int)(n.paddingTop),e-=(0,_s.int)(n.paddingBottom),e}function pY(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,_s.int)(n.paddingLeft),e-=(0,_s.int)(n.paddingRight),e}function gY(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function mY(t,e){const n=lA(t,e,"px");return{[(0,zT.browserPrefixToKey)("transform",zT.default)]:n}}function yY(t,e){return lA(t,e,"")}function lA(t,e,n){let{x:r,y:s}=t,i="translate(".concat(r).concat(n,",").concat(s).concat(n,")");if(e){const o="".concat(typeof e.x=="string"?e.x:e.x+n),a="".concat(typeof e.y=="string"?e.y:e.y+n);i="translate(".concat(o,", ").concat(a,")")+i}return i}function wY(t,e){return t.targetTouches&&(0,_s.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,_s.findInArray)(t.changedTouches,n=>e===n.identifier)}function vY(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function bY(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&h8(t.body,"react-draggable-transparent-selection")}function EY(t){if(t)try{if(t.body&&f8(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function h8(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function f8(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var ho={};Object.defineProperty(ho,"__esModule",{value:!0});ho.canDragX=xY;ho.canDragY=SY;ho.createCoreData=IY;ho.createDraggableData=TY;ho.getBoundPosition=_Y;ho.getControlPosition=AY;ho.snapToGrid=CY;var ds=uo,bd=sn;function _Y(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:NY(r);const s=uA(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=i.querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,ds.int)(u.paddingLeft)+(0,ds.int)(l.marginLeft),top:-s.offsetTop+(0,ds.int)(u.paddingTop)+(0,ds.int)(l.marginTop),right:(0,bd.innerWidth)(c)-(0,bd.outerWidth)(s)-s.offsetLeft+(0,ds.int)(u.paddingRight)-(0,ds.int)(l.marginRight),bottom:(0,bd.innerHeight)(c)-(0,bd.outerHeight)(s)-s.offsetTop+(0,ds.int)(u.paddingBottom)-(0,ds.int)(l.marginBottom)}}return(0,ds.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,ds.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,ds.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,ds.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function CY(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function xY(t){return t.props.axis==="both"||t.props.axis==="x"}function SY(t){return t.props.axis==="both"||t.props.axis==="y"}function AY(t,e,n){const r=typeof e=="number"?(0,bd.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=uA(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,bd.offsetXYFromParent)(r||t,i,n.props.scale)}function IY(t,e,n){const r=!(0,ds.isNum)(t.lastX),s=uA(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function TY(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function NY(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function uA(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var av={},cv={};Object.defineProperty(cv,"__esModule",{value:!0});cv.default=PY;function PY(){}Object.defineProperty(av,"__esModule",{value:!0});av.default=void 0;var e1=OY(D),Rr=dA(o8),kY=dA(PS),rr=sn,la=ho,t1=uo,nf=dA(cv);function dA(t){return t&&t.__esModule?t:{default:t}}function p8(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(p8=function(r){return r?n:e})(t)}function OY(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=p8(e);if(n&&n.has(t))return n.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function wr(t,e,n){return e=RY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RY(t){var e=$Y(t,"string");return typeof e=="symbol"?e:String(e)}function $Y(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const oi={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let ua=oi.mouse,lv=class extends e1.Component{constructor(){super(...arguments),wr(this,"dragging",!1),wr(this,"lastX",NaN),wr(this,"lastY",NaN),wr(this,"touchIdentifier",null),wr(this,"mounted",!1),wr(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,rr.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,rr.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&e.preventDefault();const s=(0,rr.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,la.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,la.createCoreData)(this,o,a);(0,nf.default)("DraggableCore: handleDragStart: %j",c),(0,nf.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,rr.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,rr.addEvent)(r,ua.move,this.handleDrag),(0,rr.addEvent)(r,ua.stop,this.handleDragStop))}),wr(this,"handleDrag",e=>{const n=(0,la.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,la.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,la.createCoreData)(this,r,s);if((0,nf.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),wr(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,la.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,la.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,la.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,rr.removeUserSelectStyles)(a.ownerDocument),(0,nf.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,nf.default)("DraggableCore: Removing handlers"),(0,rr.removeEvent)(a.ownerDocument,ua.move,this.handleDrag),(0,rr.removeEvent)(a.ownerDocument,ua.stop,this.handleDragStop))}),wr(this,"onMouseDown",e=>(ua=oi.mouse,this.handleDragStart(e))),wr(this,"onMouseUp",e=>(ua=oi.mouse,this.handleDragStop(e))),wr(this,"onTouchStart",e=>(ua=oi.touch,this.handleDragStart(e))),wr(this,"onTouchEnd",e=>(ua=oi.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,rr.addEvent)(e,oi.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,rr.removeEvent)(n,oi.mouse.move,this.handleDrag),(0,rr.removeEvent)(n,oi.touch.move,this.handleDrag),(0,rr.removeEvent)(n,oi.mouse.stop,this.handleDragStop),(0,rr.removeEvent)(n,oi.touch.stop,this.handleDragStop),(0,rr.removeEvent)(e,oi.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,rr.removeUserSelectStyles)(n)}}findDOMNode(){var e,n;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(n=this.props)===null||n===void 0||(n=n.nodeRef)===null||n===void 0?void 0:n.current:kY.default.findDOMNode(this)}render(){return e1.cloneElement(e1.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};av.default=lv;wr(lv,"displayName","DraggableCore");wr(lv,"propTypes",{allowAnyClick:Rr.default.bool,children:Rr.default.node.isRequired,disabled:Rr.default.bool,enableUserSelectHack:Rr.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Rr.default.arrayOf(Rr.default.number),handle:Rr.default.string,cancel:Rr.default.string,nodeRef:Rr.default.object,onStart:Rr.default.func,onDrag:Rr.default.func,onStop:Rr.default.func,onMouseDown:Rr.default.func,scale:Rr.default.number,className:t1.dontSetMe,style:t1.dontSetMe,transform:t1.dontSetMe});wr(lv,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=h(D),n=u(o8),r=u(PS),s=u(XK),i=sn,o=ho,a=uo,c=u(av),l=u(cv);function u(b){return b&&b.__esModule?b:{default:b}}function d(b){if(typeof WeakMap!="function")return null;var v=new WeakMap,_=new WeakMap;return(d=function(E){return E?_:v})(b)}function h(b,v){if(b&&b.__esModule)return b;if(b===null||typeof b!="object"&&typeof b!="function")return{default:b};var _=d(v);if(_&&_.has(b))return _.get(b);var E={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in b)if(S!=="default"&&Object.prototype.hasOwnProperty.call(b,S)){var T=x?Object.getOwnPropertyDescriptor(b,S):null;T&&(T.get||T.set)?Object.defineProperty(E,S,T):E[S]=b[S]}return E.default=b,_&&_.set(b,E),E}function f(){return f=Object.assign?Object.assign.bind():function(b){for(var v=1;v<arguments.length;v++){var _=arguments[v];for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(b[E]=_[E])}return b},f.apply(this,arguments)}function p(b,v,_){return v=g(v),v in b?Object.defineProperty(b,v,{value:_,enumerable:!0,configurable:!0,writable:!0}):b[v]=_,b}function g(b){var v=w(b,"string");return typeof v=="symbol"?v:String(v)}function w(b,v){if(typeof b!="object"||b===null)return b;var _=b[Symbol.toPrimitive];if(_!==void 0){var E=_.call(b,v);if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(b)}class y extends e.Component{static getDerivedStateFromProps(v,_){let{position:E}=v,{prevPropsPosition:x}=_;return E&&(!x||E.x!==x.x||E.y!==x.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:E,prevPropsPosition:x}),{x:E.x,y:E.y,prevPropsPosition:{...E}}):null}constructor(v){super(v),p(this,"onDragStart",(_,E)=>{if((0,l.default)("Draggable: onDragStart: %j",E),this.props.onStart(_,(0,o.createDraggableData)(this,E))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),p(this,"onDrag",(_,E)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",E);const x=(0,o.createDraggableData)(this,E),S={x:x.x,y:x.y,slackX:0,slackY:0};if(this.props.bounds){const{x:C,y:O}=S;S.x+=this.state.slackX,S.y+=this.state.slackY;const[R,F]=(0,o.getBoundPosition)(this,S.x,S.y);S.x=R,S.y=F,S.slackX=this.state.slackX+(C-S.x),S.slackY=this.state.slackY+(O-S.y),x.x=S.x,x.y=S.y,x.deltaX=S.x-this.state.x,x.deltaY=S.y-this.state.y}if(this.props.onDrag(_,x)===!1)return!1;this.setState(S)}),p(this,"onDragStop",(_,E)=>{if(!this.state.dragging||this.props.onStop(_,(0,o.createDraggableData)(this,E))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",E);const S={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:C,y:O}=this.props.position;S.x=C,S.y=O}this.setState(S)}),this.state={dragging:!1,dragged:!1,x:v.position?v.position.x:v.defaultPosition.x,y:v.position?v.position.y:v.defaultPosition.y,prevPropsPosition:{...v.position},slackX:0,slackY:0,isElementSVG:!1},v.position&&!(v.onDrag||v.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var v,_;return(v=(_=this.props)===null||_===void 0||(_=_.nodeRef)===null||_===void 0?void 0:_.current)!==null&&v!==void 0?v:r.default.findDOMNode(this)}render(){const{axis:v,bounds:_,children:E,defaultPosition:x,defaultClassName:S,defaultClassNameDragging:T,defaultClassNameDragged:C,position:O,positionOffset:R,scale:F,...W}=this.props;let B={},I=null;const U=!!!O||this.state.dragging,P=O||x,k={x:(0,o.canDragX)(this)&&U?this.state.x:P.x,y:(0,o.canDragY)(this)&&U?this.state.y:P.y};this.state.isElementSVG?I=(0,i.createSVGTransform)(k,R):B=(0,i.createCSSTransform)(k,R);const j=(0,s.default)(E.props.className||"",S,{[T]:this.state.dragging,[C]:this.state.dragged});return e.createElement(c.default,f({},W,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(E),{className:j,style:{...E.props.style,...B},transform:I}))}}t.default=y,p(y,"displayName","Draggable"),p(y,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),p(y,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(n8);const{default:g8,DraggableCore:DY}=n8;ov.exports=g8;ov.exports.default=g8;ov.exports.DraggableCore=DY;var UY=ov.exports;const am=du(UY);function Yt(){return Yt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yt.apply(null,arguments)}function m8(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var y8={exports:{}},Ct={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Un=typeof Symbol=="function"&&Symbol.for,hA=Un?Symbol.for("react.element"):60103,fA=Un?Symbol.for("react.portal"):60106,uv=Un?Symbol.for("react.fragment"):60107,dv=Un?Symbol.for("react.strict_mode"):60108,hv=Un?Symbol.for("react.profiler"):60114,fv=Un?Symbol.for("react.provider"):60109,pv=Un?Symbol.for("react.context"):60110,pA=Un?Symbol.for("react.async_mode"):60111,gv=Un?Symbol.for("react.concurrent_mode"):60111,mv=Un?Symbol.for("react.forward_ref"):60112,yv=Un?Symbol.for("react.suspense"):60113,jY=Un?Symbol.for("react.suspense_list"):60120,wv=Un?Symbol.for("react.memo"):60115,vv=Un?Symbol.for("react.lazy"):60116,LY=Un?Symbol.for("react.block"):60121,MY=Un?Symbol.for("react.fundamental"):60117,BY=Un?Symbol.for("react.responder"):60118,FY=Un?Symbol.for("react.scope"):60119;function Ts(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case hA:switch(t=t.type,t){case pA:case gv:case uv:case hv:case dv:case yv:return t;default:switch(t=t&&t.$$typeof,t){case pv:case mv:case vv:case wv:case fv:return t;default:return e}}case fA:return e}}}function w8(t){return Ts(t)===gv}Ct.AsyncMode=pA;Ct.ConcurrentMode=gv;Ct.ContextConsumer=pv;Ct.ContextProvider=fv;Ct.Element=hA;Ct.ForwardRef=mv;Ct.Fragment=uv;Ct.Lazy=vv;Ct.Memo=wv;Ct.Portal=fA;Ct.Profiler=hv;Ct.StrictMode=dv;Ct.Suspense=yv;Ct.isAsyncMode=function(t){return w8(t)||Ts(t)===pA};Ct.isConcurrentMode=w8;Ct.isContextConsumer=function(t){return Ts(t)===pv};Ct.isContextProvider=function(t){return Ts(t)===fv};Ct.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===hA};Ct.isForwardRef=function(t){return Ts(t)===mv};Ct.isFragment=function(t){return Ts(t)===uv};Ct.isLazy=function(t){return Ts(t)===vv};Ct.isMemo=function(t){return Ts(t)===wv};Ct.isPortal=function(t){return Ts(t)===fA};Ct.isProfiler=function(t){return Ts(t)===hv};Ct.isStrictMode=function(t){return Ts(t)===dv};Ct.isSuspense=function(t){return Ts(t)===yv};Ct.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===uv||t===gv||t===hv||t===dv||t===yv||t===jY||typeof t=="object"&&t!==null&&(t.$$typeof===vv||t.$$typeof===wv||t.$$typeof===fv||t.$$typeof===pv||t.$$typeof===mv||t.$$typeof===MY||t.$$typeof===BY||t.$$typeof===FY||t.$$typeof===LY)};Ct.typeOf=Ts;y8.exports=Ct;var zY=y8.exports,gA=zY,WY={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},qY={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},HY={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},v8={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},mA={};mA[gA.ForwardRef]=HY;mA[gA.Memo]=v8;function WT(t){return gA.isMemo(t)?v8:mA[t.$$typeof]||WY}var VY=Object.defineProperty,GY=Object.getOwnPropertyNames,qT=Object.getOwnPropertySymbols,KY=Object.getOwnPropertyDescriptor,YY=Object.getPrototypeOf,HT=Object.prototype;function b8(t,e,n){if(typeof e!="string"){if(HT){var r=YY(e);r&&r!==HT&&b8(t,r,n)}var s=GY(e);qT&&(s=s.concat(qT(e)));for(var i=WT(t),o=WT(e),a=0;a<s.length;++a){var c=s[a];if(!qY[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=KY(e,c);try{VY(t,c,l)}catch{}}}}return t}var JY=b8;const QY=du(JY);var E8={};Object.defineProperty(E8,"__esModule",{value:!0});E8.default=ZY;function ZY(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function oy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e0(){return e0=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e0.apply(this,arguments)}function XY(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function da(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eJ(t){var e=function(n){XY(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,oy(da(da(i)),"cachedTheme",void 0),oy(da(da(i)),"lastOuterTheme",void 0),oy(da(da(i)),"lastTheme",void 0),oy(da(da(i)),"renderProvider",function(l){var u=i.props.children;return vs.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?e0({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?vs.createElement(t.Consumer,null,this.renderProvider):null},r}(vs.Component);return e}function tJ(t){return function(n){var r=vs.forwardRef(function(s,i){return vs.createElement(t.Consumer,null,function(o){return vs.createElement(n,e0({theme:o,ref:i},s))})});return QY(r,n),r}}function nJ(t){var e=function(){var r=vs.useContext(t);return r};return e}function rJ(t){return{context:t,withTheme:tJ(t),useTheme:nJ(t),ThemeProvider:eJ(t)}}var _8=D.createContext();rJ(_8);var VT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ah=(typeof window>"u"?"undefined":VT(window))==="object"&&(typeof document>"u"?"undefined":VT(document))==="object"&&document.nodeType===9;function cg(t){"@babel/helpers - typeof";return cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cg(t)}function sJ(t,e){if(cg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(cg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function iJ(t){var e=sJ(t,"string");return cg(e)=="symbol"?e:e+""}function oJ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,iJ(r.key),r)}}function yA(t,e,n){return e&&oJ(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function lC(t,e){return lC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},lC(t,e)}function C8(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,lC(t,e)}function GT(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var aJ={}.constructor;function uC(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(uC);if(t.constructor!==aJ)return t;var e={};for(var n in t)e[n]=uC(t[n]);return e}function bv(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=uC(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var KT=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},jl=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=KT(e[r]," ");else n=KT(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function Ih(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function rf(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function lg(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=Ih(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=rf(f+":"+u+jl(p)+";",o))}}else for(var g in a){var w=a[g];w!=null&&(r&&(r+=l),r+=rf(g+":"+u+jl(w)+";",o))}for(var y in e){var b=e[y];b!=null&&y!=="fallbacks"&&(r&&(r+=l),r+=rf(y+":"+u+jl(b)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),rf(""+t+u+"{"+r,o)+rf("}",o))}var cJ=/([[\].#*$><+~=|^:(),"'`\s])/g,YT=typeof CSS<"u"&&CSS.escape,wA=function(t){return YT?YT(t):t.replace(cJ,"\\$1")},x8=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),dC=function(t){C8(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(GT(GT(o)),l),o.selectorText="."+wA(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=jl(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Yt({},s,{allowEmpty:!0}):s;return lg(this.selectorText,this.style,a)},yA(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(x8),lJ={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new dC(e,n,r)}},n1={indent:1,children:!0},uJ=/@([\w-]+)/,dJ=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(uJ);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new Ev(Yt({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=n1);var s=Ih(r),i=s.linebreak;if(r.indent==null&&(r.indent=n1.indent),r.children==null&&(r.children=n1.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),hJ=/@container|@media|@supports\s+/,fJ={onCreateRule:function(e,n,r){return hJ.test(e)?new dJ(e,n,r):null}},r1={indent:1,children:!0},pJ=/@keyframes\s+([\w-]+)/,hC=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(pJ);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:wA(c(this,a)),this.rules=new Ev(Yt({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],Yt({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=r1);var s=Ih(r),i=s.linebreak;if(r.indent==null&&(r.indent=r1.indent),r.children==null&&(r.children=r1.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),gJ=/@keyframes\s+/,mJ=/\$([\w-]+)/g,fC=function(e,n){return typeof e=="string"?e.replace(mJ,function(r,s){return s in n?n[s]:r}):e},JT=function(e,n,r){var s=e[n],i=fC(s,r);i!==s&&(e[n]=i)},yJ={onCreateRule:function(e,n,r){return typeof e=="string"&&gJ.test(e)?new hC(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&JT(e,"animation-name",r.keyframes),"animation"in e&&JT(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return fC(e,s.keyframes);case"animation-name":return fC(e,s.keyframes);default:return e}}},wJ=function(t){C8(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Yt({},s,{allowEmpty:!0}):s;return lg(this.key,this.style,a)},e}(x8),vJ={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new wJ(e,n,r):null}},bJ=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=Ih(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=lg(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return lg(this.at,this.style,r)},t}(),EJ=/@font-face/,_J={onCreateRule:function(e,n,r){return EJ.test(e)?new bJ(e,n,r):null}},CJ=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return lg(this.key,this.style,r)},t}(),xJ={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new CJ(e,n,r):null}},SJ=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),AJ={"@charset":!0,"@import":!0,"@namespace":!0},IJ={onCreateRule:function(e,n,r){return e in AJ?new SJ(e,n,r):null}},QT=[lJ,fJ,yJ,vJ,_J,xJ,IJ],TJ={process:!0},ZT={force:!0,process:!0},Ev=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=Yt({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+wA(this.classes[p]));var g=bv(p,s,f);if(!g)return null;this.register(g);var w=f.index===void 0?this.index.length:f.index;return this.index.splice(w,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=Yt({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof dC?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof hC&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof dC?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof hC&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=TJ);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,ZT)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,ZT)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=Ih(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),S8=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Yt({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new Ev(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),NJ=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),PJ=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=m8(s,["attached"]),a=Ih(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},yA(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),ep=new PJ,pC=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),gC="2f1acc6c3a606b082e5eef5e54414ffb";pC[gC]==null&&(pC[gC]=0);var XT=pC[gC]++,eN=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+XT+a+n:c+i.key+"-"+XT+(a?"-"+a:"")+"-"+n};return r},A8=function(e){var n;return function(){return n||(n=e()),n}},kJ=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},OJ=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=jl(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},RJ=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},$J=function(e,n){return e.selectorText=n,e.selectorText===n},I8=A8(function(){return document.querySelector("head")});function DJ(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function UJ(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function jJ(t){for(var e=I8(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function LJ(t){var e=ep.registry;if(e.length>0){var n=DJ(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=UJ(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=jJ(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function MJ(t,e){var n=e.insertionPoint,r=LJ(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}I8().appendChild(t)}var BJ=A8(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),tN=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},nN=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},FJ=function(){var e=document.createElement("style");return e.textContent=`
`,e},zJ=function(){function t(n){this.getPropertyValue=kJ,this.setProperty=OJ,this.removeProperty=RJ,this.setSelector=$J,this.hasInsertedRules=!1,this.cssRules=[],n&&ep.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||FJ(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=BJ();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){MJ(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=nN(i,s);if(a=tN(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=nN(i,s),d=tN(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof S8&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),WJ=0,qJ=function(){function t(n){this.id=WJ++,this.version="10.10.0",this.plugins=new NJ,this.options={id:{minify:!1},createGenerateId:eN,Renderer:Ah?zJ:null,plugins:[]},this.generateId=eN({minify:!1});for(var r=0;r<QT.length;r++)this.plugins.use(QT[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=Yt({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=ep.index===0?0:ep.index+1);var a=new S8(r,Yt({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),ep.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=Yt({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=bv(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),T8=function(e){return new qJ(e)},rN=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},yA(t,[{key:"size",get:function(){return this.length}}]),t}(),vA=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function N8(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=N8(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */T8();var P8=Date.now(),s1="fnValues"+P8,i1="fnStyle"+ ++P8,HJ=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=bv(n,{},s);return i[i1]=r,i},onProcessStyle:function(n,r){if(s1 in r||i1 in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[s1]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[i1];a&&(o.style=a(n)||{});var c=o[s1];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function VJ(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var nd;typeof self<"u"?nd=self:typeof window<"u"?nd=window:typeof global<"u"?nd=global:typeof module<"u"?nd=module:nd=Function("return this")();var sN=VJ(nd),iN=function(e){return e&&e[sN]&&e===e[sN]()},GJ=function(e){return{onCreateRule:function(r,s,i){if(!iN(s))return null;var o=s,a=bv(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!iN(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},KJ=/;\n/,YJ=function(e){for(var n={},r=e.split(KJ),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},JJ=function(e){typeof e.style=="string"&&(e.style=YJ(e.style))};function QJ(){return{onProcessRule:JJ}}var bc="@global",mC="@global ",ZJ=function(){function t(n,r,s){this.type="global",this.at=bc,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new Ev(Yt({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),XJ=function(){function t(n,r,s){this.type="global",this.at=bc,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(mC.length);this.rule=s.jss.createRule(i,r,Yt({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),eQ=/\s*,\s*/g;function k8(t,e){for(var n=t.split(eQ),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function tQ(t,e){var n=t.options,r=t.style,s=r?r[bc]:null;if(s){for(var i in s)e.addRule(i,s[i],Yt({},n,{selector:k8(i,t.selector)}));delete r[bc]}}function nQ(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,bc.length)!==bc)){var i=k8(s.substr(bc.length),t.selector);e.addRule(i,r[s],Yt({},n,{selector:i})),delete r[s]}}function rQ(){function t(n,r,s){if(!n)return null;if(n===bc)return new ZJ(n,r,s);if(n[0]==="@"&&n.substr(0,mC.length)===mC)return new XJ(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(tQ(n,r),nQ(n,r))}return{onCreateRule:t,onProcessRule:e}}var rw=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},o1="extendCurrValue"+Date.now();function sQ(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];vl(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?Yt({},t,{extend:l}):t.extend[c];vl(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){vl(t.extend.extend,e,n,r);continue}if(rw(t.extend[d])){d in r||(r[d]={}),vl(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function iQ(t,e,n,r){for(var s in t)if(s!=="extend"){if(rw(r[s])&&rw(t[s])){vl(t[s],e,n,r[s]);continue}if(rw(t[s])){r[s]=vl(t[s],e,n);continue}r[s]=t[s]}}function vl(t,e,n,r){return r===void 0&&(r={}),sQ(t,e,n,r),iQ(t,e,n,r),r}function oQ(){function t(n,r,s){return"extend"in n?vl(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[o1])s.prop(i,null);return s[o1]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[o1]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var oN=/\s*,\s*/g,aQ=/&/g,cQ=/\$([\w-]+)/g;function lQ(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(oN),a=s.split(oN),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(aQ,u):u+" "+h}return c}function n(s,i,o){if(o)return Yt({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=Yt({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(cQ,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],Yt({},l,{selector:p})):c.addRule(g,s[d],Yt({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function yC(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=yC(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return yC(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function uQ(){function t(e,n){return"composes"in e&&(yC(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var dQ=/[A-Z]/g,hQ=/^ms-/,a1={};function fQ(t){return"-"+t.toLowerCase()}function O8(t){if(a1.hasOwnProperty(t))return a1[t];var e=t.replace(dQ,fQ);return a1[t]=hQ.test(e)?"-"+e:e}function t0(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:O8(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(t0):e.fallbacks=t0(t.fallbacks)),e}function pQ(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=t0(n[r]);return n}return t0(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=O8(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var J=vA&&CSS?CSS.px:"px",ay=vA&&CSS?CSS.ms:"ms",Pu=vA&&CSS?CSS.percent:"%",gQ={"animation-delay":ay,"animation-duration":ay,"background-position":J,"background-position-x":J,"background-position-y":J,"background-size":J,border:J,"border-bottom":J,"border-bottom-left-radius":J,"border-bottom-right-radius":J,"border-bottom-width":J,"border-left":J,"border-left-width":J,"border-radius":J,"border-right":J,"border-right-width":J,"border-top":J,"border-top-left-radius":J,"border-top-right-radius":J,"border-top-width":J,"border-width":J,"border-block":J,"border-block-end":J,"border-block-end-width":J,"border-block-start":J,"border-block-start-width":J,"border-block-width":J,"border-inline":J,"border-inline-end":J,"border-inline-end-width":J,"border-inline-start":J,"border-inline-start-width":J,"border-inline-width":J,"border-start-start-radius":J,"border-start-end-radius":J,"border-end-start-radius":J,"border-end-end-radius":J,margin:J,"margin-bottom":J,"margin-left":J,"margin-right":J,"margin-top":J,"margin-block":J,"margin-block-end":J,"margin-block-start":J,"margin-inline":J,"margin-inline-end":J,"margin-inline-start":J,padding:J,"padding-bottom":J,"padding-left":J,"padding-right":J,"padding-top":J,"padding-block":J,"padding-block-end":J,"padding-block-start":J,"padding-inline":J,"padding-inline-end":J,"padding-inline-start":J,"mask-position-x":J,"mask-position-y":J,"mask-size":J,height:J,width:J,"min-height":J,"max-height":J,"min-width":J,"max-width":J,bottom:J,left:J,top:J,right:J,inset:J,"inset-block":J,"inset-block-end":J,"inset-block-start":J,"inset-inline":J,"inset-inline-end":J,"inset-inline-start":J,"box-shadow":J,"text-shadow":J,"column-gap":J,"column-rule":J,"column-rule-width":J,"column-width":J,"font-size":J,"font-size-delta":J,"letter-spacing":J,"text-decoration-thickness":J,"text-indent":J,"text-stroke":J,"text-stroke-width":J,"word-spacing":J,motion:J,"motion-offset":J,outline:J,"outline-offset":J,"outline-width":J,perspective:J,"perspective-origin-x":Pu,"perspective-origin-y":Pu,"transform-origin":Pu,"transform-origin-x":Pu,"transform-origin-y":Pu,"transform-origin-z":Pu,"transition-delay":ay,"transition-duration":ay,"vertical-align":J,"flex-basis":J,"shape-margin":J,size:J,gap:J,grid:J,"grid-gap":J,"row-gap":J,"grid-row-gap":J,"grid-column-gap":J,"grid-template-rows":J,"grid-template-columns":J,"grid-auto-rows":J,"grid-auto-columns":J,"box-shadow-x":J,"box-shadow-y":J,"box-shadow-blur":J,"box-shadow-spread":J,"font-line-height":J,"text-shadow-x":J,"text-shadow-y":J,"text-shadow-blur":J};function R8(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var mQ=R8(gQ);function tp(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=tp(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=tp(s,e[s],n);else for(var i in e)e[i]=tp(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||mQ[t];return o&&!(e===0&&o===J)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function yQ(t){t===void 0&&(t={});var e=R8(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=tp(o,s[o],e);return s}function r(s,i){return tp(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var wQ={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},vQ={position:!0,size:!0},cy={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},c1={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function bQ(t,e,n){return t.map(function(r){return D8(r,e,n,!1,!0)})}function $8(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?$8(t[0],e,n,r):typeof t[0]=="object"?bQ(t,e,r):[t]}function D8(t,e,n,r,s){if(!(cy[e]||c1[e]))return[];var i=[];if(c1[e]&&(t=EQ(t,n,c1[e],r)),Object.keys(t).length)for(var o in cy[e]){if(t[o]){Array.isArray(t[o])?i.push(vQ[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}cy[e][o]!=null&&i.push(cy[e][o])}return!i.length||s?i:[i]}function EQ(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=ug((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function ug(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=ug(t.fallbacks[i],e,!0);continue}t[r]=$8(s,r,wQ,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=ug(t.fallbacks,e,!0);continue}t[r]=D8(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function _Q(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=ug(e[r],n);return e}return ug(e,n)}return{onProcessStyle:t}}function wC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function CQ(t){if(Array.isArray(t))return wC(t)}function xQ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function SQ(t,e){if(t){if(typeof t=="string")return wC(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wC(t,e):void 0}}function AQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IQ(t){return CQ(t)||xQ(t)||SQ(t)||AQ()}var Of="",vC="",U8="",j8="",TQ=Ah&&"ontouchstart"in document.documentElement;if(Ah){var l1={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},NQ=document.createElement("p"),u1=NQ.style,PQ="Transform";for(var d1 in l1)if(d1+PQ in u1){Of=d1,vC=l1[d1];break}Of==="Webkit"&&"msHyphens"in u1&&(Of="ms",vC=l1.ms,j8="edge"),Of==="Webkit"&&"-apple-trailing-word"in u1&&(U8="apple")}var We={js:Of,css:vC,vendor:U8,browser:j8,isTouch:TQ};function kQ(t){return t[1]==="-"||We.js==="ms"?t:"@"+We.css+"keyframes"+t.substr(10)}var OQ={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:We.js==="ms"?"-webkit-"+e:We.css+e}},RQ={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:We.js==="Webkit"?We.css+"print-"+e:e}},$Q=/[-\s]+(.)?/g;function DQ(t,e){return e?e.toUpperCase():""}function bA(t){return t.replace($Q,DQ)}function Oc(t){return bA("-"+t)}var UQ={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(We.js==="Webkit"){var r="mask-image";if(bA(r)in n)return e;if(We.js+Oc(r)in n)return We.css+e}return e}},jQ={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:We.vendor==="apple"&&!We.isTouch?We.css+e:e}},LQ={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:We.css+e}},MQ={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:We.css+e}},BQ={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:We.js==="Webkit"||We.js==="ms"&&We.browser!=="edge"?We.css+e:e}},FQ={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:We.js==="Moz"||We.js==="ms"||We.vendor==="apple"?We.css+e:e}},zQ={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(We.js==="Webkit"){var r="WebkitColumn"+Oc(e);return r in n?We.css+"column-"+e:!1}if(We.js==="Moz"){var s="page"+Oc(e);return s in n?"page-"+e:!1}return!1}},WQ={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(We.js==="Moz")return e;var r=e.replace("-inline","");return We.js+Oc(r)in n?We.css+r:!1}},qQ={supportedProperty:function(e,n){return bA(e)in n?e:!1}},HQ={supportedProperty:function(e,n){var r=Oc(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:We.js+r in n?We.css+e:We.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},VQ={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:We.js==="ms"?""+We.css+e:e}},GQ={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:We.js==="ms"?We.css+"scroll-chaining":e}},KQ={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},YQ={supportedProperty:function(e,n){var r=KQ[e];return r&&We.js+Oc(r)in n?We.css+r:!1}},L8={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},JQ=Object.keys(L8),QQ=function(e){return We.css+e},ZQ={supportedProperty:function(e,n,r){var s=r.multiple;if(JQ.indexOf(e)>-1){var i=L8[e];if(!Array.isArray(i))return We.js+Oc(i)in n?We.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(We.js+Oc(i[0])in n))return!1;return i.map(QQ)}return!1}},M8=[OQ,RQ,UQ,jQ,LQ,MQ,BQ,FQ,zQ,WQ,qQ,HQ,VQ,GQ,YQ,ZQ],aN=M8.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),XQ=M8.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,IQ(e.noPrefill)),t},[]),Rf,ll={};if(Ah){Rf=document.createElement("p");var h1=window.getComputedStyle(document.documentElement,"");for(var f1 in h1)isNaN(f1)||(ll[h1[f1]]=h1[f1]);XQ.forEach(function(t){return delete ll[t]})}function bC(t,e){if(e===void 0&&(e={}),!Rf)return t;if(ll[t]!=null)return ll[t];(t==="transition"||t==="transform")&&(e[t]=t in Rf.style);for(var n=0;n<aN.length&&(ll[t]=aN[n](t,Rf.style,e),!ll[t]);n++);try{Rf.style[t]=""}catch{return!1}return ll[t]}var ku={},eZ={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},tZ=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Aa;function nZ(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?bC(e):", "+bC(n);return r||e||n}Ah&&(Aa=document.createElement("p"));function cN(t,e){var n=e;if(!Aa||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(ku[r]!=null)return ku[r];try{Aa.style[t]=n}catch{return ku[r]=!1,!1}if(eZ[t])n=n.replace(tZ,nZ);else if(Aa.style[t]===""&&(n=We.css+n,n==="-ms-flex"&&(Aa.style[t]="-ms-flexbox"),Aa.style[t]=n,Aa.style[t]===""))return ku[r]=!1,!1;return Aa.style[t]="",ku[r]=n,ku[r]}function rZ(){function t(s){if(s.type==="keyframes"){var i=s;i.at=kQ(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=bC(i);c&&c!==i&&(a=!0);var l=!1,u=cN(c,jl(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return cN(i,jl(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function sZ(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var iZ=function(e){return e===void 0&&(e={}),{plugins:[HJ(),GJ(e.observable),QJ(),rQ(),oQ(),lQ(),uQ(),pQ(),yQ(e.defaultUnit),_Q(),rZ(),sZ()]}},oZ=Number.MIN_SAFE_INTEGER||-1e9,aZ=function(){return oZ++},cZ=D.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!Ah}),lN=new Map,EA=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new rN),r[n];var s=lN.get(n);return s||(s=new rN,lN.set(n,s)),s},uN=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=EA(r,s);o.manage(i),r.registry&&r.registry.add(n)}},lZ=function(e){if(e.sheet){var n=EA(e.context,e.index);n.unmanage(e.theme)}},uZ=T8(iZ()),B8=new WeakMap,F8=function(e){return B8.get(e)},dZ=function(e,n){B8.set(e,n)},hZ=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function fZ(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",Yt({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var pZ=function(e){if(!e.context.disableStylesGeneration){var n=EA(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||uZ,i=hZ(e),o=N8(i),a=s.createStyleSheet(i,fZ(e,o!==null));return dZ(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},gZ=function(e,n){for(var r in n)e.deleteRule(n[r])},mZ=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},yZ=function(e,n){var r=F8(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},wZ=function(e,n){if(!n)return e.classes;var r=F8(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function dN(t){return t?D.useEffect:vs.useInsertionEffect||D.useLayoutEffect}var p1={},Oi=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?aZ():s,o=r.theming,a=r.name,c=m8(r,["index","theming","name"]),l=o&&o.context||_8,u=function(f){return typeof e=="function"&&(f||D.useContext(l))||p1},d={};return function(f){var p=D.useRef(!0),g=D.useContext(cZ),w=u(f&&f.theme),y=D.useMemo(function(){var E=pZ({context:g,styles:e,name:a,theme:w,index:i,sheetOptions:c});return E&&g.isSSR&&uN({index:i,context:g,sheet:E,theme:w}),[E,E?yZ(E,f):null]},[g,w]),b=y[0],v=y[1];dN(g.isSSR)(function(){b&&v&&!p.current&&mZ(f,b,v)},[f]),dN(g.isSSR)(function(){return b&&uN({index:i,context:g,sheet:b,theme:w}),function(){b&&(lZ({index:i,context:g,sheet:b,theme:w}),v&&gZ(b,v))}},[b]);var _=D.useMemo(function(){return b&&v?wZ(b,v):d},[b,v]);return D.useDebugValue(_),D.useDebugValue(w===p1?"No theme":w),D.useEffect(function(){p.current=!1}),_}};const vZ=Oi({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function g1({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=vZ(),d=D.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=m.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[m.jsx("img",{src:t,alt:e,className:u.iconImage}),m.jsx("span",{className:u.iconLabel,children:e})]});return o?f:m.jsx(am,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const bZ=Oi({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function Us({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=bZ({isOpen:e}),u=D.useRef(null),d=()=>{r&&r(t)};return m.jsx(am,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:m.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[m.jsxs("div",{className:l.header,children:[m.jsx("span",{children:i||t.replace("-popup","")}),m.jsxs("div",{className:l.titleBarButtons,children:[m.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),m.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:"✕"})]})]}),m.jsx("div",{className:l.content,children:s})]})})}const m1=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],EZ=80,_Z=80,CZ=10,xZ=10,SZ=10,AZ=10,IZ=({onIconClick:t})=>{const e=m1.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:SZ+d*(EZ+CZ),y:AZ+u*(_Z+xZ)},u++,u>=4&&(u=0,d++)}),l},[r,s]=D.useState(n()),[i,o]=D.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return m.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:m.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>m.jsx(g1,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&m.jsx(Us,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:m1.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>m.jsx(g1,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&m.jsx(Us,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:m1.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>m.jsx(g1,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},TZ=Oi({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),NZ=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=D.useState(!1),[o,a]=D.useState(new Date),c=TZ({isOpen:s});D.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return m.jsxs("div",{className:c.taskbar,children:[m.jsxs("div",{className:c.leftSection,children:[m.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),m.jsx("div",{className:c.windows,children:t.map(h=>m.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),m.jsxs("div",{className:c.rightSection,children:[m.jsxs("div",{className:c.statusSection,children:[m.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:m.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),m.jsx("div",{className:c.clock,children:l(o)})]}),s&&m.jsxs("div",{className:c.menu,children:[m.jsx("a",{href:"https://dexscreener.com/solana/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Dexscreener"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function z8(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function _A(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function W8(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function CA(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function q8(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function H8(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=`https://api.opensea.io/api/v2/collection/${t}/nfts?chain=solana&limit=${e}&include_orders=true`;try{const i=await fetch(r,{headers:{"X-API-KEY":n}});if(!i.ok)throw new Error(`Failed to get OpenSea Solana NFTs: ${i.statusText}`);const o=await i.json();console.log("Solana collection response:",o),console.log("Sample NFT from response:",o.nfts[0]),console.log("Sample NFT owners:",(s=o.nfts[0])==null?void 0:s.owners),console.log("Sample NFT full structure:",JSON.stringify(o.nfts[0],null,2));const a=o.nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"SOL",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea Solana NFTs:",i),i}}async function PZ(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=[`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false&include_metadata=true`];for(const i of r){console.log("Trying OpenSea endpoint:",i);try{const o=await fetch(i,{headers:{"X-API-KEY":n}});if(console.log("Response status:",o.status),!o.ok){const c=await o.text();console.error("API Error response:",c);continue}const a=await o.json();if(console.log("Raw API response:",a),console.log("Number of NFTs returned:",((s=a.nfts)==null?void 0:s.length)||0),a.nfts&&a.nfts.length>0){const c=a.nfts.map(l=>({id:l.identifier,address:l.contract,token_id:parseInt(l.identifier,10),attributes:JSON.stringify(l.traits||[]),name:l.name||`#${l.identifier}`,image_url:l.image_url,owner_of:t,block_minted:0,contract_type:"SOL",description:l.description||"",image:l.image_url,image_url_shrunk:l.image_url,animation_url:l.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:"",num_items:1,created_at:l.updated_at||new Date().toISOString(),updated_at:l.updated_at||new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}));return console.log("Transformed NFTs:",c.length),{page:1,pageSize:e,totalCount:c.length,totalPages:1,data:c}}}catch(o){console.error("Error with endpoint:",i,o);continue}}return console.log("All OpenSea endpoints failed, returning empty result"),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]}}const kZ=Oi({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),OZ=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=kZ({isOpen:t}),i=D.useRef(null),[o,a]=D.useState([]),[c,l]=D.useState(!1),[u,d]=D.useState(!1),[h,f]=D.useState({}),[p,g]=D.useState(null),{data:w}=M5();D.useEffect(()=>{t&&r&&y()},[t,r]);const y=async()=>{l(!0),g(null);try{const x=await z8(r);a(x);const S={};x.forEach(T=>{S[T.id]=0}),f(S)}catch(x){g(x.message)}finally{l(!1)}},b=(x,S)=>{f(T=>({...T,[x]:Math.max(0,S)}))},v=async()=>{const x=Object.entries(h).filter(([,S])=>S>0).map(([S,T])=>({id:S,quantity:T}));if(x.length===0){g("Please select at least one item to mint");return}if(!w){g("Wallet not connected");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const S=await W8(r,x);if(console.log("Mint API result:",S),S.success&&S.mintTransaction){console.log("Got mint transaction:",S.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const T=await w.sendTransaction({to:S.mintTransaction.to,value:BigInt(S.mintTransaction.value),data:S.mintTransaction.data});console.log("Transaction sent successfully:",T),alert(`NFT Minted Successfully: Transaction Hash - ${T}`),e()}catch(T){console.error("Transaction sending failed:",T),g("Transaction failed: "+T.message)}}else throw new Error(S.message||"Could not retrieve minting transaction.")}catch(S){console.error("Minting failed:",S),g("Minting failed: "+S.message)}finally{d(!1)}},_=(x,S)=>`${parseFloat(x)} ${S}`,E=()=>{n&&n()};return t?m.jsx(am,{nodeRef:i,handle:`.${s.header}`,children:m.jsxs("div",{ref:i,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"Mint Pixelawbster"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:E,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),m.jsxs("div",{className:s.content,children:[p&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:p}),c?m.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{children:"Available Lists:"}),o.map(x=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:x.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",_(x.token_price,x.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",x.wallet_limit===4294967295?"Unlimited":x.wallet_limit," per wallet"]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[m.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),m.jsx("input",{type:"number",min:"0",max:x.wallet_limit===4294967295?999:x.wallet_limit,value:h[x.id]||0,onChange:S=>b(x.id,parseInt(S.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},x.id))]}),m.jsx("button",{onClick:v,disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},RZ=Oi({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),$Z=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},DZ=({nft:t,onClose:e})=>{const n=RZ(),r=D.useRef(null),s=$Z(t.attributes);return m.jsx(am,{nodeRef:r,handle:`.${n.header}`,children:m.jsxs("div",{className:n.popup,ref:r,children:[m.jsxs("div",{className:n.header,children:[m.jsxs("span",{children:[t.name," - Details"]}),m.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),m.jsxs("div",{className:n.content,children:[m.jsx("img",{src:t.image_url,alt:t.name,className:n.detailImage}),m.jsx("h3",{children:"Traits"}),m.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):m.jsx("li",{children:"No traits found."})})]})]})})},UZ=Symbol(),hN=Object.getPrototypeOf,EC=new WeakMap,jZ=t=>t&&(EC.has(t)?EC.get(t):hN(t)===Object.prototype||hN(t)===Array.prototype),LZ=t=>jZ(t)&&t[UZ]||null,fN=(t,e=!0)=>{EC.set(t,e)},n0={},y1=t=>typeof t=="object"&&t!==null,Oa=new WeakMap,$f=new WeakSet,MZ=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>y1(l)&&!$f.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return fN(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:w}=Reflect.getOwnPropertyDescriptor(l,p),y={value:g,enumerable:w,configurable:!0};if($f.has(g))fN(g,!1);else if(g instanceof Promise)delete y.value,y.get=()=>d(g);else if(Oa.has(g)){const[b,v]=Oa.get(g);y.value=i(b,v(),d)}Object.defineProperty(f,p,y)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!y1(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(C,O=++a[0])=>{d!==O&&(d=O,h.forEach(R=>R(C,O)))};let p=a[1];const g=(C=++a[1])=>(p!==C&&!h.size&&(p=C,y.forEach(([O])=>{const R=O[1](C);R>d&&(d=R)})),d),w=C=>(O,R)=>{const F=[...O];F[1]=[C,...F[1]],f(F,R)},y=new Map,b=(C,O)=>{if((n0?"production":void 0)!=="production"&&y.has(C))throw new Error("prop listener already exists");if(h.size){const R=O[3](w(C));y.set(C,[O,R])}else y.set(C,[O])},v=C=>{var O;const R=y.get(C);R&&(y.delete(C),(O=R[1])==null||O.call(R))},_=C=>(h.add(C),h.size===1&&y.forEach(([R,F],W)=>{if((n0?"production":void 0)!=="production"&&F)throw new Error("remove already exists");const B=R[3](w(W));y.set(W,[R,B])}),()=>{h.delete(C),h.size===0&&y.forEach(([R,F],W)=>{F&&(F(),y.set(W,[R]))})}),E=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),S=e(E,{deleteProperty(C,O){const R=Reflect.get(C,O);v(O);const F=Reflect.deleteProperty(C,O);return F&&f(["delete",[O],R]),F},set(C,O,R,F){const W=Reflect.has(C,O),B=Reflect.get(C,O,F);if(W&&(t(B,R)||o.has(R)&&t(B,o.get(R))))return!0;v(O),y1(R)&&(R=LZ(R)||R);let I=R;if(R instanceof Promise)R.then(A=>{R.status="fulfilled",R.value=A,f(["resolve",[O],A])}).catch(A=>{R.status="rejected",R.reason=A,f(["reject",[O],A])});else{!Oa.has(R)&&n(R)&&(I=c(R));const A=!$f.has(I)&&Oa.get(I);A&&b(O,A)}return Reflect.set(C,O,I,F),f(["set",[O],R,B]),!0}});o.set(l,S);const T=[E,g,i,_];return Oa.set(S,T),Reflect.ownKeys(l).forEach(C=>{const O=Object.getOwnPropertyDescriptor(l,C);"value"in O&&(S[C]=l[C],delete O.value,delete O.writable),Object.defineProperty(E,C,O)}),S})=>[c,Oa,$f,t,e,n,r,s,i,o,a],[BZ]=MZ();function $t(t={}){return BZ(t)}function Jn(t,e,n){const r=Oa.get(t);(n0?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function dg(t,e){const n=Oa.get(t);(n0?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function eu(t){return $f.add(t),t}function Qn(t,e,n,r){let s=t[e];return Jn(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function FZ(t){const e=$t({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var pN={};const X={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof pN<"u"?pN.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},hg={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=X.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var zZ=20,WZ=1,tu=1e6,gN=1e6,qZ=-7,HZ=21,VZ=!1,cm="[big.js] ",mu=cm+"Invalid ",_v=mu+"decimal places",GZ=mu+"rounding mode",V8=cm+"Division by zero",_t={},to=void 0,KZ=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function G8(){function t(e){var n=this;if(!(n instanceof t))return e===to?G8():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(mu+"value");e=e===0&&1/e<0?"-0":String(e)}YZ(n,e)}n.constructor=t}return t.prototype=_t,t.DP=zZ,t.RM=WZ,t.NE=qZ,t.PE=HZ,t.strict=VZ,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function YZ(t,e){var n,r,s;if(!KZ.test(e))throw Error(mu+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function yu(t,e,n,r){var s=t.c;if(n===to&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(GZ);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==to))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==to||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function wu(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}_t.abs=function(){var t=new this.constructor(this);return t.s=1,t};_t.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};_t.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>tu)throw Error(_v);if(!s[0])throw Error(V8);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),w=g.length,y=t,b=y.c=[],v=0,_=o+(y.e=e.e-t.e)+1;for(y.s=i,i=_<0?0:_,h.unshift(0);w++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(w=g.length))u=a>w?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=w==a?s:h;w;){if(g[--w]<c[w]){for(d=w;d&&!g[--d];)g[d]=9;--g[d],g[w]+=10}g[w]-=c[w]}for(;!g[0];)g.shift()}else break}b[v++]=u?l:++l,g[0]&&u?g[w]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==to)&&i--);return!b[0]&&v!=1&&(b.shift(),y.e--,_--),v>_&&yu(y,_,n.RM,g[0]!==to),y};_t.eq=function(t){return this.cmp(t)===0};_t.gt=function(t){return this.cmp(t)>0};_t.gte=function(t){return this.cmp(t)>-1};_t.lt=function(t){return this.cmp(t)<0};_t.lte=function(t){return this.cmp(t)<1};_t.minus=_t.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};_t.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(V8);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};_t.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};_t.plus=_t.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};_t.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-gN||t>gN)throw Error(mu+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};_t.prec=function(t,e){if(t!==~~t||t<1||t>tu)throw Error(mu+"precision");return yu(new this.constructor(this),t,e)};_t.round=function(t,e){if(t===to)t=0;else if(t!==~~t||t<-tu||t>tu)throw Error(_v);return yu(new this.constructor(this),t+this.e+1,e)};_t.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(cm+"No square root");i=Math.sqrt(+wu(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return yu(t,(s.DP-=4)+t.e+1,s.RM)};_t.times=_t.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};_t.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==to){if(t!==~~t||t<0||t>tu)throw Error(_v);for(n=yu(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return wu(n,!0,!!r)};_t.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==to){if(t!==~~t||t<0||t>tu)throw Error(_v);for(n=yu(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return wu(n,!1,!!r)};_t[Symbol.for("nodejs.util.inspect.custom")]=_t.toJSON=_t.toString=function(){var t=this,e=t.constructor;return wu(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};_t.toNumber=function(){var t=+wu(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(cm+"Imprecise conversion");return t};_t.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==to){if(t!==~~t||t<1||t>tu)throw Error(mu+"precision");for(n=yu(new r(n),t,e);n.c.length<t;)n.c.push(0)}return wu(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};_t.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(cm+"valueOf disallowed");return wu(t,t.e<=e.NE||t.e>=e.PE,!0)};var sf=G8();const JZ={bigNumber(t){return t?new sf(t):new sf(0)},multiply(t,e){if(t===void 0||e===void 0)return new sf(0);const n=new sf(t),r=new sf(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},QZ=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],ZZ=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],XZ=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],eX={getERC20Abi:t=>X.USDT_CONTRACT_ADDRESSES.includes(t)?XZ:QZ,getSwapAbi:()=>ZZ},ps={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},je={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function w1(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Re={setItem(t,e){Df()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Df())return localStorage.getItem(t)||void 0},removeItem(t){Df()&&localStorage.removeItem(t)},clear(){Df()&&localStorage.clear()}};function Df(){return typeof window<"u"&&typeof localStorage<"u"}function Lo(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var mN={};const v1=(typeof process<"u"&&typeof mN<"u"?mN.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",K8=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]},{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]}],tX="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",vt={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:v1,SECURE_SITE_DASHBOARD:`${v1}/dashboard`,SECURE_SITE_FAVICON:`${v1}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld","coinbase"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},le={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=le.getActiveNamespace(),e=le.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Re.setItem(je.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Re.getItem(je.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Re.removeItem(je.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Re.setItem(je.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Re.setItem(je.ACTIVE_CAIP_NETWORK_ID,t),le.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Re.getItem(je.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Re.removeItem(je.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=w1(t);Re.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=le.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Re.setItem(je.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Re.getItem(je.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=w1(t);Re.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Re.getItem(je.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=w1(t);return Re.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{Re.setItem(je.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Re.getItem(je.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Re.removeItem(je.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Re.getItem(je.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=Re.getItem(je.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{Re.setItem(je.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Re.getItem(je.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Re.getItem(je.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Re.setItem(je.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=le.getConnectedNamespaces();e.includes(t)||(e.push(t),le.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=le.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),le.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Re.getItem(je.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Re.setItem(je.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Re.removeItem(je.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Re.getItem(je.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=le.getBalanceCache();Re.setItem(je.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=le.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;le.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=le.getBalanceCache();e[t.caipAddress]=t,Re.setItem(je.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Re.getItem(je.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=le.getBalanceCache();Re.setItem(je.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=le.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),le.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=le.getNativeBalanceCache();e[t.caipAddress]=t,Re.setItem(je.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Re.getItem(je.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=le.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;le.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=le.getEnsCache();e[t.address]=t,Re.setItem(je.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=le.getEnsCache();Re.setItem(je.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Re.getItem(je.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=le.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;le.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=le.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Re.setItem(je.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=le.getIdentityCache();Re.setItem(je.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Re.removeItem(je.PORTFOLIO_CACHE),Re.removeItem(je.NATIVE_BALANCE_CACHE),Re.removeItem(je.ENS_CACHE),Re.removeItem(je.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Re.setItem(je.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Re.getItem(je.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=le.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===X.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};Re.setItem(je.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Re.getItem(je.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=le.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),Re.setItem(je.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=Re.getItem(je.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=le.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),Re.setItem(je.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=le.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),Re.setItem(je.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(le.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},Ce={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return Ce.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=vt.TEN_SEC_MS:!0},isAllowedRetry(t,e=vt.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(Ce.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+vt.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(Ce.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!Ce.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?le.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,Ce.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return X.W3M_API_URL},getBlockchainApiUrl(){return X.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return X.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?vt.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in X.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function of(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class lm{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await of(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await of(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await of(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await of(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await of(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const nX={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?vt.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(Ce.isTelegram()){if(Ce.isIos())return t.filter(e=>e!=="google");if(Ce.isMac())return t.filter(e=>e!=="x");if(Ce.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},Te=$t({features:vt.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:vt.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),ne={state:Te,subscribeKey(t,e){return Qn(Te,t,e)},setOptions(t){Object.assign(Te,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...Te.remoteFeatures,...t};Te.remoteFeatures=e,(n=Te.remoteFeatures)!=null&&n.socials&&(Te.remoteFeatures.socials=nX.filterSocialsByPlatform(Te.remoteFeatures.socials))},setFeatures(t){if(!t)return;Te.features||(Te.features=vt.DEFAULT_FEATURES);const e={...Te.features,...t};Te.features=e},setProjectId(t){Te.projectId=t},setCustomRpcUrls(t){Te.customRpcUrls=t},setAllWallets(t){Te.allWallets=t},setIncludeWalletIds(t){Te.includeWalletIds=t},setExcludeWalletIds(t){Te.excludeWalletIds=t},setFeaturedWalletIds(t){Te.featuredWalletIds=t},setTokens(t){Te.tokens=t},setTermsConditionsUrl(t){Te.termsConditionsUrl=t},setPrivacyPolicyUrl(t){Te.privacyPolicyUrl=t},setCustomWallets(t){Te.customWallets=t},setIsSiweEnabled(t){Te.isSiweEnabled=t},setIsUniversalProvider(t){Te.isUniversalProvider=t},setSdkVersion(t){Te.sdkVersion=t},setMetadata(t){Te.metadata=t},setDisableAppend(t){Te.disableAppend=t},setEIP6963Enabled(t){Te.enableEIP6963=t},setDebug(t){Te.debug=t},setEnableWalletConnect(t){Te.enableWalletConnect=t},setEnableWalletGuide(t){Te.enableWalletGuide=t},setEnableAuthLogger(t){Te.enableAuthLogger=t},setEnableWallets(t){Te.enableWallets=t},setPreferUniversalLinks(t){Te.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){Te.hasMultipleAddresses=t},setSIWX(t){Te.siwx=t},setConnectMethodsOrder(t){Te.features={...Te.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){Te.features={...Te.features,walletFeaturesOrder:t}},setSocialsOrder(t){Te.remoteFeatures={...Te.remoteFeatures,socials:t}},setCollapseWallets(t){Te.features={...Te.features,collapseWallets:t}},setEnableEmbedded(t){Te.enableEmbedded=t},setAllowUnsupportedChain(t){Te.allowUnsupportedChain=t},setManualWCControl(t){Te.manualWCControl=t},setEnableNetworkSwitch(t){Te.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(Te.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){Te.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return Te.universalProviderConfigOverride},getSnapshot(){return dg(Te)}},rX=Object.freeze({enabled:!0,events:[]}),sX=new lm({baseUrl:Ce.getAnalyticsUrl(),clientId:null}),iX=5,oX=60*1e3,ha=$t({...rX}),aX={state:ha,subscribeKey(t,e){return Qn(ha,t,e)},async sendError(t,e){if(!ha.enabled)return;const n=Date.now();if(ha.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<oX}).length>=iX)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};ha.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=ne.state;await sX.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:Ce.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){ha.enabled=!0},disable(){ha.enabled=!1},clearEvents(){ha.events=[]}};class ch extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,ch.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,ch):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function yN(t,e){const n=t instanceof ch?t:new ch(t instanceof Error?t.message:String(t),e,t);throw aX.sendError(n,n.category),n}function Ns(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return yN(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return yN(a,e)}},n[r]=i}else n[r]=s}),n}const Ki={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},cX={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Ki.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Ki.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Ki.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Ki.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===X.CHAIN.SOLANA&&t===Ki.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Ki.COINBASE.url}/dapp?cb_url=${r}`)}},cs=$t({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),lX={state:cs,subscribeNetworkImages(t){return Jn(cs.networkImages,()=>t(cs.networkImages))},subscribeKey(t,e){return Qn(cs,t,e)},subscribe(t){return Jn(cs,()=>t(cs))},setWalletImage(t,e){cs.walletImages[t]=e},setNetworkImage(t,e){cs.networkImages[t]=e},setChainImage(t,e){cs.chainImages[t]=e},setConnectorImage(t,e){cs.connectorImages={...cs.connectorImages,[t]:e}},setTokenImage(t,e){cs.tokenImages[t]=e},setCurrencyImage(t,e){cs.currencyImages[t]=e}},wi=Ns(lX),uX={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},b1=$t({networkImagePromises:{}}),Y8={async fetchWalletImage(t){if(t)return await Se._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(b1.networkImagePromises[t]||(b1.networkImagePromises[t]=Se._fetchNetworkImage(t)),await b1.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return wi.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return wi.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return wi.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return wi.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return wi.state.connectorImages[t.imageId]},getChainImage(t){return wi.state.networkImages[uX[t]]}},fa=$t({message:"",variant:"info",open:!1}),dX={state:fa,subscribeKey(t,e){return Qn(fa,t,e)},open(t,e){const{debug:n}=ne.state,{shortMessage:r,longMessage:s}=t;n&&(fa.message=r,fa.variant=e,fa.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){fa.open=!1,fa.message="",fa.variant="info"}},fn=Ns(dX),hX=Ce.getAnalyticsUrl(),fX=new lm({baseUrl:hX,clientId:null}),pX=["MODAL_CREATED"],go=$t({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),bt={state:go,subscribe(t){return Jn(go,()=>t(go))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ne.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=ce.state.address;if(pX.includes(t.data.event)||typeof window>"u")return;await fX.post({path:"/e",params:bt.getSdkProperties(),body:{eventId:Ce.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),go.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===X.HTTP_STATUS_CODES.FORBIDDEN&&!go.reportedErrors.FORBIDDEN&&(fn.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Df()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),go.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;go.timestamp=Date.now(),go.data=t,(e=ne.state.features)!=null&&e.analytics&&bt._sendAnalyticsEvent(go)}},gX=Ce.getApiUrl(),$r=new lm({baseUrl:gX,clientId:null}),mX=40,wN=4,yX=20,Be=$t({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Se={state:Be,subscribeKey(t,e){return Qn(Be,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ne.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return ne.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${$r.baseUrl}/getWalletImage/${t}`,n=await $r.getBlob({path:e,params:Se._getSdkProperties()});wi.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${$r.baseUrl}/public/getAssetImage/${t}`,n=await $r.getBlob({path:e,params:Se._getSdkProperties()});wi.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${$r.baseUrl}/public/getAssetImage/${t}`,n=await $r.getBlob({path:e,params:Se._getSdkProperties()});wi.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${$r.baseUrl}/public/getCurrencyImage/${t}`,n=await $r.getBlob({path:e,params:Se._getSdkProperties()});wi.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${$r.baseUrl}/public/getTokenImage/${t}`,n=await $r.getBlob({path:e,params:Se._getSdkProperties()});wi.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return Ce.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Ki.COINBASE.id?!0:$.state.activeChain==="solana"&&(n.id===Ki.SOLFLARE.id||n.id===Ki.PHANTOM.id)):t},async fetchProjectConfig(){return(await $r.get({path:"/appkit/v1/config",params:Se._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await $r.get({path:"/projects/v1/origins",params:Se._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===X.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=X.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=$.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!Y8.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>Se._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=ue.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>Se._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Se._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Se._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];Se._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Ki).map(o=>o.id));const r=await $r.get({path:"/getWallets",params:{...Se._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:Se._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=ne.state;if(t!=null&&t.length){const e={...Se._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??wN,include:t},{data:n}=await Se.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Se._fetchWalletImage(i))),Be.featured=r,Be.allFeatured=r}},async fetchRecommendedWallets(){try{Be.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=ne.state,r=[...e??[],...n??[]].filter(Boolean),s=$.getRequestedCaipNetworkIds().join(","),i={page:1,entries:wN,include:t,exclude:r,chains:s},{data:o,count:a}=await Se.fetchWallets(i),c=le.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>Se._fetchWalletImage(d))),Be.recommended=o,Be.allRecommended=o,Be.count=a??0}catch{}finally{Be.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=ne.state,s=$.getRequestedCaipNetworkIds().join(","),i=[...Be.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:mX,include:e,exclude:i,chains:s},{data:a,count:c}=await Se.fetchWallets(o),l=a.slice(0,yX).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>Se._fetchWalletImage(u))),Be.wallets=Ce.uniqueBy([...Be.wallets,...Se._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Be.count=c>Be.count?c:Be.count,Be.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await Se.fetchWallets(e);n&&n.forEach(r=>{Be.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=ne.state,s=$.getRequestedCaipNetworkIds().join(",");Be.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await Se.fetchWallets(i);bt.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Se._fetchWalletImage(c)),Ce.wait(300)]),Be.search=Se._filterOutExtensions(o)},initPromise(t,e){const n=Be.promises[t];return n||(Be.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&Se.initPromise("connectorImages",Se.fetchConnectorImages),e&&Se.initPromise("featuredWallets",Se.fetchFeaturedWallets),n&&Se.initPromise("recommendedWallets",Se.fetchRecommendedWallets),r&&Se.initPromise("networkImages",Se.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=ne.state.features)!=null&&t.analytics&&Se.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await $r.get({path:"/getAnalyticsConfig",params:Se._getSdkProperties()});ne.setFeatures({analytics:t})}catch{ne.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Be.featured=Be.allFeatured,Be.recommended=Be.allRecommended;return}const e=$.getRequestedCaipNetworkIds().join(",");Be.featured=Be.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Be.recommended=Be.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Be.filteredWallets=Be.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Be.filteredWallets=[]},setFilterByNamespace(t){if(!t){Be.featured=Be.allFeatured,Be.recommended=Be.allRecommended;return}const e=$.getRequestedCaipNetworkIds().join(",");Be.featured=Be.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Be.recommended=Be.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Be.filteredWallets=Be.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},xt=$t({view:"Connect",history:["Connect"],transactionStack:[]}),wX={state:xt,subscribeKey(t,e){return Qn(xt,t,e)},pushTransactionStack(t){xt.transactionStack.push(t)},popTransactionStack(t){const e=xt.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),ke.goBack();break;case"cancel":s==null||s(),ke.goBack();break}},push(t,e){t!==xt.view&&(xt.view=t,xt.history.push(t),xt.data=e)},reset(t,e){xt.view=t,xt.history=[t],xt.data=e},replace(t,e){xt.history.at(-1)===t||(xt.view=t,xt.history[xt.history.length-1]=t,xt.data=e)},goBack(){var r;const t=$.state.activeCaipAddress,e=ke.state.view==="ConnectingFarcaster",n=!t&&e;if(xt.history.length>1){xt.history.pop();const[s]=xt.history.slice(-1);s&&(t&&s==="Connect"?xt.view="Account":xt.view=s)}else mt.close();(r=xt.data)!=null&&r.wallet&&(xt.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){ce.setFarcasterUrl(void 0,$.state.activeChain);const a=ue.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=dg(ne.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(xt.history.length>1){xt.history=xt.history.slice(0,t+1);const[e]=xt.history.slice(-1);e&&(xt.view=e)}},goBackOrCloseModal(){ke.state.history.length>1?ke.goBack():mt.close()}},ke=Ns(wX),mo=$t({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),_C={state:mo,subscribe(t){return Jn(mo,()=>t(mo))},setThemeMode(t){mo.themeMode=t;try{const e=ue.getAuthConnector();if(e){const n=_C.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Lo(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){mo.themeVariables={...mo.themeVariables,...t};try{const e=ue.getAuthConnector();if(e){const n=_C.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Lo(mo.themeVariables,mo.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return dg(mo)}},Gr=Ns(_C),J8={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},ot=$t({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...J8},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),vX={state:ot,subscribe(t){return Jn(ot,()=>{t(ot)})},subscribeKey(t,e){return Qn(ot,t,e)},initialize(t){t.forEach(e=>{const n=le.getConnectedConnectorId(e);n&&ue.setConnectorId(n,e)})},setActiveConnector(t){t&&(ot.activeConnector=eu(t))},setConnectors(t){t.filter(s=>!ot.allConnectors.some(i=>i.id===s.id&&ue.getConnectorName(i.name)===ue.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&ot.allConnectors.push(eu(s))});const n=ue.getEnabledNamespaces(),r=ue.getEnabledConnectors(n);ot.connectors=ue.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(ot.filterByNamespaceMap).forEach(e=>{ot.filterByNamespaceMap[e]=!1}),t.forEach(e=>{ot.filterByNamespaceMap[e]=!0}),ue.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){ot.filterByNamespaceMap[t]=e,ue.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=ue.getEnabledNamespaces(),e=ue.getEnabledConnectors(t),n=ue.areAllNamespacesEnabled();ot.connectors=ue.mergeMultiChainConnectors(e),n?Se.clearFilterByNamespaces():Se.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(ot.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return ot.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(ot.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=ue.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===X.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=ue.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===X.CONNECTOR_ID.AUTH){const s=t,i=dg(ne.state),o=Gr.getSnapshot().themeMode,a=Gr.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Lo(a,o)}),ue.setConnectors([t])}else ue.setConnectors([t])},getAuthConnector(t){var r;const e=t||$.state.activeChain,n=ot.connectors.find(s=>s.id===X.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return ot.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return ot.allConnectors.find(e=>e.id===t)},getConnector(t,e){return ot.allConnectors.filter(r=>r.chain===$.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=dg(ne.state),r=Gr.getSnapshot().themeMode,s=Gr.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Lo(s,r)})},getConnectorsByNamespace(t){const e=ot.allConnectors.filter(n=>n.chain===t);return ue.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=ue.getConnector(t.id,t.rdns),n=$.state.activeChain;cX.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?ke.push("ConnectingExternal",{connector:e}):ke.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?ue.getConnectorsByNamespace(t):ue.mergeMultiChainConnectors(ot.allConnectors)},setFilterByNamespace(t){ot.filterByNamespace=t,ot.connectors=ue.getConnectors(t),Se.setFilterByNamespace(t)},setConnectorId(t,e){t&&(ot.activeConnectorIds={...ot.activeConnectorIds,[e]:t},le.setConnectedConnectorId(e,t))},removeConnectorId(t){ot.activeConnectorIds={...ot.activeConnectorIds,[t]:void 0},le.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return ot.activeConnectorIds[t]},isConnected(t){return t?!!ot.activeConnectorIds[t]:Object.values(ot.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){ot.activeConnectorIds={...J8}}},ue=Ns(vX),fg={getConnectionStatus(t,e){const n=ue.state.activeConnectorIds[e],r=ve.state.connections.get(e)??[];return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},validateAccountSwitch({namespace:t,connection:e,address:n}){if(t===X.CHAIN.BITCOIN){if(!n)throw new Error("Address parameter is required for switching bip122 connection");const{type:s}=e.accounts.find(i=>i.address.toLowerCase()===n.toLowerCase())??{};if(typeof s=="string"&&s!=="payment")throw new Error(`Switching to non-payment accounts is not allowed for ${t}`)}},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},filterConnectionsByAccountType(t,e){return t.map(n=>{const r=n.accounts.filter(s=>typeof s.type=="string"?s.type.toLowerCase()===e.toLowerCase():!0);return{...n,accounts:r}})},getConnectionsData(t){const e=ve.state.connections.get(t)??[],n=e.filter(a=>!a.recent),r=ue.state.activeConnectorIds[t],i=e.filter(a=>a.recent).filter(a=>ue.getConnectorById(a.connectorId)),o=fg.excludeExistingConnections([...n.map(a=>a.connectorId),...r?[r]:[]],i);return{connections:n,recentConnections:o}}};var lh={};const bX="https://secure.walletconnect.org/sdk",EX=(typeof process<"u"&&typeof lh<"u"?lh.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||bX,_X=(typeof process<"u"&&typeof lh<"u"?lh.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",CX=(typeof process<"u"&&typeof lh<"u"?lh.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ee={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Dn={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},xX=1e3,Do={checkNamespaceConnectorId(t,e){return ue.getConnectorId(t)===e},isSocialProvider(t){return vt.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&ue.setActiveConnector(e),s==null||s(Ce.isMobile()&&t),r){const l=mt.subscribeKey("open",u=>{u||(ke.state.view!==r&&ke.replace(r),l(),a(new Error("Modal closed")))})}const c=$.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&mt.close(),c(),o(ps.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=$.subscribeKey("activeCaipAddress",s=>{s&&(mt.close(),r(),e(ps.parseCaipAddress(s)))});ve.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=ce.state.socialWindow,i=ce.state.socialProvider,o=!1,a=null;const c=$.subscribeKey("activeCaipAddress",l=>{l&&(e&&mt.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===X.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=ue.getAuthConnector();if(g&&!o){s&&(s.close(),ce.setSocialWindow(void 0,$.state.activeChain),s=ce.state.socialWindow),o=!0;const w=f.data.resultUri;if(i&&bt.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}}),await g.provider.connectSocial(w),i){le.setConnectedSocialProvider(i),await ve.connectExternal({id:g.id,type:g.type,socialUri:w},g.chain);const y=$.state.activeCaipAddress;if(!y){u(new Error("Failed to connect"));return}l(ps.parseCaipAddress(y)),bt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&bt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&bt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(ce.setSocialProvider(t,$.state.activeChain),i=ce.state.socialProvider,bt.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=mt.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=ue.getAuthConnector();if(p&&!ce.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();ce.setFarcasterUrl(g,$.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=ue.getAuthConnector();a=Ce.returnOpenHref(`${X.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){ce.setSocialWindow(a,$.state.activeChain),s=ce.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=mt.subscribeKey("open",c=>{c||(ke.state.view!==e&&ke.replace(e),a(),i(new Error("Modal closed")))})}const o=$.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&mt.close(),o(),s(ps.parseCaipAddress(a)))})})},async updateEmail(){const t=le.getConnectedConnectorId($.state.activeChain),e=ue.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==X.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return ke.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(mt.close(),clearInterval(i),o(),r({email:a}))},xX),o=mt.subscribeKey("open",a=>{a||(ke.state.view!=="Connect"&&ke.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){var n;return $.checkIfSmartAccountEnabled()&&((n=ce.state.preferredAccountTypes)==null?void 0:n[t])===Dn.ACCOUNT_TYPES.EOA}},ol=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),mn=$t({...ol}),SX={state:mn,subscribeKey(t,e){return Qn(mn,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=Ce.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){mn.message=ol.message,mn.variant=ol.variant,mn.svg=ol.svg,mn.open=ol.open,mn.autoClose=ol.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=ol.autoClose}){mn.open?(mn.open=!1,setTimeout(()=>{mn.message=t,mn.variant=n,mn.svg=e,mn.open=!0,mn.autoClose=r},150)):(mn.message=t,mn.variant=n,mn.svg=e,mn.open=!0,mn.autoClose=r)}},bi=SX,Nt=$t({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),AX={state:Nt,subscribe(t){return Jn(Nt,()=>t(Nt))},setLastNetworkInView(t){Nt.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Nt.loading=!0;try{const s=await Ne.fetchTransactions({account:t,cursor:Nt.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=$.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=Uf.filterSpamTransactions(s.data),o=Uf.filterByConnectedChain(i),a=[...Nt.transactions,...o];Nt.loading=!1,e==="coinbase"?Nt.coinbaseTransactions=Uf.groupTransactionsByYearAndMonth(Nt.coinbaseTransactions,s.data):(Nt.transactions=a,Nt.transactionsByYear=Uf.groupTransactionsByYearAndMonth(Nt.transactionsByYear,o)),Nt.empty=a.length===0,Nt.next=s.next?s.next:void 0}catch{const i=$.state.activeChain;bt.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:ne.state.projectId,cursor:Nt.next,isSmartAccount:((r=ce.state.preferredAccountTypes)==null?void 0:r[i])===Dn.ACCOUNT_TYPES.SMART_ACCOUNT}}),bi.showError("Failed to fetch transactions"),Nt.loading=!1,Nt.empty=!0,Nt.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=$.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Nt.next=void 0},resetTransactions(){Nt.transactions=[],Nt.transactionsByYear={},Nt.lastNetworkInView=void 0,Nt.loading=!1,Nt.empty=!1,Nt.next=void 0}},Uf=Ns(AX,"API_ERROR"),tt=$t({connections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Qc;const IX={state:tt,subscribe(t){return Jn(tt,()=>t(tt))},subscribeKey(t,e){return Qn(tt,t,e)},_getClient(){return tt._client},setClient(t){tt._client=eu(t)},initialize(t){const e=le.getConnections();for(const n of t){const r=n.namespace;if(r){const s=tt.connections.get(r)??[],i=e[r]??[],o=[...s,...i];tt.connections.set(r,o)}}},async connectWalletConnect(){var t,e,n,r;if(Ce.isTelegram()||Ce.isSafari()&&Ce.isIos()){if(Qc){await Qc,Qc=void 0;return}if(!Ce.isPairingExpired(tt==null?void 0:tt.wcPairingExpiry)){const s=tt.wcUri;tt.wcUri=s;return}Qc=(e=(t=ve._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),ve.state.status="connecting",await Qc,Qc=void 0,tt.wcPairingExpiry=void 0,ve.state.status="connected"}else await((r=(n=ve._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=ve._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&$.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=ve._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||$.state.activeChain;e&&ue.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;mt.setLoading(!0,$.state.activeChain);const n=ue.getAuthConnector();n&&(ce.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),le.setPreferredAccountTypes(ce.state.preferredAccountTypes??{[e]:t}),await ve.reconnectExternal(n),mt.setLoading(!1,$.state.activeChain),bt.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=$.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=ve._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=ve._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=ve._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=ve._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=ve._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=ve._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=ve._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=ve._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=ve._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=ve._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=ve._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=ve._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){tt.wcUri=void 0,tt.wcPairingExpiry=void 0,tt.wcLinking=void 0,tt.recentWallet=void 0,tt.status="disconnected",Uf.resetTransactions(),le.deleteWalletConnectDeepLink()},resetUri(){tt.wcUri=void 0,tt.wcPairingExpiry=void 0,Qc=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=ve.state;t&&le.setWalletConnectDeepLink(t),e&&le.setAppKitRecent(e),bt.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=ke.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){tt.wcBasic=t},setUri(t){tt.wcUri=t,tt.wcPairingExpiry=Ce.getPairingExpiry()},setWcLinking(t){tt.wcLinking=t},setWcError(t){tt.wcError=t,tt.buffering=!1},setRecentWallet(t){tt.recentWallet=t},setBuffering(t){tt.buffering=t},setStatus(t){tt.status=t},setIsSwitchingConnection(t){tt.isSwitchingConnection=t},async disconnect({id:t,namespace:e}={}){var n;try{await((n=ve._getClient())==null?void 0:n.disconnect({id:t,chainNamespace:e}))}catch(r){throw new ch("Failed to disconnect","INTERNAL_SDK_ERROR",r)}},setConnections(t,e){tt.connections=new Map(tt.connections.set(e,t))},async handleAuthAccountSwitch({address:t,connection:e,namespace:n}){var o;const r=(o=e.accounts.find(a=>a.type==="smartAccount"))==null?void 0:o.address,i=(r==null?void 0:r.toLowerCase())===t.toLowerCase()&&Do.canSwitchToSmartAccount(n)?"smartAccount":"eoa";await ve.setPreferredAccountType(i,n)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=ue.getConnectorById(t.connectorId),s=t.connectorId===X.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);const i=await ve.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return s&&n&&await ve.handleAuthAccountSwitch({address:n,connection:t,namespace:e}),i==null?void 0:i.address},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=ue.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===X.CONNECTOR_ID.AUTH,a=t.connectorId===X.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&Do.isSocialProvider(i)){const{address:d}=await Do.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){mt.open({view:"ConnectingFarcaster"})},onConnect(){ke.replace("ProfileWallets")}});c=d}else{const{address:d}=await Do.connectEmail({closeModalOnConnect:r,onOpen(){mt.open({view:"EmailLogin"})},onConnect(){ke.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await Do.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){mt.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){ke.replace("ProfileWallets")}});c=d}else{const d=await ve.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await ve.handleAuthAccountSwitch({address:n,connection:t,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){fg.validateAccountSwitch({namespace:n,connection:t,address:e});let i;const o=ce.getCaipAddress(n);if(o){const{address:c}=ps.parseCaipAddress(o);i=c}const a=fg.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await ve.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await ve.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},ve=Ns(IX),Ou=$t({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),no={state:Ou,subscribe(t){return Jn(Ou,()=>t(Ou))},subscribeOpen(t){return Qn(Ou,"open",t)},set(t){Object.assign(Ou,{...Ou,...t})}};function TX(t){const e=Array.from($.state.chains.keys());let n=[];return t?(n.push([t,$.state.chains.get(t)]),Do.checkNamespaceConnectorId(t,X.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&Do.checkNamespaceConnectorId(r,X.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,$.state.chains.get(r)])}):Do.checkNamespaceConnectorId(t,X.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&Do.checkNamespaceConnectorId(r,X.CONNECTOR_ID.AUTH)&&n.push([r,$.state.chains.get(r)])})):n=Array.from($.state.chains.entries()),n}function Q8(){var r,s;const t=((r=$.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=$.state.activeCaipNetwork)==null?void 0:s.id)||1,n=vt.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}const NX={async getTokenList(){var r;const t=$.state.activeCaipNetwork,e=await Ne.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=$.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(ve==null?void 0:ve.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await Ne.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await Ne.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=ve.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await xA.getMyTokensWithBalance(t);return ce.setTokenBalance(e,$.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:Q8(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},wt=$t({tokenBalances:[],loading:!1}),PX={state:wt,subscribe(t){return Jn(wt,()=>t(wt))},subscribeKey(t,e){return Qn(wt,t,e)},setToken(t){t&&(wt.token=eu(t))},setTokenAmount(t){wt.sendTokenAmount=t},setReceiverAddress(t){wt.receiverAddress=t},setReceiverProfileImageUrl(t){wt.receiverProfileImageUrl=t},setReceiverProfileName(t){wt.receiverProfileName=t},setNetworkBalanceInUsd(t){wt.networkBalanceInUSD=t},setLoading(t){wt.loading=t},async sendToken(){var t;try{switch(ht.setLoading(!0),(t=$.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await ht.sendEvmToken();return;case"solana":await ht.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{ht.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=$.state.activeChain,e=(n=ce.state.preferredAccountTypes)==null?void 0:n[t];if(!ht.state.sendTokenAmount||!ht.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!ht.state.token)throw new Error("A token is required");(r=ht.state.token)!=null&&r.address?(bt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Dn.ACCOUNT_TYPES.SMART_ACCOUNT,token:ht.state.token.address,amount:ht.state.sendTokenAmount,network:((s=$.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await ht.sendERC20Token({receiverAddress:ht.state.receiverAddress,tokenAddress:ht.state.token.address,sendTokenAmount:ht.state.sendTokenAmount,decimals:ht.state.token.quantity.decimals})):(bt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Dn.ACCOUNT_TYPES.SMART_ACCOUNT,token:ht.state.token.symbol||"",amount:ht.state.sendTokenAmount,network:((i=$.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await ht.sendNativeToken({receiverAddress:ht.state.receiverAddress,sendTokenAmount:ht.state.sendTokenAmount,decimals:ht.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;wt.loading=!0;const e=(i=$.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=$.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=$.state.activeCaipAddress,s=r?Ce.getPlainAddress(r):void 0;if(wt.lastRetry&&!Ce.isAllowedRetry(wt.lastRetry,30*vt.ONE_SEC_MS))return wt.loading=!1,[];try{if(s&&e&&n){const a=await xA.getMyTokensWithBalance();return wt.tokenBalances=a,wt.lastRetry=void 0,a}}catch(a){wt.lastRetry=Date.now(),t==null||t(a),bi.showError("Token Balance Unavailable")}finally{wt.loading=!1}return[]},fetchNetworkBalance(){if(wt.tokenBalances.length===0)return;const t=NX.mapBalancesToSwapTokens(wt.tokenBalances);if(!t)return;const e=t.find(n=>n.address===Q8());e&&(wt.networkBalanceInUSD=e?JZ.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;ke.pushTransactionStack({});const e=t.receiverAddress,n=ce.state.address,r=ve.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await ve.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),bt.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=ce.state.preferredAccountTypes)==null?void 0:i.eip155)===Dn.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=ht.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=$.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=ve._getClient())==null||c.updateBalance("eip155"),ht.resetSend()},async sendERC20Token(t){ke.pushTransactionStack({onSuccess(){ke.replace("Account")}});const e=ve.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(ce.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=Ce.getPlainAddress(t.tokenAddress);await ve.writeContract({fromAddress:ce.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:eX.getERC20Abi(n),chainNamespace:"eip155"}),ht.resetSend()}},async sendSolanaToken(){var t;if(!ht.state.sendTokenAmount||!ht.state.receiverAddress)throw new Error("An amount and receiver address are required");ke.pushTransactionStack({onSuccess(){ke.replace("Account")}}),await ve.sendTransaction({chainNamespace:"solana",to:ht.state.receiverAddress,value:ht.state.sendTokenAmount}),(t=ve._getClient())==null||t.updateBalance("solana"),ht.resetSend()},resetSend(){wt.token=void 0,wt.sendTokenAmount=void 0,wt.receiverAddress=void 0,wt.receiverProfileImageUrl=void 0,wt.receiverProfileName=void 0,wt.loading=!1,wt.tokenBalances=[]}},ht=Ns(PX),E1={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},ly={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},fe=$t({chains:FZ(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),kX={state:fe,subscribe(t){return Jn(fe,()=>{t(fe)})},subscribeKey(t,e){return Qn(fe,t,e)},subscribeChainProp(t,e,n){let r;return Jn(fe.chains,()=>{var i;const s=n||fe.activeChain;if(s){const o=(i=fe.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=le.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=ne.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(fe.noAdapters=!0),fe.noAdapters||(fe.activeChain=a==null?void 0:a.namespace,fe.activeCaipNetwork=i,$.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),fe.activeChain&&no.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);$.state.chains.set(u,{namespace:u,networkState:$t({...ly,caipNetwork:d==null?void 0:d[0]}),accountState:$t(E1),caipNetworks:d??[],...n}),$.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(fe.activeChain===t){const r=Array.from(fe.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&$.setActiveCaipNetwork(s)}}fe.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){fe.chains.set(t.namespace,{namespace:t.namespace,networkState:{...ly,caipNetwork:r[0]},accountState:E1,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),$.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=fe.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),fe.chains.set(t.chainNamespace,{...e,caipNetworks:r}),$.setRequestedCaipNetworks(r,t.chainNamespace),ue.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=fe.chains.get(t);if(n){const o=((r=fe.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&$.setActiveCaipNetwork(n.caipNetworks[0]),fe.chains.set(t,{...n,caipNetworks:a}),$.setRequestedCaipNetworks(a||[],t),a.length===0&&ue.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=fe.chains.get(t);n&&(n.networkState={...n.networkState||ly,...e},fe.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=fe.chains.get(t);if(r){const s={...r.accountState||E1,...e};fe.chains.set(t,{...r,accountState:s}),(fe.chains.size===1||fe.activeChain===t)&&(e.caipAddress&&(fe.activeCaipAddress=e.caipAddress),ce.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=fe.chains.get(t);if(n){const r={...n.networkState||ly,...e};fe.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){$.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&ue.removeConnectorId(n)},setActiveNamespace(t){var r,s;fe.activeChain=t;const e=t?fe.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(fe.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,fe.activeCaipNetwork=n,$.setChainNetworkData(t,{caipNetwork:n}),le.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),no.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;fe.activeChain!==t.chainNamespace&&$.setIsSwitchingNamespace(!0);const e=fe.chains.get(t.chainNamespace);fe.activeChain=t.chainNamespace,fe.activeCaipNetwork=t,$.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?fe.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:fe.activeCaipAddress=void 0,$.setAccountProp("caipAddress",fe.activeCaipAddress,t.chainNamespace),e&&ce.replaceState(e.accountState),ht.resetSend(),no.set({activeChain:fe.activeChain,selectedNetworkId:(i=fe.activeCaipNetwork)==null?void 0:i.caipNetworkId}),le.setActiveCaipNetworkId(t.caipNetworkId),!$.checkIfSupportedNetwork(t.chainNamespace)&&ne.state.enableNetworkSwitch&&!ne.state.allowUnsupportedChain&&!ve.state.wcBasic&&$.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=fe.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==$.state.activeChain,n=(s=$.getNetworkData(t))==null?void 0:s.caipNetwork,r=$.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await $.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=$.state.chains.get($.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=fe.activeCaipNetwork)==null?void 0:o.id)})),r=$.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&mt.close()}catch{ke.goBack()}bt.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||fe.activeChain,n=fe.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||fe.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=fe.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=fe.activeChain;if(e&&(n=e),!n)return;const r=(s=fe.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=fe.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=fe.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return Ce.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return fe.chains.forEach(e=>{const n=$.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){$.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=$.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));ue.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return fe.chains.forEach(e=>{const n=$.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return fe.activeCaipNetwork},getActiveCaipAddress(){return fe.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=fe.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=$.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());$.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||fe.activeCaipNetwork,r=$.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!fe.activeChain)return!0;const e=$.getRequestedCaipNetworks(fe.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){$.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=hg.caipNetworkIdToNumber((r=fe.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=fe.activeChain;if(!e||!t)return!1;const n=$.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){mt.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=fe.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&vt.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){$.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");fe.activeCaipAddress=void 0,$.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),ue.removeConnectorId(e)},setIsSwitchingNamespace(t){fe.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(fe.chains.forEach(s=>{X.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=fe.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=$.state.chains.get(t))==null?void 0:e.accountState:ce.state},getNetworkData(t){var n;const e=t||fe.activeChain;if(e)return(n=$.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=$.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=ue.state.filterByNamespace;return(t?[fe.chains.get(t)]:Array.from(fe.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?$.getRequestedCaipNetworks(t):$.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){fe.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return fe.lastConnectedSIWECaipNetwork}},$=Ns(kX),OX={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},Z8=Ce.getBlockchainApiUrl(),Dr=$t({clientId:null,api:new lm({baseUrl:Z8,clientId:null}),supportedChains:{http:[],ws:[]}}),Ne={state:Dr,async get(t){const{st:e,sv:n}=Ne.getSdkProperties(),r=ne.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Dr.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=ne.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Dr.supportedChains.http.length||await Ne.getSupportedNetworks()}catch{return!1}return Dr.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await Ne.get({path:"v1/supported-chains"});return Dr.supportedChains=t,t}catch{return Dr.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await Ne.isNetworkSupported(e))return{avatar:"",name:""};const r=le.getIdentityFromCacheForAddress(t);if(r)return r;const s=await Ne.get({path:`/v1/identity/${t}`,params:{sender:$.state.activeCaipAddress?Ce.getPlainAddress($.state.activeCaipAddress):void 0}});return le.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await Ne.isNetworkSupported((a=$.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?Ne.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await Ne.isNetworkSupported((o=$.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?Ne.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await Ne.isNetworkSupported((n=$.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ne.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await Ne.isNetworkSupported((n=$.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Dr.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:ne.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await Ne.isNetworkSupported((r=$.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Ne.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=Ne.getSdkProperties();if(!await Ne.isNetworkSupported((s=$.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return Ne.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await Ne.isNetworkSupported((o=$.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Dr.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:vt.CONVERT_SLIPPAGE_TOLERANCE},projectId:ne.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=Ne.getSdkProperties();if(!await Ne.isNetworkSupported((o=$.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Ne.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=Ne.getSdkProperties();if(!await Ne.isNetworkSupported((l=$.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return bi.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=le.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await Ne.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return le.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await Ne.isNetworkSupported((n=$.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ne.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await Ne.isNetworkSupported((n=$.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ne.get({path:`/v1/profile/reverse/${t}`,params:{sender:ce.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await Ne.isNetworkSupported((n=$.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ne.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await Ne.isNetworkSupported((i=$.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Dr.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await Ne.isNetworkSupported((a=$.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Dr.api.post({path:"/v1/generators/onrampurl",params:{projectId:ne.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await Ne.isNetworkSupported((e=$.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await Ne.get({path:"/v1/onramp/options"})}catch{return OX}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await Ne.isNetworkSupported((s=$.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Dr.api.post({path:"/v1/onramp/quote",params:{projectId:ne.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await Ne.isNetworkSupported((n=$.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ne.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await Ne.isNetworkSupported((s=$.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Dr.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:ne.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Dr.clientId=t,Dr.api=new lm({baseUrl:Z8,clientId:t})}},_1={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Ch(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},xA={async getMyTokensWithBalance(t){const e=ce.state.address,n=$.state.activeCaipNetwork,r=ue.getConnectorId("eip155")===X.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=le.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace==="eip155"&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await Ne.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=_1.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await ve.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await ve.walletGetAssets({account:t,chainFilter:[s]});if(!_1.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>_1.createBalance(l,e.caipNetworkId));return le.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},ks=$t({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),RX={state:ks,replaceState(t){t&&Object.assign(ks,eu(t))},subscribe(t){return $.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return $.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){$.setAccountProp("status",t,e)},getCaipAddress(t){return $.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?Ce.getPlainAddress(t):void 0;e===$.state.activeChain&&($.state.activeCaipAddress=t),$.setAccountProp("caipAddress",t,e),$.setAccountProp("address",n,e)},setBalance(t,e,n){$.setAccountProp("balance",t,n),$.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){$.setAccountProp("profileName",t,e)},setProfileImage(t,e){$.setAccountProp("profileImage",t,e)},setUser(t,e){$.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){$.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){$.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){$.setAccountProp("currentTab",t,$.state.activeChain)},setTokenBalance(t,e){t&&$.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){$.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){$.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=$.getAccountProp("addressLabels",n)||new Map;r.set(t,e),$.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=$.getAccountProp("addressLabels",e)||new Map;n.delete(t),$.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){$.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){$.setAccountProp("preferredAccountTypes",{...ks.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){ks.preferredAccountTypes=t},setSocialProvider(t,e){t&&$.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){$.setAccountProp("socialWindow",t?eu(t):void 0,e)},setFarcasterUrl(t,e){$.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;ks.balanceLoading=!0;const e=(i=$.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=$.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=$.state.activeCaipAddress,s=r?Ce.getPlainAddress(r):void 0;if(ks.lastRetry&&!Ce.isAllowedRetry(ks.lastRetry,30*vt.ONE_SEC_MS))return ks.balanceLoading=!1,[];try{if(s&&e&&n){const a=await xA.getMyTokensWithBalance();return ce.setTokenBalance(a,n),ks.lastRetry=void 0,ks.balanceLoading=!1,a}}catch(a){ks.lastRetry=Date.now(),t==null||t(a),bi.showError("Token Balance Unavailable")}finally{ks.balanceLoading=!1}return[]},resetAccount(t){$.resetAccount(t)}},ce=Ns(RX),$X={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=$.state.activeCaipNetwork,r=ke.state.data;if(t.id===(n==null?void 0:n.id))return;const i=ce.getCaipAddress($.state.activeChain),o=t.chainNamespace!==$.state.activeChain,a=ce.getCaipAddress(t.chainNamespace),l=ue.getConnectorId($.state.activeChain)===X.CONNECTOR_ID.AUTH,u=X.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?ke.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?ke.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):ke.push("SwitchNetwork",{...r,network:t})}},Ur=$t({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),DX={state:Ur,subscribe(t){return Jn(Ur,()=>t(Ur))},subscribeKey(t,e){return Qn(Ur,t,e)},async open(t){var o,a;const e=ce.state.status==="connected",n=t==null?void 0:t.namespace,r=$.state.activeChain,s=n&&n!==r,i=(o=$.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(ve.state.wcBasic?Se.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Se.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),ue.setFilterByNamespace(t==null?void 0:t.namespace),mt.setLoading(!0,n),n&&s){const c=((a=$.getNetworkData(n))==null?void 0:a.caipNetwork)||$.getRequestedCaipNetworks(n)[0];c&&$X.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=$.state.noAdapters;ne.state.manualWCControl||c&&!i?Ce.isMobile()?ke.reset("AllWallets"):ke.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?ke.reset(t.view,t.data):i?ke.reset("Account"):ke.reset("Connect")}Ur.open=!0,no.set({open:!0}),bt.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=ne.state.enableEmbedded,e=!!$.state.activeCaipAddress;Ur.open&&bt.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Ur.open=!1,ke.reset("Connect"),mt.clearLoading(),t?e?ke.replace("Account"):ke.push("Connect"):no.set({open:!1}),ve.resetUri()},setLoading(t,e){e&&Ur.loadingNamespaceMap.set(e,t),Ur.loading=t,no.set({loading:t})},clearLoading(){Ur.loadingNamespaceMap.clear(),Ur.loading=!1},shake(){Ur.shake||(Ur.shake=!0,setTimeout(()=>{Ur.shake=!1},500))}},mt=Ns(DX),np={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},CC={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},UX={providers:K8,selectedProvider:null,error:null,purchaseCurrency:np,paymentCurrency:CC,purchaseCurrencies:[np],paymentCurrencies:[],quotesLoading:!1},nt=$t(UX),jX={state:nt,subscribe(t){return Jn(nt,()=>t(nt))},subscribeKey(t,e){return Qn(nt,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=$.state.activeChain===X.CHAIN.SOLANA?"SOL":"USDC",n=ce.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",tX),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",ne.state.projectId),nt.selectedProvider={...t,url:r.toString()}}else nt.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=K8.filter(r=>e.includes(r.name));nt.providers=n}else nt.providers=[]},setPurchaseCurrency(t){nt.purchaseCurrency=t},setPaymentCurrency(t){nt.paymentCurrency=t},setPurchaseAmount(t){xC.state.purchaseAmount=t},setPaymentAmount(t){xC.state.paymentAmount=t},async getAvailableCurrencies(){const t=await Ne.getOnrampOptions();nt.purchaseCurrencies=t.purchaseCurrencies,nt.paymentCurrencies=t.paymentCurrencies,nt.paymentCurrency=t.paymentCurrencies[0]||CC,nt.purchaseCurrency=t.purchaseCurrencies[0]||np,await Se.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await Se.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;nt.quotesLoading=!0;try{const n=await Ne.getOnrampQuote({purchaseCurrency:nt.purchaseCurrency,paymentCurrency:nt.paymentCurrency,amount:((t=nt.paymentAmount)==null?void 0:t.toString())||"0",network:(e=nt.purchaseCurrency)==null?void 0:e.symbol});return nt.quotesLoading=!1,nt.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return nt.error=n.message,nt.quotesLoading=!1,null}finally{nt.quotesLoading=!1}},resetState(){nt.selectedProvider=null,nt.error=null,nt.purchaseCurrency=np,nt.paymentCurrency=CC,nt.purchaseCurrencies=[np],nt.paymentCurrencies=[],nt.paymentAmount=void 0,nt.purchaseAmount=void 0,nt.quotesLoading=!1}},xC=Ns(jX),vN=2147483648,LX={convertEVMChainIdToCoinType(t){if(t>=vN)throw new Error("Invalid chainId");return(vN|t)>>>0}},Os=$t({suggestions:[],loading:!1}),MX={state:Os,subscribe(t){return Jn(Os,()=>t(Os))},subscribeKey(t,e){return Qn(Os,t,e)},async resolveName(t){var e,n;try{return await Ne.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await Ne.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Os.loading=!0,Os.suggestions=[];const e=await Ne.getEnsNameSuggestions(t);return Os.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Os.suggestions}catch(e){const n=rp.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Os.loading=!1}},async getNamesForAddress(t){try{if(!$.state.activeCaipNetwork)return[];const n=le.getEnsFromCacheForAddress(t);if(n)return n;const r=await Ne.reverseLookupEnsName({address:t});return le.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=rp.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=$.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=ce.state.address,r=ue.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");Os.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});ke.pushTransactionStack({onCancel(){ke.replace("RegisterAccountName")}});const i=await ve.signMessage(s);Os.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=LX.convertEVMChainIdToCoinType(Number(o));await Ne.registerEnsName({coinType:a,address:n,signature:i,message:s}),ce.setProfileName(t,e.chainNamespace),ke.replace("RegisterAccountNameSuccess")}catch(s){const i=rp.parseEnsApiError(s,`Error registering name ${t}`);throw ke.replace("RegisterAccountName"),new Error(i)}finally{Os.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},rp=Ns(MX);var SA={exports:{}},Od=typeof Reflect=="object"?Reflect:null,bN=Od&&typeof Od.apply=="function"?Od.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},sw;Od&&typeof Od.ownKeys=="function"?sw=Od.ownKeys:Object.getOwnPropertySymbols?sw=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:sw=function(e){return Object.getOwnPropertyNames(e)};function BX(t){console&&console.warn&&console.warn(t)}var X8=Number.isNaN||function(e){return e!==e};function It(){It.init.call(this)}SA.exports=It;SA.exports.once=qX;It.EventEmitter=It;It.prototype._events=void 0;It.prototype._eventsCount=0;It.prototype._maxListeners=void 0;var EN=10;function Cv(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(It,"defaultMaxListeners",{enumerable:!0,get:function(){return EN},set:function(t){if(typeof t!="number"||t<0||X8(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");EN=t}});It.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};It.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||X8(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function e6(t){return t._maxListeners===void 0?It.defaultMaxListeners:t._maxListeners}It.prototype.getMaxListeners=function(){return e6(this)};It.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")bN(c,this,n);else for(var l=c.length,u=i6(c,l),r=0;r<l;++r)bN(u[r],this,n);return!0};function t6(t,e,n,r){var s,i,o;if(Cv(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=e6(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,BX(a)}return t}It.prototype.addListener=function(e,n){return t6(this,e,n,!1)};It.prototype.on=It.prototype.addListener;It.prototype.prependListener=function(e,n){return t6(this,e,n,!0)};function FX(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function n6(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=FX.bind(r);return s.listener=n,r.wrapFn=s,s}It.prototype.once=function(e,n){return Cv(n),this.on(e,n6(this,e,n)),this};It.prototype.prependOnceListener=function(e,n){return Cv(n),this.prependListener(e,n6(this,e,n)),this};It.prototype.removeListener=function(e,n){var r,s,i,o,a;if(Cv(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():zX(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};It.prototype.off=It.prototype.removeListener;It.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function r6(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?WX(s):i6(s,s.length)}It.prototype.listeners=function(e){return r6(this,e,!0)};It.prototype.rawListeners=function(e){return r6(this,e,!1)};It.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):s6.call(t,e)};It.prototype.listenerCount=s6;function s6(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}It.prototype.eventNames=function(){return this._eventsCount>0?sw(this._events):[]};function i6(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function zX(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function WX(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function qX(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}o6(t,e,i,{once:!0}),e!=="error"&&HX(t,s,{once:!0})})}function HX(t,e,n){typeof t.on=="function"&&o6(t,"error",e,n)}function o6(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Qs=SA.exports;const AA=du(Qs);var oe={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var SC=function(t,e){return SC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},SC(t,e)};function VX(t,e){SC(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var AC=function(){return AC=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},AC.apply(this,arguments)};function GX(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function KX(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function YX(t,e){return function(n,r){e(n,r,t)}}function JX(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function QX(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function ZX(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function XX(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function eee(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function IC(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function a6(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function tee(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a6(arguments[e]));return t}function nee(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function pg(t){return this instanceof pg?(this.v=t,this):new pg(t)}function ree(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof pg?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function see(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:pg(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function iee(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof IC=="function"?IC(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function oee(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function aee(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function cee(t){return t&&t.__esModule?t:{default:t}}function lee(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function uee(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const dee=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return AC},__asyncDelegator:see,__asyncGenerator:ree,__asyncValues:iee,__await:pg,__awaiter:QX,__classPrivateFieldGet:lee,__classPrivateFieldSet:uee,__createBinding:XX,__decorate:KX,__exportStar:eee,__extends:VX,__generator:ZX,__importDefault:cee,__importStar:aee,__makeTemplateObject:oee,__metadata:JX,__param:YX,__read:a6,__rest:GX,__spread:tee,__spreadArrays:nee,__values:IC},Symbol.toStringTag,{value:"Module"})),xv=P0(dee);var C1={},af={},_N;function hee(){if(_N)return af;_N=1,Object.defineProperty(af,"__esModule",{value:!0}),af.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return af.delay=t,af}var Zc={},x1={},Xc={},CN;function fee(){return CN||(CN=1,Object.defineProperty(Xc,"__esModule",{value:!0}),Xc.ONE_THOUSAND=Xc.ONE_HUNDRED=void 0,Xc.ONE_HUNDRED=100,Xc.ONE_THOUSAND=1e3),Xc}var S1={},xN;function pee(){return xN||(xN=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(S1)),S1}var SN;function c6(){return SN||(SN=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=xv;e.__exportStar(fee(),t),e.__exportStar(pee(),t)}(x1)),x1}var AN;function gee(){if(AN)return Zc;AN=1,Object.defineProperty(Zc,"__esModule",{value:!0}),Zc.fromMiliseconds=Zc.toMiliseconds=void 0;const t=c6();function e(r){return r*t.ONE_THOUSAND}Zc.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Zc.fromMiliseconds=n,Zc}var IN;function mee(){return IN||(IN=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=xv;e.__exportStar(hee(),t),e.__exportStar(gee(),t)}(C1)),C1}var Ru={},TN;function yee(){if(TN)return Ru;TN=1,Object.defineProperty(Ru,"__esModule",{value:!0}),Ru.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Ru.Watch=t,Ru.default=t,Ru}var A1={},cf={},NN;function wee(){if(NN)return cf;NN=1,Object.defineProperty(cf,"__esModule",{value:!0}),cf.IWatch=void 0;class t{}return cf.IWatch=t,cf}var PN;function vee(){return PN||(PN=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),xv.__exportStar(wee(),t)}(A1)),A1}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=xv;e.__exportStar(mee(),t),e.__exportStar(yee(),t),e.__exportStar(vee(),t),e.__exportStar(c6(),t)})(oe);class vu{}let bee=class extends vu{constructor(e){super()}};const kN=oe.FIVE_SECONDS,bu={pulse:"heartbeat_pulse"};let Eee=class l6 extends bee{constructor(e){super(e),this.events=new Qs.EventEmitter,this.interval=kN,this.interval=(e==null?void 0:e.interval)||kN}static async init(e){const n=new l6(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),oe.toMiliseconds(this.interval))}pulse(){this.events.emit(bu.pulse)}};const _ee=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Cee=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,xee=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function See(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Aee(t);return}return e}function Aee(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function uy(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!xee.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(_ee.test(t)||Cee.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,See)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function Iee(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Tn(t,...e){try{return Iee(t(...e))}catch(n){return Promise.reject(n)}}function Tee(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function Nee(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function iw(t){if(Tee(t))return String(t);if(Nee(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return iw(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const TC="base64:";function Pee(t){return typeof t=="string"?t:TC+Ree(t)}function kee(t){return typeof t!="string"||!t.startsWith(TC)?t:Oee(t.slice(TC.length))}function Oee(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function Ree(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function zr(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function $ee(...t){return zr(t.join(":"))}function dy(t){return t=zr(t),t?t+":":""}function Dee(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function Uee(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const jee="memory",Lee=()=>{const t=new Map;return{name:jee,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function Mee(t={}){const e={mounts:{"":t.driver||Lee()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=zr(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await ON(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",w=zr(g?p:p.key),y=g?void 0:p.value,b=g||!p.options?u:{...u,...p.options},v=n(w);f(v).items.push({key:w,value:y,relativeKey:v.relativeKey,options:b})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=zr(l);const{relativeKey:d,driver:h}=n(l);return Tn(h.hasItem,d,u)},getItem(l,u={}){l=zr(l);const{relativeKey:d,driver:h}=n(l);return Tn(h.getItem,d,u).then(f=>uy(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?Tn(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:$ee(d.base,f.key),value:uy(f.value)}))):Promise.all(d.items.map(h=>Tn(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:uy(f)})))))},getItemRaw(l,u={}){l=zr(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?Tn(h.getItemRaw,d,u):Tn(h.getItem,d,u).then(f=>kee(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=zr(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await Tn(f.setItem,h,iw(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return Tn(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:iw(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>Tn(d.driver.setItem,h.relativeKey,iw(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=zr(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await Tn(f.setItemRaw,h,u,d);else if(f.setItem)await Tn(f.setItem,h,Pee(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=zr(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await Tn(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await Tn(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=zr(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await Tn(h.getMeta,d,u)),!u.nativeOnly){const p=await Tn(h.getItem,d+"$",u).then(g=>uy(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var w;l=dy(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const y of d){(w=y.driver.flags)!=null&&w.maxDepth||(p=!1);const b=await Tn(y.driver.getKeys,y.relativeBase,u);for(const v of b){const _=y.mountpoint+zr(v);h.some(E=>_.startsWith(E))||f.push(_)}h=[y.mountpoint,...h.filter(v=>!v.startsWith(y.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(y=>(!g||Dee(y,u.maxDepth))&&Uee(y,l))},async clear(l,u={}){l=dy(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return Tn(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>RN(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=dy(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(ON(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=dy(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await RN(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=zr(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=zr(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function ON(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function RN(t){typeof t.dispose=="function"&&await Tn(t.dispose)}function Eu(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function u6(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=Eu(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let I1;function um(){return I1||(I1=u6("keyval-store","keyval")),I1}function $N(t,e=um()){return e("readonly",n=>Eu(n.get(t)))}function Bee(t,e,n=um()){return n("readwrite",r=>(r.put(e,t),Eu(r.transaction)))}function Fee(t,e=um()){return e("readwrite",n=>(n.delete(t),Eu(n.transaction)))}function zee(t=um()){return t("readwrite",e=>(e.clear(),Eu(e.transaction)))}function Wee(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Eu(t.transaction)}function qee(t=um()){return t("readonly",e=>{if(e.getAllKeys)return Eu(e.getAllKeys());const n=[];return Wee(e,r=>n.push(r.key)).then(()=>n)})}const Hee=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),Vee=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function nu(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return Vee(t)}catch{return t}}function Zo(t){return typeof t=="string"?t:Hee(t)||""}const Gee="idb-keyval";var Kee=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=u6(t.dbName,t.storeName)),{name:Gee,options:t,async hasItem(s){return!(typeof await $N(n(s),r)>"u")},async getItem(s){return await $N(n(s),r)??null},setItem(s,i){return Bee(n(s),i,r)},removeItem(s){return Fee(n(s),r)},getKeys(){return qee(r)},clear(){return zee(r)}}};const Yee="WALLET_CONNECT_V2_INDEXED_DB",Jee="keyvaluestorage";let Qee=class{constructor(){this.indexedDb=Mee({driver:Kee({dbName:Yee,storeName:Jee})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,Zo(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var T1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ow={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof T1<"u"&&T1.localStorage?ow.exports=T1.localStorage:typeof window<"u"&&window.localStorage?ow.exports=window.localStorage:ow.exports=new e})();function Zee(t){var e;return[t[0],nu((e=t[1])!=null?e:"")]}let Xee=class{constructor(){this.localStorage=ow.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Zee)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return nu(n)}async setItem(e,n){this.localStorage.setItem(e,Zo(n))}async removeItem(e){this.localStorage.removeItem(e)}};const ete="wc_storage_version",DN=1,tte=async(t,e,n)=>{const r=ete,s=await e.getItem(r);if(s&&s>=DN){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,DN),n(e),nte(t,o)},nte=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let rte=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new Xee;this.storage=e;try{const n=new Qee;tte(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};function ste(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var ite=ote;function ote(t,e,n){var r=n&&n.stringify||ste,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const UN=ite;var rd=ro;const gg=mte().console||{},ate={mapHttpRequest:hy,mapHttpResponse:hy,wrapRequestSerializer:N1,wrapResponseSerializer:N1,wrapErrorSerializer:N1,req:hy,res:hy,err:hte};function cte(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function ro(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||gg;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=cte(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=mg),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:fte(t)};c.levels=ro.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=mg,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=NC());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,$u(l,c,"error","log"),$u(l,c,"fatal","error"),$u(l,c,"warn","error"),$u(l,c,"info","log"),$u(l,c,"debug","log"),$u(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const w=g.serializers;if(s&&w){var y=Object.assign({},r,w),b=t.browser.serialize===!0?Object.keys(y):s;delete p.serializers,Sv([p],b,y,this._stdErrSerialize)}function v(_){this._childLevel=(_._childLevel|0)+1,this.error=Du(_,p,"error"),this.fatal=Du(_,p,"fatal"),this.warn=Du(_,p,"warn"),this.info=Du(_,p,"info"),this.debug=Du(_,p,"debug"),this.trace=Du(_,p,"trace"),y&&(this.serializers=y,this._serialize=b),e&&(this._logEvent=NC([].concat(_._logEvent.bindings,p)))}return v.prototype=this,new v(this)}return c}ro.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};ro.stdSerializers=ate;ro.stdTimeFunctions=Object.assign({},{nullTime:d6,epochTime:h6,unixTime:pte,isoTime:gte});function $u(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?mg:s[n]?s[n]:gg[n]||gg[r]||mg,lte(t,e,n)}function lte(t,e,n){!t.transmit&&e[n]===mg||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===gg?gg:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&Sv(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,ute(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=ro.levels.values[l],d=ro.levels.values[n];if(d<u)return;dte(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:ro.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function ute(t,e,n,r){t._serialize&&Sv(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=ro.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?UN(s.shift(),s):void 0}else typeof i=="string"&&(i=UN(s.shift(),s));return i!==void 0&&(o.msg=i),o}function Sv(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=ro.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Du(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function dte(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;Sv(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=NC(c)}function NC(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function hte(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function fte(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?d6:h6}function hy(){return{}}function N1(t){return t}function mg(){}function d6(){return!1}function h6(){return Date.now()}function pte(){return Math.round(Date.now()/1e3)}function gte(){return new Date(Date.now()).toISOString()}function mte(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const dm=du(rd),yte={level:"info"},hm="custom_context",IA=1e3*1024;let wte=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},jN=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new wte(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},f6=class{constructor(e,n=IA){this.level=e??"error",this.levelValue=rd.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new jN(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===rd.levels.values.error?console.error(e):n===rd.levels.values.warn?console.warn(e):n===rd.levels.values.debug?console.debug(e):n===rd.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Zo({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new jN(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(Zo({extraMetadata:e})),new Blob(n,{type:"application/json"})}},vte=class{constructor(e,n=IA){this.baseChunkLogger=new f6(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},bte=class{constructor(e,n=IA){this.baseChunkLogger=new f6(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var Ete=Object.defineProperty,_te=Object.defineProperties,Cte=Object.getOwnPropertyDescriptors,LN=Object.getOwnPropertySymbols,xte=Object.prototype.hasOwnProperty,Ste=Object.prototype.propertyIsEnumerable,MN=(t,e,n)=>e in t?Ete(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,r0=(t,e)=>{for(var n in e||(e={}))xte.call(e,n)&&MN(t,n,e[n]);if(LN)for(var n of LN(e))Ste.call(e,n)&&MN(t,n,e[n]);return t},s0=(t,e)=>_te(t,Cte(e));function Th(t){return s0(r0({},t),{level:(t==null?void 0:t.level)||yte.level})}function Ate(t,e=hm){return t[e]||""}function Ite(t,e,n=hm){return t[n]=e,t}function os(t,e=hm){let n="";return typeof t.bindings>"u"?n=Ate(t,e):n=t.bindings().context||"",n}function Tte(t,e,n=hm){const r=os(t,n);return r.trim()?`${r}/${e}`:e}function gr(t,e,n=hm){const r=Tte(t,e,n),s=t.child({context:r});return Ite(s,r,n)}function Nte(t){var e,n;const r=new vte((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:dm(s0(r0({},t.opts),{level:"trace",browser:s0(r0({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function Pte(t){var e;const n=new bte((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:dm(s0(r0({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function TA(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Nte(t):Pte(t)}var kte=Object.defineProperty,Ote=(t,e,n)=>e in t?kte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,BN=(t,e,n)=>Ote(t,typeof e!="symbol"?e+"":e,n);let Rte=class extends vu{constructor(e){super(),this.opts=e,BN(this,"protocol","wc"),BN(this,"version",2)}};var $te=Object.defineProperty,Dte=(t,e,n)=>e in t?$te(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ute=(t,e,n)=>Dte(t,e+"",n);let jte=class extends vu{constructor(e,n){super(),this.core=e,this.logger=n,Ute(this,"records",new Map)}},Lte=class{constructor(e,n){this.logger=e,this.core=n}},Mte=class extends vu{constructor(e,n){super(),this.relayer=e,this.logger=n}},Bte=class extends vu{constructor(e){super()}},Fte=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},zte=class extends vu{constructor(e,n){super(),this.relayer=e,this.logger=n}},Wte=class extends vu{constructor(e,n){super(),this.core=e,this.logger=n}},qte=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},Hte=class{constructor(e,n){this.projectId=e,this.logger=n}},Vte=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var Gte=Object.defineProperty,Kte=(t,e,n)=>e in t?Gte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,FN=(t,e,n)=>Kte(t,typeof e!="symbol"?e+"":e,n);let Yte=class{constructor(e){this.opts=e,FN(this,"protocol","wc"),FN(this,"version",2)}},Jte=class{constructor(e){this.client=e}};function Qte(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function p6(t,...e){if(!Qte(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function zN(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Zte(t,e){p6(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Uu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const P1=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function Xte(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function g6(t){return typeof t=="string"&&(t=Xte(t)),p6(t),t}let ene=class{clone(){return this._cloneInto()}};function tne(t){const e=r=>t().update(g6(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function m6(t=32){if(Uu&&typeof Uu.getRandomValues=="function")return Uu.getRandomValues(new Uint8Array(t));if(Uu&&typeof Uu.randomBytes=="function")return Uu.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function nne(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let rne=class extends ene{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=P1(this.buffer)}update(e){zN(this);const{view:n,buffer:r,blockLen:s}=this;e=g6(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=P1(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){zN(this),Zte(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;nne(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=P1(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const fy=BigInt(2**32-1),PC=BigInt(32);function y6(t,e=!1){return e?{h:Number(t&fy),l:Number(t>>PC&fy)}:{h:Number(t>>PC&fy)|0,l:Number(t&fy)|0}}function sne(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=y6(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const ine=(t,e)=>BigInt(t>>>0)<<PC|BigInt(e>>>0),one=(t,e,n)=>t>>>n,ane=(t,e,n)=>t<<32-n|e>>>n,cne=(t,e,n)=>t>>>n|e<<32-n,lne=(t,e,n)=>t<<32-n|e>>>n,une=(t,e,n)=>t<<64-n|e>>>n-32,dne=(t,e,n)=>t>>>n-32|e<<64-n,hne=(t,e)=>e,fne=(t,e)=>t,pne=(t,e,n)=>t<<n|e>>>32-n,gne=(t,e,n)=>e<<n|t>>>32-n,mne=(t,e,n)=>e<<n-32|t>>>64-n,yne=(t,e,n)=>t<<n-32|e>>>64-n;function wne(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const vne=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),bne=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Ene=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),_ne=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,Cne=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),xne=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Ve={fromBig:y6,split:sne,toBig:ine,shrSH:one,shrSL:ane,rotrSH:cne,rotrSL:lne,rotrBH:une,rotrBL:dne,rotr32H:hne,rotr32L:fne,rotlSH:pne,rotlSL:gne,rotlBH:mne,rotlBL:yne,add:wne,add3L:vne,add3H:bne,add4L:Ene,add4H:_ne,add5H:xne,add5L:Cne},[Sne,Ane]=Ve.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),pa=new Uint32Array(80),ga=new Uint32Array(80);let Ine=class extends rne{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let v=0;v<16;v++,n+=4)pa[v]=e.getUint32(n),ga[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const _=pa[v-15]|0,E=ga[v-15]|0,x=Ve.rotrSH(_,E,1)^Ve.rotrSH(_,E,8)^Ve.shrSH(_,E,7),S=Ve.rotrSL(_,E,1)^Ve.rotrSL(_,E,8)^Ve.shrSL(_,E,7),T=pa[v-2]|0,C=ga[v-2]|0,O=Ve.rotrSH(T,C,19)^Ve.rotrBH(T,C,61)^Ve.shrSH(T,C,6),R=Ve.rotrSL(T,C,19)^Ve.rotrBL(T,C,61)^Ve.shrSL(T,C,6),F=Ve.add4L(S,R,ga[v-7],ga[v-16]),W=Ve.add4H(F,x,O,pa[v-7],pa[v-16]);pa[v]=W|0,ga[v]=F|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:y,Hl:b}=this;for(let v=0;v<80;v++){const _=Ve.rotrSH(d,h,14)^Ve.rotrSH(d,h,18)^Ve.rotrBH(d,h,41),E=Ve.rotrSL(d,h,14)^Ve.rotrSL(d,h,18)^Ve.rotrBL(d,h,41),x=d&f^~d&g,S=h&p^~h&w,T=Ve.add5L(b,E,S,Ane[v],ga[v]),C=Ve.add5H(T,y,_,x,Sne[v],pa[v]),O=T|0,R=Ve.rotrSH(r,s,28)^Ve.rotrBH(r,s,34)^Ve.rotrBH(r,s,39),F=Ve.rotrSL(r,s,28)^Ve.rotrBL(r,s,34)^Ve.rotrBL(r,s,39),W=r&i^r&a^i&a,B=s&o^s&c^o&c;y=g|0,b=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=Ve.add(l|0,u|0,C|0,O|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=Ve.add3L(O,F,B);r=Ve.add3H(I,C,R,W),s=I|0}({h:r,l:s}=Ve.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Ve.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Ve.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Ve.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Ve.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Ve.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=Ve.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:y,l:b}=Ve.add(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,w,y,b)}roundClean(){pa.fill(0),ga.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const Tne=tne(()=>new Ine);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const NA=BigInt(0),w6=BigInt(1),Nne=BigInt(2);function PA(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function kA(t){if(!PA(t))throw new Error("Uint8Array expected")}function k1(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const Pne=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function OA(t){kA(t);let e="";for(let n=0;n<t.length;n++)e+=Pne[t[n]];return e}function v6(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?NA:BigInt("0x"+t)}const yo={_0:48,_9:57,A:65,F:70,a:97,f:102};function WN(t){if(t>=yo._0&&t<=yo._9)return t-yo._0;if(t>=yo.A&&t<=yo.F)return t-(yo.A-10);if(t>=yo.a&&t<=yo.f)return t-(yo.a-10)}function b6(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=WN(t.charCodeAt(i)),a=WN(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function kne(t){return v6(OA(t))}function aw(t){return kA(t),v6(OA(Uint8Array.from(t).reverse()))}function E6(t,e){return b6(t.toString(16).padStart(e*2,"0"))}function kC(t,e){return E6(t,e).reverse()}function wo(t,e,n){let r;if(typeof e=="string")try{r=b6(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(PA(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function qN(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];kA(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const O1=t=>typeof t=="bigint"&&NA<=t;function One(t,e,n){return O1(t)&&O1(e)&&O1(n)&&e<=t&&t<n}function lf(t,e,n,r){if(!One(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Rne(t){let e;for(e=0;t>NA;t>>=w6,e+=1);return e}const $ne=t=>(Nne<<BigInt(t-1))-w6,Dne={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||PA(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function RA(t,e,n={}){const r=(s,i,o)=>{const a=Dne[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function HN(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Rn=BigInt(0),ln=BigInt(1),ul=BigInt(2),Une=BigInt(3),OC=BigInt(4),VN=BigInt(5),GN=BigInt(8);function En(t,e){const n=t%e;return n>=Rn?n:e+n}function jne(t,e,n){if(e<Rn)throw new Error("invalid exponent, negatives unsupported");if(n<=Rn)throw new Error("invalid modulus");if(n===ln)return Rn;let r=ln;for(;e>Rn;)e&ln&&(r=r*t%n),t=t*t%n,e>>=ln;return r}function Ui(t,e,n){let r=t;for(;e-- >Rn;)r*=r,r%=n;return r}function KN(t,e){if(t===Rn)throw new Error("invert: expected non-zero number");if(e<=Rn)throw new Error("invert: expected positive modulus, got "+e);let n=En(t,e),r=e,s=Rn,i=ln;for(;n!==Rn;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==ln)throw new Error("invert: does not exist");return En(s,e)}function Lne(t){const e=(t-ln)/ul;let n,r,s;for(n=t-ln,r=0;n%ul===Rn;n/=ul,r++);for(s=ul;s<t&&jne(s,e,t)!==t-ln;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+ln)/OC;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+ln)/ul;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,ln<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function Mne(t){if(t%OC===Une){const e=(t+ln)/OC;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%GN===VN){const e=(t-VN)/GN;return function(n,r){const s=n.mul(r,ul),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,ul),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return Lne(t)}const Bne=(t,e)=>(En(t,e)&ln)===ln,Fne=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function zne(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Fne.reduce((r,s)=>(r[s]="function",r),e);return RA(t,n)}function Wne(t,e,n){if(n<Rn)throw new Error("invalid exponent, negatives unsupported");if(n===Rn)return t.ONE;if(n===ln)return e;let r=t.ONE,s=e;for(;n>Rn;)n&ln&&(r=t.mul(r,s)),s=t.sqr(s),n>>=ln;return r}function qne(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function _6(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function C6(t,e,n=!1,r={}){if(t<=Rn)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=_6(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:$ne(s),ZERO:Rn,ONE:ln,create:c=>En(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Rn<=c&&c<t},is0:c=>c===Rn,isOdd:c=>(c&ln)===ln,neg:c=>En(-c,t),eql:(c,l)=>c===l,sqr:c=>En(c*c,t),add:(c,l)=>En(c+l,t),sub:(c,l)=>En(c-l,t),mul:(c,l)=>En(c*l,t),pow:(c,l)=>Wne(a,c,l),div:(c,l)=>En(c*KN(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>KN(c,t),sqrt:r.sqrt||(c=>(o||(o=Mne(t)),o(a,c))),invertBatch:c=>qne(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?kC(c,i):E6(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?aw(c):kne(c)}});return Object.freeze(a)}const YN=BigInt(0),py=BigInt(1);function R1(t,e){const n=e.negate();return t?n:e}function x6(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function $1(t,e){x6(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function Hne(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Vne(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const D1=new WeakMap,S6=new WeakMap;function U1(t){return S6.get(t)||1}function Gne(t,e){return{constTimeNegate:R1,hasPrecomputes(n){return U1(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>YN;)r&py&&(s=s.add(i)),i=i.double(),r>>=py;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=$1(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=$1(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=py);const g=f,w=f+Math.abs(p)-1,y=h%2!==0,b=p<0;p===0?c=c.add(R1(y,r[g])):a=a.add(R1(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=$1(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===YN)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=py),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=D1.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&D1.set(r,s(i))),i},wNAFCached(n,r,s){const i=U1(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=U1(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){x6(r,e),S6.set(n,r),D1.delete(n)}}}function Kne(t,e,n,r){if(Hne(n,t),Vne(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=Rne(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function Yne(t){return zne(t.Fp),RA(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({..._6(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const ni=BigInt(0),jr=BigInt(1),gy=BigInt(2),Jne=BigInt(8),Qne={zip215:!0};function Zne(t){const e=Yne(t);return RA(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Xne(t){const e=Zne(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=gy<<BigInt(a*8)-jr,u=n.create,d=C6(e.n,e.nBitLength),h=e.uvRatio||((I,A)=>{try{return{isValid:!0,value:n.sqrt(I*n.inv(A))}}catch{return{isValid:!1,value:ni}}}),f=e.adjustScalarBytes||(I=>I),p=e.domain||((I,A,U)=>{if(k1("phflag",U),A.length||U)throw new Error("Contexts/pre-hash are not supported");return I});function g(I,A){lf("coordinate "+I,A,ni,l)}function w(I){if(!(I instanceof v))throw new Error("ExtendedPoint expected")}const y=HN((I,A)=>{const{ex:U,ey:P,ez:k}=I,j=I.is0();A==null&&(A=j?Jne:n.inv(k));const z=u(U*A),K=u(P*A),Q=u(k*A);if(j)return{x:ni,y:jr};if(Q!==jr)throw new Error("invZ was invalid");return{x:z,y:K}}),b=HN(I=>{const{a:A,d:U}=e;if(I.is0())throw new Error("bad point: ZERO");const{ex:P,ey:k,ez:j,et:z}=I,K=u(P*P),Q=u(k*k),Y=u(j*j),Z=u(Y*Y),se=u(K*A),Pe=u(Y*u(se+Q)),Oe=u(Z+u(U*u(K*Q)));if(Pe!==Oe)throw new Error("bad point: equation left != right (1)");const De=u(P*k),Ke=u(j*z);if(De!==Ke)throw new Error("bad point: equation left != right (2)");return!0});class v{constructor(A,U,P,k){this.ex=A,this.ey=U,this.ez=P,this.et=k,g("x",A),g("y",U),g("z",P),g("t",k),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(A){if(A instanceof v)throw new Error("extended point not allowed");const{x:U,y:P}=A||{};return g("x",U),g("y",P),new v(U,P,jr,u(U*P))}static normalizeZ(A){const U=n.invertBatch(A.map(P=>P.ez));return A.map((P,k)=>P.toAffine(U[k])).map(v.fromAffine)}static msm(A,U){return Kne(v,d,A,U)}_setWindowSize(A){x.setWindowSize(this,A)}assertValidity(){b(this)}equals(A){w(A);const{ex:U,ey:P,ez:k}=this,{ex:j,ey:z,ez:K}=A,Q=u(U*K),Y=u(j*k),Z=u(P*K),se=u(z*k);return Q===Y&&Z===se}is0(){return this.equals(v.ZERO)}negate(){return new v(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:A}=e,{ex:U,ey:P,ez:k}=this,j=u(U*U),z=u(P*P),K=u(gy*u(k*k)),Q=u(A*j),Y=U+P,Z=u(u(Y*Y)-j-z),se=Q+z,Pe=se-K,Oe=Q-z,De=u(Z*Pe),Ke=u(se*Oe),Zt=u(Z*Oe),Ps=u(Pe*se);return new v(De,Ke,Ps,Zt)}add(A){w(A);const{a:U,d:P}=e,{ex:k,ey:j,ez:z,et:K}=this,{ex:Q,ey:Y,ez:Z,et:se}=A;if(U===BigInt(-1)){const Xt=u((j-k)*(Y+Q)),on=u((j+k)*(Y-Q)),jn=u(on-Xt);if(jn===ni)return this.double();const sa=u(z*gy*se),qc=u(K*gy*Z),ia=qc+sa,Sn=on+Xt,Or=qc-sa,Hc=u(ia*jn),Au=u(Sn*Or),Vc=u(ia*Or),Am=u(jn*Sn);return new v(Hc,Au,Am,Vc)}const Pe=u(k*Q),Oe=u(j*Y),De=u(K*P*se),Ke=u(z*Z),Zt=u((k+j)*(Q+Y)-Pe-Oe),Ps=Ke-De,it=Ke+De,Le=u(Oe-U*Pe),Dt=u(Zt*Ps),Ut=u(it*Le),mr=u(Zt*Le),as=u(Ps*it);return new v(Dt,Ut,as,mr)}subtract(A){return this.add(A.negate())}wNAF(A){return x.wNAFCached(this,A,v.normalizeZ)}multiply(A){const U=A;lf("scalar",U,jr,r);const{p:P,f:k}=this.wNAF(U);return v.normalizeZ([P,k])[0]}multiplyUnsafe(A,U=v.ZERO){const P=A;return lf("scalar",P,ni,r),P===ni?E:this.is0()||P===jr?this:x.wNAFCachedUnsafe(this,P,v.normalizeZ,U)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return x.unsafeLadder(this,r).is0()}toAffine(A){return y(this,A)}clearCofactor(){const{h:A}=e;return A===jr?this:this.multiplyUnsafe(A)}static fromHex(A,U=!1){const{d:P,a:k}=e,j=n.BYTES;A=wo("pointHex",A,j),k1("zip215",U);const z=A.slice(),K=A[j-1];z[j-1]=K&-129;const Q=aw(z),Y=U?l:n.ORDER;lf("pointHex.y",Q,ni,Y);const Z=u(Q*Q),se=u(Z-jr),Pe=u(P*Z-k);let{isValid:Oe,value:De}=h(se,Pe);if(!Oe)throw new Error("Point.fromHex: invalid y coordinate");const Ke=(De&jr)===jr,Zt=(K&128)!==0;if(!U&&De===ni&&Zt)throw new Error("Point.fromHex: x=0 and x_0=1");return Zt!==Ke&&(De=u(-De)),v.fromAffine({x:De,y:Q})}static fromPrivateKey(A){return C(A).point}toRawBytes(){const{x:A,y:U}=this.toAffine(),P=kC(U,n.BYTES);return P[P.length-1]|=A&jr?128:0,P}toHex(){return OA(this.toRawBytes())}}v.BASE=new v(e.Gx,e.Gy,jr,u(e.Gx*e.Gy)),v.ZERO=new v(ni,jr,jr,ni);const{BASE:_,ZERO:E}=v,x=Gne(v,a*8);function S(I){return En(I,r)}function T(I){return S(aw(I))}function C(I){const A=n.BYTES;I=wo("private key",I,A);const U=wo("hashed private key",i(I),2*A),P=f(U.slice(0,A)),k=U.slice(A,2*A),j=T(P),z=_.multiply(j),K=z.toRawBytes();return{head:P,prefix:k,scalar:j,point:z,pointBytes:K}}function O(I){return C(I).pointBytes}function R(I=new Uint8Array,...A){const U=qN(...A);return T(i(p(U,wo("context",I),!!s)))}function F(I,A,U={}){I=wo("message",I),s&&(I=s(I));const{prefix:P,scalar:k,pointBytes:j}=C(A),z=R(U.context,P,I),K=_.multiply(z).toRawBytes(),Q=R(U.context,K,j,I),Y=S(z+Q*k);lf("signature.s",Y,ni,r);const Z=qN(K,kC(Y,n.BYTES));return wo("result",Z,n.BYTES*2)}const W=Qne;function B(I,A,U,P=W){const{context:k,zip215:j}=P,z=n.BYTES;I=wo("signature",I,2*z),A=wo("message",A),U=wo("publicKey",U,z),j!==void 0&&k1("zip215",j),s&&(A=s(A));const K=aw(I.slice(z,2*z));let Q,Y,Z;try{Q=v.fromHex(U,j),Y=v.fromHex(I.slice(0,z),j),Z=_.multiplyUnsafe(K)}catch{return!1}if(!j&&Q.isSmallOrder())return!1;const se=R(k,Y.toRawBytes(),Q.toRawBytes(),A);return Y.add(Q.multiplyUnsafe(se)).subtract(Z).clearCofactor().equals(v.ZERO)}return _._setWindowSize(8),{CURVE:e,getPublicKey:O,sign:F,verify:B,ExtendedPoint:v,utils:{getExtendedPublicKey:C,randomPrivateKey:()=>o(n.BYTES),precompute(I=8,A=v.BASE){return A._setWindowSize(I),A.multiply(BigInt(3)),A}}}}BigInt(0),BigInt(1);const $A=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),JN=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const ere=BigInt(1),QN=BigInt(2);BigInt(3);const tre=BigInt(5),nre=BigInt(8);function rre(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=$A,o=t*t%i*t%i,a=Ui(o,QN,i)*o%i,c=Ui(a,ere,i)*t%i,l=Ui(c,tre,i)*c%i,u=Ui(l,e,i)*l%i,d=Ui(u,n,i)*u%i,h=Ui(d,r,i)*d%i,f=Ui(h,s,i)*h%i,p=Ui(f,s,i)*h%i,g=Ui(p,e,i)*l%i;return{pow_p_5_8:Ui(g,QN,i)*t%i,b2:o}}function sre(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function ire(t,e){const n=$A,r=En(e*e*e,n),s=En(r*r*e,n),i=rre(t*s).pow_p_5_8;let o=En(t*r*i,n);const a=En(e*o*o,n),c=o,l=En(o*JN,n),u=a===t,d=a===En(-t,n),h=a===En(-t*JN,n);return u&&(o=c),(d||h)&&(o=l),Bne(o,n)&&(o=En(-o,n)),{isValid:u||d,value:o}}const ore=C6($A,void 0,!0),are={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:ore,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:nre,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Tne,randomBytes:m6,adjustScalarBytes:sre,uvRatio:ire},A6=Xne(are),cre="EdDSA",lre="JWT",i0=".",Av="base64url",I6="utf8",T6="utf8",ure=":",dre="did",hre="key",ZN="base58btc",fre="z",pre="K36",gre=32;function DA(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function N6(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?DA(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function P6(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=N6(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return DA(n)}function mre(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var v=(b-y)*u+1>>>0,_=new Uint8Array(v);y!==b;){for(var E=p[y],x=0,S=v-1;(E!==0||x<w)&&S!==-1;S--,x++)E+=256*_[S]>>>0,_[S]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");w=x,y++}for(var T=v-w;T!==v&&_[T]===0;)T++;for(var C=c.repeat(g);T<v;++T)C+=t.charAt(_[T]);return C}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var E=0,x=b-1;(_!==0||E<y)&&x!==-1;x--,E++)_+=a*v[x]>>>0,v[x]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");y=E,g++}if(p[g]!==" "){for(var S=b-y;S!==b&&v[S]===0;)S++;for(var T=new Uint8Array(w+(b-S)),C=w;S!==b;)T[C++]=v[S++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var yre=mre,wre=yre;const k6=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},vre=t=>new TextEncoder().encode(t),bre=t=>new TextDecoder().decode(t);let Ere=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},_re=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return O6(this,e)}},Cre=class{constructor(e){this.decoders=e}or(e){return O6(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const O6=(t,e)=>new Cre({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let xre=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Ere(e,n,r),this.decoder=new _re(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const Iv=({name:t,prefix:e,encode:n,decode:r})=>new xre(t,e,n,r),fm=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=wre(n,e);return Iv({prefix:t,name:e,encode:r,decode:i=>k6(s(i))})},Sre=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Are=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Zn=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Iv({prefix:e,name:t,encode(s){return Are(s,r,n)},decode(s){return Sre(s,r,n,t)}}),Ire=Iv({prefix:"\0",name:"identity",encode:t=>bre(t),decode:t=>vre(t)});var Tre=Object.freeze({__proto__:null,identity:Ire});const Nre=Zn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Pre=Object.freeze({__proto__:null,base2:Nre});const kre=Zn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Ore=Object.freeze({__proto__:null,base8:kre});const Rre=fm({prefix:"9",name:"base10",alphabet:"0123456789"});var $re=Object.freeze({__proto__:null,base10:Rre});const Dre=Zn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Ure=Zn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var jre=Object.freeze({__proto__:null,base16:Dre,base16upper:Ure});const Lre=Zn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Mre=Zn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Bre=Zn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Fre=Zn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),zre=Zn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Wre=Zn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),qre=Zn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Hre=Zn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Vre=Zn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Gre=Object.freeze({__proto__:null,base32:Lre,base32upper:Mre,base32pad:Bre,base32padupper:Fre,base32hex:zre,base32hexupper:Wre,base32hexpad:qre,base32hexpadupper:Hre,base32z:Vre});const Kre=fm({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Yre=fm({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Jre=Object.freeze({__proto__:null,base36:Kre,base36upper:Yre});const Qre=fm({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Zre=fm({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Xre=Object.freeze({__proto__:null,base58btc:Qre,base58flickr:Zre});const ese=Zn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),tse=Zn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),nse=Zn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),rse=Zn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var sse=Object.freeze({__proto__:null,base64:ese,base64pad:tse,base64url:nse,base64urlpad:rse});const R6=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),ise=R6.reduce((t,e,n)=>(t[n]=e,t),[]),ose=R6.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function ase(t){return t.reduce((e,n)=>(e+=ise[n],e),"")}function cse(t){const e=[];for(const n of t){const r=ose[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const lse=Iv({prefix:"🚀",name:"base256emoji",encode:ase,decode:cse});var use=Object.freeze({__proto__:null,base256emoji:lse}),dse=$6,XN=128,hse=-128,fse=Math.pow(2,31);function $6(t,e,n){e=e||[],n=n||0;for(var r=n;t>=fse;)e[n++]=t&255|XN,t/=128;for(;t&hse;)e[n++]=t&255|XN,t>>>=7;return e[n]=t|0,$6.bytes=n-r+1,e}var pse=RC,gse=128,eP=127;function RC(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw RC.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&eP)<<s:(o&eP)*Math.pow(2,s),s+=7}while(o>=gse);return RC.bytes=i-r,n}var mse=Math.pow(2,7),yse=Math.pow(2,14),wse=Math.pow(2,21),vse=Math.pow(2,28),bse=Math.pow(2,35),Ese=Math.pow(2,42),_se=Math.pow(2,49),Cse=Math.pow(2,56),xse=Math.pow(2,63),Sse=function(t){return t<mse?1:t<yse?2:t<wse?3:t<vse?4:t<bse?5:t<Ese?6:t<_se?7:t<Cse?8:t<xse?9:10},Ase={encode:dse,decode:pse,encodingLength:Sse},D6=Ase;const tP=(t,e,n=0)=>(D6.encode(t,e,n),e),nP=t=>D6.encodingLength(t),$C=(t,e)=>{const n=e.byteLength,r=nP(t),s=r+nP(n),i=new Uint8Array(s+n);return tP(t,i,0),tP(n,i,r),i.set(e,s),new Ise(t,n,e,i)};let Ise=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const U6=({name:t,code:e,encode:n})=>new Tse(t,e,n);let Tse=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?$C(this.code,n):n.then(r=>$C(this.code,r))}else throw Error("Unknown type, must be binary type")}};const j6=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Nse=U6({name:"sha2-256",code:18,encode:j6("SHA-256")}),Pse=U6({name:"sha2-512",code:19,encode:j6("SHA-512")});var kse=Object.freeze({__proto__:null,sha256:Nse,sha512:Pse});const L6=0,Ose="identity",M6=k6,Rse=t=>$C(L6,M6(t)),$se={code:L6,name:Ose,encode:M6,digest:Rse};var Dse=Object.freeze({__proto__:null,identity:$se});new TextEncoder,new TextDecoder;const rP={...Tre,...Pre,...Ore,...$re,...jre,...Gre,...Jre,...Xre,...sse,...use};({...kse,...Dse});function B6(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const sP=B6("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),j1=B6("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=N6(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),F6={utf8:sP,"utf-8":sP,hex:rP.base16,latin1:j1,ascii:j1,binary:j1,...rP};function Tv(t,e="utf8"){const n=F6[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function Nh(t,e="utf8"){const n=F6[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?DA(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function iP(t){return nu(Tv(Nh(t,Av),I6))}function o0(t){return Tv(Nh(Zo(t),I6),Av)}function z6(t){const e=Nh(pre,ZN),n=fre+Tv(P6([e,t]),ZN);return[dre,hre,n].join(ure)}function Use(t){return Tv(t,Av)}function jse(t){return Nh(t,Av)}function Lse(t){return Nh([o0(t.header),o0(t.payload)].join(i0),T6)}function Mse(t){return[o0(t.header),o0(t.payload),Use(t.signature)].join(i0)}function DC(t){const e=t.split(i0),n=iP(e[0]),r=iP(e[1]),s=jse(e[2]),i=Nh(e.slice(0,2).join(i0),T6);return{header:n,payload:r,signature:s,data:i}}function oP(t=m6(gre)){const e=A6.getPublicKey(t);return{secretKey:P6([t,e]),publicKey:e}}async function Bse(t,e,n,r,s=oe.fromMiliseconds(Date.now())){const i={alg:cre,typ:lre},o=z6(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=Lse({header:i,payload:c}),u=A6.sign(l,r.secretKey.slice(0,32));return Mse({header:i,payload:c,signature:u})}var aP=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},Fse=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),zse=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),Wse=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),qse=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Hse=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Vse=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Gse=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,cP=3,Kse=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Vse]],lP=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Yse(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Hse:typeof navigator<"u"?Qse(navigator.userAgent):Xse()}function Jse(t){return t!==""&&Kse.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function Qse(t){var e=Jse(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new qse;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<cP&&(s=aP(aP([],s,!0),eie(cP-s.length),!0)):s=[];var i=s.join("."),o=Zse(t),a=Gse.exec(t);return a&&a[1]?new Wse(n,i,o,a[1]):new Fse(n,i,o)}function Zse(t){for(var e=0,n=lP.length;e<n;e++){var r=lP[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function Xse(){var t=typeof process<"u"&&process.version;return t?new zse(process.version.slice(1)):null}function eie(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Ot={};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.getLocalStorage=Ot.getLocalStorageOrThrow=Ot.getCrypto=Ot.getCryptoOrThrow=W6=Ot.getLocation=Ot.getLocationOrThrow=UA=Ot.getNavigator=Ot.getNavigatorOrThrow=ru=Ot.getDocument=Ot.getDocumentOrThrow=Ot.getFromWindowOrThrow=Ot.getFromWindow=void 0;function _u(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Ot.getFromWindow=_u;function Ph(t){const e=_u(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Ot.getFromWindowOrThrow=Ph;function tie(){return Ph("document")}Ot.getDocumentOrThrow=tie;function nie(){return _u("document")}var ru=Ot.getDocument=nie;function rie(){return Ph("navigator")}Ot.getNavigatorOrThrow=rie;function sie(){return _u("navigator")}var UA=Ot.getNavigator=sie;function iie(){return Ph("location")}Ot.getLocationOrThrow=iie;function oie(){return _u("location")}var W6=Ot.getLocation=oie;function aie(){return Ph("crypto")}Ot.getCryptoOrThrow=aie;function cie(){return _u("crypto")}Ot.getCrypto=cie;function lie(){return Ph("localStorage")}Ot.getLocalStorageOrThrow=lie;function uie(){return _u("localStorage")}Ot.getLocalStorage=uie;var jA={};Object.defineProperty(jA,"__esModule",{value:!0});var q6=jA.getWindowMetadata=void 0;const uP=Ot;function die(){let t,e;try{t=uP.getDocumentOrThrow(),e=uP.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const w=p.getAttribute("href");if(w)if(w.toLowerCase().indexOf("https:")===-1&&w.toLowerCase().indexOf("http:")===-1&&w.indexOf("//")!==0){let y=e.protocol+"//"+e.host;if(w.indexOf("/")===0)y+=w;else{const b=e.pathname.split("/");b.pop();const v=b.join("/");y+=v+"/"+w}h.push(y)}else if(w.indexOf("//")===0){const y=e.protocol+w;h.push(y)}else h.push(w)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(w=>p.getAttribute(w)).filter(w=>w?d.includes(w):!1);if(g.length&&g){const w=p.getAttribute("content");if(w)return w}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}q6=jA.getWindowMetadata=die;function yg(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function UC(t){return yg(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const H6="2.31.0";let uf={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${H6}`};class su extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof su?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof su&&n.cause.docsPath||n.docsPath,i=(a=uf.getDocsUrl)==null?void 0:a.call(uf,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...uf.version?[`Version: ${uf.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=H6}walk(e){return V6(this,e)}}function V6(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?V6(t.cause,e):e?null:t}class G6 extends su{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function kh(t,{dir:e,size:n=32}={}){return typeof t=="string"?hie(t,{dir:e,size:n}):fie(t,{dir:e,size:n})}function hie(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new G6({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function fie(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new G6({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class pie extends su{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class gie extends su{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Oh(t,{size:e}){if(UC(t)>e)throw new gie({givenSize:UC(t),maxSize:e})}function jC(t,e={}){const{signed:n}=e;e.size&&Oh(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function mie(t,e={}){return Number(jC(t,e))}const yie=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function LC(t,e={}){return typeof t=="number"||typeof t=="bigint"?Y6(t,e):typeof t=="string"?bie(t,e):typeof t=="boolean"?wie(t,e):K6(t,e)}function wie(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Oh(n,{size:e.size}),kh(n,{size:e.size})):n}function K6(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=yie[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Oh(r,{size:e.size}),kh(r,{dir:"right",size:e.size})):r}function Y6(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new pie({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?kh(a,{size:r}):a}const vie=new TextEncoder;function bie(t,e={}){const n=vie.encode(t);return K6(n,e)}const Eie=new TextEncoder;function _ie(t,e={}){return typeof t=="number"||typeof t=="bigint"?xie(t,e):typeof t=="boolean"?Cie(t,e):yg(t)?J6(t,e):Q6(t,e)}function Cie(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Oh(n,{size:e.size}),kh(n,{size:e.size})):n}const vo={zero:48,nine:57,A:65,F:70,a:97,f:102};function dP(t){if(t>=vo.zero&&t<=vo.nine)return t-vo.zero;if(t>=vo.A&&t<=vo.F)return t-(vo.A-10);if(t>=vo.a&&t<=vo.f)return t-(vo.a-10)}function J6(t,e={}){let n=t;e.size&&(Oh(n,{size:e.size}),n=kh(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=dP(r.charCodeAt(a++)),l=dP(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new su(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function xie(t,e){const n=Y6(t,e);return J6(n)}function Q6(t,e={}){const n=Eie.encode(t);return typeof e.size=="number"?(Oh(n,{size:e.size}),kh(n,{dir:"right",size:e.size})):n}function Z6(t,e){const n=e||"hex",r=kS(yg(t,{strict:!1})?_ie(t):t);return n==="bytes"?r:LC(r)}class Sie extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const L1=new Sie(8192);function Aie(t,e){if(L1.has(`${t}.${e}`))return L1.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=Z6(Q6(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return L1.set(`${t}.${e}`,i),i}function Iie(t){const e=Z6(`0x${t.substring(4)}`).substring(26);return Aie(`0x${e}`)}async function Tie({hash:t,signature:e}){const n=yg(t)?t:LC(t),{secp256k1:r}=await an(async()=>{const{secp256k1:o}=await import("./secp256k1-T2J7Ug9y.js");return{secp256k1:o}},__vite__mapDeps([2,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=hP(f);return new r.Signature(jC(l),jC(u)).addRecoveryBit(p)}const o=yg(e)?e:LC(e);if(UC(o)!==65)throw new Error("invalid signature length");const a=mie(`0x${o.slice(130)}`),c=hP(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function hP(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function Nie({hash:t,signature:e}){return Iie(await Tie({hash:t,signature:e}))}function Pie(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let b=l[h],v=0;for(let _=p-1;(b!==0||v<d)&&_!==-1;_--,v++)b+=256*g[_]>>>0,g[_]=b%n>>>0,b=b/n>>>0;if(b!==0)throw new Error("Non-zero carry");d=v,h++}let w=p-d;for(;w!==p&&g[w]===0;)w++;let y=r.repeat(u);for(;w<p;++w)y+=t.charAt(g[w]);return y}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const b=l.charCodeAt(u);if(b>255)return;let v=e[b];if(v===255)return;let _=0;for(let E=f-1;(v!==0||_<h)&&E!==-1;E--,_++)v+=n*p[E]>>>0,p[E]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");h=_,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const w=new Uint8Array(d+(f-g));let y=d;for(;g!==f;)w[y++]=p[g++];return w}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var kie="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Rh=Pie(kie);function Oie(t){const e=t.length;let n=0,r=0;for(;r<e;){let s=t.charCodeAt(r++);if(s&4294967168)if(!(s&4294965248))n+=2;else{if(s>=55296&&s<=56319&&r<e){const i=t.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}s&4294901760?n+=4:n+=3}else{n++;continue}}return n}function Rie(t,e,n){const r=t.length;let s=n,i=0;for(;i<r;){let o=t.charCodeAt(i++);if(o&4294967168)if(!(o&4294965248))e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){const a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}o&4294901760?(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128):(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128)}else{e[s++]=o;continue}e[s++]=o&63|128}}const $ie=new TextEncoder,Die=50;function Uie(t,e,n){$ie.encodeInto(t,e.subarray(n))}function jie(t,e,n){t.length>Die?Uie(t,e,n):Rie(t,e,n)}const Lie=4096;function X6(t,e,n){let r=e;const s=r+n,i=[];let o="";for(;r<s;){const a=t[r++];if(!(a&128))i.push(a);else if((a&224)===192){const c=t[r++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){const c=t[r++]&63,l=t[r++]&63;i.push((a&31)<<12|c<<6|l)}else if((a&248)===240){const c=t[r++]&63,l=t[r++]&63,u=t[r++]&63;let d=(a&7)<<18|c<<12|l<<6|u;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=Lie&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const Mie=new TextDecoder,Bie=200;function Fie(t,e,n){const r=t.subarray(e,e+n);return Mie.decode(r)}function zie(t,e,n){return n>Bie?Fie(t,e,n):X6(t,e,n)}class my{constructor(e,n){this.type=e,this.data=n}}class gs extends Error{constructor(e){super(e);const n=Object.create(gs.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:gs.name})}}const df=4294967295;function Wie(t,e,n){const r=n/4294967296,s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function eU(t,e,n){const r=Math.floor(n/4294967296),s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function tU(t,e){const n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function qie(t,e){const n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}const Hie=-1,Vie=4294967296-1,Gie=17179869184-1;function Kie({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=Gie)if(e===0&&t<=Vie){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,r=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|n&3),i.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),eU(r,4,t),n}}function Yie(t){const e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function Jie(t){if(t instanceof Date){const e=Yie(t);return Kie(e)}else return null}function Qie(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),r=e.getUint32(4),s=(n&3)*4294967296+r,i=n>>>2;return{sec:s,nsec:i}}case 12:{const n=tU(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new gs(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function Zie(t){const e=Qie(t);return new Date(e.sec*1e3+e.nsec/1e6)}const Xie={type:Hie,encode:Jie,decode:Zie};class a0{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(Xie)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=-1-r;return new my(o,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=r;return new my(o,i)}}}return e instanceof my?e:null}decode(e,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(e,n,r):new my(n,e)}}a0.defaultCodec=new a0;function eoe(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function MC(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):eoe(t)?new Uint8Array(t):Uint8Array.from(t)}const toe=100,noe=2048;let roe=class nU{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??a0.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??toe,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??noe,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new nU({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=Oie(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),jie(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=MC(e);this.writeU8a(r)}encodeArray(e,n){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,n+1)}countWithoutUndefined(e,n){let r=0;for(const s of n)e[s]!==void 0&&r++;return r}encodeMap(e,n){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),Wie(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),eU(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function soe(t,e){return new roe(e).encodeSharedRef(t)}function M1(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const ioe=16,ooe=16;class aoe{constructor(e=ioe,n=ooe){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){const s=this.caches[r-1];e:for(const i of s){const o=i.bytes;for(let a=0;a<r;a++)if(o[a]!==e[n+a])continue e;return i.str}return null}store(e,n){const r=this.caches[e.length-1],s={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,n,r){const s=this.find(e,n,r);if(s!=null)return this.hit++,s;this.miss++;const i=X6(e,n,r),o=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(o,i),i}}const BC="array",sp="map_key",rU="map_value",coe=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new gs("The type of key must be string or number but "+typeof t)};class loe{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=BC,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=sp,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===BC){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===sp||e.type===rU){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const hf=-1,LA=new DataView(new ArrayBuffer(0)),uoe=new Uint8Array(LA.buffer);try{LA.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const fP=new RangeError("Insufficient data"),doe=new aoe;let hoe=class sU{constructor(e){this.totalPos=0,this.pos=0,this.view=LA,this.bytes=uoe,this.headByte=hf,this.stack=new loe,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??a0.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??df,this.maxBinLength=(e==null?void 0:e.maxBinLength)??df,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??df,this.maxMapLength=(e==null?void 0:e.maxMapLength)??df,this.maxExtLength=(e==null?void 0:e.maxExtLength)??df,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:doe,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??coe}clone(){return new sU({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=hf,this.stack.reset()}setBuffer(e){const n=MC(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===hf&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),r=MC(e),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(const a of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),n=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${M1(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,s=-1;for await(const i of e){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=e-160;n=this.decodeString(s,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new gs(`Unrecognized type byte: ${M1(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===BC)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===sp){if(n==="__proto__")throw new gs("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=rU;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=sp;continue e}}return n}}readHeadByte(){return this.headByte===hf&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=hf}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new gs(`Unrecognized array type byte: ${M1(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new gs(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new gs(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){var i;if(e>this.maxStrLength)throw new gs(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw fP;const r=this.pos+n;let s;return this.stateIsMapKey()&&((i=this.keyDecoder)!=null&&i.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,r,e):s=zie(this.bytes,r,e),this.pos+=n+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===sp:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new gs(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw fP;const r=this.pos+n,s=this.bytes.subarray(r,r+e);return this.pos+=n+e,s}decodeExtension(e,n){if(e>this.maxExtLength)throw new gs(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(e,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=qie(this.view,this.pos);return this.pos+=8,e}readI64(){const e=tU(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function foe(t,e){return new hoe(e).decode(t)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function poe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function iU(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function c0(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function MA(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function FC(t){if(!Array.isArray(t))throw new Error("array expected")}function l0(t,e){if(!iU(!0,e))throw new Error(`${t}: array of strings expected`)}function goe(t,e){if(!iU(!1,e))throw new Error(`${t}: array of numbers expected`)}function moe(...t){const e=i=>i,n=(i,o)=>a=>i(o(a)),r=t.map(i=>i.encode).reduceRight(n,e),s=t.map(i=>i.decode).reduce(n,e);return{encode:r,decode:s}}function yoe(t){const e=typeof t=="string"?t.split(""):t,n=e.length;l0("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(FC(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(FC(s),s.map(i=>{c0("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return o}))}}function woe(t=""){return c0("join",t),{encode:e=>(l0("join.decode",e),e.join(t)),decode:e=>(c0("join.decode",e),e.split(t))}}function voe(t,e="="){return MA(t),c0("padding",e),{encode(n){for(l0("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){l0("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const oU=(t,e)=>e===0?t:oU(e,t%e),u0=(t,e)=>t+(e-oU(t,e)),B1=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function pP(t,e,n,r){if(FC(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(u0(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${u0(e,n)}`);let s=0,i=0;const o=B1[e],a=B1[n]-1,c=[];for(const l of t){if(MA(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(s=s<<e|l,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=n;i-=n)c.push((s>>i-n&a)>>>0);const u=B1[i];if(u===void 0)throw new Error("invalid carry");s&=u-1}if(s=s<<n-i&a,!r&&i>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&c.push(s>>>0),c}function boe(t,e=!1){if(MA(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(u0(8,t)>32||u0(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!poe(n))throw new Error("radix2.encode input should be Uint8Array");return pP(Array.from(n),8,t,!e)},decode:n=>(goe("radix2.decode",n),Uint8Array.from(pP(n,t,8,e)))}}const Eoe=moe(boe(5),yoe("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),voe(5),woe(""));function BA(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function aU(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?BA(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function ip(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=aU(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return BA(n)}function _oe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var v=(b-y)*u+1>>>0,_=new Uint8Array(v);y!==b;){for(var E=p[y],x=0,S=v-1;(E!==0||x<w)&&S!==-1;S--,x++)E+=256*_[S]>>>0,_[S]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");w=x,y++}for(var T=v-w;T!==v&&_[T]===0;)T++;for(var C=c.repeat(g);T<v;++T)C+=t.charAt(_[T]);return C}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var E=0,x=b-1;(_!==0||E<y)&&x!==-1;x--,E++)_+=a*v[x]>>>0,v[x]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");y=E,g++}if(p[g]!==" "){for(var S=b-y;S!==b&&v[S]===0;)S++;for(var T=new Uint8Array(w+(b-S)),C=w;S!==b;)T[C++]=v[S++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Coe=_oe,xoe=Coe;const Soe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Aoe=t=>new TextEncoder().encode(t),Ioe=t=>new TextDecoder().decode(t);class Toe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Noe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return cU(this,e)}}class Poe{constructor(e){this.decoders=e}or(e){return cU(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const cU=(t,e)=>new Poe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class koe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Toe(e,n,r),this.decoder=new Noe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Nv=({name:t,prefix:e,encode:n,decode:r})=>new koe(t,e,n,r),pm=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=xoe(n,e);return Nv({prefix:t,name:e,encode:r,decode:i=>Soe(s(i))})},Ooe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Roe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Xn=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Nv({prefix:e,name:t,encode(s){return Roe(s,r,n)},decode(s){return Ooe(s,r,n,t)}}),$oe=Nv({prefix:"\0",name:"identity",encode:t=>Ioe(t),decode:t=>Aoe(t)}),Doe=Object.freeze(Object.defineProperty({__proto__:null,identity:$oe},Symbol.toStringTag,{value:"Module"})),Uoe=Xn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),joe=Object.freeze(Object.defineProperty({__proto__:null,base2:Uoe},Symbol.toStringTag,{value:"Module"})),Loe=Xn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Moe=Object.freeze(Object.defineProperty({__proto__:null,base8:Loe},Symbol.toStringTag,{value:"Module"})),Boe=pm({prefix:"9",name:"base10",alphabet:"0123456789"}),Foe=Object.freeze(Object.defineProperty({__proto__:null,base10:Boe},Symbol.toStringTag,{value:"Module"})),zoe=Xn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Woe=Xn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),qoe=Object.freeze(Object.defineProperty({__proto__:null,base16:zoe,base16upper:Woe},Symbol.toStringTag,{value:"Module"})),Hoe=Xn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Voe=Xn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Goe=Xn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Koe=Xn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Yoe=Xn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Joe=Xn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Qoe=Xn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Zoe=Xn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Xoe=Xn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),eae=Object.freeze(Object.defineProperty({__proto__:null,base32:Hoe,base32hex:Yoe,base32hexpad:Qoe,base32hexpadupper:Zoe,base32hexupper:Joe,base32pad:Goe,base32padupper:Koe,base32upper:Voe,base32z:Xoe},Symbol.toStringTag,{value:"Module"})),tae=pm({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),nae=pm({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),rae=Object.freeze(Object.defineProperty({__proto__:null,base36:tae,base36upper:nae},Symbol.toStringTag,{value:"Module"})),sae=pm({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),iae=pm({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),oae=Object.freeze(Object.defineProperty({__proto__:null,base58btc:sae,base58flickr:iae},Symbol.toStringTag,{value:"Module"})),aae=Xn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),cae=Xn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),lae=Xn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),uae=Xn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),dae=Object.freeze(Object.defineProperty({__proto__:null,base64:aae,base64pad:cae,base64url:lae,base64urlpad:uae},Symbol.toStringTag,{value:"Module"})),lU=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),hae=lU.reduce((t,e,n)=>(t[n]=e,t),[]),fae=lU.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function pae(t){return t.reduce((e,n)=>(e+=hae[n],e),"")}function gae(t){const e=[];for(const n of t){const r=fae[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const mae=Nv({prefix:"🚀",name:"base256emoji",encode:pae,decode:gae}),yae=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:mae},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const gP={...Doe,...joe,...Moe,...Foe,...qoe,...eae,...rae,...oae,...dae,...yae};function uU(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const mP=uU("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),F1=uU("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=aU(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),dU={utf8:mP,"utf-8":mP,hex:gP.base16,latin1:F1,ascii:F1,binary:F1,...gP};function qs(t,e="utf8"){const n=dU[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?BA(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function ss(t,e="utf8"){const n=dU[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const wae={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},vae="Input must be an string, Buffer or Uint8Array";function bae(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(vae);return e}function Eae(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function yy(t){return(4294967296+t).toString(16).substring(1)}function _ae(t,e,n){let r=`
`+t+" = ";for(let s=0;s<e.length;s+=2){if(n===32)r+=yy(e[s]).toUpperCase(),r+=" ",r+=yy(e[s+1]).toUpperCase();else if(n===64)r+=yy(e[s+1]).toUpperCase(),r+=yy(e[s]).toUpperCase();else throw new Error("Invalid size "+n);s%6===4?r+=`
`+new Array(t.length+4).join(" "):s<e.length-2&&(r+=" ")}console.log(r)}function Cae(t,e,n){let r=new Date().getTime();const s=new Uint8Array(e);for(let o=0;o<e;o++)s[o]=o%256;const i=new Date().getTime();console.log("Generated random input in "+(i-r)+"ms"),r=i;for(let o=0;o<n;o++){const a=t(s),c=new Date().getTime(),l=c-r;r=c,console.log("Hashed in "+l+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(l/1e3)*100)/100+" MB PER SECOND")}}var hU={normalizeInput:bae,toHex:Eae,debugPrint:_ae,testSpeed:Cae};const cw=hU;function wy(t,e,n){const r=t[e]+t[n];let s=t[e+1]+t[n+1];r>=4294967296&&s++,t[e]=r,t[e+1]=s}function yP(t,e,n,r){let s=t[e]+n;n<0&&(s+=4294967296);let i=t[e+1]+r;s>=4294967296&&i++,t[e]=s,t[e+1]=i}function fU(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function ma(t,e,n,r,s,i){const o=jf[s],a=jf[s+1],c=jf[i],l=jf[i+1];wy(Fe,t,e),yP(Fe,t,o,a);let u=Fe[r]^Fe[t],d=Fe[r+1]^Fe[t+1];Fe[r]=d,Fe[r+1]=u,wy(Fe,n,r),u=Fe[e]^Fe[n],d=Fe[e+1]^Fe[n+1],Fe[e]=u>>>24^d<<8,Fe[e+1]=d>>>24^u<<8,wy(Fe,t,e),yP(Fe,t,c,l),u=Fe[r]^Fe[t],d=Fe[r+1]^Fe[t+1],Fe[r]=u>>>16^d<<16,Fe[r+1]=d>>>16^u<<16,wy(Fe,n,r),u=Fe[e]^Fe[n],d=Fe[e+1]^Fe[n+1],Fe[e]=d>>>31^u<<1,Fe[e+1]=u>>>31^d<<1}const pU=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),xae=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],sr=new Uint8Array(xae.map(function(t){return t*2})),Fe=new Uint32Array(32),jf=new Uint32Array(32);function gU(t,e){let n=0;for(n=0;n<16;n++)Fe[n]=t.h[n],Fe[n+16]=pU[n];for(Fe[24]=Fe[24]^t.t,Fe[25]=Fe[25]^t.t/4294967296,e&&(Fe[28]=~Fe[28],Fe[29]=~Fe[29]),n=0;n<32;n++)jf[n]=fU(t.b,4*n);for(n=0;n<12;n++)ma(0,8,16,24,sr[n*16+0],sr[n*16+1]),ma(2,10,18,26,sr[n*16+2],sr[n*16+3]),ma(4,12,20,28,sr[n*16+4],sr[n*16+5]),ma(6,14,22,30,sr[n*16+6],sr[n*16+7]),ma(0,10,20,30,sr[n*16+8],sr[n*16+9]),ma(2,12,22,24,sr[n*16+10],sr[n*16+11]),ma(4,14,16,26,sr[n*16+12],sr[n*16+13]),ma(6,8,18,28,sr[n*16+14],sr[n*16+15]);for(n=0;n<16;n++)t.h[n]=t.h[n]^Fe[n]^Fe[n+16]}const ya=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function mU(t,e,n,r){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&n.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&r.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const s={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};ya.fill(0),ya[0]=t,e&&(ya[1]=e.length),ya[2]=1,ya[3]=1,n&&ya.set(n,32),r&&ya.set(r,48);for(let i=0;i<16;i++)s.h[i]=pU[i]^fU(ya,i*4);return e&&(FA(s,e),s.c=128),s}function FA(t,e){for(let n=0;n<e.length;n++)t.c===128&&(t.t+=t.c,gU(t,!1),t.c=0),t.b[t.c++]=e[n]}function yU(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;gU(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3);return e}function wU(t,e,n,r,s){n=n||64,t=cw.normalizeInput(t),r&&(r=cw.normalizeInput(r)),s&&(s=cw.normalizeInput(s));const i=mU(n,e,r,s);return FA(i,t),yU(i)}function Sae(t,e,n,r,s){const i=wU(t,e,n,r,s);return cw.toHex(i)}var Aae={blake2b:wU,blake2bHex:Sae,blake2bInit:mU,blake2bUpdate:FA,blake2bFinal:yU};const vU=hU;function Iae(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function wa(t,e,n,r,s,i){lt[t]=lt[t]+lt[e]+s,lt[r]=vy(lt[r]^lt[t],16),lt[n]=lt[n]+lt[r],lt[e]=vy(lt[e]^lt[n],12),lt[t]=lt[t]+lt[e]+i,lt[r]=vy(lt[r]^lt[t],8),lt[n]=lt[n]+lt[r],lt[e]=vy(lt[e]^lt[n],7)}function vy(t,e){return t>>>e^t<<32-e}const bU=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ir=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),lt=new Uint32Array(16),Bn=new Uint32Array(16);function EU(t,e){let n=0;for(n=0;n<8;n++)lt[n]=t.h[n],lt[n+8]=bU[n];for(lt[12]^=t.t,lt[13]^=t.t/4294967296,e&&(lt[14]=~lt[14]),n=0;n<16;n++)Bn[n]=Iae(t.b,4*n);for(n=0;n<10;n++)wa(0,4,8,12,Bn[ir[n*16+0]],Bn[ir[n*16+1]]),wa(1,5,9,13,Bn[ir[n*16+2]],Bn[ir[n*16+3]]),wa(2,6,10,14,Bn[ir[n*16+4]],Bn[ir[n*16+5]]),wa(3,7,11,15,Bn[ir[n*16+6]],Bn[ir[n*16+7]]),wa(0,5,10,15,Bn[ir[n*16+8]],Bn[ir[n*16+9]]),wa(1,6,11,12,Bn[ir[n*16+10]],Bn[ir[n*16+11]]),wa(2,7,8,13,Bn[ir[n*16+12]],Bn[ir[n*16+13]]),wa(3,4,9,14,Bn[ir[n*16+14]],Bn[ir[n*16+15]]);for(n=0;n<8;n++)t.h[n]^=lt[n]^lt[n+8]}function _U(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=e?e.length:0;if(e&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(bU),b:new Uint8Array(64),c:0,t:0,outlen:t};return r.h[0]^=16842752^n<<8^t,n>0&&(zA(r,e),r.c=64),r}function zA(t,e){for(let n=0;n<e.length;n++)t.c===64&&(t.t+=t.c,EU(t,!1),t.c=0),t.b[t.c++]=e[n]}function CU(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;EU(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3)&255;return e}function xU(t,e,n){n=n||32,t=vU.normalizeInput(t);const r=_U(n,e);return zA(r,t),CU(r)}function Tae(t,e,n){const r=xU(t,e,n);return vU.toHex(r)}var Nae={blake2s:xU,blake2sHex:Tae,blake2sInit:_U,blake2sUpdate:zA,blake2sFinal:CU};const ff=Aae,pf=Nae;var Pae={blake2b:ff.blake2b,blake2bHex:ff.blake2bHex,blake2bInit:ff.blake2bInit,blake2bUpdate:ff.blake2bUpdate,blake2bFinal:ff.blake2bFinal,blake2s:pf.blake2s,blake2sHex:pf.blake2sHex,blake2sInit:pf.blake2sInit,blake2sUpdate:pf.blake2sUpdate,blake2sFinal:pf.blake2sFinal},kae={};const Oae=":";function Rd(t){const[e,n]=t.split(Oae);return{namespace:e,reference:n}}function SU(t,e){return t.includes(":")?[t]:e.chains||[]}var Rae=Object.defineProperty,$ae=Object.defineProperties,Dae=Object.getOwnPropertyDescriptors,wP=Object.getOwnPropertySymbols,Uae=Object.prototype.hasOwnProperty,jae=Object.prototype.propertyIsEnumerable,vP=(t,e,n)=>e in t?Rae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bP=(t,e)=>{for(var n in e||(e={}))Uae.call(e,n)&&vP(t,n,e[n]);if(wP)for(var n of wP(e))jae.call(e,n)&&vP(t,n,e[n]);return t},Lae=(t,e)=>$ae(t,Dae(e));const Mae="ReactNative",ws={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Bae="js";function d0(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function zc(){return!ru()&&!!UA()&&navigator.product===Mae}function Fae(){return zc()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function zae(){return zc()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function $h(){return!d0()&&!!UA()&&!!ru()}function gm(){return zc()?ws.reactNative:d0()?ws.node:$h()?ws.browser:ws.unknown}function EP(){var t;try{return zc()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function Wae(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function qae(t){var e,n;const r=AU();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),Lae(bP(bP({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function AU(){return q6()||{name:"",description:"",url:"",icons:[""]}}function Hae(){if(gm()===ws.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=Yse();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Vae(){var t;const e=gm();return e===ws.browser?[e,((t=W6())==null?void 0:t.host)||"unknown"].join(":"):e}function IU(t,e,n){const r=Hae(),s=Vae();return[[t,e].join("-"),[Bae,n].join("-"),r,s].join("/")}function Gae({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=IU(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=Wae(l[1]||"",d);return l[0]+"?"+h}function bl(t,e){return t.filter(n=>e.includes(n)).length===t.length}function zC(t){return Object.fromEntries(t.entries())}function WC(t){return new Map(Object.entries(t))}function al(t=oe.FIVE_MINUTES,e){const n=oe.toMiliseconds(t||oe.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function sc(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function TU(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Kae(t){return TU("topic",t)}function Yae(t){return TU("id",t)}function NU(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function wn(t,e){return oe.fromMiliseconds(Date.now()+oe.toMiliseconds(t))}function Ra(t){return Date.now()>=oe.toMiliseconds(t)}function gt(t,e){return`${t}${e?`:${e}`:""}`}function so(t=[],e=[]){return[...new Set([...t,...e])]}async function Jae({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=Qae(i,t,e),a=gm();if(a===ws.browser){if(!((r=ru())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}Zae(o)}else a===ws.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function Qae(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${nce(r,!0)}`}else s=`${s}/wc?${r}`;return s}function Zae(t){let e="_self";tce()?e="_top":(ece()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function Xae(t,e){let n="";try{if($h()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function _P(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function CP(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function WA(){return typeof process<"u"&&kae.IS_VITEST==="true"}function ece(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function tce(){try{return window.self!==window.top}catch{return!1}}function nce(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function PU(t){return Buffer.from(t,"base64").toString("utf-8")}function rce(t){return new Promise(e=>setTimeout(e,t))}const by=BigInt(2**32-1),xP=BigInt(32);function kU(t,e=!1){return e?{h:Number(t&by),l:Number(t>>xP&by)}:{h:Number(t>>xP&by)|0,l:Number(t&by)|0}}function OU(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=kU(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const SP=(t,e,n)=>t>>>n,AP=(t,e,n)=>t<<32-n|e>>>n,$a=(t,e,n)=>t>>>n|e<<32-n,Da=(t,e,n)=>t<<32-n|e>>>n,Lf=(t,e,n)=>t<<64-n|e>>>n-32,Mf=(t,e,n)=>t>>>n-32|e<<64-n,sce=(t,e)=>e,ice=(t,e)=>t,oce=(t,e,n)=>t<<n|e>>>32-n,ace=(t,e,n)=>e<<n|t>>>32-n,cce=(t,e,n)=>e<<n-32|t>>>64-n,lce=(t,e,n)=>t<<n-32|e>>>64-n;function ui(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const qA=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),HA=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,uce=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),dce=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,hce=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),fce=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,ju=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function VA(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Xo(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Ks(t,...e){if(!VA(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function GA(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Xo(t.outputLen),Xo(t.blockLen)}function Rc(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function KA(t,e){Ks(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function wg(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Ys(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function z1(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ji(t,e){return t<<32-e|t>>>e}const RU=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function $U(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const xo=RU?t=>t:t=>$U(t);function pce(t){for(let e=0;e<t.length;e++)t[e]=$U(t[e]);return t}const Ua=RU?t=>t:pce,DU=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",gce=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function vg(t){if(Ks(t),DU)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=gce[t[n]];return e}const bo={_0:48,_9:57,A:65,F:70,a:97,f:102};function IP(t){if(t>=bo._0&&t<=bo._9)return t-bo._0;if(t>=bo.A&&t<=bo.F)return t-(bo.A-10);if(t>=bo.a&&t<=bo.f)return t-(bo.a-10)}function YA(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(DU)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=IP(t.charCodeAt(i)),a=IP(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function mce(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Si(t){return typeof t=="string"&&(t=mce(t)),Ks(t),t}function El(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Ks(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let Pv=class{};function mm(t){const e=r=>t().update(Si(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function yce(t){const e=(r,s)=>t(s).update(Si(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function Dh(t=32){if(ju&&typeof ju.getRandomValues=="function")return ju.getRandomValues(new Uint8Array(t));if(ju&&typeof ju.randomBytes=="function")return Uint8Array.from(ju.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const wce=BigInt(0),gf=BigInt(1),vce=BigInt(2),bce=BigInt(7),Ece=BigInt(256),_ce=BigInt(113),UU=[],jU=[],LU=[];for(let t=0,e=gf,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],UU.push(2*(5*r+n)),jU.push((t+1)*(t+2)/2%64);let s=wce;for(let i=0;i<7;i++)e=(e<<gf^(e>>bce)*_ce)%Ece,e&vce&&(s^=gf<<(gf<<BigInt(i))-gf);LU.push(s)}const MU=OU(LU,!0),Cce=MU[0],xce=MU[1],TP=(t,e,n)=>n>32?cce(t,e,n):oce(t,e,n),NP=(t,e,n)=>n>32?lce(t,e,n):ace(t,e,n);function Sce(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=TP(l,u,1)^n[a],h=NP(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=jU[o],c=TP(s,i,a),l=NP(s,i,a),u=UU[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Cce[r],t[1]^=xce[r]}Ys(n)}let Ace=class BU extends Pv{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Xo(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=wg(this.state)}clone(){return this._cloneInto()}keccak(){Ua(this.state32),Sce(this.state32,this.rounds),Ua(this.state32),this.posOut=0,this.pos=0}update(e){Rc(this),e=Si(e),Ks(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Rc(this,!1),Ks(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Xo(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(KA(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ys(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new BU(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Ice=(t,e,n)=>mm(()=>new Ace(e,t,n)),Tce=Ice(1,136,256/8);function Nce(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function Pce(t,e,n){return t&e^~t&n}function kce(t,e,n){return t&e^t&n^e&n}let FU=class extends Pv{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=z1(this.buffer)}update(e){Rc(this),e=Si(e),Ks(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=z1(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Rc(this),KA(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Ys(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Nce(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=z1(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const va=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),or=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),ar=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Oce=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ba=new Uint32Array(64);let Rce=class extends FU{constructor(e=32){super(64,e,8,!1),this.A=va[0]|0,this.B=va[1]|0,this.C=va[2]|0,this.D=va[3]|0,this.E=va[4]|0,this.F=va[5]|0,this.G=va[6]|0,this.H=va[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)ba[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=ba[d-15],f=ba[d-2],p=ji(h,7)^ji(h,18)^h>>>3,g=ji(f,17)^ji(f,19)^f>>>10;ba[d]=g+ba[d-7]+p+ba[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=ji(a,6)^ji(a,11)^ji(a,25),f=u+h+Pce(a,c,l)+Oce[d]+ba[d]|0,p=(ji(r,2)^ji(r,13)^ji(r,22))+kce(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Ys(ba)}destroy(){this.set(0,0,0,0,0,0,0,0),Ys(this.buffer)}};const zU=OU(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),$ce=zU[0],Dce=zU[1],Ea=new Uint32Array(80),_a=new Uint32Array(80);let JA=class extends FU{constructor(e=64){super(128,e,16,!1),this.Ah=ar[0]|0,this.Al=ar[1]|0,this.Bh=ar[2]|0,this.Bl=ar[3]|0,this.Ch=ar[4]|0,this.Cl=ar[5]|0,this.Dh=ar[6]|0,this.Dl=ar[7]|0,this.Eh=ar[8]|0,this.El=ar[9]|0,this.Fh=ar[10]|0,this.Fl=ar[11]|0,this.Gh=ar[12]|0,this.Gl=ar[13]|0,this.Hh=ar[14]|0,this.Hl=ar[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let v=0;v<16;v++,n+=4)Ea[v]=e.getUint32(n),_a[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const _=Ea[v-15]|0,E=_a[v-15]|0,x=$a(_,E,1)^$a(_,E,8)^SP(_,E,7),S=Da(_,E,1)^Da(_,E,8)^AP(_,E,7),T=Ea[v-2]|0,C=_a[v-2]|0,O=$a(T,C,19)^Lf(T,C,61)^SP(T,C,6),R=Da(T,C,19)^Mf(T,C,61)^AP(T,C,6),F=uce(S,R,_a[v-7],_a[v-16]),W=dce(F,x,O,Ea[v-7],Ea[v-16]);Ea[v]=W|0,_a[v]=F|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:y,Hl:b}=this;for(let v=0;v<80;v++){const _=$a(d,h,14)^$a(d,h,18)^Lf(d,h,41),E=Da(d,h,14)^Da(d,h,18)^Mf(d,h,41),x=d&f^~d&g,S=h&p^~h&w,T=hce(b,E,S,Dce[v],_a[v]),C=fce(T,y,_,x,$ce[v],Ea[v]),O=T|0,R=$a(r,s,28)^Lf(r,s,34)^Lf(r,s,39),F=Da(r,s,28)^Mf(r,s,34)^Mf(r,s,39),W=r&i^r&a^i&a,B=s&o^s&c^o&c;y=g|0,b=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=ui(l|0,u|0,C|0,O|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=qA(O,F,B);r=HA(I,C,R,W),s=I|0}({h:r,l:s}=ui(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=ui(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=ui(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=ui(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=ui(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=ui(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=ui(this.Gh|0,this.Gl|0,g|0,w|0),{h:y,l:b}=ui(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,w,y,b)}roundClean(){Ys(Ea,_a)}destroy(){Ys(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Uce=class extends JA{constructor(){super(48),this.Ah=or[0]|0,this.Al=or[1]|0,this.Bh=or[2]|0,this.Bl=or[3]|0,this.Ch=or[4]|0,this.Cl=or[5]|0,this.Dh=or[6]|0,this.Dl=or[7]|0,this.Eh=or[8]|0,this.El=or[9]|0,this.Fh=or[10]|0,this.Fl=or[11]|0,this.Gh=or[12]|0,this.Gl=or[13]|0,this.Hh=or[14]|0,this.Hl=or[15]|0}};const cr=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);let jce=class extends JA{constructor(){super(32),this.Ah=cr[0]|0,this.Al=cr[1]|0,this.Bh=cr[2]|0,this.Bl=cr[3]|0,this.Ch=cr[4]|0,this.Cl=cr[5]|0,this.Dh=cr[6]|0,this.Dl=cr[7]|0,this.Eh=cr[8]|0,this.El=cr[9]|0,this.Fh=cr[10]|0,this.Fl=cr[11]|0,this.Gh=cr[12]|0,this.Gl=cr[13]|0,this.Hh=cr[14]|0,this.Hl=cr[15]|0}};const kv=mm(()=>new Rce),Lce=mm(()=>new JA),Mce=mm(()=>new Uce),Bce=mm(()=>new jce),Fce=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),yn=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),pe=new Uint32Array(32);function Ca(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=pe[2*t],l=pe[2*t+1],u=pe[2*e],d=pe[2*e+1],h=pe[2*n],f=pe[2*n+1],p=pe[2*r],g=pe[2*r+1],w=qA(c,u,o);l=HA(w,l,d,a),c=w|0,{Dh:g,Dl:p}={Dh:g^l,Dl:p^c},{Dh:g,Dl:p}={Dh:sce(g,p),Dl:ice(g)},{h:f,l:h}=ui(f,h,g,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:$a(d,u,24),Bl:Da(d,u,24)},pe[2*t]=c,pe[2*t+1]=l,pe[2*e]=u,pe[2*e+1]=d,pe[2*n]=h,pe[2*n+1]=f,pe[2*r]=p,pe[2*r+1]=g}function xa(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=pe[2*t],l=pe[2*t+1],u=pe[2*e],d=pe[2*e+1],h=pe[2*n],f=pe[2*n+1],p=pe[2*r],g=pe[2*r+1],w=qA(c,u,o);l=HA(w,l,d,a),c=w|0,{Dh:g,Dl:p}={Dh:g^l,Dl:p^c},{Dh:g,Dl:p}={Dh:$a(g,p,16),Dl:Da(g,p,16)},{h:f,l:h}=ui(f,h,g,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:Lf(d,u,63),Bl:Mf(d,u,63)},pe[2*t]=c,pe[2*t+1]=l,pe[2*e]=u,pe[2*e+1]=d,pe[2*n]=h,pe[2*n+1]=f,pe[2*r]=p,pe[2*r+1]=g}function zce(t,e={},n,r,s){if(Xo(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class Wce extends Pv{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Xo(e),Xo(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=wg(this.buffer)}update(e){Rc(this),e=Si(e),Ks(e);const{blockLen:n,buffer:r,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===n&&(Ua(s),this.compress(s,0,!1),Ua(s),this.pos=0);const l=Math.min(n-this.pos,i-c),u=o+c;if(l===n&&!(u%4)&&c+l<i){const d=new Uint32Array(a,u,Math.floor((i-c)/4));Ua(d);for(let h=0;c+n<i;h+=s.length,c+=n)this.length+=n,this.compress(d,h,!1);Ua(d);continue}r.set(e.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(e){Rc(this),KA(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,Ys(this.buffer.subarray(n)),Ua(r),this.compress(r,0,!0),Ua(r);const s=wg(e);this.get().forEach((i,o)=>s[o]=xo(i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(n),e.destroyed=i,e.finished=s,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class qce extends Wce{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=yn[0]|0,this.v0h=yn[1]|0,this.v1l=yn[2]|0,this.v1h=yn[3]|0,this.v2l=yn[4]|0,this.v2h=yn[5]|0,this.v3l=yn[6]|0,this.v3h=yn[7]|0,this.v4l=yn[8]|0,this.v4h=yn[9]|0,this.v5l=yn[10]|0,this.v5h=yn[11]|0,this.v6l=yn[12]|0,this.v6h=yn[13]|0,this.v7l=yn[14]|0,this.v7h=yn[15]|0,zce(n,e,64,16,16);let{key:r,personalization:s,salt:i}=e,o=0;if(r!==void 0&&(r=Si(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=Si(i);const a=wg(i);this.v4l^=xo(a[0]),this.v4h^=xo(a[1]),this.v5l^=xo(a[2]),this.v5h^=xo(a[3])}if(s!==void 0){s=Si(s);const a=wg(s);this.v6l^=xo(a[0]),this.v6h^=xo(a[1]),this.v7l^=xo(a[2]),this.v7h^=xo(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:l,v4h:u,v5l:d,v5h:h,v6l:f,v6h:p,v7l:g,v7h:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=d|0,this.v5h=h|0,this.v6l=f|0,this.v6h=p|0,this.v7l=g|0,this.v7h=w|0}compress(e,n,r){this.get().forEach((c,l)=>pe[l]=c),pe.set(yn,16);let{h:s,l:i}=kU(BigInt(this.length));pe[24]=yn[8]^i,pe[25]=yn[9]^s,r&&(pe[28]=~pe[28],pe[29]=~pe[29]);let o=0;const a=Fce;for(let c=0;c<12;c++)Ca(0,4,8,12,e,n+2*a[o++]),xa(0,4,8,12,e,n+2*a[o++]),Ca(1,5,9,13,e,n+2*a[o++]),xa(1,5,9,13,e,n+2*a[o++]),Ca(2,6,10,14,e,n+2*a[o++]),xa(2,6,10,14,e,n+2*a[o++]),Ca(3,7,11,15,e,n+2*a[o++]),xa(3,7,11,15,e,n+2*a[o++]),Ca(0,5,10,15,e,n+2*a[o++]),xa(0,5,10,15,e,n+2*a[o++]),Ca(1,6,11,12,e,n+2*a[o++]),xa(1,6,11,12,e,n+2*a[o++]),Ca(2,7,8,13,e,n+2*a[o++]),xa(2,7,8,13,e,n+2*a[o++]),Ca(3,4,9,14,e,n+2*a[o++]),xa(3,4,9,14,e,n+2*a[o++]);this.v0l^=pe[0]^pe[16],this.v0h^=pe[1]^pe[17],this.v1l^=pe[2]^pe[18],this.v1h^=pe[3]^pe[19],this.v2l^=pe[4]^pe[20],this.v2h^=pe[5]^pe[21],this.v3l^=pe[6]^pe[22],this.v3h^=pe[7]^pe[23],this.v4l^=pe[8]^pe[24],this.v4h^=pe[9]^pe[25],this.v5l^=pe[10]^pe[26],this.v5h^=pe[11]^pe[27],this.v6l^=pe[12]^pe[28],this.v6h^=pe[13]^pe[29],this.v7l^=pe[14]^pe[30],this.v7h^=pe[15]^pe[31],Ys(pe)}destroy(){this.destroyed=!0,Ys(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Hce=yce(t=>new qce(t)),Vce="https://rpc.walletconnect.org/v1";function WU(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(Tce(n)).toString("hex")}async function Gce(t,e,n,r,s,i){switch(n.t){case"eip191":return await Kce(t,e,n.s);case"eip1271":return await Yce(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function Kce(t,e,n){return(await Nie({hash:WU(e),signature:n})).toLowerCase()===t.toLowerCase()}async function Yce(t,e,n,r,s,i){const o=Rd(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l=n.substring(2),u=(l.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:WU(e)).substring(2),h=a+d+c+u+l,f=await fetch(`${i||Vce}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:Jce(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function Jce(){return Date.now()+Math.floor(Math.random()*1e3)}function Qce(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return Rh.encode(i)}function Zce(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const s=Hce(r,{dkLen:32});return Rh.encode(s)}function PP(t){const e=new Uint8Array(kv(Xce(t)));return Rh.encode(e)}function Xce(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function kP(t){const e=Buffer.from(t,"base64"),n=foe(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=soe(n),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(r)]),o=Bce(i);return Eoe.encode(o).replace(/=+$/,"")}function W1(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function ele(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(W1(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(W1(n.length)),s.push(n),s.push(Buffer.from([26])),s.push(W1(r.length)),s.push(r);const i=Buffer.concat(s),o=kv(i);return Buffer.from(o).toString("hex").toUpperCase()}var tle=Object.defineProperty,nle=Object.defineProperties,rle=Object.getOwnPropertyDescriptors,OP=Object.getOwnPropertySymbols,sle=Object.prototype.hasOwnProperty,ile=Object.prototype.propertyIsEnumerable,RP=(t,e,n)=>e in t?tle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ole=(t,e)=>{for(var n in e||(e={}))sle.call(e,n)&&RP(t,n,e[n]);if(OP)for(var n of OP(e))ile.call(e,n)&&RP(t,n,e[n]);return t},ale=(t,e)=>nle(t,rle(e));const cle="did:pkh:",QA=t=>t==null?void 0:t.split(":"),lle=t=>{const e=t&&QA(t);if(e)return t.includes(cle)?e[3]:e[1]},qC=t=>{const e=t&&QA(t);if(e)return e[2]+":"+e[3]},h0=t=>{const e=t&&QA(t);if(e)return e.pop()};async function $P(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=qU(s,s.iss),o=h0(s.iss);return await Gce(o,i,r,qC(s.iss),n)}const qU=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=h0(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${lle(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=lw(t.resources);if(p){const g=bg(p);s=wle(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function ule(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function dle(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function iu(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function hle(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:fle(e,n,r)}}}function fle(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function HU(t){return iu(t),`urn:recap:${ule(t).replace(/=/g,"")}`}function bg(t){const e=dle(t.replace("urn:recap:",""));return iu(e),e}function ple(t,e,n){const r=hle(t,e,n);return HU(r)}function gle(t){return t&&t.includes("urn:recap:")}function mle(t,e){const n=bg(t),r=bg(e),s=yle(n,r);return HU(s)}function yle(t,e){iu(t),iu(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=ale(ole({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function wle(t="",e){iu(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function DP(t){var e;const n=bg(t);iu(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function UP(t){const e=bg(t);iu(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function lw(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return gle(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function VU(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function HC(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function q1(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Yr(t,...e){if(!VU(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function jP(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function vle(t,e){Yr(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Ec(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function uh(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function ble(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const Ele=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function _le(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function VC(t){if(typeof t=="string")t=_le(t);else if(VU(t))t=GC(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function Cle(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function xle(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const Sle=(t,e)=>{function n(r,...s){if(Yr(r),!Ele)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Yr(l):Yr(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&Yr(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Yr(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Yr(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Yr(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function LP(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!Ile(e))throw new Error("invalid output, must be aligned");return e}function MP(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function Ale(t,e,n){HC(n);const r=new Uint8Array(16),s=ble(r);return MP(s,0,BigInt(e),n),MP(s,8,BigInt(t),n),r}function Ile(t){return t.byteOffset%4===0}function GC(t){return Uint8Array.from(t)}const GU=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Tle=GU("expand 16-byte k"),Nle=GU("expand 32-byte k"),Ple=Ec(Tle),kle=Ec(Nle);function at(t,e){return t<<e|t>>>32-e}function KC(t){return t.byteOffset%4===0}const Ey=64,Ole=16,KU=2**32-1,BP=new Uint32Array;function Rle(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(Ey),u=Ec(l),d=KC(s)&&KC(i),h=d?Ec(s):BP,f=d?Ec(i):BP;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=KU)throw new Error("arx: counter overflow");const g=Math.min(Ey,c-p);if(d&&g===Ey){const w=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let y=0,b;y<Ole;y++)b=w+y,f[b]=h[b]^u[y];p+=Ey;continue}for(let w=0,y;w<g;w++)y=p+w,i[y]=s[y]^l[w];p+=g}}function $le(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=Cle({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return q1(s),q1(o),HC(i),HC(n),(a,c,l,u,d=0)=>{Yr(a),Yr(c),Yr(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),Yr(u),q1(d),d<0||d>=KU)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,w;if(p===32)f.push(g=GC(a)),w=kle;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),w=Ple,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);KC(c)||f.push(c=GC(c));const y=Ec(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(w,y,Ec(c.subarray(0,16)),y),c=c.subarray(16)}const b=16-s;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const _=new Uint8Array(12);_.set(c,i?0:12-c.length),c=_,f.push(c)}const v=Ec(c);return Rle(t,w,y,v,l,u,d,o),uh(...f),u}}const Fn=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class Dle{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=VC(e),Yr(e,32);const n=Fn(e,0),r=Fn(e,2),s=Fn(e,4),i=Fn(e,6),o=Fn(e,8),a=Fn(e,10),c=Fn(e,12),l=Fn(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Fn(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],w=o[9],y=Fn(e,n+0),b=Fn(e,n+2),v=Fn(e,n+4),_=Fn(e,n+6),E=Fn(e,n+8),x=Fn(e,n+10),S=Fn(e,n+12),T=Fn(e,n+14);let C=i[0]+(y&8191),O=i[1]+((y>>>13|b<<3)&8191),R=i[2]+((b>>>10|v<<6)&8191),F=i[3]+((v>>>7|_<<9)&8191),W=i[4]+((_>>>4|E<<12)&8191),B=i[5]+(E>>>1&8191),I=i[6]+((E>>>14|x<<2)&8191),A=i[7]+((x>>>11|S<<5)&8191),U=i[8]+((S>>>8|T<<8)&8191),P=i[9]+(T>>>5|s),k=0,j=k+C*a+O*(5*w)+R*(5*g)+F*(5*p)+W*(5*f);k=j>>>13,j&=8191,j+=B*(5*h)+I*(5*d)+A*(5*u)+U*(5*l)+P*(5*c),k+=j>>>13,j&=8191;let z=k+C*c+O*a+R*(5*w)+F*(5*g)+W*(5*p);k=z>>>13,z&=8191,z+=B*(5*f)+I*(5*h)+A*(5*d)+U*(5*u)+P*(5*l),k+=z>>>13,z&=8191;let K=k+C*l+O*c+R*a+F*(5*w)+W*(5*g);k=K>>>13,K&=8191,K+=B*(5*p)+I*(5*f)+A*(5*h)+U*(5*d)+P*(5*u),k+=K>>>13,K&=8191;let Q=k+C*u+O*l+R*c+F*a+W*(5*w);k=Q>>>13,Q&=8191,Q+=B*(5*g)+I*(5*p)+A*(5*f)+U*(5*h)+P*(5*d),k+=Q>>>13,Q&=8191;let Y=k+C*d+O*u+R*l+F*c+W*a;k=Y>>>13,Y&=8191,Y+=B*(5*w)+I*(5*g)+A*(5*p)+U*(5*f)+P*(5*h),k+=Y>>>13,Y&=8191;let Z=k+C*h+O*d+R*u+F*l+W*c;k=Z>>>13,Z&=8191,Z+=B*a+I*(5*w)+A*(5*g)+U*(5*p)+P*(5*f),k+=Z>>>13,Z&=8191;let se=k+C*f+O*h+R*d+F*u+W*l;k=se>>>13,se&=8191,se+=B*c+I*a+A*(5*w)+U*(5*g)+P*(5*p),k+=se>>>13,se&=8191;let Pe=k+C*p+O*f+R*h+F*d+W*u;k=Pe>>>13,Pe&=8191,Pe+=B*l+I*c+A*a+U*(5*w)+P*(5*g),k+=Pe>>>13,Pe&=8191;let Oe=k+C*g+O*p+R*f+F*h+W*d;k=Oe>>>13,Oe&=8191,Oe+=B*u+I*l+A*c+U*a+P*(5*w),k+=Oe>>>13,Oe&=8191;let De=k+C*w+O*g+R*p+F*f+W*h;k=De>>>13,De&=8191,De+=B*d+I*u+A*l+U*c+P*a,k+=De>>>13,De&=8191,k=(k<<2)+k|0,k=k+j|0,j=k&8191,k=k>>>13,z+=k,i[0]=j,i[1]=z,i[2]=K,i[3]=Q,i[4]=Y,i[5]=Z,i[6]=se,i[7]=Pe,i[8]=Oe,i[9]=De}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;uh(r)}update(e){jP(this),e=VC(e),Yr(e);const{buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){uh(this.h,this.r,this.buffer,this.pad)}digestInto(e){jP(this),vle(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function Ule(t){const e=(r,s)=>t(s).update(VC(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const jle=Ule(t=>new Dle(t));function Lle(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],w=e[6],y=e[7],b=s,v=n[0],_=n[1],E=n[2],x=o,S=a,T=c,C=l,O=u,R=d,F=h,W=f,B=p,I=g,A=w,U=y,P=b,k=v,j=_,z=E;for(let Q=0;Q<i;Q+=2)x=x+O|0,P=at(P^x,16),B=B+P|0,O=at(O^B,12),x=x+O|0,P=at(P^x,8),B=B+P|0,O=at(O^B,7),S=S+R|0,k=at(k^S,16),I=I+k|0,R=at(R^I,12),S=S+R|0,k=at(k^S,8),I=I+k|0,R=at(R^I,7),T=T+F|0,j=at(j^T,16),A=A+j|0,F=at(F^A,12),T=T+F|0,j=at(j^T,8),A=A+j|0,F=at(F^A,7),C=C+W|0,z=at(z^C,16),U=U+z|0,W=at(W^U,12),C=C+W|0,z=at(z^C,8),U=U+z|0,W=at(W^U,7),x=x+R|0,z=at(z^x,16),A=A+z|0,R=at(R^A,12),x=x+R|0,z=at(z^x,8),A=A+z|0,R=at(R^A,7),S=S+F|0,P=at(P^S,16),U=U+P|0,F=at(F^U,12),S=S+F|0,P=at(P^S,8),U=U+P|0,F=at(F^U,7),T=T+W|0,k=at(k^T,16),B=B+k|0,W=at(W^B,12),T=T+W|0,k=at(k^T,8),B=B+k|0,W=at(W^B,7),C=C+O|0,j=at(j^C,16),I=I+j|0,O=at(O^I,12),C=C+O|0,j=at(j^C,8),I=I+j|0,O=at(O^I,7);let K=0;r[K++]=o+x|0,r[K++]=a+S|0,r[K++]=c+T|0,r[K++]=l+C|0,r[K++]=u+O|0,r[K++]=d+R|0,r[K++]=h+F|0,r[K++]=f+W|0,r[K++]=p+B|0,r[K++]=g+I|0,r[K++]=w+A|0,r[K++]=y+U|0,r[K++]=b+P|0,r[K++]=v+k|0,r[K++]=_+j|0,r[K++]=E+z|0}const Mle=$le(Lle,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Ble=new Uint8Array(16),FP=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(Ble.subarray(n))},Fle=new Uint8Array(32);function zP(t,e,n,r,s){const i=t(e,n,Fle),o=jle.create(i);s&&FP(o,s),FP(o,r);const a=Ale(r.length,s?s.length:0,!0);o.update(a);const c=o.digest();return uh(i,a),c}const zle=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=LP(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=zP(t,e,n,a,r);return i.set(c,o),uh(c),i},decrypt(s,i){i=LP(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=zP(t,e,n,o,r);if(!xle(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),uh(c),i}}),YU=Sle({blockSize:64,nonceLength:12,tagLength:16},zle(Mle));let JU=class extends Pv{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,GA(e);const r=Si(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Ys(i)}update(e){return Rc(this),this.iHash.update(e),this}digestInto(e){Rc(this),Ks(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Ov=(t,e,n)=>new JU(t,e).update(n).digest();Ov.create=(t,e)=>new JU(t,e);function Wle(t,e,n){return GA(t),n===void 0&&(n=new Uint8Array(t.outputLen)),Ov(t,Si(n),Si(e))}const H1=Uint8Array.from([0]),WP=Uint8Array.of();function qle(t,e,n,r=32){GA(t),Xo(r);const s=t.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);n===void 0&&(n=WP);const o=new Uint8Array(i*s),a=Ov.create(t,e),c=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let u=0;u<i;u++)H1[0]=u+1,c.update(u===0?WP:l).update(n).update(H1).digestInto(l),o.set(l,s*u),a._cloneInto(c);return a.destroy(),c.destroy(),Ys(l,H1),o.slice(0,r)}const Hle=(t,e,n,r,s)=>qle(t,Wle(t,e,n),r,s),Rv=kv,ZA=BigInt(0),YC=BigInt(1);function f0(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function _y(t){const e=t.toString(16);return e.length&1?"0"+e:e}function QU(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?ZA:BigInt("0x"+t)}function $v(t){return QU(vg(t))}function p0(t){return Ks(t),QU(vg(Uint8Array.from(t).reverse()))}function XA(t,e){return YA(t.toString(16).padStart(e*2,"0"))}function eI(t,e){return XA(t,e).reverse()}function Kr(t,e,n){let r;if(typeof e=="string")try{r=YA(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(VA(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const V1=t=>typeof t=="bigint"&&ZA<=t;function Vle(t,e,n){return V1(t)&&V1(e)&&V1(n)&&e<=t&&t<n}function JC(t,e,n,r){if(!Vle(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Gle(t){let e;for(e=0;t>ZA;t>>=YC,e+=1);return e}const Dv=t=>(YC<<BigInt(t))-YC;function Kle(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=h=>new Uint8Array(h),s=h=>Uint8Array.of(h);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...h)=>n(o,i,...h),u=(h=r(0))=>{o=l(s(0),h),i=l(),h.length!==0&&(o=l(s(1),h),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const f=[];for(;h<e;){i=l();const p=i.slice();f.push(p),h+=i.length}return El(...f)};return(h,f)=>{c(),u(h);let p;for(;!(p=f(d()));)u();return c(),p}}function Uv(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function qP(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Xr=BigInt(0),Ar=BigInt(1),_l=BigInt(2),Yle=BigInt(3),ZU=BigInt(4),XU=BigInt(5),ej=BigInt(8);function Bs(t,e){const n=t%e;return n>=Xr?n:e+n}function ai(t,e,n){let r=t;for(;e-- >Xr;)r*=r,r%=n;return r}function HP(t,e){if(t===Xr)throw new Error("invert: expected non-zero number");if(e<=Xr)throw new Error("invert: expected positive modulus, got "+e);let n=Bs(t,e),r=e,s=Xr,i=Ar;for(;n!==Xr;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Ar)throw new Error("invert: does not exist");return Bs(s,e)}function tj(t,e){const n=(t.ORDER+Ar)/ZU,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function Jle(t,e){const n=(t.ORDER-XU)/ej,r=t.mul(e,_l),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,_l),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function Qle(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Ar,n=0;for(;e%_l===Xr;)e/=_l,n++;let r=_l;const s=Uh(t);for(;VP(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return tj;let i=s.pow(r,e);const o=(e+Ar)/_l;return function(a,c){if(a.is0(c))return c;if(VP(a,c)!==1)throw new Error("Cannot find square root");let l=n,u=a.mul(a.ONE,i),d=a.pow(c,e),h=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let f=1,p=a.sqr(d);for(;!a.eql(p,a.ONE);)if(f++,p=a.sqr(p),f===l)throw new Error("Cannot find square root");const g=Ar<<BigInt(l-f-1),w=a.pow(u,g);l=f,u=a.sqr(w),d=a.mul(d,u),h=a.mul(h,w)}return h}}function Zle(t){return t%ZU===Yle?tj:t%ej===XU?Jle:Qle(t)}const Xle=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function eue(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Xle.reduce((r,s)=>(r[s]="function",r),e);return Uv(t,n),t}function tue(t,e,n){if(n<Xr)throw new Error("invalid exponent, negatives unsupported");if(n===Xr)return t.ONE;if(n===Ar)return e;let r=t.ONE,s=e;for(;n>Xr;)n&Ar&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Ar;return r}function nj(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function VP(t,e){const n=(t.ORDER-Ar)/_l,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function nue(t,e){e!==void 0&&Xo(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Uh(t,e,n=!1,r={}){if(t<=Xr)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=nue(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:Dv(o),ZERO:Xr,ONE:Ar,create:u=>Bs(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return Xr<=u&&u<t},is0:u=>u===Xr,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&Ar)===Ar,neg:u=>Bs(-u,t),eql:(u,d)=>u===d,sqr:u=>Bs(u*u,t),add:(u,d)=>Bs(u+d,t),sub:(u,d)=>Bs(u-d,t),mul:(u,d)=>Bs(u*d,t),pow:(u,d)=>tue(l,u,d),div:(u,d)=>Bs(u*HP(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>HP(u,t),sqrt:i||(u=>(c||(c=Zle(t)),c(l,u))),toBytes:u=>n?eI(u,a):XA(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?p0(u):$v(u)},invertBatch:u=>nj(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function rj(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function sj(t){const e=rj(t);return e+Math.ceil(e/2)}function rue(t,e,n=!1){const r=t.length,s=rj(e),i=sj(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?p0(t):$v(t),a=Bs(o,e-Ar)+Ar;return n?eI(a,s):XA(a,s)}const dh=BigInt(0),Cl=BigInt(1);function op(t,e){const n=e.negate();return t?n:e}function sue(t,e,n){const r=i=>i.pz,s=nj(t.Fp,n.map(r));return n.map((i,o)=>i.toAffine(s[o])).map(t.fromAffine)}function ij(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function G1(t,e){ij(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=Dv(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function GP(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Cl);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function iue(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function oue(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const K1=new WeakMap,oj=new WeakMap;function Y1(t){return oj.get(t)||1}function KP(t){if(t!==dh)throw new Error("invalid wNAF")}function aue(t,e){return{constTimeNegate:op,hasPrecomputes(n){return Y1(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>dh;)r&Cl&&(s=s.add(i)),i=i.double(),r>>=Cl;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=G1(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=G1(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=GP(s,c,a);s=l,d?o=o.add(op(f,r[p])):i=i.add(op(h,r[u]))}return KP(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=G1(n,e);for(let a=0;a<o.windows&&s!==dh;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=GP(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return KP(s),i},getPrecomputes(n,r,s){let i=K1.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),K1.set(r,i))),i},wNAFCached(n,r,s){const i=Y1(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=Y1(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){ij(r,e),oj.set(n,r),K1.delete(n)}}}function cue(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>dh||r>dh;)n&Cl&&(i=i.add(s)),r&Cl&&(o=o.add(s)),s=s.double(),n>>=Cl,r>>=Cl;return{p1:i,p2:o}}function lue(t,e,n,r){iue(n,t),oue(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=Gle(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=Dv(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const w=r[g],y=Number(w>>BigInt(f)&l);u[y]=u[y].add(n[g])}let p=o;for(let g=u.length-1,w=o;g>0;g--)w=w.add(u[g]),p=p.add(w);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function YP(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return eue(e),e}else return Uh(t)}function uue(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const o of["p","n","h"]){const a=e[o];if(!(typeof a=="bigint"&&a>dh))throw new Error(`CURVE.${o} must be positive bigint`)}const r=YP(e.p,n.Fp),s=YP(e.n,n.Fn),i=["Gx","Gy","a","b"];for(const o of i)if(!r.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const mf=BigInt(0),Lu=BigInt(1),Cy=BigInt(2);function due(t){return Uv(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function hue(t){const e=due(t),{P:n,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const c=o||Dh,l=a?255:448,u=a?32:56,d=BigInt(a?9:5),h=BigInt(a?121665:39081),f=a?Cy**BigInt(254):Cy**BigInt(447),p=a?BigInt(8)*Cy**BigInt(251)-Lu:BigInt(4)*Cy**BigInt(445)-Lu,g=f+p+Lu,w=C=>Bs(C,n),y=b(d);function b(C){return eI(w(C),u)}function v(C){const O=Kr("u coordinate",C,u);return a&&(O[31]&=127),w(p0(O))}function _(C){return p0(s(Kr("scalar",C,u)))}function E(C,O){const R=T(v(O),_(C));if(R===mf)throw new Error("invalid private or public key received");return b(R)}function x(C){return E(C,y)}function S(C,O,R){const F=w(C*(O-R));return O=w(O-F),R=w(R+F),{x_2:O,x_3:R}}function T(C,O){JC("u",C,mf,n),JC("scalar",O,f,g);const R=O,F=C;let W=Lu,B=mf,I=C,A=Lu,U=mf;for(let k=BigInt(l-1);k>=mf;k--){const j=R>>k&Lu;U^=j,{x_2:W,x_3:I}=S(U,W,I),{x_2:B,x_3:A}=S(U,B,A),U=j;const z=W+B,K=w(z*z),Q=W-B,Y=w(Q*Q),Z=K-Y,se=I+A,Pe=I-A,Oe=w(Pe*z),De=w(se*Q),Ke=Oe+De,Zt=Oe-De;I=w(Ke*Ke),A=w(F*w(Zt*Zt)),W=w(K*Y),B=w(Z*(K+w(h*Z)))}({x_2:W,x_3:I}=S(U,W,I)),{x_2:B,x_3:A}=S(U,B,A);const P=i(B);return w(W*P)}return{scalarMult:E,scalarMultBase:x,getSharedSecret:(C,O)=>E(C,O),getPublicKey:C=>x(C),utils:{randomPrivateKey:()=>c(u)},GuBytes:y.slice()}}BigInt(0);const fue=BigInt(1),JP=BigInt(2),pue=BigInt(3),gue=BigInt(5);BigInt(8);const aj={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function mue(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=aj.p,o=t*t%i*t%i,a=ai(o,JP,i)*o%i,c=ai(a,fue,i)*t%i,l=ai(c,gue,i)*c%i,u=ai(l,e,i)*l%i,d=ai(u,n,i)*u%i,h=ai(d,r,i)*d%i,f=ai(h,s,i)*h%i,p=ai(f,s,i)*h%i,g=ai(p,e,i)*l%i;return{pow_p_5_8:ai(g,JP,i)*t%i,b2:o}}function yue(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const QC=(()=>{const t=aj.p;return hue({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=mue(e);return Bs(ai(n,pue,t)*r,t)},adjustScalarBytes:yue})})();function QP(t){t.lowS!==void 0&&f0("lowS",t.lowS),t.prehash!==void 0&&f0("prehash",t.prehash)}class wue extends Error{constructor(e=""){super(e)}}const ko={Err:wue,_tlv:{encode:(t,e)=>{const{Err:n}=ko;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=_y(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?_y(s.length/2|128):"";return _y(t)+i+s+e},decode(t,e){const{Err:n}=ko;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=ko;if(t<ap)throw new e("integer: negative integers are not allowed");let n=_y(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=ko;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return $v(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=ko,s=Kr("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=ko,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},ap=BigInt(0),cp=BigInt(1),vue=BigInt(2),xy=BigInt(3),bue=BigInt(4);function Eue(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function cj(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=Kr("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function _ue(t,e={}){const{Fp:n,Fn:r}=uue("weierstrass",t,e),{h:s,n:i}=t;Uv(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(T,C,O){const{x:R,y:F}=C.toAffine(),W=n.toBytes(R);if(f0("isCompressed",O),O){a();const B=!n.isOdd(F);return El(lj(B),W)}else return El(Uint8Array.of(4),W,n.toBytes(F))}function l(T){Ks(T);const C=n.BYTES,O=C+1,R=2*C+1,F=T.length,W=T[0],B=T.subarray(1);if(F===O&&(W===2||W===3)){const I=n.fromBytes(B);if(!n.isValid(I))throw new Error("bad point: is not on curve, wrong x");const A=h(I);let U;try{U=n.sqrt(A)}catch(k){const j=k instanceof Error?": "+k.message:"";throw new Error("bad point: is not on curve, sqrt error"+j)}a();const P=n.isOdd(U);return(W&1)===1!==P&&(U=n.neg(U)),{x:I,y:U}}else if(F===R&&W===4){const I=n.fromBytes(B.subarray(C*0,C*1)),A=n.fromBytes(B.subarray(C*1,C*2));if(!f(I,A))throw new Error("bad point: is not on curve");return{x:I,y:A}}else throw new Error(`bad point: got length ${F}, expected compressed=${O} or uncompressed=${R}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=Eue(n,t.a,t.b);function f(T,C){const O=n.sqr(C),R=h(T);return n.eql(O,R)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,xy),bue),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function w(T,C,O=!1){if(!n.isValid(C)||O&&n.is0(C))throw new Error(`bad point coordinate ${T}`);return C}function y(T){if(!(T instanceof E))throw new Error("ProjectivePoint expected")}const b=qP((T,C)=>{const{px:O,py:R,pz:F}=T;if(n.eql(F,n.ONE))return{x:O,y:R};const W=T.is0();C==null&&(C=W?n.ONE:n.inv(F));const B=n.mul(O,C),I=n.mul(R,C),A=n.mul(F,C);if(W)return{x:n.ZERO,y:n.ZERO};if(!n.eql(A,n.ONE))throw new Error("invZ was invalid");return{x:B,y:I}}),v=qP(T=>{if(T.is0()){if(e.allowInfinityPoint&&!n.is0(T.py))return;throw new Error("bad point: ZERO")}const{x:C,y:O}=T.toAffine();if(!n.isValid(C)||!n.isValid(O))throw new Error("bad point: x or y not field elements");if(!f(C,O))throw new Error("bad point: equation left != right");if(!T.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function _(T,C,O,R,F){return O=new E(n.mul(O.px,T),O.py,O.pz),C=op(R,C),O=op(F,O),C.add(O)}class E{constructor(C,O,R){this.px=w("x",C),this.py=w("y",O,!0),this.pz=w("z",R),Object.freeze(this)}static fromAffine(C){const{x:O,y:R}=C||{};if(!C||!n.isValid(O)||!n.isValid(R))throw new Error("invalid affine point");if(C instanceof E)throw new Error("projective point not allowed");return n.is0(O)&&n.is0(R)?E.ZERO:new E(O,R,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(C){return sue(E,"pz",C)}static fromBytes(C){return Ks(C),E.fromHex(C)}static fromHex(C){const O=E.fromAffine(d(Kr("pointHex",C)));return O.assertValidity(),O}static fromPrivateKey(C){const O=cj(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return E.BASE.multiply(O(C))}static msm(C,O){return lue(E,r,C,O)}precompute(C=8,O=!0){return S.setWindowSize(this,C),O||this.multiply(xy),this}_setWindowSize(C){this.precompute(C)}assertValidity(){v(this)}hasEvenY(){const{y:C}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(C)}equals(C){y(C);const{px:O,py:R,pz:F}=this,{px:W,py:B,pz:I}=C,A=n.eql(n.mul(O,I),n.mul(W,F)),U=n.eql(n.mul(R,I),n.mul(B,F));return A&&U}negate(){return new E(this.px,n.neg(this.py),this.pz)}double(){const{a:C,b:O}=t,R=n.mul(O,xy),{px:F,py:W,pz:B}=this;let I=n.ZERO,A=n.ZERO,U=n.ZERO,P=n.mul(F,F),k=n.mul(W,W),j=n.mul(B,B),z=n.mul(F,W);return z=n.add(z,z),U=n.mul(F,B),U=n.add(U,U),I=n.mul(C,U),A=n.mul(R,j),A=n.add(I,A),I=n.sub(k,A),A=n.add(k,A),A=n.mul(I,A),I=n.mul(z,I),U=n.mul(R,U),j=n.mul(C,j),z=n.sub(P,j),z=n.mul(C,z),z=n.add(z,U),U=n.add(P,P),P=n.add(U,P),P=n.add(P,j),P=n.mul(P,z),A=n.add(A,P),j=n.mul(W,B),j=n.add(j,j),P=n.mul(j,z),I=n.sub(I,P),U=n.mul(j,k),U=n.add(U,U),U=n.add(U,U),new E(I,A,U)}add(C){y(C);const{px:O,py:R,pz:F}=this,{px:W,py:B,pz:I}=C;let A=n.ZERO,U=n.ZERO,P=n.ZERO;const k=t.a,j=n.mul(t.b,xy);let z=n.mul(O,W),K=n.mul(R,B),Q=n.mul(F,I),Y=n.add(O,R),Z=n.add(W,B);Y=n.mul(Y,Z),Z=n.add(z,K),Y=n.sub(Y,Z),Z=n.add(O,F);let se=n.add(W,I);return Z=n.mul(Z,se),se=n.add(z,Q),Z=n.sub(Z,se),se=n.add(R,F),A=n.add(B,I),se=n.mul(se,A),A=n.add(K,Q),se=n.sub(se,A),P=n.mul(k,Z),A=n.mul(j,Q),P=n.add(A,P),A=n.sub(K,P),P=n.add(K,P),U=n.mul(A,P),K=n.add(z,z),K=n.add(K,z),Q=n.mul(k,Q),Z=n.mul(j,Z),K=n.add(K,Q),Q=n.sub(z,Q),Q=n.mul(k,Q),Z=n.add(Z,Q),z=n.mul(K,Z),U=n.add(U,z),z=n.mul(se,Z),A=n.mul(Y,A),A=n.sub(A,z),z=n.mul(Y,K),P=n.mul(se,P),P=n.add(P,z),new E(A,U,P)}subtract(C){return this.add(C.negate())}is0(){return this.equals(E.ZERO)}multiply(C){const{endo:O}=e;if(!r.isValidNot0(C))throw new Error("invalid scalar: out of range");let R,F;const W=B=>S.wNAFCached(this,B,E.normalizeZ);if(O){const{k1neg:B,k1:I,k2neg:A,k2:U}=O.splitScalar(C),{p:P,f:k}=W(I),{p:j,f:z}=W(U);F=k.add(z),R=_(O.beta,P,j,B,A)}else{const{p:B,f:I}=W(C);R=B,F=I}return E.normalizeZ([R,F])[0]}multiplyUnsafe(C){const{endo:O}=e,R=this;if(!r.isValid(C))throw new Error("invalid scalar: out of range");if(C===ap||R.is0())return E.ZERO;if(C===cp)return R;if(S.hasPrecomputes(this))return this.multiply(C);if(O){const{k1neg:F,k1:W,k2neg:B,k2:I}=O.splitScalar(C),{p1:A,p2:U}=cue(E,R,W,I);return _(O.beta,A,U,F,B)}else return S.wNAFCachedUnsafe(R,C)}multiplyAndAddUnsafe(C,O,R){const F=this.multiplyUnsafe(O).add(C.multiplyUnsafe(R));return F.is0()?void 0:F}toAffine(C){return b(this,C)}isTorsionFree(){const{isTorsionFree:C}=e;return s===cp?!0:C?C(E,this):S.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:C}=e;return s===cp?this:C?C(E,this):this.multiplyUnsafe(s)}toBytes(C=!0){return f0("isCompressed",C),this.assertValidity(),u(E,this,C)}toRawBytes(C=!0){return this.toBytes(C)}toHex(C=!0){return vg(this.toBytes(C))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}E.BASE=new E(t.Gx,t.Gy,n.ONE),E.ZERO=new E(n.ZERO,n.ONE,n.ZERO),E.Fp=n,E.Fn=r;const x=r.BITS,S=aue(E,e.endo?Math.ceil(x/2):x);return E}function lj(t){return Uint8Array.of(t?2:3)}function Cue(t,e,n={}){Uv(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||Dh,s=e.hmac||((R,...F)=>Ov(e.hash,R,El(...F))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(R){const F=a>>cp;return R>F}function u(R){return l(R)?o.neg(R):R}function d(R,F){if(!o.isValidNot0(F))throw new Error(`invalid signature ${R}: out of range 1..CURVE.n`)}class h{constructor(F,W,B){d("r",F),d("s",W),this.r=F,this.s=W,B!=null&&(this.recovery=B),Object.freeze(this)}static fromCompact(F){const W=o.BYTES,B=Kr("compactSignature",F,W*2);return new h(o.fromBytes(B.subarray(0,W)),o.fromBytes(B.subarray(W,W*2)))}static fromDER(F){const{r:W,s:B}=ko.toSig(Kr("DER",F));return new h(W,B)}assertValidity(){}addRecoveryBit(F){return new h(this.r,this.s,F)}recoverPublicKey(F){const W=i.ORDER,{r:B,s:I,recovery:A}=this;if(A==null||![0,1,2,3].includes(A))throw new Error("recovery id invalid");if(a*vue<W&&A>1)throw new Error("recovery id is ambiguous for h>1 curve");const U=A===2||A===3?B+a:B;if(!i.isValid(U))throw new Error("recovery id 2 or 3 invalid");const P=i.toBytes(U),k=t.fromHex(El(lj((A&1)===0),P)),j=o.inv(U),z=v(Kr("msgHash",F)),K=o.create(-z*j),Q=o.create(I*j),Y=t.BASE.multiplyUnsafe(K).add(k.multiplyUnsafe(Q));if(Y.is0())throw new Error("point at infinify");return Y.assertValidity(),Y}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(F){if(F==="compact")return El(o.toBytes(this.r),o.toBytes(this.s));if(F==="der")return YA(ko.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return vg(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return vg(this.toBytes("compact"))}}const f=cj(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(R){try{return f(R),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const R=a;return rue(r(sj(R)),R)},precompute(R=8,F=t.BASE){return F.precompute(R,!1)}};function g(R,F=!0){return t.fromPrivateKey(R).toBytes(F)}function w(R){if(typeof R=="bigint")return!1;if(R instanceof t)return!0;const F=Kr("key",R).length,W=i.BYTES,B=W+1,I=2*W+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===B))return F===B||F===I}function y(R,F,W=!0){if(w(R)===!0)throw new Error("first arg must be private key");if(w(F)===!1)throw new Error("second arg must be public key");return t.fromHex(F).multiply(f(R)).toBytes(W)}const b=e.bits2int||function(R){if(R.length>8192)throw new Error("input is too large");const F=$v(R),W=R.length*8-c;return W>0?F>>BigInt(W):F},v=e.bits2int_modN||function(R){return o.create(b(R))},_=Dv(c);function E(R){return JC("num < 2^"+c,R,ap,_),o.toBytes(R)}function x(R,F,W=S){if(["recovered","canonical"].some(Y=>Y in W))throw new Error("sign() legacy options not supported");const{hash:B}=e;let{lowS:I,prehash:A,extraEntropy:U}=W;I==null&&(I=!0),R=Kr("msgHash",R),QP(W),A&&(R=Kr("prehashed msgHash",B(R)));const P=v(R),k=f(F),j=[E(k),E(P)];if(U!=null&&U!==!1){const Y=U===!0?r(i.BYTES):U;j.push(Kr("extraEntropy",Y))}const z=El(...j),K=P;function Q(Y){const Z=b(Y);if(!o.isValidNot0(Z))return;const se=o.inv(Z),Pe=t.BASE.multiply(Z).toAffine(),Oe=o.create(Pe.x);if(Oe===ap)return;const De=o.create(se*o.create(K+Oe*k));if(De===ap)return;let Ke=(Pe.x===Oe?0:2)|Number(Pe.y&cp),Zt=De;return I&&l(De)&&(Zt=u(De),Ke^=1),new h(Oe,Zt,Ke)}return{seed:z,k2sig:Q}}const S={lowS:e.lowS,prehash:!1},T={lowS:e.lowS,prehash:!1};function C(R,F,W=S){const{seed:B,k2sig:I}=x(R,F,W);return Kle(e.hash.outputLen,o.BYTES,s)(B,I)}t.BASE.precompute(8);function O(R,F,W,B=T){const I=R;F=Kr("msgHash",F),W=Kr("publicKey",W),QP(B);const{lowS:A,prehash:U,format:P}=B;if("strict"in B)throw new Error("options.strict was renamed to lowS");if(P!==void 0&&!["compact","der","js"].includes(P))throw new Error('format must be "compact", "der" or "js"');const k=typeof I=="string"||VA(I),j=!k&&!P&&typeof I=="object"&&I!==null&&typeof I.r=="bigint"&&typeof I.s=="bigint";if(!k&&!j)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let z,K;try{if(j)if(P===void 0||P==="js")z=new h(I.r,I.s);else throw new Error("invalid format");if(k){try{P!=="compact"&&(z=h.fromDER(I))}catch(Ke){if(!(Ke instanceof ko.Err))throw Ke}!z&&P!=="der"&&(z=h.fromCompact(I))}K=t.fromHex(W)}catch{return!1}if(!z||A&&z.hasHighS())return!1;U&&(F=e.hash(F));const{r:Q,s:Y}=z,Z=v(F),se=o.inv(Y),Pe=o.create(Z*se),Oe=o.create(Q*se),De=t.BASE.multiplyUnsafe(Pe).add(K.multiplyUnsafe(Oe));return De.is0()?!1:o.create(De.x)===Q}return Object.freeze({getPublicKey:g,getSharedSecret:y,sign:C,verify:O,utils:p,Point:t,Signature:h})}function xue(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=Uh(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function Sue(t){const{CURVE:e,curveOpts:n}=xue(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function Aue(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function Iue(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=Sue(t),s=_ue(e,n),i=Cue(s,r,n);return Aue(t,i)}function ZC(t,e){const n=r=>Iue({...t,hash:r});return{...n(e),create:n}}const uj={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},dj={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},hj={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Tue=Uh(uj.p),Nue=Uh(dj.p),Pue=Uh(hj.p),kue=ZC({...uj,Fp:Tue,lowS:!1},kv);ZC({...dj,Fp:Nue,lowS:!1},Mce),ZC({...hj,Fp:Pue,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Lce);const Oue=kue,fj="base10",Ir="base16",Ei="base64pad",Ba="base64url",ym="utf8",pj=0,Fo=1,wm=2,Rue=0,ZP=1,lp=12,tI=32;function $ue(){const t=QC.utils.randomPrivateKey(),e=QC.getPublicKey(t);return{privateKey:ss(t,Ir),publicKey:ss(e,Ir)}}function XC(){const t=Dh(tI);return ss(t,Ir)}function Due(t,e){const n=QC.getSharedSecret(qs(t,Ir),qs(e,Ir)),r=Hle(Rv,n,void 0,void 0,tI);return ss(r,Ir)}function uw(t){const e=Rv(qs(t,Ir));return ss(e,Ir)}function Yi(t){const e=Rv(qs(t,ym));return ss(e,Ir)}function gj(t){return qs(`${t}`,fj)}function ou(t){return Number(ss(t,fj))}function mj(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function yj(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function Uue(t){const e=gj(typeof t.type<"u"?t.type:pj);if(ou(e)===Fo&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?qs(t.senderPublicKey,Ir):void 0,r=typeof t.iv<"u"?qs(t.iv,Ir):Dh(lp),s=qs(t.symKey,Ir),i=YU(s,r).encrypt(qs(t.message,ym)),o=wj({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===Ba?mj(o):o}function jue(t){const e=qs(t.symKey,Ir),{sealed:n,iv:r}=Eg({encoded:t.encoded,encoding:t.encoding}),s=YU(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return ss(s,ym)}function Lue(t,e){const n=gj(wm),r=Dh(lp),s=qs(t,ym),i=wj({type:n,sealed:s,iv:r});return e===Ba?mj(i):i}function Mue(t,e){const{sealed:n}=Eg({encoded:t,encoding:e});return ss(n,ym)}function wj(t){if(ou(t.type)===wm)return ss(ip([t.type,t.sealed]),Ei);if(ou(t.type)===Fo){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ss(ip([t.type,t.senderPublicKey,t.iv,t.sealed]),Ei)}return ss(ip([t.type,t.iv,t.sealed]),Ei)}function Eg(t){const e=(t.encoding||Ei)===Ba?yj(t.encoded):t.encoded,n=qs(e,Ei),r=n.slice(Rue,ZP),s=ZP;if(ou(r)===Fo){const c=s+tI,l=c+lp,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(ou(r)===wm){const c=n.slice(s),l=Dh(lp);return{type:r,sealed:c,iv:l}}const i=s+lp,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function Bue(t,e){const n=Eg({encoded:t,encoding:e==null?void 0:e.encoding});return vj({type:ou(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?ss(n.senderPublicKey,Ir):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function vj(t){const e=(t==null?void 0:t.type)||pj;if(e===Fo){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function XP(t){return t.type===Fo&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function ek(t){return t.type===wm}function Fue(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return ip([new Uint8Array([4]),e,n])}function zue(t,e){const[n,r,s]=t.split("."),i=Buffer.from(yj(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=Rv(c),u=Fue(e);if(!Oue.verify(ip([o,a]),l,u))throw new Error("Invalid signature");return DC(t).payload}const Wue="irn";function g0(t){return(t==null?void 0:t.relay)||{protocol:Wue}}function Bf(t){const e=wae[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function que(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function tk(t){if(!t.includes("wc:")){const l=PU(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:Hue(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:que(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function Hue(t){return t.startsWith("//")?t.substring(2):t}function Vue(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function nk(t){const e=new URLSearchParams,n=Vue(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function Sy(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var Gue=Object.defineProperty,Kue=Object.defineProperties,Yue=Object.getOwnPropertyDescriptors,rk=Object.getOwnPropertySymbols,Jue=Object.prototype.hasOwnProperty,Que=Object.prototype.propertyIsEnumerable,sk=(t,e,n)=>e in t?Gue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zue=(t,e)=>{for(var n in e||(e={}))Jue.call(e,n)&&sk(t,n,e[n]);if(rk)for(var n of rk(e))Que.call(e,n)&&sk(t,n,e[n]);return t},Xue=(t,e)=>Kue(t,Yue(e));function jh(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function ede(t){const e=[];return Object.values(t).forEach(n=>{e.push(...jh(n.accounts))}),e}function tde(t,e){const n=[];return Object.values(t).forEach(r=>{jh(r.accounts).includes(e)&&n.push(...r.methods)}),n}function nde(t,e){const n=[];return Object.values(t).forEach(r=>{jh(r.accounts).includes(e)&&n.push(...r.events)}),n}function jv(t){return t.includes(":")}function Ed(t){return jv(t)?t.split(":")[0]:t}function ik(t){var e,n,r;const s={};if(!_c(t))return s;for(const[i,o]of Object.entries(t)){const a=jv(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=Ed(i);s[u]=Xue(Zue({},s[u]),{chains:so(a,(e=s[u])==null?void 0:e.chains),methods:so(c,(n=s[u])==null?void 0:n.methods),events:so(l,(r=s[u])==null?void 0:r.events)})}return s}function rde(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function ok(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=rde(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=so(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function sde(t,e){var n,r,s,i,o,a;const c=ik(t),l=ik(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:so((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:so((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:so((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const ide={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},ode={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ae(t,e){const{message:n,code:r}=ode[t];return{message:e?`${n} ${e}`:n,code:r}}function qt(t,e){const{message:n,code:r}=ide[t];return{message:e?`${n} ${e}`:n,code:r}}function zo(t,e){return!!Array.isArray(t)}function _c(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Vn(t){return typeof t>"u"}function pn(t,e){return e&&Vn(t)?!0:typeof t=="string"&&!!t.trim().length}function nI(t,e){return e&&Vn(t)?!0:typeof t=="number"&&!isNaN(t)}function ade(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return bl(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=jh(a),d=n[o];(!bl(SU(o,d),u)||!bl(d.methods,c)||!bl(d.events,l))&&(i=!1)}),i):!1}function m0(t){return pn(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function cde(t){if(pn(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&m0(n)}}return!1}function lde(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(pn(t,!1)){if(e(t))return!0;const n=PU(t);return e(n)}}catch{}return!1}function ude(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function dde(t){return t==null?void 0:t.topic}function hde(t,e){let n=null;return pn(t==null?void 0:t.publicKey,!1)||(n=ae("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function ak(t){let e=!0;return zo(t)?t.length&&(e=t.every(n=>pn(n,!1))):e=!1,e}function fde(t,e,n){let r=null;return zo(e)&&e.length?e.forEach(s=>{r||m0(s)||(r=qt("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):m0(t)||(r=qt("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function pde(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=fde(s,SU(s,i),`${e} ${n}`);o&&(r=o)}),r}function gde(t,e){let n=null;return zo(t)?t.forEach(r=>{n||cde(r)||(n=qt("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=qt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function mde(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=gde(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function yde(t,e){let n=null;return ak(t==null?void 0:t.methods)?ak(t==null?void 0:t.events)||(n=qt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=qt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function bj(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=yde(r,`${e}, namespace`);s&&(n=s)}),n}function wde(t,e,n){let r=null;if(t&&_c(t)){const s=bj(t,e);s&&(r=s);const i=pde(t,e,n);i&&(r=i)}else r=ae("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function J1(t,e){let n=null;if(t&&_c(t)){const r=bj(t,e);r&&(n=r);const s=mde(t,e);s&&(n=s)}else n=ae("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function Ej(t){return pn(t.protocol,!0)}function vde(t,e){let n=!1;return t?t&&zo(t)&&t.length&&t.forEach(r=>{n=Ej(r)}):n=!0,n}function bde(t){return typeof t=="number"}function Wr(t){return typeof t<"u"&&typeof t!==null}function Ede(t){return!(!t||typeof t!="object"||!t.code||!nI(t.code,!1)||!t.message||!pn(t.message,!1))}function _de(t){return!(Vn(t)||!pn(t.method,!1))}function Cde(t){return!(Vn(t)||Vn(t.result)&&Vn(t.error)||!nI(t.id,!1)||!pn(t.jsonrpc,!1))}function xde(t){return!(Vn(t)||!pn(t.name,!1))}function ck(t,e){return!(!m0(e)||!ede(t).includes(e))}function Sde(t,e,n){return pn(n,!1)?tde(t,e).includes(n):!1}function Ade(t,e,n){return pn(n,!1)?nde(t,e).includes(n):!1}function lk(t,e,n){let r=null;const s=Ide(t),i=Tde(e),o=Object.keys(s),a=Object.keys(i),c=uk(Object.keys(t)),l=uk(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=ae("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),bl(o,a)||(r=ae("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=jh(e[d].accounts);h.includes(d)||(r=ae("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(bl(s[d].methods,i[d].methods)?bl(s[d].events,i[d].events)||(r=ae("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=ae("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function Ide(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function uk(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Tde(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=jh(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function Nde(t,e){return nI(t,!1)&&t<=e.max&&t>=e.min}function dk(){const t=gm();return new Promise(e=>{switch(t){case ws.browser:e(Pde());break;case ws.reactNative:e(kde());break;case ws.node:e(Ode());break;default:e(!0)}})}function Pde(){return $h()&&(navigator==null?void 0:navigator.onLine)}async function kde(){if(zc()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function Ode(){return!0}function Rde(t){switch(gm()){case ws.browser:$de(t);break;case ws.reactNative:Dde(t);break}}function $de(t){!zc()&&$h()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function Dde(t){zc()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function Ude(){var t;return $h()&&ru()?((t=ru())==null?void 0:t.visibilityState)==="visible":!0}const Q1={};class yf{static get(e){return Q1[e]}static set(e,n){Q1[e]=n}static delete(e){delete Q1[e]}}function jde(t){const e=Rh.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function Lde({publicKey:t,signature:e,payload:n}){var r;const s=ex(n.method),i=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),o=Fde(n.address),a=n.era==="00"?new Uint8Array([0]):ex(n.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),l=new Uint8Array([c&255,c>>8&255]),u=BigInt(`0x${Bde(n.tip)}`),d=Wde(u),h=new Uint8Array([0,...t,o,...e,...a,...l,...d,...s]),f=zde(h.length+1);return new Uint8Array([...f,i,...h])}function Mde(t){const e=ex(t),n=Pae.blake2b(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function ex(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function Bde(t){return t.startsWith("0x")?t.slice(2):t}function Fde(t){const e=Rh.decode(t)[0];return e===42?0:e===60?2:1}function zde(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function Wde(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function qde(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=jde(t.transaction.address),r=Lde({publicKey:n,signature:e,payload:t.transaction}),s=Buffer.from(r).toString("hex");return Mde(s)}const Hde="PARSE_ERROR",Vde="INVALID_REQUEST",Gde="METHOD_NOT_FOUND",Kde="INVALID_PARAMS",_j="INTERNAL_ERROR",rI="SERVER_ERROR",Yde=[-32700,-32600,-32601,-32602,-32603],up={[Hde]:{code:-32700,message:"Parse error"},[Vde]:{code:-32600,message:"Invalid Request"},[Gde]:{code:-32601,message:"Method not found"},[Kde]:{code:-32602,message:"Invalid params"},[_j]:{code:-32603,message:"Internal error"},[rI]:{code:-32e3,message:"Server error"}},Cj=rI;function Jde(t){return Yde.includes(t)}function hk(t){return Object.keys(up).includes(t)?up[t]:up[Cj]}function Qde(t){const e=Object.values(up).find(n=>n.code===t);return e||up[Cj]}function xj(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var Sj={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var tx=function(t,e){return tx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},tx(t,e)};function Zde(t,e){tx(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var nx=function(){return nx=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},nx.apply(this,arguments)};function Xde(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function ehe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function the(t,e){return function(n,r){e(n,r,t)}}function nhe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function rhe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function she(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function ihe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function ohe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function rx(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Aj(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function ahe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Aj(arguments[e]));return t}function che(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function _g(t){return this instanceof _g?(this.v=t,this):new _g(t)}function lhe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof _g?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function uhe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:_g(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function dhe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof rx=="function"?rx(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function hhe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function fhe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function phe(t){return t&&t.__esModule?t:{default:t}}function ghe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function mhe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const yhe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return nx},__asyncDelegator:uhe,__asyncGenerator:lhe,__asyncValues:dhe,__await:_g,__awaiter:rhe,__classPrivateFieldGet:ghe,__classPrivateFieldSet:mhe,__createBinding:ihe,__decorate:ehe,__exportStar:ohe,__extends:Zde,__generator:she,__importDefault:phe,__importStar:fhe,__makeTemplateObject:hhe,__metadata:nhe,__param:the,__read:Aj,__rest:Xde,__spread:ahe,__spreadArrays:che,__values:rx},Symbol.toStringTag,{value:"Module"})),whe=P0(yhe);var Eo={},fk;function vhe(){if(fk)return Eo;fk=1,Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.isBrowserCryptoAvailable=Eo.getSubtleCrypto=Eo.getBrowerCrypto=void 0;function t(){return(rn==null?void 0:rn.crypto)||(rn==null?void 0:rn.msCrypto)||{}}Eo.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}Eo.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return Eo.isBrowserCryptoAvailable=n,Eo}var _o={},pk;function bhe(){if(pk)return _o;pk=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.isBrowser=_o.isNode=_o.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}_o.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}_o.isNode=e;function n(){return!t()&&!e()}return _o.isBrowser=n,_o}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=whe;e.__exportStar(vhe(),t),e.__exportStar(bhe(),t)})(Sj);function zi(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function xl(t=6){return BigInt(zi(t))}function ic(t,e,n){return{id:n||zi(),jsonrpc:"2.0",method:t,params:e}}function Lv(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Mv(t,e,n){return{id:t,jsonrpc:"2.0",error:Ehe(e)}}function Ehe(t,e){return typeof t>"u"?hk(_j):(typeof t=="string"&&(t=Object.assign(Object.assign({},hk(rI)),{message:t})),Jde(t.code)&&(t=Qde(t.code)),t)}let _he=class{},Che=class extends _he{constructor(){super()}},xhe=class extends Che{constructor(e){super()}};const She="^https?:",Ahe="^wss?:";function Ihe(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Ij(t,e){const n=Ihe(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function gk(t){return Ij(t,She)}function mk(t){return Ij(t,Ahe)}function The(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function Tj(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function sI(t){return Tj(t)&&"method"in t}function Bv(t){return Tj(t)&&(Wi(t)||Ms(t))}function Wi(t){return"result"in t}function Ms(t){return"error"in t}let Zs=class extends xhe{constructor(e){super(e),this.events=new Qs.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(ic(e.method,e.params||[],e.id||xl().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Ms(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Bv(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const Nhe=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Phe=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",yk=t=>t.split("?")[0],wk=10,khe=Nhe();let Ohe=class{constructor(e){if(this.url=e,this.events=new Qs.EventEmitter,this.registering=!1,!mk(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Zo(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!mk(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=Sj.isReactNative()?void 0:{rejectUnauthorized:!The(e)},i=new khe(e,[],s);Phe()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?nu(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=Mv(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return xj(e,yk(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>wk&&this.events.setMaxListeners(wk)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${yk(this.url)}`));return this.events.emit("register_error",n),n}};var Rhe={};const Nj="wc",Pj=2,sx="core",ao=`${Nj}@2:${sx}:`,$he={logger:"error"},Dhe={database:":memory:"},Uhe="crypto",vk="client_ed25519_seed",jhe=oe.ONE_DAY,Lhe="keychain",Mhe="0.3",Bhe="messages",Fhe="0.3",bk=oe.SIX_HOURS,zhe="publisher",kj="irn",Whe="error",Oj="wss://relay.walletconnect.org",qhe="relayer",kn={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Hhe="_subscription",Rs={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Vhe=.1,ix="2.21.3",Ft={link_mode:"link_mode",relay:"relay"},dw={inbound:"inbound",outbound:"outbound"},Ghe="0.3",Khe="WALLETCONNECT_CLIENT_ID",Ek="WALLETCONNECT_LINK_MODE_APPS",hs={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Yhe="subscription",Jhe="0.3",Qhe="pairing",Zhe="0.3",wf={wc_pairingDelete:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:oe.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:oe.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:oe.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:0},res:{ttl:oe.ONE_DAY,prompt:!1,tag:0}}},dl={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},ri={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Xhe="history",efe="0.3",tfe="expirer",js={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},nfe="0.3",rfe="verify-api",sfe="https://verify.walletconnect.com",Rj="https://verify.walletconnect.org",dp=Rj,ife=`${dp}/v3`,ofe=[sfe,Rj],afe="echo",cfe="https://echo.walletconnect.com",Bi={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},So={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},si={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},el={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},tl={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},vf={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},lfe=.1,ufe="event-client",dfe=86400,hfe="https://pulse.walletconnect.org/batch";function ffe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var v=(b-y)*u+1>>>0,_=new Uint8Array(v);y!==b;){for(var E=p[y],x=0,S=v-1;(E!==0||x<w)&&S!==-1;S--,x++)E+=256*_[S]>>>0,_[S]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");w=x,y++}for(var T=v-w;T!==v&&_[T]===0;)T++;for(var C=c.repeat(g);T<v;++T)C+=t.charAt(_[T]);return C}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var E=0,x=b-1;(_!==0||E<y)&&x!==-1;x--,E++)_+=a*v[x]>>>0,v[x]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");y=E,g++}if(p[g]!==" "){for(var S=b-y;S!==b&&v[S]===0;)S++;for(var T=new Uint8Array(w+(b-S)),C=w;S!==b;)T[C++]=v[S++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var pfe=ffe,gfe=pfe;const $j=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},mfe=t=>new TextEncoder().encode(t),yfe=t=>new TextDecoder().decode(t);class wfe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class vfe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Dj(this,e)}}class bfe{constructor(e){this.decoders=e}or(e){return Dj(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Dj=(t,e)=>new bfe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Efe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new wfe(e,n,r),this.decoder=new vfe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Fv=({name:t,prefix:e,encode:n,decode:r})=>new Efe(t,e,n,r),vm=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=gfe(n,e);return Fv({prefix:t,name:e,encode:r,decode:i=>$j(s(i))})},_fe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Cfe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},er=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Fv({prefix:e,name:t,encode(s){return Cfe(s,r,n)},decode(s){return _fe(s,r,n,t)}}),xfe=Fv({prefix:"\0",name:"identity",encode:t=>yfe(t),decode:t=>mfe(t)});var Sfe=Object.freeze({__proto__:null,identity:xfe});const Afe=er({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Ife=Object.freeze({__proto__:null,base2:Afe});const Tfe=er({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Nfe=Object.freeze({__proto__:null,base8:Tfe});const Pfe=vm({prefix:"9",name:"base10",alphabet:"0123456789"});var kfe=Object.freeze({__proto__:null,base10:Pfe});const Ofe=er({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Rfe=er({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var $fe=Object.freeze({__proto__:null,base16:Ofe,base16upper:Rfe});const Dfe=er({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ufe=er({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),jfe=er({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Lfe=er({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Mfe=er({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Bfe=er({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Ffe=er({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),zfe=er({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Wfe=er({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var qfe=Object.freeze({__proto__:null,base32:Dfe,base32upper:Ufe,base32pad:jfe,base32padupper:Lfe,base32hex:Mfe,base32hexupper:Bfe,base32hexpad:Ffe,base32hexpadupper:zfe,base32z:Wfe});const Hfe=vm({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Vfe=vm({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Gfe=Object.freeze({__proto__:null,base36:Hfe,base36upper:Vfe});const Kfe=vm({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Yfe=vm({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Jfe=Object.freeze({__proto__:null,base58btc:Kfe,base58flickr:Yfe});const Qfe=er({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Zfe=er({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Xfe=er({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),epe=er({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var tpe=Object.freeze({__proto__:null,base64:Qfe,base64pad:Zfe,base64url:Xfe,base64urlpad:epe});const Uj=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),npe=Uj.reduce((t,e,n)=>(t[n]=e,t),[]),rpe=Uj.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function spe(t){return t.reduce((e,n)=>(e+=npe[n],e),"")}function ipe(t){const e=[];for(const n of t){const r=rpe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const ope=Fv({prefix:"🚀",name:"base256emoji",encode:spe,decode:ipe});var ape=Object.freeze({__proto__:null,base256emoji:ope}),cpe=jj,_k=128,lpe=-128,upe=Math.pow(2,31);function jj(t,e,n){e=e||[],n=n||0;for(var r=n;t>=upe;)e[n++]=t&255|_k,t/=128;for(;t&lpe;)e[n++]=t&255|_k,t>>>=7;return e[n]=t|0,jj.bytes=n-r+1,e}var dpe=ox,hpe=128,Ck=127;function ox(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw ox.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&Ck)<<s:(o&Ck)*Math.pow(2,s),s+=7}while(o>=hpe);return ox.bytes=i-r,n}var fpe=Math.pow(2,7),ppe=Math.pow(2,14),gpe=Math.pow(2,21),mpe=Math.pow(2,28),ype=Math.pow(2,35),wpe=Math.pow(2,42),vpe=Math.pow(2,49),bpe=Math.pow(2,56),Epe=Math.pow(2,63),_pe=function(t){return t<fpe?1:t<ppe?2:t<gpe?3:t<mpe?4:t<ype?5:t<wpe?6:t<vpe?7:t<bpe?8:t<Epe?9:10},Cpe={encode:cpe,decode:dpe,encodingLength:_pe},Lj=Cpe;const xk=(t,e,n=0)=>(Lj.encode(t,e,n),e),Sk=t=>Lj.encodingLength(t),ax=(t,e)=>{const n=e.byteLength,r=Sk(t),s=r+Sk(n),i=new Uint8Array(s+n);return xk(t,i,0),xk(n,i,r),i.set(e,s),new xpe(t,n,e,i)};class xpe{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const Mj=({name:t,code:e,encode:n})=>new Spe(t,e,n);class Spe{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?ax(this.code,n):n.then(r=>ax(this.code,r))}else throw Error("Unknown type, must be binary type")}}const Bj=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Ape=Mj({name:"sha2-256",code:18,encode:Bj("SHA-256")}),Ipe=Mj({name:"sha2-512",code:19,encode:Bj("SHA-512")});var Tpe=Object.freeze({__proto__:null,sha256:Ape,sha512:Ipe});const Fj=0,Npe="identity",zj=$j,Ppe=t=>ax(Fj,zj(t)),kpe={code:Fj,name:Npe,encode:zj,digest:Ppe};var Ope=Object.freeze({__proto__:null,identity:kpe});new TextEncoder,new TextDecoder;const Ak={...Sfe,...Ife,...Nfe,...kfe,...$fe,...qfe,...Gfe,...Jfe,...tpe,...ape};({...Tpe,...Ope});function Wj(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Rpe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Wj(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function qj(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Ik=qj("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Z1=qj("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=Rpe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),$pe={utf8:Ik,"utf-8":Ik,hex:Ak.base16,latin1:Z1,ascii:Z1,binary:Z1,...Ak};function Dpe(t,e="utf8"){const n=$pe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Wj(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var Upe=Object.defineProperty,jpe=(t,e,n)=>e in t?Upe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Li=(t,e,n)=>jpe(t,typeof e!="symbol"?e+"":e,n);class Lpe{constructor(e,n){this.core=e,this.logger=n,Li(this,"keychain",new Map),Li(this,"name",Lhe),Li(this,"version",Mhe),Li(this,"initialized",!1),Li(this,"storagePrefix",ao),Li(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),Li(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),Li(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),Li(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=ae("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),Li(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=gr(n,this.name)}get context(){return os(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,zC(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?WC(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Mpe=Object.defineProperty,Bpe=(t,e,n)=>e in t?Mpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zn=(t,e,n)=>Bpe(t,typeof e!="symbol"?e+"":e,n);class Fpe{constructor(e,n,r){this.core=e,this.logger=n,zn(this,"name",Uhe),zn(this,"keychain"),zn(this,"randomSessionIdentifier",XC()),zn(this,"initialized",!1),zn(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),zn(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),zn(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=oP(s);return z6(i.publicKey)}),zn(this,"generateKeyPair",()=>{this.isInitialized();const s=$ue();return this.setPrivateKey(s.publicKey,s.privateKey)}),zn(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=oP(i),a=this.randomSessionIdentifier;return await Bse(a,s,jhe,o)}),zn(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=Due(a,i);return this.setSymKey(c,o)}),zn(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||uw(s);return await this.keychain.set(o,s),o}),zn(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),zn(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),zn(this,"encode",async(s,i,o)=>{this.isInitialized();const a=vj(o),c=Zo(i);if(ek(a))return Lue(c,o==null?void 0:o.encoding);if(XP(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return Uue({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),zn(this,"decode",async(s,i,o)=>{this.isInitialized();const a=Bue(i,o);if(ek(a)){const c=Mue(i,o==null?void 0:o.encoding);return nu(c)}if(XP(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=jue({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return nu(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),zn(this,"getPayloadType",(s,i=Ei)=>{const o=Eg({encoded:s,encoding:i});return ou(o.type)}),zn(this,"getPayloadSenderPublicKey",(s,i=Ei)=>{const o=Eg({encoded:s,encoding:i});return o.senderPublicKey?ss(o.senderPublicKey,Ir):void 0}),this.core=e,this.logger=gr(n,this.name),this.keychain=r||new Lpe(this.core,this.logger)}get context(){return os(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(vk)}catch{e=XC(),await this.keychain.set(vk,e)}return Dpe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}var zpe=Object.defineProperty,Wpe=Object.defineProperties,qpe=Object.getOwnPropertyDescriptors,Tk=Object.getOwnPropertySymbols,Hpe=Object.prototype.hasOwnProperty,Vpe=Object.prototype.propertyIsEnumerable,cx=(t,e,n)=>e in t?zpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gpe=(t,e)=>{for(var n in e||(e={}))Hpe.call(e,n)&&cx(t,n,e[n]);if(Tk)for(var n of Tk(e))Vpe.call(e,n)&&cx(t,n,e[n]);return t},Kpe=(t,e)=>Wpe(t,qpe(e)),ls=(t,e,n)=>cx(t,typeof e!="symbol"?e+"":e,n);class Ype extends Lte{constructor(e,n){super(e,n),this.logger=e,this.core=n,ls(this,"messages",new Map),ls(this,"messagesWithoutClientAck",new Map),ls(this,"name",Bhe),ls(this,"version",Fhe),ls(this,"initialized",!1),ls(this,"storagePrefix",ao),ls(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),ls(this,"set",async(r,s,i)=>{this.isInitialized();const o=Yi(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===dw.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,Kpe(Gpe({},c),{[o]:s}))}return await this.persist(),o}),ls(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),ls(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),ls(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Yi(s);return typeof i[o]<"u"}),ls(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Yi(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),ls(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=gr(e,this.name),this.core=n}get context(){return os(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,zC(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,zC(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?WC(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?WC(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Jpe=Object.defineProperty,Qpe=Object.defineProperties,Zpe=Object.getOwnPropertyDescriptors,Nk=Object.getOwnPropertySymbols,Xpe=Object.prototype.hasOwnProperty,ege=Object.prototype.propertyIsEnumerable,lx=(t,e,n)=>e in t?Jpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ay=(t,e)=>{for(var n in e||(e={}))Xpe.call(e,n)&&lx(t,n,e[n]);if(Nk)for(var n of Nk(e))ege.call(e,n)&&lx(t,n,e[n]);return t},X1=(t,e)=>Qpe(t,Zpe(e)),ii=(t,e,n)=>lx(t,typeof e!="symbol"?e+"":e,n);class tge extends Mte{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,ii(this,"events",new Qs.EventEmitter),ii(this,"name",zhe),ii(this,"queue",new Map),ii(this,"publishTimeout",oe.toMiliseconds(oe.ONE_MINUTE)),ii(this,"initialPublishTimeout",oe.toMiliseconds(oe.ONE_SECOND*15)),ii(this,"needsTransportRestart",!1),ii(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||bk,c=g0(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||xl().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const w=({id:b})=>{h.opts.id===b&&(this.removeRequestFromQueue(b),this.relayer.events.removeListener(kn.publish,w),g(h))};this.relayer.events.on(kn.publish,w);const y=sc(new Promise((b,v)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(b).catch(_=>{this.logger.warn(_,_==null?void 0:_.message),v(_)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await y,this.events.removeListener(kn.publish,w)}catch(b){this.queue.set(d,X1(Ay({},h),{attempt:1})),this.logger.warn(b,b==null?void 0:b.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await sc(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),ii(this,"on",(r,s)=>{this.events.on(r,s)}),ii(this,"once",(r,s)=>{this.events.once(r,s)}),ii(this,"off",(r,s)=>{this.events.off(r,s)}),ii(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=gr(n,this.name),this.registerEventListeners()}get context(){return os(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=bk,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:Bf(g0().protocol).publish,params:Ay({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};Vn((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),Vn((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(kn.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,X1(Ay({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(X1(Ay({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(bu.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(kn.connection_stalled);return}this.checkQueue()}),this.relayer.on(kn.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var nge=Object.defineProperty,rge=(t,e,n)=>e in t?nge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mu=(t,e,n)=>rge(t,typeof e!="symbol"?e+"":e,n);class sge{constructor(){Mu(this,"map",new Map),Mu(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),Mu(this,"get",e=>this.map.get(e)||[]),Mu(this,"exists",(e,n)=>this.get(e).includes(n)),Mu(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Mu(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var ige=Object.defineProperty,oge=Object.defineProperties,age=Object.getOwnPropertyDescriptors,Pk=Object.getOwnPropertySymbols,cge=Object.prototype.hasOwnProperty,lge=Object.prototype.propertyIsEnumerable,ux=(t,e,n)=>e in t?ige(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bf=(t,e)=>{for(var n in e||(e={}))cge.call(e,n)&&ux(t,n,e[n]);if(Pk)for(var n of Pk(e))lge.call(e,n)&&ux(t,n,e[n]);return t},eE=(t,e)=>oge(t,age(e)),Tt=(t,e,n)=>ux(t,typeof e!="symbol"?e+"":e,n);class uge extends zte{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Tt(this,"subscriptions",new Map),Tt(this,"topicMap",new sge),Tt(this,"events",new Qs.EventEmitter),Tt(this,"name",Yhe),Tt(this,"version",Jhe),Tt(this,"pending",new Map),Tt(this,"cached",[]),Tt(this,"initialized",!1),Tt(this,"storagePrefix",ao),Tt(this,"subscribeTimeout",oe.toMiliseconds(oe.ONE_MINUTE)),Tt(this,"initialSubscribeTimeout",oe.toMiliseconds(oe.ONE_SECOND*15)),Tt(this,"clientId"),Tt(this,"batchSubscribeTopicsLimit",500),Tt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Tt(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=g0(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),Tt(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),Tt(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),Tt(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),Tt(this,"on",(r,s)=>{this.events.on(r,s)}),Tt(this,"once",(r,s)=>{this.events.once(r,s)}),Tt(this,"off",(r,s)=>{this.events.off(r,s)}),Tt(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),Tt(this,"start",async()=>{await this.onConnect()}),Tt(this,"stop",async()=>{await this.onDisconnect()}),Tt(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Tt(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),Tt(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(bu.pulse,async()=>{await this.checkPending()}),this.events.on(hs.created,async r=>{const s=hs.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(hs.deleted,async r=>{const s=hs.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=gr(n,this.name),this.clientId=""}get context(){return os(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=g0(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=qt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===Ft.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:Bf(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===Ft.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},oe.toMiliseconds(oe.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(hs.created,d),u(h.id))};this.events.on(hs.created,d);try{const h=await sc(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(hs.created,d),u(h)}catch{}}),l=await sc(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(kn.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:Bf(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await sc(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(kn.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:Bf(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await sc(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(kn.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:Bf(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,eE(bf({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,bf({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,bf({},n)),this.topicMap.set(n.topic,e),this.events.emit(hs.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=ae("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(hs.deleted,eE(bf({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(hs.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(hs.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=ae("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>eE(bf({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await rce(oe.toMiliseconds(oe.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Yi(e+await this.getClientId())}}var dge=Object.defineProperty,kk=Object.getOwnPropertySymbols,hge=Object.prototype.hasOwnProperty,fge=Object.prototype.propertyIsEnumerable,dx=(t,e,n)=>e in t?dge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ok=(t,e)=>{for(var n in e||(e={}))hge.call(e,n)&&dx(t,n,e[n]);if(kk)for(var n of kk(e))fge.call(e,n)&&dx(t,n,e[n]);return t},ct=(t,e,n)=>dx(t,typeof e!="symbol"?e+"":e,n);class pge extends Bte{constructor(e){super(e),ct(this,"protocol","wc"),ct(this,"version",2),ct(this,"core"),ct(this,"logger"),ct(this,"events",new Qs.EventEmitter),ct(this,"provider"),ct(this,"messages"),ct(this,"subscriber"),ct(this,"publisher"),ct(this,"name",qhe),ct(this,"transportExplicitlyClosed",!1),ct(this,"initialized",!1),ct(this,"connectionAttemptInProgress",!1),ct(this,"relayUrl"),ct(this,"projectId"),ct(this,"packageName"),ct(this,"bundleId"),ct(this,"hasExperiencedNetworkDisruption",!1),ct(this,"pingTimeout"),ct(this,"heartBeatTimeout",oe.toMiliseconds(oe.THIRTY_SECONDS+oe.FIVE_SECONDS)),ct(this,"reconnectTimeout"),ct(this,"connectPromise"),ct(this,"reconnectInProgress",!1),ct(this,"requestsInFlight",[]),ct(this,"connectTimeout",oe.toMiliseconds(oe.ONE_SECOND*15)),ct(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||xl().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),ct(this,"resetPingTimeout",()=>{d0()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),ct(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),ct(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(kn.connect)}),ct(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),ct(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(kn.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),ct(this,"registerProviderListeners",()=>{this.provider.on(Rs.payload,this.onPayloadHandler),this.provider.on(Rs.connect,this.onConnectHandler),this.provider.on(Rs.disconnect,this.onDisconnectHandler),this.provider.on(Rs.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?gr(e.logger,this.name):dm(Th({level:e.logger||Whe})),this.messages=new Ype(this.logger,e.core),this.subscriber=new uge(this,this.logger),this.publisher=new tge(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Oj,this.projectId=e.projectId,Fae()?this.packageName=EP():zae()&&(this.bundleId=EP()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e==null?void 0:e.message))}get context(){return os(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:Ft.relay},dw.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(hs.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(hs.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,Ok({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await sc(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await dk())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=wn(oe.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(kn.message,e),await this.recordMessageEvent(e,dw.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(Rs.disconnect,i),await sc(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Rs.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Rs.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Rs.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,oe.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(d0())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Zs(new Ohe(Gae({sdkVersion:ix,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),sI(e)){if(!e.method.endsWith(Hhe))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:Ft.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Ok({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else Bv(e)&&this.events.emit(kn.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,dw.inbound),this.events.emit(kn.message,e))}async acknowledgePayload(e){const n=Lv(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Rs.payload,this.onPayloadHandler),this.provider.off(Rs.connect,this.onConnectHandler),this.provider.off(Rs.disconnect,this.onDisconnectHandler),this.provider.off(Rs.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await dk();Rde(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(bu.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&Ude())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(kn.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},oe.toMiliseconds(Vhe)))))}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function gge(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function Rk(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function $k(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const mge="[object RegExp]",yge="[object String]",wge="[object Number]",vge="[object Boolean]",Dk="[object Arguments]",bge="[object Symbol]",Ege="[object Date]",_ge="[object Map]",Cge="[object Set]",xge="[object Array]",Sge="[object Function]",Age="[object ArrayBuffer]",tE="[object Object]",Ige="[object Error]",Tge="[object DataView]",Nge="[object Uint8Array]",Pge="[object Uint8ClampedArray]",kge="[object Uint16Array]",Oge="[object Uint32Array]",Rge="[object BigUint64Array]",$ge="[object Int8Array]",Dge="[object Int16Array]",Uge="[object Int32Array]",jge="[object BigInt64Array]",Lge="[object Float32Array]",Mge="[object Float64Array]";function Bge(){}function Uk(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function Fge(t,e,n){return Ff(t,e,void 0,void 0,void 0,void 0,n)}function Ff(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return hp(t,e,i,o)}return hp(t,e,i,o)}function hp(t,e,n,r){if(Object.is(t,e))return!0;let s=$k(t),i=$k(e);if(s===Dk&&(s=tE),i===Dk&&(i=tE),s!==i)return!1;switch(s){case yge:return t.toString()===e.toString();case wge:{const c=t.valueOf(),l=e.valueOf();return gge(c,l)}case vge:case Ege:case bge:return Object.is(t.valueOf(),e.valueOf());case mge:return t.source===e.source&&t.flags===e.flags;case Sge:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case _ge:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!Ff(l,e.get(c),c,t,e,n,r))return!1;return!0}case Cge:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>Ff(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case xge:case Nge:case Pge:case kge:case Oge:case Rge:case $ge:case Dge:case Uge:case jge:case Lge:case Mge:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!Ff(t[c],e[c],c,t,e,n,r))return!1;return!0}case Age:return t.byteLength!==e.byteLength?!1:hp(new Uint8Array(t),new Uint8Array(e),n,r);case Tge:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:hp(new Uint8Array(t),new Uint8Array(e),n,r);case Ige:return t.name===e.name&&t.message===e.message;case tE:{if(!(hp(t.constructor,e.constructor,n,r)||Uk(t)&&Uk(e)))return!1;const c=[...Object.keys(t),...Rk(t)],l=[...Object.keys(e),...Rk(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!Ff(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function zge(t,e){return Fge(t,e,Bge)}var Wge=Object.defineProperty,jk=Object.getOwnPropertySymbols,qge=Object.prototype.hasOwnProperty,Hge=Object.prototype.propertyIsEnumerable,hx=(t,e,n)=>e in t?Wge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lk=(t,e)=>{for(var n in e||(e={}))qge.call(e,n)&&hx(t,n,e[n]);if(jk)for(var n of jk(e))Hge.call(e,n)&&hx(t,n,e[n]);return t},Lr=(t,e,n)=>hx(t,typeof e!="symbol"?e+"":e,n);class Cu extends Fte{constructor(e,n,r,s=ao,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Lr(this,"map",new Map),Lr(this,"version",Ghe),Lr(this,"cached",[]),Lr(this,"initialized",!1),Lr(this,"getKey"),Lr(this,"storagePrefix",ao),Lr(this,"recentlyDeleted",[]),Lr(this,"recentlyDeletedLimit",200),Lr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Vn(o)?this.map.set(this.getKey(o),o):ude(o)?this.map.set(o.id,o):dde(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Lr(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Lr(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Lr(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>zge(a[c],o[c]))):this.values)),Lr(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=Lk(Lk({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Lr(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=gr(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return os(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=ae("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=ae("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=ae("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Vge=Object.defineProperty,Gge=(t,e,n)=>e in t?Vge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qe=(t,e,n)=>Gge(t,typeof e!="symbol"?e+"":e,n);class Kge{constructor(e,n){this.core=e,this.logger=n,Qe(this,"name",Qhe),Qe(this,"version",Zhe),Qe(this,"events",new AA),Qe(this,"pairings"),Qe(this,"initialized",!1),Qe(this,"storagePrefix",ao),Qe(this,"ignoredPayloadTypes",[Fo]),Qe(this,"registeredMethods",[]),Qe(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Qe(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Qe(this,"create",async r=>{this.isInitialized();const s=XC(),i=await this.core.crypto.setSymKey(s),o=wn(oe.FIVE_MINUTES),a={protocol:kj},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=nk({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(dl.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),Qe(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[Bi.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=tk(r.uri);s.props.properties.topic=i,s.addTrace(Bi.pairing_uri_validation_success),s.addTrace(Bi.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(Bi.existing_pairing),u.active)throw s.setError(So.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(Bi.pairing_not_expired)}const d=c||wn(oe.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(Bi.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(dl.create,h),s.addTrace(Bi.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(Bi.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(So.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(So.subscribe_pairing_topic_failure),f}return s.addTrace(Bi.subscribe_pairing_topic_success),h}),Qe(this,"activate",async({topic:r})=>{this.isInitialized();const s=wn(oe.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Qe(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=al();this.events.once(gt("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),Qe(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Qe(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Qe(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Qe(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",qt("USER_DISCONNECTED")),await this.deletePairing(s))}),Qe(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return nk({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),Qe(this,"sendRequest",async(r,s,i)=>{const o=ic(s,i),a=await this.core.crypto.encode(r,o),c=wf[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),Qe(this,"sendResult",async(r,s,i)=>{const o=Lv(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=wf[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Qe(this,"sendError",async(r,s,i)=>{const o=Mv(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=wf[c]?wf[c].res:wf.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Qe(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,qt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Qe(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Ra(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Qe(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Qe(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),Qe(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(dl.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Qe(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{Wi(s)?this.events.emit(gt("pairing_ping",i),{}):Ms(s)&&this.events.emit(gt("pairing_ping",i),{error:s.error})},500)}),Qe(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(dl.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Qe(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=qt("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),Qe(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(qt("WC_METHOD_UNSUPPORTED",r))}),Qe(this,"isValidPair",(r,s)=>{var i;if(!Wr(r)){const{message:a}=ae("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(So.malformed_pairing_uri),new Error(a)}if(!lde(r.uri)){const{message:a}=ae("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(So.malformed_pairing_uri),new Error(a)}const o=tk(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=ae("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(So.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=ae("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(So.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&oe.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(So.pairing_expired);const{message:a}=ae("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Qe(this,"isValidPing",async r=>{if(!Wr(r)){const{message:i}=ae("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Qe(this,"isValidDisconnect",async r=>{if(!Wr(r)){const{message:i}=ae("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Qe(this,"isValidPairingTopic",async r=>{if(!pn(r,!1)){const{message:s}=ae("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=ae("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Ra(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=ae("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=gr(n,this.name),this.pairings=new Cu(this.core,this.logger,this.name,this.storagePrefix)}get context(){return os(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(kn.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==Ft.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);sI(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):Bv(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(js.expired,async e=>{const{topic:n}=NU(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(dl.expire,{topic:n}))})}}var Yge=Object.defineProperty,Jge=(t,e,n)=>e in t?Yge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wn=(t,e,n)=>Jge(t,typeof e!="symbol"?e+"":e,n);class Qge extends jte{constructor(e,n){super(e,n),this.core=e,this.logger=n,Wn(this,"records",new Map),Wn(this,"events",new Qs.EventEmitter),Wn(this,"name",Xhe),Wn(this,"version",efe),Wn(this,"cached",[]),Wn(this,"initialized",!1),Wn(this,"storagePrefix",ao),Wn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Wn(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:wn(oe.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(ri.created,o)}),Wn(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Ms(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(ri.updated,s))}),Wn(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),Wn(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(ri.deleted,i)}}),this.persist()}),Wn(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),Wn(this,"on",(r,s)=>{this.events.on(r,s)}),Wn(this,"once",(r,s)=>{this.events.once(r,s)}),Wn(this,"off",(r,s)=>{this.events.off(r,s)}),Wn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=gr(n,this.name)}get context(){return os(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:ic(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=ae("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ri.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=ae("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ri.created,e=>{const n=ri.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(ri.updated,e=>{const n=ri.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(ri.deleted,e=>{const n=ri.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(bu.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{oe.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(ri.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Zge=Object.defineProperty,Xge=(t,e,n)=>e in t?Zge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lr=(t,e,n)=>Xge(t,typeof e!="symbol"?e+"":e,n);class eme extends Wte{constructor(e,n){super(e,n),this.core=e,this.logger=n,lr(this,"expirations",new Map),lr(this,"events",new Qs.EventEmitter),lr(this,"name",tfe),lr(this,"version",nfe),lr(this,"cached",[]),lr(this,"initialized",!1),lr(this,"storagePrefix",ao),lr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),lr(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),lr(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(js.created,{target:i,expiration:o})}),lr(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),lr(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(js.deleted,{target:s,expiration:i})}}),lr(this,"on",(r,s)=>{this.events.on(r,s)}),lr(this,"once",(r,s)=>{this.events.once(r,s)}),lr(this,"off",(r,s)=>{this.events.off(r,s)}),lr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=gr(n,this.name)}get context(){return os(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Kae(e);if(typeof e=="number")return Yae(e);const{message:n}=ae("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(js.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=ae("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=ae("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;oe.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(js.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(bu.pulse,()=>this.checkExpirations()),this.events.on(js.created,e=>{const n=js.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(js.expired,e=>{const n=js.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(js.deleted,e=>{const n=js.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}var tme=Object.defineProperty,nme=(t,e,n)=>e in t?tme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hn=(t,e,n)=>nme(t,typeof e!="symbol"?e+"":e,n);class rme extends qte{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,hn(this,"name",rfe),hn(this,"abortController"),hn(this,"isDevEnv"),hn(this,"verifyUrlV3",ife),hn(this,"storagePrefix",ao),hn(this,"version",Pj),hn(this,"publicKey"),hn(this,"fetchPromise"),hn(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&oe.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),hn(this,"register",async s=>{if(!$h()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=ru(),u=this.startAbortTimer(oe.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",w),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const w=y=>{if(y.data&&typeof y.data=="string")try{const b=JSON.parse(y.data);if(b.type==="verify_attestation"){if(DC(b.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",w),h(b.attestation===null?"":b.attestation)}}catch(b){this.logger.warn(b)}};l.body.appendChild(g),window.addEventListener("message",w,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),hn(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(DC(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),hn(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(oe.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),hn(this,"getVerifyUrl",s=>{let i=s||dp;return ofe.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${dp}`),i=dp),i}),hn(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(oe.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),hn(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),hn(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),hn(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),hn(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),hn(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),hn(this,"validateAttestation",(s,i)=>{const o=zue(s,i.publicKey),a={hasExpired:oe.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=gr(n,this.name),this.abortController=new AbortController,this.isDevEnv=WA(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return os(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),oe.toMiliseconds(e))}}var sme=Object.defineProperty,ime=(t,e,n)=>e in t?sme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mk=(t,e,n)=>ime(t,typeof e!="symbol"?e+"":e,n);class ome extends Hte{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,Mk(this,"context",afe),Mk(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${cfe}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=gr(n,this.context)}}var ame=Object.defineProperty,Bk=Object.getOwnPropertySymbols,cme=Object.prototype.hasOwnProperty,lme=Object.prototype.propertyIsEnumerable,fx=(t,e,n)=>e in t?ame(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ef=(t,e)=>{for(var n in e||(e={}))cme.call(e,n)&&fx(t,n,e[n]);if(Bk)for(var n of Bk(e))lme.call(e,n)&&fx(t,n,e[n]);return t},An=(t,e,n)=>fx(t,typeof e!="symbol"?e+"":e,n);class ume extends Vte{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,An(this,"context",ufe),An(this,"storagePrefix",ao),An(this,"storageVersion",lfe),An(this,"events",new Map),An(this,"shouldPersist",!1),An(this,"init",async()=>{if(!WA())try{const s={eventId:CP(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:IU(this.core.relayer.protocol,this.core.relayer.version,ix)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),An(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=CP(),u=this.core.projectId||"",d=Date.now(),h=Ef({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),An(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Ef(Ef({},a),this.setMethods(a.eventId))}),An(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),An(this,"setEventListeners",()=>{this.core.heartbeat.on(bu.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{oe.fromMiliseconds(Date.now())-oe.fromMiliseconds(s.timestamp)>dfe&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),An(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),An(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),An(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),An(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),An(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,Ef(Ef({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),An(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),An(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${hfe}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${ix}${i}`,{method:"POST",body:JSON.stringify(s)})}),An(this,"getAppDomain",()=>AU().url),this.logger=gr(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var dme=Object.defineProperty,Fk=Object.getOwnPropertySymbols,hme=Object.prototype.hasOwnProperty,fme=Object.prototype.propertyIsEnumerable,px=(t,e,n)=>e in t?dme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zk=(t,e)=>{for(var n in e||(e={}))hme.call(e,n)&&px(t,n,e[n]);if(Fk)for(var n of Fk(e))fme.call(e,n)&&px(t,n,e[n]);return t},Pt=(t,e,n)=>px(t,typeof e!="symbol"?e+"":e,n);let pme=class Hj extends Rte{constructor(e){var n;super(e),Pt(this,"protocol",Nj),Pt(this,"version",Pj),Pt(this,"name",sx),Pt(this,"relayUrl"),Pt(this,"projectId"),Pt(this,"customStoragePrefix"),Pt(this,"events",new Qs.EventEmitter),Pt(this,"logger"),Pt(this,"heartbeat"),Pt(this,"relayer"),Pt(this,"crypto"),Pt(this,"storage"),Pt(this,"history"),Pt(this,"expirer"),Pt(this,"pairing"),Pt(this,"verify"),Pt(this,"echoClient"),Pt(this,"linkModeSupportedApps"),Pt(this,"eventClient"),Pt(this,"initialized",!1),Pt(this,"logChunkController"),Pt(this,"on",(a,c)=>this.events.on(a,c)),Pt(this,"once",(a,c)=>this.events.once(a,c)),Pt(this,"off",(a,c)=>this.events.off(a,c)),Pt(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Pt(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:Ft.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Oj,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=Th({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:$he.logger,name:sx}),{logger:i,chunkLoggerController:o}=TA({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=gr(i,this.name),this.heartbeat=new Eee,this.crypto=new Fpe(this,this.logger,e==null?void 0:e.keychain),this.history=new Qge(this,this.logger),this.expirer=new eme(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new rte(zk(zk({},Dhe),e==null?void 0:e.storageOptions)),this.relayer=new pge({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Kge(this,this.logger),this.verify=new rme(this,this.logger,this.storage),this.echoClient=new ome(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new ume(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new Hj(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(Khe,r),n}get context(){return os(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(Ek,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(Ek)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&Rhe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const gme=pme,Vj="wc",Gj=2,Kj="client",iI=`${Vj}@${Gj}:${Kj}:`,nE={name:Kj,logger:"error"},Wk="WALLETCONNECT_DEEPLINK_CHOICE",mme="proposal",qk="Proposal expired",yme="session",Bu=oe.SEVEN_DAYS,wme="engine",In={wc_sessionPropose:{req:{ttl:oe.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:1104},res:{ttl:oe.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:1106},res:{ttl:oe.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:oe.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:oe.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:1112},res:{ttl:oe.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:1114},res:{ttl:oe.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:oe.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:oe.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1119}}},rE={min:oe.FIVE_MINUTES,max:oe.SEVEN_DAYS},Mi={idle:"IDLE",active:"ACTIVE"},vme={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},bme="request",Eme=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],_me="wc",Cme="auth",xme="authKeys",Sme="pairingTopics",Ame="requests",zv=`${_me}@${1.5}:${Cme}:`,hw=`${zv}:PUB_KEY`;var Ime=Object.defineProperty,Tme=Object.defineProperties,Nme=Object.getOwnPropertyDescriptors,Hk=Object.getOwnPropertySymbols,Pme=Object.prototype.hasOwnProperty,kme=Object.prototype.propertyIsEnumerable,gx=(t,e,n)=>e in t?Ime(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mt=(t,e)=>{for(var n in e||(e={}))Pme.call(e,n)&&gx(t,n,e[n]);if(Hk)for(var n of Hk(e))kme.call(e,n)&&gx(t,n,e[n]);return t},Mr=(t,e)=>Tme(t,Nme(e)),te=(t,e,n)=>gx(t,typeof e!="symbol"?e+"":e,n);class Ome extends Jte{constructor(e){super(e),te(this,"name",wme),te(this,"events",new AA),te(this,"initialized",!1),te(this,"requestQueue",{state:Mi.idle,queue:[]}),te(this,"sessionRequestQueue",{state:Mi.idle,queue:[]}),te(this,"requestQueueDelay",oe.ONE_SECOND),te(this,"expectedPairingMethodMap",new Map),te(this,"recentlyDeletedMap",new Map),te(this,"recentlyDeletedLimit",200),te(this,"relayMessageCache",[]),te(this,"pendingSessions",new Map),te(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(In)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},oe.toMiliseconds(this.requestQueueDelay)))}),te(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=Mr(Mt({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=sde(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const x=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=x.active}}catch(x){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),x}if(!u||!h){const{topic:x,uri:S}=await this.client.core.pairing.create();u=x,d=S}if(!u){const{message:x}=ae("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(x)}const f=await this.client.core.crypto.generateKeyPair(),p=In.wc_sessionPropose.req.ttl||oe.FIVE_MINUTES,g=wn(p),w=Mr(Mt(Mt({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:kj}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:zi()}),y=gt("session_connect",w.id),{reject:b,resolve:v,done:_}=al(p,qk),E=({id:x})=>{x===w.id&&(this.client.events.off("proposal_expire",E),this.pendingSessions.delete(w.id),this.events.emit(y,{error:{message:qk,code:0}}))};return this.client.events.on("proposal_expire",E),this.events.once(y,({error:x,session:S})=>{this.client.events.off("proposal_expire",E),x?b(x):S&&v(S)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:w,throwOnFailedPublish:!0,clientRpcId:w.id}),await this.setProposal(w.id,w),{uri:d,approval:_}}),te(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),te(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[si.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(C){throw o.setError(el.no_internet_connection),C}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(C){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(el.proposal_not_found),C}try{await this.isValidApprove(n)}catch(C){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(el.session_approve_namespace_validation_failure),C}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:w,optionalNamespaces:y}=f;let b=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});b||(b=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:si.session_approve_started,properties:{topic:p,trace:[si.session_approve_started,si.session_namespaces_validation_success]}}));const v=await this.client.core.crypto.generateKeyPair(),_=g.publicKey,E=await this.client.core.crypto.generateSharedKey(v,_),x=Mt(Mt(Mt({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:v,metadata:this.client.metadata},expiry:wn(Bu)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),S=Ft.relay;b.addTrace(si.subscribing_session_topic);try{await this.client.core.relayer.subscribe(E,{transportType:S})}catch(C){throw b.setError(el.subscribe_session_topic_failure),C}b.addTrace(si.subscribe_session_topic_success);const T=Mr(Mt({},x),{topic:E,requiredNamespaces:w,optionalNamespaces:y,pairingTopic:p,acknowledged:!1,self:x.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:v,transportType:Ft.relay});await this.client.session.set(E,T),b.addTrace(si.store_session);try{b.addTrace(si.publishing_session_settle),await this.sendRequest({topic:E,method:"wc_sessionSettle",params:x,throwOnFailedPublish:!0}).catch(C=>{throw b==null||b.setError(el.session_settle_publish_failure),C}),b.addTrace(si.session_settle_publish_success),b.addTrace(si.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:v},throwOnFailedPublish:!0}).catch(C=>{throw b==null||b.setError(el.session_approve_publish_failure),C}),b.addTrace(si.session_approve_publish_success)}catch(C){throw this.client.logger.error(C),this.client.session.delete(E,qt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(E),C}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(E,wn(Bu)),{topic:E,acknowledged:()=>Promise.resolve(this.client.session.get(E))}}),te(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&await this.sendError({id:r,topic:i,error:s,rpcOpts:In.wc_sessionPropose.reject}),await this.deleteProposal(r)}),te(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=al(),c=zi(),l=xl().toString(),u=this.client.session.get(r).namespaces;return this.events.once(gt("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),te(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=zi(),{done:i,resolve:o,reject:a}=al();return this.events.once(gt("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,wn(Bu)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),te(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(w){throw this.client.logger.error("request() -> isValidRequest() failed"),w}const{chainId:r,request:s,topic:i,expiry:o=In.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===Ft.relay&&await this.confirmOnlineStateOrThrow();const c=zi(),l=xl().toString(),{done:u,resolve:d,reject:h}=al(o,"Request expired. Please try again.");this.events.once(gt("session_request",c),({error:w,result:y})=>{w?h(w):d(y)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:Mr(Mt({},s),{expiryTimestamp:wn(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(w=>h(w)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:Mr(Mt({},s),{expiryTimestamp:wn(o)}),chainId:r};return await Promise.all([new Promise(async w=>{await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,g)}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),w()}),new Promise(async w=>{var y;if(!((y=a.sessionConfig)!=null&&y.disableDeepLink)){const b=await Xae(this.client.core.storage,Wk);await Jae({id:c,topic:i,wcDeepLink:b})}w()}),u()]).then(w=>w[2])}),te(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===Ft.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Wi(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):Ms(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),te(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=zi(),i=xl().toString(),{done:o,resolve:a,reject:c}=al();this.events.once(gt("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),te(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=xl().toString(),a=zi();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),te(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:qt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=ae("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),te(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>ade(r,n)))),te(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),te(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Ft.link_mode:Ft.relay;o===Ft.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:w}=n,y=[...n.resources||[]],{topic:b,uri:v}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:v}});const _=await this.client.core.crypto.generateKeyPair(),E=uw(_);if(await Promise.all([this.client.auth.authKeys.set(hw,{responseTopic:E,publicKey:_}),this.client.auth.pairingTopics.set(E,{topic:E,pairingTopic:b})]),await this.client.core.relayer.subscribe(E,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${b}`),g.length>0){const{namespace:k}=Rd(a[0]);let j=ple(k,"request",g);lw(y)&&(j=mle(j,y.pop())),y.push(j)}const x=w&&w>In.wc_sessionAuthenticate.req.ttl?w:In.wc_sessionAuthenticate.req.ttl,S={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:y},requester:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:wn(x)},T={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},C={requiredNamespaces:{},optionalNamespaces:T,relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:wn(In.wc_sessionPropose.req.ttl),id:zi()},{done:O,resolve:R,reject:F}=al(x,"Request expired"),W=zi(),B=gt("session_connect",C.id),I=gt("session_request",W),A=async({error:k,session:j})=>{this.events.off(I,U),k?F(k):j&&R({session:j})},U=async k=>{var j,z,K;if(await this.deletePendingAuthRequest(W,{message:"fulfilled",code:0}),k.error){const De=qt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return k.error.code===De.code?void 0:(this.events.off(B,A),F(k.error.message))}await this.deleteProposal(C.id),this.events.off(B,A);const{cacaos:Q,responder:Y}=k.result,Z=[],se=[];for(const De of Q){await $P({cacao:De,projectId:this.client.core.projectId})||(this.client.logger.error(De,"Signature verification failed"),F(qt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Ke}=De,Zt=lw(Ke.resources),Ps=[qC(Ke.iss)],it=h0(Ke.iss);if(Zt){const Le=DP(Zt),Dt=UP(Zt);Z.push(...Le),Ps.push(...Dt)}for(const Le of Ps)se.push(`${Le}:${it}`)}const Pe=await this.client.core.crypto.generateSharedKey(_,Y.publicKey);let Oe;Z.length>0&&(Oe={topic:Pe,acknowledged:!0,self:{publicKey:_,metadata:this.client.metadata},peer:Y,controller:Y.publicKey,expiry:wn(Bu),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:ok([...new Set(Z)],[...new Set(se)]),transportType:o},await this.client.core.relayer.subscribe(Pe,{transportType:o}),await this.client.session.set(Pe,Oe),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:Y.metadata}),Oe=this.client.session.get(Pe)),(j=this.client.metadata.redirect)!=null&&j.linkMode&&(z=Y.metadata.redirect)!=null&&z.linkMode&&(K=Y.metadata.redirect)!=null&&K.universal&&r&&(this.client.core.addLinkModeSupportedApp(Y.metadata.redirect.universal),this.client.session.update(Pe,{transportType:Ft.link_mode})),R({auths:Q,session:Oe})};this.events.once(B,A),this.events.once(I,U);let P;try{if(i){const k=ic("wc_sessionAuthenticate",S,W);this.client.core.history.set(b,k);const j=await this.client.core.crypto.encode("",k,{type:wm,encoding:Ba});P=Sy(r,b,j)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:S,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:W}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:C,expiry:In.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:C.id})])}catch(k){throw this.events.off(B,A),this.events.off(I,U),k}return await this.setProposal(C.id,C),await this.setAuthRequest(W,{request:Mr(Mt({},S),{verifyContext:{}}),pairingTopic:b,transportType:o}),{uri:P??v,response:O}}),te(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[tl.authenticated_session_approve_started]}});try{this.isInitialized()}catch(w){throw i.setError(vf.no_internet_connection),w}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(vf.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||Ft.relay;a===Ft.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=uw(c),d={type:Fo,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const w of s){if(!await $P({cacao:w,projectId:this.client.core.projectId})){i.setError(vf.invalid_cacao);const E=qt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:E,encodeOpts:d}),new Error(E.message)}i.addTrace(tl.cacaos_verified);const{p:y}=w,b=lw(y.resources),v=[qC(y.iss)],_=h0(y.iss);if(b){const E=DP(b),x=UP(b);h.push(...E),v.push(...x)}for(const E of v)f.push(`${E}:${_}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(tl.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:wn(Bu),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:ok([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(tl.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(w){throw i.setError(vf.subscribe_authenticated_session_topic_failure),w}i.addTrace(tl.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(tl.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(tl.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(w){throw i.setError(vf.authenticated_session_approve_publish_failure),w}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),te(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===Ft.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=uw(o),l={type:Fo,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:In.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),te(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return qU(r,s)}),te(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),te(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),te(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,qt("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(Wk).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,qt("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Mi.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),te(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(el.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,qt("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),te(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=Mi.idle,this.client.events.emit("session_request_expire",{id:n}))}),te(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),te(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),te(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,wn(In.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),te(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=Ft.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),te(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||wn(In.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),te(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=ic(s,i,c);let f;const p=!!u;try{const y=p?Ba:Ei;f=await this.client.core.crypto.encode(r,h,{encoding:y})}catch(y){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),y}let g;if(Eme.includes(s)){const y=Yi(JSON.stringify(h)),b=Yi(f);g=await this.client.core.verify.register({id:b,decryptedId:y})}const w=In[s].req;if(w.attestation=g,o&&(w.ttl=o),a&&(w.id=a),this.client.core.history.set(r,h),p){const y=Sy(u,r,f);await global.Linking.openURL(y,this.client.name)}else{const y=In[s].req;o&&(y.ttl=o),a&&(y.id=a),y.tvf=Mr(Mt({},d),{correlationId:h.id}),l?(y.internal=Mr(Mt({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,y)):this.client.core.relayer.publish(r,f,y).catch(b=>this.client.logger.error(b))}return h.id}),te(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=Lv(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?Ba:Ei;u=await this.client.core.crypto.encode(s,l,Mr(Mt({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{f=this.getTVFParams(r,p.params,i)}catch(g){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${g==null?void 0:g.message}`)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=Sy(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=In[p].res;g.tvf=Mr(Mt({},f),{correlationId:r}),o?(g.internal=Mr(Mt({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(w=>this.client.logger.error(w))}await this.client.core.history.resolve(l)}),te(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=Mv(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?Ba:Ei;u=await this.client.core.crypto.encode(s,l,Mr(Mt({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=Sy(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||In[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),te(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Ra(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Ra(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),te(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),te(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),te(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Mi.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Mi.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Mi.idle}),te(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),te(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),te(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=ae("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),te(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),te(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(So.proposal_listener_not_found)),this.isValidConnect(Mt({},s.params));const u=a.expiryTimestamp||wn(In.wc_sessionPropose.req.ttl),d=Mt({id:c,pairingTopic:r,expiryTimestamp:u,attestation:i,encryptedId:o},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:Yi(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(Bi.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:In.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),te(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(Wi(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Ms(r)){await this.deleteProposal(i);const o=gt("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),te(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(w=>w.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=Mr(Mt(Mt(Mt({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:Ft.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(gt("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),te(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;Wi(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(gt("session_approve",s),{})):Ms(r)&&(await this.client.session.delete(n,qt("USER_DISCONNECTED")),this.events.emit(gt("session_approve",s),{error:r.error}))}),te(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=yf.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:qt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Mt({topic:n},s));try{yf.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0})}catch(c){throw yf.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),te(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),te(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=gt("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Wi(r)?this.events.emit(gt("session_update",s),{}):Ms(r)&&this.events.emit(gt("session_update",s),{error:r.error})}),te(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,wn(Bu)),await this.sendResult({id:s,topic:n,result:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),te(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=gt("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Wi(r)?this.events.emit(gt("session_extend",s),{}):Ms(r)&&this.events.emit(gt("session_extend",s),{error:r.error})}),te(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),te(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=gt("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Wi(r)?this.events.emit(gt("session_ping",s),{}):Ms(r)&&this.events.emit(gt("session_ping",s),{error:r.error})},500)}),te(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(kn.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:qt("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),te(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(Mt({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Yi(JSON.stringify(ic("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===Ft.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),te(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=gt("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Wi(r)?this.events.emit(gt("session_request",s),{result:r.result}):Ms(r)&&this.events.emit(gt("session_request",s),{error:r.error})}),te(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=yf.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Mt({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),yf.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),te(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Wi(r)?this.events.emit(gt("session_request",s),{result:r.result}):Ms(r)&&this.events.emit(gt("session_request",s),{error:r.error})}),te(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:Yi(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===Ft.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:Fo,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:In.wc_sessionAuthenticate.autoReject,appLink:h})}}),te(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),te(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Mi.idle,this.processSessionRequestQueue()},oe.toMiliseconds(this.requestQueueDelay))}),te(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=gt("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(gt("session_request",i.request.id),{error:r})})}),te(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Mi.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Mi.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),te(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),te(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:ic("wc_sessionPropose",Mr(Mt({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),te(this,"isValidConnect",async n=>{if(!Wr(n)){const{message:l}=ae("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Vn(r)||await this.isValidPairingTopic(r),!vde(c)){const{message:l}=ae("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Vn(s)&&_c(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!Vn(i)&&_c(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Vn(o)||this.validateSessionProps(o,"sessionProperties"),!Vn(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),te(this,"validateNamespaces",(n,r)=>{const s=wde(n,"connect()",r);if(s)throw new Error(s.message)}),te(this,"isValidApprove",async n=>{if(!Wr(n))throw new Error(ae("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=J1(s,"approve()");if(l)throw new Error(l.message);const u=lk(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!pn(i,!0)){const{message:d}=ae("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(Vn(o)||this.validateSessionProps(o,"sessionProperties"),!Vn(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),te(this,"isValidReject",async n=>{if(!Wr(n)){const{message:i}=ae("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!Ede(s)){const{message:i}=ae("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),te(this,"isValidSessionSettleRequest",n=>{if(!Wr(n)){const{message:l}=ae("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!Ej(r)){const{message:l}=ae("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=hde(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=J1(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Ra(o)){const{message:l}=ae("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),te(this,"isValidUpdate",async n=>{if(!Wr(n)){const{message:c}=ae("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=J1(s,"update()");if(o)throw new Error(o.message);const a=lk(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),te(this,"isValidExtend",async n=>{if(!Wr(n)){const{message:s}=ae("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),te(this,"isValidRequest",async n=>{if(!Wr(n)){const{message:c}=ae("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!ck(a,i)){const{message:c}=ae("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!_de(s)){const{message:c}=ae("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!Sde(a,i,s.method)){const{message:c}=ae("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!Nde(o,rE)){const{message:c}=ae("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${rE.min} and ${rE.max}`);throw new Error(c)}}),te(this,"isValidRespond",async n=>{var r;if(!Wr(n)){const{message:o}=ae("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!Cde(i)){const{message:o}=ae("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),te(this,"isValidPing",async n=>{if(!Wr(n)){const{message:s}=ae("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),te(this,"isValidEmit",async n=>{if(!Wr(n)){const{message:a}=ae("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!ck(o,i)){const{message:a}=ae("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!xde(s)){const{message:a}=ae("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!Ade(o,i,s.name)){const{message:a}=ae("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),te(this,"isValidDisconnect",async n=>{if(!Wr(n)){const{message:s}=ae("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),te(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!pn(s,!1))throw new Error("uri is required parameter");if(!pn(i,!1))throw new Error("domain is required parameter");if(!pn(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>Rd(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Rd(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),te(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||dp,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Ft.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),te(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=ae("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),te(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),te(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),te(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=ae("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),te(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==Ft.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),te(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),te(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=_P(n,"topic")||"",s=decodeURIComponent(_P(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:Ft.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),te(this,"registerLinkModeListeners",async()=>{var n;if(WA()||zc()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),te(this,"getTVFParams",(n,r,s)=>{var i,o,a;if(!((i=r.request)!=null&&i.method))return{};const c={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const l=this.extractTxHashesFromResult(r.request,s);c.txHashes=l,c.contractAddresses=this.isValidContractData(r.request.params)?[(a=(o=r.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(l){this.client.logger.warn("Error getting TVF params",l)}return c}),te(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),te(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const i=n.method,o=vme[i];if(i==="sui_signTransaction")return[Zce(r.transactionBytes)];if(i==="near_signTransaction")return[PP(r)];if(i==="near_signTransactions")return r.map(c=>PP(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[qde({transaction:n.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return zo(r)?r.map(c=>kP(c)):[kP(r)];if(i==="cosmos_signDirect")return[ele(r)];if(typeof r=="string")return[r];const a=r[o.key];if(zo(a))return i==="solana_signAllTransactions"?a.map(c=>Qce(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=ae("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(kn.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(hw)?this.client.auth.authKeys.get(hw):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===Ft.link_mode?Ba:Ei});sI(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Yi(r)})):Bv(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(js.expired,async e=>{const{topic:n,id:r}=NU(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,ae("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,ae("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(dl.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(dl.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!pn(e,!1)){const{message:n}=ae("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=ae("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Ra(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=ae("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!pn(e,!1)){const{message:n}=ae("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=ae("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Ra(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=ae("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=ae("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(pn(e,!1)){const{message:n}=ae("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=ae("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!bde(e)){const{message:n}=ae("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=ae("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Ra(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=ae("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class Rme extends Cu{constructor(e,n){super(e,n,mme,iI),this.core=e,this.logger=n}}let $me=class extends Cu{constructor(e,n){super(e,n,yme,iI),this.core=e,this.logger=n}};class Dme extends Cu{constructor(e,n){super(e,n,bme,iI,r=>r.id),this.core=e,this.logger=n}}class Ume extends Cu{constructor(e,n){super(e,n,xme,zv,()=>hw),this.core=e,this.logger=n}}class jme extends Cu{constructor(e,n){super(e,n,Sme,zv),this.core=e,this.logger=n}}class Lme extends Cu{constructor(e,n){super(e,n,Ame,zv,r=>r.id),this.core=e,this.logger=n}}var Mme=Object.defineProperty,Bme=(t,e,n)=>e in t?Mme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sE=(t,e,n)=>Bme(t,typeof e!="symbol"?e+"":e,n);class Fme{constructor(e,n){this.core=e,this.logger=n,sE(this,"authKeys"),sE(this,"pairingTopics"),sE(this,"requests"),this.authKeys=new Ume(this.core,this.logger),this.pairingTopics=new jme(this.core,this.logger),this.requests=new Lme(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var zme=Object.defineProperty,Wme=(t,e,n)=>e in t?zme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ze=(t,e,n)=>Wme(t,typeof e!="symbol"?e+"":e,n);let qme=class Yj extends Yte{constructor(e){super(e),Ze(this,"protocol",Vj),Ze(this,"version",Gj),Ze(this,"name",nE.name),Ze(this,"metadata"),Ze(this,"core"),Ze(this,"logger"),Ze(this,"events",new Qs.EventEmitter),Ze(this,"engine"),Ze(this,"session"),Ze(this,"proposal"),Ze(this,"pendingRequest"),Ze(this,"auth"),Ze(this,"signConfig"),Ze(this,"on",(r,s)=>this.events.on(r,s)),Ze(this,"once",(r,s)=>this.events.once(r,s)),Ze(this,"off",(r,s)=>this.events.off(r,s)),Ze(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),Ze(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Ze(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Ze(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),Ze(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||nE.name,this.metadata=qae(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:dm(Th({level:(e==null?void 0:e.logger)||nE.logger}));this.core=(e==null?void 0:e.core)||new gme(e),this.logger=gr(n,this.name),this.session=new $me(this.core,this.logger),this.proposal=new Rme(this.core,this.logger),this.pendingRequest=new Dme(this.core,this.logger),this.engine=new Ome(this),this.auth=new Fme(this.core,this.logger)}static async init(e){const n=new Yj(e);return await n.initialize(),n}get context(){return os(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},oe.toMiliseconds(oe.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var mx={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof rn<"u"&&rn,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof rn<"u"&&rn||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(I){return I&&DataView.prototype.isPrototypeOf(I)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(I){return I&&u.indexOf(Object.prototype.toString.call(I))>-1};function h(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(I)||I==="")throw new TypeError('Invalid character in header field name: "'+I+'"');return I.toLowerCase()}function f(I){return typeof I!="string"&&(I=String(I)),I}function p(I){var A={next:function(){var U=I.shift();return{done:U===void 0,value:U}}};return c.iterable&&(A[Symbol.iterator]=function(){return A}),A}function g(I){this.map={},I instanceof g?I.forEach(function(A,U){this.append(U,A)},this):Array.isArray(I)?I.forEach(function(A){if(A.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+A.length);this.append(A[0],A[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(A){this.append(A,I[A])},this)}g.prototype.append=function(I,A){I=h(I),A=f(A);var U=this.map[I];this.map[I]=U?U+", "+A:A},g.prototype.delete=function(I){delete this.map[h(I)]},g.prototype.get=function(I){return I=h(I),this.has(I)?this.map[I]:null},g.prototype.has=function(I){return this.map.hasOwnProperty(h(I))},g.prototype.set=function(I,A){this.map[h(I)]=f(A)},g.prototype.forEach=function(I,A){for(var U in this.map)this.map.hasOwnProperty(U)&&I.call(A,this.map[U],U,this)},g.prototype.keys=function(){var I=[];return this.forEach(function(A,U){I.push(U)}),p(I)},g.prototype.values=function(){var I=[];return this.forEach(function(A){I.push(A)}),p(I)},g.prototype.entries=function(){var I=[];return this.forEach(function(A,U){I.push([U,A])}),p(I)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function w(I){if(!I._noBody){if(I.bodyUsed)return Promise.reject(new TypeError("Already read"));I.bodyUsed=!0}}function y(I){return new Promise(function(A,U){I.onload=function(){A(I.result)},I.onerror=function(){U(I.error)}})}function b(I){var A=new FileReader,U=y(A);return A.readAsArrayBuffer(I),U}function v(I){var A=new FileReader,U=y(A),P=/charset=([A-Za-z0-9_-]+)/.exec(I.type),k=P?P[1]:"utf-8";return A.readAsText(I,k),U}function _(I){for(var A=new Uint8Array(I),U=new Array(A.length),P=0;P<A.length;P++)U[P]=String.fromCharCode(A[P]);return U.join("")}function E(I){if(I.slice)return I.slice(0);var A=new Uint8Array(I.byteLength);return A.set(new Uint8Array(I)),A.buffer}function x(){return this.bodyUsed=!1,this._initBody=function(I){this.bodyUsed=this.bodyUsed,this._bodyInit=I,I?typeof I=="string"?this._bodyText=I:c.blob&&Blob.prototype.isPrototypeOf(I)?this._bodyBlob=I:c.formData&&FormData.prototype.isPrototypeOf(I)?this._bodyFormData=I:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)?this._bodyText=I.toString():c.arrayBuffer&&c.blob&&l(I)?(this._bodyArrayBuffer=E(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(I)||d(I))?this._bodyArrayBuffer=E(I):this._bodyText=I=Object.prototype.toString.call(I):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var I=w(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var I=w(this);return I||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var I=w(this);if(I)return I;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(_(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(O)}),this.json=function(){return this.text().then(JSON.parse)},this}var S=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function T(I){var A=I.toUpperCase();return S.indexOf(A)>-1?A:I}function C(I,A){if(!(this instanceof C))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');A=A||{};var U=A.body;if(I instanceof C){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,A.headers||(this.headers=new g(I.headers)),this.method=I.method,this.mode=I.mode,this.signal=I.signal,!U&&I._bodyInit!=null&&(U=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=A.credentials||this.credentials||"same-origin",(A.headers||!this.headers)&&(this.headers=new g(A.headers)),this.method=T(A.method||this.method||"GET"),this.mode=A.mode||this.mode||null,this.signal=A.signal||this.signal||function(){if("AbortController"in a){var j=new AbortController;return j.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&U)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(U),(this.method==="GET"||this.method==="HEAD")&&(A.cache==="no-store"||A.cache==="no-cache")){var P=/([?&])_=[^&]*/;if(P.test(this.url))this.url=this.url.replace(P,"$1_="+new Date().getTime());else{var k=/\?/;this.url+=(k.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}C.prototype.clone=function(){return new C(this,{body:this._bodyInit})};function O(I){var A=new FormData;return I.trim().split("&").forEach(function(U){if(U){var P=U.split("="),k=P.shift().replace(/\+/g," "),j=P.join("=").replace(/\+/g," ");A.append(decodeURIComponent(k),decodeURIComponent(j))}}),A}function R(I){var A=new g,U=I.replace(/\r?\n[\t ]+/g," ");return U.split("\r").map(function(P){return P.indexOf(`
`)===0?P.substr(1,P.length):P}).forEach(function(P){var k=P.split(":"),j=k.shift().trim();if(j){var z=k.join(":").trim();try{A.append(j,z)}catch(K){console.warn("Response "+K.message)}}}),A}x.call(C.prototype);function F(I,A){if(!(this instanceof F))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(A||(A={}),this.type="default",this.status=A.status===void 0?200:A.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=A.statusText===void 0?"":""+A.statusText,this.headers=new g(A.headers),this.url=A.url||"",this._initBody(I)}x.call(F.prototype),F.prototype.clone=function(){return new F(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},F.error=function(){var I=new F(null,{status:200,statusText:""});return I.ok=!1,I.status=0,I.type="error",I};var W=[301,302,303,307,308];F.redirect=function(I,A){if(W.indexOf(A)===-1)throw new RangeError("Invalid status code");return new F(null,{status:A,headers:{location:I}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(A,U){this.message=A,this.name=U;var P=Error(A);this.stack=P.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function B(I,A){return new Promise(function(U,P){var k=new C(I,A);if(k.signal&&k.signal.aborted)return P(new o.DOMException("Aborted","AbortError"));var j=new XMLHttpRequest;function z(){j.abort()}j.onload=function(){var Y={statusText:j.statusText,headers:R(j.getAllResponseHeaders()||"")};k.url.indexOf("file://")===0&&(j.status<200||j.status>599)?Y.status=200:Y.status=j.status,Y.url="responseURL"in j?j.responseURL:Y.headers.get("X-Request-URL");var Z="response"in j?j.response:j.responseText;setTimeout(function(){U(new F(Z,Y))},0)},j.onerror=function(){setTimeout(function(){P(new TypeError("Network request failed"))},0)},j.ontimeout=function(){setTimeout(function(){P(new TypeError("Network request timed out"))},0)},j.onabort=function(){setTimeout(function(){P(new o.DOMException("Aborted","AbortError"))},0)};function K(Y){try{return Y===""&&a.location.href?a.location.href:Y}catch{return Y}}if(j.open(k.method,K(k.url),!0),k.credentials==="include"?j.withCredentials=!0:k.credentials==="omit"&&(j.withCredentials=!1),"responseType"in j&&(c.blob?j.responseType="blob":c.arrayBuffer&&(j.responseType="arraybuffer")),A&&typeof A.headers=="object"&&!(A.headers instanceof g||a.Headers&&A.headers instanceof a.Headers)){var Q=[];Object.getOwnPropertyNames(A.headers).forEach(function(Y){Q.push(h(Y)),j.setRequestHeader(Y,f(A.headers[Y]))}),k.headers.forEach(function(Y,Z){Q.indexOf(Z)===-1&&j.setRequestHeader(Z,Y)})}else k.headers.forEach(function(Y,Z){j.setRequestHeader(Z,Y)});k.signal&&(k.signal.addEventListener("abort",z),j.onreadystatechange=function(){j.readyState===4&&k.signal.removeEventListener("abort",z)}),j.send(typeof k._bodyInit>"u"?null:k._bodyInit)})}return B.polyfill=!0,a.fetch||(a.fetch=B,a.Headers=g,a.Request=C,a.Response=F),o.Headers=g,o.Request=C,o.Response=F,o.fetch=B,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(mx,mx.exports);var Hme=mx.exports;const Vk=du(Hme);var Vme=Object.defineProperty,Gme=Object.defineProperties,Kme=Object.getOwnPropertyDescriptors,Gk=Object.getOwnPropertySymbols,Yme=Object.prototype.hasOwnProperty,Jme=Object.prototype.propertyIsEnumerable,Kk=(t,e,n)=>e in t?Vme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yk=(t,e)=>{for(var n in e||(e={}))Yme.call(e,n)&&Kk(t,n,e[n]);if(Gk)for(var n of Gk(e))Jme.call(e,n)&&Kk(t,n,e[n]);return t},Jk=(t,e)=>Gme(t,Kme(e));const Qme={Accept:"application/json","Content-Type":"application/json"},Zme="POST",Qk={headers:Qme,method:Zme},Zk=10;let Ri=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new Qs.EventEmitter,this.isAvailable=!1,this.registering=!1,!gk(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=Zo(e),r=await(await Vk(this.url,Jk(Yk({},Qk),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!gk(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=Zo({id:1,jsonrpc:"2.0",method:"test",params:[]});await Vk(e,Jk(Yk({},Qk),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?nu(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=Mv(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return xj(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Zk&&this.events.setMaxListeners(Zk)}};const Xk="error",Xme="wss://relay.walletconnect.org",eye="wc",tye="universal_provider",Iy=`${eye}@2:${tye}:`,Jj="https://rpc.walletconnect.org/v1/",sd="generic",nye=`${Jj}bundler`,Xs={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function oI(t){return t==null||typeof t!="object"&&typeof t!="function"}function Qj(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Zj(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const rye="[object RegExp]",Xj="[object String]",e4="[object Number]",t4="[object Boolean]",n4="[object Arguments]",sye="[object Symbol]",iye="[object Date]",oye="[object Map]",aye="[object Set]",cye="[object Array]",lye="[object ArrayBuffer]",uye="[object Object]",dye="[object DataView]",hye="[object Uint8Array]",fye="[object Uint8ClampedArray]",pye="[object Uint16Array]",gye="[object Uint32Array]",mye="[object Int8Array]",yye="[object Int16Array]",wye="[object Int32Array]",vye="[object Float32Array]",bye="[object Float64Array]";function aI(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Eye(t,e){return _d(t,void 0,t,new Map,e)}function _d(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(oI(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=_d(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,_d(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(_d(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(aI(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=_d(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),hl(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),hl(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),hl(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,hl(o,t,n,r,s),o}if(typeof t=="object"&&_ye(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),hl(o,t,n,r,s),o}return t}function hl(t,e,n=t,r,s){const i=[...Object.keys(e),...Qj(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=_d(e[a],a,n,r,s))}}function _ye(t){switch(Zj(t)){case n4:case cye:case lye:case dye:case t4:case iye:case vye:case bye:case mye:case yye:case wye:case oye:case e4:case uye:case rye:case aye:case Xj:case sye:case hye:case fye:case pye:case gye:return!0;default:return!1}}function Cye(t,e){return Eye(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case e4:case Xj:case t4:{const o=new t.constructor(t==null?void 0:t.valueOf());return hl(o,t),o}case n4:{const o={};return hl(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function eO(t){return Cye(t)}function tO(t){return t!==null&&typeof t=="object"&&Zj(t)==="[object Arguments]"}function nO(t){return typeof t=="object"&&t!==null}function xye(){}function Sye(t){return aI(t)}function Aye(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Iye(t){if(oI(t))return t;if(Array.isArray(t)||aI(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function Tye(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=yx(s,o,r,new Map)}return s}function yx(t,e,n,r){if(oI(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return Iye(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...Qj(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(tO(a)&&(a={...a}),tO(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=eO(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||nO(c)&&nO(a)?t[o]=yx(c,a,n,r):c==null&&Aye(a)?t[o]=yx({},a,n,r):c==null&&Sye(a)?t[o]=eO(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function Nye(t,...e){return Tye(t,...e,xye)}var Pye=Object.defineProperty,kye=Object.defineProperties,Oye=Object.getOwnPropertyDescriptors,rO=Object.getOwnPropertySymbols,Rye=Object.prototype.hasOwnProperty,$ye=Object.prototype.propertyIsEnumerable,sO=(t,e,n)=>e in t?Pye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ty=(t,e)=>{for(var n in e||(e={}))Rye.call(e,n)&&sO(t,n,e[n]);if(rO)for(var n of rO(e))$ye.call(e,n)&&sO(t,n,e[n]);return t},Dye=(t,e)=>kye(t,Oye(e));function xs(t,e,n){var r;const s=Rd(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${Jj}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function xu(t){return t.includes(":")?t.split(":")[1]:t}function r4(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function Uye(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function Ny(t={},e={}){const n=iO(t),r=iO(e);return Nye(n,r)}function iO(t){var e,n,r,s,i;const o={};if(!_c(t))return o;for(const[a,c]of Object.entries(t)){const l=jv(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=Ed(a);o[f]=Dye(Ty(Ty({},o[f]),c),{chains:so(l,(e=o[f])==null?void 0:e.chains),methods:so(u,(n=o[f])==null?void 0:n.methods),events:so(d,(r=o[f])==null?void 0:r.events)}),(_c(h)||_c(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=Ty(Ty({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function oO(t){return t.includes(":")?t.split(":")[2]:t}function aO(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=jv(n)?[n]:r.chains?r.chains:r4(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function iE(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const s4={},dt=t=>s4[t],oE=(t,e)=>{s4[t]=e};var jye=Object.defineProperty,Lye=(t,e,n)=>e in t?jye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fu=(t,e,n)=>Lye(t,typeof e!="symbol"?e+"":e,n);class Mye{constructor(e){Fu(this,"name","polkadot"),Fu(this,"client"),Fu(this,"httpProviders"),Fu(this,"events"),Fu(this,"namespace"),Fu(this,"chainId"),this.namespace=e.namespace,this.events=dt("events"),this.client=dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Xs.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=xu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||xs(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zs(new Ri(r,dt("disableProviderPing")))}}var Bye=Object.defineProperty,Fye=Object.defineProperties,zye=Object.getOwnPropertyDescriptors,cO=Object.getOwnPropertySymbols,Wye=Object.prototype.hasOwnProperty,qye=Object.prototype.propertyIsEnumerable,wx=(t,e,n)=>e in t?Bye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lO=(t,e)=>{for(var n in e||(e={}))Wye.call(e,n)&&wx(t,n,e[n]);if(cO)for(var n of cO(e))qye.call(e,n)&&wx(t,n,e[n]);return t},uO=(t,e)=>Fye(t,zye(e)),zu=(t,e,n)=>wx(t,typeof e!="symbol"?e+"":e,n);class Hye{constructor(e){zu(this,"name","eip155"),zu(this,"client"),zu(this,"chainId"),zu(this,"namespace"),zu(this,"httpProviders"),zu(this,"events"),this.namespace=e.namespace,this.events=dt("events"),this.client=dt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(Xs.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||xs(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zs(new Ri(r,dt("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(xu(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:uO(lO({},u.sessionProperties||{}),{capabilities:uO(lO({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ic("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${nye}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var Vye=Object.defineProperty,Gye=(t,e,n)=>e in t?Vye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wu=(t,e,n)=>Gye(t,typeof e!="symbol"?e+"":e,n);class Kye{constructor(e){Wu(this,"name","solana"),Wu(this,"client"),Wu(this,"httpProviders"),Wu(this,"events"),Wu(this,"namespace"),Wu(this,"chainId"),this.namespace=e.namespace,this.events=dt("events"),this.client=dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Xs.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=xu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||xs(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zs(new Ri(r,dt("disableProviderPing")))}}var Yye=Object.defineProperty,Jye=(t,e,n)=>e in t?Yye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qu=(t,e,n)=>Jye(t,typeof e!="symbol"?e+"":e,n);class Qye{constructor(e){qu(this,"name","cosmos"),qu(this,"client"),qu(this,"httpProviders"),qu(this,"events"),qu(this,"namespace"),qu(this,"chainId"),this.namespace=e.namespace,this.events=dt("events"),this.client=dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Xs.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=xu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||xs(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zs(new Ri(r,dt("disableProviderPing")))}}var Zye=Object.defineProperty,Xye=(t,e,n)=>e in t?Zye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hu=(t,e,n)=>Xye(t,typeof e!="symbol"?e+"":e,n);class ewe{constructor(e){Hu(this,"name","algorand"),Hu(this,"client"),Hu(this,"httpProviders"),Hu(this,"events"),Hu(this,"namespace"),Hu(this,"chainId"),this.namespace=e.namespace,this.events=dt("events"),this.client=dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||xs(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(Xs.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||xs(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Zs(new Ri(r,dt("disableProviderPing")))}}var twe=Object.defineProperty,nwe=(t,e,n)=>e in t?twe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vu=(t,e,n)=>nwe(t,typeof e!="symbol"?e+"":e,n);class rwe{constructor(e){Vu(this,"name","cip34"),Vu(this,"client"),Vu(this,"httpProviders"),Vu(this,"events"),Vu(this,"namespace"),Vu(this,"chainId"),this.namespace=e.namespace,this.events=dt("events"),this.client=dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Xs.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=xu(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zs(new Ri(r,dt("disableProviderPing")))}}var swe=Object.defineProperty,iwe=(t,e,n)=>e in t?swe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gu=(t,e,n)=>iwe(t,typeof e!="symbol"?e+"":e,n);class owe{constructor(e){Gu(this,"name","elrond"),Gu(this,"client"),Gu(this,"httpProviders"),Gu(this,"events"),Gu(this,"namespace"),Gu(this,"chainId"),this.namespace=e.namespace,this.events=dt("events"),this.client=dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Xs.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=xu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||xs(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zs(new Ri(r,dt("disableProviderPing")))}}var awe=Object.defineProperty,cwe=(t,e,n)=>e in t?awe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ku=(t,e,n)=>cwe(t,typeof e!="symbol"?e+"":e,n);class lwe{constructor(e){Ku(this,"name","multiversx"),Ku(this,"client"),Ku(this,"httpProviders"),Ku(this,"events"),Ku(this,"namespace"),Ku(this,"chainId"),this.namespace=e.namespace,this.events=dt("events"),this.client=dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Xs.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=xu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||xs(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zs(new Ri(r,dt("disableProviderPing")))}}var uwe=Object.defineProperty,dwe=(t,e,n)=>e in t?uwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yu=(t,e,n)=>dwe(t,typeof e!="symbol"?e+"":e,n);class hwe{constructor(e){Yu(this,"name","near"),Yu(this,"client"),Yu(this,"httpProviders"),Yu(this,"events"),Yu(this,"namespace"),Yu(this,"chainId"),this.namespace=e.namespace,this.events=dt("events"),this.client=dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||xs(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Xs.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||xs(e,this.namespace);return typeof r>"u"?void 0:new Zs(new Ri(r,dt("disableProviderPing")))}}var fwe=Object.defineProperty,pwe=(t,e,n)=>e in t?fwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ju=(t,e,n)=>pwe(t,typeof e!="symbol"?e+"":e,n);class gwe{constructor(e){Ju(this,"name","tezos"),Ju(this,"client"),Ju(this,"httpProviders"),Ju(this,"events"),Ju(this,"namespace"),Ju(this,"chainId"),this.namespace=e.namespace,this.events=dt("events"),this.client=dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||xs(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Xs.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||xs(e,this.namespace);return typeof r>"u"?void 0:new Zs(new Ri(r))}}var mwe=Object.defineProperty,ywe=(t,e,n)=>e in t?mwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qu=(t,e,n)=>ywe(t,typeof e!="symbol"?e+"":e,n);class wwe{constructor(e){Qu(this,"name",sd),Qu(this,"client"),Qu(this,"httpProviders"),Qu(this,"events"),Qu(this,"namespace"),Qu(this,"chainId"),this.namespace=e.namespace,this.events=dt("events"),this.client=dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Xs.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=Rd(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||xs(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zs(new Ri(r,dt("disableProviderPing")))}}var vwe=Object.defineProperty,bwe=Object.defineProperties,Ewe=Object.getOwnPropertyDescriptors,dO=Object.getOwnPropertySymbols,_we=Object.prototype.hasOwnProperty,Cwe=Object.prototype.propertyIsEnumerable,vx=(t,e,n)=>e in t?vwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Py=(t,e)=>{for(var n in e||(e={}))_we.call(e,n)&&vx(t,n,e[n]);if(dO)for(var n of dO(e))Cwe.call(e,n)&&vx(t,n,e[n]);return t},aE=(t,e)=>bwe(t,Ewe(e)),$s=(t,e,n)=>vx(t,typeof e!="symbol"?e+"":e,n);let xwe=class i4{constructor(e){$s(this,"client"),$s(this,"namespaces"),$s(this,"optionalNamespaces"),$s(this,"sessionProperties"),$s(this,"scopedProperties"),$s(this,"events",new AA),$s(this,"rpcProviders",{}),$s(this,"session"),$s(this,"providerOpts"),$s(this,"logger"),$s(this,"uri"),$s(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:dm(Th({level:(e==null?void 0:e.logger)||Xk})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new i4(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Py({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,Lv(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:qt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=aO(this.session.namespaces);this.namespaces=Ny(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=aO(s.namespaces);return this.namespaces=Ny(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===sd?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(zo(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await qme.init({core:this.providerOpts.core,logger:this.providerOpts.logger||Xk,relayUrl:this.providerOpts.relayUrl||Xme,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>Ed(n)))];oE("client",this.client),oE("events",this.events),oE("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=Uye(n,this.session),s=r4(r),i=Ny(this.namespaces,this.optionalNamespaces),o=aE(Py({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new Hye({namespace:o});break;case"algorand":this.rpcProviders[n]=new ewe({namespace:o});break;case"solana":this.rpcProviders[n]=new Kye({namespace:o});break;case"cosmos":this.rpcProviders[n]=new Qye({namespace:o});break;case"polkadot":this.rpcProviders[n]=new Mye({namespace:o});break;case"cip34":this.rpcProviders[n]=new rwe({namespace:o});break;case"elrond":this.rpcProviders[n]=new owe({namespace:o});break;case"multiversx":this.rpcProviders[n]=new lwe({namespace:o});break;case"near":this.rpcProviders[n]=new hwe({namespace:o});break;case"tezos":this.rpcProviders[n]=new gwe({namespace:o});break;default:this.rpcProviders[sd]?this.rpcProviders[sd].updateNamespace(o):this.rpcProviders[sd]=new wwe({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&zo(o)&&this.events.emit("accountsChanged",o.map(oO))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=Ed(o),l=iE(o)!==iE(a)?`${c}:${iE(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=aE(Py({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",aE(Py({},qt("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Xs.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[sd]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=Ny(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>Ed(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=Ed(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(oO);if(!zo(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${Iy}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${Iy}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${Iy}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(Iy)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};const fp={getSIWX(){return ne.state.siwx},async initializeIfEnabled(){var i;const t=ne.state.siwx,e=$.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if($.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await mt.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),bt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=ve._getClient())==null?void 0:i.disconnect().catch(console.error)),ke.reset("Connect"),bi.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=ne.state.siwx,e=Ce.getPlainAddress($.getActiveCaipAddress()),n=$.getActiveCaipNetwork(),r=ve._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();ue.getConnectorId(n.chainNamespace)===X.CONNECTOR_ID.AUTH&&ke.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),$.setLastConnectedSIWECaipNetwork(n),mt.close(),bt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!mt.state.open||ke.state.view==="ApproveTransaction")&&await mt.open({view:"SIWXSignMessage"}),i.isSmartAccount?bi.showError("This application might not support Smart Accounts"):bi.showError("Signature declined"),bt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=$.getLastConnectedSIWECaipNetwork();r?$.switchActiveNetwork(r):await ve.disconnect()}else mt.close();ke.reset("Connect"),bt.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=$.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,Ce.getPlainAddress($.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=ne.state.siwx,e=Ce.getPlainAddress($.getActiveCaipAddress()),n=$.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=ke.state.view==="ApproveTransaction",r=ke.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=fp.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=$.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(bi.showLoading("Authenticating...",{autoClose:!1}),ce.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),bt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:fp.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),bt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:fp.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{bi.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=$.state.activeChain;return{network:((e=$.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=ce.state.preferredAccountTypes)==null?void 0:n[t])===Dn.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},zt={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},oc={ConnectorExplorerIds:{[X.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[X.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[X.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[X.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[X.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[zt.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[zt.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[zt.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[zt.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[zt.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[zt.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[zt.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[zt.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[zt.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[zt.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[zt.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[X.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[X.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[X.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[X.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[X.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[X.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[X.CONNECTOR_ID.INJECTED]:"Browser Wallet",[X.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[X.CONNECTOR_ID.COINBASE]:"Coinbase",[X.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[X.CONNECTOR_ID.LEDGER]:"Ledger",[X.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[X.CONNECTOR_ID.INJECTED]:"INJECTED",[X.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[X.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[X.CONNECTOR_ID.AUTH]:"AUTH"}},Cg={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${zt.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=$.state.activeChain;return X.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>ue.getConnectorId(e)===X.CONNECTOR_ID.AUTH&&e===t)}},Swe=new AbortController,Vt={EmbeddedWalletAbortController:Swe,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${Awe()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"},SERVER_ERROR_APP_CONFIGURATION:{shortMessage:"Server Error",longMessage:t=>`Failed to get App Configuration ${t||""}`},RATE_LIMITED_APP_CONFIGURATION:{shortMessage:"Rate Limited",longMessage:"Rate limited when trying to get the App Configuration"}}};function Awe(){return typeof window<"u"}const Iwe={createLogger(t,e="error"){const n=Th({level:e}),{logger:r}=TA({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},Twe="rpc.walletconnect.org";function hO(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const cE=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Zi={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===Twe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:X.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${X.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return cE.includes(e)?hO(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:oc.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Zi.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Qm(a.url,a.config))}),cE.includes(t.caipNetworkId)&&r.push(Qm(hO(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Qm(a))}),hT(r)},extendWagmiTransports(t,e,n){if(cE.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return hT([n,Qm(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:X.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=le.getActiveCaipNetworkId(),n=$.getAllRequestedCaipNetworks(),r=Array.from(((c=$.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},y0={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Br=$t({providers:{...y0},providerIds:{...y0}}),St={state:Br,subscribeKey(t,e){return Qn(Br,t,e)},subscribe(t){return Jn(Br,()=>{t(Br)})},subscribeProviders(t){return Jn(Br.providers,()=>t(Br.providers))},setProvider(t,e){e&&(Br.providers[t]=eu(e))},getProvider(t){return Br.providers[t]},setProviderId(t,e){e&&(Br.providerIds[t]=e)},getProviderId(t){if(t)return Br.providerIds[t]},reset(){Br.providers={...y0},Br.providerIds={...y0}},resetChain(t){Br.providers[t]=void 0,Br.providerIds[t]=void 0}},fO={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},qn={set(t,e){ms.isClient&&localStorage.setItem(`${Ee.STORAGE_KEY}${t}`,e)},get(t){return ms.isClient?localStorage.getItem(`${Ee.STORAGE_KEY}${t}`):null},delete(t,e){ms.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ee.STORAGE_KEY}${t}`))}},ky=30*1e3,ms={checkIfAllowedToTriggerEmail(){const t=qn.get(Ee.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<ky){const n=Math.ceil((ky-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=qn.get(Ee.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<ky)return Math.ceil((ky-e)/1e3)}return 0},checkIfRequestExists(t){return Dn.NOT_SAFE_RPC_METHODS.includes(t.method)||Dn.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(fO.transactionHash))||(t==null?void 0:t.match(fO.signedMessage)))?Ee.RPC_RESPONSE_TYPE_TX:Ee.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Dn.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var ut;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(ut||(ut={}));var bx;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(bx||(bx={}));const me=ut.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Fa=t=>{switch(typeof t){case"undefined":return me.undefined;case"string":return me.string;case"number":return isNaN(t)?me.nan:me.number;case"boolean":return me.boolean;case"function":return me.function;case"bigint":return me.bigint;case"symbol":return me.symbol;case"object":return Array.isArray(t)?me.array:t===null?me.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?me.promise:typeof Map<"u"&&t instanceof Map?me.map:typeof Set<"u"&&t instanceof Set?me.set:typeof Date<"u"&&t instanceof Date?me.date:me.object;default:return me.unknown}},ie=ut.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Nwe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Ai extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,ut.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ai.create=t=>new Ai(t);const xg=(t,e)=>{let n;switch(t.code){case ie.invalid_type:t.received===me.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ie.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ut.jsonStringifyReplacer)}`;break;case ie.unrecognized_keys:n=`Unrecognized key(s) in object: ${ut.joinValues(t.keys,", ")}`;break;case ie.invalid_union:n="Invalid input";break;case ie.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ut.joinValues(t.options)}`;break;case ie.invalid_enum_value:n=`Invalid enum value. Expected ${ut.joinValues(t.options)}, received '${t.received}'`;break;case ie.invalid_arguments:n="Invalid function arguments";break;case ie.invalid_return_type:n="Invalid function return type";break;case ie.invalid_date:n="Invalid date";break;case ie.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ut.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ie.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ie.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ie.custom:n="Invalid input";break;case ie.invalid_intersection_types:n="Intersection results could not be merged";break;case ie.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ie.not_finite:n="Number must be finite";break;default:n=e.defaultError,ut.assertNever(t)}return{message:n}};let o4=xg;function Pwe(t){o4=t}function w0(){return o4}const v0=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},kwe=[];function be(t,e){const n=v0({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,w0(),xg].filter(r=>!!r)});t.common.issues.push(n)}class pr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Me;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return pr.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Me;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Me=Object.freeze({status:"aborted"}),a4=t=>({status:"dirty",value:t}),Nr=t=>({status:"valid",value:t}),Ex=t=>t.status==="aborted",_x=t=>t.status==="dirty",Sg=t=>t.status==="valid",b0=t=>typeof Promise<"u"&&t instanceof Promise;var Ie;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ie||(Ie={}));class co{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const pO=(t,e)=>{if(Sg(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ai(t.common.issues);return this._error=n,this._error}}};function qe(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class Ge{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Fa(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Fa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new pr,ctx:{common:e.parent.common,data:e.data,parsedType:Fa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(b0(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fa(e)},i=this._parseSync({data:e,path:s.path,parent:s});return pO(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fa(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(b0(s)?s:Promise.resolve(s));return pO(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:ie.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Pi({schema:this,typeName:$e.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Wo.create(this,this._def)}nullable(){return lu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ii.create(this,this._def)}promise(){return fh.create(this,this._def)}or(e){return Ng.create([this,e],this._def)}and(e){return Pg.create(this,e,this._def)}transform(e){return new Pi({...qe(this._def),schema:this,typeName:$e.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Dg({...qe(this._def),innerType:this,defaultValue:n,typeName:$e.ZodDefault})}brand(){return new l4({typeName:$e.ZodBranded,type:this,...qe(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new x0({...qe(this._def),innerType:this,catchValue:n,typeName:$e.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return bm.create(this,e)}readonly(){return A0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Owe=/^c[^\s-]{8,}$/i,Rwe=/^[a-z][a-z0-9]*$/,$we=/^[0-9A-HJKMNP-TV-Z]{26}$/,Dwe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Uwe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,jwe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let lE;const Lwe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Mwe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Bwe=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function Fwe(t,e){return!!((e==="v4"||!e)&&Lwe.test(t)||(e==="v6"||!e)&&Mwe.test(t))}class _i extends Ge{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==me.string){const i=this._getOrReturnCtx(e);return be(i,{code:ie.invalid_type,expected:me.string,received:i.parsedType}),Me}const r=new pr;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),be(s,{code:ie.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),be(s,{code:ie.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?be(s,{code:ie.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&be(s,{code:ie.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")Uwe.test(e.data)||(s=this._getOrReturnCtx(e,s),be(s,{validation:"email",code:ie.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")lE||(lE=new RegExp(jwe,"u")),lE.test(e.data)||(s=this._getOrReturnCtx(e,s),be(s,{validation:"emoji",code:ie.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")Dwe.test(e.data)||(s=this._getOrReturnCtx(e,s),be(s,{validation:"uuid",code:ie.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")Owe.test(e.data)||(s=this._getOrReturnCtx(e,s),be(s,{validation:"cuid",code:ie.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")Rwe.test(e.data)||(s=this._getOrReturnCtx(e,s),be(s,{validation:"cuid2",code:ie.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")$we.test(e.data)||(s=this._getOrReturnCtx(e,s),be(s,{validation:"ulid",code:ie.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),be(s,{validation:"url",code:ie.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),be(s,{validation:"regex",code:ie.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),be(s,{code:ie.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),be(s,{code:ie.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),be(s,{code:ie.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?Bwe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),be(s,{code:ie.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?Fwe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),be(s,{validation:"ip",code:ie.invalid_string,message:i.message}),r.dirty()):ut.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:ie.invalid_string,...Ie.errToObj(r)})}_addCheck(e){return new _i({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ie.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ie.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ie.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ie.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ie.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ie.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ie.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ie.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...Ie.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ie.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Ie.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ie.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ie.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ie.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ie.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ie.errToObj(n)})}nonempty(e){return this.min(1,Ie.errToObj(e))}trim(){return new _i({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new _i({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new _i({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}_i.create=t=>{var e;return new _i({checks:[],typeName:$e.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...qe(t)})};function zwe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class $c extends Ge{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==me.number){const i=this._getOrReturnCtx(e);return be(i,{code:ie.invalid_type,expected:me.number,received:i.parsedType}),Me}let r;const s=new pr;for(const i of this._def.checks)i.kind==="int"?ut.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{code:ie.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),be(r,{code:ie.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),be(r,{code:ie.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?zwe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),be(r,{code:ie.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{code:ie.not_finite,message:i.message}),s.dirty()):ut.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ie.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ie.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ie.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ie.toString(n))}setLimit(e,n,r,s){return new $c({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ie.toString(s)}]})}_addCheck(e){return new $c({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ie.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ie.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ie.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ie.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ie.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ie.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ut.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}$c.create=t=>new $c({checks:[],typeName:$e.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...qe(t)});class Dc extends Ge{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==me.bigint){const i=this._getOrReturnCtx(e);return be(i,{code:ie.invalid_type,expected:me.bigint,received:i.parsedType}),Me}let r;const s=new pr;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),be(r,{code:ie.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),be(r,{code:ie.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),be(r,{code:ie.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):ut.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ie.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ie.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ie.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ie.toString(n))}setLimit(e,n,r,s){return new Dc({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ie.toString(s)}]})}_addCheck(e){return new Dc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ie.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ie.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Dc.create=t=>{var e;return new Dc({checks:[],typeName:$e.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...qe(t)})};class Ag extends Ge{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==me.boolean){const r=this._getOrReturnCtx(e);return be(r,{code:ie.invalid_type,expected:me.boolean,received:r.parsedType}),Me}return Nr(e.data)}}Ag.create=t=>new Ag({typeName:$e.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...qe(t)});class au extends Ge{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==me.date){const i=this._getOrReturnCtx(e);return be(i,{code:ie.invalid_type,expected:me.date,received:i.parsedType}),Me}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return be(i,{code:ie.invalid_date}),Me}const r=new pr;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),be(s,{code:ie.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),be(s,{code:ie.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):ut.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new au({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ie.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ie.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}au.create=t=>new au({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:$e.ZodDate,...qe(t)});class E0 extends Ge{_parse(e){if(this._getType(e)!==me.symbol){const r=this._getOrReturnCtx(e);return be(r,{code:ie.invalid_type,expected:me.symbol,received:r.parsedType}),Me}return Nr(e.data)}}E0.create=t=>new E0({typeName:$e.ZodSymbol,...qe(t)});class Ig extends Ge{_parse(e){if(this._getType(e)!==me.undefined){const r=this._getOrReturnCtx(e);return be(r,{code:ie.invalid_type,expected:me.undefined,received:r.parsedType}),Me}return Nr(e.data)}}Ig.create=t=>new Ig({typeName:$e.ZodUndefined,...qe(t)});class Tg extends Ge{_parse(e){if(this._getType(e)!==me.null){const r=this._getOrReturnCtx(e);return be(r,{code:ie.invalid_type,expected:me.null,received:r.parsedType}),Me}return Nr(e.data)}}Tg.create=t=>new Tg({typeName:$e.ZodNull,...qe(t)});class hh extends Ge{constructor(){super(...arguments),this._any=!0}_parse(e){return Nr(e.data)}}hh.create=t=>new hh({typeName:$e.ZodAny,...qe(t)});class Ll extends Ge{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Nr(e.data)}}Ll.create=t=>new Ll({typeName:$e.ZodUnknown,...qe(t)});class ea extends Ge{_parse(e){const n=this._getOrReturnCtx(e);return be(n,{code:ie.invalid_type,expected:me.never,received:n.parsedType}),Me}}ea.create=t=>new ea({typeName:$e.ZodNever,...qe(t)});class _0 extends Ge{_parse(e){if(this._getType(e)!==me.undefined){const r=this._getOrReturnCtx(e);return be(r,{code:ie.invalid_type,expected:me.void,received:r.parsedType}),Me}return Nr(e.data)}}_0.create=t=>new _0({typeName:$e.ZodVoid,...qe(t)});class Ii extends Ge{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==me.array)return be(n,{code:ie.invalid_type,expected:me.array,received:n.parsedType}),Me;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(be(n,{code:o?ie.too_big:ie.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(be(n,{code:ie.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(be(n,{code:ie.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new co(n,o,n.path,a)))).then(o=>pr.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new co(n,o,n.path,a)));return pr.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Ii({...this._def,minLength:{value:e,message:Ie.toString(n)}})}max(e,n){return new Ii({...this._def,maxLength:{value:e,message:Ie.toString(n)}})}length(e,n){return new Ii({...this._def,exactLength:{value:e,message:Ie.toString(n)}})}nonempty(e){return this.min(1,e)}}Ii.create=(t,e)=>new Ii({type:t,minLength:null,maxLength:null,exactLength:null,typeName:$e.ZodArray,...qe(e)});function id(t){if(t instanceof Gt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Wo.create(id(r))}return new Gt({...t._def,shape:()=>e})}else return t instanceof Ii?new Ii({...t._def,type:id(t.element)}):t instanceof Wo?Wo.create(id(t.unwrap())):t instanceof lu?lu.create(id(t.unwrap())):t instanceof lo?lo.create(t.items.map(e=>id(e))):t}class Gt extends Ge{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ut.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==me.object){const l=this._getOrReturnCtx(e);return be(l,{code:ie.invalid_type,expected:me.object,received:l.parsedType}),Me}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ea&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new co(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof ea){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(be(s,{code:ie.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new co(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>pr.mergeObjectSync(r,l)):pr.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Ie.errToObj,new Gt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Ie.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new Gt({...this._def,unknownKeys:"strip"})}passthrough(){return new Gt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Gt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Gt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:$e.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Gt({...this._def,catchall:e})}pick(e){const n={};return ut.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Gt({...this._def,shape:()=>n})}omit(e){const n={};return ut.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Gt({...this._def,shape:()=>n})}deepPartial(){return id(this)}partial(e){const n={};return ut.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new Gt({...this._def,shape:()=>n})}required(e){const n={};return ut.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Wo;)i=i._def.innerType;n[r]=i}}),new Gt({...this._def,shape:()=>n})}keyof(){return c4(ut.objectKeys(this.shape))}}Gt.create=(t,e)=>new Gt({shape:()=>t,unknownKeys:"strip",catchall:ea.create(),typeName:$e.ZodObject,...qe(e)});Gt.strictCreate=(t,e)=>new Gt({shape:()=>t,unknownKeys:"strict",catchall:ea.create(),typeName:$e.ZodObject,...qe(e)});Gt.lazycreate=(t,e)=>new Gt({shape:t,unknownKeys:"strip",catchall:ea.create(),typeName:$e.ZodObject,...qe(e)});class Ng extends Ge{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Ai(a.ctx.common.issues));return be(n,{code:ie.invalid_union,unionErrors:o}),Me}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Ai(c));return be(n,{code:ie.invalid_union,unionErrors:a}),Me}}get options(){return this._def.options}}Ng.create=(t,e)=>new Ng({options:t,typeName:$e.ZodUnion,...qe(e)});const fw=t=>t instanceof Og?fw(t.schema):t instanceof Pi?fw(t.innerType()):t instanceof Rg?[t.value]:t instanceof Uc?t.options:t instanceof $g?Object.keys(t.enum):t instanceof Dg?fw(t._def.innerType):t instanceof Ig?[void 0]:t instanceof Tg?[null]:null;class Wv extends Ge{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==me.object)return be(n,{code:ie.invalid_type,expected:me.object,received:n.parsedType}),Me;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(be(n,{code:ie.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Me)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=fw(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new Wv({typeName:$e.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...qe(r)})}}function Cx(t,e){const n=Fa(t),r=Fa(e);if(t===e)return{valid:!0,data:t};if(n===me.object&&r===me.object){const s=ut.objectKeys(e),i=ut.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=Cx(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===me.array&&r===me.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=Cx(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===me.date&&r===me.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Pg extends Ge{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(Ex(i)||Ex(o))return Me;const a=Cx(i.value,o.value);return a.valid?((_x(i)||_x(o))&&n.dirty(),{status:n.value,value:a.data}):(be(r,{code:ie.invalid_intersection_types}),Me)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Pg.create=(t,e,n)=>new Pg({left:t,right:e,typeName:$e.ZodIntersection,...qe(n)});class lo extends Ge{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==me.array)return be(r,{code:ie.invalid_type,expected:me.array,received:r.parsedType}),Me;if(r.data.length<this._def.items.length)return be(r,{code:ie.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Me;!this._def.rest&&r.data.length>this._def.items.length&&(be(r,{code:ie.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new co(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>pr.mergeArray(n,o)):pr.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new lo({...this._def,rest:e})}}lo.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new lo({items:t,typeName:$e.ZodTuple,rest:null,...qe(e)})};class kg extends Ge{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==me.object)return be(r,{code:ie.invalid_type,expected:me.object,received:r.parsedType}),Me;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new co(r,a,r.path,a)),value:o._parse(new co(r,r.data[a],r.path,a))});return r.common.async?pr.mergeObjectAsync(n,s):pr.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Ge?new kg({keyType:e,valueType:n,typeName:$e.ZodRecord,...qe(r)}):new kg({keyType:_i.create(),valueType:e,typeName:$e.ZodRecord,...qe(n)})}}class C0 extends Ge{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==me.map)return be(r,{code:ie.invalid_type,expected:me.map,received:r.parsedType}),Me;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new co(r,a,r.path,[l,"key"])),value:i._parse(new co(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return Me;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return Me;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}C0.create=(t,e,n)=>new C0({valueType:e,keyType:t,typeName:$e.ZodMap,...qe(n)});class cu extends Ge{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==me.set)return be(r,{code:ie.invalid_type,expected:me.set,received:r.parsedType}),Me;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(be(r,{code:ie.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(be(r,{code:ie.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return Me;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new co(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new cu({...this._def,minSize:{value:e,message:Ie.toString(n)}})}max(e,n){return new cu({...this._def,maxSize:{value:e,message:Ie.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}cu.create=(t,e)=>new cu({valueType:t,minSize:null,maxSize:null,typeName:$e.ZodSet,...qe(e)});class $d extends Ge{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==me.function)return be(n,{code:ie.invalid_type,expected:me.function,received:n.parsedType}),Me;function r(a,c){return v0({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,w0(),xg].filter(l=>!!l),issueData:{code:ie.invalid_arguments,argumentsError:c}})}function s(a,c){return v0({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,w0(),xg].filter(l=>!!l),issueData:{code:ie.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof fh){const a=this;return Nr(async function(...c){const l=new Ai([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return Nr(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new Ai([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new Ai([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new $d({...this._def,args:lo.create(e).rest(Ll.create())})}returns(e){return new $d({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new $d({args:e||lo.create([]).rest(Ll.create()),returns:n||Ll.create(),typeName:$e.ZodFunction,...qe(r)})}}class Og extends Ge{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Og.create=(t,e)=>new Og({getter:t,typeName:$e.ZodLazy,...qe(e)});class Rg extends Ge{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return be(n,{received:n.data,code:ie.invalid_literal,expected:this._def.value}),Me}return{status:"valid",value:e.data}}get value(){return this._def.value}}Rg.create=(t,e)=>new Rg({value:t,typeName:$e.ZodLiteral,...qe(e)});function c4(t,e){return new Uc({values:t,typeName:$e.ZodEnum,...qe(e)})}class Uc extends Ge{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return be(n,{expected:ut.joinValues(r),received:n.parsedType,code:ie.invalid_type}),Me}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return be(n,{received:n.data,code:ie.invalid_enum_value,options:r}),Me}return Nr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return Uc.create(e)}exclude(e){return Uc.create(this.options.filter(n=>!e.includes(n)))}}Uc.create=c4;class $g extends Ge{_parse(e){const n=ut.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==me.string&&r.parsedType!==me.number){const s=ut.objectValues(n);return be(r,{expected:ut.joinValues(s),received:r.parsedType,code:ie.invalid_type}),Me}if(n.indexOf(e.data)===-1){const s=ut.objectValues(n);return be(r,{received:r.data,code:ie.invalid_enum_value,options:s}),Me}return Nr(e.data)}get enum(){return this._def.values}}$g.create=(t,e)=>new $g({values:t,typeName:$e.ZodNativeEnum,...qe(e)});class fh extends Ge{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==me.promise&&n.common.async===!1)return be(n,{code:ie.invalid_type,expected:me.promise,received:n.parsedType}),Me;const r=n.parsedType===me.promise?n.data:Promise.resolve(n.data);return Nr(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}fh.create=(t,e)=>new fh({type:t,typeName:$e.ZodPromise,...qe(e)});class Pi extends Ge{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===$e.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{be(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Me:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Me:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Sg(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Sg(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);ut.assertNever(s)}}Pi.create=(t,e,n)=>new Pi({schema:t,typeName:$e.ZodEffects,effect:e,...qe(n)});Pi.createWithPreprocess=(t,e,n)=>new Pi({schema:e,effect:{type:"preprocess",transform:t},typeName:$e.ZodEffects,...qe(n)});class Wo extends Ge{_parse(e){return this._getType(e)===me.undefined?Nr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Wo.create=(t,e)=>new Wo({innerType:t,typeName:$e.ZodOptional,...qe(e)});class lu extends Ge{_parse(e){return this._getType(e)===me.null?Nr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}lu.create=(t,e)=>new lu({innerType:t,typeName:$e.ZodNullable,...qe(e)});class Dg extends Ge{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===me.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Dg.create=(t,e)=>new Dg({innerType:t,typeName:$e.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...qe(e)});class x0 extends Ge{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return b0(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ai(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ai(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}x0.create=(t,e)=>new x0({innerType:t,typeName:$e.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...qe(e)});class S0 extends Ge{_parse(e){if(this._getType(e)!==me.nan){const r=this._getOrReturnCtx(e);return be(r,{code:ie.invalid_type,expected:me.nan,received:r.parsedType}),Me}return{status:"valid",value:e.data}}}S0.create=t=>new S0({typeName:$e.ZodNaN,...qe(t)});const Wwe=Symbol("zod_brand");class l4 extends Ge{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class bm extends Ge{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Me:i.status==="dirty"?(n.dirty(),a4(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Me:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new bm({in:e,out:n,typeName:$e.ZodPipeline})}}class A0 extends Ge{_parse(e){const n=this._def.innerType._parse(e);return Sg(n)&&(n.value=Object.freeze(n.value)),n}}A0.create=(t,e)=>new A0({innerType:t,typeName:$e.ZodReadonly,...qe(e)});const u4=(t,e={},n)=>t?hh.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):hh.create(),qwe={object:Gt.lazycreate};var $e;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})($e||($e={}));const Hwe=(t,e={message:`Input not instance of ${t.name}`})=>u4(n=>n instanceof t,e),d4=_i.create,h4=$c.create,Vwe=S0.create,Gwe=Dc.create,f4=Ag.create,Kwe=au.create,Ywe=E0.create,Jwe=Ig.create,Qwe=Tg.create,Zwe=hh.create,Xwe=Ll.create,e0e=ea.create,t0e=_0.create,n0e=Ii.create,r0e=Gt.create,s0e=Gt.strictCreate,i0e=Ng.create,o0e=Wv.create,a0e=Pg.create,c0e=lo.create,l0e=kg.create,u0e=C0.create,d0e=cu.create,h0e=$d.create,f0e=Og.create,p0e=Rg.create,g0e=Uc.create,m0e=$g.create,y0e=fh.create,gO=Pi.create,w0e=Wo.create,v0e=lu.create,b0e=Pi.createWithPreprocess,E0e=bm.create,_0e=()=>d4().optional(),C0e=()=>h4().optional(),x0e=()=>f4().optional(),S0e={string:t=>_i.create({...t,coerce:!0}),number:t=>$c.create({...t,coerce:!0}),boolean:t=>Ag.create({...t,coerce:!0}),bigint:t=>Dc.create({...t,coerce:!0}),date:t=>au.create({...t,coerce:!0})},A0e=Me;var N=Object.freeze({__proto__:null,defaultErrorMap:xg,setErrorMap:Pwe,getErrorMap:w0,makeIssue:v0,EMPTY_PATH:kwe,addIssueToContext:be,ParseStatus:pr,INVALID:Me,DIRTY:a4,OK:Nr,isAborted:Ex,isDirty:_x,isValid:Sg,isAsync:b0,get util(){return ut},get objectUtil(){return bx},ZodParsedType:me,getParsedType:Fa,ZodType:Ge,ZodString:_i,ZodNumber:$c,ZodBigInt:Dc,ZodBoolean:Ag,ZodDate:au,ZodSymbol:E0,ZodUndefined:Ig,ZodNull:Tg,ZodAny:hh,ZodUnknown:Ll,ZodNever:ea,ZodVoid:_0,ZodArray:Ii,ZodObject:Gt,ZodUnion:Ng,ZodDiscriminatedUnion:Wv,ZodIntersection:Pg,ZodTuple:lo,ZodRecord:kg,ZodMap:C0,ZodSet:cu,ZodFunction:$d,ZodLazy:Og,ZodLiteral:Rg,ZodEnum:Uc,ZodNativeEnum:$g,ZodPromise:fh,ZodEffects:Pi,ZodTransformer:Pi,ZodOptional:Wo,ZodNullable:lu,ZodDefault:Dg,ZodCatch:x0,ZodNaN:S0,BRAND:Wwe,ZodBranded:l4,ZodPipeline:bm,ZodReadonly:A0,custom:u4,Schema:Ge,ZodSchema:Ge,late:qwe,get ZodFirstPartyTypeKind(){return $e},coerce:S0e,any:Zwe,array:n0e,bigint:Gwe,boolean:f4,date:Kwe,discriminatedUnion:o0e,effect:gO,enum:g0e,function:h0e,instanceof:Hwe,intersection:a0e,lazy:f0e,literal:p0e,map:u0e,nan:Vwe,nativeEnum:m0e,never:e0e,null:Qwe,nullable:v0e,number:h4,object:r0e,oboolean:x0e,onumber:C0e,optional:w0e,ostring:_0e,pipeline:E0e,preprocess:b0e,promise:y0e,record:l0e,set:d0e,strictObject:s0e,string:d4,symbol:Ywe,transformer:gO,tuple:c0e,undefined:Jwe,union:i0e,unknown:Xwe,void:t0e,NEVER:A0e,ZodIssueCode:ie,quotelessJson:Nwe,ZodError:Ai});const en=N.object({message:N.string()});function ye(t){return N.literal(Ee[t])}N.object({accessList:N.array(N.string()),blockHash:N.string().nullable(),blockNumber:N.string().nullable(),chainId:N.string().or(N.number()),from:N.string(),gas:N.string(),hash:N.string(),input:N.string().nullable(),maxFeePerGas:N.string(),maxPriorityFeePerGas:N.string(),nonce:N.string(),r:N.string(),s:N.string(),to:N.string(),transactionIndex:N.string().nullable(),type:N.string(),v:N.string(),value:N.string()});const I0e=N.object({chainId:N.string().or(N.number())}),T0e=N.object({email:N.string().email()}),N0e=N.object({otp:N.string()}),P0e=N.object({uri:N.string(),preferredAccountType:N.optional(N.string()),chainId:N.optional(N.string().or(N.number()))}),k0e=N.object({chainId:N.optional(N.string().or(N.number())),preferredAccountType:N.optional(N.string()),socialUri:N.optional(N.string())}),O0e=N.object({provider:N.enum(["google","github","apple","facebook","x","discord"])}),R0e=N.object({email:N.string().email()}),$0e=N.object({otp:N.string()}),D0e=N.object({otp:N.string()}),U0e=N.object({themeMode:N.optional(N.enum(["light","dark"])),themeVariables:N.optional(N.record(N.string(),N.string().or(N.number()))),w3mThemeVariables:N.optional(N.record(N.string(),N.string()))}),j0e=N.object({metadata:N.object({name:N.string(),description:N.string(),url:N.string(),icons:N.array(N.string())}).optional(),sdkVersion:N.string().optional(),sdkType:N.string().optional(),projectId:N.string()}),L0e=N.object({type:N.string()}),M0e=N.object({action:N.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),B0e=N.object({url:N.string()}),F0e=N.object({userName:N.string()}),z0e=N.object({email:N.string().optional().nullable(),address:N.string(),chainId:N.string().or(N.number()),accounts:N.array(N.object({address:N.string(),type:N.enum([Dn.ACCOUNT_TYPES.EOA,Dn.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:N.string().optional().nullable(),preferredAccountType:N.optional(N.string())}),W0e=N.object({action:N.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),q0e=N.object({email:N.string().email().optional().nullable(),address:N.string(),chainId:N.string().or(N.number()),smartAccountDeployed:N.optional(N.boolean()),accounts:N.array(N.object({address:N.string(),type:N.enum([Dn.ACCOUNT_TYPES.EOA,Dn.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:N.optional(N.string())}),H0e=N.object({uri:N.string()}),V0e=N.object({isConnected:N.boolean()}),G0e=N.object({chainId:N.string().or(N.number())}),K0e=N.object({chainId:N.string().or(N.number())}),Y0e=N.object({newEmail:N.string().email()}),J0e=N.object({smartAccountEnabledNetworks:N.array(N.number())});N.object({address:N.string(),isDeployed:N.boolean()});const Q0e=N.object({version:N.string().optional()}),Z0e=N.object({type:N.string(),address:N.string()}),X0e=N.any(),eve=N.object({method:N.literal("eth_accounts")}),tve=N.object({method:N.literal("eth_blockNumber")}),nve=N.object({method:N.literal("eth_call"),params:N.array(N.any())}),rve=N.object({method:N.literal("eth_chainId")}),sve=N.object({method:N.literal("eth_estimateGas"),params:N.array(N.any())}),ive=N.object({method:N.literal("eth_feeHistory"),params:N.array(N.any())}),ove=N.object({method:N.literal("eth_gasPrice")}),ave=N.object({method:N.literal("eth_getAccount"),params:N.array(N.any())}),cve=N.object({method:N.literal("eth_getBalance"),params:N.array(N.any())}),lve=N.object({method:N.literal("eth_getBlockByHash"),params:N.array(N.any())}),uve=N.object({method:N.literal("eth_getBlockByNumber"),params:N.array(N.any())}),dve=N.object({method:N.literal("eth_getBlockReceipts"),params:N.array(N.any())}),hve=N.object({method:N.literal("eth_getBlockTransactionCountByHash"),params:N.array(N.any())}),fve=N.object({method:N.literal("eth_getBlockTransactionCountByNumber"),params:N.array(N.any())}),pve=N.object({method:N.literal("eth_getCode"),params:N.array(N.any())}),gve=N.object({method:N.literal("eth_getFilterChanges"),params:N.array(N.any())}),mve=N.object({method:N.literal("eth_getFilterLogs"),params:N.array(N.any())}),yve=N.object({method:N.literal("eth_getLogs"),params:N.array(N.any())}),wve=N.object({method:N.literal("eth_getProof"),params:N.array(N.any())}),vve=N.object({method:N.literal("eth_getStorageAt"),params:N.array(N.any())}),bve=N.object({method:N.literal("eth_getTransactionByBlockHashAndIndex"),params:N.array(N.any())}),Eve=N.object({method:N.literal("eth_getTransactionByBlockNumberAndIndex"),params:N.array(N.any())}),_ve=N.object({method:N.literal("eth_getTransactionByHash"),params:N.array(N.any())}),Cve=N.object({method:N.literal("eth_getTransactionCount"),params:N.array(N.any())}),xve=N.object({method:N.literal("eth_getTransactionReceipt"),params:N.array(N.any())}),Sve=N.object({method:N.literal("eth_getUncleCountByBlockHash"),params:N.array(N.any())}),Ave=N.object({method:N.literal("eth_getUncleCountByBlockNumber"),params:N.array(N.any())}),Ive=N.object({method:N.literal("eth_maxPriorityFeePerGas")}),Tve=N.object({method:N.literal("eth_newBlockFilter")}),Nve=N.object({method:N.literal("eth_newFilter"),params:N.array(N.any())}),Pve=N.object({method:N.literal("eth_newPendingTransactionFilter")}),kve=N.object({method:N.literal("eth_sendRawTransaction"),params:N.array(N.any())}),Ove=N.object({method:N.literal("eth_syncing"),params:N.array(N.any())}),Rve=N.object({method:N.literal("eth_uninstallFilter"),params:N.array(N.any())}),mO=N.object({method:N.literal("personal_sign"),params:N.array(N.any())}),$ve=N.object({method:N.literal("eth_signTypedData_v4"),params:N.array(N.any())}),Dve=N.object({method:N.literal("eth_sendTransaction"),params:N.array(N.any())}),Uve=N.object({method:N.literal("solana_signMessage"),params:N.object({message:N.string(),pubkey:N.string()})}),jve=N.object({method:N.literal("solana_signTransaction"),params:N.object({transaction:N.string()})}),Lve=N.object({method:N.literal("solana_signAllTransactions"),params:N.object({transactions:N.array(N.string())})}),Mve=N.object({method:N.literal("solana_signAndSendTransaction"),params:N.object({transaction:N.string(),options:N.object({skipPreflight:N.boolean().optional(),preflightCommitment:N.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:N.number().optional(),minContextSlot:N.number().optional()}).optional()})}),Bve=N.object({method:N.literal("wallet_sendCalls"),params:N.array(N.object({chainId:N.string().or(N.number()).optional(),from:N.string().optional(),version:N.string().optional(),capabilities:N.any().optional(),calls:N.array(N.object({to:N.string().startsWith("0x"),data:N.string().startsWith("0x").optional(),value:N.string().optional()}))}))}),Fve=N.object({method:N.literal("wallet_getCallsStatus"),params:N.array(N.string())}),zve=N.object({method:N.literal("wallet_getCapabilities")}),Wve=N.object({method:N.literal("wallet_grantPermissions"),params:N.array(N.any())}),qve=N.object({method:N.literal("wallet_revokePermissions"),params:N.any()}),Hve=N.object({method:N.literal("wallet_getAssets"),params:N.any()}),yO=N.object({token:N.string()}),we=N.object({id:N.string().optional()}),_f={appEvent:we.extend({type:ye("APP_SWITCH_NETWORK"),payload:I0e}).or(we.extend({type:ye("APP_CONNECT_EMAIL"),payload:T0e})).or(we.extend({type:ye("APP_CONNECT_DEVICE")})).or(we.extend({type:ye("APP_CONNECT_OTP"),payload:N0e})).or(we.extend({type:ye("APP_CONNECT_SOCIAL"),payload:P0e})).or(we.extend({type:ye("APP_GET_FARCASTER_URI")})).or(we.extend({type:ye("APP_CONNECT_FARCASTER")})).or(we.extend({type:ye("APP_GET_USER"),payload:N.optional(k0e)})).or(we.extend({type:ye("APP_GET_SOCIAL_REDIRECT_URI"),payload:O0e})).or(we.extend({type:ye("APP_SIGN_OUT")})).or(we.extend({type:ye("APP_IS_CONNECTED"),payload:N.optional(yO)})).or(we.extend({type:ye("APP_GET_CHAIN_ID")})).or(we.extend({type:ye("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(we.extend({type:ye("APP_INIT_SMART_ACCOUNT")})).or(we.extend({type:ye("APP_SET_PREFERRED_ACCOUNT"),payload:L0e})).or(we.extend({type:ye("APP_RPC_REQUEST"),payload:mO.or(Hve).or(eve).or(tve).or(nve).or(rve).or(sve).or(ive).or(ove).or(ave).or(cve).or(lve).or(uve).or(dve).or(hve).or(fve).or(pve).or(gve).or(mve).or(yve).or(wve).or(vve).or(bve).or(Eve).or(_ve).or(Cve).or(xve).or(Sve).or(Ave).or(Ive).or(Tve).or(Nve).or(Pve).or(kve).or(Ove).or(Rve).or(mO).or($ve).or(Dve).or(Uve).or(jve).or(Lve).or(Mve).or(Fve).or(Bve).or(zve).or(Wve).or(qve)})).or(we.extend({type:ye("APP_UPDATE_EMAIL"),payload:R0e})).or(we.extend({type:ye("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:$0e})).or(we.extend({type:ye("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:D0e})).or(we.extend({type:ye("APP_SYNC_THEME"),payload:U0e})).or(we.extend({type:ye("APP_SYNC_DAPP_DATA"),payload:j0e})).or(we.extend({type:ye("APP_RELOAD")})),frameEvent:we.extend({type:ye("FRAME_SWITCH_NETWORK_ERROR"),payload:en}).or(we.extend({type:ye("FRAME_SWITCH_NETWORK_SUCCESS"),payload:K0e})).or(we.extend({type:ye("FRAME_CONNECT_EMAIL_SUCCESS"),payload:M0e})).or(we.extend({type:ye("FRAME_CONNECT_EMAIL_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:B0e})).or(we.extend({type:ye("FRAME_GET_FARCASTER_URI_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:F0e})).or(we.extend({type:ye("FRAME_CONNECT_FARCASTER_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_CONNECT_OTP_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_CONNECT_OTP_SUCCESS")})).or(we.extend({type:ye("FRAME_CONNECT_DEVICE_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_CONNECT_DEVICE_SUCCESS")})).or(we.extend({type:ye("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:z0e})).or(we.extend({type:ye("FRAME_CONNECT_SOCIAL_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_GET_USER_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_GET_USER_SUCCESS"),payload:q0e})).or(we.extend({type:ye("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:H0e})).or(we.extend({type:ye("FRAME_SIGN_OUT_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_SIGN_OUT_SUCCESS")})).or(we.extend({type:ye("FRAME_IS_CONNECTED_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_IS_CONNECTED_SUCCESS"),payload:V0e})).or(we.extend({type:ye("FRAME_GET_CHAIN_ID_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_GET_CHAIN_ID_SUCCESS"),payload:G0e})).or(we.extend({type:ye("FRAME_RPC_REQUEST_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_RPC_REQUEST_SUCCESS"),payload:X0e})).or(we.extend({type:ye("FRAME_SESSION_UPDATE"),payload:yO})).or(we.extend({type:ye("FRAME_UPDATE_EMAIL_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_UPDATE_EMAIL_SUCCESS"),payload:W0e})).or(we.extend({type:ye("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(we.extend({type:ye("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:Y0e})).or(we.extend({type:ye("FRAME_SYNC_THEME_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_SYNC_THEME_SUCCESS")})).or(we.extend({type:ye("FRAME_SYNC_DAPP_DATA_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(we.extend({type:ye("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:J0e})).or(we.extend({type:ye("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:Z0e})).or(we.extend({type:ye("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_READY"),payload:Q0e})).or(we.extend({type:ye("FRAME_RELOAD_ERROR"),payload:en})).or(we.extend({type:ye("FRAME_RELOAD_SUCCESS")}))};function uE(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}class Vve{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=X.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!uE(Ee.FRAME_EVENT_KEY,l))return;const u=_f.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}ms.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{ms.isClient&&window.addEventListener("message",({data:o})=>{if(!uE(Ee.FRAME_EVENT_KEY,o))return;const a=_f.frameEvent.parse(o);i(a)})},onAppEvent:i=>{ms.isClient&&window.addEventListener("message",({data:o})=>{if(!uE(Ee.APP_EVENT_KEY,o))return;const a=_f.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(ms.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");_f.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(ms.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");_f.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),ms.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${EX}?projectId=${e}&chainId=${r}&version=${CX}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class Gve{constructor(e){var i;const n=Th({level:_X}),{logger:r,chunkLoggerController:s}=TA({opts:n});this.logger=gr(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class Kve{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new Gve(e)),this.abortController=i,this.w3mFrame=new Vve({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Ee.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!qn.get(Ee.EMAIL_LOGIN_USED_KEY)}getEmail(){return qn.get(Ee.EMAIL)}getUsername(){return qn.get(Ee.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Ee.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{ms.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Ee.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Ee.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Ee.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Ee.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Ee.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Ee.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Ee.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Ee.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Ee.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Ee.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Ee.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Ee.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Ee.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:Ee.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ee.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:Ee.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Ee.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Ee.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:Ee.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Ee.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(Dn.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:Ee.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ee.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ee.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Ee.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ee.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ee.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ee.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Ee.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Dn.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ee.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===Ee.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{Dn.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Ee.APP_SYNC_DAPP_DATA,Ee.APP_SYNC_THEME,Ee.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Ee.APP_CONNECT_EMAIL,Ee.APP_CONNECT_DEVICE,Ee.APP_CONNECT_OTP,Ee.APP_CONNECT_SOCIAL,Ee.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,y){var b,v,_;w.id===u&&((v=y==null?void 0:(b=y.logger).info)==null||v.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((_=w.payload)==null?void 0:_.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){qn.set(Ee.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){qn.set(Ee.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&qn.set(Ee.EMAIL,e),qn.set(Ee.EMAIL_LOGIN_USED_KEY,"true"),qn.delete(Ee.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){qn.delete(Ee.EMAIL_LOGIN_USED_KEY),qn.delete(Ee.EMAIL),qn.delete(Ee.LAST_USED_CHAIN_KEY),qn.delete(Ee.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&qn.set(Ee.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=qn.get(Ee.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){qn.set(Ee.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}}class Ml{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return Ml.instance||(Ml.instance=new Kve({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),Ml.instance}}var wO={};const Yve={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof wO<"u"?wO.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},xx={filterOutDuplicatesByRDNS(t){const e=ne.state.enableEIP6963?ue.state.connectors:[],n=le.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&Ce.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=ue.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=le.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=ue.state,{featuredWalletIds:n}=ne.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=ne.state.features)==null?void 0:c.connectMethodsOrder),r=e||ue.state.connectors;if(n)return n;const{injected:s,announced:i}=pw.getConnectorsByType(r,Se.state.recommended,Se.state.featured),o=s.filter(pw.showConnector),a=i.filter(pw.showConnector);return o.length||a.length?["wallet","email","social"]:Yve.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Se.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&Se.state.excludedWallets.some(r=>Cg.isLowerCaseMatch(r.name,t.name));return e||n}},pw={getConnectorsByType(t,e,n){const{customWallets:r}=ne.state,s=le.getRecentWallets(),i=xx.filterOutDuplicateWallets(e),o=xx.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&Se.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&Se.state.excludedWallets.some(i=>Cg.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!Ce.isMobile()||Ce.isMobile()&&!e&&!ve.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from($.state.chains.values()).some(n=>ue.getConnectorId(n.namespace)===X.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=ne.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=pw.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:ne.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(y=>y.isEnabled),p=new Set(f.map(y=>y.type)),g=c.filter(y=>p.has(y)).map(y=>({type:y,isEnabled:!0})),w=f.filter(({type:y})=>!g.some(({type:v})=>v===y));return Array.from(new Set([...g,...w].map(({type:y})=>y)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!Ce.isMobile())return{accounts:[],chainId:void 0};if(t.id===X.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const gw=globalThis,cI=gw.ShadowRoot&&(gw.ShadyCSS===void 0||gw.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,lI=Symbol(),vO=new WeakMap;let p4=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==lI)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(cI&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=vO.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&vO.set(n,e))}return e}toString(){return this.cssText}};const Ds=t=>new p4(typeof t=="string"?t:t+"",void 0,lI),Dd=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new p4(n,t,lI)},Jve=(t,e)=>{if(cI)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=gw.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},bO=cI?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return Ds(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Qve,defineProperty:Zve,getOwnPropertyDescriptor:Xve,getOwnPropertyNames:ebe,getOwnPropertySymbols:tbe,getPrototypeOf:nbe}=Object,Cc=globalThis,EO=Cc.trustedTypes,rbe=EO?EO.emptyScript:"",dE=Cc.reactiveElementPolyfillSupport,pp=(t,e)=>t,Sx={toAttribute(t,e){switch(e){case Boolean:t=t?rbe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},g4=(t,e)=>!Qve(t,e),_O={attribute:!0,type:String,converter:Sx,reflect:!1,useDefault:!1,hasChanged:g4};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Cc.litPropertyMetadata??(Cc.litPropertyMetadata=new WeakMap);let od=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=_O){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&Zve(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=Xve(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??_O}static _$Ei(){if(this.hasOwnProperty(pp("elementProperties")))return;const e=nbe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(pp("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(pp("properties"))){const n=this.properties,r=[...ebe(n),...tbe(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(bO(s))}else e!==void 0&&n.push(bO(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Jve(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:Sx).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:Sx;this._$Em=s,this[s]=c.fromAttribute(n,a.type)??((o=this._$Ej)==null?void 0:o.get(s))??null,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??g4)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};od.elementStyles=[],od.shadowRootOptions={mode:"open"},od[pp("elementProperties")]=new Map,od[pp("finalized")]=new Map,dE==null||dE({ReactiveElement:od}),(Cc.reactiveElementVersions??(Cc.reactiveElementVersions=[])).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const gp=globalThis,I0=gp.trustedTypes,CO=I0?I0.createPolicy("lit-html",{createHTML:t=>t}):void 0,m4="$lit$",za=`lit$${Math.random().toFixed(9).slice(2)}$`,y4="?"+za,sbe=`<${y4}>`,uu=document,Ug=()=>uu.createComment(""),jg=t=>t===null||typeof t!="object"&&typeof t!="function",uI=Array.isArray,ibe=t=>uI(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",hE=`[ 	
\f\r]`,Cf=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,xO=/-->/g,SO=/>/g,nl=RegExp(`>|${hE}(?:([^\\s"'>=/]+)(${hE}*=${hE}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),AO=/'/g,IO=/"/g,w4=/^(?:script|style|textarea|title)$/i,v4=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),xxe=v4(1),Sxe=v4(2),ph=Symbol.for("lit-noChange"),On=Symbol.for("lit-nothing"),TO=new WeakMap,Sl=uu.createTreeWalker(uu,129);function b4(t,e){if(!uI(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return CO!==void 0?CO.createHTML(e):e}const obe=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=Cf;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===Cf?u[1]==="!--"?o=xO:u[1]!==void 0?o=SO:u[2]!==void 0?(w4.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=nl):u[3]!==void 0&&(o=nl):o===nl?u[0]===">"?(o=s??Cf,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?nl:u[3]==='"'?IO:AO):o===IO||o===AO?o=nl:o===xO||o===SO?o=Cf:(o=nl,s=void 0);const f=o===nl&&t[a+1].startsWith("/>")?" ":"";i+=o===Cf?c+sbe:d>=0?(r.push(l),c.slice(0,d)+m4+c.slice(d)+za+f):c+za+(d===-2?a:f)}return[b4(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class Lg{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=obe(e,n);if(this.el=Lg.createElement(l,r),Sl.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Sl.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(m4)){const h=u[o++],f=s.getAttribute(d).split(za),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?cbe:p[1]==="?"?lbe:p[1]==="@"?ube:qv}),s.removeAttribute(d)}else d.startsWith(za)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(w4.test(s.tagName)){const d=s.textContent.split(za),h=d.length-1;if(h>0){s.textContent=I0?I0.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],Ug()),Sl.nextNode(),c.push({type:2,index:++i});s.append(d[h],Ug())}}}else if(s.nodeType===8)if(s.data===y4)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(za,d+1))!==-1;)c.push({type:7,index:i}),d+=za.length-1}i++}}static createElement(e,n){const r=uu.createElement("template");return r.innerHTML=e,r}}function gh(t,e,n=t,r){var o,a;if(e===ph)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=jg(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=gh(t,s._$AS(t,e.values),s,r)),e}class abe{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??uu).importNode(n,!0);Sl.currentNode=s;let i=Sl.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new Em(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new dbe(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=Sl.nextNode(),o++)}return Sl.currentNode=uu,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class Em{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=On,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=gh(this,e,n),jg(e)?e===On||e==null||e===""?(this._$AH!==On&&this._$AR(),this._$AH=On):e!==this._$AH&&e!==ph&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):ibe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==On&&jg(this._$AH)?this._$AA.nextSibling.data=e:this.T(uu.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=Lg.createElement(b4(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new abe(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=TO.get(e.strings);return n===void 0&&TO.set(e.strings,n=new Lg(e)),n}k(e){uI(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new Em(this.O(Ug()),this.O(Ug()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class qv{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=On,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=On}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=gh(this,e,n,0),o=!jg(e)||e!==this._$AH&&e!==ph,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=gh(this,a[r+c],n,c),l===ph&&(l=this._$AH[c]),o||(o=!jg(l)||l!==this._$AH[c]),l===On?e=On:e!==On&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===On?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class cbe extends qv{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===On?void 0:e}}class lbe extends qv{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==On)}}class ube extends qv{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=gh(this,e,n,0)??On)===ph)return;const r=this._$AH,s=e===On&&r!==On||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==On&&(r===On||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class dbe{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){gh(this,e)}}const fE=gp.litHtmlPolyfillSupport;fE==null||fE(Lg,Em),(gp.litHtmlVersions??(gp.litHtmlVersions=[])).push("3.3.0");const hbe=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new Em(e.insertBefore(Ug(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Bl=globalThis;class mw extends od{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=hbe(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return ph}}var yR;mw._$litElement$=!0,mw.finalized=!0,(yR=Bl.litElementHydrateSupport)==null||yR.call(Bl,{LitElement:mw});const pE=Bl.litElementPolyfillSupport;pE==null||pE({LitElement:mw});(Bl.litElementVersions??(Bl.litElementVersions=[])).push("4.2.0");let mp,xc,Sc;function Axe(t,e){mp=document.createElement("style"),xc=document.createElement("style"),Sc=document.createElement("style"),mp.textContent=Ud(t).core.cssText,xc.textContent=Ud(t).dark.cssText,Sc.textContent=Ud(t).light.cssText,document.head.appendChild(mp),document.head.appendChild(xc),document.head.appendChild(Sc),E4(e)}function E4(t){xc&&Sc&&(t==="light"?(xc.removeAttribute("media"),Sc.media="enabled"):(Sc.removeAttribute("media"),xc.media="enabled"))}function fbe(t){mp&&xc&&Sc&&(mp.textContent=Ud(t).core.cssText,xc.textContent=Ud(t).dark.cssText,Sc.textContent=Ud(t).light.cssText)}function Ud(t){return{core:Dd`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${Ds(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${Ds((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${Ds((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${Ds((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${Ds((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Dd`
      :root {
        --w3m-color-mix: ${Ds((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${Ds(Lo(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${Ds(Lo(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Dd`
      :root {
        --w3m-color-mix: ${Ds((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${Ds(Lo(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${Ds(Lo(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const Ixe=Dd`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,Txe=Dd`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,Nxe=Dd`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,zf={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},_4=hW({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function _m(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const NO=_m({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),PO=_m({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});_m({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});_m({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});_m({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const pbe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},yp={getMethodsByChainNamespace(t){return pbe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case NO.caipNetworkId:u.chains.push(NO.deprecatedCaipNetworkId);break;case PO.caipNetworkId:u.chains.push(PO.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await rp.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};class dI{constructor({provider:e,namespace:n}){this.id=X.CONNECTOR_ID.WALLET_CONNECT,this.name=oc.ConnectorNamesMap[X.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=oc.ConnectorImageIds[X.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=$.getCaipNetworks.bind($),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=ne.state.universalProviderConfigOverride,s=yp.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return fp.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:gbe})}}const gbe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class C4{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>$.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:X.CONNECTOR_ID.AUTH,type:"AUTH",name:X.CONNECTOR_NAMES.AUTH,provider:e,imageId:oc.ConnectorImageIds[X.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){ce.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=ce.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof dI);if(!e)throw new Error("WalletConnectConnector not found");return e}}class mbe extends C4{setUniversalProvider(e){this.addConnector(new dI({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>Ce.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&vt.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(ce.state.balanceLoading&&e.chainId===((c=$.state.activeCaipNetwork)==null?void 0:c.id))return{balance:ce.state.balance||"0.00",symbol:ce.state.balanceSymbol||""};const s=(await ce.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=$.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===X.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:Rh.encode(new TextEncoder().encode(r)),pubkey:s}},(a=$.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=$.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===X.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:Gl(n.id)}]}))}catch(u){if(u.code===zf.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===zf.ERROR_INVALID_CHAIN_ID||u.code===zf.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===zf.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:Gl(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const ybe=["email","socials","swaps","onramp","activity","reownBranding"],Oy={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?vt.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?vt.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?vt.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?vt.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?vt.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?vt.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?vt.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?vt.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?vt.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},wbe={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=Oy[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=Oy[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return Oy[t].processApi(e)},processFallbackFeature(t,e){return Oy[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await Se.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?vt.DEFAULT_REMOTE_FEATURES:vt.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of ybe){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),vt.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;fn.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class vbe{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=$.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=$.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=$.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return $.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>$.getCaipNetworks(n),this.getActiveChainNamespace=()=>$.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{$.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>$.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>$.state.activeChain===n||!n?$.state.activeCaipAddress:$.getAccountProp("caipAddress",n),this.setClientId=n=>{Ne.setClientId(n)},this.getProvider=n=>St.getProvider(n),this.getProviderType=n=>St.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=ce.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{ce.setCaipAddress(n,r),n&&ne.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{ce.setBalance(n,r,s)},this.setProfileName=(n,r)=>{ce.setProfileName(n,r)},this.setProfileImage=(n,r)=>{ce.setProfileImage(n,r)},this.setUser=(n,r)=>{ce.setUser(n,r)},this.resetAccount=n=>{ce.resetAccount(n)},this.setCaipNetwork=n=>{$.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{$.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{ce.setAllAccounts(n,r),ne.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{ce.setStatus(n,r),ue.isConnected()?le.setConnectionStatus("connected"):le.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>$.getAccountProp("address",n),this.setConnectors=n=>{const r=[...ue.state.allConnectors,...n];ue.setConnectors(r)},this.setConnections=(n,r)=>{ve.setConnections(n,r)},this.fetchIdentity=n=>Ne.fetchIdentity(n),this.getReownName=n=>rp.getNamesForAddress(n),this.getConnectors=()=>ue.getConnectors(),this.getConnectorImage=n=>Y8.getConnectorImage(n),this.getConnections=n=>fg.getConnectionsData(n).connections,this.getRecentConnections=n=>fg.getConnectionsData(n).recentConnections,this.switchConnection=n=>ve.switchConnection(n),this.deleteConnection=n=>le.deleteAddressFromConnection(n),this.setConnectedWalletInfo=(n,r)=>{const s=St.getProviderId(r),i=n?{...n,type:s}:void 0;ce.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!$.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{ce.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{ce.removeAddressLabel(n,r)},this.getAddress=n=>$.state.activeChain===n||!n?ce.state.address:$.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>$.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{$.resetNetwork(n)},this.addConnector=n=>{ue.addConnector(n)},this.resetWcConnection=()=>{ve.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{ce.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{ce.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{$.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{ce.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{ne.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await wbe.fetchRemoteFeatures(e),ne.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&xC.setOnrampProviders(this.remoteFeatures.onramp),((n=ne.state.remoteFeatures)!=null&&n.email||Array.isArray((r=ne.state.remoteFeatures)==null?void 0:r.socials)&&((s=ne.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){try{const e=await Se.fetchAllowedOrigins();if(!e||!Ce.isClient()){fn.open(Vt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const n=window.location.origin;yp.isOriginAllowed(n,e,zf.DEFAULT_ALLOWED_ANCESTORS)||fn.open(Vt.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}catch(e){if(!(e instanceof Error)){fn.open(Vt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":fn.open(Vt.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const n=e.cause instanceof Error?e.cause:e;fn.open({shortMessage:Vt.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.shortMessage,longMessage:Vt.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.longMessage(n.message)},"error");break}default:fn.open(Vt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,bt.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Gr.setThemeMode(e.themeMode),e.themeVariables&&Gr.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");$.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&$.setActiveCaipNetwork(n)}initializeConnectionController(e){ve.initialize(e.adapters??[]),ve.setWcBasic(e.basic??!1)}initializeConnectorController(){ue.initialize(this.chainNamespaces)}initializeProjectSettings(e){ne.setProjectId(e.projectId),ne.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;ne.setDebug(e.debug!==!1),ne.setEnableWalletConnect(e.enableWalletConnect!==!1),ne.setEnableWalletGuide(e.enableWalletGuide!==!1),ne.setEnableWallets(e.enableWallets!==!1),ne.setEIP6963Enabled(e.enableEIP6963!==!1),ne.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),ne.setEnableAuthLogger(e.enableAuthLogger!==!1),ne.setCustomRpcUrls(e.customRpcUrls),ne.setEnableEmbedded(e.enableEmbedded),ne.setAllWallets(e.allWallets),ne.setIncludeWalletIds(e.includeWalletIds),ne.setExcludeWalletIds(e.excludeWalletIds),ne.setFeaturedWalletIds(e.featuredWalletIds),ne.setTokens(e.tokens),ne.setTermsConditionsUrl(e.termsConditionsUrl),ne.setPrivacyPolicyUrl(e.privacyPolicyUrl),ne.setCustomWallets(e.customWallets),ne.setFeatures(e.features),ne.setAllowUnsupportedChain(e.allowUnsupportedChain),ne.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),ne.setPreferUniversalLinks(e.experimental_preferUniversalLinks),ne.setDefaultAccountTypes(e.defaultAccountTypes);const n=le.getPreferredAccountTypes()||{},r={...ne.state.defaultAccountTypes,...n};ce.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),ne.setMetadata(e.metadata),ne.setDisableAppend(e.disableAppend),ne.setEnableEmbedded(e.enableEmbedded),ne.setSIWX(e.siwx),!e.projectId){fn.open(Vt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===X.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");ne.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return Ce.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=Zi.getUnsupportedNetwork(`${n}:${e}`);$.setActiveCaipNetwork(r)}}getDefaultNetwork(){return Zi.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return Zi.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return Zi.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?Zi.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=St.getProvider(e),s=St.getProviderId(e),{caipAddress:i}=$.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),le.removeConnectedNamespace(e),St.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),ue.removeConnectorId(e),$.resetAccount(e),$.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=$.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),le.setConnectedNamespaces([...$.state.chains.keys()]),this.chainNamespaces.forEach(o=>{ue.setConnectorId(zt.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,w,y,b,v,_;const c=$.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const E=this.getCaipNetworks().find(x=>x.chainNamespace===i);E&&this.setCaipNetwork(E)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((y=(w=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:w.http)==null?void 0:y[0])||((_=(v=(b=d==null?void 0:d.rpcUrls)==null?void 0:b.default)==null?void 0:v.http)==null?void 0:_[0])});if(!h)return;le.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=ce.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=$.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),le.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async({chainNamespace:e}={})=>{const n=TX(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));ht.resetSend(),ve.resetWcConnection(),await fp.clearSessions(),ue.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));le.deleteConnectedSocialProvider(),bt.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter($.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:ce.state.address,provider:St.getProvider($.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(vt.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter($.state.activeChain),s=St.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===X.CHAIN.EVM){const n=this.getAdapter($.state.activeChain),r=St.getProvider($.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:ce.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:$.state.activeChain}),ce.state.profileImage||!1},getEnsAddress:async e=>await yp.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter($.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=St.getProvider($.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter($.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter($.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter($.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter($.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter($.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter($.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!ce.state.address||this.updateNativeBalance(ce.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},ve.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(St.getProviderId($.state.activeChain)===zt.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=St.getProvider(n),i=St.getProviderId(n);if(e.chainNamespace===$.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===zt.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=ps.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new mbe({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=le.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(le.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=$.state.activeChain===e,c=$.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=ce.state.address,i=$.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=$.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=$.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=$.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===X.CHAIN.EVM&&Ce.isSafeApp()&&ue.setConnectorId(X.CONNECTOR_ID.SAFE,e);const n=ue.getConnectorId(e);switch(this.setStatus("connecting",e),n){case X.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case X.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=ue.getConnectorId(e),s=this.getCaipNetwork(e),o=ue.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([Ce.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){var r,s;const e=Object.keys(((s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)||{}),n=this.chainNamespaces.map(async i=>{var u,d,h,f,p;const o=this.getAdapter(i),a=((f=(h=(d=(u=this.universalProvider)==null?void 0:u.session)==null?void 0:d.namespaces)==null?void 0:h[i])==null?void 0:f.accounts)||[],c=(p=$.state.activeCaipNetwork)==null?void 0:p.id,l=a.find(g=>{const{chainId:w}=ps.parseCaipAddress(g);return w===(c==null?void 0:c.toString())})||a[0];if(l){const g=ps.validateCaipAddress(l),{chainId:w,address:y}=ps.parseCaipAddress(g);if(St.setProviderId(i,zt.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&$.state.activeCaipNetwork&&(o==null?void 0:o.namespace)!==X.CHAIN.EVM){const b=o==null?void 0:o.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:$.state.activeCaipNetwork});St.setProvider(i,b)}else St.setProvider(i,this.universalProvider);ue.setConnectorId(X.CONNECTOR_ID.WALLET_CONNECT,i),le.addConnectedNamespace(i),this.syncWalletConnectAccounts(i),await this.syncAccount({address:y,chainId:w,chainNamespace:i})}else e.includes(i)&&this.setStatus("disconnected",i);this.syncConnectedWalletInfo(i),await $.setApprovedCaipNetworksData(i)});await Promise.all(n)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=ps.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>Ce.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){St.setProviderId(s,e),St.setProvider(s,n),ue.setConnectorId(r,s)}async syncAllAccounts(e){const n=ue.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===$.state.activeChain,r=$.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=le.getActiveNetworkProps(),c=i||a,l=((d=$.state.activeCaipNetwork)==null?void 0:d.name)===X.UNSUPPORTED_NETWORK_NAME,u=$.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(w=>w.id.toString()===c.toString()),p=this.getCaipNetworks().find(w=>w.chainNamespace===o);if(!u&&!f&&!p){const w=this.getApprovedCaipNetworkIds()||[],y=w.find(v=>{var _;return((_=ps.parseCaipNetworkId(v))==null?void 0:_.chainId)===c.toString()}),b=w.find(v=>{var _;return((_=ps.parseCaipNetworkId(v))==null?void 0:_.chainNamespace)===o});f=this.getCaipNetworks().find(v=>v.caipNetworkId===y),p=this.getCaipNetworks().find(v=>v.caipNetworkId===b||"deprecatedCaipNetworkId"in v&&v.deprecatedCaipNetworkId===b)}const g=f||p;(g==null?void 0:g.chainNamespace)===$.state.activeChain?ne.state.enableNetworkSwitch&&!ne.state.allowUnsupportedChain&&((h=$.state.activeCaipNetwork)==null?void 0:h.name)===X.UNSUPPORTED_NETWORK_NAME?$.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),Cg.isLowerCaseMatch(s,ce.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=ue.getConnectorId(e),r=St.getProviderId(e);if(r===zt.CONNECTOR_TYPE_ANNOUNCED||r===zt.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===zt.CONNECTOR_TYPE_WALLET_CONNECT){const i=St.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===X.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===X.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!hg.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=$.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=Iwe.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};ne.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await xwe.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{ve.setUri(e)}),this.universalProvider.on("connect",ve.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),ve.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(yp.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&Ce.isCaipAddress(r[0])&&this.syncAccount(ps.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&Ce.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){bt.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(Vt.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=Vt.ALERT_ERRORS[o];a&&(fn.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&ve.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return mt.open({...e,data:{swap:e.arguments}})}return mt.open(e)}async close(){await this.injectModalUi(),mt.close()}setLoading(e,n){mt.setLoading(e,n)}async disconnect(e){await ve.disconnect({namespace:e})}getSIWX(){return ne.state.siwx}getError(){return""}getChainId(){var e;return(e=$.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){fn.open(Vt.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await $.switchActiveNetwork(n)}getWalletProvider(){return $.state.activeChain?St.state.providers[$.state.activeChain]:null}getWalletProviderType(){return St.getProviderId($.state.activeChain)}subscribeProviders(e){return St.subscribeProviders(e)}getThemeMode(){return Gr.state.themeMode}getThemeVariables(){return Gr.state.themeVariables}setThemeMode(e){Gr.setThemeMode(e),E4(Gr.state.themeMode)}setTermsConditionsUrl(e){ne.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){ne.setPrivacyPolicyUrl(e)}setThemeVariables(e){Gr.setThemeVariables(e),fbe(Gr.state.themeVariables)}subscribeTheme(e){return Gr.subscribe(e)}subscribeConnections(e){return ve.subscribe(e)}getWalletInfo(e){return e?$.getAccountProp("connectedWalletInfo",e):ce.state.connectedWalletInfo}getAccount(e){var o;const n=ue.getAuthConnector(e),r=$.getAccountData(e),s=$.state.activeChain,i=le.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:Ce.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===X.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:le.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?$.subscribeChainProp("accountState",r,n):$.subscribe(r),ue.subscribe(r)}subscribeNetwork(e){return $.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e,n){return n?ce.subscribeKey("connectedWalletInfo",e,n):ce.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){ce.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){$.subscribeKey("activeCaipNetwork",e)}getState(){return no.state}subscribeState(e){return no.subscribe(e)}showErrorMessage(e){bi.showError(e)}showSuccessMessage(e){bi.showSuccess(e)}getEvent(){return{...bt.state}}subscribeEvents(e){return bt.subscribe(e)}replace(e){ke.replace(e)}redirect(e){ke.push(e)}popTransactionStack(e){ke.popTransactionStack(e)}isOpen(){return mt.state.open}isTransactionStackEmpty(){return ke.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){ne.setFeatures(e)}updateRemoteFeatures(e){ne.setRemoteFeatures(e)}updateOptions(e){const r={...ne.state||{},...e};ne.setOptions(r)}setConnectMethodsOrder(e){ne.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){ne.setWalletFeaturesOrder(e)}setCollapseWallets(e){ne.setCollapseWallets(e)}setSocialsOrder(e){ne.setSocialsOrder(e)}getConnectMethodsOrder(){return xx.getConnectOrderMethod(ne.state.features,ue.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||$.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&$.removeNetwork(e,n)}}let kO=!1;class bbe extends vbe{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{ms.checkIfRequestExists(n)?ms.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(Dn.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(Dn.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=ms.checkIfRequestIsSafe(r),i=ce.state.address,o=$.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=$.state.activeChain;ue.getConnectorId(n)===X.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=$.state.activeChain,s=r===X.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=ne.state.defaultAccountTypes[r],o=(l=ce.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;Cg.isLowerCaseMatch(n.address,ce.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...ce.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>Ce.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[Ce.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...ce.state.user||{},username:n},$.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,$.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,$.state.activeChain)})}async syncAuthConnector(e,n){var d,h,f,p;const r=X.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n),s=n===$.state.activeChain;if(!r)return;this.setLoading(!0,n);const i=e.getLoginEmailUsed();this.setLoading(i,n),i&&this.setStatus("connecting",n);const o=e.getEmail(),a=e.getUsername();this.setUser({...((d=ce.state)==null?void 0:d.user)||{},username:a,email:o},n),this.setupAuthConnectorListeners(e);const{isConnected:c}=await e.isConnected(),l=Gr.getSnapshot(),u=ne.getSnapshot();await Promise.all([e.syncDappData({metadata:u.metadata,sdkVersion:u.sdkVersion,projectId:u.projectId,sdkType:u.sdkType}),e.syncTheme({themeMode:l.themeMode,themeVariables:l.themeVariables,w3mThemeVariables:Lo(l.themeVariables,l.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&s&&(c&&((h=this.connectionControllerClient)!=null&&h.connectExternal)?(await((p=this.connectionControllerClient)==null?void 0:p.connectExternal({id:X.CONNECTOR_ID.AUTH,info:{name:X.CONNECTOR_ID.AUTH},type:zt.CONNECTOR_TYPE_AUTH,provider:e,chainId:(f=$.state.activeCaipNetwork)==null?void 0:f.id,chain:n})),this.setStatus("connected",n)):ue.getConnectorId(n)===X.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),le.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!Ce.isTelegram())return;const r=le.getTelegramSocialProvider();if(!r||!Ce.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;ce.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=ue.getAuthConnector();r&&o&&(this.setLoading(!0,e),await ve.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),le.setConnectedSocialProvider(r),le.removeTelegramSocialProvider(),bt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var l,u,d,h;if(!X.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(l=this.remoteFeatures)==null?void 0:l.email,s=Array.isArray((u=this.remoteFeatures)==null?void 0:u.socials)&&this.remoteFeatures.socials.length>0,i=r||s,a=Cg.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&((d=this.options)!=null&&d.projectId)&&i&&(this.authProvider=Ml.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(h=this.getCaipNetwork(a))==null?void 0:h.caipNetworkId,abortController:Vt.EmbeddedWalletAbortController,onTimeout:f=>{f==="iframe_load_failed"?fn.open(Vt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):f==="iframe_request_timeout"?fn.open(Vt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):f==="unverified_domain"&&fn.open(Vt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),no.subscribeOpen(f=>{var p;!f&&this.isTransactionStackEmpty()&&((p=this.authProvider)==null||p.rejectRpcRequests())}));const c=e===$.state.activeChain;this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&Se.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=$.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=St.getProvider(r),u=St.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=St.getProviderId(n)===zt.CONNECTOR_TYPE_AUTH,u=St.getProviderId(r),d=u===zt.CONNECTOR_TYPE_AUTH,h=X.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if($.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:X.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:zt.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===zt.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),no.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==X.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=St.getProviderId(e);if(n===zt.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=le.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(Ce.isClient()&&!kO)try{const e={...vt.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),Ce.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!ne.state.disableAppend&&!ne.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}kO=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!Ce.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(an(()=>import("./embedded-wallet-B9-zVEls.js"),__vite__mapDeps([3,4,5,6,7,8,9,10,11,12,13,14]))),n.email&&r.push(an(()=>import("./email-Bpx-q0bu.js"),__vite__mapDeps([15,4,14,8,13,7,12,16,9]))),n.socials&&r.push(an(()=>import("./socials-Bn6_4xqf.js"),__vite__mapDeps([17,4,18,7,19,20,13,21,12,8,14,22,6,23]))),n.swaps&&n.swaps.length>0&&r.push(an(()=>import("./swaps-D9m6svSi.js"),__vite__mapDeps([24,4,12,8,25,26,27,6,13,23,9,7]))),e.send&&r.push(an(()=>import("./send-BPQlv_Ui.js"),__vite__mapDeps([28,4,12,8,13,7,19,14,27,6,9,29,30]))),e.receive&&r.push(an(()=>import("./receive-DUglVX7l.js"),__vite__mapDeps([31,4,32,6,22]))),n.onramp&&n.onramp.length>0&&r.push(an(()=>import("./onramp-z3Oq4nEZ.js"),__vite__mapDeps([33,4,34,23,13,6,8,35,18,7,19,36,14,12,21,9]))),n.activity&&r.push(an(()=>import("./transactions-QA1HJfzK.js"),__vite__mapDeps([37,4,38,34,23,13,14,6]))),e.pay&&r.push(an(()=>import("./index-DCjLTNt8.js"),__vite__mapDeps([39,4,12,8,40,6,13,10,35,30,21]))),await Promise.all([...r,an(()=>import("./index-BGAfRZqx.js"),__vite__mapDeps([41,4,6,8,29,13,42,26,10,35,12,11,40,38,34,23,14,25,30,7,9,16,18,19,20,5,21,32,22,36])),an(()=>import("./w3m-modal-BlMbo9-_.js"),__vite__mapDeps([43,4,10,6,13,11,8,26,42]))])}}let Ia;function Ebe(t){t&&(Ia=t)}function Cm(){if(!Ia)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(Ia==null?void 0:Ia.open(n))}async function e(){await(Ia==null?void 0:Ia.close())}return{open:t,close:e}}const _be="1.7.10";let Ry;function Cbe(t){return Ry||(Ry=new bbe({...t,sdkVersion:Ce.generateSdkVersion(t.adapters??[],"react",_be)}),Ebe(Ry)),Ry}const xbe=Oi({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),OO=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],Sbe=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=xbe({isOpen:t}),{open:i}=Cm(),o=D.useRef(null),[a,c]=D.useState([]),[l,u]=D.useState(!0),[d,h]=D.useState(null),[f,p]=D.useState("all"),[g,w]=D.useState(1),[y,b]=D.useState(1),[v,_]=D.useState(0),[E,x]=D.useState(null),[S,T]=D.useState(OO[0]),[C,O]=D.useState(!1),[R,F]=D.useState(null),W=D.useCallback(async()=>{var k,j;try{if((k=window.solana)!=null&&k.isPhantom){const z=await window.solana.connect();F(z.publicKey.toString());return}if((j=window.solflare)!=null&&j.isSolflare){const z=await window.solflare.connect();F(z.publicKey.toString());return}i()}catch(z){console.error("Failed to connect Solana wallet:",z),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}O(!1)},[i]);D.useEffect(()=>{var k,j;(k=window.solana)!=null&&k.publicKey?F(window.solana.publicKey.toString()):(j=window.solflare)!=null&&j.publicKey&&F(window.solflare.publicKey.toString())},[]),D.useEffect(()=>{t&&(async()=>{var j;u(!0),h(null);try{let z,K=f==="owned"&&r||void 0;if(S.api==="opensea-solana"){if(f==="owned"&&!R){O(!0),u(!1);return}K=R||void 0,z=await H8(S.slug,50),console.log("Fetched Solana NFTs from collection:",z.data.length),f==="owned"&&R&&(console.log("Filtering for owner:",R),console.log("Sample NFT owner data:",(j=z.data[0])==null?void 0:j.owners),console.log("All NFTs owner data:",z.data.map(Y=>({name:Y.name,owners:Y.owners,owner_of:Y.owner_of}))),z.data.some(Y=>Y.owners&&Y.owners.length>0)?(z.data=z.data.filter(Y=>{const Z=Y.owners.some(se=>se.owner_of&&se.owner_of.toLowerCase()===R.toLowerCase());return Z&&console.log("Found owned NFT:",Y.name),Z}),console.log("NFTs after filtering:",z.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else S.api==="opensea"?z=await CA(S.slug,50,K):z=await _A(S.slug,g,50,K);c(z.data),b(z.totalPages),_(z.totalCount)}catch(z){z instanceof Error?h(z.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,S,R]),D.useEffect(()=>{C&&W()},[C,W]);const B=k=>new Date(k).toLocaleDateString(),I=k=>S.api==="opensea-solana"&&(!k.owners||k.owners.length===0)?"Owner data unavailable":k.owners.length>0?`${k.owners[0].owner_of.substring(0,6)}...`:"N/A",A=()=>{n&&n()},U=async k=>{if(S.api==="opensea"&&S.chain)try{const j=await q8(S.chain,k.address,k.token_id.toString()),z={...k,attributes:JSON.stringify(j.traits||[])};x(z)}catch(j){console.error("Failed to fetch full NFT details",j),x(k)}else x(k)},P=k=>{T(k),w(1)};return t?m.jsxs(m.Fragment,{children:[m.jsx(am,{nodeRef:o,handle:`.${s.header}`,children:m.jsxs("div",{ref:o,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"LAWB NFT GALLERY"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:A,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),m.jsx("div",{className:s.collectionSelector,children:OO.map(k=>m.jsx("button",{className:`${s.collectionButton} ${S.slug===k.slug?"active":""}`,onClick:()=>P(k),children:k.name},k.slug))}),m.jsxs("div",{className:s.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),m.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!R,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||R?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||R?1:.6},children:"My NFTs"}),S.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{W()},style:{background:R?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:R?"white":"black",marginLeft:"auto"},children:R?`Solana: ${R.slice(0,4)}...${R.slice(-4)}`:"Connect Solana"})]}),S.api==="opensea-solana"&&!R&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?m.jsx("div",{children:"Loading NFTs..."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${v} total)`,f==="recent"&&`Recently minted NFTs by ${S.api==="opensea-solana"?(R==null?void 0:R.slice(0,6))+"..."+(R==null?void 0:R.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${S.api==="opensea-solana"?(R==null?void 0:R.slice(0,6))+"..."+(R==null?void 0:R.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?m.jsx("div",{children:"No NFTs found."}):m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map(k=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{U(k)},children:[m.jsx("div",{style:{width:"100%",height:"150px",backgroundImage:`url(${k.image_url})`,backgroundSize:"cover",backgroundPosition:"center",marginBottom:"10px",border:"1px solid #ccc"}}),m.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:m.jsxs("strong",{children:["#",k.token_id]})}),m.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",I(k)]}),m.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",B(k.created_at)]})]},k.id))}),f!=="recent"&&y>1&&m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[m.jsx("button",{onClick:()=>w(k=>Math.max(1,k-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),m.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",y]}),m.jsx("button",{onClick:()=>w(k=>Math.min(y,k+1)),disabled:g===y,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===y?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),E&&m.jsx(DZ,{nft:E,onClose:()=>x(null)})]}):null},Abe=Oi({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),Ibe=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}];function x4(){const t=Abe(),e=D.useRef(null),[n,r]=D.useState(null),[s,i]=D.useState(""),[o,a]=D.useState(""),[c,l]=D.useState(36),[u,d]=D.useState(36),[h,f]=D.useState(!1),[p,g]=D.useState(!1),[w,y]=D.useState(!1),[b,v]=D.useState(!1),[_,E]=D.useState(!1),x=D.useCallback(()=>{const B=P=>{const k=e.current;if(!k)return;P.textAlign="center";const j=(z,K)=>{const Q=z.split(" "),Y=[];let Z="";for(let se=0;se<Q.length;se++){const Pe=Z?Z+" "+Q[se]:Q[se];P.measureText(Pe).width<=K?Z=Pe:(Z&&Y.push(Z),Z=Q[se])}return Z&&Y.push(Z),Y};if(s){P.font=`bold ${c}px Impact`;const z=k.width*.9;(function(){return P.font=`bold ${c}px Impact`,j(s,z)})().forEach((Q,Y)=>{const Z=c+10+Y*c*1.2;P.strokeStyle="#000",P.lineWidth=4,P.strokeText(Q,k.width/2,Z),P.fillStyle="#fff",P.fillText(Q,k.width/2,Z)})}if(o){P.font=`bold ${u}px Impact`;const z=k.width*.9,K=function(){return P.font=`bold ${u}px Impact`,j(o,z)}(),Q=12;K.forEach((Y,Z)=>{const se=k.height-Q-(K.length-1-Z)*u*1.2;P.strokeStyle="#000",P.lineWidth=4,P.strokeText(Y,k.width/2,se),P.fillStyle="#fff",P.fillText(Y,k.width/2,se)})}},I=P=>{try{h&&S(P),p&&T(P),w&&C(P)}catch{console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead."),f(!1),g(!1),y(!1)}},A=e.current;if(!A)return;const U=A.getContext("2d");if(U)if(U.clearRect(0,0,A.width,A.height),n){console.log("Loading image:",n);const P=new Image;P.crossOrigin="anonymous",P.onload=()=>{console.log("Image loaded successfully:",P.width,"x",P.height);const k=e.current;if(!k||k!==A)return;const j=k.getContext("2d");if(!j)return;j.clearRect(0,0,k.width,k.height);const z=Math.min(k.width/P.width,k.height/P.height),K=(k.width-P.width*z)/2,Q=(k.height-P.height*z)/2;console.log("Drawing image at:",K,Q,"with scale:",z),j.drawImage(P,K,Q,P.width*z,P.height*z),B(j),I(k)},P.onerror=k=>{console.error("Failed to load image:",n,k);const j=e.current;if(!j||j!==A)return;const z=j.getContext("2d");z&&(z.clearRect(0,0,j.width,j.height),z.fillStyle="#333",z.fillRect(0,0,j.width,j.height),B(z),I(j))},P.src=n}else U.fillStyle="#333",U.fillRect(0,0,A.width,A.height),B(U),I(A)},[n,s,c,o,u,h,p,w]),S=B=>{const I=B.getContext("2d");if(!I)return;const A=I.getImageData(0,0,B.width,B.height),U=A.data;for(let P=0;P<U.length;P+=4){const k=U[P],j=U[P+1],z=U[P+2],K=(k+j+z)/3,Q=1.8;U[P]=Math.min(255,K+(k-K)*Q),U[P+1]=Math.min(255,K+(j-K)*Q*.7),U[P+2]=Math.min(255,K+(z-K)*Q*.4);const Y=1.3;U[P]=Math.min(255,Math.max(0,U[P]*Y)),U[P+1]=Math.min(255,Math.max(0,U[P+1]*Y)),U[P+2]=Math.min(255,Math.max(0,U[P+2]*Y))}I.putImageData(A,0,0)},T=B=>{const I=B.getContext("2d");if(!I)return;const A=4,P=I.getImageData(0,0,B.width,B.height).data,k=new Uint8ClampedArray(P);for(let j=0;j<B.height;j+=A)for(let z=0;z<B.width;z+=A){const K=(j*B.width+z)*4,Q=P[K],Y=P[K+1],Z=P[K+2],se=P[K+3];for(let Pe=0;Pe<A&&j+Pe<B.height;Pe++)for(let Oe=0;Oe<A&&z+Oe<B.width;Oe++){const De=((j+Pe)*B.width+(z+Oe))*4;k[De]=Q,k[De+1]=Y,k[De+2]=Z,k[De+3]=se}}I.putImageData(new ImageData(k,B.width,B.height),0,0)},C=B=>{const I=B.getContext("2d");if(!I)return;const A=I.getImageData(0,0,B.width,B.height),U=A.data;for(let P=0;P<U.length;P+=4){const k=(Math.random()-.5)*50;U[P]=Math.max(0,Math.min(255,U[P]+k)),U[P+1]=Math.max(0,Math.min(255,U[P+1]+k)),U[P+2]=Math.max(0,Math.min(255,U[P+2]+k))}I.putImageData(A,0,0)};D.useEffect(()=>{x()},[x]);const O=B=>{var A;const I=(A=B.target.files)==null?void 0:A[0];I&&r(URL.createObjectURL(I))},R=()=>{r(null),i(""),a(""),l(36),d(36),f(!1),g(!1),y(!1)},F=()=>{const B=e.current;if(!B)return;const I=document.createElement("a");I.download="meme.png",I.href=B.toDataURL("image/png"),document.body.appendChild(I),I.click(),document.body.removeChild(I)},W=async B=>{E(!0),v(!1);try{console.log("Fetching NFTs for collection:",B);let I;if(B.api==="opensea"){console.log("Using OpenSea API for:",B.slug);const A=await CA(B.slug,50);I=A.data,console.log("OpenSea response:",A)}else if(B.api==="opensea-solana"){console.log("Using OpenSea Solana API for:",B.slug);const A=await H8(B.slug,50);I=A.data,console.log("OpenSea Solana response:",A)}else{console.log("Using Scatter API for:",B.slug);const A=await _A(B.slug,1,50);I=A.data,console.log("Scatter response:",A)}if(I&&I.length>0){const A=I[Math.floor(Math.random()*I.length)],U=A.image||A.image_url||A.image_url_shrunk;console.log("Selected NFT:",A),console.log("Image URL:",U),r(U)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(I){console.error("Error fetching NFTs:",I),alert("Failed to fetch NFT images. Check console for details.")}finally{E(!1)}};return m.jsxs("div",{className:t.container,children:[m.jsxs("div",{className:t.header,children:[m.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),m.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",m.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),m.jsxs("div",{className:t.content,children:[m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Collections"}),m.jsxs("div",{className:t.row,children:[m.jsxs("div",{className:t.dropdown,children:[m.jsx("button",{className:t.button,onClick:()=>v(B=>!B),children:"Collections"}),b&&m.jsx("div",{className:t.dropdownContent,children:Ibe.map(B=>m.jsx("div",{className:t.dropdownItem,onClick:()=>{W(B)},children:B.name},B.id))})]}),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:O})]}),_&&m.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Text"}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Top Text:"}),m.jsx("input",{className:t.input,type:"text",value:s,onChange:B=>i(B.target.value),placeholder:"Enter top text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:B=>l(Number(B.target.value)),style:{width:60,textAlign:"center"}})]}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Bottom Text:"}),m.jsx("input",{className:t.input,type:"text",value:o,onChange:B=>a(B.target.value),placeholder:"Enter bottom text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:B=>d(Number(B.target.value)),style:{width:60,textAlign:"center"}})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Effects"}),m.jsxs("div",{className:t.row,children:[m.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(B=>!B),children:"Deep Fry"}),m.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(B=>!B),children:"Pixelate"}),m.jsx("button",{className:t.effectButton,style:{background:w?"#00ffff":void 0},onClick:()=>y(B=>!B),children:"Grain"})]})]}),m.jsxs("div",{className:t.actions,children:[m.jsx("button",{className:t.button,onClick:F,children:"Save Image"}),m.jsx("button",{className:t.button,onClick:R,children:"Restart"})]})]}),m.jsx("div",{className:t.memeArea,children:m.jsx("canvas",{ref:e,width:320,height:320,className:t.canvas})})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mg(){return Mg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mg.apply(this,arguments)}var ac;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ac||(ac={}));const RO="popstate";function Tbe(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Ax("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:A4(s)}return Pbe(e,n,null,t)}function xn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function S4(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Nbe(){return Math.random().toString(36).substr(2,8)}function $O(t,e){return{usr:t.state,key:t.key,idx:e}}function Ax(t,e,n,r){return n===void 0&&(n=null),Mg({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Lh(e):e,{state:n,key:e&&e.key||r||Nbe()})}function A4(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Lh(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Pbe(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=ac.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(Mg({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=ac.Pop;let w=u(),y=w==null?null:w-l;l=w,c&&c({action:a,location:g.location,delta:y})}function h(w,y){a=ac.Push;let b=Ax(g.location,w,y);l=u()+1;let v=$O(b,l),_=g.createHref(b);try{o.pushState(v,"",_)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(_)}i&&c&&c({action:a,location:g.location,delta:1})}function f(w,y){a=ac.Replace;let b=Ax(g.location,w,y);l=u();let v=$O(b,l),_=g.createHref(b);o.replaceState(v,"",_),i&&c&&c({action:a,location:g.location,delta:0})}function p(w){let y=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof w=="string"?w:A4(w);return b=b.replace(/ $/,"%20"),xn(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let g={get action(){return a},get location(){return t(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(RO,d),c=w,()=>{s.removeEventListener(RO,d),c=null}},createHref(w){return e(s,w)},createURL:p,encodeLocation(w){let y=p(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(w){return o.go(w)}};return g}var DO;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(DO||(DO={}));function kbe(t,e,n){return n===void 0&&(n="/"),Obe(t,e,n)}function Obe(t,e,n,r){let s=typeof e=="string"?Lh(e):e,i=N4(s.pathname||"/",n);if(i==null)return null;let o=I4(t);Rbe(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=Hbe(i);a=zbe(o[c],l)}return a}function I4(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(xn(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=Fl([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(xn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),I4(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:Bbe(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of T4(i.path))s(i,o,c)}),e}function T4(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=T4(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function Rbe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Fbe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const $be=/^:[\w-]+$/,Dbe=3,Ube=2,jbe=1,Lbe=10,Mbe=-2,UO=t=>t==="*";function Bbe(t,e){let n=t.split("/"),r=n.length;return n.some(UO)&&(r+=Mbe),e&&(r+=Ube),n.filter(s=>!UO(s)).reduce((s,i)=>s+($be.test(i)?Dbe:i===""?jbe:Lbe),r)}function Fbe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function zbe(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=Wbe({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Fl([i,d.pathname]),pathnameBase:Qbe(Fl([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=Fl([i,d.pathnameBase]))}return o}function Wbe(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=qbe(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function qbe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),S4(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Hbe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return S4(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function N4(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Vbe(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Lh(t):t;return{pathname:n?n.startsWith("/")?n:Gbe(n,e):e,search:Zbe(r),hash:Xbe(s)}}function Gbe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function gE(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Kbe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Ybe(t,e){let n=Kbe(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Jbe(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Lh(t):(s=Mg({},t),xn(!s.pathname||!s.pathname.includes("?"),gE("?","pathname","search",s)),xn(!s.pathname||!s.pathname.includes("#"),gE("#","pathname","hash",s)),xn(!s.search||!s.search.includes("#"),gE("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=Vbe(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const Fl=t=>t.join("/").replace(/\/\/+/g,"/"),Qbe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Zbe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Xbe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function e1e(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const P4=["post","put","patch","delete"];new Set(P4);const t1e=["get",...P4];new Set(t1e);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bg(){return Bg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bg.apply(this,arguments)}const hI=D.createContext(null),n1e=D.createContext(null),Hv=D.createContext(null),Vv=D.createContext(null),Mh=D.createContext({outlet:null,matches:[],isDataRoute:!1}),k4=D.createContext(null);function Gv(){return D.useContext(Vv)!=null}function O4(){return Gv()||xn(!1),D.useContext(Vv).location}function R4(t){D.useContext(Hv).static||D.useLayoutEffect(t)}function r1e(){let{isDataRoute:t}=D.useContext(Mh);return t?m1e():s1e()}function s1e(){Gv()||xn(!1);let t=D.useContext(hI),{basename:e,future:n,navigator:r}=D.useContext(Hv),{matches:s}=D.useContext(Mh),{pathname:i}=O4(),o=JSON.stringify(Ybe(s,n.v7_relativeSplatPath)),a=D.useRef(!1);return R4(()=>{a.current=!0}),D.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=Jbe(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Fl([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function i1e(t,e){return o1e(t,e)}function o1e(t,e,n,r){Gv()||xn(!1);let{navigator:s}=D.useContext(Hv),{matches:i}=D.useContext(Mh),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=O4(),u;if(e){var d;let w=typeof e=="string"?Lh(e):e;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||xn(!1),u=w}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let w=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=kbe(t,{pathname:f}),g=d1e(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Fl([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Fl([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&g?D.createElement(Vv.Provider,{value:{location:Bg({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:ac.Pop}},g):g}function a1e(){let t=g1e(),e=e1e(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,null)}const c1e=D.createElement(a1e,null);class l1e extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(Mh.Provider,{value:this.props.routeContext},D.createElement(k4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function u1e(t){let{routeContext:e,match:n,children:r}=t,s=D.useContext(hI);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Mh.Provider,{value:e},r)}function d1e(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||xn(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,w=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||c1e,c&&(l<0&&h===0?(y1e("route-fallback"),p=!0,w=null):l===h&&(p=!0,w=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,h+1)),b=()=>{let v;return f?v=g:p?v=w:d.route.Component?v=D.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=u,D.createElement(u1e,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?D.createElement(l1e,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var $4=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}($4||{}),D4=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(D4||{});function h1e(t){let e=D.useContext(hI);return e||xn(!1),e}function f1e(t){let e=D.useContext(n1e);return e||xn(!1),e}function p1e(t){let e=D.useContext(Mh);return e||xn(!1),e}function U4(t){let e=p1e(),n=e.matches[e.matches.length-1];return n.route.id||xn(!1),n.route.id}function g1e(){var t;let e=D.useContext(k4),n=f1e(),r=U4();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function m1e(){let{router:t}=h1e($4.UseNavigateStable),e=U4(D4.UseNavigateStable),n=D.useRef(!1);return R4(()=>{n.current=!0}),D.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Bg({fromRouteId:e},i)))},[t,e])}const jO={};function y1e(t,e,n){jO[t]||(jO[t]=!0)}function w1e(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function yw(t){xn(!1)}function v1e(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ac.Pop,navigator:i,static:o=!1,future:a}=t;Gv()&&xn(!1);let c=e.replace(/^\/*/,"/"),l=D.useMemo(()=>({basename:c,navigator:i,static:o,future:Bg({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=Lh(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=D.useMemo(()=>{let w=N4(u,c);return w==null?null:{location:{pathname:w,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return g==null?null:D.createElement(Hv.Provider,{value:l},D.createElement(Vv.Provider,{children:n,value:g}))}function b1e(t){let{children:e,location:n}=t;return i1e(Ix(e),n)}new Promise(()=>{});function Ix(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,s)=>{if(!D.isValidElement(r))return;let i=[...e,s];if(r.type===D.Fragment){n.push.apply(n,Ix(r.props.children,i));return}r.type!==yw&&xn(!1),!r.props.index||!r.props.children||xn(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ix(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const E1e="6";try{window.__reactRouterVersion=E1e}catch{}const _1e="startTransition",LO=GL[_1e];function C1e(t){let{basename:e,children:n,future:r,window:s}=t,i=D.useRef();i.current==null&&(i.current=Tbe({window:s,v5Compat:!0}));let o=i.current,[a,c]=D.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=D.useCallback(d=>{l&&LO?LO(()=>c(d)):c(d)},[c,l]);return D.useLayoutEffect(()=>o.listen(u),[o,u]),D.useEffect(()=>w1e(r),[r]),D.createElement(v1e,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var MO;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(MO||(MO={}));var BO;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(BO||(BO={}));const x1e=Oi({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function S1e(){const t=x1e(),{open:e}=Cm(),{address:n,isConnected:r}=im(),{isPending:s}=U5(),{disconnect:i}=j5(),{data:o}=L5({address:n}),[a,c]=D.useState("pixelawbs-popup"),[l,u]=D.useState(new Set),[d,h]=D.useState(!1),[f,p]=D.useState(!1),[g,w]=D.useState(!1),[y,b]=D.useState(!1),v=r1e(),_=D.useRef(null);D.useEffect(()=>{if(a==="halloween-popup"&&_.current){const A=_.current.querySelector("script[data-tiktok-embed]");A&&A.remove();const U=document.createElement("script");U.src="https://www.tiktok.com/embed.js",U.async=!0,U.setAttribute("data-tiktok-embed","true"),_.current.appendChild(U)}},[a]);const E=(A,U,P)=>{if(A==="url"&&P)window.open(P,"_blank");else if(A==="popup"&&U)c(U),u(k=>{const j=new Set(k);return j.delete(U),j}),document.body.offsetWidth;else if(A==="wallet")r?i():e();else if(A==="mint"){if(!n){alert("Please connect your wallet first!");return}h(!0)}else A==="nft-gallery"?p(!0):A==="meme-generator"?w(!0):A==="chess"&&(r?(b(!0),setTimeout(()=>{b(!1),v("/chess")},1500)):e().then(()=>{const k=()=>{window.ethereum&&window.ethereum.selectedAddress?(b(!0),setTimeout(()=>{b(!1),v("/chess")},1500)):setTimeout(k,200)};k()}))},x=()=>c(null),S=A=>{u(U=>new Set(U).add(A)),c(null)},T=A=>{A==="mint-popup"?h(!0):A==="nft-gallery-popup"?p(!0):A==="meme-generator-popup"?w(!0):c(A),u(U=>{const P=new Set(U);return P.delete(A),P})},C=()=>h(!1),O=()=>p(!1),R=()=>w(!1),F=()=>{h(!1),u(A=>new Set(A).add("mint-popup"))},W=()=>{p(!1),u(A=>new Set(A).add("nft-gallery-popup"))},B=()=>{w(!1),u(A=>new Set(A).add("meme-generator-popup"))},I=m.jsxs("div",{onClick:()=>{r?i():e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:r?"limegreen":"red",fontWeight:"bold"},children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),s?"Connecting...":r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return m.jsxs("div",{className:t.body,children:[y&&m.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[m.jsx("img",{src:"/images/blueknight.png",alt:"Booting Chess...",style:{width:120,height:120,marginBottom:32}}),m.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),m.jsx(IZ,{onIconClick:E}),m.jsx(NZ,{minimizedWindows:Array.from(l),onRestoreWindow:T,walletButton:I,connectionStatus:{connected:r,address:n,ens:o||void 0}}),m.jsxs(Us,{id:"chat-popup",isOpen:a==="chat-popup",onClose:x,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",m.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),m.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Us,{id:"purity-popup",isOpen:a==="purity-popup",onClose:x,onMinimize:S,children:[m.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),m.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),m.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),m.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Us,{id:"lawbstarz-popup",isOpen:a==="lawbstarz-popup",onClose:x,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Us,{id:"lawbstation-popup",isOpen:a==="lawbstation-popup",onClose:x,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(Us,{id:"nexus-popup",isOpen:a==="nexus-popup",onClose:x,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsxs(Us,{id:"lawbsters-popup",isOpen:a==="lawbsters-popup",onClose:x,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx(GK,{id:"1620879129850834944"})}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsx(Us,{id:"pixelawbs-popup",isOpen:a==="pixelawbs-popup",onClose:x,onMinimize:S,children:(()=>{const A=U=>{U.preventDefault(),c(null),h(!0)};return m.jsxs(m.Fragment,{children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:A,children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),m.jsxs(Us,{id:"halloween-popup",isOpen:a==="halloween-popup",onClose:x,onMinimize:S,children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),m.jsx("div",{ref:_,style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:m.jsxs("section",{children:[m.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore 🦞🎃 minting rn on @ourzora via @PC69 ",m.jsx("a",{target:"_blank",rel:"noreferrer",title:"♬ original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:"♬ original sound - wables.eth"})]})})})]}),m.jsxs(Us,{id:"lawb-popup",isOpen:a==="lawb-popup",onClose:x,onMinimize:S,children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"🦞 $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{src:"https://dexscreener.com/solana/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&theme=dark&info=0",title:"DexScreener",style:{width:"100%",height:"100%",border:"none"}})})]}),m.jsx(OZ,{isOpen:d,onClose:C,onMinimize:F,walletAddress:n||""}),m.jsx(Sbe,{isOpen:f,onClose:O,onMinimize:W,walletAddress:n}),m.jsx(Us,{id:"meme-generator-popup",isOpen:g,onClose:R,onMinimize:B,children:m.jsx(x4,{})})]})}const A1e=Oi({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),FO=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],I1e=({onBack:t,walletAddress:e})=>{const n=A1e(),{open:r}=Cm(),[s,i]=D.useState([]),[o,a]=D.useState(!0),[c,l]=D.useState(null),[u,d]=D.useState(FO[0]),[h,f]=D.useState(!1),[p,g]=D.useState(null),[w,y]=D.useState("all"),[b,v]=D.useState(null),_=D.useCallback(async()=>{var T,C;try{if((T=window.solana)!=null&&T.isPhantom){const O=await window.solana.connect();g(O.publicKey.toString());return}if((C=window.solflare)!=null&&C.isSolflare){const O=await window.solflare.connect();g(O.publicKey.toString());return}r()}catch(O){console.error("Failed to connect Solana wallet:",O),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);D.useEffect(()=>{var T,C;(T=window.solana)!=null&&T.publicKey?g(window.solana.publicKey.toString()):(C=window.solflare)!=null&&C.publicKey&&g(window.solflare.publicKey.toString())},[]),D.useEffect(()=>{(async()=>{a(!0);try{let C,O=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}O=p,C=await PZ(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",C.data.length)}else u.api==="opensea"?C=await CA(u.slug,100,O):C=await _A(u.slug,1,100,O);w==="owned"&&p&&(console.log("Filtering for owner:",p),C.data.some(F=>F.owners&&F.owners.length>0)?C.data=C.data.filter(F=>F.owners.some(B=>B.owner_of&&B.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),v("Owner data not available for this Solana collection. Showing all NFTs."))),i(C.data)}catch(C){console.error(C)}finally{a(!1)}})()},[e,u,p,w]),D.useEffect(()=>{h&&_()},[h,_]);const E=async T=>{if(a(!0),u.api==="opensea"&&u.chain)try{const C=await q8(u.chain,T.address,T.token_id.toString()),O={...T,attributes:JSON.stringify(C.traits||[])};l(O)}catch(C){console.error("Failed to fetch full NFT details",C),l(T)}else l(T);a(!1)},x=()=>{if(!c)return null;let T=[];try{T=JSON.parse(c.attributes||"[]")}catch(C){console.error("Failed to parse NFT attributes:",C)}return m.jsxs("div",{className:n.detailView,children:[m.jsx("img",{src:c.image,alt:c.name}),m.jsx("h2",{children:c.name}),m.jsx("h4",{children:"Traits:"}),m.jsx("ul",{children:T.map((C,O)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[C.trait_type,":"]})," ",C.value]},O))})]})},S=()=>m.jsxs(m.Fragment,{children:[m.jsx("div",{className:n.collectionSelector,children:FO.map(T=>m.jsx("button",{className:`${n.collectionButton} ${u.slug===T.slug?"active":""}`,onClick:()=>d(T),children:T.name},T.slug))}),m.jsxs("div",{className:n.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>y("all"),style:{background:w==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:w==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>y("owned"),disabled:!e&&!p,style:{background:w==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:w==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{_()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),b&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:b}),u.api==="opensea-solana"&&!p&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?m.jsx("div",{className:n.loading,children:"Loading NFTs..."}):m.jsx("div",{className:n.grid,children:s.map(T=>{let C=T.image||T.image_url||T.image_url_shrunk||"/assets/pixelawb.png";return m.jsxs("div",{className:n.gridItem,onClick:()=>void E(T),children:[m.jsx("img",{src:C,alt:T.name,onError:O=>{O.currentTarget.src!==T.image_url&&T.image_url?O.currentTarget.src=T.image_url:O.currentTarget.src!==T.image_url_shrunk&&T.image_url_shrunk?O.currentTarget.src=T.image_url_shrunk:O.currentTarget.src="/assets/pixelawb.png"}}),m.jsx("span",{children:T.name})]},T.id)})})]})]});return m.jsxs("div",{className:n.galleryContainer,children:[m.jsxs("header",{className:n.header,children:[m.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),m.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),m.jsx("div",{className:n.content,children:o?m.jsx("p",{className:n.loading,children:"Loading..."}):c?x():S()})]})},T1e=Oi({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),ci=({isOpen:t,onClose:e,title:n,children:r})=>{const s=T1e();return t?m.jsx("div",{className:s.overlay,children:m.jsxs("div",{className:s.popup,children:[m.jsxs("div",{className:s.titleBar,children:[m.jsx("span",{children:n}),m.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:"✕"})]}),m.jsx("div",{className:s.content,children:r})]})}):null},N1e=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=D.useState([]),[i,o]=D.useState(!1),[a,c]=D.useState(!1),[l,u]=D.useState({}),[d,h]=D.useState(null),{data:f}=M5();D.useEffect(()=>{t&&n&&p()},[t,n]);const p=async()=>{o(!0),h(null);try{const _=await z8(n);s(_);const E={};_.forEach(x=>{E[x.id]=0}),u(E)}catch(_){h(_.message)}finally{o(!1)}},g=(_,E)=>{u(x=>({...x,[_]:Math.max(0,E)}))},w=async()=>{const _=Object.entries(l).filter(([,E])=>E>0).map(([E,x])=>({id:E,quantity:x}));if(_.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}c(!0),h(null);try{const E=await W8(n,_);if(E.success&&E.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const x=await f.sendTransaction({to:E.mintTransaction.to,value:BigInt(E.mintTransaction.value),data:E.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${x}`),e()}catch(x){h("Transaction failed: "+x.message)}}else throw new Error(E.message||"Could not retrieve minting transaction.")}catch(E){h("Minting failed: "+E.message)}finally{c(!1)}},y=(_,E)=>`${parseFloat(_)} ${E}`,b={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},v={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return m.jsxs(ci,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&m.jsx("div",{style:v,children:d}),i?m.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(_=>m.jsxs("div",{style:b,children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:_.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",y(_.token_price,_.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",_.wallet_limit===4294967295?"Unlimited":_.wallet_limit," per wallet"]}),m.jsx("input",{type:"number",min:0,max:_.wallet_limit===4294967295?void 0:_.wallet_limit,value:l[_.id]||"",onChange:E=>g(_.id,parseInt(E.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),m.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},_.id))]}),m.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:w,disabled:a,children:a?"Minting...":"Mint"})]})]})},P1e=Oi({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),k1e=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],O1e=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],R1e=()=>{const t=P1e(),{open:e}=Cm(),{address:n,isConnected:r}=im(),{isPending:s}=U5(),{disconnect:i}=j5(),{data:o}=L5({address:n}),[a,c]=D.useState("main"),[l,u]=D.useState(!1),[d,h]=D.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=D.useState(!1),[g,w]=D.useState(!1),[y,b]=D.useState(!1),[v,_]=D.useState(!1),[E,x]=D.useState(!1),[S,T]=D.useState(!1),[C,O]=D.useState(!1),[R,F]=D.useState(!1),[W,B]=D.useState(!1),[I,A]=D.useState(!1),[U,P]=D.useState(!1),[k,j]=D.useState(!1),z=[{label:"Mint",icon:"/assets/mint.gif",action:()=>w(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>b(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>_(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>x(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],K=Z=>{Z.disabled||Z.action()};if(D.useEffect(()=>{const Z=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(Z)},[]),D.useEffect(()=>{u(!0)},[]),a==="gallery")return m.jsx(I1e,{onBack:()=>c("main"),walletAddress:n||void 0});function Q({open:Z,onClose:se,title:Pe,nfts:Oe}){const De=Ke=>{switch(Ke){case"lawbsters":T(!0);break;case"lawbstarz":O(!0);break;case"pixelawbs":F(!0);break;case"halloween":B(!0);break;case"lawbstation":A(!0);break;case"nexus":P(!0);break}};return m.jsx(ci,{isOpen:Z,onClose:se,title:Pe,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:Oe.map(Ke=>m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>De(Ke.id),children:[m.jsx("img",{src:Ke.image,alt:Ke.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),m.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:Ke.name}),m.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:Ke.description})]},Ke.id))})})}function Y({open:Z,onClose:se}){return Z?m.jsxs(ci,{isOpen:Z,onClose:se,title:"$LAWB",children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"🦞 $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}})]}):null}return m.jsxs("div",{className:t.mobileContainer,children:[m.jsx("header",{className:t.header,children:m.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),m.jsx("div",{className:t.iconGrid,children:z.map(Z=>m.jsxs("div",{className:t.icon,onClick:()=>K(Z),children:[m.jsx("img",{src:Z.icon,alt:Z.label}),m.jsx("span",{children:Z.label})]},Z.label))}),l&&m.jsxs(ci,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&m.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:m.jsxs("div",{className:t.menuModal,onClick:Z=>Z.stopPropagation(),children:[m.jsx("a",{href:"https://dexscreener.com/solana/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Dexscreener"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),m.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),j(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),m.jsx(N1e,{isOpen:g,onClose:()=>w(!1),walletAddress:n||""}),m.jsx(Q,{open:y,onClose:()=>b(!1),title:"EVM NFT'S FOLDER",nfts:k1e}),m.jsx(Q,{open:v,onClose:()=>_(!1),title:"SOL NFTS FOLDER",nfts:O1e}),m.jsx(Y,{open:E,onClose:()=>x(!1)}),m.jsxs(ci,{isOpen:S,onClose:()=>T(!1),title:"Lawbsters",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(ci,{isOpen:C,onClose:()=>O(!1),title:"Lawbstarz",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(ci,{isOpen:R,onClose:()=>F(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{F(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),m.jsxs(ci,{isOpen:W,onClose:()=>B(!1),title:"A Lawbster Halloween",children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),m.jsxs(ci,{isOpen:I,onClose:()=>A(!1),title:"Lawbstation",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(ci,{isOpen:U,onClose:()=>P(!1),title:"Nexus",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsx(ci,{isOpen:k,onClose:()=>j(!1),title:"Meme Generator",children:m.jsx(x4,{})}),m.jsxs("div",{className:t.taskbar,children:[m.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),m.jsxs("div",{className:t.walletStatus,children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),m.jsx("span",{className:t.clock,children:d})]})]})};function $1e(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=D.useState(e(t));function s(){r(e(t))}return D.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}function D1e(t){let e=[],n,r;function s(a){return hg.parseEvmChainId(a)||1}function i(){var a;return n||(n=Ml.getInstance({projectId:t.options.projectId,chainId:(a=$.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?fn.open(Vt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?fn.open(Vt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&fn.open(Vt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:Vt.EmbeddedWalletAbortController})),n}async function o(a={}){var g,w;const c=i();let l=a.chainId;if(a.isReconnecting){const y=hg.parseEvmChainId(c.getLastUsedChainId()||""),b=(g=t.chains)==null?void 0:g[0].id;if(l=y||b,!l)throw new Error("ChainId not found in provider")}const u=(w=ce.state.preferredAccountTypes)==null?void 0:w.eip155,{address:d,chainId:h,accounts:f}=await c.connect({chainId:l,preferredAccountType:u,socialUri:a.socialUri});e=(f==null?void 0:f.map(y=>y.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:X.CONNECTOR_ID.AUTH,name:X.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:X.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=Ml.getInstance({projectId:t.options.projectId,chainId:(c=$.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:Vt.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?fn.open(Vt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?fn.open(Vt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&fn.open(Vt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=$.state.activeChain===X.CHAIN.EVM;if(X.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>ue.getConnectorId(h)===X.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l,u;try{const d=a.chains.find(g=>g.id===c);if(!d)throw new oo(new Error("chain not found on connector."));const h=await this.getProvider(),f=(l=ce.state.preferredAccountTypes)==null?void 0:l.eip155,p=await h.connect({chainId:c,preferredAccountType:f});return e=((u=p==null?void 0:p.accounts)==null?void 0:u.map(g=>g.address))||[p.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),d}catch(d){throw d instanceof Error?new oo(d):d}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(nc)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}fI.type="walletConnect";function fI(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:fI.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=$.getCaipNetworks(),w=await this.getProvider();if(!w)throw new ka;a||(a=this.onDisplayUri,w.on("display_uri",a));const y=await this.isChainsStale();w.session&&y&&await w.disconnect();const b=ne.state.universalProviderConfigOverride;if(!w.session||y){const C=yp.createNamespaces(g,b);await w.connect({optionalNamespaces:C,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(O=>Number(O.id)))}const v=await this.getAccounts(),_=await this.getChainId(),E=(p=(f=(h=w.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,x=E==null?void 0:E.some(C=>Number(C.split(":")[1])===_);let S=1;x?S=_:E!=null&&E[0]&&(S=Number(E[0].split(":")[1])),a&&(w.removeListener("display_uri",a),a=void 0),o&&(w.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),w.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),w.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),w.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),w.on("session_delete",c));const T=b==null?void 0:b.defaultChain;return w.setDefaultChain(T??`eip155:${S}`),{accounts:v,chainId:S}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new vn(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var p,g,w;const d=await this.getProvider();if(!((p=d==null?void 0:d.session)!=null&&p.namespaces))return[];const h=(w=(g=d==null?void 0:d.session)==null?void 0:g.namespaces[X.CHAIN.EVM])==null?void 0:w.accounts;return(h==null?void 0:h.map(y=>y.split(":")[2]))??[]},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=le.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const w=le.getStoredActiveCaipNetworkId(),y=e.getCaipNetworks(h),b=y==null?void 0:y.find(v=>v.id===w);b&&b.chainNamespace===X.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(b.id)}))}return r},async getChainId(){var g,w,y,b;const d=(g=e.getCaipNetwork(X.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(b=(y=(w=(await this.getProvider()).session)==null?void 0:w.namespaces[X.CHAIN.EVM])==null?void 0:y.chains)==null?void 0:b[0],p=$.getCaipNetworks().find(v=>v.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,w,y,b;const f=await this.getProvider();if(!f)throw new ka;const p=$.getCaipNetworks().find(v=>v.id===h);if(!p)throw new oo(new ig);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:Ue(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const v=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...v,h]),{...p,id:p.id}}catch(v){const _=v;if(/(?:user rejected)/iu.test(_.message))throw new vn(_);try{let E;d!=null&&d.blockExplorerUrls?E=d.blockExplorerUrls:E=(g=p.blockExplorers)!=null&&g.default.url?[(w=p.blockExplorers)==null?void 0:w.default.url]:[];const x=((b=(y=p.rpcUrls)==null?void 0:y.chainDefault)==null?void 0:b.http)||[],S={blockExplorerUrls:E,chainId:Ue(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:x};await f.request({method:"wallet_addEthereumChain",params:[S]});const T=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...T,h]),{...p,id:p.id}}catch(E){throw new vn(E)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>nc(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds($.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[X.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(w=>Number.parseInt(w.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const xf=$t({pendingTransactions:0}),zO={state:xf,subscribeKey(t,e){return Qn(xf,t,e)},increase(t){xf[t]+=1},decrease(t){xf[t]-=1},reset(t){xf[t]=0}};function U1e(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function j1e(t){if(Ce.isSafeApp()){const{safe:e}=await an(async()=>{const{safe:n}=await import("./index-BajFsFdA.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function L1e(t){try{const{coinbaseWallet:e}=await an(async()=>{const{coinbaseWallet:n}=await import("./index-BajFsFdA.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const M1e={enable:!1,pollingInterval:3e4};class B1e extends C4{constructor(e){const n=Zi.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=X.CHAIN.EVM,this.adapterType=X.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...M1e,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===X.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>Ce.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=kd(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>Ce.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=kd(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===X.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=Zi.getCaipNetworkId(s);i?n[s.id]=Zi.extendWagmiTransports(s,e.projectId,i):n[s.id]=Zi.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=$q({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=fq(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),zO.increase("pendingTransactions")}});const e=zO.subscribeKey("pendingTransactions",n=>{var r;n>=X.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){u5(this.wagmiConfig,{onChange:(e,n)=>{e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"&&(e.address!==(n==null?void 0:n.address)||n.status!=="connected")&&(this.setupWatchPendingTransactions(),this.emit("accountChanged",{address:e.address,chainId:e.chainId}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await L1e(this.wagmiConfig.connectors);s&&n.push(s)}const r=await j1e(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(fI(e,n)),e.enableInjected!==!1&&r.push(sv({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(D1e({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async signMessage(e){try{return{signature:await lq(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=kd(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await aq(this.wagmiConfig,s);const i=await cq(this.wagmiConfig,s);return await pq(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(hg.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await gq(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await eq(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return CW(e.value,e.decimals)}formatUnits(e){return Ch(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(e.id===X.CONNECTOR_ID.AUTH||e.id===X.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:oc.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:oc.ConnectorNamesMap[e.id]??e.name,imageId:oc.ConnectorImageIds[e.id],type:oc.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===X.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){d5(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=qi(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(Ce.isSafeApp()&&n===X.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await ew(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await ew(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await mT(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var u,d,h,f,p;const{id:n,provider:r,type:s,info:i,chainId:o,socialUri:a}=e,c=this.getWagmiConnector(n);if(!c)throw new Error("connectionControllerClient:connectExternal - connector is undefined");if(r&&i&&c.id===X.CONNECTOR_ID.EIP6963&&((u=c.setEip6963Wallet)==null||u.call(c,{provider:r,info:i})),c.uid===((h=(d=this.wagmiConfig)==null?void 0:d.state)==null?void 0:h.current)){const g=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(c.uid);if(g)return{address:g==null?void 0:g.accounts[0],chainId:g==null?void 0:g.chainId,provider:r,type:s,id:n}}const l=await ew(this.wagmiConfig,{connector:c,chainId:o?Number(o):void 0,socialUri:a});return{address:l.accounts[0],chainId:l.chainId,provider:r,type:s,id:n}}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await L_(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=le.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await sq(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});le.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(){const e=qi(this.wagmiConfig);await Promise.allSettled(e.map(async n=>{const r=this.getWagmiConnector(n.connector.id);r&&await c5(this.wagmiConfig,{connector:r})})),this.wagmiConfig.state.connections.clear()}async switchNetwork(e){var r,s,i,o,a;const{caipNetwork:n}=e;await mT(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:n.name,nativeCurrency:n.nativeCurrency,rpcUrls:[((i=(s=(r=n.rpcUrls)==null?void 0:r.chainDefault)==null?void 0:s.http)==null?void 0:i[0])??""],blockExplorerUrls:[((o=n.blockExplorers)==null?void 0:o.default.url)??""],iconUrls:[((a=n.assets)==null?void 0:a.imageUrl)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=qi(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=U1e(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=qi(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=qi(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=qi(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setUniversalProvider(e){e.on("connect",()=>{const n=qi(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if($.state.activeChain==="eip155")return;L_(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new dI({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"}))}}const j4="7c65f27254d6ddd24cf7eedf2685c4fb",F1e={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},L4=new B1e({networks:[_4],projectId:j4,ssr:!1});Cbe({adapters:[L4],networks:[_4],projectId:j4,metadata:F1e,features:{analytics:!1}});const z1e=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>an(async()=>{const{default:r}=await Promise.resolve().then(()=>Bh);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class pI extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class W1e extends pI{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class q1e extends pI{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class H1e extends pI{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Tx;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Tx||(Tx={}));var V1e=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class G1e{constructor(e,{headers:n={},customFetch:r,region:s=Tx.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=z1e(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return V1e(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:c}=n;c||(c=this.region),c&&c!=="any"&&(a["x-region"]=c);let l;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:l}).catch(p=>{throw new W1e(p)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new q1e(u);if(!u.ok)throw new H1e(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield u.json():h==="application/octet-stream"?f=yield u.blob():h==="text/event-stream"?f=u:h==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(s){return{data:null,error:s}}})}}var Qr={},gI={},Kv={},xm={},Yv={},Jv={},K1e=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},mh=K1e();const Y1e=mh.fetch,M4=mh.fetch.bind(mh),B4=mh.Headers,J1e=mh.Request,Q1e=mh.Response,Bh=Object.freeze(Object.defineProperty({__proto__:null,Headers:B4,Request:J1e,Response:Q1e,default:M4,fetch:Y1e},Symbol.toStringTag,{value:"Module"})),Z1e=P0(Bh);var Qv={};Object.defineProperty(Qv,"__esModule",{value:!0});let X1e=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Qv.default=X1e;var F4=rn&&rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Jv,"__esModule",{value:!0});const eEe=F4(Z1e),tEe=F4(Qv);let nEe=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=eEe.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,c;let l=null,u=null,d=null,h=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),w=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");g&&w&&w.length>1&&(d=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await i.text();try{l=JSON.parse(g),Array.isArray(l)&&i.status===404&&(u=[],l=null,h=200,f="OK")}catch{i.status===404&&g===""?(h=204,f="No Content"):l={message:g}}if(l&&this.isMaybeSingle&&(!((c=l==null?void 0:l.details)===null||c===void 0)&&c.includes("0 rows"))&&(l=null,h=200,f="OK"),l&&this.shouldThrowOnError)throw new tEe.default(l)}return{error:l,data:u,count:d,status:h,statusText:f}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};Jv.default=nEe;var rEe=rn&&rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Yv,"__esModule",{value:!0});const sEe=rEe(Jv);let iEe=class extends sEe.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Yv.default=iEe;var oEe=rn&&rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xm,"__esModule",{value:!0});const aEe=oEe(Yv);let cEe=class extends aEe.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};xm.default=cEe;var lEe=rn&&rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Kv,"__esModule",{value:!0});const Sf=lEe(xm);let uEe=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Sf.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){const a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new Sf.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const c=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){const l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new Sf.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Sf.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Sf.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Kv.default=uEe;var Zv={},Xv={};Object.defineProperty(Xv,"__esModule",{value:!0});Xv.version=void 0;Xv.version="0.0.0-automated";Object.defineProperty(Zv,"__esModule",{value:!0});Zv.DEFAULT_HEADERS=void 0;const dEe=Xv;Zv.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${dEe.version}`};var z4=rn&&rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gI,"__esModule",{value:!0});const hEe=z4(Kv),fEe=z4(xm),pEe=Zv;let gEe=class W4{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},pEe.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new hEe.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new W4(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let c;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(o="POST",c=n);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new fEe.default({method:o,url:a,headers:l,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};gI.default=gEe;var Fh=rn&&rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qr,"__esModule",{value:!0});Qr.PostgrestError=Qr.PostgrestBuilder=Qr.PostgrestTransformBuilder=Qr.PostgrestFilterBuilder=Qr.PostgrestQueryBuilder=Qr.PostgrestClient=void 0;const q4=Fh(gI);Qr.PostgrestClient=q4.default;const H4=Fh(Kv);Qr.PostgrestQueryBuilder=H4.default;const V4=Fh(xm);Qr.PostgrestFilterBuilder=V4.default;const G4=Fh(Yv);Qr.PostgrestTransformBuilder=G4.default;const K4=Fh(Jv);Qr.PostgrestBuilder=K4.default;const Y4=Fh(Qv);Qr.PostgrestError=Y4.default;var mEe=Qr.default={PostgrestClient:q4.default,PostgrestQueryBuilder:H4.default,PostgrestFilterBuilder:V4.default,PostgrestTransformBuilder:G4.default,PostgrestBuilder:K4.default,PostgrestError:Y4.default};const{PostgrestClient:yEe,PostgrestQueryBuilder:Dxe,PostgrestFilterBuilder:Uxe,PostgrestTransformBuilder:jxe,PostgrestBuilder:Lxe,PostgrestError:Mxe}=mEe;function wEe(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const vEe=wEe(),bEe="2.11.13",EEe={"X-Client-Info":`realtime-js/${bEe}`},_Ee="1.0.0",J4=1e4,CEe=1e3;var wp;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(wp||(wp={}));var ur;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ur||(ur={}));var gi;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(gi||(gi={}));var Nx;(function(t){t.websocket="websocket"})(Nx||(Nx={}));var fl;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(fl||(fl={}));class xEe{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const c=r.decode(e.slice(o,o+i));o=o+i;const l=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:l}}}class Q4{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var kt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(kt||(kt={}));const WO=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=SEe(o,t,e,s),i),{})},SEe=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?Z4(i,o):Px(o)},Z4=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return NEe(e,n)}switch(t){case kt.bool:return AEe(e);case kt.float4:case kt.float8:case kt.int2:case kt.int4:case kt.int8:case kt.numeric:case kt.oid:return IEe(e);case kt.json:case kt.jsonb:return TEe(e);case kt.timestamp:return PEe(e);case kt.abstime:case kt.date:case kt.daterange:case kt.int4range:case kt.int8range:case kt.money:case kt.reltime:case kt.text:case kt.time:case kt.timestamptz:case kt.timetz:case kt.tsrange:case kt.tstzrange:return Px(e);default:return Px(e)}},Px=t=>t,AEe=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},IEe=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},TEe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},NEe=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Z4(e,a))}return t},PEe=t=>typeof t=="string"?t.replace(" ","T"):t,X4=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class mE{constructor(e,n,r={},s=J4){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var qO;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(qO||(qO={}));class vp{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=vp.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=vp.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=vp.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},c={};return this.map(i,(l,u)=>{o[l]||(c[l]=u)}),this.map(o,(l,u)=>{const d=i[l];if(d){const h=u.map(w=>w.presence_ref),f=d.map(w=>w.presence_ref),p=u.filter(w=>f.indexOf(w.presence_ref)<0),g=d.filter(w=>h.indexOf(w.presence_ref)<0);p.length>0&&(a[l]=p),g.length>0&&(c[l]=g)}else a[l]=u}),this.syncDiff(i,{joins:a,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,c)=>{var l;const u=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(c),u.length>0){const d=e[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,u,c)}),this.map(o,(a,c)=>{let l=e[a];if(!l)return;const u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=l,s(a,l,c),l.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var HO;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(HO||(HO={}));var VO;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(VO||(VO={}));var To;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(To||(To={}));class mI{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=ur.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new mE(this,gi.join,this.params,this.timeout),this.rejoinTimer=new Q4(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ur.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ur.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ur.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ur.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gi.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new vp(this),this.broadcastEndpointURL=X4(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==ur.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(To.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(To.CLOSED));const c={},l={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(To.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,f=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,p=[];for(let g=0;g<f;g++){const w=h[g],{filter:{event:y,schema:b,table:v,filter:_}}=w,E=u&&u[g];if(E&&E.event===y&&E.schema===b&&E.table===v&&E.filter===_)p.push(Object.assign(Object.assign({},w),{id:E.id}));else{this.unsubscribe(),this.state=ur.errored,e==null||e(To.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(To.SUBSCRIBED);return}}).receive("error",u=>{this.state=ur.errored,e==null||e(To.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(To.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=l.body)===null||s===void 0?void 0:s.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const l=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),l.receive("ok",()=>i("ok")),l.receive("error",()=>i("error")),l.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ur.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gi.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new mE(this,gi.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new mE(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=gi;if(r&&[a,c,l,u].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var p,g,w;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((w=(g=f.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(f=>f.callback(h,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var p,g,w,y,b,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const _=f.id,E=(p=f.filter)===null||p===void 0?void 0:p.event;return _&&((g=n.ids)===null||g===void 0?void 0:g.includes(_))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const _=(b=(y=f==null?void 0:f.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return _==="*"||_===((v=n==null?void 0:n.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:g,table:w,commit_timestamp:y,type:b,errors:v}=p;h=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:y,eventType:b,new:{},old:{},errors:v}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===ur.closed}_isJoined(){return this.state===ur.joined}_isJoining(){return this.state===ur.joining}_isLeaving(){return this.state===ur.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&mI.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(gi.close,{},e)}_onError(e){this._on(gi.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ur.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=WO(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=WO(e.columns,e.old_record)),n}}const GO=()=>{},kEe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class OEe{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=EEe,this.params={},this.timeout=J4,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=GO,this.ref=0,this.logger=GO,this.conn=null,this.sendBuffer=[],this.serializer=new xEe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>an(async()=>{const{default:c}=await Promise.resolve().then(()=>Bh);return{default:c}},void 0).then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Nx.websocket}`,this.httpEndpoint=X4(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Q4(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){this.conn||(this.transport||(this.transport=vEe),this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection())}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:_Ee}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case wp.connecting:return fl.Connecting;case wp.open:return fl.Open;case wp.closing:return fl.Closing;default:return fl.Closed}}isConnected(){return this.connectionState()===fl.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new mI(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{n&&r.updateJoinPayload({access_token:n,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(gi.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(CEe,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(gi.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([kEe],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class yI extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Nn(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class REe extends yI{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class kx extends yI{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var $Ee=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const eL=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>an(async()=>{const{default:r}=await Promise.resolve().then(()=>Bh);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},DEe=()=>$Ee(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield an(()=>Promise.resolve().then(()=>Bh),void 0)).Response:Response}),Ox=t=>{if(Array.isArray(t))return t.map(n=>Ox(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Ox(r)}),e};var Su=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const yE=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),UEe=(t,e,n)=>Su(void 0,void 0,void 0,function*(){const r=yield DEe();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new REe(yE(s),t.status||500))}).catch(s=>{e(new kx(yE(s),s))}):e(new kx(yE(t),t))}),jEe=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function Sm(t,e,n,r,s,i){return Su(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,jEe(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>UEe(c,a,r))})})}function T0(t,e,n,r){return Su(this,void 0,void 0,function*(){return Sm(t,"GET",e,n,r)})}function ja(t,e,n,r,s){return Su(this,void 0,void 0,function*(){return Sm(t,"POST",e,r,s,n)})}function LEe(t,e,n,r,s){return Su(this,void 0,void 0,function*(){return Sm(t,"PUT",e,r,s,n)})}function MEe(t,e,n,r){return Su(this,void 0,void 0,function*(){return Sm(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function tL(t,e,n,r,s){return Su(this,void 0,void 0,function*(){return Sm(t,"DELETE",e,r,s,n)})}var Fr=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const BEe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},KO={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class FEe{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=eL(s)}uploadOrUpdate(e,n,r,s){return Fr(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},KO),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const l=this._removeEmptyFolders(n),u=this._getFinalPath(l),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield d.json();return d.ok?{data:{path:l,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(Nn(i))return{data:null,error:i};throw i}})}upload(e,n,r){return Fr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Fr(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let c;const l=Object.assign({upsert:KO.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",l.cacheControl)):(c=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:u}),h=yield d.json();return d.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(Nn(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return Fr(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield ja(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new yI("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(Nn(r))return{data:null,error:r};throw r}})}update(e,n,r){return Fr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Fr(this,void 0,void 0,function*(){try{return{data:yield ja(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Nn(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Fr(this,void 0,void 0,function*(){try{return{data:{path:(yield ja(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Nn(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Fr(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield ja(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Nn(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Fr(this,void 0,void 0,function*(){try{const s=yield ja(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Nn(s))return{data:null,error:s};throw s}})}download(e,n){return Fr(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield T0(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Nn(a))return{data:null,error:a};throw a}})}info(e){return Fr(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield T0(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Ox(r),error:null}}catch(r){if(Nn(r))return{data:null,error:r};throw r}})}exists(e){return Fr(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield MEe(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Nn(r)&&r instanceof kx){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}remove(e){return Fr(this,void 0,void 0,function*(){try{return{data:yield tL(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Nn(n))return{data:null,error:n};throw n}})}list(e,n,r){return Fr(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},BEe),n),{prefix:e||""});return{data:yield ja(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Nn(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const zEe="2.7.1",WEe={"X-Client-Info":`storage-js/${zEe}`};var Zu=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class qEe{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},WEe),n),this.fetch=eL(r)}listBuckets(){return Zu(this,void 0,void 0,function*(){try{return{data:yield T0(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Nn(e))return{data:null,error:e};throw e}})}getBucket(e){return Zu(this,void 0,void 0,function*(){try{return{data:yield T0(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Nn(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Zu(this,void 0,void 0,function*(){try{return{data:yield ja(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Nn(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Zu(this,void 0,void 0,function*(){try{return{data:yield LEe(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Nn(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Zu(this,void 0,void 0,function*(){try{return{data:yield ja(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Nn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Zu(this,void 0,void 0,function*(){try{return{data:yield tL(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Nn(n))return{data:null,error:n};throw n}})}}class HEe extends qEe{constructor(e,n={},r){super(e,n,r)}from(e){return new FEe(this.url,this.headers,e,this.fetch)}}const VEe="2.50.1";let Wf="";typeof Deno<"u"?Wf="deno":typeof document<"u"?Wf="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Wf="react-native":Wf="node";const GEe={"X-Client-Info":`supabase-js-${Wf}/${VEe}`},KEe={headers:GEe},YEe={schema:"public"},JEe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},QEe={};var ZEe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const XEe=t=>{let e;return t?e=t:typeof fetch>"u"?e=M4:e=fetch,(...n)=>e(...n)},e_e=()=>typeof Headers>"u"?B4:Headers,t_e=(t,e,n)=>{const r=XEe(n),s=e_e();return(i,o)=>ZEe(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:t;let l=new s(o==null?void 0:o.headers);return l.has("apikey")||l.set("apikey",t),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:l}))})};var n_e=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};function r_e(t){return t.endsWith("/")?t:t+"/"}function s_e(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:c,auth:l,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},l),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>n_e(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}const nL="2.70.0",ad=30*1e3,Rx=3,wE=Rx*ad,i_e="http://localhost:9999",o_e="supabase.auth.token",a_e={"X-Client-Info":`gotrue-js/${nL}`},$x="X-Supabase-Api-Version",rL={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},c_e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,l_e=6e5;class wI extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ze(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class u_e extends wI{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function d_e(t){return ze(t)&&t.name==="AuthApiError"}class sL extends wI{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Wc extends wI{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Ta extends Wc{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function h_e(t){return ze(t)&&t.name==="AuthSessionMissingError"}class $y extends Wc{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Dy extends Wc{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Uy extends Wc{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function f_e(t){return ze(t)&&t.name==="AuthImplicitGrantRedirectError"}class YO extends Wc{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Dx extends Wc{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function vE(t){return ze(t)&&t.name==="AuthRetryableFetchError"}class JO extends Wc{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class bp extends Wc{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const N0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),QO=` 	
\r=`.split(""),p_e=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<QO.length;e+=1)t[QO[e].charCodeAt(0)]=-2;for(let e=0;e<N0.length;e+=1)t[N0[e].charCodeAt(0)]=e;return t})();function ZO(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(N0[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(N0[r]),e.queuedBits-=6}}function iL(t,e,n){const r=p_e[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function XO(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{y_e(o,r,n)};for(let o=0;o<t.length;o+=1)iL(t.charCodeAt(o),s,i);return e.join("")}function g_e(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function m_e(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}g_e(r,e)}}function y_e(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function w_e(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)iL(t.charCodeAt(s),n,r);return new Uint8Array(e)}function v_e(t){const e=[];return m_e(t,n=>e.push(n)),new Uint8Array(e)}function b_e(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>ZO(s,n,r)),ZO(null,n,r),e.join("")}function E_e(t){return Math.round(Date.now()/1e3)+t}function __e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const li=()=>typeof window<"u"&&typeof document<"u",rl={tested:!1,writable:!1},Ep=()=>{if(!li())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(rl.tested)return rl.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),rl.tested=!0,rl.writable=!0}catch{rl.tested=!0,rl.writable=!1}return rl.writable};function C_e(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const oL=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>an(async()=>{const{default:r}=await Promise.resolve().then(()=>Bh);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},x_e=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",aL=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},jy=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ly=async(t,e)=>{await t.removeItem(e)};class eb{constructor(){this.promise=new eb.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}eb.promiseConstructor=Promise;function bE(t){const e=t.split(".");if(e.length!==3)throw new bp("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!c_e.test(e[r]))throw new bp("JWT not in base64url format");return{header:JSON.parse(XO(e[0])),payload:JSON.parse(XO(e[1])),signature:w_e(e[2]),raw:{header:e[0],payload:e[1]}}}async function S_e(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function A_e(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function I_e(t){return("0"+t.toString(16)).substr(-2)}function T_e(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,I_e).join("")}async function N_e(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function P_e(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await N_e(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Xu(t,e,n=!1){const r=T_e();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await aL(t,`${e}-code-verifier`,s);const i=await P_e(r);return[i,r===i?"plain":"s256"]}const k_e=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function O_e(t){const e=t.headers.get($x);if(!e||!e.match(k_e))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function R_e(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function $_e(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const D_e=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ed(t){if(!D_e.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var U_e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const cl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),j_e=[502,503,504];async function eR(t){var e;if(!x_e(t))throw new Dx(cl(t),0);if(j_e.includes(t.status))throw new Dx(cl(t),t.status);let n;try{n=await t.json()}catch(i){throw new sL(cl(i),i)}let r;const s=O_e(t);if(s&&s.getTime()>=rL["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new JO(cl(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ta}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new JO(cl(n),t.status,n.weak_password.reasons);throw new u_e(cl(n),t.status||500,r)}const L_e=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ye(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[$x]||(i[$x]=rL["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await M_e(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function M_e(t,e,n,r,s,i){const o=L_e(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(c){throw console.error(c),new Dx(cl(c),0)}if(a.ok||await eR(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(c){await eR(c)}}function Ao(t){var e;let n=null;W_e(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=E_e(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function tR(t){const e=Ao(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Wa(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function B_e(t){return{data:t,error:null}}function F_e(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=U_e(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function z_e(t){return t}function W_e(t){return t.access_token&&t.refresh_token&&t.expires_in}const EE=["global","local","others"];var q_e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class H_e{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=oL(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=EE[0]){if(EE.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${EE.join(", ")}`);try{return await Ye(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ye(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Wa})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=q_e(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ye(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:F_e,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ze(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ye(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Wa})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,c;try{const l={nextPage:null,lastPage:0,total:0},u=await Ye(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:z_e});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(p.split(";")[1].split("=")[1]);l[`${w}Page`]=g}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(ze(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){ed(e);try{return await Ye(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Wa})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){ed(e);try{return await Ye(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Wa})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){ed(e);try{return await Ye(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Wa})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){ed(e.userId);try{const{data:n,error:r}=await Ye(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(ze(n))return{data:null,error:n};throw n}}async _deleteFactor(e){ed(e.userId),ed(e.id);try{return{data:await Ye(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ze(n))return{data:null,error:n};throw n}}}const V_e={getItem:t=>Ep()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Ep()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Ep()&&globalThis.localStorage.removeItem(t)}};function nR(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function G_e(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const td={debug:!!(globalThis&&Ep()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class cL extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class K_e extends cL{}async function Y_e(t,e,n){td.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),td.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){td.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{td.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw td.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new K_e(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(td.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}G_e();const J_e={url:i_e,storageKey:o_e,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:a_e,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function rR(t,e,n){return await n()}class Fg{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Fg.nextInstanceID,Fg.nextInstanceID+=1,this.instanceID>0&&li()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},J_e),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new H_e({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=oL(s.fetch),this.lock=s.lock||rR,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:li()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Y_e:this.lock=rR,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Ep()?this.storage=V_e:(this.memoryStorage={},this.storage=nR(this.memoryStorage)):(this.memoryStorage={},this.storage=nR(this.memoryStorage)),li()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${nL}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=C_e(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),li()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),f_e(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ze(n)?{error:n}:{error:new sL("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await Ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ao}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(ze(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Xu(this.storage,this.storageKey)),i=await Ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:p},xform:Ao})}else if("phone"in e){const{phone:u,password:d,options:h}=e;i=await Ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Ao})}else throw new Dy("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(ze(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:tR})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:tR})}else throw new Dy("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new $y}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(ze(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,o,a,c,l,u,d,h,f;let p,g;if("message"in e)p=e.message,g=e.signature;else{const{chain:w,wallet:y,statement:b,options:v}=e;let _;if(li())if(typeof y=="object")_=y;else{const x=window;if("solana"in x&&typeof x.solana=="object"&&("signIn"in x.solana&&typeof x.solana.signIn=="function"||"signMessage"in x.solana&&typeof x.solana.signMessage=="function"))_=x.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=y}const E=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in _&&_.signIn){const x=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),b?{statement:b}:null));let S;if(Array.isArray(x)&&x[0]&&typeof x[0]=="object")S=x[0];else if(x&&typeof x=="object"&&"signedMessage"in x&&"signature"in x)S=x;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)p=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),g=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${E.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(s=(r=v==null?void 0:v.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((d=(u=v==null?void 0:v.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...v.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const x=await _.signMessage(new TextEncoder().encode(p),"utf8");if(!x||!(x instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=x}}try{const{data:w,error:y}=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:b_e(g)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ao});if(y)throw y;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new $y}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:y})}catch(w){if(ze(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const n=await jy(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ao});if(await Ly(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new $y}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(ze(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ao}),{data:c,error:l}=a;return l?{data:{user:null,session:null},error:l}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new $y}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:l})}catch(n){if(ze(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:c}=e;let l=null,u=null;this.flowType==="pkce"&&([l,u]=await Xu(this.storage,this.storageKey));const{error:d}=await Ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:c}=e,{data:l,error:u}=await Ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new Dy("You must provide either an email or phone number.")}catch(a){if(ze(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Ye(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Ao});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,l=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(s){if(ze(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Xu(this.storage,this.storageKey)),await Ye(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:B_e})}catch(i){if(ze(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Ta;const{error:s}=await Ye(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(ze(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await Ye(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await Ye(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Dy("You must provide either an email or phone number and a type")}catch(n){if(ze(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await jy(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<wE:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,l,u)=>(!o&&l==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,l,u))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Wa}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ta}:await Ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Wa})})}catch(n){if(ze(n))return h_e(n)&&(await this._removeSession(),await Ly(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Ta;const o=s.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await Xu(this.storage,this.storageKey));const{data:l,error:u}=await Ye(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:Wa});if(u)throw u;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ta;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=bE(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(ze(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ta;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ze(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!li())throw new Uy("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Uy(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new YO("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Uy("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new YO("No code detected.");const{data:b,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:c,token_type:l}=e;if(!i||!a||!o||!l)throw new Uy("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;c&&(h=parseInt(c));const f=h-u;f*1e3<=ad&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const p=h-d;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,u);const{data:g,error:w}=await this._getUser(i);if(w)throw w;const y={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:h,refresh_token:o,token_type:l,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(r){if(ze(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await jy(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(d_e(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Ly(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=__e(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Xu(this.storage,this.storageKey,!0));try{return await Ye(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(ze(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(ze(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,c,l,u;const{data:d,error:h}=i;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ye(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return li()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ze(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await Ye(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(ze(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await A_e(async s=>(s>0&&await S_e(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ye(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ao})),(s,i)=>{const o=200*Math.pow(2,s);return i&&vE(i)&&Date.now()+o-r<ad})}catch(r){if(this._debug(n,"error",r),ze(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),li()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await jy(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<wE;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${wE}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),vE(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Ta;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new eb;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ta;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),ze(i)){const o={session:null,error:i};return vE(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await aL(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ly(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&li()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ad);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/ad);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ad}ms, refresh threshold is ${Rx} ticks`),s<=Rx&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof cL)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!li()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Xu(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Ye(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ze(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:l}=await Ye(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(ze(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await Ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(ze(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ze(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=bE(s.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+l_e>Date.now()))return r;const{data:s,error:i}=await Ye(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new bp("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new bp("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};r=f.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:c}}=bE(r);if(R_e(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:s,signature:o},error:null}}const l=$_e(s.alg),u=await this.fetchJwk(s.kid,n),d=await crypto.subtle.importKey("jwk",u,l,!0,["verify"]);if(!await crypto.subtle.verify(l,d,o,v_e(`${a}.${c}`)))throw new bp("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}}}Fg.nextInstanceID=0;const Q_e=Fg;class Z_e extends Q_e{constructor(e){super(e)}}var X_e=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class eCe{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=r_e(e),c=new URL(a);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const l=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:YEe,realtime:QEe,auth:Object.assign(Object.assign({},JEe),{storageKey:l}),global:KEe},d=s_e(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=t_e(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new yEe(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new G1e(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new HEe(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return X_e(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:c},l,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Z_e({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new OEe(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const lL=(t,e,n)=>new eCe(t,e,n),uL="https://roxwocgknkiqnsgiojgz.supabase.co",tCe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJveHdvY2drbmtpcW5zZ2lvamd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzA3NjMxMTIsImV4cCI6MjA0NjMzOTExMn0.NbLMZom-gk7XYGdV4MtXYcgR8R1s8xthrIQ0hpQfx9Y",nCe=lL(uL,tCe),_E=lL(uL,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJveHdvY2drbmtpcW5zZ2lvamd6Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTczMDc2MzExMiwiZXhwIjoyMDQ2MzM5MTEyfQ.US6YTQfWVWNAfmEopBpD580jsaevKv_Ev7dGFeqFptA"),Af={AI:"ai"},My={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},sR=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],rCe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],sCe=()=>{const[t,e]=D.useState(!1),n=D.useRef(null),r=D.useRef(!1);D.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=document.createElement("script");a.src="/stockfish.js",a.onload=()=>{if(console.log("[DEBUG] LawbBot script loaded, initializing..."),typeof window<"u"&&window.Stockfish){const c=window.Stockfish;c().then(l=>{console.log("[DEBUG] LawbBot initialized successfully"),n.current=l,e(!0),r.current=!1,l.postMessage("setoption name Threads value 4"),l.postMessage("setoption name Hash value 128"),l.postMessage("setoption name MultiPV value 1")}).catch(l=>{console.error("[DEBUG] LawbBot initialization failed:",l),e(!1),r.current=!1})}else console.error("[DEBUG] LawbBot not found in window object"),e(!1),r.current=!1},a.onerror=c=>{console.error("[DEBUG] Failed to load LawbBot script:",c),e(!1),r.current=!1},document.head.appendChild(a)}catch(a){console.error("[DEBUG] Failed to create LawbBot script:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=D.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var f;console.log("[DEBUG] Stockfish message:",h),typeof h=="string"&&h.startsWith("bestmove ")&&(l=h.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(f=n.current)==null||f.removeMessageListener(d),c(l)))};try{n.current.addMessageListener(d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeMessageListener(d)}catch(g){console.warn("[DEBUG] Error removing message listener:",g)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=D.useCallback(async(o,a=4e3)=>{try{const c=["/api/stockfish","https://lawb-chess-api.wablesphoto.workers.dev"];for(const l of c)try{console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.bestmove||null}else console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`)}catch(u){console.warn(`[DEBUG] API error on ${l}:`,u)}return console.warn("[DEBUG] All API attempts failed, falling back to client-side Stockfish"),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},iCe=()=>{const[t,e]=D.useState(null),[n,r]=D.useState(!1),s=D.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=D.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},oCe=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r}=im(),[s,i]=D.useState(Af.AI),[o,a]=D.useState(()=>JSON.parse(JSON.stringify(sR))),[c,l]=D.useState("blue"),[u,d]=D.useState(null),[h,f]=D.useState("active"),[p,g]=D.useState("intermediate"),[w,y]=D.useState("Connect wallet to play"),[b,v]=D.useState([]),[_,E]=D.useState([]),[x,S]=D.useState([]),[T,C]=D.useState(null),[O,R]=D.useState(!1),[F,W]=D.useState(!1),[B,I]=D.useState(null),[A,U]=D.useState(null),[P]=D.useState(""),[k]=D.useState(.1),[j,z]=D.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),K=D.useRef(null),Q=D.useRef(!1),Y=D.useRef(o),Z=D.useRef(null),se=D.useRef(null),Pe=D.useRef(!1),Oe=D.useRef(!1),[De,Ke]=D.useState(!1),[Zt,Ps]=D.useState(!1),[it,Le]=D.useState(!1),[Dt,Ut]=D.useState(()=>typeof window<"u"&&window.localStorage?window.localStorage.getItem("lawb_chess_dark_mode")==="true":!1),mr=()=>{Ut(L=>(typeof window<"u"&&window.localStorage&&window.localStorage.setItem("lawb_chess_dark_mode",String(!L)),!L))},{stockfishReady:as,getCloudflareStockfishMove:Xt}=sCe(),{getOpeningData:on}=iCe(),[jn,sa]=D.useState("loading"),[qc,ia]=D.useState(!1),[Sn,Or]=D.useState([]),[Hc,Au]=D.useState(!1),[Vc,Am]=D.useState("/images/chessboard1.png"),vI=()=>{const L=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],q=Math.floor(Math.random()*L.length),V=L[q];return console.log("[DEBUG] Random chessboard selected:",V,"(index:",q,")"),V};D.useEffect(()=>{if(as)sa("ready");else{const L=window.setTimeout(()=>{as||(sa("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(L)}},[as]),D.useEffect(()=>{Y.current=o},[o]),D.useEffect(()=>{r?y("Select game mode"):(y("Connect wallet to play"),R(!1))},[r]),D.useEffect(()=>(!K.current&&typeof Worker<"u"&&(K.current=new Worker("/aiWorker.js"),K.current.onmessage=L=>{console.log("[DEBUG] AI worker response received:",L.data);const{move:q,nodes:V}=L.data;q&&Q.current&&h==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",q),console.log("[DEBUG] AI searched",V,"nodes"),Q.current=!1,se.current&&(window.clearTimeout(se.current),se.current=null),Z.current&&Z.current(q.from,q.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},K.current.onerror=L=>{console.error("[DEBUG] AI worker error:",L),y("AI worker error - using fallback mode"),Q.current=!1}),()=>{K.current&&(K.current.terminate(),K.current=null),se.current&&(window.clearTimeout(se.current),se.current=null)}),[]),D.useEffect(()=>{bI()},[]);const bI=async()=>{try{const L=new Promise((G,H)=>window.setTimeout(()=>H(new Error("Database timeout")),1e4)),q=nCe.from("leaderboard").select("*").order("points",{ascending:!1}),V=await Promise.race([q,L]);if(V.error)throw V.error;V.data&&E(V.data),console.log("Leaderboard data loaded:",V.data)}catch(L){y("Failed to load leaderboard"),console.error("Leaderboard error:",L)}},zh=async L=>{if(console.log("[DEBUG] updateScore called with:",L),!r){console.log("[DEBUG] No wallet address, returning");return}try{const q=r.toLowerCase(),{data:V}=await _E.from("leaderboard").select("*").eq("username",q).maybeSingle();console.log("[DEBUG] Existing record:",V);const G=V!=null&&V.wins?Number(V.wins):0,H=V!=null&&V.losses?Number(V.losses):0,de=V!=null&&V.draws?Number(V.draws):0,he=V!=null&&V.total_games?Number(V.total_games):0,xe=V!=null&&V.points?Number(V.points):0;console.log("[DEBUG] Score calculation:",{currentWins:G,currentLosses:H,currentDraws:de,currentTotalGames:he,currentPoints:xe,gameResult:L});const et=G+(L==="win"?1:0),ft=H+(L==="loss"?1:0),Lt=de+(L==="draw"?1:0),pt=he+1;let Ln=0;if(L==="win")switch(p){case"novice":Ln=1;break;case"intermediate":Ln=3;break;case"world-class":Ln=5;break;case"master-class":Ln=10;break;default:Ln=1}else L==="draw"&&(Ln=1);const dn=xe+Ln;if(console.log("[DEBUG] New values:",{newWins:et,newLosses:ft,newDraws:Lt,newTotalGames:pt,newPoints:dn,pointsToAdd:Ln}),V){const{error:yr}=await _E.from("leaderboard").update({wins:et,losses:ft,draws:Lt,total_games:pt,points:dn,updated_at:new Date().toISOString()}).eq("username",q);if(yr){console.error("[DEBUG] Error updating leaderboard:",yr);return}}else{const{error:yr}=await _E.from("leaderboard").insert({username:q,chain_type:"ethereum",wins:et,losses:ft,draws:Lt,total_games:pt,points:dn,updated_at:new Date().toISOString()});if(yr){console.error("[DEBUG] Error inserting leaderboard record:",yr);return}}console.log("[DEBUG] Leaderboard updated successfully"),await bI()}catch(q){console.error("[DEBUG] Error in updateScore:",q)}},jt=L=>L&&L===L.toUpperCase()?"red":"blue",EI=(L,q)=>L>=0&&L<8&&q>=0&&q<8,_I=(L,q)=>`${String.fromCharCode(97+q)}${8-L}`,Gc=(L,q)=>{const V=q==="blue"?"k":"K";let G=null;for(let he=0;he<8;he++){for(let xe=0;xe<8;xe++)if(L[he][xe]===V){G={row:he,col:xe};break}if(G)break}if(!G)return console.log(`King not found for ${q}`),!1;const H=q==="blue"?"red":"blue",de=dL(G.row,G.col,H,L);return console.log(`${q} king at ${G.row},${G.col} under attack: ${de}`),de},dL=(L,q,V,G)=>{for(let H=0;H<8;H++)for(let de=0;de<8;de++){const he=G[H][de];if(he&&jt(he)===V&&Kc(he,H,de,L,q,!1,V,G,!0))return!0}return!1},hL=(L,q,V,G,H,de=o)=>{const he=de.map(et=>[...et]),xe=he[L][q];return he[V][G]=xe,he[L][q]=null,Gc(he,H)},fL=(L,q,V,G,H,de)=>{const he=L==="blue"?-1:1,xe=L==="blue"?6:1;if(!EI(G,H)||L==="blue"&&G>=q||L==="red"&&G<=q)return!1;const et=Math.abs(G-q),ft=Math.abs(H-V);if((et===1&&ft===0||et===2&&ft===0&&q===xe||et===1&&ft===1)&&et<=2&&ft<=1&&console.log("[DEBUG] Pawn move check:",{color:L,from:`${q},${V}`,to:`${G},${H}`}),V===H&&G===q+he)return de[G][H]===null;if(V===H&&q===xe&&G===q+2*he)return de[q+he][V]===null&&de[G][H]===null;if(Math.abs(V-H)===1&&G===q+he){const pt=de[G][H];return pt!==null&&jt(pt)!==L}if(Math.abs(V-H)===1&&G===q+he){const pt=de[q][H];if(pt&&jt(pt)!==L&&pt.toLowerCase()==="p"&&j.lastPawnDoubleMove&&j.lastPawnDoubleMove.row===q&&j.lastPawnDoubleMove.col===H)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},CI=(L,q,V,G,H)=>L!==V&&q!==G?!1:SI(L,q,V,G,H),pL=(L,q,V,G)=>{const H=Math.abs(L-V),de=Math.abs(q-G);return H===2&&de===1||H===1&&de===2},xI=(L,q,V,G,H)=>Math.abs(L-V)!==Math.abs(q-G)?!1:SI(L,q,V,G,H),gL=(L,q,V,G,H)=>CI(L,q,V,G,H)||xI(L,q,V,G,H),mL=(L,q,V,G,H)=>{const de=Math.abs(q-G),he=Math.abs(V-H);if(de<=1&&he<=1)return!0;if(de===0&&he===2){if(L==="blue"&&!j.blueKingMoved){if(H===6&&!j.blueRooksMove.right||H===2&&!j.blueRooksMove.left)return!0}else if(L==="red"&&!j.redKingMoved&&(H===6&&!j.redRooksMove.right||H===2&&!j.redRooksMove.left))return!0}return!1},SI=(L,q,V,G,H)=>{const de=L===V?0:(V-L)/Math.abs(V-L),he=q===G?0:(G-q)/Math.abs(G-q);let xe=L+de,et=q+he;for(;xe!==V||et!==G;){if(H[xe][et]!==null)return!1;xe+=de,et+=he}return!0},Kc=(L,q,V,G,H,de=!0,he=jt(L),xe=o,et=!1)=>{if(!EI(G,H))return et||console.log("[ILLEGAL MOVE] Out of board:",{piece:L,startRow:q,startCol:V,endRow:G,endCol:H}),!1;const ft=xe[G][H];if(ft&&jt(ft)===he)return et||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:L,startRow:q,startCol:V,endRow:G,endCol:H}),!1;const Lt=L.toLowerCase();let pt=!1;switch(Lt){case"p":pt=fL(he,q,V,G,H,xe);break;case"r":pt=CI(q,V,G,H,xe);break;case"n":pt=pL(q,V,G,H);break;case"b":pt=xI(q,V,G,H,xe);break;case"q":pt=gL(q,V,G,H,xe);break;case"k":pt=mL(he,q,V,G,H);break}return pt?pt&&de&&hL(q,V,G,H,he,xe)?(et||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:L,startRow:q,startCol:V,endRow:G,endCol:H}),!1):pt:(et||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:L,startRow:q,startCol:V,endRow:G,endCol:H,playerColor:he,pieceType:Lt,targetPiece:xe[G][H],targetPieceColor:xe[G][H]?jt(xe[G][H]):null}),!1)},Wh=(L,q=o,V=c)=>{const G=[],H=q[L.row][L.col];if(!H||jt(H)!==V)return G;const de=H.toLowerCase();if(de==="p"){const he=V==="blue"?-1:1,xe=V==="blue"?6:1,et=L.row+he;if(et>=0&&et<8&&Kc(H,L.row,L.col,et,L.col,!0,V,q,!0)&&G.push({row:et,col:L.col}),L.row===xe){const ft=L.row+2*he;ft>=0&&ft<8&&Kc(H,L.row,L.col,ft,L.col,!0,V,q,!0)&&G.push({row:ft,col:L.col})}for(const ft of[-1,1]){const Lt=L.col+ft,pt=L.row+he;Lt>=0&&Lt<8&&pt>=0&&pt<8&&Kc(H,L.row,L.col,pt,Lt,!0,V,q,!0)&&G.push({row:pt,col:Lt})}}else if(de==="n"){const he=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[xe,et]of he){const ft=L.row+xe,Lt=L.col+et;ft>=0&&ft<8&&Lt>=0&&Lt<8&&Kc(H,L.row,L.col,ft,Lt,!0,V,q,!0)&&G.push({row:ft,col:Lt})}}else for(let he=0;he<8;he++)for(let xe=0;xe<8;xe++)Kc(H,L.row,L.col,he,xe,!0,V,q,!0)&&G.push({row:he,col:xe});return G},yL=(L,q=o)=>{if(!Gc(q,L))return!1;for(let V=0;V<8;V++)for(let G=0;G<8;G++){const H=q[V][G];if(H&&jt(H)===L&&Wh({row:V,col:G},q,L).length>0)return!1}return!0},wL=(L,q=o)=>{if(Gc(q,L))return!1;for(let V=0;V<8;V++)for(let G=0;G<8;G++){const H=q[V][G];if(H&&jt(H)===L&&Wh({row:V,col:G},q,L).length>0)return!1}return!0},vL=(L,q)=>{if(h!=="active"||Q.current)return;const V=o[L][q],G=V?jt(V):null;if(u&&x.some(H=>H.row===L&&H.col===q)){ei(u,{row:L,col:q});return}if(V&&G===c){const H=Wh({row:L,col:q});d({row:L,col:q}),S(H);return}d(null),S([])},ei=(L,q,V=!1)=>{const G=o[L.row][L.col];if(console.log("[MOVE ATTEMPT]",{from:L,to:q,piece:G,isAIMove:V,board:JSON.parse(JSON.stringify(o)),moveHistory:b}),!!G){if(G.toLowerCase()==="p"&&(jt(G)==="blue"&&q.row===0||jt(G)==="red"&&q.row===7)){I({from:L,to:q}),W(!0);return}PI(L,q,"q",V)}};Z.current=ei;const AI=D.useCallback((L,q,V=!1)=>{console.log("[DEBUG] executeMoveAfterAnimation called:",{from:L,to:q,isAIMove:V}),Au(!0);const G=o.map(he=>[...he]),H=G[L.row][L.col];if(!H)return;G[q.row][q.col]=H,G[L.row][L.col]=null,AL(G,L,q,H),console.log("[DEBUG] Board state after move:",G);const de=IL(L,q);if(v(he=>{const xe=[...he,de];return console.log("[MOVE HISTORY UPDATED]",xe),xe}),C({from:L,to:q}),d(null),S([]),b.length<10&&!V){const he=iR(G,c==="blue"?"red":"blue");on(he).then(xe=>{xe&&xe.moves&&xe.moves.length>0&&(Or(xe.moves.slice(0,3)),ia(!0),setTimeout(()=>ia(!1),5e3))})}TL(L,q,H),console.log("[DEBUG] State updated, currentPlayer before switch:",c),l(he=>{const xe=he==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",xe),xe}),bL(G,c==="blue"?"red":"blue"),a(G),Q.current=!1,Pe.current=!1,Oe.current=!1,Au(!1)},[o,c,b,on]);D.useEffect(()=>{if(!Q.current&&s===Af.AI&&c==="red"&&!Pe.current&&!Hc)if(console.log("[DEBUG] Starting AI move for difficulty:",p),Q.current=!0,p==="world-class"||p==="master-class"){const L=p==="master-class"?15e3:8e3;y(`${p==="master-class"?"Master-class":"World-class"} AI is calculating...`),console.log(`[DEBUG] Using Cloudflare Worker API for ${p} difficulty`);const q=iR(o,c);console.log("[DEBUG] Sending FEN to API:",q),console.log("[DEBUG] Current board state:",JSON.stringify(o)),console.log("[DEBUG] Current player:",c),console.log("[DEBUG] Board vs FEN check:");for(let G=0;G<8;G++)for(let H=0;H<8;H++){const de=o[G][H];de&&console.log(`[DEBUG] Board[${G}][${H}] = "${de}" (${jt(de)})`)}console.log("[DEBUG] Board vs FEN check:");for(let G=0;G<8;G++)for(let H=0;H<8;H++){const de=o[G][H];de&&console.log(`[DEBUG] Board[${G}][${H}] = "${de}" (${jt(de)})`)}if(Oe.current){console.log("[DEBUG] API call already in progress, skipping");return}Oe.current=!0,Xt(q,L).then(G=>{if(console.log("[DEBUG] API returned move:",G),G&&G!=="(none)"&&G.length===4){const H=G.charCodeAt(0)-97,de=parseInt(G[1]),he=G.charCodeAt(2)-97,xe=parseInt(G[3]),et=8-de,ft=8-xe;if(H>=0&&H<8&&et>=0&&et<8&&he>=0&&he<8&&ft>=0&&ft<8){const Lt={from:{row:et,col:H},to:{row:ft,col:he}},pt=o[et][H];console.log("[DEBUG] Stockfish move:",G,"converted to:",Lt,"piece:",pt),console.log("[DEBUG] Board state at move coordinates:");for(let Ln=0;Ln<8;Ln++){let dn="";for(let yr=0;yr<8;yr++){const Tm=o[Ln][yr];dn+=Tm||"."}console.log(`[DEBUG] Row ${Ln}: ${dn}`)}if(pt&&jt(pt)==="red"&&Kc(pt,et,H,ft,he,!0,"red",o))console.log("[DEBUG] Red piece move is legal, executing..."),ei(Lt.from,Lt.to,!0);else{console.log("[DEBUG] Stockfish move not legal, finding alternative...");const Ln=[];for(let dn=0;dn<8;dn++)for(let yr=0;yr<8;yr++){const Tm=o[dn][yr];if(Tm&&jt(Tm)==="red"){const NL=Wh({row:dn,col:yr},o,"red");for(const PL of NL)Ln.push({from:{row:dn,col:yr},to:PL})}}if(Ln.length>0){const dn=Ln[0];console.log("[DEBUG] Using alternative legal move:",dn),ei(dn.from,dn.to,!0)}else{console.log("[DEBUG] No legal moves found, using fallback");const dn=Yc(o);dn&&ei(dn.from,dn.to,!0)}Q.current=!1,Oe.current=!1}}else{console.log("[DEBUG] Invalid move coordinates, using fallback");const Lt=Yc(o);Lt&&ei(Lt.from,Lt.to,!0),Q.current=!1,Oe.current=!1}}else{console.log("[DEBUG] Stockfish returned no valid move, using fallback");const H=Yc(o);H&&ei(H.from,H.to,!0),Q.current=!1,Oe.current=!1}}).catch(G=>{console.error("[DEBUG] Stockfish error:",G),console.log("[DEBUG] Falling back to simple AI for",p,"difficulty");const H=Yc(o);H&&ei(H.from,H.to,!0),Q.current=!1,Oe.current=!1})}else if(p==="intermediate"&&K.current)console.log("[DEBUG] Using AI worker for intermediate difficulty"),y("Intermediate AI is calculating..."),K.current.postMessage({board:o,currentPlayer:c,difficulty:p,pieceState:j}),se.current=window.setTimeout(()=>{console.log("[DEBUG] AI worker timeout, using simple fallback"),Q.current=!1,se.current=null;const L=Yc(o);L&&ei(L.from,L.to,!0)},5e3);else if(p==="novice")console.log("[DEBUG] Using simple AI for novice difficulty"),y("Novice AI is thinking..."),setTimeout(()=>{const L=Yc(o);L&&ei(L.from,L.to,!0),Q.current=!1},1e3);else{console.log("[DEBUG] No AI method available, using simple fallback");const L=Yc(o);L&&ei(L.from,L.to,!0),Q.current=!1}},[c,s,p,o,j,as]);const bL=(L,q)=>{console.log("Checking game end for player:",q);const V=L.some(H=>H.some(de=>de==="k")),G=L.some(H=>H.some(de=>de==="K"));if(!V)return console.log("[GAME END] KING CAPTURED - Red wins!"),f("checkmate"),y("King captured! Red wins!"),zh("loss"),Le(!0),setTimeout(()=>Le(!1),3e3),"checkmate";if(!G)return console.log("[GAME END] KING CAPTURED - Blue wins!"),f("checkmate"),y("King captured! You win!"),zh("win"),Le(!0),setTimeout(()=>Le(!1),3e3),"checkmate";if(console.log("Is king in check:",Gc(L,q)),yL(q,L)){console.log("[GAME END] CHECKMATE",{winner:q==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(L)),moveHistory:b}),f("checkmate");const H=q==="blue"?"red":"blue";return H==="blue"?(y("Checkmate! You win!"),zh("win"),Le(!0),setTimeout(()=>Le(!1),3e3)):(y(`Checkmate! ${H==="red"?"AI":"Opponent"} wins!`),zh("loss"),Le(!0),setTimeout(()=>Le(!1),3e3)),"checkmate"}return wL(q,L)?(console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(L)),moveHistory:b}),f("stalemate"),y("Stalemate! Game is a draw."),zh("draw"),Le(!0),setTimeout(()=>Le(!1),3e3),"stalemate"):(Gc(L,q)?(console.log("CHECK detected!"),y(`${q==="blue"?"Blue":"Red"} is in check!`)):y("Your turn"),null)},Yc=L=>{const q=[];for(let H=0;H<8;H++)for(let de=0;de<8;de++){const he=L[H][de];he&&jt(he)==="red"&&q.push({row:H,col:de})}for(let H=q.length-1;H>0;H--){const de=Math.floor(Math.random()*(H+1));[q[H],q[de]]=[q[de],q[H]]}const V=[],G=[];for(const H of q){const de=Wh(H,L,"red");for(const he of de){const xe=L[he.row][he.col];if(xe&&jt(xe)==="blue"){const ft={p:100,n:320,b:330,r:500,q:900,k:2e4}[xe.toLowerCase()]||0;V.push({from:H,to:he,value:ft})}else G.push({from:H,to:he})}}if(V.sort((H,de)=>de.value-H.value),V.length>0){const H=V[0],de=L.map(xe=>[...xe]),he=de[H.from.row][H.from.col];if(de[H.to.row][H.to.col]=he,de[H.from.row][H.from.col]=null,!Gc(de,"red"))return{from:H.from,to:H.to}}for(const H of G){const de=L.map(xe=>[...xe]),he=de[H.from.row][H.from.col];if(de[H.to.row][H.to.col]=he,de[H.from.row][H.from.col]=null,!Gc(de,"red"))return H}return null},II=()=>{a(JSON.parse(JSON.stringify(sR))),l("blue"),d(null),f("active"),v([]),S([]),C(null),R(!1),y("Select game mode"),z({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),Am(vI()),Q.current&&(Q.current=!1)},Im=()=>{console.log("[DEBUG] startGame called, difficulty:",p,"gameMode:",s),R(!0),Ke(!1),y("Game started! Your turn");const L=vI();Am(L),console.log("[DEBUG] Game started with chessboard:",L)},TI=L=>`${L.slice(0,6)}...${L.slice(-4)}`,EL=(L,q)=>{const V=o[L][q],G=(u==null?void 0:u.row)===L&&(u==null?void 0:u.col)===q,H=x.some(he=>he.row===L&&he.col===q),de=T&&(T.from.row===L&&T.from.col===q||T.to.row===L&&T.to.col===q);return m.jsxs("div",{className:`square ${G?"selected":""} ${H?"legal-move":""} ${de?"last-move":""}`,onClick:()=>vL(L,q),children:[V&&m.jsx("div",{className:"piece",style:{backgroundImage:My[V]?`url(${My[V]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),H&&m.jsx("div",{className:"legal-move-indicator"})]},`${L}-${q}`)},_L=()=>{if(!F||!B)return null;const L=c==="blue"?["q","r","b","n"]:["Q","R","B","N"];return m.jsx("div",{className:"promotion-dialog",children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",children:L.map(q=>m.jsx("div",{className:"promotion-piece",onClick:()=>{PI(B.from,B.to,q),W(!1),I(null)},style:{backgroundImage:My[q]?`url(${My[q]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},q))})]})})},[CL,xL]=D.useState(null),NI=(L=!1,q="Click a piece to learn more about it.")=>m.jsxs("div",{className:`piece-gallery${L?" piece-gallery-sm":""}`,children:[m.jsx("h3",{children:"Lawbstation Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:rCe.map(V=>m.jsxs("div",{className:"piece-gallery-item",onClick:()=>xL(V.key),children:[m.jsx("img",{src:V.img,alt:V.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:V.name}),CL===V.key&&m.jsx("div",{className:"piece-gallery-desc",children:V.desc})]},V.key))}),m.jsx("div",{className:"piece-gallery-tip",children:q})]}),SL=()=>m.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:m.jsx("div",{className:"difficulty-controls-col",children:m.jsxs("div",{className:"difficulty-selection-panel",children:[m.jsx("h3",{children:"Select Difficulty"}),m.jsx("button",{className:`difficulty-btn${p==="novice"?" selected":""}`,onClick:()=>{g("novice"),Im()},children:"Novice"}),m.jsx("button",{className:`difficulty-btn${p==="intermediate"?" selected":""}`,onClick:()=>{g("intermediate"),Im()},children:"Intermediate"}),m.jsx("button",{className:`difficulty-btn${p==="world-class"?" selected":""}`,onClick:()=>{g("world-class"),Im()},children:"World-Class"}),m.jsx("button",{className:`difficulty-btn${p==="master-class"?" selected":""}`,onClick:()=>{g("master-class"),Im()},children:"Master-Class"})]})})}),AL=(L,q,V,G)=>{if(G.toLowerCase()==="p"&&(jt(G)==="blue"&&V.row===0||jt(G)==="red"&&V.row===7)){const H=jt(G)==="blue"?"q":"Q";L[V.row][V.col]=H}G.toLowerCase()==="k"&&Math.abs(q.col-V.col)===2&&(V.col===6?(L[q.row][7]=null,L[q.row][5]=jt(G)==="blue"?"r":"R"):V.col===2&&(L[q.row][0]=null,L[q.row][3]=jt(G)==="blue"?"r":"R"))},IL=(L,q,V,G)=>{const H=_I(L.row,L.col),de=_I(q.row,q.col);return`${H}-${de}`},TL=(L,q,V)=>{const G={...j};V.toLowerCase()==="k"?jt(V)==="blue"?G.blueKingMoved=!0:G.redKingMoved=!0:V.toLowerCase()==="r"&&(jt(V)==="blue"?(L.col===0&&(G.blueRooksMove.left=!0),L.col===7&&(G.blueRooksMove.right=!0)):(L.col===0&&(G.redRooksMove.left=!0),L.col===7&&(G.redRooksMove.right=!0))),V.toLowerCase()==="p"&&Math.abs(L.row-q.row)===2?G.lastPawnDoubleMove={row:q.row,col:q.col}:G.lastPawnDoubleMove=null,z(G)},PI=(L,q,V="q",G=!1)=>{if(o[L.row][L.col],o[q.row][q.col]!==null){U({row:q.row,col:q.col,show:!0}),setTimeout(()=>{AI(L,q,G),U(null)},500);return}AI(L,q,G)};return m.jsxs("div",{className:`chess-game${n?" fullscreen":""}${Dt?" chess-dark-mode":""}`,children:[!n&&m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"Lawb Chess"}),m.jsxs("div",{className:"chess-controls",children:[e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:"×"}),m.jsx("button",{className:"dark-mode-toggle",onClick:mr,title:Dt?"Switch to light mode":"Switch to dark mode","aria-label":Dt?"Switch to light mode":"Switch to dark mode",style:{marginLeft:12},children:Dt?"☀️":"🌙"})]})]}),m.jsxs("div",{className:"game-stable-layout",children:[m.jsxs("div",{className:"left-sidebar",children:[O&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"move-history-status",children:w}),m.jsxs("div",{className:"move-history",children:[m.jsx("div",{className:"move-history-title",children:"Move History"}),m.jsx("ul",{className:"move-history-list",children:b.slice().reverse().map((L,q)=>m.jsx("li",{children:L},b.length-1-q))})]})]}),!O&&m.jsxs("div",{className:"leaderboard",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Points"})]})}),m.jsx("tbody",{children:Array.isArray(_)&&_.slice(0,10).map((L,q)=>{if(typeof L=="object"&&L!==null&&"username"in L&&"wins"in L&&"losses"in L&&"draws"in L&&"points"in L){const V=L;return m.jsxs("tr",{children:[m.jsx("td",{children:q+1}),m.jsx("td",{children:TI(V.username)}),m.jsx("td",{children:V.wins}),m.jsx("td",{children:V.losses}),m.jsx("td",{children:V.draws}),m.jsx("td",{children:V.points})]},V.username)}return null})})]})})]})]}),m.jsxs("div",{className:"center-area",children:[m.jsx("div",{className:"game-info",children:m.jsxs("div",{className:"game-info-bar",children:[m.jsxs("span",{className:c==="blue"?"current-blue":"current-red",children:["Current: ",c==="blue"?"Blue":"Red"]}),m.jsx("span",{className:"wager-label",children:"Wager:"})," ",m.jsx("span",{children:s===Af.AI?"NA":`${k} ETH`}),O&&!De&&m.jsxs("span",{className:p==="novice"?"mode-novice":p==="intermediate"?"mode-intermediate":p==="world-class"?"mode-world-class":"mode-master-class",children:["Mode: ",p==="novice"?"Novice":p==="intermediate"?"Intermediate":p==="world-class"?"World-Class":"Master-Class"]}),(p==="world-class"||p==="master-class")&&m.jsxs("span",{className:`stockfish-status ${jn}`,children:["LawbBot: ",jn==="loading"?"Loading...":jn==="ready"?"Ready":"Failed"]}),qc&&Sn.length>0&&m.jsxs("div",{className:"opening-suggestions",children:[m.jsx("span",{className:"opening-label",children:"Opening:"}),Sn.map((L,q)=>m.jsxs("span",{className:"opening-move",children:[L.san," (",Math.round(L.white+L.draws+L.black)," games)"]},q))]})]})}),O?m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${Vc})`},children:[Array.from({length:8},(L,q)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(V,G)=>EL(q,G))},q)),A&&A.show&&m.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${A.row*12.5}%`,left:`${A.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:m.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),m.jsxs("div",{className:"game-controls",children:[m.jsx("button",{onClick:()=>Ps(!0),children:"Chess Piece Info"}),m.jsx("button",{onClick:II,children:"New Game"}),m.jsx("button",{onClick:II,children:"Back to Menu"})]})]}):De?SL():m.jsxs("div",{className:"game-mode-panel",children:[m.jsx("h3",{className:"game-mode-title",children:"Select Game Mode"}),m.jsx("button",{className:`mode-btn ${s===Af.AI?"selected":""}`,onClick:()=>i(Af.AI),children:"VS THE HOUSE"}),m.jsxs("div",{className:"pvp-under-construction",children:[m.jsx("button",{className:"mode-btn",disabled:!0,children:"PVP UNDER CONSTRUCTION"}),m.jsx("img",{src:"/images/chessboard4.png",alt:"Chessboard",style:{display:"block",margin:"16px auto 0 auto",width:"180px",maxWidth:"90%"}})]}),m.jsx("button",{className:"start-btn continue-btn",onClick:()=>Ke(!0),children:"Continue"}),m.jsxs("div",{className:"how-to-section",children:[m.jsx("h4",{children:"How to Play"}),m.jsxs("div",{className:"how-to-content",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Chess Basics:"})," Move pieces to capture your opponent's king. Each piece moves differently - pawns forward, knights in L-shapes, bishops diagonally, rooks horizontally/vertically, queens in all directions, kings one square at a time."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Wallet Connection:"})," Connect your wallet to track your progress and compete on the leaderboard. Your wallet address serves as your username."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Points System:"})," Win points by defeating the AI - Novice (1pt), Intermediate (3pts), World-Class (5pts), Master-Class (10pts). Draws earn 1 point regardless of difficulty."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"AI Difficulty:"})," Novice=Easy, Intermediate=kinda harder, World-Class= harder than Intermediate, Master-Class=currently most difficult lawbBot."]})]})]})]})]}),m.jsx("div",{className:"right-sidebar",children:O?m.jsxs("div",{className:"leaderboard",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Points"})]})}),m.jsx("tbody",{children:Array.isArray(_)&&_.slice(0,10).map((L,q)=>{if(typeof L=="object"&&L!==null&&"username"in L&&"wins"in L&&"losses"in L&&"draws"in L&&"points"in L){const V=L;return m.jsxs("tr",{children:[m.jsx("td",{children:q+1}),m.jsx("td",{children:TI(V.username)}),m.jsx("td",{children:V.wins}),m.jsx("td",{children:V.losses}),m.jsx("td",{children:V.draws}),m.jsx("td",{children:V.points})]},V.username)}return null})})]})})]}):m.jsx("div",{className:"piece-gallery-panel",children:NI(!1)})})]}),Zt&&m.jsx("div",{className:"gallery-modal-overlay",onClick:()=>Ps(!1),children:m.jsxs("div",{className:"gallery-modal",onClick:L=>L.stopPropagation(),children:[m.jsx("button",{className:"close-modal-btn",onClick:()=>Ps(!1),children:"×"}),NI(!1)]})}),_L(),it&&m.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"})]})};function iR(t,e){let n="";for(let r=7;r>=0;r--){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r>0&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const oR=()=>{const[t,e]=D.useState(!1),{address:n,isConnected:r}=im(),{open:s}=Cm(),[i,o]=D.useState(()=>typeof window<"u"&&window.localStorage?window.localStorage.getItem("lawb_chess_dark_mode")==="true":!1),a=()=>{o(l=>(typeof window<"u"&&window.localStorage&&window.localStorage.setItem("lawb_chess_dark_mode",String(!l)),!l))};D.useEffect(()=>{typeof document<"u"&&(i?document.body.classList.add("chess-dark-mode"):document.body.classList.remove("chess-dark-mode"))},[i]);const c=()=>{t?window.location.href="https://lawb.xyz":(e(!0),window.setTimeout(()=>e(!1),4e3))};return m.jsxs("div",{className:`chess98-main-window${i?" chess-dark-mode":""}`,children:[m.jsxs("div",{className:"chess98-header",children:[m.jsx("button",{className:"chess98-back-btn",onClick:c,children:t?"warning this will end current game":"Back to Desktop"}),m.jsx("span",{className:"chess98-title",children:"LAWB CHESS"}),m.jsxs("span",{className:"chess98-wallet-status",children:[r&&n?m.jsxs("span",{title:n,children:[n.slice(0,6),"...",n.slice(-4)]}):m.jsx("span",{style:{color:"#fff",cursor:"pointer"},onClick:()=>{s()},children:"Connect Wallet"}),m.jsx("button",{className:"dark-mode-toggle",onClick:a,title:i?"Switch to light mode":"Switch to dark mode","aria-label":i?"Switch to light mode":"Switch to dark mode",style:{marginLeft:16},children:i?"☀️":"🌙"})]})]}),m.jsx("div",{className:"chess98-content",children:r&&n?m.jsx(oCe,{fullscreen:!0,onClose:()=>{},onMinimize:()=>{}}):m.jsxs("div",{className:"wallet-required",style:{marginTop:80},children:[m.jsx("h3",{style:{marginBottom:12,color:i?"#00ff00":"#0a2a7a"},children:"Wallet Required"}),m.jsxs("p",{style:{color:i?"#00ff00":"#222"},children:["You must connect your wallet to play chess and appear on the leaderboard.",m.jsx("br",{}),m.jsx("span",{style:{fontSize:13,opacity:.8},children:"(Wallet address is your username.)"})]}),m.jsx("button",{className:"start-btn",style:{marginTop:18,background:i?"#222":"#008000",color:i?"#00ff00":"#fff",border:i?"2px solid #00ff00":void 0},onClick:()=>{s()},children:"Connect Wallet"})]})})]})},aCe=new CH,cCe=typeof window<"u"&&window.location.hostname.startsWith("chess."),lCe=()=>$1e("(max-width: 768px)")?m.jsx(R1e,{}):m.jsx(S1e,{});CE.createRoot(document.getElementById("root")).render(m.jsx(vs.StrictMode,{children:m.jsx(jq,{config:L4.wagmiConfig,children:m.jsx(UH,{client:aCe,children:m.jsx(C1e,{children:m.jsx(b1e,{children:cCe?m.jsx(yw,{path:"/*",element:m.jsx(oR,{})}):m.jsxs(m.Fragment,{children:[m.jsx(yw,{path:"/",element:m.jsx(lCe,{})}),m.jsx(yw,{path:"/chess",element:m.jsx(oR,{})})]})})})})})}));export{Sxe as $,ce as A,Ne as B,ue as C,Qn as D,rp as E,Jn as F,Se as G,xC as H,Uf as I,wi as J,eX as K,St as L,mt as M,JZ as N,ne as O,ps as P,pw as Q,ke as R,bi as S,Gr as T,fg as U,Cg as V,Dn as W,Nxe as X,xx as Y,$X as Z,fp as _,mw as a,_h as a$,On as a0,du as a1,rn as a2,Axe as a3,g4 as a4,Sx as a5,ph as a6,an as a7,ICe as a8,nc as a9,GD as aA,VD as aB,Nc as aC,Xf as aD,Yo as aE,bCe as aF,RF as aG,Kl as aH,vCe as aI,ECe as aJ,Ww as aK,_Ce as aL,n7 as aM,W$ as aN,wCe as aO,X0 as aP,Mp as aQ,qw as aR,P0 as aS,CCe as aT,r7 as aU,FT as aV,Sq as aW,XK as aX,Qs as aY,bW as aZ,vW as a_,oo as aa,ig as ab,Ue as ac,vn as ad,ka as ae,QD as af,sv as ag,Hw as ah,HS as ai,Tc as aj,mCe as ak,rv as al,VS as am,gCe as an,pCe as ao,tD as ap,Q0 as aq,zw as ar,vF as as,xF as at,xCe as au,wz as av,ee as aw,LS as ax,Sr as ay,bz as az,vt as b,Gl as b0,K0 as b1,Tr as b2,un as b3,rm as b4,X as c,Ce as d,$ as e,bt as f,Lo as g,Txe as h,Dd as i,ms as j,ve as k,zt as l,Kve as m,fn as n,Yve as o,le as p,Vt as q,Ixe as r,ht as s,Y8 as t,$t as u,NX as v,Ns as w,xxe as x,xA as y,Q8 as z};
