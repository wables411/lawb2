const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedded-wallet-Cp-U_w5l.js","assets/if-defined-BU2UNRXg.js","assets/index-D-OOmnTI.js","assets/index-DhRuYyys.js","assets/ref-DiYd9L2k.js","assets/index-CqLI4RE9.js","assets/index-DUxajz3h.js","assets/index-DWqfSNIX.js","assets/index-BiWlQzo-.js","assets/index-DPttZbXV.js","assets/index-DBKiBPf2.js","assets/index-mwZL2OeU.js","assets/email-BWuz29Gt.js","assets/index-Q7WfxUWP.js","assets/socials-JPXzS7Ta.js","assets/index-DqekHiiI.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-DD2rED4P.js","assets/index-BeuC5IP5.js","assets/index-DwzloYh0.js","assets/index-CD8jVoLX.js","assets/swaps-BdfhJFFz.js","assets/index-DbaL6DhD.js","assets/index-BoHS6kFh.js","assets/index-S5hdo2I9.js","assets/send-B0qPBZzV.js","assets/index-DigZ-zY4.js","assets/index-zJu7cWsC.js","assets/receive-C7Ol-CFB.js","assets/index-z6tdpLXm.js","assets/onramp-7YyKg0km.js","assets/index-D7iuJfIG.js","assets/index-CEFLS43x.js","assets/index-DmpnZCst.js","assets/transactions-CPh_maBY.js","assets/index-C6KTJjKw.js","assets/index-Bm4oFhsl.js","assets/index-Cu4UG-2t.js","assets/index-D3QCbtPl.js","assets/index-vebOvcrP.js","assets/w3m-modal-C4HywVsS.js"])))=>i.map(i=>d[i]);
var cne=Object.defineProperty;var XU=t=>{throw TypeError(t)};var lne=(t,e,n)=>e in t?cne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var te=(t,e,n)=>lne(t,typeof e!="symbol"?e+"":e,n),UT=(t,e,n)=>e.has(t)||XU("Cannot "+n);var _=(t,e,n)=>(UT(t,e,"read from private field"),n?n.call(t):e.get(t)),K=(t,e,n)=>e.has(t)?XU("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),U=(t,e,n,r)=>(UT(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),fe=(t,e,n)=>(UT(t,e,"access private method"),n);var pd=(t,e,n,r)=>({set _(s){U(t,e,s,n)},get _(){return _(t,e,r)}});function une(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var ul=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function yz(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var wz={exports:{}},Cx={},bz={exports:{}},Ht={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uC=Symbol.for("react.element"),dne=Symbol.for("react.portal"),hne=Symbol.for("react.fragment"),fne=Symbol.for("react.strict_mode"),pne=Symbol.for("react.profiler"),gne=Symbol.for("react.provider"),mne=Symbol.for("react.context"),yne=Symbol.for("react.forward_ref"),wne=Symbol.for("react.suspense"),bne=Symbol.for("react.memo"),vne=Symbol.for("react.lazy"),e$=Symbol.iterator;function Ene(t){return t===null||typeof t!="object"?null:(t=e$&&t[e$]||t["@@iterator"],typeof t=="function"?t:null)}var vz={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ez=Object.assign,_z={};function $0(t,e,n){this.props=t,this.context=e,this.refs=_z,this.updater=n||vz}$0.prototype.isReactComponent={};$0.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$0.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Cz(){}Cz.prototype=$0.prototype;function o5(t,e,n){this.props=t,this.context=e,this.refs=_z,this.updater=n||vz}var a5=o5.prototype=new Cz;a5.constructor=o5;Ez(a5,$0.prototype);a5.isPureReactComponent=!0;var t$=Array.isArray,Az=Object.prototype.hasOwnProperty,c5={current:null},Sz={key:!0,ref:!0,__self:!0,__source:!0};function Iz(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Az.call(e,r)&&!Sz.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:uC,type:t,key:i,ref:o,props:s,_owner:c5.current}}function _ne(t,e){return{$$typeof:uC,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function l5(t){return typeof t=="object"&&t!==null&&t.$$typeof===uC}function Cne(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var n$=/\/+/g;function $T(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Cne(""+t.key):e.toString(36)}function UA(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case uC:case dne:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+$T(o,0):r,t$(s)?(n="",t!=null&&(n=t.replace(n$,"$&/")+"/"),UA(s,e,n,"",function(l){return l})):s!=null&&(l5(s)&&(s=_ne(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(n$,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",t$(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+$T(i,a);o+=UA(i,e,n,c,s)}else if(c=Ene(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+$T(i,a++),o+=UA(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function b1(t,e,n){if(t==null)return t;var r=[],s=0;return UA(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Ane(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ci={current:null},$A={transition:null},Sne={ReactCurrentDispatcher:Ci,ReactCurrentBatchConfig:$A,ReactCurrentOwner:c5};function xz(){throw Error("act(...) is not supported in production builds of React.")}Ht.Children={map:b1,forEach:function(t,e,n){b1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return b1(t,function(){e++}),e},toArray:function(t){return b1(t,function(e){return e})||[]},only:function(t){if(!l5(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ht.Component=$0;Ht.Fragment=hne;Ht.Profiler=pne;Ht.PureComponent=o5;Ht.StrictMode=fne;Ht.Suspense=wne;Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sne;Ht.act=xz;Ht.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ez({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=c5.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)Az.call(e,c)&&!Sz.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:uC,type:t.type,key:s,ref:i,props:r,_owner:o}};Ht.createContext=function(t){return t={$$typeof:mne,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:gne,_context:t},t.Consumer=t};Ht.createElement=Iz;Ht.createFactory=function(t){var e=Iz.bind(null,t);return e.type=t,e};Ht.createRef=function(){return{current:null}};Ht.forwardRef=function(t){return{$$typeof:yne,render:t}};Ht.isValidElement=l5;Ht.lazy=function(t){return{$$typeof:vne,_payload:{_status:-1,_result:t},_init:Ane}};Ht.memo=function(t,e){return{$$typeof:bne,type:t,compare:e===void 0?null:e}};Ht.startTransition=function(t){var e=$A.transition;$A.transition={};try{t()}finally{$A.transition=e}};Ht.unstable_act=xz;Ht.useCallback=function(t,e){return Ci.current.useCallback(t,e)};Ht.useContext=function(t){return Ci.current.useContext(t)};Ht.useDebugValue=function(){};Ht.useDeferredValue=function(t){return Ci.current.useDeferredValue(t)};Ht.useEffect=function(t,e){return Ci.current.useEffect(t,e)};Ht.useId=function(){return Ci.current.useId()};Ht.useImperativeHandle=function(t,e,n){return Ci.current.useImperativeHandle(t,e,n)};Ht.useInsertionEffect=function(t,e){return Ci.current.useInsertionEffect(t,e)};Ht.useLayoutEffect=function(t,e){return Ci.current.useLayoutEffect(t,e)};Ht.useMemo=function(t,e){return Ci.current.useMemo(t,e)};Ht.useReducer=function(t,e,n){return Ci.current.useReducer(t,e,n)};Ht.useRef=function(t){return Ci.current.useRef(t)};Ht.useState=function(t){return Ci.current.useState(t)};Ht.useSyncExternalStore=function(t,e,n){return Ci.current.useSyncExternalStore(t,e,n)};Ht.useTransition=function(){return Ci.current.useTransition()};Ht.version="18.3.1";bz.exports=Ht;var D=bz.exports;const Do=Wg(D),Ine=une({__proto__:null,default:Do},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xne=D,Nne=Symbol.for("react.element"),Tne=Symbol.for("react.fragment"),Rne=Object.prototype.hasOwnProperty,Pne=xne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,One={key:!0,ref:!0,__self:!0,__source:!0};function Nz(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Rne.call(e,r)&&!One.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Nne,type:t,key:i,ref:o,props:s,_owner:Pne.current}}Cx.Fragment=Tne;Cx.jsx=Nz;Cx.jsxs=Nz;wz.exports=Cx;var b=wz.exports,r$={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tz={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ne=function(t,e){if(!t)throw B0(e)},B0=function(t){return new Error("Firebase Database ("+Tz.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rz=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},kne=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},u5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Rz(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):kne(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||d==null)throw new Dne;const h=i<<2|a>>4;if(r.push(h),l!==64){const f=a<<4&240|l>>2;if(r.push(f),d!==64){const p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Dne extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pz=function(t){const e=Rz(t);return u5.encodeByteArray(e,!0)},PS=function(t){return Pz(t).replace(/\./g,"")},WO=function(t){try{return u5.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lne(t){return Oz(void 0,t)}function Oz(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Mne(n)||(t[n]=Oz(t[n],e[n]));return t}function Mne(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Une(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $ne=()=>Une().__FIREBASE_DEFAULTS__,Bne=()=>{if(typeof process>"u"||typeof r$>"u")return;const t=r$.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Fne=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&WO(t[1]);return e&&JSON.parse(e)},kz=()=>{try{return $ne()||Bne()||Fne()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jne=t=>{var e,n;return(n=(e=kz())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},zne=t=>{const e=jne(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Dz=()=>{var t;return(t=kz())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wne(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[PS(JSON.stringify(n)),PS(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hne(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Lz(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hne())}function Gne(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qne(){return Tz.NODE_ADMIN===!0}function Vne(){try{return typeof indexedDB=="object"}catch{return!1}}function Kne(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yne="FirebaseError";class dC extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Yne,Object.setPrototypeOf(this,dC.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mz.prototype.create)}}class Mz{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Qne(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new dC(s,a,r)}}function Qne(t,e){return t.replace(Jne,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Jne=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(t){return JSON.parse(t)}function Gr(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uz=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=aE(WO(i[0])||""),n=aE(WO(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},Zne=function(t){const e=Uz(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Xne=function(t){const e=Uz(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Vw(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function s$(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function OS(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function HO(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(i$(i)&&i$(o)){if(!HO(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function i$(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ere(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tre{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^i&(o^a),u=1518500249):(l=i^o^a,u=1859775393):d<60?(l=i&o|a&(i|o),u=2400959708):(l=i^o^a,u=3395469782);const h=(s<<5|s>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function d5(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nre=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,Ne(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Sx=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(t){return t&&t._delegate?t._delegate:t}class cE{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rre{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ax;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ire(e))try{this.getOrInitializeService({instanceIdentifier:$f})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=$f){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$f){return this.instances.has(e)}getOptions(e=$f){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:sre(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$f){return this.component?this.component.multipleInstances?e:$f:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sre(t){return t===$f?void 0:t}function ire(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ore{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new rre(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Gn||(Gn={}));const are={debug:Gn.DEBUG,verbose:Gn.VERBOSE,info:Gn.INFO,warn:Gn.WARN,error:Gn.ERROR,silent:Gn.SILENT},cre=Gn.INFO,lre={[Gn.DEBUG]:"log",[Gn.VERBOSE]:"log",[Gn.INFO]:"info",[Gn.WARN]:"warn",[Gn.ERROR]:"error"},ure=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=lre[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $z{constructor(e){this.name=e,this._logLevel=cre,this._logHandler=ure,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Gn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?are[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Gn.DEBUG,...e),this._logHandler(this,Gn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Gn.VERBOSE,...e),this._logHandler(this,Gn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Gn.INFO,...e),this._logHandler(this,Gn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Gn.WARN,...e),this._logHandler(this,Gn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Gn.ERROR,...e),this._logHandler(this,Gn.ERROR,...e)}}const dre=(t,e)=>e.some(n=>t instanceof n);let o$,a$;function hre(){return o$||(o$=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fre(){return a$||(a$=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Bz=new WeakMap,GO=new WeakMap,Fz=new WeakMap,BT=new WeakMap,h5=new WeakMap;function pre(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Oh(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Bz.set(n,t)}).catch(()=>{}),h5.set(e,t),e}function gre(t){if(GO.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});GO.set(t,e)}let qO={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return GO.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Fz.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Oh(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function mre(t){qO=t(qO)}function yre(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(FT(this),e,...n);return Fz.set(r,e.sort?e.sort():[e]),Oh(r)}:fre().includes(t)?function(...e){return t.apply(FT(this),e),Oh(Bz.get(this))}:function(...e){return Oh(t.apply(FT(this),e))}}function wre(t){return typeof t=="function"?yre(t):(t instanceof IDBTransaction&&gre(t),dre(t,hre())?new Proxy(t,qO):t)}function Oh(t){if(t instanceof IDBRequest)return pre(t);if(BT.has(t))return BT.get(t);const e=wre(t);return e!==t&&(BT.set(t,e),h5.set(e,t)),e}const FT=t=>h5.get(t);function bre(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Oh(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Oh(o.result),c.oldVersion,c.newVersion,Oh(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const vre=["get","getKey","getAll","getAllKeys","count"],Ere=["put","add","delete","clear"],jT=new Map;function c$(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jT.get(e))return jT.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Ere.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||vre.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return jT.set(e,i),i}mre(t=>({...t,get:(e,n,r)=>c$(e,n)||t.get(e,n,r),has:(e,n)=>!!c$(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _re{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Cre(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Cre(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const VO="@firebase/app",l$="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu=new $z("@firebase/app"),Are="@firebase/app-compat",Sre="@firebase/analytics-compat",Ire="@firebase/analytics",xre="@firebase/app-check-compat",Nre="@firebase/app-check",Tre="@firebase/auth",Rre="@firebase/auth-compat",Pre="@firebase/database",Ore="@firebase/data-connect",kre="@firebase/database-compat",Dre="@firebase/functions",Lre="@firebase/functions-compat",Mre="@firebase/installations",Ure="@firebase/installations-compat",$re="@firebase/messaging",Bre="@firebase/messaging-compat",Fre="@firebase/performance",jre="@firebase/performance-compat",zre="@firebase/remote-config",Wre="@firebase/remote-config-compat",Hre="@firebase/storage",Gre="@firebase/storage-compat",qre="@firebase/firestore",Vre="@firebase/vertexai-preview",Kre="@firebase/firestore-compat",Yre="firebase",Qre="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO="[DEFAULT]",Jre={[VO]:"fire-core",[Are]:"fire-core-compat",[Ire]:"fire-analytics",[Sre]:"fire-analytics-compat",[Nre]:"fire-app-check",[xre]:"fire-app-check-compat",[Tre]:"fire-auth",[Rre]:"fire-auth-compat",[Pre]:"fire-rtdb",[Ore]:"fire-data-connect",[kre]:"fire-rtdb-compat",[Dre]:"fire-fn",[Lre]:"fire-fn-compat",[Mre]:"fire-iid",[Ure]:"fire-iid-compat",[$re]:"fire-fcm",[Bre]:"fire-fcm-compat",[Fre]:"fire-perf",[jre]:"fire-perf-compat",[zre]:"fire-rc",[Wre]:"fire-rc-compat",[Hre]:"fire-gcs",[Gre]:"fire-gcs-compat",[qre]:"fire-fst",[Kre]:"fire-fst-compat",[Vre]:"fire-vertex","fire-js":"fire-js",[Yre]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE=new Map,Zre=new Map,YO=new Map;function u$(t,e){try{t.container.addComponent(e)}catch(n){Yu.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function kS(t){const e=t.name;if(YO.has(e))return Yu.debug(`There were multiple attempts to register component ${e}.`),!1;YO.set(e,t);for(const n of lE.values())u$(n,t);for(const n of Zre.values())u$(n,t);return!0}function Xre(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ese={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kh=new Mz("app","Firebase",ese);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tse{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new cE("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kh.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nse=Qre;function jz(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:KO,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw kh.create("bad-app-name",{appName:String(s)});if(n||(n=Dz()),!n)throw kh.create("no-options");const i=lE.get(s);if(i){if(HO(n,i.options)&&HO(r,i.config))return i;throw kh.create("duplicate-app",{appName:s})}const o=new ore(s);for(const c of YO.values())o.addComponent(c);const a=new tse(n,r,o);return lE.set(s,a),a}function zz(t=KO){const e=lE.get(t);if(!e&&t===KO&&Dz())return jz();if(!e)throw kh.create("no-app",{appName:t});return e}function rse(){return Array.from(lE.values())}function Ny(t,e,n){var r;let s=(r=Jre[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yu.warn(a.join(" "));return}kS(new cE(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sse="firebase-heartbeat-database",ise=1,uE="firebase-heartbeat-store";let zT=null;function Wz(){return zT||(zT=bre(sse,ise,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(uE)}catch(n){console.warn(n)}}}}).catch(t=>{throw kh.create("idb-open",{originalErrorMessage:t.message})})),zT}async function ose(t){try{const n=(await Wz()).transaction(uE),r=await n.objectStore(uE).get(Hz(t));return await n.done,r}catch(e){if(e instanceof dC)Yu.warn(e.message);else{const n=kh.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yu.warn(n.message)}}}async function d$(t,e){try{const r=(await Wz()).transaction(uE,"readwrite");await r.objectStore(uE).put(e,Hz(t)),await r.done}catch(n){if(n instanceof dC)Yu.warn(n.message);else{const r=kh.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Yu.warn(r.message)}}}function Hz(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ase=1024,cse=30*24*60*60*1e3;class lse{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dse(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=h$();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=cse}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Yu.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=h$(),{heartbeatsToSend:r,unsentEntries:s}=use(this._heartbeatsCache.heartbeats),i=PS(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Yu.warn(n),""}}}function h$(){return new Date().toISOString().substring(0,10)}function use(t,e=ase){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),f$(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),f$(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class dse{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Vne()?Kne().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ose(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return d$(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return d$(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function f$(t){return PS(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hse(t){kS(new cE("platform-logger",e=>new _re(e),"PRIVATE")),kS(new cE("heartbeat",e=>new lse(e),"PRIVATE")),Ny(VO,l$,t),Ny(VO,l$,"esm2017"),Ny("fire-js","")}hse("");var fse="firebase",pse="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ny(fse,pse,"app");var p$={};const g$="@firebase/database",m$="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gz="";function gse(t){Gz=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mse{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Gr(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:aE(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yse{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ad(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qz=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new mse(e)}}catch{}return new yse},ip=qz("localStorage"),wse=qz("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=new $z("@firebase/database"),bse=function(){let t=1;return function(){return t++}}(),Vz=function(t){const e=nre(t),n=new tre;n.update(e);const r=n.digest();return u5.encodeByteArray(r)},hC=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=hC.apply(null,r):typeof r=="object"?e+=Gr(r):e+=r,e+=" "}return e};let xv=null,y$=!0;const vse=function(t,e){Ne(!0,"Can't turn on custom loggers persistently."),Ty.logLevel=Gn.VERBOSE,xv=Ty.log.bind(Ty)},Ys=function(...t){if(y$===!0&&(y$=!1,xv===null&&wse.get("logging_enabled")===!0&&vse()),xv){const e=hC.apply(null,t);xv(e)}},fC=function(t){return function(...e){Ys(t,...e)}},QO=function(...t){const e="FIREBASE INTERNAL ERROR: "+hC(...t);Ty.error(e)},Qu=function(...t){const e=`FIREBASE FATAL ERROR: ${hC(...t)}`;throw Ty.error(e),new Error(e)},eo=function(...t){const e="FIREBASE WARNING: "+hC(...t);Ty.warn(e)},Ese=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&eo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Kz=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},_se=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Kw="[MIN_NAME]",cg="[MAX_NAME]",j0=function(t,e){if(t===e)return 0;if(t===Kw||e===cg)return-1;if(e===Kw||t===cg)return 1;{const n=w$(t),r=w$(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Cse=function(t,e){return t===e?0:t<e?-1:1},bb=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Gr(e))},f5=function(t){if(typeof t!="object"||t===null)return Gr(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Gr(e[r]),n+=":",n+=f5(t[e[r]]);return n+="}",n},Yz=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function ao(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Qz=function(t){Ne(!Kz(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(i%2?1:0),i=Math.floor(i/2);l.push(s?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},Ase=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Sse=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Ise(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const xse=new RegExp("^-?(0*)\\d{1,10}$"),Nse=-2147483648,Tse=2147483647,w$=function(t){if(xse.test(t)){const e=Number(t);if(e>=Nse&&e<=Tse)return e}return null},z0=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw eo("Exception was thrown by user callback.",n),e},Math.floor(0))}},Rse=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Nv=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pse{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){eo(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ose{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ys("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',eo(e)}}class BA{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}BA.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5="5",Jz="v",Zz="s",Xz="r",eW="f",tW=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,nW="ls",rW="p",JO="ac",sW="websocket",iW="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oW{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ip.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ip.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function kse(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function aW(t,e,n){Ne(typeof e=="string","typeof type must == string"),Ne(typeof n=="object","typeof params must == object");let r;if(e===sW)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===iW)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);kse(t)&&(n.ns=t.namespace);const s=[];return ao(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dse{constructor(){this.counters_={}}incrementCounter(e,n=1){ad(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Lne(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT={},HT={};function g5(t){const e=t.toString();return WT[e]||(WT[e]=new Dse),WT[e]}function Lse(t,e){const n=t.toString();return HT[n]||(HT[n]=e()),HT[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mse{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&z0(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b$="start",Use="close",$se="pLPCommand",Bse="pRTLPCB",cW="id",lW="pw",uW="ser",Fse="cb",jse="seg",zse="ts",Wse="d",Hse="dframe",dW=1870,hW=30,Gse=dW-hW,qse=25e3,Vse=3e4;class iy{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=fC(e),this.stats_=g5(n),this.urlFn=c=>(this.appCheckToken&&(c[JO]=this.appCheckToken),aW(n,iW,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Mse(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Vse)),_se(()=>{if(this.isClosed_)return;this.scriptTagHolder=new m5((...i)=>{const[o,a,c,l,u]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===b$)this.id=a,this.password=c;else if(o===Use)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[b$]="t",r[uW]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Fse]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Jz]=p5,this.transportSessionId&&(r[Zz]=this.transportSessionId),this.lastSessionId&&(r[nW]=this.lastSessionId),this.applicationId&&(r[rW]=this.applicationId),this.appCheckToken&&(r[JO]=this.appCheckToken),typeof location<"u"&&location.hostname&&tW.test(location.hostname)&&(r[Xz]=eW);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){iy.forceAllow_=!0}static forceDisallow(){iy.forceDisallow_=!0}static isAvailable(){return iy.forceAllow_?!0:!iy.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Ase()&&!Sse()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Gr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Pz(n),s=Yz(r,Gse);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Hse]="t",r[cW]=e,r[lW]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Gr(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class m5{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=bse(),window[$se+this.uniqueCallbackIdentifier]=e,window[Bse+this.uniqueCallbackIdentifier]=n,this.myIFrame=m5.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ys("frame writing exception"),a.stack&&Ys(a.stack),Ys(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ys("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[cW]=this.myID,e[lW]=this.myPW,e[uW]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+hW+r.length<=dW;){const o=this.pendingSegs.shift();r=r+"&"+jse+s+"="+o.seg+"&"+zse+s+"="+o.ts+"&"+Wse+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(qse)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ys("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kse=16384,Yse=45e3;let DS=null;typeof MozWebSocket<"u"?DS=MozWebSocket:typeof WebSocket<"u"&&(DS=WebSocket);class hc{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=fC(this.connId),this.stats_=g5(n),this.connURL=hc.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[Jz]=p5,typeof location<"u"&&location.hostname&&tW.test(location.hostname)&&(o[Xz]=eW),n&&(o[Zz]=n),r&&(o[nW]=r),s&&(o[JO]=s),i&&(o[rW]=i),aW(e,sW,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ip.set("previous_websocket_failure",!0);try{let r;qne(),this.mySock=new DS(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){hc.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&DS!==null&&!hc.forceDisallow_}static previouslyFailed(){return ip.isInMemoryStorage||ip.get("previous_websocket_failure")===!0}markConnectionHealthy(){ip.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=aE(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ne(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Gr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Yz(n,Kse);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Yse))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}hc.responsesRequiredToBeHealthy=2;hc.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[iy,hc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=hc&&hc.isAvailable();let r=n&&!hc.previouslyFailed();if(e.webSocketOnly&&(n||eo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[hc];else{const s=this.transports_=[];for(const i of dE.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);dE.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}dE.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qse=6e4,Jse=5e3,Zse=10*1024,Xse=100*1024,GT="t",v$="d",eie="s",E$="r",tie="e",_$="o",C$="a",A$="n",S$="p",nie="h";class rie{constructor(e,n,r,s,i,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=fC("c:"+this.id+":"),this.transportManager_=new dE(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Nv(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Xse?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Zse?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(GT in e){const n=e[GT];n===C$?this.upgradeIfSecondaryHealthy_():n===E$?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===_$&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=bb("t",e),r=bb("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:S$,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:C$,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:A$,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=bb("t",e),r=bb("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=bb(GT,e);if(v$ in e){const r=e[v$];if(n===nie){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===A$){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===eie?this.onConnectionShutdown_(r):n===E$?this.onReset_(r):n===tie?QO("Server Error: "+r):n===_$?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):QO("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),p5!==r&&eo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Nv(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Qse))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Nv(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Jse))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:S$,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ip.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fW{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pW=class{constructor(e){this.allowedEvents_=e,this.listeners_={},Ne(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){Ne(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS extends pW{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Lz()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new LS}getInitialEvent(e){return Ne(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I$=32,x$=768;class $n{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function hn(){return new $n("")}function Bt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function nf(t){return t.pieces_.length-t.pieceNum_}function Vn(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new $n(t.pieces_,e)}function gW(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function sie(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function mW(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function yW(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new $n(e,0)}function qr(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof $n)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new $n(n,0)}function Wt(t){return t.pieceNum_>=t.pieces_.length}function pi(t,e){const n=Bt(t),r=Bt(e);if(n===null)return e;if(n===r)return pi(Vn(t),Vn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function y5(t,e){if(nf(t)!==nf(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function mc(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(nf(t)>nf(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class iie{constructor(e,n){this.errorPrefix_=n,this.parts_=mW(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Sx(this.parts_[r]);wW(this)}}function oie(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Sx(e),wW(t)}function aie(t){const e=t.parts_.pop();t.byteLength_-=Sx(e),t.parts_.length>0&&(t.byteLength_-=1)}function wW(t){if(t.byteLength_>x$)throw new Error(t.errorPrefix_+"has a key path longer than "+x$+" bytes ("+t.byteLength_+").");if(t.parts_.length>I$)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+I$+") or object contains a cycle "+Bf(t))}function Bf(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5 extends pW{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new w5}getInitialEvent(e){return Ne(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb=1e3,cie=60*5*1e3,N$=30*1e3,lie=1.3,uie=3e4,die="server_kill",T$=3;class Bu extends fW{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=Bu.nextPersistentConnectionId_++,this.log_=fC("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=vb,this.maxReconnectDelay_=cie,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");w5.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&LS.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Gr(i)),Ne(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new Ax,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ne(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,l=a.s;Bu.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&ad(e,"w")){const r=Vw(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();eo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Xne(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=N$)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Zne(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),Ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Gr(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):QO("Unrecognized action received from server: "+Gr(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ne(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=vb,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=vb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>uie&&(this.reconnectDelay_=vb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*lie)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Bu.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(d){Ne(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Ys("getToken() completed but was canceled"):(Ys("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new rie(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{eo(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(die)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&eo(d),c())}}}interrupt(e){Ys("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ys("Resuming connection for reason: "+e),delete this.interruptReasons_[e],s$(this.interruptReasons_)&&(this.reconnectDelay_=vb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>f5(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new $n(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Ys("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=T$&&(this.reconnectDelay_=N$,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ys("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=T$&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Gz.replace(/\./g,"-")]=1,Lz()?e["framework.cordova"]=1:Gne()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=LS.getInstance().currentlyOnline();return s$(this.interruptReasons_)&&e}}Bu.nextPersistentConnectionId_=0;Bu.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ft(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Ft(Kw,e),s=new Ft(Kw,n);return this.compare(r,s)!==0}minPost(){return Ft.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let v1;class bW extends Ix{static get __EMPTY_NODE(){return v1}static set __EMPTY_NODE(e){v1=e}compare(e,n){return j0(e.name,n.name)}isDefinedOn(e){throw B0("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ft.MIN}maxPost(){return new Ft(cg,v1)}makePost(e,n){return Ne(typeof e=="string","KeyIndex indexValue must always be a string."),new Ft(e,v1)}toString(){return".key"}}const Ry=new bW;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ss{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ss.RED,this.left=s??Ji.EMPTY_NODE,this.right=i??Ji.EMPTY_NODE}copy(e,n,r,s,i){return new ss(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ji.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Ji.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ss.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ss.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ss.RED=!0;ss.BLACK=!1;class hie{copy(e,n,r,s,i){return this}insert(e,n,r){return new ss(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ji{constructor(e,n=Ji.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Ji(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ss.BLACK,null,null))}remove(e){return new Ji(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ss.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new E1(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new E1(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new E1(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new E1(this.root_,null,this.comparator_,!0,e)}}Ji.EMPTY_NODE=new hie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fie(t,e){return j0(t.name,e.name)}function b5(t,e){return j0(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZO;function pie(t){ZO=t}const vW=function(t){return typeof t=="number"?"number:"+Qz(t):"string:"+t},EW=function(t){if(t.isLeafNode()){const e=t.val();Ne(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ad(e,".sv"),"Priority must be a string or number.")}else Ne(t===ZO||t.isEmpty(),"priority of unexpected type.");Ne(t===ZO||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let R$;class rs{constructor(e,n=rs.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Ne(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),EW(this.priorityNode_)}static set __childrenNodeConstructor(e){R$=e}static get __childrenNodeConstructor(){return R$}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new rs(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:rs.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Wt(e)?this:Bt(e)===".priority"?this.priorityNode_:rs.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:rs.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Bt(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(Ne(r!==".priority"||nf(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,rs.__childrenNodeConstructor.EMPTY_NODE.updateChild(Vn(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+vW(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Qz(this.value_):e+=this.value_,this.lazyHash_=Vz(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===rs.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof rs.__childrenNodeConstructor?-1:(Ne(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=rs.VALUE_TYPE_ORDER.indexOf(n),i=rs.VALUE_TYPE_ORDER.indexOf(r);return Ne(s>=0,"Unknown leaf type: "+n),Ne(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}rs.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _W,CW;function gie(t){_W=t}function mie(t){CW=t}class yie extends Ix{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?j0(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ft.MIN}maxPost(){return new Ft(cg,new rs("[PRIORITY-POST]",CW))}makePost(e,n){const r=_W(e);return new Ft(n,new rs("[PRIORITY-POST]",r))}toString(){return".priority"}}const vr=new yie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wie=Math.log(2);class bie{constructor(e){const n=i=>parseInt(Math.log(i)/wie,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const MS=function(t,e,n,r){t.sort(e);const s=function(c,l){const u=l-c;let d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new ss(h,d.node,ss.BLACK,null,null);{const f=parseInt(u/2,10)+c,p=s(c,f),g=s(f+1,l);return d=t[f],h=n?n(d):d,new ss(h,d.node,ss.BLACK,p,g)}},i=function(c){let l=null,u=null,d=t.length;const h=function(p,g){const y=d-p,m=d;d-=p;const w=s(y+1,m),v=t[y],A=n?n(v):v;f(new ss(A,v.node,g,null,w))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){const g=c.nextBitIsOne(),y=Math.pow(2,c.count-(p+1));g?h(y,ss.BLACK):(h(y,ss.BLACK),h(y,ss.RED))}return u},o=new bie(t.length),a=i(o);return new Ji(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qT;const wm={};class ku{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return Ne(wm&&vr,"ChildrenNode.ts has not been loaded"),qT=qT||new ku({".priority":wm},{".priority":vr}),qT}get(e){const n=Vw(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ji?n:null}hasIndex(e){return ad(this.indexSet_,e.toString())}addIndex(e,n){Ne(e!==Ry,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(Ft.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=MS(r,e.getCompare()):a=wm;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new ku(u,l)}addToIndexes(e,n){const r=OS(this.indexes_,(s,i)=>{const o=Vw(this.indexSet_,i);if(Ne(o,"Missing index implementation for "+i),s===wm)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(Ft.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),MS(a,o.getCompare())}else return wm;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new Ft(e.name,a))),c.insert(e,e.node)}});return new ku(r,this.indexSet_)}removeFromIndexes(e,n){const r=OS(this.indexes_,s=>{if(s===wm)return s;{const i=n.get(e.name);return i?s.remove(new Ft(e.name,i)):s}});return new ku(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eb;class bt{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&EW(this.priorityNode_),this.children_.isEmpty()&&Ne(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Eb||(Eb=new bt(new Ji(b5),null,ku.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Eb}updatePriority(e){return this.children_.isEmpty()?this:new bt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Eb:n}}getChild(e){const n=Bt(e);return n===null?this:this.getImmediateChild(n).getChild(Vn(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Ne(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Ft(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Eb:this.priorityNode_;return new bt(s,o,i)}}updateChild(e,n){const r=Bt(e);if(r===null)return n;{Ne(Bt(e)!==".priority"||nf(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Vn(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(vr,(o,a)=>{n[o]=a.val(e),r++,i&&bt.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+vW(this.getPriority().val())+":"),this.forEachChild(vr,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":Vz(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new Ft(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ft(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ft(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Ft.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Ft.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===pC?-1:0}withIndex(e){if(e===Ry||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new bt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ry||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(vr),s=n.getIterator(vr);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Ry?null:this.indexMap_.get(e.toString())}}bt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class vie extends bt{constructor(){super(new Ji(b5),bt.EMPTY_NODE,ku.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return bt.EMPTY_NODE}isEmpty(){return!1}}const pC=new vie;Object.defineProperties(Ft,{MIN:{value:new Ft(Kw,bt.EMPTY_NODE)},MAX:{value:new Ft(cg,pC)}});bW.__EMPTY_NODE=bt.EMPTY_NODE;rs.__childrenNodeConstructor=bt;pie(pC);mie(pC);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eie=!0;function as(t,e=null){if(t===null)return bt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Ne(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new rs(n,as(e))}if(!(t instanceof Array)&&Eie){const n=[];let r=!1;if(ao(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=as(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Ft(o,c)))}}),n.length===0)return bt.EMPTY_NODE;const i=MS(n,fie,o=>o.name,b5);if(r){const o=MS(n,vr.getCompare());return new bt(i,as(e),new ku({".priority":o},{".priority":vr}))}else return new bt(i,as(e),ku.Default)}else{let n=bt.EMPTY_NODE;return ao(t,(r,s)=>{if(ad(t,r)&&r.substring(0,1)!=="."){const i=as(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(as(e))}}gie(as);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ie extends Ix{constructor(e){super(),this.indexPath_=e,Ne(!Wt(e)&&Bt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?j0(e.name,n.name):i}makePost(e,n){const r=as(e),s=bt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ft(n,s)}maxPost(){const e=bt.EMPTY_NODE.updateChild(this.indexPath_,pC);return new Ft(cg,e)}toString(){return mW(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cie extends Ix{compare(e,n){const r=e.node.compareTo(n.node);return r===0?j0(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ft.MIN}maxPost(){return Ft.MAX}makePost(e,n){const r=as(e);return new Ft(n,r)}toString(){return".value"}}const Aie=new Cie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AW(t){return{type:"value",snapshotNode:t}}function Yw(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function hE(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function fE(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Sie(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){Ne(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(hE(n,a)):Ne(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Yw(n,r)):o.trackChildChange(fE(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(vr,(s,i)=>{n.hasChild(s)||r.trackChildChange(hE(s,i))}),n.isLeafNode()||n.forEachChild(vr,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(fE(s,i,o))}else r.trackChildChange(Yw(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?bt.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e){this.indexedFilter_=new v5(e.getIndex()),this.index_=e.getIndex(),this.startPost_=pE.getStartPost_(e),this.endPost_=pE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new Ft(n,r))||(r=bt.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=bt.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(bt.EMPTY_NODE);const i=this;return n.forEachChild(vr,(o,a)=>{i.matches(new Ft(o,a))||(s=s.updateImmediateChild(o,bt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iie{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new pE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new Ft(n,r))||(r=bt.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=bt.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=bt.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(bt.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,bt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;Ne(a.numChildren()===this.limit_,"");const c=new Ft(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return i!=null&&i.trackChildChange(fE(n,r,d)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(hE(n,d));const g=a.updateImmediateChild(n,bt.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(i!=null&&i.trackChildChange(Yw(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return r.isEmpty()?e:u&&o(l,c)>=0?(i!=null&&(i.trackChildChange(hE(l.name,l.node)),i.trackChildChange(Yw(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,bt.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=vr}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ne(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ne(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Kw}hasEnd(){return this.endSet_}getIndexEndValue(){return Ne(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ne(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:cg}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ne(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===vr}copy(){const e=new E5;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function xie(t){return t.loadsAllData()?new v5(t.getIndex()):t.hasLimit()?new Iie(t):new pE(t)}function P$(t){const e={};if(t.isDefault())return e;let n;if(t.index_===vr?n="$priority":t.index_===Aie?n="$value":t.index_===Ry?n="$key":(Ne(t.index_ instanceof _ie,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Gr(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Gr(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Gr(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Gr(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Gr(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function O$(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==vr&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US extends fW{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=fC("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Ne(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=US.getListenId_(e,r),a={};this.listens_[o]=a;const c=P$(e._queryParams);this.restRequest_(i+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(i,d,!1,r),Vw(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",s(h,null)}})}unlisten(e,n){const r=US.getListenId_(e,n);delete this.listens_[r]}get(e){const n=P$(e._queryParams),r=e._path.toString(),s=new Ax;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ere(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=aE(a.responseText)}catch{eo("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&eo("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nie{constructor(){this.rootNode_=bt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(){return{value:null,children:new Map}}function SW(t,e,n){if(Wt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Bt(e);t.children.has(r)||t.children.set(r,$S());const s=t.children.get(r);e=Vn(e),SW(s,e,n)}}function XO(t,e,n){t.value!==null?n(e,t.value):Tie(t,(r,s)=>{const i=new $n(e.toString()+"/"+r);XO(s,i,n)})}function Tie(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rie{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&ao(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k$=10*1e3,Pie=30*1e3,Oie=5*60*1e3;class kie{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Rie(e);const r=k$+(Pie-k$)*Math.random();Nv(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;ao(e,(s,i)=>{i>0&&ad(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),Nv(this.reportStats_.bind(this),Math.floor(Math.random()*2*Oie))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yc;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(yc||(yc={}));function IW(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function _5(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function C5(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=yc.ACK_USER_WRITE,this.source=IW()}operationForChild(e){if(Wt(this.path)){if(this.affectedTree.value!=null)return Ne(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new $n(e));return new BS(hn(),n,this.revert)}}else return Ne(Bt(this.path)===e,"operationForChild called for unrelated child."),new BS(Vn(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e,n){this.source=e,this.path=n,this.type=yc.LISTEN_COMPLETE}operationForChild(e){return Wt(this.path)?new gE(this.source,hn()):new gE(this.source,Vn(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=yc.OVERWRITE}operationForChild(e){return Wt(this.path)?new lg(this.source,hn(),this.snap.getImmediateChild(e)):new lg(this.source,Vn(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=yc.MERGE}operationForChild(e){if(Wt(this.path)){const n=this.children.subtree(new $n(e));return n.isEmpty()?null:n.value?new lg(this.source,hn(),n.value):new mE(this.source,hn(),n)}else return Ne(Bt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new mE(this.source,Vn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Wt(e))return this.isFullyInitialized()&&!this.filtered_;const n=Bt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Die{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Lie(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(Sie(o.childName,o.snapshotNode))}),_b(t,s,"child_removed",e,r,n),_b(t,s,"child_added",e,r,n),_b(t,s,"child_moved",i,r,n),_b(t,s,"child_changed",e,r,n),_b(t,s,"value",e,r,n),s}function _b(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>Uie(t,a,c)),o.forEach(a=>{const c=Mie(t,a,i);s.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function Mie(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Uie(t,e,n){if(e.childName==null||n.childName==null)throw B0("Should only compare child_ events.");const r=new Ft(e.childName,e.snapshotNode),s=new Ft(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(t,e){return{eventCache:t,serverCache:e}}function Tv(t,e,n,r){return xx(new rf(e,n,r),t.serverCache)}function xW(t,e,n,r){return xx(t.eventCache,new rf(e,n,r))}function FS(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ug(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VT;const $ie=()=>(VT||(VT=new Ji(Cse)),VT);class Zn{constructor(e,n=$ie()){this.value=e,this.children=n}static fromObject(e){let n=new Zn(null);return ao(e,(r,s)=>{n=n.set(new $n(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:hn(),value:this.value};if(Wt(e))return null;{const r=Bt(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Vn(e),n);return i!=null?{path:qr(new $n(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Wt(e))return this;{const n=Bt(e),r=this.children.get(n);return r!==null?r.subtree(Vn(e)):new Zn(null)}}set(e,n){if(Wt(e))return new Zn(n,this.children);{const r=Bt(e),i=(this.children.get(r)||new Zn(null)).set(Vn(e),n),o=this.children.insert(r,i);return new Zn(this.value,o)}}remove(e){if(Wt(e))return this.children.isEmpty()?new Zn(null):new Zn(null,this.children);{const n=Bt(e),r=this.children.get(n);if(r){const s=r.remove(Vn(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new Zn(null):new Zn(this.value,i)}else return this}}get(e){if(Wt(e))return this.value;{const n=Bt(e),r=this.children.get(n);return r?r.get(Vn(e)):null}}setTree(e,n){if(Wt(e))return n;{const r=Bt(e),i=(this.children.get(r)||new Zn(null)).setTree(Vn(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new Zn(this.value,o)}}fold(e){return this.fold_(hn(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(qr(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,hn(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(Wt(e))return null;{const i=Bt(e),o=this.children.get(i);return o?o.findOnPath_(Vn(e),qr(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,hn(),n)}foreachOnPath_(e,n,r){if(Wt(e))return this;{this.value&&r(n,this.value);const s=Bt(e),i=this.children.get(s);return i?i.foreachOnPath_(Vn(e),qr(n,s),r):new Zn(null)}}foreach(e){this.foreach_(hn(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(qr(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e){this.writeTree_=e}static empty(){return new vc(new Zn(null))}}function Rv(t,e,n){if(Wt(e))return new vc(new Zn(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=pi(s,e);return i=i.updateChild(o,n),new vc(t.writeTree_.set(s,i))}else{const s=new Zn(n),i=t.writeTree_.setTree(e,s);return new vc(i)}}}function D$(t,e,n){let r=t;return ao(n,(s,i)=>{r=Rv(r,qr(e,s),i)}),r}function L$(t,e){if(Wt(e))return vc.empty();{const n=t.writeTree_.setTree(e,new Zn(null));return new vc(n)}}function e2(t,e){return Hg(t,e)!=null}function Hg(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(pi(n.path,e)):null}function M$(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(vr,(r,s)=>{e.push(new Ft(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new Ft(r,s.value))}),e}function Dh(t,e){if(Wt(e))return t;{const n=Hg(t,e);return n!=null?new vc(new Zn(n)):new vc(t.writeTree_.subtree(e))}}function t2(t){return t.writeTree_.isEmpty()}function Qw(t,e){return NW(hn(),t.writeTree_,e)}function NW(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(Ne(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=NW(qr(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(qr(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(t,e){return OW(e,t)}function Bie(t,e,n,r,s){Ne(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=Rv(t.visibleWrites,e,n)),t.lastWriteId=r}function Fie(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function jie(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Ne(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&zie(a,r.path)?s=!1:mc(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return Wie(t),!0;if(r.snap)t.visibleWrites=L$(t.visibleWrites,r.path);else{const a=r.children;ao(a,c=>{t.visibleWrites=L$(t.visibleWrites,qr(r.path,c))})}return!0}else return!1}function zie(t,e){if(t.snap)return mc(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&mc(qr(t.path,n),e))return!0;return!1}function Wie(t){t.visibleWrites=TW(t.allWrites,Hie,hn()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Hie(t){return t.visible}function TW(t,e,n){let r=vc.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)mc(n,o)?(a=pi(n,o),r=Rv(r,a,i.snap)):mc(o,n)&&(a=pi(o,n),r=Rv(r,hn(),i.snap.getChild(a)));else if(i.children){if(mc(n,o))a=pi(n,o),r=D$(r,a,i.children);else if(mc(o,n))if(a=pi(o,n),Wt(a))r=D$(r,hn(),i.children);else{const c=Vw(i.children,Bt(a));if(c){const l=c.getChild(Vn(a));r=Rv(r,hn(),l)}}}else throw B0("WriteRecord should have .snap or .children")}}return r}function RW(t,e,n,r,s){if(!r&&!s){const i=Hg(t.visibleWrites,e);if(i!=null)return i;{const o=Dh(t.visibleWrites,e);if(t2(o))return n;if(n==null&&!e2(o,hn()))return null;{const a=n||bt.EMPTY_NODE;return Qw(o,a)}}}else{const i=Dh(t.visibleWrites,e);if(!s&&t2(i))return n;if(!s&&n==null&&!e2(i,hn()))return null;{const o=function(l){return(l.visible||s)&&(!r||!~r.indexOf(l.writeId))&&(mc(l.path,e)||mc(e,l.path))},a=TW(t.allWrites,o,e),c=n||bt.EMPTY_NODE;return Qw(a,c)}}}function Gie(t,e,n){let r=bt.EMPTY_NODE;const s=Hg(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(vr,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Dh(t.visibleWrites,e);return n.forEachChild(vr,(o,a)=>{const c=Qw(Dh(i,new $n(o)),a);r=r.updateImmediateChild(o,c)}),M$(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Dh(t.visibleWrites,e);return M$(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function qie(t,e,n,r,s){Ne(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=qr(e,n);if(e2(t.visibleWrites,i))return null;{const o=Dh(t.visibleWrites,i);return t2(o)?s.getChild(n):Qw(o,s.getChild(n))}}function Vie(t,e,n,r){const s=qr(e,n),i=Hg(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Dh(t.visibleWrites,s);return Qw(o,r.getNode().getImmediateChild(n))}else return null}function Kie(t,e){return Hg(t.visibleWrites,e)}function Yie(t,e,n,r,s,i,o){let a;const c=Dh(t.visibleWrites,e),l=Hg(c,hn());if(l!=null)a=l;else if(n!=null)a=Qw(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<s;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function Qie(){return{visibleWrites:vc.empty(),allWrites:[],lastWriteId:-1}}function jS(t,e,n,r){return RW(t.writeTree,t.treePath,e,n,r)}function A5(t,e){return Gie(t.writeTree,t.treePath,e)}function U$(t,e,n,r){return qie(t.writeTree,t.treePath,e,n,r)}function zS(t,e){return Kie(t.writeTree,qr(t.treePath,e))}function Jie(t,e,n,r,s,i){return Yie(t.writeTree,t.treePath,e,n,r,s,i)}function S5(t,e,n){return Vie(t.writeTree,t.treePath,e,n)}function PW(t,e){return OW(qr(t.treePath,e),t.writeTree)}function OW(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zie{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;Ne(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Ne(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,fE(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,hE(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,Yw(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,fE(r,e.snapshotNode,s.oldSnap));else throw B0("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xie{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const kW=new Xie;class I5{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new rf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return S5(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ug(this.viewCache_),i=Jie(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eoe(t){return{filter:t}}function toe(t,e){Ne(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Ne(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function noe(t,e,n,r,s){const i=new Zie;let o,a;if(n.type===yc.OVERWRITE){const l=n;l.source.fromUser?o=n2(t,e,l.path,l.snap,r,s,i):(Ne(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Wt(l.path),o=WS(t,e,l.path,l.snap,r,s,a,i))}else if(n.type===yc.MERGE){const l=n;l.source.fromUser?o=soe(t,e,l.path,l.children,r,s,i):(Ne(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=r2(t,e,l.path,l.children,r,s,a,i))}else if(n.type===yc.ACK_USER_WRITE){const l=n;l.revert?o=aoe(t,e,l.path,r,s,i):o=ioe(t,e,l.path,l.affectedTree,r,s,i)}else if(n.type===yc.LISTEN_COMPLETE)o=ooe(t,e,n.path,r,i);else throw B0("Unknown operation type: "+n.type);const c=i.getChanges();return roe(e,o,c),{viewCache:o,changes:c}}function roe(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=FS(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(AW(FS(e)))}}function DW(t,e,n,r,s,i){const o=e.eventCache;if(zS(r,n)!=null)return e;{let a,c;if(Wt(n))if(Ne(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=ug(e),u=l instanceof bt?l:bt.EMPTY_NODE,d=A5(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const l=jS(r,ug(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,i)}else{const l=Bt(n);if(l===".priority"){Ne(nf(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=U$(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=Vn(n);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const h=U$(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=S5(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,s,i):a=o.getNode()}}return Tv(e,a,o.isFullyInitialized()||Wt(n),t.filter.filtersNodes())}}function WS(t,e,n,r,s,i,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(Wt(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{const f=Bt(n);if(!c.isCompleteForPath(n)&&nf(n)>1)return e;const p=Vn(n),y=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?l=u.updatePriority(c.getNode(),y):l=u.updateChild(c.getNode(),f,y,p,kW,null)}const d=xW(e,l,c.isFullyInitialized()||Wt(n),u.filtersNodes()),h=new I5(s,d,i);return DW(t,d,n,s,h,a)}function n2(t,e,n,r,s,i,o){const a=e.eventCache;let c,l;const u=new I5(s,e,i);if(Wt(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Tv(e,l,!0,t.filter.filtersNodes());else{const d=Bt(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Tv(e,l,a.isFullyInitialized(),a.isFiltered());else{const h=Vn(n),f=a.getNode().getImmediateChild(d);let p;if(Wt(h))p=r;else{const g=u.getCompleteChild(d);g!=null?gW(h)===".priority"&&g.getChild(yW(h)).isEmpty()?p=g:p=g.updateChild(h,r):p=bt.EMPTY_NODE}if(f.equals(p))c=e;else{const g=t.filter.updateChild(a.getNode(),d,p,h,u,o);c=Tv(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function $$(t,e){return t.eventCache.isCompleteForChild(e)}function soe(t,e,n,r,s,i,o){let a=e;return r.foreach((c,l)=>{const u=qr(n,c);$$(e,Bt(u))&&(a=n2(t,a,u,l,s,i,o))}),r.foreach((c,l)=>{const u=qr(n,c);$$(e,Bt(u))||(a=n2(t,a,u,l,s,i,o))}),a}function B$(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function r2(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Wt(n)?l=r:l=new Zn(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=B$(t,f,h);c=WS(t,c,new $n(d),p,s,i,o,a)}}),l.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),g=B$(t,p,h);c=WS(t,c,new $n(d),g,s,i,o,a)}}),c}function ioe(t,e,n,r,s,i,o){if(zS(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Wt(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return WS(t,e,n,c.getNode().getChild(n),s,i,a,o);if(Wt(n)){let l=new Zn(null);return c.getNode().forEachChild(Ry,(u,d)=>{l=l.set(new $n(u),d)}),r2(t,e,n,l,s,i,a,o)}else return e}else{let l=new Zn(null);return r.foreach((u,d)=>{const h=qr(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),r2(t,e,n,l,s,i,a,o)}}function ooe(t,e,n,r,s){const i=e.serverCache,o=xW(e,i.getNode(),i.isFullyInitialized()||Wt(n),i.isFiltered());return DW(t,o,n,r,kW,s)}function aoe(t,e,n,r,s,i){let o;if(zS(r,n)!=null)return e;{const a=new I5(r,e,s),c=e.eventCache.getNode();let l;if(Wt(n)||Bt(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=jS(r,ug(e));else{const d=e.serverCache.getNode();Ne(d instanceof bt,"serverChildren would be complete if leaf node"),u=A5(r,d)}u=u,l=t.filter.updateFullNode(c,u,i)}else{const u=Bt(n);let d=S5(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,Vn(n),a,i):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,bt.EMPTY_NODE,Vn(n),a,i):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=jS(r,ug(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,i)))}return o=e.serverCache.isFullyInitialized()||zS(r,hn())!=null,Tv(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class coe{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new v5(r.getIndex()),i=xie(r);this.processor_=eoe(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(bt.EMPTY_NODE,o.getNode(),null),l=i.updateFullNode(bt.EMPTY_NODE,a.getNode(),null),u=new rf(c,o.isFullyInitialized(),s.filtersNodes()),d=new rf(l,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=xx(d,u),this.eventGenerator_=new Die(this.query_)}get query(){return this.query_}}function loe(t){return t.viewCache_.serverCache.getNode()}function uoe(t){return FS(t.viewCache_)}function doe(t,e){const n=ug(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Wt(e)&&!n.getImmediateChild(Bt(e)).isEmpty())?n.getChild(e):null}function F$(t){return t.eventRegistrations_.length===0}function hoe(t,e){t.eventRegistrations_.push(e)}function j$(t,e,n){const r=[];if(n){Ne(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function z$(t,e,n,r){e.type===yc.MERGE&&e.source.queryId!==null&&(Ne(ug(t.viewCache_),"We should always have a full cache before handling merges"),Ne(FS(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=noe(t.processor_,s,e,n,r);return toe(t.processor_,i.viewCache),Ne(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,LW(t,i.changes,i.viewCache.eventCache.getNode(),null)}function foe(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(vr,(i,o)=>{r.push(Yw(i,o))}),n.isFullyInitialized()&&r.push(AW(n.getNode())),LW(t,r,n.getNode(),e)}function LW(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return Lie(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HS;class MW{constructor(){this.views=new Map}}function poe(t){Ne(!HS,"__referenceConstructor has already been defined"),HS=t}function goe(){return Ne(HS,"Reference.ts has not been loaded"),HS}function moe(t){return t.views.size===0}function x5(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return Ne(i!=null,"SyncTree gave us an op for an invalid query."),z$(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(z$(o,e,n,r));return i}}function UW(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=jS(n,s?r:null),c=!1;a?c=!0:r instanceof bt?(a=A5(n,r),c=!1):(a=bt.EMPTY_NODE,c=!1);const l=xx(new rf(a,c,!1),new rf(r,s,!1));return new coe(e,l)}return o}function yoe(t,e,n,r,s,i){const o=UW(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),hoe(o,n),foe(o,n)}function woe(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=sf(t);if(s==="default")for(const[c,l]of t.views.entries())o=o.concat(j$(l,n,r)),F$(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||i.push(l.query));else{const c=t.views.get(s);c&&(o=o.concat(j$(c,n,r)),F$(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!sf(t)&&i.push(new(goe())(e._repo,e._path)),{removed:i,events:o}}function $W(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Lh(t,e){let n=null;for(const r of t.views.values())n=n||doe(r,e);return n}function BW(t,e){if(e._queryParams.loadsAllData())return Tx(t);{const r=e._queryIdentifier;return t.views.get(r)}}function FW(t,e){return BW(t,e)!=null}function sf(t){return Tx(t)!=null}function Tx(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GS;function boe(t){Ne(!GS,"__referenceConstructor has already been defined"),GS=t}function voe(){return Ne(GS,"Reference.ts has not been loaded"),GS}let Eoe=1;class W${constructor(e){this.listenProvider_=e,this.syncPointTree_=new Zn(null),this.pendingWriteTree_=Qie(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function jW(t,e,n,r,s){return Bie(t.pendingWriteTree_,e,n,r,s),s?mC(t,new lg(IW(),e,n)):[]}function op(t,e,n=!1){const r=Fie(t.pendingWriteTree_,e);if(jie(t.pendingWriteTree_,e)){let i=new Zn(null);return r.snap!=null?i=i.set(hn(),!0):ao(r.children,o=>{i=i.set(new $n(o),!0)}),mC(t,new BS(r.path,i,n))}else return[]}function gC(t,e,n){return mC(t,new lg(_5(),e,n))}function _oe(t,e,n){const r=Zn.fromObject(n);return mC(t,new mE(_5(),e,r))}function Coe(t,e){return mC(t,new gE(_5(),e))}function Aoe(t,e,n){const r=T5(t,n);if(r){const s=R5(r),i=s.path,o=s.queryId,a=pi(i,e),c=new gE(C5(o),a);return P5(t,i,c)}else return[]}function qS(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||FW(o,e))){const c=woe(o,e,n,r);moe(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const l=c.removed;if(a=c.events,!s){const u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(h,f)=>sf(f));if(u&&!d){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const f=xoe(h);for(let p=0;p<f.length;++p){const g=f[p],y=g.query,m=GW(t,g);t.listenProvider_.startListening(Pv(y),yE(t,y),m.hashFn,m.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(Pv(e),null):l.forEach(h=>{const f=t.queryToTagMap.get(Rx(h));t.listenProvider_.stopListening(Pv(h),f)}))}Noe(t,l)}return a}function zW(t,e,n,r){const s=T5(t,r);if(s!=null){const i=R5(s),o=i.path,a=i.queryId,c=pi(o,e),l=new lg(C5(a),c,n);return P5(t,o,l)}else return[]}function Soe(t,e,n,r){const s=T5(t,r);if(s){const i=R5(s),o=i.path,a=i.queryId,c=pi(o,e),l=Zn.fromObject(n),u=new mE(C5(a),c,l);return P5(t,o,u)}else return[]}function s2(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(h,f)=>{const p=pi(h,s);i=i||Lh(f,p),o=o||sf(f)});let a=t.syncPointTree_.get(s);a?(o=o||sf(a),i=i||Lh(a,hn())):(a=new MW,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=bt.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((f,p)=>{const g=Lh(p,hn());g&&(i=i.updateImmediateChild(f,g))}));const l=FW(a,e);if(!l&&!e._queryParams.loadsAllData()){const h=Rx(e);Ne(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=Toe();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}const u=Nx(t.pendingWriteTree_,s);let d=yoe(a,e,n,u,i,c);if(!l&&!o&&!r){const h=BW(a,e);d=d.concat(Roe(t,e,h))}return d}function N5(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=pi(o,e),l=Lh(a,c);if(l)return l});return RW(s,e,i,n,!0)}function Ioe(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{const d=pi(l,n);r=r||Lh(u,d)});let s=t.syncPointTree_.get(n);s?r=r||Lh(s,hn()):(s=new MW,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new rf(r,!0,!1):null,a=Nx(t.pendingWriteTree_,e._path),c=UW(s,e,a,i?o.getNode():bt.EMPTY_NODE,i);return uoe(c)}function mC(t,e){return WW(e,t.syncPointTree_,null,Nx(t.pendingWriteTree_,hn()))}function WW(t,e,n,r){if(Wt(t.path))return HW(t,e,n,r);{const s=e.get(hn());n==null&&s!=null&&(n=Lh(s,hn()));let i=[];const o=Bt(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=PW(r,o);i=i.concat(WW(a,c,l,u))}return s&&(i=i.concat(x5(s,t,r,n))),i}}function HW(t,e,n,r){const s=e.get(hn());n==null&&s!=null&&(n=Lh(s,hn()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=PW(r,o),u=t.operationForChild(o);u&&(i=i.concat(HW(u,a,c,l)))}),s&&(i=i.concat(x5(s,t,r,n))),i}function GW(t,e){const n=e.query,r=yE(t,n);return{hashFn:()=>(loe(e)||bt.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?Aoe(t,n._path,r):Coe(t,n._path);{const i=Ise(s,n);return qS(t,n,null,i)}}}}function yE(t,e){const n=Rx(e);return t.queryToTagMap.get(n)}function Rx(t){return t._path.toString()+"$"+t._queryIdentifier}function T5(t,e){return t.tagToQueryMap.get(e)}function R5(t){const e=t.indexOf("$");return Ne(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new $n(t.substr(0,e))}}function P5(t,e,n){const r=t.syncPointTree_.get(e);Ne(r,"Missing sync point for query tag that we're tracking");const s=Nx(t.pendingWriteTree_,e);return x5(r,n,s,null)}function xoe(t){return t.fold((e,n,r)=>{if(n&&sf(n))return[Tx(n)];{let s=[];return n&&(s=$W(n)),ao(r,(i,o)=>{s=s.concat(o)}),s}})}function Pv(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(voe())(t._repo,t._path):t}function Noe(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Rx(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function Toe(){return Eoe++}function Roe(t,e,n){const r=e._path,s=yE(t,e),i=GW(t,n),o=t.listenProvider_.startListening(Pv(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)Ne(!sf(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!Wt(l)&&u&&sf(u))return[Tx(u).query];{let h=[];return u&&(h=h.concat($W(u).map(f=>f.query))),ao(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){const u=c[l];t.listenProvider_.stopListening(Pv(u),yE(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new O5(n)}node(){return this.node_}}class k5{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=qr(this.path_,e);return new k5(this.syncTree_,n)}node(){return N5(this.syncTree_,this.path_)}}const Poe=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},H$=function(t,e,n){if(!t||typeof t!="object")return t;if(Ne(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Ooe(t[".sv"],e,n);if(typeof t[".sv"]=="object")return koe(t[".sv"],e);Ne(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Ooe=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Ne(!1,"Unexpected server value: "+t)}},koe=function(t,e,n){t.hasOwnProperty("increment")||Ne(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&Ne(!1,"Unexpected increment value: "+r);const s=e.node();if(Ne(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},Doe=function(t,e,n,r){return D5(e,new k5(n,t),r)},qW=function(t,e,n){return D5(t,new O5(e),n)};function D5(t,e,n){const r=t.getPriority().val(),s=H$(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=H$(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new rs(a,as(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new rs(s))),o.forEachChild(vr,(a,c)=>{const l=D5(c,e.getImmediateChild(a),n);l!==c&&(i=i.updateImmediateChild(a,l))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function M5(t,e){let n=e instanceof $n?e:new $n(e),r=t,s=Bt(n);for(;s!==null;){const i=Vw(r.node.children,s)||{children:{},childCount:0};r=new L5(s,r,i),n=Vn(n),s=Bt(n)}return r}function W0(t){return t.node.value}function VW(t,e){t.node.value=e,i2(t)}function KW(t){return t.node.childCount>0}function Loe(t){return W0(t)===void 0&&!KW(t)}function Px(t,e){ao(t.node.children,(n,r)=>{e(new L5(n,t,r))})}function YW(t,e,n,r){n&&e(t),Px(t,s=>{YW(s,e,!0)})}function Moe(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function yC(t){return new $n(t.parent===null?t.name:yC(t.parent)+"/"+t.name)}function i2(t){t.parent!==null&&Uoe(t.parent,t.name,t)}function Uoe(t,e,n){const r=Loe(n),s=ad(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,i2(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,i2(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $oe=/[\[\].#$\/\u0000-\u001F\u007F]/,Boe=/[\[\].#$\u0000-\u001F\u007F]/,KT=10*1024*1024,QW=function(t){return typeof t=="string"&&t.length!==0&&!$oe.test(t)},JW=function(t){return typeof t=="string"&&t.length!==0&&!Boe.test(t)},Foe=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),JW(t)},joe=function(t,e,n,r){U5(d5(t,"value"),e,n)},U5=function(t,e,n){const r=n instanceof $n?new iie(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Bf(r));if(typeof e=="function")throw new Error(t+"contains a function "+Bf(r)+" with contents = "+e.toString());if(Kz(e))throw new Error(t+"contains "+e.toString()+" "+Bf(r));if(typeof e=="string"&&e.length>KT/3&&Sx(e)>KT)throw new Error(t+"contains a string greater than "+KT+" utf8 bytes "+Bf(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(ao(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!QW(o)))throw new Error(t+" contains an invalid key ("+o+") "+Bf(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);oie(r,o),U5(t,a,r),aie(r)}),s&&i)throw new Error(t+' contains ".value" child '+Bf(r)+" in addition to actual children.")}},ZW=function(t,e,n,r){if(!JW(n))throw new Error(d5(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},zoe=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ZW(t,e,n)},XW=function(t,e){if(Bt(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Woe=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!QW(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Foe(n))throw new Error(d5(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hoe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function $5(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!y5(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function eH(t,e,n){$5(t,n),tH(t,r=>y5(r,e))}function Ol(t,e,n){$5(t,n),tH(t,r=>mc(r,e)||mc(e,r))}function tH(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(Goe(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Goe(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();xv&&Ys("event: "+n.toString()),z0(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qoe="repo_interrupt",Voe=25;class Koe{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Hoe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=$S(),this.transactionQueueTree_=new L5,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Yoe(t,e,n){if(t.stats_=g5(t.repoInfo_),t.forceRestClient_||Rse())t.server_=new US(t.repoInfo_,(r,s,i,o)=>{G$(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>q$(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Gr(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Bu(t.repoInfo_,e,(r,s,i,o)=>{G$(t,r,s,i,o)},r=>{q$(t,r)},r=>{Joe(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Lse(t.repoInfo_,()=>new kie(t.stats_,t.server_)),t.infoData_=new Nie,t.infoSyncTree_=new W$({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=gC(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),F5(t,"connected",!1),t.serverSyncTree_=new W$({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const l=o(a,c);Ol(t.eventQueue_,r._path,l)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function Qoe(t){const n=t.infoData_.getNode(new $n(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function B5(t){return Poe({timestamp:Qoe(t)})}function G$(t,e,n,r,s){t.dataUpdateCount++;const i=new $n(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=OS(n,l=>as(l));o=Soe(t.serverSyncTree_,i,c,s)}else{const c=as(n);o=zW(t.serverSyncTree_,i,c,s)}else if(r){const c=OS(n,l=>as(l));o=_oe(t.serverSyncTree_,i,c)}else{const c=as(n);o=gC(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=kx(t,i)),Ol(t.eventQueue_,a,o)}function q$(t,e){F5(t,"connected",e),e===!1&&eae(t)}function Joe(t,e){ao(e,(n,r)=>{F5(t,n,r)})}function F5(t,e,n){const r=new $n("/.info/"+e),s=as(n);t.infoData_.updateSnapshot(r,s);const i=gC(t.infoSyncTree_,r,s);Ol(t.eventQueue_,r,i)}function nH(t){return t.nextWriteId_++}function Zoe(t,e,n){const r=Ioe(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=as(s).withIndex(e._queryParams.getIndex());s2(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=gC(t.serverSyncTree_,e._path,i);else{const a=yE(t.serverSyncTree_,e);o=zW(t.serverSyncTree_,e._path,i,a)}return Ol(t.eventQueue_,e._path,o),qS(t.serverSyncTree_,e,n,null,!0),i},s=>(Ox(t,"get for query "+Gr(e)+" failed: "+s),Promise.reject(new Error(s))))}function Xoe(t,e,n,r,s){Ox(t,"set",{path:e.toString(),value:n,priority:r});const i=B5(t),o=as(n,r),a=N5(t.serverSyncTree_,e),c=qW(o,a,i),l=nH(t),u=jW(t.serverSyncTree_,e,c,l,!0);$5(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{const p=h==="ok";p||eo("set at "+e+" failed: "+h);const g=op(t.serverSyncTree_,l,!p);Ol(t.eventQueue_,e,g),sae(t,s,h,f)});const d=aH(t,e);kx(t,d),Ol(t.eventQueue_,d,[])}function eae(t){Ox(t,"onDisconnectEvents");const e=B5(t),n=$S();XO(t.onDisconnect_,hn(),(s,i)=>{const o=Doe(s,i,t.serverSyncTree_,e);SW(n,s,o)});let r=[];XO(n,hn(),(s,i)=>{r=r.concat(gC(t.serverSyncTree_,s,i));const o=aH(t,s);kx(t,o)}),t.onDisconnect_=$S(),Ol(t.eventQueue_,hn(),r)}function tae(t,e,n){let r;Bt(e._path)===".info"?r=s2(t.infoSyncTree_,e,n):r=s2(t.serverSyncTree_,e,n),eH(t.eventQueue_,e._path,r)}function nae(t,e,n){let r;Bt(e._path)===".info"?r=qS(t.infoSyncTree_,e,n):r=qS(t.serverSyncTree_,e,n),eH(t.eventQueue_,e._path,r)}function rae(t){t.persistentConnection_&&t.persistentConnection_.interrupt(qoe)}function Ox(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ys(n,...e)}function sae(t,e,n,r){e&&z0(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function rH(t,e,n){return N5(t.serverSyncTree_,e,n)||bt.EMPTY_NODE}function j5(t,e=t.transactionQueueTree_){if(e||Dx(t,e),W0(e)){const n=iH(t,e);Ne(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&iae(t,yC(e),n)}else KW(e)&&Px(e,n=>{j5(t,n)})}function iae(t,e,n){const r=n.map(l=>l.currentWriteId),s=rH(t,e,r);let i=s;const o=s.hash();for(let l=0;l<n.length;l++){const u=n[l];Ne(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=pi(e,u.path);i=i.updateChild(d,u.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,l=>{Ox(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(op(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Dx(t,M5(t.transactionQueueTree_,e)),j5(t,t.transactionQueueTree_),Ol(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)z0(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{eo("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}kx(t,e)}},o)}function kx(t,e){const n=sH(t,e),r=yC(n),s=iH(t,n);return oae(t,s,r),r}function oae(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=pi(n,c.path);let u=!1,d;if(Ne(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,s=s.concat(op(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Voe)u=!0,d="maxretry",s=s.concat(op(t.serverSyncTree_,c.currentWriteId,!0));else{const h=rH(t,c.path,o);c.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){U5("transaction failed: Data returned ",f,c.path);let p=as(f);typeof f=="object"&&f!=null&&ad(f,".priority")||(p=p.updatePriority(h.getPriority()));const y=c.currentWriteId,m=B5(t),w=qW(p,h,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=w,c.currentWriteId=nH(t),o.splice(o.indexOf(y),1),s=s.concat(jW(t.serverSyncTree_,c.path,w,c.currentWriteId,c.applyLocally)),s=s.concat(op(t.serverSyncTree_,y,!0))}else u=!0,d="nodata",s=s.concat(op(t.serverSyncTree_,c.currentWriteId,!0))}Ol(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Dx(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)z0(r[a]);j5(t,t.transactionQueueTree_)}function sH(t,e){let n,r=t.transactionQueueTree_;for(n=Bt(e);n!==null&&W0(r)===void 0;)r=M5(r,n),e=Vn(e),n=Bt(e);return r}function iH(t,e){const n=[];return oH(t,e,n),n.sort((r,s)=>r.order-s.order),n}function oH(t,e,n){const r=W0(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Px(e,s=>{oH(t,s,n)})}function Dx(t,e){const n=W0(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,VW(e,n.length>0?n:void 0)}Px(e,r=>{Dx(t,r)})}function aH(t,e){const n=yC(sH(t,e)),r=M5(t.transactionQueueTree_,e);return Moe(r,s=>{YT(t,s)}),YT(t,r),YW(r,s=>{YT(t,s)}),n}function YT(t,e){const n=W0(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Ne(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(Ne(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(op(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?VW(e,void 0):n.length=i+1,Ol(t.eventQueue_,yC(e),s);for(let o=0;o<r.length;o++)z0(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aae(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function cae(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):eo(`Invalid query segment '${n}' in query '${t}'`)}return e}const V$=function(t,e){const n=lae(t),r=n.namespace;n.domain==="firebase.com"&&Qu(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Qu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Ese();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new oW(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new $n(n.pathString)}},lae=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(s=aae(t.substring(u,d)));const h=cae(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),i=r}"ns"in h&&(i=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uae{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Gr(this.snapshot.exportVal())}}class dae{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Ne(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return Wt(this._path)?null:gW(this._path)}get ref(){return new cd(this._repo,this._path)}get _queryIdentifier(){const e=O$(this._queryParams),n=f5(e);return n==="{}"?"default":n}get _queryObject(){return O$(this._queryParams)}isEqual(e){if(e=F0(e),!(e instanceof z5))return!1;const n=this._repo===e._repo,r=y5(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+sie(this._path)}}class cd extends z5{constructor(e,n){super(e,n,new E5,!1)}get parent(){const e=yW(this._path);return e===null?null:new cd(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class wE{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new $n(e),r=o2(this.ref,e);return new wE(this._node.getChild(n),r,vr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new wE(s,o2(this.ref,r),vr)))}hasChild(e){const n=new $n(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ra(t,e){return t=F0(t),t._checkNotDeleted("ref"),e!==void 0?o2(t._root,e):t._root}function o2(t,e){return t=F0(t),Bt(t._path)===null?zoe("child","path",e):ZW("child","path",e),new cd(t._repo,qr(t._path,e))}function hae(t){return XW("remove",t._path),Ov(t,null)}function Ov(t,e){t=F0(t),XW("set",t._path),joe("set",e,t._path);const n=new Ax;return Xoe(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Kf(t){t=F0(t);const e=new cH(()=>{}),n=new Lx(e);return Zoe(t._repo,t,n).then(r=>new wE(r,new cd(t._repo,t._path),t._queryParams.getIndex()))}class Lx{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new uae("value",this,new wE(e.snapshotNode,new cd(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new dae(this,e,n):null}matches(e){return e instanceof Lx?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function fae(t,e,n,r,s){const i=new cH(n,void 0),o=new Lx(i);return tae(t._repo,t,o),()=>nae(t._repo,t,o)}function K$(t,e,n,r){return fae(t,"value",e)}poe(cd);boe(cd);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pae="FIREBASE_DATABASE_EMULATOR_HOST",a2={};let gae=!1;function mae(t,e,n,r){t.repoInfo_=new oW(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function yae(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||Qu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ys("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=V$(i,s),a=o.repoInfo,c;typeof process<"u"&&p$&&(c=p$[pae]),c?(i=`http://${c}?ns=${a.namespace}`,o=V$(i,s),a=o.repoInfo):o.repoInfo.secure;const l=new Ose(t.name,t.options,e);Woe("Invalid Firebase Database URL",o),Wt(o.path)||Qu("Database URL must point to the root of a Firebase Database (not including a child path).");const u=bae(a,t,l,new Pse(t.name,n));return new vae(u,t)}function wae(t,e){const n=a2[e];(!n||n[t.key]!==t)&&Qu(`Database ${e}(${t.repoInfo_}) has already been deleted.`),rae(t),delete n[t.key]}function bae(t,e,n,r){let s=a2[e.name];s||(s={},a2[e.name]=s);let i=s[t.toURLString()];return i&&Qu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Koe(t,gae,n,r),s[t.toURLString()]=i,i}class vae{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Yoe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new cd(this._repo,hn())),this._rootInternal}_delete(){return this._rootInternal!==null&&(wae(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Qu("Cannot call "+e+" on a deleted database.")}}function Eae(t=zz(),e){const n=Xre(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=zne("database");r&&_ae(n,...r)}return n}function _ae(t,e,n,r={}){t=F0(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Qu("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Qu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new BA(BA.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:Wne(r.mockUserToken,t.app.options.projectId);i=new BA(o)}mae(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cae(t){gse(nse),kS(new cE("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return yae(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Ny(g$,m$,t),Ny(g$,m$,"esm2017")}Bu.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Bu.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Cae();const Aae={apiKey:"AIzaSyAed5bn78c6Mb5Y3ezULH9CEg7IAKYFAps",authDomain:"chess-220ee.firebaseapp.com",databaseURL:"https://chess-220ee-default-rtdb.firebaseio.com",projectId:"chess-220ee",storageBucket:"chess-220ee.firebasestorage.app",messagingSenderId:"724477138097",appId:"1:724477138097:web:7dc15f79db3bda5c763e90"},Sae=rse().length?zz():jz(Aae),VS=Eae(Sae);var c2={},lH={exports:{}},jo={},uH={exports:{}},dH={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,L){var F=P.length;P.push(L);e:for(;0<F;){var q=F-1>>>1,ne=P[q];if(0<s(ne,L))P[q]=L,P[F]=ne,F=q;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var L=P[0],F=P.pop();if(F!==L){P[0]=F;e:for(var q=0,ne=P.length,le=ne>>>1;q<le;){var ie=2*(q+1)-1,re=P[ie],ye=ie+1,Z=P[ye];if(0>s(re,F))ye<ne&&0>s(Z,re)?(P[q]=Z,P[ye]=F,q=ye):(P[q]=re,P[ie]=F,q=ie);else if(ye<ne&&0>s(Z,F))P[q]=Z,P[ye]=F,q=ye;else break e}}return L}function s(P,L){var F=P.sortIndex-L.sortIndex;return F!==0?F:P.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(P){for(var L=n(l);L!==null;){if(L.callback===null)r(l);else if(L.startTime<=P)r(l),L.sortIndex=L.expirationTime,e(c,L);else break;L=n(l)}}function A(P){if(g=!1,v(P),!p)if(n(c)!==null)p=!0,N(C);else{var L=n(l);L!==null&&M(A,L.startTime-P)}}function C(P,L){p=!1,g&&(g=!1,m(T),T=-1),f=!0;var F=h;try{for(v(L),d=n(c);d!==null&&(!(d.expirationTime>L)||P&&!O());){var q=d.callback;if(typeof q=="function"){d.callback=null,h=d.priorityLevel;var ne=q(d.expirationTime<=L);L=t.unstable_now(),typeof ne=="function"?d.callback=ne:d===n(c)&&r(c),v(L)}else r(c);d=n(c)}if(d!==null)var le=!0;else{var ie=n(l);ie!==null&&M(A,ie.startTime-L),le=!1}return le}finally{d=null,h=F,f=!1}}var S=!1,x=null,T=-1,I=5,k=-1;function O(){return!(t.unstable_now()-k<I)}function B(){if(x!==null){var P=t.unstable_now();k=P;var L=!0;try{L=x(!0,P)}finally{L?G():(S=!1,x=null)}}else S=!1}var G;if(typeof w=="function")G=function(){w(B)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,R=W.port2;W.port1.onmessage=B,G=function(){R.postMessage(null)}}else G=function(){y(B,0)};function N(P){x=P,S||(S=!0,G())}function M(P,L){T=y(function(){P(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,N(C))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(P){switch(h){case 1:case 2:case 3:var L=3;break;default:L=h}var F=h;h=L;try{return P()}finally{h=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,L){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var F=h;h=P;try{return L()}finally{h=F}},t.unstable_scheduleCallback=function(P,L,F){var q=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?q+F:q):F=q,P){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=F+ne,P={id:u++,callback:L,priorityLevel:P,startTime:F,expirationTime:ne,sortIndex:-1},F>q?(P.sortIndex=F,e(l,P),n(c)===null&&P===n(l)&&(g?(m(T),T=-1):g=!0,M(A,F-q))):(P.sortIndex=ne,e(c,P),p||f||(p=!0,N(C))),P},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(P){var L=h;return function(){var F=h;h=L;try{return P.apply(this,arguments)}finally{h=F}}}})(dH);uH.exports=dH;var Iae=uH.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xae=D,$o=Iae;function Ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hH=new Set,bE={};function Gg(t,e){Jw(t,e),Jw(t+"Capture",e)}function Jw(t,e){for(bE[t]=e,t=0;t<e.length;t++)hH.add(e[t])}var Ju=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l2=Object.prototype.hasOwnProperty,Nae=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Y$={},Q$={};function Tae(t){return l2.call(Q$,t)?!0:l2.call(Y$,t)?!1:Nae.test(t)?Q$[t]=!0:(Y$[t]=!0,!1)}function Rae(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Pae(t,e,n,r){if(e===null||typeof e>"u"||Rae(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ai(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ds={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ds[t]=new Ai(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ds[e]=new Ai(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ds[t]=new Ai(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ds[t]=new Ai(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ds[t]=new Ai(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ds[t]=new Ai(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ds[t]=new Ai(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ds[t]=new Ai(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ds[t]=new Ai(t,5,!1,t.toLowerCase(),null,!1,!1)});var W5=/[\-:]([a-z])/g;function H5(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(W5,H5);Ds[e]=new Ai(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(W5,H5);Ds[e]=new Ai(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(W5,H5);Ds[e]=new Ai(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ds[t]=new Ai(t,1,!1,t.toLowerCase(),null,!1,!1)});Ds.xlinkHref=new Ai("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ds[t]=new Ai(t,1,!1,t.toLowerCase(),null,!0,!0)});function G5(t,e,n,r){var s=Ds.hasOwnProperty(e)?Ds[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Pae(e,n,s,r)&&(n=null),r||s===null?Tae(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ld=xae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_1=Symbol.for("react.element"),oy=Symbol.for("react.portal"),ay=Symbol.for("react.fragment"),q5=Symbol.for("react.strict_mode"),u2=Symbol.for("react.profiler"),fH=Symbol.for("react.provider"),pH=Symbol.for("react.context"),V5=Symbol.for("react.forward_ref"),d2=Symbol.for("react.suspense"),h2=Symbol.for("react.suspense_list"),K5=Symbol.for("react.memo"),Bd=Symbol.for("react.lazy"),gH=Symbol.for("react.offscreen"),J$=Symbol.iterator;function Cb(t){return t===null||typeof t!="object"?null:(t=J$&&t[J$]||t["@@iterator"],typeof t=="function"?t:null)}var fr=Object.assign,QT;function sv(t){if(QT===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);QT=e&&e[1]||""}return`
`+QT+t}var JT=!1;function ZT(t,e){if(!t||JT)return"";JT=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{JT=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?sv(t):""}function Oae(t){switch(t.tag){case 5:return sv(t.type);case 16:return sv("Lazy");case 13:return sv("Suspense");case 19:return sv("SuspenseList");case 0:case 2:case 15:return t=ZT(t.type,!1),t;case 11:return t=ZT(t.type.render,!1),t;case 1:return t=ZT(t.type,!0),t;default:return""}}function f2(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ay:return"Fragment";case oy:return"Portal";case u2:return"Profiler";case q5:return"StrictMode";case d2:return"Suspense";case h2:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case pH:return(t.displayName||"Context")+".Consumer";case fH:return(t._context.displayName||"Context")+".Provider";case V5:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case K5:return e=t.displayName||null,e!==null?e:f2(t.type)||"Memo";case Bd:e=t._payload,t=t._init;try{return f2(t(e))}catch{}}return null}function kae(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return f2(e);case 8:return e===q5?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function of(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mH(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Dae(t){var e=mH(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function C1(t){t._valueTracker||(t._valueTracker=Dae(t))}function yH(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=mH(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function KS(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function p2(t,e){var n=e.checked;return fr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Z$(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=of(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wH(t,e){e=e.checked,e!=null&&G5(t,"checked",e,!1)}function g2(t,e){wH(t,e);var n=of(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?m2(t,e.type,n):e.hasOwnProperty("defaultValue")&&m2(t,e.type,of(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function X$(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function m2(t,e,n){(e!=="number"||KS(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var iv=Array.isArray;function Py(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+of(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function y2(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ee(91));return fr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function eB(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ee(92));if(iv(n)){if(1<n.length)throw Error(Ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:of(n)}}function bH(t,e){var n=of(e.value),r=of(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function tB(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vH(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function w2(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vH(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var A1,EH=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(A1=A1||document.createElement("div"),A1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=A1.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function vE(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var kv={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Lae=["Webkit","ms","Moz","O"];Object.keys(kv).forEach(function(t){Lae.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),kv[e]=kv[t]})});function _H(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||kv.hasOwnProperty(t)&&kv[t]?(""+e).trim():e+"px"}function CH(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=_H(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Mae=fr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function b2(t,e){if(e){if(Mae[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ee(62))}}function v2(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var E2=null;function Y5(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _2=null,Oy=null,ky=null;function nB(t){if(t=vC(t)){if(typeof _2!="function")throw Error(Ee(280));var e=t.stateNode;e&&(e=Fx(e),_2(t.stateNode,t.type,e))}}function AH(t){Oy?ky?ky.push(t):ky=[t]:Oy=t}function SH(){if(Oy){var t=Oy,e=ky;if(ky=Oy=null,nB(t),e)for(t=0;t<e.length;t++)nB(e[t])}}function IH(t,e){return t(e)}function xH(){}var XT=!1;function NH(t,e,n){if(XT)return t(e,n);XT=!0;try{return IH(t,e,n)}finally{XT=!1,(Oy!==null||ky!==null)&&(xH(),SH())}}function EE(t,e){var n=t.stateNode;if(n===null)return null;var r=Fx(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ee(231,e,typeof n));return n}var C2=!1;if(Ju)try{var Ab={};Object.defineProperty(Ab,"passive",{get:function(){C2=!0}}),window.addEventListener("test",Ab,Ab),window.removeEventListener("test",Ab,Ab)}catch{C2=!1}function Uae(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var Dv=!1,YS=null,QS=!1,A2=null,$ae={onError:function(t){Dv=!0,YS=t}};function Bae(t,e,n,r,s,i,o,a,c){Dv=!1,YS=null,Uae.apply($ae,arguments)}function Fae(t,e,n,r,s,i,o,a,c){if(Bae.apply(this,arguments),Dv){if(Dv){var l=YS;Dv=!1,YS=null}else throw Error(Ee(198));QS||(QS=!0,A2=l)}}function qg(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function TH(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rB(t){if(qg(t)!==t)throw Error(Ee(188))}function jae(t){var e=t.alternate;if(!e){if(e=qg(t),e===null)throw Error(Ee(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return rB(s),t;if(i===r)return rB(s),e;i=i.sibling}throw Error(Ee(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Ee(189))}}if(n.alternate!==r)throw Error(Ee(190))}if(n.tag!==3)throw Error(Ee(188));return n.stateNode.current===n?t:e}function RH(t){return t=jae(t),t!==null?PH(t):null}function PH(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=PH(t);if(e!==null)return e;t=t.sibling}return null}var OH=$o.unstable_scheduleCallback,sB=$o.unstable_cancelCallback,zae=$o.unstable_shouldYield,Wae=$o.unstable_requestPaint,xr=$o.unstable_now,Hae=$o.unstable_getCurrentPriorityLevel,Q5=$o.unstable_ImmediatePriority,kH=$o.unstable_UserBlockingPriority,JS=$o.unstable_NormalPriority,Gae=$o.unstable_LowPriority,DH=$o.unstable_IdlePriority,Mx=null,Al=null;function qae(t){if(Al&&typeof Al.onCommitFiberRoot=="function")try{Al.onCommitFiberRoot(Mx,t,void 0,(t.current.flags&128)===128)}catch{}}var Ec=Math.clz32?Math.clz32:Yae,Vae=Math.log,Kae=Math.LN2;function Yae(t){return t>>>=0,t===0?32:31-(Vae(t)/Kae|0)|0}var S1=64,I1=4194304;function ov(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ZS(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=ov(a):(i&=o,i!==0&&(r=ov(i)))}else o=n&~s,o!==0?r=ov(o):i!==0&&(r=ov(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ec(e),s=1<<n,r|=t[n],e&=~s;return r}function Qae(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jae(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ec(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=Qae(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function S2(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function LH(){var t=S1;return S1<<=1,!(S1&4194240)&&(S1=64),t}function eR(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function wC(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ec(e),t[e]=n}function Zae(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ec(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function J5(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ec(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var An=0;function MH(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var UH,Z5,$H,BH,FH,I2=!1,x1=[],Mh=null,Uh=null,$h=null,_E=new Map,CE=new Map,Gd=[],Xae="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iB(t,e){switch(t){case"focusin":case"focusout":Mh=null;break;case"dragenter":case"dragleave":Uh=null;break;case"mouseover":case"mouseout":$h=null;break;case"pointerover":case"pointerout":_E.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":CE.delete(e.pointerId)}}function Sb(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=vC(e),e!==null&&Z5(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function ece(t,e,n,r,s){switch(e){case"focusin":return Mh=Sb(Mh,t,e,n,r,s),!0;case"dragenter":return Uh=Sb(Uh,t,e,n,r,s),!0;case"mouseover":return $h=Sb($h,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return _E.set(i,Sb(_E.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,CE.set(i,Sb(CE.get(i)||null,t,e,n,r,s)),!0}return!1}function jH(t){var e=ap(t.target);if(e!==null){var n=qg(e);if(n!==null){if(e=n.tag,e===13){if(e=TH(n),e!==null){t.blockedOn=e,FH(t.priority,function(){$H(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function FA(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=x2(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);E2=r,n.target.dispatchEvent(r),E2=null}else return e=vC(n),e!==null&&Z5(e),t.blockedOn=n,!1;e.shift()}return!0}function oB(t,e,n){FA(t)&&n.delete(e)}function tce(){I2=!1,Mh!==null&&FA(Mh)&&(Mh=null),Uh!==null&&FA(Uh)&&(Uh=null),$h!==null&&FA($h)&&($h=null),_E.forEach(oB),CE.forEach(oB)}function Ib(t,e){t.blockedOn===e&&(t.blockedOn=null,I2||(I2=!0,$o.unstable_scheduleCallback($o.unstable_NormalPriority,tce)))}function AE(t){function e(s){return Ib(s,t)}if(0<x1.length){Ib(x1[0],t);for(var n=1;n<x1.length;n++){var r=x1[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Mh!==null&&Ib(Mh,t),Uh!==null&&Ib(Uh,t),$h!==null&&Ib($h,t),_E.forEach(e),CE.forEach(e),n=0;n<Gd.length;n++)r=Gd[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Gd.length&&(n=Gd[0],n.blockedOn===null);)jH(n),n.blockedOn===null&&Gd.shift()}var Dy=ld.ReactCurrentBatchConfig,XS=!0;function nce(t,e,n,r){var s=An,i=Dy.transition;Dy.transition=null;try{An=1,X5(t,e,n,r)}finally{An=s,Dy.transition=i}}function rce(t,e,n,r){var s=An,i=Dy.transition;Dy.transition=null;try{An=4,X5(t,e,n,r)}finally{An=s,Dy.transition=i}}function X5(t,e,n,r){if(XS){var s=x2(t,e,n,r);if(s===null)uR(t,e,r,eI,n),iB(t,r);else if(ece(s,t,e,n,r))r.stopPropagation();else if(iB(t,r),e&4&&-1<Xae.indexOf(t)){for(;s!==null;){var i=vC(s);if(i!==null&&UH(i),i=x2(t,e,n,r),i===null&&uR(t,e,r,eI,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else uR(t,e,r,null,n)}}var eI=null;function x2(t,e,n,r){if(eI=null,t=Y5(r),t=ap(t),t!==null)if(e=qg(t),e===null)t=null;else if(n=e.tag,n===13){if(t=TH(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return eI=t,null}function zH(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hae()){case Q5:return 1;case kH:return 4;case JS:case Gae:return 16;case DH:return 536870912;default:return 16}default:return 16}}var Ch=null,eL=null,jA=null;function WH(){if(jA)return jA;var t,e=eL,n=e.length,r,s="value"in Ch?Ch.value:Ch.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return jA=s.slice(t,1<r?1-r:void 0)}function zA(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function N1(){return!0}function aB(){return!1}function zo(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?N1:aB,this.isPropagationStopped=aB,this}return fr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=N1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=N1)},persist:function(){},isPersistent:N1}),e}var H0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tL=zo(H0),bC=fr({},H0,{view:0,detail:0}),sce=zo(bC),tR,nR,xb,Ux=fr({},bC,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nL,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xb&&(xb&&t.type==="mousemove"?(tR=t.screenX-xb.screenX,nR=t.screenY-xb.screenY):nR=tR=0,xb=t),tR)},movementY:function(t){return"movementY"in t?t.movementY:nR}}),cB=zo(Ux),ice=fr({},Ux,{dataTransfer:0}),oce=zo(ice),ace=fr({},bC,{relatedTarget:0}),rR=zo(ace),cce=fr({},H0,{animationName:0,elapsedTime:0,pseudoElement:0}),lce=zo(cce),uce=fr({},H0,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),dce=zo(uce),hce=fr({},H0,{data:0}),lB=zo(hce),fce={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pce={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gce={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mce(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=gce[t])?!!e[t]:!1}function nL(){return mce}var yce=fr({},bC,{key:function(t){if(t.key){var e=fce[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zA(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?pce[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nL,charCode:function(t){return t.type==="keypress"?zA(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zA(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wce=zo(yce),bce=fr({},Ux,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uB=zo(bce),vce=fr({},bC,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nL}),Ece=zo(vce),_ce=fr({},H0,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cce=zo(_ce),Ace=fr({},Ux,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Sce=zo(Ace),Ice=[9,13,27,32],rL=Ju&&"CompositionEvent"in window,Lv=null;Ju&&"documentMode"in document&&(Lv=document.documentMode);var xce=Ju&&"TextEvent"in window&&!Lv,HH=Ju&&(!rL||Lv&&8<Lv&&11>=Lv),dB=" ",hB=!1;function GH(t,e){switch(t){case"keyup":return Ice.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qH(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var cy=!1;function Nce(t,e){switch(t){case"compositionend":return qH(e);case"keypress":return e.which!==32?null:(hB=!0,dB);case"textInput":return t=e.data,t===dB&&hB?null:t;default:return null}}function Tce(t,e){if(cy)return t==="compositionend"||!rL&&GH(t,e)?(t=WH(),jA=eL=Ch=null,cy=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return HH&&e.locale!=="ko"?null:e.data;default:return null}}var Rce={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fB(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Rce[t.type]:e==="textarea"}function VH(t,e,n,r){AH(r),e=tI(e,"onChange"),0<e.length&&(n=new tL("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Mv=null,SE=null;function Pce(t){sG(t,0)}function $x(t){var e=dy(t);if(yH(e))return t}function Oce(t,e){if(t==="change")return e}var KH=!1;if(Ju){var sR;if(Ju){var iR="oninput"in document;if(!iR){var pB=document.createElement("div");pB.setAttribute("oninput","return;"),iR=typeof pB.oninput=="function"}sR=iR}else sR=!1;KH=sR&&(!document.documentMode||9<document.documentMode)}function gB(){Mv&&(Mv.detachEvent("onpropertychange",YH),SE=Mv=null)}function YH(t){if(t.propertyName==="value"&&$x(SE)){var e=[];VH(e,SE,t,Y5(t)),NH(Pce,e)}}function kce(t,e,n){t==="focusin"?(gB(),Mv=e,SE=n,Mv.attachEvent("onpropertychange",YH)):t==="focusout"&&gB()}function Dce(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $x(SE)}function Lce(t,e){if(t==="click")return $x(e)}function Mce(t,e){if(t==="input"||t==="change")return $x(e)}function Uce(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Sc=typeof Object.is=="function"?Object.is:Uce;function IE(t,e){if(Sc(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!l2.call(e,s)||!Sc(t[s],e[s]))return!1}return!0}function mB(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yB(t,e){var n=mB(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mB(n)}}function QH(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?QH(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function JH(){for(var t=window,e=KS();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=KS(t.document)}return e}function sL(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $ce(t){var e=JH(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&QH(n.ownerDocument.documentElement,n)){if(r!==null&&sL(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=yB(n,i);var o=yB(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Bce=Ju&&"documentMode"in document&&11>=document.documentMode,ly=null,N2=null,Uv=null,T2=!1;function wB(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;T2||ly==null||ly!==KS(r)||(r=ly,"selectionStart"in r&&sL(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Uv&&IE(Uv,r)||(Uv=r,r=tI(N2,"onSelect"),0<r.length&&(e=new tL("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ly)))}function T1(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var uy={animationend:T1("Animation","AnimationEnd"),animationiteration:T1("Animation","AnimationIteration"),animationstart:T1("Animation","AnimationStart"),transitionend:T1("Transition","TransitionEnd")},oR={},ZH={};Ju&&(ZH=document.createElement("div").style,"AnimationEvent"in window||(delete uy.animationend.animation,delete uy.animationiteration.animation,delete uy.animationstart.animation),"TransitionEvent"in window||delete uy.transitionend.transition);function Bx(t){if(oR[t])return oR[t];if(!uy[t])return t;var e=uy[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ZH)return oR[t]=e[n];return t}var XH=Bx("animationend"),eG=Bx("animationiteration"),tG=Bx("animationstart"),nG=Bx("transitionend"),rG=new Map,bB="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bf(t,e){rG.set(t,e),Gg(e,[t])}for(var aR=0;aR<bB.length;aR++){var cR=bB[aR],Fce=cR.toLowerCase(),jce=cR[0].toUpperCase()+cR.slice(1);bf(Fce,"on"+jce)}bf(XH,"onAnimationEnd");bf(eG,"onAnimationIteration");bf(tG,"onAnimationStart");bf("dblclick","onDoubleClick");bf("focusin","onFocus");bf("focusout","onBlur");bf(nG,"onTransitionEnd");Jw("onMouseEnter",["mouseout","mouseover"]);Jw("onMouseLeave",["mouseout","mouseover"]);Jw("onPointerEnter",["pointerout","pointerover"]);Jw("onPointerLeave",["pointerout","pointerover"]);Gg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gg("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var av="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zce=new Set("cancel close invalid load scroll toggle".split(" ").concat(av));function vB(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Fae(r,e,void 0,t),t.currentTarget=null}function sG(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;vB(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;vB(s,a,l),i=c}}}if(QS)throw t=A2,QS=!1,A2=null,t}function Qn(t,e){var n=e[D2];n===void 0&&(n=e[D2]=new Set);var r=t+"__bubble";n.has(r)||(iG(e,t,2,!1),n.add(r))}function lR(t,e,n){var r=0;e&&(r|=4),iG(n,t,r,e)}var R1="_reactListening"+Math.random().toString(36).slice(2);function xE(t){if(!t[R1]){t[R1]=!0,hH.forEach(function(n){n!=="selectionchange"&&(zce.has(n)||lR(n,!1,t),lR(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[R1]||(e[R1]=!0,lR("selectionchange",!1,e))}}function iG(t,e,n,r){switch(zH(e)){case 1:var s=nce;break;case 4:s=rce;break;default:s=X5}n=s.bind(null,e,n,t),s=void 0,!C2||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function uR(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ap(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}NH(function(){var l=i,u=Y5(n),d=[];e:{var h=rG.get(t);if(h!==void 0){var f=tL,p=t;switch(t){case"keypress":if(zA(n)===0)break e;case"keydown":case"keyup":f=wce;break;case"focusin":p="focus",f=rR;break;case"focusout":p="blur",f=rR;break;case"beforeblur":case"afterblur":f=rR;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=cB;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=oce;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Ece;break;case XH:case eG:case tG:f=lce;break;case nG:f=Cce;break;case"scroll":f=sce;break;case"wheel":f=Sce;break;case"copy":case"cut":case"paste":f=dce;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=uB}var g=(e&4)!==0,y=!g&&t==="scroll",m=g?h!==null?h+"Capture":null:h;g=[];for(var w=l,v;w!==null;){v=w;var A=v.stateNode;if(v.tag===5&&A!==null&&(v=A,m!==null&&(A=EE(w,m),A!=null&&g.push(NE(w,A,v)))),y)break;w=w.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==E2&&(p=n.relatedTarget||n.fromElement)&&(ap(p)||p[Zu]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?ap(p):null,p!==null&&(y=qg(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=cB,A="onMouseLeave",m="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(g=uB,A="onPointerLeave",m="onPointerEnter",w="pointer"),y=f==null?h:dy(f),v=p==null?h:dy(p),h=new g(A,w+"leave",f,n,u),h.target=y,h.relatedTarget=v,A=null,ap(u)===l&&(g=new g(m,w+"enter",p,n,u),g.target=v,g.relatedTarget=y,A=g),y=A,f&&p)t:{for(g=f,m=p,w=0,v=g;v;v=bm(v))w++;for(v=0,A=m;A;A=bm(A))v++;for(;0<w-v;)g=bm(g),w--;for(;0<v-w;)m=bm(m),v--;for(;w--;){if(g===m||m!==null&&g===m.alternate)break t;g=bm(g),m=bm(m)}g=null}else g=null;f!==null&&EB(d,h,f,g,!1),p!==null&&y!==null&&EB(d,y,p,g,!0)}}e:{if(h=l?dy(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var C=Oce;else if(fB(h))if(KH)C=Mce;else{C=Dce;var S=kce}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=Lce);if(C&&(C=C(t,l))){VH(d,C,n,u);break e}S&&S(t,h,l),t==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&m2(h,"number",h.value)}switch(S=l?dy(l):window,t){case"focusin":(fB(S)||S.contentEditable==="true")&&(ly=S,N2=l,Uv=null);break;case"focusout":Uv=N2=ly=null;break;case"mousedown":T2=!0;break;case"contextmenu":case"mouseup":case"dragend":T2=!1,wB(d,n,u);break;case"selectionchange":if(Bce)break;case"keydown":case"keyup":wB(d,n,u)}var x;if(rL)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else cy?GH(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(HH&&n.locale!=="ko"&&(cy||T!=="onCompositionStart"?T==="onCompositionEnd"&&cy&&(x=WH()):(Ch=u,eL="value"in Ch?Ch.value:Ch.textContent,cy=!0)),S=tI(l,T),0<S.length&&(T=new lB(T,t,null,n,u),d.push({event:T,listeners:S}),x?T.data=x:(x=qH(n),x!==null&&(T.data=x)))),(x=xce?Nce(t,n):Tce(t,n))&&(l=tI(l,"onBeforeInput"),0<l.length&&(u=new lB("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=x))}sG(d,e)})}function NE(t,e,n){return{instance:t,listener:e,currentTarget:n}}function tI(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=EE(t,n),i!=null&&r.unshift(NE(t,i,s)),i=EE(t,e),i!=null&&r.push(NE(t,i,s))),t=t.return}return r}function bm(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function EB(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=EE(n,i),c!=null&&o.unshift(NE(n,c,a))):s||(c=EE(n,i),c!=null&&o.push(NE(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Wce=/\r\n?/g,Hce=/\u0000|\uFFFD/g;function _B(t){return(typeof t=="string"?t:""+t).replace(Wce,`
`).replace(Hce,"")}function P1(t,e,n){if(e=_B(e),_B(t)!==e&&n)throw Error(Ee(425))}function nI(){}var R2=null,P2=null;function O2(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var k2=typeof setTimeout=="function"?setTimeout:void 0,Gce=typeof clearTimeout=="function"?clearTimeout:void 0,CB=typeof Promise=="function"?Promise:void 0,qce=typeof queueMicrotask=="function"?queueMicrotask:typeof CB<"u"?function(t){return CB.resolve(null).then(t).catch(Vce)}:k2;function Vce(t){setTimeout(function(){throw t})}function dR(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),AE(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);AE(e)}function Bh(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function AB(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var G0=Math.random().toString(36).slice(2),ml="__reactFiber$"+G0,TE="__reactProps$"+G0,Zu="__reactContainer$"+G0,D2="__reactEvents$"+G0,Kce="__reactListeners$"+G0,Yce="__reactHandles$"+G0;function ap(t){var e=t[ml];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zu]||n[ml]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=AB(t);t!==null;){if(n=t[ml])return n;t=AB(t)}return e}t=n,n=t.parentNode}return null}function vC(t){return t=t[ml]||t[Zu],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function dy(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ee(33))}function Fx(t){return t[TE]||null}var L2=[],hy=-1;function vf(t){return{current:t}}function Xn(t){0>hy||(t.current=L2[hy],L2[hy]=null,hy--)}function Kn(t,e){hy++,L2[hy]=t.current,t.current=e}var af={},Zs=vf(af),to=vf(!1),dg=af;function Zw(t,e){var n=t.type.contextTypes;if(!n)return af;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function no(t){return t=t.childContextTypes,t!=null}function rI(){Xn(to),Xn(Zs)}function SB(t,e,n){if(Zs.current!==af)throw Error(Ee(168));Kn(Zs,e),Kn(to,n)}function oG(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Ee(108,kae(t)||"Unknown",s));return fr({},n,r)}function sI(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||af,dg=Zs.current,Kn(Zs,t),Kn(to,to.current),!0}function IB(t,e,n){var r=t.stateNode;if(!r)throw Error(Ee(169));n?(t=oG(t,e,dg),r.__reactInternalMemoizedMergedChildContext=t,Xn(to),Xn(Zs),Kn(Zs,t)):Xn(to),Kn(to,n)}var fu=null,jx=!1,hR=!1;function aG(t){fu===null?fu=[t]:fu.push(t)}function Qce(t){jx=!0,aG(t)}function Ef(){if(!hR&&fu!==null){hR=!0;var t=0,e=An;try{var n=fu;for(An=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}fu=null,jx=!1}catch(s){throw fu!==null&&(fu=fu.slice(t+1)),OH(Q5,Ef),s}finally{An=e,hR=!1}}return null}var fy=[],py=0,iI=null,oI=0,wa=[],ba=0,hg=null,Du=1,Lu="";function Ff(t,e){fy[py++]=oI,fy[py++]=iI,iI=t,oI=e}function cG(t,e,n){wa[ba++]=Du,wa[ba++]=Lu,wa[ba++]=hg,hg=t;var r=Du;t=Lu;var s=32-Ec(r)-1;r&=~(1<<s),n+=1;var i=32-Ec(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Du=1<<32-Ec(e)+s|n<<s|r,Lu=i+t}else Du=1<<i|n<<s|r,Lu=t}function iL(t){t.return!==null&&(Ff(t,1),cG(t,1,0))}function oL(t){for(;t===iI;)iI=fy[--py],fy[py]=null,oI=fy[--py],fy[py]=null;for(;t===hg;)hg=wa[--ba],wa[ba]=null,Lu=wa[--ba],wa[ba]=null,Du=wa[--ba],wa[ba]=null}var Lo=null,Oo=null,sr=!1,cc=null;function lG(t,e){var n=va(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function xB(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Lo=t,Oo=Bh(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Lo=t,Oo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=hg!==null?{id:Du,overflow:Lu}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=va(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Lo=t,Oo=null,!0):!1;default:return!1}}function M2(t){return(t.mode&1)!==0&&(t.flags&128)===0}function U2(t){if(sr){var e=Oo;if(e){var n=e;if(!xB(t,e)){if(M2(t))throw Error(Ee(418));e=Bh(n.nextSibling);var r=Lo;e&&xB(t,e)?lG(r,n):(t.flags=t.flags&-4097|2,sr=!1,Lo=t)}}else{if(M2(t))throw Error(Ee(418));t.flags=t.flags&-4097|2,sr=!1,Lo=t}}}function NB(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Lo=t}function O1(t){if(t!==Lo)return!1;if(!sr)return NB(t),sr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!O2(t.type,t.memoizedProps)),e&&(e=Oo)){if(M2(t))throw uG(),Error(Ee(418));for(;e;)lG(t,e),e=Bh(e.nextSibling)}if(NB(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Oo=Bh(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Oo=null}}else Oo=Lo?Bh(t.stateNode.nextSibling):null;return!0}function uG(){for(var t=Oo;t;)t=Bh(t.nextSibling)}function Xw(){Oo=Lo=null,sr=!1}function aL(t){cc===null?cc=[t]:cc.push(t)}var Jce=ld.ReactCurrentBatchConfig;function Nb(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ee(309));var r=n.stateNode}if(!r)throw Error(Ee(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Ee(284));if(!n._owner)throw Error(Ee(290,t))}return t}function k1(t,e){throw t=Object.prototype.toString.call(e),Error(Ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function TB(t){var e=t._init;return e(t._payload)}function dG(t){function e(m,w){if(t){var v=m.deletions;v===null?(m.deletions=[w],m.flags|=16):v.push(w)}}function n(m,w){if(!t)return null;for(;w!==null;)e(m,w),w=w.sibling;return null}function r(m,w){for(m=new Map;w!==null;)w.key!==null?m.set(w.key,w):m.set(w.index,w),w=w.sibling;return m}function s(m,w){return m=Wh(m,w),m.index=0,m.sibling=null,m}function i(m,w,v){return m.index=v,t?(v=m.alternate,v!==null?(v=v.index,v<w?(m.flags|=2,w):v):(m.flags|=2,w)):(m.flags|=1048576,w)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,w,v,A){return w===null||w.tag!==6?(w=bR(v,m.mode,A),w.return=m,w):(w=s(w,v),w.return=m,w)}function c(m,w,v,A){var C=v.type;return C===ay?u(m,w,v.props.children,A,v.key):w!==null&&(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Bd&&TB(C)===w.type)?(A=s(w,v.props),A.ref=Nb(m,w,v),A.return=m,A):(A=YA(v.type,v.key,v.props,null,m.mode,A),A.ref=Nb(m,w,v),A.return=m,A)}function l(m,w,v,A){return w===null||w.tag!==4||w.stateNode.containerInfo!==v.containerInfo||w.stateNode.implementation!==v.implementation?(w=vR(v,m.mode,A),w.return=m,w):(w=s(w,v.children||[]),w.return=m,w)}function u(m,w,v,A,C){return w===null||w.tag!==7?(w=Zp(v,m.mode,A,C),w.return=m,w):(w=s(w,v),w.return=m,w)}function d(m,w,v){if(typeof w=="string"&&w!==""||typeof w=="number")return w=bR(""+w,m.mode,v),w.return=m,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case _1:return v=YA(w.type,w.key,w.props,null,m.mode,v),v.ref=Nb(m,null,w),v.return=m,v;case oy:return w=vR(w,m.mode,v),w.return=m,w;case Bd:var A=w._init;return d(m,A(w._payload),v)}if(iv(w)||Cb(w))return w=Zp(w,m.mode,v,null),w.return=m,w;k1(m,w)}return null}function h(m,w,v,A){var C=w!==null?w.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return C!==null?null:a(m,w,""+v,A);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case _1:return v.key===C?c(m,w,v,A):null;case oy:return v.key===C?l(m,w,v,A):null;case Bd:return C=v._init,h(m,w,C(v._payload),A)}if(iv(v)||Cb(v))return C!==null?null:u(m,w,v,A,null);k1(m,v)}return null}function f(m,w,v,A,C){if(typeof A=="string"&&A!==""||typeof A=="number")return m=m.get(v)||null,a(w,m,""+A,C);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case _1:return m=m.get(A.key===null?v:A.key)||null,c(w,m,A,C);case oy:return m=m.get(A.key===null?v:A.key)||null,l(w,m,A,C);case Bd:var S=A._init;return f(m,w,v,S(A._payload),C)}if(iv(A)||Cb(A))return m=m.get(v)||null,u(w,m,A,C,null);k1(w,A)}return null}function p(m,w,v,A){for(var C=null,S=null,x=w,T=w=0,I=null;x!==null&&T<v.length;T++){x.index>T?(I=x,x=null):I=x.sibling;var k=h(m,x,v[T],A);if(k===null){x===null&&(x=I);break}t&&x&&k.alternate===null&&e(m,x),w=i(k,w,T),S===null?C=k:S.sibling=k,S=k,x=I}if(T===v.length)return n(m,x),sr&&Ff(m,T),C;if(x===null){for(;T<v.length;T++)x=d(m,v[T],A),x!==null&&(w=i(x,w,T),S===null?C=x:S.sibling=x,S=x);return sr&&Ff(m,T),C}for(x=r(m,x);T<v.length;T++)I=f(x,m,T,v[T],A),I!==null&&(t&&I.alternate!==null&&x.delete(I.key===null?T:I.key),w=i(I,w,T),S===null?C=I:S.sibling=I,S=I);return t&&x.forEach(function(O){return e(m,O)}),sr&&Ff(m,T),C}function g(m,w,v,A){var C=Cb(v);if(typeof C!="function")throw Error(Ee(150));if(v=C.call(v),v==null)throw Error(Ee(151));for(var S=C=null,x=w,T=w=0,I=null,k=v.next();x!==null&&!k.done;T++,k=v.next()){x.index>T?(I=x,x=null):I=x.sibling;var O=h(m,x,k.value,A);if(O===null){x===null&&(x=I);break}t&&x&&O.alternate===null&&e(m,x),w=i(O,w,T),S===null?C=O:S.sibling=O,S=O,x=I}if(k.done)return n(m,x),sr&&Ff(m,T),C;if(x===null){for(;!k.done;T++,k=v.next())k=d(m,k.value,A),k!==null&&(w=i(k,w,T),S===null?C=k:S.sibling=k,S=k);return sr&&Ff(m,T),C}for(x=r(m,x);!k.done;T++,k=v.next())k=f(x,m,T,k.value,A),k!==null&&(t&&k.alternate!==null&&x.delete(k.key===null?T:k.key),w=i(k,w,T),S===null?C=k:S.sibling=k,S=k);return t&&x.forEach(function(B){return e(m,B)}),sr&&Ff(m,T),C}function y(m,w,v,A){if(typeof v=="object"&&v!==null&&v.type===ay&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case _1:e:{for(var C=v.key,S=w;S!==null;){if(S.key===C){if(C=v.type,C===ay){if(S.tag===7){n(m,S.sibling),w=s(S,v.props.children),w.return=m,m=w;break e}}else if(S.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Bd&&TB(C)===S.type){n(m,S.sibling),w=s(S,v.props),w.ref=Nb(m,S,v),w.return=m,m=w;break e}n(m,S);break}else e(m,S);S=S.sibling}v.type===ay?(w=Zp(v.props.children,m.mode,A,v.key),w.return=m,m=w):(A=YA(v.type,v.key,v.props,null,m.mode,A),A.ref=Nb(m,w,v),A.return=m,m=A)}return o(m);case oy:e:{for(S=v.key;w!==null;){if(w.key===S)if(w.tag===4&&w.stateNode.containerInfo===v.containerInfo&&w.stateNode.implementation===v.implementation){n(m,w.sibling),w=s(w,v.children||[]),w.return=m,m=w;break e}else{n(m,w);break}else e(m,w);w=w.sibling}w=vR(v,m.mode,A),w.return=m,m=w}return o(m);case Bd:return S=v._init,y(m,w,S(v._payload),A)}if(iv(v))return p(m,w,v,A);if(Cb(v))return g(m,w,v,A);k1(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,w!==null&&w.tag===6?(n(m,w.sibling),w=s(w,v),w.return=m,m=w):(n(m,w),w=bR(v,m.mode,A),w.return=m,m=w),o(m)):n(m,w)}return y}var e0=dG(!0),hG=dG(!1),aI=vf(null),cI=null,gy=null,cL=null;function lL(){cL=gy=cI=null}function uL(t){var e=aI.current;Xn(aI),t._currentValue=e}function $2(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ly(t,e){cI=t,cL=gy=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zi=!0),t.firstContext=null)}function Ca(t){var e=t._currentValue;if(cL!==t)if(t={context:t,memoizedValue:e,next:null},gy===null){if(cI===null)throw Error(Ee(308));gy=t,cI.dependencies={lanes:0,firstContext:t}}else gy=gy.next=t;return e}var cp=null;function dL(t){cp===null?cp=[t]:cp.push(t)}function fG(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,dL(e)):(n.next=s.next,s.next=n),e.interleaved=n,Xu(t,r)}function Xu(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fd=!1;function hL(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pG(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fu(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fh(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,rn&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Xu(t,n)}return s=r.interleaved,s===null?(e.next=e,dL(r)):(e.next=s.next,s.next=e),r.interleaved=e,Xu(t,n)}function WA(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,J5(t,n)}}function RB(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function lI(t,e,n,r){var s=t.updateQueue;Fd=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=fr({},d,h);break e;case 2:Fd=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);pg|=o,t.lanes=o,t.memoizedState=d}}function PB(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Ee(191,s));s.call(r)}}}var EC={},Sl=vf(EC),RE=vf(EC),PE=vf(EC);function lp(t){if(t===EC)throw Error(Ee(174));return t}function fL(t,e){switch(Kn(PE,e),Kn(RE,t),Kn(Sl,EC),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:w2(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=w2(e,t)}Xn(Sl),Kn(Sl,e)}function t0(){Xn(Sl),Xn(RE),Xn(PE)}function gG(t){lp(PE.current);var e=lp(Sl.current),n=w2(e,t.type);e!==n&&(Kn(RE,t),Kn(Sl,n))}function pL(t){RE.current===t&&(Xn(Sl),Xn(RE))}var cr=vf(0);function uI(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var fR=[];function gL(){for(var t=0;t<fR.length;t++)fR[t]._workInProgressVersionPrimary=null;fR.length=0}var HA=ld.ReactCurrentDispatcher,pR=ld.ReactCurrentBatchConfig,fg=0,hr=null,zr=null,is=null,dI=!1,$v=!1,OE=0,Zce=0;function Fs(){throw Error(Ee(321))}function mL(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Sc(t[n],e[n]))return!1;return!0}function yL(t,e,n,r,s,i){if(fg=i,hr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,HA.current=t===null||t.memoizedState===null?nle:rle,t=n(r,s),$v){i=0;do{if($v=!1,OE=0,25<=i)throw Error(Ee(301));i+=1,is=zr=null,e.updateQueue=null,HA.current=sle,t=n(r,s)}while($v)}if(HA.current=hI,e=zr!==null&&zr.next!==null,fg=0,is=zr=hr=null,dI=!1,e)throw Error(Ee(300));return t}function wL(){var t=OE!==0;return OE=0,t}function Kc(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return is===null?hr.memoizedState=is=t:is=is.next=t,is}function Aa(){if(zr===null){var t=hr.alternate;t=t!==null?t.memoizedState:null}else t=zr.next;var e=is===null?hr.memoizedState:is.next;if(e!==null)is=e,zr=t;else{if(t===null)throw Error(Ee(310));zr=t,t={memoizedState:zr.memoizedState,baseState:zr.baseState,baseQueue:zr.baseQueue,queue:zr.queue,next:null},is===null?hr.memoizedState=is=t:is=is.next=t}return is}function kE(t,e){return typeof e=="function"?e(t):e}function gR(t){var e=Aa(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var r=zr,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((fg&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,hr.lanes|=u,pg|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,Sc(r,e.memoizedState)||(Zi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,hr.lanes|=i,pg|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function mR(t){var e=Aa(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Sc(i,e.memoizedState)||(Zi=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function mG(){}function yG(t,e){var n=hr,r=Aa(),s=e(),i=!Sc(r.memoizedState,s);if(i&&(r.memoizedState=s,Zi=!0),r=r.queue,bL(vG.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||is!==null&&is.memoizedState.tag&1){if(n.flags|=2048,DE(9,bG.bind(null,n,r,s,e),void 0,null),ps===null)throw Error(Ee(349));fg&30||wG(n,e,s)}return s}function wG(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=hr.updateQueue,e===null?(e={lastEffect:null,stores:null},hr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function bG(t,e,n,r){e.value=n,e.getSnapshot=r,EG(e)&&_G(t)}function vG(t,e,n){return n(function(){EG(e)&&_G(t)})}function EG(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Sc(t,n)}catch{return!0}}function _G(t){var e=Xu(t,1);e!==null&&_c(e,t,1,-1)}function OB(t){var e=Kc();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kE,lastRenderedState:t},e.queue=t,t=t.dispatch=tle.bind(null,hr,t),[e.memoizedState,t]}function DE(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=hr.updateQueue,e===null?(e={lastEffect:null,stores:null},hr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function CG(){return Aa().memoizedState}function GA(t,e,n,r){var s=Kc();hr.flags|=t,s.memoizedState=DE(1|e,n,void 0,r===void 0?null:r)}function zx(t,e,n,r){var s=Aa();r=r===void 0?null:r;var i=void 0;if(zr!==null){var o=zr.memoizedState;if(i=o.destroy,r!==null&&mL(r,o.deps)){s.memoizedState=DE(e,n,i,r);return}}hr.flags|=t,s.memoizedState=DE(1|e,n,i,r)}function kB(t,e){return GA(8390656,8,t,e)}function bL(t,e){return zx(2048,8,t,e)}function AG(t,e){return zx(4,2,t,e)}function SG(t,e){return zx(4,4,t,e)}function IG(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function xG(t,e,n){return n=n!=null?n.concat([t]):null,zx(4,4,IG.bind(null,e,t),n)}function vL(){}function NG(t,e){var n=Aa();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mL(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function TG(t,e){var n=Aa();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mL(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function RG(t,e,n){return fg&21?(Sc(n,e)||(n=LH(),hr.lanes|=n,pg|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zi=!0),t.memoizedState=n)}function Xce(t,e){var n=An;An=n!==0&&4>n?n:4,t(!0);var r=pR.transition;pR.transition={};try{t(!1),e()}finally{An=n,pR.transition=r}}function PG(){return Aa().memoizedState}function ele(t,e,n){var r=zh(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},OG(t))kG(e,n);else if(n=fG(t,e,n,r),n!==null){var s=bi();_c(n,t,r,s),DG(n,e,r)}}function tle(t,e,n){var r=zh(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(OG(t))kG(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Sc(a,o)){var c=e.interleaved;c===null?(s.next=s,dL(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=fG(t,e,s,r),n!==null&&(s=bi(),_c(n,t,r,s),DG(n,e,r))}}function OG(t){var e=t.alternate;return t===hr||e!==null&&e===hr}function kG(t,e){$v=dI=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function DG(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,J5(t,n)}}var hI={readContext:Ca,useCallback:Fs,useContext:Fs,useEffect:Fs,useImperativeHandle:Fs,useInsertionEffect:Fs,useLayoutEffect:Fs,useMemo:Fs,useReducer:Fs,useRef:Fs,useState:Fs,useDebugValue:Fs,useDeferredValue:Fs,useTransition:Fs,useMutableSource:Fs,useSyncExternalStore:Fs,useId:Fs,unstable_isNewReconciler:!1},nle={readContext:Ca,useCallback:function(t,e){return Kc().memoizedState=[t,e===void 0?null:e],t},useContext:Ca,useEffect:kB,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,GA(4194308,4,IG.bind(null,e,t),n)},useLayoutEffect:function(t,e){return GA(4194308,4,t,e)},useInsertionEffect:function(t,e){return GA(4,2,t,e)},useMemo:function(t,e){var n=Kc();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Kc();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ele.bind(null,hr,t),[r.memoizedState,t]},useRef:function(t){var e=Kc();return t={current:t},e.memoizedState=t},useState:OB,useDebugValue:vL,useDeferredValue:function(t){return Kc().memoizedState=t},useTransition:function(){var t=OB(!1),e=t[0];return t=Xce.bind(null,t[1]),Kc().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=hr,s=Kc();if(sr){if(n===void 0)throw Error(Ee(407));n=n()}else{if(n=e(),ps===null)throw Error(Ee(349));fg&30||wG(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,kB(vG.bind(null,r,i,t),[t]),r.flags|=2048,DE(9,bG.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Kc(),e=ps.identifierPrefix;if(sr){var n=Lu,r=Du;n=(r&~(1<<32-Ec(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=OE++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Zce++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},rle={readContext:Ca,useCallback:NG,useContext:Ca,useEffect:bL,useImperativeHandle:xG,useInsertionEffect:AG,useLayoutEffect:SG,useMemo:TG,useReducer:gR,useRef:CG,useState:function(){return gR(kE)},useDebugValue:vL,useDeferredValue:function(t){var e=Aa();return RG(e,zr.memoizedState,t)},useTransition:function(){var t=gR(kE)[0],e=Aa().memoizedState;return[t,e]},useMutableSource:mG,useSyncExternalStore:yG,useId:PG,unstable_isNewReconciler:!1},sle={readContext:Ca,useCallback:NG,useContext:Ca,useEffect:bL,useImperativeHandle:xG,useInsertionEffect:AG,useLayoutEffect:SG,useMemo:TG,useReducer:mR,useRef:CG,useState:function(){return mR(kE)},useDebugValue:vL,useDeferredValue:function(t){var e=Aa();return zr===null?e.memoizedState=t:RG(e,zr.memoizedState,t)},useTransition:function(){var t=mR(kE)[0],e=Aa().memoizedState;return[t,e]},useMutableSource:mG,useSyncExternalStore:yG,useId:PG,unstable_isNewReconciler:!1};function Ja(t,e){if(t&&t.defaultProps){e=fr({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function B2(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:fr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Wx={isMounted:function(t){return(t=t._reactInternals)?qg(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=bi(),s=zh(t),i=Fu(r,s);i.payload=e,n!=null&&(i.callback=n),e=Fh(t,i,s),e!==null&&(_c(e,t,s,r),WA(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=bi(),s=zh(t),i=Fu(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Fh(t,i,s),e!==null&&(_c(e,t,s,r),WA(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=bi(),r=zh(t),s=Fu(n,r);s.tag=2,e!=null&&(s.callback=e),e=Fh(t,s,r),e!==null&&(_c(e,t,r,n),WA(e,t,r))}};function DB(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!IE(n,r)||!IE(s,i):!0}function LG(t,e,n){var r=!1,s=af,i=e.contextType;return typeof i=="object"&&i!==null?i=Ca(i):(s=no(e)?dg:Zs.current,r=e.contextTypes,i=(r=r!=null)?Zw(t,s):af),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wx,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function LB(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Wx.enqueueReplaceState(e,e.state,null)}function F2(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},hL(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ca(i):(i=no(e)?dg:Zs.current,s.context=Zw(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(B2(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Wx.enqueueReplaceState(s,s.state,null),lI(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function n0(t,e){try{var n="",r=e;do n+=Oae(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function yR(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function j2(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ile=typeof WeakMap=="function"?WeakMap:Map;function MG(t,e,n){n=Fu(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){pI||(pI=!0,J2=r),j2(t,e)},n}function UG(t,e,n){n=Fu(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){j2(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){j2(t,e),typeof r!="function"&&(jh===null?jh=new Set([this]):jh.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function MB(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ile;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=ble.bind(null,t,e,n),e.then(t,t))}function UB(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $B(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Fu(-1,1),e.tag=2,Fh(n,e,1))),n.lanes|=1),t)}var ole=ld.ReactCurrentOwner,Zi=!1;function ci(t,e,n,r){e.child=t===null?hG(e,null,n,r):e0(e,t.child,n,r)}function BB(t,e,n,r,s){n=n.render;var i=e.ref;return Ly(e,s),r=yL(t,e,n,r,i,s),n=wL(),t!==null&&!Zi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ed(t,e,s)):(sr&&n&&iL(e),e.flags|=1,ci(t,e,r,s),e.child)}function FB(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!NL(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,$G(t,e,i,r,s)):(t=YA(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:IE,n(o,r)&&t.ref===e.ref)return ed(t,e,s)}return e.flags|=1,t=Wh(i,r),t.ref=e.ref,t.return=e,e.child=t}function $G(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(IE(i,r)&&t.ref===e.ref)if(Zi=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Zi=!0);else return e.lanes=t.lanes,ed(t,e,s)}return z2(t,e,n,r,s)}function BG(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kn(yy,xo),xo|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Kn(yy,xo),xo|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Kn(yy,xo),xo|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Kn(yy,xo),xo|=r;return ci(t,e,s,n),e.child}function FG(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function z2(t,e,n,r,s){var i=no(n)?dg:Zs.current;return i=Zw(e,i),Ly(e,s),n=yL(t,e,n,r,i,s),r=wL(),t!==null&&!Zi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ed(t,e,s)):(sr&&r&&iL(e),e.flags|=1,ci(t,e,n,s),e.child)}function jB(t,e,n,r,s){if(no(n)){var i=!0;sI(e)}else i=!1;if(Ly(e,s),e.stateNode===null)qA(t,e),LG(e,n,r),F2(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Ca(l):(l=no(n)?dg:Zs.current,l=Zw(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&LB(e,o,r,l),Fd=!1;var h=e.memoizedState;o.state=h,lI(e,r,o,s),c=e.memoizedState,a!==r||h!==c||to.current||Fd?(typeof u=="function"&&(B2(e,n,u,r),c=e.memoizedState),(a=Fd||DB(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,pG(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:Ja(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ca(c):(c=no(n)?dg:Zs.current,c=Zw(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&LB(e,o,r,c),Fd=!1,h=e.memoizedState,o.state=h,lI(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||to.current||Fd?(typeof f=="function"&&(B2(e,n,f,r),p=e.memoizedState),(l=Fd||DB(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return W2(t,e,n,r,i,s)}function W2(t,e,n,r,s,i){FG(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&IB(e,n,!1),ed(t,e,i);r=e.stateNode,ole.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=e0(e,t.child,null,i),e.child=e0(e,null,a,i)):ci(t,e,a,i),e.memoizedState=r.state,s&&IB(e,n,!0),e.child}function jG(t){var e=t.stateNode;e.pendingContext?SB(t,e.pendingContext,e.pendingContext!==e.context):e.context&&SB(t,e.context,!1),fL(t,e.containerInfo)}function zB(t,e,n,r,s){return Xw(),aL(s),e.flags|=256,ci(t,e,n,r),e.child}var H2={dehydrated:null,treeContext:null,retryLane:0};function G2(t){return{baseLanes:t,cachePool:null,transitions:null}}function zG(t,e,n){var r=e.pendingProps,s=cr.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Kn(cr,s&1),t===null)return U2(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=qx(o,r,0,null),t=Zp(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=G2(n),e.memoizedState=H2,t):EL(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return ale(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Wh(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Wh(a,i):(i=Zp(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?G2(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=H2,r}return i=t.child,t=i.sibling,r=Wh(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function EL(t,e){return e=qx({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function D1(t,e,n,r){return r!==null&&aL(r),e0(e,t.child,null,n),t=EL(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ale(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=yR(Error(Ee(422))),D1(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=qx({mode:"visible",children:r.children},s,0,null),i=Zp(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&e0(e,t.child,null,o),e.child.memoizedState=G2(o),e.memoizedState=H2,i);if(!(e.mode&1))return D1(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Ee(419)),r=yR(i,r,void 0),D1(t,e,o,r)}if(a=(o&t.childLanes)!==0,Zi||a){if(r=ps,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Xu(t,s),_c(r,t,s,-1))}return xL(),r=yR(Error(Ee(421))),D1(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=vle.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Oo=Bh(s.nextSibling),Lo=e,sr=!0,cc=null,t!==null&&(wa[ba++]=Du,wa[ba++]=Lu,wa[ba++]=hg,Du=t.id,Lu=t.overflow,hg=e),e=EL(e,r.children),e.flags|=4096,e)}function WB(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),$2(t.return,e,n)}function wR(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function WG(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ci(t,e,r.children,n),r=cr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&WB(t,n,e);else if(t.tag===19)WB(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Kn(cr,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&uI(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),wR(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&uI(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}wR(e,!0,n,null,i);break;case"together":wR(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qA(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ed(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),pg|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ee(153));if(e.child!==null){for(t=e.child,n=Wh(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Wh(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function cle(t,e,n){switch(e.tag){case 3:jG(e),Xw();break;case 5:gG(e);break;case 1:no(e.type)&&sI(e);break;case 4:fL(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Kn(aI,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Kn(cr,cr.current&1),e.flags|=128,null):n&e.child.childLanes?zG(t,e,n):(Kn(cr,cr.current&1),t=ed(t,e,n),t!==null?t.sibling:null);Kn(cr,cr.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return WG(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Kn(cr,cr.current),r)break;return null;case 22:case 23:return e.lanes=0,BG(t,e,n)}return ed(t,e,n)}var HG,q2,GG,qG;HG=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};q2=function(){};GG=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,lp(Sl.current);var i=null;switch(n){case"input":s=p2(t,s),r=p2(t,r),i=[];break;case"select":s=fr({},s,{value:void 0}),r=fr({},r,{value:void 0}),i=[];break;case"textarea":s=y2(t,s),r=y2(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=nI)}b2(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(bE.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(bE.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Qn("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};qG=function(t,e,n,r){n!==r&&(e.flags|=4)};function Tb(t,e){if(!sr)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function js(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function lle(t,e,n){var r=e.pendingProps;switch(oL(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return js(e),null;case 1:return no(e.type)&&rI(),js(e),null;case 3:return r=e.stateNode,t0(),Xn(to),Xn(Zs),gL(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(O1(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,cc!==null&&(ek(cc),cc=null))),q2(t,e),js(e),null;case 5:pL(e);var s=lp(PE.current);if(n=e.type,t!==null&&e.stateNode!=null)GG(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ee(166));return js(e),null}if(t=lp(Sl.current),O1(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ml]=e,r[TE]=i,t=(e.mode&1)!==0,n){case"dialog":Qn("cancel",r),Qn("close",r);break;case"iframe":case"object":case"embed":Qn("load",r);break;case"video":case"audio":for(s=0;s<av.length;s++)Qn(av[s],r);break;case"source":Qn("error",r);break;case"img":case"image":case"link":Qn("error",r),Qn("load",r);break;case"details":Qn("toggle",r);break;case"input":Z$(r,i),Qn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Qn("invalid",r);break;case"textarea":eB(r,i),Qn("invalid",r)}b2(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&P1(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&P1(r.textContent,a,t),s=["children",""+a]):bE.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Qn("scroll",r)}switch(n){case"input":C1(r),X$(r,i,!0);break;case"textarea":C1(r),tB(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=nI)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vH(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ml]=e,t[TE]=r,HG(t,e,!1,!1),e.stateNode=t;e:{switch(o=v2(n,r),n){case"dialog":Qn("cancel",t),Qn("close",t),s=r;break;case"iframe":case"object":case"embed":Qn("load",t),s=r;break;case"video":case"audio":for(s=0;s<av.length;s++)Qn(av[s],t);s=r;break;case"source":Qn("error",t),s=r;break;case"img":case"image":case"link":Qn("error",t),Qn("load",t),s=r;break;case"details":Qn("toggle",t),s=r;break;case"input":Z$(t,r),s=p2(t,r),Qn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=fr({},r,{value:void 0}),Qn("invalid",t);break;case"textarea":eB(t,r),s=y2(t,r),Qn("invalid",t);break;default:s=r}b2(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?CH(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&EH(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&vE(t,c):typeof c=="number"&&vE(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(bE.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Qn("scroll",t):c!=null&&G5(t,i,c,o))}switch(n){case"input":C1(t),X$(t,r,!1);break;case"textarea":C1(t),tB(t);break;case"option":r.value!=null&&t.setAttribute("value",""+of(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Py(t,!!r.multiple,i,!1):r.defaultValue!=null&&Py(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=nI)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return js(e),null;case 6:if(t&&e.stateNode!=null)qG(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ee(166));if(n=lp(PE.current),lp(Sl.current),O1(e)){if(r=e.stateNode,n=e.memoizedProps,r[ml]=e,(i=r.nodeValue!==n)&&(t=Lo,t!==null))switch(t.tag){case 3:P1(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&P1(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ml]=e,e.stateNode=r}return js(e),null;case 13:if(Xn(cr),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(sr&&Oo!==null&&e.mode&1&&!(e.flags&128))uG(),Xw(),e.flags|=98560,i=!1;else if(i=O1(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Ee(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ee(317));i[ml]=e}else Xw(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;js(e),i=!1}else cc!==null&&(ek(cc),cc=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||cr.current&1?Vr===0&&(Vr=3):xL())),e.updateQueue!==null&&(e.flags|=4),js(e),null);case 4:return t0(),q2(t,e),t===null&&xE(e.stateNode.containerInfo),js(e),null;case 10:return uL(e.type._context),js(e),null;case 17:return no(e.type)&&rI(),js(e),null;case 19:if(Xn(cr),i=e.memoizedState,i===null)return js(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Tb(i,!1);else{if(Vr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=uI(t),o!==null){for(e.flags|=128,Tb(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Kn(cr,cr.current&1|2),e.child}t=t.sibling}i.tail!==null&&xr()>r0&&(e.flags|=128,r=!0,Tb(i,!1),e.lanes=4194304)}else{if(!r)if(t=uI(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Tb(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!sr)return js(e),null}else 2*xr()-i.renderingStartTime>r0&&n!==1073741824&&(e.flags|=128,r=!0,Tb(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=xr(),e.sibling=null,n=cr.current,Kn(cr,r?n&1|2:n&1),e):(js(e),null);case 22:case 23:return IL(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?xo&1073741824&&(js(e),e.subtreeFlags&6&&(e.flags|=8192)):js(e),null;case 24:return null;case 25:return null}throw Error(Ee(156,e.tag))}function ule(t,e){switch(oL(e),e.tag){case 1:return no(e.type)&&rI(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return t0(),Xn(to),Xn(Zs),gL(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return pL(e),null;case 13:if(Xn(cr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ee(340));Xw()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Xn(cr),null;case 4:return t0(),null;case 10:return uL(e.type._context),null;case 22:case 23:return IL(),null;case 24:return null;default:return null}}var L1=!1,Qs=!1,dle=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function my(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){br(t,e,r)}else n.current=null}function V2(t,e,n){try{n()}catch(r){br(t,e,r)}}var HB=!1;function hle(t,e){if(R2=XS,t=JH(),sL(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(P2={focusedElem:t,selectionRange:n},XS=!1,Ye=e;Ye!==null;)if(e=Ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ye=t;else for(;Ye!==null;){e=Ye;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,y=p.memoizedState,m=e.stateNode,w=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:Ja(e.type,g),y);m.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ee(163))}}catch(A){br(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,Ye=t;break}Ye=e.return}return p=HB,HB=!1,p}function Bv(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&V2(e,n,i)}s=s.next}while(s!==r)}}function Hx(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function K2(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function VG(t){var e=t.alternate;e!==null&&(t.alternate=null,VG(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ml],delete e[TE],delete e[D2],delete e[Kce],delete e[Yce])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function KG(t){return t.tag===5||t.tag===3||t.tag===4}function GB(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||KG(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Y2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=nI));else if(r!==4&&(t=t.child,t!==null))for(Y2(t,e,n),t=t.sibling;t!==null;)Y2(t,e,n),t=t.sibling}function Q2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Q2(t,e,n),t=t.sibling;t!==null;)Q2(t,e,n),t=t.sibling}var Ss=null,ac=!1;function gd(t,e,n){for(n=n.child;n!==null;)YG(t,e,n),n=n.sibling}function YG(t,e,n){if(Al&&typeof Al.onCommitFiberUnmount=="function")try{Al.onCommitFiberUnmount(Mx,n)}catch{}switch(n.tag){case 5:Qs||my(n,e);case 6:var r=Ss,s=ac;Ss=null,gd(t,e,n),Ss=r,ac=s,Ss!==null&&(ac?(t=Ss,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ss.removeChild(n.stateNode));break;case 18:Ss!==null&&(ac?(t=Ss,n=n.stateNode,t.nodeType===8?dR(t.parentNode,n):t.nodeType===1&&dR(t,n),AE(t)):dR(Ss,n.stateNode));break;case 4:r=Ss,s=ac,Ss=n.stateNode.containerInfo,ac=!0,gd(t,e,n),Ss=r,ac=s;break;case 0:case 11:case 14:case 15:if(!Qs&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&V2(n,e,o),s=s.next}while(s!==r)}gd(t,e,n);break;case 1:if(!Qs&&(my(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){br(n,e,a)}gd(t,e,n);break;case 21:gd(t,e,n);break;case 22:n.mode&1?(Qs=(r=Qs)||n.memoizedState!==null,gd(t,e,n),Qs=r):gd(t,e,n);break;default:gd(t,e,n)}}function qB(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new dle),e.forEach(function(r){var s=Ele.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ja(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ss=a.stateNode,ac=!1;break e;case 3:Ss=a.stateNode.containerInfo,ac=!0;break e;case 4:Ss=a.stateNode.containerInfo,ac=!0;break e}a=a.return}if(Ss===null)throw Error(Ee(160));YG(i,o,s),Ss=null,ac=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){br(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)QG(e,t),e=e.sibling}function QG(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ja(e,t),Uc(t),r&4){try{Bv(3,t,t.return),Hx(3,t)}catch(g){br(t,t.return,g)}try{Bv(5,t,t.return)}catch(g){br(t,t.return,g)}}break;case 1:ja(e,t),Uc(t),r&512&&n!==null&&my(n,n.return);break;case 5:if(ja(e,t),Uc(t),r&512&&n!==null&&my(n,n.return),t.flags&32){var s=t.stateNode;try{vE(s,"")}catch(g){br(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&wH(s,i),v2(a,o);var l=v2(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?CH(s,d):u==="dangerouslySetInnerHTML"?EH(s,d):u==="children"?vE(s,d):G5(s,u,d,l)}switch(a){case"input":g2(s,i);break;case"textarea":bH(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Py(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?Py(s,!!i.multiple,i.defaultValue,!0):Py(s,!!i.multiple,i.multiple?[]:"",!1))}s[TE]=i}catch(g){br(t,t.return,g)}}break;case 6:if(ja(e,t),Uc(t),r&4){if(t.stateNode===null)throw Error(Ee(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){br(t,t.return,g)}}break;case 3:if(ja(e,t),Uc(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{AE(e.containerInfo)}catch(g){br(t,t.return,g)}break;case 4:ja(e,t),Uc(t);break;case 13:ja(e,t),Uc(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(AL=xr())),r&4&&qB(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Qs=(l=Qs)||u,ja(e,t),Qs=l):ja(e,t),Uc(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(Ye=t,u=t.child;u!==null;){for(d=Ye=u;Ye!==null;){switch(h=Ye,f=h.child,h.tag){case 0:case 11:case 14:case 15:Bv(4,h,h.return);break;case 1:my(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){br(r,n,g)}}break;case 5:my(h,h.return);break;case 22:if(h.memoizedState!==null){KB(d);continue}}f!==null?(f.return=h,Ye=f):KB(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=_H("display",o))}catch(g){br(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){br(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ja(e,t),Uc(t),r&4&&qB(t);break;case 21:break;default:ja(e,t),Uc(t)}}function Uc(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(KG(n)){var r=n;break e}n=n.return}throw Error(Ee(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(vE(s,""),r.flags&=-33);var i=GB(t);Q2(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=GB(t);Y2(t,a,o);break;default:throw Error(Ee(161))}}catch(c){br(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function fle(t,e,n){Ye=t,JG(t)}function JG(t,e,n){for(var r=(t.mode&1)!==0;Ye!==null;){var s=Ye,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||L1;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Qs;a=L1;var l=Qs;if(L1=o,(Qs=c)&&!l)for(Ye=s;Ye!==null;)o=Ye,c=o.child,o.tag===22&&o.memoizedState!==null?YB(s):c!==null?(c.return=o,Ye=c):YB(s);for(;i!==null;)Ye=i,JG(i),i=i.sibling;Ye=s,L1=a,Qs=l}VB(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ye=i):VB(t)}}function VB(t){for(;Ye!==null;){var e=Ye;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qs||Hx(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Qs)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ja(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&PB(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}PB(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&AE(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ee(163))}Qs||e.flags&512&&K2(e)}catch(h){br(e,e.return,h)}}if(e===t){Ye=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ye=n;break}Ye=e.return}}function KB(t){for(;Ye!==null;){var e=Ye;if(e===t){Ye=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ye=n;break}Ye=e.return}}function YB(t){for(;Ye!==null;){var e=Ye;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Hx(4,e)}catch(c){br(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){br(e,s,c)}}var i=e.return;try{K2(e)}catch(c){br(e,i,c)}break;case 5:var o=e.return;try{K2(e)}catch(c){br(e,o,c)}}}catch(c){br(e,e.return,c)}if(e===t){Ye=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ye=a;break}Ye=e.return}}var ple=Math.ceil,fI=ld.ReactCurrentDispatcher,_L=ld.ReactCurrentOwner,_a=ld.ReactCurrentBatchConfig,rn=0,ps=null,Dr=null,Rs=0,xo=0,yy=vf(0),Vr=0,LE=null,pg=0,Gx=0,CL=0,Fv=null,Ki=null,AL=0,r0=1/0,uu=null,pI=!1,J2=null,jh=null,M1=!1,Ah=null,gI=0,jv=0,Z2=null,VA=-1,KA=0;function bi(){return rn&6?xr():VA!==-1?VA:VA=xr()}function zh(t){return t.mode&1?rn&2&&Rs!==0?Rs&-Rs:Jce.transition!==null?(KA===0&&(KA=LH()),KA):(t=An,t!==0||(t=window.event,t=t===void 0?16:zH(t.type)),t):1}function _c(t,e,n,r){if(50<jv)throw jv=0,Z2=null,Error(Ee(185));wC(t,n,r),(!(rn&2)||t!==ps)&&(t===ps&&(!(rn&2)&&(Gx|=n),Vr===4&&qd(t,Rs)),ro(t,r),n===1&&rn===0&&!(e.mode&1)&&(r0=xr()+500,jx&&Ef()))}function ro(t,e){var n=t.callbackNode;Jae(t,e);var r=ZS(t,t===ps?Rs:0);if(r===0)n!==null&&sB(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&sB(n),e===1)t.tag===0?Qce(QB.bind(null,t)):aG(QB.bind(null,t)),qce(function(){!(rn&6)&&Ef()}),n=null;else{switch(MH(r)){case 1:n=Q5;break;case 4:n=kH;break;case 16:n=JS;break;case 536870912:n=DH;break;default:n=JS}n=iq(n,ZG.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ZG(t,e){if(VA=-1,KA=0,rn&6)throw Error(Ee(327));var n=t.callbackNode;if(My()&&t.callbackNode!==n)return null;var r=ZS(t,t===ps?Rs:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=mI(t,r);else{e=r;var s=rn;rn|=2;var i=eq();(ps!==t||Rs!==e)&&(uu=null,r0=xr()+500,Jp(t,e));do try{yle();break}catch(a){XG(t,a)}while(!0);lL(),fI.current=i,rn=s,Dr!==null?e=0:(ps=null,Rs=0,e=Vr)}if(e!==0){if(e===2&&(s=S2(t),s!==0&&(r=s,e=X2(t,s))),e===1)throw n=LE,Jp(t,0),qd(t,r),ro(t,xr()),n;if(e===6)qd(t,r);else{if(s=t.current.alternate,!(r&30)&&!gle(s)&&(e=mI(t,r),e===2&&(i=S2(t),i!==0&&(r=i,e=X2(t,i))),e===1))throw n=LE,Jp(t,0),qd(t,r),ro(t,xr()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Ee(345));case 2:jf(t,Ki,uu);break;case 3:if(qd(t,r),(r&130023424)===r&&(e=AL+500-xr(),10<e)){if(ZS(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){bi(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=k2(jf.bind(null,t,Ki,uu),e);break}jf(t,Ki,uu);break;case 4:if(qd(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ec(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=xr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ple(r/1960))-r,10<r){t.timeoutHandle=k2(jf.bind(null,t,Ki,uu),r);break}jf(t,Ki,uu);break;case 5:jf(t,Ki,uu);break;default:throw Error(Ee(329))}}}return ro(t,xr()),t.callbackNode===n?ZG.bind(null,t):null}function X2(t,e){var n=Fv;return t.current.memoizedState.isDehydrated&&(Jp(t,e).flags|=256),t=mI(t,e),t!==2&&(e=Ki,Ki=n,e!==null&&ek(e)),t}function ek(t){Ki===null?Ki=t:Ki.push.apply(Ki,t)}function gle(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Sc(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function qd(t,e){for(e&=~CL,e&=~Gx,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ec(e),r=1<<n;t[n]=-1,e&=~r}}function QB(t){if(rn&6)throw Error(Ee(327));My();var e=ZS(t,0);if(!(e&1))return ro(t,xr()),null;var n=mI(t,e);if(t.tag!==0&&n===2){var r=S2(t);r!==0&&(e=r,n=X2(t,r))}if(n===1)throw n=LE,Jp(t,0),qd(t,e),ro(t,xr()),n;if(n===6)throw Error(Ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,jf(t,Ki,uu),ro(t,xr()),null}function SL(t,e){var n=rn;rn|=1;try{return t(e)}finally{rn=n,rn===0&&(r0=xr()+500,jx&&Ef())}}function gg(t){Ah!==null&&Ah.tag===0&&!(rn&6)&&My();var e=rn;rn|=1;var n=_a.transition,r=An;try{if(_a.transition=null,An=1,t)return t()}finally{An=r,_a.transition=n,rn=e,!(rn&6)&&Ef()}}function IL(){xo=yy.current,Xn(yy)}function Jp(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Gce(n)),Dr!==null)for(n=Dr.return;n!==null;){var r=n;switch(oL(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&rI();break;case 3:t0(),Xn(to),Xn(Zs),gL();break;case 5:pL(r);break;case 4:t0();break;case 13:Xn(cr);break;case 19:Xn(cr);break;case 10:uL(r.type._context);break;case 22:case 23:IL()}n=n.return}if(ps=t,Dr=t=Wh(t.current,null),Rs=xo=e,Vr=0,LE=null,CL=Gx=pg=0,Ki=Fv=null,cp!==null){for(e=0;e<cp.length;e++)if(n=cp[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}cp=null}return t}function XG(t,e){do{var n=Dr;try{if(lL(),HA.current=hI,dI){for(var r=hr.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}dI=!1}if(fg=0,is=zr=hr=null,$v=!1,OE=0,_L.current=null,n===null||n.return===null){Vr=1,LE=e,Dr=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Rs,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=UB(o);if(f!==null){f.flags&=-257,$B(f,o,a,i,e),f.mode&1&&MB(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){MB(i,l,e),xL();break e}c=Error(Ee(426))}}else if(sr&&a.mode&1){var y=UB(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),$B(y,o,a,i,e),aL(n0(c,a));break e}}i=c=n0(c,a),Vr!==4&&(Vr=2),Fv===null?Fv=[i]:Fv.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=MG(i,c,e);RB(i,m);break e;case 1:a=c;var w=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(jh===null||!jh.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var A=UG(i,a,e);RB(i,A);break e}}i=i.return}while(i!==null)}nq(n)}catch(C){e=C,Dr===n&&n!==null&&(Dr=n=n.return);continue}break}while(!0)}function eq(){var t=fI.current;return fI.current=hI,t===null?hI:t}function xL(){(Vr===0||Vr===3||Vr===2)&&(Vr=4),ps===null||!(pg&268435455)&&!(Gx&268435455)||qd(ps,Rs)}function mI(t,e){var n=rn;rn|=2;var r=eq();(ps!==t||Rs!==e)&&(uu=null,Jp(t,e));do try{mle();break}catch(s){XG(t,s)}while(!0);if(lL(),rn=n,fI.current=r,Dr!==null)throw Error(Ee(261));return ps=null,Rs=0,Vr}function mle(){for(;Dr!==null;)tq(Dr)}function yle(){for(;Dr!==null&&!zae();)tq(Dr)}function tq(t){var e=sq(t.alternate,t,xo);t.memoizedProps=t.pendingProps,e===null?nq(t):Dr=e,_L.current=null}function nq(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ule(n,e),n!==null){n.flags&=32767,Dr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Vr=6,Dr=null;return}}else if(n=lle(n,e,xo),n!==null){Dr=n;return}if(e=e.sibling,e!==null){Dr=e;return}Dr=e=t}while(e!==null);Vr===0&&(Vr=5)}function jf(t,e,n){var r=An,s=_a.transition;try{_a.transition=null,An=1,wle(t,e,n,r)}finally{_a.transition=s,An=r}return null}function wle(t,e,n,r){do My();while(Ah!==null);if(rn&6)throw Error(Ee(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ee(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Zae(t,i),t===ps&&(Dr=ps=null,Rs=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||M1||(M1=!0,iq(JS,function(){return My(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=_a.transition,_a.transition=null;var o=An;An=1;var a=rn;rn|=4,_L.current=null,hle(t,n),QG(n,t),$ce(P2),XS=!!R2,P2=R2=null,t.current=n,fle(n),Wae(),rn=a,An=o,_a.transition=i}else t.current=n;if(M1&&(M1=!1,Ah=t,gI=s),i=t.pendingLanes,i===0&&(jh=null),qae(n.stateNode),ro(t,xr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(pI)throw pI=!1,t=J2,J2=null,t;return gI&1&&t.tag!==0&&My(),i=t.pendingLanes,i&1?t===Z2?jv++:(jv=0,Z2=t):jv=0,Ef(),null}function My(){if(Ah!==null){var t=MH(gI),e=_a.transition,n=An;try{if(_a.transition=null,An=16>t?16:t,Ah===null)var r=!1;else{if(t=Ah,Ah=null,gI=0,rn&6)throw Error(Ee(331));var s=rn;for(rn|=4,Ye=t.current;Ye!==null;){var i=Ye,o=i.child;if(Ye.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(Ye=l;Ye!==null;){var u=Ye;switch(u.tag){case 0:case 11:case 15:Bv(8,u,i)}var d=u.child;if(d!==null)d.return=u,Ye=d;else for(;Ye!==null;){u=Ye;var h=u.sibling,f=u.return;if(VG(u),u===l){Ye=null;break}if(h!==null){h.return=f,Ye=h;break}Ye=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}Ye=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ye=o;else e:for(;Ye!==null;){if(i=Ye,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Bv(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,Ye=m;break e}Ye=i.return}}var w=t.current;for(Ye=w;Ye!==null;){o=Ye;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Ye=v;else e:for(o=w;Ye!==null;){if(a=Ye,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Hx(9,a)}}catch(C){br(a,a.return,C)}if(a===o){Ye=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,Ye=A;break e}Ye=a.return}}if(rn=s,Ef(),Al&&typeof Al.onPostCommitFiberRoot=="function")try{Al.onPostCommitFiberRoot(Mx,t)}catch{}r=!0}return r}finally{An=n,_a.transition=e}}return!1}function JB(t,e,n){e=n0(n,e),e=MG(t,e,1),t=Fh(t,e,1),e=bi(),t!==null&&(wC(t,1,e),ro(t,e))}function br(t,e,n){if(t.tag===3)JB(t,t,n);else for(;e!==null;){if(e.tag===3){JB(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jh===null||!jh.has(r))){t=n0(n,t),t=UG(e,t,1),e=Fh(e,t,1),t=bi(),e!==null&&(wC(e,1,t),ro(e,t));break}}e=e.return}}function ble(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=bi(),t.pingedLanes|=t.suspendedLanes&n,ps===t&&(Rs&n)===n&&(Vr===4||Vr===3&&(Rs&130023424)===Rs&&500>xr()-AL?Jp(t,0):CL|=n),ro(t,e)}function rq(t,e){e===0&&(t.mode&1?(e=I1,I1<<=1,!(I1&130023424)&&(I1=4194304)):e=1);var n=bi();t=Xu(t,e),t!==null&&(wC(t,e,n),ro(t,n))}function vle(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),rq(t,n)}function Ele(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ee(314))}r!==null&&r.delete(e),rq(t,n)}var sq;sq=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||to.current)Zi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Zi=!1,cle(t,e,n);Zi=!!(t.flags&131072)}else Zi=!1,sr&&e.flags&1048576&&cG(e,oI,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;qA(t,e),t=e.pendingProps;var s=Zw(e,Zs.current);Ly(e,n),s=yL(null,e,r,t,s,n);var i=wL();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,no(r)?(i=!0,sI(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,hL(e),s.updater=Wx,e.stateNode=s,s._reactInternals=e,F2(e,r,t,n),e=W2(null,e,r,!0,i,n)):(e.tag=0,sr&&i&&iL(e),ci(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(qA(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Cle(r),t=Ja(r,t),s){case 0:e=z2(null,e,r,t,n);break e;case 1:e=jB(null,e,r,t,n);break e;case 11:e=BB(null,e,r,t,n);break e;case 14:e=FB(null,e,r,Ja(r.type,t),n);break e}throw Error(Ee(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ja(r,s),z2(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ja(r,s),jB(t,e,r,s,n);case 3:e:{if(jG(e),t===null)throw Error(Ee(387));r=e.pendingProps,i=e.memoizedState,s=i.element,pG(t,e),lI(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=n0(Error(Ee(423)),e),e=zB(t,e,r,n,s);break e}else if(r!==s){s=n0(Error(Ee(424)),e),e=zB(t,e,r,n,s);break e}else for(Oo=Bh(e.stateNode.containerInfo.firstChild),Lo=e,sr=!0,cc=null,n=hG(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xw(),r===s){e=ed(t,e,n);break e}ci(t,e,r,n)}e=e.child}return e;case 5:return gG(e),t===null&&U2(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,O2(r,s)?o=null:i!==null&&O2(r,i)&&(e.flags|=32),FG(t,e),ci(t,e,o,n),e.child;case 6:return t===null&&U2(e),null;case 13:return zG(t,e,n);case 4:return fL(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=e0(e,null,r,n):ci(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ja(r,s),BB(t,e,r,s,n);case 7:return ci(t,e,e.pendingProps,n),e.child;case 8:return ci(t,e,e.pendingProps.children,n),e.child;case 12:return ci(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Kn(aI,r._currentValue),r._currentValue=o,i!==null)if(Sc(i.value,o)){if(i.children===s.children&&!to.current){e=ed(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Fu(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),$2(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ee(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),$2(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ci(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ly(e,n),s=Ca(s),r=r(s),e.flags|=1,ci(t,e,r,n),e.child;case 14:return r=e.type,s=Ja(r,e.pendingProps),s=Ja(r.type,s),FB(t,e,r,s,n);case 15:return $G(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ja(r,s),qA(t,e),e.tag=1,no(r)?(t=!0,sI(e)):t=!1,Ly(e,n),LG(e,r,s),F2(e,r,s,n),W2(null,e,r,!0,t,n);case 19:return WG(t,e,n);case 22:return BG(t,e,n)}throw Error(Ee(156,e.tag))};function iq(t,e){return OH(t,e)}function _le(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function va(t,e,n,r){return new _le(t,e,n,r)}function NL(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Cle(t){if(typeof t=="function")return NL(t)?1:0;if(t!=null){if(t=t.$$typeof,t===V5)return 11;if(t===K5)return 14}return 2}function Wh(t,e){var n=t.alternate;return n===null?(n=va(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function YA(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")NL(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ay:return Zp(n.children,s,i,e);case q5:o=8,s|=8;break;case u2:return t=va(12,n,e,s|2),t.elementType=u2,t.lanes=i,t;case d2:return t=va(13,n,e,s),t.elementType=d2,t.lanes=i,t;case h2:return t=va(19,n,e,s),t.elementType=h2,t.lanes=i,t;case gH:return qx(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fH:o=10;break e;case pH:o=9;break e;case V5:o=11;break e;case K5:o=14;break e;case Bd:o=16,r=null;break e}throw Error(Ee(130,t==null?t:typeof t,""))}return e=va(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Zp(t,e,n,r){return t=va(7,t,r,e),t.lanes=n,t}function qx(t,e,n,r){return t=va(22,t,r,e),t.elementType=gH,t.lanes=n,t.stateNode={isHidden:!1},t}function bR(t,e,n){return t=va(6,t,null,e),t.lanes=n,t}function vR(t,e,n){return e=va(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ale(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=eR(0),this.expirationTimes=eR(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eR(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function TL(t,e,n,r,s,i,o,a,c){return t=new Ale(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=va(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},hL(i),t}function Sle(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oy,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function oq(t){if(!t)return af;t=t._reactInternals;e:{if(qg(t)!==t||t.tag!==1)throw Error(Ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(no(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ee(171))}if(t.tag===1){var n=t.type;if(no(n))return oG(t,n,e)}return e}function aq(t,e,n,r,s,i,o,a,c){return t=TL(n,r,!0,t,s,i,o,a,c),t.context=oq(null),n=t.current,r=bi(),s=zh(n),i=Fu(r,s),i.callback=e??null,Fh(n,i,s),t.current.lanes=s,wC(t,s,r),ro(t,r),t}function Vx(t,e,n,r){var s=e.current,i=bi(),o=zh(s);return n=oq(n),e.context===null?e.context=n:e.pendingContext=n,e=Fu(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Fh(s,e,o),t!==null&&(_c(t,s,o,i),WA(t,s,o)),o}function yI(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ZB(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function RL(t,e){ZB(t,e),(t=t.alternate)&&ZB(t,e)}function Ile(){return null}var cq=typeof reportError=="function"?reportError:function(t){console.error(t)};function PL(t){this._internalRoot=t}Kx.prototype.render=PL.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ee(409));Vx(t,e,null,null)};Kx.prototype.unmount=PL.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;gg(function(){Vx(null,t,null,null)}),e[Zu]=null}};function Kx(t){this._internalRoot=t}Kx.prototype.unstable_scheduleHydration=function(t){if(t){var e=BH();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Gd.length&&e!==0&&e<Gd[n].priority;n++);Gd.splice(n,0,t),n===0&&jH(t)}};function OL(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function XB(){}function xle(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=yI(o);i.call(l)}}var o=aq(e,r,t,0,null,!1,!1,"",XB);return t._reactRootContainer=o,t[Zu]=o.current,xE(t.nodeType===8?t.parentNode:t),gg(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=yI(c);a.call(l)}}var c=TL(t,0,!1,null,null,!1,!1,"",XB);return t._reactRootContainer=c,t[Zu]=c.current,xE(t.nodeType===8?t.parentNode:t),gg(function(){Vx(e,c,n,r)}),c}function Qx(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=yI(o);a.call(c)}}Vx(e,o,t,s)}else o=xle(n,e,t,s,r);return yI(o)}UH=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ov(e.pendingLanes);n!==0&&(J5(e,n|1),ro(e,xr()),!(rn&6)&&(r0=xr()+500,Ef()))}break;case 13:gg(function(){var r=Xu(t,1);if(r!==null){var s=bi();_c(r,t,1,s)}}),RL(t,1)}};Z5=function(t){if(t.tag===13){var e=Xu(t,134217728);if(e!==null){var n=bi();_c(e,t,134217728,n)}RL(t,134217728)}};$H=function(t){if(t.tag===13){var e=zh(t),n=Xu(t,e);if(n!==null){var r=bi();_c(n,t,e,r)}RL(t,e)}};BH=function(){return An};FH=function(t,e){var n=An;try{return An=t,e()}finally{An=n}};_2=function(t,e,n){switch(e){case"input":if(g2(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Fx(r);if(!s)throw Error(Ee(90));yH(r),g2(r,s)}}}break;case"textarea":bH(t,n);break;case"select":e=n.value,e!=null&&Py(t,!!n.multiple,e,!1)}};IH=SL;xH=gg;var Nle={usingClientEntryPoint:!1,Events:[vC,dy,Fx,AH,SH,SL]},Rb={findFiberByHostInstance:ap,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Tle={bundleType:Rb.bundleType,version:Rb.version,rendererPackageName:Rb.rendererPackageName,rendererConfig:Rb.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ld.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=RH(t),t===null?null:t.stateNode},findFiberByHostInstance:Rb.findFiberByHostInstance||Ile,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var U1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!U1.isDisabled&&U1.supportsFiber)try{Mx=U1.inject(Tle),Al=U1}catch{}}jo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nle;jo.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!OL(e))throw Error(Ee(200));return Sle(t,e,null,n)};jo.createRoot=function(t,e){if(!OL(t))throw Error(Ee(299));var n=!1,r="",s=cq;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=TL(t,1,!1,null,null,n,!1,r,s),t[Zu]=e.current,xE(t.nodeType===8?t.parentNode:t),new PL(e)};jo.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ee(188)):(t=Object.keys(t).join(","),Error(Ee(268,t)));return t=RH(e),t=t===null?null:t.stateNode,t};jo.flushSync=function(t){return gg(t)};jo.hydrate=function(t,e,n){if(!Yx(e))throw Error(Ee(200));return Qx(null,t,e,!0,n)};jo.hydrateRoot=function(t,e,n){if(!OL(t))throw Error(Ee(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=cq;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=aq(e,null,t,1,n??null,s,!1,i,o),t[Zu]=e.current,xE(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Kx(e)};jo.render=function(t,e,n){if(!Yx(e))throw Error(Ee(200));return Qx(null,t,e,!1,n)};jo.unmountComponentAtNode=function(t){if(!Yx(t))throw Error(Ee(40));return t._reactRootContainer?(gg(function(){Qx(null,null,t,!1,function(){t._reactRootContainer=null,t[Zu]=null})}),!0):!1};jo.unstable_batchedUpdates=SL;jo.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Yx(n))throw Error(Ee(200));if(t==null||t._reactInternals===void 0)throw Error(Ee(38));return Qx(t,e,n,!1,r)};jo.version="18.3.1-next-f1338f8080-20240426";function lq(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lq)}catch(t){console.error(t)}}lq(),lH.exports=jo;var kL=lH.exports,e6=kL;c2.createRoot=e6.createRoot,c2.hydrateRoot=e6.hydrateRoot;const uq="2.31.7";let Pb={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${uq}`},ge=class tk extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof tk?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof tk&&n.cause.docsPath||n.docsPath,i=(a=Pb.getDocsUrl)==null?void 0:a.call(Pb,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Pb.version?[`Version: ${Pb.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=uq}walk(e){return dq(this,e)}};function dq(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?dq(t.cause,e):e?null:t}let hq=class extends ge{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class Rle extends ge{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class Ple extends ge{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let Ole=class extends ge{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}},fq=class extends ge{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},pq=class extends ge{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class t6 extends ge{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function q0(t,{dir:e,size:n=32}={}){return typeof t=="string"?Hh(t,{dir:e,size:n}):kle(t,{dir:e,size:n})}function Hh(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new pq({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function kle(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new pq({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}function kl(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Er(t){return kl(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function Il(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const Dle=new TextEncoder;function V0(t,e={}){return typeof t=="number"||typeof t=="bigint"?Mle(t,e):typeof t=="boolean"?Lle(t,e):kl(t)?Sa(t,e):Xp(t,e)}function Lle(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Ra(n,{size:e.size}),q0(n,{size:e.size})):n}const Kl={zero:48,nine:57,A:65,F:70,a:97,f:102};function n6(t){if(t>=Kl.zero&&t<=Kl.nine)return t-Kl.zero;if(t>=Kl.A&&t<=Kl.F)return t-(Kl.A-10);if(t>=Kl.a&&t<=Kl.f)return t-(Kl.a-10)}function Sa(t,e={}){let n=t;e.size&&(Ra(n,{size:e.size}),n=q0(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=n6(r.charCodeAt(a++)),l=n6(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new ge(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function Mle(t,e){const n=nt(t,e);return Sa(n)}function Xp(t,e={}){const n=Dle.encode(t);return typeof e.size=="number"?(Ra(n,{size:e.size}),q0(n,{dir:"right",size:e.size})):n}function Ra(t,{size:e}){if(Er(t)>e)throw new Ole({givenSize:Er(t),maxSize:e})}function Bo(t,e={}){const{signed:n}=e;e.size&&Ra(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Ule(t,e={}){let n=t;if(e.size&&(Ra(n,{size:e.size}),n=Il(n)),Il(n)==="0x00")return!1;if(Il(n)==="0x01")return!0;throw new Ple(n)}function Ic(t,e={}){return Number(Bo(t,e))}function gq(t,e={}){let n=Sa(t);return e.size&&(Ra(n,{size:e.size}),n=Il(n,{dir:"right"})),new TextDecoder().decode(n)}const $le=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ia(t,e={}){return typeof t=="number"||typeof t=="bigint"?nt(t,e):typeof t=="string"?s0(t,e):typeof t=="boolean"?mq(t,e):Jr(t,e)}function mq(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Ra(n,{size:e.size}),q0(n,{size:e.size})):n}function Jr(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=$le[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Ra(r,{size:e.size}),q0(r,{dir:"right",size:e.size})):r}function nt(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new hq({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?q0(a,{size:r}):a}const Ble=new TextEncoder;function s0(t,e={}){const n=Ble.encode(t);return Jr(n,e)}async function Fle(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:nt(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function xc(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new Xle(t.type);return`${t.name}(${Jx(t.inputs,{includeName:e})})`}function Jx(t,{includeName:e=!1}={}){return t?t.map(n=>jle(n,{includeName:e})).join(e?", ":","):""}function jle(t,{includeName:e}){return t.type.startsWith("tuple")?`(${Jx(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class zle extends ge{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class r6 extends ge{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class yq extends ge{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${Jx(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class _C extends ge{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class Wle extends ge{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class Hle extends ge{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Er(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class Gle extends ge{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class qle extends ge{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class s6 extends ge{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class wq extends ge{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class Vle extends ge{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class bq extends ge{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class i6 extends ge{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class i0 extends ge{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class vq extends ge{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class Kle extends ge{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class Yle extends ge{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${xc(e.abiItem)}\`, and`,`\`${n.type}\` in \`${xc(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let Qle=class extends ge{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class ME extends ge{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${Jx(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class Zx extends ge{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${xc(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class Jle extends ge{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class Zle extends ge{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let Eq=class extends ge{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class Xle extends ge{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function xa(t){return typeof t[0]=="string"?K0(t):eue(t)}function eue(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function K0(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}let cf=class extends ge{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},Xx=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const $1=BigInt(2**32-1),o6=BigInt(32);function tue(t,e=!1){return e?{h:Number(t&$1),l:Number(t>>o6&$1)}:{h:Number(t>>o6&$1)|0,l:Number(t&$1)|0}}function nue(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=tue(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const rue=(t,e,n)=>t<<n|e>>>32-n,sue=(t,e,n)=>e<<n|t>>>32-n,iue=(t,e,n)=>e<<n-32|t>>>64-n,oue=(t,e,n)=>t<<n-32|e>>>64-n,vm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function DL(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function UE(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Nc(t,...e){if(!DL(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function aue(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");UE(t.outputLen),UE(t.blockLen)}function o0(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function _q(t,e){Nc(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function cue(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function a0(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function ER(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function $c(t,e){return t<<32-e|t>>>e}const lue=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function uue(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function due(t){for(let e=0;e<t.length;e++)t[e]=uue(t[e]);return t}const a6=lue?t=>t:due,Cq=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",hue=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function $E(t){if(Nc(t),Cq)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=hue[t[n]];return e}const Yl={_0:48,_9:57,A:65,F:70,a:97,f:102};function c6(t){if(t>=Yl._0&&t<=Yl._9)return t-Yl._0;if(t>=Yl.A&&t<=Yl.F)return t-(Yl.A-10);if(t>=Yl.a&&t<=Yl.f)return t-(Yl.a-10)}function LL(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(Cq)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=c6(t.charCodeAt(i)),a=c6(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function fue(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function CC(t){return typeof t=="string"&&(t=fue(t)),Nc(t),t}function up(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Nc(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let ML=class{};function Aq(t){const e=r=>t().update(CC(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function pue(t){const e=(r,s)=>t(s).update(CC(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function gue(t=32){if(vm&&typeof vm.getRandomValues=="function")return vm.getRandomValues(new Uint8Array(t));if(vm&&typeof vm.randomBytes=="function")return Uint8Array.from(vm.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const mue=BigInt(0),Ob=BigInt(1),yue=BigInt(2),wue=BigInt(7),bue=BigInt(256),vue=BigInt(113),Sq=[],Iq=[],xq=[];for(let t=0,e=Ob,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Sq.push(2*(5*r+n)),Iq.push((t+1)*(t+2)/2%64);let s=mue;for(let i=0;i<7;i++)e=(e<<Ob^(e>>wue)*vue)%bue,e&yue&&(s^=Ob<<(Ob<<BigInt(i))-Ob);xq.push(s)}const Nq=nue(xq,!0),Eue=Nq[0],_ue=Nq[1],l6=(t,e,n)=>n>32?iue(t,e,n):rue(t,e,n),u6=(t,e,n)=>n>32?oue(t,e,n):sue(t,e,n);function Tq(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=l6(l,u,1)^n[a],h=u6(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Iq[o],c=l6(s,i,a),l=u6(s,i,a),u=Sq[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Eue[r],t[1]^=_ue[r]}a0(n)}let UL=class Rq extends ML{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,UE(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=cue(this.state)}clone(){return this._cloneInto()}keccak(){a6(this.state32),Tq(this.state32,this.rounds),a6(this.state32),this.posOut=0,this.pos=0}update(e){o0(this),e=CC(e),Nc(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){o0(this,!1),Nc(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return UE(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(_q(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,a0(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Rq(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const _f=(t,e,n)=>Aq(()=>new UL(e,t,n)),Cue=_f(6,144,224/8),Aue=_f(6,136,256/8),Sue=_f(6,104,384/8),Iue=_f(6,72,512/8),xue=_f(1,144,224/8),$L=_f(1,136,256/8),Nue=_f(1,104,384/8),Tue=_f(1,72,512/8),Pq=(t,e,n)=>pue((r={})=>new UL(e,t,r.dkLen===void 0?n:r.dkLen,!0)),Rue=Pq(31,168,128/8),Pue=Pq(31,136,256/8),HGe=Object.freeze(Object.defineProperty({__proto__:null,Keccak:UL,keccakP:Tq,keccak_224:xue,keccak_256:$L,keccak_384:Nue,keccak_512:Tue,sha3_224:Cue,sha3_256:Aue,sha3_384:Sue,sha3_512:Iue,shake128:Rue,shake256:Pue},Symbol.toStringTag,{value:"Module"}));function Ts(t,e){const n=e||"hex",r=$L(kl(t,{strict:!1})?V0(t):t);return n==="bytes"?r:Ia(r)}const _R=new Xx(8192);function AC(t,e){if(_R.has(`${t}.${e}`))return _R.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=Ts(Xp(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return _R.set(`${t}.${e}`,i),i}function Mu(t,e){if(!Na(t,{strict:!1}))throw new cf({address:t});return AC(t,e)}const Oue=/^0x[a-fA-F0-9]{40}$/,CR=new Xx(8192);function Na(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(CR.has(r))return CR.get(r);const s=Oue.test(t)?t.toLowerCase()===t?!0:n?AC(t)===t:!0:!1;return CR.set(r,s),s}function c0(t,e,n,{strict:r}={}){return kl(t,{strict:!1})?wI(t,e,n,{strict:r}):Dq(t,e,n,{strict:r})}function Oq(t,e){if(typeof e=="number"&&e>0&&e>Er(t)-1)throw new fq({offset:e,position:"start",size:Er(t)})}function kq(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Er(t)!==n-e)throw new fq({offset:n,position:"end",size:Er(t)})}function Dq(t,e,n,{strict:r}={}){Oq(t,e);const s=t.slice(e,n);return r&&kq(s,e,n),s}function wI(t,e,n,{strict:r}={}){Oq(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&kq(s,e,n),s}const kue=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Lq=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Cf(t,e){if(t.length!==e.length)throw new Gle({expectedLength:t.length,givenLength:e.length});const n=Due({params:t,values:e}),r=FL(n);return r.length===0?"0x":r}function Due({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(BL({param:t[r],value:e[r]}));return n}function BL({param:t,value:e}){const n=jL(t.type);if(n){const[r,s]=n;return Mue(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return jue(e,{param:t});if(t.type==="address")return Lue(e);if(t.type==="bool")return $ue(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=Lq.exec(t.type)??[];return Bue(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return Uue(e,{param:t});if(t.type==="string")return Fue(e);throw new Jle(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function FL(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Er(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(nt(e+s,{size:32})),r.push(a),s+=Er(a)):n.push(a)}return xa([...n,...r])}function Lue(t){if(!Na(t))throw new cf({address:t});return{dynamic:!1,encoded:Hh(t.toLowerCase())}}function Mue(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new Eq(t);if(!r&&t.length!==e)throw new Wle({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=BL({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=FL(i);if(r){const a=nt(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?xa([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:xa(i.map(({encoded:o})=>o))}}function Uue(t,{param:e}){const[,n]=e.type.split("bytes"),r=Er(t);if(!n){let s=t;return r%32!==0&&(s=Hh(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:xa([Hh(nt(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new Hle({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:Hh(t,{dir:"right"})}}function $ue(t){if(typeof t!="boolean")throw new ge(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Hh(mq(t))}}function Bue(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new hq({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:nt(t,{size:32,signed:e})}}function Fue(t){const e=s0(t),n=Math.ceil(Er(e)/32),r=[];for(let s=0;s<n;s++)r.push(Hh(c0(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:xa([Hh(nt(Er(e),{size:32})),...r])}}function jue(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=BL({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?FL(r):xa(r.map(({encoded:s})=>s))}}function jL(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const AR="/docs/contract/encodeDeployData";function eN(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new zle({docsPath:AR});if(!("inputs"in s))throw new r6({docsPath:AR});if(!s.inputs||s.inputs.length===0)throw new r6({docsPath:AR});const i=Cf(s.inputs,n);return K0([r,i])}function Cr(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class Vg extends ge{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class QA extends ge{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function zue(t){const e=Ts(`0x${t.substring(4)}`).substring(26);return AC(`0x${e}`)}const Wue="modulepreload",Hue=function(t){return"/"+t},d6={},Ks=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=Hue(c),c in d6)return;d6[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":Wue,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function Gue({hash:t,signature:e}){const n=kl(t)?t:Ia(t),{secp256k1:r}=await Ks(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>cme);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=h6(f);return new r.Signature(Bo(l),Bo(u)).addRecoveryBit(p)}const o=kl(e)?e:Ia(e);if(Er(o)!==65)throw new Error("invalid signature length");const a=Ic(`0x${o.slice(130)}`),c=h6(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function h6(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function Mq({hash:t,signature:e}){return zue(await Gue({hash:t,signature:e}))}class f6 extends ge{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class Uq extends ge{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class que extends ge{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const Vue={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new que({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new Uq({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new f6({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new f6({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function zL(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(Vue);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function Kue(t,e="hex"){const n=$q(t),r=zL(new Uint8Array(n.length));return n.encode(r),e==="hex"?Jr(r.bytes):r.bytes}function $q(t){return Array.isArray(t)?Yue(t.map(e=>$q(e))):Que(t)}function Yue(t){const e=t.reduce((s,i)=>s+i.length,0),n=Bq(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function Que(t){const e=typeof t=="string"?Sa(t):t,n=Bq(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function Bq(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new ge("Length is too large.")}function Jue(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=Ts(K0(["0x05",Kue([e?nt(e):"0x",s,n?nt(n):"0x"])]));return r==="bytes"?Sa(i):i}async function Fq(t){const{authorization:e,signature:n}=t;return Mq({hash:Jue(e),signature:n??e})}class nk extends ge{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class Zue extends ge{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class Xue extends ge{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class jq extends ge{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function zq({chain:t,currentChainId:e}){if(!t)throw new Xue;if(e!==t.id)throw new Zue({chain:t,currentChainId:e})}const ede={gwei:9,wei:18},tde={ether:-9,wei:9},nde={ether:-18,gwei:-9};function Kg(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function so(t,e="wei"){return Kg(t,tde[e])}class dp extends ge{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(dp,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(dp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class bI extends ge{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${so(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(bI,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class rk extends ge{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${so(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(rk,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class sk extends ge{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(sk,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class ik extends ge{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(ik,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class ok extends ge{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(ok,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class ak extends ge{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(ak,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class ck extends ge{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(ck,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class lk extends ge{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(lk,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class uk extends ge{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(uk,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class vI extends ge{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${so(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${so(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(vI,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class SC extends ge{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function WL(t,e="wei"){return Kg(t,ede[e])}function IC(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class rde extends ge{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class sde extends ge{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",IC(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class ide extends ge{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=IC({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${WL(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${so(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${so(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${so(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Wq extends ge{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class Hq extends ge{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class ode extends ge{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const Yr=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),ade=t=>t,HL=t=>t;class zv extends ge{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${HL(o)}`,e&&`Request body: ${Yr(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class GL extends ge{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${HL(r)}`,`Request body: ${Yr(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class p6 extends ge{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${HL(n)}`,`Request body: ${Yr(e)}`],name:"TimeoutError"})}}const cde=-1;class uo extends ge{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof GL?e.code:n??cde}}class Wo extends uo{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class BE extends uo{constructor(e){super(e,{code:BE.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(BE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class FE extends uo{constructor(e){super(e,{code:FE.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(FE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class jE extends uo{constructor(e,{method:n}={}){super(e,{code:jE.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(jE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class zE extends uo{constructor(e){super(e,{code:zE.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(zE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class mg extends uo{constructor(e){super(e,{code:mg.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(mg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class yg extends uo{constructor(e){super(e,{code:yg.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(yg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class WE extends uo{constructor(e){super(e,{code:WE.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(WE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Gh extends uo{constructor(e){super(e,{code:Gh.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Gh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class l0 extends uo{constructor(e){super(e,{code:l0.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(l0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class hp extends uo{constructor(e,{method:n}={}){super(e,{code:hp.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(hp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class u0 extends uo{constructor(e){super(e,{code:u0.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(u0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class HE extends uo{constructor(e){super(e,{code:HE.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(HE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class jr extends Wo{constructor(e){super(e,{code:jr.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(jr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class GE extends Wo{constructor(e){super(e,{code:GE.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(GE,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class qE extends Wo{constructor(e,{method:n}={}){super(e,{code:qE.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(qE,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class VE extends Wo{constructor(e){super(e,{code:VE.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(VE,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class KE extends Wo{constructor(e){super(e,{code:KE.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(KE,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Dl extends Wo{constructor(e){super(e,{code:Dl.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Dl,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class d0 extends Wo{constructor(e){super(e,{code:d0.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(d0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class YE extends Wo{constructor(e){super(e,{code:YE.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(YE,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class QE extends Wo{constructor(e){super(e,{code:QE.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(QE,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class JE extends Wo{constructor(e){super(e,{code:JE.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(JE,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class ZE extends Wo{constructor(e){super(e,{code:ZE.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(ZE,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class XE extends Wo{constructor(e){super(e,{code:XE.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(XE,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class h0 extends Wo{constructor(e){super(e,{code:h0.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(h0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class lde extends uo{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function tN(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof ge?t.walk(s=>(s==null?void 0:s.code)===dp.code):t;return r instanceof ge?new dp({cause:t,message:r.details}):dp.nodeMessage.test(n)?new dp({cause:t,message:t.details}):bI.nodeMessage.test(n)?new bI({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):rk.nodeMessage.test(n)?new rk({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):sk.nodeMessage.test(n)?new sk({cause:t,nonce:e==null?void 0:e.nonce}):ik.nodeMessage.test(n)?new ik({cause:t,nonce:e==null?void 0:e.nonce}):ok.nodeMessage.test(n)?new ok({cause:t,nonce:e==null?void 0:e.nonce}):ak.nodeMessage.test(n)?new ak({cause:t}):ck.nodeMessage.test(n)?new ck({cause:t,gas:e==null?void 0:e.gas}):lk.nodeMessage.test(n)?new lk({cause:t,gas:e==null?void 0:e.gas}):uk.nodeMessage.test(n)?new uk({cause:t}):vI.nodeMessage.test(n)?new vI({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new SC({cause:t})}function Gq(t,{docsPath:e,...n}){const r=(()=>{const s=tN(t,n);return s instanceof SC?t:s})();return new ide(r,{docsPath:e,...n})}function nN(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const ude={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Y0(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=dde(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>Jr(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=nt(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=nt(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=nt(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=nt(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=nt(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=nt(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=ude[t.type]),typeof t.value<"u"&&(e.value=nt(t.value)),e}function dde(t){return t.map(e=>({address:e.address,r:e.r?nt(BigInt(e.r)):e.r,s:e.s?nt(BigInt(e.s)):e.s,chainId:nt(e.chainId),nonce:nt(e.nonce),...typeof e.yParity<"u"?{yParity:nt(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:nt(e.v)}:{}}))}function lt(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const hde=2n**256n-1n;function Yg(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?Cr(e):void 0;if(o&&!Na(o.address))throw new cf({address:o.address});if(i&&!Na(i))throw new cf({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new rde;if(r&&r>hde)throw new bI({maxFeePerGas:r});if(s&&r&&s>r)throw new vI({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function Q0(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return Ic(e)}class fde extends ge{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class qL extends ge{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class pde extends ge{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${so(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class qq extends ge{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const Vq={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Kq(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Ic(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Ic(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?Vq[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=gde(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function gde(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function Yq(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:Kq(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function _l(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?nt(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new qq({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||Yq)(c)}async function VL(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function mde(t,e){return Qq(t,e)}async function Qq(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await lt(t,_l,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return Bo(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):lt(t,_l,"getBlock")({}),lt(t,VL,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new qL;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function yde(t,e){return dk(t,e)}async function dk(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new fde;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await lt(t,_l,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new qL;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await Qq(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await lt(t,VL,"getGasPrice")({}))}}class wde extends ge{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=IC({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${WL(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${so(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${so(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${so(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function bde(t,{docsPath:e,...n}){const r=(()=>{const s=tN(t,n);return s instanceof SC?t:s})();return new wde(r,{docsPath:e,...n})}class vde extends ge{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class Ede extends ge{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function g6(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function _de(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=g6(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=g6(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function m6(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new t6({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new t6({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function Cde(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=nt(e)),n!==void 0&&(o.nonce=nt(n)),r!==void 0&&(o.state=m6(r)),s!==void 0){if(o.state)throw new Ede;o.stateDiff=m6(s)}return o}function KL(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Na(n,{strict:!1}))throw new cf({address:n});if(e[n])throw new vde({address:n});e[n]=Cde(r)}return e}async function YL(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?nt(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function rN(t,e){var s,i,o;const{account:n=t.account}=e,r=n?Cr(n):void 0;try{let W=function(N){const{block:M,request:P,rpcStateOverride:L}=N;return t.request({method:"eth_estimateGas",params:L?[P,M??"latest",L]:M?[P,M]:[P]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:w,nonce:v,value:A,stateOverride:C,...S}=await xC(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),T=(typeof d=="bigint"?nt(d):void 0)||h,I=KL(C),k=await(async()=>{if(S.to)return S.to;if(c&&c.length>0)return await Fq({authorization:c[0]}).catch(()=>{throw new ge("`to` is required. Could not infer from `authorizationList`")})})();Yg(e);const O=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,G=(O||Y0)({...nN(S,{format:O}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:w,nonce:v,to:k,value:A});let R=BigInt(await W({block:T,request:G,rpcStateOverride:I}));if(c){const N=await YL(t,{address:G.from}),M=await Promise.all(c.map(async P=>{const{address:L}=P,F=await W({block:T,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:L,value:nt(N)},rpcStateOverride:I}).catch(()=>100000n);return 2n*BigInt(F)}));R+=M.reduce((P,L)=>P+L,0n)}return R}catch(a){throw bde(a,{...e,account:r,chain:t.chain})}}async function QL(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?nt(r):n]},{dedupe:!!r});return Ic(s)}function Jq(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>Sa(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>Jr(i))}function Zq(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>Sa(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>Sa(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>Jr(o))}function Ade(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function Sde(t,e,n){return t&e^~t&n}function Ide(t,e,n){return t&e^t&n^e&n}class xde extends ML{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=ER(this.buffer)}update(e){o0(this),e=CC(e),Nc(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=ER(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){o0(this),_q(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,a0(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Ade(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=ER(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const md=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Nde=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),yd=new Uint32Array(64);let Tde=class extends xde{constructor(e=32){super(64,e,8,!1),this.A=md[0]|0,this.B=md[1]|0,this.C=md[2]|0,this.D=md[3]|0,this.E=md[4]|0,this.F=md[5]|0,this.G=md[6]|0,this.H=md[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)yd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=yd[d-15],f=yd[d-2],p=$c(h,7)^$c(h,18)^h>>>3,g=$c(f,17)^$c(f,19)^f>>>10;yd[d]=g+yd[d-7]+p+yd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=$c(a,6)^$c(a,11)^$c(a,25),f=u+h+Sde(a,c,l)+Nde[d]+yd[d]|0,g=($c(r,2)^$c(r,13)^$c(r,22))+Ide(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){a0(yd)}destroy(){this.set(0,0,0,0,0,0,0,0),a0(this.buffer)}};const Xq=Aq(()=>new Tde),Rde=Xq;function Pde(t,e){return Rde(kl(t,{strict:!1})?V0(t):t)}function Ode(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=Pde(e);return s.set([n],0),r==="bytes"?s:Jr(s)}function kde(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(Ode({commitment:i,to:r,version:n}));return s}const y6=6,eV=32,JL=4096,tV=eV*JL,w6=tV*y6-1-1*JL*y6;class Dde extends ge{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class Lde extends ge{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function Mde(t){const e=typeof t.data=="string"?Sa(t.data):t.data,n=Er(e);if(!n)throw new Lde;if(n>w6)throw new Dde({maxSize:w6,size:n});const r=[];let s=!0,i=0;for(;s;){const o=zL(new Uint8Array(tV));let a=0;for(;a<JL;){const c=e.slice(i,i+(eV-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>Jr(o.bytes))}function Ude(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??Mde({data:e}),i=t.commitments??Jq({blobs:s,kzg:n,to:r}),o=t.proofs??Zq({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function $de(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new sde({transaction:t})}const nV=["blobVersionedHashes","chainId","fees","gas","nonce","type"],b6=new Map;async function xC(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=nV,type:u}=e,d=n&&Cr(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await lt(t,_l,"getBlock")({blockTag:"latest"}),f)}let g;async function y(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await lt(t,Q0,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const m=await y();h.nonce=await c.consume({address:d.address,chainId:m,client:t})}else h.nonce=await lt(t,QL,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const m=Jq({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const w=kde({commitments:m,to:"hex"});h.blobVersionedHashes=w}if(l.includes("sidecars")){const w=Zq({blobs:r,commitments:m,kzg:o}),v=Ude({blobs:r,commitments:m,proofs:w,to:"hex"});h.sidecars=v}}if(l.includes("chainId")&&(h.chainId=await y()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=$de(h)}catch{let m=b6.get(t.uid);if(typeof m>"u"){const w=await p();m=typeof(w==null?void 0:w.baseFeePerGas)=="bigint",b6.set(t.uid,m)}h.type=m?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const m=await p(),{maxFeePerGas:w,maxPriorityFeePerGas:v}=await dk(t,{block:m,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<v)throw new pde({maxPriorityFeePerGas:v});h.maxPriorityFeePerGas=v,h.maxFeePerGas=w}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new qL;if(typeof e.gasPrice>"u"){const m=await p(),{gasPrice:w}=await dk(t,{block:m,chain:s,request:h,type:"legacy"});h.gasPrice=w}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await lt(t,rN,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),Yg(h),delete h.parameters,h}async function ZL(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const SR=new Xx(128);async function NC(t,e){var w,v,A,C;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...y}=e;if(typeof n>"u")throw new Vg({docsPath:"/docs/actions/wallet/sendTransaction"});const m=n?Cr(n):null;try{Yg(e);const S=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await Fq({authorization:i[0]}).catch(()=>{throw new ge("`to` is required. Could not infer from `authorizationList`.")})})();if((m==null?void 0:m.type)==="json-rpc"||m===null){let x;r!==null&&(x=await lt(t,Q0,"getChainId")({}),zq({currentChainId:x,chain:r}));const T=(A=(v=(w=t.chain)==null?void 0:w.formatters)==null?void 0:v.transactionRequest)==null?void 0:A.format,k=(T||Y0)({...nN(y,{format:T}),accessList:s,authorizationList:i,blobs:o,chainId:x,data:a,from:m==null?void 0:m.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:S,type:p,value:g}),O=SR.get(t.uid),B=O?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:B,params:[k]},{retryCount:0})}catch(G){if(O===!1)throw G;const W=G;if(W.name==="InvalidInputRpcError"||W.name==="InvalidParamsRpcError"||W.name==="MethodNotFoundRpcError"||W.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[k]},{retryCount:0}).then(R=>(SR.set(t.uid,!0),R)).catch(R=>{const N=R;throw N.name==="MethodNotFoundRpcError"||N.name==="MethodNotSupportedRpcError"?(SR.set(t.uid,!1),W):N});throw W}}if((m==null?void 0:m.type)==="local"){const x=await lt(t,xC,"prepareTransactionRequest")({account:m,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:m.nonceManager,parameters:[...nV,"sidecars"],type:p,value:g,...y,to:S}),T=(C=r==null?void 0:r.serializers)==null?void 0:C.transaction,I=await m.signTransaction(x,{serializer:T});return await lt(t,ZL,"sendRawTransaction")({serializedTransaction:I})}throw(m==null?void 0:m.type)==="smart"?new QA({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new QA({docsPath:"/docs/actions/wallet/sendTransaction",type:m==null?void 0:m.type})}catch(S){throw S instanceof QA?S:Gq(S,{...e,account:m,chain:e.chain||void 0})}}function Bde(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=eN({abi:n,args:r,bytecode:s});return NC(t,{...i,...i.authorizationList?{to:null}:{},data:o})}const hk=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],fk=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],rV=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],sV=[...rV,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],Fde=[...rV,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],v6=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],E6=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],_6=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}];function jde(t,e={}){typeof e.size<"u"&&Ra(t,{size:e.size});const n=Jr(t,e);return Bo(n,e)}function zde(t,e={}){let n=t;if(typeof e.size<"u"&&(Ra(n,{size:e.size}),n=Il(n)),n.length>1||n[0]>1)throw new Rle(n);return!!n[0]}function ju(t,e={}){typeof e.size<"u"&&Ra(t,{size:e.size});const n=Jr(t,e);return Ic(n,e)}function Wde(t,e={}){let n=t;return typeof e.size<"u"&&(Ra(n,{size:e.size}),n=Il(n,{dir:"right"})),new TextDecoder().decode(n)}function TC(t,e){const n=typeof e=="string"?Sa(e):e,r=zL(n);if(Er(n)===0&&t.length>0)throw new _C;if(Er(e)&&Er(e)<32)throw new yq({data:typeof e=="string"?e:Jr(e),params:t,size:Er(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=Uy(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function Uy(t,e,{staticPosition:n}){const r=jL(e.type);if(r){const[s,i]=r;return Gde(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return Yde(t,e,{staticPosition:n});if(e.type==="address")return Hde(t);if(e.type==="bool")return qde(t);if(e.type.startsWith("bytes"))return Vde(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return Kde(t,e);if(e.type==="string")return Qde(t,{staticPosition:n});throw new Zle(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const C6=32,pk=32;function Hde(t){const e=t.readBytes(32);return[AC(Jr(Dq(e,-20))),32]}function Gde(t,e,{length:n,staticPosition:r}){if(!n){const o=ju(t.readBytes(pk)),a=r+o,c=a+C6;t.setPosition(a);const l=ju(t.readBytes(C6)),u=e_(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=Uy(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(e_(e)){const o=ju(t.readBytes(pk)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=Uy(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=Uy(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function qde(t){return[zde(t.readBytes(32),{size:32}),32]}function Vde(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=ju(t.readBytes(32));t.setPosition(n+o);const a=ju(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[Jr(c),32]}return[Jr(t.readBytes(Number.parseInt(s),32)),32]}function Kde(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?jde(s,{signed:n}):ju(s,{signed:n}),32]}function Yde(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(e_(e)){const o=ju(t.readBytes(pk)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=Uy(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=Uy(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function Qde(t,{staticPosition:e}){const n=ju(t.readBytes(32)),r=e+n;t.setPosition(r);const s=ju(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=Wde(Il(i));return t.setPosition(e+32),[o,32]}function e_(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(e_);const n=jL(t.type);return!!(n&&e_({...t,type:n[1]}))}const Jde=t=>Ts(V0(t));function Zde(t){return Jde(t)}const Xde="1.0.8";let Ho=class gk extends Error{constructor(e,n={}){var o;const r=n.cause instanceof gk?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof gk&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${Xde}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function ud(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const iV=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,oV=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,aV=/^\(.+?\).*?$/,A6=/^tuple(?<array>(\[(\d*)\])*)$/;function mk(t){let e=t.type;if(A6.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=mk(i),s<n-1&&(e+=", ")}const r=ud(A6,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,mk({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function kb(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=mk(s),r!==n-1&&(e+=", ")}return e}function EI(t){var e;return t.type==="function"?`function ${t.name}(${kb(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${kb(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${kb(t.inputs)})`:t.type==="error"?`error ${t.name}(${kb(t.inputs)})`:t.type==="constructor"?`constructor(${kb(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const cV=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function ehe(t){return cV.test(t)}function the(t){return ud(cV,t)}const lV=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function nhe(t){return lV.test(t)}function rhe(t){return ud(lV,t)}const uV=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function she(t){return uV.test(t)}function ihe(t){return ud(uV,t)}const dV=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function XL(t){return dV.test(t)}function ohe(t){return ud(dV,t)}const hV=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function ahe(t){return hV.test(t)}function che(t){return ud(hV,t)}const fV=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function lhe(t){return fV.test(t)}function uhe(t){return ud(fV,t)}const dhe=/^receive\(\) external payable$/;function hhe(t){return dhe.test(t)}const fhe=new Set(["indexed"]),yk=new Set(["calldata","memory","storage"]);class phe extends Ho{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class ghe extends Ho{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class mhe extends Ho{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class yhe extends Ho{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class whe extends Ho{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class bhe extends Ho{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class vhe extends Ho{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class Ehe extends Ho{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class J0 extends Ho{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class _he extends Ho{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class Che extends Ho{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class Ahe extends Ho{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class She extends Ho{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function Ihe(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const IR=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function wk(t,e={}){if(she(t))return xhe(t,e);if(nhe(t))return Nhe(t,e);if(ehe(t))return The(t,e);if(ahe(t))return Rhe(t,e);if(lhe(t))return Phe(t);if(hhe(t))return{type:"receive",stateMutability:"payable"};throw new _he({signature:t})}function xhe(t,e={}){const n=ihe(t);if(!n)throw new J0({signature:t,type:"function"});const r=fc(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(wg(r[a],{modifiers:yk,structs:e,type:"function"}));const o=[];if(n.returns){const a=fc(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(wg(a[l],{modifiers:yk,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function Nhe(t,e={}){const n=rhe(t);if(!n)throw new J0({signature:t,type:"event"});const r=fc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(wg(r[o],{modifiers:fhe,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function The(t,e={}){const n=the(t);if(!n)throw new J0({signature:t,type:"error"});const r=fc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(wg(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function Rhe(t,e={}){const n=che(t);if(!n)throw new J0({signature:t,type:"constructor"});const r=fc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(wg(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function Phe(t){const e=uhe(t);if(!e)throw new J0({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const Ohe=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,khe=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Dhe=/^u?int$/;function wg(t,e){var d,h;const n=Ihe(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(IR.has(n))return IR.get(n);const r=aV.test(t),s=ud(r?khe:Ohe,t);if(!s)throw new yhe({param:t});if(s.name&&Mhe(s.name))throw new whe({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=fc(s.type),p=[],g=f.length;for(let y=0;y<g;y++)p.push(wg(f[y],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(Dhe.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!pV(c))throw new mhe({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new bhe({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(yk.has(s.modifier)&&!Uhe(c,!!s.array))throw new vhe({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return IR.set(n,u),u}function fc(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?fc(a,[...e,n.trim()]):fc(a,e,`${n}${o}`,r);case"(":return fc(a,e,`${n}${o}`,r+1);case")":return fc(a,e,`${n}${o}`,r-1);default:return fc(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new She({current:n,depth:r});return e.push(n.trim()),e}function pV(t){return t==="address"||t==="bool"||t==="function"||t==="string"||iV.test(t)||oV.test(t)}const Lhe=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function Mhe(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||iV.test(t)||oV.test(t)||Lhe.test(t)}function Uhe(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function gV(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!XL(a))continue;const c=ohe(a);if(!c)throw new J0({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=wg(p,{type:"struct"});u.push(g)}if(!u.length)throw new Che({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=mV(c,e)}return r}const $he=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function mV(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(aV.test(o.type))r.push(o);else{const c=ud($he,o.type);if(!(c!=null&&c.type))throw new Ehe({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new Ahe({type:u});r.push({...o,type:`tuple${l??""}`,components:mV(e[u]??[],e,new Set([...n,u]))})}else if(pV(u))r.push(o);else throw new ghe({type:u})}}return r}function yV(t){const e=gV(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];XL(i)||n.push(wk(i,e))}return n}function S6(t){let e;if(typeof t=="string")e=wk(t);else{const n=gV(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!XL(i)){e=wk(i,n);break}}}if(!e)throw new phe({signature:t});return e}function Bhe(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new ge("Unable to normalize signature.");return s}const Fhe=t=>{const e=typeof t=="string"?t:EI(t);return Bhe(e)};function wV(t){return Zde(Fhe(t))}const sN=wV,RC=t=>c0(wV(t),0,4);function Qg(t){const{abi:e,args:n=[],name:r}=t,s=kl(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?RC(a)===r:a.type==="event"?sN(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?bk(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=bV(a.inputs,o.inputs,n);if(l)throw new Yle({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function bk(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Na(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>bk(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>bk(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function bV(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return bV(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Na(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Na(n[r],{strict:!1}):!1)return o}}const xR="/docs/contract/decodeFunctionResult";function Jg(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=Qg({abi:e,args:n,name:r});if(!a)throw new i0(r,{docsPath:xR});i=a}if(i.type!=="function")throw new i0(void 0,{docsPath:xR});if(!i.outputs)throw new vq(i.name,{docsPath:xR});const o=TC(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const I6="/docs/contract/encodeFunctionData";function jhe(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=Qg({abi:e,args:n,name:r});if(!i)throw new i0(r,{docsPath:I6});s=i}if(s.type!=="function")throw new i0(void 0,{docsPath:I6});return{abi:[s],functionName:RC(xc(s))}}function Pa(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:jhe(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?Cf(s.inputs,e??[]):void 0;return K0([i,o??"0x"])}function Z0({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new nk({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new nk({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const vV={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},EV={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},zhe={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function Whe(t){const{abi:e,data:n}=t,r=c0(n,0,4);if(r==="0x")throw new _C;const i=[...e||[],EV,zhe].find(o=>o.type==="error"&&r===RC(xc(o)));if(!i)throw new wq(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?TC(i.inputs,c0(n,4)):void 0,errorName:i.name}}function _V({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?Yr(e[i]):e[i]}`).join(", ")})`}class CV extends ge{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var y;const p=n?Cr(n):void 0;let g=IC({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${WL(h)} ${((y=s==null?void 0:s.nativeCurrency)==null?void 0:y.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${so(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${so(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${so(l)} gwei`,nonce:u});f&&(g+=`
${_de(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class AV extends ge{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=Qg({abi:n,args:r,name:o}),l=c?_V({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?xc(c,{includeName:!0}):void 0,d=IC({address:s&&ade(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class vk extends ge{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=Whe({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=vV[f]}else{const f=u?xc(u,{includeName:!0}):void 0,p=u&&h?_V({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof wq&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class Hhe extends ge{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class Ghe extends ge{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class iN extends ge{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function eM(t,e){var r,s,i,o,a,c;if(!(t instanceof ge))return!1;const n=t.walk(l=>l instanceof vk);return n instanceof vk?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&n.reason===vV[50]):!1}function qhe(t){const{abi:e,data:n}=t,r=c0(n,0,4),s=e.find(i=>i.type==="function"&&r===RC(xc(i)));if(!s)throw new Kle(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?TC(s.inputs,c0(n,4)):void 0}}const NR="/docs/contract/encodeErrorResult";function x6(t){const{abi:e,errorName:n,args:r}=t;let s=e[0];if(n){const c=Qg({abi:e,args:r,name:n});if(!c)throw new s6(n,{docsPath:NR});s=c}if(s.type!=="error")throw new s6(void 0,{docsPath:NR});const i=xc(s),o=RC(i);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new qle(s.name,{docsPath:NR});a=Cf(s.inputs,r)}return K0([o,a])}const TR="/docs/contract/encodeFunctionResult";function Vhe(t){const{abi:e,functionName:n,result:r}=t;let s=e[0];if(n){const o=Qg({abi:e,name:n});if(!o)throw new i0(n,{docsPath:TR});s=o}if(s.type!=="function")throw new i0(void 0,{docsPath:TR});if(!s.outputs)throw new vq(s.name,{docsPath:TR});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new Eq(r)})();return Cf(s.outputs,i)}const tM="x-batch-gateway:true";async function Khe(t){const{data:e,ccipRequest:n}=t,{args:[r]}=qhe({abi:fk,data:e}),s=[],i=[];return await Promise.all(r.map(async(o,a)=>{try{i[a]=o.urls.includes(tM)?await Khe({data:o.data,ccipRequest:n}):await n(o),s[a]=!1}catch(c){s[a]=!0,i[a]=Yhe(c)}})),Vhe({abi:fk,functionName:"query",result:[s,i]})}function Yhe(t){return t.name==="HttpRequestError"&&t.status?x6({abi:fk,errorName:"HttpError",args:[t.status,t.shortMessage]}):x6({abi:[EV],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function SV(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return kl(e)?e:null}function JA(t){let e=new Uint8Array(32).fill(0);if(!t)return Jr(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=SV(n[r]),i=s?V0(s):Ts(Xp(n[r]),"bytes");e=Ts(xa([e,i]),"bytes")}return Jr(e)}function Qhe(t){return`[${t.slice(2)}]`}function Jhe(t){const e=new Uint8Array(32).fill(0);return t?SV(t)||Ts(Xp(t)):Jr(e)}function oN(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(Xp(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=Xp(s[i]);o.byteLength>255&&(o=Xp(Qhe(Jhe(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const Zhe=3;function bg(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof iN?t:t instanceof ge?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof _C?new Hhe({functionName:i}):[Zhe,mg.code].includes(c)&&(l||u||d||h)?new vk({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof GL?u:h??d}):t;return new AV(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nM=BigInt(0),Ek=BigInt(1);function _I(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function B1(t){const e=t.toString(16);return e.length&1?"0"+e:e}function IV(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?nM:BigInt("0x"+t)}function aN(t){return IV($E(t))}function xV(t){return Nc(t),IV($E(Uint8Array.from(t).reverse()))}function rM(t,e){return LL(t.toString(16).padStart(e*2,"0"))}function NV(t,e){return rM(t,e).reverse()}function ca(t,e,n){let r;if(typeof e=="string")try{r=LL(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(DL(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const RR=t=>typeof t=="bigint"&&nM<=t;function Xhe(t,e,n){return RR(t)&&RR(e)&&RR(n)&&e<=t&&t<n}function efe(t,e,n,r){if(!Xhe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function tfe(t){let e;for(e=0;t>nM;t>>=Ek,e+=1);return e}const cN=t=>(Ek<<BigInt(t))-Ek;function nfe(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...f)=>n(o,i,...f),u=(f=r(0))=>{o=l(s(0),f),i=l(),f.length!==0&&(o=l(s(1),f),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){i=l();const g=i.slice();p.push(g),f+=i.length}return up(...p)};return(f,p)=>{c(),u(f);let g;for(;!(g=p(d()));)u();return c(),g}}function sM(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function N6(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const rfe="0.1.1";function sfe(){return rfe}let Pr=class _k extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof _k){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof _k&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${sfe()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return TV(this,e)}};function TV(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?TV(t.cause,e):e?null:t}const ife="#__bigint";function ofe(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+ife:s,n)}function afe(t,e){if(R6(t)>e)throw new yfe({givenSize:R6(t),maxSize:e})}const Ql={zero:48,nine:57,A:65,F:70,a:97,f:102};function T6(t){if(t>=Ql.zero&&t<=Ql.nine)return t-Ql.zero;if(t>=Ql.A&&t<=Ql.F)return t-(Ql.A-10);if(t>=Ql.a&&t<=Ql.f)return t-(Ql.a-10)}function cfe(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new wfe({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function iM(t,e){if(Ta(t)>e)throw new Cfe({givenSize:Ta(t),maxSize:e})}function lfe(t,e){if(typeof e=="number"&&e>0&&e>Ta(t)-1)throw new DV({offset:e,position:"start",size:Ta(t)})}function ufe(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Ta(t)!==n-e)throw new DV({offset:n,position:"end",size:Ta(t)})}function RV(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new Afe({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const dfe=new TextEncoder;function hfe(t){return t instanceof Uint8Array?t:typeof t=="string"?pfe(t):ffe(t)}function ffe(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function pfe(t,e={}){const{size:n}=e;let r=t;n&&(iM(t,n),r=Eg(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const l=T6(s.charCodeAt(c++)),u=T6(s.charCodeAt(c++));if(l===void 0||u===void 0)throw new Pr(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=l*16+u}return o}function gfe(t,e={}){const{size:n}=e,r=dfe.encode(t);return typeof n=="number"?(afe(r,n),mfe(r,n)):r}function mfe(t,e){return cfe(t,{dir:"right",size:e})}function R6(t){return t.length}let yfe=class extends Pr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},wfe=class extends Pr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const bfe=new TextEncoder,vfe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Efe(t,e={}){const{strict:n=!1}=e;if(!t)throw new P6(t);if(typeof t!="string")throw new P6(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new O6(t);if(!t.startsWith("0x"))throw new O6(t)}function Ll(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function PV(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(iM(n,e.size),vg(n,e.size)):n}function OV(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=vfe[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(iM(r,e.size),Eg(r,e.size)):r}function di(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new kV({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?vg(c,r):c}function oM(t,e={}){return OV(bfe.encode(t),e)}function vg(t,e){return RV(t,{dir:"left",size:e})}function Eg(t,e){return RV(t,{dir:"right",size:e})}function aM(t,e,n,r={}){const{strict:s}=r;lfe(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&ufe(i,e,n),i}function Ta(t){return Math.ceil((t.length-2)/2)}function _fe(t,e={}){const{strict:n=!1}=e;try{return Efe(t,{strict:n}),!0}catch{return!1}}let kV=class extends Pr{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class P6 extends Pr{constructor(e){super(`Value \`${typeof e=="object"?ofe(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class O6 extends Pr{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let Cfe=class extends Pr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class DV extends Pr{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let Afe=class extends Pr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function Sfe(t){return{address:t.address,amount:di(t.amount),index:di(t.index),validatorIndex:di(t.validatorIndex)}}function LV(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:di(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:di(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:di(t.gasLimit)},...typeof t.number=="bigint"&&{number:di(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:di(t.prevRandao)},...typeof t.time=="bigint"&&{time:di(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(Sfe)}}}const Ife="0x82ad56cb",MV="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",xfe="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",Nfe="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";function UV(t,{docsPath:e,...n}){const r=(()=>{const s=tN(t,n);return s instanceof SC?t:s})();return new CV(r,{docsPath:e,...n})}function cM(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const PR=new Map;function $V({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>PR.delete(e),a=()=>c().map(({args:u})=>u),c=()=>PR.get(e)||[],l=u=>PR.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=cM();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function PC(t,e){var G,W,R,N;const{account:n=t.account,authorizationList:r,batch:s=!!((G=t.batch)!=null&&G.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:w,nonce:v,to:A,value:C,stateOverride:S,...x}=e,T=n?Cr(n):void 0;if(u&&(h||f))throw new ge("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&A)throw new ge("Cannot provide both `code` & `to` as parameters.");const I=u&&d,k=h&&f&&A&&d,O=I||k,B=I?Pfe({code:u,data:d}):k?Ofe({data:d,factory:h,factoryData:f,to:A}):d;try{Yg(e);const P=(typeof i=="bigint"?nt(i):void 0)||o,L=l?LV(l):void 0,F=KL(S),q=(N=(R=(W=t.chain)==null?void 0:W.formatters)==null?void 0:R.transactionRequest)==null?void 0:N.format,le=(q||Y0)({...nN(x,{format:q}),from:T==null?void 0:T.address,accessList:a,authorizationList:r,blobs:c,data:B,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:w,nonce:v,to:O?void 0:A,value:C});if(s&&Tfe({request:le})&&!F&&!L)try{return await Rfe(t,{...le,blockNumber:i,blockTag:o})}catch(ye){if(!(ye instanceof jq)&&!(ye instanceof nk))throw ye}const ie=(()=>{const ye=[le,P];return F&&L?[...ye,F,L]:F?[...ye,F]:L?[...ye,{},L]:ye})(),re=await t.request({method:"eth_call",params:ie});return re==="0x"?{data:void 0}:{data:re}}catch(M){const P=kfe(M),{offchainLookup:L,offchainLookupSignature:F}=await Ks(async()=>{const{offchainLookup:q,offchainLookupSignature:ne}=await import("./ccip-BRWin7dY.js");return{offchainLookup:q,offchainLookupSignature:ne}},[]);if(t.ccipRead!==!1&&(P==null?void 0:P.slice(0,10))===F&&A)return{data:await L(t,{data:P,to:A})};throw O&&(P==null?void 0:P.slice(0,10))==="0x101bb98d"?new Ghe({factory:h}):UV(M,{...e,account:T,chain:t.chain})}}function Tfe({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(Ife)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function Rfe(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new jq;l=Z0({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?nt(s):void 0)||i,{schedule:h}=$V({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(y){return y.reduce((w,{data:v})=>w+(v.length-2),0)>n*2},fn:async y=>{const m=y.map(A=>({allowFailure:!0,callData:A.data,target:A.to})),w=Pa({abi:hk,args:[m],functionName:"aggregate3"}),v=await t.request({method:"eth_call",params:[{data:w,to:l},d]});return Jg({abi:hk,args:[m],functionName:"aggregate3",data:v||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new iN({data:f});return f==="0x"?{data:void 0}:{data:f}}function Pfe(t){const{code:e,data:n}=t;return eN({abi:yV(["constructor(bytes, bytes)"]),bytecode:MV,args:[e,n]})}function Ofe(t){const{data:e,factory:n,factoryData:r,to:s}=t;return eN({abi:yV(["constructor(address, bytes, address, bytes)"]),bytecode:xfe,args:[s,e,n,r]})}function kfe(t){var n;if(!(t instanceof ge))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function Ml(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=Pa({abi:n,args:s,functionName:i});try{const{data:c}=await lt(t,PC,"call")({...o,data:a,to:r});return Jg({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw bg(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function Dfe(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Z0({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d=Pa({abi:E6,functionName:"addr",...s!=null?{args:[JA(i),BigInt(s)]}:{args:[JA(i)]}}),h={address:l,abi:sV,functionName:"resolve",args:[Ia(oN(i)),d,o??[tM]],blockNumber:n,blockTag:r},p=await lt(t,Ml,"readContract")(h);if(p[0]==="0x")return null;const g=Jg({abi:E6,args:s!=null?[JA(i),BigInt(s)]:void 0,functionName:"addr",data:p[0]});return g==="0x"||Il(g)==="0x00"?null:g}catch(d){if(a)throw d;if(eM(d,"resolve"))return null;throw d}}class Lfe extends ge{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class Db extends ge{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class lM extends ge{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class Mfe extends ge{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const Ufe=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,$fe=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Bfe=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,Ffe=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function jfe(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function k6(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function BV({uri:t,gatewayUrls:e}){const n=Bfe.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=k6(e==null?void 0:e.ipfs,"https://ipfs.io"),s=k6(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match(Ufe),{protocol:o,subpath:a,target:c,subtarget:l=""}=(i==null?void 0:i.groups)||{},u=o==="ipns:/"||a==="ipns/",d=o==="ipfs:/"||a==="ipfs/"||$fe.test(t);if(t.startsWith("http")&&!u&&!d){let f=t;return e!=null&&e.arweave&&(f=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:f,isOnChain:!1,isEncoded:!1}}if((u||d)&&c)return{uri:`${r}/${u?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${s}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let h=t.replace(Ffe,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new lM({uri:t})}function FV(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new Lfe({data:t});return t.image||t.image_url||t.image_data}async function zfe({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await uM({gatewayUrls:t,uri:FV(n)})}catch{throw new lM({uri:e})}}async function uM({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=BV({uri:e,gatewayUrls:t});if(r||await jfe(n))return n;throw new lM({uri:e})}function Wfe(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,o]=n.split(":"),[a,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new Db({reason:"Only EIP-155 supported"});if(!o)throw new Db({reason:"Chain ID not found"});if(!c)throw new Db({reason:"Contract address not found"});if(!s)throw new Db({reason:"Token ID not found"});if(!a)throw new Db({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function Hfe(t,{nft:e}){if(e.namespace==="erc721")return Ml(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return Ml(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new Mfe({namespace:e.namespace})}async function Gfe(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?qfe(t,{gatewayUrls:e,record:n}):uM({uri:n,gatewayUrls:e})}async function qfe(t,{gatewayUrls:e,record:n}){const r=Wfe(n),s=await Hfe(t,{nft:r}),{uri:i,isOnChain:o,isEncoded:a}=BV({uri:s,gatewayUrls:e});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const l=a?atob(i.replace("data:application/json;base64,","")):i,u=JSON.parse(l);return uM({uri:FV(u),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),zfe({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function jV(t,e){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Z0({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d={address:l,abi:sV,functionName:"resolve",args:[Ia(oN(i)),Pa({abi:v6,functionName:"text",args:[JA(i),s]}),o??[tM]],blockNumber:n,blockTag:r},f=await lt(t,Ml,"readContract")(d);if(f[0]==="0x")return null;const p=Jg({abi:v6,functionName:"text",data:f[0]});return p===""?null:p}catch(d){if(a)throw d;if(eM(d,"resolve"))return null;throw d}}async function Vfe(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:o,universalResolverAddress:a}){const c=await lt(t,jV,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:i,strict:o});if(!c)return null;try{return await Gfe(t,{record:c,gatewayUrls:r})}catch{return null}}async function zV(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=Z0({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:Fde,functionName:"reverse",args:[Ia(oN(c))],blockNumber:n,blockTag:r},u=lt(t,Ml,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(eM(l,"reverse"))return null;throw l}}async function Kfe(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:i}=t,o=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return Z0({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),a=i==null?void 0:i.ensTlds;if(a&&!a.some(l=>s.endsWith(l)))throw new Error(`${s} is not a valid ENS TLD (${a==null?void 0:a.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await lt(t,Ml,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Ia(oN(s))],blockNumber:n,blockTag:r});return c}async function WV(t,e){var y,m,w;const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f,...p}=e,g=n?Cr(n):void 0;try{Yg(e);const A=(typeof r=="bigint"?nt(r):void 0)||s,C=(w=(m=(y=t.chain)==null?void 0:y.formatters)==null?void 0:m.transactionRequest)==null?void 0:w.format,x=(C||Y0)({...nN(p,{format:C}),from:g==null?void 0:g.address,blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f}),T=await t.request({method:"eth_createAccessList",params:[x,A]});return{accessList:T.accessList,gasUsed:BigInt(T.gasUsed)}}catch(v){throw UV(v,{...e,account:g,chain:t.chain})}}function lN(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function Yfe(t){const e=lN(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}class Qfe extends ge{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const D6="/docs/contract/encodeEventTopics";function OC(t){var c;const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const l=Qg({abi:e,name:n});if(!l)throw new i6(n,{docsPath:D6});s=l}if(s.type!=="event")throw new i6(void 0,{docsPath:D6});const i=xc(s),o=sN(i);let a=[];if(r&&"inputs"in s){const l=(c=s.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?(l==null?void 0:l.map(d=>r[d.name]))??[]:[];u.length>0&&(a=(l==null?void 0:l.map((d,h)=>Array.isArray(u[h])?u[h].map((f,p)=>L6({param:d,value:u[h][p]})):typeof u[h]<"u"&&u[h]!==null?L6({param:d,value:u[h]}):null))??[])}return[o,...a]}function L6({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return Ts(V0(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new Qfe(t.type);return Cf([t],[e])}async function HV(t,e){const{address:n,abi:r,args:s,eventName:i,fromBlock:o,strict:a,toBlock:c}=e,l=lN(t,{method:"eth_newFilter"}),u=i?OC({abi:r,args:s,eventName:i}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?nt(o):o,toBlock:typeof c=="bigint"?nt(c):c,topics:u}]});return{abi:r,args:s,eventName:i,id:d,request:l(d),strict:!!a,type:"event"}}async function GV(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:o,toBlock:a}={}){const c=s??(r?[r]:void 0),l=lN(t,{method:"eth_newFilter"});let u=[];c&&(u=[c.flatMap(f=>OC({abi:[f],eventName:f.name,args:n}))],r&&(u=u[0]));const d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?nt(i):i,toBlock:typeof a=="bigint"?nt(a):a,...u.length?{topics:u}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:l(d),strict:!!o,toBlock:a,type:"event"}}async function qV(t){const e=lN(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function Jfe(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:o,...a}=e,c=Pa({abi:n,args:s,functionName:i});try{return await lt(t,rN,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...a})}catch(l){const u=a.account?Cr(a.account):void 0;throw bg(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:u==null?void 0:u.address})}}async function Zfe(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}const Xfe=new Map,epe=new Map;function tpe(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,Xfe),r=e(t,epe);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function npe(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=tpe(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const rpe=t=>`blockNumber.${t}`;async function kC(t,{cacheTime:e=t.cacheTime}={}){const n=await npe(()=>t.request({method:"eth_blockNumber"}),{cacheKey:rpe(t.uid),cacheTime:e});return BigInt(n)}async function spe(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?nt(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),Ic(i)}async function M6(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?nt(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(i!=="0x")return i}function uN(t,e){if(!Na(t,{strict:!1}))throw new cf({address:t});if(!Na(e,{strict:!1}))throw new cf({address:e});return t.toLowerCase()===e.toLowerCase()}const U6="/docs/contract/decodeEventLog";function dM(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new Vle({docsPath:U6});const c=e.find(g=>g.type==="event"&&o===sN(xc(g)));if(!(c&&"name"in c)||c.type!=="event")throw new bq(o,{docsPath:U6});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,y)=>[g,y]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[y,m]=f[g],w=a[g];if(!w)throw new Zx({abiItem:c,param:y});h[d?m:y.name||m]=ipe({param:y,value:w})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=TC(p,n);if(g)if(d)for(let y=0;y<u.length;y++)h[y]=h[y]??g.shift();else for(let y=0;y<p.length;y++)h[p[y].name]=g[y]}catch(g){if(i)throw g instanceof yq||g instanceof Uq?new ME({abiItem:c,data:n,params:p,size:Er(n)}):g}else if(i)throw new ME({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function ipe({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(TC([t],e)||[])[0]}function hM(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===sN(u));if(!c)return null;const l=dM({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!ope({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof bq)return null;if(c instanceof ME||c instanceof Zx){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function ope(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?uN(o,a):i.type==="string"||i.type==="bytes"?Ts(V0(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function td(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function fM(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:o,args:a,strict:c}={}){const l=c??!1,u=o??(i?[i]:void 0);let d=[];u&&(d=[u.flatMap(g=>OC({abi:[g],eventName:g.name,args:o?void 0:a}))],i&&(d=d[0]));let h;n?h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:n}]}):h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof r=="bigint"?nt(r):r,toBlock:typeof s=="bigint"?nt(s):s}]});const f=h.map(p=>td(p));return u?hM({abi:u,args:a,logs:f,strict:l}):f}async function VV(t,e){const{abi:n,address:r,args:s,blockHash:i,eventName:o,fromBlock:a,toBlock:c,strict:l}=e,u=o?Qg({abi:n,name:o}):void 0,d=u?void 0:n.filter(h=>h.type==="event");return lt(t,fM,"getLogs")({address:r,args:s,blockHash:i,event:u,events:d,fromBlock:a,toBlock:c,strict:l})}class ape extends ge{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function cpe(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[i,o,a,c,l,u,d]=await lt(t,Ml,"readContract")({abi:lpe,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:a,chainId:Number(c),verifyingContract:l,salt:u},extensions:d,fields:i}}catch(i){const o=i;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new ape({address:n}):o}}const lpe=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function upe(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function dpe(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?nt(n):void 0,o=await t.request({method:"eth_feeHistory",params:[nt(e),i||r,s]},{dedupe:!!i});return upe(o)}async function dN(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>td(i));return!("abi"in e)||!e.abi?s:hM({abi:e.abi,logs:s,strict:n})}async function hpe(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>td(i));return e.abi?hM({abi:e.abi,logs:s,strict:n}):s}async function fpe(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?nt(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function hN(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?nt(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,nt(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,nt(i)]},{dedupe:!!a}),!c)throw new Wq({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||Kq)(c)}async function ppe(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([lt(t,kC,"getBlockNumber")({}),e?lt(t,hN,"getTransaction")({hash:e}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}const KV={"0x0":"reverted","0x1":"success"};function gpe(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>td(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Ic(t.transactionIndex):null,status:t.status?KV[t.status]:null,type:t.type?Vq[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}async function Ck(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new Hq({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||gpe)(n)}async function YV(t,e){var m;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((m=t.batch)==null?void 0:m.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=Z0({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let w=0;w<l.length;w++){const{abi:v,address:A,args:C,functionName:S}=l[w];try{const x=Pa({abi:v,args:C,functionName:S});p+=(x.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(x.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:x,target:A}]}catch(x){const T=bg(x,{abi:v,address:A,args:C,docsPath:"/docs/contract/multicall",functionName:S,sender:n});if(!r)throw T;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:A}]}}const g=await Promise.allSettled(h.map(w=>lt(t,Ml,"readContract")({abi:hk,account:n,address:d,args:[w],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),y=[];for(let w=0;w<g.length;w++){const v=g[w];if(v.status==="rejected"){if(!r)throw v.reason;for(let C=0;C<h[w].length;C++)y.push({status:"failure",error:v.reason,result:void 0});continue}const A=v.value;for(let C=0;C<A.length;C++){const{returnData:S,success:x}=A[C],{callData:T}=h[w][C],{abi:I,address:k,functionName:O,args:B}=l[y.length];try{if(T==="0x")throw new _C;if(!x)throw new iN({data:S});const G=Jg({abi:I,args:B,data:S,functionName:O});y.push(r?{result:G,status:"success"}:G)}catch(G){const W=bg(G,{abi:I,address:k,args:B,docsPath:"/docs/contract/multicall",functionName:O});if(!r)throw W;y.push({error:W,result:void 0,status:"failure"})}}}if(y.length!==l.length)throw new ge("multicall results mismatch");return y}async function Ak(t,e){const{blockNumber:n,blockTag:r="latest",blocks:s,returnFullTransactions:i,traceTransfers:o,validation:a}=e;try{const c=[];for(const h of s){const f=h.blockOverrides?LV(h.blockOverrides):void 0,p=h.calls.map(y=>{const m=y,w=m.account?Cr(m.account):void 0,v=m.abi?Pa(m):m.data,A={...m,data:m.dataSuffix?xa([v||"0x",m.dataSuffix]):v,from:m.from??(w==null?void 0:w.address)};return Yg(A),Y0(A)}),g=h.stateOverrides?KL(h.stateOverrides):void 0;c.push({blockOverrides:f,calls:p,stateOverrides:g})}const u=(typeof n=="bigint"?nt(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:o,validation:a},u]})).map((h,f)=>({...Yq(h),calls:h.calls.map((p,g)=>{var k,O;const{abi:y,args:m,functionName:w,to:v}=s[f].calls[g],A=((k=p.error)==null?void 0:k.data)??p.returnData,C=BigInt(p.gasUsed),S=(O=p.logs)==null?void 0:O.map(B=>td(B)),x=p.status==="0x1"?"success":"failure",T=y&&x==="success"&&A!=="0x"?Jg({abi:y,data:A,functionName:w}):null,I=(()=>{var G;if(x==="success")return;let B;if(((G=p.error)==null?void 0:G.data)==="0x"?B=new _C:p.error&&(B=new iN(p.error)),!!B)return bg(B,{abi:y??[],address:v??"0x",args:m,functionName:w??"<unknown>"})})();return{data:A,gasUsed:C,logs:S,status:x,...x==="success"?{result:T}:{error:I}}})}))}catch(c){const l=c,u=tN(l,{});throw u instanceof SC?l:u}}function QV(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=$L(hfe(t));return n==="Bytes"?r:OV(r)}let mpe=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const ype={checksum:new mpe(8192)},OR=ype.checksum,wpe=/^0x[a-fA-F0-9]{40}$/;function fN(t,e={}){const{strict:n=!0}=e;if(!wpe.test(t))throw new $6({address:t,cause:new vpe});if(n){if(t.toLowerCase()===t)return;if(bpe(t)!==t)throw new $6({address:t,cause:new Epe})}}function bpe(t){if(OR.has(t))return OR.get(t);fN(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=QV(gfe(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return OR.set(t,s),s}function Sk(t,e={}){const{strict:n=!0}=e??{};try{return fN(t,{strict:n}),!0}catch{return!1}}class $6 extends Pr{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class vpe extends Pr{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class Epe extends Pr{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function Ik(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new Pr("Unable to normalize signature.");return s}function xk(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Sk(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>xk(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>xk(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function JV(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return JV(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Sk(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Sk(n[r],{strict:!1}):!1)return o}}function ZV(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?S6(t):t;return{...r,...n?{hash:wy(r)}:{}}}function _pe(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=_fe(e,{strict:!1}),o=t.filter(l=>i?l.type==="function"||l.type==="error"?XV(l)===aM(e,0,4):l.type==="event"?wy(l)===e:!1:"name"in l&&l.name===e);if(o.length===0)throw new Nk({name:e});if(o.length===1)return{...o[0],...s?{hash:wy(o[0])}:{}};let a;for(const l of o){if(!("inputs"in l))continue;if(!r||r.length===0){if(!l.inputs||l.inputs.length===0)return{...l,...s?{hash:wy(l)}:{}};continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==r.length)continue;if(r.every((d,h)=>{const f="inputs"in l&&l.inputs[h];return f?xk(d,f):!1})){if(a&&"inputs"in a&&a.inputs){const d=JV(l.inputs,a.inputs,r);if(d)throw new Ape({abiItem:l,type:d[0]},{abiItem:a,type:d[1]})}a=l}}const c=(()=>{if(a)return a;const[l,...u]=o;return{...l,overloads:u}})();if(!c)throw new Nk({name:e});return{...c,...s?{hash:wy(c)}:{}}}function XV(t){return aM(wy(t),0,4)}function Cpe(t){const e=typeof t=="string"?t:EI(t);return Ik(e)}function wy(t){return typeof t!="string"&&"hash"in t&&t.hash?t.hash:QV(oM(Cpe(t)))}class Ape extends Pr{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${Ik(EI(e.abiItem))}\`, and`,`\`${n.type}\` in \`${Ik(EI(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class Nk extends Pr{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const Spe=/^(.*)\[([0-9]*)\]$/,Ipe=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,eK=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function xpe({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(pM({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function pM({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=Lpe(r.type);if(s){const[i,o]=s;return Tpe(n,{checksumAddress:t,length:i,parameter:{...r,type:o}})}if(r.type==="tuple")return Dpe(n,{checksumAddress:t,parameter:r});if(r.type==="address")return Npe(n,{checksum:t});if(r.type==="bool")return Ppe(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,o="256"]=eK.exec(r.type)??[];return Ope(n,{signed:i,size:Number(o)})}if(r.type.startsWith("bytes"))return Rpe(n,{type:r.type});if(r.type==="string")return kpe(n);throw new sK(r.type)}function gM(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Ta(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(di(e+s,{size:32})),r.push(a),s+=Ta(a)):n.push(a)}return Ll(...n,...r)}function Npe(t,e){const{checksum:n=!1}=e;return fN(t,{strict:n}),{dynamic:!1,encoded:vg(t.toLowerCase())}}function Tpe(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new Upe(t);if(!i&&t.length!==r)throw new Mpe({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<t.length;c++){const l=pM({checksumAddress:n,parameter:s,value:t[c]});l.dynamic&&(o=!0),a.push(l)}if(i||o){const c=gM(a);if(i){const l=di(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?Ll(l,c):l}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:Ll(...a.map(({encoded:c})=>c))}}function Rpe(t,{type:e}){const[,n]=e.split("bytes"),r=Ta(t);if(!n){let s=t;return r%32!==0&&(s=Eg(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:Ll(vg(di(r,{size:32})),s)}}if(r!==Number.parseInt(n))throw new nK({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:Eg(t)}}function Ppe(t){if(typeof t!="boolean")throw new Pr(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:vg(PV(t))}}function Ope(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new kV({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:di(t,{size:32,signed:e})}}function kpe(t){const e=oM(t),n=Math.ceil(Ta(e)/32),r=[];for(let s=0;s<n;s++)r.push(Eg(aM(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:Ll(Eg(di(Ta(e),{size:32})),...r)}}function Dpe(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(t)?o:a.name,l=pM({checksumAddress:n,parameter:a,value:t[c]});i.push(l),l.dynamic&&(s=!0)}return{dynamic:s,encoded:s?gM(i):Ll(...i.map(({encoded:o})=>o))}}function Lpe(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function tK(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new rK({expectedLength:t.length,givenLength:e.length});const s=xpe({checksumAddress:r,parameters:t,values:e}),i=gM(s);return i.length===0?"0x":i}function Tk(t,e){if(t.length!==e.length)throw new rK({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(Tk.encode(s,i))}return Ll(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const c=r;return fN(c),vg(c.toLowerCase(),s?32:0)}if(n==="string")return oM(r);if(n==="bytes")return r;if(n==="bool")return vg(PV(r),s?32:1);const i=n.match(eK);if(i){const[c,l,u="256"]=i,d=Number.parseInt(u)/8;return di(r,{size:s?32:d,signed:l==="int"})}const o=n.match(Ipe);if(o){const[c,l]=o;if(Number.parseInt(l)!==(r.length-2)/2)throw new nK({expectedSize:Number.parseInt(l),value:r});return Eg(r,s?32:0)}const a=n.match(Spe);if(a&&Array.isArray(r)){const[c,l]=a,u=[];for(let d=0;d<r.length;d++)u.push(e(l,r[d],!0));return u.length===0?"0x":Ll(...u)}throw new sK(n)}t.encode=e})(Tk||(Tk={}));class Mpe extends Pr{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class nK extends Pr{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Ta(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class rK extends Pr{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class Upe extends Pr{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class sK extends Pr{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function $pe(t,e){var s;const{bytecode:n,args:r}=e;return Ll(n,(s=t.inputs)!=null&&s.length&&(r!=null&&r.length)?tK(t.inputs,r):"0x")}function Bpe(t){return ZV(t)}function Fpe(t,...e){const{overloads:n}=t,r=n?jpe([t,...n],t.name,{args:e[0]}):t,s=zpe(r),i=e.length>0?tK(r.inputs,e[0]):void 0;return i?Ll(s,i):s}function Em(t,e={}){return ZV(t,e)}function jpe(t,e,n){const r=_pe(t,e,n);if(r.type!=="function")throw new Nk({name:e,type:"function"});return r}function zpe(t){return XV(t)}const Wpe="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",Bc="0x0000000000000000000000000000000000000000",F1=new Xx(8192);function Hpe(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(F1.get(n))return F1.get(n);const r=t().finally(()=>F1.delete(n));return F1.set(n,r),r}async function CI(t){return new Promise(e=>setTimeout(e,t))}function AI(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await CI(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function Gpe(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new hp(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new hp(new Error("method not supported"),{method:l});const u=s?s0(`${c}.${Yr(n)}`):void 0;return Hpe(()=>AI(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case BE.code:throw new BE(f);case FE.code:throw new FE(f);case jE.code:throw new jE(f,{method:n.method});case zE.code:throw new zE(f);case mg.code:throw new mg(f);case yg.code:throw new yg(f);case WE.code:throw new WE(f);case Gh.code:throw new Gh(f);case l0.code:throw new l0(f);case hp.code:throw new hp(f,{method:n.method});case u0.code:throw new u0(f);case HE.code:throw new HE(f);case jr.code:throw new jr(f);case GE.code:throw new GE(f);case qE.code:throw new qE(f);case VE.code:throw new VE(f);case KE.code:throw new KE(f);case Dl.code:throw new Dl(f);case d0.code:throw new d0(f);case YE.code:throw new YE(f);case QE.code:throw new QE(f);case JE.code:throw new JE(f);case ZE.code:throw new ZE(f);case XE.code:throw new XE(f);case h0.code:throw new h0(f);case 5e3:throw new jr(f);default:throw h instanceof ge?h:new lde(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof zv){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>qpe(h)}),{enabled:s,id:u})}}function qpe(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===u0.code||t.code===mg.code:t instanceof zv&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function Vpe(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function iK(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function Kpe(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const B6=Kpe();function Ype(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await iK(async({signal:p})=>{const g={...a,body:Array.isArray(r)?Yr(r.map(v=>({jsonrpc:"2.0",id:v.id??B6.take(),...v}))):Yr({jsonrpc:"2.0",id:r.id??B6.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},y=new Request(t,g),m=await(s==null?void 0:s(y,g))??{...g,url:t};return await fetch(m.url??t,m)},{errorInstance:new p6({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new zv({body:r,details:Yr(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof zv||h instanceof p6?h:new zv({body:r,cause:h,url:t})}}}}class Qpe extends ge{constructor({domain:e}){super(`Invalid domain "${Yr(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class Jpe extends ge{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class Zpe extends ge{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function Xpe(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:dK({domain:e}),...t.types};uK({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(ege({domain:e,types:s})),r!=="EIP712Domain"&&i.push(oK({data:n,primaryType:r,types:s})),Ts(xa(i))}function ege({domain:t,types:e}){return oK({data:t,primaryType:"EIP712Domain",types:e})}function oK({data:t,primaryType:e,types:n}){const r=aK({data:t,primaryType:e,types:n});return Ts(r)}function aK({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[tge({primaryType:e,types:n})];for(const i of n[e]){const[o,a]=lK({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(o),s.push(a)}return Cf(r,s)}function tge({primaryType:t,types:e}){const n=Ia(nge({primaryType:t,types:e}));return Ts(n)}function nge({primaryType:t,types:e}){let n="";const r=cK({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function cK({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])cK({primaryType:i.type,types:e},n);return n}function lK({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},Ts(aK({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},Ts(r)];if(n==="string")return[{type:"bytes32"},Ts(Ia(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(o=>lK({name:e,type:s,types:t,value:o}));return[{type:"bytes32"},Ts(Cf(i.map(([o])=>o),i.map(([,o])=>o)))]}return[{type:n},r]}function rge(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return Yr({domain:o,message:a,primaryType:r,types:s})}function uK(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(Lq);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,y,m]=h;nt(d,{signed:y==="int",size:Number.parseInt(m)/8})}if(u==="address"&&typeof d=="string"&&!Na(d))throw new cf({address:d});const f=u.match(kue);if(f){const[g,y]=f;if(y&&Er(d)!==Number.parseInt(y))throw new Qle({expectedSize:Number.parseInt(y),givenSize:Er(d)})}const p=s[u];p&&(sge(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new Qpe({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new Jpe({primaryType:r,types:s})}function dK({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function sge(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new Zpe({type:t})}const ige=`Ethereum Signed Message:
`;function oge(t){const e=typeof t=="string"?s0(t):typeof t.raw=="string"?t.raw:Jr(t.raw),n=s0(`${ige}${Er(e)}`);return xa([n,e])}function hK(t,e){return Ts(oge(t),e)}const fK="0x6492649264926492649264926492649264926492649264926492649264926492";function age(t){return wI(t,-32)===fK}function cge(t){const{address:e,data:n,signature:r,to:s="hex"}=t,i=K0([Cf([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,n,r]),fK]);return s==="hex"?i:Sa(i)}class lge extends ge{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function uge(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new lge({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}const dge="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function hge(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:o,traceTransfers:a,validation:c}=e,l=e.account?Cr(e.account):void 0;if(o&&!l)throw new ge("`account` is required when `traceAssetChanges` is true");const u=l?$pe(Bpe("constructor(bytes, bytes)"),{bytecode:MV,args:[dge,Fpe(Em("function getBalance(address)"),[l.address])]}):void 0,d=o?await Promise.all(e.calls.map(async P=>{if(!P.data&&!P.abi)return;const{accessList:L}=await WV(t,{account:l.address,...P,data:P.abi?Pa(P):P.data});return L.map(({address:F,storageKeys:q})=>q.length>0?F:null)})).then(P=>P.flat().filter(Boolean)):[],h=await Ak(t,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:u}],stateOverrides:i},{calls:d.map((P,L)=>({abi:[Em("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:P,from:Bc,nonce:L})),stateOverrides:[{address:Bc,nonce:0}]}]:[],{calls:[...s,{}].map(P=>({...P,from:l==null?void 0:l.address})),stateOverrides:i},...o?[{calls:[{data:u}]},{calls:d.map((P,L)=>({abi:[Em("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:P,from:Bc,nonce:L})),stateOverrides:[{address:Bc,nonce:0}]},{calls:d.map((P,L)=>({to:P,abi:[Em("function decimals() returns (uint256)")],functionName:"decimals",from:Bc,nonce:L})),stateOverrides:[{address:Bc,nonce:0}]},{calls:d.map((P,L)=>({to:P,abi:[Em("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:Bc,nonce:L})),stateOverrides:[{address:Bc,nonce:0}]},{calls:d.map((P,L)=>({to:P,abi:[Em("function symbol() returns (string)")],functionName:"symbol",from:Bc,nonce:L})),stateOverrides:[{address:Bc,nonce:0}]}]:[]],traceTransfers:a,validation:c}),f=o?h[2]:h[0],[p,g,,y,m,w,v,A]=o?h:[],{calls:C,...S}=f,x=C.slice(0,-1)??[],T=(p==null?void 0:p.calls)??[],I=(g==null?void 0:g.calls)??[],k=[...T,...I].map(P=>P.status==="success"?Bo(P.data):null),O=(y==null?void 0:y.calls)??[],B=(m==null?void 0:m.calls)??[],G=[...O,...B].map(P=>P.status==="success"?Bo(P.data):null),W=((w==null?void 0:w.calls)??[]).map(P=>P.status==="success"?P.result:null),R=((A==null?void 0:A.calls)??[]).map(P=>P.status==="success"?P.result:null),N=((v==null?void 0:v.calls)??[]).map(P=>P.status==="success"?P.result:null),M=[];for(const[P,L]of G.entries()){const F=k[P];if(typeof L!="bigint"||typeof F!="bigint")continue;const q=W[P-1],ne=R[P-1],le=N[P-1],ie=P===0?{address:Wpe,decimals:18,symbol:"ETH"}:{address:d[P-1],decimals:le||q?Number(q??1):void 0,symbol:ne??void 0};M.some(re=>re.token.address===ie.address)||M.push({token:ie,value:{pre:F,post:L,diff:L-F}})}return{assetChanges:M,block:S,results:x}}const kR=new Map,F6=new Map;let fge=0;function nd(t,e,n){const r=++fge,s=()=>kR.get(t)||[],i=()=>{const u=s();kR.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=F6.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(kR.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&F6.set(t,l),o}function X0(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await CI(c);const l=async()=>{s&&(await t({unpoll:i}),await CI(r),l())};l()})(),i}function pge(t,{blockTag:e="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:o,poll:a,pollingInterval:c=t.pollingInterval}){const l=typeof a<"u"?a:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),u=o??!1;let d;return l?(()=>{const p=Yr(["watchBlocks",t.uid,e,n,r,u,c]);return nd(p,{onBlock:s,onError:i},g=>X0(async()=>{var y;try{const m=await lt(t,_l,"getBlock")({blockTag:e,includeTransactions:u});if(m.number!==null&&(d==null?void 0:d.number)!=null){if(m.number===d.number)return;if(m.number-d.number>1&&n)for(let w=(d==null?void 0:d.number)+1n;w<m.number;w++){const v=await lt(t,_l,"getBlock")({blockNumber:w,includeTransactions:u});g.onBlock(v,d),d=v}}((d==null?void 0:d.number)==null||e==="pending"&&(m==null?void 0:m.number)==null||m.number!==null&&m.number>d.number)&&(g.onBlock(m,d),d=m)}catch(m){(y=g.onError)==null||y.call(g,m)}},{emitOnBegin:r,interval:c}))})():(()=>{let p=!0,g=!0,y=()=>p=!1;return(async()=>{try{r&&lt(t,_l,"getBlock")({blockTag:e,includeTransactions:u}).then(v=>{p&&g&&(s(v,void 0),g=!1)}).catch(i);const m=(()=>{if(t.transport.type==="fallback"){const v=t.transport.transports.find(A=>A.config.type==="webSocket"||A.config.type==="ipc");return v?v.value:t.transport}return t.transport})(),{unsubscribe:w}=await m.subscribe({params:["newHeads"],async onData(v){var C;if(!p)return;const A=await lt(t,_l,"getBlock")({blockNumber:(C=v.result)==null?void 0:C.number,includeTransactions:u}).catch(()=>{});p&&(s(A,d),g=!1,d=A)},onError(v){i==null||i(v)}});y=w,p||y()}catch(m){i==null||i(m)}})(),()=>y()})()}function pK(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=Yr(["watchBlockNumber",t.uid,e,n,o]);return nd(d,{onBlockNumber:r,onError:s},h=>X0(async()=>{var f;try{const p=await lt(t,kC,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=Yr(["watchBlockNumber",t.uid,e,n]);return nd(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const m=t.transport.transports.find(w=>w.config.type==="webSocket"||w.config.type==="ipc");return m?m.value:t.transport}return t.transport})(),{unsubscribe:y}=await g.subscribe({params:["newHeads"],onData(m){var v;if(!f)return;const w=Bo((v=m.result)==null?void 0:v.number);h.onBlockNumber(w,c),c=w},onError(m){var w;(w=h.onError)==null||w.call(h,m)}});p=y,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function pN(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function gge(t,{address:e,args:n,batch:r=!0,event:s,events:i,fromBlock:o,onError:a,onLogs:c,poll:l,pollingInterval:u=t.pollingInterval,strict:d}){const h=typeof l<"u"?l:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),f=d??!1;return h?(()=>{const y=Yr(["watchEvent",e,n,r,t.uid,s,u,o]);return nd(y,{onLogs:c,onError:a},m=>{let w;o!==void 0&&(w=o-1n);let v,A=!1;const C=X0(async()=>{var S;if(!A){try{v=await lt(t,GV,"createEventFilter")({address:e,args:n,event:s,events:i,strict:f,fromBlock:o})}catch{}A=!0;return}try{let x;if(v)x=await lt(t,dN,"getFilterChanges")({filter:v});else{const T=await lt(t,kC,"getBlockNumber")({});w&&w!==T?x=await lt(t,fM,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:w+1n,toBlock:T}):x=[],w=T}if(x.length===0)return;if(r)m.onLogs(x);else for(const T of x)m.onLogs([T])}catch(x){v&&x instanceof yg&&(A=!1),(S=m.onError)==null||S.call(m,x)}},{emitOnBegin:!0,interval:u});return async()=>{v&&await lt(t,pN,"uninstallFilter")({filter:v}),C()}})})():(()=>{let y=!0,m=()=>y=!1;return(async()=>{try{const w=(()=>{if(t.transport.type==="fallback"){const S=t.transport.transports.find(x=>x.config.type==="webSocket"||x.config.type==="ipc");return S?S.value:t.transport}return t.transport})(),v=i??(s?[s]:void 0);let A=[];v&&(A=[v.flatMap(x=>OC({abi:[x],eventName:x.name,args:n}))],s&&(A=A[0]));const{unsubscribe:C}=await w.subscribe({params:["logs",{address:e,topics:A}],onData(S){var T;if(!y)return;const x=S.result;try{const{eventName:I,args:k}=dM({abi:v??[],data:x.data,topics:x.topics,strict:f}),O=td(x,{args:k,eventName:I});c([O])}catch(I){let k,O;if(I instanceof ME||I instanceof Zx){if(d)return;k=I.abiItem.name,O=(T=I.abiItem.inputs)==null?void 0:T.some(G=>!("name"in G&&G.name))}const B=td(x,{args:O?[]:{},eventName:k});c([B])}},onError(S){a==null||a(S)}});m=C,y||m()}catch(w){a==null||a(w)}})(),()=>m()})()}function gK(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=Yr(["watchPendingTransactions",t.uid,e,i]);return nd(l,{onTransactions:r,onError:n},u=>{let d;const h=X0(async()=>{var f;try{if(!d)try{d=await lt(t,qV,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await lt(t,dN,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await lt(t,pN,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function mge(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>AC(r))}async function yge(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function wge(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?Cr(n):void 0,i=r?[s==null?void 0:s.address,[nt(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}const mK="0x5792579257925792579257925792579257925792579257925792579257925792",yK=nt(0,{size:32});async function bge(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?Cr(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?Pa({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?xa([p,f.dataSuffix]):p,to:f.to,value:f.value?nt(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:nt(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(w=>!w.optional)){const w="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new d0(new ge(w,{details:w}))}if(a&&d.length>1){const m="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new h0(new ge(m,{details:m}))}const p=[];for(const m of d){const w=NC(t,{account:u,chain:s,data:m.data,to:m.to,value:m.value?Bo(m.value):void 0});p.push(w),o>0&&await new Promise(v=>setTimeout(v,o))}const g=await Promise.allSettled(p);if(g.every(m=>m.status==="rejected"))throw g[0].reason;const y=g.map(m=>m.status==="fulfilled"?m.value:yK);return{id:xa([...y,nt(s.id,{size:32}),mK])}}throw Gq(h,{...e,account:u,chain:e.chain})}}async function wK(t,e){async function n(u){if(u.endsWith(mK.slice(2))){const h=Il(wI(u,-64,-32)),f=wI(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(y=>yK.slice(2)!==y?t.request({method:"eth_getTransactionReceipt",params:[`0x${y}`]},{dedupe:!0}):void 0)),g=p.some(y=>y===null)?100:p.every(y=>(y==null?void 0:y.status)==="0x1")?200:p.every(y=>(y==null?void 0:y.status)==="0x0")?500:600;return{atomic:!1,chainId:Ic(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?Ic(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:Bo(u.blockNumber),gasUsed:Bo(u.gasUsed),status:KV[u.status]})))??[],statusCode:l,status:c,version:o}}async function vge(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function Ege(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=Yr(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=cM();let u;const d=nd(o,{resolve:c,reject:l},h=>{const f=X0(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await wK(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new _ge({id:n}))},i):void 0,await a}class _ge extends ge{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}function Cge(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function Age(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?Ic(t.nonce):void 0,storageProof:t.storageProof?Cge(t.storageProof):void 0}}async function Sge(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",o=n!==void 0?nt(n):void 0,a=await t.request({method:"eth_getProof",params:[e,s,o||i]});return Age(a)}async function bK(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=Yr(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:y,reject:m}=cM(),w=a?setTimeout(()=>{p(),f(),m(new ode({hash:n}))},a):void 0;return f=nd(c,{onReplaced:r,resolve:y,reject:m},v=>{p=lt(t,pK,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(A){const C=x=>{clearTimeout(w),p(),x(),f()};let S=A;if(!h)try{if(d){if(e>1&&(!d.blockNumber||S-d.blockNumber+1n<e))return;C(()=>v.resolve(d));return}if(l||(h=!0,await AI(async()=>{l=await lt(t,hN,"getTransaction")({hash:n}),l.blockNumber&&(S=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await lt(t,Ck,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||S-d.blockNumber+1n<e))return;C(()=>v.resolve(d))}catch(x){if(x instanceof Wq||x instanceof Hq){if(!l){h=!1;return}try{u=l,h=!0;const T=await AI(()=>lt(t,_l,"getBlock")({blockNumber:S,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:O})=>O instanceof qq});h=!1;const I=T.transactions.find(({from:O,nonce:B})=>O===u.from&&B===u.nonce);if(!I||(d=await lt(t,Ck,"getTransactionReceipt")({hash:I.hash}),e>1&&(!d.blockNumber||S-d.blockNumber+1n<e)))return;let k="replaced";I.to===u.to&&I.value===u.value&&I.input===u.input?k="repriced":I.from===I.to&&I.value===0n&&(k="cancelled"),C(()=>{var O;(O=v.onReplaced)==null||O.call(v,{reason:k,replacedTransaction:u,transaction:I,transactionReceipt:d}),v.resolve(d)})}catch(T){C(()=>v.reject(T))}}else C(()=>v.reject(x))}}})}),g}async function Ige(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>Mu(n))}async function xge(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function vK(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new Vg({docsPath:"/docs/eip7702/prepareAuthorization"});const i=Cr(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:Cr(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await lt(t,Q0,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await lt(t,QL,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&uN(o.address,i.address))&&(a.nonce+=1)),a}async function Nge(t,e){const{account:n=t.account}=e;if(!n)throw new Vg({docsPath:"/docs/eip7702/signAuthorization"});const r=Cr(n);if(!r.signAuthorization)throw new QA({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await vK(t,e);return r.signAuthorization(s)}async function Tge(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new Vg({docsPath:"/docs/actions/wallet/signTransaction"});const i=Cr(n);Yg({account:i,...e});const o=await lt(t,Q0,"getChainId")({});r!==null&&zq({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||Y0;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:nt(o),from:i.address}]},{retryCount:0})}async function EK(t,{account:e=t.account,message:n}){if(!e)throw new Vg({docsPath:"/docs/actions/wallet/signMessage"});const r=Cr(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?s0(n):n.raw instanceof Uint8Array?Ia(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function Rge(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new Vg({docsPath:"/docs/actions/wallet/signTypedData"});const o=Cr(n),a={EIP712Domain:dK({domain:r}),...e.types};if(uK({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=rge({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function Pge(t,e){const{abi:n,address:r,args:s,dataSuffix:i,functionName:o,...a}=e,c=a.account?Cr(a.account):t.account,l=Pa({abi:n,args:s,functionName:o});try{const{data:u}=await lt(t,PC,"call")({batch:!1,data:`${l}${i?i.replace("0x",""):""}`,to:r,...a,account:c}),d=Jg({abi:n,args:s,functionName:o,data:u||"0x"}),h=n.filter(f=>"name"in f&&f.name===e.functionName);return{result:d,request:{abi:h,address:r,args:s,dataSuffix:i,functionName:o,...a,account:c}}}catch(u){throw bg(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c==null?void 0:c.address})}}async function Oge(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:nt(e)}]},{retryCount:0})}let _K=class extends ML{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,aue(e);const r=CC(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),a0(i)}update(e){return o0(this),this.iHash.update(e),this}digestInto(e){o0(this),Nc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const CK=(t,e,n)=>new _K(t,e).update(n).digest();CK.create=(t,e)=>new _K(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xi=BigInt(0),vi=BigInt(1),fp=BigInt(2),kge=BigInt(3),AK=BigInt(4),SK=BigInt(5),IK=BigInt(8);function ma(t,e){const n=t%e;return n>=Xi?n:e+n}function Yo(t,e,n){let r=t;for(;e-- >Xi;)r*=r,r%=n;return r}function j6(t,e){if(t===Xi)throw new Error("invert: expected non-zero number");if(e<=Xi)throw new Error("invert: expected positive modulus, got "+e);let n=ma(t,e),r=e,s=Xi,i=vi;for(;n!==Xi;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==vi)throw new Error("invert: does not exist");return ma(s,e)}function xK(t,e){const n=(t.ORDER+vi)/AK,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function Dge(t,e){const n=(t.ORDER-SK)/IK,r=t.mul(e,fp),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,fp),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function Lge(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-vi,n=0;for(;e%fp===Xi;)e/=fp,n++;let r=fp;const s=gN(t);for(;z6(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return xK;let i=s.pow(r,e);const o=(e+vi)/fp;return function(c,l){if(c.is0(l))return l;if(z6(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,i),h=c.pow(l,e),f=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let p=1,g=c.sqr(h);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===u)throw new Error("Cannot find square root");const y=vi<<BigInt(u-p-1),m=c.pow(d,y);u=p,d=c.sqr(m),h=c.mul(h,d),f=c.mul(f,m)}return f}}function Mge(t){return t%AK===kge?xK:t%IK===SK?Dge:Lge(t)}const Uge=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function $ge(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Uge.reduce((r,s)=>(r[s]="function",r),e);return sM(t,n),t}function Bge(t,e,n){if(n<Xi)throw new Error("invalid exponent, negatives unsupported");if(n===Xi)return t.ONE;if(n===vi)return e;let r=t.ONE,s=e;for(;n>Xi;)n&vi&&(r=t.mul(r,s)),s=t.sqr(s),n>>=vi;return r}function NK(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function z6(t,e){const n=(t.ORDER-vi)/fp,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Fge(t,e){e!==void 0&&UE(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function gN(t,e,n=!1,r={}){if(t<=Xi)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=Fge(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:cN(o),ZERO:Xi,ONE:vi,create:u=>ma(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return Xi<=u&&u<t},is0:u=>u===Xi,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&vi)===vi,neg:u=>ma(-u,t),eql:(u,d)=>u===d,sqr:u=>ma(u*u,t),add:(u,d)=>ma(u+d,t),sub:(u,d)=>ma(u-d,t),mul:(u,d)=>ma(u*d,t),pow:(u,d)=>Bge(l,u,d),div:(u,d)=>ma(u*j6(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>j6(u,t),sqrt:i||(u=>(c||(c=Mge(t)),c(l,u))),toBytes:u=>n?NV(u,a):rM(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?xV(u):aN(u)},invertBatch:u=>NK(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function TK(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function RK(t){const e=TK(t);return e+Math.ceil(e/2)}function jge(t,e,n=!1){const r=t.length,s=TK(e),i=RK(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?xV(t):aN(t),a=ma(o,e-vi)+vi;return n?NV(a,s):rM(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const f0=BigInt(0),pp=BigInt(1);function Wv(t,e){const n=e.negate();return t?n:e}function zge(t,e,n){const r=o=>o.pz,s=NK(t.Fp,n.map(r));return n.map((o,a)=>o.toAffine(s[a])).map(t.fromAffine)}function PK(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function DR(t,e){PK(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=cN(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function W6(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=pp);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function Wge(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Hge(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const LR=new WeakMap,OK=new WeakMap;function MR(t){return OK.get(t)||1}function H6(t){if(t!==f0)throw new Error("invalid wNAF")}function Gge(t,e){return{constTimeNegate:Wv,hasPrecomputes(n){return MR(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>f0;)r&pp&&(s=s.add(i)),i=i.double(),r>>=pp;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=DR(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=DR(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=W6(s,c,a);s=l,d?o=o.add(Wv(f,r[p])):i=i.add(Wv(h,r[u]))}return H6(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=DR(n,e);for(let a=0;a<o.windows&&s!==f0;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=W6(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return H6(s),i},getPrecomputes(n,r,s){let i=LR.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),LR.set(r,i))),i},wNAFCached(n,r,s){const i=MR(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=MR(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){PK(r,e),OK.set(n,r),LR.delete(n)}}}function qge(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>f0||r>f0;)n&pp&&(i=i.add(s)),r&pp&&(o=o.add(s)),s=s.double(),n>>=pp,r>>=pp;return{p1:i,p2:o}}function Vge(t,e,n,r){Wge(n,t),Hge(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=tfe(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=cN(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const y=r[g],m=Number(y>>BigInt(f)&l);u[m]=u[m].add(n[g])}let p=o;for(let g=u.length-1,y=o;g>0;g--)y=y.add(u[g]),p=p.add(y);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function G6(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return $ge(e),e}else return gN(t)}function Kge(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>f0))throw new Error(`CURVE.${a} must be positive bigint`)}const r=G6(e.p,n.Fp),s=G6(e.n,n.Fn),o=["Gx","Gy","a","b"];for(const a of o)if(!r.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function q6(t){t.lowS!==void 0&&_I("lowS",t.lowS),t.prehash!==void 0&&_I("prehash",t.prehash)}class Yge extends Error{constructor(e=""){super(e)}}const pu={Err:Yge,_tlv:{encode:(t,e)=>{const{Err:n}=pu;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=B1(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?B1(s.length/2|128):"";return B1(t)+i+s+e},decode(t,e){const{Err:n}=pu;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=pu;if(t<Hv)throw new e("integer: negative integers are not allowed");let n=B1(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=pu;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return aN(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=pu,s=ca("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=pu,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Hv=BigInt(0),Gv=BigInt(1),Qge=BigInt(2),j1=BigInt(3),Jge=BigInt(4);function Zge(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function kK(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=ca("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function Xge(t,e={}){const{Fp:n,Fn:r}=Kge("weierstrass",t,e),{h:s,n:i}=t;sM(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(T,I,k){const{x:O,y:B}=I.toAffine(),G=n.toBytes(O);if(_I("isCompressed",k),k){a();const W=!n.isOdd(B);return up(DK(W),G)}else return up(Uint8Array.of(4),G,n.toBytes(B))}function l(T){Nc(T);const I=n.BYTES,k=I+1,O=2*I+1,B=T.length,G=T[0],W=T.subarray(1);if(B===k&&(G===2||G===3)){const R=n.fromBytes(W);if(!n.isValid(R))throw new Error("bad point: is not on curve, wrong x");const N=h(R);let M;try{M=n.sqrt(N)}catch(F){const q=F instanceof Error?": "+F.message:"";throw new Error("bad point: is not on curve, sqrt error"+q)}a();const P=n.isOdd(M);return(G&1)===1!==P&&(M=n.neg(M)),{x:R,y:M}}else if(B===O&&G===4){const R=n.fromBytes(W.subarray(I*0,I*1)),N=n.fromBytes(W.subarray(I*1,I*2));if(!f(R,N))throw new Error("bad point: is not on curve");return{x:R,y:N}}else throw new Error(`bad point: got length ${B}, expected compressed=${k} or uncompressed=${O}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=Zge(n,t.a,t.b);function f(T,I){const k=n.sqr(I),O=h(T);return n.eql(k,O)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,j1),Jge),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function y(T,I,k=!1){if(!n.isValid(I)||k&&n.is0(I))throw new Error(`bad point coordinate ${T}`);return I}function m(T){if(!(T instanceof C))throw new Error("ProjectivePoint expected")}const w=N6((T,I)=>{const{px:k,py:O,pz:B}=T;if(n.eql(B,n.ONE))return{x:k,y:O};const G=T.is0();I==null&&(I=G?n.ONE:n.inv(B));const W=n.mul(k,I),R=n.mul(O,I),N=n.mul(B,I);if(G)return{x:n.ZERO,y:n.ZERO};if(!n.eql(N,n.ONE))throw new Error("invZ was invalid");return{x:W,y:R}}),v=N6(T=>{if(T.is0()){if(e.allowInfinityPoint&&!n.is0(T.py))return;throw new Error("bad point: ZERO")}const{x:I,y:k}=T.toAffine();if(!n.isValid(I)||!n.isValid(k))throw new Error("bad point: x or y not field elements");if(!f(I,k))throw new Error("bad point: equation left != right");if(!T.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function A(T,I,k,O,B){return k=new C(n.mul(k.px,T),k.py,k.pz),I=Wv(O,I),k=Wv(B,k),I.add(k)}class C{constructor(I,k,O){this.px=y("x",I),this.py=y("y",k,!0),this.pz=y("z",O),Object.freeze(this)}static fromAffine(I){const{x:k,y:O}=I||{};if(!I||!n.isValid(k)||!n.isValid(O))throw new Error("invalid affine point");if(I instanceof C)throw new Error("projective point not allowed");return n.is0(k)&&n.is0(O)?C.ZERO:new C(k,O,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){return zge(C,"pz",I)}static fromBytes(I){return Nc(I),C.fromHex(I)}static fromHex(I){const k=C.fromAffine(d(ca("pointHex",I)));return k.assertValidity(),k}static fromPrivateKey(I){const k=kK(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return C.BASE.multiply(k(I))}static msm(I,k){return Vge(C,r,I,k)}precompute(I=8,k=!0){return x.setWindowSize(this,I),k||this.multiply(j1),this}_setWindowSize(I){this.precompute(I)}assertValidity(){v(this)}hasEvenY(){const{y:I}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(I)}equals(I){m(I);const{px:k,py:O,pz:B}=this,{px:G,py:W,pz:R}=I,N=n.eql(n.mul(k,R),n.mul(G,B)),M=n.eql(n.mul(O,R),n.mul(W,B));return N&&M}negate(){return new C(this.px,n.neg(this.py),this.pz)}double(){const{a:I,b:k}=t,O=n.mul(k,j1),{px:B,py:G,pz:W}=this;let R=n.ZERO,N=n.ZERO,M=n.ZERO,P=n.mul(B,B),L=n.mul(G,G),F=n.mul(W,W),q=n.mul(B,G);return q=n.add(q,q),M=n.mul(B,W),M=n.add(M,M),R=n.mul(I,M),N=n.mul(O,F),N=n.add(R,N),R=n.sub(L,N),N=n.add(L,N),N=n.mul(R,N),R=n.mul(q,R),M=n.mul(O,M),F=n.mul(I,F),q=n.sub(P,F),q=n.mul(I,q),q=n.add(q,M),M=n.add(P,P),P=n.add(M,P),P=n.add(P,F),P=n.mul(P,q),N=n.add(N,P),F=n.mul(G,W),F=n.add(F,F),P=n.mul(F,q),R=n.sub(R,P),M=n.mul(F,L),M=n.add(M,M),M=n.add(M,M),new C(R,N,M)}add(I){m(I);const{px:k,py:O,pz:B}=this,{px:G,py:W,pz:R}=I;let N=n.ZERO,M=n.ZERO,P=n.ZERO;const L=t.a,F=n.mul(t.b,j1);let q=n.mul(k,G),ne=n.mul(O,W),le=n.mul(B,R),ie=n.add(k,O),re=n.add(G,W);ie=n.mul(ie,re),re=n.add(q,ne),ie=n.sub(ie,re),re=n.add(k,B);let ye=n.add(G,R);return re=n.mul(re,ye),ye=n.add(q,le),re=n.sub(re,ye),ye=n.add(O,B),N=n.add(W,R),ye=n.mul(ye,N),N=n.add(ne,le),ye=n.sub(ye,N),P=n.mul(L,re),N=n.mul(F,le),P=n.add(N,P),N=n.sub(ne,P),P=n.add(ne,P),M=n.mul(N,P),ne=n.add(q,q),ne=n.add(ne,q),le=n.mul(L,le),re=n.mul(F,re),ne=n.add(ne,le),le=n.sub(q,le),le=n.mul(L,le),re=n.add(re,le),q=n.mul(ne,re),M=n.add(M,q),q=n.mul(ye,re),N=n.mul(ie,N),N=n.sub(N,q),q=n.mul(ie,ne),P=n.mul(ye,P),P=n.add(P,q),new C(N,M,P)}subtract(I){return this.add(I.negate())}is0(){return this.equals(C.ZERO)}multiply(I){const{endo:k}=e;if(!r.isValidNot0(I))throw new Error("invalid scalar: out of range");let O,B;const G=W=>x.wNAFCached(this,W,C.normalizeZ);if(k){const{k1neg:W,k1:R,k2neg:N,k2:M}=k.splitScalar(I),{p:P,f:L}=G(R),{p:F,f:q}=G(M);B=L.add(q),O=A(k.beta,P,F,W,N)}else{const{p:W,f:R}=G(I);O=W,B=R}return C.normalizeZ([O,B])[0]}multiplyUnsafe(I){const{endo:k}=e,O=this;if(!r.isValid(I))throw new Error("invalid scalar: out of range");if(I===Hv||O.is0())return C.ZERO;if(I===Gv)return O;if(x.hasPrecomputes(this))return this.multiply(I);if(k){const{k1neg:B,k1:G,k2neg:W,k2:R}=k.splitScalar(I),{p1:N,p2:M}=qge(C,O,G,R);return A(k.beta,N,M,B,W)}else return x.wNAFCachedUnsafe(O,I)}multiplyAndAddUnsafe(I,k,O){const B=this.multiplyUnsafe(k).add(I.multiplyUnsafe(O));return B.is0()?void 0:B}toAffine(I){return w(this,I)}isTorsionFree(){const{isTorsionFree:I}=e;return s===Gv?!0:I?I(C,this):x.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:I}=e;return s===Gv?this:I?I(C,this):this.multiplyUnsafe(s)}toBytes(I=!0){return _I("isCompressed",I),this.assertValidity(),u(C,this,I)}toRawBytes(I=!0){return this.toBytes(I)}toHex(I=!0){return $E(this.toBytes(I))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}C.BASE=new C(t.Gx,t.Gy,n.ONE),C.ZERO=new C(n.ZERO,n.ONE,n.ZERO),C.Fp=n,C.Fn=r;const S=r.BITS,x=Gge(C,e.endo?Math.ceil(S/2):S);return C}function DK(t){return Uint8Array.of(t?2:3)}function eme(t,e,n={}){sM(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||gue,s=e.hmac||((O,...B)=>CK(e.hash,O,up(...B))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(O){const B=a>>Gv;return O>B}function u(O){return l(O)?o.neg(O):O}function d(O,B){if(!o.isValidNot0(B))throw new Error(`invalid signature ${O}: out of range 1..CURVE.n`)}class h{constructor(B,G,W){d("r",B),d("s",G),this.r=B,this.s=G,W!=null&&(this.recovery=W),Object.freeze(this)}static fromCompact(B){const G=o.BYTES,W=ca("compactSignature",B,G*2);return new h(o.fromBytes(W.subarray(0,G)),o.fromBytes(W.subarray(G,G*2)))}static fromDER(B){const{r:G,s:W}=pu.toSig(ca("DER",B));return new h(G,W)}assertValidity(){}addRecoveryBit(B){return new h(this.r,this.s,B)}recoverPublicKey(B){const G=i.ORDER,{r:W,s:R,recovery:N}=this;if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");if(a*Qge<G&&N>1)throw new Error("recovery id is ambiguous for h>1 curve");const P=N===2||N===3?W+a:W;if(!i.isValid(P))throw new Error("recovery id 2 or 3 invalid");const L=i.toBytes(P),F=t.fromHex(up(DK((N&1)===0),L)),q=o.inv(P),ne=v(ca("msgHash",B)),le=o.create(-ne*q),ie=o.create(R*q),re=t.BASE.multiplyUnsafe(le).add(F.multiplyUnsafe(ie));if(re.is0())throw new Error("point at infinify");return re.assertValidity(),re}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(B){if(B==="compact")return up(o.toBytes(this.r),o.toBytes(this.s));if(B==="der")return LL(pu.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return $E(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return $E(this.toBytes("compact"))}}const f=kK(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(O){try{return f(O),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const O=a;return jge(r(RK(O)),O)},precompute(O=8,B=t.BASE){return B.precompute(O,!1)}};function g(O,B=!0){return t.fromPrivateKey(O).toBytes(B)}function y(O){if(typeof O=="bigint")return!1;if(O instanceof t)return!0;const G=ca("key",O).length,W=i.BYTES,R=W+1,N=2*W+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===R))return G===R||G===N}function m(O,B,G=!0){if(y(O)===!0)throw new Error("first arg must be private key");if(y(B)===!1)throw new Error("second arg must be public key");return t.fromHex(B).multiply(f(O)).toBytes(G)}const w=e.bits2int||function(O){if(O.length>8192)throw new Error("input is too large");const B=aN(O),G=O.length*8-c;return G>0?B>>BigInt(G):B},v=e.bits2int_modN||function(O){return o.create(w(O))},A=cN(c);function C(O){return efe("num < 2^"+c,O,Hv,A),o.toBytes(O)}function S(O,B,G=x){if(["recovered","canonical"].some(ie=>ie in G))throw new Error("sign() legacy options not supported");const{hash:W}=e;let{lowS:R,prehash:N,extraEntropy:M}=G;R==null&&(R=!0),O=ca("msgHash",O),q6(G),N&&(O=ca("prehashed msgHash",W(O)));const P=v(O),L=f(B),F=[C(L),C(P)];if(M!=null&&M!==!1){const ie=M===!0?r(i.BYTES):M;F.push(ca("extraEntropy",ie))}const q=up(...F),ne=P;function le(ie){const re=w(ie);if(!o.isValidNot0(re))return;const ye=o.inv(re),Z=t.BASE.multiply(re).toAffine(),oe=o.create(Z.x);if(oe===Hv)return;const he=o.create(ye*o.create(ne+oe*L));if(he===Hv)return;let de=(Z.x===oe?0:2)|Number(Z.y&Gv),be=he;return R&&l(he)&&(be=u(he),de^=1),new h(oe,be,de)}return{seed:q,k2sig:le}}const x={lowS:e.lowS,prehash:!1},T={lowS:e.lowS,prehash:!1};function I(O,B,G=x){const{seed:W,k2sig:R}=S(O,B,G);return nfe(e.hash.outputLen,o.BYTES,s)(W,R)}t.BASE.precompute(8);function k(O,B,G,W=T){const R=O;B=ca("msgHash",B),G=ca("publicKey",G),q6(W);const{lowS:N,prehash:M,format:P}=W;if("strict"in W)throw new Error("options.strict was renamed to lowS");if(P!==void 0&&!["compact","der","js"].includes(P))throw new Error('format must be "compact", "der" or "js"');const L=typeof R=="string"||DL(R),F=!L&&!P&&typeof R=="object"&&R!==null&&typeof R.r=="bigint"&&typeof R.s=="bigint";if(!L&&!F)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let q,ne;try{if(F)if(P===void 0||P==="js")q=new h(R.r,R.s);else throw new Error("invalid format");if(L){try{P!=="compact"&&(q=h.fromDER(R))}catch(be){if(!(be instanceof pu.Err))throw be}!q&&P!=="der"&&(q=h.fromCompact(R))}ne=t.fromHex(G)}catch{return!1}if(!q||N&&q.hasHighS())return!1;M&&(B=e.hash(B));const{r:le,s:ie}=q,re=v(B),ye=o.inv(ie),Z=o.create(re*ye),oe=o.create(le*ye),he=t.BASE.multiplyUnsafe(Z).add(ne.multiplyUnsafe(oe));return he.is0()?!1:o.create(he.x)===le}return Object.freeze({getPublicKey:g,getSharedSecret:m,sign:I,verify:k,utils:p,Point:t,Signature:h})}function tme(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=gN(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function nme(t){const{CURVE:e,curveOpts:n}=tme(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function rme(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function sme(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=nme(t),s=Xge(e,n),i=eme(s,r,n);return rme(t,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ime(t,e){const n=r=>sme({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const SI={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const ome=BigInt(1),Rk=BigInt(2),V6=(t,e)=>(t+e/Rk)/e;function ame(t){const e=SI.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=Yo(u,n,e)*u%e,h=Yo(d,n,e)*u%e,f=Yo(h,Rk,e)*l%e,p=Yo(f,s,e)*f%e,g=Yo(p,i,e)*p%e,y=Yo(g,a,e)*g%e,m=Yo(y,c,e)*y%e,w=Yo(m,a,e)*g%e,v=Yo(w,n,e)*u%e,A=Yo(v,o,e)*p%e,C=Yo(A,r,e)*l%e,S=Yo(C,Rk,e);if(!Pk.eql(Pk.sqr(S),t))throw new Error("Cannot find square root");return S}const Pk=gN(SI.p,void 0,void 0,{sqrt:ame}),LK=ime({...SI,Fp:Pk,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=SI.n,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-ome*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=V6(i*t,e),c=V6(-r*t,e);let l=ma(t-a*n-c*s,e),u=ma(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},Xq),cme=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:LK},Symbol.toStringTag,{value:"Module"}));function lme({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new LK.Signature(Bo(t),Bo(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?o:Sa(o)}async function mM(t,e){var d,h,f;const{address:n,factory:r,factoryData:s,hash:i,signature:o,universalSignatureVerifierAddress:a=(f=(h=(d=t.chain)==null?void 0:d.contracts)==null?void 0:h.universalSignatureVerifier)==null?void 0:f.address,...c}=e,l=kl(o)?o:typeof o=="object"&&"r"in o&&"s"in o?lme(o):Jr(o),u=await(async()=>!r&&!s||age(l)?l:cge({address:r,data:s,signature:l}))();try{const p=a?{to:a,data:Pa({abi:_6,functionName:"isValidSig",args:[n,i,u]}),...c}:{data:eN({abi:_6,args:[n,i,u],bytecode:Nfe}),...c},{data:g}=await lt(t,PC,"call")(p);return Ule(g??"0x0")}catch(p){try{if(uN(Mu(n),await Mq({hash:i,signature:o})))return!0}catch{}if(p instanceof CV)return!1;throw p}}async function ume(t,{address:e,message:n,factory:r,factoryData:s,signature:i,...o}){const a=hK(n);return mM(t,{address:e,factory:r,factoryData:s,hash:a,signature:i,...o})}async function dme(t,e){const{address:n,factory:r,factoryData:s,signature:i,message:o,primaryType:a,types:c,domain:l,...u}=e,d=Xpe({message:o,primaryType:a,types:c,domain:l});return mM(t,{address:n,factory:r,factoryData:s,hash:d,signature:i,...u})}async function hme(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function fme(t,e){const{abi:n,address:r,args:s,batch:i=!0,eventName:o,fromBlock:a,onError:c,onLogs:l,poll:u,pollingInterval:d=t.pollingInterval,strict:h}=e;return(typeof u<"u"?u:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))?(()=>{const y=h??!1,m=Yr(["watchContractEvent",r,s,i,t.uid,o,d,y,a]);return nd(m,{onLogs:l,onError:c},w=>{let v;a!==void 0&&(v=a-1n);let A,C=!1;const S=X0(async()=>{var x;if(!C){try{A=await lt(t,HV,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:y,fromBlock:a})}catch{}C=!0;return}try{let T;if(A)T=await lt(t,dN,"getFilterChanges")({filter:A});else{const I=await lt(t,kC,"getBlockNumber")({});v&&v<I?T=await lt(t,VV,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:v+1n,toBlock:I,strict:y}):T=[],v=I}if(T.length===0)return;if(i)w.onLogs(T);else for(const I of T)w.onLogs([I])}catch(T){A&&T instanceof yg&&(C=!1),(x=w.onError)==null||x.call(w,T)}},{emitOnBegin:!0,interval:d});return async()=>{A&&await lt(t,pN,"uninstallFilter")({filter:A}),S()}})})():(()=>{const y=h??!1,m=Yr(["watchContractEvent",r,s,i,t.uid,o,d,y]);let w=!0,v=()=>w=!1;return nd(m,{onLogs:l,onError:c},A=>((async()=>{try{const C=(()=>{if(t.transport.type==="fallback"){const T=t.transport.transports.find(I=>I.config.type==="webSocket"||I.config.type==="ipc");return T?T.value:t.transport}return t.transport})(),S=o?OC({abi:n,eventName:o,args:s}):[],{unsubscribe:x}=await C.subscribe({params:["logs",{address:r,topics:S}],onData(T){var k;if(!w)return;const I=T.result;try{const{eventName:O,args:B}=dM({abi:n,data:I.data,topics:I.topics,strict:h}),G=td(I,{args:B,eventName:O});A.onLogs([G])}catch(O){let B,G;if(O instanceof ME||O instanceof Zx){if(h)return;B=O.abiItem.name,G=(k=O.abiItem.inputs)==null?void 0:k.some(R=>!("name"in R&&R.name))}const W=td(I,{args:G?[]:{},eventName:B});A.onLogs([W])}},onError(T){var I;(I=A.onError)==null||I.call(A,T)}});v=x,w||v()}catch(C){c==null||c(C)}})(),()=>v()))})()}async function MK(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new Vg({docsPath:"/docs/contract/writeContract"});const l=r?Cr(r):null,u=Pa({abi:n,args:i,functionName:a});try{return await lt(t,NC,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw bg(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function Mo(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const ZA="2.17.3",pme=()=>`@wagmi/core@${ZA}`;var UK=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},II,$K;let dd=class Ok extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return pme()}constructor(e,n={}){var i;super(),II.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof Ok?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof Ok&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return UK(this,II,"m",$K).call(this,this,e)}};II=new WeakSet,$K=function t(e,n){return n!=null&&n(e)?e:e.cause?UK(this,II,"m",t).call(this,e.cause,n):e};class t_ extends dd{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class gme extends dd{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class mme extends dd{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class yme extends dd{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class wme extends dd{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class bme extends dd{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function XA(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new gme;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const kk=256;let z1=kk,W1;function BK(t=11){if(!W1||z1+t>kk*2){W1="",z1=0;for(let e=0;e<kk;e++)W1+=(256+Math.random()*256|0).toString(16).substring(1)}return W1.substring(z1,z1+++t)}function FK(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?Cr(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},y={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:BK()};function m(w){return v=>{const A=v(w);for(const S in y)delete A[S];const C={...w,...A};return Object.assign(C,{extend:m(C)})}}return Object.assign(y,{extend:m(y)})}function yM({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=BK();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:Gpe(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function vme(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>yM({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function xI(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=Eme,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=yM({key:n,name:r,async request({method:g,params:y}){let m;const w=async(v=0)=>{const A=h[v]({...d,chain:c,retryCount:0,timeout:u});try{const C=await A.request({method:g,params:y});return f({method:g,params:y,response:C,transport:A,status:"success"}),C}catch(C){if(f({error:C,method:g,params:y,transport:A,status:"error"}),i(C)||v===h.length-1||(m??(m=h.slice(v+1).some(S=>{const{include:x,exclude:T}=S({chain:c}).config.methods||{};return x?x.includes(g):T?!T.includes(g):!0})),!m))throw C;return w(v+1)}};return w()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};_me({chain:c,interval:g.interval??l,onTransports:y=>h=y,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function Eme(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===l0.code||t.code===jr.code||dp.nodeMessage.test(t.message)||t.code===5e3))}function _me({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const y=g({chain:t,retryCount:0,timeout:i}),m=Date.now();let w,v;try{await(r?r({transport:y}):y.request({method:"net_listening"})),v=1}catch{v=0}finally{w=Date.now()}return{latency:w-m,success:v}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:y})=>y)))),p=o.map((g,y)=>{const m=u.map(S=>S[y].latency),v=1-m.reduce((S,x)=>S+x,0)/m.length/f,A=u.map(S=>S[y].success),C=A.reduce((S,x)=>S+x,0)/A.length;return C===0?[0,y]:[l*v+c*C,y]}).sort((g,y)=>y[0]-g[0]);n(p.map(([,g])=>o[g])),await CI(e),d()};d()}class Cme extends ge{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function Sh(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},y=e.retryCount??h,m=f??e.timeout??1e4,w=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!w)throw new Cme;const v=Ype(w,{fetchOptions:r,onRequest:a,onResponse:c,timeout:m});return yM({key:s,methods:i,name:o,async request({method:A,params:C}){const S={method:A,params:C},{schedule:x}=$V({id:w,wait:g,shouldSplitBatch(O){return O.length>p},fn:O=>v.request({body:O}),sort:(O,B)=>O.id-B.id}),T=async O=>n?x(O):[await v.request({body:O})],[{error:I,result:k}]=await T(S);if(u)return{error:I,result:k};if(I)throw new GL({body:S,error:I,url:w});return k},retryCount:y,retryDelay:l,timeout:m,type:"http"},{fetchOptions:r,url:w})}}function Ame(t){var d,h,f;const{scheme:e,statement:n,...r}=((d=t.match(Sme))==null?void 0:d.groups)??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:a,requestId:c,...l}=((h=t.match(Ime))==null?void 0:h.groups)??{},u=(f=t.split("Resources:")[1])==null?void 0:f.split(`
- `).slice(1);return{...r,...l,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...u?{resources:u}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const Sme=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,Ime=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function xme(t){const{address:e,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!Na(r.address,{strict:!1})||e&&!uN(r.address,e))return!1}catch{return!1}return!0}async function Nme(t,e){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:a,time:c=new Date,...l}=e,u=Ame(s);if(!u.address||!xme({address:n,domain:r,message:u,nonce:i,scheme:o,time:c}))return!1;const h=hK(s);return mM(t,{address:u.address,hash:h,signature:a,...l})}function Tme(t){return{call:e=>PC(t,e),createAccessList:e=>WV(t,e),createBlockFilter:()=>Yfe(t),createContractEventFilter:e=>HV(t,e),createEventFilter:e=>GV(t,e),createPendingTransactionFilter:()=>qV(t),estimateContractGas:e=>Jfe(t,e),estimateGas:e=>rN(t,e),getBalance:e=>YL(t,e),getBlobBaseFee:()=>Zfe(t),getBlock:e=>_l(t,e),getBlockNumber:e=>kC(t,e),getBlockTransactionCount:e=>spe(t,e),getBytecode:e=>M6(t,e),getChainId:()=>Q0(t),getCode:e=>M6(t,e),getContractEvents:e=>VV(t,e),getEip712Domain:e=>cpe(t,e),getEnsAddress:e=>Dfe(t,e),getEnsAvatar:e=>Vfe(t,e),getEnsName:e=>zV(t,e),getEnsResolver:e=>Kfe(t,e),getEnsText:e=>jV(t,e),getFeeHistory:e=>dpe(t,e),estimateFeesPerGas:e=>yde(t,e),getFilterChanges:e=>dN(t,e),getFilterLogs:e=>hpe(t,e),getGasPrice:()=>VL(t),getLogs:e=>fM(t,e),getProof:e=>Sge(t,e),estimateMaxPriorityFeePerGas:e=>mde(t,e),getStorageAt:e=>fpe(t,e),getTransaction:e=>hN(t,e),getTransactionConfirmations:e=>ppe(t,e),getTransactionCount:e=>QL(t,e),getTransactionReceipt:e=>Ck(t,e),multicall:e=>YV(t,e),prepareTransactionRequest:e=>xC(t,e),readContract:e=>Ml(t,e),sendRawTransaction:e=>ZL(t,e),simulate:e=>Ak(t,e),simulateBlocks:e=>Ak(t,e),simulateCalls:e=>hge(t,e),simulateContract:e=>Pge(t,e),verifyMessage:e=>ume(t,e),verifySiweMessage:e=>Nme(t,e),verifyTypedData:e=>dme(t,e),uninstallFilter:e=>pN(t,e),waitForTransactionReceipt:e=>bK(t,e),watchBlocks:e=>pge(t,e),watchBlockNumber:e=>pK(t,e),watchContractEvent:e=>fme(t,e),watchEvent:e=>gge(t,e),watchPendingTransactions:e=>gK(t,e)}}function Rme(t){return{addChain:e=>Fle(t,e),deployContract:e=>Bde(t,e),getAddresses:()=>mge(t),getCallsStatus:e=>wK(t,e),getCapabilities:e=>wge(t,e),getChainId:()=>Q0(t),getPermissions:()=>yge(t),prepareAuthorization:e=>vK(t,e),prepareTransactionRequest:e=>xC(t,e),requestAddresses:()=>Ige(t),requestPermissions:e=>xge(t,e),sendCalls:e=>bge(t,e),sendRawTransaction:e=>ZL(t,e),sendTransaction:e=>NC(t,e),showCallsStatus:e=>vge(t,e),signAuthorization:e=>Nge(t,e),signMessage:e=>EK(t,e),signTransaction:e=>Tge(t,e),signTypedData:e=>Rge(t,e),switchChain:e=>Oge(t,e),waitForCallsStatus:e=>Ege(t,e),watchAsset:e=>hme(t,e),writeContract:e=>MK(t,e)}}async function DC(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new bme({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new mme;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new wme({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=Cr(e.account??n.accounts[0]);if(o&&(o.address=Mu(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new yme({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return FK({account:o,chain:a,name:"Connector Client",transport:l=>vme(c)({...l,retryCount:0})})}async function Dk(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function Pme(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await DC(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return Mo(o,rN,"estimateGas")({...s,account:i})}function jK(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(nde[t])}function $y(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function Ome(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return Mo(o,YV,"multicall")({allowFailure:n,contracts:s,...i})}function zK(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Mo(s,Ml,"readContract")(r)}async function kme(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>Ome(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof AV)throw c;const l=()=>o.map(u=>zK(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function Dme(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await K6(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await K6(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=gq(Il(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await Mo(c,YL,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:Kg(u,jK(a)),symbol:d.nativeCurrency.symbol,value:u}}async function K6(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await kme(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=Kg(c??"0",jK(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function Y6(t){return t.state.chainId}function _g(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!_g(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!_g(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function Lme(t,e={}){let n;try{n=t.getClient(e)}catch{}return n}let H1=[];function Za(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||_g(H1,e)?H1:(H1=e,e)}let UR=[];function Q6(t){const e=t.connectors;return _g(UR,e)?UR:(UR=e,e)}function Mme(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Mo(s,zV,"getEnsName")(r)}function Lk(t,e={}){const n=Lme(t,e);return n==null?void 0:n.extend(Tme)}async function Ume(t,e={}){return(await DC(t,e)).extend(Rme)}async function $me(t,e){const{account:n,chainId:r,...s}=e,i=n??$y(t).address,o=t.getClient({chainId:r});return Mo(o,xC,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let $R=!1;async function Mk(t,e={}){var l,u;if($R)return[];$R=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const y=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:y}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),$R=!1,a}async function Bme(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await DC(t,{account:n??void 0,chainId:r,connector:s}),await Mo(o,NC,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function Fme(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await DC(t,{account:n,connector:r}),Mo(i,EK,"signMessage")({...s,...n?{account:n}:{}})}class jd extends dd{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class jme extends dd{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function J6(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new jme({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new t_;return t.setState(a=>({...a,chainId:r})),i}function WK(t,e){const{onChange:n}=e;return t.subscribe(()=>$y(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return _g(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function zme(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function HK(t,e){const{onChange:n}=e;return t.subscribe(()=>Za(t),n,{equalityFn:_g})}function GK(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function Wme(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=Mo(l,gK,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}function Hme(t,e){const{onChange:n}=e;return t.subscribe(()=>Lk(t),n,{equalityFn(r,s){return(r==null?void 0:r.uid)===(s==null?void 0:s.uid)}})}async function qK(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await Mo(i,bK,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await Mo(i,hN,"getTransaction")({hash:a.transactionHash}),d=await Mo(i,PC,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?gq(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function VK(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await DC(t,{account:n??void 0,chainId:r,connector:s}),await Mo(o,MK,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function XGe(t){return t}mN.type="injected";function mN(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...Gme[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:mN.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,y,m,w;const d=await this.getProvider();if(!d)throw new jd;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(y=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:y.map(A=>Mu(A)),h.length>0&&(h=await this.getAccounts())}catch(v){const A=v;if(A.code===jr.code)throw new jr(A);if(A.code===Gh.code)throw A}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(C=>Mu(C))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let v=await this.getChainId();if(l&&v!==l){const A=await this.switchChain({chainId:l}).catch(C=>{if(C.code===jr.code)throw C;return{id:v}});v=(A==null?void 0:A.id)??v}return e&&await((m=c.storage)==null?void 0:m.removeItem(`${this.id}.disconnected`)),t.target||await((w=c.storage)==null?void 0:w.setItem("injected.connected",!0)),{accounts:h,chainId:v}}catch(v){const A=v;throw A.code===jr.code?new jr(A):A.code===Gh.code?new Gh(A):A}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new jd;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await iK(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new jd;return(await l.request({method:"eth_accounts"})).map(d=>Mu(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new jd;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=eS(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(m=>window.addEventListener("ethereum#initialized",()=>m(p()),{once:!0}))]:[],new Promise(m=>setTimeout(()=>m(p()),g))]))return!0}throw new jd}return!!(await AI(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,y,m;const d=await this.getProvider();if(!d)throw new jd;const h=c.chains.find(w=>w.id===u);if(!h)throw new Dl(new t_);const f=new Promise(w=>{const v=A=>{"chainId"in A&&A.chainId===u&&(c.emitter.off("change",v),w())};c.emitter.on("change",v)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:nt(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(w){const v=w;if(v.code===4902||((g=(p=v==null?void 0:v.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:A,...C}=h.blockExplorers??{};let S;l!=null&&l.blockExplorerUrls?S=l.blockExplorerUrls:A&&(S=[A.url,...Object.values(C).map(I=>I.url)]);let x;(y=l==null?void 0:l.rpcUrls)!=null&&y.length?x=l.rpcUrls:x=[((m=h.rpcUrls.default)==null?void 0:m.http[0])??""];const T={blockExplorerUrls:S,chainId:nt(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:x};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[T]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new jr(new Error("User rejected switch after adding network."))}),f]),h}catch(A){throw new jr(A)}throw v.code===jr.code?new jr(v):new Dl(v)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>Mu(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const Gme={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:eS(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return eS(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:eS(t,"isPhantom")}}};function eS(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function qme(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function Vme(){const t=new Set;let e=[];const n=()=>qme(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const Kme=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},Yme=Kme;function Qme(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const Uk=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Uk(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Uk(r)(n)}}}},Jme=(t,e)=>(n,r,s)=>{let i={storage:Qme(()=>localStorage),partialize:g=>g,version:0,merge:(g,y)=>({...y,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,y)=>{d(g,y),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,y;if(!l)return;o=!1,a.forEach(w=>{var v;return w((v=r())!=null?v:h)});const m=((y=i.onRehydrateStorage)==null?void 0:y.call(i,(g=r())!=null?g:h))||void 0;return Uk(l.getItem.bind(l))(i.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==i.version){if(i.migrate)return[!0,i.migrate(w.state,w.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var v;const[A,C]=w;if(f=i.merge(C,(v=r())!=null?v:h),n(f,!0),A)return u()}).then(()=>{m==null||m(f,void 0),f=r(),o=!0,c.forEach(w=>w(f))}).catch(w=>{m==null||m(void 0,w)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},Zme=Jme,Z6=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},BR=t=>t?Z6(t):Z6;var KK={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var y=this._events[g],m=arguments.length,w,v;if(y.fn){switch(y.once&&this.removeListener(l,y.fn,void 0,!0),m){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,h),!0;case 5:return y.fn.call(y.context,u,d,h,f),!0;case 6:return y.fn.call(y.context,u,d,h,f,p),!0}for(v=1,w=new Array(m-1);v<m;v++)w[v-1]=arguments[v];y.fn.apply(y.context,w)}else{var A=y.length,C;for(v=0;v<A;v++)switch(y[v].once&&this.removeListener(l,y[v].fn,void 0,!0),m){case 1:y[v].fn.call(y[v].context);break;case 2:y[v].fn.call(y[v].context,u);break;case 3:y[v].fn.call(y[v].context,u,d);break;case 4:y[v].fn.call(y[v].context,u,d,h);break;default:if(!w)for(C=1,w=new Array(m-1);C<m;C++)w[C-1]=arguments[C];y[v].fn.apply(y[v].context,w)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,y=[],m=p.length;g<m;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&y.push(p[g]);y.length?this._events[f]=y.length===1?y[0]:y:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(KK);var Xme=KK.exports;const eye=Wg(Xme);class tye{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new eye})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function nye(t){return new tye(t)}function rye(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function X6(t,e){return t.slice(0,e).join(".")||"."}function e8(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function sye(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=e8(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=e8(s,c);if(u!==0)return r?e.call(this,a,c,X6(i,u)):`[ref=${X6(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function iye(t,e,n,r){return JSON.stringify(t,sye((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function oye(t){const{deserialize:e=rye,key:n="wagmi",serialize:r=iye,storage:s=YK}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const YK={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function aye(){const t=typeof window<"u"&&window.localStorage?window.localStorage:YK;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const $k=256;let G1=$k,q1;function cye(t=11){if(!q1||G1+t>$k*2){q1="",G1=0;for(let e=0;e<$k;e++)q1+=(256+Math.random()*256|0).toString(16).substring(1)}return q1.substring(G1,G1+++t)}function lye(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=oye({storage:aye()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?Vme():void 0,a=BR(()=>i.chains),c=BR(()=>{const C=[],S=new Set;for(const x of i.connectors??[]){const T=l(x);if(C.push(T),!s&&T.rdns){const I=typeof T.rdns=="string"?[T.rdns]:T.rdns;for(const k of I)S.add(k)}}if(!s&&o){const x=o.getProviders();for(const T of x)S.has(T.info.rdns)||C.push(l(u(T)))}return C});function l(C){var T;const S=nye(cye()),x={...C({emitter:S,chains:a.getState(),storage:n,transports:i.transports}),emitter:S,uid:S.uid};return S.on("connect",v),(T=x.setup)==null||T.call(x),x}function u(C){const{info:S}=C,x=C.provider;return mN({target:{...S,id:S.rdns,provider:x}})}const d=new Map;function h(C={}){const S=C.chainId??y.getState().chainId,x=a.getState().find(I=>I.id===S);if(C.chainId&&!x)throw new t_;{const I=d.get(y.getState().chainId);if(I&&!x)return I;if(!x)throw new t_}{const I=d.get(S);if(I)return I}let T;if(i.client)T=i.client({chain:x});else{const I=x.id,k=a.getState().map(G=>G.id),O={},B=Object.entries(i);for(const[G,W]of B)if(!(G==="chains"||G==="client"||G==="connectors"||G==="transports"))if(typeof W=="object")if(I in W)O[G]=W[I];else{if(k.some(N=>N in W))continue;O[G]=W}else O[G]=W;T=FK({...O,chain:x,batch:O.batch??{multicall:!0},transport:G=>i.transports[I]({...G,connectors:c})})}return d.set(S,T),T}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";ZA.startsWith(g)?p=Number.parseInt(ZA.replace(g,"")):p=Number.parseInt(ZA.split(".")[0]??"0");const y=BR(Yme(n?Zme(f,{migrate(C,S){if(S===p)return C;const x=f(),T=m(C,x.chainId);return{...x,chainId:T}},name:"store",partialize(C){return{connections:{__type:"Map",value:Array.from(C.connections.entries()).map(([S,x])=>{const{id:T,name:I,type:k,uid:O}=x.connector;return[S,{...x,connector:{id:T,name:I,type:k,uid:O}}]})},chainId:C.chainId,current:C.current}},merge(C,S){typeof C=="object"&&C&&"status"in C&&delete C.status;const x=m(C,S.chainId);return{...S,...C,chainId:x}},skipHydration:s,storage:n,version:p}):f));y.setState(f());function m(C,S){return C&&typeof C=="object"&&"chainId"in C&&typeof C.chainId=="number"&&a.getState().some(x=>x.id===C.chainId)?C.chainId:S}r&&y.subscribe(({connections:C,current:S})=>{var x;return S?(x=C.get(S))==null?void 0:x.chainId:void 0},C=>{if(a.getState().some(x=>x.id===C))return y.setState(x=>({...x,chainId:C??x.chainId}))}),o==null||o.subscribe(C=>{const S=new Set,x=new Set;for(const I of c.getState())if(S.add(I.id),I.rdns){const k=typeof I.rdns=="string"?[I.rdns]:I.rdns;for(const O of k)x.add(O)}const T=[];for(const I of C){if(x.has(I.info.rdns))continue;const k=l(u(I));S.has(k.id)||T.push(k)}n&&!y.persist.hasHydrated()||c.setState(I=>[...I,...T],!0)});function w(C){y.setState(S=>{const x=S.connections.get(C.uid);return x?{...S,connections:new Map(S.connections).set(C.uid,{accounts:C.accounts??x.accounts,chainId:C.chainId??x.chainId,connector:x.connector})}:S})}function v(C){y.getState().status==="connecting"||y.getState().status==="reconnecting"||y.setState(S=>{const x=c.getState().find(T=>T.uid===C.uid);return x?(x.emitter.listenerCount("connect")&&x.emitter.off("connect",w),x.emitter.listenerCount("change")||x.emitter.on("change",w),x.emitter.listenerCount("disconnect")||x.emitter.on("disconnect",A),{...S,connections:new Map(S.connections).set(C.uid,{accounts:C.accounts,chainId:C.chainId,connector:x}),current:C.uid,status:"connected"}):S})}function A(C){y.setState(S=>{const x=S.connections.get(C.uid);if(x){const I=x.connector;I.emitter.listenerCount("change")&&x.connector.emitter.off("change",w),I.emitter.listenerCount("disconnect")&&x.connector.emitter.off("disconnect",A),I.emitter.listenerCount("connect")||x.connector.emitter.on("connect",v)}if(S.connections.delete(C.uid),S.connections.size===0)return{...S,connections:new Map,current:null,status:"disconnected"};const T=S.connections.values().next().value;return{...S,connections:new Map(S.connections),current:T.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return y.getState()},setState(C){let S;typeof C=="function"?S=C(y.getState()):S=C;const x=f();typeof S!="object"&&(S=x),Object.keys(x).some(I=>!(I in S))&&(S=x),y.setState(S,!0)},subscribe(C,S,x){return y.subscribe(C,S,x?{...x,fireImmediately:x.emitImmediately}:void 0)},_internal:{mipd:o,store:y,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(C){const S=typeof C=="function"?C(a.getState()):C;if(S.length!==0)return a.setState(S,!0)},subscribe(C){return a.subscribe(C)}},connectors:{providerDetailToConnector:u,setup:l,setState(C){return c.setState(typeof C=="function"?C(c.getState()):C,!0)},subscribe(C){return c.subscribe(C)}},events:{change:w,connect:v,disconnect:A}}}}function uye(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?Mk(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function dye(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=uye(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=D.useRef(!0);return D.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const QK=D.createContext(void 0);function hye(t){const{children:e,config:n}=t,r={value:n};return D.createElement(dye,t,D.createElement(QK.Provider,r,e))}const fye="2.15.6",pye=()=>`wagmi@${fye}`;let gye=class extends dd{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return pye()}};class mye extends gye{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function Oa(t={}){const e=t.config??D.useContext(QK);if(!e)throw new mye;return e}var JK={exports:{}},ZK={},XK={exports:{}},eY={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p0=D;function yye(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wye=typeof Object.is=="function"?Object.is:yye,bye=p0.useState,vye=p0.useEffect,Eye=p0.useLayoutEffect,_ye=p0.useDebugValue;function Cye(t,e){var n=e(),r=bye({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Eye(function(){s.value=n,s.getSnapshot=e,FR(s)&&i({inst:s})},[t,n,e]),vye(function(){return FR(s)&&i({inst:s}),t(function(){FR(s)&&i({inst:s})})},[t]),_ye(n),n}function FR(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wye(t,n)}catch{return!0}}function Aye(t,e){return e()}var Sye=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Aye:Cye;eY.useSyncExternalStore=p0.useSyncExternalStore!==void 0?p0.useSyncExternalStore:Sye;XK.exports=eY;var tY=XK.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yN=D,Iye=tY;function xye(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nye=typeof Object.is=="function"?Object.is:xye,Tye=Iye.useSyncExternalStore,Rye=yN.useRef,Pye=yN.useEffect,Oye=yN.useMemo,kye=yN.useDebugValue;ZK.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=Rye(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Oye(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,Nye(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=Tye(t,i[0],i[1]);return Pye(function(){o.hasValue=!0,o.value=a},[a]),kye(a),a};JK.exports=ZK;var nY=JK.exports;const jR=t=>typeof t=="object"&&!Array.isArray(t);function Dye(t,e,n=e,r=_g){const s=D.useRef([]),i=nY.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(jR(o)&&jR(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return D.useMemo(()=>{if(jR(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function LC(t={}){const e=Oa(t);return Dye(n=>WK(e,{onChange:n}),()=>$y(e))}var eb=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Cg=typeof window>"u"||"Deno"in globalThis;function ui(){}function Lye(t,e){return typeof t=="function"?t(e):t}function Bk(t){return typeof t=="number"&&t>=0&&t!==1/0}function rY(t,e){return Math.max(t+(e||0)-Date.now(),0)}function qh(t,e){return typeof t=="function"?t(e):t}function ya(t,e){return typeof t=="function"?t(e):t}function t8(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==wM(o,e.options))return!1}else if(!n_(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function n8(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Ag(e.options.mutationKey)!==Ag(i))return!1}else if(!n_(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function wM(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ag)(t)}function Ag(t){return JSON.stringify(t,(e,n)=>Fk(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function n_(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>n_(t[n],e[n])):!1}function bM(t,e){if(t===e)return t;const n=r8(t)&&r8(e);if(n||Fk(t)&&Fk(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=bM(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function NI(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function r8(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Fk(t){if(!s8(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!s8(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function s8(t){return Object.prototype.toString.call(t)==="[object Object]"}function Mye(t){return new Promise(e=>{setTimeout(e,t)})}function jk(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?bM(t,e):e}function Uye(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function $ye(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var vM=Symbol();function sY(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===vM?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function iY(t,e){return typeof t=="function"?t(...e):!!t}var _p,Qd,Yy,iz,Bye=(iz=class extends eb{constructor(){super();K(this,_p);K(this,Qd);K(this,Yy);U(this,Yy,e=>{if(!Cg&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){_(this,Qd)||this.setEventListener(_(this,Yy))}onUnsubscribe(){var e;this.hasListeners()||((e=_(this,Qd))==null||e.call(this),U(this,Qd,void 0))}setEventListener(e){var n;U(this,Yy,e),(n=_(this,Qd))==null||n.call(this),U(this,Qd,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){_(this,_p)!==e&&(U(this,_p,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof _(this,_p)=="boolean"?_(this,_p):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},_p=new WeakMap,Qd=new WeakMap,Yy=new WeakMap,iz),EM=new Bye,Qy,Jd,Jy,oz,Fye=(oz=class extends eb{constructor(){super();K(this,Qy,!0);K(this,Jd);K(this,Jy);U(this,Jy,e=>{if(!Cg&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){_(this,Jd)||this.setEventListener(_(this,Jy))}onUnsubscribe(){var e;this.hasListeners()||((e=_(this,Jd))==null||e.call(this),U(this,Jd,void 0))}setEventListener(e){var n;U(this,Jy,e),(n=_(this,Jd))==null||n.call(this),U(this,Jd,e(this.setOnline.bind(this)))}setOnline(e){_(this,Qy)!==e&&(U(this,Qy,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return _(this,Qy)}},Qy=new WeakMap,Jd=new WeakMap,Jy=new WeakMap,oz),TI=new Fye;function zk(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function jye(t){return Math.min(1e3*2**t,3e4)}function oY(t){return(t??"online")==="online"?TI.isOnline():!0}var aY=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function zR(t){return t instanceof aY}function cY(t){let e=!1,n=0,r=!1,s;const i=zk(),o=g=>{var y;r||(h(new aY(g)),(y=t.abort)==null||y.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>EM.isFocused()&&(t.networkMode==="always"||TI.isOnline())&&t.canRun(),u=()=>oY(t.networkMode)&&t.canRun(),d=g=>{var y;r||(r=!0,(y=t.onSuccess)==null||y.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var y;r||(r=!0,(y=t.onError)==null||y.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var y;s=m=>{(r||l())&&g(m)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const y=n===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(m){g=Promise.reject(m)}Promise.resolve(g).then(d).catch(m=>{var S;if(r)return;const w=t.retry??(Cg?0:3),v=t.retryDelay??jye,A=typeof v=="function"?v(n,m):v,C=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,m);if(e||!C){h(m);return}n++,(S=t.onFail)==null||S.call(t,n,m),Mye(A).then(()=>l()?void 0:f()).then(()=>{e?h(m):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var zye=t=>setTimeout(t,0);function Wye(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=zye;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Hr=Wye(),Cp,az,lY=(az=class{constructor(){K(this,Cp)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Bk(this.gcTime)&&U(this,Cp,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Cg?1/0:5*60*1e3))}clearGcTimeout(){_(this,Cp)&&(clearTimeout(_(this,Cp)),U(this,Cp,void 0))}},Cp=new WeakMap,az),Zy,Ap,la,Sp,Hs,K_,Ip,ec,cu,cz,Hye=(cz=class extends lY{constructor(e){super();K(this,ec);K(this,Zy);K(this,Ap);K(this,la);K(this,Sp);K(this,Hs);K(this,K_);K(this,Ip);U(this,Ip,!1),U(this,K_,e.defaultOptions),this.setOptions(e.options),this.observers=[],U(this,Sp,e.client),U(this,la,_(this,Sp).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,U(this,Zy,Gye(this.options)),this.state=e.state??_(this,Zy),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=_(this,Hs))==null?void 0:e.promise}setOptions(e){this.options={..._(this,K_),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&_(this,la).remove(this)}setData(e,n){const r=jk(this.state.data,e,this.options);return fe(this,ec,cu).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){fe(this,ec,cu).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=_(this,Hs))==null?void 0:r.promise;return(s=_(this,Hs))==null||s.cancel(e),n?n.then(ui).catch(ui):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(_(this,Zy))}isActive(){return this.observers.some(e=>ya(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===vM||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>qh(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!rY(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=_(this,Hs))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=_(this,Hs))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),_(this,la).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(_(this,Hs)&&(_(this,Ip)?_(this,Hs).cancel({revert:!0}):_(this,Hs).cancelRetry()),this.scheduleGc()),_(this,la).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||fe(this,ec,cu).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(_(this,Hs))return _(this,Hs).continueRetry(),_(this,Hs).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(U(this,Ip,!0),r.signal)})},i=()=>{const h=sY(this.options,n),p=(()=>{const g={client:_(this,Sp),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return U(this,Ip,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:_(this,Sp),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),U(this,Ap,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&fe(this,ec,cu).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,y;zR(h)&&h.silent||fe(this,ec,cu).call(this,{type:"error",error:h}),zR(h)||((p=(f=_(this,la).config).onError)==null||p.call(f,h,this),(y=(g=_(this,la).config).onSettled)==null||y.call(g,this.state.data,h,this)),this.scheduleGc()};return U(this,Hs,cY({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,y;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(m){c(m);return}(p=(f=_(this,la).config).onSuccess)==null||p.call(f,h,this),(y=(g=_(this,la).config).onSettled)==null||y.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{fe(this,ec,cu).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{fe(this,ec,cu).call(this,{type:"pause"})},onContinue:()=>{fe(this,ec,cu).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),_(this,Hs).start()}},Zy=new WeakMap,Ap=new WeakMap,la=new WeakMap,Sp=new WeakMap,Hs=new WeakMap,K_=new WeakMap,Ip=new WeakMap,ec=new WeakSet,cu=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...uY(r.data,this.options),fetchMeta:e.meta??null};case"success":return U(this,Ap,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return zR(s)&&s.revert&&_(this,Ap)?{..._(this,Ap),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Hr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),_(this,la).notify({query:this,type:"updated",action:e})})},cz);function uY(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:oY(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Gye(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Zc,lz,qye=(lz=class extends eb{constructor(e={}){super();K(this,Zc);this.config=e,U(this,Zc,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??wM(s,n);let o=this.get(i);return o||(o=new Hye({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){_(this,Zc).has(e.queryHash)||(_(this,Zc).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=_(this,Zc).get(e.queryHash);n&&(e.destroy(),n===e&&_(this,Zc).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Hr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return _(this,Zc).get(e)}getAll(){return[..._(this,Zc).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>t8(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>t8(e,r)):n}notify(e){Hr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Hr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Hr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Zc=new WeakMap,lz),Xc,ii,xp,el,Ld,uz,Vye=(uz=class extends lY{constructor(e){super();K(this,el);K(this,Xc);K(this,ii);K(this,xp);this.mutationId=e.mutationId,U(this,ii,e.mutationCache),U(this,Xc,[]),this.state=e.state||dY(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){_(this,Xc).includes(e)||(_(this,Xc).push(e),this.clearGcTimeout(),_(this,ii).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){U(this,Xc,_(this,Xc).filter(n=>n!==e)),this.scheduleGc(),_(this,ii).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){_(this,Xc).length||(this.state.status==="pending"?this.scheduleGc():_(this,ii).remove(this))}continue(){var e;return((e=_(this,xp))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,y,m,w,v,A,C,S,x,T;const n=()=>{fe(this,el,Ld).call(this,{type:"continue"})};U(this,xp,cY({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(I,k)=>{fe(this,el,Ld).call(this,{type:"failed",failureCount:I,error:k})},onPause:()=>{fe(this,el,Ld).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>_(this,ii).canRun(this)}));const r=this.state.status==="pending",s=!_(this,xp).canStart();try{if(r)n();else{fe(this,el,Ld).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=_(this,ii).config).onMutate)==null?void 0:o.call(i,e,this));const k=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));k!==this.state.context&&fe(this,el,Ld).call(this,{type:"pending",context:k,variables:e,isPaused:s})}const I=await _(this,xp).start();return await((u=(l=_(this,ii).config).onSuccess)==null?void 0:u.call(l,I,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,I,e,this.state.context)),await((p=(f=_(this,ii).config).onSettled)==null?void 0:p.call(f,I,null,this.state.variables,this.state.context,this)),await((y=(g=this.options).onSettled)==null?void 0:y.call(g,I,null,e,this.state.context)),fe(this,el,Ld).call(this,{type:"success",data:I}),I}catch(I){try{throw await((w=(m=_(this,ii).config).onError)==null?void 0:w.call(m,I,e,this.state.context,this)),await((A=(v=this.options).onError)==null?void 0:A.call(v,I,e,this.state.context)),await((S=(C=_(this,ii).config).onSettled)==null?void 0:S.call(C,void 0,I,this.state.variables,this.state.context,this)),await((T=(x=this.options).onSettled)==null?void 0:T.call(x,void 0,I,e,this.state.context)),I}finally{fe(this,el,Ld).call(this,{type:"error",error:I})}}finally{_(this,ii).runNext(this)}}},Xc=new WeakMap,ii=new WeakMap,xp=new WeakMap,el=new WeakSet,Ld=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Hr.batch(()=>{_(this,Xc).forEach(r=>{r.onMutationUpdate(e)}),_(this,ii).notify({mutation:this,type:"updated",action:e})})},uz);function dY(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var yu,tc,Y_,dz,Kye=(dz=class extends eb{constructor(e={}){super();K(this,yu);K(this,tc);K(this,Y_);this.config=e,U(this,yu,new Set),U(this,tc,new Map),U(this,Y_,0)}build(e,n,r){const s=new Vye({mutationCache:this,mutationId:++pd(this,Y_)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){_(this,yu).add(e);const n=V1(e);if(typeof n=="string"){const r=_(this,tc).get(n);r?r.push(e):_(this,tc).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(_(this,yu).delete(e)){const n=V1(e);if(typeof n=="string"){const r=_(this,tc).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&_(this,tc).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=V1(e);if(typeof n=="string"){const r=_(this,tc).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=V1(e);if(typeof n=="string"){const s=(r=_(this,tc).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Hr.batch(()=>{_(this,yu).forEach(e=>{this.notify({type:"removed",mutation:e})}),_(this,yu).clear(),_(this,tc).clear()})}getAll(){return Array.from(_(this,yu))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>n8(n,r))}findAll(e={}){return this.getAll().filter(n=>n8(e,n))}notify(e){Hr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Hr.batch(()=>Promise.all(e.map(n=>n.continue().catch(ui))))}},yu=new WeakMap,tc=new WeakMap,Y_=new WeakMap,dz);function V1(t){var e;return(e=t.options.scope)==null?void 0:e.id}function i8(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const y=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},m=sY(e.options,e.fetchOptions),w=async(v,A,C)=>{if(g)return Promise.reject();if(A==null&&v.pages.length)return Promise.resolve(v);const x=(()=>{const O={client:e.client,queryKey:e.queryKey,pageParam:A,direction:C?"backward":"forward",meta:e.options.meta};return y(O),O})(),T=await m(x),{maxPages:I}=e.options,k=C?$ye:Uye;return{pages:k(v.pages,T,I),pageParams:k(v.pageParams,A,I)}};if(s&&i.length){const v=s==="backward",A=v?Yye:o8,C={pages:i,pageParams:o},S=A(r,C);a=await w(C,S,v)}else{const v=t??i.length;do{const A=c===0?o[0]??r.initialPageParam:o8(r,a);if(c>0&&A==null)break;a=await w(a,A),c++}while(c<v)}return a};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function o8(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Yye(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var yr,Zd,Xd,Xy,ew,eh,tw,nw,hz,Qye=(hz=class{constructor(t={}){K(this,yr);K(this,Zd);K(this,Xd);K(this,Xy);K(this,ew);K(this,eh);K(this,tw);K(this,nw);U(this,yr,t.queryCache||new qye),U(this,Zd,t.mutationCache||new Kye),U(this,Xd,t.defaultOptions||{}),U(this,Xy,new Map),U(this,ew,new Map),U(this,eh,0)}mount(){pd(this,eh)._++,_(this,eh)===1&&(U(this,tw,EM.subscribe(async t=>{t&&(await this.resumePausedMutations(),_(this,yr).onFocus())})),U(this,nw,TI.subscribe(async t=>{t&&(await this.resumePausedMutations(),_(this,yr).onOnline())})))}unmount(){var t,e;pd(this,eh)._--,_(this,eh)===0&&((t=_(this,tw))==null||t.call(this),U(this,tw,void 0),(e=_(this,nw))==null||e.call(this),U(this,nw,void 0))}isFetching(t){return _(this,yr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return _(this,Zd).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=_(this,yr).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=_(this,yr).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(qh(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return _(this,yr).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=_(this,yr).get(r.queryHash),i=s==null?void 0:s.state.data,o=Lye(e,i);if(o!==void 0)return _(this,yr).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Hr.batch(()=>_(this,yr).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=_(this,yr).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=_(this,yr);Hr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=_(this,yr);return Hr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Hr.batch(()=>_(this,yr).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(ui).catch(ui)}invalidateQueries(t,e={}){return Hr.batch(()=>(_(this,yr).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Hr.batch(()=>_(this,yr).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(ui)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(ui)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=_(this,yr).build(this,e);return n.isStaleByTime(qh(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ui).catch(ui)}fetchInfiniteQuery(t){return t.behavior=i8(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ui).catch(ui)}ensureInfiniteQueryData(t){return t.behavior=i8(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return TI.isOnline()?_(this,Zd).resumePausedMutations():Promise.resolve()}getQueryCache(){return _(this,yr)}getMutationCache(){return _(this,Zd)}getDefaultOptions(){return _(this,Xd)}setDefaultOptions(t){U(this,Xd,t)}setQueryDefaults(t,e){_(this,Xy).set(Ag(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[..._(this,Xy).values()],n={};return e.forEach(r=>{n_(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){_(this,ew).set(Ag(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[..._(this,ew).values()],n={};return e.forEach(r=>{n_(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={..._(this,Xd).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=wM(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===vM&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{..._(this,Xd).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){_(this,yr).clear(),_(this,Zd).clear()}},yr=new WeakMap,Zd=new WeakMap,Xd=new WeakMap,Xy=new WeakMap,ew=new WeakMap,eh=new WeakMap,tw=new WeakMap,nw=new WeakMap,hz),Bi,Yt,Q_,oi,Np,rw,th,nh,J_,sw,iw,Tp,Rp,rh,ow,En,cv,Wk,Hk,Gk,qk,Vk,Kk,Yk,hY,fz,Jye=(fz=class extends eb{constructor(e,n){super();K(this,En);K(this,Bi);K(this,Yt);K(this,Q_);K(this,oi);K(this,Np);K(this,rw);K(this,th);K(this,nh);K(this,J_);K(this,sw);K(this,iw);K(this,Tp);K(this,Rp);K(this,rh);K(this,ow,new Set);this.options=n,U(this,Bi,e),U(this,nh,null),U(this,th,zk()),this.options.experimental_prefetchInRender||_(this,th).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(_(this,Yt).addObserver(this),a8(_(this,Yt),this.options)?fe(this,En,cv).call(this):this.updateResult(),fe(this,En,qk).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Qk(_(this,Yt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Qk(_(this,Yt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,fe(this,En,Vk).call(this),fe(this,En,Kk).call(this),_(this,Yt).removeObserver(this)}setOptions(e){const n=this.options,r=_(this,Yt);if(this.options=_(this,Bi).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ya(this.options.enabled,_(this,Yt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");fe(this,En,Yk).call(this),_(this,Yt).setOptions(this.options),n._defaulted&&!NI(this.options,n)&&_(this,Bi).getQueryCache().notify({type:"observerOptionsUpdated",query:_(this,Yt),observer:this});const s=this.hasListeners();s&&c8(_(this,Yt),r,this.options,n)&&fe(this,En,cv).call(this),this.updateResult(),s&&(_(this,Yt)!==r||ya(this.options.enabled,_(this,Yt))!==ya(n.enabled,_(this,Yt))||qh(this.options.staleTime,_(this,Yt))!==qh(n.staleTime,_(this,Yt)))&&fe(this,En,Wk).call(this);const i=fe(this,En,Hk).call(this);s&&(_(this,Yt)!==r||ya(this.options.enabled,_(this,Yt))!==ya(n.enabled,_(this,Yt))||i!==_(this,rh))&&fe(this,En,Gk).call(this,i)}getOptimisticResult(e){const n=_(this,Bi).getQueryCache().build(_(this,Bi),e),r=this.createResult(n,e);return Xye(this,r)&&(U(this,oi,r),U(this,rw,this.options),U(this,Np,_(this,Yt).state)),r}getCurrentResult(){return _(this,oi)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){_(this,ow).add(e)}getCurrentQuery(){return _(this,Yt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=_(this,Bi).defaultQueryOptions(e),r=_(this,Bi).getQueryCache().build(_(this,Bi),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return fe(this,En,cv).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),_(this,oi)))}createResult(e,n){var I;const r=_(this,Yt),s=this.options,i=_(this,oi),o=_(this,Np),a=_(this,rw),l=e!==r?e.state:_(this,Q_),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const k=this.hasListeners(),O=!k&&a8(e,n),B=k&&c8(e,r,n,s);(O||B)&&(d={...d,...uY(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:y}=d;f=d.data;let m=!1;if(n.placeholderData!==void 0&&f===void 0&&y==="pending"){let k;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(k=i.data,m=!0):k=typeof n.placeholderData=="function"?n.placeholderData((I=_(this,iw))==null?void 0:I.state.data,_(this,iw)):n.placeholderData,k!==void 0&&(y="success",f=jk(i==null?void 0:i.data,k,n),h=!0)}if(n.select&&f!==void 0&&!m)if(i&&f===(o==null?void 0:o.data)&&n.select===_(this,J_))f=_(this,sw);else try{U(this,J_,n.select),f=n.select(f),f=jk(i==null?void 0:i.data,f,n),U(this,sw,f),U(this,nh,null)}catch(k){U(this,nh,k)}_(this,nh)&&(p=_(this,nh),f=_(this,sw),g=Date.now(),y="error");const w=d.fetchStatus==="fetching",v=y==="pending",A=y==="error",C=v&&w,S=f!==void 0,T={status:y,fetchStatus:d.fetchStatus,isPending:v,isSuccess:y==="success",isError:A,isInitialLoading:C,isLoading:C,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:w,isRefetching:w&&!v,isLoadingError:A&&!S,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:A&&S,isStale:_M(e,n),refetch:this.refetch,promise:_(this,th),isEnabled:ya(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const k=G=>{T.status==="error"?G.reject(T.error):T.data!==void 0&&G.resolve(T.data)},O=()=>{const G=U(this,th,T.promise=zk());k(G)},B=_(this,th);switch(B.status){case"pending":e.queryHash===r.queryHash&&k(B);break;case"fulfilled":(T.status==="error"||T.data!==B.value)&&O();break;case"rejected":(T.status!=="error"||T.error!==B.reason)&&O();break}}return T}updateResult(){const e=_(this,oi),n=this.createResult(_(this,Yt),this.options);if(U(this,Np,_(this,Yt).state),U(this,rw,this.options),_(this,Np).data!==void 0&&U(this,iw,_(this,Yt)),NI(n,e))return;U(this,oi,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!_(this,ow).size)return!0;const o=new Set(i??_(this,ow));return this.options.throwOnError&&o.add("error"),Object.keys(_(this,oi)).some(a=>{const c=a;return _(this,oi)[c]!==e[c]&&o.has(c)})};fe(this,En,hY).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&fe(this,En,qk).call(this)}},Bi=new WeakMap,Yt=new WeakMap,Q_=new WeakMap,oi=new WeakMap,Np=new WeakMap,rw=new WeakMap,th=new WeakMap,nh=new WeakMap,J_=new WeakMap,sw=new WeakMap,iw=new WeakMap,Tp=new WeakMap,Rp=new WeakMap,rh=new WeakMap,ow=new WeakMap,En=new WeakSet,cv=function(e){fe(this,En,Yk).call(this);let n=_(this,Yt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(ui)),n},Wk=function(){fe(this,En,Vk).call(this);const e=qh(this.options.staleTime,_(this,Yt));if(Cg||_(this,oi).isStale||!Bk(e))return;const r=rY(_(this,oi).dataUpdatedAt,e)+1;U(this,Tp,setTimeout(()=>{_(this,oi).isStale||this.updateResult()},r))},Hk=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(_(this,Yt)):this.options.refetchInterval)??!1},Gk=function(e){fe(this,En,Kk).call(this),U(this,rh,e),!(Cg||ya(this.options.enabled,_(this,Yt))===!1||!Bk(_(this,rh))||_(this,rh)===0)&&U(this,Rp,setInterval(()=>{(this.options.refetchIntervalInBackground||EM.isFocused())&&fe(this,En,cv).call(this)},_(this,rh)))},qk=function(){fe(this,En,Wk).call(this),fe(this,En,Gk).call(this,fe(this,En,Hk).call(this))},Vk=function(){_(this,Tp)&&(clearTimeout(_(this,Tp)),U(this,Tp,void 0))},Kk=function(){_(this,Rp)&&(clearInterval(_(this,Rp)),U(this,Rp,void 0))},Yk=function(){const e=_(this,Bi).getQueryCache().build(_(this,Bi),this.options);if(e===_(this,Yt))return;const n=_(this,Yt);U(this,Yt,e),U(this,Q_,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},hY=function(e){Hr.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(_(this,oi))}),_(this,Bi).getQueryCache().notify({query:_(this,Yt),type:"observerResultsUpdated"})})},fz);function Zye(t,e){return ya(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function a8(t,e){return Zye(t,e)||t.state.data!==void 0&&Qk(t,e,e.refetchOnMount)}function Qk(t,e,n){if(ya(e.enabled,t)!==!1&&qh(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&_M(t,e)}return!1}function c8(t,e,n,r){return(t!==e||ya(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&_M(t,n)}function _M(t,e){return ya(e.enabled,t)!==!1&&t.isStaleByTime(qh(e.staleTime,t))}function Xye(t,e){return!NI(t.getCurrentResult(),e)}var sh,ih,Fi,wu,Ku,tS,Jk,pz,ewe=(pz=class extends eb{constructor(n,r){super();K(this,Ku);K(this,sh);K(this,ih);K(this,Fi);K(this,wu);U(this,sh,n),this.setOptions(r),this.bindMethods(),fe(this,Ku,tS).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=_(this,sh).defaultMutationOptions(n),NI(this.options,r)||_(this,sh).getMutationCache().notify({type:"observerOptionsUpdated",mutation:_(this,Fi),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Ag(r.mutationKey)!==Ag(this.options.mutationKey)?this.reset():((s=_(this,Fi))==null?void 0:s.state.status)==="pending"&&_(this,Fi).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=_(this,Fi))==null||n.removeObserver(this)}onMutationUpdate(n){fe(this,Ku,tS).call(this),fe(this,Ku,Jk).call(this,n)}getCurrentResult(){return _(this,ih)}reset(){var n;(n=_(this,Fi))==null||n.removeObserver(this),U(this,Fi,void 0),fe(this,Ku,tS).call(this),fe(this,Ku,Jk).call(this)}mutate(n,r){var s;return U(this,wu,r),(s=_(this,Fi))==null||s.removeObserver(this),U(this,Fi,_(this,sh).getMutationCache().build(_(this,sh),this.options)),_(this,Fi).addObserver(this),_(this,Fi).execute(n)}},sh=new WeakMap,ih=new WeakMap,Fi=new WeakMap,wu=new WeakMap,Ku=new WeakSet,tS=function(){var r;const n=((r=_(this,Fi))==null?void 0:r.state)??dY();U(this,ih,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Jk=function(n){Hr.batch(()=>{var r,s,i,o,a,c,l,u;if(_(this,wu)&&this.hasListeners()){const d=_(this,ih).variables,h=_(this,ih).context;(n==null?void 0:n.type)==="success"?((s=(r=_(this,wu)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=_(this,wu)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=_(this,wu)).onError)==null||c.call(a,n.error,d,h),(u=(l=_(this,wu)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(_(this,ih))})})},pz);function twe(t,e){return bM(t,e)}function nwe(t){return JSON.stringify(t,(e,n)=>rwe(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function rwe(t){if(!l8(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!l8(n)||!n.hasOwnProperty("isPrototypeOf"))}function l8(t){return Object.prototype.toString.call(t)==="[object Object]"}function wN(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:y,getNextPageParam:m,initialPageParam:w,_optimisticResults:v,enabled:A,notifyOnChangeProps:C,placeholderData:S,refetchInterval:x,refetchIntervalInBackground:T,refetchOnMount:I,refetchOnReconnect:k,refetchOnWindowFocus:O,retryOnMount:B,select:G,staleTime:W,suspense:R,throwOnError:N,config:M,connector:P,query:L,...F}=t;return F}function swe(t){return{mutationFn(e){return XA(t,e)},mutationKey:["connect"]}}function iwe(t){return{mutationFn(e){return Dk(t,e)},mutationKey:["disconnect"]}}function owe(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return Mme(t,{...i,address:r})},queryKey:awe(e)}}function awe(t={}){return["ensName",wN(t)]}function cwe(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return Ume(t,{...o,connector:r})},queryKey:lwe(e)}}function lwe(t={}){const{connector:e,...n}=t;return["walletClient",{...wN(n),connectorUid:e==null?void 0:e.uid}]}function uwe(t,e={}){return{async queryFn({queryKey:n}){const r=e.abi;if(!r)throw new Error("abi is required");const{functionName:s,scopeKey:i,...o}=n[1],a=(()=>{const c=n[1];if(c.address)return{address:c.address};if(c.code)return{code:c.code};throw new Error("address or code is required")})();if(!s)throw new Error("functionName is required");return zK(t,{abi:r,functionName:s,args:o.args,...a,...o})},queryKey:dwe(e)}}function dwe(t={}){const{abi:e,...n}=t;return["readContract",wN(n)]}function hwe(t,e={}){return{async queryFn({queryKey:n}){const{hash:r,...s}=n[1];if(!r)throw new Error("hash is required");return qK(t,{...s,onReplaced:e.onReplaced,hash:r})},queryKey:fwe(e)}}function fwe(t={}){const{onReplaced:e,...n}=t;return["waitForTransactionReceipt",wN(n)]}function pwe(t){return{mutationFn(e){return VK(t,e)},mutationKey:["writeContract"]}}var fY=D.createContext(void 0),CM=t=>{const e=D.useContext(fY);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},gwe=({client:t,children:e})=>(D.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),b.jsx(fY.Provider,{value:t,children:e})),pY=D.createContext(!1),mwe=()=>D.useContext(pY);pY.Provider;function ywe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var wwe=D.createContext(ywe()),bwe=()=>D.useContext(wwe),vwe=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},Ewe=t=>{D.useEffect(()=>{t.clearReset()},[t])},_we=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||iY(n,[t.error,r])),Cwe=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Awe=(t,e)=>t.isLoading&&t.isFetching&&!e,Swe=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,u8=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function Iwe(t,e,n){var d,h,f,p,g;const r=mwe(),s=bwe(),i=CM(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",Cwe(o),vwe(o,s),Ewe(s);const a=!i.getQueryCache().get(o.queryHash),[c]=D.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(D.useSyncExternalStore(D.useCallback(y=>{const m=u?c.subscribe(Hr.batchCalls(y)):ui;return c.updateResult(),m},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),D.useEffect(()=>{c.setOptions(o)},[o,c]),Swe(o,l))throw u8(o,c,s);if(_we({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!Cg&&Awe(l,r)){const y=a?u8(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;y==null||y.catch(ui).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function xwe(t,e){return Iwe(t,Jye)}function AM(t,e){const n=CM(),[r]=D.useState(()=>new ewe(n,t));D.useEffect(()=>{r.setOptions(t)},[r,t]);const s=D.useSyncExternalStore(D.useCallback(o=>r.subscribe(Hr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=D.useCallback((o,a)=>{r.mutate(o,a).catch(ui)},[r]);if(s.error&&iY(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function bN(t){const e=xwe({...t,queryKeyHashFn:nwe});return e.queryKey=t.queryKey,e}function vN(t={}){const e=Oa(t);return D.useSyncExternalStore(n=>zme(e,{onChange:n}),()=>Y6(e),()=>Y6(e))}function Nwe(t={}){const e=Oa(t);return D.useSyncExternalStore(n=>GK(e,{onChange:n}),()=>Q6(e),()=>Q6(e))}function gY(t={}){const{mutation:e}=t,n=Oa(t),r=swe(n),{mutate:s,mutateAsync:i,...o}=AM({...e,...r});return D.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:Nwe({config:n})}}function Twe(t={}){const e=Oa(t);return D.useSyncExternalStore(n=>HK(e,{onChange:n}),()=>Za(e),()=>Za(e))}function mY(t={}){const{mutation:e}=t,n=Oa(t),r=iwe(n),{mutate:s,mutateAsync:i,...o}=AM({...e,...r});return{...o,connectors:Twe({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function yY(t={}){const{address:e,query:n={}}=t,r=Oa(t),s=vN({config:r}),i=owe(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return bN({...n,...i,enabled:o})}function Rwe(t={}){const e=Oa(t);return nY.useSyncExternalStoreWithSelector(n=>Hme(e,{onChange:n}),()=>Lk(e,t),()=>Lk(e,t),n=>n,(n,r)=>(n==null?void 0:n.uid)===(r==null?void 0:r.uid))}function d8(t={}){const{abi:e,address:n,functionName:r,query:s={}}=t,i=t.code,o=Oa(t),a=vN({config:o}),c=uwe(o,{...t,chainId:t.chainId??a}),l=!!((n||i)&&e&&r&&(s.enabled??!0));return bN({...s,...c,enabled:l,structuralSharing:s.structuralSharing??twe})}function wY(t={}){const{query:e={},...n}=t,r=Oa(n),s=CM(),{address:i,connector:o,status:a}=LC({config:r}),c=vN({config:r}),l=t.connector??o,{queryKey:u,...d}=cwe(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=D.useRef(i);return D.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),bN({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}function WR(t={}){const{hash:e,query:n={}}=t,r=Oa(t),s=vN({config:r}),i=hwe(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return bN({...n,...i,enabled:o})}function HR(t={}){const{mutation:e}=t,n=Oa(t),r=pwe(n),{mutate:s,mutateAsync:i,...o}=AM({...e,...r});return{...o,writeContract:s,writeContractAsync:i}}const Pwe="_verified_lvyh0_1",SM={verified:Pwe},Owe=()=>b.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:SM.verified,children:b.jsx("g",{children:b.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),kwe=()=>b.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:SM.verified,children:b.jsxs("g",{children:[b.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[b.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),b.jsx("stop",{offset:".539",stopColor:"#cd8105"}),b.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),b.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),b.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),b.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[b.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),b.jsx("stop",{offset:".406",stopColor:"#e2b719"}),b.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),b.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[b.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),b.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),b.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),Dwe=()=>b.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:SM.verified,children:b.jsx("g",{children:b.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function bY(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=bY(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Vh(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=bY(t))&&(r&&(r+=" "),r+=e);return r}const Lwe="_root_98iqw_1",Mwe="_article_98iqw_21",h8={root:Lwe,article:Mwe},IM=({className:t,children:e})=>b.jsx("div",{className:Vh("react-tweet-theme",h8.root,t),children:b.jsx("article",{className:h8.article,children:e})}),vY=t=>b.jsx("img",{...t}),Uwe="_header_nqq4j_1",$we="_avatar_nqq4j_11",Bwe="_avatarOverflow_nqq4j_16",Fwe="_avatarSquare_nqq4j_23",jwe="_avatarShadow_nqq4j_26",zwe="_author_nqq4j_37",Wwe="_authorLink_nqq4j_44",Hwe="_authorVerified_nqq4j_53",Gwe="_authorLinkText_nqq4j_56",qwe="_authorMeta_nqq4j_63",Vwe="_authorFollow_nqq4j_66",Kwe="_username_nqq4j_69",Ywe="_follow_nqq4j_74",Qwe="_separator_nqq4j_82",Jwe="_brand_nqq4j_86",Zwe="_twitterIcon_nqq4j_90",ms={header:Uwe,avatar:$we,avatarOverflow:Bwe,avatarSquare:Fwe,avatarShadow:jwe,author:zwe,authorLink:Wwe,authorVerified:Hwe,authorLinkText:Gwe,authorMeta:qwe,authorFollow:Vwe,username:Kwe,follow:Ywe,separator:Qwe,brand:Jwe,twitterIcon:Zwe},Xwe="_verifiedOld_lcna5_1",e0e="_verifiedBlue_lcna5_4",t0e="_verifiedGovernment_lcna5_7",GR={verifiedOld:Xwe,verifiedBlue:e0e,verifiedGovernment:t0e},EY=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=b.jsx(Owe,{}),s=GR.verifiedBlue;if(n)switch(t.is_blue_verified||(s=GR.verifiedOld),t.verified_type){case"Government":r=b.jsx(Dwe,{}),s=GR.verifiedGovernment;break;case"Business":r=b.jsx(kwe,{}),s=null;break}return n?b.jsx("div",{className:Vh(e,s),children:r}):null},n0e=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:vY,{user:s}=t;return b.jsxs("div",{className:ms.header,children:[b.jsxs("a",{href:t.url,className:ms.avatar,target:"_blank",rel:"noopener noreferrer",children:[b.jsx("div",{className:Vh(ms.avatarOverflow,s.profile_image_shape==="Square"&&ms.avatarSquare),children:b.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),b.jsx("div",{className:ms.avatarOverflow,children:b.jsx("div",{className:ms.avatarShadow})})]}),b.jsxs("div",{className:ms.author,children:[b.jsxs("a",{href:t.url,className:ms.authorLink,target:"_blank",rel:"noopener noreferrer",children:[b.jsx("div",{className:ms.authorLinkText,children:b.jsx("span",{title:s.name,children:s.name})}),b.jsx(EY,{user:s,className:ms.authorVerified})]}),b.jsxs("div",{className:ms.authorMeta,children:[b.jsx("a",{href:t.url,className:ms.username,target:"_blank",rel:"noopener noreferrer",children:b.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),b.jsxs("div",{className:ms.authorFollow,children:[b.jsx("span",{className:ms.separator,children:"·"}),b.jsx("a",{href:s.follow_url,className:ms.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),b.jsx("a",{href:t.url,className:ms.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:b.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:ms.twitterIcon,children:b.jsx("g",{children:b.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},r0e="_root_1ec15_1",s0e={root:r0e},i0e=({tweet:t})=>b.jsxs("a",{href:t.in_reply_to_url,className:s0e.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),o0e="_root_eihfa_1",a0e={root:o0e},c0e=({href:t,children:e})=>b.jsx("a",{href:t,className:a0e.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),l0e="_root_1xq52_1",u0e={root:l0e},d0e=({tweet:t})=>b.jsx("p",{className:u0e.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return b.jsx(c0e,{href:e.href,children:e.text},n);case"media":return;default:return b.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),f8=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,_Y=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,h0e=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,f0e=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,p0e=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,g0e=t=>`https://x.com/hashtag/${t.text}`,m0e=t=>`https://x.com/search?q=%24${t.text}`,y0e=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,CY=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},w0e=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},b0e=t=>{const e=w0e(t);return e.length>1?e[1]:e[0]},Zk=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function p8(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return Lb(n,"hashtag",t.entities.hashtags),Lb(n,"mention",t.entities.user_mentions),Lb(n,"url",t.entities.urls),Lb(n,"symbol",t.entities.symbols),t.entities.media&&Lb(n,"media",t.entities.media),v0e(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:g0e(r),text:s});case"mention":return Object.assign(r,{href:_Y(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:m0e(r),text:s});default:return Object.assign(r,{text:s})}})}function Lb(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function v0e(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const E0e=t=>({...t,url:f8(t),user:{...t.user,url:_Y(t),follow_url:p0e(t)},like_url:h0e(t),reply_url:f0e(t),in_reply_to_url:t.in_reply_to_screen_name?y0e(t):void 0,entities:p8(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:f8(t.quoted_tweet),entities:p8(t.quoted_tweet)}:void 0}),_0e="_root_g9tkv_1",C0e="_rounded_g9tkv_6",A0e="_mediaWrapper_g9tkv_10",S0e="_grid2Columns_g9tkv_17",I0e="_grid3_g9tkv_20",x0e="_grid2x2_g9tkv_23",N0e="_mediaContainer_g9tkv_26",T0e="_mediaLink_g9tkv_34",R0e="_skeleton_g9tkv_38",P0e="_image_g9tkv_43",yo={root:_0e,rounded:C0e,mediaWrapper:A0e,grid2Columns:S0e,grid3:I0e,grid2x2:x0e,mediaContainer:N0e,mediaLink:T0e,skeleton:R0e,image:P0e},O0e="_anchor_fp31d_1",k0e="_videoButton_fp31d_17",D0e="_videoButtonIcon_fp31d_35",L0e="_watchOnTwitter_fp31d_44",M0e="_viewReplies_fp31d_60",_m={anchor:O0e,videoButton:k0e,videoButtonIcon:D0e,watchOnTwitter:L0e,viewReplies:M0e},U0e=({tweet:t,media:e})=>{const[n,r]=D.useState(!0),[s,i]=D.useState(!1),[o,a]=D.useState(!1),c=b0e(e);let l=0;return b.jsxs(b.Fragment,{children:[b.jsx("video",{className:yo.image,poster:CY(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:b.jsx("source",{src:c.url,type:c.content_type})}),n&&b.jsx("button",{type:"button",className:_m.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:b.jsx("svg",{viewBox:"0 0 24 24",className:_m.videoButtonIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&b.jsx("div",{className:_m.watchOnTwitter,children:b.jsx("a",{href:t.url,className:_m.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&b.jsx("a",{href:t.url,className:Vh(_m.anchor,_m.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},$0e=t=>b.jsx("img",{...t}),g8=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},AY=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:$0e;return b.jsx("div",{className:Vh(yo.root,!n&&yo.rounded),children:b.jsx("div",{className:Vh(yo.mediaWrapper,o>1&&yo.grid2Columns,o===3&&yo.grid3,o>4&&yo.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>b.jsx(D.Fragment,{children:l.type==="photo"?b.jsxs("a",{href:t.url,className:Vh(yo.mediaContainer,yo.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[b.jsx("div",{className:yo.skeleton,style:g8(l,o)}),b.jsx(c,{src:CY(l,"small"),alt:l.ext_alt_text||"Image",className:yo.image,draggable:!0})]},l.media_url_https):b.jsxs("div",{className:yo.mediaContainer,children:[b.jsx("div",{className:yo.skeleton,style:g8(l,o)}),b.jsx(U0e,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},B0e={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},F0e=new Intl.DateTimeFormat("en-US",B0e),j0e=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},z0e=t=>{const e=j0e(F0e.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n} · ${r}`},W0e="_root_i24yn_1",H0e={root:W0e},G0e=({tweet:t})=>{const e=new Date(t.created_at),n=z0e(e);return b.jsx("a",{className:H0e.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:b.jsx("time",{dateTime:e.toISOString(),children:n})})},q0e="_info_19qcj_1",V0e="_infoLink_19qcj_10",K0e="_infoIcon_19qcj_30",qR={info:q0e,infoLink:V0e,infoIcon:K0e},Y0e=({tweet:t})=>b.jsxs("div",{className:qR.info,children:[b.jsx(G0e,{tweet:t}),b.jsx("a",{className:qR.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:b.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:qR.infoIcon,children:b.jsx("g",{children:b.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),Q0e="_actions_n2anf_1",J0e="_like_n2anf_13",Z0e="_reply_n2anf_14",X0e="_copy_n2anf_15",ebe="_likeIconWrapper_n2anf_27",tbe="_likeCount_n2anf_30",nbe="_replyIconWrapper_n2anf_35",rbe="_copyIconWrapper_n2anf_36",sbe="_likeIcon_n2anf_27",ibe="_replyIcon_n2anf_35",obe="_copyIcon_n2anf_36",abe="_replyText_n2anf_56",cbe="_copyText_n2anf_57",Wi={actions:Q0e,like:J0e,reply:Z0e,copy:X0e,likeIconWrapper:ebe,likeCount:tbe,replyIconWrapper:nbe,copyIconWrapper:rbe,likeIcon:sbe,replyIcon:ibe,copyIcon:obe,replyText:abe,copyText:cbe},lbe=({tweet:t})=>{const[e,n]=D.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return D.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),b.jsxs("button",{type:"button",className:Wi.copy,"aria-label":"Copy link",onClick:r,children:[b.jsx("div",{className:Wi.copyIconWrapper,children:e?b.jsx("svg",{viewBox:"0 0 24 24",className:Wi.copyIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):b.jsx("svg",{viewBox:"0 0 24 24",className:Wi.copyIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),b.jsx("span",{className:Wi.copyText,children:e?"Copied!":"Copy link"})]})},ube=({tweet:t})=>{const e=Zk(t.favorite_count);return b.jsxs("div",{className:Wi.actions,children:[b.jsxs("a",{className:Wi.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[b.jsx("div",{className:Wi.likeIconWrapper,children:b.jsx("svg",{viewBox:"0 0 24 24",className:Wi.likeIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),b.jsx("span",{className:Wi.likeCount,children:e})]}),b.jsxs("a",{className:Wi.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[b.jsx("div",{className:Wi.replyIconWrapper,children:b.jsx("svg",{viewBox:"0 0 24 24",className:Wi.replyIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),b.jsx("span",{className:Wi.replyText,children:"Reply"})]}),b.jsx(lbe,{tweet:t})]})},dbe="_replies_1cutb_1",hbe="_link_1cutb_4",fbe="_text_1cutb_23",VR={replies:dbe,link:hbe,text:fbe},pbe=({tweet:t})=>b.jsx("div",{className:VR.replies,children:b.jsx("a",{className:VR.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:b.jsx("span",{className:VR.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${Zk(t.conversation_count)} reply`:`Read ${Zk(t.conversation_count)} replies`})})}),gbe="_root_q5799_1",mbe="_article_q5799_16",m8={root:gbe,article:mbe},ybe=({tweet:t,children:e})=>b.jsx("div",{className:m8.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:b.jsx("article",{className:m8.article,children:e})}),wbe="_header_r31i5_1",bbe="_avatar_r31i5_11",vbe="_avatarSquare_r31i5_17",Ebe="_author_r31i5_21",_be="_authorText_r31i5_26",Cbe="_username_r31i5_33",Nf={header:wbe,avatar:bbe,avatarSquare:vbe,author:Ebe,authorText:_be,username:Cbe},Abe=({tweet:t})=>{const{user:e}=t;return b.jsxs("div",{className:Nf.header,children:[b.jsx("a",{href:t.url,className:Nf.avatar,target:"_blank",rel:"noopener noreferrer",children:b.jsx("div",{className:Vh(Nf.avatarOverflow,e.profile_image_shape==="Square"&&Nf.avatarSquare),children:b.jsx(vY,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),b.jsxs("div",{className:Nf.author,children:[b.jsx("div",{className:Nf.authorText,children:b.jsx("span",{title:e.name,children:e.name})}),b.jsx(EY,{user:e}),b.jsx("div",{className:Nf.username,children:b.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},Sbe="_root_175ot_1",Ibe={root:Sbe},xbe=({tweet:t})=>b.jsx("p",{className:Ibe.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>b.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),Nbe=({tweet:t})=>{var e;return b.jsxs(ybe,{tweet:t,children:[b.jsx(Abe,{tweet:t}),b.jsx(xbe,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?b.jsx(AY,{quoted:!0,tweet:t}):null]})},Tbe=({tweet:t,components:e})=>{var n;const r=D.useMemo(()=>E0e(t),[t]);return b.jsxs(IM,{children:[b.jsx(n0e,{tweet:r,components:e}),r.in_reply_to_status_id_str&&b.jsx(i0e,{tweet:r}),b.jsx(d0e,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?b.jsx(AY,{tweet:r,components:e}):null,r.quoted_tweet&&b.jsx(Nbe,{tweet:r.quoted_tweet}),b.jsx(Y0e,{tweet:r}),b.jsx(ube,{tweet:r}),b.jsx(pbe,{tweet:r})]})},Rbe="_root_16yxa_1",Pbe={root:Rbe},Obe=t=>b.jsx(IM,{children:b.jsxs("div",{className:Pbe.root,children:[b.jsx("h3",{children:"Tweet not found"}),b.jsx("p",{children:"The embedded tweet could not be found…"})]})}),kbe="_skeleton_oi7hr_1",Dbe={skeleton:kbe},K1=({style:t})=>b.jsx("span",{className:Dbe.skeleton,style:t}),Lbe="_root_17qqv_1",Mbe={root:Lbe},Ube=()=>b.jsxs(IM,{className:Mbe.root,children:[b.jsx(K1,{style:{height:"3rem",marginBottom:"0.75rem"}}),b.jsx(K1,{style:{height:"6rem",margin:"0.5rem 0"}}),b.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),b.jsx(K1,{style:{height:"2rem"}}),b.jsx(K1,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]}),SY=0,IY=1,xY=2,y8=3;var w8=Object.prototype.hasOwnProperty;function Xk(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&Xk(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(w8.call(t,n)&&++r&&!w8.call(e,n)||!(n in e)||!Xk(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const Ru=new WeakMap,Ih=()=>{},hi=Ih(),eD=Object,nn=t=>t===hi,yl=t=>typeof t=="function",lf=(t,e)=>({...t,...e}),NY=t=>yl(t.then),KR={},Y1={},xM="undefined",MC=typeof window!=xM,tD=typeof document!=xM,$be=MC&&"Deno"in window,Bbe=()=>MC&&typeof window.requestAnimationFrame!=xM,TY=(t,e)=>{const n=Ru.get(t);return[()=>!nn(e)&&t.get(e)||KR,r=>{if(!nn(e)){const s=t.get(e);e in Y1||(Y1[e]=s),n[5](e,lf(s,r),s||KR)}},n[6],()=>!nn(e)&&e in Y1?Y1[e]:!nn(e)&&t.get(e)||KR]};let nD=!0;const Fbe=()=>nD,[rD,sD]=MC&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Ih,Ih],jbe=()=>{const t=tD&&document.visibilityState;return nn(t)||t!=="hidden"},zbe=t=>(tD&&document.addEventListener("visibilitychange",t),rD("focus",t),()=>{tD&&document.removeEventListener("visibilitychange",t),sD("focus",t)}),Wbe=t=>{const e=()=>{nD=!0,t()},n=()=>{nD=!1};return rD("online",e),rD("offline",n),()=>{sD("online",e),sD("offline",n)}},Hbe={isOnline:Fbe,isVisible:jbe},Gbe={initFocus:zbe,initReconnect:Wbe},b8=!Do.useId,r_=!MC||$be,qbe=t=>Bbe()?window.requestAnimationFrame(t):setTimeout(t,1),YR=r_?D.useEffect:D.useLayoutEffect,QR=typeof navigator<"u"&&navigator.connection,v8=!r_&&QR&&(["slow-2g","2g"].includes(QR.effectiveType)||QR.saveData),Q1=new WeakMap,Vbe=t=>eD.prototype.toString.call(t),JR=(t,e)=>t===`[object ${e}]`;let Kbe=0;const iD=t=>{const e=typeof t,n=Vbe(t),r=JR(n,"Date"),s=JR(n,"RegExp"),i=JR(n,"Object");let o,a;if(eD(t)===t&&!r&&!s){if(o=Q1.get(t),o)return o;if(o=++Kbe+"~",Q1.set(t,o),Array.isArray(t)){for(o="@",a=0;a<t.length;a++)o+=iD(t[a])+",";Q1.set(t,o)}if(i){o="#";const c=eD.keys(t).sort();for(;!nn(a=c.pop());)nn(t[a])||(o+=a+":"+iD(t[a])+",");Q1.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},NM=t=>{if(yl(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?iD(t):"",[t,e]};let Ybe=0;const oD=()=>++Ybe;async function RY(...t){const[e,n,r,s]=t,i=lf({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(yl(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=NM(h);if(!f)return;const[p,g]=TY(e,f),[y,m,w,v]=Ru.get(e),A=()=>{const W=y[f];return(yl(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete w[f],delete v[f],W&&W[0])?W[0](xY).then(()=>p().data):p().data};if(t.length<3)return A();let C=r,S,x=!1;const T=oD();m[f]=[T,0];const I=!nn(c),k=p(),O=k.data,B=k._c,G=nn(B)?O:B;if(I&&(c=yl(c)?c(G,O):c,g({data:c,_c:G})),yl(C))try{C=C(G)}catch(W){S=W,x=!0}if(C&&NY(C))if(C=await C.catch(W=>{S=W,x=!0}),T!==m[f][0]){if(x)throw S;return C}else x&&I&&l(S)&&(o=!0,g({data:G,_c:hi}));if(o&&!x)if(yl(o)){const W=o(C,G);g({data:W,error:hi,_c:hi})}else g({data:C,error:hi,_c:hi});if(m[f][1]=oD(),Promise.resolve(A()).then(()=>{g({_c:hi})}),x){if(u)throw S;return}return C}}const E8=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},Qbe=(t,e)=>{if(!Ru.has(t)){const n=lf(Gbe,e),r=Object.create(null),s=RY.bind(hi,t);let i=Ih;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!Ru.has(t)&&(Ru.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!r_)){const u=n.initFocus(setTimeout.bind(hi,E8.bind(hi,r,SY))),d=n.initReconnect(setTimeout.bind(hi,E8.bind(hi,r,IY)));i=()=>{u&&u(),d&&d(),Ru.delete(t)}}};return l(),[t,s,l,i]}return[t,Ru.get(t)[4]]},Jbe=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!nn(i)&&o>i||setTimeout(r,a,s)},Zbe=Xk,[PY,Xbe]=Qbe(new Map),eve=lf({onLoadingSlow:Ih,onSuccess:Ih,onError:Ih,onErrorRetry:Jbe,onDiscarded:Ih,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:v8?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:v8?5e3:3e3,compare:Zbe,isPaused:()=>!1,cache:PY,mutate:Xbe,fallback:{}},Hbe),tve=(t,e)=>{const n=lf(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=lf(s,o))}return n},nve=D.createContext({}),rve="$inf$",OY=MC&&window.__SWR_DEVTOOLS_USE__,sve=OY?window.__SWR_DEVTOOLS_USE__:[],ive=()=>{OY&&(window.__SWR_DEVTOOLS_REACT__=Do)},ove=t=>yl(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],ave=()=>lf(eve,D.useContext(nve)),cve=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=NM(e),[,,,a]=Ru.get(PY);if(o.startsWith(rve))return n(...i);const c=a[o];return nn(c)?n(...i):(delete a[o],c)}),r),lve=sve.concat(cve),uve=t=>function(...n){const r=ave(),[s,i,o]=ove(n),a=tve(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(lve);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},dve=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};ive();const ZR=Do.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),XR={dedupe:!0},hve=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,y]=Ru.get(r),[m,w]=NM(t),v=D.useRef(!1),A=D.useRef(!1),C=D.useRef(m),S=D.useRef(e),x=D.useRef(n),T=()=>x.current,I=()=>T().isVisible()&&T().isOnline(),[k,O,B,G]=TY(r,m),W=D.useRef({}).current,R=nn(o)?nn(n.fallback)?hi:n.fallback[m]:o,N=(_e,Ae)=>{for(const tt in W){const Se=tt;if(Se==="data"){if(!s(_e[Se],Ae[Se])&&(!nn(_e[Se])||!s(re,Ae[Se])))return!1}else if(Ae[Se]!==_e[Se])return!1}return!0},M=D.useMemo(()=>{const _e=!m||!e?!1:nn(a)?T().isPaused()||i?!1:c!==!1:a,Ae=kt=>{const nr=lf(kt);return delete nr._k,_e?{isValidating:!0,isLoading:!0,...nr}:nr},tt=k(),Se=G(),Gt=Ae(tt),sn=tt===Se?Gt:Ae(Se);let Me=Gt;return[()=>{const kt=Ae(k());return N(kt,Me)?(Me.data=kt.data,Me.isLoading=kt.isLoading,Me.isValidating=kt.isValidating,Me.error=kt.error,Me):(Me=kt,kt)},()=>sn]},[r,m]),P=tY.useSyncExternalStore(D.useCallback(_e=>B(m,(Ae,tt)=>{N(tt,Ae)||_e()}),[r,m]),M[0],M[1]),L=!v.current,F=f[m]&&f[m].length>0,q=P.data,ne=nn(q)?R&&NY(R)?ZR(R):R:q,le=P.error,ie=D.useRef(ne),re=h?nn(q)?nn(ie.current)?ne:ie.current:q:ne,ye=F&&!nn(le)?!1:L&&!nn(a)?a:T().isPaused()?!1:i?nn(ne)?!1:c:nn(ne)||c,Z=!!(m&&e&&L&&ye),oe=nn(P.isValidating)?Z:P.isValidating,he=nn(P.isLoading)?Z:P.isLoading,de=D.useCallback(async _e=>{const Ae=S.current;if(!m||!Ae||A.current||T().isPaused())return!1;let tt,Se,Gt=!0;const sn=_e||{},Me=!g[m]||!sn.dedupe,kt=()=>b8?!A.current&&m===C.current&&v.current:m===C.current,nr={isValidating:!1,isLoading:!1},Dn=()=>{O(nr)},Vo=()=>{const Sr=g[m];Sr&&Sr[1]===Se&&delete g[m]},Wl={isValidating:!0};nn(k().data)&&(Wl.isLoading=!0);try{if(Me&&(O(Wl),n.loadingTimeout&&nn(k().data)&&setTimeout(()=>{Gt&&kt()&&T().onLoadingSlow(m,n)},n.loadingTimeout),g[m]=[Ae(w),oD()]),[tt,Se]=g[m],tt=await tt,Me&&setTimeout(Vo,n.dedupingInterval),!g[m]||g[m][1]!==Se)return Me&&kt()&&T().onDiscarded(m),!1;nr.error=hi;const Sr=p[m];if(!nn(Sr)&&(Se<=Sr[0]||Se<=Sr[1]||Sr[1]===0))return Dn(),Me&&kt()&&T().onDiscarded(m),!1;const Bs=k().data;nr.data=s(Bs,tt)?Bs:tt,Me&&kt()&&T().onSuccess(tt,m,n)}catch(Sr){Vo();const Bs=T(),{shouldRetryOnError:Ua}=Bs;Bs.isPaused()||(nr.error=Sr,Me&&kt()&&(Bs.onError(Sr,m,Bs),(Ua===!0||yl(Ua)&&Ua(Sr))&&(!T().revalidateOnFocus||!T().revalidateOnReconnect||I())&&Bs.onErrorRetry(Sr,m,Bs,Ii=>{const pr=f[m];pr&&pr[0]&&pr[0](y8,Ii)},{retryCount:(sn.retryCount||0)+1,dedupe:!0})))}return Gt=!1,Dn(),!0},[m,r]),be=D.useCallback((..._e)=>RY(r,C.current,..._e),[]);if(YR(()=>{S.current=e,x.current=n,nn(q)||(ie.current=q)}),YR(()=>{if(!m)return;const _e=de.bind(hi,XR);let Ae=0;T().revalidateOnFocus&&(Ae=Date.now()+T().focusThrottleInterval);const Se=dve(m,f,(Gt,sn={})=>{if(Gt==SY){const Me=Date.now();T().revalidateOnFocus&&Me>Ae&&I()&&(Ae=Me+T().focusThrottleInterval,_e())}else if(Gt==IY)T().revalidateOnReconnect&&I()&&_e();else{if(Gt==xY)return de();if(Gt==y8)return de(sn)}});return A.current=!1,C.current=m,v.current=!0,O({_k:w}),ye&&(g[m]||(nn(ne)||r_?_e():qbe(_e))),()=>{A.current=!0,Se()}},[m]),YR(()=>{let _e;function Ae(){const Se=yl(l)?l(k().data):l;Se&&_e!==-1&&(_e=setTimeout(tt,Se))}function tt(){!k().error&&(u||T().isVisible())&&(d||T().isOnline())?de(XR).then(Ae):Ae()}return Ae(),()=>{_e&&(clearTimeout(_e),_e=-1)}},[l,u,d,m]),D.useDebugValue(re),i&&nn(ne)&&m){if(!b8&&r_)throw new Error("Fallback data is required when using Suspense in SSR.");S.current=e,x.current=n,A.current=!1;const _e=y[m];if(!nn(_e)){const Ae=be(_e);ZR(Ae)}if(nn(le)){const Ae=de(XR);nn(re)||(Ae.status="fulfilled",Ae.value=!0),ZR(Ae)}else throw le}return{mutate:be,get data(){return W.data=!0,re},get error(){return W.error=!0,le},get isValidating(){return W.isValidating=!0,oe},get isLoading(){return W.isLoading=!0,he}}},_8=uve(hve);class fve extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const pve=_8.default||_8,gve="https://react-tweet.vercel.app";async function mve([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new fve({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const yve=(t,e,n)=>{const{isLoading:r,data:s,error:i}=pve(()=>e||t?[e||t&&`${gve}/api/tweet/${t}`,n]:null,mve,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},wve=({id:t,apiUrl:e,fallback:n=b.jsx(Ube,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=yve(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||Obe;return b.jsx(l,{error:i?i(a):a})}return b.jsx(Tbe,{tweet:o,components:r})};var EN={exports:{}},kY={},DY={exports:{}},bve="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",vve=bve,Eve=vve;function LY(){}function MY(){}MY.resetWarningCache=LY;var _ve=function(){function t(r,s,i,o,a,c){if(c!==Eve){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:MY,resetWarningCache:LY};return n.PropTypes=n,n};DY.exports=_ve();var UY=DY.exports,aD={exports:{}};function $Y(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=$Y(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function C8(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=$Y(t))&&(r&&(r+=" "),r+=e);return r}aD.exports=C8,aD.exports.clsx=C8;var Cve=aD.exports,Ar={},jl={};Object.defineProperty(jl,"__esModule",{value:!0});jl.dontSetMe=Nve;jl.findInArray=Ave;jl.int=xve;jl.isFunction=Sve;jl.isNum=Ive;function Ave(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function Sve(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function Ive(t){return typeof t=="number"&&!isNaN(t)}function xve(t){return parseInt(t,10)}function Nve(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var Zg={};Object.defineProperty(Zg,"__esModule",{value:!0});Zg.browserPrefixToKey=FY;Zg.browserPrefixToStyle=Tve;Zg.default=void 0;Zg.getPrefix=BY;const eP=["Moz","Webkit","O","ms"];function BY(){var n,r;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(r=(n=window.document)==null?void 0:n.documentElement)==null?void 0:r.style;if(!e||t in e)return"";for(let s=0;s<eP.length;s++)if(FY(t,eP[s])in e)return eP[s];return""}function FY(t,e){return e?`${e}${Rve(t)}`:t}function Tve(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function Rve(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}Zg.default=BY();Object.defineProperty(Ar,"__esModule",{value:!0});Ar.addClassName=WY;Ar.addEvent=Ove;Ar.addUserSelectStyles=Wve;Ar.createCSSTransform=Bve;Ar.createSVGTransform=Fve;Ar.getTouch=jve;Ar.getTouchIdentifier=zve;Ar.getTranslation=TM;Ar.innerHeight=Mve;Ar.innerWidth=Uve;Ar.matchesSelector=zY;Ar.matchesSelectorAndParentsTo=Pve;Ar.offsetXYFromParent=$ve;Ar.outerHeight=Dve;Ar.outerWidth=Lve;Ar.removeClassName=HY;Ar.removeEvent=kve;Ar.scheduleRemoveUserSelectStyles=Hve;var Uo=jl,A8=jY(Zg);function jY(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(jY=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}let J1="";function zY(t,e){return J1||(J1=(0,Uo.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,Uo.isFunction)(t[n])})),(0,Uo.isFunction)(t[J1])?t[J1](e):!1}function Pve(t,e,n){let r=t;do{if(zY(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function Ove(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function kve(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function Dve(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Uo.int)(n.borderTopWidth),e+=(0,Uo.int)(n.borderBottomWidth),e}function Lve(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Uo.int)(n.borderLeftWidth),e+=(0,Uo.int)(n.borderRightWidth),e}function Mve(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Uo.int)(n.paddingTop),e-=(0,Uo.int)(n.paddingBottom),e}function Uve(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Uo.int)(n.paddingLeft),e-=(0,Uo.int)(n.paddingRight),e}function $ve(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function Bve(t,e){const n=TM(t,e,"px");return{[(0,A8.browserPrefixToKey)("transform",A8.default)]:n}}function Fve(t,e){return TM(t,e,"")}function TM(t,e,n){let{x:r,y:s}=t,i=`translate(${r}${n},${s}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${o}, ${a})`+i}return i}function jve(t,e){return t.targetTouches&&(0,Uo.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,Uo.findInArray)(t.changedTouches,n=>e===n.identifier)}function zve(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function Wve(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&WY(t.body,"react-draggable-transparent-selection")}function Hve(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{S8(t)}):S8(t)}function S8(t){if(t)try{if(t.body&&HY(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function WY(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function HY(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var zl={};Object.defineProperty(zl,"__esModule",{value:!0});zl.canDragX=Vve;zl.canDragY=Kve;zl.createCoreData=Qve;zl.createDraggableData=Jve;zl.getBoundPosition=Gve;zl.getControlPosition=Yve;zl.snapToGrid=qve;var wo=jl,by=Ar;function Gve(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:Zve(r);const s=RM(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=s.getRootNode().querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,wo.int)(u.paddingLeft)+(0,wo.int)(l.marginLeft),top:-s.offsetTop+(0,wo.int)(u.paddingTop)+(0,wo.int)(l.marginTop),right:(0,by.innerWidth)(c)-(0,by.outerWidth)(s)-s.offsetLeft+(0,wo.int)(u.paddingRight)-(0,wo.int)(l.marginRight),bottom:(0,by.innerHeight)(c)-(0,by.outerHeight)(s)-s.offsetTop+(0,wo.int)(u.paddingBottom)-(0,wo.int)(l.marginBottom)}}return(0,wo.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,wo.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,wo.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,wo.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function qve(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function Vve(t){return t.props.axis==="both"||t.props.axis==="x"}function Kve(t){return t.props.axis==="both"||t.props.axis==="y"}function Yve(t,e,n){const r=typeof e=="number"?(0,by.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=RM(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,by.offsetXYFromParent)(r||t,i,n.props.scale)}function Qve(t,e,n){const r=!(0,wo.isNum)(t.lastX),s=RM(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function Jve(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function Zve(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function RM(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var _N={},CN={};Object.defineProperty(CN,"__esModule",{value:!0});CN.default=Xve;function Xve(){}Object.defineProperty(_N,"__esModule",{value:!0});_N.default=void 0;var tP=GY(D),ni=PM(UY),eEe=PM(kL),zs=Ar,wd=zl,nP=jl,Mb=PM(CN);function PM(t){return t&&t.__esModule?t:{default:t}}function GY(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(GY=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}function si(t,e,n){return(e=tEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tEe(t){var e=nEe(t,"string");return typeof e=="symbol"?e:e+""}function nEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const qa={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let bd=qa.mouse,AN=class extends tP.Component{constructor(){super(...arguments),si(this,"dragging",!1),si(this,"lastX",NaN),si(this,"lastY",NaN),si(this,"touchIdentifier",null),si(this,"mounted",!1),si(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,zs.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,zs.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const s=(0,zs.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,wd.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,wd.createCoreData)(this,o,a);(0,Mb.default)("DraggableCore: handleDragStart: %j",c),(0,Mb.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,zs.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,zs.addEvent)(r,bd.move,this.handleDrag),(0,zs.addEvent)(r,bd.stop,this.handleDragStop))}),si(this,"handleDrag",e=>{const n=(0,wd.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,wd.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,wd.createCoreData)(this,r,s);if((0,Mb.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),si(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,wd.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,wd.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,wd.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,zs.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,Mb.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,Mb.default)("DraggableCore: Removing handlers"),(0,zs.removeEvent)(a.ownerDocument,bd.move,this.handleDrag),(0,zs.removeEvent)(a.ownerDocument,bd.stop,this.handleDragStop))}),si(this,"onMouseDown",e=>(bd=qa.mouse,this.handleDragStart(e))),si(this,"onMouseUp",e=>(bd=qa.mouse,this.handleDragStop(e))),si(this,"onTouchStart",e=>(bd=qa.touch,this.handleDragStart(e))),si(this,"onTouchEnd",e=>(bd=qa.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,zs.addEvent)(e,qa.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,zs.removeEvent)(n,qa.mouse.move,this.handleDrag),(0,zs.removeEvent)(n,qa.touch.move,this.handleDrag),(0,zs.removeEvent)(n,qa.mouse.stop,this.handleDragStop),(0,zs.removeEvent)(n,qa.touch.stop,this.handleDragStop),(0,zs.removeEvent)(e,qa.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,zs.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,r;return(e=this.props)!=null&&e.nodeRef?(r=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:r.current:eEe.default.findDOMNode(this)}render(){return tP.cloneElement(tP.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};_N.default=AN;si(AN,"displayName","DraggableCore");si(AN,"propTypes",{allowAnyClick:ni.default.bool,allowMobileScroll:ni.default.bool,children:ni.default.node.isRequired,disabled:ni.default.bool,enableUserSelectHack:ni.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:ni.default.arrayOf(ni.default.number),handle:ni.default.string,cancel:ni.default.string,nodeRef:ni.default.object,onStart:ni.default.func,onDrag:ni.default.func,onStop:ni.default.func,onMouseDown:ni.default.func,scale:ni.default.number,className:nP.dontSetMe,style:nP.dontSetMe,transform:nP.dontSetMe});si(AN,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=d(D),n=u(UY),r=u(kL),s=Cve,i=Ar,o=zl,a=jl,c=u(_N),l=u(CN);function u(m){return m&&m.__esModule?m:{default:m}}function d(m,w){if(typeof WeakMap=="function")var v=new WeakMap,A=new WeakMap;return(d=function(C,S){if(!S&&C&&C.__esModule)return C;var x,T,I={__proto__:null,default:C};if(C===null||typeof C!="object"&&typeof C!="function")return I;if(x=S?A:v){if(x.has(C))return x.get(C);x.set(C,I)}for(const k in C)k!=="default"&&{}.hasOwnProperty.call(C,k)&&((T=(x=Object.defineProperty)&&Object.getOwnPropertyDescriptor(C,k))&&(T.get||T.set)?x(I,k,T):I[k]=C[k]);return I})(m,w)}function h(){return h=Object.assign?Object.assign.bind():function(m){for(var w=1;w<arguments.length;w++){var v=arguments[w];for(var A in v)({}).hasOwnProperty.call(v,A)&&(m[A]=v[A])}return m},h.apply(null,arguments)}function f(m,w,v){return(w=p(w))in m?Object.defineProperty(m,w,{value:v,enumerable:!0,configurable:!0,writable:!0}):m[w]=v,m}function p(m){var w=g(m,"string");return typeof w=="symbol"?w:w+""}function g(m,w){if(typeof m!="object"||!m)return m;var v=m[Symbol.toPrimitive];if(v!==void 0){var A=v.call(m,w);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(m)}class y extends e.Component{static getDerivedStateFromProps(w,v){let{position:A}=w,{prevPropsPosition:C}=v;return A&&(!C||A.x!==C.x||A.y!==C.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:A,prevPropsPosition:C}),{x:A.x,y:A.y,prevPropsPosition:{...A}}):null}constructor(w){super(w),f(this,"onDragStart",(v,A)=>{if((0,l.default)("Draggable: onDragStart: %j",A),this.props.onStart(v,(0,o.createDraggableData)(this,A))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),f(this,"onDrag",(v,A)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",A);const C=(0,o.createDraggableData)(this,A),S={x:C.x,y:C.y,slackX:0,slackY:0};if(this.props.bounds){const{x:T,y:I}=S;S.x+=this.state.slackX,S.y+=this.state.slackY;const[k,O]=(0,o.getBoundPosition)(this,S.x,S.y);S.x=k,S.y=O,S.slackX=this.state.slackX+(T-S.x),S.slackY=this.state.slackY+(I-S.y),C.x=S.x,C.y=S.y,C.deltaX=S.x-this.state.x,C.deltaY=S.y-this.state.y}if(this.props.onDrag(v,C)===!1)return!1;this.setState(S)}),f(this,"onDragStop",(v,A)=>{if(!this.state.dragging||this.props.onStop(v,(0,o.createDraggableData)(this,A))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",A);const S={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:T,y:I}=this.props.position;S.x=T,S.y=I}this.setState(S)}),this.state={dragging:!1,dragged:!1,x:w.position?w.position.x:w.defaultPosition.x,y:w.position?w.position.y:w.defaultPosition.y,prevPropsPosition:{...w.position},slackX:0,slackY:0,isElementSVG:!1},w.position&&!(w.onDrag||w.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var w,v;return((v=(w=this.props)==null?void 0:w.nodeRef)==null?void 0:v.current)??r.default.findDOMNode(this)}render(){const{axis:w,bounds:v,children:A,defaultPosition:C,defaultClassName:S,defaultClassNameDragging:x,defaultClassNameDragged:T,position:I,positionOffset:k,scale:O,...B}=this.props;let G={},W=null;const N=!!!I||this.state.dragging,M=I||C,P={x:(0,o.canDragX)(this)&&N?this.state.x:M.x,y:(0,o.canDragY)(this)&&N?this.state.y:M.y};this.state.isElementSVG?W=(0,i.createSVGTransform)(P,k):G=(0,i.createCSSTransform)(P,k);const L=(0,s.clsx)(A.props.className||"",S,{[x]:this.state.dragging,[T]:this.state.dragged});return e.createElement(c.default,h({},B,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(A),{className:L,style:{...A.props.style,...G},transform:W}))}}t.default=y,f(y,"displayName","Draggable"),f(y,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),f(y,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(kY);const{default:qY,DraggableCore:rEe}=kY;EN.exports=qY;EN.exports.default=qY;EN.exports.DraggableCore=rEe;var sEe=EN.exports;const UC=Wg(sEe);function dr(){return dr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dr.apply(null,arguments)}function VY(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var KY={exports:{}},In={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gs=typeof Symbol=="function"&&Symbol.for,OM=gs?Symbol.for("react.element"):60103,kM=gs?Symbol.for("react.portal"):60106,SN=gs?Symbol.for("react.fragment"):60107,IN=gs?Symbol.for("react.strict_mode"):60108,xN=gs?Symbol.for("react.profiler"):60114,NN=gs?Symbol.for("react.provider"):60109,TN=gs?Symbol.for("react.context"):60110,DM=gs?Symbol.for("react.async_mode"):60111,RN=gs?Symbol.for("react.concurrent_mode"):60111,PN=gs?Symbol.for("react.forward_ref"):60112,ON=gs?Symbol.for("react.suspense"):60113,iEe=gs?Symbol.for("react.suspense_list"):60120,kN=gs?Symbol.for("react.memo"):60115,DN=gs?Symbol.for("react.lazy"):60116,oEe=gs?Symbol.for("react.block"):60121,aEe=gs?Symbol.for("react.fundamental"):60117,cEe=gs?Symbol.for("react.responder"):60118,lEe=gs?Symbol.for("react.scope"):60119;function Go(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case OM:switch(t=t.type,t){case DM:case RN:case SN:case xN:case IN:case ON:return t;default:switch(t=t&&t.$$typeof,t){case TN:case PN:case DN:case kN:case NN:return t;default:return e}}case kM:return e}}}function YY(t){return Go(t)===RN}In.AsyncMode=DM;In.ConcurrentMode=RN;In.ContextConsumer=TN;In.ContextProvider=NN;In.Element=OM;In.ForwardRef=PN;In.Fragment=SN;In.Lazy=DN;In.Memo=kN;In.Portal=kM;In.Profiler=xN;In.StrictMode=IN;In.Suspense=ON;In.isAsyncMode=function(t){return YY(t)||Go(t)===DM};In.isConcurrentMode=YY;In.isContextConsumer=function(t){return Go(t)===TN};In.isContextProvider=function(t){return Go(t)===NN};In.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===OM};In.isForwardRef=function(t){return Go(t)===PN};In.isFragment=function(t){return Go(t)===SN};In.isLazy=function(t){return Go(t)===DN};In.isMemo=function(t){return Go(t)===kN};In.isPortal=function(t){return Go(t)===kM};In.isProfiler=function(t){return Go(t)===xN};In.isStrictMode=function(t){return Go(t)===IN};In.isSuspense=function(t){return Go(t)===ON};In.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===SN||t===RN||t===xN||t===IN||t===ON||t===iEe||typeof t=="object"&&t!==null&&(t.$$typeof===DN||t.$$typeof===kN||t.$$typeof===NN||t.$$typeof===TN||t.$$typeof===PN||t.$$typeof===aEe||t.$$typeof===cEe||t.$$typeof===lEe||t.$$typeof===oEe)};In.typeOf=Go;KY.exports=In;var uEe=KY.exports,LM=uEe,dEe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},hEe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},fEe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},QY={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},MM={};MM[LM.ForwardRef]=fEe;MM[LM.Memo]=QY;function I8(t){return LM.isMemo(t)?QY:MM[t.$$typeof]||dEe}var pEe=Object.defineProperty,gEe=Object.getOwnPropertyNames,x8=Object.getOwnPropertySymbols,mEe=Object.getOwnPropertyDescriptor,yEe=Object.getPrototypeOf,N8=Object.prototype;function JY(t,e,n){if(typeof e!="string"){if(N8){var r=yEe(e);r&&r!==N8&&JY(t,r,n)}var s=gEe(e);x8&&(s=s.concat(x8(e)));for(var i=I8(t),o=I8(e),a=0;a<s.length;++a){var c=s[a];if(!hEe[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=mEe(e,c);try{pEe(t,c,l)}catch{}}}}return t}var wEe=JY;const bEe=Wg(wEe);var ZY={};Object.defineProperty(ZY,"__esModule",{value:!0});ZY.default=vEe;function vEe(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function Z1(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RI(){return RI=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RI.apply(this,arguments)}function EEe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function vd(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _Ee(t){var e=function(n){EEe(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,Z1(vd(vd(i)),"cachedTheme",void 0),Z1(vd(vd(i)),"lastOuterTheme",void 0),Z1(vd(vd(i)),"lastTheme",void 0),Z1(vd(vd(i)),"renderProvider",function(l){var u=i.props.children;return Do.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?RI({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?Do.createElement(t.Consumer,null,this.renderProvider):null},r}(Do.Component);return e}function CEe(t){return function(n){var r=Do.forwardRef(function(s,i){return Do.createElement(t.Consumer,null,function(o){return Do.createElement(n,RI({theme:o,ref:i},s))})});return bEe(r,n),r}}function AEe(t){var e=function(){var r=Do.useContext(t);return r};return e}function SEe(t){return{context:t,withTheme:CEe(t),useTheme:AEe(t),ThemeProvider:_Ee(t)}}var XY=D.createContext();SEe(XY);var T8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tb=(typeof window>"u"?"undefined":T8(window))==="object"&&(typeof document>"u"?"undefined":T8(document))==="object"&&document.nodeType===9;function s_(t){"@babel/helpers - typeof";return s_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s_(t)}function IEe(t,e){if(s_(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(s_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function xEe(t){var e=IEe(t,"string");return s_(e)=="symbol"?e:e+""}function NEe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xEe(r.key),r)}}function UM(t,e,n){return e&&NEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function cD(t,e){return cD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},cD(t,e)}function eQ(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,cD(t,e)}function R8(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var TEe={}.constructor;function lD(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(lD);if(t.constructor!==TEe)return t;var e={};for(var n in t)e[n]=lD(t[n]);return e}function LN(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=lD(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var P8=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},eg=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=P8(e[r]," ");else n=P8(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function nb(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function Ub(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function i_(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=nb(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=Ub(f+":"+u+eg(p)+";",o))}}else for(var g in a){var y=a[g];y!=null&&(r&&(r+=l),r+=Ub(g+":"+u+eg(y)+";",o))}for(var m in e){var w=e[m];w!=null&&m!=="fallbacks"&&(r&&(r+=l),r+=Ub(m+":"+u+eg(w)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),Ub(""+t+u+"{"+r,o)+Ub("}",o))}var REe=/([[\].#*$><+~=|^:(),"'`\s])/g,O8=typeof CSS<"u"&&CSS.escape,$M=function(t){return O8?O8(t):t.replace(REe,"\\$1")},tQ=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),uD=function(t){eQ(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(R8(R8(o)),l),o.selectorText="."+$M(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=eg(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?dr({},s,{allowEmpty:!0}):s;return i_(this.selectorText,this.style,a)},UM(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(tQ),PEe={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new uD(e,n,r)}},rP={indent:1,children:!0},OEe=/@([\w-]+)/,kEe=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(OEe);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new MN(dr({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=rP);var s=nb(r),i=s.linebreak;if(r.indent==null&&(r.indent=rP.indent),r.children==null&&(r.children=rP.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),DEe=/@container|@media|@supports\s+/,LEe={onCreateRule:function(e,n,r){return DEe.test(e)?new kEe(e,n,r):null}},sP={indent:1,children:!0},MEe=/@keyframes\s+([\w-]+)/,dD=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(MEe);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:$M(c(this,a)),this.rules=new MN(dr({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],dr({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=sP);var s=nb(r),i=s.linebreak;if(r.indent==null&&(r.indent=sP.indent),r.children==null&&(r.children=sP.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),UEe=/@keyframes\s+/,$Ee=/\$([\w-]+)/g,hD=function(e,n){return typeof e=="string"?e.replace($Ee,function(r,s){return s in n?n[s]:r}):e},k8=function(e,n,r){var s=e[n],i=hD(s,r);i!==s&&(e[n]=i)},BEe={onCreateRule:function(e,n,r){return typeof e=="string"&&UEe.test(e)?new dD(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&k8(e,"animation-name",r.keyframes),"animation"in e&&k8(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return hD(e,s.keyframes);case"animation-name":return hD(e,s.keyframes);default:return e}}},FEe=function(t){eQ(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?dr({},s,{allowEmpty:!0}):s;return i_(this.key,this.style,a)},e}(tQ),jEe={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new FEe(e,n,r):null}},zEe=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=nb(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=i_(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return i_(this.at,this.style,r)},t}(),WEe=/@font-face/,HEe={onCreateRule:function(e,n,r){return WEe.test(e)?new zEe(e,n,r):null}},GEe=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return i_(this.key,this.style,r)},t}(),qEe={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new GEe(e,n,r):null}},VEe=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),KEe={"@charset":!0,"@import":!0,"@namespace":!0},YEe={onCreateRule:function(e,n,r){return e in KEe?new VEe(e,n,r):null}},D8=[PEe,LEe,BEe,jEe,HEe,qEe,YEe],QEe={process:!0},L8={force:!0,process:!0},MN=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=dr({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+$M(this.classes[p]));var g=LN(p,s,f);if(!g)return null;this.register(g);var y=f.index===void 0?this.index.length:f.index;return this.index.splice(y,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=dr({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof uD?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof dD&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof uD?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof dD&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=QEe);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,L8)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,L8)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=nb(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),nQ=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=dr({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new MN(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),JEe=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),ZEe=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=VY(s,["attached"]),a=nb(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},UM(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),qv=new ZEe,fD=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),pD="2f1acc6c3a606b082e5eef5e54414ffb";fD[pD]==null&&(fD[pD]=0);var M8=fD[pD]++,U8=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+M8+a+n:c+i.key+"-"+M8+(a?"-"+a:"")+"-"+n};return r},rQ=function(e){var n;return function(){return n||(n=e()),n}},XEe=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},e_e=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=eg(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},t_e=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},n_e=function(e,n){return e.selectorText=n,e.selectorText===n},sQ=rQ(function(){return document.querySelector("head")});function r_e(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function s_e(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function i_e(t){for(var e=sQ(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function o_e(t){var e=qv.registry;if(e.length>0){var n=r_e(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=s_e(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=i_e(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function a_e(t,e){var n=e.insertionPoint,r=o_e(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}sQ().appendChild(t)}var c_e=rQ(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),$8=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},B8=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},l_e=function(){var e=document.createElement("style");return e.textContent=`
`,e},u_e=function(){function t(n){this.getPropertyValue=XEe,this.setProperty=e_e,this.removeProperty=t_e,this.setSelector=n_e,this.hasInsertedRules=!1,this.cssRules=[],n&&qv.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||l_e(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=c_e();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){a_e(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=B8(i,s);if(a=$8(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=B8(i,s),d=$8(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof nQ&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),d_e=0,h_e=function(){function t(n){this.id=d_e++,this.version="10.10.0",this.plugins=new JEe,this.options={id:{minify:!1},createGenerateId:U8,Renderer:tb?u_e:null,plugins:[]},this.generateId=U8({minify:!1});for(var r=0;r<D8.length;r++)this.plugins.use(D8[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=dr({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=qv.index===0?0:qv.index+1);var a=new nQ(r,dr({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),qv.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=dr({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=LN(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),iQ=function(e){return new h_e(e)},F8=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},UM(t,[{key:"size",get:function(){return this.length}}]),t}(),BM=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function oQ(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=oQ(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */iQ();var aQ=Date.now(),iP="fnValues"+aQ,oP="fnStyle"+ ++aQ,f_e=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=LN(n,{},s);return i[oP]=r,i},onProcessStyle:function(n,r){if(iP in r||oP in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[iP]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[oP];a&&(o.style=a(n)||{});var c=o[iP];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function p_e(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var Qm;typeof self<"u"?Qm=self:typeof window<"u"?Qm=window:typeof global<"u"?Qm=global:typeof module<"u"?Qm=module:Qm=Function("return this")();var j8=p_e(Qm),z8=function(e){return e&&e[j8]&&e===e[j8]()},g_e=function(e){return{onCreateRule:function(r,s,i){if(!z8(s))return null;var o=s,a=LN(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!z8(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},m_e=/;\n/,y_e=function(e){for(var n={},r=e.split(m_e),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},w_e=function(e){typeof e.style=="string"&&(e.style=y_e(e.style))};function b_e(){return{onProcessRule:w_e}}var Kh="@global",gD="@global ",v_e=function(){function t(n,r,s){this.type="global",this.at=Kh,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new MN(dr({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),E_e=function(){function t(n,r,s){this.type="global",this.at=Kh,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(gD.length);this.rule=s.jss.createRule(i,r,dr({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),__e=/\s*,\s*/g;function cQ(t,e){for(var n=t.split(__e),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function C_e(t,e){var n=t.options,r=t.style,s=r?r[Kh]:null;if(s){for(var i in s)e.addRule(i,s[i],dr({},n,{selector:cQ(i,t.selector)}));delete r[Kh]}}function A_e(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,Kh.length)!==Kh)){var i=cQ(s.substr(Kh.length),t.selector);e.addRule(i,r[s],dr({},n,{selector:i})),delete r[s]}}function S_e(){function t(n,r,s){if(!n)return null;if(n===Kh)return new v_e(n,r,s);if(n[0]==="@"&&n.substr(0,gD.length)===gD)return new E_e(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(C_e(n,r),A_e(n,r))}return{onCreateRule:t,onProcessRule:e}}var nS=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},aP="extendCurrValue"+Date.now();function I_e(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];gp(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?dr({},t,{extend:l}):t.extend[c];gp(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){gp(t.extend.extend,e,n,r);continue}if(nS(t.extend[d])){d in r||(r[d]={}),gp(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function x_e(t,e,n,r){for(var s in t)if(s!=="extend"){if(nS(r[s])&&nS(t[s])){gp(t[s],e,n,r[s]);continue}if(nS(t[s])){r[s]=gp(t[s],e,n);continue}r[s]=t[s]}}function gp(t,e,n,r){return r===void 0&&(r={}),I_e(t,e,n,r),x_e(t,e,n,r),r}function N_e(){function t(n,r,s){return"extend"in n?gp(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[aP])s.prop(i,null);return s[aP]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[aP]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var W8=/\s*,\s*/g,T_e=/&/g,R_e=/\$([\w-]+)/g;function P_e(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(W8),a=s.split(W8),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(T_e,u):u+" "+h}return c}function n(s,i,o){if(o)return dr({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=dr({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(R_e,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],dr({},l,{selector:p})):c.addRule(g,s[d],dr({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function mD(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=mD(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return mD(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function O_e(){function t(e,n){return"composes"in e&&(mD(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var k_e=/[A-Z]/g,D_e=/^ms-/,cP={};function L_e(t){return"-"+t.toLowerCase()}function lQ(t){if(cP.hasOwnProperty(t))return cP[t];var e=t.replace(k_e,L_e);return cP[t]=D_e.test(e)?"-"+e:e}function PI(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:lQ(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(PI):e.fallbacks=PI(t.fallbacks)),e}function M_e(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=PI(n[r]);return n}return PI(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=lQ(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var ue=BM&&CSS?CSS.px:"px",X1=BM&&CSS?CSS.ms:"ms",Cm=BM&&CSS?CSS.percent:"%",U_e={"animation-delay":X1,"animation-duration":X1,"background-position":ue,"background-position-x":ue,"background-position-y":ue,"background-size":ue,border:ue,"border-bottom":ue,"border-bottom-left-radius":ue,"border-bottom-right-radius":ue,"border-bottom-width":ue,"border-left":ue,"border-left-width":ue,"border-radius":ue,"border-right":ue,"border-right-width":ue,"border-top":ue,"border-top-left-radius":ue,"border-top-right-radius":ue,"border-top-width":ue,"border-width":ue,"border-block":ue,"border-block-end":ue,"border-block-end-width":ue,"border-block-start":ue,"border-block-start-width":ue,"border-block-width":ue,"border-inline":ue,"border-inline-end":ue,"border-inline-end-width":ue,"border-inline-start":ue,"border-inline-start-width":ue,"border-inline-width":ue,"border-start-start-radius":ue,"border-start-end-radius":ue,"border-end-start-radius":ue,"border-end-end-radius":ue,margin:ue,"margin-bottom":ue,"margin-left":ue,"margin-right":ue,"margin-top":ue,"margin-block":ue,"margin-block-end":ue,"margin-block-start":ue,"margin-inline":ue,"margin-inline-end":ue,"margin-inline-start":ue,padding:ue,"padding-bottom":ue,"padding-left":ue,"padding-right":ue,"padding-top":ue,"padding-block":ue,"padding-block-end":ue,"padding-block-start":ue,"padding-inline":ue,"padding-inline-end":ue,"padding-inline-start":ue,"mask-position-x":ue,"mask-position-y":ue,"mask-size":ue,height:ue,width:ue,"min-height":ue,"max-height":ue,"min-width":ue,"max-width":ue,bottom:ue,left:ue,top:ue,right:ue,inset:ue,"inset-block":ue,"inset-block-end":ue,"inset-block-start":ue,"inset-inline":ue,"inset-inline-end":ue,"inset-inline-start":ue,"box-shadow":ue,"text-shadow":ue,"column-gap":ue,"column-rule":ue,"column-rule-width":ue,"column-width":ue,"font-size":ue,"font-size-delta":ue,"letter-spacing":ue,"text-decoration-thickness":ue,"text-indent":ue,"text-stroke":ue,"text-stroke-width":ue,"word-spacing":ue,motion:ue,"motion-offset":ue,outline:ue,"outline-offset":ue,"outline-width":ue,perspective:ue,"perspective-origin-x":Cm,"perspective-origin-y":Cm,"transform-origin":Cm,"transform-origin-x":Cm,"transform-origin-y":Cm,"transform-origin-z":Cm,"transition-delay":X1,"transition-duration":X1,"vertical-align":ue,"flex-basis":ue,"shape-margin":ue,size:ue,gap:ue,grid:ue,"grid-gap":ue,"row-gap":ue,"grid-row-gap":ue,"grid-column-gap":ue,"grid-template-rows":ue,"grid-template-columns":ue,"grid-auto-rows":ue,"grid-auto-columns":ue,"box-shadow-x":ue,"box-shadow-y":ue,"box-shadow-blur":ue,"box-shadow-spread":ue,"font-line-height":ue,"text-shadow-x":ue,"text-shadow-y":ue,"text-shadow-blur":ue};function uQ(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var $_e=uQ(U_e);function Vv(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=Vv(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=Vv(s,e[s],n);else for(var i in e)e[i]=Vv(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||$_e[t];return o&&!(e===0&&o===ue)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function B_e(t){t===void 0&&(t={});var e=uQ(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=Vv(o,s[o],e);return s}function r(s,i){return Vv(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var F_e={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},j_e={position:!0,size:!0},eA={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},lP={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function z_e(t,e,n){return t.map(function(r){return hQ(r,e,n,!1,!0)})}function dQ(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?dQ(t[0],e,n,r):typeof t[0]=="object"?z_e(t,e,r):[t]}function hQ(t,e,n,r,s){if(!(eA[e]||lP[e]))return[];var i=[];if(lP[e]&&(t=W_e(t,n,lP[e],r)),Object.keys(t).length)for(var o in eA[e]){if(t[o]){Array.isArray(t[o])?i.push(j_e[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}eA[e][o]!=null&&i.push(eA[e][o])}return!i.length||s?i:[i]}function W_e(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=o_((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function o_(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=o_(t.fallbacks[i],e,!0);continue}t[r]=dQ(s,r,F_e,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=o_(t.fallbacks,e,!0);continue}t[r]=hQ(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function H_e(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=o_(e[r],n);return e}return o_(e,n)}return{onProcessStyle:t}}function yD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function G_e(t){if(Array.isArray(t))return yD(t)}function q_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function V_e(t,e){if(t){if(typeof t=="string")return yD(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yD(t,e):void 0}}function K_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y_e(t){return G_e(t)||q_e(t)||V_e(t)||K_e()}var lv="",wD="",fQ="",pQ="",Q_e=tb&&"ontouchstart"in document.documentElement;if(tb){var uP={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},J_e=document.createElement("p"),dP=J_e.style,Z_e="Transform";for(var hP in uP)if(hP+Z_e in dP){lv=hP,wD=uP[hP];break}lv==="Webkit"&&"msHyphens"in dP&&(lv="ms",wD=uP.ms,pQ="edge"),lv==="Webkit"&&"-apple-trailing-word"in dP&&(fQ="apple")}var Pt={js:lv,css:wD,vendor:fQ,browser:pQ,isTouch:Q_e};function X_e(t){return t[1]==="-"||Pt.js==="ms"?t:"@"+Pt.css+"keyframes"+t.substr(10)}var eCe={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:Pt.js==="ms"?"-webkit-"+e:Pt.css+e}},tCe={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:Pt.js==="Webkit"?Pt.css+"print-"+e:e}},nCe=/[-\s]+(.)?/g;function rCe(t,e){return e?e.toUpperCase():""}function FM(t){return t.replace(nCe,rCe)}function uf(t){return FM("-"+t)}var sCe={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(Pt.js==="Webkit"){var r="mask-image";if(FM(r)in n)return e;if(Pt.js+uf(r)in n)return Pt.css+e}return e}},iCe={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:Pt.vendor==="apple"&&!Pt.isTouch?Pt.css+e:e}},oCe={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:Pt.css+e}},aCe={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:Pt.css+e}},cCe={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:Pt.js==="Webkit"||Pt.js==="ms"&&Pt.browser!=="edge"?Pt.css+e:e}},lCe={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:Pt.js==="Moz"||Pt.js==="ms"||Pt.vendor==="apple"?Pt.css+e:e}},uCe={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(Pt.js==="Webkit"){var r="WebkitColumn"+uf(e);return r in n?Pt.css+"column-"+e:!1}if(Pt.js==="Moz"){var s="page"+uf(e);return s in n?"page-"+e:!1}return!1}},dCe={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(Pt.js==="Moz")return e;var r=e.replace("-inline","");return Pt.js+uf(r)in n?Pt.css+r:!1}},hCe={supportedProperty:function(e,n){return FM(e)in n?e:!1}},fCe={supportedProperty:function(e,n){var r=uf(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:Pt.js+r in n?Pt.css+e:Pt.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},pCe={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:Pt.js==="ms"?""+Pt.css+e:e}},gCe={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:Pt.js==="ms"?Pt.css+"scroll-chaining":e}},mCe={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},yCe={supportedProperty:function(e,n){var r=mCe[e];return r&&Pt.js+uf(r)in n?Pt.css+r:!1}},gQ={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},wCe=Object.keys(gQ),bCe=function(e){return Pt.css+e},vCe={supportedProperty:function(e,n,r){var s=r.multiple;if(wCe.indexOf(e)>-1){var i=gQ[e];if(!Array.isArray(i))return Pt.js+uf(i)in n?Pt.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(Pt.js+uf(i[0])in n))return!1;return i.map(bCe)}return!1}},mQ=[eCe,tCe,sCe,iCe,oCe,aCe,cCe,lCe,uCe,dCe,hCe,fCe,pCe,gCe,yCe,vCe],H8=mQ.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),ECe=mQ.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,Y_e(e.noPrefill)),t},[]),uv,Yf={};if(tb){uv=document.createElement("p");var fP=window.getComputedStyle(document.documentElement,"");for(var pP in fP)isNaN(pP)||(Yf[fP[pP]]=fP[pP]);ECe.forEach(function(t){return delete Yf[t]})}function bD(t,e){if(e===void 0&&(e={}),!uv)return t;if(Yf[t]!=null)return Yf[t];(t==="transition"||t==="transform")&&(e[t]=t in uv.style);for(var n=0;n<H8.length&&(Yf[t]=H8[n](t,uv.style,e),!Yf[t]);n++);try{uv.style[t]=""}catch{return!1}return Yf[t]}var Am={},_Ce={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},CCe=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Md;function ACe(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?bD(e):", "+bD(n);return r||e||n}tb&&(Md=document.createElement("p"));function G8(t,e){var n=e;if(!Md||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(Am[r]!=null)return Am[r];try{Md.style[t]=n}catch{return Am[r]=!1,!1}if(_Ce[t])n=n.replace(CCe,ACe);else if(Md.style[t]===""&&(n=Pt.css+n,n==="-ms-flex"&&(Md.style[t]="-ms-flexbox"),Md.style[t]=n,Md.style[t]===""))return Am[r]=!1,!1;return Md.style[t]="",Am[r]=n,Am[r]}function SCe(){function t(s){if(s.type==="keyframes"){var i=s;i.at=X_e(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=bD(i);c&&c!==i&&(a=!0);var l=!1,u=G8(c,eg(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return G8(i,eg(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function ICe(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var xCe=function(e){return e===void 0&&(e={}),{plugins:[f_e(),g_e(e.observable),b_e(),S_e(),N_e(),P_e(),O_e(),M_e(),B_e(e.defaultUnit),H_e(),SCe(),ICe()]}},NCe=Number.MIN_SAFE_INTEGER||-1e9,TCe=function(){return NCe++},RCe=D.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!tb}),q8=new Map,jM=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new F8),r[n];var s=q8.get(n);return s||(s=new F8,q8.set(n,s)),s},V8=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=jM(r,s);o.manage(i),r.registry&&r.registry.add(n)}},PCe=function(e){if(e.sheet){var n=jM(e.context,e.index);n.unmanage(e.theme)}},OCe=iQ(xCe()),yQ=new WeakMap,wQ=function(e){return yQ.get(e)},kCe=function(e,n){yQ.set(e,n)},DCe=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function LCe(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",dr({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var MCe=function(e){if(!e.context.disableStylesGeneration){var n=jM(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||OCe,i=DCe(e),o=oQ(i),a=s.createStyleSheet(i,LCe(e,o!==null));return kCe(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},UCe=function(e,n){for(var r in n)e.deleteRule(n[r])},$Ce=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},BCe=function(e,n){var r=wQ(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},FCe=function(e,n){if(!n)return e.classes;var r=wQ(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function K8(t){return t?D.useEffect:Do.useInsertionEffect||D.useLayoutEffect}var gP={},Pc=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?TCe():s,o=r.theming,a=r.name,c=VY(r,["index","theming","name"]),l=o&&o.context||XY,u=function(f){return typeof e=="function"&&(f||D.useContext(l))||gP},d={};return function(f){var p=D.useRef(!0),g=D.useContext(RCe),y=u(f&&f.theme),m=D.useMemo(function(){var C=MCe({context:g,styles:e,name:a,theme:y,index:i,sheetOptions:c});return C&&g.isSSR&&V8({index:i,context:g,sheet:C,theme:y}),[C,C?BCe(C,f):null]},[g,y]),w=m[0],v=m[1];K8(g.isSSR)(function(){w&&v&&!p.current&&$Ce(f,w,v)},[f]),K8(g.isSSR)(function(){return w&&V8({index:i,context:g,sheet:w,theme:y}),function(){w&&(PCe({index:i,context:g,sheet:w,theme:y}),v&&UCe(w,v))}},[w]);var A=D.useMemo(function(){return w&&v?FCe(w,v):d},[w,v]);return D.useDebugValue(A),D.useDebugValue(y===gP?"No theme":y),D.useEffect(function(){p.current=!1}),A}};const jCe=Pc({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function mP({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=jCe(),d=D.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=b.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[b.jsx("img",{src:t,alt:e,className:u.iconImage}),b.jsx("span",{className:u.iconLabel,children:e})]});return o?f:b.jsx(UC,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const zCe=Pc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function sa({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=zCe({isOpen:e}),u=D.useRef(null),d=()=>{r&&r(t)};return b.jsx(UC,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:b.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[b.jsxs("div",{className:l.header,children:[b.jsx("span",{children:i||t.replace("-popup","")}),b.jsxs("div",{className:l.titleBarButtons,children:[b.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),b.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:"✕"})]})]}),b.jsx("div",{className:l.content,children:s})]})})}const yP=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],WCe=80,HCe=80,GCe=10,qCe=10,VCe=10,KCe=10,YCe=({onIconClick:t})=>{const e=yP.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:VCe+d*(WCe+GCe),y:KCe+u*(HCe+qCe)},u++,u>=4&&(u=0,d++)}),l},[r,s]=D.useState(n()),[i,o]=D.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return b.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:b.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>b.jsx(mP,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&b.jsx(sa,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:b.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:yP.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>b.jsx(mP,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&b.jsx(sa,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:b.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:yP.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>b.jsx(mP,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},QCe=Pc({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),JCe=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=D.useState(!1),[o,a]=D.useState(new Date),c=QCe({isOpen:s});D.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return b.jsxs("div",{className:c.taskbar,children:[b.jsxs("div",{className:c.leftSection,children:[b.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),b.jsx("div",{className:c.windows,children:t.map(h=>b.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),b.jsxs("div",{className:c.rightSection,children:[b.jsxs("div",{className:c.statusSection,children:[b.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:b.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),b.jsx("div",{className:c.clock,children:l(o)})]}),s&&b.jsxs("div",{className:c.menu,children:[b.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"GeckoTerminal"}),b.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),b.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),b.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),b.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),b.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),b.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),b.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function bQ(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function zM(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function vQ(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function WM(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function EQ(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function _Q(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=`https://api.opensea.io/api/v2/collection/${t}/nfts?chain=solana&limit=${e}&include_orders=true`;try{const i=await fetch(r,{headers:{"X-API-KEY":n}});if(!i.ok)throw new Error(`Failed to get OpenSea Solana NFTs: ${i.statusText}`);const o=await i.json();console.log("Solana collection response:",o),console.log("Sample NFT from response:",o.nfts[0]),console.log("Sample NFT owners:",(s=o.nfts[0])==null?void 0:s.owners),console.log("Sample NFT full structure:",JSON.stringify(o.nfts[0],null,2));const a=o.nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"SOL",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea Solana NFTs:",i),i}}async function ZCe(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=[`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false&include_metadata=true`];for(const i of r){console.log("Trying OpenSea endpoint:",i);try{const o=await fetch(i,{headers:{"X-API-KEY":n}});if(console.log("Response status:",o.status),!o.ok){const c=await o.text();console.error("API Error response:",c);continue}const a=await o.json();if(console.log("Raw API response:",a),console.log("Number of NFTs returned:",((s=a.nfts)==null?void 0:s.length)||0),a.nfts&&a.nfts.length>0){const c=a.nfts.map(l=>({id:l.identifier,address:l.contract,token_id:parseInt(l.identifier,10),attributes:JSON.stringify(l.traits||[]),name:l.name||`#${l.identifier}`,image_url:l.image_url,owner_of:t,block_minted:0,contract_type:"SOL",description:l.description||"",image:l.image_url,image_url_shrunk:l.image_url,animation_url:l.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:"",num_items:1,created_at:l.updated_at||new Date().toISOString(),updated_at:l.updated_at||new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}));return console.log("Transformed NFTs:",c.length),{page:1,pageSize:e,totalCount:c.length,totalPages:1,data:c}}}catch(o){console.error("Error with endpoint:",i,o);continue}}return console.log("All OpenSea endpoints failed, returning empty result"),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]}}const XCe=Pc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),e1e=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=XCe({isOpen:t}),i=D.useRef(null),[o,a]=D.useState([]),[c,l]=D.useState(!1),[u,d]=D.useState(!1),[h,f]=D.useState({}),[p,g]=D.useState(null),{data:y}=wY();D.useEffect(()=>{t&&r&&m()},[t,r]);const m=async()=>{l(!0),g(null);try{const S=await bQ(r);a(S);const x={};S.forEach(T=>{x[T.id]=0}),f(x)}catch(S){g(S.message)}finally{l(!1)}},w=(S,x)=>{f(T=>({...T,[S]:Math.max(0,x)}))},v=async()=>{const S=Object.entries(h).filter(([,x])=>x>0).map(([x,T])=>({id:x,quantity:T}));if(S.length===0){g("Please select at least one item to mint");return}if(!y){g("Wallet not connected");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const x=await vQ(r,S);if(console.log("Mint API result:",x),x.success&&x.mintTransaction){console.log("Got mint transaction:",x.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const T=await y.sendTransaction({to:x.mintTransaction.to,value:BigInt(x.mintTransaction.value),data:x.mintTransaction.data});console.log("Transaction sent successfully:",T),alert(`NFT Minted Successfully: Transaction Hash - ${T}`),e()}catch(T){console.error("Transaction sending failed:",T),g("Transaction failed: "+T.message)}}else throw new Error(x.message||"Could not retrieve minting transaction.")}catch(x){console.error("Minting failed:",x),g("Minting failed: "+x.message)}finally{d(!1)}},A=(S,x)=>`${parseFloat(S)} ${x}`,C=()=>{n&&n()};return t?b.jsx(UC,{nodeRef:i,handle:`.${s.header}`,children:b.jsxs("div",{ref:i,className:s.popup,children:[b.jsxs("div",{className:s.header,children:[b.jsx("span",{children:"Mint Pixelawbster"}),b.jsxs("div",{className:s.titleBarButtons,children:[b.jsx("button",{className:s.titleBarButton,onClick:C,title:"Minimize",children:"_"}),b.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),b.jsxs("div",{className:s.content,children:[p&&b.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:p}),c?b.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?b.jsx("div",{children:"No eligible invite lists found for your wallet."}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:{marginBottom:"20px"},children:[b.jsx("h3",{children:"Available Lists:"}),o.map(S=>b.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[b.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:S.name}),b.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",A(S.token_price,S.currency_symbol)]}),b.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",S.wallet_limit===4294967295?"Unlimited":S.wallet_limit," per wallet"]}),b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[b.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),b.jsx("input",{type:"number",min:"0",max:S.wallet_limit===4294967295?999:S.wallet_limit,value:h[S.id]||0,onChange:x=>w(S.id,parseInt(x.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},S.id))]}),b.jsx("button",{onClick:()=>void v(),disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},t1e=Pc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),n1e=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},r1e=({nft:t,onClose:e})=>{const n=t1e(),r=D.useRef(null),s=n1e(t.attributes);return b.jsx(UC,{nodeRef:r,handle:`.${n.header}`,children:b.jsxs("div",{className:n.popup,ref:r,children:[b.jsxs("div",{className:n.header,children:[b.jsxs("span",{children:[t.name," - Details"]}),b.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),b.jsxs("div",{className:n.content,children:[b.jsx("img",{src:t.image_url,alt:t.name,className:n.detailImage}),b.jsx("h3",{children:"Traits"}),b.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>b.jsxs("li",{children:[b.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):b.jsx("li",{children:"No traits found."})})]})]})})},s1e=Symbol(),Y8=Object.getPrototypeOf,vD=new WeakMap,i1e=t=>t&&(vD.has(t)?vD.get(t):Y8(t)===Object.prototype||Y8(t)===Array.prototype),o1e=t=>i1e(t)&&t[s1e]||null,Q8=(t,e=!0)=>{vD.set(t,e)},OI={},wP=t=>typeof t=="object"&&t!==null,zd=new WeakMap,dv=new WeakSet,a1e=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>wP(l)&&!dv.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return Q8(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:y}=Reflect.getOwnPropertyDescriptor(l,p),m={value:g,enumerable:y,configurable:!0};if(dv.has(g))Q8(g,!1);else if(g instanceof Promise)delete m.value,m.get=()=>d(g);else if(zd.has(g)){const[w,v]=zd.get(g);m.value=i(w,v(),d)}Object.defineProperty(f,p,m)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!wP(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(I,k=++a[0])=>{d!==k&&(d=k,h.forEach(O=>O(I,k)))};let p=a[1];const g=(I=++a[1])=>(p!==I&&!h.size&&(p=I,m.forEach(([k])=>{const O=k[1](I);O>d&&(d=O)})),d),y=I=>(k,O)=>{const B=[...k];B[1]=[I,...B[1]],f(B,O)},m=new Map,w=(I,k)=>{if((OI?"production":void 0)!=="production"&&m.has(I))throw new Error("prop listener already exists");if(h.size){const O=k[3](y(I));m.set(I,[k,O])}else m.set(I,[k])},v=I=>{var k;const O=m.get(I);O&&(m.delete(I),(k=O[1])==null||k.call(O))},A=I=>(h.add(I),h.size===1&&m.forEach(([O,B],G)=>{if((OI?"production":void 0)!=="production"&&B)throw new Error("remove already exists");const W=O[3](y(G));m.set(G,[O,W])}),()=>{h.delete(I),h.size===0&&m.forEach(([O,B],G)=>{B&&(B(),m.set(G,[O]))})}),C=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),x=e(C,{deleteProperty(I,k){const O=Reflect.get(I,k);v(k);const B=Reflect.deleteProperty(I,k);return B&&f(["delete",[k],O]),B},set(I,k,O,B){const G=Reflect.has(I,k),W=Reflect.get(I,k,B);if(G&&(t(W,O)||o.has(O)&&t(W,o.get(O))))return!0;v(k),wP(O)&&(O=o1e(O)||O);let R=O;if(O instanceof Promise)O.then(N=>{O.status="fulfilled",O.value=N,f(["resolve",[k],N])}).catch(N=>{O.status="rejected",O.reason=N,f(["reject",[k],N])});else{!zd.has(O)&&n(O)&&(R=c(O));const N=!dv.has(R)&&zd.get(R);N&&w(k,N)}return Reflect.set(I,k,R,B),f(["set",[k],O,W]),!0}});o.set(l,x);const T=[C,g,i,A];return zd.set(x,T),Reflect.ownKeys(l).forEach(I=>{const k=Object.getOwnPropertyDescriptor(l,I);"value"in k&&(x[I]=l[I],delete k.value,delete k.writable),Object.defineProperty(C,I,k)}),x})=>[c,zd,dv,t,e,n,r,s,i,o,a],[c1e]=a1e();function er(t={}){return c1e(t)}function Xs(t,e,n){const r=zd.get(t);(OI?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function a_(t,e){const n=zd.get(t);(OI?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function Sg(t){return dv.add(t),t}function ti(t,e,n,r){let s=t[e];return Xs(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function l1e(t){const e=er({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var J8={};const ze={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof J8<"u"?J8.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},CQ={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=ze.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var u1e=20,d1e=1,Ig=1e6,Z8=1e6,h1e=-7,f1e=21,p1e=!1,$C="[big.js] ",Xg=$C+"Invalid ",UN=Xg+"decimal places",g1e=Xg+"rounding mode",AQ=$C+"Division by zero",Sn={},xl=void 0,m1e=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function SQ(){function t(e){var n=this;if(!(n instanceof t))return e===xl?SQ():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(Xg+"value");e=e===0&&1/e<0?"-0":String(e)}y1e(n,e)}n.constructor=t}return t.prototype=Sn,t.DP=u1e,t.RM=d1e,t.NE=h1e,t.PE=f1e,t.strict=p1e,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function y1e(t,e){var n,r,s;if(!m1e.test(e))throw Error(Xg+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function em(t,e,n,r){var s=t.c;if(n===xl&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(g1e);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==xl))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==xl||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function tm(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}Sn.abs=function(){var t=new this.constructor(this);return t.s=1,t};Sn.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};Sn.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>Ig)throw Error(UN);if(!s[0])throw Error(AQ);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),y=g.length,m=t,w=m.c=[],v=0,A=o+(m.e=e.e-t.e)+1;for(m.s=i,i=A<0?0:A,h.unshift(0);y++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(y=g.length))u=a>y?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=y==a?s:h;y;){if(g[--y]<c[y]){for(d=y;d&&!g[--d];)g[d]=9;--g[d],g[y]+=10}g[y]-=c[y]}for(;!g[0];)g.shift()}else break}w[v++]=u?l:++l,g[0]&&u?g[y]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==xl)&&i--);return!w[0]&&v!=1&&(w.shift(),m.e--,A--),v>A&&em(m,A,n.RM,g[0]!==xl),m};Sn.eq=function(t){return this.cmp(t)===0};Sn.gt=function(t){return this.cmp(t)>0};Sn.gte=function(t){return this.cmp(t)>-1};Sn.lt=function(t){return this.cmp(t)<0};Sn.lte=function(t){return this.cmp(t)<1};Sn.minus=Sn.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};Sn.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(AQ);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};Sn.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};Sn.plus=Sn.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};Sn.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-Z8||t>Z8)throw Error(Xg+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};Sn.prec=function(t,e){if(t!==~~t||t<1||t>Ig)throw Error(Xg+"precision");return em(new this.constructor(this),t,e)};Sn.round=function(t,e){if(t===xl)t=0;else if(t!==~~t||t<-Ig||t>Ig)throw Error(UN);return em(new this.constructor(this),t+this.e+1,e)};Sn.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error($C+"No square root");i=Math.sqrt(+tm(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return em(t,(s.DP-=4)+t.e+1,s.RM)};Sn.times=Sn.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};Sn.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==xl){if(t!==~~t||t<0||t>Ig)throw Error(UN);for(n=em(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return tm(n,!0,!!r)};Sn.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==xl){if(t!==~~t||t<0||t>Ig)throw Error(UN);for(n=em(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return tm(n,!1,!!r)};Sn[Symbol.for("nodejs.util.inspect.custom")]=Sn.toJSON=Sn.toString=function(){var t=this,e=t.constructor;return tm(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};Sn.toNumber=function(){var t=+tm(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error($C+"Imprecise conversion");return t};Sn.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==xl){if(t!==~~t||t<1||t>Ig)throw Error(Xg+"precision");for(n=em(new r(n),t,e);n.c.length<t;)n.c.push(0)}return tm(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};Sn.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error($C+"valueOf disallowed");return tm(t,t.e<=e.NE||t.e>=e.PE,!0)};var wl=SQ();const w1e={bigNumber(t){return t?new wl(t):new wl(0)},multiply(t,e){if(t===void 0||e===void 0)return new wl(0);const n=new wl(t),r=new wl(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},b1e=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],v1e=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],E1e=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],_1e={getERC20Abi:t=>ze.USDT_CONTRACT_ADDRESSES.includes(t)?E1e:b1e,getSwapAbi:()=>v1e},Ed={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},Nt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections"};function bP(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const At={setItem(t,e){hv()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(hv())return localStorage.getItem(t)||void 0},removeItem(t){hv()&&localStorage.removeItem(t)},clear(){hv()&&localStorage.clear()}};function hv(){return typeof window<"u"&&typeof localStorage<"u"}function Uu(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var X8={};const vP=(typeof process<"u"&&typeof X8<"u"?X8.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",IQ=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],C1e="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",Pn={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:vP,SECURE_SITE_DASHBOARD:`${vP}/dashboard`,SECURE_SITE_FAVICON:`${vP}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["coinbase","meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},Je={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Je.getActiveNamespace(),e=Je.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{At.setItem(Nt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=At.getItem(Nt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{At.removeItem(Nt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{At.setItem(Nt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{At.setItem(Nt.ACTIVE_CAIP_NETWORK_ID,t),Je.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return At.getItem(Nt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{At.removeItem(Nt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=bP(t);At.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Je.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),At.setItem(Nt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=At.getItem(Nt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=bP(t);At.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return At.getItem(Nt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=bP(t);return At.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{At.setItem(Nt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return At.getItem(Nt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{At.removeItem(Nt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return At.getItem(Nt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=At.getItem(Nt.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{At.setItem(Nt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return At.getItem(Nt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=At.getItem(Nt.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));At.setItem(Nt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Je.getConnectedNamespaces();e.includes(t)||(e.push(t),Je.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Je.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),Je.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return At.getItem(Nt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{At.setItem(Nt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{At.removeItem(Nt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=At.getItem(Nt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Je.getBalanceCache();At.setItem(Nt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=Je.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;Je.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Je.getBalanceCache();e[t.caipAddress]=t,At.setItem(Nt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=At.getItem(Nt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Je.getBalanceCache();At.setItem(Nt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=Je.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),Je.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Je.getNativeBalanceCache();e[t.caipAddress]=t,At.setItem(Nt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=At.getItem(Nt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=Je.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;Je.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Je.getEnsCache();e[t.address]=t,At.setItem(Nt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Je.getEnsCache();At.setItem(Nt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=At.getItem(Nt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=Je.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;Je.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Je.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},At.setItem(Nt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Je.getIdentityCache();At.setItem(Nt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{At.removeItem(Nt.PORTFOLIO_CACHE),At.removeItem(Nt.NATIVE_BALANCE_CACHE),At.removeItem(Nt.ENS_CACHE),At.removeItem(Nt.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{At.setItem(Nt.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=At.getItem(Nt.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n={...Je.getConnections(),[e]:t};At.setItem(Nt.CONNECTIONS,JSON.stringify(n))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=At.getItem(Nt.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}}},ot={isMobile(){var t;return this.isClient()?!!(typeof(window==null?void 0:window.matchMedia)=="function"&&((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return ot.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Pn.TEN_SEC_MS:!0},isAllowedRetry(t,e=Pn.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(ot.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Pn.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(ot.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!ot.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Je.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r,s;if(typeof window>"u")return!1;const t=(r=(n=window.matchMedia)==null?void 0:n.call(window,"(display-mode: standalone)"))==null?void 0:r.matches,e=(s=window==null?void 0:window.navigator)==null?void 0:s.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,ot.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return ze.W3M_API_URL},getBlockchainApiUrl(){return ze.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return ze.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?Pn.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in ze.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function $b(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}let BC=class{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await $b(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await $b(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await $b(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await $b(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await $b(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}};const A1e={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?Pn.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(ot.isTelegram()){if(ot.isIos())return t.filter(e=>e!=="google");if(ot.isMac())return t.filter(e=>e!=="x");if(ot.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},ht=er({features:Pn.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Pn.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),ve={state:ht,subscribeKey(t,e){return ti(ht,t,e)},setOptions(t){Object.assign(ht,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...ht.remoteFeatures,...t};ht.remoteFeatures=e,(n=ht.remoteFeatures)!=null&&n.socials&&(ht.remoteFeatures.socials=A1e.filterSocialsByPlatform(ht.remoteFeatures.socials))},setFeatures(t){if(!t)return;ht.features||(ht.features=Pn.DEFAULT_FEATURES);const e={...ht.features,...t};ht.features=e},setProjectId(t){ht.projectId=t},setCustomRpcUrls(t){ht.customRpcUrls=t},setAllWallets(t){ht.allWallets=t},setIncludeWalletIds(t){ht.includeWalletIds=t},setExcludeWalletIds(t){ht.excludeWalletIds=t},setFeaturedWalletIds(t){ht.featuredWalletIds=t},setTokens(t){ht.tokens=t},setTermsConditionsUrl(t){ht.termsConditionsUrl=t},setPrivacyPolicyUrl(t){ht.privacyPolicyUrl=t},setCustomWallets(t){ht.customWallets=t},setIsSiweEnabled(t){ht.isSiweEnabled=t},setIsUniversalProvider(t){ht.isUniversalProvider=t},setSdkVersion(t){ht.sdkVersion=t},setMetadata(t){ht.metadata=t},setDisableAppend(t){ht.disableAppend=t},setEIP6963Enabled(t){ht.enableEIP6963=t},setDebug(t){ht.debug=t},setEnableWalletConnect(t){ht.enableWalletConnect=t},setEnableWalletGuide(t){ht.enableWalletGuide=t},setEnableAuthLogger(t){ht.enableAuthLogger=t},setEnableWallets(t){ht.enableWallets=t},setPreferUniversalLinks(t){ht.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){ht.hasMultipleAddresses=t},setSIWX(t){ht.siwx=t},setConnectMethodsOrder(t){ht.features={...ht.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){ht.features={...ht.features,walletFeaturesOrder:t}},setSocialsOrder(t){ht.remoteFeatures={...ht.remoteFeatures,socials:t}},setCollapseWallets(t){ht.features={...ht.features,collapseWallets:t}},setEnableEmbedded(t){ht.enableEmbedded=t},setAllowUnsupportedChain(t){ht.allowUnsupportedChain=t},setManualWCControl(t){ht.manualWCControl=t},setEnableNetworkSwitch(t){ht.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(ht.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){ht.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return ht.universalProviderConfigOverride},getSnapshot(){return a_(ht)}},S1e=Object.freeze({enabled:!0,events:[]}),I1e=new BC({baseUrl:ot.getAnalyticsUrl(),clientId:null}),x1e=5,N1e=60*1e3,_d=er({...S1e}),T1e={state:_d,subscribeKey(t,e){return ti(_d,t,e)},async sendError(t,e){if(!_d.enabled)return;const n=Date.now();if(_d.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<N1e}).length>=x1e)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};_d.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=ve.state;await I1e.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:ot.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){_d.enabled=!0},disable(){_d.enabled=!1},clearEvents(){_d.events=[]}};let ED=class _D extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,_D.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,_D):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function e4(t,e){const n=t instanceof ED?t:new ED(t instanceof Error?t.message:String(t),e,t);throw T1e.sendError(n,n.category),n}function qo(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return e4(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return e4(a,e)}},n[r]=i}else n[r]=s}),n}const dl={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},R1e={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===dl.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${dl.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===dl.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${dl.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===ze.CHAIN.SOLANA&&t===dl.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${dl.COINBASE.url}/dapp?cb_url=${r}`)}},fo=er({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),P1e={state:fo,subscribeNetworkImages(t){return Xs(fo.networkImages,()=>t(fo.networkImages))},subscribeKey(t,e){return ti(fo,t,e)},subscribe(t){return Xs(fo,()=>t(fo))},setWalletImage(t,e){fo.walletImages[t]=e},setNetworkImage(t,e){fo.networkImages[t]=e},setChainImage(t,e){fo.chainImages[t]=e},setConnectorImage(t,e){fo.connectorImages={...fo.connectorImages,[t]:e}},setTokenImage(t,e){fo.tokenImages[t]=e},setCurrencyImage(t,e){fo.currencyImages[t]=e}},lc=qo(P1e),O1e={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},EP=er({networkImagePromises:{}}),xQ={async fetchWalletImage(t){if(t)return await at._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(EP.networkImagePromises[t]||(EP.networkImagePromises[t]=at._fetchNetworkImage(t)),await EP.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return lc.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return lc.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return lc.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return lc.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return lc.state.connectorImages[t.imageId]},getChainImage(t){return lc.state.networkImages[O1e[t]]}},Cd=er({message:"",variant:"info",open:!1}),k1e={state:Cd,subscribeKey(t,e){return ti(Cd,t,e)},open(t,e){const{debug:n}=ve.state,{shortMessage:r,longMessage:s}=t;n&&(Cd.message=r,Cd.variant=e,Cd.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Cd.open=!1,Cd.message="",Cd.variant="info"}},bl=qo(k1e),D1e=ot.getAnalyticsUrl(),L1e=new BC({baseUrl:D1e,clientId:null}),M1e=["MODAL_CREATED"],Jl=er({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),ir={state:Jl,subscribe(t){return Xs(Jl,()=>t(Jl))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ve.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Qe.state.address;if(M1e.includes(t.data.event)||typeof window>"u")return;await L1e.post({path:"/e",params:ir.getSdkProperties(),body:{eventId:ot.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),Jl.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===ze.HTTP_STATUS_CODES.FORBIDDEN&&!Jl.reportedErrors.FORBIDDEN&&(bl.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${hv()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),Jl.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;Jl.timestamp=Date.now(),Jl.data=t,(e=ve.state.features)!=null&&e.analytics&&ir._sendAnalyticsEvent(Jl)}},U1e=ot.getApiUrl(),Ni=new BC({baseUrl:U1e,clientId:null}),$1e=40,t4=4,B1e=20,Tt=er({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),at={state:Tt,subscribeKey(t,e){return ti(Tt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ve.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return ve.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Ni.baseUrl}/getWalletImage/${t}`,n=await Ni.getBlob({path:e,params:at._getSdkProperties()});lc.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Ni.baseUrl}/public/getAssetImage/${t}`,n=await Ni.getBlob({path:e,params:at._getSdkProperties()});lc.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Ni.baseUrl}/public/getAssetImage/${t}`,n=await Ni.getBlob({path:e,params:at._getSdkProperties()});lc.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Ni.baseUrl}/public/getCurrencyImage/${t}`,n=await Ni.getBlob({path:e,params:at._getSdkProperties()});lc.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Ni.baseUrl}/public/getTokenImage/${t}`,n=await Ni.getBlob({path:e,params:at._getSdkProperties()});lc.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return ot.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===dl.COINBASE.id?!0:z.state.activeChain==="solana"&&(n.id===dl.SOLFLARE.id||n.id===dl.PHANTOM.id)):t},async fetchProjectConfig(){return(await Ni.get({path:"/appkit/v1/config",params:at._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Ni.get({path:"/projects/v1/origins",params:at._getSdkProperties()});return t}catch{return[]}},async fetchNetworkImages(){const t=z.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!xQ.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>at._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=je.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>at._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>at._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>at._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];at._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(dl).map(o=>o.id));const r=await Ni.get({path:"/getWallets",params:{...at._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:at._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=ve.state;if(t!=null&&t.length){const e={...at._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??t4,include:t},{data:n}=await at.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>at._fetchWalletImage(i))),Tt.featured=r,Tt.allFeatured=r}},async fetchRecommendedWallets(){try{Tt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=ve.state,r=[...e??[],...n??[]].filter(Boolean),s=z.getRequestedCaipNetworkIds().join(","),i={page:1,entries:t4,include:t,exclude:r,chains:s},{data:o,count:a}=await at.fetchWallets(i),c=Je.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>at._fetchWalletImage(d))),Tt.recommended=o,Tt.allRecommended=o,Tt.count=a??0}catch{}finally{Tt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=ve.state,s=z.getRequestedCaipNetworkIds().join(","),i=[...Tt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:$1e,include:e,exclude:i,chains:s},{data:a,count:c}=await at.fetchWallets(o),l=a.slice(0,B1e).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>at._fetchWalletImage(u))),Tt.wallets=ot.uniqueBy([...Tt.wallets,...at._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Tt.count=c>Tt.count?c:Tt.count,Tt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await at.fetchWallets(e);n&&n.forEach(r=>{Tt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=ve.state,s=z.getRequestedCaipNetworkIds().join(",");Tt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await at.fetchWallets(i);ir.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>at._fetchWalletImage(c)),ot.wait(300)]),Tt.search=at._filterOutExtensions(o)},initPromise(t,e){const n=Tt.promises[t];return n||(Tt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&at.initPromise("connectorImages",at.fetchConnectorImages),e&&at.initPromise("featuredWallets",at.fetchFeaturedWallets),n&&at.initPromise("recommendedWallets",at.fetchRecommendedWallets),r&&at.initPromise("networkImages",at.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=ve.state.features)!=null&&t.analytics&&at.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Ni.get({path:"/getAnalyticsConfig",params:at._getSdkProperties()});ve.setFeatures({analytics:t})}catch{ve.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Tt.featured=Tt.allFeatured,Tt.recommended=Tt.allRecommended;return}const e=z.getRequestedCaipNetworkIds().join(",");Tt.featured=Tt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Tt.recommended=Tt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Tt.filteredWallets=Tt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Tt.filteredWallets=[]},setFilterByNamespace(t){if(!t){Tt.featured=Tt.allFeatured,Tt.recommended=Tt.allRecommended;return}const e=z.getRequestedCaipNetworkIds().join(",");Tt.featured=Tt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Tt.recommended=Tt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Tt.filteredWallets=Tt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},xn=er({view:"Connect",history:["Connect"],transactionStack:[]}),F1e={state:xn,subscribeKey(t,e){return ti(xn,t,e)},pushTransactionStack(t){xn.transactionStack.push(t)},popTransactionStack(t){const e=xn.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Mt.goBack();break;case"cancel":s==null||s(),Mt.goBack();break}},push(t,e){t!==xn.view&&(xn.view=t,xn.history.push(t),xn.data=e)},reset(t,e){xn.view=t,xn.history=[t],xn.data=e},replace(t,e){xn.history.at(-1)===t||(xn.view=t,xn.history[xn.history.length-1]=t,xn.data=e)},goBack(){var r;const t=z.state.activeCaipAddress,e=Mt.state.view==="ConnectingFarcaster",n=!t&&e;if(xn.history.length>1){xn.history.pop();const[s]=xn.history.slice(-1);s&&(t&&s==="Connect"?xn.view="Account":xn.view=s)}else us.close();(r=xn.data)!=null&&r.wallet&&(xn.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){Qe.setFarcasterUrl(void 0,z.state.activeChain);const a=je.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=a_(ve.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(xn.history.length>1){xn.history=xn.history.slice(0,t+1);const[e]=xn.history.slice(-1);e&&(xn.view=e)}},goBackOrCloseModal(){Mt.state.history.length>1?Mt.goBack():us.close()}},Mt=qo(F1e),Zl=er({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),CD={state:Zl,subscribe(t){return Xs(Zl,()=>t(Zl))},setThemeMode(t){Zl.themeMode=t;try{const e=je.getAuthConnector();if(e){const n=CD.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Uu(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Zl.themeVariables={...Zl.themeVariables,...t};try{const e=je.getAuthConnector();if(e){const n=CD.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Uu(Zl.themeVariables,Zl.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return a_(Zl)}},Hi=qo(CD),NQ={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},on=er({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...NQ},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),j1e={state:on,subscribe(t){return Xs(on,()=>{t(on)})},subscribeKey(t,e){return ti(on,t,e)},initialize(t){t.forEach(e=>{const n=Je.getConnectedConnectorId(e);n&&je.setConnectorId(n,e)})},setActiveConnector(t){t&&(on.activeConnector=Sg(t))},setConnectors(t){t.filter(s=>!on.allConnectors.some(i=>i.id===s.id&&je.getConnectorName(i.name)===je.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&on.allConnectors.push(Sg(s))});const n=je.getEnabledNamespaces(),r=je.getEnabledConnectors(n);on.connectors=je.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(on.filterByNamespaceMap).forEach(e=>{on.filterByNamespaceMap[e]=!1}),t.forEach(e=>{on.filterByNamespaceMap[e]=!0}),je.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){on.filterByNamespaceMap[t]=e,je.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=je.getEnabledNamespaces(),e=je.getEnabledConnectors(t),n=je.areAllNamespacesEnabled();on.connectors=je.mergeMultiChainConnectors(e),n?at.clearFilterByNamespaces():at.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(on.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return on.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(on.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=je.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===ze.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=je.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===ze.CONNECTOR_ID.AUTH){const s=t,i=a_(ve.state),o=Hi.getSnapshot().themeMode,a=Hi.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Uu(a,o)}),je.setConnectors([t])}else je.setConnectors([t])},getAuthConnector(t){var r;const e=t||z.state.activeChain,n=on.connectors.find(s=>s.id===ze.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return on.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return on.allConnectors.find(e=>e.id===t)},getConnector(t,e){return on.allConnectors.filter(r=>r.chain===z.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=a_(ve.state),r=Hi.getSnapshot().themeMode,s=Hi.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Uu(s,r)})},getConnectorsByNamespace(t){const e=on.allConnectors.filter(n=>n.chain===t);return je.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=je.getConnector(t.id,t.rdns),n=z.state.activeChain;R1e.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?Mt.push("ConnectingExternal",{connector:e}):Mt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?je.getConnectorsByNamespace(t):je.mergeMultiChainConnectors(on.allConnectors)},setFilterByNamespace(t){on.filterByNamespace=t,on.connectors=je.getConnectors(t),at.setFilterByNamespace(t)},setConnectorId(t,e){t&&(on.activeConnectorIds={...on.activeConnectorIds,[e]:t},Je.setConnectedConnectorId(e,t))},removeConnectorId(t){on.activeConnectorIds={...on.activeConnectorIds,[t]:void 0},Je.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return on.activeConnectorIds[t]},isConnected(t){return t?!!on.activeConnectorIds[t]:Object.values(on.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){on.activeConnectorIds={...NQ}}},je=qo(j1e);var g0={};const z1e="https://secure.walletconnect.org/sdk",W1e=(typeof process<"u"&&typeof g0<"u"?g0.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||z1e,H1e=(typeof process<"u"&&typeof g0<"u"?g0.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",G1e=(typeof process<"u"&&typeof g0<"u"?g0.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ke={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Ps={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},zf=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),$r=er({...zf}),q1e={state:$r,subscribeKey(t,e){return ti($r,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ot.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){$r.message=zf.message,$r.variant=zf.variant,$r.svg=zf.svg,$r.open=zf.open,$r.autoClose=zf.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=zf.autoClose}){$r.open?($r.open=!1,setTimeout(()=>{$r.message=t,$r.variant=n,$r.svg=e,$r.open=!0,$r.autoClose=r},150)):($r.message=t,$r.variant=n,$r.svg=e,$r.open=!0,$r.autoClose=r)}},pc=q1e,jn=er({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),V1e={state:jn,subscribe(t){return Xs(jn,()=>t(jn))},setLastNetworkInView(t){jn.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");jn.loading=!0;try{const s=await pt.fetchTransactions({account:t,cursor:jn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=fv.filterSpamTransactions(s.data),o=fv.filterByConnectedChain(i),a=[...jn.transactions,...o];jn.loading=!1,e==="coinbase"?jn.coinbaseTransactions=fv.groupTransactionsByYearAndMonth(jn.coinbaseTransactions,s.data):(jn.transactions=a,jn.transactionsByYear=fv.groupTransactionsByYearAndMonth(jn.transactionsByYear,o)),jn.empty=a.length===0,jn.next=s.next?s.next:void 0}catch{const i=z.state.activeChain;ir.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:ve.state.projectId,cursor:jn.next,isSmartAccount:((r=Qe.state.preferredAccountTypes)==null?void 0:r[i])===Ps.ACCOUNT_TYPES.SMART_ACCOUNT}}),pc.showError("Failed to fetch transactions"),jn.loading=!1,jn.empty=!0,jn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=z.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){jn.next=void 0},resetTransactions(){jn.transactions=[],jn.transactionsByYear={},jn.lastNetworkInView=void 0,jn.loading=!1,jn.empty=!1,jn.next=void 0}},fv=qo(V1e,"API_ERROR"),Ln=er({connections:new Map,wcError:!1,buffering:!1,status:"disconnected"});let Tf;const K1e={state:Ln,subscribeKey(t,e){return ti(Ln,t,e)},_getClient(){return Ln._client},setClient(t){Ln._client=Sg(t)},async connectWalletConnect(){var t,e,n,r;if(ot.isTelegram()||ot.isSafari()&&ot.isIos()){if(Tf){await Tf,Tf=void 0;return}if(!ot.isPairingExpired(Ln==null?void 0:Ln.wcPairingExpiry)){const s=Ln.wcUri;Ln.wcUri=s;return}Tf=(e=(t=gt._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),gt.state.status="connecting",await Tf,Tf=void 0,Ln.wcPairingExpiry=void 0,gt.state.status="connected"}else await((r=(n=gt._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var r,s;await((s=(r=gt._getClient())==null?void 0:r.connectExternal)==null?void 0:s.call(r,t)),n&&z.setActiveNamespace(e)},async reconnectExternal(t){var n,r;await((r=(n=gt._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||z.state.activeChain;e&&je.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;us.setLoading(!0,z.state.activeChain);const n=je.getAuthConnector();n&&(Qe.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),Je.setPreferredAccountTypes(Qe.state.preferredAccountTypes??{[e]:t}),await gt.reconnectExternal(n),us.setLoading(!1,z.state.activeChain),ir.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=z.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=gt._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=gt._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=gt._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=gt._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=gt._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=gt._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=gt._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=gt._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=gt._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=gt._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=gt._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=gt._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Ln.wcUri=void 0,Ln.wcPairingExpiry=void 0,Ln.wcLinking=void 0,Ln.recentWallet=void 0,Ln.status="disconnected",fv.resetTransactions(),Je.deleteWalletConnectDeepLink()},resetUri(){Ln.wcUri=void 0,Ln.wcPairingExpiry=void 0,Tf=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=gt.state;t&&Je.setWalletConnectDeepLink(t),e&&Je.setAppKitRecent(e),ir.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Mt.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Ln.wcBasic=t},setUri(t){Ln.wcUri=t,Ln.wcPairingExpiry=ot.getPairingExpiry()},setWcLinking(t){Ln.wcLinking=t},setWcError(t){Ln.wcError=t,Ln.buffering=!1},setRecentWallet(t){Ln.recentWallet=t},setBuffering(t){Ln.buffering=t},setStatus(t){Ln.status=t},async disconnect(t){var e;try{await((e=gt._getClient())==null?void 0:e.disconnect(t))}catch(n){throw new ED("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},setConnections(t,e){Ln.connections.set(e,t)},switchAccount({connection:t,address:e,namespace:n}){if(je.state.activeConnectorIds[n]===t.connectorId){const i=z.state.activeCaipNetwork;if(i){const o=`${n}:${i.id}:${e}`;Qe.setCaipAddress(o,n)}else console.warn(`No current network found for namespace "${n}"`)}else{const i=je.getConnector(t.connectorId);i?gt.connectExternal(i,n):console.warn(`No connector found for namespace "${n}"`)}}},gt=qo(K1e),Sm=er({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Nl={state:Sm,subscribe(t){return Xs(Sm,()=>t(Sm))},subscribeOpen(t){return ti(Sm,"open",t)},set(t){Object.assign(Sm,{...Sm,...t})}},_P={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Kg(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},n4={async getMyTokensWithBalance(t){const e=Qe.state.address,n=z.state.activeCaipNetwork;if(!e||!n)return[];if(n.chainNamespace==="eip155"){const s=await this.getEIP155Balances(e,n);if(s)return this.filterLowQualityTokens(s)}const r=await pt.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(r.balances)},async getEIP155Balances(t,e){var n,r;try{const s=_P.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await gt.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await gt.walletGetAssets({account:t,chainFilter:[s]});return _P.isWalletGetAssetsResponse(o)?(o[s]||[]).map(c=>_P.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:z.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},_n=er({tokenBalances:[],loading:!1}),Y1e={state:_n,subscribe(t){return Xs(_n,()=>t(_n))},subscribeKey(t,e){return ti(_n,t,e)},setToken(t){t&&(_n.token=Sg(t))},setTokenAmount(t){_n.sendTokenAmount=t},setReceiverAddress(t){_n.receiverAddress=t},setReceiverProfileImageUrl(t){_n.receiverProfileImageUrl=t},setReceiverProfileName(t){_n.receiverProfileName=t},setNetworkBalanceInUsd(t){_n.networkBalanceInUSD=t},setLoading(t){_n.loading=t},async sendToken(){var t;try{switch(gn.setLoading(!0),(t=z.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await gn.sendEvmToken();return;case"solana":await gn.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{gn.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=z.state.activeChain,e=(n=Qe.state.preferredAccountTypes)==null?void 0:n[t];if(!gn.state.sendTokenAmount||!gn.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!gn.state.token)throw new Error("A token is required");(r=gn.state.token)!=null&&r.address?(ir.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ps.ACCOUNT_TYPES.SMART_ACCOUNT,token:gn.state.token.address,amount:gn.state.sendTokenAmount,network:((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await gn.sendERC20Token({receiverAddress:gn.state.receiverAddress,tokenAddress:gn.state.token.address,sendTokenAmount:gn.state.sendTokenAmount,decimals:gn.state.token.quantity.decimals})):(ir.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ps.ACCOUNT_TYPES.SMART_ACCOUNT,token:gn.state.token.symbol||"",amount:gn.state.sendTokenAmount,network:((i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await gn.sendNativeToken({receiverAddress:gn.state.receiverAddress,sendTokenAmount:gn.state.sendTokenAmount,decimals:gn.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;_n.loading=!0;const e=(i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=z.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=z.state.activeCaipAddress,s=r?ot.getPlainAddress(r):void 0;if(_n.lastRetry&&!ot.isAllowedRetry(_n.lastRetry,30*Pn.ONE_SEC_MS))return _n.loading=!1,[];try{if(s&&e&&n){const a=await n4.getMyTokensWithBalance();return _n.tokenBalances=a,_n.lastRetry=void 0,a}}catch(a){_n.lastRetry=Date.now(),t==null||t(a),pc.showError("Token Balance Unavailable")}finally{_n.loading=!1}return[]},fetchNetworkBalance(){if(_n.tokenBalances.length===0)return;const t=n4.mapBalancesToSwapTokens(_n.tokenBalances);if(!t)return;const e=t.find(n=>n.address===z.getActiveNetworkTokenAddress());e&&(_n.networkBalanceInUSD=e?w1e.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;Mt.pushTransactionStack({});const e=t.receiverAddress,n=Qe.state.address,r=gt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await gt.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),ir.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=Qe.state.preferredAccountTypes)==null?void 0:i.eip155)===Ps.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=gn.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=gt._getClient())==null||c.updateBalance("eip155"),gn.resetSend()},async sendERC20Token(t){Mt.pushTransactionStack({onSuccess(){Mt.replace("Account")}});const e=gt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Qe.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=ot.getPlainAddress(t.tokenAddress);await gt.writeContract({fromAddress:Qe.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:_1e.getERC20Abi(n),chainNamespace:"eip155"}),gn.resetSend()}},async sendSolanaToken(){var t;if(!gn.state.sendTokenAmount||!gn.state.receiverAddress)throw new Error("An amount and receiver address are required");Mt.pushTransactionStack({onSuccess(){Mt.replace("Account")}}),await gt.sendTransaction({chainNamespace:"solana",to:gn.state.receiverAddress,value:gn.state.sendTokenAmount}),(t=gt._getClient())==null||t.updateBalance("solana"),gn.resetSend()},resetSend(){_n.token=void 0,_n.sendTokenAmount=void 0,_n.receiverAddress=void 0,_n.receiverProfileImageUrl=void 0,_n.receiverProfileName=void 0,_n.loading=!1,_n.tokenBalances=[]}},gn=qo(Y1e),CP={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},tA={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},De=er({chains:l1e(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),Q1e={state:De,subscribe(t){return Xs(De,()=>{t(De)})},subscribeKey(t,e){return ti(De,t,e)},subscribeChainProp(t,e,n){let r;return Xs(De.chains,()=>{var i;const s=n||De.activeChain;if(s){const o=(i=De.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=Je.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=ve.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(De.noAdapters=!0),De.noAdapters||(De.activeChain=a==null?void 0:a.namespace,De.activeCaipNetwork=i,z.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),De.activeChain&&Nl.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);z.state.chains.set(u,{namespace:u,networkState:er({...tA,caipNetwork:d==null?void 0:d[0]}),accountState:er(CP),caipNetworks:d??[],...n}),z.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(De.activeChain===t){const r=Array.from(De.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&z.setActiveCaipNetwork(s)}}De.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){De.chains.set(t.namespace,{namespace:t.namespace,networkState:{...tA,caipNetwork:r[0]},accountState:CP,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),z.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=De.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),De.chains.set(t.chainNamespace,{...e,caipNetworks:r}),z.setRequestedCaipNetworks(r,t.chainNamespace),je.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=De.chains.get(t);if(n){const o=((r=De.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&z.setActiveCaipNetwork(n.caipNetworks[0]),De.chains.set(t,{...n,caipNetworks:a}),z.setRequestedCaipNetworks(a||[],t),a.length===0&&je.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=De.chains.get(t);n&&(n.networkState={...n.networkState||tA,...e},De.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=De.chains.get(t);if(r){const s={...r.accountState||CP,...e};De.chains.set(t,{...r,accountState:s}),(De.chains.size===1||De.activeChain===t)&&(e.caipAddress&&(De.activeCaipAddress=e.caipAddress),Qe.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=De.chains.get(t);if(n){const r={...n.networkState||tA,...e};De.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){z.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&je.removeConnectorId(n)},setActiveNamespace(t){var r,s;De.activeChain=t;const e=t?De.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(De.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,De.activeCaipNetwork=n,z.setChainNetworkData(t,{caipNetwork:n}),Je.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Nl.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;De.activeChain!==t.chainNamespace&&z.setIsSwitchingNamespace(!0);const e=De.chains.get(t.chainNamespace);De.activeChain=t.chainNamespace,De.activeCaipNetwork=t,z.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?De.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:De.activeCaipAddress=void 0,z.setAccountProp("caipAddress",De.activeCaipAddress,t.chainNamespace),e&&Qe.replaceState(e.accountState),gn.resetSend(),Nl.set({activeChain:De.activeChain,selectedNetworkId:(i=De.activeCaipNetwork)==null?void 0:i.caipNetworkId}),Je.setActiveCaipNetworkId(t.caipNetworkId),!z.checkIfSupportedNetwork(t.chainNamespace)&&ve.state.enableNetworkSwitch&&!ve.state.allowUnsupportedChain&&!gt.state.wcBasic&&z.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=De.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==z.state.activeChain,n=(s=z.getNetworkData(t))==null?void 0:s.caipNetwork,r=z.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await z.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=z.state.chains.get(z.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=De.activeCaipNetwork)==null?void 0:o.id)})),r=z.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&us.close()}catch{Mt.goBack()}ir.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||De.activeChain,n=De.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||De.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=De.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=De.activeChain;if(e&&(n=e),!n)return;const r=(s=De.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=De.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=De.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return ot.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return De.chains.forEach(e=>{const n=z.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){z.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=z.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));je.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return De.chains.forEach(e=>{const n=z.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return De.activeCaipNetwork},getActiveCaipAddress(){return De.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=De.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=z.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());z.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||De.activeCaipNetwork,r=z.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!De.activeChain)return!0;const e=z.getRequestedCaipNetworks(De.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){z.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=CQ.caipNetworkIdToNumber((r=De.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=De.activeChain;if(!e||!t)return!1;const n=z.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},getActiveNetworkTokenAddress(){var r,s;const t=((r=De.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=De.activeCaipNetwork)==null?void 0:s.id)||1,n=Pn.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`},showUnsupportedChainUI(){us.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=De.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&Pn.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){z.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");De.activeCaipAddress=void 0,z.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),je.removeConnectorId(e)},setIsSwitchingNamespace(t){De.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(De.chains.forEach(s=>{ze.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=De.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=z.state.chains.get(t))==null?void 0:e.accountState:Qe.state},getNetworkData(t){var n;const e=t||De.activeChain;if(e)return(n=z.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=z.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=je.state.filterByNamespace;return(t?[De.chains.get(t)]:Array.from(De.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?z.getRequestedCaipNetworks(t):z.getAllRequestedCaipNetworks()}},z=qo(Q1e),J1e={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},TQ=ot.getBlockchainApiUrl(),Ti=er({clientId:null,api:new BC({baseUrl:TQ,clientId:null}),supportedChains:{http:[],ws:[]}}),pt={state:Ti,async get(t){const{st:e,sv:n}=pt.getSdkProperties(),r=ve.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Ti.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=ve.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Ti.supportedChains.http.length||await pt.getSupportedNetworks()}catch{return!1}return Ti.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await pt.get({path:"v1/supported-chains"});return Ti.supportedChains=t,t}catch{return Ti.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await pt.isNetworkSupported(e))return{avatar:"",name:""};const r=Je.getIdentityFromCacheForAddress(t);if(r)return r;const s=await pt.get({path:`/v1/identity/${t}`,params:{sender:z.state.activeCaipAddress?ot.getPlainAddress(z.state.activeCaipAddress):void 0}});return Je.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await pt.isNetworkSupported((a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?pt.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await pt.isNetworkSupported((o=z.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?pt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await pt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?pt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await pt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ti.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:ve.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await pt.isNetworkSupported((r=z.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?pt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=pt.getSdkProperties();if(!await pt.isNetworkSupported((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return pt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await pt.isNetworkSupported((o=z.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Ti.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Pn.CONVERT_SLIPPAGE_TOLERANCE},projectId:ve.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=pt.getSdkProperties();if(!await pt.isNetworkSupported((o=z.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return pt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=pt.getSdkProperties();if(!await pt.isNetworkSupported((l=z.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return pc.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Je.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await pt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return Je.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await pt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?pt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await pt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?pt.get({path:`/v1/profile/reverse/${t}`,params:{sender:Qe.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await pt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?pt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await pt.isNetworkSupported((i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Ti.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await pt.isNetworkSupported((a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Ti.api.post({path:"/v1/generators/onrampurl",params:{projectId:ve.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await pt.isNetworkSupported((e=z.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await pt.get({path:"/v1/onramp/options"})}catch{return J1e}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await pt.isNetworkSupported((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Ti.api.post({path:"/v1/onramp/quote",params:{projectId:ve.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await pt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?pt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await pt.isNetworkSupported((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Ti.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:ve.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Ti.clientId=t,Ti.api=new BC({baseUrl:TQ,clientId:t})}},Qo=er({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),Z1e={state:Qo,replaceState(t){t&&Object.assign(Qo,Sg(t))},subscribe(t){return z.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return z.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){z.setAccountProp("status",t,e)},getCaipAddress(t){return z.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?ot.getPlainAddress(t):void 0;e===z.state.activeChain&&(z.state.activeCaipAddress=t),z.setAccountProp("caipAddress",t,e),z.setAccountProp("address",n,e)},setBalance(t,e,n){z.setAccountProp("balance",t,n),z.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){z.setAccountProp("profileName",t,e)},setProfileImage(t,e){z.setAccountProp("profileImage",t,e)},setUser(t,e){z.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){z.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){z.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){z.setAccountProp("currentTab",t,z.state.activeChain)},setTokenBalance(t,e){t&&z.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){z.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){z.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=z.getAccountProp("addressLabels",n)||new Map;r.set(t,e),z.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=z.getAccountProp("addressLabels",e)||new Map;n.delete(t),z.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){z.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){z.setAccountProp("preferredAccountTypes",{...Qo.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){Qo.preferredAccountTypes=t},setSocialProvider(t,e){t&&z.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){z.setAccountProp("socialWindow",t?Sg(t):void 0,e)},setFarcasterUrl(t,e){z.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Qo.balanceLoading=!0;const e=(i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=z.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=z.state.activeCaipAddress,s=r?ot.getPlainAddress(r):void 0;if(Qo.lastRetry&&!ot.isAllowedRetry(Qo.lastRetry,30*Pn.ONE_SEC_MS))return Qo.balanceLoading=!1,[];try{if(s&&e&&n){const c=(await pt.getBalance(s,e)).balances.filter(l=>l.quantity.decimals!=="0");return Qe.setTokenBalance(c,n),Qo.lastRetry=void 0,Qo.balanceLoading=!1,c}}catch(a){Qo.lastRetry=Date.now(),t==null||t(a),pc.showError("Token Balance Unavailable")}finally{Qo.balanceLoading=!1}return[]},resetAccount(t){z.resetAccount(t)}},Qe=qo(Z1e),X1e={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=z.state.activeCaipNetwork,r=Mt.state.data;if(t.id===(n==null?void 0:n.id))return;const i=Qe.getCaipAddress(z.state.activeChain),o=t.chainNamespace!==z.state.activeChain,a=Qe.getCaipAddress(t.chainNamespace),l=je.getConnectorId(z.state.activeChain)===ze.CONNECTOR_ID.AUTH,u=ze.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Mt.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Mt.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Mt.push("SwitchNetwork",{...r,network:t})}},Ri=er({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),eAe={state:Ri,subscribe(t){return Xs(Ri,()=>t(Ri))},subscribeKey(t,e){return ti(Ri,t,e)},async open(t){var o,a;const e=Qe.state.status==="connected",n=t==null?void 0:t.namespace,r=z.state.activeChain,s=n&&n!==r,i=(o=z.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(gt.state.wcBasic?at.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await at.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),je.setFilterByNamespace(t==null?void 0:t.namespace),us.setLoading(!0,n),n&&s){const c=((a=z.getNetworkData(n))==null?void 0:a.caipNetwork)||z.getRequestedCaipNetworks(n)[0];c&&X1e.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=z.state.noAdapters;ve.state.manualWCControl||c&&!i?ot.isMobile()?Mt.reset("AllWallets"):Mt.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Mt.reset(t.view,t.data):i?Mt.reset("Account"):Mt.reset("Connect")}Ri.open=!0,Nl.set({open:!0}),ir.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=ve.state.enableEmbedded,e=!!z.state.activeCaipAddress;Ri.open&&ir.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Ri.open=!1,Mt.reset("Connect"),us.clearLoading(),t?e?Mt.replace("Account"):Mt.push("Connect"):Nl.set({open:!1}),gt.resetUri()},setLoading(t,e){e&&Ri.loadingNamespaceMap.set(e,t),Ri.loading=t,Nl.set({loading:t})},clearLoading(){Ri.loadingNamespaceMap.clear(),Ri.loading=!1},shake(){Ri.shake||(Ri.shake=!0,setTimeout(()=>{Ri.shake=!1},500))}},us=qo(eAe),Kv={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},AD={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},tAe={providers:IQ,selectedProvider:null,error:null,purchaseCurrency:Kv,paymentCurrency:AD,purchaseCurrencies:[Kv],paymentCurrencies:[],quotesLoading:!1},tn=er(tAe),nAe={state:tn,subscribe(t){return Xs(tn,()=>t(tn))},subscribeKey(t,e){return ti(tn,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=z.state.activeChain===ze.CHAIN.SOLANA?"SOL":"USDC",n=Qe.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",C1e),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",ve.state.projectId),tn.selectedProvider={...t,url:r.toString()}}else tn.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=IQ.filter(r=>e.includes(r.name));tn.providers=n}else tn.providers=[]},setPurchaseCurrency(t){tn.purchaseCurrency=t},setPaymentCurrency(t){tn.paymentCurrency=t},setPurchaseAmount(t){SD.state.purchaseAmount=t},setPaymentAmount(t){SD.state.paymentAmount=t},async getAvailableCurrencies(){const t=await pt.getOnrampOptions();tn.purchaseCurrencies=t.purchaseCurrencies,tn.paymentCurrencies=t.paymentCurrencies,tn.paymentCurrency=t.paymentCurrencies[0]||AD,tn.purchaseCurrency=t.purchaseCurrencies[0]||Kv,await at.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await at.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;tn.quotesLoading=!0;try{const n=await pt.getOnrampQuote({purchaseCurrency:tn.purchaseCurrency,paymentCurrency:tn.paymentCurrency,amount:((t=tn.paymentAmount)==null?void 0:t.toString())||"0",network:(e=tn.purchaseCurrency)==null?void 0:e.symbol});return tn.quotesLoading=!1,tn.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return tn.error=n.message,tn.quotesLoading=!1,null}finally{tn.quotesLoading=!1}},resetState(){tn.selectedProvider=null,tn.error=null,tn.purchaseCurrency=Kv,tn.paymentCurrency=AD,tn.purchaseCurrencies=[Kv],tn.paymentCurrencies=[],tn.paymentAmount=void 0,tn.purchaseAmount=void 0,tn.quotesLoading=!1}},SD=qo(nAe),r4=2147483648,rAe={convertEVMChainIdToCoinType(t){if(t>=r4)throw new Error("Invalid chainId");return(r4|t)>>>0}},Jo=er({suggestions:[],loading:!1}),sAe={state:Jo,subscribe(t){return Xs(Jo,()=>t(Jo))},subscribeKey(t,e){return ti(Jo,t,e)},async resolveName(t){var e,n;try{return await pt.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await pt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Jo.loading=!0,Jo.suggestions=[];const e=await pt.getEnsNameSuggestions(t);return Jo.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Jo.suggestions}catch(e){const n=Yv.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Jo.loading=!1}},async getNamesForAddress(t){try{if(!z.state.activeCaipNetwork)return[];const n=Je.getEnsFromCacheForAddress(t);if(n)return n;const r=await pt.reverseLookupEnsName({address:t});return Je.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=Yv.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=z.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=Qe.state.address,r=je.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");Jo.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Mt.pushTransactionStack({onCancel(){Mt.replace("RegisterAccountName")}});const i=await gt.signMessage(s);Jo.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=rAe.convertEVMChainIdToCoinType(Number(o));await pt.registerEnsName({coinType:a,address:n,signature:i,message:s}),Qe.setProfileName(t,e.chainNamespace),Mt.replace("RegisterAccountNameSuccess")}catch(s){const i=Yv.parseEnsApiError(s,`Error registering name ${t}`);throw Mt.replace("RegisterAccountName"),new Error(i)}finally{Jo.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},Yv=qo(sAe);var HM={exports:{}},By=typeof Reflect=="object"?Reflect:null,s4=By&&typeof By.apply=="function"?By.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},rS;By&&typeof By.ownKeys=="function"?rS=By.ownKeys:Object.getOwnPropertySymbols?rS=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:rS=function(e){return Object.getOwnPropertyNames(e)};function iAe(t){console&&console.warn&&console.warn(t)}var RQ=Number.isNaN||function(e){return e!==e};function kn(){kn.init.call(this)}HM.exports=kn;HM.exports.once=lAe;kn.EventEmitter=kn;kn.prototype._events=void 0;kn.prototype._eventsCount=0;kn.prototype._maxListeners=void 0;var i4=10;function $N(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(kn,"defaultMaxListeners",{enumerable:!0,get:function(){return i4},set:function(t){if(typeof t!="number"||t<0||RQ(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");i4=t}});kn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};kn.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||RQ(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function PQ(t){return t._maxListeners===void 0?kn.defaultMaxListeners:t._maxListeners}kn.prototype.getMaxListeners=function(){return PQ(this)};kn.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")s4(c,this,n);else for(var l=c.length,u=MQ(c,l),r=0;r<l;++r)s4(u[r],this,n);return!0};function OQ(t,e,n,r){var s,i,o;if($N(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=PQ(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,iAe(a)}return t}kn.prototype.addListener=function(e,n){return OQ(this,e,n,!1)};kn.prototype.on=kn.prototype.addListener;kn.prototype.prependListener=function(e,n){return OQ(this,e,n,!0)};function oAe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function kQ(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=oAe.bind(r);return s.listener=n,r.wrapFn=s,s}kn.prototype.once=function(e,n){return $N(n),this.on(e,kQ(this,e,n)),this};kn.prototype.prependOnceListener=function(e,n){return $N(n),this.prependListener(e,kQ(this,e,n)),this};kn.prototype.removeListener=function(e,n){var r,s,i,o,a;if($N(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():aAe(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};kn.prototype.off=kn.prototype.removeListener;kn.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function DQ(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?cAe(s):MQ(s,s.length)}kn.prototype.listeners=function(e){return DQ(this,e,!0)};kn.prototype.rawListeners=function(e){return DQ(this,e,!1)};kn.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):LQ.call(t,e)};kn.prototype.listenerCount=LQ;function LQ(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}kn.prototype.eventNames=function(){return this._eventsCount>0?rS(this._events):[]};function MQ(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function aAe(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function cAe(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function lAe(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}UQ(t,e,i,{once:!0}),e!=="error"&&uAe(t,s,{once:!0})})}function uAe(t,e,n){typeof t.on=="function"&&UQ(t,"error",e,n)}function UQ(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var ka=HM.exports;const GM=Wg(ka);var xe={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ID=function(t,e){return ID=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},ID(t,e)};function dAe(t,e){ID(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var xD=function(){return xD=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},xD.apply(this,arguments)};function hAe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function fAe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function pAe(t,e){return function(n,r){e(n,r,t)}}function gAe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function mAe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function yAe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function wAe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function bAe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function ND(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function $Q(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function vAe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat($Q(arguments[e]));return t}function EAe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function c_(t){return this instanceof c_?(this.v=t,this):new c_(t)}function _Ae(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof c_?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function CAe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:c_(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function AAe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ND=="function"?ND(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function SAe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function IAe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function xAe(t){return t&&t.__esModule?t:{default:t}}function NAe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function TAe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const RAe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return xD},__asyncDelegator:CAe,__asyncGenerator:_Ae,__asyncValues:AAe,__await:c_,__awaiter:mAe,__classPrivateFieldGet:NAe,__classPrivateFieldSet:TAe,__createBinding:wAe,__decorate:fAe,__exportStar:bAe,__extends:dAe,__generator:yAe,__importDefault:xAe,__importStar:IAe,__makeTemplateObject:SAe,__metadata:gAe,__param:pAe,__read:$Q,__rest:hAe,__spread:vAe,__spreadArrays:EAe,__values:ND},Symbol.toStringTag,{value:"Module"})),BN=yz(RAe);var AP={},Bb={},o4;function PAe(){if(o4)return Bb;o4=1,Object.defineProperty(Bb,"__esModule",{value:!0}),Bb.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return Bb.delay=t,Bb}var Rf={},SP={},Pf={},a4;function OAe(){return a4||(a4=1,Object.defineProperty(Pf,"__esModule",{value:!0}),Pf.ONE_THOUSAND=Pf.ONE_HUNDRED=void 0,Pf.ONE_HUNDRED=100,Pf.ONE_THOUSAND=1e3),Pf}var IP={},c4;function kAe(){return c4||(c4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(IP)),IP}var l4;function BQ(){return l4||(l4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=BN;e.__exportStar(OAe(),t),e.__exportStar(kAe(),t)}(SP)),SP}var u4;function DAe(){if(u4)return Rf;u4=1,Object.defineProperty(Rf,"__esModule",{value:!0}),Rf.fromMiliseconds=Rf.toMiliseconds=void 0;const t=BQ();function e(r){return r*t.ONE_THOUSAND}Rf.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Rf.fromMiliseconds=n,Rf}var d4;function LAe(){return d4||(d4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=BN;e.__exportStar(PAe(),t),e.__exportStar(DAe(),t)}(AP)),AP}var Im={},h4;function MAe(){if(h4)return Im;h4=1,Object.defineProperty(Im,"__esModule",{value:!0}),Im.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Im.Watch=t,Im.default=t,Im}var xP={},Fb={},f4;function UAe(){if(f4)return Fb;f4=1,Object.defineProperty(Fb,"__esModule",{value:!0}),Fb.IWatch=void 0;class t{}return Fb.IWatch=t,Fb}var p4;function $Ae(){return p4||(p4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),BN.__exportStar(UAe(),t)}(xP)),xP}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=BN;e.__exportStar(LAe(),t),e.__exportStar(MAe(),t),e.__exportStar($Ae(),t),e.__exportStar(BQ(),t)})(xe);class nm{}let BAe=class extends nm{constructor(e){super()}};const g4=xe.FIVE_SECONDS,rm={pulse:"heartbeat_pulse"};let FAe=class FQ extends BAe{constructor(e){super(e),this.events=new ka.EventEmitter,this.interval=g4,this.interval=(e==null?void 0:e.interval)||g4}static async init(e){const n=new FQ(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),xe.toMiliseconds(this.interval))}pulse(){this.events.emit(rm.pulse)}};const jAe=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,zAe=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,WAe=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function HAe(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){GAe(t);return}return e}function GAe(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function nA(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!WAe.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(jAe.test(t)||zAe.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,HAe)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function sm(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function jQ(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=sm(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let NP;function FC(){return NP||(NP=jQ("keyval-store","keyval")),NP}function m4(t,e=FC()){return e("readonly",n=>sm(n.get(t)))}function qAe(t,e,n=FC()){return n("readwrite",r=>(r.put(e,t),sm(r.transaction)))}function VAe(t,e=FC()){return e("readwrite",n=>(n.delete(t),sm(n.transaction)))}function KAe(t=FC()){return t("readwrite",e=>(e.clear(),sm(e.transaction)))}function YAe(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},sm(t.transaction)}function QAe(t=FC()){return t("readonly",e=>{if(e.getAllKeys)return sm(e.getAllKeys());const n=[];return YAe(e,r=>n.push(r.key)).then(()=>n)})}const JAe=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),ZAe=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function xg(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return ZAe(t)}catch{return t}}function rd(t){return typeof t=="string"?t:JAe(t)||""}function XAe(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var eSe=tSe;function tSe(t,e,n){var r=n&&n.stringify||XAe,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const y4=eSe;var Jm=Tl;const l_=dSe().console||{},nSe={mapHttpRequest:rA,mapHttpResponse:rA,wrapRequestSerializer:TP,wrapResponseSerializer:TP,wrapErrorSerializer:TP,req:rA,res:rA,err:aSe};function rSe(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Tl(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||l_;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=rSe(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=u_),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:cSe(t)};c.levels=Tl.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=u_,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=TD());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,xm(l,c,"error","log"),xm(l,c,"fatal","error"),xm(l,c,"warn","error"),xm(l,c,"info","log"),xm(l,c,"debug","log"),xm(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const y=g.serializers;if(s&&y){var m=Object.assign({},r,y),w=t.browser.serialize===!0?Object.keys(m):s;delete p.serializers,FN([p],w,m,this._stdErrSerialize)}function v(A){this._childLevel=(A._childLevel|0)+1,this.error=Nm(A,p,"error"),this.fatal=Nm(A,p,"fatal"),this.warn=Nm(A,p,"warn"),this.info=Nm(A,p,"info"),this.debug=Nm(A,p,"debug"),this.trace=Nm(A,p,"trace"),m&&(this.serializers=m,this._serialize=w),e&&(this._logEvent=TD([].concat(A._logEvent.bindings,p)))}return v.prototype=this,new v(this)}return c}Tl.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Tl.stdSerializers=nSe;Tl.stdTimeFunctions=Object.assign({},{nullTime:zQ,epochTime:WQ,unixTime:lSe,isoTime:uSe});function xm(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?u_:s[n]?s[n]:l_[n]||l_[r]||u_,sSe(t,e,n)}function sSe(t,e,n){!t.transmit&&e[n]===u_||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===l_?l_:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&FN(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,iSe(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=Tl.levels.values[l],d=Tl.levels.values[n];if(d<u)return;oSe(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:Tl.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function iSe(t,e,n,r){t._serialize&&FN(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=Tl.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?y4(s.shift(),s):void 0}else typeof i=="string"&&(i=y4(s.shift(),s));return i!==void 0&&(o.msg=i),o}function FN(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=Tl.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Nm(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function oSe(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;FN(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=TD(c)}function TD(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function aSe(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function cSe(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?zQ:WQ}function rA(){return{}}function TP(t){return t}function u_(){}function zQ(){return!1}function WQ(){return Date.now()}function lSe(){return Math.round(Date.now()/1e3)}function uSe(){return new Date(Date.now()).toISOString()}function dSe(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const jC=Wg(Jm),hSe={level:"info"},zC="custom_context",qM=1e3*1024;let fSe=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},w4=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new fSe(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},HQ=class{constructor(e,n=qM){this.level=e??"error",this.levelValue=Jm.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new w4(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===Jm.levels.values.error?console.error(e):n===Jm.levels.values.warn?console.warn(e):n===Jm.levels.values.debug?console.debug(e):n===Jm.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(rd({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new w4(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(rd({extraMetadata:e})),new Blob(n,{type:"application/json"})}},pSe=class{constructor(e,n=qM){this.baseChunkLogger=new HQ(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},gSe=class{constructor(e,n=qM){this.baseChunkLogger=new HQ(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var mSe=Object.defineProperty,ySe=Object.defineProperties,wSe=Object.getOwnPropertyDescriptors,b4=Object.getOwnPropertySymbols,bSe=Object.prototype.hasOwnProperty,vSe=Object.prototype.propertyIsEnumerable,v4=(t,e,n)=>e in t?mSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kI=(t,e)=>{for(var n in e||(e={}))bSe.call(e,n)&&v4(t,n,e[n]);if(b4)for(var n of b4(e))vSe.call(e,n)&&v4(t,n,e[n]);return t},DI=(t,e)=>ySe(t,wSe(e));function im(t){return DI(kI({},t),{level:(t==null?void 0:t.level)||hSe.level})}function ESe(t,e=zC){return t[e]||""}function _Se(t,e,n=zC){return t[n]=e,t}function ho(t,e=zC){let n="";return typeof t.bindings>"u"?n=ESe(t,e):n=t.bindings().context||"",n}function CSe(t,e,n=zC){const r=ho(t,n);return r.trim()?`${r}/${e}`:e}function Ls(t,e,n=zC){const r=CSe(t,e,n),s=t.child({context:r});return _Se(s,r,n)}function ASe(t){var e,n;const r=new pSe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:jC(DI(kI({},t.opts),{level:"trace",browser:DI(kI({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function SSe(t){var e;const n=new gSe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:jC(DI(kI({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function jN(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?ASe(t):SSe(t)}function ISe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function GQ(t,...e){if(!ISe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function E4(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function xSe(t,e){GQ(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Tm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const RP=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function NSe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function qQ(t){return typeof t=="string"&&(t=NSe(t)),GQ(t),t}let TSe=class{clone(){return this._cloneInto()}};function RSe(t){const e=r=>t().update(qQ(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function VQ(t=32){if(Tm&&typeof Tm.getRandomValues=="function")return Tm.getRandomValues(new Uint8Array(t));if(Tm&&typeof Tm.randomBytes=="function")return Tm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function PSe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let OSe=class extends TSe{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=RP(this.buffer)}update(e){E4(this);const{view:n,buffer:r,blockLen:s}=this;e=qQ(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=RP(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){E4(this),xSe(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;PSe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=RP(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const sA=BigInt(2**32-1),RD=BigInt(32);function KQ(t,e=!1){return e?{h:Number(t&sA),l:Number(t>>RD&sA)}:{h:Number(t>>RD&sA)|0,l:Number(t&sA)|0}}function kSe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=KQ(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const DSe=(t,e)=>BigInt(t>>>0)<<RD|BigInt(e>>>0),LSe=(t,e,n)=>t>>>n,MSe=(t,e,n)=>t<<32-n|e>>>n,USe=(t,e,n)=>t>>>n|e<<32-n,$Se=(t,e,n)=>t<<32-n|e>>>n,BSe=(t,e,n)=>t<<64-n|e>>>n-32,FSe=(t,e,n)=>t>>>n-32|e<<64-n,jSe=(t,e)=>e,zSe=(t,e)=>t,WSe=(t,e,n)=>t<<n|e>>>32-n,HSe=(t,e,n)=>e<<n|t>>>32-n,GSe=(t,e,n)=>e<<n-32|t>>>64-n,qSe=(t,e,n)=>t<<n-32|e>>>64-n;function VSe(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const KSe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),YSe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,QSe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),JSe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,ZSe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),XSe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Dt={fromBig:KQ,split:kSe,toBig:DSe,shrSH:LSe,shrSL:MSe,rotrSH:USe,rotrSL:$Se,rotrBH:BSe,rotrBL:FSe,rotr32H:jSe,rotr32L:zSe,rotlSH:WSe,rotlSL:HSe,rotlBH:GSe,rotlBL:qSe,add:VSe,add3L:KSe,add3H:YSe,add4L:QSe,add4H:JSe,add5H:XSe,add5L:ZSe},[eIe,tIe]=Dt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ad=new Uint32Array(80),Sd=new Uint32Array(80);let nIe=class extends OSe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let v=0;v<16;v++,n+=4)Ad[v]=e.getUint32(n),Sd[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const A=Ad[v-15]|0,C=Sd[v-15]|0,S=Dt.rotrSH(A,C,1)^Dt.rotrSH(A,C,8)^Dt.shrSH(A,C,7),x=Dt.rotrSL(A,C,1)^Dt.rotrSL(A,C,8)^Dt.shrSL(A,C,7),T=Ad[v-2]|0,I=Sd[v-2]|0,k=Dt.rotrSH(T,I,19)^Dt.rotrBH(T,I,61)^Dt.shrSH(T,I,6),O=Dt.rotrSL(T,I,19)^Dt.rotrBL(T,I,61)^Dt.shrSL(T,I,6),B=Dt.add4L(x,O,Sd[v-7],Sd[v-16]),G=Dt.add4H(B,S,k,Ad[v-7],Ad[v-16]);Ad[v]=G|0,Sd[v]=B|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:y,Hh:m,Hl:w}=this;for(let v=0;v<80;v++){const A=Dt.rotrSH(d,h,14)^Dt.rotrSH(d,h,18)^Dt.rotrBH(d,h,41),C=Dt.rotrSL(d,h,14)^Dt.rotrSL(d,h,18)^Dt.rotrBL(d,h,41),S=d&f^~d&g,x=h&p^~h&y,T=Dt.add5L(w,C,x,tIe[v],Sd[v]),I=Dt.add5H(T,m,A,S,eIe[v],Ad[v]),k=T|0,O=Dt.rotrSH(r,s,28)^Dt.rotrBH(r,s,34)^Dt.rotrBH(r,s,39),B=Dt.rotrSL(r,s,28)^Dt.rotrBL(r,s,34)^Dt.rotrBL(r,s,39),G=r&i^r&a^i&a,W=s&o^s&c^o&c;m=g|0,w=y|0,g=f|0,y=p|0,f=d|0,p=h|0,{h:d,l:h}=Dt.add(l|0,u|0,I|0,k|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const R=Dt.add3L(k,B,W);r=Dt.add3H(R,I,O,G),s=R|0}({h:r,l:s}=Dt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Dt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Dt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Dt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Dt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Dt.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=Dt.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:m,l:w}=Dt.add(this.Hh|0,this.Hl|0,m|0,w|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,y,m,w)}roundClean(){Ad.fill(0),Sd.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const rIe=RSe(()=>new nIe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const VM=BigInt(0),YQ=BigInt(1),sIe=BigInt(2);function KM(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function YM(t){if(!KM(t))throw new Error("Uint8Array expected")}function PP(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const iIe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function QM(t){YM(t);let e="";for(let n=0;n<t.length;n++)e+=iIe[t[n]];return e}function QQ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?VM:BigInt("0x"+t)}const Xl={_0:48,_9:57,A:65,F:70,a:97,f:102};function _4(t){if(t>=Xl._0&&t<=Xl._9)return t-Xl._0;if(t>=Xl.A&&t<=Xl.F)return t-(Xl.A-10);if(t>=Xl.a&&t<=Xl.f)return t-(Xl.a-10)}function JQ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=_4(t.charCodeAt(i)),a=_4(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function oIe(t){return QQ(QM(t))}function sS(t){return YM(t),QQ(QM(Uint8Array.from(t).reverse()))}function ZQ(t,e){return JQ(t.toString(16).padStart(e*2,"0"))}function PD(t,e){return ZQ(t,e).reverse()}function eu(t,e,n){let r;if(typeof e=="string")try{r=JQ(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(KM(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function C4(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];YM(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const OP=t=>typeof t=="bigint"&&VM<=t;function aIe(t,e,n){return OP(t)&&OP(e)&&OP(n)&&e<=t&&t<n}function jb(t,e,n,r){if(!aIe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function cIe(t){let e;for(e=0;t>VM;t>>=YQ,e+=1);return e}const lIe=t=>(sIe<<BigInt(t-1))-YQ,uIe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||KM(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function JM(t,e,n={}){const r=(s,i,o)=>{const a=uIe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function A4(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const ds=BigInt(0),Nr=BigInt(1),Qf=BigInt(2),dIe=BigInt(3),OD=BigInt(4),S4=BigInt(5),I4=BigInt(8);function Wr(t,e){const n=t%e;return n>=ds?n:e+n}function hIe(t,e,n){if(e<ds)throw new Error("invalid exponent, negatives unsupported");if(n<=ds)throw new Error("invalid modulus");if(n===Nr)return ds;let r=Nr;for(;e>ds;)e&Nr&&(r=r*t%n),t=t*t%n,e>>=Nr;return r}function Fc(t,e,n){let r=t;for(;e-- >ds;)r*=r,r%=n;return r}function x4(t,e){if(t===ds)throw new Error("invert: expected non-zero number");if(e<=ds)throw new Error("invert: expected positive modulus, got "+e);let n=Wr(t,e),r=e,s=ds,i=Nr;for(;n!==ds;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Nr)throw new Error("invert: does not exist");return Wr(s,e)}function fIe(t){const e=(t-Nr)/Qf;let n,r,s;for(n=t-Nr,r=0;n%Qf===ds;n/=Qf,r++);for(s=Qf;s<t&&hIe(s,e,t)!==t-Nr;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Nr)/OD;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+Nr)/Qf;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,Nr<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function pIe(t){if(t%OD===dIe){const e=(t+Nr)/OD;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%I4===S4){const e=(t-S4)/I4;return function(n,r){const s=n.mul(r,Qf),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,Qf),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return fIe(t)}const gIe=(t,e)=>(Wr(t,e)&Nr)===Nr,mIe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function yIe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=mIe.reduce((r,s)=>(r[s]="function",r),e);return JM(t,n)}function wIe(t,e,n){if(n<ds)throw new Error("invalid exponent, negatives unsupported");if(n===ds)return t.ONE;if(n===Nr)return e;let r=t.ONE,s=e;for(;n>ds;)n&Nr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Nr;return r}function bIe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function XQ(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function eJ(t,e,n=!1,r={}){if(t<=ds)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=XQ(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:lIe(s),ZERO:ds,ONE:Nr,create:c=>Wr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return ds<=c&&c<t},is0:c=>c===ds,isOdd:c=>(c&Nr)===Nr,neg:c=>Wr(-c,t),eql:(c,l)=>c===l,sqr:c=>Wr(c*c,t),add:(c,l)=>Wr(c+l,t),sub:(c,l)=>Wr(c-l,t),mul:(c,l)=>Wr(c*l,t),pow:(c,l)=>wIe(a,c,l),div:(c,l)=>Wr(c*x4(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>x4(c,t),sqrt:r.sqrt||(c=>(o||(o=pIe(t)),o(a,c))),invertBatch:c=>bIe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?PD(c,i):ZQ(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?sS(c):oIe(c)}});return Object.freeze(a)}const N4=BigInt(0),iA=BigInt(1);function kP(t,e){const n=e.negate();return t?n:e}function tJ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function DP(t,e){tJ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function vIe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function EIe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const LP=new WeakMap,nJ=new WeakMap;function MP(t){return nJ.get(t)||1}function _Ie(t,e){return{constTimeNegate:kP,hasPrecomputes(n){return MP(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>N4;)r&iA&&(s=s.add(i)),i=i.double(),r>>=iA;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=DP(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=DP(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=iA);const g=f,y=f+Math.abs(p)-1,m=h%2!==0,w=p<0;p===0?c=c.add(kP(m,r[g])):a=a.add(kP(w,r[y]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=DP(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===N4)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=iA),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=LP.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&LP.set(r,s(i))),i},wNAFCached(n,r,s){const i=MP(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=MP(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){tJ(r,e),nJ.set(n,r),LP.delete(n)}}}function CIe(t,e,n,r){if(vIe(n,t),EIe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=cIe(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function AIe(t){return yIe(t.Fp),JM(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...XQ(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const za=BigInt(0),Pi=BigInt(1),oA=BigInt(2),SIe=BigInt(8),IIe={zip215:!0};function xIe(t){const e=AIe(t);return JM(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function NIe(t){const e=xIe(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=oA<<BigInt(a*8)-Pi,u=n.create,d=eJ(e.n,e.nBitLength),h=e.uvRatio||((R,N)=>{try{return{isValid:!0,value:n.sqrt(R*n.inv(N))}}catch{return{isValid:!1,value:za}}}),f=e.adjustScalarBytes||(R=>R),p=e.domain||((R,N,M)=>{if(PP("phflag",M),N.length||M)throw new Error("Contexts/pre-hash are not supported");return R});function g(R,N){jb("coordinate "+R,N,za,l)}function y(R){if(!(R instanceof v))throw new Error("ExtendedPoint expected")}const m=A4((R,N)=>{const{ex:M,ey:P,ez:L}=R,F=R.is0();N==null&&(N=F?SIe:n.inv(L));const q=u(M*N),ne=u(P*N),le=u(L*N);if(F)return{x:za,y:Pi};if(le!==Pi)throw new Error("invZ was invalid");return{x:q,y:ne}}),w=A4(R=>{const{a:N,d:M}=e;if(R.is0())throw new Error("bad point: ZERO");const{ex:P,ey:L,ez:F,et:q}=R,ne=u(P*P),le=u(L*L),ie=u(F*F),re=u(ie*ie),ye=u(ne*N),Z=u(ie*u(ye+le)),oe=u(re+u(M*u(ne*le)));if(Z!==oe)throw new Error("bad point: equation left != right (1)");const he=u(P*L),de=u(F*q);if(he!==de)throw new Error("bad point: equation left != right (2)");return!0});class v{constructor(N,M,P,L){this.ex=N,this.ey=M,this.ez=P,this.et=L,g("x",N),g("y",M),g("z",P),g("t",L),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(N){if(N instanceof v)throw new Error("extended point not allowed");const{x:M,y:P}=N||{};return g("x",M),g("y",P),new v(M,P,Pi,u(M*P))}static normalizeZ(N){const M=n.invertBatch(N.map(P=>P.ez));return N.map((P,L)=>P.toAffine(M[L])).map(v.fromAffine)}static msm(N,M){return CIe(v,d,N,M)}_setWindowSize(N){S.setWindowSize(this,N)}assertValidity(){w(this)}equals(N){y(N);const{ex:M,ey:P,ez:L}=this,{ex:F,ey:q,ez:ne}=N,le=u(M*ne),ie=u(F*L),re=u(P*ne),ye=u(q*L);return le===ie&&re===ye}is0(){return this.equals(v.ZERO)}negate(){return new v(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:N}=e,{ex:M,ey:P,ez:L}=this,F=u(M*M),q=u(P*P),ne=u(oA*u(L*L)),le=u(N*F),ie=M+P,re=u(u(ie*ie)-F-q),ye=le+q,Z=ye-ne,oe=le-q,he=u(re*Z),de=u(ye*oe),be=u(re*oe),We=u(Z*ye);return new v(he,de,We,be)}add(N){y(N);const{a:M,d:P}=e,{ex:L,ey:F,ez:q,et:ne}=this,{ex:le,ey:ie,ez:re,et:ye}=N;if(M===BigInt(-1)){const Me=u((F-L)*(ie+le)),kt=u((F+L)*(ie-le)),nr=u(kt-Me);if(nr===za)return this.double();const Dn=u(q*oA*ye),Vo=u(ne*oA*re),Wl=Vo+Dn,Sr=kt+Me,Bs=Vo-Dn,Ua=u(Wl*nr),Ii=u(Sr*Bs),pr=u(Wl*Bs),Hl=u(nr*Sr);return new v(Ua,Ii,Hl,pr)}const Z=u(L*le),oe=u(F*ie),he=u(ne*P*ye),de=u(q*re),be=u((L+F)*(le+ie)-Z-oe),We=de-he,_e=de+he,Ae=u(oe-M*Z),tt=u(be*We),Se=u(_e*Ae),Gt=u(be*Ae),sn=u(We*_e);return new v(tt,Se,sn,Gt)}subtract(N){return this.add(N.negate())}wNAF(N){return S.wNAFCached(this,N,v.normalizeZ)}multiply(N){const M=N;jb("scalar",M,Pi,r);const{p:P,f:L}=this.wNAF(M);return v.normalizeZ([P,L])[0]}multiplyUnsafe(N,M=v.ZERO){const P=N;return jb("scalar",P,za,r),P===za?C:this.is0()||P===Pi?this:S.wNAFCachedUnsafe(this,P,v.normalizeZ,M)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return S.unsafeLadder(this,r).is0()}toAffine(N){return m(this,N)}clearCofactor(){const{h:N}=e;return N===Pi?this:this.multiplyUnsafe(N)}static fromHex(N,M=!1){const{d:P,a:L}=e,F=n.BYTES;N=eu("pointHex",N,F),PP("zip215",M);const q=N.slice(),ne=N[F-1];q[F-1]=ne&-129;const le=sS(q),ie=M?l:n.ORDER;jb("pointHex.y",le,za,ie);const re=u(le*le),ye=u(re-Pi),Z=u(P*re-L);let{isValid:oe,value:he}=h(ye,Z);if(!oe)throw new Error("Point.fromHex: invalid y coordinate");const de=(he&Pi)===Pi,be=(ne&128)!==0;if(!M&&he===za&&be)throw new Error("Point.fromHex: x=0 and x_0=1");return be!==de&&(he=u(-he)),v.fromAffine({x:he,y:le})}static fromPrivateKey(N){return I(N).point}toRawBytes(){const{x:N,y:M}=this.toAffine(),P=PD(M,n.BYTES);return P[P.length-1]|=N&Pi?128:0,P}toHex(){return QM(this.toRawBytes())}}v.BASE=new v(e.Gx,e.Gy,Pi,u(e.Gx*e.Gy)),v.ZERO=new v(za,Pi,Pi,za);const{BASE:A,ZERO:C}=v,S=_Ie(v,a*8);function x(R){return Wr(R,r)}function T(R){return x(sS(R))}function I(R){const N=n.BYTES;R=eu("private key",R,N);const M=eu("hashed private key",i(R),2*N),P=f(M.slice(0,N)),L=M.slice(N,2*N),F=T(P),q=A.multiply(F),ne=q.toRawBytes();return{head:P,prefix:L,scalar:F,point:q,pointBytes:ne}}function k(R){return I(R).pointBytes}function O(R=new Uint8Array,...N){const M=C4(...N);return T(i(p(M,eu("context",R),!!s)))}function B(R,N,M={}){R=eu("message",R),s&&(R=s(R));const{prefix:P,scalar:L,pointBytes:F}=I(N),q=O(M.context,P,R),ne=A.multiply(q).toRawBytes(),le=O(M.context,ne,F,R),ie=x(q+le*L);jb("signature.s",ie,za,r);const re=C4(ne,PD(ie,n.BYTES));return eu("result",re,n.BYTES*2)}const G=IIe;function W(R,N,M,P=G){const{context:L,zip215:F}=P,q=n.BYTES;R=eu("signature",R,2*q),N=eu("message",N),M=eu("publicKey",M,q),F!==void 0&&PP("zip215",F),s&&(N=s(N));const ne=sS(R.slice(q,2*q));let le,ie,re;try{le=v.fromHex(M,F),ie=v.fromHex(R.slice(0,q),F),re=A.multiplyUnsafe(ne)}catch{return!1}if(!F&&le.isSmallOrder())return!1;const ye=O(L,ie.toRawBytes(),le.toRawBytes(),N);return ie.add(le.multiplyUnsafe(ye)).subtract(re).clearCofactor().equals(v.ZERO)}return A._setWindowSize(8),{CURVE:e,getPublicKey:k,sign:B,verify:W,ExtendedPoint:v,utils:{getExtendedPublicKey:I,randomPrivateKey:()=>o(n.BYTES),precompute(R=8,N=v.BASE){return N._setWindowSize(R),N.multiply(BigInt(3)),N}}}}BigInt(0),BigInt(1);const ZM=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),T4=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const TIe=BigInt(1),R4=BigInt(2);BigInt(3);const RIe=BigInt(5),PIe=BigInt(8);function OIe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=ZM,o=t*t%i*t%i,a=Fc(o,R4,i)*o%i,c=Fc(a,TIe,i)*t%i,l=Fc(c,RIe,i)*c%i,u=Fc(l,e,i)*l%i,d=Fc(u,n,i)*u%i,h=Fc(d,r,i)*d%i,f=Fc(h,s,i)*h%i,p=Fc(f,s,i)*h%i,g=Fc(p,e,i)*l%i;return{pow_p_5_8:Fc(g,R4,i)*t%i,b2:o}}function kIe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function DIe(t,e){const n=ZM,r=Wr(e*e*e,n),s=Wr(r*r*e,n),i=OIe(t*s).pow_p_5_8;let o=Wr(t*r*i,n);const a=Wr(e*o*o,n),c=o,l=Wr(o*T4,n),u=a===t,d=a===Wr(-t,n),h=a===Wr(-t*T4,n);return u&&(o=c),(d||h)&&(o=l),gIe(o,n)&&(o=Wr(-o,n)),{isValid:u||d,value:o}}const LIe=eJ(ZM,void 0,!0),MIe={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:LIe,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:PIe,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:rIe,randomBytes:VQ,adjustScalarBytes:kIe,uvRatio:DIe},rJ=NIe(MIe),UIe="EdDSA",$Ie="JWT",LI=".",zN="base64url",sJ="utf8",iJ="utf8",BIe=":",FIe="did",jIe="key",P4="base58btc",zIe="z",WIe="K36",HIe=32;function XM(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function oJ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?XM(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function aJ(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=oJ(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return XM(n)}function GIe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,m=0,w=p.length;m!==w&&p[m]===0;)m++,g++;for(var v=(w-m)*u+1>>>0,A=new Uint8Array(v);m!==w;){for(var C=p[m],S=0,x=v-1;(C!==0||S<y)&&x!==-1;x--,S++)C+=256*A[x]>>>0,A[x]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");y=S,m++}for(var T=v-y;T!==v&&A[T]===0;)T++;for(var I=c.repeat(g);T<v;++T)I+=t.charAt(A[T]);return I}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,m=0;p[g]===c;)y++,g++;for(var w=(p.length-g)*l+1>>>0,v=new Uint8Array(w);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var C=0,S=w-1;(A!==0||C<m)&&S!==-1;S--,C++)A+=a*v[S]>>>0,v[S]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");m=C,g++}if(p[g]!==" "){for(var x=w-m;x!==w&&v[x]===0;)x++;for(var T=new Uint8Array(y+(w-x)),I=y;x!==w;)T[I++]=v[x++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var qIe=GIe,VIe=qIe;const cJ=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},KIe=t=>new TextEncoder().encode(t),YIe=t=>new TextDecoder().decode(t);let QIe=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},JIe=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return lJ(this,e)}},ZIe=class{constructor(e){this.decoders=e}or(e){return lJ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const lJ=(t,e)=>new ZIe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let XIe=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new QIe(e,n,r),this.decoder=new JIe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const WN=({name:t,prefix:e,encode:n,decode:r})=>new XIe(t,e,n,r),WC=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=VIe(n,e);return WN({prefix:t,name:e,encode:r,decode:i=>cJ(s(i))})},exe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},txe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Ms=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>WN({prefix:e,name:t,encode(s){return txe(s,r,n)},decode(s){return exe(s,r,n,t)}}),nxe=WN({prefix:"\0",name:"identity",encode:t=>YIe(t),decode:t=>KIe(t)});var rxe=Object.freeze({__proto__:null,identity:nxe});const sxe=Ms({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var ixe=Object.freeze({__proto__:null,base2:sxe});const oxe=Ms({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var axe=Object.freeze({__proto__:null,base8:oxe});const cxe=WC({prefix:"9",name:"base10",alphabet:"0123456789"});var lxe=Object.freeze({__proto__:null,base10:cxe});const uxe=Ms({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),dxe=Ms({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var hxe=Object.freeze({__proto__:null,base16:uxe,base16upper:dxe});const fxe=Ms({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),pxe=Ms({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),gxe=Ms({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),mxe=Ms({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),yxe=Ms({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),wxe=Ms({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),bxe=Ms({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),vxe=Ms({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Exe=Ms({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var _xe=Object.freeze({__proto__:null,base32:fxe,base32upper:pxe,base32pad:gxe,base32padupper:mxe,base32hex:yxe,base32hexupper:wxe,base32hexpad:bxe,base32hexpadupper:vxe,base32z:Exe});const Cxe=WC({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Axe=WC({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Sxe=Object.freeze({__proto__:null,base36:Cxe,base36upper:Axe});const Ixe=WC({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),xxe=WC({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Nxe=Object.freeze({__proto__:null,base58btc:Ixe,base58flickr:xxe});const Txe=Ms({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Rxe=Ms({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Pxe=Ms({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Oxe=Ms({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var kxe=Object.freeze({__proto__:null,base64:Txe,base64pad:Rxe,base64url:Pxe,base64urlpad:Oxe});const uJ=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Dxe=uJ.reduce((t,e,n)=>(t[n]=e,t),[]),Lxe=uJ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Mxe(t){return t.reduce((e,n)=>(e+=Dxe[n],e),"")}function Uxe(t){const e=[];for(const n of t){const r=Lxe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const $xe=WN({prefix:"🚀",name:"base256emoji",encode:Mxe,decode:Uxe});var Bxe=Object.freeze({__proto__:null,base256emoji:$xe}),Fxe=dJ,O4=128,jxe=-128,zxe=Math.pow(2,31);function dJ(t,e,n){e=e||[],n=n||0;for(var r=n;t>=zxe;)e[n++]=t&255|O4,t/=128;for(;t&jxe;)e[n++]=t&255|O4,t>>>=7;return e[n]=t|0,dJ.bytes=n-r+1,e}var Wxe=kD,Hxe=128,k4=127;function kD(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw kD.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&k4)<<s:(o&k4)*Math.pow(2,s),s+=7}while(o>=Hxe);return kD.bytes=i-r,n}var Gxe=Math.pow(2,7),qxe=Math.pow(2,14),Vxe=Math.pow(2,21),Kxe=Math.pow(2,28),Yxe=Math.pow(2,35),Qxe=Math.pow(2,42),Jxe=Math.pow(2,49),Zxe=Math.pow(2,56),Xxe=Math.pow(2,63),eNe=function(t){return t<Gxe?1:t<qxe?2:t<Vxe?3:t<Kxe?4:t<Yxe?5:t<Qxe?6:t<Jxe?7:t<Zxe?8:t<Xxe?9:10},tNe={encode:Fxe,decode:Wxe,encodingLength:eNe},hJ=tNe;const D4=(t,e,n=0)=>(hJ.encode(t,e,n),e),L4=t=>hJ.encodingLength(t),DD=(t,e)=>{const n=e.byteLength,r=L4(t),s=r+L4(n),i=new Uint8Array(s+n);return D4(t,i,0),D4(n,i,r),i.set(e,s),new nNe(t,n,e,i)};let nNe=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const fJ=({name:t,code:e,encode:n})=>new rNe(t,e,n);let rNe=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?DD(this.code,n):n.then(r=>DD(this.code,r))}else throw Error("Unknown type, must be binary type")}};const pJ=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),sNe=fJ({name:"sha2-256",code:18,encode:pJ("SHA-256")}),iNe=fJ({name:"sha2-512",code:19,encode:pJ("SHA-512")});var oNe=Object.freeze({__proto__:null,sha256:sNe,sha512:iNe});const gJ=0,aNe="identity",mJ=cJ,cNe=t=>DD(gJ,mJ(t)),lNe={code:gJ,name:aNe,encode:mJ,digest:cNe};var uNe=Object.freeze({__proto__:null,identity:lNe});new TextEncoder,new TextDecoder;const M4={...rxe,...ixe,...axe,...lxe,...hxe,..._xe,...Sxe,...Nxe,...kxe,...Bxe};({...oNe,...uNe});function yJ(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const U4=yJ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),UP=yJ("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=oJ(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),wJ={utf8:U4,"utf-8":U4,hex:M4.base16,latin1:UP,ascii:UP,binary:UP,...M4};function HN(t,e="utf8"){const n=wJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function rb(t,e="utf8"){const n=wJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?XM(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function $4(t){return xg(HN(rb(t,zN),sJ))}function MI(t){return HN(rb(rd(t),sJ),zN)}function bJ(t){const e=rb(WIe,P4),n=zIe+HN(aJ([e,t]),P4);return[FIe,jIe,n].join(BIe)}function dNe(t){return HN(t,zN)}function hNe(t){return rb(t,zN)}function fNe(t){return rb([MI(t.header),MI(t.payload)].join(LI),iJ)}function pNe(t){return[MI(t.header),MI(t.payload),dNe(t.signature)].join(LI)}function LD(t){const e=t.split(LI),n=$4(e[0]),r=$4(e[1]),s=hNe(e[2]),i=rb(e.slice(0,2).join(LI),iJ);return{header:n,payload:r,signature:s,data:i}}function B4(t=VQ(HIe)){const e=rJ.getPublicKey(t);return{secretKey:aJ([t,e]),publicKey:e}}async function gNe(t,e,n,r,s=xe.fromMiliseconds(Date.now())){const i={alg:UIe,typ:$Ie},o=bJ(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=fNe({header:i,payload:c}),u=rJ.sign(l,r.secretKey.slice(0,32));return pNe({header:i,payload:c,signature:u})}var F4=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},mNe=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),yNe=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),wNe=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),bNe=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),vNe=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),ENe=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,_Ne=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,j4=3,CNe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",ENe]],z4=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ANe(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new vNe:typeof navigator<"u"?INe(navigator.userAgent):NNe()}function SNe(t){return t!==""&&CNe.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function INe(t){var e=SNe(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new bNe;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<j4&&(s=F4(F4([],s,!0),TNe(j4-s.length),!0)):s=[];var i=s.join("."),o=xNe(t),a=_Ne.exec(t);return a&&a[1]?new wNe(n,i,o,a[1]):new mNe(n,i,o)}function xNe(t){for(var e=0,n=z4.length;e<n;e++){var r=z4[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function NNe(){var t=typeof process<"u"&&process.version;return t?new yNe(process.version.slice(1)):null}function TNe(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});Hn.getLocalStorage=Hn.getLocalStorageOrThrow=Hn.getCrypto=Hn.getCryptoOrThrow=vJ=Hn.getLocation=Hn.getLocationOrThrow=eU=Hn.getNavigator=Hn.getNavigatorOrThrow=Ng=Hn.getDocument=Hn.getDocumentOrThrow=Hn.getFromWindowOrThrow=Hn.getFromWindow=void 0;function om(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Hn.getFromWindow=om;function sb(t){const e=om(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Hn.getFromWindowOrThrow=sb;function RNe(){return sb("document")}Hn.getDocumentOrThrow=RNe;function PNe(){return om("document")}var Ng=Hn.getDocument=PNe;function ONe(){return sb("navigator")}Hn.getNavigatorOrThrow=ONe;function kNe(){return om("navigator")}var eU=Hn.getNavigator=kNe;function DNe(){return sb("location")}Hn.getLocationOrThrow=DNe;function LNe(){return om("location")}var vJ=Hn.getLocation=LNe;function MNe(){return sb("crypto")}Hn.getCryptoOrThrow=MNe;function UNe(){return om("crypto")}Hn.getCrypto=UNe;function $Ne(){return sb("localStorage")}Hn.getLocalStorageOrThrow=$Ne;function BNe(){return om("localStorage")}Hn.getLocalStorage=BNe;var tU={};Object.defineProperty(tU,"__esModule",{value:!0});var EJ=tU.getWindowMetadata=void 0;const W4=Hn;function FNe(){let t,e;try{t=W4.getDocumentOrThrow(),e=W4.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const y=p.getAttribute("href");if(y)if(y.toLowerCase().indexOf("https:")===-1&&y.toLowerCase().indexOf("http:")===-1&&y.indexOf("//")!==0){let m=e.protocol+"//"+e.host;if(y.indexOf("/")===0)m+=y;else{const w=e.pathname.split("/");w.pop();const v=w.join("/");m+=v+"/"+y}h.push(m)}else if(y.indexOf("//")===0){const m=e.protocol+y;h.push(m)}else h.push(y)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(y=>p.getAttribute(y)).filter(y=>y?d.includes(y):!1);if(g.length&&g){const y=p.getAttribute("content");if(y)return y}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}EJ=tU.getWindowMetadata=FNe;function jNe(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let w=l[h],v=0;for(let A=p-1;(w!==0||v<d)&&A!==-1;A--,v++)w+=256*g[A]>>>0,g[A]=w%n>>>0,w=w/n>>>0;if(w!==0)throw new Error("Non-zero carry");d=v,h++}let y=p-d;for(;y!==p&&g[y]===0;)y++;let m=r.repeat(u);for(;y<p;++y)m+=t.charAt(g[y]);return m}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const w=l.charCodeAt(u);if(w>255)return;let v=e[w];if(v===255)return;let A=0;for(let C=f-1;(v!==0||A<h)&&C!==-1;C--,A++)v+=n*p[C]>>>0,p[C]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");h=A,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const y=new Uint8Array(d+(f-g));let m=d;for(;g!==f;)y[m++]=p[g++];return y}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var zNe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const _J=jNe(zNe);function CJ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Qv(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=CJ(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function WNe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,m=0,w=p.length;m!==w&&p[m]===0;)m++,g++;for(var v=(w-m)*u+1>>>0,A=new Uint8Array(v);m!==w;){for(var C=p[m],S=0,x=v-1;(C!==0||S<y)&&x!==-1;x--,S++)C+=256*A[x]>>>0,A[x]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");y=S,m++}for(var T=v-y;T!==v&&A[T]===0;)T++;for(var I=c.repeat(g);T<v;++T)I+=t.charAt(A[T]);return I}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,m=0;p[g]===c;)y++,g++;for(var w=(p.length-g)*l+1>>>0,v=new Uint8Array(w);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var C=0,S=w-1;(A!==0||C<m)&&S!==-1;S--,C++)A+=a*v[S]>>>0,v[S]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");m=C,g++}if(p[g]!==" "){for(var x=w-m;x!==w&&v[x]===0;)x++;for(var T=new Uint8Array(y+(w-x)),I=y;x!==w;)T[I++]=v[x++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var HNe=WNe,GNe=HNe;const qNe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},VNe=t=>new TextEncoder().encode(t),KNe=t=>new TextDecoder().decode(t);class YNe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class QNe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return AJ(this,e)}}class JNe{constructor(e){this.decoders=e}or(e){return AJ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const AJ=(t,e)=>new JNe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class ZNe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new YNe(e,n,r),this.decoder=new QNe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const GN=({name:t,prefix:e,encode:n,decode:r})=>new ZNe(t,e,n,r),HC=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=GNe(n,e);return GN({prefix:t,name:e,encode:r,decode:i=>qNe(s(i))})},XNe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},eTe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Us=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>GN({prefix:e,name:t,encode(s){return eTe(s,r,n)},decode(s){return XNe(s,r,n,t)}}),tTe=GN({prefix:"\0",name:"identity",encode:t=>KNe(t),decode:t=>VNe(t)}),nTe=Object.freeze(Object.defineProperty({__proto__:null,identity:tTe},Symbol.toStringTag,{value:"Module"})),rTe=Us({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),sTe=Object.freeze(Object.defineProperty({__proto__:null,base2:rTe},Symbol.toStringTag,{value:"Module"})),iTe=Us({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),oTe=Object.freeze(Object.defineProperty({__proto__:null,base8:iTe},Symbol.toStringTag,{value:"Module"})),aTe=HC({prefix:"9",name:"base10",alphabet:"0123456789"}),cTe=Object.freeze(Object.defineProperty({__proto__:null,base10:aTe},Symbol.toStringTag,{value:"Module"})),lTe=Us({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),uTe=Us({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),dTe=Object.freeze(Object.defineProperty({__proto__:null,base16:lTe,base16upper:uTe},Symbol.toStringTag,{value:"Module"})),hTe=Us({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),fTe=Us({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),pTe=Us({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),gTe=Us({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),mTe=Us({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),yTe=Us({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),wTe=Us({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),bTe=Us({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),vTe=Us({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),ETe=Object.freeze(Object.defineProperty({__proto__:null,base32:hTe,base32hex:mTe,base32hexpad:wTe,base32hexpadupper:bTe,base32hexupper:yTe,base32pad:pTe,base32padupper:gTe,base32upper:fTe,base32z:vTe},Symbol.toStringTag,{value:"Module"})),_Te=HC({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),CTe=HC({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),ATe=Object.freeze(Object.defineProperty({__proto__:null,base36:_Te,base36upper:CTe},Symbol.toStringTag,{value:"Module"})),STe=HC({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ITe=HC({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),xTe=Object.freeze(Object.defineProperty({__proto__:null,base58btc:STe,base58flickr:ITe},Symbol.toStringTag,{value:"Module"})),NTe=Us({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),TTe=Us({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),RTe=Us({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),PTe=Us({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),OTe=Object.freeze(Object.defineProperty({__proto__:null,base64:NTe,base64pad:TTe,base64url:RTe,base64urlpad:PTe},Symbol.toStringTag,{value:"Module"})),SJ=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),kTe=SJ.reduce((t,e,n)=>(t[n]=e,t),[]),DTe=SJ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function LTe(t){return t.reduce((e,n)=>(e+=kTe[n],e),"")}function MTe(t){const e=[];for(const n of t){const r=DTe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const UTe=GN({prefix:"🚀",name:"base256emoji",encode:LTe,decode:MTe}),$Te=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:UTe},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const H4={...nTe,...sTe,...oTe,...cTe,...dTe,...ETe,...ATe,...xTe,...OTe,...$Te};function IJ(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const G4=IJ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),$P=IJ("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=CJ(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),xJ={utf8:G4,"utf-8":G4,hex:H4.base16,latin1:$P,ascii:$P,binary:$P,...H4};function Ea(t,e="utf8"){const n=xJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}function io(t,e="utf8"){const n=xJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const BTe={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},FTe="PARSE_ERROR",jTe="INVALID_REQUEST",zTe="METHOD_NOT_FOUND",WTe="INVALID_PARAMS",NJ="INTERNAL_ERROR",nU="SERVER_ERROR",HTe=[-32700,-32600,-32601,-32602,-32603],Jv={[FTe]:{code:-32700,message:"Parse error"},[jTe]:{code:-32600,message:"Invalid Request"},[zTe]:{code:-32601,message:"Method not found"},[WTe]:{code:-32602,message:"Invalid params"},[NJ]:{code:-32603,message:"Internal error"},[nU]:{code:-32e3,message:"Server error"}},TJ=nU;function GTe(t){return HTe.includes(t)}function q4(t){return Object.keys(Jv).includes(t)?Jv[t]:Jv[TJ]}function qTe(t){const e=Object.values(Jv).find(n=>n.code===t);return e||Jv[TJ]}function RJ(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var PJ={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var MD=function(t,e){return MD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},MD(t,e)};function VTe(t,e){MD(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var UD=function(){return UD=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},UD.apply(this,arguments)};function KTe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function YTe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function QTe(t,e){return function(n,r){e(n,r,t)}}function JTe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ZTe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function XTe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function eRe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function tRe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function $D(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function OJ(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function nRe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(OJ(arguments[e]));return t}function rRe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function d_(t){return this instanceof d_?(this.v=t,this):new d_(t)}function sRe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof d_?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function iRe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:d_(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function oRe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof $D=="function"?$D(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function aRe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function cRe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function lRe(t){return t&&t.__esModule?t:{default:t}}function uRe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function dRe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const hRe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return UD},__asyncDelegator:iRe,__asyncGenerator:sRe,__asyncValues:oRe,__await:d_,__awaiter:ZTe,__classPrivateFieldGet:uRe,__classPrivateFieldSet:dRe,__createBinding:eRe,__decorate:YTe,__exportStar:tRe,__extends:VTe,__generator:XTe,__importDefault:lRe,__importStar:cRe,__makeTemplateObject:aRe,__metadata:JTe,__param:QTe,__read:OJ,__rest:KTe,__spread:nRe,__spreadArrays:rRe,__values:$D},Symbol.toStringTag,{value:"Module"})),fRe=yz(hRe);var tu={},V4;function pRe(){if(V4)return tu;V4=1,Object.defineProperty(tu,"__esModule",{value:!0}),tu.isBrowserCryptoAvailable=tu.getSubtleCrypto=tu.getBrowerCrypto=void 0;function t(){return(ul==null?void 0:ul.crypto)||(ul==null?void 0:ul.msCrypto)||{}}tu.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}tu.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return tu.isBrowserCryptoAvailable=n,tu}var nu={},K4;function gRe(){if(K4)return nu;K4=1,Object.defineProperty(nu,"__esModule",{value:!0}),nu.isBrowser=nu.isNode=nu.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}nu.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}nu.isNode=e;function n(){return!t()&&!e()}return nu.isBrowser=n,nu}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=fRe;e.__exportStar(pRe(),t),e.__exportStar(gRe(),t)})(PJ);function Yc(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function mp(t=6){return BigInt(Yc(t))}function xh(t,e,n){return{id:n||Yc(),jsonrpc:"2.0",method:t,params:e}}function qN(t,e){return{id:t,jsonrpc:"2.0",result:e}}function VN(t,e,n){return{id:t,jsonrpc:"2.0",error:mRe(e)}}function mRe(t,e){return typeof t>"u"?q4(NJ):(typeof t=="string"&&(t=Object.assign(Object.assign({},q4(nU)),{message:t})),GTe(t.code)&&(t=qTe(t.code)),t)}let yRe=class{},wRe=class extends yRe{constructor(){super()}},bRe=class extends wRe{constructor(e){super()}};const vRe="^https?:",ERe="^wss?:";function _Re(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function kJ(t,e){const n=_Re(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function Y4(t){return kJ(t,vRe)}function Q4(t){return kJ(t,ERe)}function CRe(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function DJ(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function rU(t){return DJ(t)&&"method"in t}function KN(t){return DJ(t)&&(Qc(t)||pa(t))}function Qc(t){return"result"in t}function pa(t){return"error"in t}let Da=class extends bRe{constructor(e){super(e),this.events=new ka.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(xh(e.method,e.params||[],e.id||mp().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{pa(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),KN(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const ARe=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),SRe=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",J4=t=>t.split("?")[0],Z4=10,IRe=ARe();let xRe=class{constructor(e){if(this.url=e,this.events=new ka.EventEmitter,this.registering=!1,!Q4(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(rd(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!Q4(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=PJ.isReactNative()?void 0:{rejectUnauthorized:!CRe(e)},i=new IRe(e,[],s);SRe()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?xg(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=VN(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return RJ(e,J4(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Z4&&this.events.setMaxListeners(Z4)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${J4(this.url)}`));return this.events.emit("register_error",n),n}};var BD={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof ul<"u"&&ul,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof ul<"u"&&ul||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(R){return R&&DataView.prototype.isPrototypeOf(R)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(R){return R&&u.indexOf(Object.prototype.toString.call(R))>-1};function h(R){if(typeof R!="string"&&(R=String(R)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(R)||R==="")throw new TypeError('Invalid character in header field name: "'+R+'"');return R.toLowerCase()}function f(R){return typeof R!="string"&&(R=String(R)),R}function p(R){var N={next:function(){var M=R.shift();return{done:M===void 0,value:M}}};return c.iterable&&(N[Symbol.iterator]=function(){return N}),N}function g(R){this.map={},R instanceof g?R.forEach(function(N,M){this.append(M,N)},this):Array.isArray(R)?R.forEach(function(N){if(N.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+N.length);this.append(N[0],N[1])},this):R&&Object.getOwnPropertyNames(R).forEach(function(N){this.append(N,R[N])},this)}g.prototype.append=function(R,N){R=h(R),N=f(N);var M=this.map[R];this.map[R]=M?M+", "+N:N},g.prototype.delete=function(R){delete this.map[h(R)]},g.prototype.get=function(R){return R=h(R),this.has(R)?this.map[R]:null},g.prototype.has=function(R){return this.map.hasOwnProperty(h(R))},g.prototype.set=function(R,N){this.map[h(R)]=f(N)},g.prototype.forEach=function(R,N){for(var M in this.map)this.map.hasOwnProperty(M)&&R.call(N,this.map[M],M,this)},g.prototype.keys=function(){var R=[];return this.forEach(function(N,M){R.push(M)}),p(R)},g.prototype.values=function(){var R=[];return this.forEach(function(N){R.push(N)}),p(R)},g.prototype.entries=function(){var R=[];return this.forEach(function(N,M){R.push([M,N])}),p(R)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function y(R){if(!R._noBody){if(R.bodyUsed)return Promise.reject(new TypeError("Already read"));R.bodyUsed=!0}}function m(R){return new Promise(function(N,M){R.onload=function(){N(R.result)},R.onerror=function(){M(R.error)}})}function w(R){var N=new FileReader,M=m(N);return N.readAsArrayBuffer(R),M}function v(R){var N=new FileReader,M=m(N),P=/charset=([A-Za-z0-9_-]+)/.exec(R.type),L=P?P[1]:"utf-8";return N.readAsText(R,L),M}function A(R){for(var N=new Uint8Array(R),M=new Array(N.length),P=0;P<N.length;P++)M[P]=String.fromCharCode(N[P]);return M.join("")}function C(R){if(R.slice)return R.slice(0);var N=new Uint8Array(R.byteLength);return N.set(new Uint8Array(R)),N.buffer}function S(){return this.bodyUsed=!1,this._initBody=function(R){this.bodyUsed=this.bodyUsed,this._bodyInit=R,R?typeof R=="string"?this._bodyText=R:c.blob&&Blob.prototype.isPrototypeOf(R)?this._bodyBlob=R:c.formData&&FormData.prototype.isPrototypeOf(R)?this._bodyFormData=R:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(R)?this._bodyText=R.toString():c.arrayBuffer&&c.blob&&l(R)?(this._bodyArrayBuffer=C(R.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(R)||d(R))?this._bodyArrayBuffer=C(R):this._bodyText=R=Object.prototype.toString.call(R):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof R=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(R)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var R=y(this);if(R)return R;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var R=y(this);return R||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(w);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var R=y(this);if(R)return R;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}var x=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function T(R){var N=R.toUpperCase();return x.indexOf(N)>-1?N:R}function I(R,N){if(!(this instanceof I))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');N=N||{};var M=N.body;if(R instanceof I){if(R.bodyUsed)throw new TypeError("Already read");this.url=R.url,this.credentials=R.credentials,N.headers||(this.headers=new g(R.headers)),this.method=R.method,this.mode=R.mode,this.signal=R.signal,!M&&R._bodyInit!=null&&(M=R._bodyInit,R.bodyUsed=!0)}else this.url=String(R);if(this.credentials=N.credentials||this.credentials||"same-origin",(N.headers||!this.headers)&&(this.headers=new g(N.headers)),this.method=T(N.method||this.method||"GET"),this.mode=N.mode||this.mode||null,this.signal=N.signal||this.signal||function(){if("AbortController"in a){var F=new AbortController;return F.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&M)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(M),(this.method==="GET"||this.method==="HEAD")&&(N.cache==="no-store"||N.cache==="no-cache")){var P=/([?&])_=[^&]*/;if(P.test(this.url))this.url=this.url.replace(P,"$1_="+new Date().getTime());else{var L=/\?/;this.url+=(L.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}I.prototype.clone=function(){return new I(this,{body:this._bodyInit})};function k(R){var N=new FormData;return R.trim().split("&").forEach(function(M){if(M){var P=M.split("="),L=P.shift().replace(/\+/g," "),F=P.join("=").replace(/\+/g," ");N.append(decodeURIComponent(L),decodeURIComponent(F))}}),N}function O(R){var N=new g,M=R.replace(/\r?\n[\t ]+/g," ");return M.split("\r").map(function(P){return P.indexOf(`
`)===0?P.substr(1,P.length):P}).forEach(function(P){var L=P.split(":"),F=L.shift().trim();if(F){var q=L.join(":").trim();try{N.append(F,q)}catch(ne){console.warn("Response "+ne.message)}}}),N}S.call(I.prototype);function B(R,N){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(N||(N={}),this.type="default",this.status=N.status===void 0?200:N.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=N.statusText===void 0?"":""+N.statusText,this.headers=new g(N.headers),this.url=N.url||"",this._initBody(R)}S.call(B.prototype),B.prototype.clone=function(){return new B(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},B.error=function(){var R=new B(null,{status:200,statusText:""});return R.ok=!1,R.status=0,R.type="error",R};var G=[301,302,303,307,308];B.redirect=function(R,N){if(G.indexOf(N)===-1)throw new RangeError("Invalid status code");return new B(null,{status:N,headers:{location:R}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(N,M){this.message=N,this.name=M;var P=Error(N);this.stack=P.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function W(R,N){return new Promise(function(M,P){var L=new I(R,N);if(L.signal&&L.signal.aborted)return P(new o.DOMException("Aborted","AbortError"));var F=new XMLHttpRequest;function q(){F.abort()}F.onload=function(){var ie={statusText:F.statusText,headers:O(F.getAllResponseHeaders()||"")};L.url.indexOf("file://")===0&&(F.status<200||F.status>599)?ie.status=200:ie.status=F.status,ie.url="responseURL"in F?F.responseURL:ie.headers.get("X-Request-URL");var re="response"in F?F.response:F.responseText;setTimeout(function(){M(new B(re,ie))},0)},F.onerror=function(){setTimeout(function(){P(new TypeError("Network request failed"))},0)},F.ontimeout=function(){setTimeout(function(){P(new TypeError("Network request timed out"))},0)},F.onabort=function(){setTimeout(function(){P(new o.DOMException("Aborted","AbortError"))},0)};function ne(ie){try{return ie===""&&a.location.href?a.location.href:ie}catch{return ie}}if(F.open(L.method,ne(L.url),!0),L.credentials==="include"?F.withCredentials=!0:L.credentials==="omit"&&(F.withCredentials=!1),"responseType"in F&&(c.blob?F.responseType="blob":c.arrayBuffer&&(F.responseType="arraybuffer")),N&&typeof N.headers=="object"&&!(N.headers instanceof g||a.Headers&&N.headers instanceof a.Headers)){var le=[];Object.getOwnPropertyNames(N.headers).forEach(function(ie){le.push(h(ie)),F.setRequestHeader(ie,f(N.headers[ie]))}),L.headers.forEach(function(ie,re){le.indexOf(re)===-1&&F.setRequestHeader(re,ie)})}else L.headers.forEach(function(ie,re){F.setRequestHeader(re,ie)});L.signal&&(L.signal.addEventListener("abort",q),F.onreadystatechange=function(){F.readyState===4&&L.signal.removeEventListener("abort",q)}),F.send(typeof L._bodyInit>"u"?null:L._bodyInit)})}return W.polyfill=!0,a.fetch||(a.fetch=W,a.Headers=g,a.Request=I,a.Response=B),o.Headers=g,o.Request=I,o.Response=B,o.fetch=W,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(BD,BD.exports);var NRe=BD.exports;const X4=Wg(NRe);var TRe=Object.defineProperty,RRe=Object.defineProperties,PRe=Object.getOwnPropertyDescriptors,eF=Object.getOwnPropertySymbols,ORe=Object.prototype.hasOwnProperty,kRe=Object.prototype.propertyIsEnumerable,tF=(t,e,n)=>e in t?TRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nF=(t,e)=>{for(var n in e||(e={}))ORe.call(e,n)&&tF(t,n,e[n]);if(eF)for(var n of eF(e))kRe.call(e,n)&&tF(t,n,e[n]);return t},rF=(t,e)=>RRe(t,PRe(e));const DRe={Accept:"application/json","Content-Type":"application/json"},LRe="POST",sF={headers:DRe,method:LRe},iF=10;let Oc=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new ka.EventEmitter,this.isAvailable=!1,this.registering=!1,!Y4(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=rd(e),r=await(await X4(this.url,rF(nF({},sF),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!Y4(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=rd({id:1,jsonrpc:"2.0",method:"test",params:[]});await X4(e,rF(nF({},sF),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?xg(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=VN(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return RJ(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>iF&&this.events.setMaxListeners(iF)}};const Zv={getSIWX(){return ve.state.siwx},async initializeIfEnabled(){var i;const t=ve.state.siwx,e=z.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(z.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await us.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),ir.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=gt._getClient())==null?void 0:i.disconnect().catch(console.error)),Mt.reset("Connect"),pc.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=ve.state.siwx,e=ot.getPlainAddress(z.getActiveCaipAddress()),n=z.getActiveCaipNetwork(),r=gt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();je.getConnectorId(n.chainNamespace)===ze.CONNECTOR_ID.AUTH&&Mt.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),us.close(),ir.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!us.state.open||Mt.state.view==="ApproveTransaction")&&await us.open({view:"SIWXSignMessage"}),i.isSmartAccount?pc.showError("This application might not support Smart Accounts"):pc.showError("Signature declined"),ir.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await gt.disconnect():us.close(),Mt.reset("Connect"),ir.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=ve.state.siwx,e=ot.getPlainAddress(z.getActiveCaipAddress()),n=z.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Mt.state.view==="ApproveTransaction",r=Mt.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=Zv.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=z.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(pc.showLoading("Authenticating...",{autoClose:!1}),Qe.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),ir.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Zv.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),ir.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Zv.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{pc.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=z.state.activeChain;return{network:((e=z.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=Qe.state.preferredAccountTypes)==null?void 0:n[t])===Ps.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};function aA(t,e){return je.getConnectorId(t)===e}function MRe(t){const e=Array.from(z.state.chains.keys());let n=[];return t?(n.push([t,z.state.chains.get(t)]),aA(t,ze.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&aA(r,ze.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,z.state.chains.get(r)])}):aA(t,ze.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&aA(r,ze.CONNECTOR_ID.AUTH)&&n.push([r,z.state.chains.get(r)])})):n=Array.from(z.state.chains.entries()),n}const Gi={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},UI={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[ze.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ze.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ze.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[ze.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[ze.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[ze.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[ze.CONNECTOR_ID.INJECTED]:"Browser Wallet",[ze.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[ze.CONNECTOR_ID.COINBASE]:"Coinbase",[ze.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[ze.CONNECTOR_ID.LEDGER]:"Ledger",[ze.CONNECTOR_ID.SAFE]:"Safe"}},YN={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Gi.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},URe=new AbortController,hl={EmbeddedWalletAbortController:URe,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${$Re()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function $Re(){return typeof window<"u"}const BRe={createLogger(t,e="error"){const n=im({level:e}),{logger:r}=jN({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},FRe="rpc.walletconnect.org";function oF(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const BP=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Zm={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===FRe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:ze.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${ze.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return BP.includes(e)?oF(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,y;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((y=r==null?void 0:r[i])==null?void 0:y.map(m=>m.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:UI.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Zm.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Sh(a.url,a.config))}),BP.includes(t.caipNetworkId)&&r.push(Sh(oF(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Sh(a))}),xI(r)},extendWagmiTransports(t,e,n){if(BP.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return xI([n,Sh(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:ze.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=Je.getActiveCaipNetworkId(),n=z.getAllRequestedCaipNetworks(),r=Array.from(((c=z.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},$I={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Oi=er({providers:{...$I},providerIds:{...$I}}),Tn={state:Oi,subscribeKey(t,e){return ti(Oi,t,e)},subscribe(t){return Xs(Oi,()=>{t(Oi)})},subscribeProviders(t){return Xs(Oi.providers,()=>t(Oi.providers))},setProvider(t,e){e&&(Oi.providers[t]=Sg(e))},getProvider(t){return Oi.providers[t]},setProviderId(t,e){e&&(Oi.providerIds[t]=e)},getProviderId(t){if(t)return Oi.providerIds[t]},reset(){Oi.providers={...$I},Oi.providerIds={...$I}},resetChain(t){Oi.providers[t]=void 0,Oi.providerIds[t]=void 0}},aF={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},_s={set(t,e){Po.isClient&&localStorage.setItem(`${Ke.STORAGE_KEY}${t}`,e)},get(t){return Po.isClient?localStorage.getItem(`${Ke.STORAGE_KEY}${t}`):null},delete(t,e){Po.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ke.STORAGE_KEY}${t}`))}},cA=30*1e3,Po={checkIfAllowedToTriggerEmail(){const t=_s.get(Ke.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<cA){const n=Math.ceil((cA-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=_s.get(Ke.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<cA)return Math.ceil((cA-e)/1e3)}return 0},checkIfRequestExists(t){return Ps.NOT_SAFE_RPC_METHODS.includes(t.method)||Ps.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(aF.transactionHash))||(t==null?void 0:t.match(aF.signedMessage)))?Ke.RPC_RESPONSE_TYPE_TX:Ke.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Ps.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var dn;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(dn||(dn={}));var FD;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(FD||(FD={}));const Ue=dn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Vd=t=>{switch(typeof t){case"undefined":return Ue.undefined;case"string":return Ue.string;case"number":return isNaN(t)?Ue.nan:Ue.number;case"boolean":return Ue.boolean;case"function":return Ue.function;case"bigint":return Ue.bigint;case"symbol":return Ue.symbol;case"object":return Array.isArray(t)?Ue.array:t===null?Ue.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ue.promise:typeof Map<"u"&&t instanceof Map?Ue.map:typeof Set<"u"&&t instanceof Set?Ue.set:typeof Date<"u"&&t instanceof Date?Ue.date:Ue.object;default:return Ue.unknown}},Ce=dn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),jRe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Cc extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,dn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Cc.create=t=>new Cc(t);const h_=(t,e)=>{let n;switch(t.code){case Ce.invalid_type:t.received===Ue.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Ce.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,dn.jsonStringifyReplacer)}`;break;case Ce.unrecognized_keys:n=`Unrecognized key(s) in object: ${dn.joinValues(t.keys,", ")}`;break;case Ce.invalid_union:n="Invalid input";break;case Ce.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${dn.joinValues(t.options)}`;break;case Ce.invalid_enum_value:n=`Invalid enum value. Expected ${dn.joinValues(t.options)}, received '${t.received}'`;break;case Ce.invalid_arguments:n="Invalid function arguments";break;case Ce.invalid_return_type:n="Invalid function return type";break;case Ce.invalid_date:n="Invalid date";break;case Ce.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:dn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Ce.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Ce.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Ce.custom:n="Invalid input";break;case Ce.invalid_intersection_types:n="Intersection results could not be merged";break;case Ce.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Ce.not_finite:n="Number must be finite";break;default:n=e.defaultError,dn.assertNever(t)}return{message:n}};let LJ=h_;function zRe(t){LJ=t}function BI(){return LJ}const FI=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},WRe=[];function qe(t,e){const n=FI({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,BI(),h_].filter(r=>!!r)});t.common.issues.push(n)}class ei{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return xt;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return ei.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return xt;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const xt=Object.freeze({status:"aborted"}),MJ=t=>({status:"dirty",value:t}),_i=t=>({status:"valid",value:t}),jD=t=>t.status==="aborted",zD=t=>t.status==="dirty",f_=t=>t.status==="valid",jI=t=>typeof Promise<"u"&&t instanceof Promise;var ct;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ct||(ct={}));class Ul{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const cF=(t,e)=>{if(f_(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Cc(t.common.issues);return this._error=n,this._error}}};function Ot(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class Ut{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Vd(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Vd(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ei,ctx:{common:e.parent.common,data:e.data,parsedType:Vd(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(jI(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Vd(e)},i=this._parseSync({data:e,path:s.path,parent:s});return cF(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Vd(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(jI(s)?s:Promise.resolve(s));return cF(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Ce.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Tc({schema:this,typeName:vt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return zu.create(this,this._def)}nullable(){return Pg.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ac.create(this,this._def)}promise(){return y0.create(this,this._def)}or(e){return y_.create([this,e],this._def)}and(e){return w_.create(this,e,this._def)}transform(e){return new Tc({...Ot(this._def),schema:this,typeName:vt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new C_({...Ot(this._def),innerType:this,defaultValue:n,typeName:vt.ZodDefault})}brand(){return new $J({typeName:vt.ZodBranded,type:this,...Ot(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new GI({...Ot(this._def),innerType:this,catchValue:n,typeName:vt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return GC.create(this,e)}readonly(){return VI.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const HRe=/^c[^\s-]{8,}$/i,GRe=/^[a-z][a-z0-9]*$/,qRe=/^[0-9A-HJKMNP-TV-Z]{26}$/,VRe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,KRe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,YRe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let FP;const QRe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,JRe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ZRe=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function XRe(t,e){return!!((e==="v4"||!e)&&QRe.test(t)||(e==="v6"||!e)&&JRe.test(t))}class wc extends Ut{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ue.string){const i=this._getOrReturnCtx(e);return qe(i,{code:Ce.invalid_type,expected:Ue.string,received:i.parsedType}),xt}const r=new ei;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),qe(s,{code:Ce.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),qe(s,{code:Ce.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?qe(s,{code:Ce.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&qe(s,{code:Ce.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")KRe.test(e.data)||(s=this._getOrReturnCtx(e,s),qe(s,{validation:"email",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")FP||(FP=new RegExp(YRe,"u")),FP.test(e.data)||(s=this._getOrReturnCtx(e,s),qe(s,{validation:"emoji",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")VRe.test(e.data)||(s=this._getOrReturnCtx(e,s),qe(s,{validation:"uuid",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")HRe.test(e.data)||(s=this._getOrReturnCtx(e,s),qe(s,{validation:"cuid",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")GRe.test(e.data)||(s=this._getOrReturnCtx(e,s),qe(s,{validation:"cuid2",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")qRe.test(e.data)||(s=this._getOrReturnCtx(e,s),qe(s,{validation:"ulid",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),qe(s,{validation:"url",code:Ce.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),qe(s,{validation:"regex",code:Ce.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),qe(s,{code:Ce.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),qe(s,{code:Ce.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),qe(s,{code:Ce.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?ZRe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),qe(s,{code:Ce.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?XRe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),qe(s,{validation:"ip",code:Ce.invalid_string,message:i.message}),r.dirty()):dn.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Ce.invalid_string,...ct.errToObj(r)})}_addCheck(e){return new wc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ct.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ct.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ct.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ct.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ct.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ct.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ct.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ct.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...ct.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ct.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ct.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ct.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ct.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ct.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ct.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ct.errToObj(n)})}nonempty(e){return this.min(1,ct.errToObj(e))}trim(){return new wc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new wc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new wc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}wc.create=t=>{var e;return new wc({checks:[],typeName:vt.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ot(t)})};function ePe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class df extends Ut{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ue.number){const i=this._getOrReturnCtx(e);return qe(i,{code:Ce.invalid_type,expected:Ue.number,received:i.parsedType}),xt}let r;const s=new ei;for(const i of this._def.checks)i.kind==="int"?dn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),qe(r,{code:Ce.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),qe(r,{code:Ce.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),qe(r,{code:Ce.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?ePe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),qe(r,{code:Ce.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),qe(r,{code:Ce.not_finite,message:i.message}),s.dirty()):dn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ct.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ct.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ct.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ct.toString(n))}setLimit(e,n,r,s){return new df({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ct.toString(s)}]})}_addCheck(e){return new df({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ct.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ct.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ct.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ct.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ct.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ct.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ct.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ct.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ct.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&dn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}df.create=t=>new df({checks:[],typeName:vt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ot(t)});class hf extends Ut{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Ue.bigint){const i=this._getOrReturnCtx(e);return qe(i,{code:Ce.invalid_type,expected:Ue.bigint,received:i.parsedType}),xt}let r;const s=new ei;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),qe(r,{code:Ce.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),qe(r,{code:Ce.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),qe(r,{code:Ce.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):dn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ct.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ct.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ct.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ct.toString(n))}setLimit(e,n,r,s){return new hf({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ct.toString(s)}]})}_addCheck(e){return new hf({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ct.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ct.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ct.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ct.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ct.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}hf.create=t=>{var e;return new hf({checks:[],typeName:vt.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ot(t)})};class p_ extends Ut{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ue.boolean){const r=this._getOrReturnCtx(e);return qe(r,{code:Ce.invalid_type,expected:Ue.boolean,received:r.parsedType}),xt}return _i(e.data)}}p_.create=t=>new p_({typeName:vt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ot(t)});class Tg extends Ut{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ue.date){const i=this._getOrReturnCtx(e);return qe(i,{code:Ce.invalid_type,expected:Ue.date,received:i.parsedType}),xt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return qe(i,{code:Ce.invalid_date}),xt}const r=new ei;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),qe(s,{code:Ce.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),qe(s,{code:Ce.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):dn.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Tg({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ct.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ct.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Tg.create=t=>new Tg({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:vt.ZodDate,...Ot(t)});class zI extends Ut{_parse(e){if(this._getType(e)!==Ue.symbol){const r=this._getOrReturnCtx(e);return qe(r,{code:Ce.invalid_type,expected:Ue.symbol,received:r.parsedType}),xt}return _i(e.data)}}zI.create=t=>new zI({typeName:vt.ZodSymbol,...Ot(t)});class g_ extends Ut{_parse(e){if(this._getType(e)!==Ue.undefined){const r=this._getOrReturnCtx(e);return qe(r,{code:Ce.invalid_type,expected:Ue.undefined,received:r.parsedType}),xt}return _i(e.data)}}g_.create=t=>new g_({typeName:vt.ZodUndefined,...Ot(t)});class m_ extends Ut{_parse(e){if(this._getType(e)!==Ue.null){const r=this._getOrReturnCtx(e);return qe(r,{code:Ce.invalid_type,expected:Ue.null,received:r.parsedType}),xt}return _i(e.data)}}m_.create=t=>new m_({typeName:vt.ZodNull,...Ot(t)});class m0 extends Ut{constructor(){super(...arguments),this._any=!0}_parse(e){return _i(e.data)}}m0.create=t=>new m0({typeName:vt.ZodAny,...Ot(t)});class tg extends Ut{constructor(){super(...arguments),this._unknown=!0}_parse(e){return _i(e.data)}}tg.create=t=>new tg({typeName:vt.ZodUnknown,...Ot(t)});class sd extends Ut{_parse(e){const n=this._getOrReturnCtx(e);return qe(n,{code:Ce.invalid_type,expected:Ue.never,received:n.parsedType}),xt}}sd.create=t=>new sd({typeName:vt.ZodNever,...Ot(t)});class WI extends Ut{_parse(e){if(this._getType(e)!==Ue.undefined){const r=this._getOrReturnCtx(e);return qe(r,{code:Ce.invalid_type,expected:Ue.void,received:r.parsedType}),xt}return _i(e.data)}}WI.create=t=>new WI({typeName:vt.ZodVoid,...Ot(t)});class Ac extends Ut{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Ue.array)return qe(n,{code:Ce.invalid_type,expected:Ue.array,received:n.parsedType}),xt;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(qe(n,{code:o?Ce.too_big:Ce.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(qe(n,{code:Ce.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(qe(n,{code:Ce.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Ul(n,o,n.path,a)))).then(o=>ei.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Ul(n,o,n.path,a)));return ei.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Ac({...this._def,minLength:{value:e,message:ct.toString(n)}})}max(e,n){return new Ac({...this._def,maxLength:{value:e,message:ct.toString(n)}})}length(e,n){return new Ac({...this._def,exactLength:{value:e,message:ct.toString(n)}})}nonempty(e){return this.min(1,e)}}Ac.create=(t,e)=>new Ac({type:t,minLength:null,maxLength:null,exactLength:null,typeName:vt.ZodArray,...Ot(e)});function Xm(t){if(t instanceof ar){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=zu.create(Xm(r))}return new ar({...t._def,shape:()=>e})}else return t instanceof Ac?new Ac({...t._def,type:Xm(t.element)}):t instanceof zu?zu.create(Xm(t.unwrap())):t instanceof Pg?Pg.create(Xm(t.unwrap())):t instanceof $l?$l.create(t.items.map(e=>Xm(e))):t}class ar extends Ut{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=dn.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Ue.object){const l=this._getOrReturnCtx(e);return qe(l,{code:Ce.invalid_type,expected:Ue.object,received:l.parsedType}),xt}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof sd&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Ul(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof sd){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(qe(s,{code:Ce.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Ul(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>ei.mergeObjectSync(r,l)):ei.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return ct.errToObj,new ar({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=ct.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new ar({...this._def,unknownKeys:"strip"})}passthrough(){return new ar({...this._def,unknownKeys:"passthrough"})}extend(e){return new ar({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ar({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:vt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new ar({...this._def,catchall:e})}pick(e){const n={};return dn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new ar({...this._def,shape:()=>n})}omit(e){const n={};return dn.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new ar({...this._def,shape:()=>n})}deepPartial(){return Xm(this)}partial(e){const n={};return dn.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new ar({...this._def,shape:()=>n})}required(e){const n={};return dn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof zu;)i=i._def.innerType;n[r]=i}}),new ar({...this._def,shape:()=>n})}keyof(){return UJ(dn.objectKeys(this.shape))}}ar.create=(t,e)=>new ar({shape:()=>t,unknownKeys:"strip",catchall:sd.create(),typeName:vt.ZodObject,...Ot(e)});ar.strictCreate=(t,e)=>new ar({shape:()=>t,unknownKeys:"strict",catchall:sd.create(),typeName:vt.ZodObject,...Ot(e)});ar.lazycreate=(t,e)=>new ar({shape:t,unknownKeys:"strip",catchall:sd.create(),typeName:vt.ZodObject,...Ot(e)});class y_ extends Ut{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Cc(a.ctx.common.issues));return qe(n,{code:Ce.invalid_union,unionErrors:o}),xt}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Cc(c));return qe(n,{code:Ce.invalid_union,unionErrors:a}),xt}}get options(){return this._def.options}}y_.create=(t,e)=>new y_({options:t,typeName:vt.ZodUnion,...Ot(e)});const iS=t=>t instanceof v_?iS(t.schema):t instanceof Tc?iS(t.innerType()):t instanceof E_?[t.value]:t instanceof ff?t.options:t instanceof __?Object.keys(t.enum):t instanceof C_?iS(t._def.innerType):t instanceof g_?[void 0]:t instanceof m_?[null]:null;class QN extends Ut{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ue.object)return qe(n,{code:Ce.invalid_type,expected:Ue.object,received:n.parsedType}),xt;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(qe(n,{code:Ce.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),xt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=iS(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new QN({typeName:vt.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Ot(r)})}}function WD(t,e){const n=Vd(t),r=Vd(e);if(t===e)return{valid:!0,data:t};if(n===Ue.object&&r===Ue.object){const s=dn.objectKeys(e),i=dn.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=WD(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===Ue.array&&r===Ue.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=WD(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===Ue.date&&r===Ue.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class w_ extends Ut{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(jD(i)||jD(o))return xt;const a=WD(i.value,o.value);return a.valid?((zD(i)||zD(o))&&n.dirty(),{status:n.value,value:a.data}):(qe(r,{code:Ce.invalid_intersection_types}),xt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}w_.create=(t,e,n)=>new w_({left:t,right:e,typeName:vt.ZodIntersection,...Ot(n)});class $l extends Ut{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.array)return qe(r,{code:Ce.invalid_type,expected:Ue.array,received:r.parsedType}),xt;if(r.data.length<this._def.items.length)return qe(r,{code:Ce.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),xt;!this._def.rest&&r.data.length>this._def.items.length&&(qe(r,{code:Ce.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Ul(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>ei.mergeArray(n,o)):ei.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new $l({...this._def,rest:e})}}$l.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new $l({items:t,typeName:vt.ZodTuple,rest:null,...Ot(e)})};class b_ extends Ut{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.object)return qe(r,{code:Ce.invalid_type,expected:Ue.object,received:r.parsedType}),xt;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Ul(r,a,r.path,a)),value:o._parse(new Ul(r,r.data[a],r.path,a))});return r.common.async?ei.mergeObjectAsync(n,s):ei.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Ut?new b_({keyType:e,valueType:n,typeName:vt.ZodRecord,...Ot(r)}):new b_({keyType:wc.create(),valueType:e,typeName:vt.ZodRecord,...Ot(n)})}}class HI extends Ut{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.map)return qe(r,{code:Ce.invalid_type,expected:Ue.map,received:r.parsedType}),xt;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new Ul(r,a,r.path,[l,"key"])),value:i._parse(new Ul(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return xt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return xt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}HI.create=(t,e,n)=>new HI({valueType:e,keyType:t,typeName:vt.ZodMap,...Ot(n)});class Rg extends Ut{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.set)return qe(r,{code:Ce.invalid_type,expected:Ue.set,received:r.parsedType}),xt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(qe(r,{code:Ce.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(qe(r,{code:Ce.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return xt;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new Ul(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new Rg({...this._def,minSize:{value:e,message:ct.toString(n)}})}max(e,n){return new Rg({...this._def,maxSize:{value:e,message:ct.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Rg.create=(t,e)=>new Rg({valueType:t,minSize:null,maxSize:null,typeName:vt.ZodSet,...Ot(e)});class Fy extends Ut{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ue.function)return qe(n,{code:Ce.invalid_type,expected:Ue.function,received:n.parsedType}),xt;function r(a,c){return FI({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,BI(),h_].filter(l=>!!l),issueData:{code:Ce.invalid_arguments,argumentsError:c}})}function s(a,c){return FI({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,BI(),h_].filter(l=>!!l),issueData:{code:Ce.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof y0){const a=this;return _i(async function(...c){const l=new Cc([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return _i(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new Cc([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new Cc([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Fy({...this._def,args:$l.create(e).rest(tg.create())})}returns(e){return new Fy({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Fy({args:e||$l.create([]).rest(tg.create()),returns:n||tg.create(),typeName:vt.ZodFunction,...Ot(r)})}}class v_ extends Ut{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}v_.create=(t,e)=>new v_({getter:t,typeName:vt.ZodLazy,...Ot(e)});class E_ extends Ut{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return qe(n,{received:n.data,code:Ce.invalid_literal,expected:this._def.value}),xt}return{status:"valid",value:e.data}}get value(){return this._def.value}}E_.create=(t,e)=>new E_({value:t,typeName:vt.ZodLiteral,...Ot(e)});function UJ(t,e){return new ff({values:t,typeName:vt.ZodEnum,...Ot(e)})}class ff extends Ut{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return qe(n,{expected:dn.joinValues(r),received:n.parsedType,code:Ce.invalid_type}),xt}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return qe(n,{received:n.data,code:Ce.invalid_enum_value,options:r}),xt}return _i(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return ff.create(e)}exclude(e){return ff.create(this.options.filter(n=>!e.includes(n)))}}ff.create=UJ;class __ extends Ut{_parse(e){const n=dn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ue.string&&r.parsedType!==Ue.number){const s=dn.objectValues(n);return qe(r,{expected:dn.joinValues(s),received:r.parsedType,code:Ce.invalid_type}),xt}if(n.indexOf(e.data)===-1){const s=dn.objectValues(n);return qe(r,{received:r.data,code:Ce.invalid_enum_value,options:s}),xt}return _i(e.data)}get enum(){return this._def.values}}__.create=(t,e)=>new __({values:t,typeName:vt.ZodNativeEnum,...Ot(e)});class y0 extends Ut{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ue.promise&&n.common.async===!1)return qe(n,{code:Ce.invalid_type,expected:Ue.promise,received:n.parsedType}),xt;const r=n.parsedType===Ue.promise?n.data:Promise.resolve(n.data);return _i(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}y0.create=(t,e)=>new y0({type:t,typeName:vt.ZodPromise,...Ot(e)});class Tc extends Ut{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===vt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{qe(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?xt:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?xt:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!f_(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>f_(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);dn.assertNever(s)}}Tc.create=(t,e,n)=>new Tc({schema:t,typeName:vt.ZodEffects,effect:e,...Ot(n)});Tc.createWithPreprocess=(t,e,n)=>new Tc({schema:e,effect:{type:"preprocess",transform:t},typeName:vt.ZodEffects,...Ot(n)});class zu extends Ut{_parse(e){return this._getType(e)===Ue.undefined?_i(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}zu.create=(t,e)=>new zu({innerType:t,typeName:vt.ZodOptional,...Ot(e)});class Pg extends Ut{_parse(e){return this._getType(e)===Ue.null?_i(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Pg.create=(t,e)=>new Pg({innerType:t,typeName:vt.ZodNullable,...Ot(e)});class C_ extends Ut{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Ue.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}C_.create=(t,e)=>new C_({innerType:t,typeName:vt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ot(e)});class GI extends Ut{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return jI(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Cc(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Cc(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}GI.create=(t,e)=>new GI({innerType:t,typeName:vt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ot(e)});class qI extends Ut{_parse(e){if(this._getType(e)!==Ue.nan){const r=this._getOrReturnCtx(e);return qe(r,{code:Ce.invalid_type,expected:Ue.nan,received:r.parsedType}),xt}return{status:"valid",value:e.data}}}qI.create=t=>new qI({typeName:vt.ZodNaN,...Ot(t)});const tPe=Symbol("zod_brand");class $J extends Ut{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class GC extends Ut{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?xt:i.status==="dirty"?(n.dirty(),MJ(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?xt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new GC({in:e,out:n,typeName:vt.ZodPipeline})}}class VI extends Ut{_parse(e){const n=this._def.innerType._parse(e);return f_(n)&&(n.value=Object.freeze(n.value)),n}}VI.create=(t,e)=>new VI({innerType:t,typeName:vt.ZodReadonly,...Ot(e)});const BJ=(t,e={},n)=>t?m0.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):m0.create(),nPe={object:ar.lazycreate};var vt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(vt||(vt={}));const rPe=(t,e={message:`Input not instance of ${t.name}`})=>BJ(n=>n instanceof t,e),FJ=wc.create,jJ=df.create,sPe=qI.create,iPe=hf.create,zJ=p_.create,oPe=Tg.create,aPe=zI.create,cPe=g_.create,lPe=m_.create,uPe=m0.create,dPe=tg.create,hPe=sd.create,fPe=WI.create,pPe=Ac.create,gPe=ar.create,mPe=ar.strictCreate,yPe=y_.create,wPe=QN.create,bPe=w_.create,vPe=$l.create,EPe=b_.create,_Pe=HI.create,CPe=Rg.create,APe=Fy.create,SPe=v_.create,IPe=E_.create,xPe=ff.create,NPe=__.create,TPe=y0.create,lF=Tc.create,RPe=zu.create,PPe=Pg.create,OPe=Tc.createWithPreprocess,kPe=GC.create,DPe=()=>FJ().optional(),LPe=()=>jJ().optional(),MPe=()=>zJ().optional(),UPe={string:t=>wc.create({...t,coerce:!0}),number:t=>df.create({...t,coerce:!0}),boolean:t=>p_.create({...t,coerce:!0}),bigint:t=>hf.create({...t,coerce:!0}),date:t=>Tg.create({...t,coerce:!0})},$Pe=xt;var E=Object.freeze({__proto__:null,defaultErrorMap:h_,setErrorMap:zRe,getErrorMap:BI,makeIssue:FI,EMPTY_PATH:WRe,addIssueToContext:qe,ParseStatus:ei,INVALID:xt,DIRTY:MJ,OK:_i,isAborted:jD,isDirty:zD,isValid:f_,isAsync:jI,get util(){return dn},get objectUtil(){return FD},ZodParsedType:Ue,getParsedType:Vd,ZodType:Ut,ZodString:wc,ZodNumber:df,ZodBigInt:hf,ZodBoolean:p_,ZodDate:Tg,ZodSymbol:zI,ZodUndefined:g_,ZodNull:m_,ZodAny:m0,ZodUnknown:tg,ZodNever:sd,ZodVoid:WI,ZodArray:Ac,ZodObject:ar,ZodUnion:y_,ZodDiscriminatedUnion:QN,ZodIntersection:w_,ZodTuple:$l,ZodRecord:b_,ZodMap:HI,ZodSet:Rg,ZodFunction:Fy,ZodLazy:v_,ZodLiteral:E_,ZodEnum:ff,ZodNativeEnum:__,ZodPromise:y0,ZodEffects:Tc,ZodTransformer:Tc,ZodOptional:zu,ZodNullable:Pg,ZodDefault:C_,ZodCatch:GI,ZodNaN:qI,BRAND:tPe,ZodBranded:$J,ZodPipeline:GC,ZodReadonly:VI,custom:BJ,Schema:Ut,ZodSchema:Ut,late:nPe,get ZodFirstPartyTypeKind(){return vt},coerce:UPe,any:uPe,array:pPe,bigint:iPe,boolean:zJ,date:oPe,discriminatedUnion:wPe,effect:lF,enum:xPe,function:APe,instanceof:rPe,intersection:bPe,lazy:SPe,literal:IPe,map:_Pe,nan:sPe,nativeEnum:NPe,never:hPe,null:lPe,nullable:PPe,number:jJ,object:gPe,oboolean:MPe,onumber:LPe,optional:RPe,ostring:DPe,pipeline:kPe,preprocess:OPe,promise:TPe,record:EPe,set:CPe,strictObject:mPe,string:FJ,symbol:aPe,transformer:lF,tuple:vPe,undefined:cPe,union:yPe,unknown:dPe,void:fPe,NEVER:$Pe,ZodIssueCode:Ce,quotelessJson:jRe,ZodError:Cc});const gr=E.object({message:E.string()});function He(t){return E.literal(Ke[t])}E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const BPe=E.object({chainId:E.string().or(E.number())}),FPe=E.object({email:E.string().email()}),jPe=E.object({otp:E.string()}),zPe=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number()))}),WPe=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string())}),HPe=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),GPe=E.object({email:E.string().email()}),qPe=E.object({otp:E.string()}),VPe=E.object({otp:E.string()}),KPe=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),YPe=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),QPe=E.object({type:E.string()}),JPe=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),ZPe=E.object({url:E.string()}),XPe=E.object({userName:E.string()}),eOe=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([Ps.ACCOUNT_TYPES.EOA,Ps.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string())}),tOe=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),nOe=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([Ps.ACCOUNT_TYPES.EOA,Ps.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string())}),rOe=E.object({uri:E.string()}),sOe=E.object({isConnected:E.boolean()}),iOe=E.object({chainId:E.string().or(E.number())}),oOe=E.object({chainId:E.string().or(E.number())}),aOe=E.object({newEmail:E.string().email()}),cOe=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const lOe=E.object({version:E.string().optional()}),uOe=E.object({type:E.string(),address:E.string()}),dOe=E.any(),hOe=E.object({method:E.literal("eth_accounts")}),fOe=E.object({method:E.literal("eth_blockNumber")}),pOe=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),gOe=E.object({method:E.literal("eth_chainId")}),mOe=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),yOe=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),wOe=E.object({method:E.literal("eth_gasPrice")}),bOe=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),vOe=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),EOe=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),_Oe=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),COe=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),AOe=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),SOe=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),IOe=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),xOe=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),NOe=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),TOe=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),ROe=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),POe=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),OOe=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),kOe=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),DOe=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),LOe=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),MOe=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),UOe=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),$Oe=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),BOe=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),FOe=E.object({method:E.literal("eth_newBlockFilter")}),jOe=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),zOe=E.object({method:E.literal("eth_newPendingTransactionFilter")}),WOe=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),HOe=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),GOe=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),uF=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),qOe=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),VOe=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),KOe=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),YOe=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),QOe=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),JOe=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),ZOe=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),XOe=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),e2e=E.object({method:E.literal("wallet_getCapabilities")}),t2e=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),n2e=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),r2e=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),dF=E.object({token:E.string()}),Ge=E.object({id:E.string().optional()}),zb={appEvent:Ge.extend({type:He("APP_SWITCH_NETWORK"),payload:BPe}).or(Ge.extend({type:He("APP_CONNECT_EMAIL"),payload:FPe})).or(Ge.extend({type:He("APP_CONNECT_DEVICE")})).or(Ge.extend({type:He("APP_CONNECT_OTP"),payload:jPe})).or(Ge.extend({type:He("APP_CONNECT_SOCIAL"),payload:zPe})).or(Ge.extend({type:He("APP_GET_FARCASTER_URI")})).or(Ge.extend({type:He("APP_CONNECT_FARCASTER")})).or(Ge.extend({type:He("APP_GET_USER"),payload:E.optional(WPe)})).or(Ge.extend({type:He("APP_GET_SOCIAL_REDIRECT_URI"),payload:HPe})).or(Ge.extend({type:He("APP_SIGN_OUT")})).or(Ge.extend({type:He("APP_IS_CONNECTED"),payload:E.optional(dF)})).or(Ge.extend({type:He("APP_GET_CHAIN_ID")})).or(Ge.extend({type:He("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Ge.extend({type:He("APP_INIT_SMART_ACCOUNT")})).or(Ge.extend({type:He("APP_SET_PREFERRED_ACCOUNT"),payload:QPe})).or(Ge.extend({type:He("APP_RPC_REQUEST"),payload:uF.or(r2e).or(hOe).or(fOe).or(pOe).or(gOe).or(mOe).or(yOe).or(wOe).or(bOe).or(vOe).or(EOe).or(_Oe).or(COe).or(AOe).or(SOe).or(IOe).or(xOe).or(NOe).or(TOe).or(ROe).or(POe).or(OOe).or(kOe).or(DOe).or(LOe).or(MOe).or(UOe).or($Oe).or(BOe).or(FOe).or(jOe).or(zOe).or(WOe).or(HOe).or(GOe).or(uF).or(qOe).or(VOe).or(KOe).or(YOe).or(QOe).or(JOe).or(XOe).or(ZOe).or(e2e).or(t2e).or(n2e)})).or(Ge.extend({type:He("APP_UPDATE_EMAIL"),payload:GPe})).or(Ge.extend({type:He("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:qPe})).or(Ge.extend({type:He("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:VPe})).or(Ge.extend({type:He("APP_SYNC_THEME"),payload:KPe})).or(Ge.extend({type:He("APP_SYNC_DAPP_DATA"),payload:YPe})).or(Ge.extend({type:He("APP_RELOAD")})),frameEvent:Ge.extend({type:He("FRAME_SWITCH_NETWORK_ERROR"),payload:gr}).or(Ge.extend({type:He("FRAME_SWITCH_NETWORK_SUCCESS"),payload:oOe})).or(Ge.extend({type:He("FRAME_CONNECT_EMAIL_SUCCESS"),payload:JPe})).or(Ge.extend({type:He("FRAME_CONNECT_EMAIL_ERROR"),payload:gr})).or(Ge.extend({type:He("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:ZPe})).or(Ge.extend({type:He("FRAME_GET_FARCASTER_URI_ERROR"),payload:gr})).or(Ge.extend({type:He("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:XPe})).or(Ge.extend({type:He("FRAME_CONNECT_FARCASTER_ERROR"),payload:gr})).or(Ge.extend({type:He("FRAME_CONNECT_OTP_ERROR"),payload:gr})).or(Ge.extend({type:He("FRAME_CONNECT_OTP_SUCCESS")})).or(Ge.extend({type:He("FRAME_CONNECT_DEVICE_ERROR"),payload:gr})).or(Ge.extend({type:He("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Ge.extend({type:He("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:eOe})).or(Ge.extend({type:He("FRAME_CONNECT_SOCIAL_ERROR"),payload:gr})).or(Ge.extend({type:He("FRAME_GET_USER_ERROR"),payload:gr})).or(Ge.extend({type:He("FRAME_GET_USER_SUCCESS"),payload:nOe})).or(Ge.extend({type:He("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:gr})).or(Ge.extend({type:He("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:rOe})).or(Ge.extend({type:He("FRAME_SIGN_OUT_ERROR"),payload:gr})).or(Ge.extend({type:He("FRAME_SIGN_OUT_SUCCESS")})).or(Ge.extend({type:He("FRAME_IS_CONNECTED_ERROR"),payload:gr})).or(Ge.extend({type:He("FRAME_IS_CONNECTED_SUCCESS"),payload:sOe})).or(Ge.extend({type:He("FRAME_GET_CHAIN_ID_ERROR"),payload:gr})).or(Ge.extend({type:He("FRAME_GET_CHAIN_ID_SUCCESS"),payload:iOe})).or(Ge.extend({type:He("FRAME_RPC_REQUEST_ERROR"),payload:gr})).or(Ge.extend({type:He("FRAME_RPC_REQUEST_SUCCESS"),payload:dOe})).or(Ge.extend({type:He("FRAME_SESSION_UPDATE"),payload:dF})).or(Ge.extend({type:He("FRAME_UPDATE_EMAIL_ERROR"),payload:gr})).or(Ge.extend({type:He("FRAME_UPDATE_EMAIL_SUCCESS"),payload:tOe})).or(Ge.extend({type:He("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:gr})).or(Ge.extend({type:He("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Ge.extend({type:He("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:gr})).or(Ge.extend({type:He("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:aOe})).or(Ge.extend({type:He("FRAME_SYNC_THEME_ERROR"),payload:gr})).or(Ge.extend({type:He("FRAME_SYNC_THEME_SUCCESS")})).or(Ge.extend({type:He("FRAME_SYNC_DAPP_DATA_ERROR"),payload:gr})).or(Ge.extend({type:He("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Ge.extend({type:He("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:cOe})).or(Ge.extend({type:He("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:gr})).or(Ge.extend({type:He("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:gr})).or(Ge.extend({type:He("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:uOe})).or(Ge.extend({type:He("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:gr})).or(Ge.extend({type:He("FRAME_READY"),payload:lOe})).or(Ge.extend({type:He("FRAME_RELOAD_ERROR"),payload:gr})).or(Ge.extend({type:He("FRAME_RELOAD_SUCCESS")}))};function jP(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}let s2e=class{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=ze.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!jP(Ke.FRAME_EVENT_KEY,l))return;const u=zb.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}Po.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{Po.isClient&&window.addEventListener("message",({data:o})=>{if(!jP(Ke.FRAME_EVENT_KEY,o))return;const a=zb.frameEvent.parse(o);i(a)})},onAppEvent:i=>{Po.isClient&&window.addEventListener("message",({data:o})=>{if(!jP(Ke.APP_EVENT_KEY,o))return;const a=zb.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(Po.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");zb.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(Po.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");zb.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),Po.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${W1e}?projectId=${e}&chainId=${r}&version=${G1e}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}},i2e=class{constructor(e){var i;const n=im({level:H1e}),{logger:r,chunkLoggerController:s}=jN({opts:n});this.logger=Ls(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}},o2e=class{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new i2e(e)),this.abortController=i,this.w3mFrame=new s2e({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Ke.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!_s.get(Ke.EMAIL_LOGIN_USED_KEY)}getEmail(){return _s.get(Ke.EMAIL)}getUsername(){return _s.get(Ke.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Ke.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Po.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Ke.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Ke.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Ke.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Ke.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Ke.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Ke.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Ke.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Ke.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Ke.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Ke.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Ke.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Ke.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Ke.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:Ke.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ke.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:Ke.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Ke.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Ke.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:Ke.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Ke.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(Ps.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:Ke.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ke.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ke.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Ke.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ke.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ke.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ke.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Ke.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Ps.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ke.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===Ke.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{Ps.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Ke.APP_SYNC_DAPP_DATA,Ke.APP_SYNC_THEME,Ke.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Ke.APP_CONNECT_EMAIL,Ke.APP_CONNECT_DEVICE,Ke.APP_CONNECT_OTP,Ke.APP_CONNECT_SOCIAL,Ke.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},3e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const y=e;this.openRpcRequests=[...this.openRpcRequests,{...y.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(y,m){var w,v,A;y.id===u&&((v=m==null?void 0:(w=m.logger).info)==null||v.call(w,{framEvent:y,id:u},"Received frame response"),y.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&c(y.payload),c(void 0)):y.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&l(new Error(((A=y.payload)==null?void 0:A.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,y=>h(y,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){_s.set(Ke.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){_s.set(Ke.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&_s.set(Ke.EMAIL,e),_s.set(Ke.EMAIL_LOGIN_USED_KEY,"true"),_s.delete(Ke.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){_s.delete(Ke.EMAIL_LOGIN_USED_KEY),_s.delete(Ke.EMAIL),_s.delete(Ke.LAST_USED_CHAIN_KEY),_s.delete(Ke.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&_s.set(Ke.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=_s.get(Ke.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){_s.set(Ke.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}},a2e=class oS{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return oS.instance||(oS.instance=new o2e({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),oS.instance}};function c2e(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function es(t,...e){try{return c2e(t(...e))}catch(n){return Promise.reject(n)}}function l2e(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function u2e(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function aS(t){if(l2e(t))return String(t);if(u2e(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return aS(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const HD="base64:";function d2e(t){return typeof t=="string"?t:HD+p2e(t)}function h2e(t){return typeof t!="string"||!t.startsWith(HD)?t:f2e(t.slice(HD.length))}function f2e(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function p2e(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Ui(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function g2e(...t){return Ui(t.join(":"))}function lA(t){return t=Ui(t),t?t+":":""}function m2e(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function y2e(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const w2e="memory",b2e=()=>{const t=new Map;return{name:w2e,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function v2e(t={}){const e={mounts:{"":t.driver||b2e()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=Ui(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await hF(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",y=Ui(g?p:p.key),m=g?void 0:p.value,w=g||!p.options?u:{...u,...p.options},v=n(y);f(v).items.push({key:y,value:m,relativeKey:v.relativeKey,options:w})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=Ui(l);const{relativeKey:d,driver:h}=n(l);return es(h.hasItem,d,u)},getItem(l,u={}){l=Ui(l);const{relativeKey:d,driver:h}=n(l);return es(h.getItem,d,u).then(f=>nA(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?es(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:g2e(d.base,f.key),value:nA(f.value)}))):Promise.all(d.items.map(h=>es(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:nA(f)})))))},getItemRaw(l,u={}){l=Ui(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?es(h.getItemRaw,d,u):es(h.getItem,d,u).then(f=>h2e(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Ui(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await es(f.setItem,h,aS(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return es(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:aS(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>es(d.driver.setItem,h.relativeKey,aS(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Ui(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await es(f.setItemRaw,h,u,d);else if(f.setItem)await es(f.setItem,h,d2e(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Ui(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await es(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await es(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Ui(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await es(h.getMeta,d,u)),!u.nativeOnly){const p=await es(h.getItem,d+"$",u).then(g=>nA(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var y;l=lA(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const m of d){(y=m.driver.flags)!=null&&y.maxDepth||(p=!1);const w=await es(m.driver.getKeys,m.relativeBase,u);for(const v of w){const A=m.mountpoint+Ui(v);h.some(C=>A.startsWith(C))||f.push(A)}h=[m.mountpoint,...h.filter(v=>!v.startsWith(m.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(m=>(!g||m2e(m,u.maxDepth))&&y2e(m,l))},async clear(l,u={}){l=lA(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return es(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>fF(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=lA(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(hF(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=lA(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await fF(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=Ui(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Ui(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function hF(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function fF(t){typeof t.dispose=="function"&&await es(t.dispose)}const E2e="idb-keyval";var _2e=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=jQ(t.dbName,t.storeName)),{name:E2e,options:t,async hasItem(s){return!(typeof await m4(n(s),r)>"u")},async getItem(s){return await m4(n(s),r)??null},setItem(s,i){return qAe(n(s),i,r)},removeItem(s){return VAe(n(s),r)},getKeys(){return QAe(r)},clear(){return KAe(r)}}};const C2e="WALLET_CONNECT_V2_INDEXED_DB",A2e="keyvaluestorage";let S2e=class{constructor(){this.indexedDb=v2e({driver:_2e({dbName:C2e,storeName:A2e})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,rd(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var zP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cS={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof zP<"u"&&zP.localStorage?cS.exports=zP.localStorage:typeof window<"u"&&window.localStorage?cS.exports=window.localStorage:cS.exports=new e})();function I2e(t){var e;return[t[0],xg((e=t[1])!=null?e:"")]}let x2e=class{constructor(){this.localStorage=cS.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(I2e)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return xg(n)}async setItem(e,n){this.localStorage.setItem(e,rd(n))}async removeItem(e){this.localStorage.removeItem(e)}};const N2e="wc_storage_version",pF=1,T2e=async(t,e,n)=>{const r=N2e,s=await e.getItem(r);if(s&&s>=pF){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,pF),n(e),R2e(t,o)},R2e=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let P2e=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new x2e;this.storage=e;try{const n=new S2e;T2e(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var O2e=Object.defineProperty,k2e=(t,e,n)=>e in t?O2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gF=(t,e,n)=>k2e(t,typeof e!="symbol"?e+"":e,n);let D2e=class extends nm{constructor(e){super(),this.opts=e,gF(this,"protocol","wc"),gF(this,"version",2)}};var L2e=Object.defineProperty,M2e=(t,e,n)=>e in t?L2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,U2e=(t,e,n)=>M2e(t,e+"",n);let $2e=class extends nm{constructor(e,n){super(),this.core=e,this.logger=n,U2e(this,"records",new Map)}},B2e=class{constructor(e,n){this.logger=e,this.core=n}},F2e=class extends nm{constructor(e,n){super(),this.relayer=e,this.logger=n}},j2e=class extends nm{constructor(e){super()}},z2e=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},W2e=class extends nm{constructor(e,n){super(),this.relayer=e,this.logger=n}},H2e=class extends nm{constructor(e,n){super(),this.core=e,this.logger=n}},G2e=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},q2e=class{constructor(e,n){this.projectId=e,this.logger=n}},V2e=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var K2e=Object.defineProperty,Y2e=(t,e,n)=>e in t?K2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mF=(t,e,n)=>Y2e(t,typeof e!="symbol"?e+"":e,n);let Q2e=class{constructor(e){this.opts=e,mF(this,"protocol","wc"),mF(this,"version",2)}},J2e=class{constructor(e){this.client=e}};function A_(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function yF(t){return A_(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const WJ="2.23.2";let Wb={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${WJ}`};class Og extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof Og?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Og&&n.cause.docsPath||n.docsPath,i=(a=Wb.getDocsUrl)==null?void 0:a.call(Wb,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Wb.version?[`Version: ${Wb.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=WJ}walk(e){return HJ(this,e)}}function HJ(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?HJ(t.cause,e):e?null:t}class GJ extends Og{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function ib(t,{dir:e,size:n=32}={}){return typeof t=="string"?Z2e(t,{dir:e,size:n}):X2e(t,{dir:e,size:n})}function Z2e(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new GJ({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function X2e(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new GJ({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class eke extends Og{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class tke extends Og{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function ob(t,{size:e}){if(yF(t)>e)throw new tke({givenSize:yF(t),maxSize:e})}function GD(t,e={}){const{signed:n}=e;e.size&&ob(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function nke(t,e={}){return Number(GD(t,e))}const rke=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function qD(t,e={}){return typeof t=="number"||typeof t=="bigint"?VJ(t,e):typeof t=="string"?oke(t,e):typeof t=="boolean"?ske(t,e):qJ(t,e)}function ske(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(ob(n,{size:e.size}),ib(n,{size:e.size})):n}function qJ(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=rke[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(ob(r,{size:e.size}),ib(r,{dir:"right",size:e.size})):r}function VJ(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new eke({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?ib(a,{size:r}):a}const ike=new TextEncoder;function oke(t,e={}){const n=ike.encode(t);return qJ(n,e)}const ake=new TextEncoder;function cke(t,e={}){return typeof t=="number"||typeof t=="bigint"?uke(t,e):typeof t=="boolean"?lke(t,e):A_(t)?KJ(t,e):YJ(t,e)}function lke(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(ob(n,{size:e.size}),ib(n,{size:e.size})):n}const ru={zero:48,nine:57,A:65,F:70,a:97,f:102};function wF(t){if(t>=ru.zero&&t<=ru.nine)return t-ru.zero;if(t>=ru.A&&t<=ru.F)return t-(ru.A-10);if(t>=ru.a&&t<=ru.f)return t-(ru.a-10)}function KJ(t,e={}){let n=t;e.size&&(ob(n,{size:e.size}),n=ib(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=wF(r.charCodeAt(a++)),l=wF(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new Og(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function uke(t,e){const n=VJ(t,e);return KJ(n)}function YJ(t,e={}){const n=ake.encode(t);return typeof e.size=="number"?(ob(n,{size:e.size}),ib(n,{dir:"right",size:e.size})):n}function KI(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function dke(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function JN(t,...e){if(!dke(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Hqe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");KI(t.outputLen),KI(t.blockLen)}function bF(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function hke(t,e){JN(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const uA=BigInt(2**32-1),vF=BigInt(32);function fke(t,e=!1){return e?{h:Number(t&uA),l:Number(t>>vF&uA)}:{h:Number(t>>vF&uA)|0,l:Number(t&uA)|0}}function pke(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=fke(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const gke=(t,e,n)=>t<<n|e>>>32-n,mke=(t,e,n)=>e<<n|t>>>32-n,yke=(t,e,n)=>e<<n-32|t>>>64-n,wke=(t,e,n)=>t<<n-32|e>>>64-n,Rm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function bke(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Gqe(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function qqe(t,e){return t<<32-e|t>>>e}const EF=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function vke(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function _F(t){for(let e=0;e<t.length;e++)t[e]=vke(t[e])}function Eke(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function QJ(t){return typeof t=="string"&&(t=Eke(t)),JN(t),t}function Vqe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];JN(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let _ke=class{clone(){return this._cloneInto()}};function Cke(t){const e=r=>t().update(QJ(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Yqe(t=32){if(Rm&&typeof Rm.getRandomValues=="function")return Rm.getRandomValues(new Uint8Array(t));if(Rm&&typeof Rm.randomBytes=="function")return Rm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const JJ=[],ZJ=[],XJ=[],Ake=BigInt(0),Hb=BigInt(1),Ske=BigInt(2),Ike=BigInt(7),xke=BigInt(256),Nke=BigInt(113);for(let t=0,e=Hb,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],JJ.push(2*(5*r+n)),ZJ.push((t+1)*(t+2)/2%64);let s=Ake;for(let i=0;i<7;i++)e=(e<<Hb^(e>>Ike)*Nke)%xke,e&Ske&&(s^=Hb<<(Hb<<BigInt(i))-Hb);XJ.push(s)}const[Tke,Rke]=pke(XJ,!0),CF=(t,e,n)=>n>32?yke(t,e,n):gke(t,e,n),AF=(t,e,n)=>n>32?wke(t,e,n):mke(t,e,n);function Pke(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=CF(l,u,1)^n[a],h=AF(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=ZJ[o],c=CF(s,i,a),l=AF(s,i,a),u=JJ[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Tke[r],t[1]^=Rke[r]}n.fill(0)}let Oke=class eZ extends _ke{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,KI(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=bke(this.state)}keccak(){EF||_F(this.state32),Pke(this.state32,this.rounds),EF||_F(this.state32),this.posOut=0,this.pos=0}update(e){bF(this);const{blockLen:n,state:r}=this;e=QJ(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){bF(this,!1),JN(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return KI(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(hke(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new eZ(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const kke=(t,e,n)=>Cke(()=>new Oke(e,t,n)),Dke=kke(1,136,256/8);function tZ(t,e){const n=e||"hex",r=Dke(A_(t,{strict:!1})?cke(t):t);return n==="bytes"?r:qD(r)}class Lke extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const WP=new Lke(8192);function Mke(t,e){if(WP.has(`${t}.${e}`))return WP.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=tZ(YJ(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return WP.set(`${t}.${e}`,i),i}function Uke(t){const e=tZ(`0x${t.substring(4)}`).substring(26);return Mke(`0x${e}`)}async function $ke({hash:t,signature:e}){const n=A_(t)?t:qD(t),{secp256k1:r}=await Ks(async()=>{const{secp256k1:o}=await import("./secp256k1-BLeTe0WI.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=SF(f);return new r.Signature(GD(l),GD(u)).addRecoveryBit(p)}const o=A_(e)?e:qD(e),a=nke(`0x${o.slice(130)}`),c=SF(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function SF(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function Bke({hash:t,signature:e}){return Uke(await $ke({hash:t,signature:e}))}var Fke={};const jke=":";function jy(t){const[e,n]=t.split(jke);return{namespace:e,reference:n}}function nZ(t,e){return t.includes(":")?[t]:e.chains||[]}var zke=Object.defineProperty,Wke=Object.defineProperties,Hke=Object.getOwnPropertyDescriptors,IF=Object.getOwnPropertySymbols,Gke=Object.prototype.hasOwnProperty,qke=Object.prototype.propertyIsEnumerable,xF=(t,e,n)=>e in t?zke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,NF=(t,e)=>{for(var n in e||(e={}))Gke.call(e,n)&&xF(t,n,e[n]);if(IF)for(var n of IF(e))qke.call(e,n)&&xF(t,n,e[n]);return t},Vke=(t,e)=>Wke(t,Hke(e));const Kke="ReactNative",ko={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Yke="js";function YI(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Af(){return!Ng()&&!!eU()&&navigator.product===Kke}function Qke(){return Af()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function Jke(){return Af()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function ab(){return!YI()&&!!eU()&&!!Ng()}function qC(){return Af()?ko.reactNative:YI()?ko.node:ab()?ko.browser:ko.unknown}function TF(){var t;try{return Af()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function Zke(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function Xke(t){var e,n;const r=rZ();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),Vke(NF(NF({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function rZ(){return EJ()||{name:"",description:"",url:"",icons:[""]}}function eDe(){if(qC()===ko.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=ANe();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function tDe(){var t;const e=qC();return e===ko.browser?[e,((t=vJ())==null?void 0:t.host)||"unknown"].join(":"):e}function sZ(t,e,n){const r=eDe(),s=tDe();return[[t,e].join("-"),[Yke,n].join("-"),r,s].join("/")}function nDe({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=sZ(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=Zke(l[1]||"",d);return l[0]+"?"+h}function yp(t,e){return t.filter(n=>e.includes(n)).length===t.length}function VD(t){return Object.fromEntries(t.entries())}function KD(t){return new Map(Object.entries(t))}function Wf(t=xe.FIVE_MINUTES,e){const n=xe.toMiliseconds(t||xe.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function Nh(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function iZ(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function rDe(t){return iZ("topic",t)}function sDe(t){return iZ("id",t)}function oZ(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function Fr(t,e){return xe.fromMiliseconds(Date.now()+xe.toMiliseconds(t))}function Wd(t){return Date.now()>=xe.toMiliseconds(t)}function bn(t,e){return`${t}${e?`:${e}`:""}`}function Rl(t=[],e=[]){return[...new Set([...t,...e])]}async function iDe({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=oDe(i,t,e),a=qC();if(a===ko.browser){if(!((r=Ng())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}aDe(o)}else a===ko.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function oDe(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${dDe(r,!0)}`}else s=`${s}/wc?${r}`;return s}function aDe(t){let e="_self";uDe()?e="_top":(lDe()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function cDe(t,e){let n="";try{if(ab()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function RF(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function PF(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function sU(){return typeof process<"u"&&Fke.IS_VITEST==="true"}function lDe(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function uDe(){try{return window.self!==window.top}catch{return!1}}function dDe(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function aZ(t){return Buffer.from(t,"base64").toString("utf-8")}function hDe(t){return new Promise(e=>setTimeout(e,t))}function S_(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function fDe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function VC(t,...e){if(!fDe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function iU(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");S_(t.outputLen),S_(t.blockLen)}function w0(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function cZ(t,e){VC(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const dA=BigInt(2**32-1),OF=BigInt(32);function pDe(t,e=!1){return e?{h:Number(t&dA),l:Number(t>>OF&dA)}:{h:Number(t>>OF&dA)|0,l:Number(t&dA)|0}}function gDe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=pDe(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const mDe=(t,e,n)=>t<<n|e>>>32-n,yDe=(t,e,n)=>e<<n|t>>>32-n,wDe=(t,e,n)=>e<<n-32|t>>>64-n,bDe=(t,e,n)=>t<<n-32|e>>>64-n,Pm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function vDe(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function HP(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function jc(t,e){return t<<32-e|t>>>e}const kF=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function EDe(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function DF(t){for(let e=0;e<t.length;e++)t[e]=EDe(t[e])}function _De(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function b0(t){return typeof t=="string"&&(t=_De(t)),VC(t),t}function CDe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];VC(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let oU=class{clone(){return this._cloneInto()}};function lZ(t){const e=r=>t().update(b0(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function cb(t=32){if(Pm&&typeof Pm.getRandomValues=="function")return Pm.getRandomValues(new Uint8Array(t));if(Pm&&typeof Pm.randomBytes=="function")return Pm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const uZ=[],dZ=[],hZ=[],ADe=BigInt(0),Gb=BigInt(1),SDe=BigInt(2),IDe=BigInt(7),xDe=BigInt(256),NDe=BigInt(113);for(let t=0,e=Gb,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],uZ.push(2*(5*r+n)),dZ.push((t+1)*(t+2)/2%64);let s=ADe;for(let i=0;i<7;i++)e=(e<<Gb^(e>>IDe)*NDe)%xDe,e&SDe&&(s^=Gb<<(Gb<<BigInt(i))-Gb);hZ.push(s)}const[TDe,RDe]=gDe(hZ,!0),LF=(t,e,n)=>n>32?wDe(t,e,n):mDe(t,e,n),MF=(t,e,n)=>n>32?bDe(t,e,n):yDe(t,e,n);function PDe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=LF(l,u,1)^n[a],h=MF(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=dZ[o],c=LF(s,i,a),l=MF(s,i,a),u=uZ[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=TDe[r],t[1]^=RDe[r]}n.fill(0)}let ODe=class fZ extends oU{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,S_(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=vDe(this.state)}keccak(){kF||DF(this.state32),PDe(this.state32,this.rounds),kF||DF(this.state32),this.posOut=0,this.pos=0}update(e){w0(this);const{blockLen:n,state:r}=this;e=b0(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){w0(this,!1),VC(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return S_(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(cZ(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new fZ(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const kDe=(t,e,n)=>lZ(()=>new ODe(e,t,n)),DDe=kDe(1,136,256/8),LDe="https://rpc.walletconnect.org/v1";function pZ(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(DDe(n)).toString("hex")}async function MDe(t,e,n,r,s,i){switch(n.t){case"eip191":return await UDe(t,e,n.s);case"eip1271":return await $De(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function UDe(t,e,n){return(await Bke({hash:pZ(e),signature:n})).toLowerCase()===t.toLowerCase()}async function $De(t,e,n,r,s,i){const o=jy(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),d=pZ(e).substring(2),h=a+d+c+l+u,f=await fetch(`${i||LDe}/?chainId=${r}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:BDe(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function BDe(){return Date.now()+Math.floor(Math.random()*1e3)}function FDe(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return _J.encode(i)}var jDe=Object.defineProperty,zDe=Object.defineProperties,WDe=Object.getOwnPropertyDescriptors,UF=Object.getOwnPropertySymbols,HDe=Object.prototype.hasOwnProperty,GDe=Object.prototype.propertyIsEnumerable,$F=(t,e,n)=>e in t?jDe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qDe=(t,e)=>{for(var n in e||(e={}))HDe.call(e,n)&&$F(t,n,e[n]);if(UF)for(var n of UF(e))GDe.call(e,n)&&$F(t,n,e[n]);return t},VDe=(t,e)=>zDe(t,WDe(e));const KDe="did:pkh:",aU=t=>t==null?void 0:t.split(":"),YDe=t=>{const e=t&&aU(t);if(e)return t.includes(KDe)?e[3]:e[1]},YD=t=>{const e=t&&aU(t);if(e)return e[2]+":"+e[3]},QI=t=>{const e=t&&aU(t);if(e)return e.pop()};async function BF(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=gZ(s,s.iss),o=QI(s.iss);return await MDe(o,i,r,YD(s.iss),n)}const gZ=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=QI(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${YDe(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=lS(t.resources);if(p){const g=I_(p);s=s3e(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function QDe(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function JDe(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function kg(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function ZDe(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:XDe(e,n,r)}}}function XDe(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function mZ(t){return kg(t),`urn:recap:${QDe(t).replace(/=/g,"")}`}function I_(t){const e=JDe(t.replace("urn:recap:",""));return kg(e),e}function e3e(t,e,n){const r=ZDe(t,e,n);return mZ(r)}function t3e(t){return t&&t.includes("urn:recap:")}function n3e(t,e){const n=I_(t),r=I_(e),s=r3e(n,r);return mZ(s)}function r3e(t,e){kg(t),kg(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=VDe(qDe({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function s3e(t="",e){kg(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function FF(t){var e;const n=I_(t);kg(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function jF(t){const e=I_(t);kg(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function lS(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return t3e(e)?e:void 0}function GP(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function yZ(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ro(t,...e){if(!yZ(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function zF(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function i3e(t,e){Ro(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function WF(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const Yh=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),o3e=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),a3e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!a3e)throw new Error("Non little-endian hardware is not supported");function c3e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function QD(t){if(typeof t=="string")t=c3e(t);else if(yZ(t))t=JD(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function l3e(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function u3e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const d3e=(t,e)=>{function n(r,...s){if(Ro(r),t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Ro(l):Ro(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&Ro(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Ro(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Ro(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Ro(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function HF(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!h3e(e))throw new Error("invalid output, must be aligned");return e}function GF(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function h3e(t){return t.byteOffset%4===0}function JD(t){return Uint8Array.from(t)}function v0(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const wZ=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),f3e=wZ("expand 16-byte k"),p3e=wZ("expand 32-byte k"),g3e=Yh(f3e),m3e=Yh(p3e);function an(t,e){return t<<e|t>>>32-e}function ZD(t){return t.byteOffset%4===0}const hA=64,y3e=16,bZ=2**32-1,qF=new Uint32Array;function w3e(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(hA),u=Yh(l),d=ZD(s)&&ZD(i),h=d?Yh(s):qF,f=d?Yh(i):qF;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=bZ)throw new Error("arx: counter overflow");const g=Math.min(hA,c-p);if(d&&g===hA){const y=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let m=0,w;m<y3e;m++)w=y+m,f[w]=h[w]^u[m];p+=hA;continue}for(let y=0,m;y<g;y++)m=p+y,i[m]=s[m]^l[y];p+=g}}function b3e(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=l3e({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return GP(s),GP(o),WF(i),WF(n),(a,c,l,u,d=0)=>{Ro(a),Ro(c),Ro(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),Ro(u),GP(d),d<0||d>=bZ)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,y;if(p===32)f.push(g=JD(a)),y=m3e;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),y=g3e,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);ZD(c)||f.push(c=JD(c));const m=Yh(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(y,m,Yh(c.subarray(0,16)),m),c=c.subarray(16)}const w=16-s;if(w!==c.length)throw new Error(`arx: nonce must be ${w} or 16 bytes`);if(w!==12){const A=new Uint8Array(12);A.set(c,i?0:12-c.length),c=A,f.push(c)}const v=Yh(c);return w3e(t,y,m,v,l,u,d,o),v0(...f),u}}const ys=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class v3e{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=QD(e),Ro(e,32);const n=ys(e,0),r=ys(e,2),s=ys(e,4),i=ys(e,6),o=ys(e,8),a=ys(e,10),c=ys(e,12),l=ys(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=ys(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],y=o[9],m=ys(e,n+0),w=ys(e,n+2),v=ys(e,n+4),A=ys(e,n+6),C=ys(e,n+8),S=ys(e,n+10),x=ys(e,n+12),T=ys(e,n+14);let I=i[0]+(m&8191),k=i[1]+((m>>>13|w<<3)&8191),O=i[2]+((w>>>10|v<<6)&8191),B=i[3]+((v>>>7|A<<9)&8191),G=i[4]+((A>>>4|C<<12)&8191),W=i[5]+(C>>>1&8191),R=i[6]+((C>>>14|S<<2)&8191),N=i[7]+((S>>>11|x<<5)&8191),M=i[8]+((x>>>8|T<<8)&8191),P=i[9]+(T>>>5|s),L=0,F=L+I*a+k*(5*y)+O*(5*g)+B*(5*p)+G*(5*f);L=F>>>13,F&=8191,F+=W*(5*h)+R*(5*d)+N*(5*u)+M*(5*l)+P*(5*c),L+=F>>>13,F&=8191;let q=L+I*c+k*a+O*(5*y)+B*(5*g)+G*(5*p);L=q>>>13,q&=8191,q+=W*(5*f)+R*(5*h)+N*(5*d)+M*(5*u)+P*(5*l),L+=q>>>13,q&=8191;let ne=L+I*l+k*c+O*a+B*(5*y)+G*(5*g);L=ne>>>13,ne&=8191,ne+=W*(5*p)+R*(5*f)+N*(5*h)+M*(5*d)+P*(5*u),L+=ne>>>13,ne&=8191;let le=L+I*u+k*l+O*c+B*a+G*(5*y);L=le>>>13,le&=8191,le+=W*(5*g)+R*(5*p)+N*(5*f)+M*(5*h)+P*(5*d),L+=le>>>13,le&=8191;let ie=L+I*d+k*u+O*l+B*c+G*a;L=ie>>>13,ie&=8191,ie+=W*(5*y)+R*(5*g)+N*(5*p)+M*(5*f)+P*(5*h),L+=ie>>>13,ie&=8191;let re=L+I*h+k*d+O*u+B*l+G*c;L=re>>>13,re&=8191,re+=W*a+R*(5*y)+N*(5*g)+M*(5*p)+P*(5*f),L+=re>>>13,re&=8191;let ye=L+I*f+k*h+O*d+B*u+G*l;L=ye>>>13,ye&=8191,ye+=W*c+R*a+N*(5*y)+M*(5*g)+P*(5*p),L+=ye>>>13,ye&=8191;let Z=L+I*p+k*f+O*h+B*d+G*u;L=Z>>>13,Z&=8191,Z+=W*l+R*c+N*a+M*(5*y)+P*(5*g),L+=Z>>>13,Z&=8191;let oe=L+I*g+k*p+O*f+B*h+G*d;L=oe>>>13,oe&=8191,oe+=W*u+R*l+N*c+M*a+P*(5*y),L+=oe>>>13,oe&=8191;let he=L+I*y+k*g+O*p+B*f+G*h;L=he>>>13,he&=8191,he+=W*d+R*u+N*l+M*c+P*a,L+=he>>>13,he&=8191,L=(L<<2)+L|0,L=L+F|0,F=L&8191,L=L>>>13,q+=L,i[0]=F,i[1]=q,i[2]=ne,i[3]=le,i[4]=ie,i[5]=re,i[6]=ye,i[7]=Z,i[8]=oe,i[9]=he}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;v0(r)}update(e){zF(this);const{buffer:n,blockLen:r}=this;e=QD(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){v0(this.h,this.r,this.buffer,this.pad)}digestInto(e){zF(this),i3e(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function E3e(t){const e=(r,s)=>t(s).update(QD(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const _3e=E3e(t=>new v3e(t));function C3e(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],y=e[6],m=e[7],w=s,v=n[0],A=n[1],C=n[2],S=o,x=a,T=c,I=l,k=u,O=d,B=h,G=f,W=p,R=g,N=y,M=m,P=w,L=v,F=A,q=C;for(let le=0;le<i;le+=2)S=S+k|0,P=an(P^S,16),W=W+P|0,k=an(k^W,12),S=S+k|0,P=an(P^S,8),W=W+P|0,k=an(k^W,7),x=x+O|0,L=an(L^x,16),R=R+L|0,O=an(O^R,12),x=x+O|0,L=an(L^x,8),R=R+L|0,O=an(O^R,7),T=T+B|0,F=an(F^T,16),N=N+F|0,B=an(B^N,12),T=T+B|0,F=an(F^T,8),N=N+F|0,B=an(B^N,7),I=I+G|0,q=an(q^I,16),M=M+q|0,G=an(G^M,12),I=I+G|0,q=an(q^I,8),M=M+q|0,G=an(G^M,7),S=S+O|0,q=an(q^S,16),N=N+q|0,O=an(O^N,12),S=S+O|0,q=an(q^S,8),N=N+q|0,O=an(O^N,7),x=x+B|0,P=an(P^x,16),M=M+P|0,B=an(B^M,12),x=x+B|0,P=an(P^x,8),M=M+P|0,B=an(B^M,7),T=T+G|0,L=an(L^T,16),W=W+L|0,G=an(G^W,12),T=T+G|0,L=an(L^T,8),W=W+L|0,G=an(G^W,7),I=I+k|0,F=an(F^I,16),R=R+F|0,k=an(k^R,12),I=I+k|0,F=an(F^I,8),R=R+F|0,k=an(k^R,7);let ne=0;r[ne++]=o+S|0,r[ne++]=a+x|0,r[ne++]=c+T|0,r[ne++]=l+I|0,r[ne++]=u+k|0,r[ne++]=d+O|0,r[ne++]=h+B|0,r[ne++]=f+G|0,r[ne++]=p+W|0,r[ne++]=g+R|0,r[ne++]=y+N|0,r[ne++]=m+M|0,r[ne++]=w+P|0,r[ne++]=v+L|0,r[ne++]=A+F|0,r[ne++]=C+q|0}const A3e=b3e(C3e,{counterRight:!1,counterLength:4,allowShortKeys:!1}),S3e=new Uint8Array(16),VF=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(S3e.subarray(n))},I3e=new Uint8Array(32);function KF(t,e,n,r,s){const i=t(e,n,I3e),o=_3e.create(i);s&&VF(o,s),VF(o,r);const a=new Uint8Array(16),c=o3e(a);GF(c,0,BigInt(s?s.length:0),!0),GF(c,8,BigInt(r.length),!0),o.update(a);const l=o.digest();return v0(i,a),l}const x3e=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=HF(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=KF(t,e,n,a,r);return i.set(c,o),v0(c),i},decrypt(s,i){i=HF(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=KF(t,e,n,o,r);if(!u3e(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),v0(c),i}}),vZ=d3e({blockSize:64,nonceLength:12,tagLength:16},x3e(A3e));let EZ=class extends oU{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,iU(e);const r=b0(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return w0(this),this.iHash.update(e),this}digestInto(e){w0(this),VC(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const ZN=(t,e,n)=>new EZ(t,e).update(n).digest();ZN.create=(t,e)=>new EZ(t,e);function N3e(t,e,n){return iU(t),n===void 0&&(n=new Uint8Array(t.outputLen)),ZN(t,b0(n),b0(e))}const qP=new Uint8Array([0]),YF=new Uint8Array;function T3e(t,e,n,r=32){if(iU(t),S_(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/t.outputLen);n===void 0&&(n=YF);const i=new Uint8Array(s*t.outputLen),o=ZN.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<s;l++)qP[0]=l+1,a.update(l===0?YF:c).update(n).update(qP).digestInto(c),i.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),qP.fill(0),i.slice(0,r)}const R3e=(t,e,n,r,s)=>T3e(t,N3e(t,e,n),r,s);function P3e(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function O3e(t,e,n){return t&e^~t&n}function k3e(t,e,n){return t&e^t&n^e&n}let D3e=class extends oU{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=HP(this.buffer)}update(e){w0(this);const{view:n,buffer:r,blockLen:s}=this;e=b0(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=HP(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){w0(this),cZ(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;P3e(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=HP(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const L3e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Id=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),xd=new Uint32Array(64);class M3e extends D3e{constructor(){super(64,32,8,!1),this.A=Id[0]|0,this.B=Id[1]|0,this.C=Id[2]|0,this.D=Id[3]|0,this.E=Id[4]|0,this.F=Id[5]|0,this.G=Id[6]|0,this.H=Id[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)xd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=xd[d-15],f=xd[d-2],p=jc(h,7)^jc(h,18)^h>>>3,g=jc(f,17)^jc(f,19)^f>>>10;xd[d]=g+xd[d-7]+p+xd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=jc(a,6)^jc(a,11)^jc(a,25),f=u+h+O3e(a,c,l)+L3e[d]+xd[d]|0,p=(jc(r,2)^jc(r,13)^jc(r,22))+k3e(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){xd.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const KC=lZ(()=>new M3e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const XN=BigInt(0),eT=BigInt(1),U3e=BigInt(2);function Dg(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function YC(t){if(!Dg(t))throw new Error("Uint8Array expected")}function E0(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const $3e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function _0(t){YC(t);let e="";for(let n=0;n<t.length;n++)e+=$3e[t[n]];return e}function vy(t){const e=t.toString(16);return e.length&1?"0"+e:e}function cU(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?XN:BigInt("0x"+t)}const su={_0:48,_9:57,A:65,F:70,a:97,f:102};function QF(t){if(t>=su._0&&t<=su._9)return t-su._0;if(t>=su.A&&t<=su.F)return t-(su.A-10);if(t>=su.a&&t<=su.f)return t-(su.a-10)}function C0(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=QF(t.charCodeAt(i)),a=QF(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function ng(t){return cU(_0(t))}function x_(t){return YC(t),cU(_0(Uint8Array.from(t).reverse()))}function A0(t,e){return C0(t.toString(16).padStart(e*2,"0"))}function tT(t,e){return A0(t,e).reverse()}function B3e(t){return C0(vy(t))}function No(t,e,n){let r;if(typeof e=="string")try{r=C0(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Dg(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function N_(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];YC(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function F3e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function j3e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const VP=t=>typeof t=="bigint"&&XN<=t;function nT(t,e,n){return VP(t)&&VP(e)&&VP(n)&&e<=t&&t<n}function Wu(t,e,n,r){if(!nT(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function _Z(t){let e;for(e=0;t>XN;t>>=eT,e+=1);return e}function z3e(t,e){return t>>BigInt(e)&eT}function W3e(t,e,n){return t|(n?eT:XN)<<BigInt(e)}const lU=t=>(U3e<<BigInt(t-1))-eT,KP=t=>new Uint8Array(t),JF=t=>Uint8Array.from(t);function CZ(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=KP(t),s=KP(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...u)=>n(s,r,...u),c=(u=KP())=>{s=a(JF([0]),u),r=a(),u.length!==0&&(s=a(JF([1]),u),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return N_(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const H3e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Dg(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function lb(t,e,n={}){const r=(s,i,o)=>{const a=H3e[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const G3e=()=>{throw new Error("not implemented")};function XD(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}var q3e=Object.freeze({__proto__:null,isBytes:Dg,abytes:YC,abool:E0,bytesToHex:_0,numberToHexUnpadded:vy,hexToNumber:cU,hexToBytes:C0,bytesToNumberBE:ng,bytesToNumberLE:x_,numberToBytesBE:A0,numberToBytesLE:tT,numberToVarBytesBE:B3e,ensureBytes:No,concatBytes:N_,equalBytes:F3e,utf8ToBytes:j3e,inRange:nT,aInRange:Wu,bitLen:_Z,bitGet:z3e,bitSet:W3e,bitMask:lU,createHmacDrbg:CZ,validateObject:lb,notImplemented:G3e,memoized:XD});const hs=BigInt(0),Tr=BigInt(1),Jf=BigInt(2),V3e=BigInt(3),e3=BigInt(4),ZF=BigInt(5),XF=BigInt(8);function qi(t,e){const n=t%e;return n>=hs?n:e+n}function AZ(t,e,n){if(e<hs)throw new Error("invalid exponent, negatives unsupported");if(n<=hs)throw new Error("invalid modulus");if(n===Tr)return hs;let r=Tr;for(;e>hs;)e&Tr&&(r=r*t%n),t=t*t%n,e>>=Tr;return r}function Va(t,e,n){let r=t;for(;e-- >hs;)r*=r,r%=n;return r}function t3(t,e){if(t===hs)throw new Error("invert: expected non-zero number");if(e<=hs)throw new Error("invert: expected positive modulus, got "+e);let n=qi(t,e),r=e,s=hs,i=Tr;for(;n!==hs;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Tr)throw new Error("invert: does not exist");return qi(s,e)}function K3e(t){const e=(t-Tr)/Jf;let n,r,s;for(n=t-Tr,r=0;n%Jf===hs;n/=Jf,r++);for(s=Jf;s<t&&AZ(s,e,t)!==t-Tr;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Tr)/e3;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+Tr)/Jf;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,Tr<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function Y3e(t){if(t%e3===V3e){const e=(t+Tr)/e3;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%XF===ZF){const e=(t-ZF)/XF;return function(n,r){const s=n.mul(r,Jf),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,Jf),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return K3e(t)}const Q3e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function J3e(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Q3e.reduce((r,s)=>(r[s]="function",r),e);return lb(t,n)}function Z3e(t,e,n){if(n<hs)throw new Error("invalid exponent, negatives unsupported");if(n===hs)return t.ONE;if(n===Tr)return e;let r=t.ONE,s=e;for(;n>hs;)n&Tr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Tr;return r}function X3e(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function SZ(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function IZ(t,e,n=!1,r={}){if(t<=hs)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=SZ(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:lU(s),ZERO:hs,ONE:Tr,create:c=>qi(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return hs<=c&&c<t},is0:c=>c===hs,isOdd:c=>(c&Tr)===Tr,neg:c=>qi(-c,t),eql:(c,l)=>c===l,sqr:c=>qi(c*c,t),add:(c,l)=>qi(c+l,t),sub:(c,l)=>qi(c-l,t),mul:(c,l)=>qi(c*l,t),pow:(c,l)=>Z3e(a,c,l),div:(c,l)=>qi(c*t3(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>t3(c,t),sqrt:r.sqrt||(c=>(o||(o=Y3e(t)),o(a,c))),invertBatch:c=>X3e(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?tT(c,i):A0(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?x_(c):ng(c)}});return Object.freeze(a)}function xZ(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function NZ(t){const e=xZ(t);return e+Math.ceil(e/2)}function e5e(t,e,n=!1){const r=t.length,s=xZ(e),i=NZ(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?x_(t):ng(t),a=qi(o,e-Tr)+Tr;return n?tT(a,s):A0(a,s)}const ej=BigInt(0),fA=BigInt(1);function YP(t,e){const n=e.negate();return t?n:e}function TZ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function QP(t,e){TZ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function t5e(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function n5e(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const JP=new WeakMap,RZ=new WeakMap;function ZP(t){return RZ.get(t)||1}function r5e(t,e){return{constTimeNegate:YP,hasPrecomputes(n){return ZP(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>ej;)r&fA&&(s=s.add(i)),i=i.double(),r>>=fA;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=QP(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=QP(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=fA);const g=f,y=f+Math.abs(p)-1,m=h%2!==0,w=p<0;p===0?c=c.add(YP(m,r[g])):a=a.add(YP(w,r[y]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=QP(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===ej)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=fA),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=JP.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&JP.set(r,s(i))),i},wNAFCached(n,r,s){const i=ZP(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=ZP(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){TZ(r,e),RZ.set(n,r),JP.delete(n)}}}function s5e(t,e,n,r){if(t5e(n,t),n5e(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=_Z(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function PZ(t){return J3e(t.Fp),lb(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...SZ(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Om=BigInt(0),XP=BigInt(1);function i5e(t){return lb(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function o5e(t){const e=i5e(t),{P:n}=e,r=w=>qi(w,n),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(w=>w),c=e.powPminus2||(w=>AZ(w,n-BigInt(2),n));function l(w,v,A){const C=r(w*(v-A));return v=r(v-C),A=r(A+C),[v,A]}const u=(e.a-BigInt(2))/BigInt(4);function d(w,v){Wu("u",w,Om,n),Wu("scalar",v,Om,n);const A=v,C=w;let S=XP,x=Om,T=w,I=XP,k=Om,O;for(let G=BigInt(s-1);G>=Om;G--){const W=A>>G&XP;k^=W,O=l(k,S,T),S=O[0],T=O[1],O=l(k,x,I),x=O[0],I=O[1],k=W;const R=S+x,N=r(R*R),M=S-x,P=r(M*M),L=N-P,F=T+I,q=T-I,ne=r(q*R),le=r(F*M),ie=ne+le,re=ne-le;T=r(ie*ie),I=r(C*r(re*re)),S=r(N*P),x=r(L*(N+r(u*L)))}O=l(k,S,T),S=O[0],T=O[1],O=l(k,x,I),x=O[0],I=O[1];const B=c(x);return r(S*B)}function h(w){return tT(r(w),i)}function f(w){const v=No("u coordinate",w,i);return o===32&&(v[31]&=127),x_(v)}function p(w){const v=No("scalar",w),A=v.length;if(A!==i&&A!==o){let C=""+i+" or "+o;throw new Error("invalid scalar, expected "+C+" bytes, got "+A)}return x_(a(v))}function g(w,v){const A=f(v),C=p(w),S=d(A,C);if(S===Om)throw new Error("invalid private or public key received");return h(S)}const y=h(e.Gu);function m(w){return g(w,y)}return{scalarMult:g,scalarMultBase:m,getSharedSecret:(w,v)=>g(w,v),getPublicKey:w=>m(w),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:y}}const n3=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const a5e=BigInt(1),tj=BigInt(2),c5e=BigInt(3),l5e=BigInt(5);BigInt(8);function u5e(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=n3,o=t*t%i*t%i,a=Va(o,tj,i)*o%i,c=Va(a,a5e,i)*t%i,l=Va(c,l5e,i)*c%i,u=Va(l,e,i)*l%i,d=Va(u,n,i)*u%i,h=Va(d,r,i)*d%i,f=Va(h,s,i)*h%i,p=Va(f,s,i)*h%i,g=Va(p,e,i)*l%i;return{pow_p_5_8:Va(g,tj,i)*t%i,b2:o}}function d5e(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const r3=o5e({P:n3,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=n3,{pow_p_5_8:n,b2:r}=u5e(t);return qi(Va(n,c5e,e)*r,e)},adjustScalarBytes:d5e,randomBytes:cb});function nj(t){t.lowS!==void 0&&E0("lowS",t.lowS),t.prehash!==void 0&&E0("prehash",t.prehash)}function h5e(t){const e=PZ(t);lb(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:f5e,hexToBytes:p5e}=q3e;class g5e extends Error{constructor(e=""){super(e)}}const gu={Err:g5e,_tlv:{encode:(t,e)=>{const{Err:n}=gu;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=vy(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?vy(s.length/2|128):"";return vy(t)+i+s+e},decode(t,e){const{Err:n}=gu;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=gu;if(t<Pu)throw new e("integer: negative integers are not allowed");let n=vy(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=gu;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return f5e(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=gu,s=typeof t=="string"?p5e(t):t;YC(s);const{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=gu,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Pu=BigInt(0),ns=BigInt(1);BigInt(2);const rj=BigInt(3);BigInt(4);function m5e(t){const e=h5e(t),{Fp:n}=e,r=IZ(e.n,e.nBitLength),s=e.toBytes||((g,y,m)=>{const w=y.toAffine();return N_(Uint8Array.from([4]),n.toBytes(w.x),n.toBytes(w.y))}),i=e.fromBytes||(g=>{const y=g.subarray(1),m=n.fromBytes(y.subarray(0,n.BYTES)),w=n.fromBytes(y.subarray(n.BYTES,2*n.BYTES));return{x:m,y:w}});function o(g){const{a:y,b:m}=e,w=n.sqr(g),v=n.mul(w,g);return n.add(n.add(v,n.mul(g,y)),m)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return nT(g,ns,e.n)}function c(g){const{allowedPrivateKeyLengths:y,nByteLength:m,wrapPrivateKey:w,n:v}=e;if(y&&typeof g!="bigint"){if(Dg(g)&&(g=_0(g)),typeof g!="string"||!y.includes(g.length))throw new Error("invalid private key");g=g.padStart(m*2,"0")}let A;try{A=typeof g=="bigint"?g:ng(No("private key",g,m))}catch{throw new Error("invalid private key, expected hex or "+m+" bytes, got "+typeof g)}return w&&(A=qi(A,v)),Wu("private key",A,ns,v),A}function l(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const u=XD((g,y)=>{const{px:m,py:w,pz:v}=g;if(n.eql(v,n.ONE))return{x:m,y:w};const A=g.is0();y==null&&(y=A?n.ONE:n.inv(v));const C=n.mul(m,y),S=n.mul(w,y),x=n.mul(v,y);if(A)return{x:n.ZERO,y:n.ZERO};if(!n.eql(x,n.ONE))throw new Error("invZ was invalid");return{x:C,y:S}}),d=XD(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:y,y:m}=g.toAffine();if(!n.isValid(y)||!n.isValid(m))throw new Error("bad point: x or y not FE");const w=n.sqr(m),v=o(y);if(!n.eql(w,v))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(y,m,w){if(this.px=y,this.py=m,this.pz=w,y==null||!n.isValid(y))throw new Error("x required");if(m==null||!n.isValid(m))throw new Error("y required");if(w==null||!n.isValid(w))throw new Error("z required");Object.freeze(this)}static fromAffine(y){const{x:m,y:w}=y||{};if(!y||!n.isValid(m)||!n.isValid(w))throw new Error("invalid affine point");if(y instanceof h)throw new Error("projective point not allowed");const v=A=>n.eql(A,n.ZERO);return v(m)&&v(w)?h.ZERO:new h(m,w,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(y){const m=n.invertBatch(y.map(w=>w.pz));return y.map((w,v)=>w.toAffine(m[v])).map(h.fromAffine)}static fromHex(y){const m=h.fromAffine(i(No("pointHex",y)));return m.assertValidity(),m}static fromPrivateKey(y){return h.BASE.multiply(c(y))}static msm(y,m){return s5e(h,r,y,m)}_setWindowSize(y){p.setWindowSize(this,y)}assertValidity(){d(this)}hasEvenY(){const{y}=this.toAffine();if(n.isOdd)return!n.isOdd(y);throw new Error("Field doesn't support isOdd")}equals(y){l(y);const{px:m,py:w,pz:v}=this,{px:A,py:C,pz:S}=y,x=n.eql(n.mul(m,S),n.mul(A,v)),T=n.eql(n.mul(w,S),n.mul(C,v));return x&&T}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:y,b:m}=e,w=n.mul(m,rj),{px:v,py:A,pz:C}=this;let S=n.ZERO,x=n.ZERO,T=n.ZERO,I=n.mul(v,v),k=n.mul(A,A),O=n.mul(C,C),B=n.mul(v,A);return B=n.add(B,B),T=n.mul(v,C),T=n.add(T,T),S=n.mul(y,T),x=n.mul(w,O),x=n.add(S,x),S=n.sub(k,x),x=n.add(k,x),x=n.mul(S,x),S=n.mul(B,S),T=n.mul(w,T),O=n.mul(y,O),B=n.sub(I,O),B=n.mul(y,B),B=n.add(B,T),T=n.add(I,I),I=n.add(T,I),I=n.add(I,O),I=n.mul(I,B),x=n.add(x,I),O=n.mul(A,C),O=n.add(O,O),I=n.mul(O,B),S=n.sub(S,I),T=n.mul(O,k),T=n.add(T,T),T=n.add(T,T),new h(S,x,T)}add(y){l(y);const{px:m,py:w,pz:v}=this,{px:A,py:C,pz:S}=y;let x=n.ZERO,T=n.ZERO,I=n.ZERO;const k=e.a,O=n.mul(e.b,rj);let B=n.mul(m,A),G=n.mul(w,C),W=n.mul(v,S),R=n.add(m,w),N=n.add(A,C);R=n.mul(R,N),N=n.add(B,G),R=n.sub(R,N),N=n.add(m,v);let M=n.add(A,S);return N=n.mul(N,M),M=n.add(B,W),N=n.sub(N,M),M=n.add(w,v),x=n.add(C,S),M=n.mul(M,x),x=n.add(G,W),M=n.sub(M,x),I=n.mul(k,N),x=n.mul(O,W),I=n.add(x,I),x=n.sub(G,I),I=n.add(G,I),T=n.mul(x,I),G=n.add(B,B),G=n.add(G,B),W=n.mul(k,W),N=n.mul(O,N),G=n.add(G,W),W=n.sub(B,W),W=n.mul(k,W),N=n.add(N,W),B=n.mul(G,N),T=n.add(T,B),B=n.mul(M,N),x=n.mul(R,x),x=n.sub(x,B),B=n.mul(R,G),I=n.mul(M,I),I=n.add(I,B),new h(x,T,I)}subtract(y){return this.add(y.negate())}is0(){return this.equals(h.ZERO)}wNAF(y){return p.wNAFCached(this,y,h.normalizeZ)}multiplyUnsafe(y){const{endo:m,n:w}=e;Wu("scalar",y,Pu,w);const v=h.ZERO;if(y===Pu)return v;if(this.is0()||y===ns)return this;if(!m||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,y,h.normalizeZ);let{k1neg:A,k1:C,k2neg:S,k2:x}=m.splitScalar(y),T=v,I=v,k=this;for(;C>Pu||x>Pu;)C&ns&&(T=T.add(k)),x&ns&&(I=I.add(k)),k=k.double(),C>>=ns,x>>=ns;return A&&(T=T.negate()),S&&(I=I.negate()),I=new h(n.mul(I.px,m.beta),I.py,I.pz),T.add(I)}multiply(y){const{endo:m,n:w}=e;Wu("scalar",y,ns,w);let v,A;if(m){const{k1neg:C,k1:S,k2neg:x,k2:T}=m.splitScalar(y);let{p:I,f:k}=this.wNAF(S),{p:O,f:B}=this.wNAF(T);I=p.constTimeNegate(C,I),O=p.constTimeNegate(x,O),O=new h(n.mul(O.px,m.beta),O.py,O.pz),v=I.add(O),A=k.add(B)}else{const{p:C,f:S}=this.wNAF(y);v=C,A=S}return h.normalizeZ([v,A])[0]}multiplyAndAddUnsafe(y,m,w){const v=h.BASE,A=(S,x)=>x===Pu||x===ns||!S.equals(v)?S.multiplyUnsafe(x):S.multiply(x),C=A(this,m).add(A(y,w));return C.is0()?void 0:C}toAffine(y){return u(this,y)}isTorsionFree(){const{h:y,isTorsionFree:m}=e;if(y===ns)return!0;if(m)return m(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:y,clearCofactor:m}=e;return y===ns?this:m?m(h,this):this.multiplyUnsafe(e.h)}toRawBytes(y=!0){return E0("isCompressed",y),this.assertValidity(),s(h,this,y)}toHex(y=!0){return E0("isCompressed",y),_0(this.toRawBytes(y))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=r5e(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function y5e(t){const e=PZ(t);return lb(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function w5e(t){const e=y5e(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(W){return qi(W,r)}function a(W){return t3(W,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=m5e({...e,toBytes(W,R,N){const M=R.toAffine(),P=n.toBytes(M.x),L=N_;return E0("isCompressed",N),N?L(Uint8Array.from([R.hasEvenY()?2:3]),P):L(Uint8Array.from([4]),P,n.toBytes(M.y))},fromBytes(W){const R=W.length,N=W[0],M=W.subarray(1);if(R===s&&(N===2||N===3)){const P=ng(M);if(!nT(P,ns,n.ORDER))throw new Error("Point is not on curve");const L=u(P);let F;try{F=n.sqrt(L)}catch(ne){const le=ne instanceof Error?": "+ne.message:"";throw new Error("Point is not on curve"+le)}const q=(F&ns)===ns;return(N&1)===1!==q&&(F=n.neg(F)),{x:P,y:F}}else if(R===i&&N===4){const P=n.fromBytes(M.subarray(0,n.BYTES)),L=n.fromBytes(M.subarray(n.BYTES,2*n.BYTES));return{x:P,y:L}}else{const P=s,L=i;throw new Error("invalid Point, expected length of "+P+", or uncompressed "+L+", got "+R)}}}),h=W=>_0(A0(W,e.nByteLength));function f(W){const R=r>>ns;return W>R}function p(W){return f(W)?o(-W):W}const g=(W,R,N)=>ng(W.slice(R,N));class y{constructor(R,N,M){this.r=R,this.s=N,this.recovery=M,this.assertValidity()}static fromCompact(R){const N=e.nByteLength;return R=No("compactSignature",R,N*2),new y(g(R,0,N),g(R,N,2*N))}static fromDER(R){const{r:N,s:M}=gu.toSig(No("DER",R));return new y(N,M)}assertValidity(){Wu("r",this.r,ns,r),Wu("s",this.s,ns,r)}addRecoveryBit(R){return new y(this.r,this.s,R)}recoverPublicKey(R){const{r:N,s:M,recovery:P}=this,L=S(No("msgHash",R));if(P==null||![0,1,2,3].includes(P))throw new Error("recovery id invalid");const F=P===2||P===3?N+e.n:N;if(F>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const q=P&1?"03":"02",ne=c.fromHex(q+h(F)),le=a(F),ie=o(-L*le),re=o(M*le),ye=c.BASE.multiplyAndAddUnsafe(ne,ie,re);if(!ye)throw new Error("point at infinify");return ye.assertValidity(),ye}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return C0(this.toDERHex())}toDERHex(){return gu.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return C0(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const m={isValidPrivateKey(W){try{return l(W),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const W=NZ(e.n);return e5e(e.randomBytes(W),e.n)},precompute(W=8,R=c.BASE){return R._setWindowSize(W),R.multiply(BigInt(3)),R}};function w(W,R=!0){return c.fromPrivateKey(W).toRawBytes(R)}function v(W){const R=Dg(W),N=typeof W=="string",M=(R||N)&&W.length;return R?M===s||M===i:N?M===2*s||M===2*i:W instanceof c}function A(W,R,N=!0){if(v(W))throw new Error("first arg must be private key");if(!v(R))throw new Error("second arg must be public key");return c.fromHex(R).multiply(l(W)).toRawBytes(N)}const C=e.bits2int||function(W){if(W.length>8192)throw new Error("input is too large");const R=ng(W),N=W.length*8-e.nBitLength;return N>0?R>>BigInt(N):R},S=e.bits2int_modN||function(W){return o(C(W))},x=lU(e.nBitLength);function T(W){return Wu("num < 2^"+e.nBitLength,W,Pu,x),A0(W,e.nByteLength)}function I(W,R,N=k){if(["recovered","canonical"].some(oe=>oe in N))throw new Error("sign() legacy options not supported");const{hash:M,randomBytes:P}=e;let{lowS:L,prehash:F,extraEntropy:q}=N;L==null&&(L=!0),W=No("msgHash",W),nj(N),F&&(W=No("prehashed msgHash",M(W)));const ne=S(W),le=l(R),ie=[T(le),T(ne)];if(q!=null&&q!==!1){const oe=q===!0?P(n.BYTES):q;ie.push(No("extraEntropy",oe))}const re=N_(...ie),ye=ne;function Z(oe){const he=C(oe);if(!d(he))return;const de=a(he),be=c.BASE.multiply(he).toAffine(),We=o(be.x);if(We===Pu)return;const _e=o(de*o(ye+We*le));if(_e===Pu)return;let Ae=(be.x===We?0:2)|Number(be.y&ns),tt=_e;return L&&f(_e)&&(tt=p(_e),Ae^=1),new y(We,tt,Ae)}return{seed:re,k2sig:Z}}const k={lowS:e.lowS,prehash:!1},O={lowS:e.lowS,prehash:!1};function B(W,R,N=k){const{seed:M,k2sig:P}=I(W,R,N),L=e;return CZ(L.hash.outputLen,L.nByteLength,L.hmac)(M,P)}c.BASE._setWindowSize(8);function G(W,R,N,M=O){var _e;const P=W;R=No("msgHash",R),N=No("publicKey",N);const{lowS:L,prehash:F,format:q}=M;if(nj(M),"strict"in M)throw new Error("options.strict was renamed to lowS");if(q!==void 0&&q!=="compact"&&q!=="der")throw new Error("format must be compact or der");const ne=typeof P=="string"||Dg(P),le=!ne&&!q&&typeof P=="object"&&P!==null&&typeof P.r=="bigint"&&typeof P.s=="bigint";if(!ne&&!le)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let ie,re;try{if(le&&(ie=new y(P.r,P.s)),ne){try{q!=="compact"&&(ie=y.fromDER(P))}catch(Ae){if(!(Ae instanceof gu.Err))throw Ae}!ie&&q!=="der"&&(ie=y.fromCompact(P))}re=c.fromHex(N)}catch{return!1}if(!ie||L&&ie.hasHighS())return!1;F&&(R=e.hash(R));const{r:ye,s:Z}=ie,oe=S(R),he=a(Z),de=o(oe*he),be=o(ye*he),We=(_e=c.BASE.multiplyAndAddUnsafe(re,de,be))==null?void 0:_e.toAffine();return We?o(We.x)===ye:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:A,sign:B,verify:G,ProjectivePoint:c,Signature:y,utils:m}}function b5e(t){return{hash:t,hmac:(e,...n)=>ZN(t,e,CDe(...n)),randomBytes:cb}}function v5e(t,e){const n=r=>w5e({...t,...b5e(r)});return{...n(e),create:n}}const OZ=IZ(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),E5e=OZ.create(BigInt("-3")),_5e=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),C5e=v5e({a:E5e,b:_5e,Fp:OZ,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},KC),kZ="base10",Ei="base16",bc="base64pad",Kd="base64url",QC="utf8",DZ=0,Hu=1,JC=2,A5e=0,sj=1,Xv=12,uU=32;function S5e(){const t=r3.utils.randomPrivateKey(),e=r3.getPublicKey(t);return{privateKey:io(t,Ei),publicKey:io(e,Ei)}}function s3(){const t=cb(uU);return io(t,Ei)}function I5e(t,e){const n=r3.getSharedSecret(Ea(t,Ei),Ea(e,Ei)),r=R3e(KC,n,void 0,void 0,uU);return io(r,Ei)}function uS(t){const e=KC(Ea(t,Ei));return io(e,Ei)}function fl(t){const e=KC(Ea(t,QC));return io(e,Ei)}function LZ(t){return Ea(`${t}`,kZ)}function Lg(t){return Number(io(t,kZ))}function MZ(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function UZ(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function x5e(t){const e=LZ(typeof t.type<"u"?t.type:DZ);if(Lg(e)===Hu&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?Ea(t.senderPublicKey,Ei):void 0,r=typeof t.iv<"u"?Ea(t.iv,Ei):cb(Xv),s=Ea(t.symKey,Ei),i=vZ(s,r).encrypt(Ea(t.message,QC)),o=$Z({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===Kd?MZ(o):o}function N5e(t){const e=Ea(t.symKey,Ei),{sealed:n,iv:r}=T_({encoded:t.encoded,encoding:t.encoding}),s=vZ(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return io(s,QC)}function T5e(t,e){const n=LZ(JC),r=cb(Xv),s=Ea(t,QC),i=$Z({type:n,sealed:s,iv:r});return e===Kd?MZ(i):i}function R5e(t,e){const{sealed:n}=T_({encoded:t,encoding:e});return io(n,QC)}function $Z(t){if(Lg(t.type)===JC)return io(Qv([t.type,t.sealed]),bc);if(Lg(t.type)===Hu){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return io(Qv([t.type,t.senderPublicKey,t.iv,t.sealed]),bc)}return io(Qv([t.type,t.iv,t.sealed]),bc)}function T_(t){const e=(t.encoding||bc)===Kd?UZ(t.encoded):t.encoded,n=Ea(e,bc),r=n.slice(A5e,sj),s=sj;if(Lg(r)===Hu){const c=s+uU,l=c+Xv,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(Lg(r)===JC){const c=n.slice(s),l=cb(Xv);return{type:r,sealed:c,iv:l}}const i=s+Xv,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function P5e(t,e){const n=T_({encoded:t,encoding:e==null?void 0:e.encoding});return BZ({type:Lg(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?io(n.senderPublicKey,Ei):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function BZ(t){const e=(t==null?void 0:t.type)||DZ;if(e===Hu){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function ij(t){return t.type===Hu&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function oj(t){return t.type===JC}function O5e(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return Qv([new Uint8Array([4]),e,n])}function k5e(t,e){const[n,r,s]=t.split("."),i=Buffer.from(UZ(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=KC(c),u=O5e(e);if(!C5e.verify(Qv([o,a]),l,u))throw new Error("Invalid signature");return LD(t).payload}const D5e="irn";function JI(t){return(t==null?void 0:t.relay)||{protocol:D5e}}function pv(t){const e=BTe[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function L5e(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function aj(t){if(!t.includes("wc:")){const l=aZ(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:M5e(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:L5e(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function M5e(t){return t.startsWith("//")?t.substring(2):t}function U5e(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function cj(t){const e=new URLSearchParams,n=U5e(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function pA(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var $5e=Object.defineProperty,B5e=Object.defineProperties,F5e=Object.getOwnPropertyDescriptors,lj=Object.getOwnPropertySymbols,j5e=Object.prototype.hasOwnProperty,z5e=Object.prototype.propertyIsEnumerable,uj=(t,e,n)=>e in t?$5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,W5e=(t,e)=>{for(var n in e||(e={}))j5e.call(e,n)&&uj(t,n,e[n]);if(lj)for(var n of lj(e))z5e.call(e,n)&&uj(t,n,e[n]);return t},H5e=(t,e)=>B5e(t,F5e(e));function ub(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function G5e(t){const e=[];return Object.values(t).forEach(n=>{e.push(...ub(n.accounts))}),e}function q5e(t,e){const n=[];return Object.values(t).forEach(r=>{ub(r.accounts).includes(e)&&n.push(...r.methods)}),n}function V5e(t,e){const n=[];return Object.values(t).forEach(r=>{ub(r.accounts).includes(e)&&n.push(...r.events)}),n}function rT(t){return t.includes(":")}function Ey(t){return rT(t)?t.split(":")[0]:t}function dj(t){var e,n,r;const s={};if(!Jh(t))return s;for(const[i,o]of Object.entries(t)){const a=rT(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=Ey(i);s[u]=H5e(W5e({},s[u]),{chains:Rl(a,(e=s[u])==null?void 0:e.chains),methods:Rl(c,(n=s[u])==null?void 0:n.methods),events:Rl(l,(r=s[u])==null?void 0:r.events)})}return s}function K5e(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function hj(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=K5e(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Rl(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function Y5e(t,e){var n,r,s,i,o,a;const c=dj(t),l=dj(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:Rl((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:Rl((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:Rl((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const Q5e={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},J5e={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Te(t,e){const{message:n,code:r}=J5e[t];return{message:e?`${n} ${e}`:n,code:r}}function Rn(t,e){const{message:n,code:r}=Q5e[t];return{message:e?`${n} ${e}`:n,code:r}}function Qh(t,e){return!!Array.isArray(t)}function Jh(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Is(t){return typeof t>"u"}function kr(t,e){return e&&Is(t)?!0:typeof t=="string"&&!!t.trim().length}function dU(t,e){return e&&Is(t)?!0:typeof t=="number"&&!isNaN(t)}function Z5e(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return yp(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=ub(a),d=n[o];(!yp(nZ(o,d),u)||!yp(d.methods,c)||!yp(d.events,l))&&(i=!1)}),i):!1}function ZI(t){return kr(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function X5e(t){if(kr(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&ZI(n)}}return!1}function eLe(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(kr(t,!1)){if(e(t))return!0;const n=aZ(t);return e(n)}}catch{}return!1}function tLe(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function nLe(t){return t==null?void 0:t.topic}function rLe(t,e){let n=null;return kr(t==null?void 0:t.publicKey,!1)||(n=Te("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function fj(t){let e=!0;return Qh(t)?t.length&&(e=t.every(n=>kr(n,!1))):e=!1,e}function sLe(t,e,n){let r=null;return Qh(e)&&e.length?e.forEach(s=>{r||ZI(s)||(r=Rn("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):ZI(t)||(r=Rn("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function iLe(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=sLe(s,nZ(s,i),`${e} ${n}`);o&&(r=o)}),r}function oLe(t,e){let n=null;return Qh(t)?t.forEach(r=>{n||X5e(r)||(n=Rn("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Rn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function aLe(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=oLe(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function cLe(t,e){let n=null;return fj(t==null?void 0:t.methods)?fj(t==null?void 0:t.events)||(n=Rn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=Rn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function FZ(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=cLe(r,`${e}, namespace`);s&&(n=s)}),n}function lLe(t,e,n){let r=null;if(t&&Jh(t)){const s=FZ(t,e);s&&(r=s);const i=iLe(t,e,n);i&&(r=i)}else r=Te("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function eO(t,e){let n=null;if(t&&Jh(t)){const r=FZ(t,e);r&&(n=r);const s=aLe(t,e);s&&(n=s)}else n=Te("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function jZ(t){return kr(t.protocol,!0)}function uLe(t,e){let n=!1;return t?t&&Qh(t)&&t.length&&t.forEach(r=>{n=jZ(r)}):n=!0,n}function dLe(t){return typeof t=="number"}function $i(t){return typeof t<"u"&&typeof t!==null}function hLe(t){return!(!t||typeof t!="object"||!t.code||!dU(t.code,!1)||!t.message||!kr(t.message,!1))}function fLe(t){return!(Is(t)||!kr(t.method,!1))}function pLe(t){return!(Is(t)||Is(t.result)&&Is(t.error)||!dU(t.id,!1)||!kr(t.jsonrpc,!1))}function gLe(t){return!(Is(t)||!kr(t.name,!1))}function pj(t,e){return!(!ZI(e)||!G5e(t).includes(e))}function mLe(t,e,n){return kr(n,!1)?q5e(t,e).includes(n):!1}function yLe(t,e,n){return kr(n,!1)?V5e(t,e).includes(n):!1}function gj(t,e,n){let r=null;const s=wLe(t),i=bLe(e),o=Object.keys(s),a=Object.keys(i),c=mj(Object.keys(t)),l=mj(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=Te("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),yp(o,a)||(r=Te("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=ub(e[d].accounts);h.includes(d)||(r=Te("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(yp(s[d].methods,i[d].methods)?yp(s[d].events,i[d].events)||(r=Te("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=Te("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function wLe(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function mj(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function bLe(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=ub(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function vLe(t,e){return dU(t,!1)&&t<=e.max&&t>=e.min}function yj(){const t=qC();return new Promise(e=>{switch(t){case ko.browser:e(ELe());break;case ko.reactNative:e(_Le());break;case ko.node:e(CLe());break;default:e(!0)}})}function ELe(){return ab()&&(navigator==null?void 0:navigator.onLine)}async function _Le(){if(Af()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function CLe(){return!0}function ALe(t){switch(qC()){case ko.browser:SLe(t);break;case ko.reactNative:ILe(t);break}}function SLe(t){!Af()&&ab()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function ILe(t){Af()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function xLe(){var t;return ab()&&Ng()?((t=Ng())==null?void 0:t.visibilityState)==="visible":!0}const tO={};class qb{static get(e){return tO[e]}static set(e,n){tO[e]=n}static delete(e){delete tO[e]}}var NLe={};const zZ="wc",WZ=2,i3="core",Bl=`${zZ}@2:${i3}:`,TLe={logger:"error"},RLe={database:":memory:"},PLe="crypto",wj="client_ed25519_seed",OLe=xe.ONE_DAY,kLe="keychain",DLe="0.3",LLe="messages",MLe="0.3",bj=xe.SIX_HOURS,ULe="publisher",HZ="irn",$Le="error",GZ="wss://relay.walletconnect.org",BLe="relayer",cs={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},FLe="_subscription",Zo={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},jLe=.1,o3="2.21.0",Jn={link_mode:"link_mode",relay:"relay"},dS={inbound:"inbound",outbound:"outbound"},zLe="0.3",WLe="WALLETCONNECT_CLIENT_ID",vj="WALLETCONNECT_LINK_MODE_APPS",Eo={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},HLe="subscription",GLe="0.3",qLe="pairing",VLe="0.3",Vb={wc_pairingDelete:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:xe.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:xe.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:xe.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:0},res:{ttl:xe.ONE_DAY,prompt:!1,tag:0}}},Zf={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Wa={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},KLe="history",YLe="0.3",QLe="expirer",ia={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},JLe="0.3",ZLe="verify-api",XLe="https://verify.walletconnect.com",qZ="https://verify.walletconnect.org",eE=qZ,eMe=`${eE}/v3`,tMe=[XLe,qZ],nMe="echo",rMe="https://echo.walletconnect.com",Vc={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},lu={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Ha={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Of={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},kf={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Kb={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},sMe=.1,iMe="event-client",oMe=86400,aMe="https://pulse.walletconnect.org/batch";function cMe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,m=0,w=p.length;m!==w&&p[m]===0;)m++,g++;for(var v=(w-m)*u+1>>>0,A=new Uint8Array(v);m!==w;){for(var C=p[m],S=0,x=v-1;(C!==0||S<y)&&x!==-1;x--,S++)C+=256*A[x]>>>0,A[x]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");y=S,m++}for(var T=v-y;T!==v&&A[T]===0;)T++;for(var I=c.repeat(g);T<v;++T)I+=t.charAt(A[T]);return I}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,m=0;p[g]===c;)y++,g++;for(var w=(p.length-g)*l+1>>>0,v=new Uint8Array(w);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var C=0,S=w-1;(A!==0||C<m)&&S!==-1;S--,C++)A+=a*v[S]>>>0,v[S]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");m=C,g++}if(p[g]!==" "){for(var x=w-m;x!==w&&v[x]===0;)x++;for(var T=new Uint8Array(y+(w-x)),I=y;x!==w;)T[I++]=v[x++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var lMe=cMe,uMe=lMe;const VZ=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},dMe=t=>new TextEncoder().encode(t),hMe=t=>new TextDecoder().decode(t);class fMe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class pMe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return KZ(this,e)}}class gMe{constructor(e){this.decoders=e}or(e){return KZ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const KZ=(t,e)=>new gMe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class mMe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new fMe(e,n,r),this.decoder=new pMe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const sT=({name:t,prefix:e,encode:n,decode:r})=>new mMe(t,e,n,r),ZC=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=uMe(n,e);return sT({prefix:t,name:e,encode:r,decode:i=>VZ(s(i))})},yMe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},wMe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},$s=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>sT({prefix:e,name:t,encode(s){return wMe(s,r,n)},decode(s){return yMe(s,r,n,t)}}),bMe=sT({prefix:"\0",name:"identity",encode:t=>hMe(t),decode:t=>dMe(t)});var vMe=Object.freeze({__proto__:null,identity:bMe});const EMe=$s({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var _Me=Object.freeze({__proto__:null,base2:EMe});const CMe=$s({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var AMe=Object.freeze({__proto__:null,base8:CMe});const SMe=ZC({prefix:"9",name:"base10",alphabet:"0123456789"});var IMe=Object.freeze({__proto__:null,base10:SMe});const xMe=$s({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),NMe=$s({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var TMe=Object.freeze({__proto__:null,base16:xMe,base16upper:NMe});const RMe=$s({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),PMe=$s({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),OMe=$s({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),kMe=$s({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),DMe=$s({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),LMe=$s({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),MMe=$s({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),UMe=$s({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),$Me=$s({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var BMe=Object.freeze({__proto__:null,base32:RMe,base32upper:PMe,base32pad:OMe,base32padupper:kMe,base32hex:DMe,base32hexupper:LMe,base32hexpad:MMe,base32hexpadupper:UMe,base32z:$Me});const FMe=ZC({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),jMe=ZC({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var zMe=Object.freeze({__proto__:null,base36:FMe,base36upper:jMe});const WMe=ZC({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),HMe=ZC({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var GMe=Object.freeze({__proto__:null,base58btc:WMe,base58flickr:HMe});const qMe=$s({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),VMe=$s({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),KMe=$s({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),YMe=$s({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var QMe=Object.freeze({__proto__:null,base64:qMe,base64pad:VMe,base64url:KMe,base64urlpad:YMe});const YZ=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),JMe=YZ.reduce((t,e,n)=>(t[n]=e,t),[]),ZMe=YZ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function XMe(t){return t.reduce((e,n)=>(e+=JMe[n],e),"")}function eUe(t){const e=[];for(const n of t){const r=ZMe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const tUe=sT({prefix:"🚀",name:"base256emoji",encode:XMe,decode:eUe});var nUe=Object.freeze({__proto__:null,base256emoji:tUe}),rUe=QZ,Ej=128,sUe=-128,iUe=Math.pow(2,31);function QZ(t,e,n){e=e||[],n=n||0;for(var r=n;t>=iUe;)e[n++]=t&255|Ej,t/=128;for(;t&sUe;)e[n++]=t&255|Ej,t>>>=7;return e[n]=t|0,QZ.bytes=n-r+1,e}var oUe=a3,aUe=128,_j=127;function a3(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw a3.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&_j)<<s:(o&_j)*Math.pow(2,s),s+=7}while(o>=aUe);return a3.bytes=i-r,n}var cUe=Math.pow(2,7),lUe=Math.pow(2,14),uUe=Math.pow(2,21),dUe=Math.pow(2,28),hUe=Math.pow(2,35),fUe=Math.pow(2,42),pUe=Math.pow(2,49),gUe=Math.pow(2,56),mUe=Math.pow(2,63),yUe=function(t){return t<cUe?1:t<lUe?2:t<uUe?3:t<dUe?4:t<hUe?5:t<fUe?6:t<pUe?7:t<gUe?8:t<mUe?9:10},wUe={encode:rUe,decode:oUe,encodingLength:yUe},JZ=wUe;const Cj=(t,e,n=0)=>(JZ.encode(t,e,n),e),Aj=t=>JZ.encodingLength(t),c3=(t,e)=>{const n=e.byteLength,r=Aj(t),s=r+Aj(n),i=new Uint8Array(s+n);return Cj(t,i,0),Cj(n,i,r),i.set(e,s),new bUe(t,n,e,i)};class bUe{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const ZZ=({name:t,code:e,encode:n})=>new vUe(t,e,n);class vUe{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?c3(this.code,n):n.then(r=>c3(this.code,r))}else throw Error("Unknown type, must be binary type")}}const XZ=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),EUe=ZZ({name:"sha2-256",code:18,encode:XZ("SHA-256")}),_Ue=ZZ({name:"sha2-512",code:19,encode:XZ("SHA-512")});var CUe=Object.freeze({__proto__:null,sha256:EUe,sha512:_Ue});const eX=0,AUe="identity",tX=VZ,SUe=t=>c3(eX,tX(t)),IUe={code:eX,name:AUe,encode:tX,digest:SUe};var xUe=Object.freeze({__proto__:null,identity:IUe});new TextEncoder,new TextDecoder;const Sj={...vMe,..._Me,...AMe,...IMe,...TMe,...BMe,...zMe,...GMe,...QMe,...nUe};({...CUe,...xUe});function NUe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function nX(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Ij=nX("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),nO=nX("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=NUe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),TUe={utf8:Ij,"utf-8":Ij,hex:Sj.base16,latin1:nO,ascii:nO,binary:nO,...Sj};function RUe(t,e="utf8"){const n=TUe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var PUe=Object.defineProperty,OUe=(t,e,n)=>e in t?PUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zc=(t,e,n)=>OUe(t,typeof e!="symbol"?e+"":e,n);class kUe{constructor(e,n){this.core=e,this.logger=n,zc(this,"keychain",new Map),zc(this,"name",kLe),zc(this,"version",DLe),zc(this,"initialized",!1),zc(this,"storagePrefix",Bl),zc(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),zc(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),zc(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),zc(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=Te("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),zc(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Ls(n,this.name)}get context(){return ho(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,VD(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?KD(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var DUe=Object.defineProperty,LUe=(t,e,n)=>e in t?DUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ws=(t,e,n)=>LUe(t,typeof e!="symbol"?e+"":e,n);class MUe{constructor(e,n,r){this.core=e,this.logger=n,ws(this,"name",PLe),ws(this,"keychain"),ws(this,"randomSessionIdentifier",s3()),ws(this,"initialized",!1),ws(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),ws(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),ws(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=B4(s);return bJ(i.publicKey)}),ws(this,"generateKeyPair",()=>{this.isInitialized();const s=S5e();return this.setPrivateKey(s.publicKey,s.privateKey)}),ws(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=B4(i),a=this.randomSessionIdentifier;return await gNe(a,s,OLe,o)}),ws(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=I5e(a,i);return this.setSymKey(c,o)}),ws(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||uS(s);return await this.keychain.set(o,s),o}),ws(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),ws(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),ws(this,"encode",async(s,i,o)=>{this.isInitialized();const a=BZ(o),c=rd(i);if(oj(a))return T5e(c,o==null?void 0:o.encoding);if(ij(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return x5e({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),ws(this,"decode",async(s,i,o)=>{this.isInitialized();const a=P5e(i,o);if(oj(a)){const c=R5e(i,o==null?void 0:o.encoding);return xg(c)}if(ij(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=N5e({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return xg(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),ws(this,"getPayloadType",(s,i=bc)=>{const o=T_({encoded:s,encoding:i});return Lg(o.type)}),ws(this,"getPayloadSenderPublicKey",(s,i=bc)=>{const o=T_({encoded:s,encoding:i});return o.senderPublicKey?io(o.senderPublicKey,Ei):void 0}),this.core=e,this.logger=Ls(n,this.name),this.keychain=r||new kUe(this.core,this.logger)}get context(){return ho(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(wj)}catch{e=s3(),await this.keychain.set(wj,e)}return RUe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var UUe=Object.defineProperty,$Ue=Object.defineProperties,BUe=Object.getOwnPropertyDescriptors,xj=Object.getOwnPropertySymbols,FUe=Object.prototype.hasOwnProperty,jUe=Object.prototype.propertyIsEnumerable,l3=(t,e,n)=>e in t?UUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zUe=(t,e)=>{for(var n in e||(e={}))FUe.call(e,n)&&l3(t,n,e[n]);if(xj)for(var n of xj(e))jUe.call(e,n)&&l3(t,n,e[n]);return t},WUe=(t,e)=>$Ue(t,BUe(e)),po=(t,e,n)=>l3(t,typeof e!="symbol"?e+"":e,n);class HUe extends B2e{constructor(e,n){super(e,n),this.logger=e,this.core=n,po(this,"messages",new Map),po(this,"messagesWithoutClientAck",new Map),po(this,"name",LLe),po(this,"version",MLe),po(this,"initialized",!1),po(this,"storagePrefix",Bl),po(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),po(this,"set",async(r,s,i)=>{this.isInitialized();const o=fl(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===dS.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,WUe(zUe({},c),{[o]:s}))}return await this.persist(),o}),po(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),po(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),po(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=fl(s);return typeof i[o]<"u"}),po(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=fl(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),po(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Ls(e,this.name),this.core=n}get context(){return ho(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,VD(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,VD(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?KD(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?KD(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var GUe=Object.defineProperty,qUe=Object.defineProperties,VUe=Object.getOwnPropertyDescriptors,Nj=Object.getOwnPropertySymbols,KUe=Object.prototype.hasOwnProperty,YUe=Object.prototype.propertyIsEnumerable,u3=(t,e,n)=>e in t?GUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gA=(t,e)=>{for(var n in e||(e={}))KUe.call(e,n)&&u3(t,n,e[n]);if(Nj)for(var n of Nj(e))YUe.call(e,n)&&u3(t,n,e[n]);return t},rO=(t,e)=>qUe(t,VUe(e)),Ga=(t,e,n)=>u3(t,typeof e!="symbol"?e+"":e,n);class QUe extends F2e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Ga(this,"events",new ka.EventEmitter),Ga(this,"name",ULe),Ga(this,"queue",new Map),Ga(this,"publishTimeout",xe.toMiliseconds(xe.ONE_MINUTE)),Ga(this,"initialPublishTimeout",xe.toMiliseconds(xe.ONE_SECOND*15)),Ga(this,"needsTransportRestart",!1),Ga(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||bj,c=JI(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||mp().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const y=({id:w})=>{h.opts.id===w&&(this.removeRequestFromQueue(w),this.relayer.events.removeListener(cs.publish,y),g(h))};this.relayer.events.on(cs.publish,y);const m=Nh(new Promise((w,v)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(w).catch(A=>{this.logger.warn(A,A==null?void 0:A.message),v(A)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await m,this.events.removeListener(cs.publish,y)}catch(w){this.queue.set(d,rO(gA({},h),{attempt:1})),this.logger.warn(w,w==null?void 0:w.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await Nh(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),Ga(this,"on",(r,s)=>{this.events.on(r,s)}),Ga(this,"once",(r,s)=>{this.events.once(r,s)}),Ga(this,"off",(r,s)=>{this.events.off(r,s)}),Ga(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=Ls(n,this.name),this.registerEventListeners()}get context(){return ho(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=bj,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:pv(JI().protocol).publish,params:gA({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};Is((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),Is((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(cs.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,rO(gA({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(rO(gA({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(rm.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(cs.connection_stalled);return}this.checkQueue()}),this.relayer.on(cs.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var JUe=Object.defineProperty,ZUe=(t,e,n)=>e in t?JUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,km=(t,e,n)=>ZUe(t,typeof e!="symbol"?e+"":e,n);class XUe{constructor(){km(this,"map",new Map),km(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),km(this,"get",e=>this.map.get(e)||[]),km(this,"exists",(e,n)=>this.get(e).includes(n)),km(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),km(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var e$e=Object.defineProperty,t$e=Object.defineProperties,n$e=Object.getOwnPropertyDescriptors,Tj=Object.getOwnPropertySymbols,r$e=Object.prototype.hasOwnProperty,s$e=Object.prototype.propertyIsEnumerable,d3=(t,e,n)=>e in t?e$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yb=(t,e)=>{for(var n in e||(e={}))r$e.call(e,n)&&d3(t,n,e[n]);if(Tj)for(var n of Tj(e))s$e.call(e,n)&&d3(t,n,e[n]);return t},sO=(t,e)=>t$e(t,n$e(e)),Mn=(t,e,n)=>d3(t,typeof e!="symbol"?e+"":e,n);class i$e extends W2e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Mn(this,"subscriptions",new Map),Mn(this,"topicMap",new XUe),Mn(this,"events",new ka.EventEmitter),Mn(this,"name",HLe),Mn(this,"version",GLe),Mn(this,"pending",new Map),Mn(this,"cached",[]),Mn(this,"initialized",!1),Mn(this,"storagePrefix",Bl),Mn(this,"subscribeTimeout",xe.toMiliseconds(xe.ONE_MINUTE)),Mn(this,"initialSubscribeTimeout",xe.toMiliseconds(xe.ONE_SECOND*15)),Mn(this,"clientId"),Mn(this,"batchSubscribeTopicsLimit",500),Mn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Mn(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=JI(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),Mn(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),Mn(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),Mn(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),Mn(this,"on",(r,s)=>{this.events.on(r,s)}),Mn(this,"once",(r,s)=>{this.events.once(r,s)}),Mn(this,"off",(r,s)=>{this.events.off(r,s)}),Mn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),Mn(this,"start",async()=>{await this.onConnect()}),Mn(this,"stop",async()=>{await this.onDisconnect()}),Mn(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Mn(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),Mn(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(rm.pulse,async()=>{await this.checkPending()}),this.events.on(Eo.created,async r=>{const s=Eo.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Eo.deleted,async r=>{const s=Eo.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=Ls(n,this.name),this.clientId=""}get context(){return ho(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=JI(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=Rn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===Jn.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:pv(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===Jn.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},xe.toMiliseconds(xe.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(Eo.created,d),u(h.id))};this.events.on(Eo.created,d);try{const h=await Nh(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Eo.created,d),u(h)}catch{}}),l=await Nh(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(cs.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:pv(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Nh(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(cs.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:pv(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await Nh(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(cs.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:pv(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,sO(Yb({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,Yb({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,Yb({},n)),this.topicMap.set(n.topic,e),this.events.emit(Eo.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=Te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Eo.deleted,sO(Yb({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Eo.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Eo.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=Te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>sO(Yb({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await hDe(xe.toMiliseconds(xe.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return fl(e+await this.getClientId())}}var o$e=Object.defineProperty,Rj=Object.getOwnPropertySymbols,a$e=Object.prototype.hasOwnProperty,c$e=Object.prototype.propertyIsEnumerable,h3=(t,e,n)=>e in t?o$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pj=(t,e)=>{for(var n in e||(e={}))a$e.call(e,n)&&h3(t,n,e[n]);if(Rj)for(var n of Rj(e))c$e.call(e,n)&&h3(t,n,e[n]);return t},cn=(t,e,n)=>h3(t,typeof e!="symbol"?e+"":e,n);class l$e extends j2e{constructor(e){super(e),cn(this,"protocol","wc"),cn(this,"version",2),cn(this,"core"),cn(this,"logger"),cn(this,"events",new ka.EventEmitter),cn(this,"provider"),cn(this,"messages"),cn(this,"subscriber"),cn(this,"publisher"),cn(this,"name",BLe),cn(this,"transportExplicitlyClosed",!1),cn(this,"initialized",!1),cn(this,"connectionAttemptInProgress",!1),cn(this,"relayUrl"),cn(this,"projectId"),cn(this,"packageName"),cn(this,"bundleId"),cn(this,"hasExperiencedNetworkDisruption",!1),cn(this,"pingTimeout"),cn(this,"heartBeatTimeout",xe.toMiliseconds(xe.THIRTY_SECONDS+xe.FIVE_SECONDS)),cn(this,"reconnectTimeout"),cn(this,"connectPromise"),cn(this,"reconnectInProgress",!1),cn(this,"requestsInFlight",[]),cn(this,"connectTimeout",xe.toMiliseconds(xe.ONE_SECOND*15)),cn(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||mp().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),cn(this,"resetPingTimeout",()=>{YI()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),cn(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),cn(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(cs.connect)}),cn(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),cn(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(cs.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),cn(this,"registerProviderListeners",()=>{this.provider.on(Zo.payload,this.onPayloadHandler),this.provider.on(Zo.connect,this.onConnectHandler),this.provider.on(Zo.disconnect,this.onDisconnectHandler),this.provider.on(Zo.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Ls(e.logger,this.name):jC(im({level:e.logger||$Le})),this.messages=new HUe(this.logger,e.core),this.subscriber=new i$e(this,this.logger),this.publisher=new QUe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||GZ,this.projectId=e.projectId,Qke()?this.packageName=TF():Jke()&&(this.bundleId=TF()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return ho(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:Jn.relay},dS.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Eo.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Eo.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,Pj({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Nh(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await yj())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=Fr(xe.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(cs.message,e),await this.recordMessageEvent(e,dS.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Zo.disconnect,i),await Nh(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Zo.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Zo.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Zo.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,xe.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(YI())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Da(new xRe(nDe({sdkVersion:o3,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),rU(e)){if(!e.method.endsWith(FLe))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:Jn.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Pj({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else KN(e)&&this.events.emit(cs.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,dS.inbound),this.events.emit(cs.message,e))}async acknowledgePayload(e){const n=qN(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Zo.payload,this.onPayloadHandler),this.provider.off(Zo.connect,this.onConnectHandler),this.provider.off(Zo.disconnect,this.onDisconnectHandler),this.provider.off(Zo.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await yj();ALe(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(rm.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&xLe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(cs.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},xe.toMiliseconds(jLe)))))}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function u$e(){}function Oj(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function kj(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Dj(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const d$e="[object RegExp]",h$e="[object String]",f$e="[object Number]",p$e="[object Boolean]",Lj="[object Arguments]",g$e="[object Symbol]",m$e="[object Date]",y$e="[object Map]",w$e="[object Set]",b$e="[object Array]",v$e="[object Function]",E$e="[object ArrayBuffer]",iO="[object Object]",_$e="[object Error]",C$e="[object DataView]",A$e="[object Uint8Array]",S$e="[object Uint8ClampedArray]",I$e="[object Uint16Array]",x$e="[object Uint32Array]",N$e="[object BigUint64Array]",T$e="[object Int8Array]",R$e="[object Int16Array]",P$e="[object Int32Array]",O$e="[object BigInt64Array]",k$e="[object Float32Array]",D$e="[object Float64Array]";function L$e(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function M$e(t,e,n){return gv(t,e,void 0,void 0,void 0,void 0,n)}function gv(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return tE(t,e,i,o)}return tE(t,e,i,o)}function tE(t,e,n,r){if(Object.is(t,e))return!0;let s=Dj(t),i=Dj(e);if(s===Lj&&(s=iO),i===Lj&&(i=iO),s!==i)return!1;switch(s){case h$e:return t.toString()===e.toString();case f$e:{const c=t.valueOf(),l=e.valueOf();return L$e(c,l)}case p$e:case m$e:case g$e:return Object.is(t.valueOf(),e.valueOf());case d$e:return t.source===e.source&&t.flags===e.flags;case v$e:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case y$e:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!gv(l,e.get(c),c,t,e,n,r))return!1;return!0}case w$e:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>gv(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case b$e:case A$e:case S$e:case I$e:case x$e:case N$e:case T$e:case R$e:case P$e:case O$e:case k$e:case D$e:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!gv(t[c],e[c],c,t,e,n,r))return!1;return!0}case E$e:return t.byteLength!==e.byteLength?!1:tE(new Uint8Array(t),new Uint8Array(e),n,r);case C$e:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:tE(new Uint8Array(t),new Uint8Array(e),n,r);case _$e:return t.name===e.name&&t.message===e.message;case iO:{if(!(tE(t.constructor,e.constructor,n,r)||Oj(t)&&Oj(e)))return!1;const c=[...Object.keys(t),...kj(t)],l=[...Object.keys(e),...kj(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!gv(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function U$e(t,e){return M$e(t,e,u$e)}var $$e=Object.defineProperty,Mj=Object.getOwnPropertySymbols,B$e=Object.prototype.hasOwnProperty,F$e=Object.prototype.propertyIsEnumerable,f3=(t,e,n)=>e in t?$$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Uj=(t,e)=>{for(var n in e||(e={}))B$e.call(e,n)&&f3(t,n,e[n]);if(Mj)for(var n of Mj(e))F$e.call(e,n)&&f3(t,n,e[n]);return t},ki=(t,e,n)=>f3(t,typeof e!="symbol"?e+"":e,n);class am extends z2e{constructor(e,n,r,s=Bl,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,ki(this,"map",new Map),ki(this,"version",zLe),ki(this,"cached",[]),ki(this,"initialized",!1),ki(this,"getKey"),ki(this,"storagePrefix",Bl),ki(this,"recentlyDeleted",[]),ki(this,"recentlyDeletedLimit",200),ki(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Is(o)?this.map.set(this.getKey(o),o):tLe(o)?this.map.set(o.id,o):nLe(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),ki(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),ki(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),ki(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>U$e(a[c],o[c]))):this.values)),ki(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=Uj(Uj({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),ki(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Ls(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return ho(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=Te("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=Te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=Te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var j$e=Object.defineProperty,z$e=(t,e,n)=>e in t?j$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vt=(t,e,n)=>z$e(t,typeof e!="symbol"?e+"":e,n);class W$e{constructor(e,n){this.core=e,this.logger=n,Vt(this,"name",qLe),Vt(this,"version",VLe),Vt(this,"events",new GM),Vt(this,"pairings"),Vt(this,"initialized",!1),Vt(this,"storagePrefix",Bl),Vt(this,"ignoredPayloadTypes",[Hu]),Vt(this,"registeredMethods",[]),Vt(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Vt(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Vt(this,"create",async r=>{this.isInitialized();const s=s3(),i=await this.core.crypto.setSymKey(s),o=Fr(xe.FIVE_MINUTES),a={protocol:HZ},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=cj({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(Zf.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),Vt(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[Vc.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=aj(r.uri);s.props.properties.topic=i,s.addTrace(Vc.pairing_uri_validation_success),s.addTrace(Vc.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(Vc.existing_pairing),u.active)throw s.setError(lu.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(Vc.pairing_not_expired)}const d=c||Fr(xe.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(Vc.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(Zf.create,h),s.addTrace(Vc.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(Vc.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(lu.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(lu.subscribe_pairing_topic_failure),f}return s.addTrace(Vc.subscribe_pairing_topic_success),h}),Vt(this,"activate",async({topic:r})=>{this.isInitialized();const s=Fr(xe.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Vt(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Wf();this.events.once(bn("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),Vt(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Vt(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Vt(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Vt(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Rn("USER_DISCONNECTED")),await this.deletePairing(s))}),Vt(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return cj({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),Vt(this,"sendRequest",async(r,s,i)=>{const o=xh(s,i),a=await this.core.crypto.encode(r,o),c=Vb[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),Vt(this,"sendResult",async(r,s,i)=>{const o=qN(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Vb[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Vt(this,"sendError",async(r,s,i)=>{const o=VN(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Vb[c]?Vb[c].res:Vb.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Vt(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,Rn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Vt(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Wd(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Vt(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Vt(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),Vt(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(Zf.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Vt(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{Qc(s)?this.events.emit(bn("pairing_ping",i),{}):pa(s)&&this.events.emit(bn("pairing_ping",i),{error:s.error})},500)}),Vt(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(Zf.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Vt(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=Rn("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),Vt(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(Rn("WC_METHOD_UNSUPPORTED",r))}),Vt(this,"isValidPair",(r,s)=>{var i;if(!$i(r)){const{message:a}=Te("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(lu.malformed_pairing_uri),new Error(a)}if(!eLe(r.uri)){const{message:a}=Te("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(lu.malformed_pairing_uri),new Error(a)}const o=aj(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=Te("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(lu.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=Te("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(lu.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&xe.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(lu.pairing_expired);const{message:a}=Te("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Vt(this,"isValidPing",async r=>{if(!$i(r)){const{message:i}=Te("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Vt(this,"isValidDisconnect",async r=>{if(!$i(r)){const{message:i}=Te("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Vt(this,"isValidPairingTopic",async r=>{if(!kr(r,!1)){const{message:s}=Te("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=Te("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Wd(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=Te("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=Ls(n,this.name),this.pairings=new am(this.core,this.logger,this.name,this.storagePrefix)}get context(){return ho(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(cs.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==Jn.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);rU(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):KN(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(ia.expired,async e=>{const{topic:n}=oZ(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(Zf.expire,{topic:n}))})}}var H$e=Object.defineProperty,G$e=(t,e,n)=>e in t?H$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bs=(t,e,n)=>G$e(t,typeof e!="symbol"?e+"":e,n);class q$e extends $2e{constructor(e,n){super(e,n),this.core=e,this.logger=n,bs(this,"records",new Map),bs(this,"events",new ka.EventEmitter),bs(this,"name",KLe),bs(this,"version",YLe),bs(this,"cached",[]),bs(this,"initialized",!1),bs(this,"storagePrefix",Bl),bs(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),bs(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:Fr(xe.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Wa.created,o)}),bs(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=pa(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(Wa.updated,s))}),bs(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),bs(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(Wa.deleted,i)}}),this.persist()}),bs(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),bs(this,"on",(r,s)=>{this.events.on(r,s)}),bs(this,"once",(r,s)=>{this.events.once(r,s)}),bs(this,"off",(r,s)=>{this.events.off(r,s)}),bs(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Ls(n,this.name)}get context(){return ho(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:xh(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=Te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Wa.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=Te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Wa.created,e=>{const n=Wa.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Wa.updated,e=>{const n=Wa.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Wa.deleted,e=>{const n=Wa.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(rm.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{xe.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(Wa.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var V$e=Object.defineProperty,K$e=(t,e,n)=>e in t?V$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ws=(t,e,n)=>K$e(t,typeof e!="symbol"?e+"":e,n);class Y$e extends H2e{constructor(e,n){super(e,n),this.core=e,this.logger=n,Ws(this,"expirations",new Map),Ws(this,"events",new ka.EventEmitter),Ws(this,"name",QLe),Ws(this,"version",JLe),Ws(this,"cached",[]),Ws(this,"initialized",!1),Ws(this,"storagePrefix",Bl),Ws(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ws(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),Ws(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(ia.created,{target:i,expiration:o})}),Ws(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),Ws(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(ia.deleted,{target:s,expiration:i})}}),Ws(this,"on",(r,s)=>{this.events.on(r,s)}),Ws(this,"once",(r,s)=>{this.events.once(r,s)}),Ws(this,"off",(r,s)=>{this.events.off(r,s)}),Ws(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Ls(n,this.name)}get context(){return ho(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return rDe(e);if(typeof e=="number")return sDe(e);const{message:n}=Te("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(ia.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=Te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=Te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;xe.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(ia.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(rm.pulse,()=>this.checkExpirations()),this.events.on(ia.created,e=>{const n=ia.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(ia.expired,e=>{const n=ia.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(ia.deleted,e=>{const n=ia.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Q$e=Object.defineProperty,J$e=(t,e,n)=>e in t?Q$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Or=(t,e,n)=>J$e(t,typeof e!="symbol"?e+"":e,n);class Z$e extends G2e{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,Or(this,"name",ZLe),Or(this,"abortController"),Or(this,"isDevEnv"),Or(this,"verifyUrlV3",eMe),Or(this,"storagePrefix",Bl),Or(this,"version",WZ),Or(this,"publicKey"),Or(this,"fetchPromise"),Or(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&xe.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Or(this,"register",async s=>{if(!ab()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=Ng(),u=this.startAbortTimer(xe.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",y),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const y=m=>{if(m.data&&typeof m.data=="string")try{const w=JSON.parse(m.data);if(w.type==="verify_attestation"){if(LD(w.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",y),h(w.attestation===null?"":w.attestation)}}catch(w){this.logger.warn(w)}};l.body.appendChild(g),window.addEventListener("message",y,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),Or(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(LD(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),Or(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(xe.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),Or(this,"getVerifyUrl",s=>{let i=s||eE;return tMe.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${eE}`),i=eE),i}),Or(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(xe.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),Or(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),Or(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Or(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),Or(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Or(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),Or(this,"validateAttestation",(s,i)=>{const o=k5e(s,i.publicKey),a={hasExpired:xe.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Ls(n,this.name),this.abortController=new AbortController,this.isDevEnv=sU(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return ho(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),xe.toMiliseconds(e))}}var X$e=Object.defineProperty,eBe=(t,e,n)=>e in t?X$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$j=(t,e,n)=>eBe(t,typeof e!="symbol"?e+"":e,n);class tBe extends q2e{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,$j(this,"context",nMe),$j(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${rMe}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=Ls(n,this.context)}}var nBe=Object.defineProperty,Bj=Object.getOwnPropertySymbols,rBe=Object.prototype.hasOwnProperty,sBe=Object.prototype.propertyIsEnumerable,p3=(t,e,n)=>e in t?nBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qb=(t,e)=>{for(var n in e||(e={}))rBe.call(e,n)&&p3(t,n,e[n]);if(Bj)for(var n of Bj(e))sBe.call(e,n)&&p3(t,n,e[n]);return t},Zr=(t,e,n)=>p3(t,typeof e!="symbol"?e+"":e,n);class iBe extends V2e{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,Zr(this,"context",iMe),Zr(this,"storagePrefix",Bl),Zr(this,"storageVersion",sMe),Zr(this,"events",new Map),Zr(this,"shouldPersist",!1),Zr(this,"init",async()=>{if(!sU())try{const s={eventId:PF(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:sZ(this.core.relayer.protocol,this.core.relayer.version,o3)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Zr(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=PF(),u=this.core.projectId||"",d=Date.now(),h=Qb({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),Zr(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Qb(Qb({},a),this.setMethods(a.eventId))}),Zr(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Zr(this,"setEventListeners",()=>{this.core.heartbeat.on(rm.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{xe.fromMiliseconds(Date.now())-xe.fromMiliseconds(s.timestamp)>oMe&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Zr(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Zr(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Zr(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Zr(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Zr(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,Qb(Qb({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Zr(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Zr(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${aMe}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${o3}${i}`,{method:"POST",body:JSON.stringify(s)})}),Zr(this,"getAppDomain",()=>rZ().url),this.logger=Ls(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var oBe=Object.defineProperty,Fj=Object.getOwnPropertySymbols,aBe=Object.prototype.hasOwnProperty,cBe=Object.prototype.propertyIsEnumerable,g3=(t,e,n)=>e in t?oBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jj=(t,e)=>{for(var n in e||(e={}))aBe.call(e,n)&&g3(t,n,e[n]);if(Fj)for(var n of Fj(e))cBe.call(e,n)&&g3(t,n,e[n]);return t},zn=(t,e,n)=>g3(t,typeof e!="symbol"?e+"":e,n);let lBe=class rX extends D2e{constructor(e){var n;super(e),zn(this,"protocol",zZ),zn(this,"version",WZ),zn(this,"name",i3),zn(this,"relayUrl"),zn(this,"projectId"),zn(this,"customStoragePrefix"),zn(this,"events",new ka.EventEmitter),zn(this,"logger"),zn(this,"heartbeat"),zn(this,"relayer"),zn(this,"crypto"),zn(this,"storage"),zn(this,"history"),zn(this,"expirer"),zn(this,"pairing"),zn(this,"verify"),zn(this,"echoClient"),zn(this,"linkModeSupportedApps"),zn(this,"eventClient"),zn(this,"initialized",!1),zn(this,"logChunkController"),zn(this,"on",(a,c)=>this.events.on(a,c)),zn(this,"once",(a,c)=>this.events.once(a,c)),zn(this,"off",(a,c)=>this.events.off(a,c)),zn(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),zn(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:Jn.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||GZ,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=im({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:TLe.logger,name:i3}),{logger:i,chunkLoggerController:o}=jN({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Ls(i,this.name),this.heartbeat=new FAe,this.crypto=new MUe(this,this.logger,e==null?void 0:e.keychain),this.history=new q$e(this,this.logger),this.expirer=new Y$e(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new P2e(jj(jj({},RLe),e==null?void 0:e.storageOptions)),this.relayer=new l$e({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new W$e(this,this.logger),this.verify=new Z$e(this,this.logger,this.storage),this.echoClient=new tBe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new iBe(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new rX(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(WLe,r),n}get context(){return ho(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(vj,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(vj)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&NLe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const uBe=lBe,sX="wc",iX=2,oX="client",hU=`${sX}@${iX}:${oX}:`,oO={name:oX,logger:"error"},zj="WALLETCONNECT_DEEPLINK_CHOICE",dBe="proposal",Wj="Proposal expired",hBe="session",Dm=xe.SEVEN_DAYS,fBe="engine",Xr={wc_sessionPropose:{req:{ttl:xe.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:1104},res:{ttl:xe.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:1106},res:{ttl:xe.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:xe.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:xe.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:1112},res:{ttl:xe.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:1114},res:{ttl:xe.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:xe.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:xe.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1119}}},aO={min:xe.FIVE_MINUTES,max:xe.SEVEN_DAYS},Wc={idle:"IDLE",active:"ACTIVE"},Hj={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},pBe="request",gBe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],mBe="wc",yBe="auth",wBe="authKeys",bBe="pairingTopics",vBe="requests",iT=`${mBe}@${1.5}:${yBe}:`,hS=`${iT}:PUB_KEY`;var EBe=Object.defineProperty,_Be=Object.defineProperties,CBe=Object.getOwnPropertyDescriptors,Gj=Object.getOwnPropertySymbols,ABe=Object.prototype.hasOwnProperty,SBe=Object.prototype.propertyIsEnumerable,m3=(t,e,n)=>e in t?EBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Un=(t,e)=>{for(var n in e||(e={}))ABe.call(e,n)&&m3(t,n,e[n]);if(Gj)for(var n of Gj(e))SBe.call(e,n)&&m3(t,n,e[n]);return t},ri=(t,e)=>_Be(t,CBe(e)),we=(t,e,n)=>m3(t,typeof e!="symbol"?e+"":e,n);class IBe extends J2e{constructor(e){super(e),we(this,"name",fBe),we(this,"events",new GM),we(this,"initialized",!1),we(this,"requestQueue",{state:Wc.idle,queue:[]}),we(this,"sessionRequestQueue",{state:Wc.idle,queue:[]}),we(this,"requestQueueDelay",xe.ONE_SECOND),we(this,"expectedPairingMethodMap",new Map),we(this,"recentlyDeletedMap",new Map),we(this,"recentlyDeletedLimit",200),we(this,"relayMessageCache",[]),we(this,"pendingSessions",new Map),we(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Xr)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},xe.toMiliseconds(this.requestQueueDelay)))}),we(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=ri(Un({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=Y5e(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const S=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=S.active}}catch(S){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),S}if(!u||!h){const{topic:S,uri:x}=await this.client.core.pairing.create();u=S,d=x}if(!u){const{message:S}=Te("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(S)}const f=await this.client.core.crypto.generateKeyPair(),p=Xr.wc_sessionPropose.req.ttl||xe.FIVE_MINUTES,g=Fr(p),y=ri(Un(Un({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:HZ}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Yc()}),m=bn("session_connect",y.id),{reject:w,resolve:v,done:A}=Wf(p,Wj),C=({id:S})=>{S===y.id&&(this.client.events.off("proposal_expire",C),this.pendingSessions.delete(y.id),this.events.emit(m,{error:{message:Wj,code:0}}))};return this.client.events.on("proposal_expire",C),this.events.once(m,({error:S,session:x})=>{this.client.events.off("proposal_expire",C),S?w(S):x&&v(x)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:y,throwOnFailedPublish:!0,clientRpcId:y.id}),await this.setProposal(y.id,y),{uri:d,approval:A}}),we(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),we(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[Ha.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(I){throw o.setError(Of.no_internet_connection),I}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(I){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(Of.proposal_not_found),I}try{await this.isValidApprove(n)}catch(I){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Of.session_approve_namespace_validation_failure),I}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:y,optionalNamespaces:m}=f;let w=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});w||(w=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Ha.session_approve_started,properties:{topic:p,trace:[Ha.session_approve_started,Ha.session_namespaces_validation_success]}}));const v=await this.client.core.crypto.generateKeyPair(),A=g.publicKey,C=await this.client.core.crypto.generateSharedKey(v,A),S=Un(Un(Un({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:v,metadata:this.client.metadata},expiry:Fr(Dm)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),x=Jn.relay;w.addTrace(Ha.subscribing_session_topic);try{await this.client.core.relayer.subscribe(C,{transportType:x})}catch(I){throw w.setError(Of.subscribe_session_topic_failure),I}w.addTrace(Ha.subscribe_session_topic_success);const T=ri(Un({},S),{topic:C,requiredNamespaces:y,optionalNamespaces:m,pairingTopic:p,acknowledged:!1,self:S.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:v,transportType:Jn.relay});await this.client.session.set(C,T),w.addTrace(Ha.store_session);try{w.addTrace(Ha.publishing_session_settle),await this.sendRequest({topic:C,method:"wc_sessionSettle",params:S,throwOnFailedPublish:!0}).catch(I=>{throw w==null||w.setError(Of.session_settle_publish_failure),I}),w.addTrace(Ha.session_settle_publish_success),w.addTrace(Ha.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:v},throwOnFailedPublish:!0}).catch(I=>{throw w==null||w.setError(Of.session_approve_publish_failure),I}),w.addTrace(Ha.session_approve_publish_success)}catch(I){throw this.client.logger.error(I),this.client.session.delete(C,Rn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(C),I}return this.client.core.eventClient.deleteEvent({eventId:w.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(a,Rn("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(C,Fr(Dm)),{topic:C,acknowledged:()=>Promise.resolve(this.client.session.get(C))}}),we(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&(await this.sendError({id:r,topic:i,error:s,rpcOpts:Xr.wc_sessionPropose.reject}),await this.client.proposal.delete(r,Rn("USER_DISCONNECTED")))}),we(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=Wf(),c=Yc(),l=mp().toString(),u=this.client.session.get(r).namespaces;return this.events.once(bn("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),we(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=Yc(),{done:i,resolve:o,reject:a}=Wf();return this.events.once(bn("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,Fr(Dm)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),we(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(m){throw this.client.logger.error("request() -> isValidRequest() failed"),m}const{chainId:r,request:s,topic:i,expiry:o=Xr.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===Jn.relay&&await this.confirmOnlineStateOrThrow();const c=Yc(),l=mp().toString(),{done:u,resolve:d,reject:h}=Wf(o,"Request expired. Please try again.");this.events.once(bn("session_request",c),({error:m,result:w})=>{m?h(m):d(w)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:ri(Un({},s),{expiryTimestamp:Fr(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(m=>h(m)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:ri(Un({},s),{expiryTimestamp:Fr(o)}),chainId:r},y=this.shouldSetTVF(f,g);return await Promise.all([new Promise(async m=>{await this.sendRequest(Un({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0},y&&{tvf:this.getTVFParams(c,g)})).catch(w=>h(w)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),m()}),new Promise(async m=>{var w;if(!((w=a.sessionConfig)!=null&&w.disableDeepLink)){const v=await cDe(this.client.core.storage,zj);await iDe({id:c,topic:i,wcDeepLink:v})}m()}),u()]).then(m=>m[2])}),we(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===Jn.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Qc(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):pa(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),we(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=Yc(),i=mp().toString(),{done:o,resolve:a,reject:c}=Wf();this.events.once(bn("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),we(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=mp().toString(),a=Yc();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),we(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Rn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=Te("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),we(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>Z5e(r,n)))),we(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),we(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Jn.link_mode:Jn.relay;o===Jn.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:y}=n,m=[...n.resources||[]],{topic:w,uri:v}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:w,uri:v}});const A=await this.client.core.crypto.generateKeyPair(),C=uS(A);if(await Promise.all([this.client.auth.authKeys.set(hS,{responseTopic:C,publicKey:A}),this.client.auth.pairingTopics.set(C,{topic:C,pairingTopic:w})]),await this.client.core.relayer.subscribe(C,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${w}`),g.length>0){const{namespace:L}=jy(a[0]);let F=e3e(L,"request",g);lS(m)&&(F=n3e(F,m.pop())),m.push(F)}const S=y&&y>Xr.wc_sessionAuthenticate.req.ttl?y:Xr.wc_sessionAuthenticate.req.ttl,x={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:m},requester:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Fr(S)},T={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},I={requiredNamespaces:{},optionalNamespaces:T,relays:[{protocol:"irn"}],pairingTopic:w,proposer:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Fr(Xr.wc_sessionPropose.req.ttl),id:Yc()},{done:k,resolve:O,reject:B}=Wf(S,"Request expired"),G=Yc(),W=bn("session_connect",I.id),R=bn("session_request",G),N=async({error:L,session:F})=>{this.events.off(R,M),L?B(L):F&&O({session:F})},M=async L=>{var F,q,ne;if(await this.deletePendingAuthRequest(G,{message:"fulfilled",code:0}),L.error){const he=Rn("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return L.error.code===he.code?void 0:(this.events.off(W,N),B(L.error.message))}await this.deleteProposal(I.id),this.events.off(W,N);const{cacaos:le,responder:ie}=L.result,re=[],ye=[];for(const he of le){await BF({cacao:he,projectId:this.client.core.projectId})||(this.client.logger.error(he,"Signature verification failed"),B(Rn("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:de}=he,be=lS(de.resources),We=[YD(de.iss)],_e=QI(de.iss);if(be){const Ae=FF(be),tt=jF(be);re.push(...Ae),We.push(...tt)}for(const Ae of We)ye.push(`${Ae}:${_e}`)}const Z=await this.client.core.crypto.generateSharedKey(A,ie.publicKey);let oe;re.length>0&&(oe={topic:Z,acknowledged:!0,self:{publicKey:A,metadata:this.client.metadata},peer:ie,controller:ie.publicKey,expiry:Fr(Dm),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:w,namespaces:hj([...new Set(re)],[...new Set(ye)]),transportType:o},await this.client.core.relayer.subscribe(Z,{transportType:o}),await this.client.session.set(Z,oe),w&&await this.client.core.pairing.updateMetadata({topic:w,metadata:ie.metadata}),oe=this.client.session.get(Z)),(F=this.client.metadata.redirect)!=null&&F.linkMode&&(q=ie.metadata.redirect)!=null&&q.linkMode&&(ne=ie.metadata.redirect)!=null&&ne.universal&&r&&(this.client.core.addLinkModeSupportedApp(ie.metadata.redirect.universal),this.client.session.update(Z,{transportType:Jn.link_mode})),O({auths:le,session:oe})};this.events.once(W,N),this.events.once(R,M);let P;try{if(i){const L=xh("wc_sessionAuthenticate",x,G);this.client.core.history.set(w,L);const F=await this.client.core.crypto.encode("",L,{type:JC,encoding:Kd});P=pA(r,w,F)}else await Promise.all([this.sendRequest({topic:w,method:"wc_sessionAuthenticate",params:x,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:G}),this.sendRequest({topic:w,method:"wc_sessionPropose",params:I,expiry:Xr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:I.id})])}catch(L){throw this.events.off(W,N),this.events.off(R,M),L}return await this.setProposal(I.id,I),await this.setAuthRequest(G,{request:ri(Un({},x),{verifyContext:{}}),pairingTopic:w,transportType:o}),{uri:P??v,response:k}}),we(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[kf.authenticated_session_approve_started]}});try{this.isInitialized()}catch(y){throw i.setError(Kb.no_internet_connection),y}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(Kb.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||Jn.relay;a===Jn.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=uS(c),d={type:Hu,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const y of s){if(!await BF({cacao:y,projectId:this.client.core.projectId})){i.setError(Kb.invalid_cacao);const C=Rn("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:C,encodeOpts:d}),new Error(C.message)}i.addTrace(kf.cacaos_verified);const{p:m}=y,w=lS(m.resources),v=[YD(m.iss)],A=QI(m.iss);if(w){const C=FF(w),S=jF(w);h.push(...C),v.push(...S)}for(const C of v)f.push(`${C}:${A}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(kf.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Fr(Dm),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:hj([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(kf.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(y){throw i.setError(Kb.subscribe_authenticated_session_topic_failure),y}i.addTrace(kf.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(kf.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(kf.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(y){throw i.setError(Kb.authenticated_session_approve_publish_failure),y}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),we(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===Jn.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=uS(o),l={type:Hu,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:Xr.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,Rn("USER_DISCONNECTED"))}),we(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return gZ(r,s)}),we(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),we(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),we(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Rn("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(zj).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,Rn("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Wc.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),we(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Of.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,Rn("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),we(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=Wc.idle,this.client.events.emit("session_request_expire",{id:n}))}),we(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),we(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),we(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,Fr(Xr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),we(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=Jn.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),we(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||Fr(Xr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),we(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=xh(s,i,c);let f;const p=!!u;try{const m=p?Kd:bc;f=await this.client.core.crypto.encode(r,h,{encoding:m})}catch(m){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),m}let g;if(gBe.includes(s)){const m=fl(JSON.stringify(h)),w=fl(f);g=await this.client.core.verify.register({id:w,decryptedId:m})}const y=Xr[s].req;if(y.attestation=g,o&&(y.ttl=o),a&&(y.id=a),this.client.core.history.set(r,h),p){const m=pA(u,r,f);await global.Linking.openURL(m,this.client.name)}else{const m=Xr[s].req;o&&(m.ttl=o),a&&(m.id=a),m.tvf=ri(Un({},d),{correlationId:h.id}),l?(m.internal=ri(Un({},m.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,m)):this.client.core.relayer.publish(r,f,m).catch(w=>this.client.logger.error(w))}return h.id}),we(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=qN(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?Kd:bc;u=await this.client.core.crypto.encode(s,l,ri(Un({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{this.shouldSetTVF(p.method,p.params)&&(f=this.getTVFParams(r,p.params,i))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=pA(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=Xr[p].res;g.tvf=ri(Un({},f),{correlationId:r}),o?(g.internal=ri(Un({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(y=>this.client.logger.error(y))}await this.client.core.history.resolve(l)}),we(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=VN(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?Kd:bc;u=await this.client.core.crypto.encode(s,l,ri(Un({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=pA(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||Xr[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),we(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Wd(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Wd(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),we(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),we(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),we(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Wc.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Wc.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Wc.idle}),we(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),we(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),we(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=Te("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),we(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),we(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(lu.proposal_listener_not_found)),this.isValidConnect(Un({},s.params));const u=a.expiryTimestamp||Fr(Xr.wc_sessionPropose.req.ttl),d=Un({id:c,pairingTopic:r,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:fl(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(Vc.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:Xr.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),we(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(Qc(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(pa(r)){await this.client.proposal.delete(i,Rn("USER_DISCONNECTED"));const o=bn("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),we(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(y=>y.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=ri(Un(Un(Un({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:Jn.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(bn("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),we(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;Qc(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(bn("session_approve",s),{})):pa(r)&&(await this.client.session.delete(n,Rn("USER_DISCONNECTED")),this.events.emit(bn("session_approve",s),{error:r.error}))}),we(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=qb.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:Rn("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Un({topic:n},s));try{qb.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw qb.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),we(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),we(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=bn("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Qc(r)?this.events.emit(bn("session_update",s),{}):pa(r)&&this.events.emit(bn("session_update",s),{error:r.error})}),we(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,Fr(Dm)),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),we(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=bn("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Qc(r)?this.events.emit(bn("session_extend",s),{}):pa(r)&&this.events.emit(bn("session_extend",s),{error:r.error})}),we(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),we(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=bn("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Qc(r)?this.events.emit(bn("session_ping",s),{}):pa(r)&&this.events.emit(bn("session_ping",s),{error:r.error})},500)}),we(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(cs.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:Rn("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),we(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(Un({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:fl(JSON.stringify(xh("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===Jn.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),we(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=bn("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Qc(r)?this.events.emit(bn("session_request",s),{result:r.result}):pa(r)&&this.events.emit(bn("session_request",s),{error:r.error})}),we(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=qb.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Un({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),qb.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),we(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Qc(r)?this.events.emit(bn("session_request",s),{result:r.result}):pa(r)&&this.events.emit(bn("session_request",s),{error:r.error})}),we(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:fl(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===Jn.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:Hu,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:Xr.wc_sessionAuthenticate.autoReject,appLink:h})}}),we(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),we(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Wc.idle,this.processSessionRequestQueue()},xe.toMiliseconds(this.requestQueueDelay))}),we(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=bn("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(bn("session_request",i.request.id),{error:r})})}),we(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Wc.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Wc.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),we(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),we(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:xh("wc_sessionPropose",ri(Un({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),we(this,"isValidConnect",async n=>{if(!$i(n)){const{message:l}=Te("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Is(r)||await this.isValidPairingTopic(r),!uLe(c)){const{message:l}=Te("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Is(s)&&Jh(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!Is(i)&&Jh(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Is(o)||this.validateSessionProps(o,"sessionProperties"),!Is(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),we(this,"validateNamespaces",(n,r)=>{const s=lLe(n,"connect()",r);if(s)throw new Error(s.message)}),we(this,"isValidApprove",async n=>{if(!$i(n))throw new Error(Te("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=eO(s,"approve()");if(l)throw new Error(l.message);const u=gj(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!kr(i,!0)){const{message:d}=Te("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(Is(o)||this.validateSessionProps(o,"sessionProperties"),!Is(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),we(this,"isValidReject",async n=>{if(!$i(n)){const{message:i}=Te("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!hLe(s)){const{message:i}=Te("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),we(this,"isValidSessionSettleRequest",n=>{if(!$i(n)){const{message:l}=Te("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!jZ(r)){const{message:l}=Te("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=rLe(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=eO(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Wd(o)){const{message:l}=Te("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),we(this,"isValidUpdate",async n=>{if(!$i(n)){const{message:c}=Te("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=eO(s,"update()");if(o)throw new Error(o.message);const a=gj(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),we(this,"isValidExtend",async n=>{if(!$i(n)){const{message:s}=Te("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),we(this,"isValidRequest",async n=>{if(!$i(n)){const{message:c}=Te("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!pj(a,i)){const{message:c}=Te("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!fLe(s)){const{message:c}=Te("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!mLe(a,i,s.method)){const{message:c}=Te("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!vLe(o,aO)){const{message:c}=Te("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${aO.min} and ${aO.max}`);throw new Error(c)}}),we(this,"isValidRespond",async n=>{var r;if(!$i(n)){const{message:o}=Te("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!pLe(i)){const{message:o}=Te("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),we(this,"isValidPing",async n=>{if(!$i(n)){const{message:s}=Te("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),we(this,"isValidEmit",async n=>{if(!$i(n)){const{message:a}=Te("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!pj(o,i)){const{message:a}=Te("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!gLe(s)){const{message:a}=Te("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!yLe(o,i,s.name)){const{message:a}=Te("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),we(this,"isValidDisconnect",async n=>{if(!$i(n)){const{message:s}=Te("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),we(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!kr(s,!1))throw new Error("uri is required parameter");if(!kr(i,!1))throw new Error("domain is required parameter");if(!kr(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>jy(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=jy(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),we(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||eE,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Jn.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),we(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=Te("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),we(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),we(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),we(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=Te("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),we(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==Jn.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),we(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),we(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=RF(n,"topic")||"",s=decodeURIComponent(RF(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:Jn.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),we(this,"registerLinkModeListeners",async()=>{var n;if(sU()||Af()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),we(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:s}=r;return Object.keys(Hj).includes(s.method)}),we(this,"getTVFParams",(n,r,s)=>{var i,o;try{const a=r.request.method,c=this.extractTxHashesFromResult(a,s);return ri(Un({correlationId:n,rpcMethods:[a],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(o=(i=r.request.params)==null?void 0:i[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),we(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),we(this,"extractTxHashesFromResult",(n,r)=>{try{const s=Hj[n];if(typeof r=="string")return[r];const i=r[s.key];if(Qh(i))return n==="solana_signAllTransactions"?i.map(o=>FDe(o)):i;if(typeof i=="string")return[i]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(cs.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(hS)?this.client.auth.authKeys.get(hS):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===Jn.link_mode?Kd:bc});rU(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:fl(r)})):KN(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(ia.expired,async e=>{const{topic:n,id:r}=oZ(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,Te("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,Te("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(Zf.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Zf.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!kr(e,!1)){const{message:n}=Te("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=Te("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Wd(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=Te("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!kr(e,!1)){const{message:n}=Te("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=Te("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Wd(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=Te("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=Te("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(kr(e,!1)){const{message:n}=Te("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=Te("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!dLe(e)){const{message:n}=Te("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=Te("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Wd(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=Te("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class xBe extends am{constructor(e,n){super(e,n,dBe,hU),this.core=e,this.logger=n}}let NBe=class extends am{constructor(e,n){super(e,n,hBe,hU),this.core=e,this.logger=n}};class TBe extends am{constructor(e,n){super(e,n,pBe,hU,r=>r.id),this.core=e,this.logger=n}}class RBe extends am{constructor(e,n){super(e,n,wBe,iT,()=>hS),this.core=e,this.logger=n}}class PBe extends am{constructor(e,n){super(e,n,bBe,iT),this.core=e,this.logger=n}}class OBe extends am{constructor(e,n){super(e,n,vBe,iT,r=>r.id),this.core=e,this.logger=n}}var kBe=Object.defineProperty,DBe=(t,e,n)=>e in t?kBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cO=(t,e,n)=>DBe(t,typeof e!="symbol"?e+"":e,n);class LBe{constructor(e,n){this.core=e,this.logger=n,cO(this,"authKeys"),cO(this,"pairingTopics"),cO(this,"requests"),this.authKeys=new RBe(this.core,this.logger),this.pairingTopics=new PBe(this.core,this.logger),this.requests=new OBe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var MBe=Object.defineProperty,UBe=(t,e,n)=>e in t?MBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Kt=(t,e,n)=>UBe(t,typeof e!="symbol"?e+"":e,n);let $Be=class aX extends Q2e{constructor(e){super(e),Kt(this,"protocol",sX),Kt(this,"version",iX),Kt(this,"name",oO.name),Kt(this,"metadata"),Kt(this,"core"),Kt(this,"logger"),Kt(this,"events",new ka.EventEmitter),Kt(this,"engine"),Kt(this,"session"),Kt(this,"proposal"),Kt(this,"pendingRequest"),Kt(this,"auth"),Kt(this,"signConfig"),Kt(this,"on",(r,s)=>this.events.on(r,s)),Kt(this,"once",(r,s)=>this.events.once(r,s)),Kt(this,"off",(r,s)=>this.events.off(r,s)),Kt(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),Kt(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Kt(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),Kt(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),Kt(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),Kt(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),Kt(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),Kt(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),Kt(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),Kt(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),Kt(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),Kt(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),Kt(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),Kt(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),Kt(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Kt(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),Kt(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),Kt(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),Kt(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||oO.name,this.metadata=Xke(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:jC(im({level:(e==null?void 0:e.logger)||oO.logger}));this.core=(e==null?void 0:e.core)||new uBe(e),this.logger=Ls(n,this.name),this.session=new NBe(this.core,this.logger),this.proposal=new xBe(this.core,this.logger),this.pendingRequest=new TBe(this.core,this.logger),this.engine=new IBe(this),this.auth=new LBe(this.core,this.logger)}static async init(e){const n=new aX(e);return await n.initialize(),n}get context(){return ho(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},xe.toMiliseconds(xe.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const qj="error",BBe="wss://relay.walletconnect.org",FBe="wc",jBe="universal_provider",mA=`${FBe}@2:${jBe}:`,cX="https://rpc.walletconnect.org/v1/",ey="generic",zBe=`${cX}bundler`,La={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function WBe(){}function fU(t){return t==null||typeof t!="object"&&typeof t!="function"}function pU(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function HBe(t){if(fU(t))return t;if(Array.isArray(t)||pU(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function Vj(t){return typeof t=="object"&&t!==null}function lX(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function uX(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const GBe="[object RegExp]",dX="[object String]",hX="[object Number]",fX="[object Boolean]",pX="[object Arguments]",qBe="[object Symbol]",VBe="[object Date]",KBe="[object Map]",YBe="[object Set]",QBe="[object Array]",JBe="[object ArrayBuffer]",ZBe="[object Object]",XBe="[object DataView]",e6e="[object Uint8Array]",t6e="[object Uint8ClampedArray]",n6e="[object Uint16Array]",r6e="[object Uint32Array]",s6e="[object Int8Array]",i6e="[object Int16Array]",o6e="[object Int32Array]",a6e="[object Float32Array]",c6e="[object Float64Array]";function l6e(t,e){return _y(t,void 0,t,new Map,e)}function _y(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(fU(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=_y(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,_y(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(_y(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(pU(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=_y(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),Xf(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),Xf(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),Xf(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,Xf(o,t,n,r,s),o}if(typeof t=="object"&&u6e(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),Xf(o,t,n,r,s),o}return t}function Xf(t,e,n=t,r,s){const i=[...Object.keys(e),...lX(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=_y(e[a],a,n,r,s))}}function u6e(t){switch(uX(t)){case pX:case QBe:case JBe:case XBe:case fX:case VBe:case a6e:case c6e:case s6e:case i6e:case o6e:case KBe:case hX:case ZBe:case GBe:case YBe:case dX:case qBe:case e6e:case t6e:case n6e:case r6e:return!0;default:return!1}}function d6e(t,e){return l6e(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case hX:case dX:case fX:{const o=new t.constructor(t==null?void 0:t.valueOf());return Xf(o,t),o}case pX:{const o={};return Xf(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function Kj(t){return d6e(t)}function Yj(t){return t!==null&&typeof t=="object"&&uX(t)==="[object Arguments]"}function h6e(t){return pU(t)}function f6e(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function p6e(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=y3(s,o,r,new Map)}return s}function y3(t,e,n,r){if(fU(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return HBe(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...lX(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(Yj(a)&&(a={...a}),Yj(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=Kj(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||Vj(c)&&Vj(a)?t[o]=y3(c,a,n,r):c==null&&f6e(a)?t[o]=y3({},a,n,r):c==null&&h6e(a)?t[o]=Kj(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function g6e(t,...e){return p6e(t,...e,WBe)}var m6e=Object.defineProperty,y6e=Object.defineProperties,w6e=Object.getOwnPropertyDescriptors,Qj=Object.getOwnPropertySymbols,b6e=Object.prototype.hasOwnProperty,v6e=Object.prototype.propertyIsEnumerable,Jj=(t,e,n)=>e in t?m6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yA=(t,e)=>{for(var n in e||(e={}))b6e.call(e,n)&&Jj(t,n,e[n]);if(Qj)for(var n of Qj(e))v6e.call(e,n)&&Jj(t,n,e[n]);return t},E6e=(t,e)=>y6e(t,w6e(e));function Fo(t,e,n){var r;const s=jy(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${cX}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function cm(t){return t.includes(":")?t.split(":")[1]:t}function gX(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function _6e(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function wA(t={},e={}){const n=Zj(t),r=Zj(e);return g6e(n,r)}function Zj(t){var e,n,r,s,i;const o={};if(!Jh(t))return o;for(const[a,c]of Object.entries(t)){const l=rT(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=Ey(a);o[f]=E6e(yA(yA({},o[f]),c),{chains:Rl(l,(e=o[f])==null?void 0:e.chains),methods:Rl(u,(n=o[f])==null?void 0:n.methods),events:Rl(d,(r=o[f])==null?void 0:r.events)}),(Jh(h)||Jh(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=yA(yA({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function Xj(t){return t.includes(":")?t.split(":")[2]:t}function e9(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=rT(n)?[n]:r.chains?r.chains:gX(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function lO(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const mX={},fn=t=>mX[t],uO=(t,e)=>{mX[t]=e};var C6e=Object.defineProperty,A6e=(t,e,n)=>e in t?C6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lm=(t,e,n)=>A6e(t,typeof e!="symbol"?e+"":e,n);class S6e{constructor(e){Lm(this,"name","polkadot"),Lm(this,"client"),Lm(this,"httpProviders"),Lm(this,"events"),Lm(this,"namespace"),Lm(this,"chainId"),this.namespace=e.namespace,this.events=fn("events"),this.client=fn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=cm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Fo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Da(new Oc(r,fn("disableProviderPing")))}}var I6e=Object.defineProperty,x6e=Object.defineProperties,N6e=Object.getOwnPropertyDescriptors,t9=Object.getOwnPropertySymbols,T6e=Object.prototype.hasOwnProperty,R6e=Object.prototype.propertyIsEnumerable,w3=(t,e,n)=>e in t?I6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,n9=(t,e)=>{for(var n in e||(e={}))T6e.call(e,n)&&w3(t,n,e[n]);if(t9)for(var n of t9(e))R6e.call(e,n)&&w3(t,n,e[n]);return t},r9=(t,e)=>x6e(t,N6e(e)),Mm=(t,e,n)=>w3(t,typeof e!="symbol"?e+"":e,n);class P6e{constructor(e){Mm(this,"name","eip155"),Mm(this,"client"),Mm(this,"chainId"),Mm(this,"namespace"),Mm(this,"httpProviders"),Mm(this,"events"),this.namespace=e.namespace,this.events=fn("events"),this.client=fn("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||Fo(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Da(new Oc(r,fn("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(cm(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:r9(n9({},u.sessionProperties||{}),{capabilities:r9(n9({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(xh("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${zBe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var O6e=Object.defineProperty,k6e=(t,e,n)=>e in t?O6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Um=(t,e,n)=>k6e(t,typeof e!="symbol"?e+"":e,n);class D6e{constructor(e){Um(this,"name","solana"),Um(this,"client"),Um(this,"httpProviders"),Um(this,"events"),Um(this,"namespace"),Um(this,"chainId"),this.namespace=e.namespace,this.events=fn("events"),this.client=fn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=cm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Fo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Da(new Oc(r,fn("disableProviderPing")))}}var L6e=Object.defineProperty,M6e=(t,e,n)=>e in t?L6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$m=(t,e,n)=>M6e(t,typeof e!="symbol"?e+"":e,n);class U6e{constructor(e){$m(this,"name","cosmos"),$m(this,"client"),$m(this,"httpProviders"),$m(this,"events"),$m(this,"namespace"),$m(this,"chainId"),this.namespace=e.namespace,this.events=fn("events"),this.client=fn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=cm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Fo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Da(new Oc(r,fn("disableProviderPing")))}}var $6e=Object.defineProperty,B6e=(t,e,n)=>e in t?$6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bm=(t,e,n)=>B6e(t,typeof e!="symbol"?e+"":e,n);class F6e{constructor(e){Bm(this,"name","algorand"),Bm(this,"client"),Bm(this,"httpProviders"),Bm(this,"events"),Bm(this,"namespace"),Bm(this,"chainId"),this.namespace=e.namespace,this.events=fn("events"),this.client=fn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||Fo(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Fo(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Da(new Oc(r,fn("disableProviderPing")))}}var j6e=Object.defineProperty,z6e=(t,e,n)=>e in t?j6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fm=(t,e,n)=>z6e(t,typeof e!="symbol"?e+"":e,n);class W6e{constructor(e){Fm(this,"name","cip34"),Fm(this,"client"),Fm(this,"httpProviders"),Fm(this,"events"),Fm(this,"namespace"),Fm(this,"chainId"),this.namespace=e.namespace,this.events=fn("events"),this.client=fn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=cm(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Da(new Oc(r,fn("disableProviderPing")))}}var H6e=Object.defineProperty,G6e=(t,e,n)=>e in t?H6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jm=(t,e,n)=>G6e(t,typeof e!="symbol"?e+"":e,n);class q6e{constructor(e){jm(this,"name","elrond"),jm(this,"client"),jm(this,"httpProviders"),jm(this,"events"),jm(this,"namespace"),jm(this,"chainId"),this.namespace=e.namespace,this.events=fn("events"),this.client=fn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=cm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Fo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Da(new Oc(r,fn("disableProviderPing")))}}var V6e=Object.defineProperty,K6e=(t,e,n)=>e in t?V6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zm=(t,e,n)=>K6e(t,typeof e!="symbol"?e+"":e,n);class Y6e{constructor(e){zm(this,"name","multiversx"),zm(this,"client"),zm(this,"httpProviders"),zm(this,"events"),zm(this,"namespace"),zm(this,"chainId"),this.namespace=e.namespace,this.events=fn("events"),this.client=fn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=cm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Fo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Da(new Oc(r,fn("disableProviderPing")))}}var Q6e=Object.defineProperty,J6e=(t,e,n)=>e in t?Q6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wm=(t,e,n)=>J6e(t,typeof e!="symbol"?e+"":e,n);class Z6e{constructor(e){Wm(this,"name","near"),Wm(this,"client"),Wm(this,"httpProviders"),Wm(this,"events"),Wm(this,"namespace"),Wm(this,"chainId"),this.namespace=e.namespace,this.events=fn("events"),this.client=fn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Fo(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Fo(e,this.namespace);return typeof r>"u"?void 0:new Da(new Oc(r,fn("disableProviderPing")))}}var X6e=Object.defineProperty,e8e=(t,e,n)=>e in t?X6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hm=(t,e,n)=>e8e(t,typeof e!="symbol"?e+"":e,n);class t8e{constructor(e){Hm(this,"name","tezos"),Hm(this,"client"),Hm(this,"httpProviders"),Hm(this,"events"),Hm(this,"namespace"),Hm(this,"chainId"),this.namespace=e.namespace,this.events=fn("events"),this.client=fn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Fo(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Fo(e,this.namespace);return typeof r>"u"?void 0:new Da(new Oc(r))}}var n8e=Object.defineProperty,r8e=(t,e,n)=>e in t?n8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gm=(t,e,n)=>r8e(t,typeof e!="symbol"?e+"":e,n);class s8e{constructor(e){Gm(this,"name",ey),Gm(this,"client"),Gm(this,"httpProviders"),Gm(this,"events"),Gm(this,"namespace"),Gm(this,"chainId"),this.namespace=e.namespace,this.events=fn("events"),this.client=fn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=jy(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Fo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Da(new Oc(r,fn("disableProviderPing")))}}var i8e=Object.defineProperty,o8e=Object.defineProperties,a8e=Object.getOwnPropertyDescriptors,s9=Object.getOwnPropertySymbols,c8e=Object.prototype.hasOwnProperty,l8e=Object.prototype.propertyIsEnumerable,b3=(t,e,n)=>e in t?i8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bA=(t,e)=>{for(var n in e||(e={}))c8e.call(e,n)&&b3(t,n,e[n]);if(s9)for(var n of s9(e))l8e.call(e,n)&&b3(t,n,e[n]);return t},dO=(t,e)=>o8e(t,a8e(e)),Xo=(t,e,n)=>b3(t,typeof e!="symbol"?e+"":e,n);let u8e=class yX{constructor(e){Xo(this,"client"),Xo(this,"namespaces"),Xo(this,"optionalNamespaces"),Xo(this,"sessionProperties"),Xo(this,"scopedProperties"),Xo(this,"events",new GM),Xo(this,"rpcProviders",{}),Xo(this,"session"),Xo(this,"providerOpts"),Xo(this,"logger"),Xo(this,"uri"),Xo(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:jC(im({level:(e==null?void 0:e.logger)||qj})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new yX(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:bA({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,qN(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Rn("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=e9(this.session.namespaces);this.namespaces=wA(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=e9(s.namespaces);return this.namespaces=wA(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===ey?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(Qh(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await $Be.init({core:this.providerOpts.core,logger:this.providerOpts.logger||qj,relayUrl:this.providerOpts.relayUrl||BBe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>Ey(n)))];uO("client",this.client),uO("events",this.events),uO("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=_6e(n,this.session),s=gX(r),i=wA(this.namespaces,this.optionalNamespaces),o=dO(bA({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new P6e({namespace:o});break;case"algorand":this.rpcProviders[n]=new F6e({namespace:o});break;case"solana":this.rpcProviders[n]=new D6e({namespace:o});break;case"cosmos":this.rpcProviders[n]=new U6e({namespace:o});break;case"polkadot":this.rpcProviders[n]=new S6e({namespace:o});break;case"cip34":this.rpcProviders[n]=new W6e({namespace:o});break;case"elrond":this.rpcProviders[n]=new q6e({namespace:o});break;case"multiversx":this.rpcProviders[n]=new Y6e({namespace:o});break;case"near":this.rpcProviders[n]=new Z6e({namespace:o});break;case"tezos":this.rpcProviders[n]=new t8e({namespace:o});break;default:this.rpcProviders[ey]?this.rpcProviders[ey].updateNamespace(o):this.rpcProviders[ey]=new s8e({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&Qh(o)&&this.events.emit("accountsChanged",o.map(Xj))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=Ey(o),l=lO(o)!==lO(a)?`${c}:${lO(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=dO(bA({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",dO(bA({},Rn("USER_DISCONNECTED")),{data:e.topic})))}),this.on(La.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[ey]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=wA(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>Ey(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=Ey(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(Xj);if(!Qh(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${mA}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${mA}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${mA}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(mA)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};var i9={};const d8e={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof i9<"u"?i9.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},v3={filterOutDuplicatesByRDNS(t){const e=ve.state.enableEIP6963?je.state.connectors:[],n=Je.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&ot.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=je.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=Je.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=je.state,{featuredWalletIds:n}=ve.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=ve.state.features)==null?void 0:c.connectMethodsOrder),r=e||je.state.connectors;if(n)return n;const{injected:s,announced:i}=fS.getConnectorsByType(r,at.state.recommended,at.state.featured),o=s.filter(fS.showConnector),a=i.filter(fS.showConnector);return o.length||a.length?["wallet","email","social"]:d8e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&at.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&at.state.excludedWallets.some(r=>YN.isLowerCaseMatch(r.name,t.name));return e||n}},fS={getConnectorsByType(t,e,n){const{customWallets:r}=ve.state,s=Je.getRecentWallets(),i=v3.filterOutDuplicateWallets(e),o=v3.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&at.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&at.state.excludedWallets.some(i=>YN.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!ot.isMobile()||ot.isMobile()&&!e&&!gt.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(z.state.chains.values()).some(n=>je.getConnectorId(n.namespace)===ze.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=ve.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=fS.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:ve.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(m=>m.isEnabled),p=new Set(f.map(m=>m.type)),g=c.filter(m=>p.has(m)).map(m=>({type:m,isEnabled:!0})),y=f.filter(({type:m})=>!g.some(({type:v})=>v===m));return Array.from(new Set([...g,...y].map(({type:m})=>m)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const pS=globalThis,gU=pS.ShadowRoot&&(pS.ShadyCSS===void 0||pS.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,mU=Symbol(),o9=new WeakMap;let wX=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==mU)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(gU&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=o9.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&o9.set(n,e))}return e}toString(){return this.cssText}};const na=t=>new wX(typeof t=="string"?t:t+"",void 0,mU),Gu=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new wX(n,t,mU)},h8e=(t,e)=>{if(gU)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=pS.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},a9=gU?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return na(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:f8e,defineProperty:p8e,getOwnPropertyDescriptor:g8e,getOwnPropertyNames:m8e,getOwnPropertySymbols:y8e,getPrototypeOf:w8e}=Object,Zh=globalThis,c9=Zh.trustedTypes,b8e=c9?c9.emptyScript:"",hO=Zh.reactiveElementPolyfillSupport,nE=(t,e)=>t,E3={toAttribute(t,e){switch(e){case Boolean:t=t?b8e:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},bX=(t,e)=>!f8e(t,e),l9={attribute:!0,type:String,converter:E3,reflect:!1,useDefault:!1,hasChanged:bX};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Zh.litPropertyMetadata??(Zh.litPropertyMetadata=new WeakMap);let ty=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=l9){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&p8e(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=g8e(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??l9}static _$Ei(){if(this.hasOwnProperty(nE("elementProperties")))return;const e=w8e(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(nE("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(nE("properties"))){const n=this.properties,r=[...m8e(n),...y8e(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(a9(s))}else e!==void 0&&n.push(a9(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return h8e(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:E3).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:E3;this._$Em=s;const l=c.fromAttribute(n,a.type);this[s]=l??((o=this._$Ej)==null?void 0:o.get(s))??l,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??bX)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};ty.elementStyles=[],ty.shadowRootOptions={mode:"open"},ty[nE("elementProperties")]=new Map,ty[nE("finalized")]=new Map,hO==null||hO({ReactiveElement:ty}),(Zh.reactiveElementVersions??(Zh.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const rE=globalThis,XI=rE.trustedTypes,u9=XI?XI.createPolicy("lit-html",{createHTML:t=>t}):void 0,vX="$lit$",Yd=`lit$${Math.random().toFixed(9).slice(2)}$`,EX="?"+Yd,v8e=`<${EX}>`,Mg=document,R_=()=>Mg.createComment(""),P_=t=>t===null||typeof t!="object"&&typeof t!="function",yU=Array.isArray,E8e=t=>yU(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",fO=`[ 	
\f\r]`,Jb=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,d9=/-->/g,h9=/>/g,Df=RegExp(`>|${fO}(?:([^\\s"'>=/]+)(${fO}*=${fO}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),f9=/'/g,p9=/"/g,_X=/^(?:script|style|textarea|title)$/i,CX=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),nVe=CX(1),rVe=CX(2),S0=Symbol.for("lit-noChange"),ls=Symbol.for("lit-nothing"),g9=new WeakMap,wp=Mg.createTreeWalker(Mg,129);function AX(t,e){if(!yU(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return u9!==void 0?u9.createHTML(e):e}const _8e=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=Jb;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===Jb?u[1]==="!--"?o=d9:u[1]!==void 0?o=h9:u[2]!==void 0?(_X.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=Df):u[3]!==void 0&&(o=Df):o===Df?u[0]===">"?(o=s??Jb,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Df:u[3]==='"'?p9:f9):o===p9||o===f9?o=Df:o===d9||o===h9?o=Jb:(o=Df,s=void 0);const f=o===Df&&t[a+1].startsWith("/>")?" ":"";i+=o===Jb?c+v8e:d>=0?(r.push(l),c.slice(0,d)+vX+c.slice(d)+Yd+f):c+Yd+(d===-2?a:f)}return[AX(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class O_{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=_8e(e,n);if(this.el=O_.createElement(l,r),wp.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=wp.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(vX)){const h=u[o++],f=s.getAttribute(d).split(Yd),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?A8e:p[1]==="?"?S8e:p[1]==="@"?I8e:oT}),s.removeAttribute(d)}else d.startsWith(Yd)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(_X.test(s.tagName)){const d=s.textContent.split(Yd),h=d.length-1;if(h>0){s.textContent=XI?XI.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],R_()),wp.nextNode(),c.push({type:2,index:++i});s.append(d[h],R_())}}}else if(s.nodeType===8)if(s.data===EX)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(Yd,d+1))!==-1;)c.push({type:7,index:i}),d+=Yd.length-1}i++}}static createElement(e,n){const r=Mg.createElement("template");return r.innerHTML=e,r}}function I0(t,e,n=t,r){var o,a;if(e===S0)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=P_(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=I0(t,s._$AS(t,e.values),s,r)),e}class C8e{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??Mg).importNode(n,!0);wp.currentNode=s;let i=wp.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new XC(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new x8e(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=wp.nextNode(),o++)}return wp.currentNode=Mg,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class XC{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=ls,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=I0(this,e,n),P_(e)?e===ls||e==null||e===""?(this._$AH!==ls&&this._$AR(),this._$AH=ls):e!==this._$AH&&e!==S0&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):E8e(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==ls&&P_(this._$AH)?this._$AA.nextSibling.data=e:this.T(Mg.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=O_.createElement(AX(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new C8e(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=g9.get(e.strings);return n===void 0&&g9.set(e.strings,n=new O_(e)),n}k(e){yU(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new XC(this.O(R_()),this.O(R_()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class oT{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=ls,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=ls}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=I0(this,e,n,0),o=!P_(e)||e!==this._$AH&&e!==S0,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=I0(this,a[r+c],n,c),l===S0&&(l=this._$AH[c]),o||(o=!P_(l)||l!==this._$AH[c]),l===ls?e=ls:e!==ls&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===ls?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class A8e extends oT{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===ls?void 0:e}}class S8e extends oT{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==ls)}}class I8e extends oT{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=I0(this,e,n,0)??ls)===S0)return;const r=this._$AH,s=e===ls&&r!==ls||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==ls&&(r===ls||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class x8e{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){I0(this,e)}}const pO=rE.litHtmlPolyfillSupport;pO==null||pO(O_,XC),(rE.litHtmlVersions??(rE.litHtmlVersions=[])).push("3.3.1");const N8e=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new XC(e.insertBefore(R_(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const rg=globalThis;let gS=class extends ty{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=N8e(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return S0}};var gz;gS._$litElement$=!0,gS.finalized=!0,(gz=rg.litElementHydrateSupport)==null||gz.call(rg,{LitElement:gS});const gO=rg.litElementPolyfillSupport;gO==null||gO({LitElement:gS});(rg.litElementVersions??(rg.litElementVersions=[])).push("4.2.1");let sE,Xh,ef;function iVe(t,e){sE=document.createElement("style"),Xh=document.createElement("style"),ef=document.createElement("style"),sE.textContent=zy(t).core.cssText,Xh.textContent=zy(t).dark.cssText,ef.textContent=zy(t).light.cssText,document.head.appendChild(sE),document.head.appendChild(Xh),document.head.appendChild(ef),SX(e)}function SX(t){Xh&&ef&&(t==="light"?(Xh.removeAttribute("media"),ef.media="enabled"):(ef.removeAttribute("media"),Xh.media="enabled"))}function T8e(t){sE&&Xh&&ef&&(sE.textContent=zy(t).core.cssText,Xh.textContent=zy(t).dark.cssText,ef.textContent=zy(t).light.cssText)}function zy(t){return{core:Gu`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${na(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${na((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${na((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${na((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${na((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Gu`
      :root {
        --w3m-color-mix: ${na((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${na(Uu(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${na(Uu(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Gu`
      :root {
        --w3m-color-mix: ${na((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${na(Uu(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${na(Uu(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const oVe=Gu`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,aVe=Gu`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,cVe=Gu`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,mv={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},IX=Vpe({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function e1(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const m9=e1({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),y9=e1({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});e1({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});e1({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});e1({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const R8e={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},mS={getMethodsByChainNamespace(t){return R8e[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case m9.caipNetworkId:u.chains.push(m9.deprecatedCaipNetworkId);break;case y9.caipNetworkId:u.chains.push(y9.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await Yv.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};let xX=class{constructor({provider:e,namespace:n}){this.id=ze.CONNECTOR_ID.WALLET_CONNECT,this.name=UI.ConnectorNamesMap[ze.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=UI.ConnectorImageIds[ze.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=z.getCaipNetworks.bind(z),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=ve.state.universalProviderConfigOverride,s=mS.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Zv.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:P8e})}};const P8e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];let O8e=class{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>z.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:ze.CONNECTOR_ID.AUTH,type:"AUTH",name:ze.CONNECTOR_NAMES.AUTH,provider:e,imageId:UI.ConnectorImageIds[ze.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){Qe.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=Qe.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof xX);if(!e)throw new Error("WalletConnectConnector not found");return e}};class k8e extends O8e{setUniversalProvider(e){this.addConnector(new xX({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>ot.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&Pn.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(Qe.state.balanceLoading&&e.chainId===((c=z.state.activeCaipNetwork)==null?void 0:c.id))return{balance:Qe.state.balance||"0.00",symbol:Qe.state.balanceSymbol||""};const s=(await Qe.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=z.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===ze.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:_J.encode(new TextEncoder().encode(r)),pubkey:s}},(a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=z.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===ze.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:Ia(n.id)}]}))}catch(u){if(u.code===mv.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===mv.ERROR_INVALID_CHAIN_ID||u.code===mv.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===mv.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:Ia(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const D8e=["email","socials","swaps","onramp","activity","reownBranding"],vA={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?Pn.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?Pn.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?Pn.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Pn.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?Pn.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Pn.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?Pn.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Pn.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Pn.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},L8e={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=vA[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=vA[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return vA[t].processApi(e)},processFallbackFeature(t,e){return vA[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await at.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?Pn.DEFAULT_REMOTE_FEATURES:Pn.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of D8e){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),Pn.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;bl.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class M8e{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=z.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=z.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=z.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return z.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>z.getCaipNetworks(n),this.getActiveChainNamespace=()=>z.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{z.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>z.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>z.state.activeChain===n||!n?z.state.activeCaipAddress:z.getAccountProp("caipAddress",n),this.setClientId=n=>{pt.setClientId(n)},this.getProvider=n=>Tn.getProvider(n),this.getProviderType=n=>Tn.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=Qe.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{Qe.setCaipAddress(n,r),n&&ve.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{Qe.setBalance(n,r,s)},this.setProfileName=(n,r)=>{Qe.setProfileName(n,r)},this.setProfileImage=(n,r)=>{Qe.setProfileImage(n,r)},this.setUser=(n,r)=>{Qe.setUser(n,r)},this.resetAccount=n=>{Qe.resetAccount(n)},this.setCaipNetwork=n=>{z.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{z.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{Qe.setAllAccounts(n,r),ve.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{Qe.setStatus(n,r),je.isConnected()?Je.setConnectionStatus("connected"):Je.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>z.getAccountProp("address",n),this.setConnectors=n=>{const r=[...je.state.allConnectors,...n];je.setConnectors(r)},this.setConnections=(n,r)=>{gt.setConnections(n,r)},this.fetchIdentity=n=>pt.fetchIdentity(n),this.getReownName=n=>Yv.getNamesForAddress(n),this.getConnectors=()=>je.getConnectors(),this.getConnectorImage=n=>xQ.getConnectorImage(n),this.setConnectedWalletInfo=(n,r)=>{const s=Tn.getProviderId(r),i=n?{...n,type:s}:void 0;Qe.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!z.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{Qe.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{Qe.removeAddressLabel(n,r)},this.getAddress=n=>z.state.activeChain===n||!n?Qe.state.address:z.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>z.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{z.resetNetwork(n)},this.addConnector=n=>{je.addConnector(n)},this.resetWcConnection=()=>{gt.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{Qe.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{Qe.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{z.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{Qe.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{ve.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await L8e.fetchRemoteFeatures(e),ve.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&SD.setOnrampProviders(this.remoteFeatures.onramp),((n=ve.state.remoteFeatures)!=null&&n.email||Array.isArray((r=ve.state.remoteFeatures)==null?void 0:r.socials)&&((s=ve.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){const e=await at.fetchAllowedOrigins();if(e&&ot.isClient()){const n=window.location.origin;mS.isOriginAllowed(n,e,mv.DEFAULT_ALLOWED_ANCESTORS)||bl.open(hl.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else bl.open(hl.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,ir.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Hi.setThemeMode(e.themeMode),e.themeVariables&&Hi.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");z.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&z.setActiveCaipNetwork(n)}initializeConnectionController(e){gt.setWcBasic(e.basic??!1)}initializeConnectorController(){je.initialize(this.chainNamespaces)}initializeProjectSettings(e){ve.setProjectId(e.projectId),ve.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;ve.setDebug(e.debug!==!1),ve.setEnableWalletConnect(e.enableWalletConnect!==!1),ve.setEnableWalletGuide(e.enableWalletGuide!==!1),ve.setEnableWallets(e.enableWallets!==!1),ve.setEIP6963Enabled(e.enableEIP6963!==!1),ve.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),ve.setEnableAuthLogger(e.enableAuthLogger!==!1),ve.setCustomRpcUrls(e.customRpcUrls),ve.setEnableEmbedded(e.enableEmbedded),ve.setAllWallets(e.allWallets),ve.setIncludeWalletIds(e.includeWalletIds),ve.setExcludeWalletIds(e.excludeWalletIds),ve.setFeaturedWalletIds(e.featuredWalletIds),ve.setTokens(e.tokens),ve.setTermsConditionsUrl(e.termsConditionsUrl),ve.setPrivacyPolicyUrl(e.privacyPolicyUrl),ve.setCustomWallets(e.customWallets),ve.setFeatures(e.features),ve.setAllowUnsupportedChain(e.allowUnsupportedChain),ve.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),ve.setPreferUniversalLinks(e.experimental_preferUniversalLinks),ve.setDefaultAccountTypes(e.defaultAccountTypes);const n=Je.getPreferredAccountTypes()||{},r={...ve.state.defaultAccountTypes,...n};Qe.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),ve.setMetadata(e.metadata),ve.setDisableAppend(e.disableAppend),ve.setEnableEmbedded(e.enableEmbedded),ve.setSIWX(e.siwx),!e.projectId){bl.open(hl.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===ze.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");ve.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return ot.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=Zm.getUnsupportedNetwork(`${n}:${e}`);z.setActiveCaipNetwork(r)}}getDefaultNetwork(){return Zm.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return Zm.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return Zm.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?Zm.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=Tn.getProvider(e),s=Tn.getProviderId(e),{caipAddress:i}=z.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),Je.removeConnectedNamespace(e),Tn.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),je.removeConnectorId(e),z.resetAccount(e),z.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=z.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),Je.setConnectedNamespaces([...z.state.chains.keys()]),this.chainNamespaces.forEach(o=>{je.setConnectorId(Gi.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,y,m,w,v,A;const c=z.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const C=this.getCaipNetworks().find(S=>S.chainNamespace===i);C&&this.setCaipNetwork(C)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((m=(y=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:y.http)==null?void 0:m[0])||((A=(v=(w=d==null?void 0:d.rpcUrls)==null?void 0:w.default)==null?void 0:v.http)==null?void 0:A[0])});if(!h)return;Je.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=Qe.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=z.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),Je.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{const n=MRe(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));gn.resetSend(),gt.resetWcConnection(),await Zv.clearSessions(),je.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));Je.deleteConnectedSocialProvider(),ir.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(z.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:Qe.state.address,provider:Tn.getProvider(z.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(Pn.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(z.state.activeChain),s=Tn.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===ze.CHAIN.EVM){const n=this.getAdapter(z.state.activeChain),r=Tn.getProvider(z.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:Qe.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:z.state.activeChain}),Qe.state.profileImage||!1},getEnsAddress:async e=>await mS.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(z.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=Tn.getProvider(z.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(z.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(z.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(z.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(z.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(z.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(z.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!Qe.state.address||this.updateNativeBalance(Qe.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},gt.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(Tn.getProviderId(z.state.activeChain)===Gi.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=Tn.getProvider(n),i=Tn.getProviderId(n);if(e.chainNamespace===z.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===Gi.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=Ed.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new k8e({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=Je.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(Je.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=z.state.activeChain===e,c=z.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=Qe.state.address,i=z.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=z.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=z.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=z.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===ze.CHAIN.EVM&&ot.isSafeApp()&&je.setConnectorId(ze.CONNECTOR_ID.SAFE,e);const n=je.getConnectorId(e);switch(this.setStatus("connecting",e),n){case ze.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case ze.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=je.getConnectorId(e),s=this.getCaipNetwork(e),o=je.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([ot.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async n=>{var a,c,l,u,d;const r=this.getAdapter(n),s=((u=(l=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:l[n])==null?void 0:u.accounts)||[],i=(d=z.state.activeCaipNetwork)==null?void 0:d.id,o=s.find(h=>{const{chainId:f}=Ed.parseCaipAddress(h);return f===(i==null?void 0:i.toString())})||s[0];if(o){const h=Ed.validateCaipAddress(o),{chainId:f,address:p}=Ed.parseCaipAddress(h);if(Tn.setProviderId(n,Gi.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&z.state.activeCaipNetwork&&(r==null?void 0:r.namespace)!==ze.CHAIN.EVM){const g=r==null?void 0:r.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:z.state.activeCaipNetwork});Tn.setProvider(n,g)}else Tn.setProvider(n,this.universalProvider);je.setConnectorId(ze.CONNECTOR_ID.WALLET_CONNECT,n),Je.addConnectedNamespace(n),this.syncWalletConnectAccounts(n),await this.syncAccount({address:p,chainId:f,chainNamespace:n})}else this.setStatus("disconnected",n);this.syncConnectedWalletInfo(n),await z.setApprovedCaipNetworksData(n)});await Promise.all(e)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=Ed.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>ot.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){Tn.setProviderId(s,e),Tn.setProvider(s,n),je.setConnectorId(r,s)}async syncAllAccounts(e){const n=je.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===z.state.activeChain,r=z.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=Je.getActiveNetworkProps(),c=i||a,l=((d=z.state.activeCaipNetwork)==null?void 0:d.name)===ze.UNSUPPORTED_NETWORK_NAME,u=z.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(y=>y.id.toString()===c.toString()),p=this.getCaipNetworks().find(y=>y.chainNamespace===o);if(!u&&!f&&!p){const y=this.getApprovedCaipNetworkIds()||[],m=y.find(v=>{var A;return((A=Ed.parseCaipNetworkId(v))==null?void 0:A.chainId)===c.toString()}),w=y.find(v=>{var A;return((A=Ed.parseCaipNetworkId(v))==null?void 0:A.chainNamespace)===o});f=this.getCaipNetworks().find(v=>v.caipNetworkId===m),p=this.getCaipNetworks().find(v=>v.caipNetworkId===w||"deprecatedCaipNetworkId"in v&&v.deprecatedCaipNetworkId===w)}const g=f||p;(g==null?void 0:g.chainNamespace)===z.state.activeChain?ve.state.enableNetworkSwitch&&!ve.state.allowUnsupportedChain&&((h=z.state.activeCaipNetwork)==null?void 0:h.name)===ze.UNSUPPORTED_NETWORK_NAME?z.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),YN.isLowerCaseMatch(s,Qe.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=je.getConnectorId(e),r=Tn.getProviderId(e);if(r===Gi.CONNECTOR_TYPE_ANNOUNCED||r===Gi.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===Gi.CONNECTOR_TYPE_WALLET_CONNECT){const i=Tn.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===ze.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===ze.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!CQ.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=z.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=BRe.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};ve.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await u8e.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{gt.setUri(e)}),this.universalProvider.on("connect",gt.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),gt.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(mS.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&ot.isCaipAddress(r[0])&&this.syncAccount(Ed.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&ot.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){ir.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(hl.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=hl.ALERT_ERRORS[o];a&&(bl.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&gt.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return us.open({...e,data:{swap:e.arguments}})}return us.open(e)}async close(){await this.injectModalUi(),us.close()}setLoading(e,n){us.setLoading(e,n)}async disconnect(e){await gt.disconnect(e)}getSIWX(){return ve.state.siwx}getError(){return""}getChainId(){var e;return(e=z.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){bl.open(hl.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await z.switchActiveNetwork(n)}getWalletProvider(){return z.state.activeChain?Tn.state.providers[z.state.activeChain]:null}getWalletProviderType(){return Tn.getProviderId(z.state.activeChain)}subscribeProviders(e){return Tn.subscribeProviders(e)}getThemeMode(){return Hi.state.themeMode}getThemeVariables(){return Hi.state.themeVariables}setThemeMode(e){Hi.setThemeMode(e),SX(Hi.state.themeMode)}setTermsConditionsUrl(e){ve.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){ve.setPrivacyPolicyUrl(e)}setThemeVariables(e){Hi.setThemeVariables(e),T8e(Hi.state.themeVariables)}subscribeTheme(e){return Hi.subscribe(e)}getWalletInfo(){return Qe.state.connectedWalletInfo}getAccount(e){var o;const n=je.getAuthConnector(e),r=z.getAccountData(e),s=z.state.activeChain,i=Je.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:ot.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===ze.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:Je.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?z.subscribeChainProp("accountState",r,n):z.subscribe(r),je.subscribe(r)}subscribeNetwork(e){return z.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e){return Qe.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Qe.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){z.subscribeKey("activeCaipNetwork",e)}getState(){return Nl.state}subscribeState(e){return Nl.subscribe(e)}showErrorMessage(e){pc.showError(e)}showSuccessMessage(e){pc.showSuccess(e)}getEvent(){return{...ir.state}}subscribeEvents(e){return ir.subscribe(e)}replace(e){Mt.replace(e)}redirect(e){Mt.push(e)}popTransactionStack(e){Mt.popTransactionStack(e)}isOpen(){return us.state.open}isTransactionStackEmpty(){return Mt.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){ve.setFeatures(e)}updateRemoteFeatures(e){ve.setRemoteFeatures(e)}updateOptions(e){const r={...ve.state||{},...e};ve.setOptions(r)}setConnectMethodsOrder(e){ve.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){ve.setWalletFeaturesOrder(e)}setCollapseWallets(e){ve.setCollapseWallets(e)}setSocialsOrder(e){ve.setSocialsOrder(e)}getConnectMethodsOrder(){return v3.getConnectOrderMethod(ve.state.features,je.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||z.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&z.removeNetwork(e,n)}}let w9=!1;class U8e extends M8e{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{Po.checkIfRequestExists(n)?Po.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(Ps.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(Ps.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=Po.checkIfRequestIsSafe(r),i=Qe.state.address,o=z.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=z.state.activeChain;je.getConnectorId(n)===ze.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=z.state.activeChain,s=r===ze.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=ve.state.defaultAccountTypes[r],o=(l=Qe.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;YN.isLowerCaseMatch(n.address,Qe.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...Qe.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>ot.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[ot.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...Qe.state.user||{},username:n},z.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,z.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,z.state.activeChain)})}async syncAuthConnector(e,n){var u,d,h,f;const r=ze.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!r)return;this.setLoading(!0,n);const s=e.getLoginEmailUsed();this.setLoading(s,n),s&&this.setStatus("connecting",n);const i=e.getEmail(),o=e.getUsername();this.setUser({...((u=Qe.state)==null?void 0:u.user)||{},username:o,email:i},n),this.setupAuthConnectorListeners(e);const{isConnected:a}=await e.isConnected(),c=Hi.getSnapshot(),l=ve.getSnapshot();await Promise.all([e.syncDappData({metadata:l.metadata,sdkVersion:l.sdkVersion,projectId:l.projectId,sdkType:l.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:Uu(c.themeVariables,c.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&(a&&((d=this.connectionControllerClient)!=null&&d.connectExternal)?(await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:ze.CONNECTOR_ID.AUTH,info:{name:ze.CONNECTOR_ID.AUTH},type:Gi.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=z.state.activeCaipNetwork)==null?void 0:h.id,chain:n})),this.setStatus("connected",n)):je.getConnectorId(n)===ze.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),Je.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!ot.isTelegram())return;const r=Je.getTelegramSocialProvider();if(!r||!ot.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;Qe.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=je.getAuthConnector();r&&o&&(this.setLoading(!0,e),await gt.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),Je.setConnectedSocialProvider(r),Je.removeTelegramSocialProvider(),ir.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var o,a,c,l;if(!ze.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(o=this.remoteFeatures)==null?void 0:o.email,s=Array.isArray((a=this.remoteFeatures)==null?void 0:a.socials)&&this.remoteFeatures.socials.length>0,i=r||s;!this.authProvider&&((c=this.options)!=null&&c.projectId)&&i&&(this.authProvider=a2e.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(l=this.getCaipNetwork(e))==null?void 0:l.caipNetworkId,abortController:hl.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?bl.open(hl.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?bl.open(hl.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&bl.open(hl.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),Nl.subscribeOpen(u=>{var d;!u&&this.isTransactionStackEmpty()&&((d=this.authProvider)==null||d.rejectRpcRequests())}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&at.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=z.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=Tn.getProvider(r),u=Tn.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=Tn.getProviderId(n)===Gi.CONNECTOR_TYPE_AUTH,u=Tn.getProviderId(r),d=u===Gi.CONNECTOR_TYPE_AUTH,h=ze.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(z.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:ze.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:Gi.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===Gi.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Nl.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==ze.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=Tn.getProviderId(e);if(n===Gi.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=Je.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(ot.isClient()&&!w9)try{const e={...Pn.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),ot.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!ve.state.disableAppend&&!ve.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}w9=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!ot.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(Ks(()=>import("./embedded-wallet-Cp-U_w5l.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),n.email&&r.push(Ks(()=>import("./email-BWuz29Gt.js"),__vite__mapDeps([12,1,11,5,10,4,9,13,6]))),n.socials&&r.push(Ks(()=>import("./socials-JPXzS7Ta.js"),__vite__mapDeps([14,1,15,4,16,17,10,18,9,5,11,19,3,20]))),n.swaps&&n.swaps.length>0&&r.push(Ks(()=>import("./swaps-BdfhJFFz.js"),__vite__mapDeps([21,1,9,5,22,23,24,3,10,20,6,4]))),e.send&&r.push(Ks(()=>import("./send-B0qPBZzV.js"),__vite__mapDeps([25,1,9,5,10,4,16,11,24,3,6,26,27]))),e.receive&&r.push(Ks(()=>import("./receive-C7Ol-CFB.js"),__vite__mapDeps([28,1,29,3,19]))),n.onramp&&n.onramp.length>0&&r.push(Ks(()=>import("./onramp-7YyKg0km.js"),__vite__mapDeps([30,1,31,20,10,3,5,32,15,4,16,33,11,9,18,6]))),n.activity&&r.push(Ks(()=>import("./transactions-CPh_maBY.js"),__vite__mapDeps([34,1,35,31,20,10,11,3]))),e.pay&&r.push(Ks(()=>import("./index-Bm4oFhsl.js"),__vite__mapDeps([36,1,9,5,37,3,10,7,32,27,18]))),await Promise.all([...r,Ks(()=>import("./index-D3QCbtPl.js"),__vite__mapDeps([38,1,3,5,26,10,39,23,7,32,9,8,37,35,31,20,11,22,4,6,27,13,15,16,17,2,18,29,19,33])),Ks(()=>import("./w3m-modal-C4HywVsS.js"),__vite__mapDeps([40,1,7,3,10,8,5,23,39]))])}}let Ud;function $8e(t){t&&(Ud=t)}function aT(){if(!Ud)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(Ud==null?void 0:Ud.open(n))}async function e(){await(Ud==null?void 0:Ud.close())}return{open:t,close:e}}const B8e="1.7.8";let EA;function F8e(t){return EA||(EA=new U8e({...t,sdkVersion:ot.generateSdkVersion(t.adapters??[],"react",B8e)}),$8e(EA)),EA}const j8e=Pc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),b9=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],z8e=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=j8e({isOpen:t}),{open:i}=aT(),o=D.useRef(null),[a,c]=D.useState([]),[l,u]=D.useState(!0),[d,h]=D.useState(null),[f,p]=D.useState("all"),[g,y]=D.useState(1),[m,w]=D.useState(1),[v,A]=D.useState(0),[C,S]=D.useState(null),[x,T]=D.useState(b9[0]),[I,k]=D.useState(!1),[O,B]=D.useState(null),G=D.useCallback(async()=>{var L,F;try{if((L=window.solana)!=null&&L.isPhantom){const q=await window.solana.connect();B(q.publicKey.toString());return}if((F=window.solflare)!=null&&F.isSolflare){const q=await window.solflare.connect();B(q.publicKey.toString());return}i()}catch(q){console.error("Failed to connect Solana wallet:",q),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}k(!1)},[i]);D.useEffect(()=>{var L,F;(L=window.solana)!=null&&L.publicKey?B(window.solana.publicKey.toString()):(F=window.solflare)!=null&&F.publicKey&&B(window.solflare.publicKey.toString())},[]),D.useEffect(()=>{t&&(async()=>{var F;u(!0),h(null);try{let q,ne=f==="owned"&&r||void 0;if(x.api==="opensea-solana"){if(f==="owned"&&!O){k(!0),u(!1);return}ne=O||void 0,q=await _Q(x.slug,50),console.log("Fetched Solana NFTs from collection:",q.data.length),f==="owned"&&O&&(console.log("Filtering for owner:",O),console.log("Sample NFT owner data:",(F=q.data[0])==null?void 0:F.owners),console.log("All NFTs owner data:",q.data.map(ie=>({name:ie.name,owners:ie.owners,owner_of:ie.owner_of}))),q.data.some(ie=>ie.owners&&ie.owners.length>0)?(q.data=q.data.filter(ie=>{const re=ie.owners.some(ye=>ye.owner_of&&ye.owner_of.toLowerCase()===O.toLowerCase());return re&&console.log("Found owned NFT:",ie.name),re}),console.log("NFTs after filtering:",q.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else x.api==="opensea"?q=await WM(x.slug,50,ne):q=await zM(x.slug,g,50,ne);c(q.data),w(q.totalPages),A(q.totalCount)}catch(q){q instanceof Error?h(q.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,x,O]),D.useEffect(()=>{I&&G()},[I,G]);const W=L=>new Date(L).toLocaleDateString(),R=L=>x.api==="opensea-solana"&&(!L.owners||L.owners.length===0)?"Owner data unavailable":L.owners.length>0?`${L.owners[0].owner_of.substring(0,6)}...`:"N/A",N=()=>{n&&n()},M=async L=>{if(x.api==="opensea"&&x.chain)try{const F=await EQ(x.chain,L.address,L.token_id.toString()),q={...L,attributes:JSON.stringify(F.traits||[])};S(q)}catch(F){console.error("Failed to fetch full NFT details",F),S(L)}else S(L)},P=L=>{T(L),y(1)};return t?b.jsxs(b.Fragment,{children:[b.jsx(UC,{nodeRef:o,handle:`.${s.header}`,children:b.jsxs("div",{ref:o,className:s.popup,children:[b.jsxs("div",{className:s.header,children:[b.jsx("span",{children:"LAWB NFT GALLERY"}),b.jsxs("div",{className:s.titleBarButtons,children:[b.jsx("button",{className:s.titleBarButton,onClick:N,title:"Minimize",children:"_"}),b.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),b.jsx("div",{className:s.collectionSelector,children:b9.map(L=>b.jsx("button",{className:`${s.collectionButton} ${x.slug===L.slug?"active":""}`,onClick:()=>P(L),children:L.name},L.slug))}),b.jsxs("div",{className:s.content,children:[b.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[b.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),b.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),b.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!O,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||O?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||O?1:.6},children:"My NFTs"}),x.api==="opensea-solana"&&b.jsx("button",{onClick:()=>{G()},style:{background:O?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:O?"white":"black",marginLeft:"auto"},children:O?`Solana: ${O.slice(0,4)}...${O.slice(-4)}`:"Connect Solana"})]}),x.api==="opensea-solana"&&!O&&b.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&b.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?b.jsx("div",{children:"Loading NFTs..."}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${v} total)`,f==="recent"&&`Recently minted NFTs by ${x.api==="opensea-solana"?(O==null?void 0:O.slice(0,6))+"..."+(O==null?void 0:O.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${x.api==="opensea-solana"?(O==null?void 0:O.slice(0,6))+"..."+(O==null?void 0:O.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?b.jsx("div",{children:"No NFTs found."}):b.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map(L=>b.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{M(L)},children:[b.jsx("div",{style:{width:"100%",height:"150px",backgroundImage:`url(${L.image_url})`,backgroundSize:"cover",backgroundPosition:"center",marginBottom:"10px",border:"1px solid #ccc"}}),b.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:b.jsxs("strong",{children:["#",L.token_id]})}),b.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",R(L)]}),b.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",W(L.created_at)]})]},L.id))}),f!=="recent"&&m>1&&b.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[b.jsx("button",{onClick:()=>y(L=>Math.max(1,L-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),b.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",m]}),b.jsx("button",{onClick:()=>y(L=>Math.min(m,L+1)),disabled:g===m,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===m?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),C&&b.jsx(r1e,{nft:C,onClose:()=>S(null)})]}):null};var _A,W8e=new Uint8Array(16);function H8e(){if(!_A&&(_A=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!_A))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _A(W8e)}const G8e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function q8e(t){return typeof t=="string"&&G8e.test(t)}var Es=[];for(var mO=0;mO<256;++mO)Es.push((mO+256).toString(16).substr(1));function V8e(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Es[t[e+0]]+Es[t[e+1]]+Es[t[e+2]]+Es[t[e+3]]+"-"+Es[t[e+4]]+Es[t[e+5]]+"-"+Es[t[e+6]]+Es[t[e+7]]+"-"+Es[t[e+8]]+Es[t[e+9]]+"-"+Es[t[e+10]]+Es[t[e+11]]+Es[t[e+12]]+Es[t[e+13]]+Es[t[e+14]]+Es[t[e+15]]).toLowerCase();if(!q8e(n))throw TypeError("Stringified UUID is invalid");return n}function K8e(t,e,n){t=t||{};var r=t.random||(t.rng||H8e)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,V8e(r)}const Y8e=Pc({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000",textTransform:"uppercase"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),Q8e=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}],J8e=["/images/sticker1.png","/images/sticker2.png","/images/sticker3.png","/images/sticker4.png","/images/sticker5.png"],go=500;function NX(){const t=Y8e(),e=D.useRef(null),[n,r]=D.useState(null),[s,i]=D.useState(""),[o,a]=D.useState(""),[c,l]=D.useState(36),[u,d]=D.useState(36),[h,f]=D.useState(!1),[p,g]=D.useState(!1),[y,m]=D.useState(!1),[w,v]=D.useState(!1),[A,C]=D.useState(!1),[S,x]=D.useState([]),[T,I]=D.useState(null),k=D.useRef(null),[O,B]=D.useState(null),G=async Z=>{const oe=Z.getContext("2d");if(!oe)return;oe.clearRect(0,0,Z.width,Z.height),n?await new Promise(de=>{const be=new window.Image;be.crossOrigin="anonymous",be.onload=()=>{const We=Math.min(Z.width/be.width,Z.height/be.height),_e=(Z.width-be.width*We)/2,Ae=(Z.height-be.height*We)/2;oe.drawImage(be,_e,Ae,be.width*We,be.height*We),de()},be.onerror=()=>de(),be.src=n}):(oe.fillStyle="#333",oe.fillRect(0,0,Z.width,Z.height)),(de=>{de.textAlign="center",de.strokeStyle="black",de.lineWidth=3,de.fillStyle="white";const be=(We,_e)=>{const Ae=We.toUpperCase().split(" "),tt=[];let Se=Ae[0];for(let Gt=1;Gt<Ae.length;Gt++){const sn=Ae[Gt];de.measureText(Se+" "+sn).width<_e?Se+=" "+sn:(tt.push(Se),Se=sn)}return tt.push(Se),tt};s&&(de.font=`${c}px Impact`,be(s,go-20).forEach((_e,Ae)=>{const tt=c+Ae*c*1.2;de.strokeText(_e,go/2,tt),de.fillText(_e,go/2,tt)})),o&&(de.font=`${u}px Impact`,be(o,go-20).reverse().forEach((_e,Ae)=>{const tt=go-u*1.2*(Ae+1);de.strokeText(_e,go/2,tt),de.fillText(_e,go/2,tt)}))})(oe),await Promise.all(S.map(de=>new Promise(be=>{const We=new window.Image;We.src=de.src,We.onload=()=>{oe.save(),oe.translate(de.x,de.y),oe.rotate(de.rotation*Math.PI/180),oe.scale(de.scale,de.scale),oe.drawImage(We,-40,-40,80,80),oe.restore(),be()},We.onerror=()=>be()})));try{h&&W(Z),p&&R(Z),y&&N(Z)}catch(de){console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead.",de),f(!1),g(!1),m(!1)}},W=Z=>{const oe=Z.getContext("2d");if(!oe)return;const he=oe.getImageData(0,0,Z.width,Z.height),de=he.data;for(let be=0;be<de.length;be+=4){const We=de[be],_e=de[be+1],Ae=de[be+2],tt=(We+_e+Ae)/3,Se=1.8;de[be]=Math.min(255,tt+(We-tt)*Se),de[be+1]=Math.min(255,tt+(_e-tt)*Se*.7),de[be+2]=Math.min(255,tt+(Ae-tt)*Se*.4);const Gt=1.3;de[be]=Math.min(255,Math.max(0,de[be]*Gt)),de[be+1]=Math.min(255,Math.max(0,de[be+1]*Gt)),de[be+2]=Math.min(255,Math.max(0,de[be+2]*Gt))}oe.putImageData(he,0,0)},R=Z=>{const oe=Z.getContext("2d");if(!oe)return;const he=4,be=oe.getImageData(0,0,Z.width,Z.height).data,We=new Uint8ClampedArray(be);for(let _e=0;_e<Z.height;_e+=he)for(let Ae=0;Ae<Z.width;Ae+=he){const tt=(_e*Z.width+Ae)*4,Se=be[tt],Gt=be[tt+1],sn=be[tt+2],Me=be[tt+3];for(let kt=0;kt<he&&_e+kt<Z.height;kt++)for(let nr=0;nr<he&&Ae+nr<Z.width;nr++){const Dn=((_e+kt)*Z.width+(Ae+nr))*4;We[Dn]=Se,We[Dn+1]=Gt,We[Dn+2]=sn,We[Dn+3]=Me}}oe.putImageData(new ImageData(We,Z.width,Z.height),0,0)},N=Z=>{const oe=Z.getContext("2d");if(!oe)return;const he=oe.getImageData(0,0,Z.width,Z.height),de=he.data;for(let be=0;be<de.length;be+=4){const We=(Math.random()-.5)*50;de[be]=Math.max(0,Math.min(255,de[be]+We)),de[be+1]=Math.max(0,Math.min(255,de[be+1]+We)),de[be+2]=Math.max(0,Math.min(255,de[be+2]+We))}oe.putImageData(he,0,0)};D.useEffect(()=>{e.current&&G(e.current)},[G]);const M=Z=>{var he;const oe=(he=Z.target.files)==null?void 0:he[0];oe&&r(URL.createObjectURL(oe))},P=()=>{r(null),i(""),a(""),l(36),d(36),f(!1),g(!1),m(!1)},L=async()=>{const Z=e.current;if(!Z)return;await G(Z);const oe=document.createElement("a");oe.download="meme.png",oe.href=Z.toDataURL("image/png"),document.body.appendChild(oe),oe.click(),document.body.removeChild(oe)},F=async Z=>{C(!0),v(!1);try{console.log("Fetching NFTs for collection:",Z);let oe;if(Z.api==="opensea"){console.log("Using OpenSea API for:",Z.slug);const he=await WM(Z.slug,50);oe=he.data,console.log("OpenSea response:",he)}else if(Z.api==="opensea-solana"){console.log("Using OpenSea Solana API for:",Z.slug);const he=await _Q(Z.slug,50);oe=he.data,console.log("OpenSea Solana response:",he)}else{console.log("Using Scatter API for:",Z.slug);const he=await zM(Z.slug,1,50);oe=he.data,console.log("Scatter response:",he)}if(oe&&oe.length>0){const he=oe[Math.floor(Math.random()*oe.length)],de=he.image||he.image_url||he.image_url_shrunk;console.log("Selected NFT:",he),console.log("Image URL:",de),r(de)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(oe){console.error("Error fetching NFTs:",oe),alert("Failed to fetch NFT images. Check console for details.")}finally{C(!1)}},q=Z=>{const oe={id:K8e(),src:Z,x:80,y:80,scale:1,rotation:0};x(he=>he.length>=2||he.some(de=>de.src===Z&&!de.id.startsWith("upload-"))?he:[...he,oe]),B(oe.id)},ne=Z=>{var he;const oe=(he=Z.target.files)==null?void 0:he[0];if(oe){const de=URL.createObjectURL(oe);q(de)}},le=(Z,oe,he)=>{x(de=>de.map(be=>{if(be.id!==Z)return be;let We=be.x+oe/1.2,_e=be.y+he/1.2;const Ae=40*be.scale,tt=40*be.scale;return We=Math.max(Ae,Math.min(go-Ae,We)),_e=Math.max(tt,Math.min(go-tt,_e)),{...be,x:We,y:_e}}))},ie=(Z,oe,he,de,be)=>{x(We=>We.map(_e=>{if(_e.id!==Z)return _e;const Ae=_e.x,tt=_e.y,Se=Math.atan2(be-tt,de-Ae)*180/Math.PI;return{..._e,rotation:he+(Se-oe)*.5}}))},re=Z=>{x(oe=>oe.filter(he=>he.id!==Z))},ye=(Z,oe)=>{x(he=>he.map(de=>de.id===Z?{...de,scale:Math.max(.2,de.scale*(1+(oe-1)*.2))}:de))};return b.jsxs("div",{className:t.container,children:[b.jsxs("div",{className:t.header,children:[b.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),b.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",b.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),b.jsxs("div",{className:t.content,children:[b.jsxs("div",{className:t.section,children:[b.jsx("div",{className:t.sectionTitle,children:"Collections"}),b.jsxs("div",{className:t.row,children:[b.jsxs("div",{className:t.dropdown,children:[b.jsx("button",{className:t.button,onClick:()=>v(Z=>!Z),children:"Collections"}),w&&b.jsx("div",{className:t.dropdownContent,children:Q8e.map(Z=>b.jsx("div",{className:t.dropdownItem,onClick:()=>{F(Z)},children:Z.name},Z.id))})]}),b.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",b.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:M})]}),A&&b.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),b.jsxs("div",{className:t.section,children:[b.jsx("div",{className:t.sectionTitle,children:"Text"}),b.jsxs("div",{className:t.row,children:[b.jsx("span",{className:t.label,children:"Top Text:"}),b.jsx("input",{className:t.input,type:"text",value:s,onChange:Z=>i(Z.target.value),placeholder:"Enter top text..."}),b.jsx("span",{className:t.label,children:"Size:"}),b.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:Z=>l(Number(Z.target.value)),style:{width:60,textAlign:"center"}})]}),b.jsxs("div",{className:t.row,children:[b.jsx("span",{className:t.label,children:"Bottom Text:"}),b.jsx("input",{className:t.input,type:"text",value:o,onChange:Z=>a(Z.target.value),placeholder:"Enter bottom text..."}),b.jsx("span",{className:t.label,children:"Size:"}),b.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:Z=>d(Number(Z.target.value)),style:{width:60,textAlign:"center"}})]})]}),b.jsxs("div",{className:t.section,children:[b.jsx("div",{className:t.sectionTitle,children:"Effects"}),b.jsxs("div",{className:t.row,children:[b.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(Z=>!Z),children:"Deep Fry"}),b.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(Z=>!Z),children:"Pixelate"}),b.jsx("button",{className:t.effectButton,style:{background:y?"#00ffff":void 0},onClick:()=>m(Z=>!Z),children:"Grain"})]})]}),b.jsxs("div",{className:t.section,children:[b.jsx("div",{className:t.sectionTitle,children:"Stickers"}),b.jsxs("div",{className:t.row,children:[J8e.map((Z,oe)=>b.jsx("img",{src:Z,alt:`sticker${oe+1}`,style:{width:32,height:32,cursor:"pointer",border:"1px solid #888",marginRight:4},onClick:()=>q(Z)},Z)),b.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Sticker",b.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:k,onChange:ne})]})]})]}),b.jsxs("div",{className:t.actions,children:[b.jsx("button",{className:t.button,onClick:L,children:"Save Image"}),b.jsx("button",{className:t.button,onClick:P,children:"Restart"})]})]}),b.jsx("div",{className:t.memeArea,children:b.jsx("canvas",{ref:e,width:go,height:go,className:t.canvas})}),b.jsx("div",{style:{position:"absolute",left:0,top:0,width:go,height:go,pointerEvents:"none"},children:S.map(Z=>O===Z.id?b.jsxs("div",{style:{position:"absolute",left:Z.x,top:Z.y,width:80*Z.scale,height:80*Z.scale,transform:`rotate(${Z.rotation}deg)`,cursor:"move",pointerEvents:"auto",zIndex:10,border:"2px solid #00f",boxShadow:"0 0 8px #00f"},onMouseDown:oe=>{I(Z.id),oe.stopPropagation()},onMouseUp:()=>I(null),onMouseMove:oe=>{T===Z.id&&oe.buttons===1&&le(Z.id,oe.movementX,oe.movementY)},children:[b.jsx("img",{src:Z.src,alt:"sticker",style:{width:"100%",height:"100%",userSelect:"none",pointerEvents:"none"},draggable:!1}),b.jsx("div",{style:{position:"absolute",right:-12,top:"40%",width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"grab",zIndex:11},onMouseDown:oe=>{var Se;oe.stopPropagation();const he=(Se=oe.currentTarget.parentElement)==null?void 0:Se.getBoundingClientRect(),de=he?he.left+he.width/2:0,be=he?he.top+he.height/2:0,We=Math.atan2(oe.clientY-be,oe.clientX-de)*180/Math.PI,_e=Z.rotation,Ae=Gt=>{ie(Z.id,We,_e,Gt.clientX,Gt.clientY)},tt=()=>{window.removeEventListener("mousemove",Ae),window.removeEventListener("mouseup",tt)};window.addEventListener("mousemove",Ae),window.addEventListener("mouseup",tt)}}),b.jsx("div",{style:{position:"absolute",bottom:-12,right:-12,width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"nwse-resize",zIndex:11},onMouseDown:oe=>{oe.stopPropagation();const he=oe.clientX,de=We=>{const _e=(We.clientX-he)/80;ye(Z.id,1+_e)},be=()=>{window.removeEventListener("mousemove",de),window.removeEventListener("mouseup",be)};window.addEventListener("mousemove",de),window.addEventListener("mouseup",be)}}),b.jsx("button",{style:{position:"absolute",top:-12,left:-12,width:16,height:16,background:"#f00",color:"#fff",border:"none",borderRadius:"50%",fontSize:10,cursor:"pointer",zIndex:12},onClick:()=>re(Z.id),children:"×"}),b.jsx("button",{style:{position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:40,height:18,background:"#0f0",color:"#000",border:"1px solid #888",borderRadius:4,fontSize:8,cursor:"pointer",zIndex:12},onClick:()=>B(null),children:"Place"})]},Z.id):null)})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function k_(){return k_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},k_.apply(this,arguments)}var Th;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Th||(Th={}));const v9="popstate";function Z8e(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return _3("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:RX(s)}return e4e(e,n,null,t)}function Qr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function TX(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function X8e(){return Math.random().toString(36).substr(2,8)}function E9(t,e){return{usr:t.state,key:t.key,idx:e}}function _3(t,e,n,r){return n===void 0&&(n=null),k_({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?db(e):e,{state:n,key:e&&e.key||r||X8e()})}function RX(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function db(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function e4e(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Th.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(k_({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Th.Pop;let y=u(),m=y==null?null:y-l;l=y,c&&c({action:a,location:g.location,delta:m})}function h(y,m){a=Th.Push;let w=_3(g.location,y,m);l=u()+1;let v=E9(w,l),A=g.createHref(w);try{o.pushState(v,"",A)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(A)}i&&c&&c({action:a,location:g.location,delta:1})}function f(y,m){a=Th.Replace;let w=_3(g.location,y,m);l=u();let v=E9(w,l),A=g.createHref(w);o.replaceState(v,"",A),i&&c&&c({action:a,location:g.location,delta:0})}function p(y){let m=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof y=="string"?y:RX(y);return w=w.replace(/ $/,"%20"),Qr(m,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,m)}let g={get action(){return a},get location(){return t(s,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(v9,d),c=y,()=>{s.removeEventListener(v9,d),c=null}},createHref(y){return e(s,y)},createURL:p,encodeLocation(y){let m=p(y);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:f,go(y){return o.go(y)}};return g}var _9;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(_9||(_9={}));function t4e(t,e,n){return n===void 0&&(n="/"),n4e(t,e,n)}function n4e(t,e,n,r){let s=typeof e=="string"?db(e):e,i=kX(s.pathname||"/",n);if(i==null)return null;let o=PX(t);r4e(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=g4e(i);a=h4e(o[c],l)}return a}function PX(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Qr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=sg([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(Qr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),PX(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:u4e(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of OX(i.path))s(i,o,c)}),e}function OX(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=OX(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function r4e(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:d4e(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const s4e=/^:[\w-]+$/,i4e=3,o4e=2,a4e=1,c4e=10,l4e=-2,C9=t=>t==="*";function u4e(t,e){let n=t.split("/"),r=n.length;return n.some(C9)&&(r+=l4e),e&&(r+=o4e),n.filter(s=>!C9(s)).reduce((s,i)=>s+(s4e.test(i)?i4e:i===""?a4e:c4e),r)}function d4e(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function h4e(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=f4e({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:sg([i,d.pathname]),pathnameBase:E4e(sg([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=sg([i,d.pathnameBase]))}return o}function f4e(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=p4e(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function p4e(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),TX(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function g4e(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return TX(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function kX(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function m4e(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?db(t):t;return{pathname:n?n.startsWith("/")?n:y4e(n,e):e,search:_4e(r),hash:C4e(s)}}function y4e(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function yO(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function w4e(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function b4e(t,e){let n=w4e(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function v4e(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=db(t):(s=k_({},t),Qr(!s.pathname||!s.pathname.includes("?"),yO("?","pathname","search",s)),Qr(!s.pathname||!s.pathname.includes("#"),yO("#","pathname","hash",s)),Qr(!s.search||!s.search.includes("#"),yO("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=m4e(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const sg=t=>t.join("/").replace(/\/\/+/g,"/"),E4e=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),_4e=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,C4e=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function A4e(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const DX=["post","put","patch","delete"];new Set(DX);const S4e=["get",...DX];new Set(S4e);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function D_(){return D_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},D_.apply(this,arguments)}const wU=D.createContext(null),I4e=D.createContext(null),cT=D.createContext(null),lT=D.createContext(null),hb=D.createContext({outlet:null,matches:[],isDataRoute:!1}),LX=D.createContext(null);function uT(){return D.useContext(lT)!=null}function MX(){return uT()||Qr(!1),D.useContext(lT).location}function UX(t){D.useContext(cT).static||D.useLayoutEffect(t)}function x4e(){let{isDataRoute:t}=D.useContext(hb);return t?F4e():N4e()}function N4e(){uT()||Qr(!1);let t=D.useContext(wU),{basename:e,future:n,navigator:r}=D.useContext(cT),{matches:s}=D.useContext(hb),{pathname:i}=MX(),o=JSON.stringify(b4e(s,n.v7_relativeSplatPath)),a=D.useRef(!1);return UX(()=>{a.current=!0}),D.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=v4e(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:sg([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function T4e(t,e){return R4e(t,e)}function R4e(t,e,n,r){uT()||Qr(!1);let{navigator:s}=D.useContext(cT),{matches:i}=D.useContext(hb),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=MX(),u;if(e){var d;let y=typeof e=="string"?db(e):e;c==="/"||(d=y.pathname)!=null&&d.startsWith(c)||Qr(!1),u=y}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let y=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=t4e(t,{pathname:f}),g=L4e(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:sg([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:sg([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return e&&g?D.createElement(lT.Provider,{value:{location:D_({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Th.Pop}},g):g}function P4e(){let t=B4e(),e=A4e(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,null)}const O4e=D.createElement(P4e,null);class k4e extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(hb.Provider,{value:this.props.routeContext},D.createElement(LX.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function D4e(t){let{routeContext:e,match:n,children:r}=t,s=D.useContext(wU);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(hb.Provider,{value:e},r)}function L4e(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||Qr(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,y=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||O4e,c&&(l<0&&h===0?(j4e("route-fallback"),p=!0,y=null):l===h&&(p=!0,y=d.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,h+1)),w=()=>{let v;return f?v=g:p?v=y:d.route.Component?v=D.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=u,D.createElement(D4e,{match:d,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?D.createElement(k4e,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:w(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):w()},null)}var $X=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}($X||{}),BX=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(BX||{});function M4e(t){let e=D.useContext(wU);return e||Qr(!1),e}function U4e(t){let e=D.useContext(I4e);return e||Qr(!1),e}function $4e(t){let e=D.useContext(hb);return e||Qr(!1),e}function FX(t){let e=$4e(),n=e.matches[e.matches.length-1];return n.route.id||Qr(!1),n.route.id}function B4e(){var t;let e=D.useContext(LX),n=U4e(),r=FX();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function F4e(){let{router:t}=M4e($X.UseNavigateStable),e=FX(BX.UseNavigateStable),n=D.useRef(!1);return UX(()=>{n.current=!0}),D.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,D_({fromRouteId:e},i)))},[t,e])}const A9={};function j4e(t,e,n){A9[t]||(A9[t]=!0)}function z4e(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function yS(t){Qr(!1)}function W4e(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Th.Pop,navigator:i,static:o=!1,future:a}=t;uT()&&Qr(!1);let c=e.replace(/^\/*/,"/"),l=D.useMemo(()=>({basename:c,navigator:i,static:o,future:D_({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=db(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=D.useMemo(()=>{let y=kX(u,c);return y==null?null:{location:{pathname:y,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return g==null?null:D.createElement(cT.Provider,{value:l},D.createElement(lT.Provider,{children:n,value:g}))}function H4e(t){let{children:e,location:n}=t;return T4e(C3(e),n)}new Promise(()=>{});function C3(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,s)=>{if(!D.isValidElement(r))return;let i=[...e,s];if(r.type===D.Fragment){n.push.apply(n,C3(r.props.children,i));return}r.type!==yS&&Qr(!1),!r.props.index||!r.props.children||Qr(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=C3(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const G4e="6";try{window.__reactRouterVersion=G4e}catch{}const q4e="startTransition",S9=Ine[q4e];function V4e(t){let{basename:e,children:n,future:r,window:s}=t,i=D.useRef();i.current==null&&(i.current=Z8e({window:s,v5Compat:!0}));let o=i.current,[a,c]=D.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=D.useCallback(d=>{l&&S9?S9(()=>c(d)):c(d)},[c,l]);return D.useLayoutEffect(()=>o.listen(u),[o,u]),D.useEffect(()=>z4e(r),[r]),D.createElement(W4e,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var I9;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(I9||(I9={}));var x9;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(x9||(x9={}));const K4e=Pc({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function Y4e(){const t=K4e(),{open:e}=aT(),{address:n,isConnected:r}=LC(),{isPending:s}=gY(),{disconnect:i}=mY(),{data:o}=yY({address:n}),[a,c]=D.useState("pixelawbs-popup"),[l,u]=D.useState(new Set),[d,h]=D.useState(!1),[f,p]=D.useState(!1),[g,y]=D.useState(!1),[m,w]=D.useState(!1),v=x4e(),A=D.useRef(null);D.useEffect(()=>{if(a==="halloween-popup"&&A.current){const N=A.current.querySelector("script[data-tiktok-embed]");N&&N.remove();const M=document.createElement("script");M.src="https://www.tiktok.com/embed.js",M.async=!0,M.setAttribute("data-tiktok-embed","true"),A.current.appendChild(M)}},[a]);const C=(N,M,P)=>{if(N==="url"&&P)window.open(P,"_blank");else if(N==="popup"&&M)c(M),u(L=>{const F=new Set(L);return F.delete(M),F}),document.body.offsetWidth;else if(N==="wallet")r?i():e();else if(N==="mint"){if(!n){alert("Please connect your wallet first!");return}h(!0)}else N==="nft-gallery"?p(!0):N==="meme-generator"?y(!0):N==="chess"&&(r?(w(!0),setTimeout(()=>{w(!1),v("/chess")},1500)):e().then(()=>{const L=()=>{window.ethereum&&window.ethereum.selectedAddress?(w(!0),setTimeout(()=>{w(!1),v("/chess")},1500)):setTimeout(L,200)};L()}))},S=()=>c(null),x=N=>{u(M=>new Set(M).add(N)),c(null)},T=N=>{N==="mint-popup"?h(!0):N==="nft-gallery-popup"?p(!0):N==="meme-generator-popup"?y(!0):c(N),u(M=>{const P=new Set(M);return P.delete(N),P})},I=()=>h(!1),k=()=>p(!1),O=()=>y(!1),B=()=>{h(!1),u(N=>new Set(N).add("mint-popup"))},G=()=>{p(!1),u(N=>new Set(N).add("nft-gallery-popup"))},W=()=>{y(!1),u(N=>new Set(N).add("meme-generator-popup"))},R=b.jsxs("div",{onClick:()=>{r?i():e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:r?"limegreen":"red",fontWeight:"bold"},children:[b.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),s?"Connecting...":r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return b.jsxs("div",{className:t.body,children:[m&&b.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[b.jsx("img",{src:"/images/blueknight.png",alt:"Booting Chess...",style:{width:120,height:120,marginBottom:32}}),b.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),b.jsx(YCe,{onIconClick:C}),b.jsx(JCe,{minimizedWindows:Array.from(l),onRestoreWindow:T,walletButton:R,connectionStatus:{connected:r,address:n,ens:o||void 0}}),b.jsxs(sa,{id:"chat-popup",isOpen:a==="chat-popup",onClose:S,onMinimize:x,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",b.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),b.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),b.jsxs(sa,{id:"purity-popup",isOpen:a==="purity-popup",onClose:S,onMinimize:x,children:[b.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),b.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),b.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),b.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),b.jsxs(sa,{id:"lawbstarz-popup",isOpen:a==="lawbstarz-popup",onClose:S,onMinimize:x,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",b.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",b.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",b.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",b.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),b.jsx("p",{children:"Chain: Ethereum"}),b.jsxs("p",{children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),b.jsxs("blockquote",{className:"twitter-tweet","data-media-max-width":"560",children:[b.jsxs("p",{lang:"en",dir:"ltr",children:["The following 🧵 has been transcripted from a live news broadcast:",b.jsx("br",{}),b.jsx("br",{}),"Anchor: “Good evening, viewers. Tonight, we embark on an extraordinary journey that defies rational explanation. It all began with February's Cigawrette Packs cargo ship hijacking, little did we know that the.. ",b.jsx("a",{href:"https://t.co/BWgLOk59N4",children:"pic.twitter.com/BWgLOk59N4"})]}),"— wables (@wables411) ",b.jsx("a",{href:"https://twitter.com/wables411/status/1669009492007354369?ref_src=twsrc%5Etfw",children:"June 14, 2023"})]}),b.jsx("script",{async:!0,src:"https://platform.twitter.com/widgets.js"}),b.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),b.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),b.jsxs(sa,{id:"lawbstation-popup",isOpen:a==="lawbstation-popup",onClose:S,onMinimize:x,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",b.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),b.jsx("p",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),b.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),b.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),b.jsxs(sa,{id:"nexus-popup",isOpen:a==="nexus-popup",onClose:S,onMinimize:x,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",b.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),b.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),b.jsxs(sa,{id:"lawbsters-popup",isOpen:a==="lawbsters-popup",onClose:S,onMinimize:x,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",b.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),b.jsx("p",{children:"Chain: Ethereum"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",b.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),b.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:b.jsx(wve,{id:"1620879129850834944"})}),b.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),b.jsx(sa,{id:"pixelawbs-popup",isOpen:a==="pixelawbs-popup",onClose:S,onMinimize:x,children:(()=>{const N=M=>{M.preventDefault(),c(null),h(!0)};return b.jsxs(b.Fragment,{children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",b.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:N,children:"COLLECT HERE"})," OR VISIT ",b.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),b.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",b.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),b.jsxs(sa,{id:"halloween-popup",isOpen:a==="halloween-popup",onClose:S,onMinimize:x,children:[b.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),b.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),b.jsx("div",{ref:A,style:{maxWidth:"400px",margin:"0 auto"},children:b.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:b.jsxs("section",{children:[b.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore 🦞🎃 minting rn on @ourzora via @PC69 ",b.jsx("a",{target:"_blank",rel:"noreferrer",title:"♬ original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:"♬ original sound - wables.eth"})]})})})]}),b.jsxs(sa,{id:"lawb-popup",isOpen:a==="lawb-popup",onClose:S,onMinimize:x,children:[b.jsx("h1",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"🦞 $LAWB"})}),b.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",b.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),b.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",b.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),b.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",b.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),b.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),b.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:b.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}),b.jsx(e1e,{isOpen:d,onClose:I,onMinimize:B,walletAddress:n||""}),b.jsx(z8e,{isOpen:f,onClose:k,onMinimize:G,walletAddress:n}),b.jsx(sa,{id:"meme-generator-popup",isOpen:g,onClose:O,onMinimize:W,children:b.jsx(NX,{})})]})}const Q4e=Pc({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),N9=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],J4e=({onBack:t,walletAddress:e})=>{const n=Q4e(),{open:r}=aT(),[s,i]=D.useState([]),[o,a]=D.useState(!0),[c,l]=D.useState(null),[u,d]=D.useState(N9[0]),[h,f]=D.useState(!1),[p,g]=D.useState(null),[y,m]=D.useState("all"),[w,v]=D.useState(null),A=D.useCallback(async()=>{var T,I;try{if((T=window.solana)!=null&&T.isPhantom){const k=await window.solana.connect();g(k.publicKey.toString());return}if((I=window.solflare)!=null&&I.isSolflare){const k=await window.solflare.connect();g(k.publicKey.toString());return}r()}catch(k){console.error("Failed to connect Solana wallet:",k),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);D.useEffect(()=>{var T,I;(T=window.solana)!=null&&T.publicKey?g(window.solana.publicKey.toString()):(I=window.solflare)!=null&&I.publicKey&&g(window.solflare.publicKey.toString())},[]),D.useEffect(()=>{(async()=>{a(!0);try{let I,k=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}k=p,I=await ZCe(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",I.data.length)}else u.api==="opensea"?I=await WM(u.slug,100,k):I=await zM(u.slug,1,100,k);y==="owned"&&p&&(console.log("Filtering for owner:",p),I.data.some(B=>B.owners&&B.owners.length>0)?I.data=I.data.filter(B=>B.owners.some(W=>W.owner_of&&W.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),v("Owner data not available for this Solana collection. Showing all NFTs."))),i(I.data)}catch(I){console.error(I)}finally{a(!1)}})()},[e,u,p,y]),D.useEffect(()=>{h&&A()},[h,A]);const C=async T=>{if(a(!0),u.api==="opensea"&&u.chain)try{const I=await EQ(u.chain,T.address,T.token_id.toString()),k={...T,attributes:JSON.stringify(I.traits||[])};l(k)}catch(I){console.error("Failed to fetch full NFT details",I),l(T)}else l(T);a(!1)},S=()=>{if(!c)return null;let T=[];try{T=JSON.parse(c.attributes||"[]")}catch(I){console.error("Failed to parse NFT attributes:",I)}return b.jsxs("div",{className:n.detailView,children:[b.jsx("img",{src:c.image,alt:c.name}),b.jsx("h2",{children:c.name}),b.jsx("h4",{children:"Traits:"}),b.jsx("ul",{children:T.map((I,k)=>b.jsxs("li",{children:[b.jsxs("strong",{children:[I.trait_type,":"]})," ",I.value]},k))})]})},x=()=>b.jsxs(b.Fragment,{children:[b.jsx("div",{className:n.collectionSelector,children:N9.map(T=>b.jsx("button",{className:`${n.collectionButton} ${u.slug===T.slug?"active":""}`,onClick:()=>d(T),children:T.name},T.slug))}),b.jsxs("div",{className:n.content,children:[b.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[b.jsx("button",{onClick:()=>m("all"),style:{background:y==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:y==="all"?"white":"black"},children:"All NFTs"}),b.jsx("button",{onClick:()=>m("owned"),disabled:!e&&!p,style:{background:y==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:y==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&b.jsx("button",{onClick:()=>{A()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),w&&b.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:w}),u.api==="opensea-solana"&&!p&&b.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?b.jsx("div",{className:n.loading,children:"Loading NFTs..."}):b.jsx("div",{className:n.grid,children:s.map(T=>{let I=T.image||T.image_url||T.image_url_shrunk||"/assets/pixelawb.png";return b.jsxs("div",{className:n.gridItem,onClick:()=>void C(T),children:[b.jsx("img",{src:I,alt:T.name,onError:k=>{k.currentTarget.src!==T.image_url&&T.image_url?k.currentTarget.src=T.image_url:k.currentTarget.src!==T.image_url_shrunk&&T.image_url_shrunk?k.currentTarget.src=T.image_url_shrunk:k.currentTarget.src="/assets/pixelawb.png"}}),b.jsx("span",{children:T.name})]},T.id)})})]})]});return b.jsxs("div",{className:n.galleryContainer,children:[b.jsxs("header",{className:n.header,children:[b.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),b.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),b.jsx("div",{className:n.content,children:o?b.jsx("p",{className:n.loading,children:"Loading..."}):c?S():x()})]})},Z4e=Pc({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),Ka=({isOpen:t,onClose:e,title:n,children:r})=>{const s=Z4e();return t?b.jsx("div",{className:s.overlay,children:b.jsxs("div",{className:s.popup,children:[b.jsxs("div",{className:s.titleBar,children:[b.jsx("span",{children:n}),b.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:"✕"})]}),b.jsx("div",{className:s.content,children:r})]})}):null},X4e=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=D.useState([]),[i,o]=D.useState(!1),[a,c]=D.useState(!1),[l,u]=D.useState({}),[d,h]=D.useState(null),{data:f}=wY();D.useEffect(()=>{t&&n&&p()},[t,n]);const p=async()=>{o(!0),h(null);try{const A=await bQ(n);s(A);const C={};A.forEach(S=>{C[S.id]=0}),u(C)}catch(A){h(A.message)}finally{o(!1)}},g=(A,C)=>{u(S=>({...S,[A]:Math.max(0,C)}))},y=async()=>{const A=Object.entries(l).filter(([,C])=>C>0).map(([C,S])=>({id:C,quantity:S}));if(A.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}c(!0),h(null);try{const C=await vQ(n,A);if(C.success&&C.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const S=await f.sendTransaction({to:C.mintTransaction.to,value:BigInt(C.mintTransaction.value),data:C.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${S}`),e()}catch(S){h("Transaction failed: "+S.message)}}else throw new Error(C.message||"Could not retrieve minting transaction.")}catch(C){h("Minting failed: "+C.message)}finally{c(!1)}},m=(A,C)=>`${parseFloat(A)} ${C}`,w={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},v={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return b.jsxs(Ka,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&b.jsx("div",{style:v,children:d}),i?b.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?b.jsx("div",{children:"No eligible invite lists found for your wallet."}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:{marginBottom:"20px"},children:[b.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(A=>b.jsxs("div",{style:w,children:[b.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:A.name}),b.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",m(A.token_price,A.currency_symbol)]}),b.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",A.wallet_limit===4294967295?"Unlimited":A.wallet_limit," per wallet"]}),b.jsx("input",{type:"number",min:0,max:A.wallet_limit===4294967295?void 0:A.wallet_limit,value:l[A.id]||"",onChange:C=>g(A.id,parseInt(C.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),b.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},A.id))]}),b.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:y,disabled:a,children:a?"Minting...":"Mint"})]})]})},eFe=Pc({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),tFe=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],nFe=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],rFe=()=>{const t=eFe(),{open:e}=aT(),{address:n,isConnected:r}=LC(),{isPending:s}=gY(),{disconnect:i}=mY(),{data:o}=yY({address:n}),[a,c]=D.useState("main"),[l,u]=D.useState(!1),[d,h]=D.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=D.useState(!1),[g,y]=D.useState(!1),[m,w]=D.useState(!1),[v,A]=D.useState(!1),[C,S]=D.useState(!1),[x,T]=D.useState(!1),[I,k]=D.useState(!1),[O,B]=D.useState(!1),[G,W]=D.useState(!1),[R,N]=D.useState(!1),[M,P]=D.useState(!1),[L,F]=D.useState(!1),q=[{label:"Mint",icon:"/assets/mint.gif",action:()=>y(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>w(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>A(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>S(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],ne=re=>{re.disabled||re.action()};if(D.useEffect(()=>{const re=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(re)},[]),D.useEffect(()=>{u(!0)},[]),a==="gallery")return b.jsx(J4e,{onBack:()=>c("main"),walletAddress:n||void 0});function le({open:re,onClose:ye,title:Z,nfts:oe}){const he=de=>{switch(de){case"lawbsters":T(!0);break;case"lawbstarz":k(!0);break;case"pixelawbs":B(!0);break;case"halloween":W(!0);break;case"lawbstation":N(!0);break;case"nexus":P(!0);break}};return b.jsx(Ka,{isOpen:re,onClose:ye,title:Z,children:b.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:oe.map(de=>b.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>he(de.id),children:[b.jsx("img",{src:de.image,alt:de.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),b.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:de.name}),b.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:de.description})]},de.id))})})}function ie({open:re,onClose:ye}){return re?b.jsxs(Ka,{isOpen:re,onClose:ye,title:"$LAWB",children:[b.jsx("h1",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"🦞 $LAWB"})}),b.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",b.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),b.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",b.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),b.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",b.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),b.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),b.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:b.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}):null}return b.jsxs("div",{className:t.mobileContainer,children:[b.jsx("header",{className:t.header,children:b.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),b.jsx("div",{className:t.iconGrid,children:q.map(re=>b.jsxs("div",{className:t.icon,onClick:()=>ne(re),children:[b.jsx("img",{src:re.icon,alt:re.label}),b.jsx("span",{children:re.label})]},re.label))}),l&&b.jsxs(Ka,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",b.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),y(!0)},children:"COLLECT HERE"})," OR VISIT ",b.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),b.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",b.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),b.jsx("p",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&b.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:b.jsxs("div",{className:t.menuModal,onClick:re=>re.stopPropagation(),children:[b.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"GeckoTerminal"}),b.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),b.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),b.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),b.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),b.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),b.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),b.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),b.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),b.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),F(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),b.jsx(X4e,{isOpen:g,onClose:()=>y(!1),walletAddress:n||""}),b.jsx(le,{open:m,onClose:()=>w(!1),title:"EVM NFT'S FOLDER",nfts:tFe}),b.jsx(le,{open:v,onClose:()=>A(!1),title:"SOL NFTS FOLDER",nfts:nFe}),b.jsx(ie,{open:C,onClose:()=>S(!1)}),b.jsxs(Ka,{isOpen:x,onClose:()=>T(!1),title:"Lawbsters",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",b.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),b.jsx("p",{children:"Chain: Ethereum"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",b.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),b.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),b.jsxs(Ka,{isOpen:I,onClose:()=>k(!1),title:"Lawbstarz",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",b.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",b.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",b.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",b.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),b.jsx("p",{children:"Chain: Ethereum"}),b.jsxs("p",{children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),b.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),b.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),b.jsxs(Ka,{isOpen:O,onClose:()=>B(!1),title:"Pixelawbs",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",b.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{B(!1),y(!0)},children:"COLLECT HERE"})," OR VISIT ",b.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),b.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",b.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),b.jsxs(Ka,{isOpen:G,onClose:()=>W(!1),title:"A Lawbster Halloween",children:[b.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),b.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),b.jsxs(Ka,{isOpen:R,onClose:()=>N(!1),title:"Lawbstation",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",b.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),b.jsx("p",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),b.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),b.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),b.jsxs(Ka,{isOpen:M,onClose:()=>P(!1),title:"Nexus",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",b.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),b.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),b.jsx(Ka,{isOpen:L,onClose:()=>F(!1),title:"Meme Generator",children:b.jsx(NX,{})}),b.jsxs("div",{className:t.taskbar,children:[b.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),b.jsxs("div",{className:t.walletStatus,children:[b.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),b.jsx("span",{className:t.clock,children:d})]})]})};function sFe(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=D.useState(e(t));function s(){r(e(t))}return D.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}const iFe=Symbol(),T9=Object.getPrototypeOf,A3=new WeakMap,oFe=t=>t&&(A3.has(t)?A3.get(t):T9(t)===Object.prototype||T9(t)===Array.prototype),aFe=t=>oFe(t)&&t[iFe]||null,R9=(t,e=!0)=>{A3.set(t,e)},ex={},bU=t=>typeof t=="object"&&t!==null,cFe=t=>bU(t)&&!t1.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),jX=(t,e)=>{const n=S3.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return R9(r,!0),S3.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(t1.has(i))R9(i,!1);else if(pf.has(i)){const[c,l]=pf.get(i);a.value=jX(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},lFe=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(P9(l,o)||L_.has(o)&&P9(l,L_.get(o))))return!0;n(i),bU(o)&&(o=aFe(o)||o);const u=!pf.has(o)&&dFe(o)?tr(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),pf=new WeakMap,t1=new WeakSet,S3=new WeakMap,yv=[1,1],L_=new WeakMap;let P9=Object.is,uFe=(t,e)=>new Proxy(t,e),dFe=cFe,hFe=jX,fFe=lFe;function tr(t={}){if(!bU(t))throw new Error("object required");const e=L_.get(t);if(e)return e;let n=yv[0];const r=new Set,s=(y,m=++yv[0])=>{n!==m&&(n=m,r.forEach(w=>w(y,m)))};let i=yv[1];const o=(y=++yv[1])=>(i!==y&&!r.size&&(i=y,c.forEach(([m])=>{const w=m[1](y);w>n&&(n=w)})),n),a=y=>(m,w)=>{const v=[...m];v[1]=[y,...v[1]],s(v,w)},c=new Map,l=(y,m)=>{const w=!t1.has(m)&&pf.get(m);if(w){if((ex?"production":void 0)!=="production"&&c.has(y))throw new Error("prop listener already exists");if(r.size){const v=w[2](a(y));c.set(y,[w,v])}else c.set(y,[w])}},u=y=>{var m;const w=c.get(y);w&&(c.delete(y),(m=w[1])==null||m.call(w))},d=y=>(r.add(y),r.size===1&&c.forEach(([w,v],A)=>{if((ex?"production":void 0)!=="production"&&v)throw new Error("remove already exists");const C=w[2](a(A));c.set(A,[w,C])}),()=>{r.delete(y),r.size===0&&c.forEach(([w,v],A)=>{v&&(v(),c.set(A,[w]))})});let h=!0;const f=fFe(()=>h,l,u,s),p=uFe(t,f);L_.set(t,p);const g=[t,o,d];return pf.set(p,g),Reflect.ownKeys(t).forEach(y=>{const m=Object.getOwnPropertyDescriptor(t,y);"value"in m&&m.writable&&(p[y]=t[y])}),h=!1,p}function co(t,e,n){const r=pf.get(t);(ex?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function M_(t){const e=pf.get(t);(ex?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return hFe(n,r())}function x0(t){return t1.add(t),t}function pFe(){return{proxyStateMap:pf,refSet:t1,snapCache:S3,versionHolder:yv,proxyCache:L_}}function Si(t,e,n,r){let s=t[e];return co(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:gFe,snapCache:mFe}=pFe(),CA=t=>gFe.has(t);function yFe(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=mFe.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return CA(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!CA(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!CA(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!CA(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,h)=>{l(this.data[d],h,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=tr(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var O9={};const pe={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof O9<"u"?O9.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},tx={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=pe.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},wFe={bigNumber(t){return t?new wl(t):new wl(0)},multiply(t,e){if(t===void 0||e===void 0)return new wl(0);const n=new wl(t),r=new wl(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},bFe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],vFe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],EFe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],_Fe={getERC20Abi:t=>pe.USDT_CONTRACT_ADDRESSES.includes(t)?EFe:bFe,getSwapAbi:()=>vFe},Rh={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},Ct={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function wO(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const yt={setItem(t,e){wv()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(wv())return localStorage.getItem(t)||void 0},removeItem(t){wv()&&localStorage.removeItem(t)},clear(){wv()&&localStorage.clear()}};function wv(){return typeof window<"u"&&typeof localStorage<"u"}function nx(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const gi={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,NAMES_SUPPORTED_CHAIN_NAMESPACES:[pe.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,DEFAULT_REMOTE_FEATURES:{socials:["google","x","discord","farcaster","github","apple","facebook"]},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},et={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=et.getActiveNamespace(),e=et.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{yt.setItem(Ct.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=yt.getItem(Ct.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{yt.removeItem(Ct.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{yt.setItem(Ct.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{yt.setItem(Ct.ACTIVE_CAIP_NETWORK_ID,t),et.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return yt.getItem(Ct.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{yt.removeItem(Ct.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=wO(t);yt.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=et.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),yt.setItem(Ct.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=yt.getItem(Ct.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=wO(t);yt.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return yt.getItem(Ct.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=wO(t);return yt.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{yt.setItem(Ct.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return yt.getItem(Ct.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{yt.removeItem(Ct.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return yt.getItem(Ct.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=yt.getItem(Ct.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{yt.setItem(Ct.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return yt.getItem(Ct.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=yt.getItem(Ct.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));yt.setItem(Ct.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=et.getConnectedNamespaces();e.includes(t)||(e.push(t),et.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=et.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),et.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return yt.getItem(Ct.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{yt.setItem(Ct.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{yt.removeItem(Ct.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=yt.getItem(Ct.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=et.getBalanceCache();yt.setItem(Ct.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=et.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;et.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=et.getBalanceCache();e[t.caipAddress]=t,yt.setItem(Ct.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=yt.getItem(Ct.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=et.getBalanceCache();yt.setItem(Ct.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=et.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),et.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=et.getNativeBalanceCache();e[t.caipAddress]=t,yt.setItem(Ct.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=yt.getItem(Ct.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=et.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;et.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=et.getEnsCache();e[t.address]=t,yt.setItem(Ct.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=et.getEnsCache();yt.setItem(Ct.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=yt.getItem(Ct.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=et.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;et.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=et.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},yt.setItem(Ct.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=et.getIdentityCache();yt.setItem(Ct.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{yt.removeItem(Ct.PORTFOLIO_CACHE),yt.removeItem(Ct.NATIVE_BALANCE_CACHE),yt.removeItem(Ct.ENS_CACHE),yt.removeItem(Ct.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{yt.setItem(Ct.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=yt.getItem(Ct.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=et.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===pe.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};yt.setItem(Ct.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=yt.getItem(Ct.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=et.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),yt.setItem(Ct.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=yt.getItem(Ct.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=et.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),yt.setItem(Ct.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=et.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),yt.setItem(Ct.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(et.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},ut={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return ut.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=gi.TEN_SEC_MS:!0},isAllowedRetry(t,e=gi.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(ut.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+gi.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(ut.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!ut.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?et.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,ut.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return pe.W3M_API_URL},getBlockchainApiUrl(){return pe.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return pe.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?gi.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in pe.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function Zb(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class n1{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await Zb(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await Zb(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Zb(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Zb(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Zb(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const CFe={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?gi.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(ut.isTelegram()){if(ut.isIos())return t.filter(e=>e!=="google");if(ut.isMac())return t.filter(e=>e!=="x");if(ut.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},ft=tr({features:gi.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:gi.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),It={state:ft,subscribeKey(t,e){return Si(ft,t,e)},setOptions(t){Object.assign(ft,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...ft.remoteFeatures,...t};ft.remoteFeatures=e,(n=ft.remoteFeatures)!=null&&n.socials&&(ft.remoteFeatures.socials=CFe.filterSocialsByPlatform(ft.remoteFeatures.socials))},setFeatures(t){if(!t)return;ft.features||(ft.features=gi.DEFAULT_FEATURES);const e={...ft.features,...t};ft.features=e},setProjectId(t){ft.projectId=t},setCustomRpcUrls(t){ft.customRpcUrls=t},setAllWallets(t){ft.allWallets=t},setIncludeWalletIds(t){ft.includeWalletIds=t},setExcludeWalletIds(t){ft.excludeWalletIds=t},setFeaturedWalletIds(t){ft.featuredWalletIds=t},setTokens(t){ft.tokens=t},setTermsConditionsUrl(t){ft.termsConditionsUrl=t},setPrivacyPolicyUrl(t){ft.privacyPolicyUrl=t},setCustomWallets(t){ft.customWallets=t},setIsSiweEnabled(t){ft.isSiweEnabled=t},setIsUniversalProvider(t){ft.isUniversalProvider=t},setSdkVersion(t){ft.sdkVersion=t},setMetadata(t){ft.metadata=t},setDisableAppend(t){ft.disableAppend=t},setEIP6963Enabled(t){ft.enableEIP6963=t},setDebug(t){ft.debug=t},setEnableWalletConnect(t){ft.enableWalletConnect=t},setEnableWalletGuide(t){ft.enableWalletGuide=t},setEnableAuthLogger(t){ft.enableAuthLogger=t},setEnableWallets(t){ft.enableWallets=t},setPreferUniversalLinks(t){ft.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(gi.SIWX_DEFAULTS))t[e]??(t[e]=n);ft.siwx=t},setConnectMethodsOrder(t){ft.features={...ft.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){ft.features={...ft.features,walletFeaturesOrder:t}},setSocialsOrder(t){ft.remoteFeatures={...ft.remoteFeatures,socials:t}},setCollapseWallets(t){ft.features={...ft.features,collapseWallets:t}},setEnableEmbedded(t){ft.enableEmbedded=t},setAllowUnsupportedChain(t){ft.allowUnsupportedChain=t},setManualWCControl(t){ft.manualWCControl=t},setEnableNetworkSwitch(t){ft.enableNetworkSwitch=t},setEnableReconnect(t){ft.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(ft.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){ft.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return ft.universalProviderConfigOverride},getSnapshot(){return M_(ft)}},AFe=Object.freeze({enabled:!0,events:[]}),SFe=new n1({baseUrl:ut.getAnalyticsUrl(),clientId:null}),IFe=5,xFe=60*1e3,Nd=tr({...AFe}),NFe={state:Nd,subscribeKey(t,e){return Si(Nd,t,e)},async sendError(t,e){if(!Nd.enabled)return;const n=Date.now();if(Nd.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<xFe}).length>=IFe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Nd.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=It.state;await SFe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:ut.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Nd.enabled=!0},disable(){Nd.enabled=!1},clearEvents(){Nd.events=[]}};class N0 extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,N0.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,N0):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function k9(t,e){const n=t instanceof N0?t:new N0(t instanceof Error?t.message:String(t),e,t);throw NFe.sendError(n,n.category),n}function Ma(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return k9(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return k9(a,e)}},n[r]=i}else n[r]=s}),n}var T0={};const TFe="https://secure.walletconnect.org/sdk",RFe=(typeof process<"u"&&typeof T0<"u"?T0.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||TFe,PFe=(typeof process<"u"&&typeof T0<"u"?T0.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",OFe=(typeof process<"u"&&typeof T0<"u"?T0.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ze={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Os={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},pl={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},kFe={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===pl.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${pl.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===pl.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${pl.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===pe.CHAIN.SOLANA&&t===pl.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${pl.COINBASE.url}/dapp?cb_url=${r}`)}},mo=tr({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),DFe={state:mo,subscribeNetworkImages(t){return co(mo.networkImages,()=>t(mo.networkImages))},subscribeKey(t,e){return Si(mo,t,e)},subscribe(t){return co(mo,()=>t(mo))},setWalletImage(t,e){mo.walletImages[t]=e},setNetworkImage(t,e){mo.networkImages[t]=e},setChainImage(t,e){mo.chainImages[t]=e},setConnectorImage(t,e){mo.connectorImages={...mo.connectorImages,[t]:e}},setTokenImage(t,e){mo.tokenImages[t]=e},setCurrencyImage(t,e){mo.currencyImages[t]=e}},uc=Ma(DFe),LFe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},bO=tr({networkImagePromises:{}}),MFe={async fetchWalletImage(t){if(t)return await wt._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(bO.networkImagePromises[t]||(bO.networkImagePromises[t]=wt._fetchNetworkImage(t)),await bO.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return uc.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return uc.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return uc.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return uc.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return uc.state.connectorImages[t.imageId]},getChainImage(t){return uc.state.networkImages[LFe[t]]}},Td=tr({message:"",variant:"info",open:!1}),UFe={state:Td,subscribeKey(t,e){return Si(Td,t,e)},open(t,e){const{debug:n}=It.state,{shortMessage:r,longMessage:s}=t;n&&(Td.message=r,Td.variant=e,Td.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Td.open=!1,Td.message="",Td.variant="info"}},Hf=Ma(UFe),$Fe=ut.getAnalyticsUrl(),BFe=new n1({baseUrl:$Fe,clientId:null}),FFe=["MODAL_CREATED"],iu=tr({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),lr={state:iu,subscribe(t){return co(iu,()=>t(iu))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=It.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=mn.state.address;if(FFe.includes(t.data.event)||typeof window>"u")return;await BFe.post({path:"/e",params:lr.getSdkProperties(),body:{eventId:ut.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),iu.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===pe.HTTP_STATUS_CODES.FORBIDDEN&&!iu.reportedErrors.FORBIDDEN&&(Hf.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${wv()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),iu.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;iu.timestamp=Date.now(),iu.data=t,(e=It.state.features)!=null&&e.analytics&&lr._sendAnalyticsEvent(iu)}},jFe=ut.getApiUrl(),Di=new n1({baseUrl:jFe,clientId:null}),zFe=40,D9=4,WFe=20,Rt=tr({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),wt={state:Rt,subscribeKey(t,e){return Si(Rt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=It.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return It.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Di.baseUrl}/getWalletImage/${t}`,n=await Di.getBlob({path:e,params:wt._getSdkProperties()});uc.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Di.baseUrl}/public/getAssetImage/${t}`,n=await Di.getBlob({path:e,params:wt._getSdkProperties()});uc.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Di.baseUrl}/public/getAssetImage/${t}`,n=await Di.getBlob({path:e,params:wt._getSdkProperties()});uc.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Di.baseUrl}/public/getCurrencyImage/${t}`,n=await Di.getBlob({path:e,params:wt._getSdkProperties()});uc.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Di.baseUrl}/public/getTokenImage/${t}`,n=await Di.getBlob({path:e,params:wt._getSdkProperties()});uc.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return ut.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===pl.COINBASE.id?!0:Y.state.activeChain==="solana"&&(n.id===pl.SOLFLARE.id||n.id===pl.PHANTOM.id)):t},async fetchProjectConfig(){return(await Di.get({path:"/appkit/v1/config",params:wt._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Di.get({path:"/projects/v1/origins",params:wt._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===pe.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=pe.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=Y.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!MFe.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>wt._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=it.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>wt._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>wt._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>wt._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];wt._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(pl).map(o=>o.id));const r=await Di.get({path:"/getWallets",params:{...wt._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:wt._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=It.state;if(t!=null&&t.length){const e={...wt._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??D9,include:t},{data:n}=await wt.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>wt._fetchWalletImage(i))),Rt.featured=r,Rt.allFeatured=r}},async fetchRecommendedWallets(){try{Rt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=It.state,r=[...e??[],...n??[]].filter(Boolean),s=Y.getRequestedCaipNetworkIds().join(","),i={page:1,entries:D9,include:t,exclude:r,chains:s},{data:o,count:a}=await wt.fetchWallets(i),c=et.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>wt._fetchWalletImage(d))),Rt.recommended=o,Rt.allRecommended=o,Rt.count=a??0}catch{}finally{Rt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=It.state,s=Y.getRequestedCaipNetworkIds().join(","),i=[...Rt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:zFe,include:e,exclude:i,chains:s},{data:a,count:c}=await wt.fetchWallets(o),l=a.slice(0,WFe).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>wt._fetchWalletImage(u))),Rt.wallets=ut.uniqueBy([...Rt.wallets,...wt._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Rt.count=c>Rt.count?c:Rt.count,Rt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await wt.fetchWallets(e);n&&n.forEach(r=>{Rt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=It.state,s=Y.getRequestedCaipNetworkIds().join(",");Rt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await wt.fetchWallets(i);lr.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>wt._fetchWalletImage(c)),ut.wait(300)]),Rt.search=wt._filterOutExtensions(o)},initPromise(t,e){const n=Rt.promises[t];return n||(Rt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&wt.initPromise("connectorImages",wt.fetchConnectorImages),e&&wt.initPromise("featuredWallets",wt.fetchFeaturedWallets),n&&wt.initPromise("recommendedWallets",wt.fetchRecommendedWallets),r&&wt.initPromise("networkImages",wt.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=It.state.features)!=null&&t.analytics&&wt.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Di.get({path:"/getAnalyticsConfig",params:wt._getSdkProperties()});It.setFeatures({analytics:t})}catch{It.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Rt.featured=Rt.allFeatured,Rt.recommended=Rt.allRecommended;return}const e=Y.getRequestedCaipNetworkIds().join(",");Rt.featured=Rt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Rt.recommended=Rt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Rt.filteredWallets=Rt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Rt.filteredWallets=[]},setFilterByNamespace(t){if(!t){Rt.featured=Rt.allFeatured,Rt.recommended=Rt.allRecommended;return}const e=Y.getRequestedCaipNetworkIds().join(",");Rt.featured=Rt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Rt.recommended=Rt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Rt.filteredWallets=Rt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Nn=tr({view:"Connect",history:["Connect"],transactionStack:[]}),HFe={state:Nn,subscribeKey(t,e){return Si(Nn,t,e)},pushTransactionStack(t){Nn.transactionStack.push(t)},popTransactionStack(t){const e=Nn.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),St.goBack();break;case"cancel":s==null||s(),St.goBack();break}},push(t,e){t!==Nn.view&&(Nn.view=t,Nn.history.push(t),Nn.data=e)},reset(t,e){Nn.view=t,Nn.history=[t],Nn.data=e},replace(t,e){Nn.history.at(-1)===t||(Nn.view=t,Nn.history[Nn.history.length-1]=t,Nn.data=e)},goBack(){var r;const t=Y.state.activeCaipAddress,e=St.state.view==="ConnectingFarcaster",n=!t&&e;if(Nn.history.length>1){Nn.history.pop();const[s]=Nn.history.slice(-1);s&&(t&&s==="Connect"?Nn.view="Account":Nn.view=s)}else qn.close();(r=Nn.data)!=null&&r.wallet&&(Nn.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){mn.setFarcasterUrl(void 0,Y.state.activeChain);const a=it.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=M_(It.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Nn.history.length>1){Nn.history=Nn.history.slice(0,t+1);const[e]=Nn.history.slice(-1);e&&(Nn.view=e)}},goBackOrCloseModal(){St.state.history.length>1?St.goBack():qn.close()}},St=Ma(HFe),ou=tr({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),I3={state:ou,subscribe(t){return co(ou,()=>t(ou))},setThemeMode(t){ou.themeMode=t;try{const e=it.getAuthConnector();if(e){const n=I3.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:nx(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){ou.themeVariables={...ou.themeVariables,...t};try{const e=it.getAuthConnector();if(e){const n=I3.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:nx(ou.themeVariables,ou.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return M_(ou)}},AA=Ma(I3),zX={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},ln=tr({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...zX},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),GFe={state:ln,subscribe(t){return co(ln,()=>{t(ln)})},subscribeKey(t,e){return Si(ln,t,e)},initialize(t){t.forEach(e=>{const n=et.getConnectedConnectorId(e);n&&it.setConnectorId(n,e)})},setActiveConnector(t){t&&(ln.activeConnector=x0(t))},setConnectors(t){t.filter(s=>!ln.allConnectors.some(i=>i.id===s.id&&it.getConnectorName(i.name)===it.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&ln.allConnectors.push(x0(s))});const n=it.getEnabledNamespaces(),r=it.getEnabledConnectors(n);ln.connectors=it.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(ln.filterByNamespaceMap).forEach(e=>{ln.filterByNamespaceMap[e]=!1}),t.forEach(e=>{ln.filterByNamespaceMap[e]=!0}),it.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){ln.filterByNamespaceMap[t]=e,it.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=it.getEnabledNamespaces(),e=it.getEnabledConnectors(t),n=it.areAllNamespacesEnabled();ln.connectors=it.mergeMultiChainConnectors(e),n?wt.clearFilterByNamespaces():wt.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(ln.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return ln.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(ln.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=it.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===pe.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=it.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===pe.CONNECTOR_ID.AUTH){const s=t,i=M_(It.state),o=AA.getSnapshot().themeMode,a=AA.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:nx(a,o)}),it.setConnectors([t])}else it.setConnectors([t])},getAuthConnector(t){var r;const e=t||Y.state.activeChain,n=ln.connectors.find(s=>s.id===pe.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return ln.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return ln.allConnectors.find(e=>e.id===t)},getConnector(t,e){return ln.allConnectors.filter(r=>r.chain===Y.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=M_(It.state),r=AA.getSnapshot().themeMode,s=AA.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:nx(s,r)})},getConnectorsByNamespace(t){const e=ln.allConnectors.filter(n=>n.chain===t);return it.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return Y.checkIfSmartAccountEnabled()&&Fl(t)===Os.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=it.getConnector(t.id,t.rdns);kFe.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,Y.state.activeChain),e?St.push("ConnectingExternal",{connector:e}):St.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?it.getConnectorsByNamespace(t):it.mergeMultiChainConnectors(ln.allConnectors)},setFilterByNamespace(t){ln.filterByNamespace=t,ln.connectors=it.getConnectors(t),wt.setFilterByNamespace(t)},setConnectorId(t,e){t&&(ln.activeConnectorIds={...ln.activeConnectorIds,[e]:t},et.setConnectedConnectorId(e,t))},removeConnectorId(t){ln.activeConnectorIds={...ln.activeConnectorIds,[t]:void 0},et.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return ln.activeConnectorIds[t]},isConnected(t){return t?!!ln.activeConnectorIds[t]:Object.values(ln.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){ln.activeConnectorIds={...zX}}},it=Ma(GFe),qFe=1e3,Xb={checkNamespaceConnectorId(t,e){return it.getConnectorId(t)===e},isSocialProvider(t){return gi.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&it.setActiveConnector(e),s==null||s(ut.isMobile()&&t),r){const l=qn.subscribeKey("open",u=>{u||(St.state.view!==r&&St.replace(r),l(),a(new Error("Modal closed")))})}const c=Y.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&qn.close(),c(),o(Rh.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=Y.subscribeKey("activeCaipAddress",s=>{s&&(qn.close(),r(),e(Rh.parseCaipAddress(s)))});st.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=mn.state.socialWindow,i=mn.state.socialProvider,o=!1,a=null;const c=Y.subscribeKey("activeCaipAddress",l=>{l&&(e&&qn.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===pe.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=it.getAuthConnector();if(g&&!o){s&&(s.close(),mn.setSocialWindow(void 0,Y.state.activeChain),s=mn.state.socialWindow),o=!0;const y=f.data.resultUri;i&&lr.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}});const m=Y.state.activeCaipNetwork;if(await g.provider.connectSocial({uri:y,chainId:m==null?void 0:m.caipNetworkId}),i){et.setConnectedSocialProvider(i),await st.connectExternal({id:g.id,type:g.type,socialUri:y},g.chain);const w=Y.state.activeCaipAddress;if(!w){u(new Error("Failed to connect"));return}l(Rh.parseCaipAddress(w)),lr.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&lr.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&lr.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(mn.setSocialProvider(t,Y.state.activeChain),i=mn.state.socialProvider,lr.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=qn.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=it.getAuthConnector();if(p&&!mn.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();mn.setFarcasterUrl(g,Y.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=it.getAuthConnector();a=ut.returnOpenHref(`${pe.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){mn.setSocialWindow(a,Y.state.activeChain),s=mn.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=qn.subscribeKey("open",c=>{c||(St.state.view!==e&&St.replace(e),a(),i(new Error("Modal closed")))})}const o=Y.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&qn.close(),o(),s(Rh.parseCaipAddress(a)))})})},async updateEmail(){const t=et.getConnectedConnectorId(Y.state.activeChain),e=it.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==pe.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return St.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(qn.close(),clearInterval(i),o(),r({email:a}))},qFe),o=qn.subscribeKey("open",a=>{a||(St.state.view!=="Connect"&&St.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return Y.checkIfSmartAccountEnabled()&&Fl(t)===Os.ACCOUNT_TYPES.EOA}};function WX(){var r,s;const t=((r=Y.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=Y.state.activeCaipNetwork)==null?void 0:s.id)||1,n=gi.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function Fl(t){var n;return(n=Y.getAccountData(t))==null?void 0:n.preferredAccountType}const HX={getConnectionStatus(t,e){const n=it.state.activeConnectorIds[e],r=st.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=It.state.remoteFeatures)!=null&&a.multiWallet),n=it.state.activeConnectorIds[t],r=st.getConnections(t),i=(st.state.recentConnections.get(t)??[]).filter(c=>it.getConnectorById(c.connectorId)),o=HX.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},Gf=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Br=tr({...Gf}),VFe={state:Br,subscribeKey(t,e){return Si(Br,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ut.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Br.message=Gf.message,Br.variant=Gf.variant,Br.svg=Gf.svg,Br.open=Gf.open,Br.autoClose=Gf.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Gf.autoClose}){Br.open?(Br.open=!1,setTimeout(()=>{Br.message=t,Br.variant=n,Br.svg=e,Br.open=!0,Br.autoClose=r},150)):(Br.message=t,Br.variant=n,Br.svg=e,Br.open=!0,Br.autoClose=r)}},Ph=VFe,Wn=tr({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),KFe={state:Wn,subscribe(t){return co(Wn,()=>t(Wn))},setLastNetworkInView(t){Wn.lastNetworkInView=t},async fetchTransactions(t,e){var n;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Wn.loading=!0;try{const r=await _t.fetchTransactions({account:t,cursor:Wn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),s=bv.filterSpamTransactions(r.data),i=bv.filterByConnectedChain(s),o=[...Wn.transactions,...i];Wn.loading=!1,e==="coinbase"?Wn.coinbaseTransactions=bv.groupTransactionsByYearAndMonth(Wn.coinbaseTransactions,r.data):(Wn.transactions=o,Wn.transactionsByYear=bv.groupTransactionsByYearAndMonth(Wn.transactionsByYear,i)),Wn.empty=o.length===0,Wn.next=r.next?r.next:void 0}catch{const s=Y.state.activeChain;lr.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:It.state.projectId,cursor:Wn.next,isSmartAccount:Fl(s)===Os.ACCOUNT_TYPES.SMART_ACCOUNT}}),Ph.showError("Failed to fetch transactions"),Wn.loading=!1,Wn.empty=!0,Wn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Wn.next=void 0},resetTransactions(){Wn.transactions=[],Wn.transactionsByYear={},Wn.lastNetworkInView=void 0,Wn.loading=!1,Wn.empty=!1,Wn.next=void 0}},bv=Ma(KFe,"API_ERROR"),Zt=tr({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Lf;const YFe={state:Zt,subscribe(t){return co(Zt,()=>t(Zt))},subscribeKey(t,e){return Si(Zt,t,e)},_getClient(){return Zt._client},setClient(t){Zt._client=x0(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);st.syncStorageConnections(e)},syncStorageConnections(t){const e=et.getConnections(),n=t??Array.from(Y.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(Zt.recentConnections);i.set(r,s),Zt.recentConnections=i}},getConnections(t){return t?Zt.connections.get(t)??[]:[]},hasAnyConnection(t){const e=st.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){var t,e,n,r;if(ut.isTelegram()||ut.isSafari()&&ut.isIos()){if(Lf){await Lf,Lf=void 0;return}if(!ut.isPairingExpired(Zt==null?void 0:Zt.wcPairingExpiry)){const s=Zt.wcUri;Zt.wcUri=s;return}Lf=(e=(t=st._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),st.state.status="connecting",await Lf,Lf=void 0,Zt.wcPairingExpiry=void 0,st.state.status="connected"}else await((r=(n=st._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=st._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&Y.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=st._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||Y.state.activeChain;e&&it.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;qn.setLoading(!0,Y.state.activeChain);const n=it.getAuthConnector();n&&(mn.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),et.setPreferredAccountTypes(Object.entries(Y.state.chains).reduce((s,[i,o])=>{const a=i,c=Fl(a);return c!==void 0&&(s[a]=c),s},{})),await st.reconnectExternal(n),qn.setLoading(!1,Y.state.activeChain),lr.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=st._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=st._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=st._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=st._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=st._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=st._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=st._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=st._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=st._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=st._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=st._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=st._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Zt.wcUri=void 0,Zt.wcPairingExpiry=void 0,Zt.wcLinking=void 0,Zt.recentWallet=void 0,Zt.status="disconnected",bv.resetTransactions(),et.deleteWalletConnectDeepLink()},resetUri(){Zt.wcUri=void 0,Zt.wcPairingExpiry=void 0,Lf=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=st.state;t&&et.setWalletConnectDeepLink(t),e&&et.setAppKitRecent(e),lr.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=St.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Zt.wcBasic=t},setUri(t){Zt.wcUri=t,Zt.wcPairingExpiry=ut.getPairingExpiry()},setWcLinking(t){Zt.wcLinking=t},setWcError(t){Zt.wcError=t,Zt.buffering=!1},setRecentWallet(t){Zt.recentWallet=t},setBuffering(t){Zt.buffering=t},setStatus(t){Zt.status=t},setIsSwitchingConnection(t){Zt.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=st._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new N0("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(Zt.connections);n.set(e,t),Zt.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=mn.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&Xb.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await st.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=it.getConnectorById(t.connectorId),s=t.connectorId===pe.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await st.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await st.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=it.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===pe.CONNECTOR_ID.AUTH,a=t.connectorId===pe.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&Xb.isSocialProvider(i)){const{address:d}=await Xb.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){qn.open({view:"ConnectingFarcaster"})},onConnect(){St.replace("ProfileWallets")}});c=d}else{const{address:d}=await Xb.connectEmail({closeModalOnConnect:r,onOpen(){qn.open({view:"EmailLogin"})},onConnect(){St.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await Xb.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){qn.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){St.replace("ProfileWallets")}});c=d}else{const d=await st.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await st.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=mn.getCaipAddress(n);if(o){const{address:c}=Rh.parseCaipAddress(o);i=c}const a=HX.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await st.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await st.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},st=Ma(YFe),qm=tr({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Wy={state:qm,subscribe(t){return co(qm,()=>t(qm))},subscribeOpen(t){return Si(qm,"open",t)},set(t){Object.assign(qm,{...qm,...t})}},QFe={async getTokenList(){var r;const t=Y.state.activeCaipNetwork,e=await _t.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=Y.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(st==null?void 0:st.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await _t.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await _t.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=st.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await vU.getMyTokensWithBalance(t);return mn.setTokenBalance(e,Y.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:WX(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Cn=tr({tokenBalances:[],loading:!1}),JFe={state:Cn,subscribe(t){return co(Cn,()=>t(Cn))},subscribeKey(t,e){return Si(Cn,t,e)},setToken(t){t&&(Cn.token=x0(t))},setTokenAmount(t){Cn.sendTokenAmount=t},setReceiverAddress(t){Cn.receiverAddress=t},setReceiverProfileImageUrl(t){Cn.receiverProfileImageUrl=t},setReceiverProfileName(t){Cn.receiverProfileName=t},setNetworkBalanceInUsd(t){Cn.networkBalanceInUSD=t},setLoading(t){Cn.loading=t},async sendToken(){var t;try{switch(wn.setLoading(!0),(t=Y.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await wn.sendEvmToken();return;case"solana":await wn.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{wn.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=Y.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=Fl(t);if(!wn.state.sendTokenAmount||!wn.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!wn.state.token)throw new Error("A token is required");(n=wn.state.token)!=null&&n.address?(lr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Os.ACCOUNT_TYPES.SMART_ACCOUNT,token:wn.state.token.address,amount:wn.state.sendTokenAmount,network:((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await wn.sendERC20Token({receiverAddress:wn.state.receiverAddress,tokenAddress:wn.state.token.address,sendTokenAmount:wn.state.sendTokenAmount,decimals:wn.state.token.quantity.decimals})):(lr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Os.ACCOUNT_TYPES.SMART_ACCOUNT,token:wn.state.token.symbol||"",amount:wn.state.sendTokenAmount,network:((s=Y.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await wn.sendNativeToken({receiverAddress:wn.state.receiverAddress,sendTokenAmount:wn.state.sendTokenAmount,decimals:wn.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Cn.loading=!0;const e=(i=Y.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=Y.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=Y.state.activeCaipAddress,s=r?ut.getPlainAddress(r):void 0;if(Cn.lastRetry&&!ut.isAllowedRetry(Cn.lastRetry,30*gi.ONE_SEC_MS))return Cn.loading=!1,[];try{if(s&&e&&n){const a=await vU.getMyTokensWithBalance();return Cn.tokenBalances=a,Cn.lastRetry=void 0,a}}catch(a){Cn.lastRetry=Date.now(),t==null||t(a),Ph.showError("Token Balance Unavailable")}finally{Cn.loading=!1}return[]},fetchNetworkBalance(){if(Cn.tokenBalances.length===0)return;const t=QFe.mapBalancesToSwapTokens(Cn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===WX());e&&(Cn.networkBalanceInUSD=e?wFe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;St.pushTransactionStack({});const e=t.receiverAddress,n=mn.state.address,r=st.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await st.sendTransaction({chainNamespace:pe.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),lr.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Fl("eip155")===Os.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=wn.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=st._getClient())==null||a.updateBalance("eip155"),wn.resetSend()},async sendERC20Token(t){St.pushTransactionStack({onSuccess(){St.replace("Account")}});const e=st.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(mn.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=ut.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await st.writeContract({fromAddress:mn.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:_Fe.getERC20Abi(n),chainNamespace:pe.CHAIN.EVM}),wn.resetSend()}},async sendSolanaToken(){var t;if(!wn.state.sendTokenAmount||!wn.state.receiverAddress)throw new Error("An amount and receiver address are required");St.pushTransactionStack({onSuccess(){St.replace("Account")}}),await st.sendTransaction({chainNamespace:"solana",to:wn.state.receiverAddress,value:wn.state.sendTokenAmount}),(t=st._getClient())==null||t.updateBalance("solana"),wn.resetSend()},resetSend(){Cn.token=void 0,Cn.sendTokenAmount=void 0,Cn.receiverAddress=void 0,Cn.receiverProfileImageUrl=void 0,Cn.receiverProfileName=void 0,Cn.loading=!1,Cn.tokenBalances=[]}},wn=Ma(JFe),vO={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},SA={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},ke=tr({chains:yFe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),ZFe={state:ke,subscribe(t){return co(ke,()=>{t(ke)})},subscribeKey(t,e){return Si(ke,t,e)},subscribeChainProp(t,e,n){let r;return co(ke.chains,()=>{var i;const s=n||ke.activeChain;if(s){const o=(i=ke.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=et.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=It.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(ke.noAdapters=!0),ke.noAdapters||(ke.activeChain=a==null?void 0:a.namespace,ke.activeCaipNetwork=i,Y.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),ke.activeChain&&Wy.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),h=et.getPreferredAccountTypes()||{},f={...It.state.defaultAccountTypes,...h};Y.state.chains.set(u,{namespace:u,networkState:tr({...SA,caipNetwork:d==null?void 0:d[0]}),accountState:tr({...vO,preferredAccountType:f[u]}),caipNetworks:d??[],...n}),Y.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(ke.activeChain===t){const r=Array.from(ke.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&Y.setActiveCaipNetwork(s)}}ke.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");ke.chains.set(t.namespace,{namespace:t.namespace,networkState:{...SA,caipNetwork:r[0]},accountState:vO,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),Y.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=ke.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),ke.chains.set(t.chainNamespace,{...e,caipNetworks:r}),Y.setRequestedCaipNetworks(r,t.chainNamespace),it.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=ke.chains.get(t);if(n){const o=((r=ke.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&Y.setActiveCaipNetwork(n.caipNetworks[0]),ke.chains.set(t,{...n,caipNetworks:a}),Y.setRequestedCaipNetworks(a||[],t),a.length===0&&it.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=ke.chains.get(t);n&&(n.networkState={...n.networkState||SA,...e},ke.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=ke.chains.get(t);if(r){const s={...r.accountState||vO,...e};ke.chains.set(t,{...r,accountState:s}),(ke.chains.size===1||ke.activeChain===t)&&(e.caipAddress&&(ke.activeCaipAddress=e.caipAddress),mn.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=ke.chains.get(t);if(n){const r={...n.networkState||SA,...e};ke.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){Y.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;ke.activeChain=t;const e=t?ke.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(ke.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,ke.activeCaipNetwork=n,Y.setChainNetworkData(t,{caipNetwork:n}),et.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Wy.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;ke.activeChain!==t.chainNamespace&&Y.setIsSwitchingNamespace(!0);const e=ke.chains.get(t.chainNamespace);ke.activeChain=t.chainNamespace,ke.activeCaipNetwork=t,Y.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?ke.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:ke.activeCaipAddress=void 0,Y.setAccountProp("caipAddress",ke.activeCaipAddress,t.chainNamespace),e&&mn.replaceState(e.accountState),wn.resetSend(),Wy.set({activeChain:ke.activeChain,selectedNetworkId:(i=ke.activeCaipNetwork)==null?void 0:i.caipNetworkId}),et.setActiveCaipNetworkId(t.caipNetworkId),!Y.checkIfSupportedNetwork(t.chainNamespace)&&It.state.enableNetworkSwitch&&!It.state.allowUnsupportedChain&&!st.state.wcBasic&&Y.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=ke.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==Y.state.activeChain,n=(s=Y.getNetworkData(t))==null?void 0:s.caipNetwork,r=Y.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await Y.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=Y.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=Y.state.chains.get(e),r=!((i=n==null?void 0:n.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=ke.activeCaipNetwork)==null?void 0:a.id)})),s=Y.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&qn.close()}catch{St.goBack()}lr.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||ke.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=ke.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||ke.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=ke.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=ke.activeChain;if(e&&(n=e),!n)return;const r=(s=ke.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=ke.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=ke.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return ut.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return ke.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=Y.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){Y.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=Y.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));it.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return ke.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=Y.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=ke.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:ke.activeCaipNetwork},getActiveCaipAddress(){return ke.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=ke.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=Y.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());Y.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||ke.activeCaipNetwork,r=Y.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!ke.activeChain)return!0;const e=Y.getRequestedCaipNetworks(ke.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){Y.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=tx.caipNetworkIdToNumber((r=ke.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=ke.activeChain;if(!e||!t)return!1;const n=Y.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){qn.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=ke.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&gi.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){Y.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=Y.getAccountProp("preferredAccountType",e);ke.activeCaipAddress=void 0,Y.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),it.removeConnectorId(e)},setIsSwitchingNamespace(t){ke.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(ke.chains.forEach(s=>{pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=ke.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=Y.state.chains.get(t))==null?void 0:e.accountState:mn.state},getNetworkData(t){var n;const e=t||ke.activeChain;if(e)return(n=Y.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=Y.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=it.state.filterByNamespace;return(t?[ke.chains.get(t)]:Array.from(ke.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?Y.getRequestedCaipNetworks(t):Y.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){ke.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return ke.lastConnectedSIWECaipNetwork}},Y=Ma(ZFe),XFe={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},GX=ut.getBlockchainApiUrl(),Li=tr({clientId:null,api:new n1({baseUrl:GX,clientId:null}),supportedChains:{http:[],ws:[]}}),_t={state:Li,async get(t){const{st:e,sv:n}=_t.getSdkProperties(),r=It.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Li.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=It.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Li.supportedChains.http.length||await _t.getSupportedNetworks()}catch{return!1}return Li.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await _t.get({path:"v1/supported-chains"});return Li.supportedChains=t,t}catch{return Li.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await _t.isNetworkSupported(e))return{avatar:"",name:""};const r=et.getIdentityFromCacheForAddress(t);if(r)return r;const s=await _t.get({path:`/v1/identity/${t}`,params:{sender:Y.state.activeCaipAddress?ut.getPlainAddress(Y.state.activeCaipAddress):void 0}});return et.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await _t.isNetworkSupported((a=Y.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?_t.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await _t.isNetworkSupported((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?_t.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await _t.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?_t.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await _t.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Li.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:It.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await _t.isNetworkSupported((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?_t.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=_t.getSdkProperties();if(!await _t.isNetworkSupported((s=Y.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return _t.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await _t.isNetworkSupported((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Li.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:gi.CONVERT_SLIPPAGE_TOLERANCE},projectId:It.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=_t.getSdkProperties();if(!await _t.isNetworkSupported((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return _t.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=_t.getSdkProperties();if(!await _t.isNetworkSupported((l=Y.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Ph.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=et.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await _t.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return et.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await _t.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?_t.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await _t.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?_t.get({path:`/v1/profile/reverse/${t}`,params:{sender:mn.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await _t.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?_t.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await _t.isNetworkSupported((i=Y.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Li.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await _t.isNetworkSupported((a=Y.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Li.api.post({path:"/v1/generators/onrampurl",params:{projectId:It.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await _t.isNetworkSupported((e=Y.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await _t.get({path:"/v1/onramp/options"})}catch{return XFe}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await _t.isNetworkSupported((s=Y.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Li.api.post({path:"/v1/onramp/quote",params:{projectId:It.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await _t.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?_t.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await _t.isNetworkSupported((s=Y.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Li.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:It.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Li.clientId=t,Li.api=new n1({baseUrl:GX,clientId:t})}},EO={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Kg(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},vU={async getMyTokensWithBalance(t){const e=mn.state.address,n=Y.state.activeCaipNetwork,r=it.getConnectorId("eip155")===pe.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=et.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===pe.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await _t.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=EO.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await st.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await st.walletGetAssets({account:t,chainFilter:[s]});if(!EO.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>EO.createBalance(l,e.caipNetworkId));return et.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},Hc=tr({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),eje={state:Hc,replaceState(t){t&&Object.assign(Hc,x0(t))},subscribe(t){return Y.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return Y.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){Y.setAccountProp("status",t,e)},getCaipAddress(t){return Y.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?ut.getPlainAddress(t):void 0;e===Y.state.activeChain&&(Y.state.activeCaipAddress=t),Y.setAccountProp("caipAddress",t,e),Y.setAccountProp("address",n,e)},setBalance(t,e,n){Y.setAccountProp("balance",t,n),Y.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){Y.setAccountProp("profileName",t,e)},setProfileImage(t,e){Y.setAccountProp("profileImage",t,e)},setUser(t,e){Y.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){Y.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){Y.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){Y.setAccountProp("currentTab",t,Y.state.activeChain)},setTokenBalance(t,e){t&&Y.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){Y.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=Y.getAccountProp("addressLabels",n)||new Map;r.set(t,e),Y.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=Y.getAccountProp("addressLabels",e)||new Map;n.delete(t),Y.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){Y.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){Y.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&Y.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){Y.setAccountProp("socialWindow",t?x0(t):void 0,e)},setFarcasterUrl(t,e){Y.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Hc.balanceLoading=!0;const e=(i=Y.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=Y.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=Y.state.activeCaipAddress,s=r?ut.getPlainAddress(r):void 0;if(Hc.lastRetry&&!ut.isAllowedRetry(Hc.lastRetry,30*gi.ONE_SEC_MS))return Hc.balanceLoading=!1,[];try{if(s&&e&&n){const a=await vU.getMyTokensWithBalance();return mn.setTokenBalance(a,n),Hc.lastRetry=void 0,Hc.balanceLoading=!1,a}}catch(a){Hc.lastRetry=Date.now(),t==null||t(a),Ph.showError("Token Balance Unavailable")}finally{Hc.balanceLoading=!1}return[]},resetAccount(t){Y.resetAccount(t)}},mn=Ma(eje),tje={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=Y.state.activeCaipNetwork,r=St.state.data;if(t.id===(n==null?void 0:n.id))return;const i=mn.getCaipAddress(Y.state.activeChain),o=t.chainNamespace!==Y.state.activeChain,a=mn.getCaipAddress(t.chainNamespace),l=it.getConnectorId(Y.state.activeChain)===pe.CONNECTOR_ID.AUTH,u=pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?St.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?St.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):St.push("SwitchNetwork",{...r,network:t})}},Mi=tr({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),nje={state:Mi,subscribe(t){return co(Mi,()=>t(Mi))},subscribeKey(t,e){return Si(Mi,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,n=Y.state.activeChain,r=e&&e!==n,s=(i=Y.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(st.state.wcBasic?wt.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await wt.prefetch(),it.setFilterByNamespace(t==null?void 0:t.namespace),qn.setLoading(!0,e),e&&r){const a=((o=Y.getNetworkData(e))==null?void 0:o.caipNetwork)||Y.getRequestedCaipNetworks(e)[0];a&&tje.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=Y.state.noAdapters;It.state.manualWCControl||a&&!s?ut.isMobile()?St.reset("AllWallets"):St.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?St.reset(t.view,t.data):s?St.reset("Account"):St.reset("Connect")}Mi.open=!0,Wy.set({open:!0}),lr.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=It.state.enableEmbedded,e=!!Y.state.activeCaipAddress;Mi.open&&lr.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Mi.open=!1,St.reset("Connect"),qn.clearLoading(),t?e?St.replace("Account"):St.push("Connect"):Wy.set({open:!1}),st.resetUri()},setLoading(t,e){e&&Mi.loadingNamespaceMap.set(e,t),Mi.loading=t,Wy.set({loading:t})},clearLoading(){Mi.loadingNamespaceMap.clear(),Mi.loading=!1},shake(){Mi.shake||(Mi.shake=!0,setTimeout(()=>{Mi.shake=!1},500))}},qn=Ma(nje),L9=2147483648,rje={convertEVMChainIdToCoinType(t){if(t>=L9)throw new Error("Invalid chainId");return(L9|t)>>>0}},ea=tr({suggestions:[],loading:!1}),sje={state:ea,subscribe(t){return co(ea,()=>t(ea))},subscribeKey(t,e){return Si(ea,t,e)},async resolveName(t){var e,n;try{return await _t.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await _t.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{ea.loading=!0,ea.suggestions=[];const e=await _t.getEnsNameSuggestions(t);return ea.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],ea.suggestions}catch(e){const n=wS.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{ea.loading=!1}},async getNamesForAddress(t){try{if(!Y.state.activeCaipNetwork)return[];const n=et.getEnsFromCacheForAddress(t);if(n)return n;const r=await _t.reverseLookupEnsName({address:t});return et.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=wS.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=Y.state.activeCaipNetwork,n=mn.state.address,r=it.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");ea.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});St.pushTransactionStack({onCancel(){St.replace("RegisterAccountName")}});const i=await st.signMessage(s);ea.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=rje.convertEVMChainIdToCoinType(Number(o));await _t.registerEnsName({coinType:a,address:n,signature:i,message:s}),mn.setProfileName(t,e.chainNamespace),St.replace("RegisterAccountNameSuccess")}catch(s){const i=wS.parseEnsApiError(s,`Error registering name ${t}`);throw St.replace("RegisterAccountName"),new Error(i)}finally{ea.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},wS=Ma(sje);let Mf=null;const Hd={getSIWX(){return It.state.siwx},async initializeIfEnabled(){var i;const t=It.state.siwx,e=Y.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(Y.checkIfSupportedNetwork(n))try{if(Mf&&await Mf,(await t.getSessions(`${n}:${r}`,s)).length)return;await qn.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),lr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=st._getClient())==null?void 0:i.disconnect().catch(console.error)),St.reset("Connect"),Ph.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=It.state.siwx,e=ut.getPlainAddress(Y.getActiveCaipAddress()),n=Y.getActiveCaipNetwork(),r=st._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();it.getConnectorId(n.chainNamespace)===pe.CONNECTOR_ID.AUTH&&St.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),Y.setLastConnectedSIWECaipNetwork(n),qn.close(),lr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!qn.state.open||St.state.view==="ApproveTransaction")&&await qn.open({view:"SIWXSignMessage"}),Ph.showError("Error signing message"),lr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=Y.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,ut.getPlainAddress(Y.getActiveCaipAddress())||""));s&&s.length>0?await Y.switchActiveNetwork(r):await st.disconnect()}else await st.disconnect()}else qn.close();qn.close(),lr.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=Y.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,ut.getPlainAddress(Y.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=It.state.siwx,e=ut.getPlainAddress(Y.getActiveCaipAddress()),n=Y.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=St.state.view==="ApproveTransaction",r=St.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var l;const i=Hd.getSIWX();if(!i||!s.includes(pe.CHAIN.EVM)){const u=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:u.address,chainId:u.chainId,accounts:u.accounts}}const o=await i.createMessage({chainId:((l=Y.getActiveCaipNetwork())==null?void 0:l.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),a={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},c=await t.connect({chainId:e,socialUri:n,siwxMessage:a,preferredAccountType:r});return a.accountAddress=c.address,a.serializedMessage=c.message||"",c.signature&&c.message&&await Hd.addEmbeddedWalletSession(a,c.message,c.signature),{address:c.address,chainId:c.chainId,accounts:c.accounts}},async addEmbeddedWalletSession(t,e,n){if(Mf)return Mf;const r=Hd.getSIWX();return r?(Mf=r.addSession({data:t,message:e,signature:n}).finally(()=>{Mf=null}),Mf):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=Hd.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=Y.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Ph.showLoading("Authenticating...",{autoClose:!1}),mn.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),lr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Hd.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),lr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Hd.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Ph.hide()}}return!0},getSIWXEventProperties(){var e;const t=Y.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=Y.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:Fl(t)===Os.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},bo={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:pe.CHAIN.EVM,CONNECTOR_TYPE_AUTH:"AUTH"},To={ConnectorExplorerIds:{[pe.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[pe.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[pe.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[pe.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[pe.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[bo.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[bo.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[bo.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[bo.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[bo.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[bo.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[bo.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[bo.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[bo.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[bo.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[bo.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[pe.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[pe.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[pe.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[pe.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[pe.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[pe.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[pe.CONNECTOR_ID.INJECTED]:"Browser Wallet",[pe.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[pe.CONNECTOR_ID.COINBASE]:"Coinbase",[pe.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[pe.CONNECTOR_ID.LEDGER]:"Ledger",[pe.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[pe.CONNECTOR_ID.INJECTED]:"INJECTED",[pe.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[pe.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[pe.CONNECTOR_ID.AUTH]:"AUTH",[bo.CONNECTOR_TYPE_AUTH]:"AUTH"}},Qi={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${bo.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=Y.state.activeChain;return pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>it.getConnectorId(e)===pe.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}},ije=new AbortController,Rd={EmbeddedWalletAbortController:ije,ALERT_ERRORS:{IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"}}},oje="rpc.walletconnect.org";function M9(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const _O=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],vv={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===oje}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:pe.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${pe.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return _O.includes(e)?M9(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,y;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((y=r==null?void 0:r[i])==null?void 0:y.map(m=>m.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:To.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>vv.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Sh(a.url,a.config))}),_O.includes(t.caipNetworkId)&&r.push(Sh(M9(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Sh(a))}),xI(r)},extendWagmiTransports(t,e,n){if(_O.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return xI([n,Sh(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:pe.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=et.getActiveCaipNetworkId(),n=Y.getAllRequestedCaipNetworks(),r=Array.from(((c=Y.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},U9={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Cs={set(t,e){gl.isClient&&localStorage.setItem(`${Ze.STORAGE_KEY}${t}`,e)},get(t){return gl.isClient?localStorage.getItem(`${Ze.STORAGE_KEY}${t}`):null},delete(t,e){gl.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ze.STORAGE_KEY}${t}`))}},IA=30*1e3,gl={checkIfAllowedToTriggerEmail(){const t=Cs.get(Ze.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<IA){const n=Math.ceil((IA-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Cs.get(Ze.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<IA)return Math.ceil((IA-e)/1e3)}return 0},checkIfRequestExists(t){return Os.NOT_SAFE_RPC_METHODS.includes(t.method)||Os.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(U9.transactionHash))||(t==null?void 0:t.match(U9.signedMessage)))?Ze.RPC_RESPONSE_TYPE_TX:Ze.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Os.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"},mr=E.object({message:E.string()});function Be(t){return E.literal(Ze[t])}const dT=E.object({serializedMessage:E.string().optional(),accountAddress:E.string(),chainId:E.string(),notBefore:E.string().optional(),domain:E.string(),uri:E.string(),version:E.string(),nonce:E.string(),statement:E.string().optional(),resources:E.array(E.string()).optional(),requestId:E.string().optional(),issuedAt:E.string().optional(),expirationTime:E.string().optional()});E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const aje=E.object({chainId:E.string().or(E.number()),rpcUrl:E.optional(E.string())}),cje=E.object({email:E.string().email()}),lje=E.object({otp:E.string()}),uje=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number())),siwxMessage:E.optional(dT),rpcUrl:E.optional(E.string())}),dje=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string()),siwxMessage:E.optional(dT),rpcUrl:E.optional(E.string())}),hje=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),fje=E.object({email:E.string().email()}),pje=E.object({otp:E.string()}),gje=E.object({otp:E.string()}),mje=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),yje=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),wje=E.object({type:E.string()}),bje=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),vje=E.object({url:E.string()}),Eje=E.object({userName:E.string()}),_je=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([Os.ACCOUNT_TYPES.EOA,Os.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(dT)}),Cje=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),Aje=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([Os.ACCOUNT_TYPES.EOA,Os.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(dT)}),Sje=E.object({uri:E.string()}),Ije=E.object({isConnected:E.boolean()}),xje=E.object({chainId:E.string().or(E.number())}),Nje=E.object({chainId:E.string().or(E.number())}),Tje=E.object({newEmail:E.string().email()}),Rje=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const Pje=E.object({version:E.string().optional()}),Oje=E.object({type:E.string(),address:E.string()}),kje=E.any(),Dje=E.object({method:E.literal("eth_accounts")}),Lje=E.object({method:E.literal("eth_blockNumber")}),Mje=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),Uje=E.object({method:E.literal("eth_chainId")}),$je=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),Bje=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),Fje=E.object({method:E.literal("eth_gasPrice")}),jje=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),zje=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),Wje=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),Hje=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),Gje=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),qje=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),Vje=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),Kje=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),Yje=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),Qje=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),Jje=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),Zje=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),Xje=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),e9e=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),t9e=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),n9e=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),r9e=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),s9e=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),i9e=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),o9e=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),a9e=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),c9e=E.object({method:E.literal("eth_newBlockFilter")}),l9e=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),u9e=E.object({method:E.literal("eth_newPendingTransactionFilter")}),d9e=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),h9e=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),f9e=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),$9=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),p9e=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),g9e=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),m9e=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),y9e=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),w9e=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),b9e=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),v9e=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),E9e=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),_9e=E.object({method:E.literal("wallet_getCapabilities"),params:E.array(E.string().or(E.number()).optional()).optional()}),C9e=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),A9e=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),S9e=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),B9=E.object({token:E.string()}),Fe=E.object({id:E.string().optional()}),ev={appEvent:Fe.extend({type:Be("APP_SWITCH_NETWORK"),payload:aje}).or(Fe.extend({type:Be("APP_CONNECT_EMAIL"),payload:cje})).or(Fe.extend({type:Be("APP_CONNECT_DEVICE")})).or(Fe.extend({type:Be("APP_CONNECT_OTP"),payload:lje})).or(Fe.extend({type:Be("APP_CONNECT_SOCIAL"),payload:uje})).or(Fe.extend({type:Be("APP_GET_FARCASTER_URI")})).or(Fe.extend({type:Be("APP_CONNECT_FARCASTER")})).or(Fe.extend({type:Be("APP_GET_USER"),payload:E.optional(dje)})).or(Fe.extend({type:Be("APP_GET_SOCIAL_REDIRECT_URI"),payload:hje})).or(Fe.extend({type:Be("APP_SIGN_OUT")})).or(Fe.extend({type:Be("APP_IS_CONNECTED"),payload:E.optional(B9)})).or(Fe.extend({type:Be("APP_GET_CHAIN_ID")})).or(Fe.extend({type:Be("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Fe.extend({type:Be("APP_INIT_SMART_ACCOUNT")})).or(Fe.extend({type:Be("APP_SET_PREFERRED_ACCOUNT"),payload:wje})).or(Fe.extend({type:Be("APP_RPC_REQUEST"),payload:$9.or(S9e).or(Dje).or(Lje).or(Mje).or(Uje).or($je).or(Bje).or(Fje).or(jje).or(zje).or(Wje).or(Hje).or(Gje).or(qje).or(Vje).or(Kje).or(Yje).or(Qje).or(Jje).or(Zje).or(Xje).or(e9e).or(t9e).or(n9e).or(r9e).or(s9e).or(i9e).or(o9e).or(a9e).or(c9e).or(l9e).or(u9e).or(d9e).or(h9e).or(f9e).or($9).or(p9e).or(g9e).or(m9e).or(y9e).or(w9e).or(b9e).or(E9e).or(v9e).or(_9e).or(C9e).or(A9e).and(E.object({chainId:E.string().or(E.number()).optional(),chainNamespace:E.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:E.string().optional()}))})).or(Fe.extend({type:Be("APP_UPDATE_EMAIL"),payload:fje})).or(Fe.extend({type:Be("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:pje})).or(Fe.extend({type:Be("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:gje})).or(Fe.extend({type:Be("APP_SYNC_THEME"),payload:mje})).or(Fe.extend({type:Be("APP_SYNC_DAPP_DATA"),payload:yje})).or(Fe.extend({type:Be("APP_RELOAD")})).or(Fe.extend({type:Be("APP_RPC_ABORT")})),frameEvent:Fe.extend({type:Be("FRAME_SWITCH_NETWORK_ERROR"),payload:mr}).or(Fe.extend({type:Be("FRAME_SWITCH_NETWORK_SUCCESS"),payload:Nje})).or(Fe.extend({type:Be("FRAME_CONNECT_EMAIL_SUCCESS"),payload:bje})).or(Fe.extend({type:Be("FRAME_CONNECT_EMAIL_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:vje})).or(Fe.extend({type:Be("FRAME_GET_FARCASTER_URI_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:Eje})).or(Fe.extend({type:Be("FRAME_CONNECT_FARCASTER_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_CONNECT_OTP_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_CONNECT_OTP_SUCCESS")})).or(Fe.extend({type:Be("FRAME_CONNECT_DEVICE_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Fe.extend({type:Be("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:_je})).or(Fe.extend({type:Be("FRAME_CONNECT_SOCIAL_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_GET_USER_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_GET_USER_SUCCESS"),payload:Aje})).or(Fe.extend({type:Be("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:Sje})).or(Fe.extend({type:Be("FRAME_SIGN_OUT_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_SIGN_OUT_SUCCESS")})).or(Fe.extend({type:Be("FRAME_IS_CONNECTED_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_IS_CONNECTED_SUCCESS"),payload:Ije})).or(Fe.extend({type:Be("FRAME_GET_CHAIN_ID_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_GET_CHAIN_ID_SUCCESS"),payload:xje})).or(Fe.extend({type:Be("FRAME_RPC_REQUEST_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_RPC_REQUEST_SUCCESS"),payload:kje})).or(Fe.extend({type:Be("FRAME_SESSION_UPDATE"),payload:B9})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_SUCCESS"),payload:Cje})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:Tje})).or(Fe.extend({type:Be("FRAME_SYNC_THEME_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_SYNC_THEME_SUCCESS")})).or(Fe.extend({type:Be("FRAME_SYNC_DAPP_DATA_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Fe.extend({type:Be("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:Rje})).or(Fe.extend({type:Be("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:Oje})).or(Fe.extend({type:Be("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_READY"),payload:Pje})).or(Fe.extend({type:Be("FRAME_RELOAD_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_RELOAD_SUCCESS")}))};function CO(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function I9e({projectId:t,chainId:e,version:n,enableLogger:r,rpcUrl:s=pe.BLOCKCHAIN_API_RPC_URL}){const i=new URL(RFe);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",n),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",s),i.toString()}class x9e{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:i=pe.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const o=document.getElementById("w3m-iframe");this.iframe&&!o&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(o,a,c)=>{function l({data:u}){if(!CO(Ze.FRAME_EVENT_KEY,u))return;const d=ev.frameEvent.parse(u);d.id===o&&(a(d),window.removeEventListener("message",l))}gl.isClient&&(window.addEventListener("message",l),c.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:o=>{gl.isClient&&window.addEventListener("message",({data:a})=>{if(!CO(Ze.FRAME_EVENT_KEY,a))return;const c=ev.frameEvent.parse(a);o(c)})},onAppEvent:o=>{gl.isClient&&window.addEventListener("message",({data:a})=>{if(!CO(Ze.APP_EVENT_KEY,a))return;const c=ev.appEvent.parse(a);o(c)})},postAppEvent:o=>{var a;if(gl.isClient){if(!((a=this.iframe)!=null&&a.contentWindow))throw new Error("W3mFrame: iframe is not set");ev.appEvent.parse(o),this.iframe.contentWindow.postMessage(o,"*")}},postFrameEvent:o=>{if(gl.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");ev.frameEvent.parse(o),parent.postMessage(o,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),this.rpcUrl=i,n&&(this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),gl.isClient)){const o=document.createElement("iframe");o.id="w3m-iframe",o.src=I9e({projectId:e,chainId:r,version:OFe,enableLogger:s,rpcUrl:this.rpcUrl}),o.name="w3m-secure-iframe",o.style.position="fixed",o.style.zIndex="999999",o.style.display="none",o.style.border="none",o.style.animationDelay="0s, 50ms",o.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",o.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=o,this.iframe.onerror=()=>{var a;(a=this.frameLoadPromiseResolver)==null||a.reject("Unable to load email login dependency")},this.events.onFrameEvent(a=>{var c;a.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(c=this.frameLoadPromiseResolver)==null||c.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class N9e{constructor(e){var i;const n=im({level:PFe}),{logger:r,chunkLoggerController:s}=jN({opts:n});this.logger=Ls(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class T9e{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new N9e(e)),this.abortController=i,this.getActiveCaipNetwork=o;const a=this.getRpcUrl(n);this.w3mFrame=new x9e({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:a}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Ze.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Cs.get(Ze.EMAIL_LOGIN_USED_KEY)}getEmail(){return Cs.get(Ze.EMAIL)}getUsername(){return Cs.get(Ze.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Ze.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{gl.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Ze.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Ze.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Ze.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Ze.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Ze.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Ze.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Ze.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Ze.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Ze.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Ze.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Ze.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Ze.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Ze.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:Ze.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ze.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:Ze.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Ze.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Ze.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:Ze.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Ze.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if(Os.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",l=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=l,n.rpcUrl=this.getRpcUrl(l),(s=this.rpcRequestHandler)==null||s.call(this,e);const u=await this.appEvent({type:Ze.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,u,n),u}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ze.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ze.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Ze.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ze.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ze.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ze.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Ze.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Os.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:n,method:r})=>{Os.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:Ze.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Ze.APP_SYNC_DAPP_DATA,Ze.APP_SYNC_THEME,Ze.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Ze.APP_CONNECT_EMAIL,Ze.APP_CONNECT_DEVICE,Ze.APP_CONNECT_OTP,Ze.APP_CONNECT_SOCIAL,Ze.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const y=e;this.openRpcRequests=[...this.openRpcRequests,{...y.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(y,m){var w,v,A;y.id===u&&((v=m==null?void 0:(w=m.logger).info)==null||v.call(w,{framEvent:y,id:u},"Received frame response"),y.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&c(y.payload),c(void 0)):y.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&l(new Error(((A=y.payload)==null?void 0:A.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,y=>h(y,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Cs.set(Ze.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Cs.set(Ze.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Cs.set(Ze.EMAIL,e),Cs.set(Ze.EMAIL_LOGIN_USED_KEY,"true"),Cs.delete(Ze.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Cs.delete(Ze.EMAIL_LOGIN_USED_KEY),Cs.delete(Ze.EMAIL),Cs.delete(Ze.LAST_USED_CHAIN_KEY),Cs.delete(Ze.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Cs.set(Ze.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Cs.get(Ze.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Cs.set(Ze.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var s,i;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(s=Rh.parseCaipNetworkId(e))==null?void 0:s.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getActiveCaipNetwork(n);return(i=r==null?void 0:r.rpcUrls.default.http)==null?void 0:i[0]}}class Hy{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){return Hy.instance||(Hy.instance=new T9e({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o})),Hy.instance}}const R9e={DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]},F9={filterOutDuplicatesByRDNS(t){const e=It.state.enableEIP6963?it.state.connectors:[],n=et.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&ut.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=it.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=et.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=it.state,{featuredWalletIds:n}=It.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=It.state.features)==null?void 0:c.connectMethodsOrder),r=e||it.state.connectors;if(n)return n;const{injected:s,announced:i}=bS.getConnectorsByType(r,wt.state.recommended,wt.state.featured),o=s.filter(bS.showConnector),a=i.filter(bS.showConnector);return o.length||a.length?["wallet","email","social"]:R9e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&wt.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&wt.state.excludedWallets.some(r=>Qi.isLowerCaseMatch(r.name,t.name));return e||n}},bS={getConnectorsByType(t,e,n){const{customWallets:r}=It.state,s=et.getRecentWallets(),i=F9.filterOutDuplicateWallets(e),o=F9.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&wt.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&wt.state.excludedWallets.some(i=>Qi.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!ut.isMobile()||ut.isMobile()&&!e&&!st.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(Y.state.chains.values()).some(n=>it.getConnectorId(n.namespace)===pe.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=It.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const h=[{type:"walletConnect",isEnabled:It.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(y=>y.isEnabled),f=new Set(h.map(y=>y.type)),p=c.filter(y=>f.has(y)).map(y=>({type:y,isEnabled:!0})),g=h.filter(({type:y})=>!p.some(({type:w})=>w===y));return Array.from(new Set([...p,...g].map(({type:y})=>y)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!ut.isMobile())return{accounts:[],chainId:void 0};if(t.id===pe.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};Gu`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`;Gu`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`;Gu`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`;const vS={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([vS.getAddresses(t),vS.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:vS.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[To.NetworkImageIds[e.id]]}]})}},Vm={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function r1(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const j9=r1({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),z9=r1({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});r1({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});r1({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});r1({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const P9e={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},ig={getMethodsByChainNamespace(t){return P9e[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case j9.caipNetworkId:u.chains.push(j9.deprecatedCaipNetworkId);break;case z9.caipNetworkId:u.chains.push(z9.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await wS.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=ig.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",a=>{if(ig.isSessionEventData(a)){const{name:c,data:l}=a.params.event;if(c==="accountsChanged"&&Array.isArray(l)){const u=l.filter(d=>ut.isCaipAddress(d)).map(d=>Rh.parseCaipAddress(d)).filter(d=>d.chainNamespace===e);s(u)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>Rh.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};class O9e{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case pe.CHAIN.EVM:await this.syncEVMConnections(e);break;case pe.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case pe.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===pe.CONNECTOR_ID.WALLET_CONNECT){const c=ig.getWalletConnectAccounts(r,this.namespace),l=n.find(u=>{var d,h;return u.chainNamespace===this.namespace&&u.id.toString()===((h=(d=c[0])==null?void 0:d.chainId)==null?void 0:h.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await bS.fetchProviderData(a);if(c.length>0&&l){const u=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:u}),a.provider&&a.id!==pe.CONNECTOR_ID.AUTH&&a.id!==pe.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===pe.CONNECTOR_ID.WALLET_CONNECT){const c=ig.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n==null?void 0:n.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{var h,f,p,g,y,m;if(a.id===pe.CONNECTOR_ID.WALLET_CONNECT){const w=ig.getWalletConnectAccounts(r,this.namespace);w.length>0&&i({connectorId:a.id,accounts:w.map(v=>({address:v.address})),caipNetwork:n});return}const c=await a.connect(),l=await a.getAccountAddresses();let u=l==null?void 0:l.map(w=>ut.createAccount(pe.CHAIN.BITCOIN,w.address,w.purpose||"payment",w.publicKey,w.path));if(u&&u.length>1&&(u=[{namespace:pe.CHAIN.BITCOIN,publicKey:((h=u[Vm.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.publicKey)??"",path:((f=u[Vm.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.path)??"",address:((p=u[Vm.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.address)??"",type:"payment"},{namespace:pe.CHAIN.BITCOIN,publicKey:((g=u[Vm.ACCOUNT_INDEXES.ORDINAL])==null?void 0:g.publicKey)??"",path:((y=u[Vm.ACCOUNT_INDEXES.ORDINAL])==null?void 0:y.path)??"",address:((m=u[Vm.ACCOUNT_INDEXES.ORDINAL])==null?void 0:m.address)??"",type:"ordinal"}]),!(a.chains.find(w=>w.id===(n==null?void 0:n.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(w=>({address:w.address,type:w.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>Qi.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>Qi.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>Qi.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>Qi.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>Qi.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}class qX{constructor({provider:e,namespace:n}){this.id=pe.CONNECTOR_ID.WALLET_CONNECT,this.name=To.ConnectorNamesMap[pe.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=To.ConnectorImageIds[pe.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=Y.getCaipNetworks.bind(Y),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=It.state.universalProviderConfigOverride,s=ig.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Hd.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:k9e})}}const k9e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],D9e=[pe.CONNECTOR_ID.AUTH,pe.CONNECTOR_ID.WALLET_CONNECT];class L9e{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>Y.getCaipNetworks(n),this.getConnectorId=n=>it.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new O9e({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:pe.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:pe.CONNECTOR_ID.AUTH,type:"AUTH",name:pe.CONNECTOR_NAMES.AUTH,provider:e,imageId:To.ConnectorImageIds[pe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!Qi.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){mn.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=Fl(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof qX);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=ut.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=ut.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=ut.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&Qi.isLowerCaseMatch(this.getConnectorId(pe.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=ut.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),Qi.isLowerCaseMatch(this.getConnectorId(pe.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?vS.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),Qi.isLowerCaseMatch(this.getConnectorId(pe.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(D9e.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}function M9e(t){let e=[],n,r;function s(a){return tx.parseEvmChainId(a)||1}function i(){var a;return n||(n=Hy.getInstance({projectId:t.options.projectId,chainId:(a=Y.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?Hf.open(Rd.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?Hf.open(Rd.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&Hf.open(Rd.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:Rd.EmbeddedWalletAbortController,getActiveCaipNetwork:c=>Y.getActiveCaipNetwork(c)})),n}async function o(a={}){var g;const c=i();let l=a.chainId;if(a.isReconnecting){const y=tx.parseEvmChainId(c.getLastUsedChainId()||""),m=(g=t.chains)==null?void 0:g[0].id;if(l=y||m,!l)throw new Error("ChainId not found in provider")}const u=Fl("eip155"),{address:d,chainId:h,accounts:f}=await Hd.authConnectorAuthenticate({authConnector:c,chainId:l,preferredAccountType:u,socialUri:a.socialUri,chainNamespace:pe.CHAIN.EVM});e=(f==null?void 0:f.map(y=>y.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:pe.CONNECTOR_ID.AUTH,name:pe.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:pe.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=Hy.getInstance({projectId:t.options.projectId,chainId:(c=Y.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:Rd.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?Hf.open(Rd.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?Hf.open(Rd.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&Hf.open(Rd.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:l=>Y.getActiveCaipNetwork(l)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=Y.state.activeChain===pe.CHAIN.EVM;if(pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>it.getConnectorId(h)===pe.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l;try{const u=a.chains.find(p=>p.id===c);if(!u)throw new Dl(new Error("chain not found on connector."));const d=await this.getProvider(),h=Fl("eip155"),f=await d.connect({chainId:c,preferredAccountType:h});return e=((l=f==null?void 0:f.accounts)==null?void 0:l.map(p=>p.address))||[f.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),u}catch(u){throw u instanceof Error?new Dl(u):u}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(Mu)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}EU.type="walletConnect";function EU(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:EU.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=Y.getCaipNetworks(),y=await this.getProvider();if(!y)throw new jd;a||(a=this.onDisplayUri,y.on("display_uri",a));const m=await this.isChainsStale();y.session&&m&&await y.disconnect();const w=It.state.universalProviderConfigOverride;if(!y.session||m){const I=ig.createNamespaces(g,w);await y.connect({optionalNamespaces:I,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(k=>Number(k.id)))}const v=await this.getAccounts(),A=await this.getChainId(),C=(p=(f=(h=y.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,S=C==null?void 0:C.some(I=>Number(I.split(":")[1])===A);let x=1;S?x=A:C!=null&&C[0]&&(x=Number(C[0].split(":")[1])),a&&(y.removeListener("display_uri",a),a=void 0),o&&(y.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),y.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),y.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),y.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),y.on("session_delete",c));const T=w==null?void 0:w.defaultChain;return y.setDefaultChain(T??`eip155:${x}`),{accounts:v,chainId:x}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new jr(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var y,m,w;const d=await this.getProvider();if(!((y=d==null?void 0:d.session)!=null&&y.namespaces))return[];const h=(w=(m=d==null?void 0:d.session)==null?void 0:m.namespaces[pe.CHAIN.EVM])==null?void 0:w.accounts,f=(h==null?void 0:h.map(v=>v.split(":")[2]))??[],p=new Set;return f.filter(v=>{const A=v==null?void 0:v.toLowerCase();return p.has(A)?!1:(p.add(A),!0)})},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=et.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const y=et.getStoredActiveCaipNetworkId(),m=h?e.getCaipNetworks(h):[],w=m==null?void 0:m.find(v=>v.id===y);w&&w.chainNamespace===pe.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(w.id)}))}return r},async getChainId(){var g,y,m,w;const d=(g=e.getCaipNetwork(pe.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(w=(m=(y=(await this.getProvider()).session)==null?void 0:y.namespaces[pe.CHAIN.EVM])==null?void 0:m.chains)==null?void 0:w[0],p=Y.getCaipNetworks().find(v=>v.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,y,m,w;const f=await this.getProvider();if(!f)throw new jd;const p=Y.getCaipNetworks().find(v=>v.id===h);if(!p)throw new Dl(new t_);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:nt(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const v=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...v,h]),{...p,id:p.id}}catch(v){const A=v;if(/(?:user rejected)/iu.test(A.message))throw new jr(A);try{let C;d!=null&&d.blockExplorerUrls?C=d.blockExplorerUrls:C=(g=p.blockExplorers)!=null&&g.default.url?[(y=p.blockExplorers)==null?void 0:y.default.url]:[];const S=((w=(m=p.rpcUrls)==null?void 0:m.chainDefault)==null?void 0:w.http)||[],x={blockExplorerUrls:C,chainId:nt(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:S};await f.request({method:"wallet_addEthereumChain",params:[x]});const T=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...T,h]),{...p,id:p.id}}catch(C){throw new jr(C)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>Mu(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(Y.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[pe.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(y=>Number.parseInt(y.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const tv=tr({pendingTransactions:0}),W9={state:tv,subscribeKey(t,e){return Si(tv,t,e)},increase(t){tv[t]+=1},decrease(t){tv[t]-=1},reset(t){tv[t]=0}};function U9e(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function $9e(t){if(ut.isSafeApp()){const{safe:e}=await Ks(async()=>{const{safe:n}=await import("./index-MkgcZHGC.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function B9e(t){try{const{coinbaseWallet:e}=await Ks(async()=>{const{coinbaseWallet:n}=await import("./index-MkgcZHGC.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const F9e={enable:!1,pollingInterval:3e4};class j9e extends L9e{constructor(e){const n=vv.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=pe.CHAIN.EVM,this.adapterType=pe.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...F9e,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===pe.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>ut.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=$y(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>ut.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=$y(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===pe.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=vv.getCaipNetworkId(s);i?n[s.id]=vv.extendWagmiTransports(s,e.projectId,i):n[s.id]=vv.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=lye({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=Wme(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),W9.increase("pendingTransactions")}});const e=W9.subscribeKey("pendingTransactions",n=>{var r;n>=pe.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){WK(this.wagmiConfig,{onChange:(e,n)=>{var r;if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const s=e.address!==(n==null?void 0:n.address),i=e.connector.id!==((r=n.connector)==null?void 0:r.id),o=n.status!=="connected";(s||i||o)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}}),HK(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===pe.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:i})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:et.getConnectedSocialProvider(),username:et.getConnectedSocialUsername()}:void 0}}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await B9e(this.wagmiConfig.connectors);s&&n.push(s)}const r=await $9e(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(EU(e,n)),e.enableEIP6963!==!1&&r.push(mN({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(M9e({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:e,chainId:n,connector:{id:r.id,name:To.ConnectorNamesMap[r.id]??r.name,imageId:To.ConnectorImageIds[r.id],type:To.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===pe.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await Fme(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=$y(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await $me(this.wagmiConfig,s);const i=await Bme(this.wagmiConfig,s);return await qK(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(tx.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await VK(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await Pme(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return uge(e.value,e.decimals)}formatUnits(e){return Kg(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");if(e.type===pe.CONNECTOR_ID.INJECTED&&n.enableEIP6963===!1||e.id===pe.CONNECTOR_ID.AUTH||e.id===pe.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:To.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:To.ConnectorNamesMap[e.id]??e.name,imageId:To.ConnectorImageIds[e.id],type:To.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===pe.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){GK(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnections(){return Promise.resolve()}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=Za(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(ut.isSafeApp()&&n===pe.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await XA(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await XA(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await J6(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var h,f,p,g,y;const{id:n,address:r,provider:s,type:i,info:o,chainId:a,socialUri:c}=e,l=this.getWagmiConnector(n);if(!l)throw new Error("connectionControllerClient:connectExternal - connector is undefined");s&&o&&l.id===pe.CONNECTOR_ID.EIP6963&&((h=l.setEip6963Wallet)==null||h.call(l,{provider:s,info:o}));const u=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(l.uid);if(u){await((g=this.wagmiConfig.storage)==null?void 0:g.setItem("recentConnectorId",l.id));const m=[...u.accounts].sort((w,v)=>Qi.isLowerCaseMatch(w,r)?-1:Qi.isLowerCaseMatch(v,r)?1:0);return(y=this.wagmiConfig)==null||y.setState(w=>({...w,connections:new Map(w.connections).set(l.uid,{accounts:m,chainId:u.chainId,connector:u.connector}),current:l.uid,status:"connected"})),{address:m[0],chainId:u.chainId,provider:s,type:i,id:n}}const d=await XA(this.wagmiConfig,{connector:l,chainId:a?Number(a):void 0,socialUri:c});return{address:d.accounts[0],chainId:d.chainId,provider:s,type:i,id:n}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:n})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await Mk(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=et.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await Dme(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});et.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=Za(this.wagmiConfig).find(i=>Qi.isLowerCaseMatch(i.connector.id,e.id));return await Dk(this.wagmiConfig,{connector:n}),It.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:i})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=Za(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await Dk(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:s})),connectorId:r.connector.id}))}}async switchNetwork(e){var s,i,o,a,c,l,u,d,h,f;const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(p=>p.id.toString()===n.id.toString());await J6(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:(r==null?void 0:r.name)??n.name,nativeCurrency:(r==null?void 0:r.nativeCurrency)??n.nativeCurrency,rpcUrls:[((o=(i=(s=n.rpcUrls)==null?void 0:s.chainDefault)==null?void 0:i.http)==null?void 0:o[0])??((l=(c=(a=r==null?void 0:r.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0])??""],blockExplorerUrls:[((d=(u=r==null?void 0:r.blockExplorers)==null?void 0:u.default)==null?void 0:d.url)??((f=(h=n.blockExplorers)==null?void 0:h.default)==null?void 0:f.url)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=Za(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=U9e(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=Za(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=Za(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=Za(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:pe.CONNECTOR_ID.AUTH,type:"AUTH",name:pe.CONNECTOR_NAMES.AUTH,provider:e,imageId:To.ConnectorImageIds[pe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){return e.on("connect",()=>{const n=Za(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(Y.state.activeChain==="eip155")return;Mk(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new qX({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}}const VX={id:1992,name:"Sanko Testnet",network:"sanko",nativeCurrency:{decimals:18,name:"tDMT",symbol:"tDMT"},rpcUrls:{public:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]},default:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}},blockExplorers:{default:{name:"SankoScan",url:"https://sanko-scan.caldera.xyz"}}},KX="7c65f27254d6ddd24cf7eedf2685c4fb",z9e={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},YX=new j9e({networks:[IX,VX],projectId:KX,ssr:!1});F8e({adapters:[YX],networks:[IX,VX],projectId:KX,metadata:z9e,features:{analytics:!1}});const QX=()=>{if(!VS)throw new Error("[FIREBASE] Database not initialized");return VS},Ug=t=>!t||t.length<10?t:`${t.slice(0,6)}...${t.slice(-4)}`,rx=async(t,e)=>{try{if(!t)return console.error("[LEADERBOARD] No wallet address provided"),!1;const n=new Date().toISOString(),r=QX(),s=ra(r,`leaderboard/${t}`),i=await Kf(s),o=i.exists()?i.val():null,a=e==="win"?3:e==="draw"?1:0,c={username:t,chain_type:"sanko",wins:((o==null?void 0:o.wins)||0)+(e==="win"?1:0),losses:((o==null?void 0:o.losses)||0)+(e==="loss"?1:0),draws:((o==null?void 0:o.draws)||0)+(e==="draw"?1:0),total_games:((o==null?void 0:o.total_games)||0)+1,points:((o==null?void 0:o.points)||0)+a,created_at:(o==null?void 0:o.created_at)||n,updated_at:n};return await Ov(s,c),console.log("[LEADERBOARD] Successfully updated entry for:",Ug(t),"Result:",e),!0}catch(n){return console.error("[LEADERBOARD] Error updating leaderboard entry:",n),!1}},W9e=async(t,e,n)=>{try{return!e||!n?(console.error("[LEADERBOARD] Missing player addresses"),!1):(console.log("[LEADERBOARD] Updating both players scores:",{winner:t,bluePlayer:Ug(e),redPlayer:Ug(n)}),await rx(e,t==="blue"?"win":t==="red"?"loss":"draw"),await rx(n,t==="red"?"win":t==="blue"?"loss":"draw"),console.log("[LEADERBOARD] Successfully updated both players scores"),!0)}catch(r){return console.error("[LEADERBOARD] Error updating both players scores:",r),!1}},JX=async(t=20)=>{try{const e=QX(),n=ra(e,"leaderboard"),r=await Kf(n);if(!r.exists())return[];const s=[];return r.forEach(i=>{const o=i.val();o&&s.push(o)}),s.sort((i,o)=>o.points!==i.points?o.points-i.points:o.wins!==i.wins?o.wins-i.wins:i.total_games-o.total_games),s.slice(0,t)}catch(e){return console.error("[LEADERBOARD] Error getting top entries:",e),[]}},Gc=()=>{if(!VS)throw new Error("[FIREBASE] Database not initialized");return VS},vs={async getGame(t){try{const e=Gc(),n=ra(e,`chess_games/${t}`),r=await Kf(n);return r.exists()?r.val():null}catch(e){return console.error("[FIREBASE] Error getting game:",e),null}},async updateGame(t,e){if(!t)throw console.error("[FIREBASE] Tried to update game with undefined inviteCode!",e),new Error("inviteCode is required for updateGame");try{const n=Gc(),r=ra(n,`chess_games/${t}`);await Ov(r,{...e,updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game updated successfully")}catch(n){console.error("[FIREBASE] Error updating game:",n)}},subscribeToGame(t,e){try{const n=Gc(),r=ra(n,`chess_games/${t}`);console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",t);const s=K$(r,i=>{if(i.exists()){const o=i.val();console.log("[FIREBASE] Game update received:",o),e(o)}});return console.log("[FIREBASE] Firebase subscription setup complete for game:",t),s}catch(n){return console.error("[FIREBASE] Error subscribing to game:",n),()=>{}}},async createGame(t){const e=t.invite_code;if(!e)throw console.error("[FIREBASE] Tried to create game with undefined inviteCode!",t),new Error("inviteCode is required for createGame");try{const n=Gc(),r=ra(n,`chess_games/${e}`);console.log("[FIREBASE] Creating game with data:",t),await Ov(r,{...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game created successfully:",e);const s=await Kf(r);s.exists()?console.log("[FIREBASE] Game verification successful:",s.val()):console.error("[FIREBASE] Game creation verification failed - game not found after creation")}catch(n){throw console.error("[FIREBASE] Error creating game:",n),n}},async getActiveGames(){try{const t=Gc(),e=ra(t,"chess_games"),n=await Kf(e);if(!n.exists())return[];const r=n.val();return Object.values(r).filter(s=>s.game_state==="waiting"||s.game_state==="active")}catch(t){return console.error("[FIREBASE] Error getting active games:",t),[]}},async getOpenGames(){try{const t=Gc(),e=ra(t,"chess_games"),n=await Kf(e);if(!n.exists())return console.log("[FIREBASE] No games found in database"),[];const r=n.val();console.log("[FIREBASE] All games in database:",r);const s=Object.values(r).filter(i=>{const o=i.game_state==="waiting",a=i.is_public,c=!i.red_player||i.red_player==="0x0000000000000000000000000000000000000000";return console.log("[FIREBASE] Game filter check:",{inviteCode:i.invite_code,gameState:i.game_state,isPublic:i.is_public,redPlayer:i.red_player,isWaiting:o,noRedPlayer:c,passes:o&&a&&c}),o&&a&&c});return s.sort((i,o)=>new Date(o.created_at).getTime()-new Date(i.created_at).getTime()),console.log("[FIREBASE] Open games found:",s.length,s),s}catch(t){return console.error("[FIREBASE] Error getting open games:",t),[]}},async deleteGame(t){try{const e=Gc(),n=ra(e,`chess_games/${t}`);await hae(n),console.log("[FIREBASE] Game deleted:",t)}catch(e){console.error("[FIREBASE] Error deleting game:",e)}},async updateLeaderboard(t){try{const e=Gc(),n=ra(e,`leaderboard/${t.username}`);await Ov(n,{...t,updated_at:new Date().toISOString()})}catch(e){console.error("[FIREBASE] Error updating leaderboard:",e)}},async getLeaderboard(){try{const t=Gc(),e=ra(t,"leaderboard"),n=await Kf(e);if(!n.exists())return[];const r=n.val();return Object.values(r).sort((s,i)=>i.points-s.points)}catch(t){return console.error("[FIREBASE] Error getting leaderboard:",t),[]}},subscribeToLeaderboard(t){try{const e=Gc(),n=ra(e,"leaderboard");return K$(n,s=>{if(s.exists()){const i=s.val(),o=Object.values(i).sort((a,c)=>c.points-a.points);console.log("[FIREBASE] Leaderboard update received:",o),t(o)}})}catch(e){return console.error("[FIREBASE] Error subscribing to leaderboard:",e),()=>{}}}},H9e="6.15.0";function G9e(t,e,n){const r=e.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${n}`,s.value=t,s}async function li(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,s,i)=>(r[e[i]]=s,r),{})}function mt(t,e,n){for(let r in e){let s=e[r];const i=n?n[r]:null;i&&G9e(s,i,r),Object.defineProperty(t,r,{enumerable:!0,value:s,writable:!1})}}function Cy(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>Cy(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let s=0;s<t.length;s++)r+=n[t[s]>>4],r+=n[t[s]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return Cy(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${Cy(r,e)}: ${Cy(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Ns(t,e){return t&&t.code===e}function _U(t){return Ns(t,"CALL_EXCEPTION")}function rr(t,e,n){let r=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${Cy(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];i.push(o+"="+Cy(a))}}i.push(`code=${e}`),i.push(`version=${H9e}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return mt(s,{code:e}),n&&Object.assign(s,n),s.shortMessage==null&&mt(s,{shortMessage:r}),s}function me(t,e,n,r){if(!t)throw rr(e,n,r)}function Q(t,e,n,r){me(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function ZX(t,e,n){n==null&&(n=""),n&&(n=": "+n),me(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),me(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");t.push(e)}catch{}return t},[]);function hT(t,e,n){if(n==null&&(n=""),t!==e){let r=n,s="new";n&&(r+=".",s+=" "+n),me(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function XX(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(t.substring(s,s+2),16),s+=2;return r}Q(!1,"invalid BytesLike value",e||"value",t)}function jt(t,e){return XX(t,e,!1)}function fi(t,e){return XX(t,e,!0)}function Yn(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function CU(t){return Yn(t,!0)||t instanceof Uint8Array}const H9="0123456789abcdef";function Le(t){const e=jt(t);let n="0x";for(let r=0;r<e.length;r++){const s=e[r];n+=H9[(s&240)>>4]+H9[s&15]}return n}function _r(t){return"0x"+t.map(e=>Le(e).substring(2)).join("")}function Gy(t){return Yn(t,!0)?(t.length-2)/2:jt(t).length}function wr(t,e,n){const r=jt(t);return n!=null&&n>r.length&&me(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),Le(r.slice(e??0,n??r.length))}function eee(t,e,n){const r=jt(t);me(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),n?s.set(r,e-r.length):s.set(r,0),Le(s)}function id(t,e){return eee(t,e,!0)}function q9e(t,e){return eee(t,e,!1)}const fT=BigInt(0),gc=BigInt(1),Ay=9007199254740991;function V9e(t,e){const n=pT(t,"value"),r=BigInt(zt(e,"width"));if(me(n>>r===fT,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-gc){const s=(gc<<r)-gc;return-((~n&s)+gc)}return n}function tee(t,e){let n=Xe(t,"value");const r=BigInt(zt(e,"width")),s=gc<<r-gc;if(n<fT){n=-n,me(n<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(gc<<r)-gc;return(~n&i)+gc}else me(n<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function Ev(t,e){const n=pT(t,"value"),r=BigInt(zt(e,"bits"));return n&(gc<<r)-gc}function Xe(t,e){switch(typeof t){case"bigint":return t;case"number":return Q(Number.isInteger(t),"underflow",e||"value",t),Q(t>=-Ay&&t<=Ay,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){Q(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}Q(!1,"invalid BigNumberish value",e||"value",t)}function pT(t,e){const n=Xe(t,e);return me(n>=fT,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const G9="0123456789abcdef";function AU(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=G9[n>>4],e+=G9[n&15];return BigInt(e)}return Xe(t)}function zt(t,e){switch(typeof t){case"bigint":return Q(t>=-Ay&&t<=Ay,"overflow",e||"value",t),Number(t);case"number":return Q(Number.isInteger(t),"underflow",e||"value",t),Q(t>=-Ay&&t<=Ay,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return zt(BigInt(t),e)}catch(n){Q(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}Q(!1,"invalid numeric value",e||"value",t)}function K9e(t){return zt(AU(t))}function gf(t,e){let r=pT(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const s=zt(e,"width");for(me(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<s*2;)r="0"+r}return"0x"+r}function Kr(t){const e=pT(t,"value");if(e===fT)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(n.substring(i,i+2),16)}return r}function dc(t){let e=Le(CU(t)?t:Kr(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const q9="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const V9=BigInt(58);function Y9e(t){const e=jt(t);let n=AU(e),r="";for(;n;)r=q9[Number(n%V9)]+r,n/=V9;for(let s=0;s<e.length&&!e[s];s++)r=q9[0]+r;return r}function Q9e(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return jt(e)}function J9e(t){const e=jt(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var aw;class nee{constructor(e,n,r){te(this,"filter");te(this,"emitter");K(this,aw);U(this,aw,n),mt(this,{emitter:e,filter:r})}async removeListener(){_(this,aw)!=null&&await this.emitter.off(this.filter,_(this,aw))}}aw=new WeakMap;function Z9e(t,e,n,r,s){Q(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function ree(t,e,n,r,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)i++;return i}return t==="OVERRUN"?n.length-e-1:0}function X9e(t,e,n,r,s){return t==="OVERLONG"?(Q(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),ree(t,e,n))}const e7e=Object.freeze({error:Z9e,ignore:ree,replace:X9e});function t7e(t,e){e==null&&(e=e7e.error);const n=jt(t,"bytes"),r=[];let s=0;for(;s<n.length;){const i=n[s++];if(!(i>>7)){r.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,n,r):s+=e("BAD_PREFIX",s-1,n,r);continue}if(s-1+o>=n.length){s+=e("OVERRUN",s-1,n,r);continue}let c=i&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=n[s];if((u&192)!=128){s+=e("MISSING_CONTINUE",s,n,r),c=null;break}c=c<<6|u&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-o,n,r,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-o,n,r,c);continue}if(c<=a){s+=e("OVERLONG",s-1-o,n,r,c);continue}r.push(c)}}return r}function qu(t,e){Q(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(s&63|128);else if((s&64512)==55296){r++;const i=t.charCodeAt(r);Q(r<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((s&1023)<<10)+(i&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128)}return new Uint8Array(n)}function n7e(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function sx(t,e){return n7e(t7e(t,e))}function see(t){async function e(n,r){me(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=n.url.split(":")[0].toLowerCase();me(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),me(s==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=rr("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{i=rr("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let l;try{l=await fetch(n.url,c)}catch(f){throw clearTimeout(a),i||f}clearTimeout(a);const u={};l.headers.forEach((f,p)=>{u[p.toLowerCase()]=f});const d=await l.arrayBuffer(),h=d==null?null:new Uint8Array(d);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:h}}return e}const r7e=12,s7e=250;let K9=see();const i7e=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),o7e=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let AO=!1;async function iee(t,e){try{const n=t.match(i7e);if(!n)throw new Error("invalid data");return new tf(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?Q9e(n[3]):c7e(n[3]))}catch{return new tf(599,"BAD REQUEST (invalid data: URI)",{},null,new mf(t))}}function oee(t){async function e(n,r){try{const s=n.match(o7e);if(!s)throw new Error("invalid link");return new mf(`${t}${s[2]}`)}catch{return new tf(599,"BAD REQUEST (invalid IPFS URI)",{},null,new mf(n))}}return e}const xA={data:iee,ipfs:oee("https://gateway.ipfs.io/ipfs/")},aee=new WeakMap;var Pp,oh;class a7e{constructor(e){K(this,Pp);K(this,oh);U(this,Pp,[]),U(this,oh,!1),aee.set(e,()=>{if(!_(this,oh)){U(this,oh,!0);for(const n of _(this,Pp))setTimeout(()=>{n()},0);U(this,Pp,[])}})}addListener(e){me(!_(this,oh),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),_(this,Pp).push(e)}get cancelled(){return _(this,oh)}checkSignal(){me(!this.cancelled,"cancelled","CANCELLED",{})}}Pp=new WeakMap,oh=new WeakMap;function NA(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var cw,lw,nc,bu,uw,dw,ts,Co,vu,Op,kp,Dp,tl,rc,ah,Lp,_v;const mx=class mx{constructor(e){K(this,Lp);K(this,cw);K(this,lw);K(this,nc);K(this,bu);K(this,uw);K(this,dw);K(this,ts);K(this,Co);K(this,vu);K(this,Op);K(this,kp);K(this,Dp);K(this,tl);K(this,rc);K(this,ah);U(this,dw,String(e)),U(this,cw,!1),U(this,lw,!0),U(this,nc,{}),U(this,bu,""),U(this,uw,3e5),U(this,rc,{slotInterval:s7e,maxAttempts:r7e}),U(this,ah,null)}get url(){return _(this,dw)}set url(e){U(this,dw,String(e))}get body(){return _(this,ts)==null?null:new Uint8Array(_(this,ts))}set body(e){if(e==null)U(this,ts,void 0),U(this,Co,void 0);else if(typeof e=="string")U(this,ts,qu(e)),U(this,Co,"text/plain");else if(e instanceof Uint8Array)U(this,ts,e),U(this,Co,"application/octet-stream");else if(typeof e=="object")U(this,ts,qu(JSON.stringify(e))),U(this,Co,"application/json");else throw new Error("invalid body")}hasBody(){return _(this,ts)!=null}get method(){return _(this,bu)?_(this,bu):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),U(this,bu,String(e).toUpperCase())}get headers(){const e=Object.assign({},_(this,nc));return _(this,vu)&&(e.authorization=`Basic ${J9e(qu(_(this,vu)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&_(this,Co)&&(e["content-type"]=_(this,Co)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){_(this,nc)[String(e).toLowerCase()]=String(n)}clearHeaders(){U(this,nc,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return _(this,vu)||null}setCredentials(e,n){Q(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),U(this,vu,`${e}:${n}`)}get allowGzip(){return _(this,lw)}set allowGzip(e){U(this,lw,!!e)}get allowInsecureAuthentication(){return!!_(this,cw)}set allowInsecureAuthentication(e){U(this,cw,!!e)}get timeout(){return _(this,uw)}set timeout(e){Q(e>=0,"timeout must be non-zero","timeout",e),U(this,uw,e)}get preflightFunc(){return _(this,Op)||null}set preflightFunc(e){U(this,Op,e)}get processFunc(){return _(this,kp)||null}set processFunc(e){U(this,kp,e)}get retryFunc(){return _(this,Dp)||null}set retryFunc(e){U(this,Dp,e)}get getUrlFunc(){return _(this,ah)||K9}set getUrlFunc(e){U(this,ah,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${_(this,ts)?Le(_(this,ts)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(_(this,rc).slotInterval=e.slotInterval),e.maxAttempts!=null&&(_(this,rc).maxAttempts=e.maxAttempts)}send(){return me(_(this,tl)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),U(this,tl,new a7e(this)),fe(this,Lp,_v).call(this,0,Y9()+this.timeout,0,this,new tf(0,"",{},null,this))}cancel(){me(_(this,tl)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=aee.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();me(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new mx(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,U(s,nc,Object.assign({},_(this,nc))),_(this,ts)&&U(s,ts,new Uint8Array(_(this,ts))),U(s,Co,_(this,Co)),s}clone(){const e=new mx(this.url);return U(e,bu,_(this,bu)),_(this,ts)&&U(e,ts,_(this,ts)),U(e,Co,_(this,Co)),U(e,nc,Object.assign({},_(this,nc))),U(e,vu,_(this,vu)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),U(e,Op,_(this,Op)),U(e,kp,_(this,kp)),U(e,Dp,_(this,Dp)),U(e,rc,Object.assign({},_(this,rc))),U(e,ah,_(this,ah)),e}static lockConfig(){AO=!0}static getGateway(e){return xA[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(AO)throw new Error("gateways locked");xA[e]=n}static registerGetUrl(e){if(AO)throw new Error("gateways locked");K9=e}static createGetUrlFunc(e){return see(e)}static createDataGateway(){return iee}static createIpfsGatewayFunc(e){return oee(e)}};cw=new WeakMap,lw=new WeakMap,nc=new WeakMap,bu=new WeakMap,uw=new WeakMap,dw=new WeakMap,ts=new WeakMap,Co=new WeakMap,vu=new WeakMap,Op=new WeakMap,kp=new WeakMap,Dp=new WeakMap,tl=new WeakMap,rc=new WeakMap,ah=new WeakMap,Lp=new WeakSet,_v=async function(e,n,r,s,i){var u,d,h;if(e>=_(this,rc).maxAttempts)return i.makeServerError("exceeded maximum retry limit");me(Y9()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await l7e(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in xA){const f=await xA[a](o.url,NA(_(s,tl)));if(f instanceof tf){let p=f;if(this.processFunc){NA(_(s,tl));try{p=await this.processFunc(o,p)}catch(g){(g.throttle==null||typeof g.stall!="number")&&p.makeServerError("error in post-processing function",g).assertOk()}}return p}o=f}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,NA(_(s,tl)));let l=new tf(c.statusCode,c.statusMessage,c.headers,c.body,s);if(l.statusCode===301||l.statusCode===302){try{const f=l.headers.location||"";return fe(u=o.redirect(f),Lp,_v).call(u,e+1,n,0,s,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,e))){const f=l.headers["retry-after"];let p=_(this,rc).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof f=="string"&&f.match(/^[1-9][0-9]*$/)&&(p=parseInt(f)),fe(d=o.clone(),Lp,_v).call(d,e+1,n,p,s,l)}if(this.processFunc){NA(_(s,tl));try{l=await this.processFunc(o,l)}catch(f){(f.throttle==null||typeof f.stall!="number")&&l.makeServerError("error in post-processing function",f).assertOk();let p=_(this,rc).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return f.stall>=0&&(p=f.stall),fe(h=o.clone(),Lp,_v).call(h,e+1,n,p,s,l)}}return l};let mf=mx;var Z_,X_,eC,Ao,hw,Mp;const zU=class zU{constructor(e,n,r,s,i){K(this,Z_);K(this,X_);K(this,eC);K(this,Ao);K(this,hw);K(this,Mp);U(this,Z_,e),U(this,X_,n),U(this,eC,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),U(this,Ao,s==null?null:new Uint8Array(s)),U(this,hw,i||null),U(this,Mp,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${_(this,Ao)?Le(_(this,Ao)):"null"}>`}get statusCode(){return _(this,Z_)}get statusMessage(){return _(this,X_)}get headers(){return Object.assign({},_(this,eC))}get body(){return _(this,Ao)==null?null:new Uint8Array(_(this,Ao))}get bodyText(){try{return _(this,Ao)==null?"":sx(_(this,Ao))}catch{me(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{me(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new zU(599,r,this.headers,this.body,_(this,hw)||void 0);return U(s,Mp,{message:e,error:n}),s}throwThrottleError(e,n){n==null?n=-1:Q(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw mt(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return _(this,Ao)!=null}get request(){return _(this,hw)}ok(){return _(this,Mp).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=_(this,Mp);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{_(this,Ao)&&(s=sx(_(this,Ao)))}catch{}me(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};Z_=new WeakMap,X_=new WeakMap,eC=new WeakMap,Ao=new WeakMap,hw=new WeakMap,Mp=new WeakMap;let tf=zU;function Y9(){return new Date().getTime()}function c7e(t){return qu(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function l7e(t){return new Promise(e=>setTimeout(e,t))}function u7e(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function Q9(t,e,n){let r=0;for(let s=0;s<n;s++)r=r*256+t[e+s];return r}function J9(t,e,n,r){const s=[];for(;n<e+1+r;){const i=cee(t,n);s.push(i.result),n+=i.consumed,me(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:s}}function cee(t,e){me(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{me(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const s=Q9(t,e+1,r);return n(e+1+r+s),J9(t,e,e+1+r,r+s)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),J9(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const s=Q9(t,e+1,r);n(e+1+r+s);const i=Le(t.slice(e+1+r,e+1+r+s));return{consumed:1+r+s,result:i}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const s=Le(t.slice(e+1,e+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:u7e(t[e])}}function s1(t){const e=jt(t,"data"),n=cee(e,0);return Q(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function Z9(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function lee(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(i){r=r.concat(lee(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=Z9(r.length);return s.unshift(247+s.length),s.concat(r)}const e=Array.prototype.slice.call(jt(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=Z9(e.length);return n.unshift(183+n.length),n.concat(e)}const X9="0123456789abcdef";function yf(t){let e="0x";for(const n of lee(t))e+=X9[n>>4],e+=X9[n&15];return e}const mi=32,x3=new Uint8Array(mi),d7e=["then"],TA={},uee=new WeakMap;function ep(t){return uee.get(t)}function e7(t,e){uee.set(t,e)}function nv(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function N3(t,e,n){return t.indexOf(null)>=0?e.map((r,s)=>r instanceof R0?N3(ep(r),r,n):r):t.reduce((r,s,i)=>{let o=e.getValue(s);return s in r||(n&&o instanceof R0&&(o=N3(ep(o),o,n)),r[s]=o),r},{})}var fw;const Sy=class Sy extends Array{constructor(...n){const r=n[0];let s=n[1],i=(n[2]||[]).slice(),o=!0;r!==TA&&(s=n,i=[],o=!1);super(s.length);K(this,fw);s.forEach((l,u)=>{this[u]=l});const a=i.reduce((l,u)=>(typeof u=="string"&&l.set(u,(l.get(u)||0)+1),l),new Map);if(e7(this,Object.freeze(s.map((l,u)=>{const d=i[u];return d!=null&&a.get(d)===1?d:null}))),U(this,fw,[]),_(this,fw)==null&&_(this,fw),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(l,u,d)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const f=zt(u,"%index");if(f<0||f>=this.length)throw new RangeError("out of result range");const p=l[f];return p instanceof Error&&nv(`index ${f}`,p),p}if(d7e.indexOf(u)>=0)return Reflect.get(l,u,d);const h=l[u];if(h instanceof Function)return function(...f){return h.apply(this===d?l:this,f)};if(!(u in l))return l.getValue.apply(this===d?l:this,[u])}return Reflect.get(l,u,d)}});return e7(c,ep(this)),c}toArray(n){const r=[];return this.forEach((s,i)=>{s instanceof Error&&nv(`index ${i}`,s),n&&s instanceof Sy&&(s=s.toArray(n)),r.push(s)}),r}toObject(n){const r=ep(this);return r.reduce((s,i,o)=>(me(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),N3(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=ep(this),i=[],o=[];for(let a=n;a<r;a++)i.push(this[a]),o.push(s[a]);return new Sy(TA,i,o)}filter(n,r){const s=ep(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&nv(`index ${a}`,c),n.call(r,c,a,this)&&(i.push(c),o.push(s[a]))}return new Sy(TA,i,o)}map(n,r){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&nv(`index ${i}`,o),s.push(n.call(r,o,i,this))}return s}getValue(n){const r=ep(this).indexOf(n);if(r===-1)return;const s=this[r];return s instanceof Error&&nv(`property ${JSON.stringify(n)}`,s.error),s}static fromItems(n,r){return new Sy(TA,n,r)}};fw=new WeakMap;let R0=Sy;function t7(t){let e=Kr(t);return me(e.length<=mi,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:mi,offset:e.length}),e.length!==mi&&(e=fi(_r([x3.slice(e.length%mi),e]))),e}class hd{constructor(e,n,r,s){te(this,"name");te(this,"type");te(this,"localName");te(this,"dynamic");mt(this,{name:e,type:n,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){Q(!1,e,this.localName,n)}}var Eu,Up,pw,ES;class T3{constructor(){K(this,pw);K(this,Eu);K(this,Up);U(this,Eu,[]),U(this,Up,0)}get data(){return _r(_(this,Eu))}get length(){return _(this,Up)}appendWriter(e){return fe(this,pw,ES).call(this,fi(e.data))}writeBytes(e){let n=fi(e);const r=n.length%mi;return r&&(n=fi(_r([n,x3.slice(r)]))),fe(this,pw,ES).call(this,n)}writeValue(e){return fe(this,pw,ES).call(this,t7(e))}writeUpdatableValue(){const e=_(this,Eu).length;return _(this,Eu).push(x3),U(this,Up,_(this,Up)+mi),n=>{_(this,Eu)[e]=t7(n)}}}Eu=new WeakMap,Up=new WeakMap,pw=new WeakSet,ES=function(e){return _(this,Eu).push(e),U(this,Up,_(this,Up)+e.length),e.length};var ji,So,$p,Bp,ch,zg,P3,dee;const WU=class WU{constructor(e,n,r){K(this,zg);te(this,"allowLoose");K(this,ji);K(this,So);K(this,$p);K(this,Bp);K(this,ch);mt(this,{allowLoose:!!n}),U(this,ji,fi(e)),U(this,$p,0),U(this,Bp,null),U(this,ch,r??1024),U(this,So,0)}get data(){return Le(_(this,ji))}get dataLength(){return _(this,ji).length}get consumed(){return _(this,So)}get bytes(){return new Uint8Array(_(this,ji))}subReader(e){const n=new WU(_(this,ji).slice(_(this,So)+e),this.allowLoose,_(this,ch));return U(n,Bp,this),n}readBytes(e,n){let r=fe(this,zg,dee).call(this,0,e,!!n);return fe(this,zg,P3).call(this,e),U(this,So,_(this,So)+r.length),r.slice(0,e)}readValue(){return AU(this.readBytes(mi))}readIndex(){return K9e(this.readBytes(mi))}};ji=new WeakMap,So=new WeakMap,$p=new WeakMap,Bp=new WeakMap,ch=new WeakMap,zg=new WeakSet,P3=function(e){var n;if(_(this,Bp))return fe(n=_(this,Bp),zg,P3).call(n,e);U(this,$p,_(this,$p)+e),me(_(this,ch)<1||_(this,$p)<=_(this,ch)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${_(this,ch)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:fi(_(this,ji)),offset:_(this,So),length:e,info:{bytesRead:_(this,$p),dataLength:this.dataLength}})},dee=function(e,n,r){let s=Math.ceil(n/mi)*mi;return _(this,So)+s>_(this,ji).length&&(this.allowLoose&&r&&_(this,So)+n<=_(this,ji).length?s=n:me(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:fi(_(this,ji)),length:_(this,ji).length,offset:_(this,So)+s})),_(this,ji).slice(_(this,So),_(this,So)+s)};let R3=WU;function ix(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function SU(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function h7e(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ix(t.outputLen),ix(t.blockLen)}function P0(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function hee(t,e){SU(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const SO=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fee=t=>t instanceof Uint8Array,f7e=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),IO=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),qc=(t,e)=>t<<32-e|t>>>e,p7e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!p7e)throw new Error("Non little-endian hardware is not supported");function g7e(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function gT(t){if(typeof t=="string"&&(t=g7e(t)),!fee(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function m7e(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!fee(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class IU{clone(){return this._cloneInto()}}function xU(t){const e=r=>t().update(gT(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function y7e(t=32){if(SO&&typeof SO.getRandomValues=="function")return SO.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class pee extends IU{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,h7e(e);const r=gT(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return P0(this),this.iHash.update(e),this}digestInto(e){P0(this),SU(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const gee=(t,e,n)=>new pee(t,e).update(n).digest();gee.create=(t,e)=>new pee(t,e);function w7e(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}class mee extends IU{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=IO(this.buffer)}update(e){P0(this);const{view:n,buffer:r,blockLen:s}=this;e=gT(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=IO(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){P0(this),hee(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;w7e(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=IO(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const b7e=(t,e,n)=>t&e^~t&n,v7e=(t,e,n)=>t&e^t&n^e&n,E7e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Pd=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Od=new Uint32Array(64);class _7e extends mee{constructor(){super(64,32,8,!1),this.A=Pd[0]|0,this.B=Pd[1]|0,this.C=Pd[2]|0,this.D=Pd[3]|0,this.E=Pd[4]|0,this.F=Pd[5]|0,this.G=Pd[6]|0,this.H=Pd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Od[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Od[d-15],f=Od[d-2],p=qc(h,7)^qc(h,18)^h>>>3,g=qc(f,17)^qc(f,19)^f>>>10;Od[d]=g+Od[d-7]+p+Od[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=qc(a,6)^qc(a,11)^qc(a,25),f=u+h+b7e(a,c,l)+E7e[d]+Od[d]|0,g=(qc(r,2)^qc(r,13)^qc(r,22))+v7e(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Od.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const yee=xU(()=>new _7e),RA=BigInt(2**32-1),O3=BigInt(32);function wee(t,e=!1){return e?{h:Number(t&RA),l:Number(t>>O3&RA)}:{h:Number(t>>O3&RA)|0,l:Number(t&RA)|0}}function bee(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=wee(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const C7e=(t,e)=>BigInt(t>>>0)<<O3|BigInt(e>>>0),A7e=(t,e,n)=>t>>>n,S7e=(t,e,n)=>t<<32-n|e>>>n,I7e=(t,e,n)=>t>>>n|e<<32-n,x7e=(t,e,n)=>t<<32-n|e>>>n,N7e=(t,e,n)=>t<<64-n|e>>>n-32,T7e=(t,e,n)=>t>>>n-32|e<<64-n,R7e=(t,e)=>e,P7e=(t,e)=>t,vee=(t,e,n)=>t<<n|e>>>32-n,Eee=(t,e,n)=>e<<n|t>>>32-n,_ee=(t,e,n)=>e<<n-32|t>>>64-n,Cee=(t,e,n)=>t<<n-32|e>>>64-n;function O7e(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const k7e=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),D7e=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,L7e=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),M7e=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,U7e=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),$7e=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Lt={fromBig:wee,split:bee,toBig:C7e,shrSH:A7e,shrSL:S7e,rotrSH:I7e,rotrSL:x7e,rotrBH:N7e,rotrBL:T7e,rotr32H:R7e,rotr32L:P7e,rotlSH:vee,rotlSL:Eee,rotlBH:_ee,rotlBL:Cee,add:O7e,add3L:k7e,add3H:D7e,add4L:L7e,add4H:M7e,add5H:$7e,add5L:U7e},[B7e,F7e]=Lt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),kd=new Uint32Array(80),Dd=new Uint32Array(80);class j7e extends mee{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let v=0;v<16;v++,n+=4)kd[v]=e.getUint32(n),Dd[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const A=kd[v-15]|0,C=Dd[v-15]|0,S=Lt.rotrSH(A,C,1)^Lt.rotrSH(A,C,8)^Lt.shrSH(A,C,7),x=Lt.rotrSL(A,C,1)^Lt.rotrSL(A,C,8)^Lt.shrSL(A,C,7),T=kd[v-2]|0,I=Dd[v-2]|0,k=Lt.rotrSH(T,I,19)^Lt.rotrBH(T,I,61)^Lt.shrSH(T,I,6),O=Lt.rotrSL(T,I,19)^Lt.rotrBL(T,I,61)^Lt.shrSL(T,I,6),B=Lt.add4L(x,O,Dd[v-7],Dd[v-16]),G=Lt.add4H(B,S,k,kd[v-7],kd[v-16]);kd[v]=G|0,Dd[v]=B|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:y,Hh:m,Hl:w}=this;for(let v=0;v<80;v++){const A=Lt.rotrSH(d,h,14)^Lt.rotrSH(d,h,18)^Lt.rotrBH(d,h,41),C=Lt.rotrSL(d,h,14)^Lt.rotrSL(d,h,18)^Lt.rotrBL(d,h,41),S=d&f^~d&g,x=h&p^~h&y,T=Lt.add5L(w,C,x,F7e[v],Dd[v]),I=Lt.add5H(T,m,A,S,B7e[v],kd[v]),k=T|0,O=Lt.rotrSH(r,s,28)^Lt.rotrBH(r,s,34)^Lt.rotrBH(r,s,39),B=Lt.rotrSL(r,s,28)^Lt.rotrBL(r,s,34)^Lt.rotrBL(r,s,39),G=r&i^r&a^i&a,W=s&o^s&c^o&c;m=g|0,w=y|0,g=f|0,y=p|0,f=d|0,p=h|0,{h:d,l:h}=Lt.add(l|0,u|0,I|0,k|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const R=Lt.add3L(k,B,W);r=Lt.add3H(R,I,O,G),s=R|0}({h:r,l:s}=Lt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Lt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Lt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Lt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Lt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Lt.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=Lt.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:m,l:w}=Lt.add(this.Hh|0,this.Hl|0,m|0,w|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,y,m,w)}roundClean(){kd.fill(0),Dd.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const z7e=xU(()=>new j7e);function W7e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const n7=W7e();n7.crypto||n7.msCrypto;function H7e(t){switch(t){case"sha256":return yee.create();case"sha512":return z7e.create()}Q(!1,"invalid hashing algorithm name","algorithm",t)}const[Aee,See,Iee]=[[],[],[]],G7e=BigInt(0),rv=BigInt(1),q7e=BigInt(2),V7e=BigInt(7),K7e=BigInt(256),Y7e=BigInt(113);for(let t=0,e=rv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Aee.push(2*(5*r+n)),See.push((t+1)*(t+2)/2%64);let s=G7e;for(let i=0;i<7;i++)e=(e<<rv^(e>>V7e)*Y7e)%K7e,e&q7e&&(s^=rv<<(rv<<BigInt(i))-rv);Iee.push(s)}const[Q7e,J7e]=bee(Iee,!0),r7=(t,e,n)=>n>32?_ee(t,e,n):vee(t,e,n),s7=(t,e,n)=>n>32?Cee(t,e,n):Eee(t,e,n);function Z7e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=r7(l,u,1)^n[a],h=s7(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=See[o],c=r7(s,i,a),l=s7(s,i,a),u=Aee[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Q7e[r],t[1]^=J7e[r]}n.fill(0)}class NU extends IU{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ix(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=f7e(this.state)}keccak(){Z7e(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){P0(this);const{blockLen:n,state:r}=this;e=gT(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){P0(this,!1),SU(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ix(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(hee(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new NU(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const X7e=(t,e,n)=>xU(()=>new NU(e,t,n)),eze=X7e(1,136,256/8);let xee=!1;const Nee=function(t){return eze(t)};let Tee=Nee;function Lr(t){const e=jt(t,"data");return Le(Tee(e))}Lr._=Nee;Lr.lock=function(){xee=!0};Lr.register=function(t){if(xee)throw new TypeError("keccak256 is locked");Tee=t};Object.freeze(Lr);const Ree=function(t){return H7e("sha256").update(t).digest()};let Pee=Ree,Oee=!1;function fb(t){const e=jt(t,"data");return Le(Pee(e))}fb._=Ree;fb.lock=function(){Oee=!0};fb.register=function(t){if(Oee)throw new Error("sha256 is locked");Pee=t};Object.freeze(fb);Object.freeze(fb);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const kee=BigInt(0),mT=BigInt(1),tze=BigInt(2),yT=t=>t instanceof Uint8Array,nze=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function O0(t){if(!yT(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=nze[t[n]];return e}function Dee(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function TU(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function k0(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const s=r*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function og(t){return TU(O0(t))}function RU(t){if(!yT(t))throw new Error("Uint8Array expected");return TU(O0(Uint8Array.from(t).reverse()))}function D0(t,e){return k0(t.toString(16).padStart(e*2,"0"))}function PU(t,e){return D0(t,e).reverse()}function rze(t){return k0(Dee(t))}function Xa(t,e,n){let r;if(typeof e=="string")try{r=k0(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(yT(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function U_(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!yT(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function sze(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function ize(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function oze(t){let e;for(e=0;t>kee;t>>=mT,e+=1);return e}function aze(t,e){return t>>BigInt(e)&mT}const cze=(t,e,n)=>t|(n?mT:kee)<<BigInt(e),OU=t=>(tze<<BigInt(t-1))-mT,xO=t=>new Uint8Array(t),i7=t=>Uint8Array.from(t);function Lee(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=xO(t),s=xO(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=xO())=>{s=a(i7([0]),d),r=a(),d.length!==0&&(s=a(i7([1]),d),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return U_(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const lze={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function i1(t,e,n={}){const r=(s,i,o)=>{const a=lze[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const uze=Object.freeze(Object.defineProperty({__proto__:null,bitGet:aze,bitLen:oze,bitMask:OU,bitSet:cze,bytesToHex:O0,bytesToNumberBE:og,bytesToNumberLE:RU,concatBytes:U_,createHmacDrbg:Lee,ensureBytes:Xa,equalBytes:sze,hexToBytes:k0,hexToNumber:TU,numberToBytesBE:D0,numberToBytesLE:PU,numberToHexUnpadded:Dee,numberToVarBytesBE:rze,utf8ToBytes:ize,validateObject:i1},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fs=BigInt(0),Rr=BigInt(1),tp=BigInt(2),dze=BigInt(3),k3=BigInt(4),o7=BigInt(5),a7=BigInt(8);BigInt(9);BigInt(16);function Vi(t,e){const n=t%e;return n>=fs?n:e+n}function hze(t,e,n){if(n<=fs||e<fs)throw new Error("Expected power/modulo > 0");if(n===Rr)return fs;let r=Rr;for(;e>fs;)e&Rr&&(r=r*t%n),t=t*t%n,e>>=Rr;return r}function ta(t,e,n){let r=t;for(;e-- >fs;)r*=r,r%=n;return r}function D3(t,e){if(t===fs||e<=fs)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Vi(t,e),r=e,s=fs,i=Rr;for(;n!==fs;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Rr)throw new Error("invert: does not exist");return Vi(s,e)}function fze(t){const e=(t-Rr)/tp;let n,r,s;for(n=t-Rr,r=0;n%tp===fs;n/=tp,r++);for(s=tp;s<t&&hze(s,e,t)!==t-Rr;s++);if(r===1){const o=(t+Rr)/k3;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(n+Rr)/tp;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,s),n),d=a.pow(c,i),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(h);f<l&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const p=a.pow(u,Rr<<BigInt(l-f-1));u=a.sqr(p),d=a.mul(d,p),h=a.mul(h,u),l=f}return d}}function pze(t){if(t%k3===dze){const e=(t+Rr)/k3;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%a7===o7){const e=(t-o7)/a7;return function(r,s){const i=r.mul(s,tp),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,tp),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return fze(t)}const gze=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function mze(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=gze.reduce((r,s)=>(r[s]="function",r),e);return i1(t,n)}function yze(t,e,n){if(n<fs)throw new Error("Expected power > 0");if(n===fs)return t.ONE;if(n===Rr)return e;let r=t.ONE,s=e;for(;n>fs;)n&Rr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Rr;return r}function wze(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function Mee(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function bze(t,e,n=!1,r={}){if(t<=fs)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=Mee(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=pze(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:OU(s),ZERO:fs,ONE:Rr,create:c=>Vi(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return fs<=c&&c<t},is0:c=>c===fs,isOdd:c=>(c&Rr)===Rr,neg:c=>Vi(-c,t),eql:(c,l)=>c===l,sqr:c=>Vi(c*c,t),add:(c,l)=>Vi(c+l,t),sub:(c,l)=>Vi(c-l,t),mul:(c,l)=>Vi(c*l,t),pow:(c,l)=>yze(a,c,l),div:(c,l)=>Vi(c*D3(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>D3(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>wze(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?PU(c,i):D0(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?RU(c):og(c)}});return Object.freeze(a)}function Uee(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function $ee(t){const e=Uee(t);return e+Math.ceil(e/2)}function vze(t,e,n=!1){const r=t.length,s=Uee(e),i=$ee(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=n?og(t):RU(t),a=Vi(o,e-Rr)+Rr;return n?PU(a,s):D0(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Eze=BigInt(0),NO=BigInt(1);function _ze(t,e){const n=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>Eze;)i&NO&&(o=o.add(a)),a=a.double(),i>>=NO;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=r(i),c=[];let l=s,u=l;for(let d=0;d<o;d++){u=l,c.push(u);for(let h=1;h<a;h++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=r(s);let l=t.ZERO,u=t.BASE;const d=BigInt(2**s-1),h=2**s,f=BigInt(s);for(let p=0;p<a;p++){const g=p*c;let y=Number(o&d);o>>=f,y>c&&(y-=h,o+=NO);const m=g,w=g+Math.abs(y)-1,v=p%2!==0,A=y<0;y===0?u=u.add(n(v,i[m])):l=l.add(n(A,i[w]))}return{p:l,f:u}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function Bee(t){return mze(t.Fp),i1(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Mee(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Cze(t){const e=Bee(t);i1(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:Aze,hexToBytes:Sze}=uze,bp={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=bp;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:Aze(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=bp,n=typeof t=="string"?Sze(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=bp._parseInt(n.subarray(2)),{d:o,l:a}=bp._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,o=s.length/2,a=n(i),c=n(o);return`30${n(o+i+4)}02${c}${s}02${a}${r}`}},Ou=BigInt(0),ga=BigInt(1);BigInt(2);const c7=BigInt(3);BigInt(4);function Ize(t){const e=Cze(t),{Fp:n}=e,r=e.toBytes||((p,g,y)=>{const m=g.toAffine();return U_(Uint8Array.from([4]),n.toBytes(m.x),n.toBytes(m.y))}),s=e.fromBytes||(p=>{const g=p.subarray(1),y=n.fromBytes(g.subarray(0,n.BYTES)),m=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:y,y:m}});function i(p){const{a:g,b:y}=e,m=n.sqr(p),w=n.mul(m,p);return n.add(n.add(w,n.mul(p,g)),y)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&Ou<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:g,nByteLength:y,wrapPrivateKey:m,n:w}=e;if(g&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=O0(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(y*2,"0")}let v;try{v=typeof p=="bigint"?p:og(Xa("private key",p,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof p}`)}return m&&(v=Vi(v,w)),a(v),v}const l=new Map;function u(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(g,y,m){if(this.px=g,this.py=y,this.pz=m,g==null||!n.isValid(g))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(m==null||!n.isValid(m))throw new Error("z required")}static fromAffine(g){const{x:y,y:m}=g||{};if(!g||!n.isValid(y)||!n.isValid(m))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const w=v=>n.eql(v,n.ZERO);return w(y)&&w(m)?d.ZERO:new d(y,m,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const y=n.invertBatch(g.map(m=>m.pz));return g.map((m,w)=>m.toAffine(y[w])).map(d.fromAffine)}static fromHex(g){const y=d.fromAffine(s(Xa("pointHex",g)));return y.assertValidity(),y}static fromPrivateKey(g){return d.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y}=this.toAffine();if(!n.isValid(g)||!n.isValid(y))throw new Error("bad point: x or y not FE");const m=n.sqr(y),w=i(g);if(!n.eql(m,w))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:y,py:m,pz:w}=this,{px:v,py:A,pz:C}=g,S=n.eql(n.mul(y,C),n.mul(v,w)),x=n.eql(n.mul(m,C),n.mul(A,w));return S&&x}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:y}=e,m=n.mul(y,c7),{px:w,py:v,pz:A}=this;let C=n.ZERO,S=n.ZERO,x=n.ZERO,T=n.mul(w,w),I=n.mul(v,v),k=n.mul(A,A),O=n.mul(w,v);return O=n.add(O,O),x=n.mul(w,A),x=n.add(x,x),C=n.mul(g,x),S=n.mul(m,k),S=n.add(C,S),C=n.sub(I,S),S=n.add(I,S),S=n.mul(C,S),C=n.mul(O,C),x=n.mul(m,x),k=n.mul(g,k),O=n.sub(T,k),O=n.mul(g,O),O=n.add(O,x),x=n.add(T,T),T=n.add(x,T),T=n.add(T,k),T=n.mul(T,O),S=n.add(S,T),k=n.mul(v,A),k=n.add(k,k),T=n.mul(k,O),C=n.sub(C,T),x=n.mul(k,I),x=n.add(x,x),x=n.add(x,x),new d(C,S,x)}add(g){u(g);const{px:y,py:m,pz:w}=this,{px:v,py:A,pz:C}=g;let S=n.ZERO,x=n.ZERO,T=n.ZERO;const I=e.a,k=n.mul(e.b,c7);let O=n.mul(y,v),B=n.mul(m,A),G=n.mul(w,C),W=n.add(y,m),R=n.add(v,A);W=n.mul(W,R),R=n.add(O,B),W=n.sub(W,R),R=n.add(y,w);let N=n.add(v,C);return R=n.mul(R,N),N=n.add(O,G),R=n.sub(R,N),N=n.add(m,w),S=n.add(A,C),N=n.mul(N,S),S=n.add(B,G),N=n.sub(N,S),T=n.mul(I,R),S=n.mul(k,G),T=n.add(S,T),S=n.sub(B,T),T=n.add(B,T),x=n.mul(S,T),B=n.add(O,O),B=n.add(B,O),G=n.mul(I,G),R=n.mul(k,R),B=n.add(B,G),G=n.sub(O,G),G=n.mul(I,G),R=n.add(R,G),O=n.mul(B,R),x=n.add(x,O),O=n.mul(N,R),S=n.mul(W,S),S=n.sub(S,O),O=n.mul(W,B),T=n.mul(N,T),T=n.add(T,O),new d(S,x,T)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return f.wNAFCached(this,l,g,y=>{const m=n.invertBatch(y.map(w=>w.pz));return y.map((w,v)=>w.toAffine(m[v])).map(d.fromAffine)})}multiplyUnsafe(g){const y=d.ZERO;if(g===Ou)return y;if(a(g),g===ga)return this;const{endo:m}=e;if(!m)return f.unsafeLadder(this,g);let{k1neg:w,k1:v,k2neg:A,k2:C}=m.splitScalar(g),S=y,x=y,T=this;for(;v>Ou||C>Ou;)v&ga&&(S=S.add(T)),C&ga&&(x=x.add(T)),T=T.double(),v>>=ga,C>>=ga;return w&&(S=S.negate()),A&&(x=x.negate()),x=new d(n.mul(x.px,m.beta),x.py,x.pz),S.add(x)}multiply(g){a(g);let y=g,m,w;const{endo:v}=e;if(v){const{k1neg:A,k1:C,k2neg:S,k2:x}=v.splitScalar(y);let{p:T,f:I}=this.wNAF(C),{p:k,f:O}=this.wNAF(x);T=f.constTimeNegate(A,T),k=f.constTimeNegate(S,k),k=new d(n.mul(k.px,v.beta),k.py,k.pz),m=T.add(k),w=I.add(O)}else{const{p:A,f:C}=this.wNAF(y);m=A,w=C}return d.normalizeZ([m,w])[0]}multiplyAndAddUnsafe(g,y,m){const w=d.BASE,v=(C,S)=>S===Ou||S===ga||!C.equals(w)?C.multiplyUnsafe(S):C.multiply(S),A=v(this,y).add(v(g,m));return A.is0()?void 0:A}toAffine(g){const{px:y,py:m,pz:w}=this,v=this.is0();g==null&&(g=v?n.ONE:n.inv(w));const A=n.mul(y,g),C=n.mul(m,g),S=n.mul(w,g);if(v)return{x:n.ZERO,y:n.ZERO};if(!n.eql(S,n.ONE))throw new Error("invZ was invalid");return{x:A,y:C}}isTorsionFree(){const{h:g,isTorsionFree:y}=e;if(g===ga)return!0;if(y)return y(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:y}=e;return g===ga?this:y?y(d,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),r(d,this,g)}toHex(g=!0){return O0(this.toRawBytes(g))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,f=_ze(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function xze(t){const e=Bee(t);return i1(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Nze(t){const e=xze(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(R){return Ou<R&&R<n.ORDER}function a(R){return Vi(R,r)}function c(R){return D3(R,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:h}=Ize({...e,toBytes(R,N,M){const P=N.toAffine(),L=n.toBytes(P.x),F=U_;return M?F(Uint8Array.from([N.hasEvenY()?2:3]),L):F(Uint8Array.from([4]),L,n.toBytes(P.y))},fromBytes(R){const N=R.length,M=R[0],P=R.subarray(1);if(N===s&&(M===2||M===3)){const L=og(P);if(!o(L))throw new Error("Point is not on curve");const F=d(L);let q=n.sqrt(F);const ne=(q&ga)===ga;return(M&1)===1!==ne&&(q=n.neg(q)),{x:L,y:q}}else if(N===i&&M===4){const L=n.fromBytes(P.subarray(0,n.BYTES)),F=n.fromBytes(P.subarray(n.BYTES,2*n.BYTES));return{x:L,y:F}}else throw new Error(`Point of length ${N} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=R=>O0(D0(R,e.nByteLength));function p(R){const N=r>>ga;return R>N}function g(R){return p(R)?a(-R):R}const y=(R,N,M)=>og(R.slice(N,M));class m{constructor(N,M,P){this.r=N,this.s=M,this.recovery=P,this.assertValidity()}static fromCompact(N){const M=e.nByteLength;return N=Xa("compactSignature",N,M*2),new m(y(N,0,M),y(N,M,2*M))}static fromDER(N){const{r:M,s:P}=bp.toSig(Xa("DER",N));return new m(M,P)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(N){return new m(this.r,this.s,N)}recoverPublicKey(N){const{r:M,s:P,recovery:L}=this,F=x(Xa("msgHash",N));if(L==null||![0,1,2,3].includes(L))throw new Error("recovery id invalid");const q=L===2||L===3?M+e.n:M;if(q>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const ne=L&1?"03":"02",le=l.fromHex(ne+f(q)),ie=c(q),re=a(-F*ie),ye=a(P*ie),Z=l.BASE.multiplyAndAddUnsafe(le,re,ye);if(!Z)throw new Error("point at infinify");return Z.assertValidity(),Z}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return k0(this.toDERHex())}toDERHex(){return bp.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return k0(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const w={isValidPrivateKey(R){try{return u(R),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const R=$ee(e.n);return vze(e.randomBytes(R),e.n)},precompute(R=8,N=l.BASE){return N._setWindowSize(R),N.multiply(BigInt(3)),N}};function v(R,N=!0){return l.fromPrivateKey(R).toRawBytes(N)}function A(R){const N=R instanceof Uint8Array,M=typeof R=="string",P=(N||M)&&R.length;return N?P===s||P===i:M?P===2*s||P===2*i:R instanceof l}function C(R,N,M=!0){if(A(R))throw new Error("first arg must be private key");if(!A(N))throw new Error("second arg must be public key");return l.fromHex(N).multiply(u(R)).toRawBytes(M)}const S=e.bits2int||function(R){const N=og(R),M=R.length*8-e.nBitLength;return M>0?N>>BigInt(M):N},x=e.bits2int_modN||function(R){return a(S(R))},T=OU(e.nBitLength);function I(R){if(typeof R!="bigint")throw new Error("bigint expected");if(!(Ou<=R&&R<T))throw new Error(`bigint expected < 2^${e.nBitLength}`);return D0(R,e.nByteLength)}function k(R,N,M=O){if(["recovered","canonical"].some(he=>he in M))throw new Error("sign() legacy options not supported");const{hash:P,randomBytes:L}=e;let{lowS:F,prehash:q,extraEntropy:ne}=M;F==null&&(F=!0),R=Xa("msgHash",R),q&&(R=Xa("prehashed msgHash",P(R)));const le=x(R),ie=u(N),re=[I(ie),I(le)];if(ne!=null){const he=ne===!0?L(n.BYTES):ne;re.push(Xa("extraEntropy",he))}const ye=U_(...re),Z=le;function oe(he){const de=S(he);if(!h(de))return;const be=c(de),We=l.BASE.multiply(de).toAffine(),_e=a(We.x);if(_e===Ou)return;const Ae=a(be*a(Z+_e*ie));if(Ae===Ou)return;let tt=(We.x===_e?0:2)|Number(We.y&ga),Se=Ae;return F&&p(Ae)&&(Se=g(Ae),tt^=1),new m(_e,Se,tt)}return{seed:ye,k2sig:oe}}const O={lowS:e.lowS,prehash:!1},B={lowS:e.lowS,prehash:!1};function G(R,N,M=O){const{seed:P,k2sig:L}=k(R,N,M),F=e;return Lee(F.hash.outputLen,F.nByteLength,F.hmac)(P,L)}l.BASE._setWindowSize(8);function W(R,N,M,P=B){var We;const L=R;if(N=Xa("msgHash",N),M=Xa("publicKey",M),"strict"in P)throw new Error("options.strict was renamed to lowS");const{lowS:F,prehash:q}=P;let ne,le;try{if(typeof L=="string"||L instanceof Uint8Array)try{ne=m.fromDER(L)}catch(_e){if(!(_e instanceof bp.Err))throw _e;ne=m.fromCompact(L)}else if(typeof L=="object"&&typeof L.r=="bigint"&&typeof L.s=="bigint"){const{r:_e,s:Ae}=L;ne=new m(_e,Ae)}else throw new Error("PARSE");le=l.fromHex(M)}catch(_e){if(_e.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(F&&ne.hasHighS())return!1;q&&(N=e.hash(N));const{r:ie,s:re}=ne,ye=x(N),Z=c(re),oe=a(ye*Z),he=a(ie*Z),de=(We=l.BASE.multiplyAndAddUnsafe(le,oe,he))==null?void 0:We.toAffine();return de?a(de.x)===ie:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:C,sign:G,verify:W,ProjectivePoint:l,Signature:m,utils:w}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Tze(t){return{hash:t,hmac:(e,...n)=>gee(t,e,m7e(...n)),randomBytes:y7e}}function Rze(t,e){const n=r=>Nze({...t,...Tze(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Fee=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),l7=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Pze=BigInt(1),L3=BigInt(2),u7=(t,e)=>(t+e/L3)/e;function Oze(t){const e=Fee,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=ta(u,n,e)*u%e,h=ta(d,n,e)*u%e,f=ta(h,L3,e)*l%e,p=ta(f,s,e)*f%e,g=ta(p,i,e)*p%e,y=ta(g,a,e)*g%e,m=ta(y,c,e)*y%e,w=ta(m,a,e)*g%e,v=ta(w,n,e)*u%e,A=ta(v,o,e)*p%e,C=ta(A,r,e)*l%e,S=ta(C,L3,e);if(!M3.eql(M3.sqr(S),t))throw new Error("Cannot find square root");return S}const M3=bze(Fee,void 0,void 0,{sqrt:Oze}),$d=Rze({a:BigInt(0),b:BigInt(7),Fp:M3,n:l7,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=l7,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Pze*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=u7(i*t,e),c=u7(-r*t,e);let l=Vi(t-a*n-c*s,e),u=Vi(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},yee);BigInt(0);$d.ProjectivePoint;const $_="0x0000000000000000000000000000000000000000",d7="0x0000000000000000000000000000000000000000000000000000000000000000",h7=BigInt(0),f7=BigInt(1),p7=BigInt(2),g7=BigInt(27),m7=BigInt(28),PA=BigInt(35),Km={};function y7(t){return id(Kr(t),32)}var gw,nl,mw,Fp;const Qa=class Qa{constructor(e,n,r,s){K(this,gw);K(this,nl);K(this,mw);K(this,Fp);hT(e,Km,"Signature"),U(this,gw,n),U(this,nl,r),U(this,mw,s),U(this,Fp,null)}get r(){return _(this,gw)}set r(e){Q(Gy(e)===32,"invalid r","value",e),U(this,gw,Le(e))}get s(){return Q(parseInt(_(this,nl).substring(0,3))<8,"non-canonical s; use ._s","s",_(this,nl)),_(this,nl)}set s(e){Q(Gy(e)===32,"invalid s","value",e),U(this,nl,Le(e))}get _s(){return _(this,nl)}isValid(){return parseInt(_(this,nl).substring(0,3))<8}get v(){return _(this,mw)}set v(e){const n=zt(e,"value");Q(n===27||n===28,"invalid v","v",e),U(this,mw,n)}get networkV(){return _(this,Fp)}get legacyChainId(){const e=this.networkV;return e==null?null:Qa.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=jt(this.s);return this.yParity&&(e[0]|=128),Le(e)}get compactSerialized(){return _r([this.r,this.yParityAndS])}get serialized(){return _r([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Qa(Km,this.r,this._s,this.v);return this.networkV&&U(e,Fp,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const n=Xe(e,"v");return n==g7||n==m7?h7:(Q(n>=PA,"invalid EIP-155 v","v",e),(n-PA)/p7)}static getChainIdV(e,n){return Xe(e)*p7+BigInt(35+n-27)}static getNormalizedV(e){const n=Xe(e);return n===h7||n===g7?27:n===f7||n===m7?28:(Q(n>=PA,"invalid v","v",e),n&f7?27:28)}static from(e){function n(l,u){Q(l,u,"signature",e)}if(e==null)return new Qa(Km,d7,d7,27);if(typeof e=="string"){const l=jt(e,"signature");if(l.length===64){const u=Le(l.slice(0,32)),d=l.slice(32,64),h=d[0]&128?28:27;return d[0]&=127,new Qa(Km,u,Le(d),h)}if(l.length===65){const u=Le(l.slice(0,32)),d=Le(l.slice(32,64)),h=Qa.getNormalizedV(l[64]);return new Qa(Km,u,d,h)}n(!1,"invalid raw signature length")}if(e instanceof Qa)return e.clone();const r=e.r;n(r!=null,"missing r");const s=y7(r),i=function(l,u){if(l!=null)return y7(l);if(u!=null){n(Yn(u,32),"invalid yParityAndS");const d=jt(u);return d[0]&=127,Le(d)}n(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:a}=function(l,u,d){if(l!=null){const h=Xe(l);return{networkV:h>=PA?h:void 0,v:Qa.getNormalizedV(h)}}if(u!=null)return n(Yn(u,32),"invalid yParityAndS"),{v:jt(u)[0]&128?28:27};if(d!=null){switch(zt(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new Qa(Km,s,i,a);return o&&U(c,Fp,o),n(e.yParity==null||zt(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};gw=new WeakMap,nl=new WeakMap,mw=new WeakMap,Fp=new WeakMap;let oo=Qa;var _u;const np=class np{constructor(e){K(this,_u);Q(Gy(e)===32,"invalid private key","privateKey","[REDACTED]"),U(this,_u,Le(e))}get privateKey(){return _(this,_u)}get publicKey(){return np.computePublicKey(_(this,_u))}get compressedPublicKey(){return np.computePublicKey(_(this,_u),!0)}sign(e){Q(Gy(e)===32,"invalid digest length","digest",e);const n=$d.sign(fi(e),fi(_(this,_u)),{lowS:!0});return oo.from({r:gf(n.r,32),s:gf(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=np.computePublicKey(e);return Le($d.getSharedSecret(fi(_(this,_u)),jt(n),!1))}static computePublicKey(e,n){let r=jt(e,"key");if(r.length===32){const i=$d.getPublicKey(r,!!n);return Le(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=$d.ProjectivePoint.fromHex(r);return Le(s.toRawBytes(n))}static recoverPublicKey(e,n){Q(Gy(e)===32,"invalid digest length","digest",e);const r=oo.from(n);let s=$d.Signature.fromCompact(fi(_r([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey(fi(e));return Q(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,r){const s=$d.ProjectivePoint.fromHex(np.computePublicKey(e).substring(2)),i=$d.ProjectivePoint.fromHex(np.computePublicKey(n).substring(2));return"0x"+s.add(i).toHex(!!r)}};_u=new WeakMap;let B_=np;const kze=BigInt(0),Dze=BigInt(36);function w7(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let s=0;s<40;s++)n[s]=e[s].charCodeAt(0);const r=jt(Lr(n));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const kU={};for(let t=0;t<10;t++)kU[String(t)]=String(t);for(let t=0;t<26;t++)kU[String.fromCharCode(65+t)]=String(10+t);const b7=15;function Lze(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>kU[r]).join("");for(;e.length>=b7;){let r=e.substring(0,b7);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const Mze=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function Uze(t){t=t.toLowerCase();let e=kze;for(let n=0;n<t.length;n++)e=e*Dze+Mze[t[n]];return e}function vn(t){if(Q(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=w7(t);return Q(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){Q(t.substring(2,4)===Lze(t),"bad icap checksum","address",t);let e=Uze(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return w7("0x"+e)}Q(!1,"invalid address","address",t)}function $ze(t){const e=vn(t.from);let r=Xe(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,vn(wr(Lr(yf([e,r])),12))}function jee(t){return t&&typeof t.getAddress=="function"}async function TO(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(me(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),Q(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),vn(n)}function yi(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?vn(t):(me(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),TO(t,e.resolveName(t)));if(jee(t))return TO(t,t.getAddress());if(t&&typeof t.then=="function")return TO(t,t);Q(!1,"unsupported addressable value","target",t)}const du={};function Ve(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new Js(du,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function un(t,e){return new Js(du,`bytes${e||""}`,t,{size:e})}const v7=Symbol.for("_ethers_typed");var jp;const hu=class hu{constructor(e,n,r,s){te(this,"type");te(this,"value");K(this,jp);te(this,"_typedSymbol");s==null&&(s=null),hT(du,e,"Typed"),mt(this,{_typedSymbol:v7,type:n,value:r}),U(this,jp,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return _(this,jp)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return _(this,jp)===!0?-1:_(this,jp)===!1?this.value.length:null}static from(e,n){return new hu(du,e,n)}static uint8(e){return Ve(e,8)}static uint16(e){return Ve(e,16)}static uint24(e){return Ve(e,24)}static uint32(e){return Ve(e,32)}static uint40(e){return Ve(e,40)}static uint48(e){return Ve(e,48)}static uint56(e){return Ve(e,56)}static uint64(e){return Ve(e,64)}static uint72(e){return Ve(e,72)}static uint80(e){return Ve(e,80)}static uint88(e){return Ve(e,88)}static uint96(e){return Ve(e,96)}static uint104(e){return Ve(e,104)}static uint112(e){return Ve(e,112)}static uint120(e){return Ve(e,120)}static uint128(e){return Ve(e,128)}static uint136(e){return Ve(e,136)}static uint144(e){return Ve(e,144)}static uint152(e){return Ve(e,152)}static uint160(e){return Ve(e,160)}static uint168(e){return Ve(e,168)}static uint176(e){return Ve(e,176)}static uint184(e){return Ve(e,184)}static uint192(e){return Ve(e,192)}static uint200(e){return Ve(e,200)}static uint208(e){return Ve(e,208)}static uint216(e){return Ve(e,216)}static uint224(e){return Ve(e,224)}static uint232(e){return Ve(e,232)}static uint240(e){return Ve(e,240)}static uint248(e){return Ve(e,248)}static uint256(e){return Ve(e,256)}static uint(e){return Ve(e,256)}static int8(e){return Ve(e,-8)}static int16(e){return Ve(e,-16)}static int24(e){return Ve(e,-24)}static int32(e){return Ve(e,-32)}static int40(e){return Ve(e,-40)}static int48(e){return Ve(e,-48)}static int56(e){return Ve(e,-56)}static int64(e){return Ve(e,-64)}static int72(e){return Ve(e,-72)}static int80(e){return Ve(e,-80)}static int88(e){return Ve(e,-88)}static int96(e){return Ve(e,-96)}static int104(e){return Ve(e,-104)}static int112(e){return Ve(e,-112)}static int120(e){return Ve(e,-120)}static int128(e){return Ve(e,-128)}static int136(e){return Ve(e,-136)}static int144(e){return Ve(e,-144)}static int152(e){return Ve(e,-152)}static int160(e){return Ve(e,-160)}static int168(e){return Ve(e,-168)}static int176(e){return Ve(e,-176)}static int184(e){return Ve(e,-184)}static int192(e){return Ve(e,-192)}static int200(e){return Ve(e,-200)}static int208(e){return Ve(e,-208)}static int216(e){return Ve(e,-216)}static int224(e){return Ve(e,-224)}static int232(e){return Ve(e,-232)}static int240(e){return Ve(e,-240)}static int248(e){return Ve(e,-248)}static int256(e){return Ve(e,-256)}static int(e){return Ve(e,-256)}static bytes1(e){return un(e,1)}static bytes2(e){return un(e,2)}static bytes3(e){return un(e,3)}static bytes4(e){return un(e,4)}static bytes5(e){return un(e,5)}static bytes6(e){return un(e,6)}static bytes7(e){return un(e,7)}static bytes8(e){return un(e,8)}static bytes9(e){return un(e,9)}static bytes10(e){return un(e,10)}static bytes11(e){return un(e,11)}static bytes12(e){return un(e,12)}static bytes13(e){return un(e,13)}static bytes14(e){return un(e,14)}static bytes15(e){return un(e,15)}static bytes16(e){return un(e,16)}static bytes17(e){return un(e,17)}static bytes18(e){return un(e,18)}static bytes19(e){return un(e,19)}static bytes20(e){return un(e,20)}static bytes21(e){return un(e,21)}static bytes22(e){return un(e,22)}static bytes23(e){return un(e,23)}static bytes24(e){return un(e,24)}static bytes25(e){return un(e,25)}static bytes26(e){return un(e,26)}static bytes27(e){return un(e,27)}static bytes28(e){return un(e,28)}static bytes29(e){return un(e,29)}static bytes30(e){return un(e,30)}static bytes31(e){return un(e,31)}static bytes32(e){return un(e,32)}static address(e){return new hu(du,"address",e)}static bool(e){return new hu(du,"bool",!!e)}static bytes(e){return new hu(du,"bytes",e)}static string(e){return new hu(du,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new hu(du,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===v7}static dereference(e,n){if(hu.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};jp=new WeakMap;let Js=hu;class Bze extends hd{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=Js.dereference(n,"string");try{r=vn(r)}catch(s){return this._throwError(s.message,n)}return e.writeValue(r)}decode(e){return vn(gf(e.readValue(),20))}}class Fze extends hd{constructor(n){super(n.name,n.type,"_",n.dynamic);te(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function zee(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(l=>{const u=l.localName;return me(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),me(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),c[u]=!0,n[u]})}else Q(!1,"invalid tuple value","tuple",n);Q(e.length===r.length,"types/value length mismatch","tuple",n);let s=new T3,i=new T3,o=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let d=i.length;c.encode(i,u);let h=s.writeUpdatableValue();o.push(f=>{h(f+d)})}else c.encode(s,u)}),o.forEach(c=>{c(s.length)});let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function Wee(t,e){let n=[],r=[],s=t.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=t.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(l){if(Ns(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(a){if(Ns(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");n.push(o),r.push(i.localName||null)}),R0.fromItems(n,r)}class jze extends hd{constructor(n,r,s){const i=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",i,s,o);te(this,"coder");te(this,"length");mt(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(n);return r}encode(n,r){const s=Js.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,n.writeValue(s.length)),ZX(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return zee(n,o,s)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),me(r*mi<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*mi,length:n.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new Fze(this.coder));return Wee(n,s)}}class zze extends hd{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=Js.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class Hee extends hd{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=fi(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class Wze extends Hee{constructor(e){super("bytes",e)}decode(e){return Le(super.decode(e))}}class Hze extends hd{constructor(n,r){let s="bytes"+String(n);super(s,s,r,!1);te(this,"size");mt(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let s=fi(Js.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(s)}decode(n){return Le(n.readBytes(this.size))}}const Gze=new Uint8Array([]);class qze extends hd{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(Gze)}decode(e){return e.readBytes(0),null}}const Vze=BigInt(0),Kze=BigInt(1),Yze=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Qze extends hd{constructor(n,r,s){const i=(r?"int":"uint")+n*8;super(i,i,s,!1);te(this,"size");te(this,"signed");mt(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let s=Xe(Js.dereference(r,this.type)),i=Ev(Yze,mi*8);if(this.signed){let o=Ev(i,this.size*8-1);(s>o||s<-(o+Kze))&&this._throwError("value out-of-bounds",r),s=tee(s,8*mi)}else(s<Vze||s>Ev(i,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(s)}decode(n){let r=Ev(n.readValue(),this.size*8);return this.signed&&(r=V9e(r,this.size*8)),r}}class Jze extends Hee{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,qu(Js.dereference(n,"string")))}decode(e){return sx(super.decode(e))}}class OA extends hd{constructor(n,r){let s=!1;const i=[];n.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,r,s);te(this,"coders");mt(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(s=>{n.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[i]))}),Object.freeze(n)}encode(n,r){const s=Js.dereference(r,"tuple");return zee(n,this.coders,s)}decode(n){return Wee(n,this.coders)}}function RO(t,e){return{address:vn(t),storageKeys:e.map((n,r)=>(Q(Yn(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function lm(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(Q(n.length===2,"invalid slot set",`value[${r}]`,n),RO(n[0],n[1])):(Q(n!=null&&typeof n=="object","invalid address-slot set","value",t),RO(n.address,n.storageKeys)));Q(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((s,i)=>(s[i]=!0,s),{});return RO(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function Gee(t){return{address:vn(t.address),nonce:Xe(t.nonce!=null?t.nonce:0),chainId:Xe(t.chainId!=null?t.chainId:0),signature:oo.from(t.signature)}}function Zze(t){let e;return typeof t=="string"?e=B_.computePublicKey(t,!1):e=t.publicKey,vn(Lr("0x"+e.substring(4)).substring(26))}function Xze(t,e){return Zze(B_.recoverPublicKey(t,e))}const os=BigInt(0),eWe=BigInt(2),tWe=BigInt(27),nWe=BigInt(28),rWe=BigInt(35),sWe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),PO=4096*32;function iWe(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return jt(t.blobToKzgCommitment(Le(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return jt(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return jt(t.blobToKZGCommitment(Le(r)));Q(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return jt(t.computeBlobProof(Le(r),Le(s)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return jt(t.computeBlobKZGProof(Le(r),Le(s)));Q(!1,"unsupported KZG library","kzg",t)}}}function E7(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=fb(e).substring(4),"0x"+n}function pb(t){return t==="0x"?null:vn(t)}function wT(t,e){try{return lm(t)}catch(n){Q(!1,n.message,e,t)}}function oWe(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const s=t[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);n.push({address:pb(s[1]),nonce:On(s[2],"nonce"),chainId:On(s[0],"chainId"),signature:oo.from({yParity:um(s[3],"yParity"),r:id(s[4],32),s:id(s[5],32)})})}return n}catch(n){Q(!1,n.message,e,t)}}function um(t,e){return t==="0x"?0:zt(t,e)}function On(t,e){if(t==="0x")return os;const n=Xe(t,e);return Q(n<=sWe,"value exceeds uint size",e,n),n}function Jt(t,e){const n=Xe(t,"value"),r=Kr(n);return Q(r.length<=32,"value too large",`tx.${e}`,n),r}function bT(t){return lm(t).map(e=>[e.address,e.storageKeys])}function aWe(t){return t.map(e=>[Jt(e.chainId,"chainId"),e.address,Jt(e.nonce,"nonce"),Jt(e.signature.yParity,"yParity"),Kr(e.signature.r),Kr(e.signature.s)])}function cWe(t,e){Q(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)Q(Yn(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function lWe(t){const e=s1(t);Q(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:um(e[0],"nonce"),gasPrice:On(e[1],"gasPrice"),gasLimit:On(e[2],"gasLimit"),to:pb(e[3]),value:On(e[4],"value"),data:Le(e[5]),chainId:os};if(e.length===6)return n;const r=On(e[6],"v"),s=On(e[7],"r"),i=On(e[8],"s");if(s===os&&i===os)n.chainId=r;else{let o=(r-rWe)/eWe;o<os&&(o=os),n.chainId=o,Q(o!==os||r===tWe||r===nWe,"non-canonical legacy v","v",e[6]),n.signature=oo.from({r:id(e[7],32),s:id(e[8],32),v:r})}return n}function uWe(t,e){const n=[Jt(t.nonce,"nonce"),Jt(t.gasPrice||0,"gasPrice"),Jt(t.gasLimit,"gasLimit"),t.to||"0x",Jt(t.value,"value"),t.data];let r=os;if(t.chainId!=os)r=Xe(t.chainId,"tx.chainId"),Q(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(r=i)}if(!e)return r!==os&&(n.push(Kr(r)),n.push("0x"),n.push("0x")),yf(n);let s=BigInt(27+e.yParity);return r!==os?s=oo.getChainIdV(r,e.v):BigInt(e.v)!==s&&Q(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(Kr(s)),n.push(Kr(e.r)),n.push(Kr(e.s)),yf(n)}function vT(t,e){let n;try{if(n=um(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{Q(!1,"invalid yParity","yParity",e[0])}const r=id(e[1],32),s=id(e[2],32),i=oo.from({r,s,yParity:n});t.signature=i}function dWe(t){const e=s1(jt(t).slice(1));Q(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Le(t));const n={type:2,chainId:On(e[0],"chainId"),nonce:um(e[1],"nonce"),maxPriorityFeePerGas:On(e[2],"maxPriorityFeePerGas"),maxFeePerGas:On(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:On(e[4],"gasLimit"),to:pb(e[5]),value:On(e[6],"value"),data:Le(e[7]),accessList:wT(e[8],"accessList")};return e.length===9||vT(n,e.slice(9)),n}function hWe(t,e){const n=[Jt(t.chainId,"chainId"),Jt(t.nonce,"nonce"),Jt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Jt(t.maxFeePerGas||0,"maxFeePerGas"),Jt(t.gasLimit,"gasLimit"),t.to||"0x",Jt(t.value,"value"),t.data,bT(t.accessList||[])];return e&&(n.push(Jt(e.yParity,"yParity")),n.push(Kr(e.r)),n.push(Kr(e.s))),_r(["0x02",yf(n)])}function fWe(t){const e=s1(jt(t).slice(1));Q(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Le(t));const n={type:1,chainId:On(e[0],"chainId"),nonce:um(e[1],"nonce"),gasPrice:On(e[2],"gasPrice"),gasLimit:On(e[3],"gasLimit"),to:pb(e[4]),value:On(e[5],"value"),data:Le(e[6]),accessList:wT(e[7],"accessList")};return e.length===8||vT(n,e.slice(8)),n}function pWe(t,e){const n=[Jt(t.chainId,"chainId"),Jt(t.nonce,"nonce"),Jt(t.gasPrice||0,"gasPrice"),Jt(t.gasLimit,"gasLimit"),t.to||"0x",Jt(t.value,"value"),t.data,bT(t.accessList||[])];return e&&(n.push(Jt(e.yParity,"recoveryParam")),n.push(Kr(e.r)),n.push(Kr(e.s))),_r(["0x01",yf(n)])}function gWe(t){let e=s1(jt(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const i=e[1],o=e[2],a=e[3];Q(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),Q(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),Q(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),Q(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),Q(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:i[c],commitment:o[c],proof:a[c]});e=e[0]}Q(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",Le(t));const s={type:3,chainId:On(e[0],"chainId"),nonce:um(e[1],"nonce"),maxPriorityFeePerGas:On(e[2],"maxPriorityFeePerGas"),maxFeePerGas:On(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:On(e[4],"gasLimit"),to:pb(e[5]),value:On(e[6],"value"),data:Le(e[7]),accessList:wT(e[8],"accessList"),maxFeePerBlobGas:On(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(s.blobs=r),Q(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),Q(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<s.blobVersionedHashes.length;i++)Q(Yn(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||vT(s,e.slice(11)),s}function mWe(t,e,n){const r=[Jt(t.chainId,"chainId"),Jt(t.nonce,"nonce"),Jt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Jt(t.maxFeePerGas||0,"maxFeePerGas"),Jt(t.gasLimit,"gasLimit"),t.to||$_,Jt(t.value,"value"),t.data,bT(t.accessList||[]),Jt(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),cWe(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(Jt(e.yParity,"yParity")),r.push(Kr(e.r)),r.push(Kr(e.s)),n)?_r(["0x03",yf([r,n.map(s=>s.data),n.map(s=>s.commitment),n.map(s=>s.proof)])]):_r(["0x03",yf(r)])}function yWe(t){const e=s1(jt(t).slice(1));Q(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Le(t));const n={type:4,chainId:On(e[0],"chainId"),nonce:um(e[1],"nonce"),maxPriorityFeePerGas:On(e[2],"maxPriorityFeePerGas"),maxFeePerGas:On(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:On(e[4],"gasLimit"),to:pb(e[5]),value:On(e[6],"value"),data:Le(e[7]),accessList:wT(e[8],"accessList"),authorizationList:oWe(e[9],"authorizationList")};return e.length===10||vT(n,e.slice(10)),n}function wWe(t,e){const n=[Jt(t.chainId,"chainId"),Jt(t.nonce,"nonce"),Jt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Jt(t.maxFeePerGas||0,"maxFeePerGas"),Jt(t.gasLimit,"gasLimit"),t.to||"0x",Jt(t.value,"value"),t.data,bT(t.accessList||[]),aWe(t.authorizationList||[])];return e&&(n.push(Jt(e.yParity,"yParity")),n.push(Kr(e.r)),n.push(Kr(e.s))),_r(["0x04",yf(n)])}var sc,yw,ww,bw,vw,Ew,_w,Cw,Aw,Sw,Iw,xw,zp,lh,rl,uh,Nw,Tw,_S;const Jc=class Jc{constructor(){K(this,Tw);K(this,sc);K(this,yw);K(this,ww);K(this,bw);K(this,vw);K(this,Ew);K(this,_w);K(this,Cw);K(this,Aw);K(this,Sw);K(this,Iw);K(this,xw);K(this,zp);K(this,lh);K(this,rl);K(this,uh);K(this,Nw);U(this,sc,null),U(this,yw,null),U(this,bw,0),U(this,vw,os),U(this,Ew,null),U(this,_w,null),U(this,Cw,null),U(this,ww,"0x"),U(this,Aw,os),U(this,Sw,os),U(this,Iw,null),U(this,xw,null),U(this,zp,null),U(this,lh,null),U(this,rl,null),U(this,uh,null),U(this,Nw,null)}get type(){return _(this,sc)}set type(e){switch(e){case null:U(this,sc,null);break;case 0:case"legacy":U(this,sc,0);break;case 1:case"berlin":case"eip-2930":U(this,sc,1);break;case 2:case"london":case"eip-1559":U(this,sc,2);break;case 3:case"cancun":case"eip-4844":U(this,sc,3);break;case 4:case"pectra":case"eip-7702":U(this,sc,4);break;default:Q(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=_(this,yw);return e==null&&this.type===3?$_:e}set to(e){U(this,yw,e==null?null:vn(e))}get nonce(){return _(this,bw)}set nonce(e){U(this,bw,zt(e,"value"))}get gasLimit(){return _(this,vw)}set gasLimit(e){U(this,vw,Xe(e))}get gasPrice(){const e=_(this,Ew);return e==null&&(this.type===0||this.type===1)?os:e}set gasPrice(e){U(this,Ew,e==null?null:Xe(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=_(this,_w);return e??(this.type===2||this.type===3?os:null)}set maxPriorityFeePerGas(e){U(this,_w,e==null?null:Xe(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=_(this,Cw);return e??(this.type===2||this.type===3?os:null)}set maxFeePerGas(e){U(this,Cw,e==null?null:Xe(e,"maxFeePerGas"))}get data(){return _(this,ww)}set data(e){U(this,ww,Le(e))}get value(){return _(this,Aw)}set value(e){U(this,Aw,Xe(e,"value"))}get chainId(){return _(this,Sw)}set chainId(e){U(this,Sw,Xe(e))}get signature(){return _(this,Iw)||null}set signature(e){U(this,Iw,e==null?null:oo.from(e))}get accessList(){const e=_(this,xw)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){U(this,xw,e==null?null:lm(e))}get authorizationList(){const e=_(this,Nw)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){U(this,Nw,e==null?null:e.map(n=>Gee(n)))}get maxFeePerBlobGas(){const e=_(this,zp);return e==null&&this.type===3?os:e}set maxFeePerBlobGas(e){U(this,zp,e==null?null:Xe(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=_(this,lh);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){Q(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)Q(Yn(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}U(this,lh,e)}get blobs(){return _(this,uh)==null?null:_(this,uh).map(e=>Object.assign({},e))}set blobs(e){if(e==null){U(this,uh,null);return}const n=[],r=[];for(let s=0;s<e.length;s++){const i=e[s];if(CU(i)){me(_(this,rl),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=jt(i);if(Q(o.length<=PO,"blob is too large",`blobs[${s}]`,i),o.length!==PO){const l=new Uint8Array(PO);l.set(o),o=l}const a=_(this,rl).blobToKzgCommitment(o),c=Le(_(this,rl).computeBlobKzgProof(o,a));n.push({data:Le(o),commitment:Le(a),proof:c}),r.push(E7(1,a))}else{const o=Le(i.commitment);n.push({data:Le(i.data),commitment:o,proof:Le(i.proof)}),r.push(E7(1,o))}}U(this,uh,n),U(this,lh,r)}get kzg(){return _(this,rl)}set kzg(e){e==null?U(this,rl,null):U(this,rl,iWe(e))}get hash(){return this.signature==null?null:Lr(fe(this,Tw,_S).call(this,!0,!1))}get unsignedHash(){return Lr(this.unsignedSerialized)}get from(){return this.signature==null?null:Xze(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:B_.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return fe(this,Tw,_S).call(this,!0,!0)}get unsignedSerialized(){return fe(this,Tw,_S).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=_(this,zp)!=null||_(this,lh);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&me(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),me(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),me(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Jc.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new Jc;if(typeof e=="string"){const r=jt(e);if(r[0]>=127)return Jc.from(lWe(r));switch(r[0]){case 1:return Jc.from(fWe(r));case 2:return Jc.from(dWe(r));case 3:return Jc.from(gWe(r));case 4:return Jc.from(yWe(r))}me(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new Jc;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=oo.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(Q(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),Q(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(Q(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),Q(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};sc=new WeakMap,yw=new WeakMap,ww=new WeakMap,bw=new WeakMap,vw=new WeakMap,Ew=new WeakMap,_w=new WeakMap,Cw=new WeakMap,Aw=new WeakMap,Sw=new WeakMap,Iw=new WeakMap,xw=new WeakMap,zp=new WeakMap,lh=new WeakMap,rl=new WeakMap,uh=new WeakMap,Nw=new WeakMap,Tw=new WeakSet,_S=function(e,n){me(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return uWe(this,r);case 1:return pWe(this,r);case 2:return hWe(this,r);case 3:return mWe(this,r,n?this.blobs:null);case 4:return wWe(this,r)}me(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let ox=Jc;function $g(t){return Lr(qu(t))}var bWe="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const _7=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),C7=4;function vWe(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),s=1,i=[0,1];for(let C=1;C<r;C++)i.push(s+=n());let o=n(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const d=31,h=2**d,f=h>>>1,p=f>>1,g=h-1;let y=0;for(let C=0;C<d;C++)y=y<<1|u();let m=[],w=0,v=h;for(;;){let C=Math.floor(((y-w+1)*s-1)/v),S=0,x=r;for(;x-S>1;){let k=S+x>>>1;C<i[k]?x=k:S=k}if(S==0)break;m.push(S);let T=w+Math.floor(v*i[S]/s),I=w+Math.floor(v*i[S+1]/s)-1;for(;!((T^I)&f);)y=y<<1&g|u(),T=T<<1&g,I=I<<1&g|1;for(;T&~I&p;)y=y&f|y<<1&g>>>1|u(),T=T<<1^f,I=(I^f)<<1|f|1;w=T,v=1+I-T}let A=r-4;return m.map(C=>{switch(C-A){case 3:return A+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return A+256+(t[a++]<<8|t[a++]);case 1:return A+t[a++];default:return C-1}})}function EWe(t){let e=0;return()=>t[e++]}function qee(t){return EWe(vWe(_We(t)))}function _We(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let n=t.length,r=new Uint8Array(6*n>>3);for(let s=0,i=0,o=0,a=0;s<n;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(r[i++]=a>>(o-=8));return r}function CWe(t){return t&1?~t>>1:t>>1}function AWe(t,e){let n=Array(t);for(let r=0,s=0;r<t;r++)n[r]=s+=CWe(e());return n}function F_(t,e=0){let n=[];for(;;){let r=t(),s=t();if(!s)break;e+=r;for(let i=0;i<s;i++)n.push(e+i);e+=s+1}return n}function Vee(t){return j_(()=>{let e=F_(t);if(e.length)return e})}function Kee(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(SWe(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(IWe(n,t))}return e.flat()}function j_(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function Yee(t,e,n){let r=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)AWe(t,n).forEach((i,o)=>r[o].push(i));return r}function SWe(t,e){let n=1+e(),r=e(),s=j_(e);return Yee(s.length,1+t,e).flatMap((o,a)=>{let[c,...l]=o;return Array(s[a]).fill().map((u,d)=>{let h=d*r;return[c+d*n,l.map(f=>f+h)]})})}function IWe(t,e){let n=1+e();return Yee(n,1+t,e).map(s=>[s[0],s.slice(1)])}function xWe(t){let e=[],n=F_(t);return s(r([]),[]),e;function r(i){let o=t(),a=j_(()=>{let c=F_(t).map(l=>n[l]);if(c.length)return r(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&e.push(a);for(let l of o)for(let u of l.Q)s(l,[...a,u],c)}}}function NWe(t){return t.toString(16).toUpperCase().padStart(2,"0")}function Qee(t){return`{${NWe(t)}}`}function TWe(t){let e=[];for(let n=0,r=t.length;n<r;){let s=t.codePointAt(n);n+=s<65536?1:2,e.push(s)}return e}function L0(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let s=0;s<n;)r.push(String.fromCodePoint(...t.slice(s,s+=4096)));return r.join("")}function RWe(t,e){let n=t.length,r=n-e.length;for(let s=0;r==0&&s<n;s++)r=t[s]-e[s];return r}var PWe="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const z_=44032,ax=4352,cx=4449,lx=4519,Jee=19,Zee=21,M0=28,ux=Zee*M0,OWe=Jee*ux,kWe=z_+OWe,DWe=ax+Jee,LWe=cx+Zee,MWe=lx+M0;function Cv(t){return t>>24&255}function Xee(t){return t&16777215}let U3,A7,$3,CS;function UWe(){let t=qee(PWe);U3=new Map(Vee(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),A7=new Set(F_(t)),$3=new Map,CS=new Map;for(let[e,n]of Kee(t)){if(!A7.has(e)&&n.length==2){let[r,s]=n,i=CS.get(r);i||(i=new Map,CS.set(r,i)),i.set(s,e)}$3.set(e,n.reverse())}}function ete(t){return t>=z_&&t<kWe}function $We(t,e){if(t>=ax&&t<DWe&&e>=cx&&e<LWe)return z_+(t-ax)*ux+(e-cx)*M0;if(ete(t)&&e>lx&&e<MWe&&(t-z_)%M0==0)return t+(e-lx);{let n=CS.get(t);return n&&(n=n.get(e),n)?n:-1}}function tte(t){U3||UWe();let e=[],n=[],r=!1;function s(i){let o=U3.get(i);o&&(r=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(ete(i)){let o=i-z_,a=o/ux|0,c=o%ux/M0|0,l=o%M0;s(ax+a),s(cx+c),l>0&&s(lx+l)}else{let o=$3.get(i);o?n.push(...o):s(i)}if(!n.length)break;i=n.pop()}if(r&&e.length>1){let i=Cv(e[0]);for(let o=1;o<e.length;o++){let a=Cv(e[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(i=Cv(e[--c]),i<=a))break}i=Cv(e[o])}}return e}function BWe(t){let e=[],n=[],r=-1,s=0;for(let i of t){let o=Cv(i),a=Xee(i);if(r==-1)o==0?r=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),s=o;else{let c=$We(r,a);c>=0?r=c:s==0&&o==0?(e.push(r),r=a):(n.push(a),s=o)}}return r>=0&&e.push(r,...n),e}function nte(t){return tte(t).map(Xee)}function FWe(t){return BWe(tte(t))}const S7=45,rte=".",ste=65039,ite=1,dx=t=>Array.from(t);function W_(t,e){return t.P.has(e)||t.Q.has(e)}class jWe extends Array{get is_emoji(){return!0}}let B3,ote,vp,F3,ate,qy,OO,ny,qf,I7,j3;function DU(){if(B3)return;let t=qee(bWe);const e=()=>F_(t),n=()=>new Set(e()),r=(u,d)=>d.forEach(h=>u.add(h));B3=new Map(Kee(t)),ote=n(),vp=e(),F3=new Set(e().map(u=>vp[u])),vp=new Set(vp),ate=n(),n();let s=Vee(t),i=t();const o=()=>{let u=new Set;return e().forEach(d=>r(u,s[d])),r(u,e()),u};qy=j_(u=>{let d=j_(t).map(h=>h+96);if(d.length){let h=u>=i;d[0]-=32,d=L0(d),h&&(d=`Restricted[${d}]`);let f=o(),p=o(),g=!t();return{N:d,P:f,Q:p,M:g,R:h}}}),OO=n(),ny=new Map;let a=e().concat(dx(OO)).sort((u,d)=>u-d);a.forEach((u,d)=>{let h=t(),f=a[d]=h?a[d-h]:{V:[],M:new Map};f.V.push(u),OO.has(u)||ny.set(u,f)});for(let{V:u,M:d}of new Set(ny.values())){let h=[];for(let p of u){let g=qy.filter(m=>W_(m,p)),y=h.find(({G:m})=>g.some(w=>m.has(w)));y||(y={G:new Set,V:[]},h.push(y)),y.V.push(p),r(y.G,g)}let f=h.flatMap(p=>dx(p.G));for(let{G:p,V:g}of h){let y=new Set(f.filter(m=>!p.has(m)));for(let m of g)d.set(m,y)}}qf=new Set;let c=new Set;const l=u=>qf.has(u)?c.add(u):qf.add(u);for(let u of qy){for(let d of u.P)l(d);for(let d of u.Q)l(d)}for(let u of qf)!ny.has(u)&&!c.has(u)&&ny.set(u,ite);r(qf,nte(qf)),I7=xWe(t).map(u=>jWe.from(u)).sort(RWe),j3=new Map;for(let u of I7){let d=[j3];for(let h of u){let f=d.map(p=>{let g=p.get(h);return g||(g=new Map,p.set(h,g)),g});h===ste?d.push(...f):d=f}for(let h of d)h.V=u}}function LU(t){return(cte(t)?"":`${MU(ET([t]))} `)+Qee(t)}function MU(t){return`"${t}"‎`}function zWe(t){if(t.length>=4&&t[2]==S7&&t[3]==S7)throw new Error(`invalid label extension: "${L0(t.slice(0,4))}"`)}function WWe(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function HWe(t){let e=t[0],n=_7.get(e);if(n)throw iE(`leading ${n}`);let r=t.length,s=-1;for(let i=1;i<r;i++){e=t[i];let o=_7.get(e);if(o){if(s==i)throw iE(`${n} + ${o}`);s=i+1,n=o}}if(s==r)throw iE(`trailing ${n}`)}function ET(t,e=1/0,n=Qee){let r=[];GWe(t[0])&&r.push("◌"),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let o=0;o<i;o++){let a=t[o];cte(a)&&(r.push(L0(t.slice(s,o))),r.push(n(a)),s=o+1)}return r.push(L0(t.slice(s,i))),r.join("")}function GWe(t){return DU(),vp.has(t)}function cte(t){return DU(),ate.has(t)}function qWe(t){return QWe(VWe(t,FWe,XWe))}function VWe(t,e,n){if(!t)return[];DU();let r=0;return t.split(rte).map(s=>{let i=TWe(s),o={input:i,offset:r};r+=i.length+1;try{let a=o.tokens=ZWe(i,e,n),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(WWe(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(h=>h<128))zWe(u),l="ASCII";else{let h=a.flatMap(f=>f.is_emoji?[]:f);if(!h.length)l="Emoji";else{if(vp.has(u[0]))throw iE("leading combining mark");for(let g=1;g<c;g++){let y=a[g];if(!y.is_emoji&&vp.has(y[0]))throw iE(`emoji + combining mark: "${L0(a[g-1])} + ${ET([y[0]])}"`)}HWe(u);let f=dx(new Set(h)),[p]=YWe(f);JWe(p,h),KWe(p,f),l=p.N}}o.type=l}catch(a){o.error=a}return o})}function KWe(t,e){let n,r=[];for(let s of e){let i=ny.get(s);if(i===ite)return;if(i){let o=i.M.get(s);if(n=n?n.filter(a=>o.has(a)):dx(o),!n.length)return}else r.push(s)}if(n){for(let s of n)if(r.every(i=>W_(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function YWe(t){let e=qy;for(let n of t){let r=e.filter(s=>W_(s,n));if(!r.length)throw qy.some(s=>W_(s,n))?ute(e[0],n):lte(n);if(e=r,r.length==1)break}return e}function QWe(t){return t.map(({input:e,error:n,output:r})=>{if(n){let s=n.message;throw new Error(t.length==1?s:`Invalid label ${MU(ET(e,63))}: ${s}`)}return L0(r)}).join(rte)}function lte(t){return new Error(`disallowed character: ${LU(t)}`)}function ute(t,e){let n=LU(e),r=qy.find(s=>s.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function iE(t){return new Error(`illegal placement: ${t}`)}function JWe(t,e){for(let n of e)if(!W_(t,n))throw ute(t,n);if(t.M){let n=nte(e);for(let r=1,s=n.length;r<s;r++)if(F3.has(n[r])){let i=r+1;for(let o;i<s&&F3.has(o=n[i]);i++)for(let a=r;a<i;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${LU(o)}`);if(i-r>C7)throw new Error(`excessive non-spacing marks: ${MU(ET(n.slice(r-1,i)))} (${i-r}/${C7})`);r=i}}}function ZWe(t,e,n){let r=[],s=[];for(t=t.slice().reverse();t.length;){let i=eHe(t);if(i)s.length&&(r.push(e(s)),s=[]),r.push(n(i));else{let o=t.pop();if(qf.has(o))s.push(o);else{let a=B3.get(o);if(a)s.push(...a);else if(!ote.has(o))throw lte(o)}}}return s.length&&r.push(e(s)),r}function XWe(t){return t.filter(e=>e!=ste)}function eHe(t,e){let n=j3,r,s=t.length;for(;s&&(n=n.get(t[--s]),!!n);){let{V:i}=n;i&&(r=i,t.length=s)}return r}const dte=new Uint8Array(32);dte.fill(0);function x7(t){return Q(t.length!==0,"invalid ENS name; empty component","comp",t),t}function hte(t){const e=qu(tHe(t)),n=[];if(t.length===0)return n;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(n.push(x7(e.slice(r,s))),r=s+1);return Q(r<e.length,"invalid ENS name; empty component","name",t),n.push(x7(e.slice(r))),n}function tHe(t){try{if(t.length===0)throw new Error("empty label");return qWe(t)}catch(e){Q(!1,`invalid ENS name (${e.message})`,"name",t)}}function z3(t){Q(typeof t=="string","invalid ENS name; not a string","name",t),Q(t.length,"invalid ENS name (empty label)","name",t);let e=dte;const n=hte(t);for(;n.length;)e=Lr(_r([e,Lr(n.pop())]));return Le(e)}function nHe(t,e){const n=e;return Q(n<=255,"DNS encoded label cannot exceed 255","length",n),Le(_r(hte(t).map(r=>{Q(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}const fte=new Uint8Array(32);fte.fill(0);const rHe=BigInt(-1),pte=BigInt(0),gte=BigInt(1),sHe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function iHe(t){const e=jt(t),n=e.length%32;return n?_r([e,fte.slice(n)]):Le(e)}const oHe=gf(gte,32),aHe=gf(pte,32),N7={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},kO=["name","version","chainId","verifyingContract","salt"];function T7(t){return function(e){return Q(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const cHe={name:T7("name"),version:T7("version"),chainId:function(t){const e=Xe(t,"domain.chainId");return Q(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):dc(e)},verifyingContract:function(t){try{return vn(t).toLowerCase()}catch{}Q(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=jt(t,"domain.salt");return Q(e.length===32,'invalid domain value "salt"',"domain.salt",t),Le(e)}};function DO(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);Q(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const s=Ev(sHe,n?r-1:r),i=n?(s+gte)*rHe:pte;return function(o){const a=Xe(o,"value");return Q(a>=i&&a<=s,`value out-of-bounds for ${t}`,"value",a),gf(n?tee(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return Q(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const s=jt(r);return Q(s.length===n,`invalid length for ${t}`,"value",r),iHe(r)}}}switch(t){case"address":return function(e){return id(vn(e),32)};case"bool":return function(e){return e?oHe:aHe};case"bytes":return function(e){return Lr(e)};case"string":return function(e){return $g(e)}}return null}function R7(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function kA(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var tC,Cu,Rw,yx,mte;const oa=class oa{constructor(e){K(this,yx);te(this,"primaryType");K(this,tC);K(this,Cu);K(this,Rw);U(this,Cu,new Map),U(this,Rw,new Map);const n=new Map,r=new Map,s=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:l,type:u})=>{let{base:d,index:h}=kA(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:l,type:d+(h||"")}}),n.set(c,new Set),r.set(c,[]),s.set(c,new Set)}),U(this,tC,JSON.stringify(i));for(const c in i){const l=new Set;for(const u of i[c]){Q(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const d=kA(u.type).base;Q(d!==c,`circular type reference to ${JSON.stringify(d)}`,"types",e),!DO(d)&&(Q(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),r.get(d).push(c),n.get(c).add(d))}}const o=Array.from(r.keys()).filter(c=>r.get(c).length===0);Q(o.length!==0,"missing primary type","types",e),Q(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),mt(this,{primaryType:o[0]});function a(c,l){Q(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of n.get(c))if(r.has(u)){a(u,l);for(const d of l)s.get(d).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of s){const u=Array.from(l);u.sort(),_(this,Cu).set(c,R7(c,i[c])+u.map(d=>R7(d,i[d])).join(""))}}get types(){return JSON.parse(_(this,tC))}getEncoder(e){let n=_(this,Rw).get(e);return n||(n=fe(this,yx,mte).call(this,e),_(this,Rw).set(e,n)),n}encodeType(e){const n=_(this,Cu).get(e);return Q(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return Lr(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(DO(e))return r(e,n);const s=kA(e).array;if(s)return Q(s.count===-1||s.count===n.length,`array length mismatch; expected length ${s.count}`,"value",n),n.map(o=>this._visit(s.prefix,o,r));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,n[a],r),o),{});Q(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new oa(e)}static getPrimaryType(e){return oa.from(e).primaryType}static hashStruct(e,n,r){return oa.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const s=N7[r];Q(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:s})}return n.sort((r,s)=>kO.indexOf(r.name)-kO.indexOf(s.name)),oa.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return _r(["0x1901",oa.hashDomain(e),oa.from(n).hash(r)])}static hash(e,n,r){return Lr(oa.encode(e,n,r))}static async resolveNames(e,n,r,s){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!Yn(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=oa.from(n);o.visit(r,(a,c)=>(a==="address"&&!Yn(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:r}}static getPayload(e,n,r){oa.hashDomain(e);const s={},i=[];kO.forEach(c=>{const l=e[c];l!=null&&(s[c]=cHe[c](l),i.push({name:c,type:N7[c]}))});const o=oa.from(n);n=o.types;const a=Object.assign({},n);return Q(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=i,o.encode(r),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return Le(jt(l));if(c.match(/^u?int/))return Xe(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return Q(typeof l=="string","invalid string","value",l),l}Q(!1,"unsupported type","type",c)})}}};tC=new WeakMap,Cu=new WeakMap,Rw=new WeakMap,yx=new WeakSet,mte=function(e){{const s=DO(e);if(s)return s}const n=kA(e).array;if(n){const s=n.prefix,i=this.getEncoder(s);return o=>{Q(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(i);return _(this,Cu).has(s)&&(a=a.map(Lr)),Lr(_r(a))}}const r=this.types[e];if(r){const s=$g(_(this,Cu).get(e));return i=>{const o=r.map(({name:a,type:c})=>{const l=this.getEncoder(c)(i[a]);return _(this,Cu).has(c)?Lr(l):l});return o.unshift(s),_r(o)}}Q(!1,`unknown type: ${e}`,"type",e)};let hx=oa;function wi(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const lHe="external public payable override",uHe=wi(lHe.split(" ")),yte="constant external internal payable private public pure view override",dHe=wi(yte.split(" ")),wte="constructor error event fallback function receive struct",bte=wi(wte.split(" ")),vte="calldata memory storage payable indexed",hHe=wi(vte.split(" ")),fHe="tuple returns",pHe=[wte,vte,fHe,yte].join(" "),gHe=wi(pHe.split(" ")),mHe={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},yHe=new RegExp("^(\\s*)"),wHe=new RegExp("^([0-9]+)"),bHe=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Ete=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),_te=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var As,ic,nC,W3;const wx=class wx{constructor(e){K(this,nC);K(this,As);K(this,ic);U(this,As,0),U(this,ic,e.slice())}get offset(){return _(this,As)}get length(){return _(this,ic).length-_(this,As)}clone(){return new wx(_(this,ic))}reset(){U(this,As,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=fe(this,nC,W3).call(this,_(this,As)+1,e.match+1);return U(this,As,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;_(this,As)<e.match-1;){const r=this.peek().linkNext;n.push(fe(this,nC,W3).call(this,_(this,As)+1,r)),U(this,As,r)}return U(this,As,e.match+1),n}peek(){if(_(this,As)>=_(this,ic).length)throw new Error("out-of-bounds");return _(this,ic)[_(this,As)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return pd(this,As)._++,e}toString(){const e=[];for(let n=_(this,As);n<_(this,ic).length;n++){const r=_(this,ic)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};As=new WeakMap,ic=new WeakMap,nC=new WeakSet,W3=function(e=0,n=0){return new wx(_(this,ic).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let Rc=wx;function Sf(t){const e=[],n=o=>{const a=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let r=[],s=[],i=0;for(;i<t.length;){let o=t.substring(i),a=o.match(yHe);a&&(i+=a[1].length,o=t.substring(i));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=mHe[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,l==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(l=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const d=e.pop().text;u=d+u,e[e.length-1].value=zt(d)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(bHe),a){if(c.text=a[1],i+=c.text.length,gHe.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(_te)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(wHe),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Rc(e.map(o=>Object.freeze(o)))}function P7(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function _T(t,e){if(e.peekKeyword(bte)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function od(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function Cte(t){let e=od(t,dHe);return P7(e,wi("constant payable nonpayable".split(" "))),P7(e,wi("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Vu(t,e){return t.popParams().map(n=>ks.from(n,e))}function Ate(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Xe(t.pop().text);throw new Error("invalid gas")}return null}function Bg(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const vHe=new RegExp(/^(.*)\[([0-9]*)\]$/);function O7(t){const e=t.match(_te);if(Q(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);Q(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);Q(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const ur={},lo=Symbol.for("_ethers_internal"),k7="_ParamTypeInternal",D7="_ErrorInternal",L7="_EventInternal",M7="_ConstructorInternal",U7="_FallbackInternal",$7="_FunctionInternal",B7="_StructInternal";var Pw,AS;const aa=class aa{constructor(e,n,r,s,i,o,a,c){K(this,Pw);te(this,"name");te(this,"type");te(this,"baseType");te(this,"indexed");te(this,"components");te(this,"arrayLength");te(this,"arrayChildren");if(hT(e,ur,"ParamType"),Object.defineProperty(this,lo,{value:k7}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");mt(this,{name:n,type:r,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(s=>r.arrayChildren.walk(s,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((s,i)=>r.components[i].walk(s,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],s=[e];return fe(this,Pw,AS).call(this,r,e,n,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(e,n){if(aa.isParamType(e))return e;if(typeof e=="string")try{return aa.from(Sf(e),n)}catch{Q(!1,"invalid param type","obj",e)}else if(e instanceof Rc){let a="",c="",l=null;od(e,wi(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(g=>aa.from(g)),a=`tuple(${l.map(g=>g.format()).join(",")})`):(a=O7(e.popType("TYPE")),c=a);let u=null,d=null;for(;e.length&&e.peekType("BRACKET");){const g=e.pop();u=new aa(ur,"",a,c,null,l,d,u),d=g.value,a+=g.text,c="array",l=null}let h=null;if(od(e,hHe).has("indexed")){if(!n)throw new Error("");h=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new aa(ur,p,a,c,h,l,d,u)}const r=e.name;Q(!r||typeof r=="string"&&r.match(Ete),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(Q(n,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(vHe);if(o){const a=parseInt(o[2]||"-1"),c=aa.from({type:o[1],components:e.components});return new aa(ur,r||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(l=>aa.from(l)):null;return new aa(ur,r||"",i,"tuple",s,a,null,null)}return i=O7(e.type),new aa(ur,r||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[lo]===k7}};Pw=new WeakSet,AS=function(e,n,r,s){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((c,l)=>{var u;fe(u=o,Pw,AS).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in n))throw new Error(`missing value for component ${c.name}`);return n[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{var u;fe(u=o[l],Pw,AS).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}const i=r(this.type,n);i.then?e.push(async function(){s(await i)}()):s(i)};let ks=aa;class Fg{constructor(e,n,r){te(this,"type");te(this,"inputs");hT(e,ur,"Fragment"),r=Object.freeze(r.slice()),mt(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{Fg.from(JSON.parse(e))}catch{}return Fg.from(Sf(e))}if(e instanceof Rc)switch(e.peekKeyword(bte)){case"constructor":return $u.from(e);case"error":return Yi.from(e);case"event":return vl.from(e);case"fallback":case"receive":return mu.from(e);case"function":return El.from(e);case"struct":return ag.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return $u.from(e);case"error":return Yi.from(e);case"event":return vl.from(e);case"fallback":case"receive":return mu.from(e);case"function":return El.from(e);case"struct":return ag.from(e)}me(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}Q(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return $u.isFragment(e)}static isError(e){return Yi.isFragment(e)}static isEvent(e){return vl.isFragment(e)}static isFunction(e){return El.isFragment(e)}static isStruct(e){return ag.isFragment(e)}}class CT extends Fg{constructor(n,r,s,i){super(n,r,i);te(this,"name");Q(typeof s=="string"&&s.match(Ete),"invalid identifier","name",s),i=Object.freeze(i.slice()),mt(this,{name:s})}}function H_(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class Yi extends CT{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,lo,{value:D7})}get selector(){return $g(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+H_(e,this.inputs)),n.join(" ")}static from(e){if(Yi.isFragment(e))return e;if(typeof e=="string")return Yi.from(Sf(e));if(e instanceof Rc){const n=_T("error",e),r=Vu(e);return Bg(e),new Yi(ur,n,r)}return new Yi(ur,e.name,e.inputs?e.inputs.map(ks.from):[])}static isFragment(e){return e&&e[lo]===D7}}class vl extends CT{constructor(n,r,s,i){super(n,"event",r,s);te(this,"anonymous");Object.defineProperty(this,lo,{value:L7}),mt(this,{anonymous:i})}get topicHash(){return $g(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+H_(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(i=>ks.from(i)),new vl(ur,n,r,!1).topicHash}static from(n){if(vl.isFragment(n))return n;if(typeof n=="string")try{return vl.from(Sf(n))}catch{Q(!1,"invalid event fragment","obj",n)}else if(n instanceof Rc){const r=_T("event",n),s=Vu(n,!0),i=!!od(n,wi(["anonymous"])).has("anonymous");return Bg(n),new vl(ur,r,s,i)}return new vl(ur,n.name,n.inputs?n.inputs.map(r=>ks.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[lo]===L7}}class $u extends Fg{constructor(n,r,s,i,o){super(n,r,s);te(this,"payable");te(this,"gas");Object.defineProperty(this,lo,{value:M7}),mt(this,{payable:i,gas:o})}format(n){if(me(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[`constructor${H_(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if($u.isFragment(n))return n;if(typeof n=="string")try{return $u.from(Sf(n))}catch{Q(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof Rc){od(n,wi(["constructor"]));const r=Vu(n),s=!!od(n,uHe).has("payable"),i=Ate(n);return Bg(n),new $u(ur,"constructor",r,s,i)}return new $u(ur,"constructor",n.inputs?n.inputs.map(ks.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[lo]===M7}}class mu extends Fg{constructor(n,r,s){super(n,"fallback",r);te(this,"payable");Object.defineProperty(this,lo,{value:U7}),mt(this,{payable:s})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(n){if(mu.isFragment(n))return n;if(typeof n=="string")try{return mu.from(Sf(n))}catch{Q(!1,"invalid fallback fragment","obj",n)}else if(n instanceof Rc){const r=n.toString(),s=n.peekKeyword(wi(["fallback","receive"]));if(Q(s,"type must be fallback or receive","obj",r),n.popKeyword(wi(["fallback","receive"]))==="receive"){const c=Vu(n);return Q(c.length===0,"receive cannot have arguments","obj.inputs",c),od(n,wi(["payable"])),Bg(n),new mu(ur,[],!0)}let o=Vu(n);o.length?Q(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[ks.from("bytes")];const a=Cte(n);if(Q(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),od(n,wi(["returns"])).has("returns")){const c=Vu(n);Q(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(l=>l.format("minimal")).join(", "))}return Bg(n),new mu(ur,o,a==="payable")}if(n.type==="receive")return new mu(ur,[],!0);if(n.type==="fallback"){const r=[ks.from("bytes")],s=n.stateMutability==="payable";return new mu(ur,r,s)}Q(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[lo]===U7}}class El extends CT{constructor(n,r,s,i,o,a){super(n,"function",r,i);te(this,"constant");te(this,"outputs");te(this,"stateMutability");te(this,"payable");te(this,"gas");Object.defineProperty(this,lo,{value:$7}),o=Object.freeze(o.slice()),mt(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return $g(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n))),outputs:this.outputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+H_(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(H_(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(i=>ks.from(i)),new El(ur,n,"view",r,[],null).selector}static from(n){if(El.isFragment(n))return n;if(typeof n=="string")try{return El.from(Sf(n))}catch{Q(!1,"invalid function fragment","obj",n)}else if(n instanceof Rc){const s=_T("function",n),i=Vu(n),o=Cte(n);let a=[];od(n,wi(["returns"])).has("returns")&&(a=Vu(n));const c=Ate(n);return Bg(n),new El(ur,s,o,i,a,c)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new El(ur,n.name,r,n.inputs?n.inputs.map(ks.from):[],n.outputs?n.outputs.map(ks.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[lo]===$7}}class ag extends CT{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,lo,{value:B7})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return ag.from(Sf(e))}catch{Q(!1,"invalid struct fragment","obj",e)}else if(e instanceof Rc){const n=_T("struct",e),r=Vu(e);return Bg(e),new ag(ur,n,r)}return new ag(ur,e.name,e.inputs?e.inputs.map(ks.from):[])}static isFragment(e){return e&&e[lo]===B7}}const kc=new Map;kc.set(0,"GENERIC_PANIC");kc.set(1,"ASSERT_FALSE");kc.set(17,"OVERFLOW");kc.set(18,"DIVIDE_BY_ZERO");kc.set(33,"ENUM_RANGE_ERROR");kc.set(34,"BAD_STORAGE_DATA");kc.set(49,"STACK_UNDERFLOW");kc.set(50,"ARRAY_RANGE_ERROR");kc.set(65,"OUT_OF_MEMORY");kc.set(81,"UNINITIALIZED_FUNCTION_CALL");const EHe=new RegExp(/^bytes([0-9]*)$/),_He=new RegExp(/^(u?int)([0-9]*)$/);let LO=null,F7=1024;function CHe(t,e,n,r){let s="missing revert data",i=null;const o=null;let a=null;if(n){s="execution reverted";const l=jt(n);if(n=Le(n),l.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(Le(l.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(Le(l.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},i=`Panic due to ${kc.get(u)||"UNKNOWN"}(${u})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?vn(e.to):null,data:e.data||"0x"};return e.from&&(c.from=vn(e.from)),rr(s,"CALL_EXCEPTION",{action:t,data:n,reason:i,transaction:c,invocation:o,revert:a})}var dh,ry;const bx=class bx{constructor(){K(this,dh)}getDefaultValue(e){const n=e.map(s=>fe(this,dh,ry).call(this,ks.from(s)));return new OA(n,"_").defaultValue()}encode(e,n){ZX(n.length,e.length,"types/values length mismatch");const r=e.map(o=>fe(this,dh,ry).call(this,ks.from(o))),s=new OA(r,"_"),i=new T3;return s.encode(i,n),i.data}decode(e,n,r){const s=e.map(o=>fe(this,dh,ry).call(this,ks.from(o)));return new OA(s,"_").decode(new R3(n,r,F7))}static _setDefaultMaxInflation(e){Q(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),F7=e}static defaultAbiCoder(){return LO==null&&(LO=new bx),LO}static getBuiltinCallException(e,n,r){return CHe(e,n,r,bx.defaultAbiCoder())}};dh=new WeakSet,ry=function(e){if(e.isArray())return new jze(fe(this,dh,ry).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new OA(e.components.map(r=>fe(this,dh,ry).call(this,r)),e.name);switch(e.baseType){case"address":return new Bze(e.name);case"bool":return new zze(e.name);case"string":return new Jze(e.name);case"bytes":return new Wze(e.name);case"":return new qze(e.name)}let n=e.type.match(_He);if(n){let r=parseInt(n[2]||"256");return Q(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new Qze(r/8,n[1]==="int",e.name)}if(n=e.type.match(EHe),n){let r=parseInt(n[1]);return Q(r!==0&&r<=32,"invalid bytes length","param",e),new Hze(r,e.name)}Q(!1,"invalid type","type",e.type)};let G_=bx;class AHe{constructor(e,n,r){te(this,"fragment");te(this,"name");te(this,"signature");te(this,"topic");te(this,"args");const s=e.name,i=e.format();mt(this,{fragment:e,name:s,signature:i,topic:n,args:r})}}class SHe{constructor(e,n,r,s){te(this,"fragment");te(this,"name");te(this,"args");te(this,"signature");te(this,"selector");te(this,"value");const i=e.name,o=e.format();mt(this,{fragment:e,name:i,args:r,signature:o,selector:n,value:s})}}class IHe{constructor(e,n,r){te(this,"fragment");te(this,"name");te(this,"args");te(this,"signature");te(this,"selector");const s=e.name,i=e.format();mt(this,{fragment:e,name:s,args:r,signature:i,selector:n})}}class j7{constructor(e){te(this,"hash");te(this,"_isIndexed");mt(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const z7={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},W7={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&z7[t.toString()]&&(e=z7[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var sl,il,ol,Gs,Pl,SS,IS;const rp=class rp{constructor(e){K(this,Pl);te(this,"fragments");te(this,"deploy");te(this,"fallback");te(this,"receive");K(this,sl);K(this,il);K(this,ol);K(this,Gs);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,U(this,ol,new Map),U(this,sl,new Map),U(this,il,new Map);const r=[];for(const o of n)try{r.push(Fg.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}mt(this,{fragments:Object.freeze(r)});let s=null,i=!1;U(this,Gs,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}mt(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(Q(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=_(this,ol);break;case"event":c=_(this,il);break;case"error":c=_(this,sl);break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||mt(this,{deploy:$u.from("constructor()")}),mt(this,{fallback:s,receive:i})}format(e){const n=e?"minimal":"full";return this.fragments.map(s=>s.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return G_.defaultAbiCoder()}getFunctionName(e){const n=fe(this,Pl,SS).call(this,e,null,!1);return Q(n,"no matching function","key",e),n.name}hasFunction(e){return!!fe(this,Pl,SS).call(this,e,null,!1)}getFunction(e,n){return fe(this,Pl,SS).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(_(this,ol).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(_(this,ol).get(s),r)}}getEventName(e){const n=fe(this,Pl,IS).call(this,e,null,!1);return Q(n,"no matching event","key",e),n.name}hasEvent(e){return!!fe(this,Pl,IS).call(this,e,null,!1)}getEvent(e,n){return fe(this,Pl,IS).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(_(this,il).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(_(this,il).get(s),r)}}getError(e,n){if(Yn(e)){const s=e.toLowerCase();if(W7[s])return Yi.from(W7[s].signature);for(const i of _(this,sl).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of _(this,sl))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?Yi.from("error Error(string)"):e==="Panic"?Yi.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");Q(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=Yi.from(e).format(),e==="Error(string)")return Yi.from("error Error(string)");if(e==="Panic(uint256)")return Yi.from("error Panic(uint256)");const r=_(this,sl).get(e);return r||null}forEachError(e){const n=Array.from(_(this,sl).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(_(this,sl).get(s),r)}}_decodeParams(e,n){return _(this,Gs).decode(e,n)}_encodeParams(e,n){return _(this,Gs).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);Q(r,"unknown error","fragment",e),e=r}return Q(wr(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,wr(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);Q(r,"unknown error","fragment",e),e=r}return _r([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return Q(wr(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,wr(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return _r([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const i=this.getFunction(e);Q(i,"unknown function","fragment",e),e=i}let r="invalid length for result data";const s=fi(n);if(s.length%32===0)try{return _(this,Gs).decode(e.outputs,s)}catch{r="could not decode result data"}me(!1,r,"BAD_DATA",{value:Le(s),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=jt(e,"data"),s=G_.getBuiltinCallException("call",n,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=Le(r.slice(0,4)),c=this.getError(a);if(c)try{const l=_(this,Gs).decode(c.inputs,r.slice(4));s.revert={name:c.name,signature:c.format(),args:l},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return Le(_(this,Gs).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const i=this.getEvent(e);Q(i,"unknown event","eventFragment",e),e=i}me(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(i,o)=>i.type==="string"?$g(o):i.type==="bytes"?Lr(Le(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=gf(o):i.type.match(/^bytes/)?o=q9e(o,32):i.type==="address"&&_(this,Gs).encode(["address"],[o]),id(Le(o),32));for(n.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){Q(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?Q(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?r.push(i.map(c=>s(a,c))):r.push(s(a,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);Q(o,"unknown event","eventFragment",e),e=o}const r=[],s=[],i=[];return e.anonymous||r.push(e.topicHash),Q(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const c=n[a];if(o.indexed)if(o.type==="string")r.push($g(c));else if(o.type==="bytes")r.push(Lr(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(_(this,Gs).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:_(this,Gs).encode(s,i),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const f=this.getEvent(e);Q(f,"unknown event","eventFragment",e),e=f}if(r!=null&&!e.anonymous){const f=e.topicHash;Q(Yn(r[0],32)&&r[0].toLowerCase()===f,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((f,p)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(s.push(ks.from({type:"bytes32",name:f.name})),o.push(!0)):(s.push(f),o.push(!1)):(i.push(f),o.push(!1))});const a=r!=null?_(this,Gs).decode(s,_r(r)):null,c=_(this,Gs).decode(i,n,!0),l=[],u=[];let d=0,h=0;return e.inputs.forEach((f,p)=>{let g=null;if(f.indexed)if(a==null)g=new j7(null);else if(o[p])g=new j7(a[h++]);else try{g=a[h++]}catch(y){g=y}else try{g=c[d++]}catch(y){g=y}l.push(g),u.push(f.name||null)}),R0.fromItems(l,u)}parseTransaction(e){const n=jt(e.data,"tx.data"),r=Xe(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(Le(n.slice(0,4)));if(!s)return null;const i=_(this,Gs).decode(s.inputs,n.slice(4));return new SHe(s,s.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new AHe(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=Le(e),r=this.getError(wr(n,0,4));if(!r)return null;const s=_(this,Gs).decode(r.inputs,wr(n,4));return new IHe(r,r.selector,s)}static from(e){return e instanceof rp?e:typeof e=="string"?new rp(JSON.parse(e)):typeof e.formatJson=="function"?new rp(e.formatJson()):typeof e.format=="function"?new rp(e.format("json")):new rp(e)}};sl=new WeakMap,il=new WeakMap,ol=new WeakMap,Gs=new WeakMap,Pl=new WeakSet,SS=function(e,n,r){if(Yn(e)){const i=e.toLowerCase();for(const o of _(this,ol).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of _(this,ol))o.split("(")[0]===e&&i.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,c=!0;Js.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=i.length-1;l>=0;l--){const u=i[l].inputs.length;u!==a&&(!c||u!==a-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){const u=i[l].inputs;for(let d=0;d<n.length;d++)if(Js.isTyped(n[d])){if(d>=u.length){if(n[d].type==="overrides")continue;i.splice(l,1);break}if(n[d].type!==u[d].baseType){i.splice(l,1);break}}}}if(i.length===1&&n&&n.length!==i[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");Q(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=_(this,ol).get(El.from(e).format());return s||null},IS=function(e,n,r){if(Yn(e)){const i=e.toLowerCase();for(const o of _(this,il).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of _(this,il))o.split("(")[0]===e&&i.push(a);if(n){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<n.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<n.length;c++)if(Js.isTyped(n[c])&&n[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");Q(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=_(this,il).get(vl.from(e).format());return s||null};let H3=rp;const Ste=BigInt(0);function Vy(t){return t??null}function Ir(t){return t==null?null:t.toString()}class H7{constructor(e,n,r){te(this,"gasPrice");te(this,"maxFeePerGas");te(this,"maxPriorityFeePerGas");mt(this,{gasPrice:Vy(e),maxFeePerGas:Vy(n),maxPriorityFeePerGas:Vy(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Ir(e),maxFeePerGas:Ir(n),maxPriorityFeePerGas:Ir(r)}}}function fx(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=Le(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=Xe(t[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=zt(t[s],`request.${s}`));return t.accessList&&(e.accessList=lm(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>CU(s)?Le(s):Object.assign({},s))),e}var Au;class xHe{constructor(e,n){te(this,"provider");te(this,"number");te(this,"hash");te(this,"timestamp");te(this,"parentHash");te(this,"parentBeaconBlockRoot");te(this,"nonce");te(this,"difficulty");te(this,"gasLimit");te(this,"gasUsed");te(this,"stateRoot");te(this,"receiptsRoot");te(this,"blobGasUsed");te(this,"excessBlobGas");te(this,"miner");te(this,"prevRandao");te(this,"extraData");te(this,"baseFeePerGas");K(this,Au);U(this,Au,e.transactions.map(r=>typeof r!="string"?new q_(r,n):r)),mt(this,{provider:n,hash:Vy(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:Vy(e.prevRandao),extraData:e.extraData,baseFeePerGas:Vy(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return _(this,Au).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=_(this,Au).slice();return e.length===0?[]:(me(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,timestamp:g,transactions:y}=this;return{_type:"Block",baseFeePerGas:Ir(e),difficulty:Ir(n),extraData:r,gasLimit:Ir(s),gasUsed:Ir(i),blobGasUsed:Ir(this.blobGasUsed),excessBlobGas:Ir(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,timestamp:g,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,transactions:y}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return _(this,Au).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=_(this,Au)[e];else{const r=e.toLowerCase();for(const s of _(this,Au))if(typeof s=="string"){if(s!==r)continue;n=s;break}else{if(s.hash!==r)continue;n=s;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;Q(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return NHe(this)}}Au=new WeakMap;class o1{constructor(e,n){te(this,"provider");te(this,"transactionHash");te(this,"blockHash");te(this,"blockNumber");te(this,"removed");te(this,"address");te(this,"data");te(this,"topics");te(this,"index");te(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());mt(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return me(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return me(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return me(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return THe(this)}}var rC;class Ite{constructor(e,n){te(this,"provider");te(this,"to");te(this,"from");te(this,"contractAddress");te(this,"hash");te(this,"index");te(this,"blockHash");te(this,"blockNumber");te(this,"logsBloom");te(this,"gasUsed");te(this,"blobGasUsed");te(this,"cumulativeGasUsed");te(this,"gasPrice");te(this,"blobGasPrice");te(this,"type");te(this,"status");te(this,"root");K(this,rC);U(this,rC,Object.freeze(e.logs.map(s=>new o1(s,n))));let r=Ste;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),mt(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return _(this,rC)}toJSON(){const{to:e,from:n,contractAddress:r,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:Ir(this.cumulativeGasUsed),from:n,gasPrice:Ir(this.gasPrice),blobGasUsed:Ir(this.blobGasUsed),blobGasPrice:Ir(this.blobGasPrice),gasUsed:Ir(this.gasUsed),hash:s,index:i,logs:l,logsBloom:c,root:d,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Nte(this)}reorderedEvent(e){return me(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),xte(this,e)}}rC=new WeakMap;var hh;const HU=class HU{constructor(e,n){te(this,"provider");te(this,"blockNumber");te(this,"blockHash");te(this,"index");te(this,"hash");te(this,"type");te(this,"to");te(this,"from");te(this,"nonce");te(this,"gasLimit");te(this,"gasPrice");te(this,"maxPriorityFeePerGas");te(this,"maxFeePerGas");te(this,"maxFeePerBlobGas");te(this,"data");te(this,"value");te(this,"chainId");te(this,"signature");te(this,"accessList");te(this,"blobVersionedHashes");te(this,"authorizationList");K(this,hh);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,U(this,hh,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:s,type:i,to:o,from:a,nonce:c,data:l,signature:u,accessList:d,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:n,blobVersionedHashes:h,chainId:Ir(this.chainId),data:l,from:a,gasLimit:Ir(this.gasLimit),gasPrice:Ir(this.gasPrice),hash:s,maxFeePerGas:Ir(this.maxFeePerGas),maxPriorityFeePerGas:Ir(this.maxPriorityFeePerGas),maxFeePerBlobGas:Ir(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:r,type:i,value:Ir(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await li({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,s=n??0;let i=_(this,hh),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:h,nonce:f}=await li({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(f<this.nonce){i=h;return}if(a)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(o===-1&&(o=i-3,o<_(this,hh)&&(o=_(this,hh)));o<=h;){if(a)return null;const g=await this.provider.getBlock(o,!0);if(g==null)return;for(const y of g)if(y===this.hash)return;for(let y=0;y<g.length;y++){const m=await g.getTransaction(y);if(m.from===this.from&&m.nonce===this.nonce){if(a)return null;const w=await this.provider.getTransactionReceipt(m.hash);if(w==null||h-w.blockNumber+1<r)return;let v="replaced";m.data===this.data&&m.to===this.to&&m.value===this.value?v="repriced":m.data==="0x"&&m.from===m.to&&m.value===Ste&&(v="cancelled"),me(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:v==="replaced"||v==="cancelled",reason:v,replacement:m.replaceableTransaction(i),hash:m.hash,receipt:w})}}o++}},l=h=>{if(h==null||h.status!==0)return h;me(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:h.to,from:h.from,data:""},receipt:h})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return l(u);if(u){if(r===1||await u.confirmations()>=r)return l(u)}else if(await c(),r===0)return null;return await new Promise((h,f)=>{const p=[],g=()=>{p.forEach(m=>m())};if(p.push(()=>{a=!0}),s>0){const m=setTimeout(()=>{g(),f(rr("wait for transaction timeout","TIMEOUT"))},s);p.push(()=>{clearTimeout(m)})}const y=async m=>{if(await m.confirmations()>=r){g();try{h(l(m))}catch(w){f(w)}}};if(p.push(()=>{this.provider.off(this.hash,y)}),this.provider.on(this.hash,y),i>=0){const m=async()=>{try{await c()}catch(w){if(Ns(w,"TRANSACTION_REPLACED")){g(),f(w);return}}a||this.provider.once("block",m)};p.push(()=>{this.provider.off("block",m)}),this.provider.once("block",m)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return me(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Nte(this)}reorderedEvent(e){return me(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),me(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),xte(this,e)}replaceableTransaction(e){Q(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new HU(this,this.provider);return U(n,hh,e),n}};hh=new WeakMap;let q_=HU;function NHe(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function xte(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function Nte(t){return{orphan:"drop-transaction",tx:t}}function THe(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class UU extends o1{constructor(n,r,s){super(n,n.provider);te(this,"interface");te(this,"fragment");te(this,"args");const i=r.decodeEventLog(s,n.data,n.topics);mt(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Tte extends o1{constructor(n,r){super(n,n.provider);te(this,"error");mt(this,{error:r})}}var Ow;class RHe extends Ite{constructor(n,r,s){super(s,r);K(this,Ow);U(this,Ow,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?_(this,Ow).getEvent(n.topics[0]):null;if(r)try{return new UU(n,_(this,Ow),r)}catch(s){return new Tte(n,s)}return n})}}Ow=new WeakMap;var sC;class $U extends q_{constructor(n,r,s){super(s,r);K(this,sC);U(this,sC,n)}async wait(n,r){const s=await super.wait(n,r);return s==null?null:new RHe(_(this,sC),this.provider,s)}}sC=new WeakMap;class Rte extends nee{constructor(n,r,s,i){super(n,r,s);te(this,"log");mt(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class PHe extends Rte{constructor(e,n,r,s,i){super(e,n,r,new UU(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);mt(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const G7=BigInt(0);function Pte(t){return t&&typeof t.call=="function"}function Ote(t){return t&&typeof t.estimateGas=="function"}function AT(t){return t&&typeof t.resolveName=="function"}function kte(t){return t&&typeof t.sendTransaction=="function"}function Dte(t){if(t!=null){if(AT(t))return t;if(t.provider)return t.provider}}var iC;class OHe{constructor(e,n,r){K(this,iC);te(this,"fragment");if(mt(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const s=jg(e.runner,"resolveName"),i=AT(s)?s:null;U(this,iC,async function(){const o=await Promise.all(n.inputs.map((a,c)=>r[c]==null?null:a.walkAsync(r[c],(u,d)=>u==="address"?Array.isArray(d)?Promise.all(d.map(h=>yi(h,i))):yi(d,i):d)));return e.interface.encodeFilterTopics(n,o)}())}getTopicFilter(){return _(this,iC)}}iC=new WeakMap;function jg(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function Ep(t){return t==null?null:t.provider||null}async function Lte(t,e){const n=Js.dereference(t,"overrides");Q(typeof n=="object","invalid overrides parameter","overrides",t);const r=fx(n);return Q(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),Q(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function kHe(t,e,n){const r=jg(t,"resolveName"),s=AT(r)?r:null;return await Promise.all(e.map((i,o)=>i.walkAsync(n[o],(a,c)=>(c=Js.dereference(c,a),a==="address"?yi(c,s):c))))}function DHe(t){const e=async function(o){const a=await Lte(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await yi(a.from,Dte(t.runner)));const c=t.interface,l=Xe(a.value||G7,"overrides.value")===G7,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&Q(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),Q(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const d=c.receive||c.fallback&&c.fallback.payable;return Q(d||l,"cannot send value to non-payable fallback","overrides.value",a.value),Q(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=jg(t.runner,"call");me(Pte(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(l){throw _U(l)&&l.data?t.interface.makeError(l.data,c):l}},r=async function(o){const a=t.runner;me(kte(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),l=Ep(t.runner);return new $U(t.interface,l,c)},s=async function(o){const a=jg(t.runner,"estimateGas");return me(Ote(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await r(o);return mt(i,{_contract:t,estimateGas:s,populateTransaction:e,send:r,staticCall:n}),i}function LHe(t,e){const n=function(...l){const u=t.interface.getFunction(e,l);return me(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},r=async function(...l){const u=n(...l);let d={};if(u.inputs.length+1===l.length&&(d=await Lte(l.pop()),d.from&&(d.from=await yi(d.from,Dte(t.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const h=await kHe(t.runner,u.inputs,l);return Object.assign({},d,await li({to:t.getAddress(),data:t.interface.encodeFunctionData(u,h)}))},s=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},i=async function(...l){const u=t.runner;me(kte(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await u.sendTransaction(await r(...l)),h=Ep(t.runner);return new $U(t.interface,h,d)},o=async function(...l){const u=jg(t.runner,"estimateGas");return me(Ote(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...l))},a=async function(...l){const u=jg(t.runner,"call");me(Pte(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...l);let h="0x";try{h=await u.call(d)}catch(p){throw _U(p)&&p.data?t.interface.makeError(p.data,d):p}const f=n(...l);return t.interface.decodeFunctionResult(f,h)},c=async(...l)=>n(...l).constant?await s(...l):await i(...l);return mt(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=t.interface.getFunction(e);return me(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function MHe(t,e){const n=function(...s){const i=t.interface.getEvent(e,s);return me(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},r=function(...s){return new OHe(t,n(...s),s)};return mt(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return me(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}const px=Symbol.for("_ethersInternal_contract"),Mte=new WeakMap;function UHe(t,e){Mte.set(t[px],e)}function _o(t){return Mte.get(t[px])}function $He(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function BU(t,e){let n,r=null;if(Array.isArray(e)){const i=function(o){if(Yn(o,32))return o;const a=t.interface.getEvent(o);return Q(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?n=[null]:typeof e=="string"?Yn(e,32)?n=[e]:(r=t.interface.getEvent(e),Q(r,"unknown fragment","event",e),n=[r.topicHash]):$He(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):Q(!1,"unknown event name","event",e);n=n.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=n.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:n}}async function Av(t,e){const{subs:n}=_o(t);return n.get((await BU(t,e)).tag)||null}async function q7(t,e,n){const r=Ep(t.runner);me(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await BU(t,n),{addr:a,subs:c}=_o(t);let l=c.get(i);if(!l){const d={address:a||t,topics:o},h=y=>{let m=s;if(m==null)try{m=t.interface.getEvent(y.topics[0])}catch{}if(m){const w=m,v=s?t.interface.decodeEventLog(s,y.data,y.topics):[];q3(t,n,v,A=>new PHe(t,A,n,w,y))}else q3(t,n,[],w=>new Rte(t,w,n,y))};let f=[];l={tag:i,listeners:[],start:()=>{f.length||f.push(r.on(d,h))},stop:async()=>{if(f.length==0)return;let y=f;f=[],await Promise.all(y),r.off(d,h)}},c.set(i,l)}return l}let G3=Promise.resolve();async function BHe(t,e,n,r){await G3;const s=await Av(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(n);r&&c.push(r(a?null:o));try{o.call(t,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),_o(t).subs.delete(s.tag)),i>0}async function q3(t,e,n,r){try{await G3}catch{}const s=BHe(t,e,n,r);return G3=s,await s}const DA=["then"];var mz;mz=px;const oE=class oE{constructor(e,n,r,s){te(this,"target");te(this,"interface");te(this,"runner");te(this,"filters");te(this,mz);te(this,"fallback");Q(typeof e=="string"||jee(e),"invalid value for Contract target","target",e),r==null&&(r=null);const i=H3.from(n);mt(this,{target:e,runner:r,interface:i}),Object.defineProperty(this,px,{value:{}});let o,a=null,c=null;if(s){const d=Ep(r);c=new $U(this.interface,d,s)}let l=new Map;if(typeof e=="string")if(Yn(e))a=e,o=Promise.resolve(e);else{const d=jg(r,"resolveName");if(!AT(d))throw rr("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(e).then(h=>{if(h==null)throw rr("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return _o(this).addr=h,h})}else o=e.getAddress().then(d=>{if(d==null)throw new Error("TODO");return _o(this).addr=d,d});UHe(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(d,h,f)=>{if(typeof h=="symbol"||DA.indexOf(h)>=0)return Reflect.get(d,h,f);try{return this.getEvent(h)}catch(p){if(!Ns(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>DA.indexOf(h)>=0?Reflect.has(d,h):Reflect.has(d,h)||this.interface.hasEvent(String(h))});return mt(this,{filters:u}),mt(this,{fallback:i.receive||i.fallback?DHe(this):null}),new Proxy(this,{get:(d,h,f)=>{if(typeof h=="symbol"||h in d||DA.indexOf(h)>=0)return Reflect.get(d,h,f);try{return d.getFunction(h)}catch(p){if(!Ns(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>typeof h=="symbol"||h in d||DA.indexOf(h)>=0?Reflect.has(d,h):d.interface.hasFunction(h)})}connect(e){return new oE(this.target,this.interface,e)}attach(e){return new oE(e,this.interface,this.runner)}async getAddress(){return await _o(this).addrPromise}async getDeployedCode(){const e=Ep(this.runner);me(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=Ep(this.runner);return me(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return _o(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),LHe(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),MHe(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=_o(this),o=s||await i,{fragment:a,topics:c}=await BU(this,e),l={address:o,topics:c,fromBlock:n,toBlock:r},u=Ep(this.runner);return me(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(d=>{let h=a;if(h==null)try{h=this.interface.getEvent(d.topics[0])}catch{}if(h)try{return new UU(d,this.interface,h)}catch(f){return new Tte(d,f)}return new o1(d,u)})}async on(e,n){const r=await q7(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await q7(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await q3(this,e,n,null)}async listenerCount(e){if(e){const s=await Av(this,e);return s?s.listeners.length:0}const{subs:n}=_o(this);let r=0;for(const{listeners:s}of n.values())r+=s.length;return r}async listeners(e){if(e){const s=await Av(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:n}=_o(this);let r=[];for(const{listeners:s}of n.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(e,n){const r=await Av(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(n==null||r.listeners.length===0)&&(r.stop(),_o(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await Av(this,e);if(!n)return this;n.stop(),_o(this).subs.delete(n.tag)}else{const{subs:n}=_o(this);for(const{tag:r,stop:s}of n.values())s(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends oE{constructor(s,i=null){super(s,e,i)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let V3=oE;function FHe(){return V3}class Ky extends FHe(){}function MO(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):Q(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class jHe{constructor(e){te(this,"name");mt(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const Ute=new RegExp("^(ipfs)://(.*)$","i"),V7=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Ute,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var fh,Wp,ph,sy,vx,$te;const Iy=class Iy{constructor(e,n,r){K(this,ph);te(this,"provider");te(this,"address");te(this,"name");K(this,fh);K(this,Wp);mt(this,{provider:e,address:n,name:r}),U(this,fh,null),U(this,Wp,new Ky(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return _(this,fh)==null&&U(this,fh,(async()=>{try{return await _(this,Wp).supportsInterface("0x9061b923")}catch(e){if(Ns(e,"CALL_EXCEPTION"))return!1;throw U(this,fh,null),e}})()),await _(this,fh)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await fe(this,ph,sy).call(this,"addr(bytes32)");return i==null||i===$_?null:i}catch(i){if(Ns(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await fe(this,ph,sy).call(this,"addr(bytes32,uint)",[i]);if(Yn(o,20))return vn(o)}let n=null;for(const i of this.provider.plugins)if(i instanceof jHe&&i.supportsCoinType(e)){n=i;break}if(n==null)return null;const r=await fe(this,ph,sy).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const s=await n.decodeAddress(e,r);if(s!=null)return s;me(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await fe(this,ph,sy).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await fe(this,ph,sy).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const s=n[1]==="e3010170"?"ipfs":"ipns",i=parseInt(n[4],16);if(n[5].length===i*2)return`${s}://${Y9e("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;me(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<V7.length;r++){const s=n.match(V7[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=MO(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const l=c[1],u=new Ky(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const g=await u.ownerOf(l);if(a!==g)return e.push({type:"!owner",value:g}),{url:null,linkage:e};e.push({type:"owner",value:g})}else if(i==="erc1155"){const g=await u.balanceOf(a,l);if(!g)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:g.toString()})}let d=await u[o](l);if(d==null||d==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:d}),i==="erc1155"&&(d=d.replace("{id}",gf(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=MO(d)),e.push({type:"metadata-url",value:d});let h={};const f=await new mf(d).send();f.assertOk();try{h=f.bodyJson}catch{try{e.push({type:"!metadata",value:f.bodyText})}catch{const m=f.body;return m&&e.push({type:"!metadata",value:Le(m)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!h)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(h)});let p=h.image;if(typeof p!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(Ute)==null)return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=MO(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return me(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var s;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const i=await fe(s=Iy,vx,$te).call(s,e,r);if(i!=null){const o=new Iy(e,i,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};fh=new WeakMap,Wp=new WeakMap,ph=new WeakSet,sy=async function(e,n){n=(n||[]).slice();const r=_(this,Wp).interface;n.unshift(z3(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),me(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[nHe(this.name,255),r.encodeFunctionData(s,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const i=await _(this,Wp)[e](...n);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!Ns(i,"CALL_EXCEPTION"))throw i}return null},vx=new WeakSet,$te=async function(e,n){const r=await Iy.getEnsAddress(e);try{const i=await new Ky(r,["function resolver(bytes32) view returns (address)"],e).resolver(z3(n),{enableCcipRead:!0});return i===$_?null:i}catch(s){throw s}return null},K(Iy,vx);let gx=Iy;const K7=BigInt(0);function Qt(t,e){return function(n){return n==null?e:t(n)}}function V_(t,e){return n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))}}function a1(t,e){return n=>{const r={};for(const s in t){let i=s;if(e&&s in e&&!(i in n)){for(const o of e[s])if(o in n){i=o;break}}try{const o=t[s](n[i]);o!==void 0&&(r[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";me(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:n})}}return r}}function zHe(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}Q(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function U0(t){return Q(Yn(t,!0),"invalid data","value",t),t}function xs(t){return Q(Yn(t,32),"invalid hash","value",t),t}const WHe=a1({address:vn,blockHash:xs,blockNumber:zt,data:U0,index:zt,removed:Qt(zHe,!1),topics:V_(xs),transactionHash:xs,transactionIndex:zt},{index:["logIndex"]});function HHe(t){return WHe(t)}const GHe=a1({hash:Qt(xs),parentHash:xs,parentBeaconBlockRoot:Qt(xs,null),number:zt,timestamp:zt,nonce:Qt(U0),difficulty:Xe,gasLimit:Xe,gasUsed:Xe,stateRoot:Qt(xs,null),receiptsRoot:Qt(xs,null),blobGasUsed:Qt(Xe,null),excessBlobGas:Qt(Xe,null),miner:Qt(vn),prevRandao:Qt(xs,null),extraData:U0,baseFeePerGas:Qt(Xe)},{prevRandao:["mixHash"]});function qHe(t){const e=GHe(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:Bte(n)),e}const VHe=a1({transactionIndex:zt,blockNumber:zt,transactionHash:xs,address:vn,topics:V_(xs),data:U0,index:zt,blockHash:xs},{index:["logIndex"]});function KHe(t){return VHe(t)}const YHe=a1({to:Qt(vn,null),from:Qt(vn,null),contractAddress:Qt(vn,null),index:zt,root:Qt(Le),gasUsed:Xe,blobGasUsed:Qt(Xe,null),logsBloom:Qt(U0),blockHash:xs,hash:xs,logs:V_(KHe),blockNumber:zt,cumulativeGasUsed:Xe,effectiveGasPrice:Qt(Xe),blobGasPrice:Qt(Xe,null),status:Qt(zt),type:Qt(zt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function QHe(t){return YHe(t)}function Bte(t){t.to&&Xe(t.to)===K7&&(t.to="0x0000000000000000000000000000000000000000");const e=a1({hash:xs,index:Qt(zt,void 0),type:n=>n==="0x"||n==null?0:zt(n),accessList:Qt(lm,null),blobVersionedHashes:Qt(V_(xs,!0),null),authorizationList:Qt(V_(n=>{let r;if(n.signature)r=n.signature;else{let s=n.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},n,{yParity:s})}return{address:vn(n.address),chainId:Xe(n.chainId),nonce:Xe(n.nonce),signature:oo.from(r)}},!1),null),blockHash:Qt(xs,null),blockNumber:Qt(zt,null),transactionIndex:Qt(zt,null),from:vn,gasPrice:Qt(Xe),maxPriorityFeePerGas:Qt(Xe),maxFeePerGas:Qt(Xe),maxFeePerBlobGas:Qt(Xe,null),gasLimit:Xe,to:Qt(vn,null),value:Xe,nonce:zt,data:U0,creates:Qt(vn,null),chainId:Qt(Xe,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=$ze(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=oo.from(t.signature):e.signature=oo.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&Xe(e.blockHash)===K7&&(e.blockHash=null),e}const JHe="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class c1{constructor(e){te(this,"name");mt(this,{name:e})}clone(){return new c1(this.name)}}class ST extends c1{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);te(this,"effectiveBlock");te(this,"txBase");te(this,"txCreate");te(this,"txDataZero");te(this,"txDataNonzero");te(this,"txAccessListStorageKey");te(this,"txAccessListAddress");const s={effectiveBlock:n};function i(o,a){let c=(r||{})[o];c==null&&(c=a),Q(typeof c=="number",`invalud value for ${o}`,"costs",r),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),mt(this,s)}clone(){return new ST(this.effectiveBlock,this)}}class IT extends c1{constructor(n,r){super("org.ethers.plugins.network.Ens");te(this,"address");te(this,"targetNetwork");mt(this,{address:n||JHe,targetNetwork:r??1})}clone(){return new IT(this.address,this.targetNetwork)}}var oC,aC;class ZHe extends c1{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");K(this,oC);K(this,aC);U(this,oC,n),U(this,aC,r)}get url(){return _(this,oC)}get processFunc(){return _(this,aC)}clone(){return this}}oC=new WeakMap,aC=new WeakMap;const UO=new Map;var kw,Dw,gh;const xy=class xy{constructor(e,n){K(this,kw);K(this,Dw);K(this,gh);U(this,kw,e),U(this,Dw,Xe(n)),U(this,gh,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return _(this,kw)}set name(e){U(this,kw,e)}get chainId(){return _(this,Dw)}set chainId(e){U(this,Dw,Xe(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Xe(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Xe(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Xe(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(_(this,gh).values())}attachPlugin(e){if(_(this,gh).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return _(this,gh).set(e.name,e.clone()),this}getPlugin(e){return _(this,gh).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new xy(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new ST;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const s=lm(e.accessList);for(const i in s)r+=n.txAccessListAddress+n.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(e){if(XHe(),e==null)return xy.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=UO.get(e);if(n)return n();if(typeof e=="bigint")return new xy("unknown",e);Q(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){Q(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new xy(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new IT(e.ensAddress,e.ensNetwork)),n}Q(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=UO.get(e);r&&Q(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),UO.set(e,n)}};kw=new WeakMap,Dw=new WeakMap,gh=new WeakMap;let Cl=xy;function Y7(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function Q7(t){return new ZHe(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([r.send(),e()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:Y7(a.maxFee,9),maxPriorityFeePerGas:Y7(a.maxPriorityFee,9)}}catch(i){me(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let J7=!1;function XHe(){if(J7)return;J7=!0;function t(e,n,r){const s=function(){const i=new Cl(e,n);return r.ensNetwork!=null&&i.attachPlugin(new IT(null,r.ensNetwork)),i.attachPlugin(new ST),(r.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Cl.register(e,s),Cl.register(n,s),r.altNames&&r.altNames.forEach(i=>{Cl.register(i,s)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[Q7("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[Q7("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function K3(t){return JSON.parse(JSON.stringify(t))}var Su,ua,mh,al,Lw,xS;class eGe{constructor(e){K(this,Lw);K(this,Su);K(this,ua);K(this,mh);K(this,al);U(this,Su,e),U(this,ua,null),U(this,mh,4e3),U(this,al,-2)}get pollingInterval(){return _(this,mh)}set pollingInterval(e){U(this,mh,e)}start(){_(this,ua)||(U(this,ua,_(this,Su)._setTimeout(fe(this,Lw,xS).bind(this),_(this,mh))),fe(this,Lw,xS).call(this))}stop(){_(this,ua)&&(_(this,Su)._clearTimeout(_(this,ua)),U(this,ua,null))}pause(e){this.stop(),e&&U(this,al,-2)}resume(){this.start()}}Su=new WeakMap,ua=new WeakMap,mh=new WeakMap,al=new WeakMap,Lw=new WeakSet,xS=async function(){try{const e=await _(this,Su).getBlockNumber();if(_(this,al)===-2){U(this,al,e);return}if(e!==_(this,al)){for(let n=_(this,al)+1;n<=e;n++){if(_(this,ua)==null)return;await _(this,Su).emit("block",n)}U(this,al,e)}}catch{}_(this,ua)!=null&&U(this,ua,_(this,Su)._setTimeout(fe(this,Lw,xS).bind(this),_(this,mh)))};var Hp,Gp,yh;class FU{constructor(e){K(this,Hp);K(this,Gp);K(this,yh);U(this,Hp,e),U(this,yh,!1),U(this,Gp,n=>{this._poll(n,_(this,Hp))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){_(this,yh)||(U(this,yh,!0),_(this,Gp).call(this,-2),_(this,Hp).on("block",_(this,Gp)))}stop(){_(this,yh)&&(U(this,yh,!1),_(this,Hp).off("block",_(this,Gp)))}pause(e){this.stop()}resume(){this.start()}}Hp=new WeakMap,Gp=new WeakMap,yh=new WeakMap;var Mw,Iu;class tGe extends FU{constructor(n,r){super(n);K(this,Mw);K(this,Iu);U(this,Mw,r),U(this,Iu,-2)}pause(n){n&&U(this,Iu,-2),super.pause(n)}async _poll(n,r){const s=await r.getBlock(_(this,Mw));s!=null&&(_(this,Iu)===-2?U(this,Iu,s.number):s.number>_(this,Iu)&&(r.emit(_(this,Mw),s.number),U(this,Iu,s.number)))}}Mw=new WeakMap,Iu=new WeakMap;var Ex;class nGe extends FU{constructor(n,r){super(n);K(this,Ex);U(this,Ex,K3(r))}async _poll(n,r){throw new Error("@TODO")}}Ex=new WeakMap;var Uw;class rGe extends FU{constructor(n,r){super(n);K(this,Uw);U(this,Uw,r)}async _poll(n,r){const s=await r.getTransactionReceipt(_(this,Uw));s&&r.emit(_(this,Uw),s)}}Uw=new WeakMap;var xu,$w,Bw,wh,da,_x,Fte;class jU{constructor(e,n){K(this,_x);K(this,xu);K(this,$w);K(this,Bw);K(this,wh);K(this,da);U(this,xu,e),U(this,$w,K3(n)),U(this,Bw,fe(this,_x,Fte).bind(this)),U(this,wh,!1),U(this,da,-2)}start(){_(this,wh)||(U(this,wh,!0),_(this,da)===-2&&_(this,xu).getBlockNumber().then(e=>{U(this,da,e)}),_(this,xu).on("block",_(this,Bw)))}stop(){_(this,wh)&&(U(this,wh,!1),_(this,xu).off("block",_(this,Bw)))}pause(e){this.stop(),e&&U(this,da,-2)}resume(){this.start()}}xu=new WeakMap,$w=new WeakMap,Bw=new WeakMap,wh=new WeakMap,da=new WeakMap,_x=new WeakSet,Fte=async function(e){if(_(this,da)===-2)return;const n=K3(_(this,$w));n.fromBlock=_(this,da)+1,n.toBlock=e;const r=await _(this,xu).getLogs(n);if(r.length===0){_(this,da)<e-60&&U(this,da,e-60);return}for(const s of r)_(this,xu).emit(_(this,$w),s),U(this,da,s.blockNumber)};const sGe=BigInt(2),iGe=10;function LA(t){return t&&typeof t.then=="function"}function NS(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,o)=>(i[o]=r[o],i),{})}return r})}class jte{constructor(e){te(this,"name");mt(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function oGe(t){return JSON.parse(JSON.stringify(t))}function Y3(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function $O(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(Yn(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:NS("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:NS("orphan",n),filter:oGe(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(s=>s==null?null:Array.isArray(s)?Y3(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(n.address){const s=[],i=[],o=a=>{Yn(a)?s.push(a):i.push((async()=>{s.push(await yi(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),i.length&&await Promise.all(i),r.address=Y3(s.map(a=>a.toLowerCase()))}return{filter:r,tag:NS("event",r),type:"event"}}Q(!1,"unknown ProviderEvent","event",t)}function BO(){return new Date().getTime()}const aGe={cacheTimeout:250,pollingInterval:4e3};var qs,bh,Vs,Fw,Io,qp,vh,Nu,cC,ha,jw,zw,$t,vo,Q3,J3,Sv,Z3,Iv,TS;class cGe{constructor(e,n){K(this,$t);K(this,qs);K(this,bh);K(this,Vs);K(this,Fw);K(this,Io);K(this,qp);K(this,vh);K(this,Nu);K(this,cC);K(this,ha);K(this,jw);K(this,zw);if(U(this,zw,Object.assign({},aGe,n||{})),e==="any")U(this,qp,!0),U(this,Io,null);else if(e){const r=Cl.from(e);U(this,qp,!1),U(this,Io,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else U(this,qp,!1),U(this,Io,null);U(this,Nu,-1),U(this,vh,new Map),U(this,qs,new Map),U(this,bh,new Map),U(this,Vs,null),U(this,Fw,!1),U(this,cC,1),U(this,ha,new Map),U(this,jw,!1)}get pollingInterval(){return _(this,zw).pollingInterval}get provider(){return this}get plugins(){return Array.from(_(this,bh).values())}attachPlugin(e){if(_(this,bh).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return _(this,bh).set(e.name,e.connect(this)),this}getPlugin(e){return _(this,bh).get(e)||null}get disableCcipRead(){return _(this,jw)}set disableCcipRead(e){U(this,jw,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const c=r[a],l=c.replace("{sender}",s).replace("{data}",i),u=new mf(l);c.indexOf("{data}")===-1&&(u.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let d="unknown error",h;try{h=await u.send()}catch(f){o.push(f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:f}});continue}try{const f=h.bodyJson;if(f.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:f}),f.data;f.message&&(d=f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:f})}catch{}me(h.statusCode<400||h.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:d}}),o.push(d)}me(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new xHe(qHe(e),this)}_wrapLog(e,n){return new o1(HHe(e),this)}_wrapTransactionReceipt(e,n){return new Ite(QHe(e),this)}_wrapTransactionResponse(e,n){return new q_(Bte(e),this)}_detectNetwork(){me(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){me(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=zt(await fe(this,$t,vo).call(this,{method:"getBlockNumber"}),"%response");return _(this,Nu)>=0&&U(this,Nu,e),e}_getAddress(e){return yi(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(Yn(e))return Yn(e,32)?e:dc(e);if(typeof e=="bigint"&&(e=zt(e,"blockTag")),typeof e=="number")return e>=0?dc(e):_(this,Nu)>=0?dc(_(this,Nu)+e):this.getBlockNumber().then(n=>dc(n+e));Q(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?Y3(c.map(l=>l.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,s=(c,l,u)=>{let d;switch(c.length){case 0:break;case 1:d=c[0];break;default:c.sort(),d=c}if(r&&(l!=null||u!=null))throw new Error("invalid filter");const h={};return d&&(h.address=d),n.length&&(h.topics=n),l&&(h.fromBlock=l),u&&(h.toBlock=u),r&&(h.blockHash=r),h};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(e){const n=fx(e),r=[];if(["to","from"].forEach(s=>{if(n[s]==null)return;const i=yi(n[s],this);LA(i)?r.push(async function(){n[s]=await i}()):n[s]=i}),n.blockTag!=null){const s=this._getBlockTag(n.blockTag);LA(s)?r.push(async function(){n.blockTag=await s}()):n.blockTag=s}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(_(this,Io)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw _(this,Io)===s&&U(this,Io,null),i}})();return U(this,Io,s),(await s).clone()}const e=_(this,Io),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(_(this,qp)?(this.emit("network",r,n),_(this,Io)===e&&U(this,Io,Promise.resolve(r))):me(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await li({_block:fe(this,$t,Z3).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await fe(this,$t,vo).call(this,{method:"getGasPrice"});return Xe(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await fe(this,$t,vo).call(this,{method:"getPriorityFee"});return Xe(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(s,e);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*sGe+c),new H7(i,a,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new mf(r.url),i=await r.processFunc(n,this,s);return new H7(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return LA(n)&&(n=await n),Xe(await fe(this,$t,vo).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await li({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await fe(this,$t,J3).call(this,fe(this,$t,Q3).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return Xe(await fe(this,$t,Sv).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return zt(await fe(this,$t,Sv).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return Le(await fe(this,$t,Sv).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const s=Xe(n,"position");return Le(await fe(this,$t,Sv).call(this,{method:"getStorage",position:s},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:s}=await li({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=ox.from(e);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:s}=await li({network:this.getNetwork(),params:fe(this,$t,Z3).call(this,e,!!n)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(e){const{network:n,params:r}=await li({network:this.getNetwork(),params:fe(this,$t,vo).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await li({network:this.getNetwork(),params:fe(this,$t,vo).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await fe(this,$t,vo).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await li({network:this.getNetwork(),result:fe(this,$t,vo).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:Le(n)}async getLogs(e){let n=this._getFilter(e);LA(n)&&(n=await n);const{network:r,params:s}=await li({network:this.getNetwork(),params:fe(this,$t,vo).call(this,{method:"getLogs",filter:n})});return s.map(i=>this._wrapLog(i,r))}_getProvider(e){me(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await gx.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=vn(e);const n=z3(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await gx.getEnsAddress(this),i=await new Ky(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(i==null||i===$_)return null;const a=await new Ky(i,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(Ns(r,"BAD_DATA")&&r.value==="0x"||Ns(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const s=n??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const c=async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=s){i(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(rr("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){me(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=_(this,ha).get(e);n&&(n.timer&&clearTimeout(n.timer),_(this,ha).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=pd(this,cC)._++,s=()=>{_(this,ha).delete(r),e()};if(this.paused)_(this,ha).set(r,{timer:null,func:s,time:n});else{const i=setTimeout(s,n);_(this,ha).set(r,{timer:i,func:s,time:BO()})}return r}_forEachSubscriber(e){for(const n of _(this,qs).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new jte(e.type);case"block":{const n=new eGe(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new tGe(this,e.type);case"event":return new jU(this,e.filter);case"transaction":return new rGe(this,e.hash);case"orphan":return new nGe(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of _(this,qs).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),_(this,Vs)!=null&&n.pause(_(this,Vs));break}}async on(e,n){const r=await fe(this,$t,TS).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,_(this,Vs)!=null&&r.subscriber.pause(_(this,Vs))),this}async once(e,n){const r=await fe(this,$t,TS).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,_(this,Vs)!=null&&r.subscriber.pause(_(this,Vs))),this}async emit(e,...n){const r=await fe(this,$t,Iv).call(this,e,n);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:o})=>{const a=new nee(this,o?null:i,e);try{i.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),_(this,qs).delete(r.tag)),s>0}async listenerCount(e){if(e){const r=await fe(this,$t,Iv).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of _(this,qs).values())n+=r.length;return n}async listeners(e){if(e){const r=await fe(this,$t,Iv).call(this,e);return r?r.listeners.map(({listener:s})=>s):[]}let n=[];for(const{listeners:r}of _(this,qs).values())n=n.concat(r.map(({listener:s})=>s));return n}async off(e,n){const r=await fe(this,$t,Iv).call(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),_(this,qs).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:s}=await fe(this,$t,TS).call(this,e);r&&s.stop(),_(this,qs).delete(n)}else for(const[n,{started:r,subscriber:s}]of _(this,qs))r&&s.stop(),_(this,qs).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return _(this,Fw)}destroy(){this.removeAllListeners();for(const e of _(this,ha).keys())this._clearTimeout(e);U(this,Fw,!0)}get paused(){return _(this,Vs)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(U(this,Nu,-1),_(this,Vs)!=null){if(_(this,Vs)==!!e)return;me(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),U(this,Vs,!!e);for(const n of _(this,ha).values())n.timer&&clearTimeout(n.timer),n.time=BO()-n.time}resume(){if(_(this,Vs)!=null){this._forEachSubscriber(e=>e.resume()),U(this,Vs,null);for(const e of _(this,ha).values()){let n=e.time;n<0&&(n=0),e.time=BO(),setTimeout(e.func,n)}}}}qs=new WeakMap,bh=new WeakMap,Vs=new WeakMap,Fw=new WeakMap,Io=new WeakMap,qp=new WeakMap,vh=new WeakMap,Nu=new WeakMap,cC=new WeakMap,ha=new WeakMap,jw=new WeakMap,zw=new WeakMap,$t=new WeakSet,vo=async function(e){const n=_(this,zw).cacheTimeout;if(n<0)return await this._perform(e);const r=NS(e.method,e);let s=_(this,vh).get(r);return s||(s=this._perform(e),_(this,vh).set(r,s),setTimeout(()=>{_(this,vh).get(r)===s&&_(this,vh).delete(r)},n)),await s},Q3=async function(e,n,r){me(r<iGe,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const s=fx(e);try{return Le(await this._perform({method:"call",transaction:s,blockTag:n}))}catch(i){if(!this.disableCcipRead&&_U(i)&&i.data&&r>=0&&n==="latest"&&s.to!=null&&wr(i.data,0,4)==="0x556f1830"){const o=i.data,a=await yi(s.to,this);let c;try{c=fGe(wr(i.data,4))}catch(d){me(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}me(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(s,c.calldata,c.urls);me(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const u={to:a,data:_r([c.selector,hGe([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const d=await fe(this,$t,Q3).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:d}),d}}throw i}},J3=async function(e){const{value:n}=await li({network:this.getNetwork(),value:e});return n},Sv=async function(e,n,r){let s=this._getAddress(n),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await fe(this,$t,J3).call(this,fe(this,$t,vo).call(this,Object.assign(e,{address:s,blockTag:i})))},Z3=async function(e,n){if(Yn(e,32))return await fe(this,$t,vo).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await fe(this,$t,vo).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},Iv=async function(e,n){let r=await $O(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await $O({orphan:"drop-log",log:n[0]},this)),_(this,qs).get(r.tag)||null},TS=async function(e){const n=await $O(e,this),r=n.tag;let s=_(this,qs).get(r);return s||(s={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},_(this,qs).set(r,s)),s};function lGe(t,e){try{const n=X3(t,e);if(n)return sx(n)}catch{}return null}function X3(t,e){if(t==="0x")return null;try{const n=zt(wr(t,e,e+32)),r=zt(wr(t,n,n+32));return wr(t,n+32,n+32+r)}catch{}return null}function Z7(t){const e=Kr(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function uGe(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const dGe=new Uint8Array([]);function hGe(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(dGe),n+=32;for(let r=0;r<t.length;r++){const s=jt(t[r]);e[r]=Z7(n),e.push(Z7(s.length)),e.push(uGe(s)),n+=32+Math.ceil(s.length/32)*32}return _r(e)}const X7="0x0000000000000000000000000000000000000000000000000000000000000000";function fGe(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};me(Gy(t)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=wr(t,0,32);me(wr(n,0,12)===wr(X7,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=wr(n,12);try{const r=[],s=zt(wr(t,32,64)),i=zt(wr(t,s,s+32)),o=wr(t,s+32);for(let a=0;a<i;a++){const c=lGe(o,a*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{me(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=X3(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{me(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}me(wr(t,100,128)===wr(X7,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=wr(t,96,100);try{const r=X3(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{me(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function Uf(t,e){if(t.provider)return t.provider;me(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function ez(t,e){let n=fx(e);if(n.to!=null&&(n.to=yi(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),yi(r,t)]).then(([s,i])=>(Q(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else n.from=t.getAddress();return await li(n)}class pGe{constructor(e){te(this,"provider");mt(this,{provider:e||null})}async getNonce(e){return Uf(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await ez(this,e)}async populateTransaction(e){const n=Uf(this,"populateTransaction"),r=await ez(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const o=Xe(r.chainId);Q(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?Q(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&i&&Q(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();me(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(me(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):me(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await li(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await Uf(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return Uf(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Uf(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Uf(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=Uf(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const s=ox.from(r);return await n.broadcastTransaction(await this.signTransaction(s))}authorize(e){me(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function gGe(t){return JSON.parse(JSON.stringify(t))}var ai,cl,Vp,Eh,Kp,Ww,wf,e5,t5;class zte{constructor(e){K(this,wf);K(this,ai);K(this,cl);K(this,Vp);K(this,Eh);K(this,Kp);K(this,Ww);U(this,ai,e),U(this,cl,null),U(this,Vp,fe(this,wf,e5).bind(this)),U(this,Eh,!1),U(this,Kp,null),U(this,Ww,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){_(this,Eh)||(U(this,Eh,!0),fe(this,wf,e5).call(this,-2))}stop(){_(this,Eh)&&(U(this,Eh,!1),U(this,Ww,!0),fe(this,wf,t5).call(this),_(this,ai).off("block",_(this,Vp)))}pause(e){e&&fe(this,wf,t5).call(this),_(this,ai).off("block",_(this,Vp))}resume(){this.start()}}ai=new WeakMap,cl=new WeakMap,Vp=new WeakMap,Eh=new WeakMap,Kp=new WeakMap,Ww=new WeakMap,wf=new WeakSet,e5=async function(e){try{_(this,cl)==null&&U(this,cl,this._subscribe(_(this,ai)));let n=null;try{n=await _(this,cl)}catch(i){if(!Ns(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(n==null){U(this,cl,null),_(this,ai)._recoverSubscriber(this,this._recover(_(this,ai)));return}const r=await _(this,ai).getNetwork();if(_(this,Kp)||U(this,Kp,r),_(this,Kp).chainId!==r.chainId)throw new Error("chaid changed");if(_(this,Ww))return;const s=await _(this,ai).send("eth_getFilterChanges",[n]);await this._emitResults(_(this,ai),s)}catch(n){console.log("@TODO",n)}_(this,ai).once("block",_(this,Vp))},t5=function(){const e=_(this,cl);e&&(U(this,cl,null),e.then(n=>{_(this,ai).destroyed||_(this,ai).send("eth_uninstallFilter",[n])}))};var Yp;class mGe extends zte{constructor(n,r){super(n);K(this,Yp);U(this,Yp,gGe(r))}_recover(n){return new jU(n,_(this,Yp))}async _subscribe(n){return await n.send("eth_newFilter",[_(this,Yp)])}async _emitResults(n,r){for(const s of r)n.emit(_(this,Yp),n._wrapLog(s,n._network))}}Yp=new WeakMap;class yGe extends zte{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const wGe="bigint,boolean,function,number,string,symbol".split(/,/g);function RS(t){if(t==null||wGe.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(RS);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function bGe(t){return new Promise(e=>{setTimeout(e,t)})}function Ym(t){return t&&t.toLowerCase()}function tz(t){return t&&typeof t.pollingInterval=="number"}const Wte={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class FO extends pGe{constructor(n,r){super(n);te(this,"address");r=vn(r),mt(this,{address:r})}connect(n){me(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=RS(n),s=[];if(r.from){const o=r.from;s.push((async()=>{const a=await yi(o,this.provider);Q(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;s.push((async()=>{r.to=await yi(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(n);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const l=async()=>{try{const u=await this.provider.getTransaction(s);if(u!=null){i(u.replaceableTransaction(r));return}}catch(u){if(Ns(u,"CANCELLED")||Ns(u,"BAD_DATA")||Ns(u,"NETWORK_ERROR")||Ns(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=s,o(u);return}if(Ns(u,"INVALID_ARGUMENT")&&(c++,u.info==null&&(u.info={}),u.info.sendTransactionHash=s,c>10)){o(u);return}this.provider.emit("error",rr("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{l()},a.pop()||4e3)};l()})}async signTransaction(n){const r=RS(n);if(r.from){const i=await yi(r.from,this.provider);Q(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(n){const r=typeof n=="string"?qu(n):n;return await this.provider.send("personal_sign",[Le(r),this.address.toLowerCase()])}async signTypedData(n,r,s){const i=RS(s),o=await hx.resolveNames(n,r,i,async a=>{const c=await yi(a);return Q(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(hx.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?qu(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Le(r)])}}var Qp,Hw,Tu,ll,oc,fa,zi,lC,n5;class vGe extends cGe{constructor(n,r){super(n,r);K(this,lC);K(this,Qp);K(this,Hw);K(this,Tu);K(this,ll);K(this,oc);K(this,fa);K(this,zi);U(this,Hw,1),U(this,Qp,Object.assign({},Wte,r||{})),U(this,Tu,[]),U(this,ll,null),U(this,fa,null),U(this,zi,null);{let i=null;const o=new Promise(a=>{i=a});U(this,oc,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(Q(!s||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&n!=null&&U(this,fa,Cl.from(n))):s&&(Q(n==null||s.matches(n),"staticNetwork MUST match network object","options",r),U(this,fa,s))}_getOption(n){return _(this,Qp)[n]}get _network(){return me(_(this,fa),"network is not available yet","NETWORK_ERROR"),_(this,fa)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let s=n.transaction;if(s&&s.type!=null&&Xe(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(_(this,fa))return _(this,fa)}else return n;return _(this,zi)?await _(this,zi):this.ready?(U(this,zi,(async()=>{try{const r=Cl.from(Xe(await this.send("eth_chainId",[])));return U(this,zi,null),r}catch(r){throw U(this,zi,null),r}})()),await _(this,zi)):(U(this,zi,(async()=>{const r={id:pd(this,Hw)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],U(this,zi,null)}catch(i){throw U(this,zi,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Cl.from(Xe(s.result));throw this.getRpcError(r,s)})()),await _(this,zi))}_start(){_(this,oc)==null||_(this,oc).resolve==null||(_(this,oc).resolve(),U(this,oc,null),(async()=>{for(;_(this,fa)==null&&!this.destroyed;)try{U(this,fa,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",rr("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await bGe(1e3)}fe(this,lC,n5).call(this)})())}async _waitUntilReady(){if(_(this,oc)!=null)return await _(this,oc).promise}_getSubscriber(n){return n.type==="pending"?new yGe(this):n.type==="event"?this._getOption("polling")?new jU(this,n.filter):new mGe(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new jte("orphan"):super._getSubscriber(n)}get ready(){return _(this,oc)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(n[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=dc(Xe(n[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{n[s]!=null&&(r[s]=Le(n[s]))}),n.accessList&&(r.accessList=lm(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(s=>s.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(s=>{const i=Gee(s);return{address:i.address,nonce:dc(i.nonce),chainId:dc(i.chainId),yParity:dc(i.signature.yParity),r:dc(i.signature.r),s:dc(i.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Ym(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Ym(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[Ym(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Ym(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(Ym):n.filter.address=Ym(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:s}=n,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return rr("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:i}});if(c.match(/nonce/i)&&c.match(/too low/i))return rr("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=r5(i),l=G_.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",n.params[0],c?c.data:null);return l.info={error:i,payload:n},l}const o=JSON.stringify(_Ge(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return rr("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:n,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return rr("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return rr("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return rr("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return rr("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?rr("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:i,payload:n}}):rr("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(rr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const s=pd(this,Hw)._++,i=new Promise((o,a)=>{_(this,Tu).push({resolve:o,reject:a,payload:{method:n,params:r,id:s,jsonrpc:"2.0"}})});return fe(this,lC,n5).call(this),i}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const i=await r;if(n>=i.length)throw new Error("no such account");return new FO(this,i[n])}const{accounts:s}=await li({network:this.getNetwork(),accounts:r});n=vn(n);for(const i of s)if(vn(i)===n)return new FO(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new FO(this,r))}destroy(){_(this,ll)&&(clearTimeout(_(this,ll)),U(this,ll,null));for(const{payload:n,reject:r}of _(this,Tu))r(rr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));U(this,Tu,[]),super.destroy()}}Qp=new WeakMap,Hw=new WeakMap,Tu=new WeakMap,ll=new WeakMap,oc=new WeakMap,fa=new WeakMap,zi=new WeakMap,lC=new WeakSet,n5=function(){if(_(this,ll))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");U(this,ll,setTimeout(()=>{U(this,ll,null);const r=_(this,Tu);for(U(this,Tu,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==_(this,Qp).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(o=>o.payload)).length>_(this,Qp).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:l}of s){if(this.destroyed){c(rr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const u=o.filter(d=>d.id===l.id)[0];if(u==null){const d=rr("missing response for request","BAD_DATA",{value:o,info:{payload:l}});this.emit("error",d),c(d);continue}if("error"in u){c(this.getRpcError(l,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},n))};var _h;class EGe extends vGe{constructor(n,r){super(n,r);K(this,_h);let s=this._getOption("pollingInterval");s==null&&(s=Wte.pollingInterval),U(this,_h,s)}_getSubscriber(n){const r=super._getSubscriber(n);return tz(r)&&(r.pollingInterval=_(this,_h)),r}get pollingInterval(){return _(this,_h)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");U(this,_h,n),this._forEachSubscriber(r=>{tz(r)&&(r.pollingInterval=_(this,_h))})}}_h=new WeakMap;function r5(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&Yn(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=r5(t[e]);if(n)return n}return null}if(typeof t=="string")try{return r5(JSON.parse(t))}catch{}return null}function s5(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)s5(t[n],e);if(typeof t=="string")try{return s5(JSON.parse(t),e)}catch{}}}function _Ge(t){const e=[];return s5(t,e),e}var Gw,qw;const sp=class sp extends EGe{constructor(n,r,s){const i=Object.assign({},s??{},{batchMaxCount:1});Q(n&&n.request,"invalid EIP-1193 provider","ethereum",n);super(r,i);K(this,Gw);K(this,qw);U(this,qw,null),s&&s.providerInfo&&U(this,qw,s.providerInfo),U(this,Gw,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const l=await n.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const u=new Error(l.message);throw u.code=l.code,u.data=l.data,u.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}})}get providerInfo(){return _(this,qw)}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){Q(!Array.isArray(n),"EIP-1193 does not support batch request","payload",n);try{const r=await _(this,Gw).call(this,n.method,n.params||[]);return[{id:n.id,result:r}]}catch(r){return[{id:n.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(n,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(n,r)}async hasSigner(n){n==null&&(n=0);const r=await this.send("eth_accounts",[]);return typeof n=="number"?r.length>n:(n=n.toLowerCase(),r.filter(s=>s.toLowerCase()===n).length!==0)}async getSigner(n){if(n==null&&(n=0),!await this.hasSigner(n))try{await _(this,Gw).call(this,"eth_requestAccounts",[])}catch(r){const s=r.payload;throw this.getRpcError(s,{id:s.id,error:r})}return await super.getSigner(n)}static async discover(n){if(n==null&&(n={}),n.provider)return new sp(n.provider);const r=n.window?n.window:typeof window<"u"?window:null;if(r==null)return null;const s=n.anyProvider;if(s&&r.ethereum)return new sp(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const i=n.timeout?n.timeout:300;return i===0?null:await new Promise((o,a)=>{let c=[];const l=h=>{c.push(h.detail),s&&u()},u=()=>{if(clearTimeout(d),c.length)if(n&&n.filter){const h=n.filter(c.map(f=>Object.assign({},f.info)));if(h==null)o(null);else if(h instanceof sp)o(h);else{let f=null;if(h.uuid&&(f=c.filter(g=>h.uuid===g.info.uuid)[0]),f){const{provider:p,info:g}=f;o(new sp(p,void 0,{providerInfo:g}))}else a(rr("filter returned unknown info","UNSUPPORTED_OPERATION",{value:h}))}}else{const{provider:h,info:f}=c[0];o(new sp(h,void 0,{providerInfo:f}))}else o(null);r.removeEventListener("eip6963:announceProvider",l)},d=setTimeout(()=>{u()},i);r.addEventListener("eip6963:announceProvider",l),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};Gw=new WeakMap,qw=new WeakMap;let i5=sp;const Vf=[{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerToGame",outputs:[{internalType:"bytes6",name:"",type:"bytes6"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"games",outputs:[{internalType:"address",name:"player1",type:"address"},{internalType:"address",name:"player2",type:"address"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"address",name:"winner",type:"address"},{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"uint256",name:"wagerAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"createGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"joinGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"winner",type:"address"}],name:"endGame",outputs:[],stateMutability:"nonpayable",type:"function"}],Ya="0x3112AF5728520F52FD1C6710dD7bD52285a68e47",or={LOBBY:"lobby",WAITING:"waiting",ACTIVE:"active",FINISHED:"finished"},jO={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},au=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],CGe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}];function AGe(){const t=new Uint8Array(6);return window.crypto.getRandomValues(t),"0x"+Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}async function SGe(t){try{if(typeof window>"u"||!window.ethereum)throw new Error("No Ethereum provider found. Please connect your wallet.");const e=new i5(window.ethereum);return await new Ky(Ya,Vf,e).playerToGame(t)}catch(e){return console.error("Error fetching invite code from contract:",e),null}}const Hte=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s}=LC(),[i,o]=D.useState(""),[a,c]=D.useState(""),[l,u]=D.useState(!1),[d,h]=D.useState(!1),[f,p]=D.useState(!1),[g,y]=D.useState(!1),{writeContract:m,isPending:w,data:v}=HR(),{writeContract:A,isPending:C,data:S,error:x}=HR(),{writeContract:T,isPending:I,data:k}=HR(),O=Rwe(),{isLoading:B}=WR({hash:v}),{isLoading:G,data:W}=WR({hash:S}),{isLoading:R}=WR({hash:k}),{data:N}=d8({address:Ya,abi:Vf,functionName:"playerToGame",args:r?[r]:void 0,query:{enabled:!!r}}),{data:M}=d8({address:Ya,abi:Vf,functionName:"games",args:N?[N]:void 0,query:{enabled:!!N&&N!=="0x000000000000"}}),[P,L]=D.useState(""),F=($,H)=>{console.log(`[INVITE_DEBUG] Setting inviteCode to "${$}" from ${H}`),P&&!$&&console.warn(`[INVITE_DEBUG] WARNING: Clearing inviteCode from "${P}" to "${$}" from ${H}`),L($)},q=($,H)=>{console.log(`[WAGER_DEBUG] Setting wager to ${$} TDMT from ${H}`),Vo!==$&&console.log(`[WAGER_DEBUG] Wager changed from ${Vo} to ${$} TDMT`),Wl($)},[ne,le]=D.useState("moves"),ie=async()=>{if(!r||!Me){console.error("[CLAIM] Missing required data for claiming winnings");return}let $=P;if(!$&&r){console.log("[CLAIM] Invite code missing from state, trying to get from contract...");try{const H=await SGe(r);H&&H!=="0x000000000000"&&($=H,console.log("[CLAIM] Retrieved invite code from contract:",$))}catch(H){console.error("[CLAIM] Error getting invite code from contract:",H)}}if(!$){console.error("[CLAIM] Could not determine invite code for claiming winnings"),alert("Could not determine game invite code. Please try refreshing the page.");return}try{p(!0),console.log("[CLAIM] Claiming winnings for game:",$,"Player:",Me,"Address:",r);const H=await vs.getGame($);if(!H){console.error("[CLAIM] Error fetching game data:","Game data not found"),alert("Failed to fetch game data. Please try again.");return}console.log("[CLAIM] Firebase game data:",H);let j=null;if(H.winner&&(H.blue_player||H.red_player)&&(j=H.winner==="blue"?H.blue_player:H.red_player,console.log("[CLAIM] Using Firebase winner data:",{winner:H.winner,winnerAddress:j})),!j&&M)if(H.winner&&(H.winner==="blue"||H.winner==="red")){console.log("[CLAIM] Using Firebase winner color with contract player addresses");let ae,Oe,Ie,$e,dt,pn;if(Array.isArray(M))[ae,Oe,Ie,$e,dt,pn]=M;else{console.error("[CLAIM] Unexpected contract data format:",M),alert("Failed to verify winner. Please try again.");return}j=H.winner==="blue"?ae:Oe,console.log("[CLAIM] Winner from Firebase color + contract addresses:",{winnerColor:H.winner,winnerAddress:j,player1:ae,player2:Oe})}else{console.log("[CLAIM] Using contract data for winner verification"),console.log("[CLAIM] Full contract data:",M);let ae,Oe,Ie,$e,dt,pn;if(Array.isArray(M))[ae,Oe,Ie,$e,dt,pn]=M;else{console.error("[CLAIM] Unexpected contract data format:",M),alert("Failed to verify winner. Please try again.");return}const Et=String($e);if(Et.startsWith("0x"))j=Et;else if(Et==="blue"||Et==="red")j=Et==="blue"?ae:Oe;else if(Et==="1"||Et==="2")j=Et==="1"?ae:Oe;else{console.error("[CLAIM] Unknown winner format:",$e,"as string:",Et),alert("Failed to verify winner. Please try again.");return}console.log("[CLAIM] Winner from contract:",{winner:$e,winnerAddress:j,player1:ae,player2:Oe,winnerType:typeof $e,winnerValue:$e,address:r,addressType:typeof r})}if(!j){console.error("[CLAIM] Could not determine winner address"),alert("Failed to verify winner. Please try again.");return}if(console.log("[CLAIM] Winner verification details:",{winnerAddress:j,address:r,playerColor:Me,winnerAddressType:typeof j,addressType:typeof r,addressesMatch:j===r,winnerAddressLength:j==null?void 0:j.length,addressLength:r==null?void 0:r.length}),j!==r){console.error("[CLAIM] Player is not the winner",{winnerAddress:j,address:r,playerColor:Me}),alert("Only the winner can claim winnings.");return}console.log("[CLAIM] ✅ Winner verification passed! Proceeding with contract call...");let X=$;if(!X&&M){console.log("[CLAIM] Using invite code from contract data as fallback");let ae,Oe,Ie,$e,dt,pn;if(Array.isArray(M))[ae,Oe,Ie,$e,dt,pn]=M,X=dt;else{console.error("[CLAIM] Unexpected contract data format for invite code:",M),alert("Failed to get invite code. Please try again.");return}}if(!X||typeof X!="string"||!X.startsWith("0x")||X.length!==14){console.error("[CLAIM] Invalid invite code for contract claim:",X),alert("Invalid invite code for contract claim.");return}console.log("[CLAIM] Calling contract with:",{inviteCode:X,winner:j,functionName:"endGame",inviteCodeSource:H.invite_code?"Firebase":"Contract"}),T({address:Ya,abi:Vf,functionName:"endGame",args:[X,j]}),console.log("[CLAIM] Contract call initiated successfully"),I?console.log("[CLAIM] Contract call is pending..."):console.log("[CLAIM] Contract call status:",{isEndingGame:I,endGameHash:k})}catch(H){console.error("[CLAIM] Error claiming winnings:",H),alert("Failed to claim winnings. Please try again.")}finally{p(!1)}},[re,ye]=D.useState(au),[Z,oe]=D.useState("blue"),[he,de]=D.useState(null),[be,We]=D.useState([]),[_e,Ae]=D.useState([]),[tt,Se]=D.useState("Waiting for opponent..."),[Gt,sn]=D.useState(or.LOBBY),[Me,kt]=D.useState(null),[nr,Dn]=D.useState(null),[Vo,Wl]=D.useState(0),[Sr,Bs]=D.useState([]),[Ua,Ii]=D.useState(!1),[pr,Hl]=D.useState(null),[Bn,Ko]=D.useState(null),[xT,dm]=D.useState(""),[Xt,l1]=D.useState(0),[NT]=D.useState(!0);D.useEffect(()=>{document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode")},[]);const[Dc,GU]=D.useState(!1),[u1,TT]=D.useState(null),[hm,gb]=D.useState(!1),[fd,mb]=D.useState(null),[d1,fm]=D.useState(!1),[$a,pm]=D.useState(!0),[gm,h1]=D.useState(null),[xi,Lc]=D.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),[f1,p1]=D.useState([]),[Ba,RT]=D.useState(null),Fa=D.useRef(null),Gl=D.useRef(null),g1=D.useRef(r);D.useEffect(()=>{g1.current=r},[r]),D.useEffect(()=>{console.log("[JOIN RECEIPT DEBUG] - joinGameHash:",S),console.log("[JOIN RECEIPT DEBUG] - isWaitingForJoinReceipt:",G),console.log("[JOIN RECEIPT DEBUG] - pendingJoinGameData:",Bn),console.log("[JOIN RECEIPT DEBUG] - condition:",S&&!G&&Bn),S&&!G&&Bn&&(console.log("[CONTRACT] Join transaction confirmed:",S),r===Bn.address&&(console.log("[CONTRACT] Setting playerColor to red for confirmed join transaction"),kt("red"),Dn(Bn.gameData.blue_player)),vs.updateGame(Bn.inviteCode,{...Bn.gameData,red_player:Bn.address,game_state:"active"}).then(()=>{console.log("[CONTRACT] Firebase updated successfully after join confirmation"),sn(or.ACTIVE),Se("Game started!"),ql(Bn.inviteCode),console.log("[CONTRACT] Clearing pending join data"),Ko(null)}).catch($=>{console.error("Error updating game in database:",$),Se("Joined game on contract but failed to update database"),Ko(null)}))},[S,G,Bn,r]),D.useEffect(()=>{k&&!R&&(console.log("[CLAIM] End game transaction confirmed:",k),Se("Winnings claimed successfully! Transaction hash: "+k.slice(0,10)+"..."),p(!1))},[k,R]),D.useEffect(()=>{I===!1&&f&&!k&&(console.log("[CLAIM] End game transaction rejected or failed"),Se("Claim transaction was rejected. Please try again."),p(!1))},[I,f,k]),D.useEffect(()=>{console.log("[CREATE DEBUG] Transaction receipt handler - createGameHash:",v),console.log("[CREATE DEBUG] Transaction receipt handler - isWaitingForCreateReceipt:",B),console.log("[CREATE DEBUG] Transaction receipt handler - pendingGameData:",pr),console.log("[CREATE DEBUG] Transaction receipt handler - inviteCode:",P),console.log("[CREATE DEBUG] Transaction receipt handler - condition:",v&&!B&&pr&&!P),console.log("[CREATE DEBUG] Transaction receipt handler - individual conditions:"),console.log("[CREATE DEBUG] - createGameHash exists:",!!v),console.log("[CREATE DEBUG] - not waiting for receipt:",!B),console.log("[CREATE DEBUG] - pendingGameData exists:",!!pr),console.log("[CREATE DEBUG] - no inviteCode set:",!P),v&&!B&&pr&&!P?(console.log("[CONTRACT] Create game transaction confirmed:",v),vs.createGame(pr).then(()=>{console.log("[FIREBASE] Game created successfully after transaction confirmation"),L(pr.invite_code),kt("blue"),q(Xt,"create game success"),sn(or.WAITING),Se("Waiting for opponent to join..."),ql(pr.invite_code),setTimeout(()=>{ym()},1e3),Hl(null),Ii(!1)}).catch($=>{console.error("[FIREBASE] Error creating game after transaction:",$),Se("Transaction confirmed but failed to create game in database"),Hl(null),Ii(!1)})):v&&!B&&(console.log("[CREATE DEBUG] Transaction confirmed but conditions not met for Firebase update:"),console.log("[CREATE DEBUG] - pendingGameData missing:",!pr),console.log("[CREATE DEBUG] - inviteCode already set:",!!P))},[v,B,pr,Xt]),D.useEffect(()=>{console.log("[PENDING DEBUG] pendingGameData changed:",pr)},[pr]),D.useEffect(()=>{if(console.log("[PENDING DEBUG] pendingJoinGameData changed:",Bn),Bn){const $=setTimeout(()=>{console.log("[AUTO-CLEAR] Pending join data has been stuck for too long, clearing automatically"),Ko(null)},3e4);return()=>clearTimeout($)}},[Bn]),D.useEffect(()=>{console.log("[CREATE REJECTION DEBUG] - isCreatingGameContract:",w),console.log("[CREATE REJECTION DEBUG] - pendingGameData:",pr),console.log("[CREATE REJECTION DEBUG] - createGameHash:",v),console.log("[CREATE REJECTION DEBUG] - condition:",w===!1&&pr&&!v),w===!1&&pr&&!v&&(console.log("[CONTRACT] Create game transaction rejected or failed"),Se("Transaction was rejected. Please try again."),Hl(null),Ii(!1))},[w,pr,v]),D.useEffect(()=>{C===!1&&Bn&&!S&&(console.log("[CONTRACT] Join game transaction rejected or failed"),console.log("[CONTRACT] Rejection details - isJoiningGameContract:",C),console.log("[CONTRACT] Rejection details - pendingJoinGameData:",Bn),console.log("[CONTRACT] Rejection details - joinGameHash:",S),console.log("[CONTRACT] Rejection details - address:",r),console.log("[CONTRACT] Rejection details - playerGameInviteCode:",N),Se("Transaction was rejected. Please try again."),F("","join transaction rejection"),kt(null),q(0,"join transaction rejection"),Dn(null),sn(or.LOBBY),Se(""),Ko(null))},[C,Bn,S,r,N]),D.useEffect(()=>{r&&N!==void 0&&(g||(N!=="0x000000000000"&&M||N==="0x000000000000")&&PT())},[r,N,M,g]),D.useEffect(()=>{y(!1)},[r]),D.useEffect(()=>()=>{w1(),Fa.current&&Fa.current(),Gl.current&&clearTimeout(Gl.current)},[]);const PT=async()=>{if(r)try{if(console.log("[GAME_STATE] Checking for active games for player:",r),N&&N!=="0x000000000000"&&!M){console.log("[GAME_STATE] Waiting for contract data...");return}if(N&&N!=="0x000000000000"&&(console.log("[GAME_STATE] Found game in contract:",N),M)){let j,X,ae,Oe,Ie,$e;if(Array.isArray(M))[j,X,ae,Oe,Ie,$e]=M;else{console.error("[GAME_STATE] Unexpected contract data format:",M);return}if(console.log("[GAME_STATE] Parsed contract game data:",{player1:j,player2:X,isActive:ae,winner:Oe,inviteCode:Ie,wagerAmount:$e}),!Ie){console.error("[GAME_STATE] Invalid invite code:",Ie);return}const dt=j===r?"blue":"red",pn=j===r?X:j;console.log("[GAME_STATE] Player is",dt,"opponent is",pn),console.log("[DEBUG] Contract address comparison:"),console.log("[DEBUG] - player1 (blue):",j),console.log("[DEBUG] - player2 (red):",X),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - player1 === address:",j===r),console.log("[DEBUG] - player2 === address:",X===r);const Et=await vs.getGame(Ie);if(Et){if(console.log("[GAME_STATE] Found game in Firebase:",Et),L(Ie),kt(dt),q(parseFloat(Et.bet_amount)/1e18,"checkPlayerGameState Firebase"),Dn(pn),Et.game_state==="waiting")sn(or.WAITING),Se("Waiting for opponent to join..."),console.log("[GAME_STATE] Setting game mode to WAITING");else if(Et.game_state==="active"||Et.game_state==="test_update"){if(sn(or.ACTIVE),Se("Game in progress"),console.log("[GAME_STATE] Setting game mode to ACTIVE (from state:",Et.game_state,")"),Et.board){const Ur=Et.board;ye(Mc(Ur)),oe(Et.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state:",Et.game_state,"- treating as active"),sn(or.ACTIVE),Se("Game in progress"),Et.board){const Ur=Et.board;ye(Mc(Ur)),oe(Et.current_player||"blue")}ql(Ie),y(!0),console.log("[GAME_STATE] Game state loaded from Firebase"),console.log("[GAME_STATE] Current game mode:",Gt),console.log("[GAME_STATE] Game state from Firebase:",Et.game_state);return}else{console.log("[GAME_STATE] Game exists in contract but not in Firebase, syncing...");const Ur={invite_code:Ie,game_title:`Game ${Ie.slice(-6)}`,bet_amount:$e?$e.toString():"0",blue_player:j,red_player:X,game_state:ae?"active":"waiting",board:{positions:Vl(au),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:Ya,is_public:!0};if(await vs.createGame(Ur),console.log("[GAME_STATE] Successfully synced game to Firebase:",Ur),L(Ie),kt(dt),q(parseFloat(Ur.bet_amount)/1e18,"checkPlayerGameState sync"),Dn(pn),ae?(sn(or.ACTIVE),Se("Game in progress")):(sn(or.WAITING),Se("Waiting for opponent to join...")),Ur.board){const ane=Ur.board;ye(Mc(ane)),oe(Ur.current_player||"blue")}ql(Ie),y(!0),console.log("[GAME_STATE] Game state loaded after sync");return}}console.log("[GAME_STATE] No contract game found, checking Firebase...");const H=(await vs.getActiveGames()).filter(j=>j.chain==="sanko"&&(j.blue_player===r||j.red_player===r)&&["waiting","active"].includes(j.game_state));if(H&&H.length>0){const j=H[0];if(console.log("[GAME_STATE] Found active game in Firebase:",j),console.log("[DEBUG] Firebase fallback address comparison:"),console.log("[DEBUG] - blue_player:",j.blue_player),console.log("[DEBUG] - red_player:",j.red_player),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - blue_player === address:",j.blue_player===r),console.log("[DEBUG] - red_player === address:",j.red_player===r),L(j.invite_code),kt(j.blue_player===r?"blue":"red"),q(parseFloat(j.bet_amount)/1e18,"checkPlayerGameState fallback"),Dn(j.blue_player===r?j.red_player:j.blue_player),j.game_state==="waiting")sn(or.WAITING),Se("Waiting for opponent to join...");else if(j.game_state==="active"||j.game_state==="test_update"){if(sn(or.ACTIVE),Se("Game in progress"),j.board){const X=j.board;ye(Mc(X)),oe(j.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state in Firebase check:",j.game_state,"- treating as active"),sn(or.ACTIVE),Se("Game in progress"),j.board){const X=j.board;ye(Mc(X)),oe(j.current_player||"blue")}ql(j.invite_code),y(!0),console.log("[GAME_STATE] Game state loaded successfully from Firebase");return}console.log("[GAME_STATE] No active games found"),sn(or.LOBBY),Ii(!1),y(!0)}catch($){console.error("[GAME_STATE] Error in checkPlayerGameState:",$)}},mm=async()=>{try{const $=await JX(20);p1($)}catch($){console.error("Error loading leaderboard:",$)}},m1=async $=>{if(console.log("[SCORE] updateScore called with:",$,"for address:",r),!r){console.error("[SCORE] No address available for score update");return}try{console.log("[SCORE] Updating score for address:",Ug(r)),await rx(r,$)?console.log("[SCORE] Successfully updated score for:",Ug(r)):console.error("[SCORE] Failed to update score"),console.log("[SCORE] updateScore completed successfully")}catch(H){console.error("[SCORE] Error updating score:",H)}},y1=async($,H,j)=>{try{if(console.log("[SCORE] Updating both players scores:",{winner:$,bluePlayer:H,redPlayer:j}),!H||!j){console.error("[SCORE] Missing player addresses from contract");return}await W9e($,H,j)?(console.log("[SCORE] Successfully updated both players scores"),await mm()):console.error("[SCORE] Failed to update both players scores")}catch(X){console.error("[SCORE] Error updating both players scores:",X)}},ym=async()=>{try{const $=await vs.getOpenGames();console.log("[FIREBASE] Loaded open games:",$),await OT($),Bs($)}catch($){console.error("Error loading open games:",$)}},OT=async $=>{if(console.log("[CLEANUP] Checking for ghost games..."),!O){console.log("[CLEANUP] Public client not available, skipping cleanup");return}for(const H of $)try{const j=H.invite_code;if(!j||typeof j!="string"||!j.startsWith("0x")||j.length!==14){console.warn("[CLEANUP] Invalid invite code for game:",H.invite_code,j);continue}const X=await O.readContract({address:Ya,abi:Vf,functionName:"games",args:[j]});(!X||Array.isArray(X)&&X[0]==="0x0000000000000000000000000000000000000000")&&(console.log("[CLEANUP] Found ghost game:",H.invite_code,"- removing from Firebase"),await vs.deleteGame(H.invite_code),console.log("[CLEANUP] Ghost game removed:",H.invite_code))}catch(j){console.error("[CLEANUP] Error checking game:",H.invite_code,j)}},kT=async()=>{if(!(!r||Xt<=0)){console.log("[CREATE] Starting game creation - address:",r,"wager:",Xt),Ii(!0);try{const $=AGe();console.log("[CREATE] Generated invite code:",$);const H={invite_code:$,game_title:`Chess Game ${$.slice(-6)}`,bet_amount:(Xt*1e18).toString(),blue_player:r,game_state:"waiting",board:{positions:Vl(au),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:Ya,is_public:!0,created_at:new Date().toISOString()};console.log("[CREATE] Game data prepared:",H),console.log("[CREATE] Calling contract with args:",[$,BigInt(Math.floor(Xt*1e18))]),m({address:Ya,abi:Vf,functionName:"createGame",args:[$],value:BigInt(Math.floor(Xt*1e18))}),console.log("[CREATE] Contract call initiated, setting pending data"),console.log("[CREATE] Pending game data being set:",H),Hl(H),Se("Creating game... Please confirm transaction in your wallet.")}catch($){console.error("[CREATE] Error creating game:",$),Se("Failed to create game. Please try again.")}finally{Ii(!1)}}},DT=async $=>{if(r)try{const H=await vs.getGame($);if(!H||H.game_state!=="waiting"){Se("Game not found or already full");return}const j=parseFloat(H.bet_amount),X=j/1e18;if(L($),kt("red"),q(X,"joinGame"),Dn(H.blue_player),console.log("[JOIN] Setting up join game with data:",{inviteCode:$,playerColor:"red",wagerAmountTDMT:X,opponent:H.blue_player,address:r}),r===H.blue_player){console.error("[JOIN] Player cannot join their own game"),Se("You cannot join your own game");return}if(N&&N!=="0x000000000000"){console.error("[JOIN] Player already has an active game:",N),Se("You already have an active game");return}if(typeof window<"u"&&window.ethereum)try{const Oe=await window.ethereum.request({method:"eth_chainId"}),Ie=await window.ethereum.request({method:"eth_accounts"});console.log("[JOIN] Wallet state check - chainId:",Oe),console.log("[JOIN] Wallet state check - connectedAccounts:",Ie),console.log("[JOIN] Wallet state check - currentAddress:",r),console.log("[JOIN] Wallet state check - isConnected:",s)}catch(Oe){console.error("[JOIN] Error checking wallet state:",Oe)}console.log("[JOIN] Contract call parameters - contractAddress:",Ya),console.log("[JOIN] Contract call parameters - functionName: joinGame"),console.log("[JOIN] Contract call parameters - args:",[$]);const ae=BigInt(j);console.log("[JOIN] Contract call parameters - wagerAmount from Firebase (wei):",j),console.log("[JOIN] Contract call parameters - wagerValue (wei):",ae),console.log("[JOIN] Contract call parameters - value as hex:","0x"+ae.toString(16)),console.log("[JOIN] Contract call parameters - value in wei:",ae.toString()),Se("Joining game... Please confirm transaction in your wallet."),setTimeout(()=>{console.log("[JOIN] About to call writeJoinGame..."),console.log("[JOIN] Final contract call parameters:"),console.log("[JOIN] - address:",Ya),console.log("[JOIN] - functionName: joinGame"),console.log("[JOIN] - args:",[$]),console.log("[JOIN] - value:",ae),console.log("[JOIN] - value as BigInt:",ae.toString()),A({address:Ya,abi:Vf,functionName:"joinGame",args:[$],value:ae}),console.log("[JOIN] writeJoinGame called, setting pending data..."),Ko({inviteCode:$,gameData:H,address:r}),console.log("[JOIN] Pending data set"),console.log("[JOIN] Transaction initiated - waiting for user confirmation in MetaMask...")},500)}catch(H){console.error("[JOIN] Error joining game:",H),Se("Failed to join game. Please try again."),F("","join game error"),kt(null),q(0,"join game error"),Dn(null)}},[LT,If]=D.useState(null),[qU,VU]=D.useState(""),[MT,KU]=D.useState(!0),w1=()=>{console.log("[FIREBASE] No fallback to stop")},ql=$=>{console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",$),Fa.current&&(console.log("[FIREBASE] Removing existing subscription"),Fa.current());const H=vs.subscribeToGame($,j=>{const X=g1.current;if(console.log("=== [DEBUG] FIREBASE SUBSCRIPTION CALLBACK ==="),console.log("[DEBUG] Current wallet address (from addressRef):",X),console.log("[DEBUG] Current wallet address (from useAccount):",r),console.log("[DEBUG] Game data received:",j),console.log("[DEBUG] Blue player from Firebase:",j==null?void 0:j.blue_player),console.log("[DEBUG] Red player from Firebase:",j==null?void 0:j.red_player),console.log("[DEBUG] Blue player type:",typeof(j==null?void 0:j.blue_player)),console.log("[DEBUG] Red player type:",typeof(j==null?void 0:j.red_player)),console.log("[DEBUG] Current address type:",typeof X),console.log("[DEBUG] Current playerColor state:",Me),console.log("[DEBUG] Pending join game data:",!!Bn),!j){console.log("[DEBUG] No game data received");return}if(Bn&&X===Bn.address)console.log("[DEBUG] Pending join transaction detected - preserving playerColor:",Me),j.game_state==="active"&&(console.log("[AUTO-CLEAR] Game is active, clearing pending join data"),Ko(null)),j.blue_player&&j.red_player&&j.red_player!=="0x0000000000000000000000000000000000000000"&&Dn(j.blue_player===X?j.red_player:j.blue_player);else if(X&&j.blue_player&&j.red_player&&j.red_player!=="0x0000000000000000000000000000000000000000"){console.log("[DEBUG] Both players present, comparing addresses...");const Oe=X.toLowerCase()===j.blue_player.toLowerCase(),Ie=X.toLowerCase()===j.red_player.toLowerCase();console.log("[DEBUG] Blue player match:",Oe),console.log("[DEBUG] Red player match:",Ie),console.log("[DEBUG] Blue comparison:",`${X.toLowerCase()} === ${j.blue_player.toLowerCase()}`),console.log("[DEBUG] Red comparison:",`${X.toLowerCase()} === ${j.red_player.toLowerCase()}`),Oe&&Me!=="blue"?(console.log("[DEBUG] Setting player color to BLUE"),kt("blue"),Dn(j.red_player)):Ie&&Me!=="red"?(console.log("[DEBUG] Setting player color to RED"),kt("red"),Dn(j.blue_player)):!Oe&&!Ie&&Me!==null?(console.log("[DEBUG] No address match found - setting playerColor to null"),kt(null),Dn(null)):console.log("[DEBUG] Player color already correctly set to:",Me)}else{if(console.log("[DEBUG] Missing player data or red player is zero address - using contract data as fallback"),console.log("[DEBUG] - currentAddress:",!!X),console.log("[DEBUG] - blue_player:",!!j.blue_player),console.log("[DEBUG] - red_player:",j==null?void 0:j.red_player),console.log("[DEBUG] - Current playerColor state:",Me),console.log("[DEBUG] - Contract game data available:",!!M),Me&&(Me==="blue"||Me==="red")){console.log("[DEBUG] Preserving existing valid playerColor:",Me);return}else if(M&&Array.isArray(M)&&X){const[Oe,Ie]=M;if(Oe&&Ie){const $e=Oe.toLowerCase()===X.toLowerCase()?"blue":"red",dt=Oe.toLowerCase()===X.toLowerCase()?Ie:Oe;console.log("[DEBUG] Setting playerColor from contract fallback:",$e),kt($e),Dn(dt)}}else console.log("[DEBUG] No valid data available, but preserving existing playerColor if valid"),(!Me||Me!=="blue"&&Me!=="red")&&(console.log("[DEBUG] Setting playerColor to null"),kt(null));j.blue_player&&j.red_player&&j.red_player!=="0x0000000000000000000000000000000000000000"&&Dn(j.blue_player===X?j.red_player:j.blue_player)}console.log("=== [DEBUG] END FIREBASE SUBSCRIPTION CALLBACK ==="),console.log("[WAGER DEBUG] bet_amount from Firebase:",j.bet_amount),console.log("[WAGER DEBUG] bet_amount type:",typeof j.bet_amount),console.log("[WAGER DEBUG] Full gameData:",j),console.log("[WAGER DEBUG] parsed value:",j.bet_amount?parseFloat(j.bet_amount):"null"),console.log("[WAGER DEBUG] converted to TDMT:",j.bet_amount?parseFloat(j.bet_amount)/1e18:"null");let ae=0;j.bet_amount&&!isNaN(parseFloat(j.bet_amount))?(ae=parseFloat(j.bet_amount)/1e18,console.log("[WAGER DEBUG] Setting wager from Firebase:",ae)):M&&Array.isArray(M)&&M[5]?(ae=parseFloat(M[5].toString())/1e18,console.log("[WAGER DEBUG] Setting wager from contract data:",ae)):console.log("[WAGER DEBUG] Setting wager to 0 (no valid bet_amount found)"),q(ae,"Firebase subscription"),j.board&&ye(Mc(j.board)),j.current_player&&oe(j.current_player),j.game_state==="active"?(sn(or.ACTIVE),Se("Game in progress")):j.game_state==="finished"?(sn(or.FINISHED),Se("Game finished")):j.game_state==="waiting"&&(sn(or.WAITING),Se("Waiting for opponent to join..."))});Fa.current=H,console.log("[FIREBASE] Firebase subscription setup complete for game:",$)};D.useEffect(()=>(P&&ql(P),()=>{Fa.current&&Fa.current()}),[P,r]),D.useEffect(()=>{if(M&&!Me&&r){console.log("[FALLBACK] Setting playerColor from contract data");let $,H,j,X,ae,Oe;if(Array.isArray(M))[$,H,j,X,ae,Oe]=M;else{console.error("[FALLBACK] Unexpected contract data format:",M);return}const Ie=$===r?"blue":"red",$e=$===r?H:$;console.log("[FALLBACK] Contract-based player assignment:"),console.log("[FALLBACK] - player1 (blue):",$),console.log("[FALLBACK] - player2 (red):",H),console.log("[FALLBACK] - current address:",r),console.log("[FALLBACK] - assigned color:",Ie),console.log("[FALLBACK] - opponent:",$e),console.log("[FALLBACK] - inviteCode from contract:",ae),kt(Ie),Dn($e),!P&&ae&&(console.log("[FALLBACK] Setting missing inviteCode:",ae),L(ae)),P&&vs.getGame(P).then(dt=>{dt&&(!dt.blue_player||!dt.red_player)&&(console.log("[AUTO-FIX] Detected missing player data, attempting to fix..."),Xte()),dt&&dt.game_state==="active"&&Bn&&(console.log("[AUTO-CLEAR] Game is confirmed active, clearing pending join data"),Ko(null))}).catch(dt=>{console.error("[AUTO-FIX] Error checking game data for auto-fix:",dt)})}},[M,Me,r,P]),D.useEffect(()=>{if(W&&Bn){console.log("[RECEIPT] Join transaction confirmed!"),console.log("[RECEIPT] Transaction hash:",W.transactionHash),console.log("[RECEIPT] Pending data:",Bn);const{inviteCode:$,gameData:H,address:j}=Bn;vs.updateGame($,{red_player:j,blue_player:H.blue_player,bet_amount:H.bet_amount,game_state:"active",last_move:null,board:{positions:Vl(au),rows:8,cols:8},current_player:"blue"}).then(()=>{console.log("[RECEIPT] Firebase updated successfully after join confirmation"),Se("Game started! You are the red player."),sn(or.ACTIVE),Ko(null)}).catch(X=>{console.error("[RECEIPT] Error updating Firebase after join confirmation:",X),Se("Game joined but failed to update game state. Please refresh.")})}},[W,Bn]),D.useEffect(()=>{x&&(console.error("[ERROR] Join transaction failed:",x),Se(`Failed to join game: ${x.message||"Transaction rejected"}`),F("","join game error effect"),kt(null),q(0,"join game error effect"),Dn(null),Ko(null))},[x]);const Vl=$=>{const H={};return $.forEach((j,X)=>{j.forEach((ae,Oe)=>{H[`${X}_${Oe}`]=ae})}),H},Mc=$=>{if(!$||!$.positions)return console.warn("[BOARD] No board data available, using initial board"),au;if(console.log("[BOARD] Attempting to reconstruct board from:",$),console.log("[BOARD] Positions type:",typeof $.positions),console.log("[BOARD] Positions is array:",Array.isArray($.positions)),console.log("[BOARD] Positions value:",$.positions),typeof $.positions=="object"&&!Array.isArray($.positions)){const H=$.positions,j=$.rows||8,X=$.cols||8,ae=Array(j).fill(null).map(()=>Array(X).fill(null));for(let Oe=0;Oe<j;Oe++)for(let Ie=0;Ie<X;Ie++){const $e=`${Oe}_${Ie}`;ae[Oe][Ie]=H[$e]||null}return console.log("[BOARD] Reconstructed from flat structure:",ae),ae}return Array.isArray($.positions)?(console.log("[BOARD] Found array structure, length:",$.positions.length),$.positions.length===8?$.positions.every((j,X)=>{const ae=Array.isArray(j)&&j.length===8;return ae||console.warn(`[BOARD] Row ${X} is invalid:`,j,"Type:",typeof j,"Length:",j==null?void 0:j.length),ae})?(console.log("[BOARD] Using legacy array structure"),$.positions):(console.warn("[BOARD] Legacy array structure is malformed, using initial board"),au):(console.warn("[BOARD] Array has wrong length:",$.positions.length,"expected 8"),au)):(console.warn("[BOARD] Unknown board structure, using initial board:",$),au)},yb=$=>`${$.slice(0,6)}...${$.slice(-4)}`,Mr=$=>$&&$===$.toUpperCase()?"red":"blue",V=($,H)=>$>=0&&$<8&&H>=0&&H<8,J=($,H)=>{const j=H==="red"?"K":"k";let X=-1,ae=-1;for(let Ie=0;Ie<8;Ie++){for(let $e=0;$e<8;$e++)if($[Ie][$e]===j){X=Ie,ae=$e;break}if(X!==-1)break}return X===-1?!1:ce(X,ae,H==="red"?"blue":"red",$)},ce=($,H,j,X)=>{if(!X||!Array.isArray(X)||X.length!==8)return console.warn("[SAFETY] Invalid board structure in isSquareUnderAttack:",X),!1;for(let ae=0;ae<8;ae++){if(!X[ae]||!Array.isArray(X[ae])||X[ae].length!==8)return console.warn("[SAFETY] Invalid board row structure:",X[ae]),!1;for(let Oe=0;Oe<8;Oe++){const Ie=X[ae][Oe];if(Ie&&Mr(Ie)===j&&qt(Ie,ae,Oe,$,H,!1,j,X,!0))return!0}}return!1},se=($,H,j,X,ae,Oe=re)=>{const Ie=Oe[$][H];if(!Ie)return!1;const $e=Oe.map(dt=>[...dt]);return $e[j][X]=Ie,$e[$][H]=null,J($e,ae)},ee=($,H,j,X,ae,Oe)=>{const Ie=$==="blue"?-1:1,$e=$==="blue"?6:1;if(!V(X,ae)||$==="blue"&&X>=H||$==="red"&&X<=H)return!1;if(j===ae&&X===H+Ie)return Oe[X][ae]===null;if(j===ae&&H===$e&&X===H+2*Ie)return Oe[H+Ie][j]===null&&Oe[X][ae]===null;if(Math.abs(j-ae)===1&&X===H+Ie){const dt=Oe[X][ae];if(dt!==null&&Mr(dt)!==$)return!0;if(dt===null&&xi.lastPawnDoubleMove){const{row:pn,col:Et}=xi.lastPawnDoubleMove;if(pn===H&&Et===ae){const Ur=Oe[H][ae];if(Ur&&Ur.toLowerCase()==="p"&&Mr(Ur)!==$)return!0}}}return!1},Re=($,H,j,X,ae)=>$===j||H===X,Pe=($,H,j,X)=>{const ae=Math.abs($-j),Oe=Math.abs(H-X);return ae===2&&Oe===1||ae===1&&Oe===2},rt=($,H,j,X,ae)=>Math.abs($-j)===Math.abs(H-X),en=($,H,j,X,ae)=>Re($,H,j,X)||rt($,H,j,X),yn=($,H,j,X,ae)=>{const Oe=Math.abs(H-X),Ie=Math.abs(j-ae);if(Oe<=1&&Ie<=1)return!0;if(Oe===0&&Ie===2){if($==="blue"&&!xi.blueKingMoved){if(ae===6&&!xi.blueRooksMove.right||ae===2&&!xi.blueRooksMove.left)return!0}else if($==="red"&&!xi.redKingMoved&&(ae===6&&!xi.redRooksMove.right||ae===2&&!xi.redRooksMove.left))return!0}return!1},Fn=($,H,j,X,ae)=>{const Oe=$===j?0:(j-$)/Math.abs(j-$),Ie=H===X?0:(X-H)/Math.abs(X-H);let $e=$+Oe,dt=H+Ie;for(;$e!==j||dt!==X;){if(ae[$e][dt]!==null)return!1;$e+=Oe,dt+=Ie}return!0},qt=($,H,j,X,ae,Oe=!0,Ie=Mr($),$e=re,dt=!1)=>{if(!$||!V(X,ae))return!1;const pn=$e[X][ae];if(pn&&Mr(pn)===Ie)return!1;let Et=!1;switch($.toUpperCase()){case"P":Et=ee(Ie,H,j,X,ae,$e);break;case"R":Et=Re(H,j,X,ae)&&Fn(H,j,X,ae,$e);break;case"N":Et=Pe(H,j,X,ae);break;case"B":Et=rt(H,j,X,ae)&&Fn(H,j,X,ae,$e);break;case"Q":Et=en(H,j,X,ae)&&Fn(H,j,X,ae,$e);break;case"K":Et=yn(Ie,H,j,X,ae);break}return!(!Et||Oe&&se(H,j,X,ae,Ie,$e))},xf=($,H=re,j=Z)=>{const X=[],ae=H[$.row][$.col];if(!ae||Mr(ae)!==j)return X;const Oe=ae.toLowerCase();if(Oe==="p"){const Ie=j==="blue"?-1:1,$e=j==="blue"?6:1,dt=$.row+Ie;if(dt>=0&&dt<8&&qt(ae,$.row,$.col,dt,$.col,!0,j,H,!0)&&X.push({row:dt,col:$.col}),$.row===$e){const pn=$.row+2*Ie;pn>=0&&pn<8&&qt(ae,$.row,$.col,pn,$.col,!0,j,H,!0)&&X.push({row:pn,col:$.col})}for(const pn of[-1,1]){const Et=$.col+pn,Ur=$.row+Ie;Et>=0&&Et<8&&Ur>=0&&Ur<8&&qt(ae,$.row,$.col,Ur,Et,!0,j,H,!0)&&X.push({row:Ur,col:Et})}}else if(Oe==="n"){const Ie=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[$e,dt]of Ie){const pn=$.row+$e,Et=$.col+dt;pn>=0&&pn<8&&Et>=0&&Et<8&&qt(ae,$.row,$.col,pn,Et,!0,j,H,!0)&&X.push({row:pn,col:Et})}}else for(let Ie=0;Ie<8;Ie++)for(let $e=0;$e<8;$e++)qt(ae,$.row,$.col,Ie,$e,!0,j,H,!0)&&X.push({row:Ie,col:$e});return X},Gte=($,H=re)=>{if(!J(H,$))return!1;for(let j=0;j<8;j++)for(let X=0;X<8;X++){const ae=H[j][X];if(ae&&Mr(ae)===$&&xf({row:j,col:X},H,$).length>0)return!1}return!0},qte=($,H=re)=>{if(J(H,$))return!1;for(let j=0;j<8;j++)for(let X=0;X<8;X++){const ae=H[j][X];if(ae&&Mr(ae)===$&&xf({row:j,col:X},H,$).length>0)return!1}return!0},Vte=($,H)=>{if(console.log("[CLICK] Square clicked:",{row:$,col:H}),console.log("[CLICK] Game mode:",Gt,"Player color:",Me),console.log("[CLICK] Current player:",Z,"Player color:",Me),Gt!==or.ACTIVE||!Me){console.log("[CLICK] Game not active or no player color");return}const j=re[$][H],X=j?Mr(j):null;if(console.log("[CLICK] Piece at square:",j,"Piece color:",X),Z!==Me){console.log("[CLICK] Not player's turn. Current:",Z,"Player:",Me);return}if(j&&X===Me){de({row:$,col:H});const ae=xf({row:$,col:H});We(ae);return}if(he&&be.some(ae=>ae.row===$&&ae.col===H)){Kte(he,{row:$,col:H}),de(null),We([]);return}de(null),We([])},Kte=async($,H)=>{if(console.log("[PROMOTION DEBUG] makeMove called with:",{from:$,to:H,playerColor:Me,currentPlayer:Z}),!Me||Z!==Me){console.log("[PROMOTION DEBUG] Early return - playerColor:",Me,"currentPlayer:",Z);return}const j=re[$.row][$.col];if(!j){console.log("[PROMOTION DEBUG] No piece at position:",$);return}if(console.log("[PROMOTION DEBUG] Piece:",j,"isPawn:",j.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] Current player:",Z,"to.row:",H.row),console.log("[PROMOTION DEBUG] Player color:",Me),console.log("[PROMOTION DEBUG] Promotion condition check:"),console.log("[PROMOTION DEBUG] - piece.toUpperCase() === P:",j.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] - currentPlayer === red && to.row === 7:",Z==="red"&&H.row===7),console.log("[PROMOTION DEBUG] - currentPlayer === blue && to.row === 0:",Z==="blue"&&H.row===0),console.log("[PROMOTION DEBUG] - Full condition:",j.toUpperCase()==="P"&&(Z==="red"&&H.row===7||Z==="blue"&&H.row===0)),j.toUpperCase()==="P"&&(Z==="red"&&H.row===7||Z==="blue"&&H.row===0)){console.log("[PROMOTION] Showing promotion dialog for piece:",j,"at position:",H),mb({from:$,to:H}),gb(!0);return}await YU($,H)},YU=async($,H,j="q")=>{if(!Me||Z!==Me||!re[$.row][$.col])return;const Oe=re[H.row][H.col]!==null;if(wb(Oe?"capture":"move"),Oe){h1({row:H.row,col:H.col,show:!0}),setTimeout(()=>{QU($,H,j),h1(null)},500);return}QU($,H,j)},QU=async($,H,j="q")=>{if(!Me||Z!==Me)return;const X=re[$.row][$.col];if(!X)return;const ae=re.map(pn=>[...pn]);let Oe=X;console.log("[PROMOTION DEBUG] executeMoveAfterAnimation - checking promotion:"),console.log("[PROMOTION DEBUG] - piece:",X,"isPawn:",X.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] - playerColor:",Me,"to.row:",H.row),console.log("[PROMOTION DEBUG] - promotion condition:",X.toUpperCase()==="P"&&(Me==="red"&&H.row===7||Me==="blue"&&H.row===0)),console.log("[PROMOTION DEBUG] - promotionPiece:",j),X.toUpperCase()==="P"&&(Me==="red"&&H.row===7||Me==="blue"&&H.row===0)&&(Oe=Me==="red"?j.toUpperCase():j.toLowerCase(),console.log("[PROMOTION DEBUG] - Promoting pawn to:",Oe)),Qte(ae,$,H,X),ae[H.row][H.col]=Oe,ae[$.row][$.col]=null,Jte($,H,X);const Ie=Z==="blue"?"red":"blue";J(ae,Ie)&&wb("check");let $e="active",dt=null;Gte(Ie,ae)?($e="finished",dt=Z,Se(`${Z==="red"?"Red":"Blue"} wins by checkmate!`),wb("checkmate"),Yte(),console.log("[SCORE] Updating scores - Winner:",Z,"Loser:",Ie),console.log("[SCORE] Contract game data:",M),console.log("[SCORE] Player game invite code:",N),M&&M.length>=2?(console.log("[SCORE] Using contract data for both players update"),await y1(Z,M[0],M[1])):(console.log("[SCORE] Contract data not available, falling back to single player update"),await m1(Z===Me?"win":"loss"),await mm()),dt===Me&&(console.log("[CONTRACT] Triggering automatic payout for winner:",dt),setTimeout(()=>{ie()},2e3))):qte(Ie,ae)&&($e="finished",Se("Game ended in stalemate"),console.log("[SCORE] Updating scores for draw"),await m1("draw"));try{if(!P){console.error("[BUG] inviteCode is missing when trying to update game!"),Se("Game code missing. Please reload or rejoin the game.");return}console.log("[DEBUG] About to update game. inviteCode:",P,"gameData:",{board:{positions:ae},current_player:Ie,game_state:$e,winner:dt,last_move:{from:$,to:H}});const Et={...await vs.getGame(P),board:{positions:Vl(ae),rows:8,cols:8},current_player:Ie,game_state:$e,winner:dt,last_move:{from:$,to:H}};console.log("[FIREBASE] Storing data in Firebase:",Et),await vs.updateGame(P,Et),console.log("[FIREBASE] Game updated successfully"),console.log("[FIREBASE] Real-time event should be delivered immediately")}catch(pn){console.error("[DATABASE] Error updating game:",pn)}ye(ae),oe(Ie),RT({from:$,to:H}),gb(!1),mb(null)},Yte=()=>{fm(!0),wb("victory"),Gl.current&&clearTimeout(Gl.current),Gl.current=setTimeout(()=>{fm(!1)},5e3)},Qte=($,H,j,X)=>{if(X.toLowerCase()==="k"&&Math.abs(H.col-j.col)===2){if(j.col===6)$[H.row][7]=null,$[H.row][5]=Mr(X)==="blue"?"r":"R";else if(j.col===2){const ae=$[H.row][3];$[H.row][0]=null,$[H.row][3]=Mr(X)==="blue"?"r":"R",ae&&ae.toLowerCase()==="q"&&($[H.row][4]=ae)}}X.toLowerCase()==="p"&&Math.abs(H.col-j.col)===1&&$[j.row][j.col]===null&&xi.lastPawnDoubleMove&&xi.lastPawnDoubleMove.row===H.row&&xi.lastPawnDoubleMove.col===j.col&&($[H.row][j.col]=null)},Jte=($,H,j)=>{const X={...xi};j.toLowerCase()==="k"?Mr(j)==="blue"?X.blueKingMoved=!0:X.redKingMoved=!0:j.toLowerCase()==="r"&&(Mr(j)==="blue"?($.col===0&&(X.blueRooksMove.left=!0),$.col===7&&(X.blueRooksMove.right=!0)):($.col===0&&(X.redRooksMove.left=!0),$.col===7&&(X.redRooksMove.right=!0))),j.toLowerCase()==="p"&&Math.abs($.row-H.row)===2?X.lastPawnDoubleMove={row:H.row,col:H.col}:X.lastPawnDoubleMove=null,Lc(X)},wb=$=>{if($a)try{const H=new Audio(`/images/${$}.mp3`);H.volume=.3,H.play().catch(j=>console.warn("Audio play failed:",j))}catch(H){console.warn("Sound play failed:",H)}},Zte=async()=>{if(P)try{console.log("[RESET] Resetting corrupted game data for:",P);const $={board:{positions:Vl(au),rows:8,cols:8},current_player:"blue",game_state:"active",winner:null,last_move:null};await vs.updateGame(P,$),console.log("[RESET] Successfully reset game data"),Se("Game reset successfully. You can now make moves.")}catch($){console.error("[RESET] Error resetting game data:",$),Se("Failed to reset game. Please try again.")}},JU=async()=>{try{console.warn("[STUCK GAMES] checkStuckGames is not implemented.")}catch($){console.error("Error checking stuck games:",$)}},Xte=async()=>{if(console.log("[FIX] Attempting to fix missing player data..."),!P||!r){console.log("[FIX] Missing inviteCode or address");return}try{const $=await vs.getGame(P);if(!$){console.log("[FIX] No game data found");return}if(console.log("[FIX] Current game data:",$),M&&Array.isArray(M)){const[H,j,X,ae,Oe,Ie]=M;console.log("[FIX] Contract data for fixing:"),console.log("[FIX] - Contract player1 (blue):",H),console.log("[FIX] - Contract player2 (red):",j),console.log("[FIX] - Contract isActive:",X),console.log("[FIX] - Firebase blue_player:",$.blue_player),console.log("[FIX] - Firebase red_player:",$.red_player),console.log("[FIX] - Firebase game_state:",$.game_state);let $e=!1;const dt={};j&&j!=="0x0000000000000000000000000000000000000000"&&(!$.red_player||$.red_player==="0x0000000000000000000000000000000000000000")&&(console.log("[FIX] Fixing red player address in Firebase"),dt.red_player=j,$e=!0),H&&H!=="0x0000000000000000000000000000000000000000"&&(!$.blue_player||$.blue_player==="0x0000000000000000000000000000000000000000")&&(console.log("[FIX] Fixing blue player address in Firebase"),dt.blue_player=H,$e=!0),H&&j&&H!=="0x0000000000000000000000000000000000000000"&&j!=="0x0000000000000000000000000000000000000000"&&($.game_state==="waiting"||!$.game_state)&&(console.log("[FIX] Activating game in Firebase"),dt.game_state="active",dt.current_player="blue",$e=!0),X&&$.game_state!=="active"&&(console.log("[FIX] Syncing game state to active"),dt.game_state="active",$e=!0),$e?(console.log("[FIX] Updating Firebase with:",dt),await vs.updateGame(P,dt),console.log("[FIX] Firebase updated successfully")):console.log("[FIX] No missing player data to fix")}else console.log("[FIX] No contract data available for fixing")}catch($){console.error("[FIX] Error fixing missing player data:",$)}},ene=($,H)=>{if(!re||!Array.isArray(re)||re.length!==8||!re[$]||!Array.isArray(re[$])||re[$].length!==8)return console.warn("[SAFETY] Invalid board structure in renderSquare:",{row:$,col:H,board:re}),b.jsx("div",{className:"square error",children:b.jsx("div",{className:"error-indicator",children:"!"})},`${$}-${H}`);const j=re[$][H],X=(he==null?void 0:he.row)===$&&(he==null?void 0:he.col)===H,ae=be.some($e=>$e.row===$&&$e.col===H),Oe=Ba&&(Ba.from.row===$&&Ba.from.col===H||Ba.to.row===$&&Ba.to.col===H),Ie=j&&j.toUpperCase()==="K"&&J(re,Mr(j));return b.jsxs("div",{className:`square ${X?"selected":""} ${ae?"legal-move":""} ${Oe?"last-move":""} ${Ie?"square-in-check":""}`,onClick:()=>Vte($,H),children:[j&&b.jsx("div",{className:"piece",style:{backgroundImage:jO[j]?`url(${jO[j]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),ae&&b.jsx("div",{className:"legal-move-indicator"})]},`${$}-${H}`)},tne=()=>{if(console.log("[PROMOTION DEBUG] renderPromotionDialog called - showPromotion:",hm,"promotionMove:",fd),!hm||!fd)return console.log("[PROMOTION DEBUG] Not rendering dialog - showPromotion:",hm,"promotionMove:",fd),null;const $=Z==="blue"?["q","r","b","n"]:["Q","R","B","N"];return b.jsx("div",{className:"promotion-dialog",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.9)",border:"2px solid gold",borderRadius:"8px",padding:"20px",zIndex:1e3},children:b.jsxs("div",{className:"promotion-content",children:[b.jsx("h3",{style:{color:"white",marginBottom:"15px"},children:"Choose promotion piece:"}),b.jsx("div",{className:"promotion-pieces",style:{display:"flex",gap:"10px"},children:$.map(H=>b.jsx("div",{className:"promotion-piece",onClick:()=>{console.log("[PROMOTION] Selected piece:",H),YU(fd.from,fd.to,H),gb(!1),mb(null)},style:{cursor:"pointer",padding:"10px",border:"2px solid white",borderRadius:"4px",background:"rgba(255, 255, 255, 0.1)"},children:b.jsx("img",{src:jO[H],alt:H,style:{width:"40px",height:"40px"}})},H))})]})})},nne=()=>b.jsxs("div",{className:"piece-gallery",children:[b.jsx("h3",{children:"Chess Pieces"}),b.jsx("div",{className:"piece-gallery-grid",children:CGe.map($=>b.jsxs("div",{className:"piece-gallery-item",onClick:()=>{TT(u1===$.key?null:$.key)},children:[b.jsx("img",{src:$.img,alt:$.name,className:"piece-gallery-img"}),b.jsx("div",{className:"piece-gallery-name",children:$.name}),u1===$.key&&b.jsx("div",{className:"piece-gallery-desc",children:$.desc})]},$.key))})]}),ZU=()=>b.jsxs("div",{className:"chess-multiplayer-lobby",children:[b.jsx("h2",{children:"Multiplayer Chess Lobby"}),s?b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"status-bar",children:["Connected: ",yb(r)]}),b.jsxs("div",{className:"lobby-content",children:[b.jsxs("div",{className:"open-games",children:[b.jsx("h3",{children:"Open Games"}),b.jsxs("div",{className:"games-list",children:[Sr.map($=>b.jsxs("div",{className:"game-item",children:[b.jsxs("div",{className:"game-info",children:[b.jsx("div",{className:"game-id",children:$.game_title||"Untitled Game"}),b.jsxs("div",{className:"wager",children:["Wager: ",(parseFloat($.bet_amount)/1e18).toFixed(2)," tDMT"]}),b.jsxs("div",{className:"title",children:["Created by: ",yb($.blue_player)]})]}),b.jsx("button",{className:"join-btn",onClick:()=>DT($.invite_code),children:"Join Game"})]},$.invite_code)),Sr.length===0&&b.jsx("div",{className:"no-games",children:"No open games available"})]})]}),b.jsxs("div",{className:"actions",children:[b.jsx("button",{className:"create-btn",onClick:()=>Ii(!0),disabled:Ua,children:"Create New Game"}),b.jsx("button",{className:"resume-btn",onClick:JU,style:{marginTop:"10px",background:"rgba(0, 255, 0, 0.1)",border:"2px solid #00ff00",color:"#00ff00",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:"Check for Active Games"}),b.jsx("button",{onClick:ym,style:{marginTop:"10px",background:"rgba(0, 123, 255, 0.1)",border:"2px solid #007bff",color:"#007bff",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:"🔄 Refresh Lobby"})]}),Ua&&b.jsxs("div",{className:"create-form",children:[b.jsx("h3",{children:"Create New Game"}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Wager (tDMT):"}),b.jsx("input",{type:"number",value:Xt,onChange:$=>l1(Number($.target.value)),placeholder:"0.1",min:"0",step:"0.1"})]}),b.jsxs("div",{className:"form-actions",children:[b.jsx("button",{className:"create-confirm-btn",onClick:kT,disabled:Xt<=0,children:"Create Game"}),b.jsx("button",{className:"cancel-btn",onClick:()=>Ii(!1),children:"Cancel"})]})]})]})]}):b.jsx("div",{className:"wallet-notice",children:"Please connect your wallet to play multiplayer chess"})]}),rne=()=>b.jsxs("div",{className:"chess-multiplayer-waiting",children:[b.jsx("h2",{children:"Waiting for Opponent"}),b.jsxs("div",{className:"game-code",children:["Invite Code: ",b.jsx("strong",{children:P})]}),b.jsxs("div",{className:"game-info",children:[b.jsxs("p",{children:["Wager: ",Vo," tDMT"]}),b.jsx("p",{children:"Share this invite code with your opponent"})]})]}),sne=()=>b.jsxs("div",{className:"chess-game",children:[b.jsxs("div",{className:"chess-header",children:[b.jsx("h2",{children:"♔ Multiplayer Chess"}),b.jsxs("div",{className:"chess-controls",children:[e&&b.jsx("button",{onClick:e,className:"minimize-btn",title:"Minimize",children:"_"}),b.jsx("button",{onClick:t,className:"close-btn",title:"Close",children:"×"})]})]}),b.jsxs("div",{className:"game-info",children:[b.jsxs("div",{className:"game-status-section",children:[b.jsx("span",{className:`status ${tt.includes("Check")?"check-status":""}`,children:tt}),b.jsxs("span",{className:`current-player ${Z==="red"?"red-turn":"blue-turn"}`,children:["Current: ",Z==="red"?"♔ Red":"♔ Blue"]})]}),b.jsxs("div",{className:"game-details-section",children:[b.jsxs("span",{className:"wager-display",children:["💰 ",Vo," tDMT"]}),nr&&b.jsxs("span",{className:"opponent-info",children:["vs ",yb(nr)]})]}),Gt===or.FINISHED&&b.jsxs("div",{className:"game-finished-actions",children:[b.jsx("button",{onClick:ie,disabled:f,className:"claim-winnings-btn",children:f?"⏳ Claiming...":"🏆 Claim Winnings"}),b.jsx("button",{onClick:()=>window.location.href="/chess",className:"back-to-chess-btn",children:"🏠 Back to Chess Home"})]})]}),b.jsxs("div",{className:"game-stable-layout",children:[b.jsxs("div",{className:"left-sidebar",children:[b.jsxs("div",{className:"sidebar-tabs",children:[b.jsx("button",{className:`tab-button ${ne==="moves"?"active":""}`,onClick:()=>le("moves"),children:"📝 Moves"}),b.jsx("button",{className:`tab-button ${ne==="leaderboard"?"active":""}`,onClick:()=>le("leaderboard"),children:"🏆 Leaderboard"})]}),ne==="moves"&&b.jsxs("div",{className:"move-history",children:[b.jsx("h4",{children:"Move History"}),b.jsx("div",{className:"moves",children:_e.slice().reverse().map(($,H)=>b.jsx("div",{className:"move",children:$},_e.length-1-H))})]}),ne==="leaderboard"&&b.jsxs("div",{className:"leaderboard",children:[b.jsx("h4",{children:"Leaderboard"}),b.jsx("div",{className:"leaderboard-table",children:b.jsxs("table",{children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{children:"#"}),b.jsx("th",{children:"Player"}),b.jsx("th",{children:"W"}),b.jsx("th",{children:"L"}),b.jsx("th",{children:"D"}),b.jsx("th",{children:"Pts"})]})}),b.jsx("tbody",{children:f1.map(($,H)=>b.jsxs("tr",{children:[b.jsx("td",{children:H+1}),b.jsx("td",{children:$.username}),b.jsx("td",{children:$.wins}),b.jsx("td",{children:$.losses}),b.jsx("td",{children:$.draws}),b.jsx("td",{children:$.points})]},$.username))})]})})]})]}),b.jsxs("div",{className:"center-area",children:[b.jsxs("div",{className:"chessboard-container",children:[b.jsx("div",{className:"chessboard",children:Array.from({length:8},($,H)=>b.jsx("div",{className:"board-row",children:Array.from({length:8},(j,X)=>ene(H,X))},H))}),gm&&gm.show&&b.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${gm.row*12.5}%`,left:`${gm.col*12.5}%`,width:"12.5%",height:"12.5%",pointerEvents:"none",zIndex:1e3},children:b.jsx("div",{className:"explosion-effect",children:"💥"})})]}),b.jsxs("div",{className:"game-controls",children:[b.jsx("div",{className:"control-section",children:tt.includes("corrupted")&&b.jsx("button",{className:"reset-game-btn",onClick:Zte,children:"🔄 Reset Game"})}),b.jsx("div",{className:"settings-section",children:b.jsxs("div",{className:"sound-controls",children:[b.jsxs("label",{className:"control-label",children:[b.jsx("input",{type:"checkbox",id:"sound-toggle",checked:$a,onChange:$=>pm($.target.checked),className:"control-checkbox"}),b.jsx("span",{className:"control-text",children:"🎵 Sound Effects"})]}),b.jsxs("label",{className:"control-label",children:[b.jsx("input",{type:"checkbox",id:"victory-toggle",checked:d1,onChange:$=>fm($.target.checked),className:"control-checkbox"}),b.jsx("span",{className:"control-text",children:"🎉 Victory Celebration"})]})]})}),d&&b.jsx("button",{className:"claim-winnings-btn",onClick:ie,disabled:f||I||R,children:f||I||R?"⏳ Claiming...":"🏆 Claim Winnings"})]})]}),b.jsx("div",{className:"right-sidebar"})]}),Dc&&b.jsx("div",{className:"piece-gallery-panel",children:nne()}),tne(),d1&&b.jsx("div",{className:"victory-celebration",children:b.jsxs("div",{className:"victory-content",children:[b.jsx("h2",{children:"🎉 Victory! 🎉"}),b.jsx("p",{children:"Congratulations on your win!"})]})})]}),ine=()=>null;D.useEffect(()=>{mm(),ym(),JU();const $=setInterval(ym,3e4);return()=>{clearInterval($),Fa.current&&Fa.current(),Gl.current&&clearTimeout(Gl.current)}},[]),console.log("[RENDER] Current game mode:",Gt,"Game ID:",P);const one=(()=>{switch(Gt){case or.LOBBY:return ZU();case or.WAITING:return rne();case or.ACTIVE:case or.FINISHED:return sne();default:return ZU()}})();return b.jsxs(b.Fragment,{children:[one,ine()]})},zO={AI:"ai"},MA={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},nz=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],IGe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],xGe=()=>{const[t,e]=D.useState(!1),n=D.useRef(null),r=D.useRef(!1);D.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=new Worker("/stockfish.worker.js");a.onmessage=c=>{console.log("[DEBUG] Stockfish worker message:",c.data)},a.onerror=c=>{console.error("[DEBUG] Stockfish worker error:",c),e(!1),r.current=!1},console.log("[DEBUG] LawbBot initialized successfully"),n.current=a,e(!0),r.current=!1,console.log("[DEBUG] Stockfish worker ready for commands")}catch(a){console.error("[DEBUG] Failed to create Stockfish worker:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=D.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var p;const f=h.data;typeof f=="string"&&f.startsWith("bestmove ")&&(l=f.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(p=n.current)==null||p.removeEventListener("message",d),c(l)))};try{n.current.addEventListener("message",d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeEventListener("message",d)}catch(g){console.warn("[DEBUG] Error removing message listener:",g)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=D.useCallback(async(o,a=4e3)=>{try{const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l="https://chess.lawb.xyz/api/stockfish";console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.move||null}else return console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},NGe=()=>{const[t,e]=D.useState(null),[n,r]=D.useState(!1),s=D.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=D.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},TGe=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r}=LC(),[s,i]=D.useState(zO.AI),[o,a]=D.useState(()=>JSON.parse(JSON.stringify(nz))),[c,l]=D.useState("blue"),[u,d]=D.useState(null),[h,f]=D.useState("active"),[p,g]=D.useState("hard"),[y,m]=D.useState("Connect wallet to play"),[w,v]=D.useState([]),[A,C]=D.useState([]),[S,x]=D.useState([]),[T,I]=D.useState(null),[k,O]=D.useState(!1),[B,G]=D.useState(!1),[W,R]=D.useState(null),[N,M]=D.useState(null),[P]=D.useState(""),[L]=D.useState(.1),[F,q]=D.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),ne=D.useRef(null),le=D.useRef(!1),ie=D.useRef(o),re=D.useRef(null),ye=D.useRef(null),Z=D.useRef(!1),oe=D.useRef(!1),[he,de]=D.useState(!1),[be,We]=D.useState(!1),[_e,Ae]=D.useState(!1),[tt]=D.useState(!0);D.useEffect(()=>{document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode")},[]);const{stockfishReady:Se}=xGe(),{getOpeningData:Gt}=NGe(),[sn,Me]=D.useState("loading"),[kt,nr]=D.useState(!1),[Dn,Vo]=D.useState([]),[Wl,Sr]=D.useState(!1),[Bs,Ua]=D.useState("/images/chessboard1.png"),[Ii,pr]=D.useState(!0),[Hl,Bn]=D.useState(!1),Ko=()=>{const V=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],J=Math.floor(Math.random()*V.length),ce=V[J];return console.log("[DEBUG] Random chessboard selected:",ce,"(index:",J,")"),ce};D.useEffect(()=>{if(Se)Me("ready");else{const V=window.setTimeout(()=>{Se||(Me("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(V)}},[Se]),D.useEffect(()=>{ie.current=o},[o]),D.useEffect(()=>{r?m("Select game mode"):(m("Connect wallet to play"),O(!1))},[r]),D.useEffect(()=>(!ne.current&&typeof Worker<"u"&&(ne.current=new Worker("/aiWorker.js"),ne.current.onmessage=V=>{console.log("[DEBUG] AI worker response received:",V.data);const{move:J,nodes:ce}=V.data;J&&le.current&&h==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",J),console.log("[DEBUG] AI searched",ce,"nodes"),le.current=!1,ye.current&&(window.clearTimeout(ye.current),ye.current=null),re.current&&re.current(J.from,J.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},ne.current.onerror=V=>{console.error("[DEBUG] AI worker error:",V),m("AI worker error - using fallback mode"),le.current=!1}),()=>{ne.current&&(ne.current.terminate(),ne.current=null),ye.current&&(window.clearTimeout(ye.current),ye.current=null)}),[]),D.useEffect(()=>{xT()},[]);const xT=async()=>{try{const V=await JX(20);C(V),console.log("Leaderboard data loaded:",V)}catch(V){m("Failed to load leaderboard"),console.error("Leaderboard error:",V)}},dm=async V=>{if(console.log("[DEBUG] updateScore called with:",V),!r){console.log("[DEBUG] No wallet address, returning");return}try{console.log("[DEBUG] Updating score for address:",Ug(r)),await rx(r,V)?(console.log("[DEBUG] Successfully updated score for:",Ug(r)),await xT()):console.error("[DEBUG] Failed to update score")}catch(J){console.error("[DEBUG] Error in updateScore:",J)}},Xt=V=>V&&V===V.toUpperCase()?"red":"blue",l1=(V,J)=>V>=0&&V<8&&J>=0&&J<8,NT=(V,J)=>`${String.fromCharCode(97+J)}${8-V}`,Dc=(V,J)=>{const ce=J==="blue"?"k":"K";let se=null;for(let Pe=0;Pe<8;Pe++){for(let rt=0;rt<8;rt++)if(V[Pe][rt]===ce){se={row:Pe,col:rt};break}if(se)break}if(!se)return console.log(`King not found for ${J}`),!1;const ee=J==="blue"?"red":"blue",Re=GU(se.row,se.col,ee,V);return console.log(`${J} king at ${se.row},${se.col} under attack: ${Re}`),Re},GU=(V,J,ce,se)=>{for(let ee=0;ee<8;ee++)for(let Re=0;Re<8;Re++){const Pe=se[ee][Re];if(Pe&&Xt(Pe)===ce&&$a(Pe,ee,Re,V,J,!1,ce,se,!0))return!0}return!1},u1=(V,J,ce,se,ee,Re=o)=>{const Pe=Re.map(en=>[...en]),rt=Pe[V][J];return Pe[ce][se]=rt,Pe[V][J]=null,Dc(Pe,ee)},TT=(V,J,ce,se,ee,Re)=>{const Pe=V==="blue"?-1:1,rt=V==="blue"?6:1;if(!l1(se,ee)||V==="blue"&&se>=J||V==="red"&&se<=J)return!1;const en=Math.abs(se-J),yn=Math.abs(ee-ce);if((en===1&&yn===0||en===2&&yn===0&&J===rt||en===1&&yn===1)&&en<=2&&yn<=1&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("[DEBUG] Pawn move check:",{color:V,from:`${J},${ce}`,to:`${se},${ee}`}),ce===ee&&se===J+Pe)return Re[se][ee]===null;if(ce===ee&&J===rt&&se===J+2*Pe)return Re[J+Pe][ce]===null&&Re[se][ee]===null;if(Math.abs(ce-ee)===1&&se===J+Pe){const qt=Re[se][ee];return qt!==null&&Xt(qt)!==V}if(Math.abs(ce-ee)===1&&se===J+Pe){const qt=Re[J][ee];if(qt&&Xt(qt)!==V&&qt.toLowerCase()==="p"&&F.lastPawnDoubleMove&&F.lastPawnDoubleMove.row===J&&F.lastPawnDoubleMove.col===ee)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},hm=(V,J,ce,se,ee)=>V!==ce&&J!==se?!1:fm(V,J,ce,se,ee),gb=(V,J,ce,se)=>{const ee=Math.abs(V-ce),Re=Math.abs(J-se);return ee===2&&Re===1||ee===1&&Re===2},fd=(V,J,ce,se,ee)=>Math.abs(V-ce)!==Math.abs(J-se)?!1:fm(V,J,ce,se,ee),mb=(V,J,ce,se,ee)=>hm(V,J,ce,se,ee)||fd(V,J,ce,se,ee),d1=(V,J,ce,se,ee)=>{const Re=Math.abs(J-se),Pe=Math.abs(ce-ee);if(Re<=1&&Pe<=1)return!0;if(Re===0&&Pe===2){if(V==="blue"&&!F.blueKingMoved){if(ee===6&&!F.blueRooksMove.right||ee===2&&!F.blueRooksMove.left)return!0}else if(V==="red"&&!F.redKingMoved&&(ee===6&&!F.redRooksMove.right||ee===2&&!F.redRooksMove.left))return!0}return!1},fm=(V,J,ce,se,ee)=>{const Re=V===ce?0:(ce-V)/Math.abs(ce-V),Pe=J===se?0:(se-J)/Math.abs(se-J);let rt=V+Re,en=J+Pe;for(;rt!==ce||en!==se;){if(ee[rt][en]!==null)return!1;rt+=Re,en+=Pe}return!0},$a=(V,J,ce,se,ee,Re=!0,Pe=Xt(V),rt=o,en=!1)=>{if(!l1(se,ee))return en||console.log("[ILLEGAL MOVE] Out of board:",{piece:V,startRow:J,startCol:ce,endRow:se,endCol:ee}),!1;const yn=rt[se][ee];if(yn&&Xt(yn)===Pe)return en||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:V,startRow:J,startCol:ce,endRow:se,endCol:ee}),!1;const Fn=V.toLowerCase();let qt=!1;switch(Fn){case"p":qt=TT(Pe,J,ce,se,ee,rt);break;case"r":qt=hm(J,ce,se,ee,rt);break;case"n":qt=gb(J,ce,se,ee);break;case"b":qt=fd(J,ce,se,ee,rt);break;case"q":qt=mb(J,ce,se,ee,rt);break;case"k":qt=d1(Pe,J,ce,se,ee);break}return qt?qt&&Re&&u1(J,ce,se,ee,Pe,rt)?(en||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:V,startRow:J,startCol:ce,endRow:se,endCol:ee}),!1):qt:(en||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:V,startRow:J,startCol:ce,endRow:se,endCol:ee,playerColor:Pe,pieceType:Fn,targetPiece:rt[se][ee],targetPieceColor:rt[se][ee]?Xt(rt[se][ee]):null}),!1)},pm=(V,J=o,ce=c)=>{const se=[],ee=J[V.row][V.col];if(!ee||Xt(ee)!==ce)return se;const Re=ee.toLowerCase();if(Re==="p"){const Pe=ce==="blue"?-1:1,rt=ce==="blue"?6:1,en=V.row+Pe;if(en>=0&&en<8&&$a(ee,V.row,V.col,en,V.col,!0,ce,J,!0)&&se.push({row:en,col:V.col}),V.row===rt){const yn=V.row+2*Pe;yn>=0&&yn<8&&$a(ee,V.row,V.col,yn,V.col,!0,ce,J,!0)&&se.push({row:yn,col:V.col})}for(const yn of[-1,1]){const Fn=V.col+yn,qt=V.row+Pe;Fn>=0&&Fn<8&&qt>=0&&qt<8&&$a(ee,V.row,V.col,qt,Fn,!0,ce,J,!0)&&se.push({row:qt,col:Fn})}}else if(Re==="n"){const Pe=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[rt,en]of Pe){const yn=V.row+rt,Fn=V.col+en;yn>=0&&yn<8&&Fn>=0&&Fn<8&&$a(ee,V.row,V.col,yn,Fn,!0,ce,J,!0)&&se.push({row:yn,col:Fn})}}else for(let Pe=0;Pe<8;Pe++)for(let rt=0;rt<8;rt++)$a(ee,V.row,V.col,Pe,rt,!0,ce,J,!0)&&se.push({row:Pe,col:rt});return se},gm=(V,J=o)=>{if(!Dc(J,V))return!1;for(let ce=0;ce<8;ce++)for(let se=0;se<8;se++){const ee=J[ce][se];if(ee&&Xt(ee)===V&&pm({row:ce,col:se},J,V).length>0)return!1}return!0},h1=(V,J=o)=>{if(Dc(J,V))return!1;for(let ce=0;ce<8;ce++)for(let se=0;se<8;se++){const ee=J[ce][se];if(ee&&Xt(ee)===V&&pm({row:ce,col:se},J,V).length>0)return!1}return!0},xi=(V,J)=>{if(h!=="active"||le.current)return;const ce=o[V][J],se=ce?Xt(ce):null;if(u&&S.some(ee=>ee.row===V&&ee.col===J)){Lc(u,{row:V,col:J});return}if(ce&&se===c){const ee=pm({row:V,col:J});d({row:V,col:J}),x(ee);return}d(null),x([])},Lc=(V,J,ce=!1)=>{const se=o[V.row][V.col];if(console.log("[MOVE ATTEMPT]",{from:V,to:J,piece:se,isAIMove:ce,board:JSON.parse(JSON.stringify(o)),moveHistory:w}),!!se){if(se.toLowerCase()==="p"&&(Xt(se)==="blue"&&J.row===0||Xt(se)==="red"&&J.row===7)){R({from:V,to:J}),G(!0);return}LT(V,J,"q",ce)}};re.current=Lc;const f1=D.useCallback((V,J,ce=!1)=>{Sr(!0);const se=o.map(Pe=>[...Pe]),ee=se[V.row][V.col];if(!ee)return;se[J.row][J.col]=ee,se[V.row][V.col]=null,OT(se,V,J,ee);const Re=kT(V,J);if(v(Pe=>{const rt=[...Pe,Re];return console.log("[MOVE HISTORY UPDATED]",rt),rt}),I({from:V,to:J}),d(null),x([]),w.length<10&&!ce){const Pe=rz(se,c==="blue"?"red":"blue");Gt(Pe).then(rt=>{rt&&rt.moves&&rt.moves.length>0&&(Vo(rt.moves.slice(0,3)),nr(!0),setTimeout(()=>nr(!1),5e3))})}DT(V,J,ee),l(Pe=>{const rt=Pe==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",rt),p1(se,rt),rt}),p1(se,c==="blue"?"red":"blue"),a(se),le.current=!1,Z.current=!1,oe.current=!1,Sr(!1)},[o,c,w,Gt]);D.useEffect(()=>{if(!le.current&&s==="ai"&&c==="red"&&!Z.current&&!Wl)if(le.current=!0,p==="easy")setTimeout(()=>{const V=Ba(o);V?Lc(V.from,V.to,!0):le.current=!1},600);else{m("AI is calculating...");const V=rz(o,c);if(oe.current)return;oe.current=!0,fetch("https://chess.lawb.xyz/api/stockfish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:V,difficulty:p,movetime:3e3})}).then(ce=>{if(ce.ok)return ce.json();throw new Error("API call failed")}).then(ce=>{console.log("[DEBUG] Stockfish API response:",ce);const se=ce.bestmove||ce.move;if(se&&se!=="(none)"&&se.length===4){const ee=se.charCodeAt(0)-97,Re=parseInt(se[1]),Pe=se.charCodeAt(2)-97,rt=parseInt(se[3]),en=8-Re,yn=8-rt;if(console.log("[DEBUG] Parsed move:",{fromCol:ee,fromRowStockfish:Re,toCol:Pe,toRowStockfish:rt,fromRow:en,toRow:yn}),ee>=0&&ee<8&&en>=0&&en<8&&Pe>=0&&Pe<8&&yn>=0&&yn<8){const Fn={from:{row:en,col:ee},to:{row:yn,col:Pe}},qt=o[en][ee];if(console.log("[DEBUG] Move validation:",{piece:qt,moveObj:Fn,isValid:qt&&Xt(qt)==="red"&&$a(qt,en,ee,yn,Pe,!0,"red",o)}),qt&&Xt(qt)==="red"&&$a(qt,en,ee,yn,Pe,!0,"red",o))console.log("[DEBUG] Executing Stockfish move:",Fn),Lc(Fn.from,Fn.to,!0);else{console.warn("[DEBUG] Invalid Stockfish move, falling back to random");const xf=Ba(o);xf&&Lc(xf.from,xf.to,!0),le.current=!1,oe.current=!1}}else{console.warn("[DEBUG] Invalid move coordinates, falling back to random");const Fn=Ba(o);Fn&&Lc(Fn.from,Fn.to,!0),le.current=!1,oe.current=!1}}else{console.warn("[DEBUG] Invalid move format from API, falling back to random");const ee=Ba(o);ee&&Lc(ee.from,ee.to,!0),le.current=!1,oe.current=!1}}).catch(ce=>{console.error("[DEBUG] Stockfish API error:",ce),m("AI error. Falling back to random moves.");const se=Ba(o);se&&Lc(se.from,se.to,!0),le.current=!1,oe.current=!1})}},[c,s,p,o,F,Se]);const p1=(V,J)=>{console.log("Checking game end for player:",J);const ce=V.some(ee=>ee.some(Re=>Re==="k")),se=V.some(ee=>ee.some(Re=>Re==="K"));if(!ce)return console.log("[GAME END] KING CAPTURED - Red wins!"),f("checkmate"),m("King captured! Red wins!"),dm("loss"),Ae(!0),setTimeout(()=>Ae(!1),3e3),"checkmate";if(!se)return console.log("[GAME END] KING CAPTURED - Blue wins!"),f("checkmate"),m("King captured! You win!"),dm("win"),Ae(!0),setTimeout(()=>Ae(!1),3e3),"checkmate";if(console.log("Is king in check:",Dc(V,J)),gm(J,V)){console.log("[GAME END] CHECKMATE",{winner:J==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(V)),moveHistory:w}),f("checkmate");const ee=J==="blue"?"red":"blue";return ee==="blue"?(m("Checkmate! You win!"),If("checkmate"),MT(!0),qU(),dm("win"),Ae(!0),setTimeout(()=>Ae(!1),3e3)):(m(`Checkmate! ${ee==="red"?"AI":"Opponent"} wins!`),If("checkmate"),w1(!0),dm("loss"),Ae(!0),setTimeout(()=>Ae(!1),3e3)),"checkmate"}return h1(J,V)?(console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(V)),moveHistory:w}),f("stalemate"),m("Stalemate! Game is a draw."),dm("draw"),Ae(!0),setTimeout(()=>Ae(!1),3e3),"stalemate"):(Dc(V,J)?(console.log("CHECK detected!"),If("check"),m(`${J==="blue"?"Blue":"Red"} is in check!`)):m("Your turn"),null)},Ba=V=>{const J=[];for(let ee=0;ee<8;ee++)for(let Re=0;Re<8;Re++){const Pe=V[ee][Re];Pe&&Xt(Pe)==="red"&&J.push({row:ee,col:Re})}for(let ee=J.length-1;ee>0;ee--){const Re=Math.floor(Math.random()*(ee+1));[J[ee],J[Re]]=[J[Re],J[ee]]}const ce=[],se=[];for(const ee of J){const Re=pm(ee,V,"red");for(const Pe of Re){const rt=V[Pe.row][Pe.col];if(rt&&Xt(rt)==="blue"){const yn={p:100,n:320,b:330,r:500,q:900,k:2e4}[rt.toLowerCase()]||0;ce.push({from:ee,to:Pe,value:yn})}else se.push({from:ee,to:Pe})}}if(ce.length>0&&Math.random()<.3){ce.sort((ee,Re)=>ee.value-Re.value);for(const ee of ce){const Re=V.map(rt=>[...rt]),Pe=Re[ee.from.row][ee.from.col];if(Re[ee.to.row][ee.to.col]=Pe,Re[ee.from.row][ee.from.col]=null,!Dc(Re,"red"))return{from:ee.from,to:ee.to}}}for(const ee of se){const Re=V.map(rt=>[...rt]),Pe=Re[ee.from.row][ee.from.col];if(Re[ee.to.row][ee.to.col]=Pe,Re[ee.from.row][ee.from.col]=null,!Dc(Re,"red"))return ee}ce.sort((ee,Re)=>ee.value-Re.value);for(const ee of ce){const Re=V.map(rt=>[...rt]),Pe=Re[ee.from.row][ee.from.col];if(Re[ee.to.row][ee.to.col]=Pe,Re[ee.from.row][ee.from.col]=null,!Dc(Re,"red"))return{from:ee.from,to:ee.to}}return null},RT=()=>{a(JSON.parse(JSON.stringify(nz))),l("blue"),d(null),f("active"),v([]),x([]),I(null),O(!1),m("Select game mode"),q({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),Ua(Ko()),le.current&&(le.current=!1)},Fa=()=>{if(yb(),console.log("[DEBUG] startGame called, difficulty:",p,"gameMode:",s),s==="online"){O(!1),de(!1);return}O(!0),de(!1),m("Game started! Your turn");const V=Ko();Ua(V),console.log("[DEBUG] Game started with chessboard:",V)},Gl=V=>`${V.slice(0,6)}...${V.slice(-4)}`,g1=(V,J)=>{const ce=o[V][J],se=(u==null?void 0:u.row)===V&&(u==null?void 0:u.col)===J,ee=S.some(Pe=>Pe.row===V&&Pe.col===J),Re=T&&(T.from.row===V&&T.from.col===J||T.to.row===V&&T.to.col===J);return b.jsxs("div",{className:`square ${se?"selected":""} ${ee?"legal-move":""} ${Re?"last-move":""}`,onClick:()=>xi(V,J),children:[ce&&b.jsx("div",{className:"piece",style:{backgroundImage:MA[ce]?`url(${MA[ce]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),ee&&b.jsx("div",{className:"legal-move-indicator"})]},`${V}-${J}`)},PT=()=>{if(!B||!W)return null;const V=c==="blue"?["q","r","b","n"]:["Q","R","B","N"];return b.jsx("div",{className:"promotion-dialog",children:b.jsxs("div",{className:"promotion-content",children:[b.jsx("h3",{children:"Choose promotion piece:"}),b.jsx("div",{className:"promotion-pieces",children:V.map(J=>b.jsx("div",{className:"promotion-piece",onClick:()=>{LT(W.from,W.to,J),G(!1),R(null)},style:{backgroundImage:MA[J]?`url(${MA[J]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},J))})]})})},[mm,m1]=D.useState(null),y1=(V=!1,J="Click a piece to learn more about it.")=>b.jsxs("div",{className:`piece-gallery${V?" piece-gallery-sm":""}`,children:[b.jsx("h3",{children:"Lawbstation Chess Pieces"}),b.jsx("div",{className:"piece-gallery-grid",children:IGe.map(ce=>b.jsxs("div",{className:"piece-gallery-item",onClick:()=>{m1(mm===ce.key?null:ce.key)},children:[b.jsx("img",{src:ce.img,alt:ce.name,className:"piece-gallery-img"}),b.jsx("div",{className:"piece-gallery-name",children:ce.name}),mm===ce.key&&b.jsx("div",{className:"piece-gallery-desc",children:ce.desc})]},ce.key))}),b.jsx("div",{className:"piece-gallery-tip",children:J})]}),ym=()=>b.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:b.jsx("div",{className:"difficulty-controls-col",children:b.jsxs("div",{className:"difficulty-selection-panel",style:{background:"#fff",borderRadius:12,padding:"32px 24px",boxShadow:"0 4px 32px rgba(0,0,0,0.12)",textAlign:"center"},children:[b.jsx("h2",{style:{fontWeight:700,letterSpacing:1,fontSize:"2rem",color:"#0a2a7a",marginBottom:16},children:"Start a New Game"}),b.jsxs("p",{style:{fontSize:"1.1rem",color:"#333",marginBottom:24},children:["Challenge the LawbBot AI to a chess match.",b.jsx("br",{}),"Good luck, have fun!"]}),b.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24},children:[b.jsx("button",{className:`difficulty-btn${p==="easy"?" selected":""}`,style:{background:p==="easy"?"#44c0ff":"#eee",color:p==="easy"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="easy"?"0 2px 8px #44c0ff44":"none"},onClick:()=>g("easy"),children:"Easy"}),b.jsx("button",{className:`difficulty-btn${p==="hard"?" selected":""}`,style:{background:p==="hard"?"#0a2a7a":"#eee",color:p==="hard"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="hard"?"0 2px 8px #0a2a7a44":"none"},onClick:()=>g("hard"),children:"Hard"})]}),b.jsxs("button",{className:"difficulty-btn start-btn",onClick:()=>{Fa()},style:{background:"linear-gradient(90deg, #0a2a7a 0%, #44c0ff 100%)",color:"white",fontWeight:"bold",fontSize:"1.3em",padding:"18px 48px",borderRadius:8,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",border:"none",cursor:"pointer",letterSpacing:1,marginBottom:8},children:[b.jsx("span",{role:"img","aria-label":"chess",children:"♟️"})," Start Game"]})]})})}),OT=(V,J,ce,se)=>{if(se.toLowerCase()==="p"&&(Xt(se)==="blue"&&ce.row===0||Xt(se)==="red"&&ce.row===7)){const ee=Xt(se)==="blue"?"q":"Q";V[ce.row][ce.col]=ee}if(se.toLowerCase()==="k"&&Math.abs(J.col-ce.col)===2){if(ce.col===6)V[J.row][7]=null,V[J.row][5]=Xt(se)==="blue"?"r":"R";else if(ce.col===2){const ee=V[J.row][3];V[J.row][0]=null,V[J.row][3]=Xt(se)==="blue"?"r":"R",ee&&ee.toLowerCase()==="q"&&(V[J.row][4]=ee)}}},kT=(V,J,ce,se)=>{const ee=NT(V.row,V.col),Re=NT(J.row,J.col);return`${ee}-${Re}`},DT=(V,J,ce)=>{const se={...F};ce.toLowerCase()==="k"?Xt(ce)==="blue"?se.blueKingMoved=!0:se.redKingMoved=!0:ce.toLowerCase()==="r"&&(Xt(ce)==="blue"?(V.col===0&&(se.blueRooksMove.left=!0),V.col===7&&(se.blueRooksMove.right=!0)):(V.col===0&&(se.redRooksMove.left=!0),V.col===7&&(se.redRooksMove.right=!0))),ce.toLowerCase()==="p"&&Math.abs(V.row-J.row)===2?se.lastPawnDoubleMove={row:J.row,col:J.col}:se.lastPawnDoubleMove=null,q(se)},LT=(V,J,ce="q",se=!1)=>{o[V.row][V.col];const Re=o[J.row][J.col]!==null;if(If(Re?"capture":"move"),Re){M({row:J.row,col:J.col,show:!0}),setTimeout(()=>{f1(V,J,se),M(null)},500);return}f1(V,J,se)},If=V=>{if(!Ii)return;let J="";switch(V){case"move":J="/images/move.mp3";break;case"capture":J="/images/capture.mp3";break;case"check":J="/images/play.mp3";break;case"checkmate":J="/images/victory.mp3";break;case"victory":J="/images/victory.mp3";break;default:J="/images/move.mp3"}new Audio(J).play().catch(()=>{})},qU=()=>{if(Hl){If("victory");for(let V=0;V<50;V++)setTimeout(()=>{const J=document.createElement("div");J.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(J),setTimeout(()=>J.remove(),3e3)},V*100);setTimeout(()=>Bn(!1),5e3)}},[VU,MT]=D.useState(!1),[KU,w1]=D.useState(!1),ql=()=>{MT(!1),w1(!1)},Vl=()=>{ql(),RT()},Mc=()=>{ql(),O(!1)},yb=()=>{new Audio("/images/start.mp3").play().catch(()=>{})},Mr=s==="online";return b.jsxs("div",{className:`chess-game${n?" fullscreen":""}${tt?" chess-dark-mode":""}`,children:[!n&&b.jsxs("div",{className:"chess-header",children:[b.jsx("h2",{children:"Lawb Chess"}),b.jsxs("div",{className:"chess-controls",children:[e&&b.jsx("button",{onClick:e,children:"_"}),b.jsx("button",{onClick:t,children:"×"})]})]}),b.jsxs("div",{className:"game-stable-layout",children:[b.jsxs("div",{className:"left-sidebar",children:[b.jsxs("div",{className:"leaderboard-compact",children:[b.jsx("h3",{children:"Leaderboard"}),b.jsx("div",{className:"leaderboard-table-compact",children:b.jsxs("table",{children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{children:"Rank"}),b.jsx("th",{children:"Player"}),b.jsx("th",{children:"Pts"})]})}),b.jsx("tbody",{children:Array.isArray(A)&&A.slice(0,8).map((V,J)=>{if(typeof V=="object"&&V!==null&&"username"in V&&"wins"in V&&"losses"in V&&"draws"in V&&"points"in V){const ce=V;return b.jsxs("tr",{children:[b.jsx("td",{children:J+1}),b.jsx("td",{children:Gl(ce.username)}),b.jsx("td",{children:ce.points})]},ce.username)}return null})})]})})]}),k&&b.jsxs("div",{className:"move-history-compact",children:[b.jsx("div",{className:"move-history-title",children:"Moves"}),b.jsx("ul",{className:"move-history-list-compact",children:w.slice().reverse().map((V,J)=>b.jsx("li",{children:V},w.length-1-J))})]})]}),b.jsxs("div",{className:"center-area",children:[k&&b.jsxs("div",{className:"game-info-compact",children:[b.jsxs("span",{className:c==="blue"?"current-blue":"current-red",children:[c==="blue"?"Blue":"Red"," to move"]}),s===zO.AI&&b.jsxs("span",{className:"mode-play",children:[p==="easy"?"Easy":"Hard"," AI"]}),Mr&&b.jsxs("span",{className:"wager-display",children:["Wager: ",L," ETH"]})]}),k?b.jsxs("div",{className:"chess-main-area",children:[b.jsx("div",{className:"chessboard-container",children:b.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${Bs})`},children:[Array.from({length:8},(V,J)=>b.jsx("div",{className:"board-row",children:Array.from({length:8},(ce,se)=>g1(J,se))},J)),N&&N.show&&b.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${N.row*12.5}%`,left:`${N.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:b.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),b.jsxs("div",{className:"game-controls-compact",children:[b.jsx("button",{onClick:Vl,children:"New Game"}),b.jsx("button",{onClick:Mc,children:"Menu"})]})]}):he?ym():Mr?b.jsx(Hte,{onClose:t,onMinimize:e,fullscreen:n}):b.jsxs("div",{className:"game-mode-panel-streamlined",children:[b.jsxs("div",{className:"mode-selection-compact",children:[b.jsx("button",{className:`mode-btn-compact ${s==="ai"?"selected":""}`,onClick:()=>i("ai"),children:"VS AI"}),b.jsx("button",{className:`mode-btn-compact ${Mr?"selected":""}`,onClick:()=>i("online"),children:"PvP"})]}),s===zO.AI&&b.jsx("button",{className:"start-btn-compact",onClick:()=>de(!0),children:"Start Game"}),Mr&&b.jsxs("div",{className:"pvp-info",children:[b.jsx("p",{children:"Challenge other players with ETH wagers"}),b.jsx("p",{children:"Create or join games instantly"})]}),b.jsxs("div",{className:"help-section-compact",children:[b.jsx("h4",{children:"How to Play"}),b.jsxs("div",{className:"help-content",children:[b.jsxs("p",{children:[b.jsx("strong",{children:"Chess:"})," Capture your opponent's king. Each piece moves uniquely - pawns forward, knights in L-shapes, bishops diagonally, rooks horizontally/vertically, queens in all directions, kings one square at a time."]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Multiplayer:"})," Connect your wallet to play PvP games with ETH wagers. Win games to claim your opponent's wager and climb the leaderboard."]}),b.jsxs("p",{children:[b.jsx("strong",{children:"AI Mode:"})," Practice against our LawbBot AI. Choose Easy or Hard difficulty. Wins earn points on the leaderboard."]})]})]})]})]}),b.jsx("div",{className:"right-sidebar",children:b.jsx("div",{className:"piece-gallery-panel",children:y1(!0)})})]}),be&&b.jsx("div",{className:"gallery-modal-overlay",onClick:()=>We(!1),children:b.jsxs("div",{className:"gallery-modal",onClick:V=>V.stopPropagation(),children:[b.jsx("button",{className:"close-modal-btn",onClick:()=>We(!1),children:"×"}),y1(!1)]})}),PT(),_e&&b.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"}),VU&&Hl&&b.jsxs("div",{className:"victory-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)"},children:[b.jsx("div",{className:"balloons-container"}),b.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:"320px",height:"auto",zIndex:2}}),b.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24},children:[b.jsx("button",{onClick:Vl,children:"New Game"}),b.jsx("button",{onClick:Mc,children:"Back to Menu"})]})]}),KU&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"blood-overlay",children:[0,1,2,3,4,5].map(V=>b.jsx("div",{className:"blood-drip",style:{left:`${10+V*14}%`,animationDelay:`${.5+V*.3}s`,background:"linear-gradient(to bottom, #a80000 0%, #d10000 80%, #5a0000 100%)",width:`${14+Math.random()*10}px`,height:`${50+Math.random()*30}px`,opacity:.85+Math.random()*.1}},V))}),b.jsxs("div",{className:"defeat-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)",pointerEvents:"none"},children:[b.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:"320px",height:"auto",zIndex:2}}),b.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24,pointerEvents:"none"},children:[b.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:Vl,children:"New Game"}),b.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:Mc,children:"Back to Menu"})]})]})]})]})};function rz(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const sz=()=>{const[t,e]=D.useState("singleplayer"),n=()=>{window.location.href="/"};return b.jsx("div",{className:"chess-page",children:b.jsx("div",{className:"chess-content",children:t==="singleplayer"?b.jsx(TGe,{onClose:n}):b.jsx(Hte,{onClose:n,onMinimize:()=>{},fullscreen:!1})})})},RGe=new Qye,PGe=typeof window<"u"&&window.location.hostname.startsWith("chess."),OGe=()=>sFe("(max-width: 768px)")?b.jsx(rFe,{}):b.jsx(Y4e,{});c2.createRoot(document.getElementById("root")).render(b.jsx(Do.StrictMode,{children:b.jsx(hye,{config:YX.wagmiConfig,children:b.jsx(gwe,{client:RGe,children:b.jsx(V4e,{children:b.jsx(H4e,{children:PGe?b.jsx(yS,{path:"/*",element:b.jsx(sz,{})}):b.jsxs(b.Fragment,{children:[b.jsx(yS,{path:"/",element:b.jsx(OGe,{})}),b.jsx(yS,{path:"/chess",element:b.jsx(sz,{})})]})})})})})}));export{iVe as $,Qe as A,pt as B,je as C,at as D,Yv as E,SD as F,fv as G,lc as H,_1e as I,Tn as J,cVe as K,v3 as L,us as M,w1e as N,ve as O,Ed as P,fS as Q,Mt as R,pc as S,Hi as T,X1e as U,Zv as V,Ps as W,rVe as X,ls as Y,Wg as Z,ul as _,gS as a,bX as a0,E3 as a1,S0 as a2,Ks as a3,XGe as a4,Mu as a5,Dl as a6,t_ as a7,nt as a8,jr as a9,yz as aA,HGe as aB,$E as aC,Rde as aD,eye as aE,ka as aF,Pa as aG,hK as aH,Xpe as aI,jd as aa,iK as ab,mN as ac,ge as ad,HL as ae,Yr as af,Whe as ag,uN as ah,tM as ai,Khe as aj,PC as ak,xa as al,Cf as am,zv as an,kl as ao,_ke as ap,Gqe as aq,bF as ar,QJ as as,hke as at,Cke as au,qqe as av,Hqe as aw,JN as ax,Yqe as ay,Vqe as az,Pn as b,ze as c,ot as d,z as e,ir as f,Uu as g,aVe as h,Gu as i,Po as j,gt as k,Gi as l,o2e as m,bl as n,d8e as o,Je as p,hl as q,oVe as r,gn as s,xQ as t,er as u,n4 as v,qo as w,nVe as x,ti as y,Xs as z};
