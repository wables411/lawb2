const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedded-wallet-DbxUrmpN.js","assets/if-defined-C4FWYFZz.js","assets/index-C8f7MoU9.js","assets/index-DdxWbKq6.js","assets/ref-9xRTvjsB.js","assets/index-CFQxqCGg.js","assets/index-Cm_WesBI.js","assets/index-Byc9fvK6.js","assets/index-BvjV6dkQ.js","assets/index-CN0MuPmz.js","assets/index-dTGv7tF1.js","assets/index-CF-nELmB.js","assets/email-CaZ04-MP.js","assets/index-DLh9iH6h.js","assets/socials-T5st5Upi.js","assets/index-D17fTMxb.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-BwvWLo4W.js","assets/index-DISOMXhI.js","assets/index-BM3rqAq4.js","assets/index-BL4zNzQ7.js","assets/swaps-DqnOegWI.js","assets/index-Bv_MN35o.js","assets/index-04e7mCDY.js","assets/index-2aomR-wI.js","assets/send-ChcSmmux.js","assets/index-ByohNKYx.js","assets/index-Ci3a0Lwk.js","assets/receive-CVFWNl1e.js","assets/index-CmCi_h2T.js","assets/onramp-PjRiCHN6.js","assets/index-C-0EOL55.js","assets/index-hlKWVO1h.js","assets/index-BmJE7ss_.js","assets/transactions-BYi89wqR.js","assets/index-DyHKCzox.js","assets/index-hJqAe3Xm.js","assets/index-Dccq-5rK.js","assets/index-CqtnjllB.js","assets/index-G0K9Ykhk.js","assets/w3m-modal-CcD5rXM0.js"])))=>i.map(i=>d[i]);
var Fne=Object.defineProperty;var SB=t=>{throw TypeError(t)};var jne=(t,e,n)=>e in t?Fne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var se=(t,e,n)=>jne(t,typeof e!="symbol"?e+"":e,n),sR=(t,e,n)=>e.has(t)||SB("Cannot "+n);var _=(t,e,n)=>(sR(t,e,"read from private field"),n?n.call(t):e.get(t)),Y=(t,e,n)=>e.has(t)?SB("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),L=(t,e,n,r)=>(sR(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),de=(t,e,n)=>(sR(t,e,"access private method"),n);var yd=(t,e,n,r)=>({set _(s){L(t,e,s,n)},get _(){return _(t,e,r)}});function Wne(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var hl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function jW(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var WW={exports:{}},GI={},zW={exports:{}},Zt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C_=Symbol.for("react.element"),zne=Symbol.for("react.portal"),Hne=Symbol.for("react.fragment"),Gne=Symbol.for("react.strict_mode"),qne=Symbol.for("react.profiler"),Vne=Symbol.for("react.provider"),Kne=Symbol.for("react.context"),Yne=Symbol.for("react.forward_ref"),Qne=Symbol.for("react.suspense"),Jne=Symbol.for("react.memo"),Zne=Symbol.for("react.lazy"),xB=Symbol.iterator;function Xne(t){return t===null||typeof t!="object"?null:(t=xB&&t[xB]||t["@@iterator"],typeof t=="function"?t:null)}var HW={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},GW=Object.assign,qW={};function Gw(t,e,n){this.props=t,this.context=e,this.refs=qW,this.updater=n||HW}Gw.prototype.isReactComponent={};Gw.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Gw.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function VW(){}VW.prototype=Gw.prototype;function T5(t,e,n){this.props=t,this.context=e,this.refs=qW,this.updater=n||HW}var R5=T5.prototype=new VW;R5.constructor=T5;GW(R5,Gw.prototype);R5.isPureReactComponent=!0;var IB=Array.isArray,KW=Object.prototype.hasOwnProperty,P5={current:null},YW={key:!0,ref:!0,__self:!0,__source:!0};function QW(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)KW.call(e,r)&&!YW.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:C_,type:t,key:i,ref:o,props:s,_owner:P5.current}}function ere(t,e){return{$$typeof:C_,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function O5(t){return typeof t=="object"&&t!==null&&t.$$typeof===C_}function tre(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var NB=/\/+/g;function iR(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tre(""+t.key):e.toString(36)}function XA(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case C_:case zne:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+iR(o,0):r,IB(s)?(n="",t!=null&&(n=t.replace(NB,"$&/")+"/"),XA(s,e,n,"",function(l){return l})):s!=null&&(O5(s)&&(s=ere(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(NB,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",IB(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+iR(i,a);o+=XA(i,e,n,c,s)}else if(c=Xne(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+iR(i,a++),o+=XA(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function k1(t,e,n){if(t==null)return t;var r=[],s=0;return XA(t,r,"","",function(i){return e.call(n,i,s++)}),r}function nre(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ii={current:null},eS={transition:null},rre={ReactCurrentDispatcher:Ii,ReactCurrentBatchConfig:eS,ReactCurrentOwner:P5};function JW(){throw Error("act(...) is not supported in production builds of React.")}Zt.Children={map:k1,forEach:function(t,e,n){k1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return k1(t,function(){e++}),e},toArray:function(t){return k1(t,function(e){return e})||[]},only:function(t){if(!O5(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Zt.Component=Gw;Zt.Fragment=Hne;Zt.Profiler=qne;Zt.PureComponent=T5;Zt.StrictMode=Gne;Zt.Suspense=Qne;Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rre;Zt.act=JW;Zt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=GW({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=P5.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)KW.call(e,c)&&!YW.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:C_,type:t.type,key:s,ref:i,props:r,_owner:o}};Zt.createContext=function(t){return t={$$typeof:Kne,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Vne,_context:t},t.Consumer=t};Zt.createElement=QW;Zt.createFactory=function(t){var e=QW.bind(null,t);return e.type=t,e};Zt.createRef=function(){return{current:null}};Zt.forwardRef=function(t){return{$$typeof:Yne,render:t}};Zt.isValidElement=O5;Zt.lazy=function(t){return{$$typeof:Zne,_payload:{_status:-1,_result:t},_init:nre}};Zt.memo=function(t,e){return{$$typeof:Jne,type:t,compare:e===void 0?null:e}};Zt.startTransition=function(t){var e=eS.transition;eS.transition={};try{t()}finally{eS.transition=e}};Zt.unstable_act=JW;Zt.useCallback=function(t,e){return Ii.current.useCallback(t,e)};Zt.useContext=function(t){return Ii.current.useContext(t)};Zt.useDebugValue=function(){};Zt.useDeferredValue=function(t){return Ii.current.useDeferredValue(t)};Zt.useEffect=function(t,e){return Ii.current.useEffect(t,e)};Zt.useId=function(){return Ii.current.useId()};Zt.useImperativeHandle=function(t,e,n){return Ii.current.useImperativeHandle(t,e,n)};Zt.useInsertionEffect=function(t,e){return Ii.current.useInsertionEffect(t,e)};Zt.useLayoutEffect=function(t,e){return Ii.current.useLayoutEffect(t,e)};Zt.useMemo=function(t,e){return Ii.current.useMemo(t,e)};Zt.useReducer=function(t,e,n){return Ii.current.useReducer(t,e,n)};Zt.useRef=function(t){return Ii.current.useRef(t)};Zt.useState=function(t){return Ii.current.useState(t)};Zt.useSyncExternalStore=function(t,e,n){return Ii.current.useSyncExternalStore(t,e,n)};Zt.useTransition=function(){return Ii.current.useTransition()};Zt.version="18.3.1";zW.exports=Zt;var k=zW.exports;const Wo=Qg(k),sre=Wne({__proto__:null,default:Wo},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ire=k,ore=Symbol.for("react.element"),are=Symbol.for("react.fragment"),cre=Object.prototype.hasOwnProperty,lre=ire.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ure={key:!0,ref:!0,__self:!0,__source:!0};function ZW(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)cre.call(e,r)&&!ure.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:ore,type:t,key:i,ref:o,props:s,_owner:lre.current}}GI.Fragment=are;GI.jsx=ZW;GI.jsxs=ZW;WW.exports=GI;var y=WW.exports,TB={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XW={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ae=function(t,e){if(!t)throw qw(e)},qw=function(t){return new Error("Firebase Database ("+XW.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ez=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},dre=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},k5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ez(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dre(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||d==null)throw new hre;const h=i<<2|a>>4;if(r.push(h),l!==64){const f=a<<4&240|l>>2;if(r.push(f),d!==64){const p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class hre extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tz=function(t){const e=ez(t);return k5.encodeByteArray(e,!0)},VS=function(t){return tz(t).replace(/\./g,"")},l2=function(t){try{return k5.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fre(t){return nz(void 0,t)}function nz(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!pre(n)||(t[n]=nz(t[n],e[n]));return t}function pre(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gre(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mre=()=>gre().__FIREBASE_DEFAULTS__,yre=()=>{if(typeof process>"u"||typeof TB>"u")return;const t=TB.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},wre=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&l2(t[1]);return e&&JSON.parse(e)},rz=()=>{try{return mre()||yre()||wre()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},bre=t=>{var e,n;return(n=(e=rz())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},vre=t=>{const e=bre(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},sz=()=>{var t;return(t=rz())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ere(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[VS(JSON.stringify(n)),VS(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cre(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iz(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cre())}function _re(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Are(){return XW.NODE_ADMIN===!0}function Sre(){try{return typeof indexedDB=="object"}catch{return!1}}function xre(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ire="FirebaseError";class __ extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Ire,Object.setPrototypeOf(this,__.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oz.prototype.create)}}class oz{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Nre(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new __(s,a,r)}}function Nre(t,e){return t.replace(Tre,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Tre=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(t){return JSON.parse(t)}function Yr(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const az=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=bE(l2(i[0])||""),n=bE(l2(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},Rre=function(t){const e=az(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Pre=function(t){const e=az(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ew(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function RB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function KS(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function u2(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(PB(i)&&PB(o)){if(!u2(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function PB(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ore(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kre{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^i&(o^a),u=1518500249):(l=i^o^a,u=1859775393):d<60?(l=i&o|a&(i|o),u=2400959708):(l=i^o^a,u=3395469782);const h=(s<<5|s>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function D5(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dre=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,Ae(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},VI=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(t){return t&&t._delegate?t._delegate:t}class vE{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mre{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new qI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ure(e))try{this.getOrInitializeService({instanceIdentifier:Kf})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Kf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Kf){return this.instances.has(e)}getOptions(e=Kf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Lre(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Kf){return this.component?this.component.multipleInstances?e:Kf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Lre(t){return t===Kf?void 0:t}function Ure(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bre{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Mre(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Zn||(Zn={}));const $re={debug:Zn.DEBUG,verbose:Zn.VERBOSE,info:Zn.INFO,warn:Zn.WARN,error:Zn.ERROR,silent:Zn.SILENT},Fre=Zn.INFO,jre={[Zn.DEBUG]:"log",[Zn.VERBOSE]:"log",[Zn.INFO]:"info",[Zn.WARN]:"warn",[Zn.ERROR]:"error"},Wre=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=jre[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cz{constructor(e){this.name=e,this._logLevel=Fre,this._logHandler=Wre,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Zn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$re[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Zn.DEBUG,...e),this._logHandler(this,Zn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Zn.VERBOSE,...e),this._logHandler(this,Zn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Zn.INFO,...e),this._logHandler(this,Zn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Zn.WARN,...e),this._logHandler(this,Zn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Zn.ERROR,...e),this._logHandler(this,Zn.ERROR,...e)}}const zre=(t,e)=>e.some(n=>t instanceof n);let OB,kB;function Hre(){return OB||(OB=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Gre(){return kB||(kB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lz=new WeakMap,d2=new WeakMap,uz=new WeakMap,oR=new WeakMap,M5=new WeakMap;function qre(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Mh(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&lz.set(n,t)}).catch(()=>{}),M5.set(e,t),e}function Vre(t){if(d2.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});d2.set(t,e)}let h2={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return d2.get(t);if(e==="objectStoreNames")return t.objectStoreNames||uz.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mh(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Kre(t){h2=t(h2)}function Yre(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(aR(this),e,...n);return uz.set(r,e.sort?e.sort():[e]),Mh(r)}:Gre().includes(t)?function(...e){return t.apply(aR(this),e),Mh(lz.get(this))}:function(...e){return Mh(t.apply(aR(this),e))}}function Qre(t){return typeof t=="function"?Yre(t):(t instanceof IDBTransaction&&Vre(t),zre(t,Hre())?new Proxy(t,h2):t)}function Mh(t){if(t instanceof IDBRequest)return qre(t);if(oR.has(t))return oR.get(t);const e=Qre(t);return e!==t&&(oR.set(t,e),M5.set(e,t)),e}const aR=t=>M5.get(t);function Jre(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Mh(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Mh(o.result),c.oldVersion,c.newVersion,Mh(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const Zre=["get","getKey","getAll","getAllKeys","count"],Xre=["put","add","delete","clear"],cR=new Map;function DB(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(cR.get(e))return cR.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Xre.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Zre.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return cR.set(e,i),i}Kre(t=>({...t,get:(e,n,r)=>DB(e,n)||t.get(e,n,r),has:(e,n)=>!!DB(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ese{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tse(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function tse(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const f2="@firebase/app",MB="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu=new cz("@firebase/app"),nse="@firebase/app-compat",rse="@firebase/analytics-compat",sse="@firebase/analytics",ise="@firebase/app-check-compat",ose="@firebase/app-check",ase="@firebase/auth",cse="@firebase/auth-compat",lse="@firebase/database",use="@firebase/data-connect",dse="@firebase/database-compat",hse="@firebase/functions",fse="@firebase/functions-compat",pse="@firebase/installations",gse="@firebase/installations-compat",mse="@firebase/messaging",yse="@firebase/messaging-compat",wse="@firebase/performance",bse="@firebase/performance-compat",vse="@firebase/remote-config",Ese="@firebase/remote-config-compat",Cse="@firebase/storage",_se="@firebase/storage-compat",Ase="@firebase/firestore",Sse="@firebase/vertexai-preview",xse="@firebase/firestore-compat",Ise="firebase",Nse="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2="[DEFAULT]",Tse={[f2]:"fire-core",[nse]:"fire-core-compat",[sse]:"fire-analytics",[rse]:"fire-analytics-compat",[ose]:"fire-app-check",[ise]:"fire-app-check-compat",[ase]:"fire-auth",[cse]:"fire-auth-compat",[lse]:"fire-rtdb",[use]:"fire-data-connect",[dse]:"fire-rtdb-compat",[hse]:"fire-fn",[fse]:"fire-fn-compat",[pse]:"fire-iid",[gse]:"fire-iid-compat",[mse]:"fire-fcm",[yse]:"fire-fcm-compat",[wse]:"fire-perf",[bse]:"fire-perf-compat",[vse]:"fire-rc",[Ese]:"fire-rc-compat",[Cse]:"fire-gcs",[_se]:"fire-gcs-compat",[Ase]:"fire-fst",[xse]:"fire-fst-compat",[Sse]:"fire-vertex","fire-js":"fire-js",[Ise]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=new Map,Rse=new Map,g2=new Map;function LB(t,e){try{t.container.addComponent(e)}catch(n){Yu.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function YS(t){const e=t.name;if(g2.has(e))return Yu.debug(`There were multiple attempts to register component ${e}.`),!1;g2.set(e,t);for(const n of EE.values())LB(n,t);for(const n of Rse.values())LB(n,t);return!0}function Pse(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ose={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lh=new oz("app","Firebase",Ose);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kse{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vE("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lh.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dse=Nse;function dz(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:p2,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Lh.create("bad-app-name",{appName:String(s)});if(n||(n=sz()),!n)throw Lh.create("no-options");const i=EE.get(s);if(i){if(u2(n,i.options)&&u2(r,i.config))return i;throw Lh.create("duplicate-app",{appName:s})}const o=new Bre(s);for(const c of g2.values())o.addComponent(c);const a=new kse(n,r,o);return EE.set(s,a),a}function hz(t=p2){const e=EE.get(t);if(!e&&t===p2&&sz())return dz();if(!e)throw Lh.create("no-app",{appName:t});return e}function Mse(){return Array.from(EE.values())}function My(t,e,n){var r;let s=(r=Tse[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yu.warn(a.join(" "));return}YS(new vE(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lse="firebase-heartbeat-database",Use=1,CE="firebase-heartbeat-store";let lR=null;function fz(){return lR||(lR=Jre(Lse,Use,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(CE)}catch(n){console.warn(n)}}}}).catch(t=>{throw Lh.create("idb-open",{originalErrorMessage:t.message})})),lR}async function Bse(t){try{const n=(await fz()).transaction(CE),r=await n.objectStore(CE).get(pz(t));return await n.done,r}catch(e){if(e instanceof __)Yu.warn(e.message);else{const n=Lh.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yu.warn(n.message)}}}async function UB(t,e){try{const r=(await fz()).transaction(CE,"readwrite");await r.objectStore(CE).put(e,pz(t)),await r.done}catch(n){if(n instanceof __)Yu.warn(n.message);else{const r=Lh.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Yu.warn(r.message)}}}function pz(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $se=1024,Fse=30*24*60*60*1e3;class jse{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new zse(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=BB();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Fse}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Yu.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=BB(),{heartbeatsToSend:r,unsentEntries:s}=Wse(this._heartbeatsCache.heartbeats),i=VS(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Yu.warn(n),""}}}function BB(){return new Date().toISOString().substring(0,10)}function Wse(t,e=$se){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),$B(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),$B(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class zse{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Sre()?xre().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Bse(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return UB(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return UB(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function $B(t){return VS(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hse(t){YS(new vE("platform-logger",e=>new ese(e),"PRIVATE")),YS(new vE("heartbeat",e=>new jse(e),"PRIVATE")),My(f2,MB,t),My(f2,MB,"esm2017"),My("fire-js","")}Hse("");var Gse="firebase",qse="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */My(Gse,qse,"app");var FB={};const jB="@firebase/database",WB="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gz="";function Vse(t){gz=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kse{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Yr(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:bE(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yse{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ad(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mz=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Kse(e)}}catch{}return new Yse},pp=mz("localStorage"),Qse=mz("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly=new cz("@firebase/database"),Jse=function(){let t=1;return function(){return t++}}(),yz=function(t){const e=Dre(t),n=new kre;n.update(e);const r=n.digest();return k5.encodeByteArray(r)},A_=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=A_.apply(null,r):typeof r=="object"?e+=Yr(r):e+=r,e+=" "}return e};let $v=null,zB=!0;const Zse=function(t,e){Ae(!0,"Can't turn on custom loggers persistently."),Ly.logLevel=Zn.VERBOSE,$v=Ly.log.bind(Ly)},Xs=function(...t){if(zB===!0&&(zB=!1,$v===null&&Qse.get("logging_enabled")===!0&&Zse()),$v){const e=A_.apply(null,t);$v(e)}},S_=function(t){return function(...e){Xs(t,...e)}},m2=function(...t){const e="FIREBASE INTERNAL ERROR: "+A_(...t);Ly.error(e)},Qu=function(...t){const e=`FIREBASE FATAL ERROR: ${A_(...t)}`;throw Ly.error(e),new Error(e)},so=function(...t){const e="FIREBASE WARNING: "+A_(...t);Ly.warn(e)},Xse=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&so("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},wz=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},eie=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},tw="[MIN_NAME]",yg="[MAX_NAME]",Kw=function(t,e){if(t===e)return 0;if(t===tw||e===yg)return-1;if(e===tw||t===yg)return 1;{const n=HB(t),r=HB(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},tie=function(t,e){return t===e?0:t<e?-1:1},Pb=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Yr(e))},L5=function(t){if(typeof t!="object"||t===null)return Yr(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Yr(e[r]),n+=":",n+=L5(t[e[r]]);return n+="}",n},bz=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function ho(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const vz=function(t){Ae(!wz(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(i%2?1:0),i=Math.floor(i/2);l.push(s?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},nie=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},rie=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function sie(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const iie=new RegExp("^-?(0*)\\d{1,10}$"),oie=-2147483648,aie=2147483647,HB=function(t){if(iie.test(t)){const e=Number(t);if(e>=oie&&e<=aie)return e}return null},Yw=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw so("Exception was thrown by user callback.",n),e},Math.floor(0))}},cie=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Fv=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lie{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){so(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uie{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Xs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',so(e)}}class tS{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}tS.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U5="5",Ez="v",Cz="s",_z="r",Az="f",Sz=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,xz="ls",Iz="p",y2="ac",Nz="websocket",Tz="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rz{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=pp.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&pp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function die(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Pz(t,e,n){Ae(typeof e=="string","typeof type must == string"),Ae(typeof n=="object","typeof params must == object");let r;if(e===Nz)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Tz)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);die(t)&&(n.ns=t.namespace);const s=[];return ho(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hie{constructor(){this.counters_={}}incrementCounter(e,n=1){ad(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return fre(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR={},dR={};function B5(t){const e=t.toString();return uR[e]||(uR[e]=new hie),uR[e]}function fie(t,e){const n=t.toString();return dR[n]||(dR[n]=e()),dR[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pie{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Yw(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GB="start",gie="close",mie="pLPCommand",yie="pRTLPCB",Oz="id",kz="pw",Dz="ser",wie="cb",bie="seg",vie="ts",Eie="d",Cie="dframe",Mz=1870,Lz=30,_ie=Mz-Lz,Aie=25e3,Sie=3e4;class hy{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=S_(e),this.stats_=B5(n),this.urlFn=c=>(this.appCheckToken&&(c[y2]=this.appCheckToken),Pz(n,Tz,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new pie(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Sie)),eie(()=>{if(this.isClosed_)return;this.scriptTagHolder=new $5((...i)=>{const[o,a,c,l,u]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===GB)this.id=a,this.password=c;else if(o===gie)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[GB]="t",r[Dz]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[wie]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Ez]=U5,this.transportSessionId&&(r[Cz]=this.transportSessionId),this.lastSessionId&&(r[xz]=this.lastSessionId),this.applicationId&&(r[Iz]=this.applicationId),this.appCheckToken&&(r[y2]=this.appCheckToken),typeof location<"u"&&location.hostname&&Sz.test(location.hostname)&&(r[_z]=Az);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){hy.forceAllow_=!0}static forceDisallow(){hy.forceDisallow_=!0}static isAvailable(){return hy.forceAllow_?!0:!hy.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!nie()&&!rie()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Yr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=tz(n),s=bz(r,_ie);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Cie]="t",r[Oz]=e,r[kz]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Yr(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class $5{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Jse(),window[mie+this.uniqueCallbackIdentifier]=e,window[yie+this.uniqueCallbackIdentifier]=n,this.myIFrame=$5.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Xs("frame writing exception"),a.stack&&Xs(a.stack),Xs(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Xs("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Oz]=this.myID,e[kz]=this.myPW,e[Dz]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Lz+r.length<=Mz;){const o=this.pendingSegs.shift();r=r+"&"+bie+s+"="+o.seg+"&"+vie+s+"="+o.ts+"&"+Eie+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(Aie)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Xs("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xie=16384,Iie=45e3;let QS=null;typeof MozWebSocket<"u"?QS=MozWebSocket:typeof WebSocket<"u"&&(QS=WebSocket);class gc{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=S_(this.connId),this.stats_=B5(n),this.connURL=gc.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[Ez]=U5,typeof location<"u"&&location.hostname&&Sz.test(location.hostname)&&(o[_z]=Az),n&&(o[Cz]=n),r&&(o[xz]=r),s&&(o[y2]=s),i&&(o[Iz]=i),Pz(e,Nz,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,pp.set("previous_websocket_failure",!0);try{let r;Are(),this.mySock=new QS(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){gc.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&QS!==null&&!gc.forceDisallow_}static previouslyFailed(){return pp.isInMemoryStorage||pp.get("previous_websocket_failure")===!0}markConnectionHealthy(){pp.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=bE(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ae(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Yr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=bz(n,xie);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Iie))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}gc.responsesRequiredToBeHealthy=2;gc.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[hy,gc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=gc&&gc.isAvailable();let r=n&&!gc.previouslyFailed();if(e.webSocketOnly&&(n||so("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[gc];else{const s=this.transports_=[];for(const i of _E.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);_E.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}_E.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nie=6e4,Tie=5e3,Rie=10*1024,Pie=100*1024,hR="t",qB="d",Oie="s",VB="r",kie="e",KB="o",YB="a",QB="n",JB="p",Die="h";class Mie{constructor(e,n,r,s,i,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=S_("c:"+this.id+":"),this.transportManager_=new _E(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Fv(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Pie?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Rie?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(hR in e){const n=e[hR];n===YB?this.upgradeIfSecondaryHealthy_():n===VB?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===KB&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Pb("t",e),r=Pb("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:JB,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:YB,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:QB,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Pb("t",e),r=Pb("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Pb(hR,e);if(qB in e){const r=e[qB];if(n===Die){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===QB){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Oie?this.onConnectionShutdown_(r):n===VB?this.onReset_(r):n===kie?m2("Server Error: "+r):n===KB?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):m2("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),U5!==r&&so("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Fv(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Nie))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Fv(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Tie))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:JB,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(pp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uz{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bz=class{constructor(e){this.allowedEvents_=e,this.listeners_={},Ae(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){Ae(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS extends Bz{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!iz()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new JS}getInitialEvent(e){return Ae(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZB=32,XB=768;class Vn{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function wn(){return new Vn("")}function Vt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function of(t){return t.pieces_.length-t.pieceNum_}function er(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Vn(t.pieces_,e)}function $z(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Lie(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Fz(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function jz(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Vn(e,0)}function Qr(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Vn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Vn(n,0)}function Jt(t){return t.pieceNum_>=t.pieces_.length}function wi(t,e){const n=Vt(t),r=Vt(e);if(n===null)return e;if(n===r)return wi(er(t),er(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function F5(t,e){if(of(t)!==of(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function bc(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(of(t)>of(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Uie{constructor(e,n){this.errorPrefix_=n,this.parts_=Fz(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=VI(this.parts_[r]);Wz(this)}}function Bie(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=VI(e),Wz(t)}function $ie(t){const e=t.parts_.pop();t.byteLength_-=VI(e),t.parts_.length>0&&(t.byteLength_-=1)}function Wz(t){if(t.byteLength_>XB)throw new Error(t.errorPrefix_+"has a key path longer than "+XB+" bytes ("+t.byteLength_+").");if(t.parts_.length>ZB)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ZB+") or object contains a cycle "+Yf(t))}function Yf(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5 extends Bz{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new j5}getInitialEvent(e){return Ae(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=1e3,Fie=60*5*1e3,e$=30*1e3,jie=1.3,Wie=3e4,zie="server_kill",t$=3;class $u extends Uz{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=$u.nextPersistentConnectionId_++,this.log_=S_("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ob,this.maxReconnectDelay_=Fie,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");j5.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&JS.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Yr(i)),Ae(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new qI,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ae(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,l=a.s;$u.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&ad(e,"w")){const r=ew(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();so(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Pre(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=e$)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Rre(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),Ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Yr(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):m2("Unrecognized action received from server: "+Yr(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ae(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ob,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ob,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Wie&&(this.reconnectDelay_=Ob),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*jie)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+$u.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(d){Ae(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Xs("getToken() completed but was canceled"):(Xs("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new Mie(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{so(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(zie)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&so(d),c())}}}interrupt(e){Xs("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Xs("Resuming connection for reason: "+e),delete this.interruptReasons_[e],RB(this.interruptReasons_)&&(this.reconnectDelay_=Ob,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>L5(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Vn(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Xs("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=t$&&(this.reconnectDelay_=e$,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Xs("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=t$&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+gz.replace(/\./g,"-")]=1,iz()?e["framework.cordova"]=1:_re()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=JS.getInstance().currentlyOnline();return RB(this.interruptReasons_)&&e}}$u.nextPersistentConnectionId_=0;$u.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Kt(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Kt(tw,e),s=new Kt(tw,n);return this.compare(r,s)!==0}minPost(){return Kt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let D1;class zz extends KI{static get __EMPTY_NODE(){return D1}static set __EMPTY_NODE(e){D1=e}compare(e,n){return Kw(e.name,n.name)}isDefinedOn(e){throw qw("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Kt.MIN}maxPost(){return new Kt(yg,D1)}makePost(e,n){return Ae(typeof e=="string","KeyIndex indexValue must always be a string."),new Kt(e,D1)}toString(){return".key"}}const Uy=new zz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class us{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??us.RED,this.left=s??to.EMPTY_NODE,this.right=i??to.EMPTY_NODE}copy(e,n,r,s,i){return new us(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return to.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return to.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,us.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,us.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}us.RED=!0;us.BLACK=!1;class Hie{copy(e,n,r,s,i){return this}insert(e,n,r){return new us(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class to{constructor(e,n=to.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new to(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,us.BLACK,null,null))}remove(e){return new to(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,us.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new M1(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new M1(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new M1(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new M1(this.root_,null,this.comparator_,!0,e)}}to.EMPTY_NODE=new Hie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gie(t,e){return Kw(t.name,e.name)}function W5(t,e){return Kw(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let w2;function qie(t){w2=t}const Hz=function(t){return typeof t=="number"?"number:"+vz(t):"string:"+t},Gz=function(t){if(t.isLeafNode()){const e=t.val();Ae(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ad(e,".sv"),"Priority must be a string or number.")}else Ae(t===w2||t.isEmpty(),"priority of unexpected type.");Ae(t===w2||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n$;class ls{constructor(e,n=ls.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Ae(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Gz(this.priorityNode_)}static set __childrenNodeConstructor(e){n$=e}static get __childrenNodeConstructor(){return n$}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ls(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ls.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Jt(e)?this:Vt(e)===".priority"?this.priorityNode_:ls.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ls.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Vt(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(Ae(r!==".priority"||of(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,ls.__childrenNodeConstructor.EMPTY_NODE.updateChild(er(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Hz(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=vz(this.value_):e+=this.value_,this.lazyHash_=yz(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ls.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ls.__childrenNodeConstructor?-1:(Ae(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=ls.VALUE_TYPE_ORDER.indexOf(n),i=ls.VALUE_TYPE_ORDER.indexOf(r);return Ae(s>=0,"Unknown leaf type: "+n),Ae(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ls.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qz,Vz;function Vie(t){qz=t}function Kie(t){Vz=t}class Yie extends KI{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?Kw(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Kt.MIN}maxPost(){return new Kt(yg,new ls("[PRIORITY-POST]",Vz))}makePost(e,n){const r=qz(e);return new Kt(n,new ls("[PRIORITY-POST]",r))}toString(){return".priority"}}const Sr=new Yie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qie=Math.log(2);class Jie{constructor(e){const n=i=>parseInt(Math.log(i)/Qie,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ZS=function(t,e,n,r){t.sort(e);const s=function(c,l){const u=l-c;let d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new us(h,d.node,us.BLACK,null,null);{const f=parseInt(u/2,10)+c,p=s(c,f),g=s(f+1,l);return d=t[f],h=n?n(d):d,new us(h,d.node,us.BLACK,p,g)}},i=function(c){let l=null,u=null,d=t.length;const h=function(p,g){const w=d-p,m=d;d-=p;const b=s(w+1,m),v=t[w],A=n?n(v):v;f(new us(A,v.node,g,null,b))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){const g=c.nextBitIsOne(),w=Math.pow(2,c.count-(p+1));g?h(w,us.BLACK):(h(w,us.BLACK),h(w,us.RED))}return u},o=new Jie(t.length),a=i(o);return new to(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fR;const Sm={};class ku{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return Ae(Sm&&Sr,"ChildrenNode.ts has not been loaded"),fR=fR||new ku({".priority":Sm},{".priority":Sr}),fR}get(e){const n=ew(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof to?n:null}hasIndex(e){return ad(this.indexSet_,e.toString())}addIndex(e,n){Ae(e!==Uy,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(Kt.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=ZS(r,e.getCompare()):a=Sm;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new ku(u,l)}addToIndexes(e,n){const r=KS(this.indexes_,(s,i)=>{const o=ew(this.indexSet_,i);if(Ae(o,"Missing index implementation for "+i),s===Sm)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(Kt.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),ZS(a,o.getCompare())}else return Sm;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new Kt(e.name,a))),c.insert(e,e.node)}});return new ku(r,this.indexSet_)}removeFromIndexes(e,n){const r=KS(this.indexes_,s=>{if(s===Sm)return s;{const i=n.get(e.name);return i?s.remove(new Kt(e.name,i)):s}});return new ku(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kb;class Ct{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Gz(this.priorityNode_),this.children_.isEmpty()&&Ae(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return kb||(kb=new Ct(new to(W5),null,ku.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||kb}updatePriority(e){return this.children_.isEmpty()?this:new Ct(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?kb:n}}getChild(e){const n=Vt(e);return n===null?this:this.getImmediateChild(n).getChild(er(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Ae(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Kt(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?kb:this.priorityNode_;return new Ct(s,o,i)}}updateChild(e,n){const r=Vt(e);if(r===null)return n;{Ae(Vt(e)!==".priority"||of(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(er(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Sr,(o,a)=>{n[o]=a.val(e),r++,i&&Ct.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Hz(this.getPriority().val())+":"),this.forEachChild(Sr,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":yz(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new Kt(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Kt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Kt(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Kt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Kt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===x_?-1:0}withIndex(e){if(e===Uy||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Ct(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Uy||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Sr),s=n.getIterator(Sr);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Uy?null:this.indexMap_.get(e.toString())}}Ct.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Zie extends Ct{constructor(){super(new to(W5),Ct.EMPTY_NODE,ku.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ct.EMPTY_NODE}isEmpty(){return!1}}const x_=new Zie;Object.defineProperties(Kt,{MIN:{value:new Kt(tw,Ct.EMPTY_NODE)},MAX:{value:new Kt(yg,x_)}});zz.__EMPTY_NODE=Ct.EMPTY_NODE;ls.__childrenNodeConstructor=Ct;qie(x_);Kie(x_);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xie=!0;function fs(t,e=null){if(t===null)return Ct.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Ae(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new ls(n,fs(e))}if(!(t instanceof Array)&&Xie){const n=[];let r=!1;if(ho(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=fs(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Kt(o,c)))}}),n.length===0)return Ct.EMPTY_NODE;const i=ZS(n,Gie,o=>o.name,W5);if(r){const o=ZS(n,Sr.getCompare());return new Ct(i,fs(e),new ku({".priority":o},{".priority":Sr}))}else return new Ct(i,fs(e),ku.Default)}else{let n=Ct.EMPTY_NODE;return ho(t,(r,s)=>{if(ad(t,r)&&r.substring(0,1)!=="."){const i=fs(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(fs(e))}}Vie(fs);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eoe extends KI{constructor(e){super(),this.indexPath_=e,Ae(!Jt(e)&&Vt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?Kw(e.name,n.name):i}makePost(e,n){const r=fs(e),s=Ct.EMPTY_NODE.updateChild(this.indexPath_,r);return new Kt(n,s)}maxPost(){const e=Ct.EMPTY_NODE.updateChild(this.indexPath_,x_);return new Kt(yg,e)}toString(){return Fz(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class toe extends KI{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Kw(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Kt.MIN}maxPost(){return Kt.MAX}makePost(e,n){const r=fs(e);return new Kt(n,r)}toString(){return".value"}}const noe=new toe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kz(t){return{type:"value",snapshotNode:t}}function nw(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function AE(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function SE(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function roe(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){Ae(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(AE(n,a)):Ae(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(nw(n,r)):o.trackChildChange(SE(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Sr,(s,i)=>{n.hasChild(s)||r.trackChildChange(AE(s,i))}),n.isLeafNode()||n.forEachChild(Sr,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(SE(s,i,o))}else r.trackChildChange(nw(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Ct.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e){this.indexedFilter_=new z5(e.getIndex()),this.index_=e.getIndex(),this.startPost_=xE.getStartPost_(e),this.endPost_=xE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new Kt(n,r))||(r=Ct.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Ct.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(Ct.EMPTY_NODE);const i=this;return n.forEachChild(Sr,(o,a)=>{i.matches(new Kt(o,a))||(s=s.updateImmediateChild(o,Ct.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class soe{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new xE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new Kt(n,r))||(r=Ct.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=Ct.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=Ct.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(Ct.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,Ct.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;Ae(a.numChildren()===this.limit_,"");const c=new Kt(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return i!=null&&i.trackChildChange(SE(n,r,d)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(AE(n,d));const g=a.updateImmediateChild(n,Ct.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(i!=null&&i.trackChildChange(nw(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return r.isEmpty()?e:u&&o(l,c)>=0?(i!=null&&(i.trackChildChange(AE(l.name,l.node)),i.trackChildChange(nw(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,Ct.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Sr}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ae(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ae(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:tw}hasEnd(){return this.endSet_}getIndexEndValue(){return Ae(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ae(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:yg}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ae(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Sr}copy(){const e=new H5;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function ioe(t){return t.loadsAllData()?new z5(t.getIndex()):t.hasLimit()?new soe(t):new xE(t)}function r$(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Sr?n="$priority":t.index_===noe?n="$value":t.index_===Uy?n="$key":(Ae(t.index_ instanceof eoe,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Yr(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Yr(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Yr(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Yr(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Yr(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function s$(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Sr&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS extends Uz{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=S_("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Ae(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=XS.getListenId_(e,r),a={};this.listens_[o]=a;const c=r$(e._queryParams);this.restRequest_(i+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(i,d,!1,r),ew(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",s(h,null)}})}unlisten(e,n){const r=XS.getListenId_(e,n);delete this.listens_[r]}get(e){const n=r$(e._queryParams),r=e._path.toString(),s=new qI;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ore(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=bE(a.responseText)}catch{so("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&so("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ooe{constructor(){this.rootNode_=Ct.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(){return{value:null,children:new Map}}function Yz(t,e,n){if(Jt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Vt(e);t.children.has(r)||t.children.set(r,ex());const s=t.children.get(r);e=er(e),Yz(s,e,n)}}function b2(t,e,n){t.value!==null?n(e,t.value):aoe(t,(r,s)=>{const i=new Vn(e.toString()+"/"+r);b2(s,i,n)})}function aoe(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class coe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&ho(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i$=10*1e3,loe=30*1e3,uoe=5*60*1e3;class doe{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new coe(e);const r=i$+(loe-i$)*Math.random();Fv(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;ho(e,(s,i)=>{i>0&&ad(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),Fv(this.reportStats_.bind(this),Math.floor(Math.random()*2*uoe))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vc;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(vc||(vc={}));function Qz(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function G5(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function q5(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=vc.ACK_USER_WRITE,this.source=Qz()}operationForChild(e){if(Jt(this.path)){if(this.affectedTree.value!=null)return Ae(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Vn(e));return new tx(wn(),n,this.revert)}}else return Ae(Vt(this.path)===e,"operationForChild called for unrelated child."),new tx(er(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,n){this.source=e,this.path=n,this.type=vc.LISTEN_COMPLETE}operationForChild(e){return Jt(this.path)?new IE(this.source,wn()):new IE(this.source,er(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=vc.OVERWRITE}operationForChild(e){return Jt(this.path)?new wg(this.source,wn(),this.snap.getImmediateChild(e)):new wg(this.source,er(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=vc.MERGE}operationForChild(e){if(Jt(this.path)){const n=this.children.subtree(new Vn(e));return n.isEmpty()?null:n.value?new wg(this.source,wn(),n.value):new NE(this.source,wn(),n)}else return Ae(Vt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new NE(this.source,er(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Jt(e))return this.isFullyInitialized()&&!this.filtered_;const n=Vt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hoe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function foe(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(roe(o.childName,o.snapshotNode))}),Db(t,s,"child_removed",e,r,n),Db(t,s,"child_added",e,r,n),Db(t,s,"child_moved",i,r,n),Db(t,s,"child_changed",e,r,n),Db(t,s,"value",e,r,n),s}function Db(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>goe(t,a,c)),o.forEach(a=>{const c=poe(t,a,i);s.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function poe(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function goe(t,e,n){if(e.childName==null||n.childName==null)throw qw("Should only compare child_ events.");const r=new Kt(e.childName,e.snapshotNode),s=new Kt(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(t,e){return{eventCache:t,serverCache:e}}function jv(t,e,n,r){return YI(new af(e,n,r),t.serverCache)}function Jz(t,e,n,r){return YI(t.eventCache,new af(e,n,r))}function nx(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function bg(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pR;const moe=()=>(pR||(pR=new to(tie)),pR);class ir{constructor(e,n=moe()){this.value=e,this.children=n}static fromObject(e){let n=new ir(null);return ho(e,(r,s)=>{n=n.set(new Vn(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:wn(),value:this.value};if(Jt(e))return null;{const r=Vt(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(er(e),n);return i!=null?{path:Qr(new Vn(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Jt(e))return this;{const n=Vt(e),r=this.children.get(n);return r!==null?r.subtree(er(e)):new ir(null)}}set(e,n){if(Jt(e))return new ir(n,this.children);{const r=Vt(e),i=(this.children.get(r)||new ir(null)).set(er(e),n),o=this.children.insert(r,i);return new ir(this.value,o)}}remove(e){if(Jt(e))return this.children.isEmpty()?new ir(null):new ir(null,this.children);{const n=Vt(e),r=this.children.get(n);if(r){const s=r.remove(er(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new ir(null):new ir(this.value,i)}else return this}}get(e){if(Jt(e))return this.value;{const n=Vt(e),r=this.children.get(n);return r?r.get(er(e)):null}}setTree(e,n){if(Jt(e))return n;{const r=Vt(e),i=(this.children.get(r)||new ir(null)).setTree(er(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new ir(this.value,o)}}fold(e){return this.fold_(wn(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Qr(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,wn(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(Jt(e))return null;{const i=Vt(e),o=this.children.get(i);return o?o.findOnPath_(er(e),Qr(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,wn(),n)}foreachOnPath_(e,n,r){if(Jt(e))return this;{this.value&&r(n,this.value);const s=Vt(e),i=this.children.get(s);return i?i.foreachOnPath_(er(e),Qr(n,s),r):new ir(null)}}foreach(e){this.foreach_(wn(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Qr(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e){this.writeTree_=e}static empty(){return new _c(new ir(null))}}function Wv(t,e,n){if(Jt(e))return new _c(new ir(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=wi(s,e);return i=i.updateChild(o,n),new _c(t.writeTree_.set(s,i))}else{const s=new ir(n),i=t.writeTree_.setTree(e,s);return new _c(i)}}}function o$(t,e,n){let r=t;return ho(n,(s,i)=>{r=Wv(r,Qr(e,s),i)}),r}function a$(t,e){if(Jt(e))return _c.empty();{const n=t.writeTree_.setTree(e,new ir(null));return new _c(n)}}function v2(t,e){return Jg(t,e)!=null}function Jg(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(wi(n.path,e)):null}function c$(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Sr,(r,s)=>{e.push(new Kt(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new Kt(r,s.value))}),e}function Uh(t,e){if(Jt(e))return t;{const n=Jg(t,e);return n!=null?new _c(new ir(n)):new _c(t.writeTree_.subtree(e))}}function E2(t){return t.writeTree_.isEmpty()}function rw(t,e){return Zz(wn(),t.writeTree_,e)}function Zz(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(Ae(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=Zz(Qr(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Qr(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(t,e){return nH(e,t)}function yoe(t,e,n,r,s){Ae(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=Wv(t.visibleWrites,e,n)),t.lastWriteId=r}function woe(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function boe(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Ae(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&voe(a,r.path)?s=!1:bc(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return Eoe(t),!0;if(r.snap)t.visibleWrites=a$(t.visibleWrites,r.path);else{const a=r.children;ho(a,c=>{t.visibleWrites=a$(t.visibleWrites,Qr(r.path,c))})}return!0}else return!1}function voe(t,e){if(t.snap)return bc(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&bc(Qr(t.path,n),e))return!0;return!1}function Eoe(t){t.visibleWrites=Xz(t.allWrites,Coe,wn()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Coe(t){return t.visible}function Xz(t,e,n){let r=_c.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)bc(n,o)?(a=wi(n,o),r=Wv(r,a,i.snap)):bc(o,n)&&(a=wi(o,n),r=Wv(r,wn(),i.snap.getChild(a)));else if(i.children){if(bc(n,o))a=wi(n,o),r=o$(r,a,i.children);else if(bc(o,n))if(a=wi(o,n),Jt(a))r=o$(r,wn(),i.children);else{const c=ew(i.children,Vt(a));if(c){const l=c.getChild(er(a));r=Wv(r,wn(),l)}}}else throw qw("WriteRecord should have .snap or .children")}}return r}function eH(t,e,n,r,s){if(!r&&!s){const i=Jg(t.visibleWrites,e);if(i!=null)return i;{const o=Uh(t.visibleWrites,e);if(E2(o))return n;if(n==null&&!v2(o,wn()))return null;{const a=n||Ct.EMPTY_NODE;return rw(o,a)}}}else{const i=Uh(t.visibleWrites,e);if(!s&&E2(i))return n;if(!s&&n==null&&!v2(i,wn()))return null;{const o=function(l){return(l.visible||s)&&(!r||!~r.indexOf(l.writeId))&&(bc(l.path,e)||bc(e,l.path))},a=Xz(t.allWrites,o,e),c=n||Ct.EMPTY_NODE;return rw(a,c)}}}function _oe(t,e,n){let r=Ct.EMPTY_NODE;const s=Jg(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Sr,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Uh(t.visibleWrites,e);return n.forEachChild(Sr,(o,a)=>{const c=rw(Uh(i,new Vn(o)),a);r=r.updateImmediateChild(o,c)}),c$(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Uh(t.visibleWrites,e);return c$(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Aoe(t,e,n,r,s){Ae(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Qr(e,n);if(v2(t.visibleWrites,i))return null;{const o=Uh(t.visibleWrites,i);return E2(o)?s.getChild(n):rw(o,s.getChild(n))}}function Soe(t,e,n,r){const s=Qr(e,n),i=Jg(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Uh(t.visibleWrites,s);return rw(o,r.getNode().getImmediateChild(n))}else return null}function xoe(t,e){return Jg(t.visibleWrites,e)}function Ioe(t,e,n,r,s,i,o){let a;const c=Uh(t.visibleWrites,e),l=Jg(c,wn());if(l!=null)a=l;else if(n!=null)a=rw(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<s;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function Noe(){return{visibleWrites:_c.empty(),allWrites:[],lastWriteId:-1}}function rx(t,e,n,r){return eH(t.writeTree,t.treePath,e,n,r)}function V5(t,e){return _oe(t.writeTree,t.treePath,e)}function l$(t,e,n,r){return Aoe(t.writeTree,t.treePath,e,n,r)}function sx(t,e){return xoe(t.writeTree,Qr(t.treePath,e))}function Toe(t,e,n,r,s,i){return Ioe(t.writeTree,t.treePath,e,n,r,s,i)}function K5(t,e,n){return Soe(t.writeTree,t.treePath,e,n)}function tH(t,e){return nH(Qr(t.treePath,e),t.writeTree)}function nH(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Roe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;Ae(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Ae(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,SE(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,AE(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,nw(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,SE(r,e.snapshotNode,s.oldSnap));else throw qw("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Poe{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const rH=new Poe;class Y5{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new af(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return K5(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:bg(this.viewCache_),i=Toe(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ooe(t){return{filter:t}}function koe(t,e){Ae(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Ae(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Doe(t,e,n,r,s){const i=new Roe;let o,a;if(n.type===vc.OVERWRITE){const l=n;l.source.fromUser?o=C2(t,e,l.path,l.snap,r,s,i):(Ae(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Jt(l.path),o=ix(t,e,l.path,l.snap,r,s,a,i))}else if(n.type===vc.MERGE){const l=n;l.source.fromUser?o=Loe(t,e,l.path,l.children,r,s,i):(Ae(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=_2(t,e,l.path,l.children,r,s,a,i))}else if(n.type===vc.ACK_USER_WRITE){const l=n;l.revert?o=$oe(t,e,l.path,r,s,i):o=Uoe(t,e,l.path,l.affectedTree,r,s,i)}else if(n.type===vc.LISTEN_COMPLETE)o=Boe(t,e,n.path,r,i);else throw qw("Unknown operation type: "+n.type);const c=i.getChanges();return Moe(e,o,c),{viewCache:o,changes:c}}function Moe(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=nx(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(Kz(nx(e)))}}function sH(t,e,n,r,s,i){const o=e.eventCache;if(sx(r,n)!=null)return e;{let a,c;if(Jt(n))if(Ae(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=bg(e),u=l instanceof Ct?l:Ct.EMPTY_NODE,d=V5(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const l=rx(r,bg(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,i)}else{const l=Vt(n);if(l===".priority"){Ae(of(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=l$(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=er(n);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const h=l$(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=K5(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,s,i):a=o.getNode()}}return jv(e,a,o.isFullyInitialized()||Jt(n),t.filter.filtersNodes())}}function ix(t,e,n,r,s,i,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(Jt(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{const f=Vt(n);if(!c.isCompleteForPath(n)&&of(n)>1)return e;const p=er(n),w=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?l=u.updatePriority(c.getNode(),w):l=u.updateChild(c.getNode(),f,w,p,rH,null)}const d=Jz(e,l,c.isFullyInitialized()||Jt(n),u.filtersNodes()),h=new Y5(s,d,i);return sH(t,d,n,s,h,a)}function C2(t,e,n,r,s,i,o){const a=e.eventCache;let c,l;const u=new Y5(s,e,i);if(Jt(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=jv(e,l,!0,t.filter.filtersNodes());else{const d=Vt(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=jv(e,l,a.isFullyInitialized(),a.isFiltered());else{const h=er(n),f=a.getNode().getImmediateChild(d);let p;if(Jt(h))p=r;else{const g=u.getCompleteChild(d);g!=null?$z(h)===".priority"&&g.getChild(jz(h)).isEmpty()?p=g:p=g.updateChild(h,r):p=Ct.EMPTY_NODE}if(f.equals(p))c=e;else{const g=t.filter.updateChild(a.getNode(),d,p,h,u,o);c=jv(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function u$(t,e){return t.eventCache.isCompleteForChild(e)}function Loe(t,e,n,r,s,i,o){let a=e;return r.foreach((c,l)=>{const u=Qr(n,c);u$(e,Vt(u))&&(a=C2(t,a,u,l,s,i,o))}),r.foreach((c,l)=>{const u=Qr(n,c);u$(e,Vt(u))||(a=C2(t,a,u,l,s,i,o))}),a}function d$(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function _2(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Jt(n)?l=r:l=new ir(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=d$(t,f,h);c=ix(t,c,new Vn(d),p,s,i,o,a)}}),l.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),g=d$(t,p,h);c=ix(t,c,new Vn(d),g,s,i,o,a)}}),c}function Uoe(t,e,n,r,s,i,o){if(sx(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Jt(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return ix(t,e,n,c.getNode().getChild(n),s,i,a,o);if(Jt(n)){let l=new ir(null);return c.getNode().forEachChild(Uy,(u,d)=>{l=l.set(new Vn(u),d)}),_2(t,e,n,l,s,i,a,o)}else return e}else{let l=new ir(null);return r.foreach((u,d)=>{const h=Qr(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),_2(t,e,n,l,s,i,a,o)}}function Boe(t,e,n,r,s){const i=e.serverCache,o=Jz(e,i.getNode(),i.isFullyInitialized()||Jt(n),i.isFiltered());return sH(t,o,n,r,rH,s)}function $oe(t,e,n,r,s,i){let o;if(sx(r,n)!=null)return e;{const a=new Y5(r,e,s),c=e.eventCache.getNode();let l;if(Jt(n)||Vt(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=rx(r,bg(e));else{const d=e.serverCache.getNode();Ae(d instanceof Ct,"serverChildren would be complete if leaf node"),u=V5(r,d)}u=u,l=t.filter.updateFullNode(c,u,i)}else{const u=Vt(n);let d=K5(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,er(n),a,i):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,Ct.EMPTY_NODE,er(n),a,i):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=rx(r,bg(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,i)))}return o=e.serverCache.isFullyInitialized()||sx(r,wn())!=null,jv(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Foe{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new z5(r.getIndex()),i=ioe(r);this.processor_=Ooe(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(Ct.EMPTY_NODE,o.getNode(),null),l=i.updateFullNode(Ct.EMPTY_NODE,a.getNode(),null),u=new af(c,o.isFullyInitialized(),s.filtersNodes()),d=new af(l,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=YI(d,u),this.eventGenerator_=new hoe(this.query_)}get query(){return this.query_}}function joe(t){return t.viewCache_.serverCache.getNode()}function Woe(t){return nx(t.viewCache_)}function zoe(t,e){const n=bg(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Jt(e)&&!n.getImmediateChild(Vt(e)).isEmpty())?n.getChild(e):null}function h$(t){return t.eventRegistrations_.length===0}function Hoe(t,e){t.eventRegistrations_.push(e)}function f$(t,e,n){const r=[];if(n){Ae(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function p$(t,e,n,r){e.type===vc.MERGE&&e.source.queryId!==null&&(Ae(bg(t.viewCache_),"We should always have a full cache before handling merges"),Ae(nx(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=Doe(t.processor_,s,e,n,r);return koe(t.processor_,i.viewCache),Ae(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,iH(t,i.changes,i.viewCache.eventCache.getNode(),null)}function Goe(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Sr,(i,o)=>{r.push(nw(i,o))}),n.isFullyInitialized()&&r.push(Kz(n.getNode())),iH(t,r,n.getNode(),e)}function iH(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return foe(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ox;class oH{constructor(){this.views=new Map}}function qoe(t){Ae(!ox,"__referenceConstructor has already been defined"),ox=t}function Voe(){return Ae(ox,"Reference.ts has not been loaded"),ox}function Koe(t){return t.views.size===0}function Q5(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return Ae(i!=null,"SyncTree gave us an op for an invalid query."),p$(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(p$(o,e,n,r));return i}}function aH(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=rx(n,s?r:null),c=!1;a?c=!0:r instanceof Ct?(a=V5(n,r),c=!1):(a=Ct.EMPTY_NODE,c=!1);const l=YI(new af(a,c,!1),new af(r,s,!1));return new Foe(e,l)}return o}function Yoe(t,e,n,r,s,i){const o=aH(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Hoe(o,n),Goe(o,n)}function Qoe(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=cf(t);if(s==="default")for(const[c,l]of t.views.entries())o=o.concat(f$(l,n,r)),h$(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||i.push(l.query));else{const c=t.views.get(s);c&&(o=o.concat(f$(c,n,r)),h$(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!cf(t)&&i.push(new(Voe())(e._repo,e._path)),{removed:i,events:o}}function cH(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Bh(t,e){let n=null;for(const r of t.views.values())n=n||zoe(r,e);return n}function lH(t,e){if(e._queryParams.loadsAllData())return JI(t);{const r=e._queryIdentifier;return t.views.get(r)}}function uH(t,e){return lH(t,e)!=null}function cf(t){return JI(t)!=null}function JI(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ax;function Joe(t){Ae(!ax,"__referenceConstructor has already been defined"),ax=t}function Zoe(){return Ae(ax,"Reference.ts has not been loaded"),ax}let Xoe=1;class g${constructor(e){this.listenProvider_=e,this.syncPointTree_=new ir(null),this.pendingWriteTree_=Noe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function dH(t,e,n,r,s){return yoe(t.pendingWriteTree_,e,n,r,s),s?N_(t,new wg(Qz(),e,n)):[]}function gp(t,e,n=!1){const r=woe(t.pendingWriteTree_,e);if(boe(t.pendingWriteTree_,e)){let i=new ir(null);return r.snap!=null?i=i.set(wn(),!0):ho(r.children,o=>{i=i.set(new Vn(o),!0)}),N_(t,new tx(r.path,i,n))}else return[]}function I_(t,e,n){return N_(t,new wg(G5(),e,n))}function eae(t,e,n){const r=ir.fromObject(n);return N_(t,new NE(G5(),e,r))}function tae(t,e){return N_(t,new IE(G5(),e))}function nae(t,e,n){const r=Z5(t,n);if(r){const s=X5(r),i=s.path,o=s.queryId,a=wi(i,e),c=new IE(q5(o),a);return eM(t,i,c)}else return[]}function cx(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||uH(o,e))){const c=Qoe(o,e,n,r);Koe(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const l=c.removed;if(a=c.events,!s){const u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(h,f)=>cf(f));if(u&&!d){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const f=iae(h);for(let p=0;p<f.length;++p){const g=f[p],w=g.query,m=gH(t,g);t.listenProvider_.startListening(zv(w),TE(t,w),m.hashFn,m.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(zv(e),null):l.forEach(h=>{const f=t.queryToTagMap.get(ZI(h));t.listenProvider_.stopListening(zv(h),f)}))}oae(t,l)}return a}function hH(t,e,n,r){const s=Z5(t,r);if(s!=null){const i=X5(s),o=i.path,a=i.queryId,c=wi(o,e),l=new wg(q5(a),c,n);return eM(t,o,l)}else return[]}function rae(t,e,n,r){const s=Z5(t,r);if(s){const i=X5(s),o=i.path,a=i.queryId,c=wi(o,e),l=ir.fromObject(n),u=new NE(q5(a),c,l);return eM(t,o,u)}else return[]}function A2(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(h,f)=>{const p=wi(h,s);i=i||Bh(f,p),o=o||cf(f)});let a=t.syncPointTree_.get(s);a?(o=o||cf(a),i=i||Bh(a,wn())):(a=new oH,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=Ct.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((f,p)=>{const g=Bh(p,wn());g&&(i=i.updateImmediateChild(f,g))}));const l=uH(a,e);if(!l&&!e._queryParams.loadsAllData()){const h=ZI(e);Ae(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=aae();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}const u=QI(t.pendingWriteTree_,s);let d=Yoe(a,e,n,u,i,c);if(!l&&!o&&!r){const h=lH(a,e);d=d.concat(cae(t,e,h))}return d}function J5(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=wi(o,e),l=Bh(a,c);if(l)return l});return eH(s,e,i,n,!0)}function sae(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{const d=wi(l,n);r=r||Bh(u,d)});let s=t.syncPointTree_.get(n);s?r=r||Bh(s,wn()):(s=new oH,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new af(r,!0,!1):null,a=QI(t.pendingWriteTree_,e._path),c=aH(s,e,a,i?o.getNode():Ct.EMPTY_NODE,i);return Woe(c)}function N_(t,e){return fH(e,t.syncPointTree_,null,QI(t.pendingWriteTree_,wn()))}function fH(t,e,n,r){if(Jt(t.path))return pH(t,e,n,r);{const s=e.get(wn());n==null&&s!=null&&(n=Bh(s,wn()));let i=[];const o=Vt(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=tH(r,o);i=i.concat(fH(a,c,l,u))}return s&&(i=i.concat(Q5(s,t,r,n))),i}}function pH(t,e,n,r){const s=e.get(wn());n==null&&s!=null&&(n=Bh(s,wn()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=tH(r,o),u=t.operationForChild(o);u&&(i=i.concat(pH(u,a,c,l)))}),s&&(i=i.concat(Q5(s,t,r,n))),i}function gH(t,e){const n=e.query,r=TE(t,n);return{hashFn:()=>(joe(e)||Ct.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?nae(t,n._path,r):tae(t,n._path);{const i=sie(s,n);return cx(t,n,null,i)}}}}function TE(t,e){const n=ZI(e);return t.queryToTagMap.get(n)}function ZI(t){return t._path.toString()+"$"+t._queryIdentifier}function Z5(t,e){return t.tagToQueryMap.get(e)}function X5(t){const e=t.indexOf("$");return Ae(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Vn(t.substr(0,e))}}function eM(t,e,n){const r=t.syncPointTree_.get(e);Ae(r,"Missing sync point for query tag that we're tracking");const s=QI(t.pendingWriteTree_,e);return Q5(r,n,s,null)}function iae(t){return t.fold((e,n,r)=>{if(n&&cf(n))return[JI(n)];{let s=[];return n&&(s=cH(n)),ho(r,(i,o)=>{s=s.concat(o)}),s}})}function zv(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Zoe())(t._repo,t._path):t}function oae(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=ZI(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function aae(){return Xoe++}function cae(t,e,n){const r=e._path,s=TE(t,e),i=gH(t,n),o=t.listenProvider_.startListening(zv(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)Ae(!cf(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!Jt(l)&&u&&cf(u))return[JI(u).query];{let h=[];return u&&(h=h.concat(cH(u).map(f=>f.query))),ho(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){const u=c[l];t.listenProvider_.stopListening(zv(u),TE(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new tM(n)}node(){return this.node_}}class nM{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Qr(this.path_,e);return new nM(this.syncTree_,n)}node(){return J5(this.syncTree_,this.path_)}}const lae=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},m$=function(t,e,n){if(!t||typeof t!="object")return t;if(Ae(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return uae(t[".sv"],e,n);if(typeof t[".sv"]=="object")return dae(t[".sv"],e);Ae(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},uae=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Ae(!1,"Unexpected server value: "+t)}},dae=function(t,e,n){t.hasOwnProperty("increment")||Ae(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&Ae(!1,"Unexpected increment value: "+r);const s=e.node();if(Ae(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},hae=function(t,e,n,r){return rM(e,new nM(n,t),r)},mH=function(t,e,n){return rM(t,new tM(e),n)};function rM(t,e,n){const r=t.getPriority().val(),s=m$(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=m$(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new ls(a,fs(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new ls(s))),o.forEachChild(Sr,(a,c)=>{const l=rM(c,e.getImmediateChild(a),n);l!==c&&(i=i.updateImmediateChild(a,l))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function iM(t,e){let n=e instanceof Vn?e:new Vn(e),r=t,s=Vt(n);for(;s!==null;){const i=ew(r.node.children,s)||{children:{},childCount:0};r=new sM(s,r,i),n=er(n),s=Vt(n)}return r}function Qw(t){return t.node.value}function yH(t,e){t.node.value=e,S2(t)}function wH(t){return t.node.childCount>0}function fae(t){return Qw(t)===void 0&&!wH(t)}function XI(t,e){ho(t.node.children,(n,r)=>{e(new sM(n,t,r))})}function bH(t,e,n,r){n&&e(t),XI(t,s=>{bH(s,e,!0)})}function pae(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function T_(t){return new Vn(t.parent===null?t.name:T_(t.parent)+"/"+t.name)}function S2(t){t.parent!==null&&gae(t.parent,t.name,t)}function gae(t,e,n){const r=fae(n),s=ad(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,S2(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,S2(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mae=/[\[\].#$\/\u0000-\u001F\u007F]/,yae=/[\[\].#$\u0000-\u001F\u007F]/,gR=10*1024*1024,vH=function(t){return typeof t=="string"&&t.length!==0&&!mae.test(t)},EH=function(t){return typeof t=="string"&&t.length!==0&&!yae.test(t)},wae=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),EH(t)},bae=function(t,e,n,r){oM(D5(t,"value"),e,n)},oM=function(t,e,n){const r=n instanceof Vn?new Uie(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Yf(r));if(typeof e=="function")throw new Error(t+"contains a function "+Yf(r)+" with contents = "+e.toString());if(wz(e))throw new Error(t+"contains "+e.toString()+" "+Yf(r));if(typeof e=="string"&&e.length>gR/3&&VI(e)>gR)throw new Error(t+"contains a string greater than "+gR+" utf8 bytes "+Yf(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(ho(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!vH(o)))throw new Error(t+" contains an invalid key ("+o+") "+Yf(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Bie(r,o),oM(t,a,r),$ie(r)}),s&&i)throw new Error(t+' contains ".value" child '+Yf(r)+" in addition to actual children.")}},CH=function(t,e,n,r){if(!EH(n))throw new Error(D5(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},vae=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),CH(t,e,n)},_H=function(t,e){if(Vt(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Eae=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!vH(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!wae(n))throw new Error(D5(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cae{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function aM(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!F5(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function AH(t,e,n){aM(t,n),SH(t,r=>F5(r,e))}function Dl(t,e,n){aM(t,n),SH(t,r=>bc(r,e)||bc(e,r))}function SH(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(_ae(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function _ae(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();$v&&Xs("event: "+n.toString()),Yw(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aae="repo_interrupt",Sae=25;class xae{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Cae,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ex(),this.transactionQueueTree_=new sM,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Iae(t,e,n){if(t.stats_=B5(t.repoInfo_),t.forceRestClient_||cie())t.server_=new XS(t.repoInfo_,(r,s,i,o)=>{y$(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>w$(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Yr(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new $u(t.repoInfo_,e,(r,s,i,o)=>{y$(t,r,s,i,o)},r=>{w$(t,r)},r=>{Tae(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=fie(t.repoInfo_,()=>new doe(t.stats_,t.server_)),t.infoData_=new ooe,t.infoSyncTree_=new g$({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=I_(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),lM(t,"connected",!1),t.serverSyncTree_=new g$({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const l=o(a,c);Dl(t.eventQueue_,r._path,l)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function Nae(t){const n=t.infoData_.getNode(new Vn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function cM(t){return lae({timestamp:Nae(t)})}function y$(t,e,n,r,s){t.dataUpdateCount++;const i=new Vn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=KS(n,l=>fs(l));o=rae(t.serverSyncTree_,i,c,s)}else{const c=fs(n);o=hH(t.serverSyncTree_,i,c,s)}else if(r){const c=KS(n,l=>fs(l));o=eae(t.serverSyncTree_,i,c)}else{const c=fs(n);o=I_(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=tN(t,i)),Dl(t.eventQueue_,a,o)}function w$(t,e){lM(t,"connected",e),e===!1&&Oae(t)}function Tae(t,e){ho(e,(n,r)=>{lM(t,n,r)})}function lM(t,e,n){const r=new Vn("/.info/"+e),s=fs(n);t.infoData_.updateSnapshot(r,s);const i=I_(t.infoSyncTree_,r,s);Dl(t.eventQueue_,r,i)}function xH(t){return t.nextWriteId_++}function Rae(t,e,n){const r=sae(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=fs(s).withIndex(e._queryParams.getIndex());A2(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=I_(t.serverSyncTree_,e._path,i);else{const a=TE(t.serverSyncTree_,e);o=hH(t.serverSyncTree_,e._path,i,a)}return Dl(t.eventQueue_,e._path,o),cx(t.serverSyncTree_,e,n,null,!0),i},s=>(eN(t,"get for query "+Yr(e)+" failed: "+s),Promise.reject(new Error(s))))}function Pae(t,e,n,r,s){eN(t,"set",{path:e.toString(),value:n,priority:r});const i=cM(t),o=fs(n,r),a=J5(t.serverSyncTree_,e),c=mH(o,a,i),l=xH(t),u=dH(t.serverSyncTree_,e,c,l,!0);aM(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{const p=h==="ok";p||so("set at "+e+" failed: "+h);const g=gp(t.serverSyncTree_,l,!p);Dl(t.eventQueue_,e,g),Lae(t,s,h,f)});const d=PH(t,e);tN(t,d),Dl(t.eventQueue_,d,[])}function Oae(t){eN(t,"onDisconnectEvents");const e=cM(t),n=ex();b2(t.onDisconnect_,wn(),(s,i)=>{const o=hae(s,i,t.serverSyncTree_,e);Yz(n,s,o)});let r=[];b2(n,wn(),(s,i)=>{r=r.concat(I_(t.serverSyncTree_,s,i));const o=PH(t,s);tN(t,o)}),t.onDisconnect_=ex(),Dl(t.eventQueue_,wn(),r)}function kae(t,e,n){let r;Vt(e._path)===".info"?r=A2(t.infoSyncTree_,e,n):r=A2(t.serverSyncTree_,e,n),AH(t.eventQueue_,e._path,r)}function Dae(t,e,n){let r;Vt(e._path)===".info"?r=cx(t.infoSyncTree_,e,n):r=cx(t.serverSyncTree_,e,n),AH(t.eventQueue_,e._path,r)}function Mae(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Aae)}function eN(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Xs(n,...e)}function Lae(t,e,n,r){e&&Yw(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function IH(t,e,n){return J5(t.serverSyncTree_,e,n)||Ct.EMPTY_NODE}function uM(t,e=t.transactionQueueTree_){if(e||nN(t,e),Qw(e)){const n=TH(t,e);Ae(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&Uae(t,T_(e),n)}else wH(e)&&XI(e,n=>{uM(t,n)})}function Uae(t,e,n){const r=n.map(l=>l.currentWriteId),s=IH(t,e,r);let i=s;const o=s.hash();for(let l=0;l<n.length;l++){const u=n[l];Ae(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=wi(e,u.path);i=i.updateChild(d,u.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,l=>{eN(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(gp(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();nN(t,iM(t.transactionQueueTree_,e)),uM(t,t.transactionQueueTree_),Dl(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)Yw(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{so("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}tN(t,e)}},o)}function tN(t,e){const n=NH(t,e),r=T_(n),s=TH(t,n);return Bae(t,s,r),r}function Bae(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=wi(n,c.path);let u=!1,d;if(Ae(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,s=s.concat(gp(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Sae)u=!0,d="maxretry",s=s.concat(gp(t.serverSyncTree_,c.currentWriteId,!0));else{const h=IH(t,c.path,o);c.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){oM("transaction failed: Data returned ",f,c.path);let p=fs(f);typeof f=="object"&&f!=null&&ad(f,".priority")||(p=p.updatePriority(h.getPriority()));const w=c.currentWriteId,m=cM(t),b=mH(p,h,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=b,c.currentWriteId=xH(t),o.splice(o.indexOf(w),1),s=s.concat(dH(t.serverSyncTree_,c.path,b,c.currentWriteId,c.applyLocally)),s=s.concat(gp(t.serverSyncTree_,w,!0))}else u=!0,d="nodata",s=s.concat(gp(t.serverSyncTree_,c.currentWriteId,!0))}Dl(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}nN(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Yw(r[a]);uM(t,t.transactionQueueTree_)}function NH(t,e){let n,r=t.transactionQueueTree_;for(n=Vt(e);n!==null&&Qw(r)===void 0;)r=iM(r,n),e=er(e),n=Vt(e);return r}function TH(t,e){const n=[];return RH(t,e,n),n.sort((r,s)=>r.order-s.order),n}function RH(t,e,n){const r=Qw(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);XI(e,s=>{RH(t,s,n)})}function nN(t,e){const n=Qw(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,yH(e,n.length>0?n:void 0)}XI(e,r=>{nN(t,r)})}function PH(t,e){const n=T_(NH(t,e)),r=iM(t.transactionQueueTree_,e);return pae(r,s=>{mR(t,s)}),mR(t,r),bH(r,s=>{mR(t,s)}),n}function mR(t,e){const n=Qw(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Ae(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(Ae(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(gp(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?yH(e,void 0):n.length=i+1,Dl(t.eventQueue_,T_(e),s);for(let o=0;o<r.length;o++)Yw(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $ae(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function Fae(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):so(`Invalid query segment '${n}' in query '${t}'`)}return e}const b$=function(t,e){const n=jae(t),r=n.namespace;n.domain==="firebase.com"&&Qu(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Qu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Xse();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Rz(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Vn(n.pathString)}},jae=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(s=$ae(t.substring(u,d)));const h=Fae(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),i=r}"ns"in h&&(i=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wae{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Yr(this.snapshot.exportVal())}}class zae{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OH{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Ae(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return Jt(this._path)?null:$z(this._path)}get ref(){return new cd(this._repo,this._path)}get _queryIdentifier(){const e=s$(this._queryParams),n=L5(e);return n==="{}"?"default":n}get _queryObject(){return s$(this._queryParams)}isEqual(e){if(e=Vw(e),!(e instanceof dM))return!1;const n=this._repo===e._repo,r=F5(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+Lie(this._path)}}class cd extends dM{constructor(e,n){super(e,n,new H5,!1)}get parent(){const e=jz(this._path);return e===null?null:new cd(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class RE{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Vn(e),r=x2(this.ref,e);return new RE(this._node.getChild(n),r,Sr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new RE(s,x2(this.ref,r),Sr)))}hasChild(e){const n=new Vn(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function To(t,e){return t=Vw(t),t._checkNotDeleted("ref"),e!==void 0?x2(t._root,e):t._root}function x2(t,e){return t=Vw(t),Vt(t._path)===null?vae("child","path",e):CH("child","path",e),new cd(t._repo,Qr(t._path,e))}function kH(t){return _H("remove",t._path),Hv(t,null)}function Hv(t,e){t=Vw(t),_H("set",t._path),bae("set",e,t._path);const n=new qI;return Pae(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function rp(t){t=Vw(t);const e=new OH(()=>{}),n=new rN(e);return Rae(t._repo,t,n).then(r=>new RE(r,new cd(t._repo,t._path),t._queryParams.getIndex()))}class rN{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new Wae("value",this,new RE(e.snapshotNode,new cd(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new zae(this,e,n):null}matches(e){return e instanceof rN?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function Hae(t,e,n,r,s){const i=new OH(n,void 0),o=new rN(i);return kae(t._repo,t,o),()=>Dae(t._repo,t,o)}function v$(t,e,n,r){return Hae(t,"value",e)}qoe(cd);Joe(cd);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gae="FIREBASE_DATABASE_EMULATOR_HOST",I2={};let qae=!1;function Vae(t,e,n,r){t.repoInfo_=new Rz(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function Kae(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||Qu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Xs("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=b$(i,s),a=o.repoInfo,c;typeof process<"u"&&FB&&(c=FB[Gae]),c?(i=`http://${c}?ns=${a.namespace}`,o=b$(i,s),a=o.repoInfo):o.repoInfo.secure;const l=new uie(t.name,t.options,e);Eae("Invalid Firebase Database URL",o),Jt(o.path)||Qu("Database URL must point to the root of a Firebase Database (not including a child path).");const u=Qae(a,t,l,new lie(t.name,n));return new Jae(u,t)}function Yae(t,e){const n=I2[e];(!n||n[t.key]!==t)&&Qu(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Mae(t),delete n[t.key]}function Qae(t,e,n,r){let s=I2[e.name];s||(s={},I2[e.name]=s);let i=s[t.toURLString()];return i&&Qu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new xae(t,qae,n,r),s[t.toURLString()]=i,i}class Jae{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Iae(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new cd(this._repo,wn())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Yae(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Qu("Cannot call "+e+" on a deleted database.")}}function Zae(t=hz(),e){const n=Pse(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=vre("database");r&&Xae(n,...r)}return n}function Xae(t,e,n,r={}){t=Vw(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Qu("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Qu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new tS(tS.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:Ere(r.mockUserToken,t.app.options.projectId);i=new tS(o)}Vae(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ece(t){Vse(Dse),YS(new vE("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return Kae(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),My(jB,WB,t),My(jB,WB,"esm2017")}$u.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};$u.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};ece();const tce={apiKey:"AIzaSyAed5bn78c6Mb5Y3ezULH9CEg7IAKYFAps",authDomain:"chess-220ee.firebaseapp.com",databaseURL:"https://chess-220ee-default-rtdb.firebaseio.com",projectId:"chess-220ee",storageBucket:"chess-220ee.firebasestorage.app",messagingSenderId:"724477138097",appId:"1:724477138097:web:7dc15f79db3bda5c763e90"},nce=Mse().length?hz():dz(tce),lx=Zae(nce);var N2={},DH={exports:{}},Yo={},MH={exports:{}},LH={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,M){var j=O.length;O.push(M);e:for(;0<j;){var V=j-1>>>1,te=O[V];if(0<s(te,M))O[V]=M,O[j]=te,j=V;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var M=O[0],j=O.pop();if(j!==M){O[0]=j;e:for(var V=0,te=O.length,Z=te>>>1;V<Z;){var X=2*(V+1)-1,ce=O[X],ge=X+1,Me=O[ge];if(0>s(ce,j))ge<te&&0>s(Me,ce)?(O[V]=Me,O[ge]=j,V=ge):(O[V]=ce,O[X]=j,V=X);else if(ge<te&&0>s(Me,j))O[V]=Me,O[ge]=j,V=ge;else break e}}return M}function s(O,M){var j=O.sortIndex-M.sortIndex;return j!==0?j:O.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(O){for(var M=n(l);M!==null;){if(M.callback===null)r(l);else if(M.startTime<=O)r(l),M.sortIndex=M.expirationTime,e(c,M);else break;M=n(l)}}function A(O){if(g=!1,v(O),!p)if(n(c)!==null)p=!0,R(C);else{var M=n(l);M!==null&&B(A,M.startTime-O)}}function C(O,M){p=!1,g&&(g=!1,m(N),N=-1),f=!0;var j=h;try{for(v(M),d=n(c);d!==null&&(!(d.expirationTime>M)||O&&!P());){var V=d.callback;if(typeof V=="function"){d.callback=null,h=d.priorityLevel;var te=V(d.expirationTime<=M);M=t.unstable_now(),typeof te=="function"?d.callback=te:d===n(c)&&r(c),v(M)}else r(c);d=n(c)}if(d!==null)var Z=!0;else{var X=n(l);X!==null&&B(A,X.startTime-M),Z=!1}return Z}finally{d=null,h=j,f=!1}}var T=!1,x=null,N=-1,S=5,D=-1;function P(){return!(t.unstable_now()-D<S)}function $(){if(x!==null){var O=t.unstable_now();D=O;var M=!0;try{M=x(!0,O)}finally{M?G():(T=!1,x=null)}}else T=!1}var G;if(typeof b=="function")G=function(){b($)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,I=W.port2;W.port1.onmessage=$,G=function(){I.postMessage(null)}}else G=function(){w($,0)};function R(O){x=O,T||(T=!0,G())}function B(O,M){N=w(function(){O(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,R(C))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(O){switch(h){case 1:case 2:case 3:var M=3;break;default:M=h}var j=h;h=M;try{return O()}finally{h=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,M){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var j=h;h=O;try{return M()}finally{h=j}},t.unstable_scheduleCallback=function(O,M,j){var V=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?V+j:V):j=V,O){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=j+te,O={id:u++,callback:M,priorityLevel:O,startTime:j,expirationTime:te,sortIndex:-1},j>V?(O.sortIndex=j,e(l,O),n(c)===null&&O===n(l)&&(g?(m(N),N=-1):g=!0,B(A,j-V))):(O.sortIndex=te,e(c,O),p||f||(p=!0,R(C))),O},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(O){var M=h;return function(){var j=h;h=M;try{return O.apply(this,arguments)}finally{h=j}}}})(LH);MH.exports=LH;var rce=MH.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sce=k,qo=rce;function Ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var UH=new Set,PE={};function Zg(t,e){sw(t,e),sw(t+"Capture",e)}function sw(t,e){for(PE[t]=e,t=0;t<e.length;t++)UH.add(e[t])}var Ju=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),T2=Object.prototype.hasOwnProperty,ice=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E$={},C$={};function oce(t){return T2.call(C$,t)?!0:T2.call(E$,t)?!1:ice.test(t)?C$[t]=!0:(E$[t]=!0,!1)}function ace(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cce(t,e,n,r){if(e===null||typeof e>"u"||ace(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ni(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var $s={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$s[t]=new Ni(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$s[e]=new Ni(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$s[t]=new Ni(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$s[t]=new Ni(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$s[t]=new Ni(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$s[t]=new Ni(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$s[t]=new Ni(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$s[t]=new Ni(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$s[t]=new Ni(t,5,!1,t.toLowerCase(),null,!1,!1)});var hM=/[\-:]([a-z])/g;function fM(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(hM,fM);$s[e]=new Ni(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(hM,fM);$s[e]=new Ni(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(hM,fM);$s[e]=new Ni(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$s[t]=new Ni(t,1,!1,t.toLowerCase(),null,!1,!1)});$s.xlinkHref=new Ni("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$s[t]=new Ni(t,1,!1,t.toLowerCase(),null,!0,!0)});function pM(t,e,n,r){var s=$s.hasOwnProperty(e)?$s[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cce(e,n,s,r)&&(n=null),r||s===null?oce(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ld=sce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L1=Symbol.for("react.element"),fy=Symbol.for("react.portal"),py=Symbol.for("react.fragment"),gM=Symbol.for("react.strict_mode"),R2=Symbol.for("react.profiler"),BH=Symbol.for("react.provider"),$H=Symbol.for("react.context"),mM=Symbol.for("react.forward_ref"),P2=Symbol.for("react.suspense"),O2=Symbol.for("react.suspense_list"),yM=Symbol.for("react.memo"),Wd=Symbol.for("react.lazy"),FH=Symbol.for("react.offscreen"),_$=Symbol.iterator;function Mb(t){return t===null||typeof t!="object"?null:(t=_$&&t[_$]||t["@@iterator"],typeof t=="function"?t:null)}var br=Object.assign,yR;function mv(t){if(yR===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);yR=e&&e[1]||""}return`
`+yR+t}var wR=!1;function bR(t,e){if(!t||wR)return"";wR=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{wR=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?mv(t):""}function lce(t){switch(t.tag){case 5:return mv(t.type);case 16:return mv("Lazy");case 13:return mv("Suspense");case 19:return mv("SuspenseList");case 0:case 2:case 15:return t=bR(t.type,!1),t;case 11:return t=bR(t.type.render,!1),t;case 1:return t=bR(t.type,!0),t;default:return""}}function k2(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case py:return"Fragment";case fy:return"Portal";case R2:return"Profiler";case gM:return"StrictMode";case P2:return"Suspense";case O2:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case $H:return(t.displayName||"Context")+".Consumer";case BH:return(t._context.displayName||"Context")+".Provider";case mM:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yM:return e=t.displayName||null,e!==null?e:k2(t.type)||"Memo";case Wd:e=t._payload,t=t._init;try{return k2(t(e))}catch{}}return null}function uce(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return k2(e);case 8:return e===gM?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function lf(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jH(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dce(t){var e=jH(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function U1(t){t._valueTracker||(t._valueTracker=dce(t))}function WH(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=jH(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ux(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function D2(t,e){var n=e.checked;return br({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function A$(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=lf(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function zH(t,e){e=e.checked,e!=null&&pM(t,"checked",e,!1)}function M2(t,e){zH(t,e);var n=lf(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?L2(t,e.type,n):e.hasOwnProperty("defaultValue")&&L2(t,e.type,lf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function S$(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function L2(t,e,n){(e!=="number"||ux(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var yv=Array.isArray;function By(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+lf(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function U2(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ee(91));return br({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function x$(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ee(92));if(yv(n)){if(1<n.length)throw Error(Ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:lf(n)}}function HH(t,e){var n=lf(e.value),r=lf(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function I$(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function GH(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function B2(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?GH(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var B1,qH=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(B1=B1||document.createElement("div"),B1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=B1.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function OE(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Gv={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hce=["Webkit","ms","Moz","O"];Object.keys(Gv).forEach(function(t){hce.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gv[e]=Gv[t]})});function VH(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Gv.hasOwnProperty(t)&&Gv[t]?(""+e).trim():e+"px"}function KH(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=VH(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var fce=br({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $2(t,e){if(e){if(fce[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ee(62))}}function F2(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var j2=null;function wM(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var W2=null,$y=null,Fy=null;function N$(t){if(t=O_(t)){if(typeof W2!="function")throw Error(Ee(280));var e=t.stateNode;e&&(e=cN(e),W2(t.stateNode,t.type,e))}}function YH(t){$y?Fy?Fy.push(t):Fy=[t]:$y=t}function QH(){if($y){var t=$y,e=Fy;if(Fy=$y=null,N$(t),e)for(t=0;t<e.length;t++)N$(e[t])}}function JH(t,e){return t(e)}function ZH(){}var vR=!1;function XH(t,e,n){if(vR)return t(e,n);vR=!0;try{return JH(t,e,n)}finally{vR=!1,($y!==null||Fy!==null)&&(ZH(),QH())}}function kE(t,e){var n=t.stateNode;if(n===null)return null;var r=cN(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ee(231,e,typeof n));return n}var z2=!1;if(Ju)try{var Lb={};Object.defineProperty(Lb,"passive",{get:function(){z2=!0}}),window.addEventListener("test",Lb,Lb),window.removeEventListener("test",Lb,Lb)}catch{z2=!1}function pce(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var qv=!1,dx=null,hx=!1,H2=null,gce={onError:function(t){qv=!0,dx=t}};function mce(t,e,n,r,s,i,o,a,c){qv=!1,dx=null,pce.apply(gce,arguments)}function yce(t,e,n,r,s,i,o,a,c){if(mce.apply(this,arguments),qv){if(qv){var l=dx;qv=!1,dx=null}else throw Error(Ee(198));hx||(hx=!0,H2=l)}}function Xg(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function eG(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function T$(t){if(Xg(t)!==t)throw Error(Ee(188))}function wce(t){var e=t.alternate;if(!e){if(e=Xg(t),e===null)throw Error(Ee(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return T$(s),t;if(i===r)return T$(s),e;i=i.sibling}throw Error(Ee(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Ee(189))}}if(n.alternate!==r)throw Error(Ee(190))}if(n.tag!==3)throw Error(Ee(188));return n.stateNode.current===n?t:e}function tG(t){return t=wce(t),t!==null?nG(t):null}function nG(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=nG(t);if(e!==null)return e;t=t.sibling}return null}var rG=qo.unstable_scheduleCallback,R$=qo.unstable_cancelCallback,bce=qo.unstable_shouldYield,vce=qo.unstable_requestPaint,Or=qo.unstable_now,Ece=qo.unstable_getCurrentPriorityLevel,bM=qo.unstable_ImmediatePriority,sG=qo.unstable_UserBlockingPriority,fx=qo.unstable_NormalPriority,Cce=qo.unstable_LowPriority,iG=qo.unstable_IdlePriority,sN=null,xl=null;function _ce(t){if(xl&&typeof xl.onCommitFiberRoot=="function")try{xl.onCommitFiberRoot(sN,t,void 0,(t.current.flags&128)===128)}catch{}}var Ac=Math.clz32?Math.clz32:xce,Ace=Math.log,Sce=Math.LN2;function xce(t){return t>>>=0,t===0?32:31-(Ace(t)/Sce|0)|0}var $1=64,F1=4194304;function wv(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function px(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=wv(a):(i&=o,i!==0&&(r=wv(i)))}else o=n&~s,o!==0?r=wv(o):i!==0&&(r=wv(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ac(e),s=1<<n,r|=t[n],e&=~s;return r}function Ice(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nce(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ac(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=Ice(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function G2(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function oG(){var t=$1;return $1<<=1,!($1&4194240)&&($1=64),t}function ER(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function R_(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ac(e),t[e]=n}function Tce(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ac(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function vM(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ac(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Pn=0;function aG(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var cG,EM,lG,uG,dG,q2=!1,j1=[],$h=null,Fh=null,jh=null,DE=new Map,ME=new Map,Kd=[],Rce="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function P$(t,e){switch(t){case"focusin":case"focusout":$h=null;break;case"dragenter":case"dragleave":Fh=null;break;case"mouseover":case"mouseout":jh=null;break;case"pointerover":case"pointerout":DE.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ME.delete(e.pointerId)}}function Ub(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=O_(e),e!==null&&EM(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Pce(t,e,n,r,s){switch(e){case"focusin":return $h=Ub($h,t,e,n,r,s),!0;case"dragenter":return Fh=Ub(Fh,t,e,n,r,s),!0;case"mouseover":return jh=Ub(jh,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return DE.set(i,Ub(DE.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ME.set(i,Ub(ME.get(i)||null,t,e,n,r,s)),!0}return!1}function hG(t){var e=mp(t.target);if(e!==null){var n=Xg(e);if(n!==null){if(e=n.tag,e===13){if(e=eG(n),e!==null){t.blockedOn=e,dG(t.priority,function(){lG(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function nS(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=V2(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);j2=r,n.target.dispatchEvent(r),j2=null}else return e=O_(n),e!==null&&EM(e),t.blockedOn=n,!1;e.shift()}return!0}function O$(t,e,n){nS(t)&&n.delete(e)}function Oce(){q2=!1,$h!==null&&nS($h)&&($h=null),Fh!==null&&nS(Fh)&&(Fh=null),jh!==null&&nS(jh)&&(jh=null),DE.forEach(O$),ME.forEach(O$)}function Bb(t,e){t.blockedOn===e&&(t.blockedOn=null,q2||(q2=!0,qo.unstable_scheduleCallback(qo.unstable_NormalPriority,Oce)))}function LE(t){function e(s){return Bb(s,t)}if(0<j1.length){Bb(j1[0],t);for(var n=1;n<j1.length;n++){var r=j1[n];r.blockedOn===t&&(r.blockedOn=null)}}for($h!==null&&Bb($h,t),Fh!==null&&Bb(Fh,t),jh!==null&&Bb(jh,t),DE.forEach(e),ME.forEach(e),n=0;n<Kd.length;n++)r=Kd[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Kd.length&&(n=Kd[0],n.blockedOn===null);)hG(n),n.blockedOn===null&&Kd.shift()}var jy=ld.ReactCurrentBatchConfig,gx=!0;function kce(t,e,n,r){var s=Pn,i=jy.transition;jy.transition=null;try{Pn=1,CM(t,e,n,r)}finally{Pn=s,jy.transition=i}}function Dce(t,e,n,r){var s=Pn,i=jy.transition;jy.transition=null;try{Pn=4,CM(t,e,n,r)}finally{Pn=s,jy.transition=i}}function CM(t,e,n,r){if(gx){var s=V2(t,e,n,r);if(s===null)PR(t,e,r,mx,n),P$(t,r);else if(Pce(s,t,e,n,r))r.stopPropagation();else if(P$(t,r),e&4&&-1<Rce.indexOf(t)){for(;s!==null;){var i=O_(s);if(i!==null&&cG(i),i=V2(t,e,n,r),i===null&&PR(t,e,r,mx,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else PR(t,e,r,null,n)}}var mx=null;function V2(t,e,n,r){if(mx=null,t=wM(r),t=mp(t),t!==null)if(e=Xg(t),e===null)t=null;else if(n=e.tag,n===13){if(t=eG(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return mx=t,null}function fG(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ece()){case bM:return 1;case sG:return 4;case fx:case Cce:return 16;case iG:return 536870912;default:return 16}default:return 16}}var xh=null,_M=null,rS=null;function pG(){if(rS)return rS;var t,e=_M,n=e.length,r,s="value"in xh?xh.value:xh.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return rS=s.slice(t,1<r?1-r:void 0)}function sS(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function W1(){return!0}function k$(){return!1}function Qo(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?W1:k$,this.isPropagationStopped=k$,this}return br(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=W1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=W1)},persist:function(){},isPersistent:W1}),e}var Jw={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},AM=Qo(Jw),P_=br({},Jw,{view:0,detail:0}),Mce=Qo(P_),CR,_R,$b,iN=br({},P_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:SM,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$b&&($b&&t.type==="mousemove"?(CR=t.screenX-$b.screenX,_R=t.screenY-$b.screenY):_R=CR=0,$b=t),CR)},movementY:function(t){return"movementY"in t?t.movementY:_R}}),D$=Qo(iN),Lce=br({},iN,{dataTransfer:0}),Uce=Qo(Lce),Bce=br({},P_,{relatedTarget:0}),AR=Qo(Bce),$ce=br({},Jw,{animationName:0,elapsedTime:0,pseudoElement:0}),Fce=Qo($ce),jce=br({},Jw,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Wce=Qo(jce),zce=br({},Jw,{data:0}),M$=Qo(zce),Hce={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gce={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qce={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vce(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qce[t])?!!e[t]:!1}function SM(){return Vce}var Kce=br({},P_,{key:function(t){if(t.key){var e=Hce[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=sS(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Gce[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:SM,charCode:function(t){return t.type==="keypress"?sS(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sS(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Yce=Qo(Kce),Qce=br({},iN,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),L$=Qo(Qce),Jce=br({},P_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:SM}),Zce=Qo(Jce),Xce=br({},Jw,{propertyName:0,elapsedTime:0,pseudoElement:0}),ele=Qo(Xce),tle=br({},iN,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),nle=Qo(tle),rle=[9,13,27,32],xM=Ju&&"CompositionEvent"in window,Vv=null;Ju&&"documentMode"in document&&(Vv=document.documentMode);var sle=Ju&&"TextEvent"in window&&!Vv,gG=Ju&&(!xM||Vv&&8<Vv&&11>=Vv),U$=" ",B$=!1;function mG(t,e){switch(t){case"keyup":return rle.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yG(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gy=!1;function ile(t,e){switch(t){case"compositionend":return yG(e);case"keypress":return e.which!==32?null:(B$=!0,U$);case"textInput":return t=e.data,t===U$&&B$?null:t;default:return null}}function ole(t,e){if(gy)return t==="compositionend"||!xM&&mG(t,e)?(t=pG(),rS=_M=xh=null,gy=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gG&&e.locale!=="ko"?null:e.data;default:return null}}var ale={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ale[t.type]:e==="textarea"}function wG(t,e,n,r){YH(r),e=yx(e,"onChange"),0<e.length&&(n=new AM("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Kv=null,UE=null;function cle(t){TG(t,0)}function oN(t){var e=wy(t);if(WH(e))return t}function lle(t,e){if(t==="change")return e}var bG=!1;if(Ju){var SR;if(Ju){var xR="oninput"in document;if(!xR){var F$=document.createElement("div");F$.setAttribute("oninput","return;"),xR=typeof F$.oninput=="function"}SR=xR}else SR=!1;bG=SR&&(!document.documentMode||9<document.documentMode)}function j$(){Kv&&(Kv.detachEvent("onpropertychange",vG),UE=Kv=null)}function vG(t){if(t.propertyName==="value"&&oN(UE)){var e=[];wG(e,UE,t,wM(t)),XH(cle,e)}}function ule(t,e,n){t==="focusin"?(j$(),Kv=e,UE=n,Kv.attachEvent("onpropertychange",vG)):t==="focusout"&&j$()}function dle(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return oN(UE)}function hle(t,e){if(t==="click")return oN(e)}function fle(t,e){if(t==="input"||t==="change")return oN(e)}function ple(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nc=typeof Object.is=="function"?Object.is:ple;function BE(t,e){if(Nc(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!T2.call(e,s)||!Nc(t[s],e[s]))return!1}return!0}function W$(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function z$(t,e){var n=W$(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=W$(n)}}function EG(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?EG(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function CG(){for(var t=window,e=ux();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ux(t.document)}return e}function IM(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function gle(t){var e=CG(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&EG(n.ownerDocument.documentElement,n)){if(r!==null&&IM(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=z$(n,i);var o=z$(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mle=Ju&&"documentMode"in document&&11>=document.documentMode,my=null,K2=null,Yv=null,Y2=!1;function H$(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Y2||my==null||my!==ux(r)||(r=my,"selectionStart"in r&&IM(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yv&&BE(Yv,r)||(Yv=r,r=yx(K2,"onSelect"),0<r.length&&(e=new AM("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=my)))}function z1(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var yy={animationend:z1("Animation","AnimationEnd"),animationiteration:z1("Animation","AnimationIteration"),animationstart:z1("Animation","AnimationStart"),transitionend:z1("Transition","TransitionEnd")},IR={},_G={};Ju&&(_G=document.createElement("div").style,"AnimationEvent"in window||(delete yy.animationend.animation,delete yy.animationiteration.animation,delete yy.animationstart.animation),"TransitionEvent"in window||delete yy.transitionend.transition);function aN(t){if(IR[t])return IR[t];if(!yy[t])return t;var e=yy[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in _G)return IR[t]=e[n];return t}var AG=aN("animationend"),SG=aN("animationiteration"),xG=aN("animationstart"),IG=aN("transitionend"),NG=new Map,G$="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _f(t,e){NG.set(t,e),Zg(e,[t])}for(var NR=0;NR<G$.length;NR++){var TR=G$[NR],yle=TR.toLowerCase(),wle=TR[0].toUpperCase()+TR.slice(1);_f(yle,"on"+wle)}_f(AG,"onAnimationEnd");_f(SG,"onAnimationIteration");_f(xG,"onAnimationStart");_f("dblclick","onDoubleClick");_f("focusin","onFocus");_f("focusout","onBlur");_f(IG,"onTransitionEnd");sw("onMouseEnter",["mouseout","mouseover"]);sw("onMouseLeave",["mouseout","mouseover"]);sw("onPointerEnter",["pointerout","pointerover"]);sw("onPointerLeave",["pointerout","pointerover"]);Zg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zg("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ble=new Set("cancel close invalid load scroll toggle".split(" ").concat(bv));function q$(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,yce(r,e,void 0,t),t.currentTarget=null}function TG(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;q$(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;q$(s,a,l),i=c}}}if(hx)throw t=H2,hx=!1,H2=null,t}function rr(t,e){var n=e[ek];n===void 0&&(n=e[ek]=new Set);var r=t+"__bubble";n.has(r)||(RG(e,t,2,!1),n.add(r))}function RR(t,e,n){var r=0;e&&(r|=4),RG(n,t,r,e)}var H1="_reactListening"+Math.random().toString(36).slice(2);function $E(t){if(!t[H1]){t[H1]=!0,UH.forEach(function(n){n!=="selectionchange"&&(ble.has(n)||RR(n,!1,t),RR(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[H1]||(e[H1]=!0,RR("selectionchange",!1,e))}}function RG(t,e,n,r){switch(fG(e)){case 1:var s=kce;break;case 4:s=Dce;break;default:s=CM}n=s.bind(null,e,n,t),s=void 0,!z2||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function PR(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=mp(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}XH(function(){var l=i,u=wM(n),d=[];e:{var h=NG.get(t);if(h!==void 0){var f=AM,p=t;switch(t){case"keypress":if(sS(n)===0)break e;case"keydown":case"keyup":f=Yce;break;case"focusin":p="focus",f=AR;break;case"focusout":p="blur",f=AR;break;case"beforeblur":case"afterblur":f=AR;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=D$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Uce;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Zce;break;case AG:case SG:case xG:f=Fce;break;case IG:f=ele;break;case"scroll":f=Mce;break;case"wheel":f=nle;break;case"copy":case"cut":case"paste":f=Wce;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=L$}var g=(e&4)!==0,w=!g&&t==="scroll",m=g?h!==null?h+"Capture":null:h;g=[];for(var b=l,v;b!==null;){v=b;var A=v.stateNode;if(v.tag===5&&A!==null&&(v=A,m!==null&&(A=kE(b,m),A!=null&&g.push(FE(b,A,v)))),w)break;b=b.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==j2&&(p=n.relatedTarget||n.fromElement)&&(mp(p)||p[Zu]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?mp(p):null,p!==null&&(w=Xg(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=D$,A="onMouseLeave",m="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=L$,A="onPointerLeave",m="onPointerEnter",b="pointer"),w=f==null?h:wy(f),v=p==null?h:wy(p),h=new g(A,b+"leave",f,n,u),h.target=w,h.relatedTarget=v,A=null,mp(u)===l&&(g=new g(m,b+"enter",p,n,u),g.target=v,g.relatedTarget=w,A=g),w=A,f&&p)t:{for(g=f,m=p,b=0,v=g;v;v=xm(v))b++;for(v=0,A=m;A;A=xm(A))v++;for(;0<b-v;)g=xm(g),b--;for(;0<v-b;)m=xm(m),v--;for(;b--;){if(g===m||m!==null&&g===m.alternate)break t;g=xm(g),m=xm(m)}g=null}else g=null;f!==null&&V$(d,h,f,g,!1),p!==null&&w!==null&&V$(d,w,p,g,!0)}}e:{if(h=l?wy(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var C=lle;else if($$(h))if(bG)C=fle;else{C=dle;var T=ule}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=hle);if(C&&(C=C(t,l))){wG(d,C,n,u);break e}T&&T(t,h,l),t==="focusout"&&(T=h._wrapperState)&&T.controlled&&h.type==="number"&&L2(h,"number",h.value)}switch(T=l?wy(l):window,t){case"focusin":($$(T)||T.contentEditable==="true")&&(my=T,K2=l,Yv=null);break;case"focusout":Yv=K2=my=null;break;case"mousedown":Y2=!0;break;case"contextmenu":case"mouseup":case"dragend":Y2=!1,H$(d,n,u);break;case"selectionchange":if(mle)break;case"keydown":case"keyup":H$(d,n,u)}var x;if(xM)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else gy?mG(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(gG&&n.locale!=="ko"&&(gy||N!=="onCompositionStart"?N==="onCompositionEnd"&&gy&&(x=pG()):(xh=u,_M="value"in xh?xh.value:xh.textContent,gy=!0)),T=yx(l,N),0<T.length&&(N=new M$(N,t,null,n,u),d.push({event:N,listeners:T}),x?N.data=x:(x=yG(n),x!==null&&(N.data=x)))),(x=sle?ile(t,n):ole(t,n))&&(l=yx(l,"onBeforeInput"),0<l.length&&(u=new M$("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=x))}TG(d,e)})}function FE(t,e,n){return{instance:t,listener:e,currentTarget:n}}function yx(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=kE(t,n),i!=null&&r.unshift(FE(t,i,s)),i=kE(t,e),i!=null&&r.push(FE(t,i,s))),t=t.return}return r}function xm(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function V$(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=kE(n,i),c!=null&&o.unshift(FE(n,c,a))):s||(c=kE(n,i),c!=null&&o.push(FE(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var vle=/\r\n?/g,Ele=/\u0000|\uFFFD/g;function K$(t){return(typeof t=="string"?t:""+t).replace(vle,`
`).replace(Ele,"")}function G1(t,e,n){if(e=K$(e),K$(t)!==e&&n)throw Error(Ee(425))}function wx(){}var Q2=null,J2=null;function Z2(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var X2=typeof setTimeout=="function"?setTimeout:void 0,Cle=typeof clearTimeout=="function"?clearTimeout:void 0,Y$=typeof Promise=="function"?Promise:void 0,_le=typeof queueMicrotask=="function"?queueMicrotask:typeof Y$<"u"?function(t){return Y$.resolve(null).then(t).catch(Ale)}:X2;function Ale(t){setTimeout(function(){throw t})}function OR(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),LE(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);LE(e)}function Wh(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Q$(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Zw=Math.random().toString(36).slice(2),wl="__reactFiber$"+Zw,jE="__reactProps$"+Zw,Zu="__reactContainer$"+Zw,ek="__reactEvents$"+Zw,Sle="__reactListeners$"+Zw,xle="__reactHandles$"+Zw;function mp(t){var e=t[wl];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zu]||n[wl]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Q$(t);t!==null;){if(n=t[wl])return n;t=Q$(t)}return e}t=n,n=t.parentNode}return null}function O_(t){return t=t[wl]||t[Zu],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wy(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ee(33))}function cN(t){return t[jE]||null}var tk=[],by=-1;function Af(t){return{current:t}}function or(t){0>by||(t.current=tk[by],tk[by]=null,by--)}function tr(t,e){by++,tk[by]=t.current,t.current=e}var uf={},ni=Af(uf),io=Af(!1),vg=uf;function iw(t,e){var n=t.type.contextTypes;if(!n)return uf;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function oo(t){return t=t.childContextTypes,t!=null}function bx(){or(io),or(ni)}function J$(t,e,n){if(ni.current!==uf)throw Error(Ee(168));tr(ni,e),tr(io,n)}function PG(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Ee(108,uce(t)||"Unknown",s));return br({},n,r)}function vx(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||uf,vg=ni.current,tr(ni,t),tr(io,io.current),!0}function Z$(t,e,n){var r=t.stateNode;if(!r)throw Error(Ee(169));n?(t=PG(t,e,vg),r.__reactInternalMemoizedMergedChildContext=t,or(io),or(ni),tr(ni,t)):or(io),tr(io,n)}var fu=null,lN=!1,kR=!1;function OG(t){fu===null?fu=[t]:fu.push(t)}function Ile(t){lN=!0,OG(t)}function Sf(){if(!kR&&fu!==null){kR=!0;var t=0,e=Pn;try{var n=fu;for(Pn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}fu=null,lN=!1}catch(s){throw fu!==null&&(fu=fu.slice(t+1)),rG(bM,Sf),s}finally{Pn=e,kR=!1}}return null}var vy=[],Ey=0,Ex=null,Cx=0,Aa=[],Sa=0,Eg=null,Du=1,Mu="";function Qf(t,e){vy[Ey++]=Cx,vy[Ey++]=Ex,Ex=t,Cx=e}function kG(t,e,n){Aa[Sa++]=Du,Aa[Sa++]=Mu,Aa[Sa++]=Eg,Eg=t;var r=Du;t=Mu;var s=32-Ac(r)-1;r&=~(1<<s),n+=1;var i=32-Ac(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Du=1<<32-Ac(e)+s|n<<s|r,Mu=i+t}else Du=1<<i|n<<s|r,Mu=t}function NM(t){t.return!==null&&(Qf(t,1),kG(t,1,0))}function TM(t){for(;t===Ex;)Ex=vy[--Ey],vy[Ey]=null,Cx=vy[--Ey],vy[Ey]=null;for(;t===Eg;)Eg=Aa[--Sa],Aa[Sa]=null,Mu=Aa[--Sa],Aa[Sa]=null,Du=Aa[--Sa],Aa[Sa]=null}var zo=null,Fo=null,dr=!1,dc=null;function DG(t,e){var n=xa(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function X$(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zo=t,Fo=Wh(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zo=t,Fo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Eg!==null?{id:Du,overflow:Mu}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=xa(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zo=t,Fo=null,!0):!1;default:return!1}}function nk(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rk(t){if(dr){var e=Fo;if(e){var n=e;if(!X$(t,e)){if(nk(t))throw Error(Ee(418));e=Wh(n.nextSibling);var r=zo;e&&X$(t,e)?DG(r,n):(t.flags=t.flags&-4097|2,dr=!1,zo=t)}}else{if(nk(t))throw Error(Ee(418));t.flags=t.flags&-4097|2,dr=!1,zo=t}}}function e6(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zo=t}function q1(t){if(t!==zo)return!1;if(!dr)return e6(t),dr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Z2(t.type,t.memoizedProps)),e&&(e=Fo)){if(nk(t))throw MG(),Error(Ee(418));for(;e;)DG(t,e),e=Wh(e.nextSibling)}if(e6(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Fo=Wh(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Fo=null}}else Fo=zo?Wh(t.stateNode.nextSibling):null;return!0}function MG(){for(var t=Fo;t;)t=Wh(t.nextSibling)}function ow(){Fo=zo=null,dr=!1}function RM(t){dc===null?dc=[t]:dc.push(t)}var Nle=ld.ReactCurrentBatchConfig;function Fb(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ee(309));var r=n.stateNode}if(!r)throw Error(Ee(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Ee(284));if(!n._owner)throw Error(Ee(290,t))}return t}function V1(t,e){throw t=Object.prototype.toString.call(e),Error(Ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function t6(t){var e=t._init;return e(t._payload)}function LG(t){function e(m,b){if(t){var v=m.deletions;v===null?(m.deletions=[b],m.flags|=16):v.push(b)}}function n(m,b){if(!t)return null;for(;b!==null;)e(m,b),b=b.sibling;return null}function r(m,b){for(m=new Map;b!==null;)b.key!==null?m.set(b.key,b):m.set(b.index,b),b=b.sibling;return m}function s(m,b){return m=qh(m,b),m.index=0,m.sibling=null,m}function i(m,b,v){return m.index=v,t?(v=m.alternate,v!==null?(v=v.index,v<b?(m.flags|=2,b):v):(m.flags|=2,b)):(m.flags|=1048576,b)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,b,v,A){return b===null||b.tag!==6?(b=FR(v,m.mode,A),b.return=m,b):(b=s(b,v),b.return=m,b)}function c(m,b,v,A){var C=v.type;return C===py?u(m,b,v.props.children,A,v.key):b!==null&&(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Wd&&t6(C)===b.type)?(A=s(b,v.props),A.ref=Fb(m,b,v),A.return=m,A):(A=dS(v.type,v.key,v.props,null,m.mode,A),A.ref=Fb(m,b,v),A.return=m,A)}function l(m,b,v,A){return b===null||b.tag!==4||b.stateNode.containerInfo!==v.containerInfo||b.stateNode.implementation!==v.implementation?(b=jR(v,m.mode,A),b.return=m,b):(b=s(b,v.children||[]),b.return=m,b)}function u(m,b,v,A,C){return b===null||b.tag!==7?(b=ag(v,m.mode,A,C),b.return=m,b):(b=s(b,v),b.return=m,b)}function d(m,b,v){if(typeof b=="string"&&b!==""||typeof b=="number")return b=FR(""+b,m.mode,v),b.return=m,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case L1:return v=dS(b.type,b.key,b.props,null,m.mode,v),v.ref=Fb(m,null,b),v.return=m,v;case fy:return b=jR(b,m.mode,v),b.return=m,b;case Wd:var A=b._init;return d(m,A(b._payload),v)}if(yv(b)||Mb(b))return b=ag(b,m.mode,v,null),b.return=m,b;V1(m,b)}return null}function h(m,b,v,A){var C=b!==null?b.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return C!==null?null:a(m,b,""+v,A);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case L1:return v.key===C?c(m,b,v,A):null;case fy:return v.key===C?l(m,b,v,A):null;case Wd:return C=v._init,h(m,b,C(v._payload),A)}if(yv(v)||Mb(v))return C!==null?null:u(m,b,v,A,null);V1(m,v)}return null}function f(m,b,v,A,C){if(typeof A=="string"&&A!==""||typeof A=="number")return m=m.get(v)||null,a(b,m,""+A,C);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case L1:return m=m.get(A.key===null?v:A.key)||null,c(b,m,A,C);case fy:return m=m.get(A.key===null?v:A.key)||null,l(b,m,A,C);case Wd:var T=A._init;return f(m,b,v,T(A._payload),C)}if(yv(A)||Mb(A))return m=m.get(v)||null,u(b,m,A,C,null);V1(b,A)}return null}function p(m,b,v,A){for(var C=null,T=null,x=b,N=b=0,S=null;x!==null&&N<v.length;N++){x.index>N?(S=x,x=null):S=x.sibling;var D=h(m,x,v[N],A);if(D===null){x===null&&(x=S);break}t&&x&&D.alternate===null&&e(m,x),b=i(D,b,N),T===null?C=D:T.sibling=D,T=D,x=S}if(N===v.length)return n(m,x),dr&&Qf(m,N),C;if(x===null){for(;N<v.length;N++)x=d(m,v[N],A),x!==null&&(b=i(x,b,N),T===null?C=x:T.sibling=x,T=x);return dr&&Qf(m,N),C}for(x=r(m,x);N<v.length;N++)S=f(x,m,N,v[N],A),S!==null&&(t&&S.alternate!==null&&x.delete(S.key===null?N:S.key),b=i(S,b,N),T===null?C=S:T.sibling=S,T=S);return t&&x.forEach(function(P){return e(m,P)}),dr&&Qf(m,N),C}function g(m,b,v,A){var C=Mb(v);if(typeof C!="function")throw Error(Ee(150));if(v=C.call(v),v==null)throw Error(Ee(151));for(var T=C=null,x=b,N=b=0,S=null,D=v.next();x!==null&&!D.done;N++,D=v.next()){x.index>N?(S=x,x=null):S=x.sibling;var P=h(m,x,D.value,A);if(P===null){x===null&&(x=S);break}t&&x&&P.alternate===null&&e(m,x),b=i(P,b,N),T===null?C=P:T.sibling=P,T=P,x=S}if(D.done)return n(m,x),dr&&Qf(m,N),C;if(x===null){for(;!D.done;N++,D=v.next())D=d(m,D.value,A),D!==null&&(b=i(D,b,N),T===null?C=D:T.sibling=D,T=D);return dr&&Qf(m,N),C}for(x=r(m,x);!D.done;N++,D=v.next())D=f(x,m,N,D.value,A),D!==null&&(t&&D.alternate!==null&&x.delete(D.key===null?N:D.key),b=i(D,b,N),T===null?C=D:T.sibling=D,T=D);return t&&x.forEach(function($){return e(m,$)}),dr&&Qf(m,N),C}function w(m,b,v,A){if(typeof v=="object"&&v!==null&&v.type===py&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case L1:e:{for(var C=v.key,T=b;T!==null;){if(T.key===C){if(C=v.type,C===py){if(T.tag===7){n(m,T.sibling),b=s(T,v.props.children),b.return=m,m=b;break e}}else if(T.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Wd&&t6(C)===T.type){n(m,T.sibling),b=s(T,v.props),b.ref=Fb(m,T,v),b.return=m,m=b;break e}n(m,T);break}else e(m,T);T=T.sibling}v.type===py?(b=ag(v.props.children,m.mode,A,v.key),b.return=m,m=b):(A=dS(v.type,v.key,v.props,null,m.mode,A),A.ref=Fb(m,b,v),A.return=m,m=A)}return o(m);case fy:e:{for(T=v.key;b!==null;){if(b.key===T)if(b.tag===4&&b.stateNode.containerInfo===v.containerInfo&&b.stateNode.implementation===v.implementation){n(m,b.sibling),b=s(b,v.children||[]),b.return=m,m=b;break e}else{n(m,b);break}else e(m,b);b=b.sibling}b=jR(v,m.mode,A),b.return=m,m=b}return o(m);case Wd:return T=v._init,w(m,b,T(v._payload),A)}if(yv(v))return p(m,b,v,A);if(Mb(v))return g(m,b,v,A);V1(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,b!==null&&b.tag===6?(n(m,b.sibling),b=s(b,v),b.return=m,m=b):(n(m,b),b=FR(v,m.mode,A),b.return=m,m=b),o(m)):n(m,b)}return w}var aw=LG(!0),UG=LG(!1),_x=Af(null),Ax=null,Cy=null,PM=null;function OM(){PM=Cy=Ax=null}function kM(t){var e=_x.current;or(_x),t._currentValue=e}function sk(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Wy(t,e){Ax=t,PM=Cy=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(no=!0),t.firstContext=null)}function Ra(t){var e=t._currentValue;if(PM!==t)if(t={context:t,memoizedValue:e,next:null},Cy===null){if(Ax===null)throw Error(Ee(308));Cy=t,Ax.dependencies={lanes:0,firstContext:t}}else Cy=Cy.next=t;return e}var yp=null;function DM(t){yp===null?yp=[t]:yp.push(t)}function BG(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,DM(e)):(n.next=s.next,s.next=n),e.interleaved=n,Xu(t,r)}function Xu(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var zd=!1;function MM(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $G(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fu(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zh(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,dn&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Xu(t,n)}return s=r.interleaved,s===null?(e.next=e,DM(r)):(e.next=s.next,s.next=e),r.interleaved=e,Xu(t,n)}function iS(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vM(t,n)}}function n6(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Sx(t,e,n,r){var s=t.updateQueue;zd=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=br({},d,h);break e;case 2:zd=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);_g|=o,t.lanes=o,t.memoizedState=d}}function r6(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Ee(191,s));s.call(r)}}}var k_={},Il=Af(k_),WE=Af(k_),zE=Af(k_);function wp(t){if(t===k_)throw Error(Ee(174));return t}function LM(t,e){switch(tr(zE,e),tr(WE,t),tr(Il,k_),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:B2(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=B2(e,t)}or(Il),tr(Il,e)}function cw(){or(Il),or(WE),or(zE)}function FG(t){wp(zE.current);var e=wp(Il.current),n=B2(e,t.type);e!==n&&(tr(WE,t),tr(Il,n))}function UM(t){WE.current===t&&(or(Il),or(WE))}var pr=Af(0);function xx(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var DR=[];function BM(){for(var t=0;t<DR.length;t++)DR[t]._workInProgressVersionPrimary=null;DR.length=0}var oS=ld.ReactCurrentDispatcher,MR=ld.ReactCurrentBatchConfig,Cg=0,wr=null,qr=null,ds=null,Ix=!1,Qv=!1,HE=0,Tle=0;function Hs(){throw Error(Ee(321))}function $M(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Nc(t[n],e[n]))return!1;return!0}function FM(t,e,n,r,s,i){if(Cg=i,wr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,oS.current=t===null||t.memoizedState===null?kle:Dle,t=n(r,s),Qv){i=0;do{if(Qv=!1,HE=0,25<=i)throw Error(Ee(301));i+=1,ds=qr=null,e.updateQueue=null,oS.current=Mle,t=n(r,s)}while(Qv)}if(oS.current=Nx,e=qr!==null&&qr.next!==null,Cg=0,ds=qr=wr=null,Ix=!1,e)throw Error(Ee(300));return t}function jM(){var t=HE!==0;return HE=0,t}function Qc(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ds===null?wr.memoizedState=ds=t:ds=ds.next=t,ds}function Pa(){if(qr===null){var t=wr.alternate;t=t!==null?t.memoizedState:null}else t=qr.next;var e=ds===null?wr.memoizedState:ds.next;if(e!==null)ds=e,qr=t;else{if(t===null)throw Error(Ee(310));qr=t,t={memoizedState:qr.memoizedState,baseState:qr.baseState,baseQueue:qr.baseQueue,queue:qr.queue,next:null},ds===null?wr.memoizedState=ds=t:ds=ds.next=t}return ds}function GE(t,e){return typeof e=="function"?e(t):e}function LR(t){var e=Pa(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var r=qr,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((Cg&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,wr.lanes|=u,_g|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,Nc(r,e.memoizedState)||(no=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,wr.lanes|=i,_g|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function UR(t){var e=Pa(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Nc(i,e.memoizedState)||(no=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function jG(){}function WG(t,e){var n=wr,r=Pa(),s=e(),i=!Nc(r.memoizedState,s);if(i&&(r.memoizedState=s,no=!0),r=r.queue,WM(GG.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ds!==null&&ds.memoizedState.tag&1){if(n.flags|=2048,qE(9,HG.bind(null,n,r,s,e),void 0,null),vs===null)throw Error(Ee(349));Cg&30||zG(n,e,s)}return s}function zG(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=wr.updateQueue,e===null?(e={lastEffect:null,stores:null},wr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function HG(t,e,n,r){e.value=n,e.getSnapshot=r,qG(e)&&VG(t)}function GG(t,e,n){return n(function(){qG(e)&&VG(t)})}function qG(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Nc(t,n)}catch{return!0}}function VG(t){var e=Xu(t,1);e!==null&&Sc(e,t,1,-1)}function s6(t){var e=Qc();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:GE,lastRenderedState:t},e.queue=t,t=t.dispatch=Ole.bind(null,wr,t),[e.memoizedState,t]}function qE(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=wr.updateQueue,e===null?(e={lastEffect:null,stores:null},wr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function KG(){return Pa().memoizedState}function aS(t,e,n,r){var s=Qc();wr.flags|=t,s.memoizedState=qE(1|e,n,void 0,r===void 0?null:r)}function uN(t,e,n,r){var s=Pa();r=r===void 0?null:r;var i=void 0;if(qr!==null){var o=qr.memoizedState;if(i=o.destroy,r!==null&&$M(r,o.deps)){s.memoizedState=qE(e,n,i,r);return}}wr.flags|=t,s.memoizedState=qE(1|e,n,i,r)}function i6(t,e){return aS(8390656,8,t,e)}function WM(t,e){return uN(2048,8,t,e)}function YG(t,e){return uN(4,2,t,e)}function QG(t,e){return uN(4,4,t,e)}function JG(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ZG(t,e,n){return n=n!=null?n.concat([t]):null,uN(4,4,JG.bind(null,e,t),n)}function zM(){}function XG(t,e){var n=Pa();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$M(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function eq(t,e){var n=Pa();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$M(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function tq(t,e,n){return Cg&21?(Nc(n,e)||(n=oG(),wr.lanes|=n,_g|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,no=!0),t.memoizedState=n)}function Rle(t,e){var n=Pn;Pn=n!==0&&4>n?n:4,t(!0);var r=MR.transition;MR.transition={};try{t(!1),e()}finally{Pn=n,MR.transition=r}}function nq(){return Pa().memoizedState}function Ple(t,e,n){var r=Gh(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rq(t))sq(e,n);else if(n=BG(t,e,n,r),n!==null){var s=_i();Sc(n,t,r,s),iq(n,e,r)}}function Ole(t,e,n){var r=Gh(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rq(t))sq(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Nc(a,o)){var c=e.interleaved;c===null?(s.next=s,DM(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=BG(t,e,s,r),n!==null&&(s=_i(),Sc(n,t,r,s),iq(n,e,r))}}function rq(t){var e=t.alternate;return t===wr||e!==null&&e===wr}function sq(t,e){Qv=Ix=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function iq(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vM(t,n)}}var Nx={readContext:Ra,useCallback:Hs,useContext:Hs,useEffect:Hs,useImperativeHandle:Hs,useInsertionEffect:Hs,useLayoutEffect:Hs,useMemo:Hs,useReducer:Hs,useRef:Hs,useState:Hs,useDebugValue:Hs,useDeferredValue:Hs,useTransition:Hs,useMutableSource:Hs,useSyncExternalStore:Hs,useId:Hs,unstable_isNewReconciler:!1},kle={readContext:Ra,useCallback:function(t,e){return Qc().memoizedState=[t,e===void 0?null:e],t},useContext:Ra,useEffect:i6,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,aS(4194308,4,JG.bind(null,e,t),n)},useLayoutEffect:function(t,e){return aS(4194308,4,t,e)},useInsertionEffect:function(t,e){return aS(4,2,t,e)},useMemo:function(t,e){var n=Qc();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Qc();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Ple.bind(null,wr,t),[r.memoizedState,t]},useRef:function(t){var e=Qc();return t={current:t},e.memoizedState=t},useState:s6,useDebugValue:zM,useDeferredValue:function(t){return Qc().memoizedState=t},useTransition:function(){var t=s6(!1),e=t[0];return t=Rle.bind(null,t[1]),Qc().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=wr,s=Qc();if(dr){if(n===void 0)throw Error(Ee(407));n=n()}else{if(n=e(),vs===null)throw Error(Ee(349));Cg&30||zG(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,i6(GG.bind(null,r,i,t),[t]),r.flags|=2048,qE(9,HG.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Qc(),e=vs.identifierPrefix;if(dr){var n=Mu,r=Du;n=(r&~(1<<32-Ac(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=HE++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Tle++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Dle={readContext:Ra,useCallback:XG,useContext:Ra,useEffect:WM,useImperativeHandle:ZG,useInsertionEffect:YG,useLayoutEffect:QG,useMemo:eq,useReducer:LR,useRef:KG,useState:function(){return LR(GE)},useDebugValue:zM,useDeferredValue:function(t){var e=Pa();return tq(e,qr.memoizedState,t)},useTransition:function(){var t=LR(GE)[0],e=Pa().memoizedState;return[t,e]},useMutableSource:jG,useSyncExternalStore:WG,useId:nq,unstable_isNewReconciler:!1},Mle={readContext:Ra,useCallback:XG,useContext:Ra,useEffect:WM,useImperativeHandle:ZG,useInsertionEffect:YG,useLayoutEffect:QG,useMemo:eq,useReducer:UR,useRef:KG,useState:function(){return UR(GE)},useDebugValue:zM,useDeferredValue:function(t){var e=Pa();return qr===null?e.memoizedState=t:tq(e,qr.memoizedState,t)},useTransition:function(){var t=UR(GE)[0],e=Pa().memoizedState;return[t,e]},useMutableSource:jG,useSyncExternalStore:WG,useId:nq,unstable_isNewReconciler:!1};function ec(t,e){if(t&&t.defaultProps){e=br({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ik(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:br({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var dN={isMounted:function(t){return(t=t._reactInternals)?Xg(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=_i(),s=Gh(t),i=Fu(r,s);i.payload=e,n!=null&&(i.callback=n),e=zh(t,i,s),e!==null&&(Sc(e,t,s,r),iS(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=_i(),s=Gh(t),i=Fu(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=zh(t,i,s),e!==null&&(Sc(e,t,s,r),iS(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_i(),r=Gh(t),s=Fu(n,r);s.tag=2,e!=null&&(s.callback=e),e=zh(t,s,r),e!==null&&(Sc(e,t,r,n),iS(e,t,r))}};function o6(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!BE(n,r)||!BE(s,i):!0}function oq(t,e,n){var r=!1,s=uf,i=e.contextType;return typeof i=="object"&&i!==null?i=Ra(i):(s=oo(e)?vg:ni.current,r=e.contextTypes,i=(r=r!=null)?iw(t,s):uf),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=dN,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function a6(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&dN.enqueueReplaceState(e,e.state,null)}function ok(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},MM(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ra(i):(i=oo(e)?vg:ni.current,s.context=iw(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ik(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&dN.enqueueReplaceState(s,s.state,null),Sx(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function lw(t,e){try{var n="",r=e;do n+=lce(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function BR(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ak(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Lle=typeof WeakMap=="function"?WeakMap:Map;function aq(t,e,n){n=Fu(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Rx||(Rx=!0,yk=r),ak(t,e)},n}function cq(t,e,n){n=Fu(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){ak(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ak(t,e),typeof r!="function"&&(Hh===null?Hh=new Set([this]):Hh.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function c6(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Lle;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Qle.bind(null,t,e,n),e.then(t,t))}function l6(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function u6(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Fu(-1,1),e.tag=2,zh(n,e,1))),n.lanes|=1),t)}var Ule=ld.ReactCurrentOwner,no=!1;function hi(t,e,n,r){e.child=t===null?UG(e,null,n,r):aw(e,t.child,n,r)}function d6(t,e,n,r,s){n=n.render;var i=e.ref;return Wy(e,s),r=FM(t,e,n,r,i,s),n=jM(),t!==null&&!no?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ed(t,e,s)):(dr&&n&&NM(e),e.flags|=1,hi(t,e,r,s),e.child)}function h6(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!JM(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,lq(t,e,i,r,s)):(t=dS(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:BE,n(o,r)&&t.ref===e.ref)return ed(t,e,s)}return e.flags|=1,t=qh(i,r),t.ref=e.ref,t.return=e,e.child=t}function lq(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(BE(i,r)&&t.ref===e.ref)if(no=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(no=!0);else return e.lanes=t.lanes,ed(t,e,s)}return ck(t,e,n,r,s)}function uq(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},tr(Ay,Mo),Mo|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,tr(Ay,Mo),Mo|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,tr(Ay,Mo),Mo|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,tr(Ay,Mo),Mo|=r;return hi(t,e,s,n),e.child}function dq(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ck(t,e,n,r,s){var i=oo(n)?vg:ni.current;return i=iw(e,i),Wy(e,s),n=FM(t,e,n,r,i,s),r=jM(),t!==null&&!no?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ed(t,e,s)):(dr&&r&&NM(e),e.flags|=1,hi(t,e,n,s),e.child)}function f6(t,e,n,r,s){if(oo(n)){var i=!0;vx(e)}else i=!1;if(Wy(e,s),e.stateNode===null)cS(t,e),oq(e,n,r),ok(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Ra(l):(l=oo(n)?vg:ni.current,l=iw(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&a6(e,o,r,l),zd=!1;var h=e.memoizedState;o.state=h,Sx(e,r,o,s),c=e.memoizedState,a!==r||h!==c||io.current||zd?(typeof u=="function"&&(ik(e,n,u,r),c=e.memoizedState),(a=zd||o6(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,$G(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:ec(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ra(c):(c=oo(n)?vg:ni.current,c=iw(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&a6(e,o,r,c),zd=!1,h=e.memoizedState,o.state=h,Sx(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||io.current||zd?(typeof f=="function"&&(ik(e,n,f,r),p=e.memoizedState),(l=zd||o6(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return lk(t,e,n,r,i,s)}function lk(t,e,n,r,s,i){dq(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Z$(e,n,!1),ed(t,e,i);r=e.stateNode,Ule.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=aw(e,t.child,null,i),e.child=aw(e,null,a,i)):hi(t,e,a,i),e.memoizedState=r.state,s&&Z$(e,n,!0),e.child}function hq(t){var e=t.stateNode;e.pendingContext?J$(t,e.pendingContext,e.pendingContext!==e.context):e.context&&J$(t,e.context,!1),LM(t,e.containerInfo)}function p6(t,e,n,r,s){return ow(),RM(s),e.flags|=256,hi(t,e,n,r),e.child}var uk={dehydrated:null,treeContext:null,retryLane:0};function dk(t){return{baseLanes:t,cachePool:null,transitions:null}}function fq(t,e,n){var r=e.pendingProps,s=pr.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),tr(pr,s&1),t===null)return rk(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=pN(o,r,0,null),t=ag(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=dk(n),e.memoizedState=uk,t):HM(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Ble(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=qh(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=qh(a,i):(i=ag(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?dk(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=uk,r}return i=t.child,t=i.sibling,r=qh(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function HM(t,e){return e=pN({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function K1(t,e,n,r){return r!==null&&RM(r),aw(e,t.child,null,n),t=HM(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ble(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=BR(Error(Ee(422))),K1(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=pN({mode:"visible",children:r.children},s,0,null),i=ag(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&aw(e,t.child,null,o),e.child.memoizedState=dk(o),e.memoizedState=uk,i);if(!(e.mode&1))return K1(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Ee(419)),r=BR(i,r,void 0),K1(t,e,o,r)}if(a=(o&t.childLanes)!==0,no||a){if(r=vs,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Xu(t,s),Sc(r,t,s,-1))}return QM(),r=BR(Error(Ee(421))),K1(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Jle.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Fo=Wh(s.nextSibling),zo=e,dr=!0,dc=null,t!==null&&(Aa[Sa++]=Du,Aa[Sa++]=Mu,Aa[Sa++]=Eg,Du=t.id,Mu=t.overflow,Eg=e),e=HM(e,r.children),e.flags|=4096,e)}function g6(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),sk(t.return,e,n)}function $R(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function pq(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(hi(t,e,r.children,n),r=pr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&g6(t,n,e);else if(t.tag===19)g6(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(tr(pr,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&xx(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),$R(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&xx(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}$R(e,!0,n,null,i);break;case"together":$R(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cS(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ed(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),_g|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ee(153));if(e.child!==null){for(t=e.child,n=qh(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=qh(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function $le(t,e,n){switch(e.tag){case 3:hq(e),ow();break;case 5:FG(e);break;case 1:oo(e.type)&&vx(e);break;case 4:LM(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;tr(_x,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(tr(pr,pr.current&1),e.flags|=128,null):n&e.child.childLanes?fq(t,e,n):(tr(pr,pr.current&1),t=ed(t,e,n),t!==null?t.sibling:null);tr(pr,pr.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return pq(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),tr(pr,pr.current),r)break;return null;case 22:case 23:return e.lanes=0,uq(t,e,n)}return ed(t,e,n)}var gq,hk,mq,yq;gq=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hk=function(){};mq=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,wp(Il.current);var i=null;switch(n){case"input":s=D2(t,s),r=D2(t,r),i=[];break;case"select":s=br({},s,{value:void 0}),r=br({},r,{value:void 0}),i=[];break;case"textarea":s=U2(t,s),r=U2(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=wx)}$2(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(PE.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(PE.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&rr("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};yq=function(t,e,n,r){n!==r&&(e.flags|=4)};function jb(t,e){if(!dr)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Gs(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Fle(t,e,n){var r=e.pendingProps;switch(TM(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(e),null;case 1:return oo(e.type)&&bx(),Gs(e),null;case 3:return r=e.stateNode,cw(),or(io),or(ni),BM(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(q1(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,dc!==null&&(vk(dc),dc=null))),hk(t,e),Gs(e),null;case 5:UM(e);var s=wp(zE.current);if(n=e.type,t!==null&&e.stateNode!=null)mq(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ee(166));return Gs(e),null}if(t=wp(Il.current),q1(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[wl]=e,r[jE]=i,t=(e.mode&1)!==0,n){case"dialog":rr("cancel",r),rr("close",r);break;case"iframe":case"object":case"embed":rr("load",r);break;case"video":case"audio":for(s=0;s<bv.length;s++)rr(bv[s],r);break;case"source":rr("error",r);break;case"img":case"image":case"link":rr("error",r),rr("load",r);break;case"details":rr("toggle",r);break;case"input":A$(r,i),rr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},rr("invalid",r);break;case"textarea":x$(r,i),rr("invalid",r)}$2(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&G1(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&G1(r.textContent,a,t),s=["children",""+a]):PE.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&rr("scroll",r)}switch(n){case"input":U1(r),S$(r,i,!0);break;case"textarea":U1(r),I$(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=wx)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=GH(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[wl]=e,t[jE]=r,gq(t,e,!1,!1),e.stateNode=t;e:{switch(o=F2(n,r),n){case"dialog":rr("cancel",t),rr("close",t),s=r;break;case"iframe":case"object":case"embed":rr("load",t),s=r;break;case"video":case"audio":for(s=0;s<bv.length;s++)rr(bv[s],t);s=r;break;case"source":rr("error",t),s=r;break;case"img":case"image":case"link":rr("error",t),rr("load",t),s=r;break;case"details":rr("toggle",t),s=r;break;case"input":A$(t,r),s=D2(t,r),rr("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=br({},r,{value:void 0}),rr("invalid",t);break;case"textarea":x$(t,r),s=U2(t,r),rr("invalid",t);break;default:s=r}$2(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?KH(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&qH(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&OE(t,c):typeof c=="number"&&OE(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(PE.hasOwnProperty(i)?c!=null&&i==="onScroll"&&rr("scroll",t):c!=null&&pM(t,i,c,o))}switch(n){case"input":U1(t),S$(t,r,!1);break;case"textarea":U1(t),I$(t);break;case"option":r.value!=null&&t.setAttribute("value",""+lf(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?By(t,!!r.multiple,i,!1):r.defaultValue!=null&&By(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=wx)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Gs(e),null;case 6:if(t&&e.stateNode!=null)yq(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ee(166));if(n=wp(zE.current),wp(Il.current),q1(e)){if(r=e.stateNode,n=e.memoizedProps,r[wl]=e,(i=r.nodeValue!==n)&&(t=zo,t!==null))switch(t.tag){case 3:G1(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&G1(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[wl]=e,e.stateNode=r}return Gs(e),null;case 13:if(or(pr),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(dr&&Fo!==null&&e.mode&1&&!(e.flags&128))MG(),ow(),e.flags|=98560,i=!1;else if(i=q1(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Ee(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ee(317));i[wl]=e}else ow(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Gs(e),i=!1}else dc!==null&&(vk(dc),dc=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||pr.current&1?Jr===0&&(Jr=3):QM())),e.updateQueue!==null&&(e.flags|=4),Gs(e),null);case 4:return cw(),hk(t,e),t===null&&$E(e.stateNode.containerInfo),Gs(e),null;case 10:return kM(e.type._context),Gs(e),null;case 17:return oo(e.type)&&bx(),Gs(e),null;case 19:if(or(pr),i=e.memoizedState,i===null)return Gs(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)jb(i,!1);else{if(Jr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=xx(t),o!==null){for(e.flags|=128,jb(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return tr(pr,pr.current&1|2),e.child}t=t.sibling}i.tail!==null&&Or()>uw&&(e.flags|=128,r=!0,jb(i,!1),e.lanes=4194304)}else{if(!r)if(t=xx(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),jb(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!dr)return Gs(e),null}else 2*Or()-i.renderingStartTime>uw&&n!==1073741824&&(e.flags|=128,r=!0,jb(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Or(),e.sibling=null,n=pr.current,tr(pr,r?n&1|2:n&1),e):(Gs(e),null);case 22:case 23:return YM(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mo&1073741824&&(Gs(e),e.subtreeFlags&6&&(e.flags|=8192)):Gs(e),null;case 24:return null;case 25:return null}throw Error(Ee(156,e.tag))}function jle(t,e){switch(TM(e),e.tag){case 1:return oo(e.type)&&bx(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return cw(),or(io),or(ni),BM(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return UM(e),null;case 13:if(or(pr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ee(340));ow()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return or(pr),null;case 4:return cw(),null;case 10:return kM(e.type._context),null;case 22:case 23:return YM(),null;case 24:return null;default:return null}}var Y1=!1,ei=!1,Wle=typeof WeakSet=="function"?WeakSet:Set,qe=null;function _y(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ar(t,e,r)}else n.current=null}function fk(t,e,n){try{n()}catch(r){Ar(t,e,r)}}var m6=!1;function zle(t,e){if(Q2=gx,t=CG(),IM(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(J2={focusedElem:t,selectionRange:n},gx=!1,qe=e;qe!==null;)if(e=qe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,qe=t;else for(;qe!==null;){e=qe;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,w=p.memoizedState,m=e.stateNode,b=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:ec(e.type,g),w);m.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ee(163))}}catch(A){Ar(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,qe=t;break}qe=e.return}return p=m6,m6=!1,p}function Jv(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&fk(e,n,i)}s=s.next}while(s!==r)}}function hN(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function pk(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function wq(t){var e=t.alternate;e!==null&&(t.alternate=null,wq(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[wl],delete e[jE],delete e[ek],delete e[Sle],delete e[xle])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function bq(t){return t.tag===5||t.tag===3||t.tag===4}function y6(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bq(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gk(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wx));else if(r!==4&&(t=t.child,t!==null))for(gk(t,e,n),t=t.sibling;t!==null;)gk(t,e,n),t=t.sibling}function mk(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(mk(t,e,n),t=t.sibling;t!==null;)mk(t,e,n),t=t.sibling}var Rs=null,uc=!1;function wd(t,e,n){for(n=n.child;n!==null;)vq(t,e,n),n=n.sibling}function vq(t,e,n){if(xl&&typeof xl.onCommitFiberUnmount=="function")try{xl.onCommitFiberUnmount(sN,n)}catch{}switch(n.tag){case 5:ei||_y(n,e);case 6:var r=Rs,s=uc;Rs=null,wd(t,e,n),Rs=r,uc=s,Rs!==null&&(uc?(t=Rs,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Rs.removeChild(n.stateNode));break;case 18:Rs!==null&&(uc?(t=Rs,n=n.stateNode,t.nodeType===8?OR(t.parentNode,n):t.nodeType===1&&OR(t,n),LE(t)):OR(Rs,n.stateNode));break;case 4:r=Rs,s=uc,Rs=n.stateNode.containerInfo,uc=!0,wd(t,e,n),Rs=r,uc=s;break;case 0:case 11:case 14:case 15:if(!ei&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&fk(n,e,o),s=s.next}while(s!==r)}wd(t,e,n);break;case 1:if(!ei&&(_y(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ar(n,e,a)}wd(t,e,n);break;case 21:wd(t,e,n);break;case 22:n.mode&1?(ei=(r=ei)||n.memoizedState!==null,wd(t,e,n),ei=r):wd(t,e,n);break;default:wd(t,e,n)}}function w6(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Wle),e.forEach(function(r){var s=Zle.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ga(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Rs=a.stateNode,uc=!1;break e;case 3:Rs=a.stateNode.containerInfo,uc=!0;break e;case 4:Rs=a.stateNode.containerInfo,uc=!0;break e}a=a.return}if(Rs===null)throw Error(Ee(160));vq(i,o,s),Rs=null,uc=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){Ar(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Eq(e,t),e=e.sibling}function Eq(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ga(e,t),$c(t),r&4){try{Jv(3,t,t.return),hN(3,t)}catch(g){Ar(t,t.return,g)}try{Jv(5,t,t.return)}catch(g){Ar(t,t.return,g)}}break;case 1:Ga(e,t),$c(t),r&512&&n!==null&&_y(n,n.return);break;case 5:if(Ga(e,t),$c(t),r&512&&n!==null&&_y(n,n.return),t.flags&32){var s=t.stateNode;try{OE(s,"")}catch(g){Ar(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&zH(s,i),F2(a,o);var l=F2(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?KH(s,d):u==="dangerouslySetInnerHTML"?qH(s,d):u==="children"?OE(s,d):pM(s,u,d,l)}switch(a){case"input":M2(s,i);break;case"textarea":HH(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?By(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?By(s,!!i.multiple,i.defaultValue,!0):By(s,!!i.multiple,i.multiple?[]:"",!1))}s[jE]=i}catch(g){Ar(t,t.return,g)}}break;case 6:if(Ga(e,t),$c(t),r&4){if(t.stateNode===null)throw Error(Ee(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Ar(t,t.return,g)}}break;case 3:if(Ga(e,t),$c(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{LE(e.containerInfo)}catch(g){Ar(t,t.return,g)}break;case 4:Ga(e,t),$c(t);break;case 13:Ga(e,t),$c(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(VM=Or())),r&4&&w6(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(ei=(l=ei)||u,Ga(e,t),ei=l):Ga(e,t),$c(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(qe=t,u=t.child;u!==null;){for(d=qe=u;qe!==null;){switch(h=qe,f=h.child,h.tag){case 0:case 11:case 14:case 15:Jv(4,h,h.return);break;case 1:_y(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Ar(r,n,g)}}break;case 5:_y(h,h.return);break;case 22:if(h.memoizedState!==null){v6(d);continue}}f!==null?(f.return=h,qe=f):v6(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=VH("display",o))}catch(g){Ar(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){Ar(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ga(e,t),$c(t),r&4&&w6(t);break;case 21:break;default:Ga(e,t),$c(t)}}function $c(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(bq(n)){var r=n;break e}n=n.return}throw Error(Ee(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(OE(s,""),r.flags&=-33);var i=y6(t);mk(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=y6(t);gk(t,a,o);break;default:throw Error(Ee(161))}}catch(c){Ar(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Hle(t,e,n){qe=t,Cq(t)}function Cq(t,e,n){for(var r=(t.mode&1)!==0;qe!==null;){var s=qe,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Y1;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||ei;a=Y1;var l=ei;if(Y1=o,(ei=c)&&!l)for(qe=s;qe!==null;)o=qe,c=o.child,o.tag===22&&o.memoizedState!==null?E6(s):c!==null?(c.return=o,qe=c):E6(s);for(;i!==null;)qe=i,Cq(i),i=i.sibling;qe=s,Y1=a,ei=l}b6(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,qe=i):b6(t)}}function b6(t){for(;qe!==null;){var e=qe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ei||hN(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ei)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ec(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&r6(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}r6(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&LE(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ee(163))}ei||e.flags&512&&pk(e)}catch(h){Ar(e,e.return,h)}}if(e===t){qe=null;break}if(n=e.sibling,n!==null){n.return=e.return,qe=n;break}qe=e.return}}function v6(t){for(;qe!==null;){var e=qe;if(e===t){qe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,qe=n;break}qe=e.return}}function E6(t){for(;qe!==null;){var e=qe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{hN(4,e)}catch(c){Ar(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Ar(e,s,c)}}var i=e.return;try{pk(e)}catch(c){Ar(e,i,c)}break;case 5:var o=e.return;try{pk(e)}catch(c){Ar(e,o,c)}}}catch(c){Ar(e,e.return,c)}if(e===t){qe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,qe=a;break}qe=e.return}}var Gle=Math.ceil,Tx=ld.ReactCurrentDispatcher,GM=ld.ReactCurrentOwner,Ta=ld.ReactCurrentBatchConfig,dn=0,vs=null,$r=null,Ms=0,Mo=0,Ay=Af(0),Jr=0,VE=null,_g=0,fN=0,qM=0,Zv=null,Zi=null,VM=0,uw=1/0,uu=null,Rx=!1,yk=null,Hh=null,Q1=!1,Ih=null,Px=0,Xv=0,wk=null,lS=-1,uS=0;function _i(){return dn&6?Or():lS!==-1?lS:lS=Or()}function Gh(t){return t.mode&1?dn&2&&Ms!==0?Ms&-Ms:Nle.transition!==null?(uS===0&&(uS=oG()),uS):(t=Pn,t!==0||(t=window.event,t=t===void 0?16:fG(t.type)),t):1}function Sc(t,e,n,r){if(50<Xv)throw Xv=0,wk=null,Error(Ee(185));R_(t,n,r),(!(dn&2)||t!==vs)&&(t===vs&&(!(dn&2)&&(fN|=n),Jr===4&&Yd(t,Ms)),ao(t,r),n===1&&dn===0&&!(e.mode&1)&&(uw=Or()+500,lN&&Sf()))}function ao(t,e){var n=t.callbackNode;Nce(t,e);var r=px(t,t===vs?Ms:0);if(r===0)n!==null&&R$(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&R$(n),e===1)t.tag===0?Ile(C6.bind(null,t)):OG(C6.bind(null,t)),_le(function(){!(dn&6)&&Sf()}),n=null;else{switch(aG(r)){case 1:n=bM;break;case 4:n=sG;break;case 16:n=fx;break;case 536870912:n=iG;break;default:n=fx}n=Rq(n,_q.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function _q(t,e){if(lS=-1,uS=0,dn&6)throw Error(Ee(327));var n=t.callbackNode;if(zy()&&t.callbackNode!==n)return null;var r=px(t,t===vs?Ms:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ox(t,r);else{e=r;var s=dn;dn|=2;var i=Sq();(vs!==t||Ms!==e)&&(uu=null,uw=Or()+500,og(t,e));do try{Kle();break}catch(a){Aq(t,a)}while(!0);OM(),Tx.current=i,dn=s,$r!==null?e=0:(vs=null,Ms=0,e=Jr)}if(e!==0){if(e===2&&(s=G2(t),s!==0&&(r=s,e=bk(t,s))),e===1)throw n=VE,og(t,0),Yd(t,r),ao(t,Or()),n;if(e===6)Yd(t,r);else{if(s=t.current.alternate,!(r&30)&&!qle(s)&&(e=Ox(t,r),e===2&&(i=G2(t),i!==0&&(r=i,e=bk(t,i))),e===1))throw n=VE,og(t,0),Yd(t,r),ao(t,Or()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Ee(345));case 2:Jf(t,Zi,uu);break;case 3:if(Yd(t,r),(r&130023424)===r&&(e=VM+500-Or(),10<e)){if(px(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){_i(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=X2(Jf.bind(null,t,Zi,uu),e);break}Jf(t,Zi,uu);break;case 4:if(Yd(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ac(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Or()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Gle(r/1960))-r,10<r){t.timeoutHandle=X2(Jf.bind(null,t,Zi,uu),r);break}Jf(t,Zi,uu);break;case 5:Jf(t,Zi,uu);break;default:throw Error(Ee(329))}}}return ao(t,Or()),t.callbackNode===n?_q.bind(null,t):null}function bk(t,e){var n=Zv;return t.current.memoizedState.isDehydrated&&(og(t,e).flags|=256),t=Ox(t,e),t!==2&&(e=Zi,Zi=n,e!==null&&vk(e)),t}function vk(t){Zi===null?Zi=t:Zi.push.apply(Zi,t)}function qle(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Nc(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yd(t,e){for(e&=~qM,e&=~fN,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ac(e),r=1<<n;t[n]=-1,e&=~r}}function C6(t){if(dn&6)throw Error(Ee(327));zy();var e=px(t,0);if(!(e&1))return ao(t,Or()),null;var n=Ox(t,e);if(t.tag!==0&&n===2){var r=G2(t);r!==0&&(e=r,n=bk(t,r))}if(n===1)throw n=VE,og(t,0),Yd(t,e),ao(t,Or()),n;if(n===6)throw Error(Ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Jf(t,Zi,uu),ao(t,Or()),null}function KM(t,e){var n=dn;dn|=1;try{return t(e)}finally{dn=n,dn===0&&(uw=Or()+500,lN&&Sf())}}function Ag(t){Ih!==null&&Ih.tag===0&&!(dn&6)&&zy();var e=dn;dn|=1;var n=Ta.transition,r=Pn;try{if(Ta.transition=null,Pn=1,t)return t()}finally{Pn=r,Ta.transition=n,dn=e,!(dn&6)&&Sf()}}function YM(){Mo=Ay.current,or(Ay)}function og(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Cle(n)),$r!==null)for(n=$r.return;n!==null;){var r=n;switch(TM(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bx();break;case 3:cw(),or(io),or(ni),BM();break;case 5:UM(r);break;case 4:cw();break;case 13:or(pr);break;case 19:or(pr);break;case 10:kM(r.type._context);break;case 22:case 23:YM()}n=n.return}if(vs=t,$r=t=qh(t.current,null),Ms=Mo=e,Jr=0,VE=null,qM=fN=_g=0,Zi=Zv=null,yp!==null){for(e=0;e<yp.length;e++)if(n=yp[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}yp=null}return t}function Aq(t,e){do{var n=$r;try{if(OM(),oS.current=Nx,Ix){for(var r=wr.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ix=!1}if(Cg=0,ds=qr=wr=null,Qv=!1,HE=0,GM.current=null,n===null||n.return===null){Jr=1,VE=e,$r=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Ms,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=l6(o);if(f!==null){f.flags&=-257,u6(f,o,a,i,e),f.mode&1&&c6(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){c6(i,l,e),QM();break e}c=Error(Ee(426))}}else if(dr&&a.mode&1){var w=l6(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),u6(w,o,a,i,e),RM(lw(c,a));break e}}i=c=lw(c,a),Jr!==4&&(Jr=2),Zv===null?Zv=[i]:Zv.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=aq(i,c,e);n6(i,m);break e;case 1:a=c;var b=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Hh===null||!Hh.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var A=cq(i,a,e);n6(i,A);break e}}i=i.return}while(i!==null)}Iq(n)}catch(C){e=C,$r===n&&n!==null&&($r=n=n.return);continue}break}while(!0)}function Sq(){var t=Tx.current;return Tx.current=Nx,t===null?Nx:t}function QM(){(Jr===0||Jr===3||Jr===2)&&(Jr=4),vs===null||!(_g&268435455)&&!(fN&268435455)||Yd(vs,Ms)}function Ox(t,e){var n=dn;dn|=2;var r=Sq();(vs!==t||Ms!==e)&&(uu=null,og(t,e));do try{Vle();break}catch(s){Aq(t,s)}while(!0);if(OM(),dn=n,Tx.current=r,$r!==null)throw Error(Ee(261));return vs=null,Ms=0,Jr}function Vle(){for(;$r!==null;)xq($r)}function Kle(){for(;$r!==null&&!bce();)xq($r)}function xq(t){var e=Tq(t.alternate,t,Mo);t.memoizedProps=t.pendingProps,e===null?Iq(t):$r=e,GM.current=null}function Iq(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=jle(n,e),n!==null){n.flags&=32767,$r=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Jr=6,$r=null;return}}else if(n=Fle(n,e,Mo),n!==null){$r=n;return}if(e=e.sibling,e!==null){$r=e;return}$r=e=t}while(e!==null);Jr===0&&(Jr=5)}function Jf(t,e,n){var r=Pn,s=Ta.transition;try{Ta.transition=null,Pn=1,Yle(t,e,n,r)}finally{Ta.transition=s,Pn=r}return null}function Yle(t,e,n,r){do zy();while(Ih!==null);if(dn&6)throw Error(Ee(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ee(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Tce(t,i),t===vs&&($r=vs=null,Ms=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Q1||(Q1=!0,Rq(fx,function(){return zy(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ta.transition,Ta.transition=null;var o=Pn;Pn=1;var a=dn;dn|=4,GM.current=null,zle(t,n),Eq(n,t),gle(J2),gx=!!Q2,J2=Q2=null,t.current=n,Hle(n),vce(),dn=a,Pn=o,Ta.transition=i}else t.current=n;if(Q1&&(Q1=!1,Ih=t,Px=s),i=t.pendingLanes,i===0&&(Hh=null),_ce(n.stateNode),ao(t,Or()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Rx)throw Rx=!1,t=yk,yk=null,t;return Px&1&&t.tag!==0&&zy(),i=t.pendingLanes,i&1?t===wk?Xv++:(Xv=0,wk=t):Xv=0,Sf(),null}function zy(){if(Ih!==null){var t=aG(Px),e=Ta.transition,n=Pn;try{if(Ta.transition=null,Pn=16>t?16:t,Ih===null)var r=!1;else{if(t=Ih,Ih=null,Px=0,dn&6)throw Error(Ee(331));var s=dn;for(dn|=4,qe=t.current;qe!==null;){var i=qe,o=i.child;if(qe.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(qe=l;qe!==null;){var u=qe;switch(u.tag){case 0:case 11:case 15:Jv(8,u,i)}var d=u.child;if(d!==null)d.return=u,qe=d;else for(;qe!==null;){u=qe;var h=u.sibling,f=u.return;if(wq(u),u===l){qe=null;break}if(h!==null){h.return=f,qe=h;break}qe=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}qe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,qe=o;else e:for(;qe!==null;){if(i=qe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Jv(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,qe=m;break e}qe=i.return}}var b=t.current;for(qe=b;qe!==null;){o=qe;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,qe=v;else e:for(o=b;qe!==null;){if(a=qe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:hN(9,a)}}catch(C){Ar(a,a.return,C)}if(a===o){qe=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,qe=A;break e}qe=a.return}}if(dn=s,Sf(),xl&&typeof xl.onPostCommitFiberRoot=="function")try{xl.onPostCommitFiberRoot(sN,t)}catch{}r=!0}return r}finally{Pn=n,Ta.transition=e}}return!1}function _6(t,e,n){e=lw(n,e),e=aq(t,e,1),t=zh(t,e,1),e=_i(),t!==null&&(R_(t,1,e),ao(t,e))}function Ar(t,e,n){if(t.tag===3)_6(t,t,n);else for(;e!==null;){if(e.tag===3){_6(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Hh===null||!Hh.has(r))){t=lw(n,t),t=cq(e,t,1),e=zh(e,t,1),t=_i(),e!==null&&(R_(e,1,t),ao(e,t));break}}e=e.return}}function Qle(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=_i(),t.pingedLanes|=t.suspendedLanes&n,vs===t&&(Ms&n)===n&&(Jr===4||Jr===3&&(Ms&130023424)===Ms&&500>Or()-VM?og(t,0):qM|=n),ao(t,e)}function Nq(t,e){e===0&&(t.mode&1?(e=F1,F1<<=1,!(F1&130023424)&&(F1=4194304)):e=1);var n=_i();t=Xu(t,e),t!==null&&(R_(t,e,n),ao(t,n))}function Jle(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Nq(t,n)}function Zle(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ee(314))}r!==null&&r.delete(e),Nq(t,n)}var Tq;Tq=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||io.current)no=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return no=!1,$le(t,e,n);no=!!(t.flags&131072)}else no=!1,dr&&e.flags&1048576&&kG(e,Cx,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;cS(t,e),t=e.pendingProps;var s=iw(e,ni.current);Wy(e,n),s=FM(null,e,r,t,s,n);var i=jM();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,oo(r)?(i=!0,vx(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,MM(e),s.updater=dN,e.stateNode=s,s._reactInternals=e,ok(e,r,t,n),e=lk(null,e,r,!0,i,n)):(e.tag=0,dr&&i&&NM(e),hi(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(cS(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=eue(r),t=ec(r,t),s){case 0:e=ck(null,e,r,t,n);break e;case 1:e=f6(null,e,r,t,n);break e;case 11:e=d6(null,e,r,t,n);break e;case 14:e=h6(null,e,r,ec(r.type,t),n);break e}throw Error(Ee(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ec(r,s),ck(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ec(r,s),f6(t,e,r,s,n);case 3:e:{if(hq(e),t===null)throw Error(Ee(387));r=e.pendingProps,i=e.memoizedState,s=i.element,$G(t,e),Sx(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=lw(Error(Ee(423)),e),e=p6(t,e,r,n,s);break e}else if(r!==s){s=lw(Error(Ee(424)),e),e=p6(t,e,r,n,s);break e}else for(Fo=Wh(e.stateNode.containerInfo.firstChild),zo=e,dr=!0,dc=null,n=UG(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ow(),r===s){e=ed(t,e,n);break e}hi(t,e,r,n)}e=e.child}return e;case 5:return FG(e),t===null&&rk(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Z2(r,s)?o=null:i!==null&&Z2(r,i)&&(e.flags|=32),dq(t,e),hi(t,e,o,n),e.child;case 6:return t===null&&rk(e),null;case 13:return fq(t,e,n);case 4:return LM(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=aw(e,null,r,n):hi(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ec(r,s),d6(t,e,r,s,n);case 7:return hi(t,e,e.pendingProps,n),e.child;case 8:return hi(t,e,e.pendingProps.children,n),e.child;case 12:return hi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,tr(_x,r._currentValue),r._currentValue=o,i!==null)if(Nc(i.value,o)){if(i.children===s.children&&!io.current){e=ed(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Fu(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),sk(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ee(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),sk(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}hi(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Wy(e,n),s=Ra(s),r=r(s),e.flags|=1,hi(t,e,r,n),e.child;case 14:return r=e.type,s=ec(r,e.pendingProps),s=ec(r.type,s),h6(t,e,r,s,n);case 15:return lq(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ec(r,s),cS(t,e),e.tag=1,oo(r)?(t=!0,vx(e)):t=!1,Wy(e,n),oq(e,r,s),ok(e,r,s,n),lk(null,e,r,!0,t,n);case 19:return pq(t,e,n);case 22:return uq(t,e,n)}throw Error(Ee(156,e.tag))};function Rq(t,e){return rG(t,e)}function Xle(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xa(t,e,n,r){return new Xle(t,e,n,r)}function JM(t){return t=t.prototype,!(!t||!t.isReactComponent)}function eue(t){if(typeof t=="function")return JM(t)?1:0;if(t!=null){if(t=t.$$typeof,t===mM)return 11;if(t===yM)return 14}return 2}function qh(t,e){var n=t.alternate;return n===null?(n=xa(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function dS(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")JM(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case py:return ag(n.children,s,i,e);case gM:o=8,s|=8;break;case R2:return t=xa(12,n,e,s|2),t.elementType=R2,t.lanes=i,t;case P2:return t=xa(13,n,e,s),t.elementType=P2,t.lanes=i,t;case O2:return t=xa(19,n,e,s),t.elementType=O2,t.lanes=i,t;case FH:return pN(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case BH:o=10;break e;case $H:o=9;break e;case mM:o=11;break e;case yM:o=14;break e;case Wd:o=16,r=null;break e}throw Error(Ee(130,t==null?t:typeof t,""))}return e=xa(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ag(t,e,n,r){return t=xa(7,t,r,e),t.lanes=n,t}function pN(t,e,n,r){return t=xa(22,t,r,e),t.elementType=FH,t.lanes=n,t.stateNode={isHidden:!1},t}function FR(t,e,n){return t=xa(6,t,null,e),t.lanes=n,t}function jR(t,e,n){return e=xa(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function tue(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ER(0),this.expirationTimes=ER(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ER(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ZM(t,e,n,r,s,i,o,a,c){return t=new tue(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=xa(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},MM(i),t}function nue(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fy,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Pq(t){if(!t)return uf;t=t._reactInternals;e:{if(Xg(t)!==t||t.tag!==1)throw Error(Ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(oo(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ee(171))}if(t.tag===1){var n=t.type;if(oo(n))return PG(t,n,e)}return e}function Oq(t,e,n,r,s,i,o,a,c){return t=ZM(n,r,!0,t,s,i,o,a,c),t.context=Pq(null),n=t.current,r=_i(),s=Gh(n),i=Fu(r,s),i.callback=e??null,zh(n,i,s),t.current.lanes=s,R_(t,s,r),ao(t,r),t}function gN(t,e,n,r){var s=e.current,i=_i(),o=Gh(s);return n=Pq(n),e.context===null?e.context=n:e.pendingContext=n,e=Fu(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=zh(s,e,o),t!==null&&(Sc(t,s,o,i),iS(t,s,o)),o}function kx(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function A6(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function XM(t,e){A6(t,e),(t=t.alternate)&&A6(t,e)}function rue(){return null}var kq=typeof reportError=="function"?reportError:function(t){console.error(t)};function eL(t){this._internalRoot=t}mN.prototype.render=eL.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ee(409));gN(t,e,null,null)};mN.prototype.unmount=eL.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ag(function(){gN(null,t,null,null)}),e[Zu]=null}};function mN(t){this._internalRoot=t}mN.prototype.unstable_scheduleHydration=function(t){if(t){var e=uG();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Kd.length&&e!==0&&e<Kd[n].priority;n++);Kd.splice(n,0,t),n===0&&hG(t)}};function tL(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function yN(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function S6(){}function sue(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=kx(o);i.call(l)}}var o=Oq(e,r,t,0,null,!1,!1,"",S6);return t._reactRootContainer=o,t[Zu]=o.current,$E(t.nodeType===8?t.parentNode:t),Ag(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=kx(c);a.call(l)}}var c=ZM(t,0,!1,null,null,!1,!1,"",S6);return t._reactRootContainer=c,t[Zu]=c.current,$E(t.nodeType===8?t.parentNode:t),Ag(function(){gN(e,c,n,r)}),c}function wN(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=kx(o);a.call(c)}}gN(e,o,t,s)}else o=sue(n,e,t,s,r);return kx(o)}cG=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=wv(e.pendingLanes);n!==0&&(vM(e,n|1),ao(e,Or()),!(dn&6)&&(uw=Or()+500,Sf()))}break;case 13:Ag(function(){var r=Xu(t,1);if(r!==null){var s=_i();Sc(r,t,1,s)}}),XM(t,1)}};EM=function(t){if(t.tag===13){var e=Xu(t,134217728);if(e!==null){var n=_i();Sc(e,t,134217728,n)}XM(t,134217728)}};lG=function(t){if(t.tag===13){var e=Gh(t),n=Xu(t,e);if(n!==null){var r=_i();Sc(n,t,e,r)}XM(t,e)}};uG=function(){return Pn};dG=function(t,e){var n=Pn;try{return Pn=t,e()}finally{Pn=n}};W2=function(t,e,n){switch(e){case"input":if(M2(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=cN(r);if(!s)throw Error(Ee(90));WH(r),M2(r,s)}}}break;case"textarea":HH(t,n);break;case"select":e=n.value,e!=null&&By(t,!!n.multiple,e,!1)}};JH=KM;ZH=Ag;var iue={usingClientEntryPoint:!1,Events:[O_,wy,cN,YH,QH,KM]},Wb={findFiberByHostInstance:mp,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oue={bundleType:Wb.bundleType,version:Wb.version,rendererPackageName:Wb.rendererPackageName,rendererConfig:Wb.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ld.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=tG(t),t===null?null:t.stateNode},findFiberByHostInstance:Wb.findFiberByHostInstance||rue,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var J1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!J1.isDisabled&&J1.supportsFiber)try{sN=J1.inject(oue),xl=J1}catch{}}Yo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iue;Yo.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tL(e))throw Error(Ee(200));return nue(t,e,null,n)};Yo.createRoot=function(t,e){if(!tL(t))throw Error(Ee(299));var n=!1,r="",s=kq;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ZM(t,1,!1,null,null,n,!1,r,s),t[Zu]=e.current,$E(t.nodeType===8?t.parentNode:t),new eL(e)};Yo.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ee(188)):(t=Object.keys(t).join(","),Error(Ee(268,t)));return t=tG(e),t=t===null?null:t.stateNode,t};Yo.flushSync=function(t){return Ag(t)};Yo.hydrate=function(t,e,n){if(!yN(e))throw Error(Ee(200));return wN(null,t,e,!0,n)};Yo.hydrateRoot=function(t,e,n){if(!tL(t))throw Error(Ee(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=kq;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Oq(e,null,t,1,n??null,s,!1,i,o),t[Zu]=e.current,$E(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new mN(e)};Yo.render=function(t,e,n){if(!yN(e))throw Error(Ee(200));return wN(null,t,e,!1,n)};Yo.unmountComponentAtNode=function(t){if(!yN(t))throw Error(Ee(40));return t._reactRootContainer?(Ag(function(){wN(null,null,t,!1,function(){t._reactRootContainer=null,t[Zu]=null})}),!0):!1};Yo.unstable_batchedUpdates=KM;Yo.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!yN(n))throw Error(Ee(200));if(t==null||t._reactInternals===void 0)throw Error(Ee(38));return wN(t,e,n,!1,r)};Yo.version="18.3.1-next-f1338f8080-20240426";function Dq(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Dq)}catch(t){console.error(t)}}Dq(),DH.exports=Yo;var nL=DH.exports,x6=nL;N2.createRoot=x6.createRoot,N2.hydrateRoot=x6.hydrateRoot;const aue="_verified_lvyh0_1",rL={verified:aue},cue=()=>y.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:rL.verified,children:y.jsx("g",{children:y.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),lue=()=>y.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:rL.verified,children:y.jsxs("g",{children:[y.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[y.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),y.jsx("stop",{offset:".539",stopColor:"#cd8105"}),y.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),y.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),y.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),y.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[y.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),y.jsx("stop",{offset:".406",stopColor:"#e2b719"}),y.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),y.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[y.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),y.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),y.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),uue=()=>y.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:rL.verified,children:y.jsx("g",{children:y.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function Mq(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=Mq(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Vh(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=Mq(t))&&(r&&(r+=" "),r+=e);return r}const due="_root_98iqw_1",hue="_article_98iqw_21",I6={root:due,article:hue},sL=({className:t,children:e})=>y.jsx("div",{className:Vh("react-tweet-theme",I6.root,t),children:y.jsx("article",{className:I6.article,children:e})}),Lq=t=>y.jsx("img",{...t}),fue="_header_nqq4j_1",pue="_avatar_nqq4j_11",gue="_avatarOverflow_nqq4j_16",mue="_avatarSquare_nqq4j_23",yue="_avatarShadow_nqq4j_26",wue="_author_nqq4j_37",bue="_authorLink_nqq4j_44",vue="_authorVerified_nqq4j_53",Eue="_authorLinkText_nqq4j_56",Cue="_authorMeta_nqq4j_63",_ue="_authorFollow_nqq4j_66",Aue="_username_nqq4j_69",Sue="_follow_nqq4j_74",xue="_separator_nqq4j_82",Iue="_brand_nqq4j_86",Nue="_twitterIcon_nqq4j_90",Cs={header:fue,avatar:pue,avatarOverflow:gue,avatarSquare:mue,avatarShadow:yue,author:wue,authorLink:bue,authorVerified:vue,authorLinkText:Eue,authorMeta:Cue,authorFollow:_ue,username:Aue,follow:Sue,separator:xue,brand:Iue,twitterIcon:Nue},Tue="_verifiedOld_lcna5_1",Rue="_verifiedBlue_lcna5_4",Pue="_verifiedGovernment_lcna5_7",WR={verifiedOld:Tue,verifiedBlue:Rue,verifiedGovernment:Pue},Uq=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=y.jsx(cue,{}),s=WR.verifiedBlue;if(n)switch(t.is_blue_verified||(s=WR.verifiedOld),t.verified_type){case"Government":r=y.jsx(uue,{}),s=WR.verifiedGovernment;break;case"Business":r=y.jsx(lue,{}),s=null;break}return n?y.jsx("div",{className:Vh(e,s),children:r}):null},Oue=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:Lq,{user:s}=t;return y.jsxs("div",{className:Cs.header,children:[y.jsxs("a",{href:t.url,className:Cs.avatar,target:"_blank",rel:"noopener noreferrer",children:[y.jsx("div",{className:Vh(Cs.avatarOverflow,s.profile_image_shape==="Square"&&Cs.avatarSquare),children:y.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),y.jsx("div",{className:Cs.avatarOverflow,children:y.jsx("div",{className:Cs.avatarShadow})})]}),y.jsxs("div",{className:Cs.author,children:[y.jsxs("a",{href:t.url,className:Cs.authorLink,target:"_blank",rel:"noopener noreferrer",children:[y.jsx("div",{className:Cs.authorLinkText,children:y.jsx("span",{title:s.name,children:s.name})}),y.jsx(Uq,{user:s,className:Cs.authorVerified})]}),y.jsxs("div",{className:Cs.authorMeta,children:[y.jsx("a",{href:t.url,className:Cs.username,target:"_blank",rel:"noopener noreferrer",children:y.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),y.jsxs("div",{className:Cs.authorFollow,children:[y.jsx("span",{className:Cs.separator,children:""}),y.jsx("a",{href:s.follow_url,className:Cs.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),y.jsx("a",{href:t.url,className:Cs.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:y.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:Cs.twitterIcon,children:y.jsx("g",{children:y.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},kue="_root_1ec15_1",Due={root:kue},Mue=({tweet:t})=>y.jsxs("a",{href:t.in_reply_to_url,className:Due.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),Lue="_root_eihfa_1",Uue={root:Lue},Bue=({href:t,children:e})=>y.jsx("a",{href:t,className:Uue.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),$ue="_root_1xq52_1",Fue={root:$ue},jue=({tweet:t})=>y.jsx("p",{className:Fue.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return y.jsx(Bue,{href:e.href,children:e.text},n);case"media":return;default:return y.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),N6=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,Bq=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,Wue=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,zue=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,Hue=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,Gue=t=>`https://x.com/hashtag/${t.text}`,que=t=>`https://x.com/search?q=%24${t.text}`,Vue=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,$q=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},Kue=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},Yue=t=>{const e=Kue(t);return e.length>1?e[1]:e[0]},Ek=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function T6(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return zb(n,"hashtag",t.entities.hashtags),zb(n,"mention",t.entities.user_mentions),zb(n,"url",t.entities.urls),zb(n,"symbol",t.entities.symbols),t.entities.media&&zb(n,"media",t.entities.media),Que(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:Gue(r),text:s});case"mention":return Object.assign(r,{href:Bq(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:que(r),text:s});default:return Object.assign(r,{text:s})}})}function zb(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function Que(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const Jue=t=>({...t,url:N6(t),user:{...t.user,url:Bq(t),follow_url:Hue(t)},like_url:Wue(t),reply_url:zue(t),in_reply_to_url:t.in_reply_to_screen_name?Vue(t):void 0,entities:T6(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:N6(t.quoted_tweet),entities:T6(t.quoted_tweet)}:void 0}),Zue="_root_g9tkv_1",Xue="_rounded_g9tkv_6",ede="_mediaWrapper_g9tkv_10",tde="_grid2Columns_g9tkv_17",nde="_grid3_g9tkv_20",rde="_grid2x2_g9tkv_23",sde="_mediaContainer_g9tkv_26",ide="_mediaLink_g9tkv_34",ode="_skeleton_g9tkv_38",ade="_image_g9tkv_43",Ao={root:Zue,rounded:Xue,mediaWrapper:ede,grid2Columns:tde,grid3:nde,grid2x2:rde,mediaContainer:sde,mediaLink:ide,skeleton:ode,image:ade},cde="_anchor_fp31d_1",lde="_videoButton_fp31d_17",ude="_videoButtonIcon_fp31d_35",dde="_watchOnTwitter_fp31d_44",hde="_viewReplies_fp31d_60",Im={anchor:cde,videoButton:lde,videoButtonIcon:ude,watchOnTwitter:dde,viewReplies:hde},fde=({tweet:t,media:e})=>{const[n,r]=k.useState(!0),[s,i]=k.useState(!1),[o,a]=k.useState(!1),c=Yue(e);let l=0;return y.jsxs(y.Fragment,{children:[y.jsx("video",{className:Ao.image,poster:$q(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:y.jsx("source",{src:c.url,type:c.content_type})}),n&&y.jsx("button",{type:"button",className:Im.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:y.jsx("svg",{viewBox:"0 0 24 24",className:Im.videoButtonIcon,"aria-hidden":"true",children:y.jsx("g",{children:y.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&y.jsx("div",{className:Im.watchOnTwitter,children:y.jsx("a",{href:t.url,className:Im.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&y.jsx("a",{href:t.url,className:Vh(Im.anchor,Im.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},pde=t=>y.jsx("img",{...t}),R6=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},Fq=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:pde;return y.jsx("div",{className:Vh(Ao.root,!n&&Ao.rounded),children:y.jsx("div",{className:Vh(Ao.mediaWrapper,o>1&&Ao.grid2Columns,o===3&&Ao.grid3,o>4&&Ao.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>y.jsx(k.Fragment,{children:l.type==="photo"?y.jsxs("a",{href:t.url,className:Vh(Ao.mediaContainer,Ao.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[y.jsx("div",{className:Ao.skeleton,style:R6(l,o)}),y.jsx(c,{src:$q(l,"small"),alt:l.ext_alt_text||"Image",className:Ao.image,draggable:!0})]},l.media_url_https):y.jsxs("div",{className:Ao.mediaContainer,children:[y.jsx("div",{className:Ao.skeleton,style:R6(l,o)}),y.jsx(fde,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},gde={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},mde=new Intl.DateTimeFormat("en-US",gde),yde=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},wde=t=>{const e=yde(mde.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n}  ${r}`},bde="_root_i24yn_1",vde={root:bde},Ede=({tweet:t})=>{const e=new Date(t.created_at),n=wde(e);return y.jsx("a",{className:vde.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:y.jsx("time",{dateTime:e.toISOString(),children:n})})},Cde="_info_19qcj_1",_de="_infoLink_19qcj_10",Ade="_infoIcon_19qcj_30",zR={info:Cde,infoLink:_de,infoIcon:Ade},Sde=({tweet:t})=>y.jsxs("div",{className:zR.info,children:[y.jsx(Ede,{tweet:t}),y.jsx("a",{className:zR.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:y.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:zR.infoIcon,children:y.jsx("g",{children:y.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),xde="_actions_n2anf_1",Ide="_like_n2anf_13",Nde="_reply_n2anf_14",Tde="_copy_n2anf_15",Rde="_likeIconWrapper_n2anf_27",Pde="_likeCount_n2anf_30",Ode="_replyIconWrapper_n2anf_35",kde="_copyIconWrapper_n2anf_36",Dde="_likeIcon_n2anf_27",Mde="_replyIcon_n2anf_35",Lde="_copyIcon_n2anf_36",Ude="_replyText_n2anf_56",Bde="_copyText_n2anf_57",Vi={actions:xde,like:Ide,reply:Nde,copy:Tde,likeIconWrapper:Rde,likeCount:Pde,replyIconWrapper:Ode,copyIconWrapper:kde,likeIcon:Dde,replyIcon:Mde,copyIcon:Lde,replyText:Ude,copyText:Bde},$de=({tweet:t})=>{const[e,n]=k.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return k.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),y.jsxs("button",{type:"button",className:Vi.copy,"aria-label":"Copy link",onClick:r,children:[y.jsx("div",{className:Vi.copyIconWrapper,children:e?y.jsx("svg",{viewBox:"0 0 24 24",className:Vi.copyIcon,"aria-hidden":"true",children:y.jsx("g",{children:y.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):y.jsx("svg",{viewBox:"0 0 24 24",className:Vi.copyIcon,"aria-hidden":"true",children:y.jsx("g",{children:y.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),y.jsx("span",{className:Vi.copyText,children:e?"Copied!":"Copy link"})]})},Fde=({tweet:t})=>{const e=Ek(t.favorite_count);return y.jsxs("div",{className:Vi.actions,children:[y.jsxs("a",{className:Vi.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[y.jsx("div",{className:Vi.likeIconWrapper,children:y.jsx("svg",{viewBox:"0 0 24 24",className:Vi.likeIcon,"aria-hidden":"true",children:y.jsx("g",{children:y.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),y.jsx("span",{className:Vi.likeCount,children:e})]}),y.jsxs("a",{className:Vi.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[y.jsx("div",{className:Vi.replyIconWrapper,children:y.jsx("svg",{viewBox:"0 0 24 24",className:Vi.replyIcon,"aria-hidden":"true",children:y.jsx("g",{children:y.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),y.jsx("span",{className:Vi.replyText,children:"Reply"})]}),y.jsx($de,{tweet:t})]})},jde="_replies_1cutb_1",Wde="_link_1cutb_4",zde="_text_1cutb_23",HR={replies:jde,link:Wde,text:zde},Hde=({tweet:t})=>y.jsx("div",{className:HR.replies,children:y.jsx("a",{className:HR.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:y.jsx("span",{className:HR.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${Ek(t.conversation_count)} reply`:`Read ${Ek(t.conversation_count)} replies`})})}),Gde="_root_q5799_1",qde="_article_q5799_16",P6={root:Gde,article:qde},Vde=({tweet:t,children:e})=>y.jsx("div",{className:P6.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:y.jsx("article",{className:P6.article,children:e})}),Kde="_header_r31i5_1",Yde="_avatar_r31i5_11",Qde="_avatarSquare_r31i5_17",Jde="_author_r31i5_21",Zde="_authorText_r31i5_26",Xde="_username_r31i5_33",Bf={header:Kde,avatar:Yde,avatarSquare:Qde,author:Jde,authorText:Zde,username:Xde},ehe=({tweet:t})=>{const{user:e}=t;return y.jsxs("div",{className:Bf.header,children:[y.jsx("a",{href:t.url,className:Bf.avatar,target:"_blank",rel:"noopener noreferrer",children:y.jsx("div",{className:Vh(Bf.avatarOverflow,e.profile_image_shape==="Square"&&Bf.avatarSquare),children:y.jsx(Lq,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),y.jsxs("div",{className:Bf.author,children:[y.jsx("div",{className:Bf.authorText,children:y.jsx("span",{title:e.name,children:e.name})}),y.jsx(Uq,{user:e}),y.jsx("div",{className:Bf.username,children:y.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},the="_root_175ot_1",nhe={root:the},rhe=({tweet:t})=>y.jsx("p",{className:nhe.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>y.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),she=({tweet:t})=>{var e;return y.jsxs(Vde,{tweet:t,children:[y.jsx(ehe,{tweet:t}),y.jsx(rhe,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?y.jsx(Fq,{quoted:!0,tweet:t}):null]})},ihe=({tweet:t,components:e})=>{var n;const r=k.useMemo(()=>Jue(t),[t]);return y.jsxs(sL,{children:[y.jsx(Oue,{tweet:r,components:e}),r.in_reply_to_status_id_str&&y.jsx(Mue,{tweet:r}),y.jsx(jue,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?y.jsx(Fq,{tweet:r,components:e}):null,r.quoted_tweet&&y.jsx(she,{tweet:r.quoted_tweet}),y.jsx(Sde,{tweet:r}),y.jsx(Fde,{tweet:r}),y.jsx(Hde,{tweet:r})]})},ohe="_root_16yxa_1",ahe={root:ohe},che=t=>y.jsx(sL,{children:y.jsxs("div",{className:ahe.root,children:[y.jsx("h3",{children:"Tweet not found"}),y.jsx("p",{children:"The embedded tweet could not be found"})]})}),lhe="_skeleton_oi7hr_1",uhe={skeleton:lhe},Z1=({style:t})=>y.jsx("span",{className:uhe.skeleton,style:t}),dhe="_root_17qqv_1",hhe={root:dhe},fhe=()=>y.jsxs(sL,{className:hhe.root,children:[y.jsx(Z1,{style:{height:"3rem",marginBottom:"0.75rem"}}),y.jsx(Z1,{style:{height:"6rem",margin:"0.5rem 0"}}),y.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),y.jsx(Z1,{style:{height:"2rem"}}),y.jsx(Z1,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]});var jq={exports:{}},Wq={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dw=k;function phe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ghe=typeof Object.is=="function"?Object.is:phe,mhe=dw.useState,yhe=dw.useEffect,whe=dw.useLayoutEffect,bhe=dw.useDebugValue;function vhe(t,e){var n=e(),r=mhe({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return whe(function(){s.value=n,s.getSnapshot=e,GR(s)&&i({inst:s})},[t,n,e]),yhe(function(){return GR(s)&&i({inst:s}),t(function(){GR(s)&&i({inst:s})})},[t]),bhe(n),n}function GR(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ghe(t,n)}catch{return!0}}function Ehe(t,e){return e()}var Che=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ehe:vhe;Wq.useSyncExternalStore=dw.useSyncExternalStore!==void 0?dw.useSyncExternalStore:Che;jq.exports=Wq;var zq=jq.exports;const Hq=0,Gq=1,qq=2,O6=3;var k6=Object.prototype.hasOwnProperty;function Ck(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&Ck(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(k6.call(t,n)&&++r&&!k6.call(e,n)||!(n in e)||!Ck(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const Ru=new WeakMap,Nh=()=>{},gi=Nh(),_k=Object,un=t=>t===gi,bl=t=>typeof t=="function",df=(t,e)=>({...t,...e}),Vq=t=>bl(t.then),qR={},X1={},iL="undefined",D_=typeof window!=iL,Ak=typeof document!=iL,_he=D_&&"Deno"in window,Ahe=()=>D_&&typeof window.requestAnimationFrame!=iL,Kq=(t,e)=>{const n=Ru.get(t);return[()=>!un(e)&&t.get(e)||qR,r=>{if(!un(e)){const s=t.get(e);e in X1||(X1[e]=s),n[5](e,df(s,r),s||qR)}},n[6],()=>!un(e)&&e in X1?X1[e]:!un(e)&&t.get(e)||qR]};let Sk=!0;const She=()=>Sk,[xk,Ik]=D_&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Nh,Nh],xhe=()=>{const t=Ak&&document.visibilityState;return un(t)||t!=="hidden"},Ihe=t=>(Ak&&document.addEventListener("visibilitychange",t),xk("focus",t),()=>{Ak&&document.removeEventListener("visibilitychange",t),Ik("focus",t)}),Nhe=t=>{const e=()=>{Sk=!0,t()},n=()=>{Sk=!1};return xk("online",e),xk("offline",n),()=>{Ik("online",e),Ik("offline",n)}},The={isOnline:She,isVisible:xhe},Rhe={initFocus:Ihe,initReconnect:Nhe},D6=!Wo.useId,KE=!D_||_he,Phe=t=>Ahe()?window.requestAnimationFrame(t):setTimeout(t,1),VR=KE?k.useEffect:k.useLayoutEffect,KR=typeof navigator<"u"&&navigator.connection,M6=!KE&&KR&&(["slow-2g","2g"].includes(KR.effectiveType)||KR.saveData),eA=new WeakMap,Ohe=t=>_k.prototype.toString.call(t),YR=(t,e)=>t===`[object ${e}]`;let khe=0;const Nk=t=>{const e=typeof t,n=Ohe(t),r=YR(n,"Date"),s=YR(n,"RegExp"),i=YR(n,"Object");let o,a;if(_k(t)===t&&!r&&!s){if(o=eA.get(t),o)return o;if(o=++khe+"~",eA.set(t,o),Array.isArray(t)){for(o="@",a=0;a<t.length;a++)o+=Nk(t[a])+",";eA.set(t,o)}if(i){o="#";const c=_k.keys(t).sort();for(;!un(a=c.pop());)un(t[a])||(o+=a+":"+Nk(t[a])+",");eA.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},oL=t=>{if(bl(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?Nk(t):"",[t,e]};let Dhe=0;const Tk=()=>++Dhe;async function Yq(...t){const[e,n,r,s]=t,i=df({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(bl(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=oL(h);if(!f)return;const[p,g]=Kq(e,f),[w,m,b,v]=Ru.get(e),A=()=>{const W=w[f];return(bl(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete b[f],delete v[f],W&&W[0])?W[0](qq).then(()=>p().data):p().data};if(t.length<3)return A();let C=r,T,x=!1;const N=Tk();m[f]=[N,0];const S=!un(c),D=p(),P=D.data,$=D._c,G=un($)?P:$;if(S&&(c=bl(c)?c(G,P):c,g({data:c,_c:G})),bl(C))try{C=C(G)}catch(W){T=W,x=!0}if(C&&Vq(C))if(C=await C.catch(W=>{T=W,x=!0}),N!==m[f][0]){if(x)throw T;return C}else x&&S&&l(T)&&(o=!0,g({data:G,_c:gi}));if(o&&!x)if(bl(o)){const W=o(C,G);g({data:W,error:gi,_c:gi})}else g({data:C,error:gi,_c:gi});if(m[f][1]=Tk(),Promise.resolve(A()).then(()=>{g({_c:gi})}),x){if(u)throw T;return}return C}}const L6=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},Mhe=(t,e)=>{if(!Ru.has(t)){const n=df(Rhe,e),r=Object.create(null),s=Yq.bind(gi,t);let i=Nh;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!Ru.has(t)&&(Ru.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!KE)){const u=n.initFocus(setTimeout.bind(gi,L6.bind(gi,r,Hq))),d=n.initReconnect(setTimeout.bind(gi,L6.bind(gi,r,Gq)));i=()=>{u&&u(),d&&d(),Ru.delete(t)}}};return l(),[t,s,l,i]}return[t,Ru.get(t)[4]]},Lhe=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!un(i)&&o>i||setTimeout(r,a,s)},Uhe=Ck,[Qq,Bhe]=Mhe(new Map),$he=df({onLoadingSlow:Nh,onSuccess:Nh,onError:Nh,onErrorRetry:Lhe,onDiscarded:Nh,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:M6?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:M6?5e3:3e3,compare:Uhe,isPaused:()=>!1,cache:Qq,mutate:Bhe,fallback:{}},The),Fhe=(t,e)=>{const n=df(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=df(s,o))}return n},jhe=k.createContext({}),Whe="$inf$",Jq=D_&&window.__SWR_DEVTOOLS_USE__,zhe=Jq?window.__SWR_DEVTOOLS_USE__:[],Hhe=()=>{Jq&&(window.__SWR_DEVTOOLS_REACT__=Wo)},Ghe=t=>bl(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],qhe=()=>df($he,k.useContext(jhe)),Vhe=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=oL(e),[,,,a]=Ru.get(Qq);if(o.startsWith(Whe))return n(...i);const c=a[o];return un(c)?n(...i):(delete a[o],c)}),r),Khe=zhe.concat(Vhe),Yhe=t=>function(...n){const r=qhe(),[s,i,o]=Ghe(n),a=Fhe(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(Khe);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},Qhe=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};Hhe();const QR=Wo.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),JR={dedupe:!0},Jhe=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,w]=Ru.get(r),[m,b]=oL(t),v=k.useRef(!1),A=k.useRef(!1),C=k.useRef(m),T=k.useRef(e),x=k.useRef(n),N=()=>x.current,S=()=>N().isVisible()&&N().isOnline(),[D,P,$,G]=Kq(r,m),W=k.useRef({}).current,I=un(o)?un(n.fallback)?gi:n.fallback[m]:o,R=(ne,ie)=>{for(const be in W){const fe=be;if(fe==="data"){if(!s(ne[fe],ie[fe])&&(!un(ne[fe])||!s(ce,ie[fe])))return!1}else if(ie[fe]!==ne[fe])return!1}return!0},B=k.useMemo(()=>{const ne=!m||!e?!1:un(a)?N().isPaused()||i?!1:c!==!1:a,ie=ct=>{const Tt=df(ct);return delete Tt._k,ne?{isValidating:!0,isLoading:!0,...Tt}:Tt},be=D(),fe=G(),ve=ie(be),ht=be===fe?ve:ie(fe);let Xe=ve;return[()=>{const ct=ie(D());return R(ct,Xe)?(Xe.data=ct.data,Xe.isLoading=ct.isLoading,Xe.isValidating=ct.isValidating,Xe.error=ct.error,Xe):(Xe=ct,ct)},()=>ht]},[r,m]),O=zq.useSyncExternalStore(k.useCallback(ne=>$(m,(ie,be)=>{R(be,ie)||ne()}),[r,m]),B[0],B[1]),M=!v.current,j=f[m]&&f[m].length>0,V=O.data,te=un(V)?I&&Vq(I)?QR(I):I:V,Z=O.error,X=k.useRef(te),ce=h?un(V)?un(X.current)?te:X.current:V:te,ge=j&&!un(Z)?!1:M&&!un(a)?a:N().isPaused()?!1:i?un(te)?!1:c:un(te)||c,Me=!!(m&&e&&M&&ge),it=un(O.isValidating)?Me:O.isValidating,Je=un(O.isLoading)?Me:O.isLoading,bt=k.useCallback(async ne=>{const ie=T.current;if(!m||!ie||A.current||N().isPaused())return!1;let be,fe,ve=!0;const ht=ne||{},Xe=!g[m]||!ht.dedupe,ct=()=>D6?!A.current&&m===C.current&&v.current:m===C.current,Tt={isValidating:!1,isLoading:!1},In=()=>{P(Tt)},nt=()=>{const zt=g[m];zt&&zt[1]===fe&&delete g[m]},Dn={isValidating:!0};un(D().data)&&(Dn.isLoading=!0);try{if(Xe&&(P(Dn),n.loadingTimeout&&un(D().data)&&setTimeout(()=>{ve&&ct()&&N().onLoadingSlow(m,n)},n.loadingTimeout),g[m]=[ie(b),Tk()]),[be,fe]=g[m],be=await be,Xe&&setTimeout(nt,n.dedupingInterval),!g[m]||g[m][1]!==fe)return Xe&&ct()&&N().onDiscarded(m),!1;Tt.error=gi;const zt=p[m];if(!un(zt)&&(fe<=zt[0]||fe<=zt[1]||zt[1]===0))return In(),Xe&&ct()&&N().onDiscarded(m),!1;const ke=D().data;Tt.data=s(ke,be)?ke:be,Xe&&ct()&&N().onSuccess(be,m,n)}catch(zt){nt();const ke=N(),{shouldRetryOnError:Nn}=ke;ke.isPaused()||(Tt.error=zt,Xe&&ct()&&(ke.onError(zt,m,ke),(Nn===!0||bl(Nn)&&Nn(zt))&&(!N().revalidateOnFocus||!N().revalidateOnReconnect||S())&&ke.onErrorRetry(zt,m,ke,Ri=>{const lr=f[m];lr&&lr[0]&&lr[0](O6,Ri)},{retryCount:(ht.retryCount||0)+1,dedupe:!0})))}return ve=!1,In(),!0},[m,r]),Nt=k.useCallback((...ne)=>Yq(r,C.current,...ne),[]);if(VR(()=>{T.current=e,x.current=n,un(V)||(X.current=V)}),VR(()=>{if(!m)return;const ne=bt.bind(gi,JR);let ie=0;N().revalidateOnFocus&&(ie=Date.now()+N().focusThrottleInterval);const fe=Qhe(m,f,(ve,ht={})=>{if(ve==Hq){const Xe=Date.now();N().revalidateOnFocus&&Xe>ie&&S()&&(ie=Xe+N().focusThrottleInterval,ne())}else if(ve==Gq)N().revalidateOnReconnect&&S()&&ne();else{if(ve==qq)return bt();if(ve==O6)return bt(ht)}});return A.current=!1,C.current=m,v.current=!0,P({_k:b}),ge&&(g[m]||(un(te)||KE?ne():Phe(ne))),()=>{A.current=!0,fe()}},[m]),VR(()=>{let ne;function ie(){const fe=bl(l)?l(D().data):l;fe&&ne!==-1&&(ne=setTimeout(be,fe))}function be(){!D().error&&(u||N().isVisible())&&(d||N().isOnline())?bt(JR).then(ie):ie()}return ie(),()=>{ne&&(clearTimeout(ne),ne=-1)}},[l,u,d,m]),k.useDebugValue(ce),i&&un(te)&&m){if(!D6&&KE)throw new Error("Fallback data is required when using Suspense in SSR.");T.current=e,x.current=n,A.current=!1;const ne=w[m];if(!un(ne)){const ie=Nt(ne);QR(ie)}if(un(Z)){const ie=bt(JR);un(ce)||(ie.status="fulfilled",ie.value=!0),QR(ie)}else throw Z}return{mutate:Nt,get data(){return W.data=!0,ce},get error(){return W.error=!0,Z},get isValidating(){return W.isValidating=!0,it},get isLoading(){return W.isLoading=!0,Je}}},U6=Yhe(Jhe);class Zhe extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const Xhe=U6.default||U6,efe="https://react-tweet.vercel.app";async function tfe([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new Zhe({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const nfe=(t,e,n)=>{const{isLoading:r,data:s,error:i}=Xhe(()=>e||t?[e||t&&`${efe}/api/tweet/${t}`,n]:null,tfe,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},rfe=({id:t,apiUrl:e,fallback:n=y.jsx(fhe,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=nfe(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||che;return y.jsx(l,{error:i?i(a):a})}return y.jsx(ihe,{tweet:o,components:r})};var bN={exports:{}},Zq={},Xq={exports:{}},sfe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ife=sfe,ofe=ife;function eV(){}function tV(){}tV.resetWarningCache=eV;var afe=function(){function t(r,s,i,o,a,c){if(c!==ofe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:tV,resetWarningCache:eV};return n.PropTypes=n,n};Xq.exports=afe();var nV=Xq.exports,Rk={exports:{}};function rV(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=rV(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function B6(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=rV(t))&&(r&&(r+=" "),r+=e);return r}Rk.exports=B6,Rk.exports.clsx=B6;var cfe=Rk.exports,Tr={},zl={};Object.defineProperty(zl,"__esModule",{value:!0});zl.dontSetMe=ffe;zl.findInArray=lfe;zl.int=hfe;zl.isFunction=ufe;zl.isNum=dfe;function lfe(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function ufe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function dfe(t){return typeof t=="number"&&!isNaN(t)}function hfe(t){return parseInt(t,10)}function ffe(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var em={};Object.defineProperty(em,"__esModule",{value:!0});em.browserPrefixToKey=iV;em.browserPrefixToStyle=pfe;em.default=void 0;em.getPrefix=sV;const ZR=["Moz","Webkit","O","ms"];function sV(){var n,r;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(r=(n=window.document)==null?void 0:n.documentElement)==null?void 0:r.style;if(!e||t in e)return"";for(let s=0;s<ZR.length;s++)if(iV(t,ZR[s])in e)return ZR[s];return""}function iV(t,e){return e?`${e}${gfe(t)}`:t}function pfe(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function gfe(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}em.default=sV();Object.defineProperty(Tr,"__esModule",{value:!0});Tr.addClassName=cV;Tr.addEvent=yfe;Tr.addUserSelectStyles=Nfe;Tr.createCSSTransform=Afe;Tr.createSVGTransform=Sfe;Tr.getTouch=xfe;Tr.getTouchIdentifier=Ife;Tr.getTranslation=aL;Tr.innerHeight=Efe;Tr.innerWidth=Cfe;Tr.matchesSelector=aV;Tr.matchesSelectorAndParentsTo=mfe;Tr.offsetXYFromParent=_fe;Tr.outerHeight=bfe;Tr.outerWidth=vfe;Tr.removeClassName=lV;Tr.removeEvent=wfe;Tr.scheduleRemoveUserSelectStyles=Tfe;var Ho=zl,$6=oV(em);function oV(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(oV=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}let tA="";function aV(t,e){return tA||(tA=(0,Ho.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,Ho.isFunction)(t[n])})),(0,Ho.isFunction)(t[tA])?t[tA](e):!1}function mfe(t,e,n){let r=t;do{if(aV(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function yfe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function wfe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function bfe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Ho.int)(n.borderTopWidth),e+=(0,Ho.int)(n.borderBottomWidth),e}function vfe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Ho.int)(n.borderLeftWidth),e+=(0,Ho.int)(n.borderRightWidth),e}function Efe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Ho.int)(n.paddingTop),e-=(0,Ho.int)(n.paddingBottom),e}function Cfe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Ho.int)(n.paddingLeft),e-=(0,Ho.int)(n.paddingRight),e}function _fe(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function Afe(t,e){const n=aL(t,e,"px");return{[(0,$6.browserPrefixToKey)("transform",$6.default)]:n}}function Sfe(t,e){return aL(t,e,"")}function aL(t,e,n){let{x:r,y:s}=t,i=`translate(${r}${n},${s}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${o}, ${a})`+i}return i}function xfe(t,e){return t.targetTouches&&(0,Ho.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,Ho.findInArray)(t.changedTouches,n=>e===n.identifier)}function Ife(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function Nfe(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&cV(t.body,"react-draggable-transparent-selection")}function Tfe(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{F6(t)}):F6(t)}function F6(t){if(t)try{if(t.body&&lV(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function cV(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function lV(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var Hl={};Object.defineProperty(Hl,"__esModule",{value:!0});Hl.canDragX=Ofe;Hl.canDragY=kfe;Hl.createCoreData=Mfe;Hl.createDraggableData=Lfe;Hl.getBoundPosition=Rfe;Hl.getControlPosition=Dfe;Hl.snapToGrid=Pfe;var So=zl,Sy=Tr;function Rfe(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:Ufe(r);const s=cL(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=s.getRootNode().querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,So.int)(u.paddingLeft)+(0,So.int)(l.marginLeft),top:-s.offsetTop+(0,So.int)(u.paddingTop)+(0,So.int)(l.marginTop),right:(0,Sy.innerWidth)(c)-(0,Sy.outerWidth)(s)-s.offsetLeft+(0,So.int)(u.paddingRight)-(0,So.int)(l.marginRight),bottom:(0,Sy.innerHeight)(c)-(0,Sy.outerHeight)(s)-s.offsetTop+(0,So.int)(u.paddingBottom)-(0,So.int)(l.marginBottom)}}return(0,So.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,So.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,So.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,So.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function Pfe(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function Ofe(t){return t.props.axis==="both"||t.props.axis==="x"}function kfe(t){return t.props.axis==="both"||t.props.axis==="y"}function Dfe(t,e,n){const r=typeof e=="number"?(0,Sy.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=cL(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,Sy.offsetXYFromParent)(r||t,i,n.props.scale)}function Mfe(t,e,n){const r=!(0,So.isNum)(t.lastX),s=cL(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function Lfe(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function Ufe(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function cL(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var vN={},EN={};Object.defineProperty(EN,"__esModule",{value:!0});EN.default=Bfe;function Bfe(){}Object.defineProperty(vN,"__esModule",{value:!0});vN.default=void 0;var XR=uV(k),oi=lL(nV),$fe=lL(nL),qs=Tr,bd=Hl,eP=zl,Hb=lL(EN);function lL(t){return t&&t.__esModule?t:{default:t}}function uV(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(uV=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}function ci(t,e,n){return(e=Ffe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ffe(t){var e=jfe(t,"string");return typeof e=="symbol"?e:e+""}function jfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Qa={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let vd=Qa.mouse,CN=class extends XR.Component{constructor(){super(...arguments),ci(this,"dragging",!1),ci(this,"lastX",NaN),ci(this,"lastY",NaN),ci(this,"touchIdentifier",null),ci(this,"mounted",!1),ci(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,qs.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,qs.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const s=(0,qs.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,bd.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,bd.createCoreData)(this,o,a);(0,Hb.default)("DraggableCore: handleDragStart: %j",c),(0,Hb.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,qs.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,qs.addEvent)(r,vd.move,this.handleDrag),(0,qs.addEvent)(r,vd.stop,this.handleDragStop))}),ci(this,"handleDrag",e=>{const n=(0,bd.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,bd.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,bd.createCoreData)(this,r,s);if((0,Hb.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),ci(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,bd.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,bd.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,bd.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,qs.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,Hb.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,Hb.default)("DraggableCore: Removing handlers"),(0,qs.removeEvent)(a.ownerDocument,vd.move,this.handleDrag),(0,qs.removeEvent)(a.ownerDocument,vd.stop,this.handleDragStop))}),ci(this,"onMouseDown",e=>(vd=Qa.mouse,this.handleDragStart(e))),ci(this,"onMouseUp",e=>(vd=Qa.mouse,this.handleDragStop(e))),ci(this,"onTouchStart",e=>(vd=Qa.touch,this.handleDragStart(e))),ci(this,"onTouchEnd",e=>(vd=Qa.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,qs.addEvent)(e,Qa.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,qs.removeEvent)(n,Qa.mouse.move,this.handleDrag),(0,qs.removeEvent)(n,Qa.touch.move,this.handleDrag),(0,qs.removeEvent)(n,Qa.mouse.stop,this.handleDragStop),(0,qs.removeEvent)(n,Qa.touch.stop,this.handleDragStop),(0,qs.removeEvent)(e,Qa.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,qs.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,r;return(e=this.props)!=null&&e.nodeRef?(r=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:r.current:$fe.default.findDOMNode(this)}render(){return XR.cloneElement(XR.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};vN.default=CN;ci(CN,"displayName","DraggableCore");ci(CN,"propTypes",{allowAnyClick:oi.default.bool,allowMobileScroll:oi.default.bool,children:oi.default.node.isRequired,disabled:oi.default.bool,enableUserSelectHack:oi.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:oi.default.arrayOf(oi.default.number),handle:oi.default.string,cancel:oi.default.string,nodeRef:oi.default.object,onStart:oi.default.func,onDrag:oi.default.func,onStop:oi.default.func,onMouseDown:oi.default.func,scale:oi.default.number,className:eP.dontSetMe,style:eP.dontSetMe,transform:eP.dontSetMe});ci(CN,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=d(k),n=u(nV),r=u(nL),s=cfe,i=Tr,o=Hl,a=zl,c=u(vN),l=u(EN);function u(m){return m&&m.__esModule?m:{default:m}}function d(m,b){if(typeof WeakMap=="function")var v=new WeakMap,A=new WeakMap;return(d=function(C,T){if(!T&&C&&C.__esModule)return C;var x,N,S={__proto__:null,default:C};if(C===null||typeof C!="object"&&typeof C!="function")return S;if(x=T?A:v){if(x.has(C))return x.get(C);x.set(C,S)}for(const D in C)D!=="default"&&{}.hasOwnProperty.call(C,D)&&((N=(x=Object.defineProperty)&&Object.getOwnPropertyDescriptor(C,D))&&(N.get||N.set)?x(S,D,N):S[D]=C[D]);return S})(m,b)}function h(){return h=Object.assign?Object.assign.bind():function(m){for(var b=1;b<arguments.length;b++){var v=arguments[b];for(var A in v)({}).hasOwnProperty.call(v,A)&&(m[A]=v[A])}return m},h.apply(null,arguments)}function f(m,b,v){return(b=p(b))in m?Object.defineProperty(m,b,{value:v,enumerable:!0,configurable:!0,writable:!0}):m[b]=v,m}function p(m){var b=g(m,"string");return typeof b=="symbol"?b:b+""}function g(m,b){if(typeof m!="object"||!m)return m;var v=m[Symbol.toPrimitive];if(v!==void 0){var A=v.call(m,b);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(m)}class w extends e.Component{static getDerivedStateFromProps(b,v){let{position:A}=b,{prevPropsPosition:C}=v;return A&&(!C||A.x!==C.x||A.y!==C.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:A,prevPropsPosition:C}),{x:A.x,y:A.y,prevPropsPosition:{...A}}):null}constructor(b){super(b),f(this,"onDragStart",(v,A)=>{if((0,l.default)("Draggable: onDragStart: %j",A),this.props.onStart(v,(0,o.createDraggableData)(this,A))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),f(this,"onDrag",(v,A)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",A);const C=(0,o.createDraggableData)(this,A),T={x:C.x,y:C.y,slackX:0,slackY:0};if(this.props.bounds){const{x:N,y:S}=T;T.x+=this.state.slackX,T.y+=this.state.slackY;const[D,P]=(0,o.getBoundPosition)(this,T.x,T.y);T.x=D,T.y=P,T.slackX=this.state.slackX+(N-T.x),T.slackY=this.state.slackY+(S-T.y),C.x=T.x,C.y=T.y,C.deltaX=T.x-this.state.x,C.deltaY=T.y-this.state.y}if(this.props.onDrag(v,C)===!1)return!1;this.setState(T)}),f(this,"onDragStop",(v,A)=>{if(!this.state.dragging||this.props.onStop(v,(0,o.createDraggableData)(this,A))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",A);const T={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:N,y:S}=this.props.position;T.x=N,T.y=S}this.setState(T)}),this.state={dragging:!1,dragged:!1,x:b.position?b.position.x:b.defaultPosition.x,y:b.position?b.position.y:b.defaultPosition.y,prevPropsPosition:{...b.position},slackX:0,slackY:0,isElementSVG:!1},b.position&&!(b.onDrag||b.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var b,v;return((v=(b=this.props)==null?void 0:b.nodeRef)==null?void 0:v.current)??r.default.findDOMNode(this)}render(){const{axis:b,bounds:v,children:A,defaultPosition:C,defaultClassName:T,defaultClassNameDragging:x,defaultClassNameDragged:N,position:S,positionOffset:D,scale:P,...$}=this.props;let G={},W=null;const R=!!!S||this.state.dragging,B=S||C,O={x:(0,o.canDragX)(this)&&R?this.state.x:B.x,y:(0,o.canDragY)(this)&&R?this.state.y:B.y};this.state.isElementSVG?W=(0,i.createSVGTransform)(O,D):G=(0,i.createCSSTransform)(O,D);const M=(0,s.clsx)(A.props.className||"",T,{[x]:this.state.dragging,[N]:this.state.dragged});return e.createElement(c.default,h({},$,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(A),{className:M,style:{...A.props.style,...G},transform:W}))}}t.default=w,f(w,"displayName","Draggable"),f(w,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),f(w,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(Zq);const{default:dV,DraggableCore:Wfe}=Zq;bN.exports=dV;bN.exports.default=dV;bN.exports.DraggableCore=Wfe;var zfe=bN.exports;const M_=Qg(zfe);function yr(){return yr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yr.apply(null,arguments)}function hV(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var fV={exports:{}},kn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Es=typeof Symbol=="function"&&Symbol.for,uL=Es?Symbol.for("react.element"):60103,dL=Es?Symbol.for("react.portal"):60106,_N=Es?Symbol.for("react.fragment"):60107,AN=Es?Symbol.for("react.strict_mode"):60108,SN=Es?Symbol.for("react.profiler"):60114,xN=Es?Symbol.for("react.provider"):60109,IN=Es?Symbol.for("react.context"):60110,hL=Es?Symbol.for("react.async_mode"):60111,NN=Es?Symbol.for("react.concurrent_mode"):60111,TN=Es?Symbol.for("react.forward_ref"):60112,RN=Es?Symbol.for("react.suspense"):60113,Hfe=Es?Symbol.for("react.suspense_list"):60120,PN=Es?Symbol.for("react.memo"):60115,ON=Es?Symbol.for("react.lazy"):60116,Gfe=Es?Symbol.for("react.block"):60121,qfe=Es?Symbol.for("react.fundamental"):60117,Vfe=Es?Symbol.for("react.responder"):60118,Kfe=Es?Symbol.for("react.scope"):60119;function Jo(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case uL:switch(t=t.type,t){case hL:case NN:case _N:case SN:case AN:case RN:return t;default:switch(t=t&&t.$$typeof,t){case IN:case TN:case ON:case PN:case xN:return t;default:return e}}case dL:return e}}}function pV(t){return Jo(t)===NN}kn.AsyncMode=hL;kn.ConcurrentMode=NN;kn.ContextConsumer=IN;kn.ContextProvider=xN;kn.Element=uL;kn.ForwardRef=TN;kn.Fragment=_N;kn.Lazy=ON;kn.Memo=PN;kn.Portal=dL;kn.Profiler=SN;kn.StrictMode=AN;kn.Suspense=RN;kn.isAsyncMode=function(t){return pV(t)||Jo(t)===hL};kn.isConcurrentMode=pV;kn.isContextConsumer=function(t){return Jo(t)===IN};kn.isContextProvider=function(t){return Jo(t)===xN};kn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===uL};kn.isForwardRef=function(t){return Jo(t)===TN};kn.isFragment=function(t){return Jo(t)===_N};kn.isLazy=function(t){return Jo(t)===ON};kn.isMemo=function(t){return Jo(t)===PN};kn.isPortal=function(t){return Jo(t)===dL};kn.isProfiler=function(t){return Jo(t)===SN};kn.isStrictMode=function(t){return Jo(t)===AN};kn.isSuspense=function(t){return Jo(t)===RN};kn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===_N||t===NN||t===SN||t===AN||t===RN||t===Hfe||typeof t=="object"&&t!==null&&(t.$$typeof===ON||t.$$typeof===PN||t.$$typeof===xN||t.$$typeof===IN||t.$$typeof===TN||t.$$typeof===qfe||t.$$typeof===Vfe||t.$$typeof===Kfe||t.$$typeof===Gfe)};kn.typeOf=Jo;fV.exports=kn;var Yfe=fV.exports,fL=Yfe,Qfe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Jfe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Zfe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},gV={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},pL={};pL[fL.ForwardRef]=Zfe;pL[fL.Memo]=gV;function j6(t){return fL.isMemo(t)?gV:pL[t.$$typeof]||Qfe}var Xfe=Object.defineProperty,epe=Object.getOwnPropertyNames,W6=Object.getOwnPropertySymbols,tpe=Object.getOwnPropertyDescriptor,npe=Object.getPrototypeOf,z6=Object.prototype;function mV(t,e,n){if(typeof e!="string"){if(z6){var r=npe(e);r&&r!==z6&&mV(t,r,n)}var s=epe(e);W6&&(s=s.concat(W6(e)));for(var i=j6(t),o=j6(e),a=0;a<s.length;++a){var c=s[a];if(!Jfe[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=tpe(e,c);try{Xfe(t,c,l)}catch{}}}}return t}var rpe=mV;const spe=Qg(rpe);var yV={};Object.defineProperty(yV,"__esModule",{value:!0});yV.default=ipe;function ipe(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function nA(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dx(){return Dx=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dx.apply(this,arguments)}function ope(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Ed(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ape(t){var e=function(n){ope(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,nA(Ed(Ed(i)),"cachedTheme",void 0),nA(Ed(Ed(i)),"lastOuterTheme",void 0),nA(Ed(Ed(i)),"lastTheme",void 0),nA(Ed(Ed(i)),"renderProvider",function(l){var u=i.props.children;return Wo.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?Dx({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?Wo.createElement(t.Consumer,null,this.renderProvider):null},r}(Wo.Component);return e}function cpe(t){return function(n){var r=Wo.forwardRef(function(s,i){return Wo.createElement(t.Consumer,null,function(o){return Wo.createElement(n,Dx({theme:o,ref:i},s))})});return spe(r,n),r}}function lpe(t){var e=function(){var r=Wo.useContext(t);return r};return e}function upe(t){return{context:t,withTheme:cpe(t),useTheme:lpe(t),ThemeProvider:ape(t)}}var wV=k.createContext();upe(wV);var H6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xw=(typeof window>"u"?"undefined":H6(window))==="object"&&(typeof document>"u"?"undefined":H6(document))==="object"&&document.nodeType===9;function YE(t){"@babel/helpers - typeof";return YE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YE(t)}function dpe(t,e){if(YE(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(YE(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function hpe(t){var e=dpe(t,"string");return YE(e)=="symbol"?e:e+""}function fpe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hpe(r.key),r)}}function gL(t,e,n){return e&&fpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pk(t,e){return Pk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Pk(t,e)}function bV(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Pk(t,e)}function G6(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var ppe={}.constructor;function Ok(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(Ok);if(t.constructor!==ppe)return t;var e={};for(var n in t)e[n]=Ok(t[n]);return e}function kN(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=Ok(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var q6=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},cg=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=q6(e[r]," ");else n=q6(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function eb(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function Gb(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function QE(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=eb(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=Gb(f+":"+u+cg(p)+";",o))}}else for(var g in a){var w=a[g];w!=null&&(r&&(r+=l),r+=Gb(g+":"+u+cg(w)+";",o))}for(var m in e){var b=e[m];b!=null&&m!=="fallbacks"&&(r&&(r+=l),r+=Gb(m+":"+u+cg(b)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),Gb(""+t+u+"{"+r,o)+Gb("}",o))}var gpe=/([[\].#*$><+~=|^:(),"'`\s])/g,V6=typeof CSS<"u"&&CSS.escape,mL=function(t){return V6?V6(t):t.replace(gpe,"\\$1")},vV=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),kk=function(t){bV(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(G6(G6(o)),l),o.selectorText="."+mL(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=cg(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?yr({},s,{allowEmpty:!0}):s;return QE(this.selectorText,this.style,a)},gL(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(vV),mpe={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new kk(e,n,r)}},tP={indent:1,children:!0},ype=/@([\w-]+)/,wpe=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(ype);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new DN(yr({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=tP);var s=eb(r),i=s.linebreak;if(r.indent==null&&(r.indent=tP.indent),r.children==null&&(r.children=tP.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),bpe=/@container|@media|@supports\s+/,vpe={onCreateRule:function(e,n,r){return bpe.test(e)?new wpe(e,n,r):null}},nP={indent:1,children:!0},Epe=/@keyframes\s+([\w-]+)/,Dk=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(Epe);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:mL(c(this,a)),this.rules=new DN(yr({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],yr({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=nP);var s=eb(r),i=s.linebreak;if(r.indent==null&&(r.indent=nP.indent),r.children==null&&(r.children=nP.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),Cpe=/@keyframes\s+/,_pe=/\$([\w-]+)/g,Mk=function(e,n){return typeof e=="string"?e.replace(_pe,function(r,s){return s in n?n[s]:r}):e},K6=function(e,n,r){var s=e[n],i=Mk(s,r);i!==s&&(e[n]=i)},Ape={onCreateRule:function(e,n,r){return typeof e=="string"&&Cpe.test(e)?new Dk(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&K6(e,"animation-name",r.keyframes),"animation"in e&&K6(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return Mk(e,s.keyframes);case"animation-name":return Mk(e,s.keyframes);default:return e}}},Spe=function(t){bV(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?yr({},s,{allowEmpty:!0}):s;return QE(this.key,this.style,a)},e}(vV),xpe={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new Spe(e,n,r):null}},Ipe=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=eb(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=QE(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return QE(this.at,this.style,r)},t}(),Npe=/@font-face/,Tpe={onCreateRule:function(e,n,r){return Npe.test(e)?new Ipe(e,n,r):null}},Rpe=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return QE(this.key,this.style,r)},t}(),Ppe={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new Rpe(e,n,r):null}},Ope=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),kpe={"@charset":!0,"@import":!0,"@namespace":!0},Dpe={onCreateRule:function(e,n,r){return e in kpe?new Ope(e,n,r):null}},Y6=[mpe,vpe,Ape,xpe,Tpe,Ppe,Dpe],Mpe={process:!0},Q6={force:!0,process:!0},DN=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=yr({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+mL(this.classes[p]));var g=kN(p,s,f);if(!g)return null;this.register(g);var w=f.index===void 0?this.index.length:f.index;return this.index.splice(w,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=yr({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof kk?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof Dk&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof kk?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof Dk&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=Mpe);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,Q6)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,Q6)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=eb(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),EV=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=yr({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new DN(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),Lpe=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),Upe=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=hV(s,["attached"]),a=eb(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},gL(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),eE=new Upe,Lk=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),Uk="2f1acc6c3a606b082e5eef5e54414ffb";Lk[Uk]==null&&(Lk[Uk]=0);var J6=Lk[Uk]++,Z6=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+J6+a+n:c+i.key+"-"+J6+(a?"-"+a:"")+"-"+n};return r},CV=function(e){var n;return function(){return n||(n=e()),n}},Bpe=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},$pe=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=cg(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},Fpe=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},jpe=function(e,n){return e.selectorText=n,e.selectorText===n},_V=CV(function(){return document.querySelector("head")});function Wpe(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function zpe(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function Hpe(t){for(var e=_V(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function Gpe(t){var e=eE.registry;if(e.length>0){var n=Wpe(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=zpe(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=Hpe(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function qpe(t,e){var n=e.insertionPoint,r=Gpe(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}_V().appendChild(t)}var Vpe=CV(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),X6=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},e8=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},Kpe=function(){var e=document.createElement("style");return e.textContent=`
`,e},Ype=function(){function t(n){this.getPropertyValue=Bpe,this.setProperty=$pe,this.removeProperty=Fpe,this.setSelector=jpe,this.hasInsertedRules=!1,this.cssRules=[],n&&eE.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||Kpe(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=Vpe();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){qpe(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=e8(i,s);if(a=X6(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=e8(i,s),d=X6(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof EV&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),Qpe=0,Jpe=function(){function t(n){this.id=Qpe++,this.version="10.10.0",this.plugins=new Lpe,this.options={id:{minify:!1},createGenerateId:Z6,Renderer:Xw?Ype:null,plugins:[]},this.generateId=Z6({minify:!1});for(var r=0;r<Y6.length;r++)this.plugins.use(Y6[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=yr({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=eE.index===0?0:eE.index+1);var a=new EV(r,yr({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),eE.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=yr({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=kN(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),AV=function(e){return new Jpe(e)},t8=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},gL(t,[{key:"size",get:function(){return this.length}}]),t}(),yL=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function SV(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=SV(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */AV();var xV=Date.now(),rP="fnValues"+xV,sP="fnStyle"+ ++xV,Zpe=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=kN(n,{},s);return i[sP]=r,i},onProcessStyle:function(n,r){if(rP in r||sP in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[rP]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[sP];a&&(o.style=a(n)||{});var c=o[rP];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function Xpe(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var ry;typeof self<"u"?ry=self:typeof window<"u"?ry=window:typeof global<"u"?ry=global:typeof module<"u"?ry=module:ry=Function("return this")();var n8=Xpe(ry),r8=function(e){return e&&e[n8]&&e===e[n8]()},ege=function(e){return{onCreateRule:function(r,s,i){if(!r8(s))return null;var o=s,a=kN(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!r8(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},tge=/;\n/,nge=function(e){for(var n={},r=e.split(tge),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},rge=function(e){typeof e.style=="string"&&(e.style=nge(e.style))};function sge(){return{onProcessRule:rge}}var Kh="@global",Bk="@global ",ige=function(){function t(n,r,s){this.type="global",this.at=Kh,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new DN(yr({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),oge=function(){function t(n,r,s){this.type="global",this.at=Kh,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(Bk.length);this.rule=s.jss.createRule(i,r,yr({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),age=/\s*,\s*/g;function IV(t,e){for(var n=t.split(age),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function cge(t,e){var n=t.options,r=t.style,s=r?r[Kh]:null;if(s){for(var i in s)e.addRule(i,s[i],yr({},n,{selector:IV(i,t.selector)}));delete r[Kh]}}function lge(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,Kh.length)!==Kh)){var i=IV(s.substr(Kh.length),t.selector);e.addRule(i,r[s],yr({},n,{selector:i})),delete r[s]}}function uge(){function t(n,r,s){if(!n)return null;if(n===Kh)return new ige(n,r,s);if(n[0]==="@"&&n.substr(0,Bk.length)===Bk)return new oge(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(cge(n,r),lge(n,r))}return{onCreateRule:t,onProcessRule:e}}var hS=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},iP="extendCurrValue"+Date.now();function dge(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];bp(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?yr({},t,{extend:l}):t.extend[c];bp(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){bp(t.extend.extend,e,n,r);continue}if(hS(t.extend[d])){d in r||(r[d]={}),bp(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function hge(t,e,n,r){for(var s in t)if(s!=="extend"){if(hS(r[s])&&hS(t[s])){bp(t[s],e,n,r[s]);continue}if(hS(t[s])){r[s]=bp(t[s],e,n);continue}r[s]=t[s]}}function bp(t,e,n,r){return r===void 0&&(r={}),dge(t,e,n,r),hge(t,e,n,r),r}function fge(){function t(n,r,s){return"extend"in n?bp(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[iP])s.prop(i,null);return s[iP]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[iP]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var s8=/\s*,\s*/g,pge=/&/g,gge=/\$([\w-]+)/g;function mge(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(s8),a=s.split(s8),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(pge,u):u+" "+h}return c}function n(s,i,o){if(o)return yr({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=yr({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(gge,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],yr({},l,{selector:p})):c.addRule(g,s[d],yr({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function $k(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=$k(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return $k(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function yge(){function t(e,n){return"composes"in e&&($k(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var wge=/[A-Z]/g,bge=/^ms-/,oP={};function vge(t){return"-"+t.toLowerCase()}function NV(t){if(oP.hasOwnProperty(t))return oP[t];var e=t.replace(wge,vge);return oP[t]=bge.test(e)?"-"+e:e}function Mx(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:NV(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(Mx):e.fallbacks=Mx(t.fallbacks)),e}function Ege(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=Mx(n[r]);return n}return Mx(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=NV(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var ue=yL&&CSS?CSS.px:"px",rA=yL&&CSS?CSS.ms:"ms",Nm=yL&&CSS?CSS.percent:"%",Cge={"animation-delay":rA,"animation-duration":rA,"background-position":ue,"background-position-x":ue,"background-position-y":ue,"background-size":ue,border:ue,"border-bottom":ue,"border-bottom-left-radius":ue,"border-bottom-right-radius":ue,"border-bottom-width":ue,"border-left":ue,"border-left-width":ue,"border-radius":ue,"border-right":ue,"border-right-width":ue,"border-top":ue,"border-top-left-radius":ue,"border-top-right-radius":ue,"border-top-width":ue,"border-width":ue,"border-block":ue,"border-block-end":ue,"border-block-end-width":ue,"border-block-start":ue,"border-block-start-width":ue,"border-block-width":ue,"border-inline":ue,"border-inline-end":ue,"border-inline-end-width":ue,"border-inline-start":ue,"border-inline-start-width":ue,"border-inline-width":ue,"border-start-start-radius":ue,"border-start-end-radius":ue,"border-end-start-radius":ue,"border-end-end-radius":ue,margin:ue,"margin-bottom":ue,"margin-left":ue,"margin-right":ue,"margin-top":ue,"margin-block":ue,"margin-block-end":ue,"margin-block-start":ue,"margin-inline":ue,"margin-inline-end":ue,"margin-inline-start":ue,padding:ue,"padding-bottom":ue,"padding-left":ue,"padding-right":ue,"padding-top":ue,"padding-block":ue,"padding-block-end":ue,"padding-block-start":ue,"padding-inline":ue,"padding-inline-end":ue,"padding-inline-start":ue,"mask-position-x":ue,"mask-position-y":ue,"mask-size":ue,height:ue,width:ue,"min-height":ue,"max-height":ue,"min-width":ue,"max-width":ue,bottom:ue,left:ue,top:ue,right:ue,inset:ue,"inset-block":ue,"inset-block-end":ue,"inset-block-start":ue,"inset-inline":ue,"inset-inline-end":ue,"inset-inline-start":ue,"box-shadow":ue,"text-shadow":ue,"column-gap":ue,"column-rule":ue,"column-rule-width":ue,"column-width":ue,"font-size":ue,"font-size-delta":ue,"letter-spacing":ue,"text-decoration-thickness":ue,"text-indent":ue,"text-stroke":ue,"text-stroke-width":ue,"word-spacing":ue,motion:ue,"motion-offset":ue,outline:ue,"outline-offset":ue,"outline-width":ue,perspective:ue,"perspective-origin-x":Nm,"perspective-origin-y":Nm,"transform-origin":Nm,"transform-origin-x":Nm,"transform-origin-y":Nm,"transform-origin-z":Nm,"transition-delay":rA,"transition-duration":rA,"vertical-align":ue,"flex-basis":ue,"shape-margin":ue,size:ue,gap:ue,grid:ue,"grid-gap":ue,"row-gap":ue,"grid-row-gap":ue,"grid-column-gap":ue,"grid-template-rows":ue,"grid-template-columns":ue,"grid-auto-rows":ue,"grid-auto-columns":ue,"box-shadow-x":ue,"box-shadow-y":ue,"box-shadow-blur":ue,"box-shadow-spread":ue,"font-line-height":ue,"text-shadow-x":ue,"text-shadow-y":ue,"text-shadow-blur":ue};function TV(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var _ge=TV(Cge);function tE(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=tE(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=tE(s,e[s],n);else for(var i in e)e[i]=tE(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||_ge[t];return o&&!(e===0&&o===ue)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function Age(t){t===void 0&&(t={});var e=TV(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=tE(o,s[o],e);return s}function r(s,i){return tE(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var Sge={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},xge={position:!0,size:!0},sA={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},aP={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function Ige(t,e,n){return t.map(function(r){return PV(r,e,n,!1,!0)})}function RV(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?RV(t[0],e,n,r):typeof t[0]=="object"?Ige(t,e,r):[t]}function PV(t,e,n,r,s){if(!(sA[e]||aP[e]))return[];var i=[];if(aP[e]&&(t=Nge(t,n,aP[e],r)),Object.keys(t).length)for(var o in sA[e]){if(t[o]){Array.isArray(t[o])?i.push(xge[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}sA[e][o]!=null&&i.push(sA[e][o])}return!i.length||s?i:[i]}function Nge(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=JE((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function JE(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=JE(t.fallbacks[i],e,!0);continue}t[r]=RV(s,r,Sge,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=JE(t.fallbacks,e,!0);continue}t[r]=PV(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function Tge(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=JE(e[r],n);return e}return JE(e,n)}return{onProcessStyle:t}}function Fk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Rge(t){if(Array.isArray(t))return Fk(t)}function Pge(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Oge(t,e){if(t){if(typeof t=="string")return Fk(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fk(t,e):void 0}}function kge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dge(t){return Rge(t)||Pge(t)||Oge(t)||kge()}var vv="",jk="",OV="",kV="",Mge=Xw&&"ontouchstart"in document.documentElement;if(Xw){var cP={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},Lge=document.createElement("p"),lP=Lge.style,Uge="Transform";for(var uP in cP)if(uP+Uge in lP){vv=uP,jk=cP[uP];break}vv==="Webkit"&&"msHyphens"in lP&&(vv="ms",jk=cP.ms,kV="edge"),vv==="Webkit"&&"-apple-trailing-word"in lP&&(OV="apple")}var Ut={js:vv,css:jk,vendor:OV,browser:kV,isTouch:Mge};function Bge(t){return t[1]==="-"||Ut.js==="ms"?t:"@"+Ut.css+"keyframes"+t.substr(10)}var $ge={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:Ut.js==="ms"?"-webkit-"+e:Ut.css+e}},Fge={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:Ut.js==="Webkit"?Ut.css+"print-"+e:e}},jge=/[-\s]+(.)?/g;function Wge(t,e){return e?e.toUpperCase():""}function wL(t){return t.replace(jge,Wge)}function hf(t){return wL("-"+t)}var zge={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(Ut.js==="Webkit"){var r="mask-image";if(wL(r)in n)return e;if(Ut.js+hf(r)in n)return Ut.css+e}return e}},Hge={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:Ut.vendor==="apple"&&!Ut.isTouch?Ut.css+e:e}},Gge={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:Ut.css+e}},qge={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:Ut.css+e}},Vge={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:Ut.js==="Webkit"||Ut.js==="ms"&&Ut.browser!=="edge"?Ut.css+e:e}},Kge={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:Ut.js==="Moz"||Ut.js==="ms"||Ut.vendor==="apple"?Ut.css+e:e}},Yge={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(Ut.js==="Webkit"){var r="WebkitColumn"+hf(e);return r in n?Ut.css+"column-"+e:!1}if(Ut.js==="Moz"){var s="page"+hf(e);return s in n?"page-"+e:!1}return!1}},Qge={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(Ut.js==="Moz")return e;var r=e.replace("-inline","");return Ut.js+hf(r)in n?Ut.css+r:!1}},Jge={supportedProperty:function(e,n){return wL(e)in n?e:!1}},Zge={supportedProperty:function(e,n){var r=hf(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:Ut.js+r in n?Ut.css+e:Ut.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},Xge={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:Ut.js==="ms"?""+Ut.css+e:e}},eme={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:Ut.js==="ms"?Ut.css+"scroll-chaining":e}},tme={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},nme={supportedProperty:function(e,n){var r=tme[e];return r&&Ut.js+hf(r)in n?Ut.css+r:!1}},DV={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},rme=Object.keys(DV),sme=function(e){return Ut.css+e},ime={supportedProperty:function(e,n,r){var s=r.multiple;if(rme.indexOf(e)>-1){var i=DV[e];if(!Array.isArray(i))return Ut.js+hf(i)in n?Ut.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(Ut.js+hf(i[0])in n))return!1;return i.map(sme)}return!1}},MV=[$ge,Fge,zge,Hge,Gge,qge,Vge,Kge,Yge,Qge,Jge,Zge,Xge,eme,nme,ime],i8=MV.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),ome=MV.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,Dge(e.noPrefill)),t},[]),Ev,sp={};if(Xw){Ev=document.createElement("p");var dP=window.getComputedStyle(document.documentElement,"");for(var hP in dP)isNaN(hP)||(sp[dP[hP]]=dP[hP]);ome.forEach(function(t){return delete sp[t]})}function Wk(t,e){if(e===void 0&&(e={}),!Ev)return t;if(sp[t]!=null)return sp[t];(t==="transition"||t==="transform")&&(e[t]=t in Ev.style);for(var n=0;n<i8.length&&(sp[t]=i8[n](t,Ev.style,e),!sp[t]);n++);try{Ev.style[t]=""}catch{return!1}return sp[t]}var Tm={},ame={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},cme=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Bd;function lme(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?Wk(e):", "+Wk(n);return r||e||n}Xw&&(Bd=document.createElement("p"));function o8(t,e){var n=e;if(!Bd||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(Tm[r]!=null)return Tm[r];try{Bd.style[t]=n}catch{return Tm[r]=!1,!1}if(ame[t])n=n.replace(cme,lme);else if(Bd.style[t]===""&&(n=Ut.css+n,n==="-ms-flex"&&(Bd.style[t]="-ms-flexbox"),Bd.style[t]=n,Bd.style[t]===""))return Tm[r]=!1,!1;return Bd.style[t]="",Tm[r]=n,Tm[r]}function ume(){function t(s){if(s.type==="keyframes"){var i=s;i.at=Bge(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=Wk(i);c&&c!==i&&(a=!0);var l=!1,u=o8(c,cg(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return o8(i,cg(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function dme(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var hme=function(e){return e===void 0&&(e={}),{plugins:[Zpe(),ege(e.observable),sge(),uge(),fge(),mge(),yge(),Ege(),Age(e.defaultUnit),Tge(),ume(),dme()]}},fme=Number.MIN_SAFE_INTEGER||-1e9,pme=function(){return fme++},gme=k.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!Xw}),a8=new Map,bL=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new t8),r[n];var s=a8.get(n);return s||(s=new t8,a8.set(n,s)),s},c8=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=bL(r,s);o.manage(i),r.registry&&r.registry.add(n)}},mme=function(e){if(e.sheet){var n=bL(e.context,e.index);n.unmanage(e.theme)}},yme=AV(hme()),LV=new WeakMap,UV=function(e){return LV.get(e)},wme=function(e,n){LV.set(e,n)},bme=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function vme(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",yr({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var Eme=function(e){if(!e.context.disableStylesGeneration){var n=bL(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||yme,i=bme(e),o=SV(i),a=s.createStyleSheet(i,vme(e,o!==null));return wme(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},Cme=function(e,n){for(var r in n)e.deleteRule(n[r])},_me=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},Ame=function(e,n){var r=UV(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},Sme=function(e,n){if(!n)return e.classes;var r=UV(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function l8(t){return t?k.useEffect:Wo.useInsertionEffect||k.useLayoutEffect}var fP={},Dc=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?pme():s,o=r.theming,a=r.name,c=hV(r,["index","theming","name"]),l=o&&o.context||wV,u=function(f){return typeof e=="function"&&(f||k.useContext(l))||fP},d={};return function(f){var p=k.useRef(!0),g=k.useContext(gme),w=u(f&&f.theme),m=k.useMemo(function(){var C=Eme({context:g,styles:e,name:a,theme:w,index:i,sheetOptions:c});return C&&g.isSSR&&c8({index:i,context:g,sheet:C,theme:w}),[C,C?Ame(C,f):null]},[g,w]),b=m[0],v=m[1];l8(g.isSSR)(function(){b&&v&&!p.current&&_me(f,b,v)},[f]),l8(g.isSSR)(function(){return b&&c8({index:i,context:g,sheet:b,theme:w}),function(){b&&(mme({index:i,context:g,sheet:b,theme:w}),v&&Cme(b,v))}},[b]);var A=k.useMemo(function(){return b&&v?Sme(b,v):d},[b,v]);return k.useDebugValue(A),k.useDebugValue(w===fP?"No theme":w),k.useEffect(function(){p.current=!1}),A}};const xme=Dc({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function pP({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=xme(),d=k.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=y.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[y.jsx("img",{src:t,alt:e,className:u.iconImage}),y.jsx("span",{className:u.iconLabel,children:e})]});return o?f:y.jsx(M_,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const Ime=Dc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function ua({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=Ime({isOpen:e}),u=k.useRef(null),d=()=>{r&&r(t)};return y.jsx(M_,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:y.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[y.jsxs("div",{className:l.header,children:[y.jsx("span",{children:i||t.replace("-popup","")}),y.jsxs("div",{className:l.titleBarButtons,children:[y.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),y.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:""})]})]}),y.jsx("div",{className:l.content,children:s})]})})}const gP=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],Nme=80,Tme=80,Rme=10,Pme=10,Ome=10,kme=10,Dme=({onIconClick:t})=>{const e=gP.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:Ome+d*(Nme+Rme),y:kme+u*(Tme+Pme)},u++,u>=4&&(u=0,d++)}),l},[r,s]=k.useState(n()),[i,o]=k.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return y.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:y.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>y.jsx(pP,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&y.jsx(ua,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:y.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:gP.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>y.jsx(pP,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&y.jsx(ua,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:y.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:gP.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>y.jsx(pP,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},Mme=Dc({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),Lme=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=k.useState(!1),[o,a]=k.useState(new Date),c=Mme({isOpen:s});k.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return y.jsxs("div",{className:c.taskbar,children:[y.jsxs("div",{className:c.leftSection,children:[y.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),y.jsx("div",{className:c.windows,children:t.map(h=>y.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),y.jsxs("div",{className:c.rightSection,children:[y.jsxs("div",{className:c.statusSection,children:[y.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:y.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),y.jsx("div",{className:c.clock,children:l(o)})]}),s&&y.jsxs("div",{className:c.menu,children:[y.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"GeckoTerminal"}),y.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),y.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),y.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),y.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),y.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),y.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),y.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function BV(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function vL(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function $V(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function EL(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function FV(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function jV(t,e=50){var r;const n="https://mainnet.helius-rpc.com/?api-key=f2330fce-2a97-416b-ada9-ce0ba94ddadc";try{console.log("Using Helius DAS API for Solana collection:",t);const i={lawbstation:"9CU9LUX7UWkBEG4oP8YrgDUkNJKNHLt2wGdVfX6NY4EY",lawbnexus:"AfXkPjcfTWHz9WDjvXxZBkHSWQ1H7xsg7jT2fFLkAAi"}[t];if(!i)return console.log("No collection mint found for collection:",t),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]};const o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"my-id",method:"getAssetsByGroup",params:{groupKey:"collection",groupValue:i,page:1,limit:e}})});if(!o.ok)throw console.log("Helius DAS API response status:",o.status),console.log("Helius DAS API response text:",await o.text()),new Error(`Helius DAS API error: ${o.statusText}`);const a=await o.json();if(console.log("Helius DAS API response:",a),a.error)throw new Error(`Helius DAS API error: ${a.error.message}`);const l=(((r=a.result)==null?void 0:r.items)||[]).map(u=>{var d,h,f,p,g,w,m,b,v,A,C,T,x,N,S,D,P,$,G,W,I,R,B,O,M,j,V,te,Z,X;return{id:u.id||u.mint||"unknown",address:u.mint||"",token_id:parseInt(((f=(h=(d=u.content)==null?void 0:d.metadata)==null?void 0:h.name)==null?void 0:f.replace(/\D/g,""))||"0",10),attributes:JSON.stringify(((g=(p=u.content)==null?void 0:p.metadata)==null?void 0:g.attributes)||[]),name:((m=(w=u.content)==null?void 0:w.metadata)==null?void 0:m.name)||((A=(v=(b=u.content)==null?void 0:b.files)==null?void 0:v[0])==null?void 0:A.name)||`#${(C=u.mint)==null?void 0:C.slice(0,8)}`,image_url:((N=(x=(T=u.content)==null?void 0:T.files)==null?void 0:x[0])==null?void 0:N.uri)||((D=(S=u.content)==null?void 0:S.metadata)==null?void 0:D.image)||"",owner_of:"",block_minted:0,contract_type:"SOL",description:(($=(P=u.content)==null?void 0:P.metadata)==null?void 0:$.description)||"",image:((I=(W=(G=u.content)==null?void 0:G.files)==null?void 0:W[0])==null?void 0:I.uri)||((B=(R=u.content)==null?void 0:R.metadata)==null?void 0:B.image)||"",image_url_shrunk:((j=(M=(O=u.content)==null?void 0:O.files)==null?void 0:M[0])==null?void 0:j.uri)||((te=(V=u.content)==null?void 0:V.metadata)==null?void 0:te.image)||"",animation_url:((X=(Z=u.content)==null?void 0:Z.metadata)==null?void 0:X.animation_url)||"",metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),owners:[]}});return{page:1,pageSize:e,totalCount:l.length,totalPages:1,data:l}}catch(s){throw console.error("Error getting Solana NFTs from Helius:",s),s}}async function Ume(t,e=50){var r;const n="https://mainnet.helius-rpc.com/?api-key=f2330fce-2a97-416b-ada9-ce0ba94ddadc";try{console.log("Using Helius DAS API for Solana owner:",t);const s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"my-id",method:"getAssetsByOwner",params:{ownerAddress:t,page:1,limit:e}})});if(!s.ok)throw console.log("Helius DAS API response status:",s.status),console.log("Helius DAS API response text:",await s.text()),new Error(`Helius DAS API error: ${s.statusText}`);const i=await s.json();if(console.log("Helius DAS API owner response:",i),i.error)throw new Error(`Helius DAS API error: ${i.error.message}`);const o=((r=i.result)==null?void 0:r.items)||[],a={lawbstation:"6cz67ciatfhDaxyWw3rdC9rZHXAxQvYnq5qkqmnG3G1Q",lawbnexus:"35pjVXpTg2PCdBZ1zdUckNfnAxULJQBRSjWLXREo6692"},l=o.filter(u=>{const d=u.mintAuthority||u.authority;return d&&Object.values(a).includes(d)}).slice(0,e).map(u=>{var d,h,f,p,g,w,m,b,v,A,C,T,x,N,S,D,P,$,G,W,I,R,B,O,M,j,V,te,Z,X,ce,ge;return{id:u.id||u.mint||"unknown",address:u.mint||"",token_id:parseInt(((f=(h=(d=u.content)==null?void 0:d.metadata)==null?void 0:h.name)==null?void 0:f.replace(/\D/g,""))||"0",10),attributes:JSON.stringify(((g=(p=u.content)==null?void 0:p.metadata)==null?void 0:g.attributes)||[]),name:((m=(w=u.content)==null?void 0:w.metadata)==null?void 0:m.name)||((A=(v=(b=u.content)==null?void 0:b.files)==null?void 0:v[0])==null?void 0:A.name)||`#${(C=u.mint)==null?void 0:C.slice(0,8)}`,image_url:((N=(x=(T=u.content)==null?void 0:T.files)==null?void 0:x[0])==null?void 0:N.uri)||((D=(S=u.content)==null?void 0:S.metadata)==null?void 0:D.image)||"",owner_of:t,block_minted:0,contract_type:"SOL",description:(($=(P=u.content)==null?void 0:P.metadata)==null?void 0:$.description)||"",image:((I=(W=(G=u.content)==null?void 0:G.files)==null?void 0:W[0])==null?void 0:I.uri)||((B=(R=u.content)==null?void 0:R.metadata)==null?void 0:B.image)||"",image_url_shrunk:((j=(M=(O=u.content)==null?void 0:O.files)==null?void 0:M[0])==null?void 0:j.uri)||((te=(V=u.content)==null?void 0:V.metadata)==null?void 0:te.image)||"",animation_url:((X=(Z=u.content)==null?void 0:Z.metadata)==null?void 0:X.animation_url)||"",metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:((ge=(ce=u.grouping)==null?void 0:ce.find(Me=>Me.group_key==="collection"))==null?void 0:ge.group_value)||"",num_items:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}});return{page:1,pageSize:e,totalCount:l.length,totalPages:1,data:l}}catch(s){throw console.error("Error getting Solana NFTs by owner from Helius:",s),s}}const Bme=Dc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),$me=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=Bme({isOpen:t}),i=k.useRef(null),[o,a]=k.useState([]),[c,l]=k.useState(!1),[u,d]=k.useState(!1),[h,f]=k.useState({}),[p,g]=k.useState(null),[w,m]=k.useState(null);k.useEffect(()=>{t&&r&&b()},[t,r]);const b=async()=>{l(!0),g(null);try{const x=await BV(r);a(x);const N={};x.forEach(S=>{N[S.id]=0}),f(N)}catch(x){g(x.message)}finally{l(!1)}},v=(x,N)=>{f(S=>({...S,[x]:Math.max(0,N)}))},A=async()=>{const x=Object.entries(h).filter(([,N])=>N>0).map(([N,S])=>({id:N,quantity:S}));if(x.length===0){g("Please select at least one item to mint");return}if(!w){g("Wallet not connected");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const N=await $V(r,x);if(console.log("Mint API result:",N),N.success&&N.mintTransaction){console.log("Got mint transaction:",N.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const S=await w.sendTransaction({to:N.mintTransaction.to,value:BigInt(N.mintTransaction.value),data:N.mintTransaction.data});console.log("Transaction sent successfully:",S),alert(`NFT Minted Successfully: Transaction Hash - ${S}`),e()}catch(S){console.error("Transaction sending failed:",S),g("Transaction failed: "+S.message)}}else throw new Error(N.message||"Could not retrieve minting transaction.")}catch(N){console.error("Minting failed:",N),g("Minting failed: "+N.message)}finally{d(!1)}},C=(x,N)=>`${parseFloat(x)} ${N}`,T=()=>{n&&n()};return t?y.jsx(M_,{nodeRef:i,handle:`.${s.header}`,children:y.jsxs("div",{ref:i,className:s.popup,children:[y.jsxs("div",{className:s.header,children:[y.jsx("span",{children:"Mint Pixelawbster"}),y.jsxs("div",{className:s.titleBarButtons,children:[y.jsx("button",{className:s.titleBarButton,onClick:T,title:"Minimize",children:"_"}),y.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:""})]})]}),y.jsxs("div",{className:s.content,children:[p&&y.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:p}),c?y.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?y.jsx("div",{children:"No eligible invite lists found for your wallet."}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{style:{marginBottom:"20px"},children:[y.jsx("h3",{children:"Available Lists:"}),o.map(x=>y.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[y.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:x.name}),y.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",C(x.token_price,x.currency_symbol)]}),y.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",x.wallet_limit===4294967295?"Unlimited":x.wallet_limit," per wallet"]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[y.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),y.jsx("input",{type:"number",min:"0",max:x.wallet_limit===4294967295?999:x.wallet_limit,value:h[x.id]||0,onChange:N=>v(x.id,parseInt(N.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},x.id))]}),y.jsx("button",{onClick:()=>void A(),disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},WV=t=>[t.image_url,t.image,t.image_url_shrunk,t.old_image_url].filter(Boolean)[0]||"",zV=({src:t,alt:e,style:n})=>{const[r,s]=k.useState(t),[i,o]=k.useState(!1),[a,c]=k.useState(0);k.useEffect(()=>{s(t),o(!1),c(0)},[t]);const l=()=>{a===0?(s(t),c(1)):a===1?(s(`https://images.weserv.nl/?url=${encodeURIComponent(t)}`),c(2)):o(!0)};return i?y.jsx("div",{style:{...n,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"#666",backgroundColor:"#f0f0f0",width:(n==null?void 0:n.width)||"100%",height:(n==null?void 0:n.height)||"150px"},children:"Image not available"}):y.jsx("img",{src:r,alt:e,style:n,crossOrigin:a===0?"anonymous":void 0,onError:l})},Fme=Dc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),jme=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},Wme=({nft:t,onClose:e})=>{const n=Fme(),r=k.useRef(null),s=jme(t.attributes);return y.jsx(M_,{nodeRef:r,handle:`.${n.header}`,children:y.jsxs("div",{className:n.popup,ref:r,children:[y.jsxs("div",{className:n.header,children:[y.jsxs("span",{children:[t.name," - Details"]}),y.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),y.jsxs("div",{className:n.content,children:[y.jsx(zV,{src:WV(t),alt:t.name,style:{width:"100%",height:"auto",marginBottom:"10px"}}),y.jsx("h3",{children:"Traits"}),y.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>y.jsxs("li",{children:[y.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):y.jsx("li",{children:"No traits found."})})]})]})})},zme=Symbol(),u8=Object.getPrototypeOf,zk=new WeakMap,Hme=t=>t&&(zk.has(t)?zk.get(t):u8(t)===Object.prototype||u8(t)===Array.prototype),Gme=t=>Hme(t)&&t[zme]||null,d8=(t,e=!0)=>{zk.set(t,e)},Lx={},mP=t=>typeof t=="object"&&t!==null,Hd=new WeakMap,Cv=new WeakSet,qme=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>mP(l)&&!Cv.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return d8(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:w}=Reflect.getOwnPropertyDescriptor(l,p),m={value:g,enumerable:w,configurable:!0};if(Cv.has(g))d8(g,!1);else if(g instanceof Promise)delete m.value,m.get=()=>d(g);else if(Hd.has(g)){const[b,v]=Hd.get(g);m.value=i(b,v(),d)}Object.defineProperty(f,p,m)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!mP(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(S,D=++a[0])=>{d!==D&&(d=D,h.forEach(P=>P(S,D)))};let p=a[1];const g=(S=++a[1])=>(p!==S&&!h.size&&(p=S,m.forEach(([D])=>{const P=D[1](S);P>d&&(d=P)})),d),w=S=>(D,P)=>{const $=[...D];$[1]=[S,...$[1]],f($,P)},m=new Map,b=(S,D)=>{if((Lx?"production":void 0)!=="production"&&m.has(S))throw new Error("prop listener already exists");if(h.size){const P=D[3](w(S));m.set(S,[D,P])}else m.set(S,[D])},v=S=>{var D;const P=m.get(S);P&&(m.delete(S),(D=P[1])==null||D.call(P))},A=S=>(h.add(S),h.size===1&&m.forEach(([P,$],G)=>{if((Lx?"production":void 0)!=="production"&&$)throw new Error("remove already exists");const W=P[3](w(G));m.set(G,[P,W])}),()=>{h.delete(S),h.size===0&&m.forEach(([P,$],G)=>{$&&($(),m.set(G,[P]))})}),C=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),x=e(C,{deleteProperty(S,D){const P=Reflect.get(S,D);v(D);const $=Reflect.deleteProperty(S,D);return $&&f(["delete",[D],P]),$},set(S,D,P,$){const G=Reflect.has(S,D),W=Reflect.get(S,D,$);if(G&&(t(W,P)||o.has(P)&&t(W,o.get(P))))return!0;v(D),mP(P)&&(P=Gme(P)||P);let I=P;if(P instanceof Promise)P.then(R=>{P.status="fulfilled",P.value=R,f(["resolve",[D],R])}).catch(R=>{P.status="rejected",P.reason=R,f(["reject",[D],R])});else{!Hd.has(P)&&n(P)&&(I=c(P));const R=!Cv.has(I)&&Hd.get(I);R&&b(D,R)}return Reflect.set(S,D,I,$),f(["set",[D],P,W]),!0}});o.set(l,x);const N=[C,g,i,A];return Hd.set(x,N),Reflect.ownKeys(l).forEach(S=>{const D=Object.getOwnPropertyDescriptor(l,S);"value"in D&&(x[S]=l[S],delete D.value,delete D.writable),Object.defineProperty(C,S,D)}),x})=>[c,Hd,Cv,t,e,n,r,s,i,o,a],[Vme]=qme();function ar(t={}){return Vme(t)}function ri(t,e,n){const r=Hd.get(t);(Lx?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function ZE(t,e){const n=Hd.get(t);(Lx?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function Sg(t){return Cv.add(t),t}function ii(t,e,n,r){let s=t[e];return ri(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function Kme(t){const e=ar({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var h8={};const Fe={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof h8<"u"?h8.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},HV={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=Fe.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var Yme=20,Qme=1,xg=1e6,f8=1e6,Jme=-7,Zme=21,Xme=!1,L_="[big.js] ",tm=L_+"Invalid ",MN=tm+"decimal places",eye=tm+"rounding mode",GV=L_+"Division by zero",On={},Nl=void 0,tye=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function qV(){function t(e){var n=this;if(!(n instanceof t))return e===Nl?qV():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(tm+"value");e=e===0&&1/e<0?"-0":String(e)}nye(n,e)}n.constructor=t}return t.prototype=On,t.DP=Yme,t.RM=Qme,t.NE=Jme,t.PE=Zme,t.strict=Xme,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function nye(t,e){var n,r,s;if(!tye.test(e))throw Error(tm+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function nm(t,e,n,r){var s=t.c;if(n===Nl&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(eye);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==Nl))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==Nl||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function rm(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}On.abs=function(){var t=new this.constructor(this);return t.s=1,t};On.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};On.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>xg)throw Error(MN);if(!s[0])throw Error(GV);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),w=g.length,m=t,b=m.c=[],v=0,A=o+(m.e=e.e-t.e)+1;for(m.s=i,i=A<0?0:A,h.unshift(0);w++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(w=g.length))u=a>w?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=w==a?s:h;w;){if(g[--w]<c[w]){for(d=w;d&&!g[--d];)g[d]=9;--g[d],g[w]+=10}g[w]-=c[w]}for(;!g[0];)g.shift()}else break}b[v++]=u?l:++l,g[0]&&u?g[w]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==Nl)&&i--);return!b[0]&&v!=1&&(b.shift(),m.e--,A--),v>A&&nm(m,A,n.RM,g[0]!==Nl),m};On.eq=function(t){return this.cmp(t)===0};On.gt=function(t){return this.cmp(t)>0};On.gte=function(t){return this.cmp(t)>-1};On.lt=function(t){return this.cmp(t)<0};On.lte=function(t){return this.cmp(t)<1};On.minus=On.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};On.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(GV);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};On.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};On.plus=On.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};On.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-f8||t>f8)throw Error(tm+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};On.prec=function(t,e){if(t!==~~t||t<1||t>xg)throw Error(tm+"precision");return nm(new this.constructor(this),t,e)};On.round=function(t,e){if(t===Nl)t=0;else if(t!==~~t||t<-xg||t>xg)throw Error(MN);return nm(new this.constructor(this),t+this.e+1,e)};On.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(L_+"No square root");i=Math.sqrt(+rm(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return nm(t,(s.DP-=4)+t.e+1,s.RM)};On.times=On.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};On.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==Nl){if(t!==~~t||t<0||t>xg)throw Error(MN);for(n=nm(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return rm(n,!0,!!r)};On.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==Nl){if(t!==~~t||t<0||t>xg)throw Error(MN);for(n=nm(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return rm(n,!1,!!r)};On[Symbol.for("nodejs.util.inspect.custom")]=On.toJSON=On.toString=function(){var t=this,e=t.constructor;return rm(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};On.toNumber=function(){var t=+rm(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(L_+"Imprecise conversion");return t};On.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==Nl){if(t!==~~t||t<1||t>xg)throw Error(tm+"precision");for(n=nm(new r(n),t,e);n.c.length<t;)n.c.push(0)}return rm(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};On.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(L_+"valueOf disallowed");return rm(t,t.e<=e.NE||t.e>=e.PE,!0)};var vl=qV();const rye={bigNumber(t){return t?new vl(t):new vl(0)},multiply(t,e){if(t===void 0||e===void 0)return new vl(0);const n=new vl(t),r=new vl(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},sye=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],iye=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],oye=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],aye={getERC20Abi:t=>Fe.USDT_CONTRACT_ADDRESSES.includes(t)?oye:sye,getSwapAbi:()=>iye},Cd={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},Dt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections"};function yP(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Rt={setItem(t,e){_v()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(_v())return localStorage.getItem(t)||void 0},removeItem(t){_v()&&localStorage.removeItem(t)},clear(){_v()&&localStorage.clear()}};function _v(){return typeof window<"u"&&typeof localStorage<"u"}function Lu(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var p8={};const wP=(typeof process<"u"&&typeof p8<"u"?p8.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VV=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],cye="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",Fn={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:wP,SECURE_SITE_DASHBOARD:`${wP}/dashboard`,SECURE_SITE_FAVICON:`${wP}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["coinbase","meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},Ke={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Ke.getActiveNamespace(),e=Ke.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Rt.setItem(Dt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Rt.getItem(Dt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Rt.removeItem(Dt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Rt.setItem(Dt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Rt.setItem(Dt.ACTIVE_CAIP_NETWORK_ID,t),Ke.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Rt.getItem(Dt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Rt.removeItem(Dt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=yP(t);Rt.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Ke.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Rt.setItem(Dt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Rt.getItem(Dt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=yP(t);Rt.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Rt.getItem(Dt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=yP(t);return Rt.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{Rt.setItem(Dt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Rt.getItem(Dt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Rt.removeItem(Dt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Rt.getItem(Dt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=Rt.getItem(Dt.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{Rt.setItem(Dt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Rt.getItem(Dt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Rt.getItem(Dt.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Rt.setItem(Dt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Ke.getConnectedNamespaces();e.includes(t)||(e.push(t),Ke.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Ke.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),Ke.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Rt.getItem(Dt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Rt.setItem(Dt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Rt.removeItem(Dt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Rt.getItem(Dt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Ke.getBalanceCache();Rt.setItem(Dt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=Ke.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;Ke.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Ke.getBalanceCache();e[t.caipAddress]=t,Rt.setItem(Dt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Rt.getItem(Dt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Ke.getBalanceCache();Rt.setItem(Dt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=Ke.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),Ke.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Ke.getNativeBalanceCache();e[t.caipAddress]=t,Rt.setItem(Dt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Rt.getItem(Dt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=Ke.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;Ke.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Ke.getEnsCache();e[t.address]=t,Rt.setItem(Dt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Ke.getEnsCache();Rt.setItem(Dt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Rt.getItem(Dt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=Ke.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;Ke.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Ke.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Rt.setItem(Dt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Ke.getIdentityCache();Rt.setItem(Dt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Rt.removeItem(Dt.PORTFOLIO_CACHE),Rt.removeItem(Dt.NATIVE_BALANCE_CACHE),Rt.removeItem(Dt.ENS_CACHE),Rt.removeItem(Dt.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Rt.setItem(Dt.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Rt.getItem(Dt.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n={...Ke.getConnections(),[e]:t};Rt.setItem(Dt.CONNECTIONS,JSON.stringify(n))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Rt.getItem(Dt.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}}},ot={isMobile(){var t;return this.isClient()?!!(typeof(window==null?void 0:window.matchMedia)=="function"&&((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return ot.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Fn.TEN_SEC_MS:!0},isAllowedRetry(t,e=Fn.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(ot.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Fn.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(ot.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!ot.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Ke.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r,s;if(typeof window>"u")return!1;const t=(r=(n=window.matchMedia)==null?void 0:n.call(window,"(display-mode: standalone)"))==null?void 0:r.matches,e=(s=window==null?void 0:window.navigator)==null?void 0:s.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,ot.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return Fe.W3M_API_URL},getBlockchainApiUrl(){return Fe.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return Fe.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?Fn.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in Fe.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function qb(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}let U_=class{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await qb(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await qb(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await qb(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await qb(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await qb(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}};const lye={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?Fn.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(ot.isTelegram()){if(ot.isIos())return t.filter(e=>e!=="google");if(ot.isMac())return t.filter(e=>e!=="x");if(ot.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},pt=ar({features:Fn.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Fn.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),we={state:pt,subscribeKey(t,e){return ii(pt,t,e)},setOptions(t){Object.assign(pt,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...pt.remoteFeatures,...t};pt.remoteFeatures=e,(n=pt.remoteFeatures)!=null&&n.socials&&(pt.remoteFeatures.socials=lye.filterSocialsByPlatform(pt.remoteFeatures.socials))},setFeatures(t){if(!t)return;pt.features||(pt.features=Fn.DEFAULT_FEATURES);const e={...pt.features,...t};pt.features=e},setProjectId(t){pt.projectId=t},setCustomRpcUrls(t){pt.customRpcUrls=t},setAllWallets(t){pt.allWallets=t},setIncludeWalletIds(t){pt.includeWalletIds=t},setExcludeWalletIds(t){pt.excludeWalletIds=t},setFeaturedWalletIds(t){pt.featuredWalletIds=t},setTokens(t){pt.tokens=t},setTermsConditionsUrl(t){pt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){pt.privacyPolicyUrl=t},setCustomWallets(t){pt.customWallets=t},setIsSiweEnabled(t){pt.isSiweEnabled=t},setIsUniversalProvider(t){pt.isUniversalProvider=t},setSdkVersion(t){pt.sdkVersion=t},setMetadata(t){pt.metadata=t},setDisableAppend(t){pt.disableAppend=t},setEIP6963Enabled(t){pt.enableEIP6963=t},setDebug(t){pt.debug=t},setEnableWalletConnect(t){pt.enableWalletConnect=t},setEnableWalletGuide(t){pt.enableWalletGuide=t},setEnableAuthLogger(t){pt.enableAuthLogger=t},setEnableWallets(t){pt.enableWallets=t},setPreferUniversalLinks(t){pt.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){pt.hasMultipleAddresses=t},setSIWX(t){pt.siwx=t},setConnectMethodsOrder(t){pt.features={...pt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){pt.features={...pt.features,walletFeaturesOrder:t}},setSocialsOrder(t){pt.remoteFeatures={...pt.remoteFeatures,socials:t}},setCollapseWallets(t){pt.features={...pt.features,collapseWallets:t}},setEnableEmbedded(t){pt.enableEmbedded=t},setAllowUnsupportedChain(t){pt.allowUnsupportedChain=t},setManualWCControl(t){pt.manualWCControl=t},setEnableNetworkSwitch(t){pt.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(pt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){pt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return pt.universalProviderConfigOverride},getSnapshot(){return ZE(pt)}},uye=Object.freeze({enabled:!0,events:[]}),dye=new U_({baseUrl:ot.getAnalyticsUrl(),clientId:null}),hye=5,fye=60*1e3,_d=ar({...uye}),pye={state:_d,subscribeKey(t,e){return ii(_d,t,e)},async sendError(t,e){if(!_d.enabled)return;const n=Date.now();if(_d.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<fye}).length>=hye)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};_d.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=we.state;await dye.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:ot.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){_d.enabled=!0},disable(){_d.enabled=!1},clearEvents(){_d.events=[]}};let Hk=class Gk extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,Gk.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,Gk):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function g8(t,e){const n=t instanceof Hk?t:new Hk(t instanceof Error?t.message:String(t),e,t);throw pye.sendError(n,n.category),n}function Zo(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return g8(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return g8(a,e)}},n[r]=i}else n[r]=s}),n}const fl={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},gye={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===fl.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${fl.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===fl.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${fl.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===Fe.CHAIN.SOLANA&&t===fl.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${fl.COINBASE.url}/dapp?cb_url=${r}`)}},vo=ar({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),mye={state:vo,subscribeNetworkImages(t){return ri(vo.networkImages,()=>t(vo.networkImages))},subscribeKey(t,e){return ii(vo,t,e)},subscribe(t){return ri(vo,()=>t(vo))},setWalletImage(t,e){vo.walletImages[t]=e},setNetworkImage(t,e){vo.networkImages[t]=e},setChainImage(t,e){vo.chainImages[t]=e},setConnectorImage(t,e){vo.connectorImages={...vo.connectorImages,[t]:e}},setTokenImage(t,e){vo.tokenImages[t]=e},setCurrencyImage(t,e){vo.currencyImages[t]=e}},hc=Zo(mye),yye={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},bP=ar({networkImagePromises:{}}),KV={async fetchWalletImage(t){if(t)return await at._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(bP.networkImagePromises[t]||(bP.networkImagePromises[t]=at._fetchNetworkImage(t)),await bP.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return hc.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return hc.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return hc.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return hc.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return hc.state.connectorImages[t.imageId]},getChainImage(t){return hc.state.networkImages[yye[t]]}},Ad=ar({message:"",variant:"info",open:!1}),wye={state:Ad,subscribeKey(t,e){return ii(Ad,t,e)},open(t,e){const{debug:n}=we.state,{shortMessage:r,longMessage:s}=t;n&&(Ad.message=r,Ad.variant=e,Ad.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Ad.open=!1,Ad.message="",Ad.variant="info"}},El=Zo(wye),bye=ot.getAnalyticsUrl(),vye=new U_({baseUrl:bye,clientId:null}),Eye=["MODAL_CREATED"],Vl=ar({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),hr={state:Vl,subscribe(t){return ri(Vl,()=>t(Vl))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=we.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Ve.state.address;if(Eye.includes(t.data.event)||typeof window>"u")return;await vye.post({path:"/e",params:hr.getSdkProperties(),body:{eventId:ot.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),Vl.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===Fe.HTTP_STATUS_CODES.FORBIDDEN&&!Vl.reportedErrors.FORBIDDEN&&(El.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${_v()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),Vl.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;Vl.timestamp=Date.now(),Vl.data=t,(e=we.state.features)!=null&&e.analytics&&hr._sendAnalyticsEvent(Vl)}},Cye=ot.getApiUrl(),Oi=new U_({baseUrl:Cye,clientId:null}),_ye=40,m8=4,Aye=20,Mt=ar({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),at={state:Mt,subscribeKey(t,e){return ii(Mt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=we.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return we.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Oi.baseUrl}/getWalletImage/${t}`,n=await Oi.getBlob({path:e,params:at._getSdkProperties()});hc.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Oi.baseUrl}/public/getAssetImage/${t}`,n=await Oi.getBlob({path:e,params:at._getSdkProperties()});hc.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Oi.baseUrl}/public/getAssetImage/${t}`,n=await Oi.getBlob({path:e,params:at._getSdkProperties()});hc.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Oi.baseUrl}/public/getCurrencyImage/${t}`,n=await Oi.getBlob({path:e,params:at._getSdkProperties()});hc.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Oi.baseUrl}/public/getTokenImage/${t}`,n=await Oi.getBlob({path:e,params:at._getSdkProperties()});hc.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return ot.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===fl.COINBASE.id?!0:z.state.activeChain==="solana"&&(n.id===fl.SOLFLARE.id||n.id===fl.PHANTOM.id)):t},async fetchProjectConfig(){return(await Oi.get({path:"/appkit/v1/config",params:at._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Oi.get({path:"/projects/v1/origins",params:at._getSdkProperties()});return t}catch{return[]}},async fetchNetworkImages(){const t=z.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!KV.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>at._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=$e.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>at._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>at._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>at._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];at._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(fl).map(o=>o.id));const r=await Oi.get({path:"/getWallets",params:{...at._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:at._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=we.state;if(t!=null&&t.length){const e={...at._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??m8,include:t},{data:n}=await at.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>at._fetchWalletImage(i))),Mt.featured=r,Mt.allFeatured=r}},async fetchRecommendedWallets(){try{Mt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=we.state,r=[...e??[],...n??[]].filter(Boolean),s=z.getRequestedCaipNetworkIds().join(","),i={page:1,entries:m8,include:t,exclude:r,chains:s},{data:o,count:a}=await at.fetchWallets(i),c=Ke.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>at._fetchWalletImage(d))),Mt.recommended=o,Mt.allRecommended=o,Mt.count=a??0}catch{}finally{Mt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=we.state,s=z.getRequestedCaipNetworkIds().join(","),i=[...Mt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:_ye,include:e,exclude:i,chains:s},{data:a,count:c}=await at.fetchWallets(o),l=a.slice(0,Aye).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>at._fetchWalletImage(u))),Mt.wallets=ot.uniqueBy([...Mt.wallets,...at._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Mt.count=c>Mt.count?c:Mt.count,Mt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await at.fetchWallets(e);n&&n.forEach(r=>{Mt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=we.state,s=z.getRequestedCaipNetworkIds().join(",");Mt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await at.fetchWallets(i);hr.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>at._fetchWalletImage(c)),ot.wait(300)]),Mt.search=at._filterOutExtensions(o)},initPromise(t,e){const n=Mt.promises[t];return n||(Mt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&at.initPromise("connectorImages",at.fetchConnectorImages),e&&at.initPromise("featuredWallets",at.fetchFeaturedWallets),n&&at.initPromise("recommendedWallets",at.fetchRecommendedWallets),r&&at.initPromise("networkImages",at.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=we.state.features)!=null&&t.analytics&&at.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Oi.get({path:"/getAnalyticsConfig",params:at._getSdkProperties()});we.setFeatures({analytics:t})}catch{we.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Mt.featured=Mt.allFeatured,Mt.recommended=Mt.allRecommended;return}const e=z.getRequestedCaipNetworkIds().join(",");Mt.featured=Mt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Mt.recommended=Mt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Mt.filteredWallets=Mt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Mt.filteredWallets=[]},setFilterByNamespace(t){if(!t){Mt.featured=Mt.allFeatured,Mt.recommended=Mt.allRecommended;return}const e=z.getRequestedCaipNetworkIds().join(",");Mt.featured=Mt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Mt.recommended=Mt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Mt.filteredWallets=Mt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Ln=ar({view:"Connect",history:["Connect"],transactionStack:[]}),Sye={state:Ln,subscribeKey(t,e){return ii(Ln,t,e)},pushTransactionStack(t){Ln.transactionStack.push(t)},popTransactionStack(t){const e=Ln.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),jt.goBack();break;case"cancel":s==null||s(),jt.goBack();break}},push(t,e){t!==Ln.view&&(Ln.view=t,Ln.history.push(t),Ln.data=e)},reset(t,e){Ln.view=t,Ln.history=[t],Ln.data=e},replace(t,e){Ln.history.at(-1)===t||(Ln.view=t,Ln.history[Ln.history.length-1]=t,Ln.data=e)},goBack(){var r;const t=z.state.activeCaipAddress,e=jt.state.view==="ConnectingFarcaster",n=!t&&e;if(Ln.history.length>1){Ln.history.pop();const[s]=Ln.history.slice(-1);s&&(t&&s==="Connect"?Ln.view="Account":Ln.view=s)}else ms.close();(r=Ln.data)!=null&&r.wallet&&(Ln.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){Ve.setFarcasterUrl(void 0,z.state.activeChain);const a=$e.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=ZE(we.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Ln.history.length>1){Ln.history=Ln.history.slice(0,t+1);const[e]=Ln.history.slice(-1);e&&(Ln.view=e)}},goBackOrCloseModal(){jt.state.history.length>1?jt.goBack():ms.close()}},jt=Zo(Sye),Kl=ar({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),qk={state:Kl,subscribe(t){return ri(Kl,()=>t(Kl))},setThemeMode(t){Kl.themeMode=t;try{const e=$e.getAuthConnector();if(e){const n=qk.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Lu(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Kl.themeVariables={...Kl.themeVariables,...t};try{const e=$e.getAuthConnector();if(e){const n=qk.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Lu(Kl.themeVariables,Kl.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return ZE(Kl)}},Ki=Zo(qk),YV={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},hn=ar({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...YV},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),xye={state:hn,subscribe(t){return ri(hn,()=>{t(hn)})},subscribeKey(t,e){return ii(hn,t,e)},initialize(t){t.forEach(e=>{const n=Ke.getConnectedConnectorId(e);n&&$e.setConnectorId(n,e)})},setActiveConnector(t){t&&(hn.activeConnector=Sg(t))},setConnectors(t){t.filter(s=>!hn.allConnectors.some(i=>i.id===s.id&&$e.getConnectorName(i.name)===$e.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&hn.allConnectors.push(Sg(s))});const n=$e.getEnabledNamespaces(),r=$e.getEnabledConnectors(n);hn.connectors=$e.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(hn.filterByNamespaceMap).forEach(e=>{hn.filterByNamespaceMap[e]=!1}),t.forEach(e=>{hn.filterByNamespaceMap[e]=!0}),$e.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){hn.filterByNamespaceMap[t]=e,$e.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=$e.getEnabledNamespaces(),e=$e.getEnabledConnectors(t),n=$e.areAllNamespacesEnabled();hn.connectors=$e.mergeMultiChainConnectors(e),n?at.clearFilterByNamespaces():at.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(hn.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return hn.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(hn.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=$e.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===Fe.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=$e.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===Fe.CONNECTOR_ID.AUTH){const s=t,i=ZE(we.state),o=Ki.getSnapshot().themeMode,a=Ki.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Lu(a,o)}),$e.setConnectors([t])}else $e.setConnectors([t])},getAuthConnector(t){var r;const e=t||z.state.activeChain,n=hn.connectors.find(s=>s.id===Fe.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return hn.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return hn.allConnectors.find(e=>e.id===t)},getConnector(t,e){return hn.allConnectors.filter(r=>r.chain===z.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=ZE(we.state),r=Ki.getSnapshot().themeMode,s=Ki.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Lu(s,r)})},getConnectorsByNamespace(t){const e=hn.allConnectors.filter(n=>n.chain===t);return $e.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=$e.getConnector(t.id,t.rdns),n=z.state.activeChain;gye.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?jt.push("ConnectingExternal",{connector:e}):jt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?$e.getConnectorsByNamespace(t):$e.mergeMultiChainConnectors(hn.allConnectors)},setFilterByNamespace(t){hn.filterByNamespace=t,hn.connectors=$e.getConnectors(t),at.setFilterByNamespace(t)},setConnectorId(t,e){t&&(hn.activeConnectorIds={...hn.activeConnectorIds,[e]:t},Ke.setConnectedConnectorId(e,t))},removeConnectorId(t){hn.activeConnectorIds={...hn.activeConnectorIds,[t]:void 0},Ke.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return hn.activeConnectorIds[t]},isConnected(t){return t?!!hn.activeConnectorIds[t]:Object.values(hn.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){hn.activeConnectorIds={...YV}}},$e=Zo(xye);var hw={};const Iye="https://secure.walletconnect.org/sdk",Nye=(typeof process<"u"&&typeof hw<"u"?hw.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||Iye,Tye=(typeof process<"u"&&typeof hw<"u"?hw.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",Rye=(typeof process<"u"&&typeof hw<"u"?hw.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ge={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Ls={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Zf=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Wr=ar({...Zf}),Pye={state:Wr,subscribeKey(t,e){return ii(Wr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ot.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Wr.message=Zf.message,Wr.variant=Zf.variant,Wr.svg=Zf.svg,Wr.open=Zf.open,Wr.autoClose=Zf.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Zf.autoClose}){Wr.open?(Wr.open=!1,setTimeout(()=>{Wr.message=t,Wr.variant=n,Wr.svg=e,Wr.open=!0,Wr.autoClose=r},150)):(Wr.message=t,Wr.variant=n,Wr.svg=e,Wr.open=!0,Wr.autoClose=r)}},mc=Pye,Kn=ar({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),Oye={state:Kn,subscribe(t){return ri(Kn,()=>t(Kn))},setLastNetworkInView(t){Kn.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Kn.loading=!0;try{const s=await mt.fetchTransactions({account:t,cursor:Kn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=Av.filterSpamTransactions(s.data),o=Av.filterByConnectedChain(i),a=[...Kn.transactions,...o];Kn.loading=!1,e==="coinbase"?Kn.coinbaseTransactions=Av.groupTransactionsByYearAndMonth(Kn.coinbaseTransactions,s.data):(Kn.transactions=a,Kn.transactionsByYear=Av.groupTransactionsByYearAndMonth(Kn.transactionsByYear,o)),Kn.empty=a.length===0,Kn.next=s.next?s.next:void 0}catch{const i=z.state.activeChain;hr.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:we.state.projectId,cursor:Kn.next,isSmartAccount:((r=Ve.state.preferredAccountTypes)==null?void 0:r[i])===Ls.ACCOUNT_TYPES.SMART_ACCOUNT}}),mc.showError("Failed to fetch transactions"),Kn.loading=!1,Kn.empty=!0,Kn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=z.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Kn.next=void 0},resetTransactions(){Kn.transactions=[],Kn.transactionsByYear={},Kn.lastNetworkInView=void 0,Kn.loading=!1,Kn.empty=!1,Kn.next=void 0}},Av=Zo(Oye,"API_ERROR"),Hn=ar({connections:new Map,wcError:!1,buffering:!1,status:"disconnected"});let $f;const kye={state:Hn,subscribeKey(t,e){return ii(Hn,t,e)},_getClient(){return Hn._client},setClient(t){Hn._client=Sg(t)},async connectWalletConnect(){var t,e,n,r;if(ot.isTelegram()||ot.isSafari()&&ot.isIos()){if($f){await $f,$f=void 0;return}if(!ot.isPairingExpired(Hn==null?void 0:Hn.wcPairingExpiry)){const s=Hn.wcUri;Hn.wcUri=s;return}$f=(e=(t=yt._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),yt.state.status="connecting",await $f,$f=void 0,Hn.wcPairingExpiry=void 0,yt.state.status="connected"}else await((r=(n=yt._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var r,s;await((s=(r=yt._getClient())==null?void 0:r.connectExternal)==null?void 0:s.call(r,t)),n&&z.setActiveNamespace(e)},async reconnectExternal(t){var n,r;await((r=(n=yt._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||z.state.activeChain;e&&$e.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;ms.setLoading(!0,z.state.activeChain);const n=$e.getAuthConnector();n&&(Ve.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),Ke.setPreferredAccountTypes(Ve.state.preferredAccountTypes??{[e]:t}),await yt.reconnectExternal(n),ms.setLoading(!1,z.state.activeChain),hr.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=z.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=yt._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=yt._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=yt._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=yt._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=yt._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=yt._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=yt._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=yt._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=yt._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=yt._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=yt._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=yt._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Hn.wcUri=void 0,Hn.wcPairingExpiry=void 0,Hn.wcLinking=void 0,Hn.recentWallet=void 0,Hn.status="disconnected",Av.resetTransactions(),Ke.deleteWalletConnectDeepLink()},resetUri(){Hn.wcUri=void 0,Hn.wcPairingExpiry=void 0,$f=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=yt.state;t&&Ke.setWalletConnectDeepLink(t),e&&Ke.setAppKitRecent(e),hr.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=jt.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Hn.wcBasic=t},setUri(t){Hn.wcUri=t,Hn.wcPairingExpiry=ot.getPairingExpiry()},setWcLinking(t){Hn.wcLinking=t},setWcError(t){Hn.wcError=t,Hn.buffering=!1},setRecentWallet(t){Hn.recentWallet=t},setBuffering(t){Hn.buffering=t},setStatus(t){Hn.status=t},async disconnect(t){var e;try{await((e=yt._getClient())==null?void 0:e.disconnect(t))}catch(n){throw new Hk("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},setConnections(t,e){Hn.connections.set(e,t)},switchAccount({connection:t,address:e,namespace:n}){if($e.state.activeConnectorIds[n]===t.connectorId){const i=z.state.activeCaipNetwork;if(i){const o=`${n}:${i.id}:${e}`;Ve.setCaipAddress(o,n)}else console.warn(`No current network found for namespace "${n}"`)}else{const i=$e.getConnector(t.connectorId);i?yt.connectExternal(i,n):console.warn(`No connector found for namespace "${n}"`)}}},yt=Zo(kye),Rm=ar({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Tl={state:Rm,subscribe(t){return ri(Rm,()=>t(Rm))},subscribeOpen(t){return ii(Rm,"open",t)},set(t){Object.assign(Rm,{...Rm,...t})}},Dye="1.0.8";let Xo=class Vk extends Error{constructor(e,n={}){var o;const r=n.cause instanceof Vk?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof Vk&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${Dye}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function ud(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const QV=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,JV=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,ZV=/^\(.+?\).*?$/,y8=/^tuple(?<array>(\[(\d*)\])*)$/;function Kk(t){let e=t.type;if(y8.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=Kk(i),s<n-1&&(e+=", ")}const r=ud(y8,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,Kk({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Vb(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=Kk(s),r!==n-1&&(e+=", ")}return e}function Ux(t){var e;return t.type==="function"?`function ${t.name}(${Vb(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${Vb(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Vb(t.inputs)})`:t.type==="error"?`error ${t.name}(${Vb(t.inputs)})`:t.type==="constructor"?`constructor(${Vb(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const XV=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Mye(t){return XV.test(t)}function Lye(t){return ud(XV,t)}const eK=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Uye(t){return eK.test(t)}function Bye(t){return ud(eK,t)}const tK=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function $ye(t){return tK.test(t)}function Fye(t){return ud(tK,t)}const nK=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function CL(t){return nK.test(t)}function jye(t){return ud(nK,t)}const rK=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function Wye(t){return rK.test(t)}function zye(t){return ud(rK,t)}const sK=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function Hye(t){return sK.test(t)}function Gye(t){return ud(sK,t)}const qye=/^receive\(\) external payable$/;function Vye(t){return qye.test(t)}const Kye=new Set(["indexed"]),Yk=new Set(["calldata","memory","storage"]);class Yye extends Xo{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class Qye extends Xo{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class Jye extends Xo{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class Zye extends Xo{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class Xye extends Xo{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class e0e extends Xo{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class t0e extends Xo{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class n0e extends Xo{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class tb extends Xo{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class r0e extends Xo{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class s0e extends Xo{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class i0e extends Xo{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class o0e extends Xo{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function a0e(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const vP=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function Qk(t,e={}){if($ye(t))return c0e(t,e);if(Uye(t))return l0e(t,e);if(Mye(t))return u0e(t,e);if(Wye(t))return d0e(t,e);if(Hye(t))return h0e(t);if(Vye(t))return{type:"receive",stateMutability:"payable"};throw new r0e({signature:t})}function c0e(t,e={}){const n=Fye(t);if(!n)throw new tb({signature:t,type:"function"});const r=yc(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(Ig(r[a],{modifiers:Yk,structs:e,type:"function"}));const o=[];if(n.returns){const a=yc(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(Ig(a[l],{modifiers:Yk,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function l0e(t,e={}){const n=Bye(t);if(!n)throw new tb({signature:t,type:"event"});const r=yc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Ig(r[o],{modifiers:Kye,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function u0e(t,e={}){const n=Lye(t);if(!n)throw new tb({signature:t,type:"error"});const r=yc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Ig(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function d0e(t,e={}){const n=zye(t);if(!n)throw new tb({signature:t,type:"constructor"});const r=yc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Ig(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function h0e(t){const e=Gye(t);if(!e)throw new tb({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const f0e=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,p0e=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,g0e=/^u?int$/;function Ig(t,e){var d,h;const n=a0e(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(vP.has(n))return vP.get(n);const r=ZV.test(t),s=ud(r?p0e:f0e,t);if(!s)throw new Zye({param:t});if(s.name&&y0e(s.name))throw new Xye({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=yc(s.type),p=[],g=f.length;for(let w=0;w<g;w++)p.push(Ig(f[w],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(g0e.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!iK(c))throw new Jye({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new e0e({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(Yk.has(s.modifier)&&!w0e(c,!!s.array))throw new t0e({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return vP.set(n,u),u}function yc(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?yc(a,[...e,n.trim()]):yc(a,e,`${n}${o}`,r);case"(":return yc(a,e,`${n}${o}`,r+1);case")":return yc(a,e,`${n}${o}`,r-1);default:return yc(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new o0e({current:n,depth:r});return e.push(n.trim()),e}function iK(t){return t==="address"||t==="bool"||t==="function"||t==="string"||QV.test(t)||JV.test(t)}const m0e=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function y0e(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||QV.test(t)||JV.test(t)||m0e.test(t)}function w0e(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function oK(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!CL(a))continue;const c=jye(a);if(!c)throw new tb({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=Ig(p,{type:"struct"});u.push(g)}if(!u.length)throw new s0e({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=aK(c,e)}return r}const b0e=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function aK(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(ZV.test(o.type))r.push(o);else{const c=ud(b0e,o.type);if(!(c!=null&&c.type))throw new n0e({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new i0e({type:u});r.push({...o,type:`tuple${l??""}`,components:aK(e[u]??[],e,new Set([...n,u]))})}else if(iK(u))r.push(o);else throw new Qye({type:u})}}return r}function cK(t){const e=oK(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];CL(i)||n.push(Qk(i,e))}return n}function w8(t){let e;if(typeof t=="string")e=Qk(t);else{const n=oK(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!CL(i)){e=Qk(i,n);break}}}if(!e)throw new Yye({signature:t});return e}function ut(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}function Tc(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new O0e(t.type);return`${t.name}(${LN(t.inputs,{includeName:e})})`}function LN(t,{includeName:e=!1}={}){return t?t.map(n=>v0e(n,{includeName:e})).join(e?", ":","):""}function v0e(t,{includeName:e}){return t.type.startsWith("tuple")?`(${LN(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function Ml(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function xr(t){return Ml(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const lK="2.32.0";let Kb={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${lK}`},pe=class Jk extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof Jk?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Jk&&n.cause.docsPath||n.docsPath,i=(a=Kb.getDocsUrl)==null?void 0:a.call(Kb,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Kb.version?[`Version: ${Kb.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=lK}walk(e){return uK(this,e)}};function uK(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?uK(t.cause,e):e?null:t}class E0e extends pe{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class b8 extends pe{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class dK extends pe{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${LN(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class B_ extends pe{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class C0e extends pe{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class _0e extends pe{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${xr(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class A0e extends pe{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class S0e extends pe{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class v8 extends pe{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class hK extends pe{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class x0e extends pe{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class fK extends pe{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class E8 extends pe{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class fw extends pe{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class pK extends pe{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class I0e extends pe{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class N0e extends pe{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Tc(e.abiItem)}\`, and`,`\`${n.type}\` in \`${Tc(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let T0e=class extends pe{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class XE extends pe{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${LN(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class UN extends pe{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Tc(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class R0e extends pe{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class P0e extends pe{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let gK=class extends pe{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class O0e extends pe{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class k0e extends pe{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}let mK=class extends pe{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},yK=class extends pe{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class C8 extends pe{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function nb(t,{dir:e,size:n=32}={}){return typeof t=="string"?Yh(t,{dir:e,size:n}):D0e(t,{dir:e,size:n})}function Yh(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new yK({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function D0e(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new yK({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}let wK=class extends pe{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class M0e extends pe{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class L0e extends pe{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let U0e=class extends pe{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function Rl(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function Ua(t,{size:e}){if(xr(t)>e)throw new U0e({givenSize:xr(t),maxSize:e})}function Vo(t,e={}){const{signed:n}=e;e.size&&Ua(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function B0e(t,e={}){let n=t;if(e.size&&(Ua(n,{size:e.size}),n=Rl(n)),Rl(n)==="0x00")return!1;if(Rl(n)==="0x01")return!0;throw new L0e(n)}function Rc(t,e={}){return Number(Vo(t,e))}function bK(t,e={}){let n=ka(t);return e.size&&(Ua(n,{size:e.size}),n=Rl(n,{dir:"right"})),new TextDecoder().decode(n)}const $0e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Oa(t,e={}){return typeof t=="number"||typeof t=="bigint"?et(t,e):typeof t=="string"?pw(t,e):typeof t=="boolean"?vK(t,e):ts(t,e)}function vK(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Ua(n,{size:e.size}),nb(n,{size:e.size})):n}function ts(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=$0e[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Ua(r,{size:e.size}),nb(r,{dir:"right",size:e.size})):r}function et(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new wK({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?nb(a,{size:r}):a}const F0e=new TextEncoder;function pw(t,e={}){const n=F0e.encode(t);return ts(n,e)}const j0e=new TextEncoder;function rb(t,e={}){return typeof t=="number"||typeof t=="bigint"?z0e(t,e):typeof t=="boolean"?W0e(t,e):Ml(t)?ka(t,e):lg(t,e)}function W0e(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Ua(n,{size:e.size}),nb(n,{size:e.size})):n}const Yl={zero:48,nine:57,A:65,F:70,a:97,f:102};function _8(t){if(t>=Yl.zero&&t<=Yl.nine)return t-Yl.zero;if(t>=Yl.A&&t<=Yl.F)return t-(Yl.A-10);if(t>=Yl.a&&t<=Yl.f)return t-(Yl.a-10)}function ka(t,e={}){let n=t;e.size&&(Ua(n,{size:e.size}),n=nb(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=_8(r.charCodeAt(a++)),l=_8(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new pe(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function z0e(t,e){const n=et(t,e);return ka(n)}function lg(t,e={}){const n=j0e.encode(t);return typeof e.size=="number"?(Ua(n,{size:e.size}),nb(n,{dir:"right",size:e.size})):n}const iA=BigInt(2**32-1),A8=BigInt(32);function H0e(t,e=!1){return e?{h:Number(t&iA),l:Number(t>>A8&iA)}:{h:Number(t>>A8&iA)|0,l:Number(t&iA)|0}}function G0e(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=H0e(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const q0e=(t,e,n)=>t<<n|e>>>32-n,V0e=(t,e,n)=>e<<n|t>>>32-n,K0e=(t,e,n)=>e<<n-32|t>>>64-n,Y0e=(t,e,n)=>t<<n-32|e>>>64-n,Pm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function _L(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function eC(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Pc(t,...e){if(!_L(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Q0e(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");eC(t.outputLen),eC(t.blockLen)}function gw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function EK(t,e){Pc(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function J0e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function mw(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function EP(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Fc(t,e){return t<<32-e|t>>>e}const Z0e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function X0e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function ewe(t){for(let e=0;e<t.length;e++)t[e]=X0e(t[e]);return t}const S8=Z0e?t=>t:ewe,CK=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",twe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function tC(t){if(Pc(t),CK)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=twe[t[n]];return e}const Ql={_0:48,_9:57,A:65,F:70,a:97,f:102};function x8(t){if(t>=Ql._0&&t<=Ql._9)return t-Ql._0;if(t>=Ql.A&&t<=Ql.F)return t-(Ql.A-10);if(t>=Ql.a&&t<=Ql.f)return t-(Ql.a-10)}function AL(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(CK)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=x8(t.charCodeAt(i)),a=x8(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function nwe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function $_(t){return typeof t=="string"&&(t=nwe(t)),Pc(t),t}function vp(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Pc(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let SL=class{};function _K(t){const e=r=>t().update($_(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function rwe(t){const e=(r,s)=>t(s).update($_(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function swe(t=32){if(Pm&&typeof Pm.getRandomValues=="function")return Pm.getRandomValues(new Uint8Array(t));if(Pm&&typeof Pm.randomBytes=="function")return Uint8Array.from(Pm.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const iwe=BigInt(0),Yb=BigInt(1),owe=BigInt(2),awe=BigInt(7),cwe=BigInt(256),lwe=BigInt(113),AK=[],SK=[],xK=[];for(let t=0,e=Yb,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],AK.push(2*(5*r+n)),SK.push((t+1)*(t+2)/2%64);let s=iwe;for(let i=0;i<7;i++)e=(e<<Yb^(e>>awe)*lwe)%cwe,e&owe&&(s^=Yb<<(Yb<<BigInt(i))-Yb);xK.push(s)}const IK=G0e(xK,!0),uwe=IK[0],dwe=IK[1],I8=(t,e,n)=>n>32?K0e(t,e,n):q0e(t,e,n),N8=(t,e,n)=>n>32?Y0e(t,e,n):V0e(t,e,n);function NK(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=I8(l,u,1)^n[a],h=N8(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=SK[o],c=I8(s,i,a),l=N8(s,i,a),u=AK[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=uwe[r],t[1]^=dwe[r]}mw(n)}let xL=class TK extends SL{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,eC(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=J0e(this.state)}clone(){return this._cloneInto()}keccak(){S8(this.state32),NK(this.state32,this.rounds),S8(this.state32),this.posOut=0,this.pos=0}update(e){gw(this),e=$_(e),Pc(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){gw(this,!1),Pc(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return eC(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(EK(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,mw(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new TK(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const xf=(t,e,n)=>_K(()=>new xL(e,t,n)),hwe=xf(6,144,224/8),fwe=xf(6,136,256/8),pwe=xf(6,104,384/8),gwe=xf(6,72,512/8),mwe=xf(1,144,224/8),IL=xf(1,136,256/8),ywe=xf(1,104,384/8),wwe=xf(1,72,512/8),RK=(t,e,n)=>rwe((r={})=>new xL(e,t,r.dkLen===void 0?n:r.dkLen,!0)),bwe=RK(31,168,128/8),vwe=RK(31,136,256/8),Dqe=Object.freeze(Object.defineProperty({__proto__:null,Keccak:xL,keccakP:NK,keccak_224:mwe,keccak_256:IL,keccak_384:ywe,keccak_512:wwe,sha3_224:hwe,sha3_256:fwe,sha3_384:pwe,sha3_512:gwe,shake128:bwe,shake256:vwe},Symbol.toStringTag,{value:"Module"}));function Ds(t,e){const n=e||"hex",r=IL(Ml(t,{strict:!1})?rb(t):t);return n==="bytes"?r:Oa(r)}const Ewe=t=>Ds(rb(t));function Cwe(t){return Ewe(t)}function _we(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new pe("Unable to normalize signature.");return s}const Awe=t=>{const e=typeof t=="string"?t:Ux(t);return _we(e)};function PK(t){return Cwe(Awe(t))}const BN=PK;let ff=class extends pe{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},$N=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const CP=new $N(8192);function F_(t,e){if(CP.has(`${t}.${e}`))return CP.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=Ds(lg(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return CP.set(`${t}.${e}`,i),i}function Uu(t,e){if(!Da(t,{strict:!1}))throw new ff({address:t});return F_(t,e)}const Swe=/^0x[a-fA-F0-9]{40}$/,_P=new $N(8192);function Da(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(_P.has(r))return _P.get(r);const s=Swe.test(t)?t.toLowerCase()===t?!0:n?F_(t)===t:!0:!1;return _P.set(r,s),s}function Ma(t){return typeof t[0]=="string"?sb(t):xwe(t)}function xwe(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function sb(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function yw(t,e,n,{strict:r}={}){return Ml(t,{strict:!1})?Bx(t,e,n,{strict:r}):DK(t,e,n,{strict:r})}function OK(t,e){if(typeof e=="number"&&e>0&&e>xr(t)-1)throw new mK({offset:e,position:"start",size:xr(t)})}function kK(t,e,n){if(typeof e=="number"&&typeof n=="number"&&xr(t)!==n-e)throw new mK({offset:n,position:"end",size:xr(t)})}function DK(t,e,n,{strict:r}={}){OK(t,e);const s=t.slice(e,n);return r&&kK(s,e,n),s}function Bx(t,e,n,{strict:r}={}){OK(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&kK(s,e,n),s}const Iwe=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,MK=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function If(t,e){if(t.length!==e.length)throw new A0e({expectedLength:t.length,givenLength:e.length});const n=Nwe({params:t,values:e}),r=TL(n);return r.length===0?"0x":r}function Nwe({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(NL({param:t[r],value:e[r]}));return n}function NL({param:t,value:e}){const n=RL(t.type);if(n){const[r,s]=n;return Rwe(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return Mwe(e,{param:t});if(t.type==="address")return Twe(e);if(t.type==="bool")return Owe(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=MK.exec(t.type)??[];return kwe(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return Pwe(e,{param:t});if(t.type==="string")return Dwe(e);throw new R0e(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function TL(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=xr(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(et(e+s,{size:32})),r.push(a),s+=xr(a)):n.push(a)}return Ma([...n,...r])}function Twe(t){if(!Da(t))throw new ff({address:t});return{dynamic:!1,encoded:Yh(t.toLowerCase())}}function Rwe(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new gK(t);if(!r&&t.length!==e)throw new C0e({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=NL({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=TL(i);if(r){const a=et(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?Ma([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Ma(i.map(({encoded:o})=>o))}}function Pwe(t,{param:e}){const[,n]=e.type.split("bytes"),r=xr(t);if(!n){let s=t;return r%32!==0&&(s=Yh(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:Ma([Yh(et(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new _0e({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:Yh(t,{dir:"right"})}}function Owe(t){if(typeof t!="boolean")throw new pe(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Yh(vK(t))}}function kwe(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new wK({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:et(t,{size:32,signed:e})}}function Dwe(t){const e=pw(t),n=Math.ceil(xr(e)/32),r=[];for(let s=0;s<n;s++)r.push(Yh(yw(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Ma([Yh(et(xr(e),{size:32})),...r])}}function Mwe(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=NL({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?TL(r):Ma(r.map(({encoded:s})=>s))}}function RL(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const j_=t=>yw(PK(t),0,4);function sm(t){const{abi:e,args:n=[],name:r}=t,s=Ml(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?j_(a)===r:a.type==="event"?BN(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?Zk(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=LK(a.inputs,o.inputs,n);if(l)throw new N0e({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function Zk(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Da(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>Zk(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>Zk(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function LK(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return LK(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Da(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Da(n[r],{strict:!1}):!1)return o}}const T8="/docs/contract/encodeEventTopics";function W_(t){var c;const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const l=sm({abi:e,name:n});if(!l)throw new E8(n,{docsPath:T8});s=l}if(s.type!=="event")throw new E8(void 0,{docsPath:T8});const i=Tc(s),o=BN(i);let a=[];if(r&&"inputs"in s){const l=(c=s.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?(l==null?void 0:l.map(d=>r[d.name]))??[]:[];u.length>0&&(a=(l==null?void 0:l.map((d,h)=>Array.isArray(u[h])?u[h].map((f,p)=>R8({param:d,value:u[h][p]})):typeof u[h]<"u"&&u[h]!==null?R8({param:d,value:u[h]}):null))??[])}return[o,...a]}function R8({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return Ds(rb(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new k0e(t.type);return If([t],[e])}function FN(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function UK(t,e){const{address:n,abi:r,args:s,eventName:i,fromBlock:o,strict:a,toBlock:c}=e,l=FN(t,{method:"eth_newFilter"}),u=i?W_({abi:r,args:s,eventName:i}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?et(o):o,toBlock:typeof c=="bigint"?et(c):c,topics:u}]});return{abi:r,args:s,eventName:i,id:d,request:l(d),strict:!!a,type:"event"}}function Nr(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const P8="/docs/contract/encodeFunctionData";function Lwe(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=sm({abi:e,args:n,name:r});if(!i)throw new fw(r,{docsPath:P8});s=i}if(s.type!=="function")throw new fw(void 0,{docsPath:P8});return{abi:[s],functionName:j_(Tc(s))}}function Ba(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:Lwe(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?If(s.inputs,e??[]):void 0;return sb([i,o??"0x"])}const BK={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},$K={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Uwe={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class O8 extends pe{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class FK extends pe{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class Bwe extends pe{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const $we={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Bwe({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new FK({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new O8({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new O8({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function PL(t,{recursiveReadLimit:e=8192}={}){const n=Object.create($we);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function Fwe(t,e={}){typeof e.size<"u"&&Ua(t,{size:e.size});const n=ts(t,e);return Vo(n,e)}function jwe(t,e={}){let n=t;if(typeof e.size<"u"&&(Ua(n,{size:e.size}),n=Rl(n)),n.length>1||n[0]>1)throw new M0e(n);return!!n[0]}function ju(t,e={}){typeof e.size<"u"&&Ua(t,{size:e.size});const n=ts(t,e);return Rc(n,e)}function Wwe(t,e={}){let n=t;return typeof e.size<"u"&&(Ua(n,{size:e.size}),n=Rl(n,{dir:"right"})),new TextDecoder().decode(n)}function z_(t,e){const n=typeof e=="string"?ka(e):e,r=PL(n);if(xr(n)===0&&t.length>0)throw new B_;if(xr(e)&&xr(e)<32)throw new dK({data:typeof e=="string"?e:ts(e),params:t,size:xr(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=Hy(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function Hy(t,e,{staticPosition:n}){const r=RL(e.type);if(r){const[s,i]=r;return Hwe(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return Kwe(t,e,{staticPosition:n});if(e.type==="address")return zwe(t);if(e.type==="bool")return Gwe(t);if(e.type.startsWith("bytes"))return qwe(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return Vwe(t,e);if(e.type==="string")return Ywe(t,{staticPosition:n});throw new P0e(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const k8=32,Xk=32;function zwe(t){const e=t.readBytes(32);return[F_(ts(DK(e,-20))),32]}function Hwe(t,e,{length:n,staticPosition:r}){if(!n){const o=ju(t.readBytes(Xk)),a=r+o,c=a+k8;t.setPosition(a);const l=ju(t.readBytes(k8)),u=nC(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=Hy(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(nC(e)){const o=ju(t.readBytes(Xk)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=Hy(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=Hy(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function Gwe(t){return[jwe(t.readBytes(32),{size:32}),32]}function qwe(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=ju(t.readBytes(32));t.setPosition(n+o);const a=ju(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[ts(c),32]}return[ts(t.readBytes(Number.parseInt(s),32)),32]}function Vwe(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?Fwe(s,{signed:n}):ju(s,{signed:n}),32]}function Kwe(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(nC(e)){const o=ju(t.readBytes(Xk)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=Hy(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=Hy(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function Ywe(t,{staticPosition:e}){const n=ju(t.readBytes(32)),r=e+n;t.setPosition(r);const s=ju(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=Wwe(Rl(i));return t.setPosition(e+32),[o,32]}function nC(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(nC);const n=RL(t.type);return!!(n&&nC({...t,type:n[1]}))}function Qwe(t){const{abi:e,data:n}=t,r=yw(n,0,4);if(r==="0x")throw new B_;const i=[...e||[],$K,Uwe].find(o=>o.type==="error"&&r===j_(Tc(o)));if(!i)throw new hK(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?z_(i.inputs,yw(n,4)):void 0,errorName:i.name}}const Xr=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n);function jK({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?Xr(e[i]):e[i]}`).join(", ")})`}const Jwe={gwei:9,wei:18},Zwe={ether:-9,wei:9},Xwe={ether:-18,gwei:-9};function im(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function OL(t,e="wei"){return im(t,Jwe[e])}function co(t,e="wei"){return im(t,Zwe[e])}class ebe extends pe{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class tbe extends pe{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function D8(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function nbe(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=D8(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=D8(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function H_(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class rbe extends pe{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class sbe extends pe{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",H_(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class ibe extends pe{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=H_({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${OL(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${co(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${co(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${co(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class WK extends pe{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class zK extends pe{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class obe extends pe{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const abe=t=>t,kL=t=>t;class HK extends pe{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var w;const p=n?Nr(n):void 0;let g=H_({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${OL(h)} ${((w=s==null?void 0:s.nativeCurrency)==null?void 0:w.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${co(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${co(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${co(l)} gwei`,nonce:u});f&&(g+=`
${nbe(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class GK extends pe{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=sm({abi:n,args:r,name:o}),l=c?jK({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?Tc(c,{includeName:!0}):void 0,d=H_({address:s&&abe(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class eD extends pe{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=Qwe({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=BK[f]}else{const f=u?Tc(u,{includeName:!0}):void 0,p=u&&h?jK({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof hK&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class cbe extends pe{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class lbe extends pe{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class jN extends pe{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class nE extends pe{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${kL(o)}`,e&&`Request body: ${Xr(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class DL extends pe{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${kL(r)}`,`Request body: ${Xr(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class M8 extends pe{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${kL(n)}`,`Request body: ${Xr(e)}`],name:"TimeoutError"})}}const ube=-1;class go extends pe{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof DL?e.code:n??ube}}class ea extends go{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class rC extends go{constructor(e){super(e,{code:rC.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(rC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class sC extends go{constructor(e){super(e,{code:sC.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(sC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class iC extends go{constructor(e,{method:n}={}){super(e,{code:iC.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(iC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class oC extends go{constructor(e){super(e,{code:oC.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(oC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Ng extends go{constructor(e){super(e,{code:Ng.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Ng,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Tg extends go{constructor(e){super(e,{code:Tg.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Tg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class aC extends go{constructor(e){super(e,{code:aC.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(aC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Qh extends go{constructor(e){super(e,{code:Qh.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Qh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class ww extends go{constructor(e){super(e,{code:ww.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(ww,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Ep extends go{constructor(e,{method:n}={}){super(e,{code:Ep.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Ep,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class bw extends go{constructor(e){super(e,{code:bw.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(bw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class cC extends go{constructor(e){super(e,{code:cC.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(cC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Gr extends ea{constructor(e){super(e,{code:Gr.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Gr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class lC extends ea{constructor(e){super(e,{code:lC.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(lC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class uC extends ea{constructor(e,{method:n}={}){super(e,{code:uC.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(uC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class dC extends ea{constructor(e){super(e,{code:dC.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(dC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class hC extends ea{constructor(e){super(e,{code:hC.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(hC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Ll extends ea{constructor(e){super(e,{code:Ll.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Ll,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class vw extends ea{constructor(e){super(e,{code:vw.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(vw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class fC extends ea{constructor(e){super(e,{code:fC.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(fC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class pC extends ea{constructor(e){super(e,{code:pC.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(pC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class gC extends ea{constructor(e){super(e,{code:gC.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(gC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class mC extends ea{constructor(e){super(e,{code:mC.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(mC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class yC extends ea{constructor(e){super(e,{code:yC.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(yC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Ew extends ea{constructor(e){super(e,{code:Ew.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Ew,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class dbe extends go{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const hbe=3;function Rg(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof jN?t:t instanceof pe?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof B_?new cbe({functionName:i}):[hbe,Ng.code].includes(c)&&(l||u||d||h)?new eD({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof DL?u:h??d}):t;return new GK(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}function fbe(t){const e=Ds(`0x${t.substring(4)}`).substring(26);return F_(`0x${e}`)}const pbe="modulepreload",gbe=function(t){return"/"+t},L8={},Zs=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=gbe(c),c in L8)return;L8[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":pbe,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function mbe({hash:t,signature:e}){const n=Ml(t)?t:Oa(t),{secp256k1:r}=await Zs(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>n_e);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=U8(f);return new r.Signature(Vo(l),Vo(u)).addRecoveryBit(p)}const o=Ml(e)?e:Oa(e);if(xr(o)!==65)throw new Error("invalid signature length");const a=Rc(`0x${o.slice(130)}`),c=U8(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function U8(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function qK({hash:t,signature:e}){return fbe(await mbe({hash:t,signature:e}))}function ybe(t,e="hex"){const n=VK(t),r=PL(new Uint8Array(n.length));return n.encode(r),e==="hex"?ts(r.bytes):r.bytes}function VK(t){return Array.isArray(t)?wbe(t.map(e=>VK(e))):bbe(t)}function wbe(t){const e=t.reduce((s,i)=>s+i.length,0),n=KK(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function bbe(t){const e=typeof t=="string"?ka(t):t,n=KK(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function KK(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new pe("Length is too large.")}function vbe(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=Ds(sb(["0x05",ybe([e?et(e):"0x",s,n?et(n):"0x"])]));return r==="bytes"?ka(i):i}async function YK(t){const{authorization:e,signature:n}=t;return qK({hash:vbe(e),signature:n??e})}class Ebe extends pe{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=H_({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${OL(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${co(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${co(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${co(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Cp extends pe{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(Cp,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Cp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class $x extends pe{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${co(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty($x,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class tD extends pe{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${co(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(tD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class nD extends pe{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(nD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class rD extends pe{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(rD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class sD extends pe{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(sD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class iD extends pe{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(iD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class oD extends pe{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(oD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class aD extends pe{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(aD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class cD extends pe{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(cD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class Fx extends pe{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${co(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${co(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(Fx,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class G_ extends pe{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function WN(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof pe?t.walk(s=>(s==null?void 0:s.code)===Cp.code):t;return r instanceof pe?new Cp({cause:t,message:r.details}):Cp.nodeMessage.test(n)?new Cp({cause:t,message:t.details}):$x.nodeMessage.test(n)?new $x({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):tD.nodeMessage.test(n)?new tD({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):nD.nodeMessage.test(n)?new nD({cause:t,nonce:e==null?void 0:e.nonce}):rD.nodeMessage.test(n)?new rD({cause:t,nonce:e==null?void 0:e.nonce}):sD.nodeMessage.test(n)?new sD({cause:t,nonce:e==null?void 0:e.nonce}):iD.nodeMessage.test(n)?new iD({cause:t}):oD.nodeMessage.test(n)?new oD({cause:t,gas:e==null?void 0:e.gas}):aD.nodeMessage.test(n)?new aD({cause:t,gas:e==null?void 0:e.gas}):cD.nodeMessage.test(n)?new cD({cause:t}):Fx.nodeMessage.test(n)?new Fx({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new G_({cause:t})}function Cbe(t,{docsPath:e,...n}){const r=(()=>{const s=WN(t,n);return s instanceof G_?t:s})();return new Ebe(r,{docsPath:e,...n})}function zN(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const _be={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function ib(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=Abe(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>ts(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=et(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=et(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=et(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=et(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=et(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=et(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=_be[t.type]),typeof t.value<"u"&&(e.value=et(t.value)),e}function Abe(t){return t.map(e=>({address:e.address,r:e.r?et(BigInt(e.r)):e.r,s:e.s?et(BigInt(e.s)):e.s,chainId:et(e.chainId),nonce:et(e.nonce),...typeof e.yParity<"u"?{yParity:et(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:et(e.v)}:{}}))}function B8(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new C8({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new C8({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function Sbe(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=et(e)),n!==void 0&&(o.nonce=et(n)),r!==void 0&&(o.state=B8(r)),s!==void 0){if(o.state)throw new tbe;o.stateDiff=B8(s)}return o}function ML(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Da(n,{strict:!1}))throw new ff({address:n});if(e[n])throw new ebe({address:n});e[n]=Sbe(r)}return e}const xbe=2n**256n-1n;function om(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?Nr(e):void 0;if(o&&!Da(o.address))throw new ff({address:o.address});if(i&&!Da(i))throw new ff({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new rbe;if(r&&r>xbe)throw new $x({maxFeePerGas:r});if(s&&r&&s>r)throw new Fx({maxFeePerGas:r,maxPriorityFeePerGas:s})}class Ibe extends pe{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class LL extends pe{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class Nbe extends pe{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${co(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class QK extends pe{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const JK={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function ZK(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Rc(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Rc(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?JK[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=Tbe(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function Tbe(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function XK(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:ZK(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function Al(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?et(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new QK({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||XK)(c)}async function UL(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function Rbe(t,e){return eY(t,e)}async function eY(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await ut(t,Al,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return Vo(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):ut(t,Al,"getBlock")({}),ut(t,UL,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new LL;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function Pbe(t,e){return lD(t,e)}async function lD(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new Ibe;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await ut(t,Al,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new LL;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await eY(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await ut(t,UL,"getGasPrice")({}))}}async function BL(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?et(r):n]},{dedupe:!!r});return Rc(s)}function tY(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>ka(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>ts(i))}function nY(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>ka(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>ka(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>ts(o))}function Obe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function kbe(t,e,n){return t&e^~t&n}function Dbe(t,e,n){return t&e^t&n^e&n}class Mbe extends SL{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=EP(this.buffer)}update(e){gw(this),e=$_(e),Pc(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=EP(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){gw(this),EK(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,mw(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Obe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=EP(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const Sd=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Lbe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),xd=new Uint32Array(64);let Ube=class extends Mbe{constructor(e=32){super(64,e,8,!1),this.A=Sd[0]|0,this.B=Sd[1]|0,this.C=Sd[2]|0,this.D=Sd[3]|0,this.E=Sd[4]|0,this.F=Sd[5]|0,this.G=Sd[6]|0,this.H=Sd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)xd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=xd[d-15],f=xd[d-2],p=Fc(h,7)^Fc(h,18)^h>>>3,g=Fc(f,17)^Fc(f,19)^f>>>10;xd[d]=g+xd[d-7]+p+xd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Fc(a,6)^Fc(a,11)^Fc(a,25),f=u+h+kbe(a,c,l)+Lbe[d]+xd[d]|0,g=(Fc(r,2)^Fc(r,13)^Fc(r,22))+Dbe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){mw(xd)}destroy(){this.set(0,0,0,0,0,0,0,0),mw(this.buffer)}};const rY=_K(()=>new Ube),Bbe=rY;function $be(t,e){return Bbe(Ml(t,{strict:!1})?rb(t):t)}function Fbe(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=$be(e);return s.set([n],0),r==="bytes"?s:ts(s)}function jbe(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(Fbe({commitment:i,to:r,version:n}));return s}const $8=6,sY=32,$L=4096,iY=sY*$L,F8=iY*$8-1-1*$L*$8;class Wbe extends pe{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class zbe extends pe{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function Hbe(t){const e=typeof t.data=="string"?ka(t.data):t.data,n=xr(e);if(!n)throw new zbe;if(n>F8)throw new Wbe({maxSize:F8,size:n});const r=[];let s=!0,i=0;for(;s;){const o=PL(new Uint8Array(iY));let a=0;for(;a<$L;){const c=e.slice(i,i+(sY-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>ts(o.bytes))}function Gbe(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??Hbe({data:e}),i=t.commitments??tY({blobs:s,kzg:n,to:r}),o=t.proofs??nY({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function qbe(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new sbe({transaction:t})}async function ob(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return Rc(e)}const oY=["blobVersionedHashes","chainId","fees","gas","nonce","type"],j8=new Map;async function q_(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=oY,type:u}=e,d=n&&Nr(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await ut(t,Al,"getBlock")({blockTag:"latest"}),f)}let g;async function w(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await ut(t,ob,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const m=await w();h.nonce=await c.consume({address:d.address,chainId:m,client:t})}else h.nonce=await ut(t,BL,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const m=tY({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const b=jbe({commitments:m,to:"hex"});h.blobVersionedHashes=b}if(l.includes("sidecars")){const b=nY({blobs:r,commitments:m,kzg:o}),v=Gbe({blobs:r,commitments:m,proofs:b,to:"hex"});h.sidecars=v}}if(l.includes("chainId")&&(h.chainId=await w()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=qbe(h)}catch{let m=j8.get(t.uid);if(typeof m>"u"){const b=await p();m=typeof(b==null?void 0:b.baseFeePerGas)=="bigint",j8.set(t.uid,m)}h.type=m?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const m=await p(),{maxFeePerGas:b,maxPriorityFeePerGas:v}=await lD(t,{block:m,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<v)throw new Nbe({maxPriorityFeePerGas:v});h.maxPriorityFeePerGas=v,h.maxFeePerGas=b}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new LL;if(typeof e.gasPrice>"u"){const m=await p(),{gasPrice:b}=await lD(t,{block:m,chain:s,request:h,type:"legacy"});h.gasPrice=b}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await ut(t,HN,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),om(h),delete h.parameters,h}async function FL(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?et(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function HN(t,e){var s,i,o;const{account:n=t.account}=e,r=n?Nr(n):void 0;try{let W=function(R){const{block:B,request:O,rpcStateOverride:M}=R;return t.request({method:"eth_estimateGas",params:M?[O,B??"latest",M]:B?[O,B]:[O]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:m,maxPriorityFeePerGas:b,nonce:v,value:A,stateOverride:C,...T}=await q_(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),N=(typeof d=="bigint"?et(d):void 0)||h,S=ML(C),D=await(async()=>{if(T.to)return T.to;if(c&&c.length>0)return await YK({authorization:c[0]}).catch(()=>{throw new pe("`to` is required. Could not infer from `authorizationList`")})})();om(e);const P=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,G=(P||ib)({...zN(T,{format:P}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:m,maxPriorityFeePerGas:b,nonce:v,to:D,value:A});let I=BigInt(await W({block:N,request:G,rpcStateOverride:S}));if(c){const R=await FL(t,{address:G.from}),B=await Promise.all(c.map(async O=>{const{address:M}=O,j=await W({block:N,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:M,value:et(R)},rpcStateOverride:S}).catch(()=>100000n);return 2n*BigInt(j)}));I+=B.reduce((O,M)=>O+M,0n)}return I}catch(a){throw Cbe(a,{...e,account:r,chain:t.chain})}}async function Vbe(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:o,...a}=e,c=Ba({abi:n,args:s,functionName:i});try{return await ut(t,HN,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...a})}catch(l){const u=a.account?Nr(a.account):void 0;throw Rg(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:u==null?void 0:u.address})}}function GN(t,e){if(!Da(t,{strict:!1}))throw new ff({address:t});if(!Da(e,{strict:!1}))throw new ff({address:e});return t.toLowerCase()===e.toLowerCase()}const W8="/docs/contract/decodeEventLog";function jL(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new x0e({docsPath:W8});const c=e.find(g=>g.type==="event"&&o===BN(Tc(g)));if(!(c&&"name"in c)||c.type!=="event")throw new fK(o,{docsPath:W8});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,w)=>[g,w]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[w,m]=f[g],b=a[g];if(!b)throw new UN({abiItem:c,param:w});h[d?m:w.name||m]=Kbe({param:w,value:b})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=z_(p,n);if(g)if(d)for(let w=0;w<u.length;w++)h[w]=h[w]??g.shift();else for(let w=0;w<p.length;w++)h[p[w].name]=g[w]}catch(g){if(i)throw g instanceof dK||g instanceof FK?new XE({abiItem:c,data:n,params:p,size:xr(n)}):g}else if(i)throw new XE({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function Kbe({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(z_([t],e)||[])[0]}function WL(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===BN(u));if(!c)return null;const l=jL({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!Ybe({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof fK)return null;if(c instanceof XE||c instanceof UN){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function Ybe(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?GN(o,a):i.type==="string"||i.type==="bytes"?Ds(rb(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function td(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function zL(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:o,args:a,strict:c}={}){const l=c??!1,u=o??(i?[i]:void 0);let d=[];u&&(d=[u.flatMap(g=>W_({abi:[g],eventName:g.name,args:o?void 0:a}))],i&&(d=d[0]));let h;n?h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:n}]}):h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof r=="bigint"?et(r):r,toBlock:typeof s=="bigint"?et(s):s}]});const f=h.map(p=>td(p));return u?WL({abi:u,args:a,logs:f,strict:l}):f}async function aY(t,e){const{abi:n,address:r,args:s,blockHash:i,eventName:o,fromBlock:a,toBlock:c,strict:l}=e,u=o?sm({abi:n,name:o}):void 0,d=u?void 0:n.filter(h=>h.type==="event");return ut(t,zL,"getLogs")({address:r,args:s,blockHash:i,event:u,events:d,fromBlock:a,toBlock:c,strict:l})}const AP="/docs/contract/decodeFunctionResult";function am(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=sm({abi:e,args:n,name:r});if(!a)throw new fw(r,{docsPath:AP});i=a}if(i.type!=="function")throw new fw(void 0,{docsPath:AP});if(!i.outputs)throw new pK(i.name,{docsPath:AP});const o=z_(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const HL=BigInt(0),uD=BigInt(1);function jx(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function oA(t){const e=t.toString(16);return e.length&1?"0"+e:e}function cY(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?HL:BigInt("0x"+t)}function qN(t){return cY(tC(t))}function lY(t){return Pc(t),cY(tC(Uint8Array.from(t).reverse()))}function GL(t,e){return AL(t.toString(16).padStart(e*2,"0"))}function uY(t,e){return GL(t,e).reverse()}function pa(t,e,n){let r;if(typeof e=="string")try{r=AL(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(_L(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const SP=t=>typeof t=="bigint"&&HL<=t;function Qbe(t,e,n){return SP(t)&&SP(e)&&SP(n)&&e<=t&&t<n}function Jbe(t,e,n,r){if(!Qbe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Zbe(t){let e;for(e=0;t>HL;t>>=uD,e+=1);return e}const VN=t=>(uD<<BigInt(t))-uD;function Xbe(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...f)=>n(o,i,...f),u=(f=r(0))=>{o=l(s(0),f),i=l(),f.length!==0&&(o=l(s(1),f),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){i=l();const g=i.slice();p.push(g),f+=i.length}return vp(...p)};return(f,p)=>{c(),u(f);let g;for(;!(g=p(d()));)u();return c(),g}}function qL(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function z8(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const eve="0.1.1";function tve(){return eve}let Lr=class dD extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof dD){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof dD&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${tve()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return dY(this,e)}};function dY(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?dY(t.cause,e):e?null:t}const nve="#__bigint";function rve(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+nve:s,n)}function sve(t,e){if(G8(t)>e)throw new pve({givenSize:G8(t),maxSize:e})}const Jl={zero:48,nine:57,A:65,F:70,a:97,f:102};function H8(t){if(t>=Jl.zero&&t<=Jl.nine)return t-Jl.zero;if(t>=Jl.A&&t<=Jl.F)return t-(Jl.A-10);if(t>=Jl.a&&t<=Jl.f)return t-(Jl.a-10)}function ive(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new gve({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function VL(t,e){if(La(t)>e)throw new vve({givenSize:La(t),maxSize:e})}function ove(t,e){if(typeof e=="number"&&e>0&&e>La(t)-1)throw new mY({offset:e,position:"start",size:La(t)})}function ave(t,e,n){if(typeof e=="number"&&typeof n=="number"&&La(t)!==n-e)throw new mY({offset:n,position:"end",size:La(t)})}function hY(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new Eve({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const cve=new TextEncoder;function lve(t){return t instanceof Uint8Array?t:typeof t=="string"?dve(t):uve(t)}function uve(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function dve(t,e={}){const{size:n}=e;let r=t;n&&(VL(t,n),r=Og(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const l=H8(s.charCodeAt(c++)),u=H8(s.charCodeAt(c++));if(l===void 0||u===void 0)throw new Lr(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=l*16+u}return o}function hve(t,e={}){const{size:n}=e,r=cve.encode(t);return typeof n=="number"?(sve(r,n),fve(r,n)):r}function fve(t,e){return ive(t,{dir:"right",size:e})}function G8(t){return t.length}let pve=class extends Lr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},gve=class extends Lr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const mve=new TextEncoder,yve=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function wve(t,e={}){const{strict:n=!1}=e;if(!t)throw new q8(t);if(typeof t!="string")throw new q8(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new V8(t);if(!t.startsWith("0x"))throw new V8(t)}function Ul(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function fY(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(VL(n,e.size),Pg(n,e.size)):n}function pY(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=yve[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(VL(r,e.size),Og(r,e.size)):r}function mi(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new gY({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Pg(c,r):c}function KL(t,e={}){return pY(mve.encode(t),e)}function Pg(t,e){return hY(t,{dir:"left",size:e})}function Og(t,e){return hY(t,{dir:"right",size:e})}function YL(t,e,n,r={}){const{strict:s}=r;ove(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&ave(i,e,n),i}function La(t){return Math.ceil((t.length-2)/2)}function bve(t,e={}){const{strict:n=!1}=e;try{return wve(t,{strict:n}),!0}catch{return!1}}let gY=class extends Lr{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class q8 extends Lr{constructor(e){super(`Value \`${typeof e=="object"?rve(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class V8 extends Lr{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let vve=class extends Lr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class mY extends Lr{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let Eve=class extends Lr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function Cve(t){return{address:t.address,amount:mi(t.amount),index:mi(t.index),validatorIndex:mi(t.validatorIndex)}}function yY(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:mi(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:mi(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:mi(t.gasLimit)},...typeof t.number=="bigint"&&{number:mi(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:mi(t.prevRandao)},...typeof t.time=="bigint"&&{time:mi(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(Cve)}}}const hD=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],fD=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],wY=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],bY=[...wY,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],_ve=[...wY,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],K8=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],Y8=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],Q8=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],Ave="0x82ad56cb",vY="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",Sve="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",xve="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";class pD extends pe{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class Ive extends pe{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id}  ${e.name}`],name:"ChainMismatchError"})}}class Nve extends pe{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class EY extends pe{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}const xP="/docs/contract/encodeDeployData";function KN(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new E0e({docsPath:xP});if(!("inputs"in s))throw new b8({docsPath:xP});if(!s.inputs||s.inputs.length===0)throw new b8({docsPath:xP});const i=If(s.inputs,n);return sb([r,i])}function ab({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new pD({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new pD({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function CY(t,{docsPath:e,...n}){const r=(()=>{const s=WN(t,n);return s instanceof G_?t:s})();return new HK(r,{docsPath:e,...n})}function QL(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const IP=new Map;function _Y({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>IP.delete(e),a=()=>c().map(({args:u})=>u),c=()=>IP.get(e)||[],l=u=>IP.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=QL();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function V_(t,e){var G,W,I,R;const{account:n=t.account,authorizationList:r,batch:s=!!((G=t.batch)!=null&&G.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:m,maxPriorityFeePerGas:b,nonce:v,to:A,value:C,stateOverride:T,...x}=e,N=n?Nr(n):void 0;if(u&&(h||f))throw new pe("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&A)throw new pe("Cannot provide both `code` & `to` as parameters.");const S=u&&d,D=h&&f&&A&&d,P=S||D,$=S?Pve({code:u,data:d}):D?Ove({data:d,factory:h,factoryData:f,to:A}):d;try{om(e);const O=(typeof i=="bigint"?et(i):void 0)||o,M=l?yY(l):void 0,j=ML(T),V=(R=(I=(W=t.chain)==null?void 0:W.formatters)==null?void 0:I.transactionRequest)==null?void 0:R.format,Z=(V||ib)({...zN(x,{format:V}),from:N==null?void 0:N.address,accessList:a,authorizationList:r,blobs:c,data:$,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:m,maxPriorityFeePerGas:b,nonce:v,to:P?void 0:A,value:C});if(s&&Tve({request:Z})&&!j&&!M)try{return await Rve(t,{...Z,blockNumber:i,blockTag:o})}catch(ge){if(!(ge instanceof EY)&&!(ge instanceof pD))throw ge}const X=(()=>{const ge=[Z,O];return j&&M?[...ge,j,M]:j?[...ge,j]:M?[...ge,{},M]:ge})(),ce=await t.request({method:"eth_call",params:X});return ce==="0x"?{data:void 0}:{data:ce}}catch(B){const O=kve(B),{offchainLookup:M,offchainLookupSignature:j}=await Zs(async()=>{const{offchainLookup:V,offchainLookupSignature:te}=await import("./ccip-DAX5oOrB.js");return{offchainLookup:V,offchainLookupSignature:te}},[]);if(t.ccipRead!==!1&&(O==null?void 0:O.slice(0,10))===j&&A)return{data:await M(t,{data:O,to:A})};throw P&&(O==null?void 0:O.slice(0,10))==="0x101bb98d"?new lbe({factory:h}):CY(B,{...e,account:N,chain:t.chain})}}function Tve({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(Ave)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function Rve(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new EY;l=ab({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?et(s):void 0)||i,{schedule:h}=_Y({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(w){return w.reduce((b,{data:v})=>b+(v.length-2),0)>n*2},fn:async w=>{const m=w.map(A=>({allowFailure:!0,callData:A.data,target:A.to})),b=Ba({abi:hD,args:[m],functionName:"aggregate3"}),v=await t.request({method:"eth_call",params:[{data:b,to:l},d]});return am({abi:hD,args:[m],functionName:"aggregate3",data:v||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new jN({data:f});return f==="0x"?{data:void 0}:{data:f}}function Pve(t){const{code:e,data:n}=t;return KN({abi:cK(["constructor(bytes, bytes)"]),bytecode:vY,args:[e,n]})}function Ove(t){const{data:e,factory:n,factoryData:r,to:s}=t;return KN({abi:cK(["constructor(address, bytes, address, bytes)"]),bytecode:Sve,args:[s,e,n,r]})}function kve(t){var n;if(!(t instanceof pe))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function Bl(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=Ba({abi:n,args:s,functionName:i});try{const{data:c}=await ut(t,V_,"call")({...o,data:a,to:r});return am({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw Rg(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function Dve(t,e){const{abi:n,address:r,args:s,dataSuffix:i,functionName:o,...a}=e,c=a.account?Nr(a.account):t.account,l=Ba({abi:n,args:s,functionName:o});try{const{data:u}=await ut(t,V_,"call")({batch:!1,data:`${l}${i?i.replace("0x",""):""}`,to:r,...a,account:c}),d=am({abi:n,args:s,functionName:o,data:u||"0x"}),h=n.filter(f=>"name"in f&&f.name===e.functionName);return{result:d,request:{abi:h,address:r,args:s,dataSuffix:i,functionName:o,...a,account:c}}}catch(u){throw Rg(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c==null?void 0:c.address})}}const NP=new Map,J8=new Map;let Mve=0;function nd(t,e,n){const r=++Mve,s=()=>NP.get(t)||[],i=()=>{const u=s();NP.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=J8.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(NP.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&J8.set(t,l),o}async function Wx(t){return new Promise(e=>setTimeout(e,t))}function cb(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await Wx(c);const l=async()=>{s&&(await t({unpoll:i}),await Wx(r),l())};l()})(),i}const Lve=new Map,Uve=new Map;function Bve(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,Lve),r=e(t,Uve);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function $ve(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=Bve(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const Fve=t=>`blockNumber.${t}`;async function K_(t,{cacheTime:e=t.cacheTime}={}){const n=await $ve(()=>t.request({method:"eth_blockNumber"}),{cacheKey:Fve(t.uid),cacheTime:e});return BigInt(n)}async function YN(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>td(i));return!("abi"in e)||!e.abi?s:WL({abi:e.abi,logs:s,strict:n})}async function QN(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function jve(t,e){const{abi:n,address:r,args:s,batch:i=!0,eventName:o,fromBlock:a,onError:c,onLogs:l,poll:u,pollingInterval:d=t.pollingInterval,strict:h}=e;return(typeof u<"u"?u:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))?(()=>{const w=h??!1,m=Xr(["watchContractEvent",r,s,i,t.uid,o,d,w,a]);return nd(m,{onLogs:l,onError:c},b=>{let v;a!==void 0&&(v=a-1n);let A,C=!1;const T=cb(async()=>{var x;if(!C){try{A=await ut(t,UK,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:w,fromBlock:a})}catch{}C=!0;return}try{let N;if(A)N=await ut(t,YN,"getFilterChanges")({filter:A});else{const S=await ut(t,K_,"getBlockNumber")({});v&&v<S?N=await ut(t,aY,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:v+1n,toBlock:S,strict:w}):N=[],v=S}if(N.length===0)return;if(i)b.onLogs(N);else for(const S of N)b.onLogs([S])}catch(N){A&&N instanceof Tg&&(C=!1),(x=b.onError)==null||x.call(b,N)}},{emitOnBegin:!0,interval:d});return async()=>{A&&await ut(t,QN,"uninstallFilter")({filter:A}),T()}})})():(()=>{const w=h??!1,m=Xr(["watchContractEvent",r,s,i,t.uid,o,d,w]);let b=!0,v=()=>b=!1;return nd(m,{onLogs:l,onError:c},A=>((async()=>{try{const C=(()=>{if(t.transport.type==="fallback"){const N=t.transport.transports.find(S=>S.config.type==="webSocket"||S.config.type==="ipc");return N?N.value:t.transport}return t.transport})(),T=o?W_({abi:n,eventName:o,args:s}):[],{unsubscribe:x}=await C.subscribe({params:["logs",{address:r,topics:T}],onData(N){var D;if(!b)return;const S=N.result;try{const{eventName:P,args:$}=jL({abi:n,data:S.data,topics:S.topics,strict:h}),G=td(S,{args:$,eventName:P});A.onLogs([G])}catch(P){let $,G;if(P instanceof XE||P instanceof UN){if(h)return;$=P.abiItem.name,G=(D=P.abiItem.inputs)==null?void 0:D.some(I=>!("name"in I&&I.name))}const W=td(S,{args:G?[]:{},eventName:$});A.onLogs([W])}},onError(N){var S;(S=A.onError)==null||S.call(A,N)}});v=x,b||v()}catch(C){c==null||c(C)}})(),()=>v()))})()}class cm extends pe{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class fS extends pe{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function AY({chain:t,currentChainId:e}){if(!t)throw new Nve;if(e!==t.id)throw new Ive({chain:t,currentChainId:e})}function SY(t,{docsPath:e,...n}){const r=(()=>{const s=WN(t,n);return s instanceof G_?t:s})();return new ibe(r,{docsPath:e,...n})}async function JL(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const TP=new $N(128);async function Y_(t,e){var b,v,A,C;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...w}=e;if(typeof n>"u")throw new cm({docsPath:"/docs/actions/wallet/sendTransaction"});const m=n?Nr(n):null;try{om(e);const T=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await YK({authorization:i[0]}).catch(()=>{throw new pe("`to` is required. Could not infer from `authorizationList`.")})})();if((m==null?void 0:m.type)==="json-rpc"||m===null){let x;r!==null&&(x=await ut(t,ob,"getChainId")({}),AY({currentChainId:x,chain:r}));const N=(A=(v=(b=t.chain)==null?void 0:b.formatters)==null?void 0:v.transactionRequest)==null?void 0:A.format,D=(N||ib)({...zN(w,{format:N}),accessList:s,authorizationList:i,blobs:o,chainId:x,data:a,from:m==null?void 0:m.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:T,type:p,value:g}),P=TP.get(t.uid),$=P?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:$,params:[D]},{retryCount:0})}catch(G){if(P===!1)throw G;const W=G;if(W.name==="InvalidInputRpcError"||W.name==="InvalidParamsRpcError"||W.name==="MethodNotFoundRpcError"||W.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[D]},{retryCount:0}).then(I=>(TP.set(t.uid,!0),I)).catch(I=>{const R=I;throw R.name==="MethodNotFoundRpcError"||R.name==="MethodNotSupportedRpcError"?(TP.set(t.uid,!1),W):R});throw W}}if((m==null?void 0:m.type)==="local"){const x=await ut(t,q_,"prepareTransactionRequest")({account:m,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:m.nonceManager,parameters:[...oY,"sidecars"],type:p,value:g,...w,to:T}),N=(C=r==null?void 0:r.serializers)==null?void 0:C.transaction,S=await m.signTransaction(x,{serializer:N});return await ut(t,JL,"sendRawTransaction")({serializedTransaction:S})}throw(m==null?void 0:m.type)==="smart"?new fS({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new fS({docsPath:"/docs/actions/wallet/sendTransaction",type:m==null?void 0:m.type})}catch(T){throw T instanceof fS?T:SY(T,{...e,account:m,chain:e.chain||void 0})}}async function xY(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new cm({docsPath:"/docs/contract/writeContract"});const l=r?Nr(r):null,u=Ba({abi:n,args:i,functionName:a});try{return await ut(t,Y_,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw Rg(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}const IY={"0x0":"reverted","0x1":"success"};function Wve(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>td(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Rc(t.transactionIndex):null,status:t.status?IY[t.status]:null,type:t.type?JK[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}const NY="0x5792579257925792579257925792579257925792579257925792579257925792",TY=et(0,{size:32});async function zve(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?Nr(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?Ba({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?Ma([p,f.dataSuffix]):p,to:f.to,value:f.value?et(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:et(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(b=>!b.optional)){const b="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new vw(new pe(b,{details:b}))}if(a&&d.length>1){const m="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new Ew(new pe(m,{details:m}))}const p=[];for(const m of d){const b=Y_(t,{account:u,chain:s,data:m.data,to:m.to,value:m.value?Vo(m.value):void 0});p.push(b),o>0&&await new Promise(v=>setTimeout(v,o))}const g=await Promise.allSettled(p);if(g.every(m=>m.status==="rejected"))throw g[0].reason;const w=g.map(m=>m.status==="fulfilled"?m.value:TY);return{id:Ma([...w,et(s.id,{size:32}),NY])}}throw SY(h,{...e,account:u,chain:e.chain})}}async function RY(t,e){async function n(u){if(u.endsWith(NY.slice(2))){const h=Rl(Bx(u,-64,-32)),f=Bx(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(w=>TY.slice(2)!==w?t.request({method:"eth_getTransactionReceipt",params:[`0x${w}`]},{dedupe:!0}):void 0)),g=p.some(w=>w===null)?100:p.every(w=>(w==null?void 0:w.status)==="0x1")?200:p.every(w=>(w==null?void 0:w.status)==="0x0")?500:600;return{atomic:!1,chainId:Rc(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?Rc(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:Vo(u.blockNumber),gasUsed:Vo(u.gasUsed),status:IY[u.status]})))??[],statusCode:l,status:c,version:o}}async function Hve(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=Xr(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=QL();let u;const d=nd(o,{resolve:c,reject:l},h=>{const f=cb(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await RY(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new Gve({id:n}))},i):void 0,await a}class Gve extends pe{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}const gD=256;let aA=gD,cA;function PY(t=11){if(!cA||aA+t>gD*2){cA="",aA=0;for(let e=0;e<gD;e++)cA+=(256+Math.random()*256|0).toString(16).substring(1)}return cA.substring(aA,aA+++t)}function OY(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?Nr(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},w={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:PY()};function m(b){return v=>{const A=v(b);for(const T in w)delete A[T];const C={...b,...A};return Object.assign(C,{extend:m(C)})}}return Object.assign(w,{extend:m(w)})}const lA=new $N(8192);function qve(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(lA.get(n))return lA.get(n);const r=t().finally(()=>lA.delete(n));return lA.set(n,r),r}function zx(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await Wx(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function Vve(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new Ep(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new Ep(new Error("method not supported"),{method:l});const u=s?pw(`${c}.${Xr(n)}`):void 0;return qve(()=>zx(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case rC.code:throw new rC(f);case sC.code:throw new sC(f);case iC.code:throw new iC(f,{method:n.method});case oC.code:throw new oC(f);case Ng.code:throw new Ng(f);case Tg.code:throw new Tg(f);case aC.code:throw new aC(f);case Qh.code:throw new Qh(f);case ww.code:throw new ww(f);case Ep.code:throw new Ep(f,{method:n.method});case bw.code:throw new bw(f);case cC.code:throw new cC(f);case Gr.code:throw new Gr(f);case lC.code:throw new lC(f);case uC.code:throw new uC(f);case dC.code:throw new dC(f);case hC.code:throw new hC(f);case Ll.code:throw new Ll(f);case vw.code:throw new vw(f);case fC.code:throw new fC(f);case pC.code:throw new pC(f);case gC.code:throw new gC(f);case mC.code:throw new mC(f);case yC.code:throw new yC(f);case Ew.code:throw new Ew(f);case 5e3:throw new Gr(f);default:throw h instanceof pe?h:new dbe(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof nE){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>Kve(h)}),{enabled:s,id:u})}}function Kve(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===bw.code||t.code===Ng.code:t instanceof nE&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function ZL({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=PY();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:Vve(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function Yve(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>ZL({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function Hx(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=Qve,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=ZL({key:n,name:r,async request({method:g,params:w}){let m;const b=async(v=0)=>{const A=h[v]({...d,chain:c,retryCount:0,timeout:u});try{const C=await A.request({method:g,params:w});return f({method:g,params:w,response:C,transport:A,status:"success"}),C}catch(C){if(f({error:C,method:g,params:w,transport:A,status:"error"}),i(C)||v===h.length-1||(m??(m=h.slice(v+1).some(T=>{const{include:x,exclude:N}=T({chain:c}).config.methods||{};return x?x.includes(g):N?!N.includes(g):!0})),!m))throw C;return b(v+1)}};return b()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};Jve({chain:c,interval:g.interval??l,onTransports:w=>h=w,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function Qve(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===ww.code||t.code===Gr.code||Cp.nodeMessage.test(t.message)||t.code===5e3))}function Jve({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const w=g({chain:t,retryCount:0,timeout:i}),m=Date.now();let b,v;try{await(r?r({transport:w}):w.request({method:"net_listening"})),v=1}catch{v=0}finally{b=Date.now()}return{latency:b-m,success:v}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:w})=>w)))),p=o.map((g,w)=>{const m=u.map(T=>T[w].latency),v=1-m.reduce((T,x)=>T+x,0)/m.length/f,A=u.map(T=>T[w].success),C=A.reduce((T,x)=>T+x,0)/A.length;return C===0?[0,w]:[l*v+c*C,w]}).sort((g,w)=>w[0]-g[0]);n(p.map(([,g])=>o[g])),await Wx(e),d()};d()}class Zve extends pe{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function kY(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function Xve(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const Z8=Xve();function eEe(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await kY(async({signal:p})=>{const g={...a,body:Array.isArray(r)?Xr(r.map(v=>({jsonrpc:"2.0",id:v.id??Z8.take(),...v}))):Xr({jsonrpc:"2.0",id:r.id??Z8.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},w=new Request(t,g),m=await(s==null?void 0:s(w,g))??{...g,url:t};return await fetch(m.url??t,m)},{errorInstance:new M8({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new nE({body:r,details:Xr(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof nE||h instanceof M8?h:new nE({body:r,cause:h,url:t})}}}}function Ia(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},w=e.retryCount??h,m=f??e.timeout??1e4,b=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!b)throw new Zve;const v=eEe(b,{fetchOptions:r,onRequest:a,onResponse:c,timeout:m});return ZL({key:s,methods:i,name:o,async request({method:A,params:C}){const T={method:A,params:C},{schedule:x}=_Y({id:b,wait:g,shouldSplitBatch(P){return P.length>p},fn:P=>v.request({body:P}),sort:(P,$)=>P.id-$.id}),N=async P=>n?x(P):[await v.request({body:P})],[{error:S,result:D}]=await N(T);if(u)return{error:S,result:D};if(S)throw new DL({body:T,error:S,url:b});return D},retryCount:w,retryDelay:l,timeout:m,type:"http"},{fetchOptions:r,url:b})}}function XL(t,e){var r,s,i,o,a,c;if(!(t instanceof pe))return!1;const n=t.walk(l=>l instanceof eD);return n instanceof eD?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&n.reason===BK[50]):!1}function tEe(t){const{abi:e,data:n}=t,r=yw(n,0,4),s=e.find(i=>i.type==="function"&&r===j_(Tc(i)));if(!s)throw new I0e(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?z_(s.inputs,yw(n,4)):void 0}}const RP="/docs/contract/encodeErrorResult";function X8(t){const{abi:e,errorName:n,args:r}=t;let s=e[0];if(n){const c=sm({abi:e,args:r,name:n});if(!c)throw new v8(n,{docsPath:RP});s=c}if(s.type!=="error")throw new v8(void 0,{docsPath:RP});const i=Tc(s),o=j_(i);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new S0e(s.name,{docsPath:RP});a=If(s.inputs,r)}return sb([o,a])}const PP="/docs/contract/encodeFunctionResult";function nEe(t){const{abi:e,functionName:n,result:r}=t;let s=e[0];if(n){const o=sm({abi:e,name:n});if(!o)throw new fw(n,{docsPath:PP});s=o}if(s.type!=="function")throw new fw(void 0,{docsPath:PP});if(!s.outputs)throw new pK(s.name,{docsPath:PP});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new gK(r)})();return If(s.outputs,i)}const eU="x-batch-gateway:true";async function rEe(t){const{data:e,ccipRequest:n}=t,{args:[r]}=tEe({abi:fD,data:e}),s=[],i=[];return await Promise.all(r.map(async(o,a)=>{try{i[a]=o.urls.includes(eU)?await rEe({data:o.data,ccipRequest:n}):await n(o),s[a]=!1}catch(c){s[a]=!0,i[a]=sEe(c)}})),nEe({abi:fD,functionName:"query",result:[s,i]})}function sEe(t){return t.name==="HttpRequestError"&&t.status?X8({abi:fD,errorName:"HttpError",args:[t.status,t.shortMessage]}):X8({abi:[$K],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function DY(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return Ml(e)?e:null}function pS(t){let e=new Uint8Array(32).fill(0);if(!t)return ts(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=DY(n[r]),i=s?rb(s):Ds(lg(n[r]),"bytes");e=Ds(Ma([e,i]),"bytes")}return ts(e)}function iEe(t){return`[${t.slice(2)}]`}function oEe(t){const e=new Uint8Array(32).fill(0);return t?DY(t)||Ds(lg(t)):ts(e)}function JN(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(lg(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=lg(s[i]);o.byteLength>255&&(o=lg(iEe(oEe(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}async function aEe(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return ab({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d=Ba({abi:Y8,functionName:"addr",...s!=null?{args:[pS(i),BigInt(s)]}:{args:[pS(i)]}}),h={address:l,abi:bY,functionName:"resolve",args:[Oa(JN(i)),d,o??[eU]],blockNumber:n,blockTag:r},p=await ut(t,Bl,"readContract")(h);if(p[0]==="0x")return null;const g=am({abi:Y8,args:s!=null?[pS(i),BigInt(s)]:void 0,functionName:"addr",data:p[0]});return g==="0x"||Rl(g)==="0x00"?null:g}catch(d){if(a)throw d;if(XL(d,"resolve"))return null;throw d}}class cEe extends pe{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class Qb extends pe{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class tU extends pe{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class lEe extends pe{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const uEe=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,dEe=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,hEe=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,fEe=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function pEe(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function e4(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function MY({uri:t,gatewayUrls:e}){const n=hEe.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=e4(e==null?void 0:e.ipfs,"https://ipfs.io"),s=e4(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match(uEe),{protocol:o,subpath:a,target:c,subtarget:l=""}=(i==null?void 0:i.groups)||{},u=o==="ipns:/"||a==="ipns/",d=o==="ipfs:/"||a==="ipfs/"||dEe.test(t);if(t.startsWith("http")&&!u&&!d){let f=t;return e!=null&&e.arweave&&(f=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:f,isOnChain:!1,isEncoded:!1}}if((u||d)&&c)return{uri:`${r}/${u?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${s}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let h=t.replace(fEe,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new tU({uri:t})}function LY(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new cEe({data:t});return t.image||t.image_url||t.image_data}async function gEe({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await nU({gatewayUrls:t,uri:LY(n)})}catch{throw new tU({uri:e})}}async function nU({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=MY({uri:e,gatewayUrls:t});if(r||await pEe(n))return n;throw new tU({uri:e})}function mEe(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,o]=n.split(":"),[a,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new Qb({reason:"Only EIP-155 supported"});if(!o)throw new Qb({reason:"Chain ID not found"});if(!c)throw new Qb({reason:"Contract address not found"});if(!s)throw new Qb({reason:"Token ID not found"});if(!a)throw new Qb({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function yEe(t,{nft:e}){if(e.namespace==="erc721")return Bl(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return Bl(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new lEe({namespace:e.namespace})}async function wEe(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?bEe(t,{gatewayUrls:e,record:n}):nU({uri:n,gatewayUrls:e})}async function bEe(t,{gatewayUrls:e,record:n}){const r=mEe(n),s=await yEe(t,{nft:r}),{uri:i,isOnChain:o,isEncoded:a}=MY({uri:s,gatewayUrls:e});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const l=a?atob(i.replace("data:application/json;base64,","")):i,u=JSON.parse(l);return nU({uri:LY(u),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),gEe({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function UY(t,e){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return ab({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d={address:l,abi:bY,functionName:"resolve",args:[Oa(JN(i)),Ba({abi:K8,functionName:"text",args:[pS(i),s]}),o??[eU]],blockNumber:n,blockTag:r},f=await ut(t,Bl,"readContract")(d);if(f[0]==="0x")return null;const p=am({abi:K8,functionName:"text",data:f[0]});return p===""?null:p}catch(d){if(a)throw d;if(XL(d,"resolve"))return null;throw d}}async function vEe(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:o,universalResolverAddress:a}){const c=await ut(t,UY,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:i,strict:o});if(!c)return null;try{return await wEe(t,{record:c,gatewayUrls:r})}catch{return null}}async function BY(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=ab({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:_ve,functionName:"reverse",args:[Oa(JN(c))],blockNumber:n,blockTag:r},u=ut(t,Bl,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(XL(l,"reverse"))return null;throw l}}async function EEe(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:i}=t,o=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return ab({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),a=i==null?void 0:i.ensTlds;if(a&&!a.some(l=>s.endsWith(l)))throw new Error(`${s} is not a valid ENS TLD (${a==null?void 0:a.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await ut(t,Bl,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Oa(JN(s))],blockNumber:n,blockTag:r});return c}async function $Y(t,e){var w,m,b;const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f,...p}=e,g=n?Nr(n):void 0;try{om(e);const A=(typeof r=="bigint"?et(r):void 0)||s,C=(b=(m=(w=t.chain)==null?void 0:w.formatters)==null?void 0:m.transactionRequest)==null?void 0:b.format,x=(C||ib)({...zN(p,{format:C}),from:g==null?void 0:g.address,blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f}),N=await t.request({method:"eth_createAccessList",params:[x,A]});return{accessList:N.accessList,gasUsed:BigInt(N.gasUsed)}}catch(v){throw CY(v,{...e,account:g,chain:t.chain})}}async function CEe(t){const e=FN(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}async function FY(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:o,toBlock:a}={}){const c=s??(r?[r]:void 0),l=FN(t,{method:"eth_newFilter"});let u=[];c&&(u=[c.flatMap(f=>W_({abi:[f],eventName:f.name,args:n}))],r&&(u=u[0]));const d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?et(i):i,toBlock:typeof a=="bigint"?et(a):a,...u.length?{topics:u}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:l(d),strict:!!o,toBlock:a,type:"event"}}async function jY(t){const e=FN(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function _Ee(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}async function AEe(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?et(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),Rc(i)}async function t4(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?et(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(i!=="0x")return i}class SEe extends pe{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function xEe(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[i,o,a,c,l,u,d]=await ut(t,Bl,"readContract")({abi:IEe,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:a,chainId:Number(c),verifyingContract:l,salt:u},extensions:d,fields:i}}catch(i){const o=i;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new SEe({address:n}):o}}const IEe=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function NEe(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function TEe(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?et(n):void 0,o=await t.request({method:"eth_feeHistory",params:[et(e),i||r,s]},{dedupe:!!i});return NEe(o)}async function REe(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>td(i));return e.abi?WL({abi:e.abi,logs:s,strict:n}):s}function WY(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}class PEe extends pe{constructor({domain:e}){super(`Invalid domain "${Xr(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class OEe extends pe{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class kEe extends pe{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function DEe(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:KY({domain:e}),...t.types};VY({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(MEe({domain:e,types:s})),r!=="EIP712Domain"&&i.push(zY({data:n,primaryType:r,types:s})),Ds(Ma(i))}function MEe({domain:t,types:e}){return zY({data:t,primaryType:"EIP712Domain",types:e})}function zY({data:t,primaryType:e,types:n}){const r=HY({data:t,primaryType:e,types:n});return Ds(r)}function HY({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[LEe({primaryType:e,types:n})];for(const i of n[e]){const[o,a]=qY({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(o),s.push(a)}return If(r,s)}function LEe({primaryType:t,types:e}){const n=Oa(UEe({primaryType:t,types:e}));return Ds(n)}function UEe({primaryType:t,types:e}){let n="";const r=GY({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function GY({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])GY({primaryType:i.type,types:e},n);return n}function qY({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},Ds(HY({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},Ds(r)];if(n==="string")return[{type:"bytes32"},Ds(Oa(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(o=>qY({name:e,type:s,types:t,value:o}));return[{type:"bytes32"},Ds(If(i.map(([o])=>o),i.map(([,o])=>o)))]}return[{type:n},r]}function BEe(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return Xr({domain:o,message:a,primaryType:r,types:s})}function VY(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(MK);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,w,m]=h;et(d,{signed:w==="int",size:Number.parseInt(m)/8})}if(u==="address"&&typeof d=="string"&&!Da(d))throw new ff({address:d});const f=u.match(Iwe);if(f){const[g,w]=f;if(w&&xr(d)!==Number.parseInt(w))throw new T0e({expectedSize:Number.parseInt(w),givenSize:xr(d)})}const p=s[u];p&&($Ee(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new PEe({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new OEe({primaryType:r,types:s})}function KY({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function $Ee(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new kEe({type:t})}const FEe=`Ethereum Signed Message:
`;function jEe(t){const e=typeof t=="string"?pw(t):typeof t.raw=="string"?t.raw:ts(t.raw),n=pw(`${FEe}${xr(e)}`);return Ma([n,e])}function YY(t,e){return Ds(jEe(t),e)}const QY="0x6492649264926492649264926492649264926492649264926492649264926492";function WEe(t){return Bx(t,-32)===QY}function zEe(t){const{address:e,data:n,signature:r,to:s="hex"}=t,i=sb([If([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,n,r]),QY]);return s==="hex"?i:ka(i)}class HEe extends pe{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function GEe(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new HEe({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}function qEe(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function VEe(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?Rc(t.nonce):void 0,storageProof:t.storageProof?qEe(t.storageProof):void 0}}async function KEe(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",o=n!==void 0?et(n):void 0,a=await t.request({method:"eth_getProof",params:[e,s,o||i]});return VEe(a)}async function YEe(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?et(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function ZN(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?et(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,et(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,et(i)]},{dedupe:!!a}),!c)throw new WK({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||ZK)(c)}async function QEe(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([ut(t,K_,"getBlockNumber")({}),e?ut(t,ZN,"getTransaction")({hash:e}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}async function mD(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new zK({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||Wve)(n)}async function JY(t,e){var m;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((m=t.batch)==null?void 0:m.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=ab({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let b=0;b<l.length;b++){const{abi:v,address:A,args:C,functionName:T}=l[b];try{const x=Ba({abi:v,args:C,functionName:T});p+=(x.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(x.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:x,target:A}]}catch(x){const N=Rg(x,{abi:v,address:A,args:C,docsPath:"/docs/contract/multicall",functionName:T,sender:n});if(!r)throw N;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:A}]}}const g=await Promise.allSettled(h.map(b=>ut(t,Bl,"readContract")({abi:hD,account:n,address:d,args:[b],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),w=[];for(let b=0;b<g.length;b++){const v=g[b];if(v.status==="rejected"){if(!r)throw v.reason;for(let C=0;C<h[b].length;C++)w.push({status:"failure",error:v.reason,result:void 0});continue}const A=v.value;for(let C=0;C<A.length;C++){const{returnData:T,success:x}=A[C],{callData:N}=h[b][C],{abi:S,address:D,functionName:P,args:$}=l[w.length];try{if(N==="0x")throw new B_;if(!x)throw new jN({data:T});const G=am({abi:S,args:$,data:T,functionName:P});w.push(r?{result:G,status:"success"}:G)}catch(G){const W=Rg(G,{abi:S,address:D,args:$,docsPath:"/docs/contract/multicall",functionName:P});if(!r)throw W;w.push({error:W,result:void 0,status:"failure"})}}}if(w.length!==l.length)throw new pe("multicall results mismatch");return w}async function yD(t,e){const{blockNumber:n,blockTag:r="latest",blocks:s,returnFullTransactions:i,traceTransfers:o,validation:a}=e;try{const c=[];for(const h of s){const f=h.blockOverrides?yY(h.blockOverrides):void 0,p=h.calls.map(w=>{const m=w,b=m.account?Nr(m.account):void 0,v=m.abi?Ba(m):m.data,A={...m,data:m.dataSuffix?Ma([v||"0x",m.dataSuffix]):v,from:m.from??(b==null?void 0:b.address)};return om(A),ib(A)}),g=h.stateOverrides?ML(h.stateOverrides):void 0;c.push({blockOverrides:f,calls:p,stateOverrides:g})}const u=(typeof n=="bigint"?et(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:o,validation:a},u]})).map((h,f)=>({...XK(h),calls:h.calls.map((p,g)=>{var D,P;const{abi:w,args:m,functionName:b,to:v}=s[f].calls[g],A=((D=p.error)==null?void 0:D.data)??p.returnData,C=BigInt(p.gasUsed),T=(P=p.logs)==null?void 0:P.map($=>td($)),x=p.status==="0x1"?"success":"failure",N=w&&x==="success"&&A!=="0x"?am({abi:w,data:A,functionName:b}):null,S=(()=>{var G;if(x==="success")return;let $;if(((G=p.error)==null?void 0:G.data)==="0x"?$=new B_:p.error&&($=new jN(p.error)),!!$)return Rg($,{abi:w??[],address:v??"0x",args:m,functionName:b??"<unknown>"})})();return{data:A,gasUsed:C,logs:T,status:x,...x==="success"?{result:N}:{error:S}}})}))}catch(c){const l=c,u=WN(l,{});throw u instanceof G_?l:u}}function ZY(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=IL(lve(t));return n==="Bytes"?r:pY(r)}let JEe=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const ZEe={checksum:new JEe(8192)},OP=ZEe.checksum,XEe=/^0x[a-fA-F0-9]{40}$/;function XN(t,e={}){const{strict:n=!0}=e;if(!XEe.test(t))throw new n4({address:t,cause:new tCe});if(n){if(t.toLowerCase()===t)return;if(eCe(t)!==t)throw new n4({address:t,cause:new nCe})}}function eCe(t){if(OP.has(t))return OP.get(t);XN(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=ZY(hve(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return OP.set(t,s),s}function wD(t,e={}){const{strict:n=!0}=e??{};try{return XN(t,{strict:n}),!0}catch{return!1}}class n4 extends Lr{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class tCe extends Lr{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class nCe extends Lr{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function bD(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new Lr("Unable to normalize signature.");return s}function vD(t,e){const n=typeof t,r=e.type;switch(r){case"address":return wD(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>vD(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>vD(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function XY(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return XY(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?wD(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?wD(n[r],{strict:!1}):!1)return o}}function eQ(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?w8(t):t;return{...r,...n?{hash:xy(r)}:{}}}function rCe(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=bve(e,{strict:!1}),o=t.filter(l=>i?l.type==="function"||l.type==="error"?tQ(l)===YL(e,0,4):l.type==="event"?xy(l)===e:!1:"name"in l&&l.name===e);if(o.length===0)throw new ED({name:e});if(o.length===1)return{...o[0],...s?{hash:xy(o[0])}:{}};let a;for(const l of o){if(!("inputs"in l))continue;if(!r||r.length===0){if(!l.inputs||l.inputs.length===0)return{...l,...s?{hash:xy(l)}:{}};continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==r.length)continue;if(r.every((d,h)=>{const f="inputs"in l&&l.inputs[h];return f?vD(d,f):!1})){if(a&&"inputs"in a&&a.inputs){const d=XY(l.inputs,a.inputs,r);if(d)throw new iCe({abiItem:l,type:d[0]},{abiItem:a,type:d[1]})}a=l}}const c=(()=>{if(a)return a;const[l,...u]=o;return{...l,overloads:u}})();if(!c)throw new ED({name:e});return{...c,...s?{hash:xy(c)}:{}}}function tQ(t){return YL(xy(t),0,4)}function sCe(t){const e=typeof t=="string"?t:Ux(t);return bD(e)}function xy(t){return typeof t!="string"&&"hash"in t&&t.hash?t.hash:ZY(KL(sCe(t)))}class iCe extends Lr{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${bD(Ux(e.abiItem))}\`, and`,`\`${n.type}\` in \`${bD(Ux(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class ED extends Lr{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const oCe=/^(.*)\[([0-9]*)\]$/,aCe=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,nQ=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function cCe({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(rU({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function rU({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=mCe(r.type);if(s){const[i,o]=s;return uCe(n,{checksumAddress:t,length:i,parameter:{...r,type:o}})}if(r.type==="tuple")return gCe(n,{checksumAddress:t,parameter:r});if(r.type==="address")return lCe(n,{checksum:t});if(r.type==="bool")return hCe(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,o="256"]=nQ.exec(r.type)??[];return fCe(n,{signed:i,size:Number(o)})}if(r.type.startsWith("bytes"))return dCe(n,{type:r.type});if(r.type==="string")return pCe(n);throw new oQ(r.type)}function sU(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=La(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(mi(e+s,{size:32})),r.push(a),s+=La(a)):n.push(a)}return Ul(...n,...r)}function lCe(t,e){const{checksum:n=!1}=e;return XN(t,{strict:n}),{dynamic:!1,encoded:Pg(t.toLowerCase())}}function uCe(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new wCe(t);if(!i&&t.length!==r)throw new yCe({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<t.length;c++){const l=rU({checksumAddress:n,parameter:s,value:t[c]});l.dynamic&&(o=!0),a.push(l)}if(i||o){const c=sU(a);if(i){const l=mi(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?Ul(l,c):l}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:Ul(...a.map(({encoded:c})=>c))}}function dCe(t,{type:e}){const[,n]=e.split("bytes"),r=La(t);if(!n){let s=t;return r%32!==0&&(s=Og(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:Ul(Pg(mi(r,{size:32})),s)}}if(r!==Number.parseInt(n))throw new sQ({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:Og(t)}}function hCe(t){if(typeof t!="boolean")throw new Lr(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Pg(fY(t))}}function fCe(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new gY({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:mi(t,{size:32,signed:e})}}function pCe(t){const e=KL(t),n=Math.ceil(La(e)/32),r=[];for(let s=0;s<n;s++)r.push(Og(YL(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:Ul(Og(mi(La(e),{size:32})),...r)}}function gCe(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(t)?o:a.name,l=rU({checksumAddress:n,parameter:a,value:t[c]});i.push(l),l.dynamic&&(s=!0)}return{dynamic:s,encoded:s?sU(i):Ul(...i.map(({encoded:o})=>o))}}function mCe(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function rQ(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new iQ({expectedLength:t.length,givenLength:e.length});const s=cCe({checksumAddress:r,parameters:t,values:e}),i=sU(s);return i.length===0?"0x":i}function CD(t,e){if(t.length!==e.length)throw new iQ({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(CD.encode(s,i))}return Ul(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const c=r;return XN(c),Pg(c.toLowerCase(),s?32:0)}if(n==="string")return KL(r);if(n==="bytes")return r;if(n==="bool")return Pg(fY(r),s?32:1);const i=n.match(nQ);if(i){const[c,l,u="256"]=i,d=Number.parseInt(u)/8;return mi(r,{size:s?32:d,signed:l==="int"})}const o=n.match(aCe);if(o){const[c,l]=o;if(Number.parseInt(l)!==(r.length-2)/2)throw new sQ({expectedSize:Number.parseInt(l),value:r});return Og(r,s?32:0)}const a=n.match(oCe);if(a&&Array.isArray(r)){const[c,l]=a,u=[];for(let d=0;d<r.length;d++)u.push(e(l,r[d],!0));return u.length===0?"0x":Ul(...u)}throw new oQ(n)}t.encode=e})(CD||(CD={}));class yCe extends Lr{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class sQ extends Lr{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${La(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class iQ extends Lr{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class wCe extends Lr{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class oQ extends Lr{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function bCe(t,e){var s;const{bytecode:n,args:r}=e;return Ul(n,(s=t.inputs)!=null&&s.length&&(r!=null&&r.length)?rQ(t.inputs,r):"0x")}function vCe(t){return eQ(t)}function ECe(t,...e){const{overloads:n}=t,r=n?CCe([t,...n],t.name,{args:e[0]}):t,s=_Ce(r),i=e.length>0?rQ(r.inputs,e[0]):void 0;return i?Ul(s,i):s}function Om(t,e={}){return eQ(t,e)}function CCe(t,e,n){const r=rCe(t,e,n);if(r.type!=="function")throw new ED({name:e,type:"function"});return r}function _Ce(t){return tQ(t)}const ACe="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",jc="0x0000000000000000000000000000000000000000",SCe="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function xCe(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:o,traceTransfers:a,validation:c}=e,l=e.account?Nr(e.account):void 0;if(o&&!l)throw new pe("`account` is required when `traceAssetChanges` is true");const u=l?bCe(vCe("constructor(bytes, bytes)"),{bytecode:vY,args:[SCe,ECe(Om("function getBalance(address)"),[l.address])]}):void 0,d=o?await Promise.all(e.calls.map(async O=>{if(!O.data&&!O.abi)return;const{accessList:M}=await $Y(t,{account:l.address,...O,data:O.abi?Ba(O):O.data});return M.map(({address:j,storageKeys:V})=>V.length>0?j:null)})).then(O=>O.flat().filter(Boolean)):[],h=await yD(t,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:u}],stateOverrides:i},{calls:d.map((O,M)=>({abi:[Om("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:O,from:jc,nonce:M})),stateOverrides:[{address:jc,nonce:0}]}]:[],{calls:[...s,{}].map(O=>({...O,from:l==null?void 0:l.address})),stateOverrides:i},...o?[{calls:[{data:u}]},{calls:d.map((O,M)=>({abi:[Om("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:O,from:jc,nonce:M})),stateOverrides:[{address:jc,nonce:0}]},{calls:d.map((O,M)=>({to:O,abi:[Om("function decimals() returns (uint256)")],functionName:"decimals",from:jc,nonce:M})),stateOverrides:[{address:jc,nonce:0}]},{calls:d.map((O,M)=>({to:O,abi:[Om("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:jc,nonce:M})),stateOverrides:[{address:jc,nonce:0}]},{calls:d.map((O,M)=>({to:O,abi:[Om("function symbol() returns (string)")],functionName:"symbol",from:jc,nonce:M})),stateOverrides:[{address:jc,nonce:0}]}]:[]],traceTransfers:a,validation:c}),f=o?h[2]:h[0],[p,g,,w,m,b,v,A]=o?h:[],{calls:C,...T}=f,x=C.slice(0,-1)??[],N=(p==null?void 0:p.calls)??[],S=(g==null?void 0:g.calls)??[],D=[...N,...S].map(O=>O.status==="success"?Vo(O.data):null),P=(w==null?void 0:w.calls)??[],$=(m==null?void 0:m.calls)??[],G=[...P,...$].map(O=>O.status==="success"?Vo(O.data):null),W=((b==null?void 0:b.calls)??[]).map(O=>O.status==="success"?O.result:null),I=((A==null?void 0:A.calls)??[]).map(O=>O.status==="success"?O.result:null),R=((v==null?void 0:v.calls)??[]).map(O=>O.status==="success"?O.result:null),B=[];for(const[O,M]of G.entries()){const j=D[O];if(typeof M!="bigint"||typeof j!="bigint")continue;const V=W[O-1],te=I[O-1],Z=R[O-1],X=O===0?{address:ACe,decimals:18,symbol:"ETH"}:{address:d[O-1],decimals:Z||V?Number(V??1):void 0,symbol:te??void 0};B.some(ce=>ce.token.address===X.address)||B.push({token:X,value:{pre:j,post:M,diff:M-j}})}return{assetChanges:B,block:T,results:x}}let aQ=class extends SL{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Q0e(e);const r=$_(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),mw(i)}update(e){return gw(this),this.iHash.update(e),this}digestInto(e){gw(this),Pc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const cQ=(t,e,n)=>new aQ(t,e).update(n).digest();cQ.create=(t,e)=>new aQ(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ro=BigInt(0),Ai=BigInt(1),_p=BigInt(2),ICe=BigInt(3),lQ=BigInt(4),uQ=BigInt(5),dQ=BigInt(8);function Ca(t,e){const n=t%e;return n>=ro?n:e+n}function na(t,e,n){let r=t;for(;e-- >ro;)r*=r,r%=n;return r}function r4(t,e){if(t===ro)throw new Error("invert: expected non-zero number");if(e<=ro)throw new Error("invert: expected positive modulus, got "+e);let n=Ca(t,e),r=e,s=ro,i=Ai;for(;n!==ro;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Ai)throw new Error("invert: does not exist");return Ca(s,e)}function hQ(t,e){const n=(t.ORDER+Ai)/lQ,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function NCe(t,e){const n=(t.ORDER-uQ)/dQ,r=t.mul(e,_p),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,_p),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function TCe(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Ai,n=0;for(;e%_p===ro;)e/=_p,n++;let r=_p;const s=eT(t);for(;s4(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return hQ;let i=s.pow(r,e);const o=(e+Ai)/_p;return function(c,l){if(c.is0(l))return l;if(s4(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,i),h=c.pow(l,e),f=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let p=1,g=c.sqr(h);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===u)throw new Error("Cannot find square root");const w=Ai<<BigInt(u-p-1),m=c.pow(d,w);u=p,d=c.sqr(m),h=c.mul(h,d),f=c.mul(f,m)}return f}}function RCe(t){return t%lQ===ICe?hQ:t%dQ===uQ?NCe:TCe(t)}const PCe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function OCe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=PCe.reduce((r,s)=>(r[s]="function",r),e);return qL(t,n),t}function kCe(t,e,n){if(n<ro)throw new Error("invalid exponent, negatives unsupported");if(n===ro)return t.ONE;if(n===Ai)return e;let r=t.ONE,s=e;for(;n>ro;)n&Ai&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Ai;return r}function fQ(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function s4(t,e){const n=(t.ORDER-Ai)/_p,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function DCe(t,e){e!==void 0&&eC(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function eT(t,e,n=!1,r={}){if(t<=ro)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=DCe(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:VN(o),ZERO:ro,ONE:Ai,create:u=>Ca(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return ro<=u&&u<t},is0:u=>u===ro,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&Ai)===Ai,neg:u=>Ca(-u,t),eql:(u,d)=>u===d,sqr:u=>Ca(u*u,t),add:(u,d)=>Ca(u+d,t),sub:(u,d)=>Ca(u-d,t),mul:(u,d)=>Ca(u*d,t),pow:(u,d)=>kCe(l,u,d),div:(u,d)=>Ca(u*r4(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>r4(u,t),sqrt:i||(u=>(c||(c=RCe(t)),c(l,u))),toBytes:u=>n?uY(u,a):GL(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?lY(u):qN(u)},invertBatch:u=>fQ(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function pQ(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function gQ(t){const e=pQ(t);return e+Math.ceil(e/2)}function MCe(t,e,n=!1){const r=t.length,s=pQ(e),i=gQ(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?lY(t):qN(t),a=Ca(o,e-Ai)+Ai;return n?uY(a,s):GL(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Cw=BigInt(0),Ap=BigInt(1);function rE(t,e){const n=e.negate();return t?n:e}function LCe(t,e,n){const r=o=>o.pz,s=fQ(t.Fp,n.map(r));return n.map((o,a)=>o.toAffine(s[a])).map(t.fromAffine)}function mQ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function kP(t,e){mQ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=VN(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function i4(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Ap);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function UCe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function BCe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const DP=new WeakMap,yQ=new WeakMap;function MP(t){return yQ.get(t)||1}function o4(t){if(t!==Cw)throw new Error("invalid wNAF")}function $Ce(t,e){return{constTimeNegate:rE,hasPrecomputes(n){return MP(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Cw;)r&Ap&&(s=s.add(i)),i=i.double(),r>>=Ap;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=kP(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=kP(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=i4(s,c,a);s=l,d?o=o.add(rE(f,r[p])):i=i.add(rE(h,r[u]))}return o4(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=kP(n,e);for(let a=0;a<o.windows&&s!==Cw;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=i4(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return o4(s),i},getPrecomputes(n,r,s){let i=DP.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),DP.set(r,i))),i},wNAFCached(n,r,s){const i=MP(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=MP(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){mQ(r,e),yQ.set(n,r),DP.delete(n)}}}function FCe(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>Cw||r>Cw;)n&Ap&&(i=i.add(s)),r&Ap&&(o=o.add(s)),s=s.double(),n>>=Ap,r>>=Ap;return{p1:i,p2:o}}function jCe(t,e,n,r){UCe(n,t),BCe(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=Zbe(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=VN(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const w=r[g],m=Number(w>>BigInt(f)&l);u[m]=u[m].add(n[g])}let p=o;for(let g=u.length-1,w=o;g>0;g--)w=w.add(u[g]),p=p.add(w);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function a4(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return OCe(e),e}else return eT(t)}function WCe(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>Cw))throw new Error(`CURVE.${a} must be positive bigint`)}const r=a4(e.p,n.Fp),s=a4(e.n,n.Fn),o=["Gx","Gy","a","b"];for(const a of o)if(!r.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function c4(t){t.lowS!==void 0&&jx("lowS",t.lowS),t.prehash!==void 0&&jx("prehash",t.prehash)}class zCe extends Error{constructor(e=""){super(e)}}const pu={Err:zCe,_tlv:{encode:(t,e)=>{const{Err:n}=pu;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=oA(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?oA(s.length/2|128):"";return oA(t)+i+s+e},decode(t,e){const{Err:n}=pu;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=pu;if(t<sE)throw new e("integer: negative integers are not allowed");let n=oA(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=pu;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return qN(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=pu,s=pa("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=pu,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},sE=BigInt(0),iE=BigInt(1),HCe=BigInt(2),uA=BigInt(3),GCe=BigInt(4);function qCe(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function wQ(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=pa("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function VCe(t,e={}){const{Fp:n,Fn:r}=WCe("weierstrass",t,e),{h:s,n:i}=t;qL(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(N,S,D){const{x:P,y:$}=S.toAffine(),G=n.toBytes(P);if(jx("isCompressed",D),D){a();const W=!n.isOdd($);return vp(bQ(W),G)}else return vp(Uint8Array.of(4),G,n.toBytes($))}function l(N){Pc(N);const S=n.BYTES,D=S+1,P=2*S+1,$=N.length,G=N[0],W=N.subarray(1);if($===D&&(G===2||G===3)){const I=n.fromBytes(W);if(!n.isValid(I))throw new Error("bad point: is not on curve, wrong x");const R=h(I);let B;try{B=n.sqrt(R)}catch(j){const V=j instanceof Error?": "+j.message:"";throw new Error("bad point: is not on curve, sqrt error"+V)}a();const O=n.isOdd(B);return(G&1)===1!==O&&(B=n.neg(B)),{x:I,y:B}}else if($===P&&G===4){const I=n.fromBytes(W.subarray(S*0,S*1)),R=n.fromBytes(W.subarray(S*1,S*2));if(!f(I,R))throw new Error("bad point: is not on curve");return{x:I,y:R}}else throw new Error(`bad point: got length ${$}, expected compressed=${D} or uncompressed=${P}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=qCe(n,t.a,t.b);function f(N,S){const D=n.sqr(S),P=h(N);return n.eql(D,P)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,uA),GCe),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function w(N,S,D=!1){if(!n.isValid(S)||D&&n.is0(S))throw new Error(`bad point coordinate ${N}`);return S}function m(N){if(!(N instanceof C))throw new Error("ProjectivePoint expected")}const b=z8((N,S)=>{const{px:D,py:P,pz:$}=N;if(n.eql($,n.ONE))return{x:D,y:P};const G=N.is0();S==null&&(S=G?n.ONE:n.inv($));const W=n.mul(D,S),I=n.mul(P,S),R=n.mul($,S);if(G)return{x:n.ZERO,y:n.ZERO};if(!n.eql(R,n.ONE))throw new Error("invZ was invalid");return{x:W,y:I}}),v=z8(N=>{if(N.is0()){if(e.allowInfinityPoint&&!n.is0(N.py))return;throw new Error("bad point: ZERO")}const{x:S,y:D}=N.toAffine();if(!n.isValid(S)||!n.isValid(D))throw new Error("bad point: x or y not field elements");if(!f(S,D))throw new Error("bad point: equation left != right");if(!N.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function A(N,S,D,P,$){return D=new C(n.mul(D.px,N),D.py,D.pz),S=rE(P,S),D=rE($,D),S.add(D)}class C{constructor(S,D,P){this.px=w("x",S),this.py=w("y",D,!0),this.pz=w("z",P),Object.freeze(this)}static fromAffine(S){const{x:D,y:P}=S||{};if(!S||!n.isValid(D)||!n.isValid(P))throw new Error("invalid affine point");if(S instanceof C)throw new Error("projective point not allowed");return n.is0(D)&&n.is0(P)?C.ZERO:new C(D,P,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(S){return LCe(C,"pz",S)}static fromBytes(S){return Pc(S),C.fromHex(S)}static fromHex(S){const D=C.fromAffine(d(pa("pointHex",S)));return D.assertValidity(),D}static fromPrivateKey(S){const D=wQ(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return C.BASE.multiply(D(S))}static msm(S,D){return jCe(C,r,S,D)}precompute(S=8,D=!0){return x.setWindowSize(this,S),D||this.multiply(uA),this}_setWindowSize(S){this.precompute(S)}assertValidity(){v(this)}hasEvenY(){const{y:S}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(S)}equals(S){m(S);const{px:D,py:P,pz:$}=this,{px:G,py:W,pz:I}=S,R=n.eql(n.mul(D,I),n.mul(G,$)),B=n.eql(n.mul(P,I),n.mul(W,$));return R&&B}negate(){return new C(this.px,n.neg(this.py),this.pz)}double(){const{a:S,b:D}=t,P=n.mul(D,uA),{px:$,py:G,pz:W}=this;let I=n.ZERO,R=n.ZERO,B=n.ZERO,O=n.mul($,$),M=n.mul(G,G),j=n.mul(W,W),V=n.mul($,G);return V=n.add(V,V),B=n.mul($,W),B=n.add(B,B),I=n.mul(S,B),R=n.mul(P,j),R=n.add(I,R),I=n.sub(M,R),R=n.add(M,R),R=n.mul(I,R),I=n.mul(V,I),B=n.mul(P,B),j=n.mul(S,j),V=n.sub(O,j),V=n.mul(S,V),V=n.add(V,B),B=n.add(O,O),O=n.add(B,O),O=n.add(O,j),O=n.mul(O,V),R=n.add(R,O),j=n.mul(G,W),j=n.add(j,j),O=n.mul(j,V),I=n.sub(I,O),B=n.mul(j,M),B=n.add(B,B),B=n.add(B,B),new C(I,R,B)}add(S){m(S);const{px:D,py:P,pz:$}=this,{px:G,py:W,pz:I}=S;let R=n.ZERO,B=n.ZERO,O=n.ZERO;const M=t.a,j=n.mul(t.b,uA);let V=n.mul(D,G),te=n.mul(P,W),Z=n.mul($,I),X=n.add(D,P),ce=n.add(G,W);X=n.mul(X,ce),ce=n.add(V,te),X=n.sub(X,ce),ce=n.add(D,$);let ge=n.add(G,I);return ce=n.mul(ce,ge),ge=n.add(V,Z),ce=n.sub(ce,ge),ge=n.add(P,$),R=n.add(W,I),ge=n.mul(ge,R),R=n.add(te,Z),ge=n.sub(ge,R),O=n.mul(M,ce),R=n.mul(j,Z),O=n.add(R,O),R=n.sub(te,O),O=n.add(te,O),B=n.mul(R,O),te=n.add(V,V),te=n.add(te,V),Z=n.mul(M,Z),ce=n.mul(j,ce),te=n.add(te,Z),Z=n.sub(V,Z),Z=n.mul(M,Z),ce=n.add(ce,Z),V=n.mul(te,ce),B=n.add(B,V),V=n.mul(ge,ce),R=n.mul(X,R),R=n.sub(R,V),V=n.mul(X,te),O=n.mul(ge,O),O=n.add(O,V),new C(R,B,O)}subtract(S){return this.add(S.negate())}is0(){return this.equals(C.ZERO)}multiply(S){const{endo:D}=e;if(!r.isValidNot0(S))throw new Error("invalid scalar: out of range");let P,$;const G=W=>x.wNAFCached(this,W,C.normalizeZ);if(D){const{k1neg:W,k1:I,k2neg:R,k2:B}=D.splitScalar(S),{p:O,f:M}=G(I),{p:j,f:V}=G(B);$=M.add(V),P=A(D.beta,O,j,W,R)}else{const{p:W,f:I}=G(S);P=W,$=I}return C.normalizeZ([P,$])[0]}multiplyUnsafe(S){const{endo:D}=e,P=this;if(!r.isValid(S))throw new Error("invalid scalar: out of range");if(S===sE||P.is0())return C.ZERO;if(S===iE)return P;if(x.hasPrecomputes(this))return this.multiply(S);if(D){const{k1neg:$,k1:G,k2neg:W,k2:I}=D.splitScalar(S),{p1:R,p2:B}=FCe(C,P,G,I);return A(D.beta,R,B,$,W)}else return x.wNAFCachedUnsafe(P,S)}multiplyAndAddUnsafe(S,D,P){const $=this.multiplyUnsafe(D).add(S.multiplyUnsafe(P));return $.is0()?void 0:$}toAffine(S){return b(this,S)}isTorsionFree(){const{isTorsionFree:S}=e;return s===iE?!0:S?S(C,this):x.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:S}=e;return s===iE?this:S?S(C,this):this.multiplyUnsafe(s)}toBytes(S=!0){return jx("isCompressed",S),this.assertValidity(),u(C,this,S)}toRawBytes(S=!0){return this.toBytes(S)}toHex(S=!0){return tC(this.toBytes(S))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}C.BASE=new C(t.Gx,t.Gy,n.ONE),C.ZERO=new C(n.ZERO,n.ONE,n.ZERO),C.Fp=n,C.Fn=r;const T=r.BITS,x=$Ce(C,e.endo?Math.ceil(T/2):T);return C}function bQ(t){return Uint8Array.of(t?2:3)}function KCe(t,e,n={}){qL(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||swe,s=e.hmac||((P,...$)=>cQ(e.hash,P,vp(...$))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(P){const $=a>>iE;return P>$}function u(P){return l(P)?o.neg(P):P}function d(P,$){if(!o.isValidNot0($))throw new Error(`invalid signature ${P}: out of range 1..CURVE.n`)}class h{constructor($,G,W){d("r",$),d("s",G),this.r=$,this.s=G,W!=null&&(this.recovery=W),Object.freeze(this)}static fromCompact($){const G=o.BYTES,W=pa("compactSignature",$,G*2);return new h(o.fromBytes(W.subarray(0,G)),o.fromBytes(W.subarray(G,G*2)))}static fromDER($){const{r:G,s:W}=pu.toSig(pa("DER",$));return new h(G,W)}assertValidity(){}addRecoveryBit($){return new h(this.r,this.s,$)}recoverPublicKey($){const G=i.ORDER,{r:W,s:I,recovery:R}=this;if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");if(a*HCe<G&&R>1)throw new Error("recovery id is ambiguous for h>1 curve");const O=R===2||R===3?W+a:W;if(!i.isValid(O))throw new Error("recovery id 2 or 3 invalid");const M=i.toBytes(O),j=t.fromHex(vp(bQ((R&1)===0),M)),V=o.inv(O),te=v(pa("msgHash",$)),Z=o.create(-te*V),X=o.create(I*V),ce=t.BASE.multiplyUnsafe(Z).add(j.multiplyUnsafe(X));if(ce.is0())throw new Error("point at infinify");return ce.assertValidity(),ce}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes($){if($==="compact")return vp(o.toBytes(this.r),o.toBytes(this.s));if($==="der")return AL(pu.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return tC(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return tC(this.toBytes("compact"))}}const f=wQ(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(P){try{return f(P),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const P=a;return MCe(r(gQ(P)),P)},precompute(P=8,$=t.BASE){return $.precompute(P,!1)}};function g(P,$=!0){return t.fromPrivateKey(P).toBytes($)}function w(P){if(typeof P=="bigint")return!1;if(P instanceof t)return!0;const G=pa("key",P).length,W=i.BYTES,I=W+1,R=2*W+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===I))return G===I||G===R}function m(P,$,G=!0){if(w(P)===!0)throw new Error("first arg must be private key");if(w($)===!1)throw new Error("second arg must be public key");return t.fromHex($).multiply(f(P)).toBytes(G)}const b=e.bits2int||function(P){if(P.length>8192)throw new Error("input is too large");const $=qN(P),G=P.length*8-c;return G>0?$>>BigInt(G):$},v=e.bits2int_modN||function(P){return o.create(b(P))},A=VN(c);function C(P){return Jbe("num < 2^"+c,P,sE,A),o.toBytes(P)}function T(P,$,G=x){if(["recovered","canonical"].some(X=>X in G))throw new Error("sign() legacy options not supported");const{hash:W}=e;let{lowS:I,prehash:R,extraEntropy:B}=G;I==null&&(I=!0),P=pa("msgHash",P),c4(G),R&&(P=pa("prehashed msgHash",W(P)));const O=v(P),M=f($),j=[C(M),C(O)];if(B!=null&&B!==!1){const X=B===!0?r(i.BYTES):B;j.push(pa("extraEntropy",X))}const V=vp(...j),te=O;function Z(X){const ce=b(X);if(!o.isValidNot0(ce))return;const ge=o.inv(ce),Me=t.BASE.multiply(ce).toAffine(),it=o.create(Me.x);if(it===sE)return;const Je=o.create(ge*o.create(te+it*M));if(Je===sE)return;let bt=(Me.x===it?0:2)|Number(Me.y&iE),Nt=Je;return I&&l(Je)&&(Nt=u(Je),bt^=1),new h(it,Nt,bt)}return{seed:V,k2sig:Z}}const x={lowS:e.lowS,prehash:!1},N={lowS:e.lowS,prehash:!1};function S(P,$,G=x){const{seed:W,k2sig:I}=T(P,$,G);return Xbe(e.hash.outputLen,o.BYTES,s)(W,I)}t.BASE.precompute(8);function D(P,$,G,W=N){const I=P;$=pa("msgHash",$),G=pa("publicKey",G),c4(W);const{lowS:R,prehash:B,format:O}=W;if("strict"in W)throw new Error("options.strict was renamed to lowS");if(O!==void 0&&!["compact","der","js"].includes(O))throw new Error('format must be "compact", "der" or "js"');const M=typeof I=="string"||_L(I),j=!M&&!O&&typeof I=="object"&&I!==null&&typeof I.r=="bigint"&&typeof I.s=="bigint";if(!M&&!j)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let V,te;try{if(j)if(O===void 0||O==="js")V=new h(I.r,I.s);else throw new Error("invalid format");if(M){try{O!=="compact"&&(V=h.fromDER(I))}catch(Nt){if(!(Nt instanceof pu.Err))throw Nt}!V&&O!=="der"&&(V=h.fromCompact(I))}te=t.fromHex(G)}catch{return!1}if(!V||R&&V.hasHighS())return!1;B&&($=e.hash($));const{r:Z,s:X}=V,ce=v($),ge=o.inv(X),Me=o.create(ce*ge),it=o.create(Z*ge),Je=t.BASE.multiplyUnsafe(Me).add(te.multiplyUnsafe(it));return Je.is0()?!1:o.create(Je.x)===Z}return Object.freeze({getPublicKey:g,getSharedSecret:m,sign:S,verify:D,utils:p,Point:t,Signature:h})}function YCe(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=eT(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function QCe(t){const{CURVE:e,curveOpts:n}=YCe(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function JCe(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function ZCe(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=QCe(t),s=VCe(e,n),i=KCe(s,r,n);return JCe(t,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function XCe(t,e){const n=r=>ZCe({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Gx={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const e_e=BigInt(1),_D=BigInt(2),l4=(t,e)=>(t+e/_D)/e;function t_e(t){const e=Gx.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=na(u,n,e)*u%e,h=na(d,n,e)*u%e,f=na(h,_D,e)*l%e,p=na(f,s,e)*f%e,g=na(p,i,e)*p%e,w=na(g,a,e)*g%e,m=na(w,c,e)*w%e,b=na(m,a,e)*g%e,v=na(b,n,e)*u%e,A=na(v,o,e)*p%e,C=na(A,r,e)*l%e,T=na(C,_D,e);if(!AD.eql(AD.sqr(T),t))throw new Error("Cannot find square root");return T}const AD=eT(Gx.p,void 0,void 0,{sqrt:t_e}),vQ=XCe({...Gx,Fp:AD,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=Gx.n,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-e_e*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=l4(i*t,e),c=l4(-r*t,e);let l=Ca(t-a*n-c*s,e),u=Ca(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},rY),n_e=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:vQ},Symbol.toStringTag,{value:"Module"}));function r_e({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new vQ.Signature(Vo(t),Vo(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?o:ka(o)}async function iU(t,e){var d,h,f;const{address:n,factory:r,factoryData:s,hash:i,signature:o,universalSignatureVerifierAddress:a=(f=(h=(d=t.chain)==null?void 0:d.contracts)==null?void 0:h.universalSignatureVerifier)==null?void 0:f.address,...c}=e,l=Ml(o)?o:typeof o=="object"&&"r"in o&&"s"in o?r_e(o):ts(o),u=await(async()=>!r&&!s||WEe(l)?l:zEe({address:r,data:s,signature:l}))();try{const p=a?{to:a,data:Ba({abi:Q8,functionName:"isValidSig",args:[n,i,u]}),...c}:{data:KN({abi:Q8,args:[n,i,u],bytecode:xve}),...c},{data:g}=await ut(t,V_,"call")(p);return B0e(g??"0x0")}catch(p){try{if(GN(Uu(n),await qK({hash:i,signature:o})))return!0}catch{}if(p instanceof HK)return!1;throw p}}async function s_e(t,{address:e,message:n,factory:r,factoryData:s,signature:i,...o}){const a=YY(n);return iU(t,{address:e,factory:r,factoryData:s,hash:a,signature:i,...o})}async function i_e(t,e){const{address:n,factory:r,factoryData:s,signature:i,message:o,primaryType:a,types:c,domain:l,...u}=e,d=DEe({message:o,primaryType:a,types:c,domain:l});return iU(t,{address:n,factory:r,factoryData:s,hash:d,signature:i,...u})}function EQ(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=Xr(["watchBlockNumber",t.uid,e,n,o]);return nd(d,{onBlockNumber:r,onError:s},h=>cb(async()=>{var f;try{const p=await ut(t,K_,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=Xr(["watchBlockNumber",t.uid,e,n]);return nd(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const m=t.transport.transports.find(b=>b.config.type==="webSocket"||b.config.type==="ipc");return m?m.value:t.transport}return t.transport})(),{unsubscribe:w}=await g.subscribe({params:["newHeads"],onData(m){var v;if(!f)return;const b=Vo((v=m.result)==null?void 0:v.number);h.onBlockNumber(b,c),c=b},onError(m){var b;(b=h.onError)==null||b.call(h,m)}});p=w,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function CQ(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=Xr(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:w,reject:m}=QL(),b=a?setTimeout(()=>{p(),f(),m(new obe({hash:n}))},a):void 0;return f=nd(c,{onReplaced:r,resolve:w,reject:m},v=>{p=ut(t,EQ,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(A){const C=x=>{clearTimeout(b),p(),x(),f()};let T=A;if(!h)try{if(d){if(e>1&&(!d.blockNumber||T-d.blockNumber+1n<e))return;C(()=>v.resolve(d));return}if(l||(h=!0,await zx(async()=>{l=await ut(t,ZN,"getTransaction")({hash:n}),l.blockNumber&&(T=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await ut(t,mD,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||T-d.blockNumber+1n<e))return;C(()=>v.resolve(d))}catch(x){if(x instanceof WK||x instanceof zK){if(!l){h=!1;return}try{u=l,h=!0;const N=await zx(()=>ut(t,Al,"getBlock")({blockNumber:T,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:P})=>P instanceof QK});h=!1;const S=N.transactions.find(({from:P,nonce:$})=>P===u.from&&$===u.nonce);if(!S||(d=await ut(t,mD,"getTransactionReceipt")({hash:S.hash}),e>1&&(!d.blockNumber||T-d.blockNumber+1n<e)))return;let D="replaced";S.to===u.to&&S.value===u.value&&S.input===u.input?D="repriced":S.from===S.to&&S.value===0n&&(D="cancelled"),C(()=>{var P;(P=v.onReplaced)==null||P.call(v,{reason:D,replacedTransaction:u,transaction:S,transactionReceipt:d}),v.resolve(d)})}catch(N){C(()=>v.reject(N))}}else C(()=>v.reject(x))}}})}),g}function o_e(t,{blockTag:e="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:o,poll:a,pollingInterval:c=t.pollingInterval}){const l=typeof a<"u"?a:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),u=o??!1;let d;return l?(()=>{const p=Xr(["watchBlocks",t.uid,e,n,r,u,c]);return nd(p,{onBlock:s,onError:i},g=>cb(async()=>{var w;try{const m=await ut(t,Al,"getBlock")({blockTag:e,includeTransactions:u});if(m.number!==null&&(d==null?void 0:d.number)!=null){if(m.number===d.number)return;if(m.number-d.number>1&&n)for(let b=(d==null?void 0:d.number)+1n;b<m.number;b++){const v=await ut(t,Al,"getBlock")({blockNumber:b,includeTransactions:u});g.onBlock(v,d),d=v}}((d==null?void 0:d.number)==null||e==="pending"&&(m==null?void 0:m.number)==null||m.number!==null&&m.number>d.number)&&(g.onBlock(m,d),d=m)}catch(m){(w=g.onError)==null||w.call(g,m)}},{emitOnBegin:r,interval:c}))})():(()=>{let p=!0,g=!0,w=()=>p=!1;return(async()=>{try{r&&ut(t,Al,"getBlock")({blockTag:e,includeTransactions:u}).then(v=>{p&&g&&(s(v,void 0),g=!1)}).catch(i);const m=(()=>{if(t.transport.type==="fallback"){const v=t.transport.transports.find(A=>A.config.type==="webSocket"||A.config.type==="ipc");return v?v.value:t.transport}return t.transport})(),{unsubscribe:b}=await m.subscribe({params:["newHeads"],async onData(v){var C;if(!p)return;const A=await ut(t,Al,"getBlock")({blockNumber:(C=v.result)==null?void 0:C.number,includeTransactions:u}).catch(()=>{});p&&(s(A,d),g=!1,d=A)},onError(v){i==null||i(v)}});w=b,p||w()}catch(m){i==null||i(m)}})(),()=>w()})()}function a_e(t,{address:e,args:n,batch:r=!0,event:s,events:i,fromBlock:o,onError:a,onLogs:c,poll:l,pollingInterval:u=t.pollingInterval,strict:d}){const h=typeof l<"u"?l:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),f=d??!1;return h?(()=>{const w=Xr(["watchEvent",e,n,r,t.uid,s,u,o]);return nd(w,{onLogs:c,onError:a},m=>{let b;o!==void 0&&(b=o-1n);let v,A=!1;const C=cb(async()=>{var T;if(!A){try{v=await ut(t,FY,"createEventFilter")({address:e,args:n,event:s,events:i,strict:f,fromBlock:o})}catch{}A=!0;return}try{let x;if(v)x=await ut(t,YN,"getFilterChanges")({filter:v});else{const N=await ut(t,K_,"getBlockNumber")({});b&&b!==N?x=await ut(t,zL,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:b+1n,toBlock:N}):x=[],b=N}if(x.length===0)return;if(r)m.onLogs(x);else for(const N of x)m.onLogs([N])}catch(x){v&&x instanceof Tg&&(A=!1),(T=m.onError)==null||T.call(m,x)}},{emitOnBegin:!0,interval:u});return async()=>{v&&await ut(t,QN,"uninstallFilter")({filter:v}),C()}})})():(()=>{let w=!0,m=()=>w=!1;return(async()=>{try{const b=(()=>{if(t.transport.type==="fallback"){const T=t.transport.transports.find(x=>x.config.type==="webSocket"||x.config.type==="ipc");return T?T.value:t.transport}return t.transport})(),v=i??(s?[s]:void 0);let A=[];v&&(A=[v.flatMap(x=>W_({abi:[x],eventName:x.name,args:n}))],s&&(A=A[0]));const{unsubscribe:C}=await b.subscribe({params:["logs",{address:e,topics:A}],onData(T){var N;if(!w)return;const x=T.result;try{const{eventName:S,args:D}=jL({abi:v??[],data:x.data,topics:x.topics,strict:f}),P=td(x,{args:D,eventName:S});c([P])}catch(S){let D,P;if(S instanceof XE||S instanceof UN){if(d)return;D=S.abiItem.name,P=(N=S.abiItem.inputs)==null?void 0:N.some(G=>!("name"in G&&G.name))}const $=td(x,{args:P?[]:{},eventName:D});c([$])}},onError(T){a==null||a(T)}});m=C,w||m()}catch(b){a==null||a(b)}})(),()=>m()})()}function _Q(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=Xr(["watchPendingTransactions",t.uid,e,i]);return nd(l,{onTransactions:r,onError:n},u=>{let d;const h=cb(async()=>{var f;try{if(!d)try{d=await ut(t,jY,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await ut(t,YN,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await ut(t,QN,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}function c_e(t){var d,h,f;const{scheme:e,statement:n,...r}=((d=t.match(l_e))==null?void 0:d.groups)??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:a,requestId:c,...l}=((h=t.match(u_e))==null?void 0:h.groups)??{},u=(f=t.split("Resources:")[1])==null?void 0:f.split(`
- `).slice(1);return{...r,...l,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...u?{resources:u}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const l_e=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,u_e=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function d_e(t){const{address:e,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!Da(r.address,{strict:!1})||e&&!GN(r.address,e))return!1}catch{return!1}return!0}async function h_e(t,e){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:a,time:c=new Date,...l}=e,u=c_e(s);if(!u.address||!d_e({address:n,domain:r,message:u,nonce:i,scheme:o,time:c}))return!1;const h=YY(s);return iU(t,{address:u.address,hash:h,signature:a,...l})}function f_e(t){return{call:e=>V_(t,e),createAccessList:e=>$Y(t,e),createBlockFilter:()=>CEe(t),createContractEventFilter:e=>UK(t,e),createEventFilter:e=>FY(t,e),createPendingTransactionFilter:()=>jY(t),estimateContractGas:e=>Vbe(t,e),estimateGas:e=>HN(t,e),getBalance:e=>FL(t,e),getBlobBaseFee:()=>_Ee(t),getBlock:e=>Al(t,e),getBlockNumber:e=>K_(t,e),getBlockTransactionCount:e=>AEe(t,e),getBytecode:e=>t4(t,e),getChainId:()=>ob(t),getCode:e=>t4(t,e),getContractEvents:e=>aY(t,e),getEip712Domain:e=>xEe(t,e),getEnsAddress:e=>aEe(t,e),getEnsAvatar:e=>vEe(t,e),getEnsName:e=>BY(t,e),getEnsResolver:e=>EEe(t,e),getEnsText:e=>UY(t,e),getFeeHistory:e=>TEe(t,e),estimateFeesPerGas:e=>Pbe(t,e),getFilterChanges:e=>YN(t,e),getFilterLogs:e=>REe(t,e),getGasPrice:()=>UL(t),getLogs:e=>zL(t,e),getProof:e=>KEe(t,e),estimateMaxPriorityFeePerGas:e=>Rbe(t,e),getStorageAt:e=>YEe(t,e),getTransaction:e=>ZN(t,e),getTransactionConfirmations:e=>QEe(t,e),getTransactionCount:e=>BL(t,e),getTransactionReceipt:e=>mD(t,e),multicall:e=>JY(t,e),prepareTransactionRequest:e=>q_(t,e),readContract:e=>Bl(t,e),sendRawTransaction:e=>JL(t,e),simulate:e=>yD(t,e),simulateBlocks:e=>yD(t,e),simulateCalls:e=>xCe(t,e),simulateContract:e=>Dve(t,e),verifyMessage:e=>s_e(t,e),verifySiweMessage:e=>h_e(t,e),verifyTypedData:e=>i_e(t,e),uninstallFilter:e=>QN(t,e),waitForTransactionReceipt:e=>CQ(t,e),watchBlocks:e=>o_e(t,e),watchBlockNumber:e=>EQ(t,e),watchContractEvent:e=>jve(t,e),watchEvent:e=>a_e(t,e),watchPendingTransactions:e=>_Q(t,e)}}async function p_e(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:et(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function g_e(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=KN({abi:n,args:r,bytecode:s});return Y_(t,{...i,...i.authorizationList?{to:null}:{},data:o})}async function m_e(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>F_(r))}async function y_e(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?Nr(n):void 0,i=r?[s==null?void 0:s.address,[et(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}async function w_e(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function AQ(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new cm({docsPath:"/docs/eip7702/prepareAuthorization"});const i=Nr(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:Nr(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await ut(t,ob,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await ut(t,BL,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&GN(o.address,i.address))&&(a.nonce+=1)),a}async function b_e(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>Uu(n))}async function v_e(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function E_e(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function C_e(t,e){const{account:n=t.account}=e;if(!n)throw new cm({docsPath:"/docs/eip7702/signAuthorization"});const r=Nr(n);if(!r.signAuthorization)throw new fS({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await AQ(t,e);return r.signAuthorization(s)}async function SQ(t,{account:e=t.account,message:n}){if(!e)throw new cm({docsPath:"/docs/actions/wallet/signMessage"});const r=Nr(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?pw(n):n.raw instanceof Uint8Array?Oa(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function __e(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new cm({docsPath:"/docs/actions/wallet/signTransaction"});const i=Nr(n);om({account:i,...e});const o=await ut(t,ob,"getChainId")({});r!==null&&AY({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||ib;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:et(o),from:i.address}]},{retryCount:0})}async function A_e(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new cm({docsPath:"/docs/actions/wallet/signTypedData"});const o=Nr(n),a={EIP712Domain:KY({domain:r}),...e.types};if(VY({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=BEe({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function S_e(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:et(e)}]},{retryCount:0})}async function x_e(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function I_e(t){return{addChain:e=>p_e(t,e),deployContract:e=>g_e(t,e),getAddresses:()=>m_e(t),getCallsStatus:e=>RY(t,e),getCapabilities:e=>y_e(t,e),getChainId:()=>ob(t),getPermissions:()=>w_e(t),prepareAuthorization:e=>AQ(t,e),prepareTransactionRequest:e=>q_(t,e),requestAddresses:()=>b_e(t),requestPermissions:e=>v_e(t,e),sendCalls:e=>zve(t,e),sendRawTransaction:e=>JL(t,e),sendTransaction:e=>Y_(t,e),showCallsStatus:e=>E_e(t,e),signAuthorization:e=>C_e(t,e),signMessage:e=>SQ(t,e),signTransaction:e=>__e(t,e),signTypedData:e=>A_e(t,e),switchChain:e=>S_e(t,e),waitForCallsStatus:e=>Hve(t,e),watchAsset:e=>x_e(t,e),writeContract:e=>xY(t,e)}}const LP={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return im(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},u4={async getMyTokensWithBalance(t){const e=Ve.state.address,n=z.state.activeCaipNetwork;if(!e||!n)return[];if(n.chainNamespace==="eip155"){const s=await this.getEIP155Balances(e,n);if(s)return this.filterLowQualityTokens(s)}const r=await mt.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(r.balances)},async getEIP155Balances(t,e){var n,r;try{const s=LP.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await yt.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await yt.walletGetAssets({account:t,chainFilter:[s]});return LP.isWalletGetAssetsResponse(o)?(o[s]||[]).map(c=>LP.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:z.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Tn=ar({tokenBalances:[],loading:!1}),N_e={state:Tn,subscribe(t){return ri(Tn,()=>t(Tn))},subscribeKey(t,e){return ii(Tn,t,e)},setToken(t){t&&(Tn.token=Sg(t))},setTokenAmount(t){Tn.sendTokenAmount=t},setReceiverAddress(t){Tn.receiverAddress=t},setReceiverProfileImageUrl(t){Tn.receiverProfileImageUrl=t},setReceiverProfileName(t){Tn.receiverProfileName=t},setNetworkBalanceInUsd(t){Tn.networkBalanceInUSD=t},setLoading(t){Tn.loading=t},async sendToken(){var t;try{switch(vn.setLoading(!0),(t=z.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await vn.sendEvmToken();return;case"solana":await vn.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{vn.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=z.state.activeChain,e=(n=Ve.state.preferredAccountTypes)==null?void 0:n[t];if(!vn.state.sendTokenAmount||!vn.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!vn.state.token)throw new Error("A token is required");(r=vn.state.token)!=null&&r.address?(hr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ls.ACCOUNT_TYPES.SMART_ACCOUNT,token:vn.state.token.address,amount:vn.state.sendTokenAmount,network:((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await vn.sendERC20Token({receiverAddress:vn.state.receiverAddress,tokenAddress:vn.state.token.address,sendTokenAmount:vn.state.sendTokenAmount,decimals:vn.state.token.quantity.decimals})):(hr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ls.ACCOUNT_TYPES.SMART_ACCOUNT,token:vn.state.token.symbol||"",amount:vn.state.sendTokenAmount,network:((i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await vn.sendNativeToken({receiverAddress:vn.state.receiverAddress,sendTokenAmount:vn.state.sendTokenAmount,decimals:vn.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Tn.loading=!0;const e=(i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=z.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=z.state.activeCaipAddress,s=r?ot.getPlainAddress(r):void 0;if(Tn.lastRetry&&!ot.isAllowedRetry(Tn.lastRetry,30*Fn.ONE_SEC_MS))return Tn.loading=!1,[];try{if(s&&e&&n){const a=await u4.getMyTokensWithBalance();return Tn.tokenBalances=a,Tn.lastRetry=void 0,a}}catch(a){Tn.lastRetry=Date.now(),t==null||t(a),mc.showError("Token Balance Unavailable")}finally{Tn.loading=!1}return[]},fetchNetworkBalance(){if(Tn.tokenBalances.length===0)return;const t=u4.mapBalancesToSwapTokens(Tn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===z.getActiveNetworkTokenAddress());e&&(Tn.networkBalanceInUSD=e?rye.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;jt.pushTransactionStack({});const e=t.receiverAddress,n=Ve.state.address,r=yt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await yt.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),hr.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=Ve.state.preferredAccountTypes)==null?void 0:i.eip155)===Ls.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=vn.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=yt._getClient())==null||c.updateBalance("eip155"),vn.resetSend()},async sendERC20Token(t){jt.pushTransactionStack({onSuccess(){jt.replace("Account")}});const e=yt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Ve.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=ot.getPlainAddress(t.tokenAddress);await yt.writeContract({fromAddress:Ve.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:aye.getERC20Abi(n),chainNamespace:"eip155"}),vn.resetSend()}},async sendSolanaToken(){var t;if(!vn.state.sendTokenAmount||!vn.state.receiverAddress)throw new Error("An amount and receiver address are required");jt.pushTransactionStack({onSuccess(){jt.replace("Account")}}),await yt.sendTransaction({chainNamespace:"solana",to:vn.state.receiverAddress,value:vn.state.sendTokenAmount}),(t=yt._getClient())==null||t.updateBalance("solana"),vn.resetSend()},resetSend(){Tn.token=void 0,Tn.sendTokenAmount=void 0,Tn.receiverAddress=void 0,Tn.receiverProfileImageUrl=void 0,Tn.receiverProfileName=void 0,Tn.loading=!1,Tn.tokenBalances=[]}},vn=Zo(N_e),UP={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},dA={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Pe=ar({chains:Kme(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),T_e={state:Pe,subscribe(t){return ri(Pe,()=>{t(Pe)})},subscribeKey(t,e){return ii(Pe,t,e)},subscribeChainProp(t,e,n){let r;return ri(Pe.chains,()=>{var i;const s=n||Pe.activeChain;if(s){const o=(i=Pe.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=Ke.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=we.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Pe.noAdapters=!0),Pe.noAdapters||(Pe.activeChain=a==null?void 0:a.namespace,Pe.activeCaipNetwork=i,z.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Pe.activeChain&&Tl.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);z.state.chains.set(u,{namespace:u,networkState:ar({...dA,caipNetwork:d==null?void 0:d[0]}),accountState:ar(UP),caipNetworks:d??[],...n}),z.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Pe.activeChain===t){const r=Array.from(Pe.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&z.setActiveCaipNetwork(s)}}Pe.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){Pe.chains.set(t.namespace,{namespace:t.namespace,networkState:{...dA,caipNetwork:r[0]},accountState:UP,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),z.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Pe.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Pe.chains.set(t.chainNamespace,{...e,caipNetworks:r}),z.setRequestedCaipNetworks(r,t.chainNamespace),$e.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Pe.chains.get(t);if(n){const o=((r=Pe.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&z.setActiveCaipNetwork(n.caipNetworks[0]),Pe.chains.set(t,{...n,caipNetworks:a}),z.setRequestedCaipNetworks(a||[],t),a.length===0&&$e.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Pe.chains.get(t);n&&(n.networkState={...n.networkState||dA,...e},Pe.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Pe.chains.get(t);if(r){const s={...r.accountState||UP,...e};Pe.chains.set(t,{...r,accountState:s}),(Pe.chains.size===1||Pe.activeChain===t)&&(e.caipAddress&&(Pe.activeCaipAddress=e.caipAddress),Ve.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Pe.chains.get(t);if(n){const r={...n.networkState||dA,...e};Pe.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){z.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&$e.removeConnectorId(n)},setActiveNamespace(t){var r,s;Pe.activeChain=t;const e=t?Pe.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Pe.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Pe.activeCaipNetwork=n,z.setChainNetworkData(t,{caipNetwork:n}),Ke.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Tl.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Pe.activeChain!==t.chainNamespace&&z.setIsSwitchingNamespace(!0);const e=Pe.chains.get(t.chainNamespace);Pe.activeChain=t.chainNamespace,Pe.activeCaipNetwork=t,z.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Pe.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Pe.activeCaipAddress=void 0,z.setAccountProp("caipAddress",Pe.activeCaipAddress,t.chainNamespace),e&&Ve.replaceState(e.accountState),vn.resetSend(),Tl.set({activeChain:Pe.activeChain,selectedNetworkId:(i=Pe.activeCaipNetwork)==null?void 0:i.caipNetworkId}),Ke.setActiveCaipNetworkId(t.caipNetworkId),!z.checkIfSupportedNetwork(t.chainNamespace)&&we.state.enableNetworkSwitch&&!we.state.allowUnsupportedChain&&!yt.state.wcBasic&&z.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Pe.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==z.state.activeChain,n=(s=z.getNetworkData(t))==null?void 0:s.caipNetwork,r=z.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await z.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=z.state.chains.get(z.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=Pe.activeCaipNetwork)==null?void 0:o.id)})),r=z.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&ms.close()}catch{jt.goBack()}hr.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Pe.activeChain,n=Pe.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Pe.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Pe.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Pe.activeChain;if(e&&(n=e),!n)return;const r=(s=Pe.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Pe.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Pe.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return ot.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Pe.chains.forEach(e=>{const n=z.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){z.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=z.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));$e.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Pe.chains.forEach(e=>{const n=z.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return Pe.activeCaipNetwork},getActiveCaipAddress(){return Pe.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Pe.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=z.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());z.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Pe.activeCaipNetwork,r=z.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Pe.activeChain)return!0;const e=z.getRequestedCaipNetworks(Pe.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){z.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=HV.caipNetworkIdToNumber((r=Pe.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Pe.activeChain;if(!e||!t)return!1;const n=z.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},getActiveNetworkTokenAddress(){var r,s;const t=((r=Pe.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=Pe.activeCaipNetwork)==null?void 0:s.id)||1,n=Fn.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`},showUnsupportedChainUI(){ms.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Pe.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&Fn.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){z.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");Pe.activeCaipAddress=void 0,z.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),$e.removeConnectorId(e)},setIsSwitchingNamespace(t){Pe.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Pe.chains.forEach(s=>{Fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Pe.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=z.state.chains.get(t))==null?void 0:e.accountState:Ve.state},getNetworkData(t){var n;const e=t||Pe.activeChain;if(e)return(n=z.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=z.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=$e.state.filterByNamespace;return(t?[Pe.chains.get(t)]:Array.from(Pe.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?z.getRequestedCaipNetworks(t):z.getAllRequestedCaipNetworks()}},z=Zo(T_e),R_e={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},xQ=ot.getBlockchainApiUrl(),ki=ar({clientId:null,api:new U_({baseUrl:xQ,clientId:null}),supportedChains:{http:[],ws:[]}}),mt={state:ki,async get(t){const{st:e,sv:n}=mt.getSdkProperties(),r=we.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return ki.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=we.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{ki.supportedChains.http.length||await mt.getSupportedNetworks()}catch{return!1}return ki.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await mt.get({path:"v1/supported-chains"});return ki.supportedChains=t,t}catch{return ki.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await mt.isNetworkSupported(e))return{avatar:"",name:""};const r=Ke.getIdentityFromCacheForAddress(t);if(r)return r;const s=await mt.get({path:`/v1/identity/${t}`,params:{sender:z.state.activeCaipAddress?ot.getPlainAddress(z.state.activeCaipAddress):void 0}});return Ke.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await mt.isNetworkSupported((a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?mt.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await mt.isNetworkSupported((o=z.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?mt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await mt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?mt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await mt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?ki.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:we.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await mt.isNetworkSupported((r=z.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?mt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=mt.getSdkProperties();if(!await mt.isNetworkSupported((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return mt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await mt.isNetworkSupported((o=z.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return ki.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Fn.CONVERT_SLIPPAGE_TOLERANCE},projectId:we.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=mt.getSdkProperties();if(!await mt.isNetworkSupported((o=z.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return mt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=mt.getSdkProperties();if(!await mt.isNetworkSupported((l=z.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return mc.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Ke.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await mt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return Ke.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await mt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?mt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await mt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?mt.get({path:`/v1/profile/reverse/${t}`,params:{sender:Ve.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await mt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?mt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await mt.isNetworkSupported((i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?ki.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await mt.isNetworkSupported((a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await ki.api.post({path:"/v1/generators/onrampurl",params:{projectId:we.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await mt.isNetworkSupported((e=z.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await mt.get({path:"/v1/onramp/options"})}catch{return R_e}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await mt.isNetworkSupported((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await ki.api.post({path:"/v1/onramp/quote",params:{projectId:we.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await mt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?mt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await mt.isNetworkSupported((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?ki.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:we.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){ki.clientId=t,ki.api=new U_({baseUrl:xQ,clientId:t})}},ra=ar({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),P_e={state:ra,replaceState(t){t&&Object.assign(ra,Sg(t))},subscribe(t){return z.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return z.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){z.setAccountProp("status",t,e)},getCaipAddress(t){return z.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?ot.getPlainAddress(t):void 0;e===z.state.activeChain&&(z.state.activeCaipAddress=t),z.setAccountProp("caipAddress",t,e),z.setAccountProp("address",n,e)},setBalance(t,e,n){z.setAccountProp("balance",t,n),z.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){z.setAccountProp("profileName",t,e)},setProfileImage(t,e){z.setAccountProp("profileImage",t,e)},setUser(t,e){z.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){z.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){z.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){z.setAccountProp("currentTab",t,z.state.activeChain)},setTokenBalance(t,e){t&&z.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){z.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){z.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=z.getAccountProp("addressLabels",n)||new Map;r.set(t,e),z.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=z.getAccountProp("addressLabels",e)||new Map;n.delete(t),z.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){z.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){z.setAccountProp("preferredAccountTypes",{...ra.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){ra.preferredAccountTypes=t},setSocialProvider(t,e){t&&z.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){z.setAccountProp("socialWindow",t?Sg(t):void 0,e)},setFarcasterUrl(t,e){z.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;ra.balanceLoading=!0;const e=(i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=z.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=z.state.activeCaipAddress,s=r?ot.getPlainAddress(r):void 0;if(ra.lastRetry&&!ot.isAllowedRetry(ra.lastRetry,30*Fn.ONE_SEC_MS))return ra.balanceLoading=!1,[];try{if(s&&e&&n){const c=(await mt.getBalance(s,e)).balances.filter(l=>l.quantity.decimals!=="0");return Ve.setTokenBalance(c,n),ra.lastRetry=void 0,ra.balanceLoading=!1,c}}catch(a){ra.lastRetry=Date.now(),t==null||t(a),mc.showError("Token Balance Unavailable")}finally{ra.balanceLoading=!1}return[]},resetAccount(t){z.resetAccount(t)}},Ve=Zo(P_e),O_e={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=z.state.activeCaipNetwork,r=jt.state.data;if(t.id===(n==null?void 0:n.id))return;const i=Ve.getCaipAddress(z.state.activeChain),o=t.chainNamespace!==z.state.activeChain,a=Ve.getCaipAddress(t.chainNamespace),l=$e.getConnectorId(z.state.activeChain)===Fe.CONNECTOR_ID.AUTH,u=Fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?jt.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?jt.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):jt.push("SwitchNetwork",{...r,network:t})}},Di=ar({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),k_e={state:Di,subscribe(t){return ri(Di,()=>t(Di))},subscribeKey(t,e){return ii(Di,t,e)},async open(t){var o,a;const e=Ve.state.status==="connected",n=t==null?void 0:t.namespace,r=z.state.activeChain,s=n&&n!==r,i=(o=z.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(yt.state.wcBasic?at.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await at.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),$e.setFilterByNamespace(t==null?void 0:t.namespace),ms.setLoading(!0,n),n&&s){const c=((a=z.getNetworkData(n))==null?void 0:a.caipNetwork)||z.getRequestedCaipNetworks(n)[0];c&&O_e.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=z.state.noAdapters;we.state.manualWCControl||c&&!i?ot.isMobile()?jt.reset("AllWallets"):jt.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?jt.reset(t.view,t.data):i?jt.reset("Account"):jt.reset("Connect")}Di.open=!0,Tl.set({open:!0}),hr.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=we.state.enableEmbedded,e=!!z.state.activeCaipAddress;Di.open&&hr.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Di.open=!1,jt.reset("Connect"),ms.clearLoading(),t?e?jt.replace("Account"):jt.push("Connect"):Tl.set({open:!1}),yt.resetUri()},setLoading(t,e){e&&Di.loadingNamespaceMap.set(e,t),Di.loading=t,Tl.set({loading:t})},clearLoading(){Di.loadingNamespaceMap.clear(),Di.loading=!1},shake(){Di.shake||(Di.shake=!0,setTimeout(()=>{Di.shake=!1},500))}},ms=Zo(k_e),oE={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},SD={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},D_e={providers:VV,selectedProvider:null,error:null,purchaseCurrency:oE,paymentCurrency:SD,purchaseCurrencies:[oE],paymentCurrencies:[],quotesLoading:!1},ln=ar(D_e),M_e={state:ln,subscribe(t){return ri(ln,()=>t(ln))},subscribeKey(t,e){return ii(ln,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=z.state.activeChain===Fe.CHAIN.SOLANA?"SOL":"USDC",n=Ve.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",cye),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",we.state.projectId),ln.selectedProvider={...t,url:r.toString()}}else ln.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=VV.filter(r=>e.includes(r.name));ln.providers=n}else ln.providers=[]},setPurchaseCurrency(t){ln.purchaseCurrency=t},setPaymentCurrency(t){ln.paymentCurrency=t},setPurchaseAmount(t){xD.state.purchaseAmount=t},setPaymentAmount(t){xD.state.paymentAmount=t},async getAvailableCurrencies(){const t=await mt.getOnrampOptions();ln.purchaseCurrencies=t.purchaseCurrencies,ln.paymentCurrencies=t.paymentCurrencies,ln.paymentCurrency=t.paymentCurrencies[0]||SD,ln.purchaseCurrency=t.purchaseCurrencies[0]||oE,await at.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await at.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;ln.quotesLoading=!0;try{const n=await mt.getOnrampQuote({purchaseCurrency:ln.purchaseCurrency,paymentCurrency:ln.paymentCurrency,amount:((t=ln.paymentAmount)==null?void 0:t.toString())||"0",network:(e=ln.purchaseCurrency)==null?void 0:e.symbol});return ln.quotesLoading=!1,ln.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return ln.error=n.message,ln.quotesLoading=!1,null}finally{ln.quotesLoading=!1}},resetState(){ln.selectedProvider=null,ln.error=null,ln.purchaseCurrency=oE,ln.paymentCurrency=SD,ln.purchaseCurrencies=[oE],ln.paymentCurrencies=[],ln.paymentAmount=void 0,ln.purchaseAmount=void 0,ln.quotesLoading=!1}},xD=Zo(M_e),d4=2147483648,L_e={convertEVMChainIdToCoinType(t){if(t>=d4)throw new Error("Invalid chainId");return(d4|t)>>>0}},sa=ar({suggestions:[],loading:!1}),U_e={state:sa,subscribe(t){return ri(sa,()=>t(sa))},subscribeKey(t,e){return ii(sa,t,e)},async resolveName(t){var e,n;try{return await mt.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await mt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{sa.loading=!0,sa.suggestions=[];const e=await mt.getEnsNameSuggestions(t);return sa.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],sa.suggestions}catch(e){const n=aE.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{sa.loading=!1}},async getNamesForAddress(t){try{if(!z.state.activeCaipNetwork)return[];const n=Ke.getEnsFromCacheForAddress(t);if(n)return n;const r=await mt.reverseLookupEnsName({address:t});return Ke.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=aE.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=z.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=Ve.state.address,r=$e.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");sa.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});jt.pushTransactionStack({onCancel(){jt.replace("RegisterAccountName")}});const i=await yt.signMessage(s);sa.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=L_e.convertEVMChainIdToCoinType(Number(o));await mt.registerEnsName({coinType:a,address:n,signature:i,message:s}),Ve.setProfileName(t,e.chainNamespace),jt.replace("RegisterAccountNameSuccess")}catch(s){const i=aE.parseEnsApiError(s,`Error registering name ${t}`);throw jt.replace("RegisterAccountName"),new Error(i)}finally{sa.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},aE=Zo(U_e);var oU={exports:{}},Gy=typeof Reflect=="object"?Reflect:null,h4=Gy&&typeof Gy.apply=="function"?Gy.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},gS;Gy&&typeof Gy.ownKeys=="function"?gS=Gy.ownKeys:Object.getOwnPropertySymbols?gS=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:gS=function(e){return Object.getOwnPropertyNames(e)};function B_e(t){console&&console.warn&&console.warn(t)}var IQ=Number.isNaN||function(e){return e!==e};function Wn(){Wn.init.call(this)}oU.exports=Wn;oU.exports.once=W_e;Wn.EventEmitter=Wn;Wn.prototype._events=void 0;Wn.prototype._eventsCount=0;Wn.prototype._maxListeners=void 0;var f4=10;function tT(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Wn,"defaultMaxListeners",{enumerable:!0,get:function(){return f4},set:function(t){if(typeof t!="number"||t<0||IQ(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");f4=t}});Wn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Wn.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||IQ(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function NQ(t){return t._maxListeners===void 0?Wn.defaultMaxListeners:t._maxListeners}Wn.prototype.getMaxListeners=function(){return NQ(this)};Wn.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")h4(c,this,n);else for(var l=c.length,u=kQ(c,l),r=0;r<l;++r)h4(u[r],this,n);return!0};function TQ(t,e,n,r){var s,i,o;if(tT(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=NQ(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,B_e(a)}return t}Wn.prototype.addListener=function(e,n){return TQ(this,e,n,!1)};Wn.prototype.on=Wn.prototype.addListener;Wn.prototype.prependListener=function(e,n){return TQ(this,e,n,!0)};function $_e(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function RQ(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=$_e.bind(r);return s.listener=n,r.wrapFn=s,s}Wn.prototype.once=function(e,n){return tT(n),this.on(e,RQ(this,e,n)),this};Wn.prototype.prependOnceListener=function(e,n){return tT(n),this.prependListener(e,RQ(this,e,n)),this};Wn.prototype.removeListener=function(e,n){var r,s,i,o,a;if(tT(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():F_e(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Wn.prototype.off=Wn.prototype.removeListener;Wn.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function PQ(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?j_e(s):kQ(s,s.length)}Wn.prototype.listeners=function(e){return PQ(this,e,!0)};Wn.prototype.rawListeners=function(e){return PQ(this,e,!1)};Wn.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):OQ.call(t,e)};Wn.prototype.listenerCount=OQ;function OQ(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Wn.prototype.eventNames=function(){return this._eventsCount>0?gS(this._events):[]};function kQ(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function F_e(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function j_e(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function W_e(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}DQ(t,e,i,{once:!0}),e!=="error"&&z_e(t,s,{once:!0})})}function z_e(t,e,n){typeof t.on=="function"&&DQ(t,"error",e,n)}function DQ(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var $a=oU.exports;const aU=Qg($a);var _e={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ID=function(t,e){return ID=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},ID(t,e)};function H_e(t,e){ID(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ND=function(){return ND=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ND.apply(this,arguments)};function G_e(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function q_e(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function V_e(t,e){return function(n,r){e(n,r,t)}}function K_e(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Y_e(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function Q_e(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function J_e(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function Z_e(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function TD(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function MQ(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function X_e(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(MQ(arguments[e]));return t}function e1e(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function wC(t){return this instanceof wC?(this.v=t,this):new wC(t)}function t1e(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof wC?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function n1e(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:wC(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function r1e(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof TD=="function"?TD(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function s1e(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function i1e(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o1e(t){return t&&t.__esModule?t:{default:t}}function a1e(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function c1e(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const l1e=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return ND},__asyncDelegator:n1e,__asyncGenerator:t1e,__asyncValues:r1e,__await:wC,__awaiter:Y_e,__classPrivateFieldGet:a1e,__classPrivateFieldSet:c1e,__createBinding:J_e,__decorate:q_e,__exportStar:Z_e,__extends:H_e,__generator:Q_e,__importDefault:o1e,__importStar:i1e,__makeTemplateObject:s1e,__metadata:K_e,__param:V_e,__read:MQ,__rest:G_e,__spread:X_e,__spreadArrays:e1e,__values:TD},Symbol.toStringTag,{value:"Module"})),nT=jW(l1e);var BP={},Jb={},p4;function u1e(){if(p4)return Jb;p4=1,Object.defineProperty(Jb,"__esModule",{value:!0}),Jb.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return Jb.delay=t,Jb}var Ff={},$P={},jf={},g4;function d1e(){return g4||(g4=1,Object.defineProperty(jf,"__esModule",{value:!0}),jf.ONE_THOUSAND=jf.ONE_HUNDRED=void 0,jf.ONE_HUNDRED=100,jf.ONE_THOUSAND=1e3),jf}var FP={},m4;function h1e(){return m4||(m4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(FP)),FP}var y4;function LQ(){return y4||(y4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=nT;e.__exportStar(d1e(),t),e.__exportStar(h1e(),t)}($P)),$P}var w4;function f1e(){if(w4)return Ff;w4=1,Object.defineProperty(Ff,"__esModule",{value:!0}),Ff.fromMiliseconds=Ff.toMiliseconds=void 0;const t=LQ();function e(r){return r*t.ONE_THOUSAND}Ff.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Ff.fromMiliseconds=n,Ff}var b4;function p1e(){return b4||(b4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=nT;e.__exportStar(u1e(),t),e.__exportStar(f1e(),t)}(BP)),BP}var km={},v4;function g1e(){if(v4)return km;v4=1,Object.defineProperty(km,"__esModule",{value:!0}),km.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return km.Watch=t,km.default=t,km}var jP={},Zb={},E4;function m1e(){if(E4)return Zb;E4=1,Object.defineProperty(Zb,"__esModule",{value:!0}),Zb.IWatch=void 0;class t{}return Zb.IWatch=t,Zb}var C4;function y1e(){return C4||(C4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),nT.__exportStar(m1e(),t)}(jP)),jP}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=nT;e.__exportStar(p1e(),t),e.__exportStar(g1e(),t),e.__exportStar(y1e(),t),e.__exportStar(LQ(),t)})(_e);class lm{}let w1e=class extends lm{constructor(e){super()}};const _4=_e.FIVE_SECONDS,um={pulse:"heartbeat_pulse"};let b1e=class UQ extends w1e{constructor(e){super(e),this.events=new $a.EventEmitter,this.interval=_4,this.interval=(e==null?void 0:e.interval)||_4}static async init(e){const n=new UQ(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),_e.toMiliseconds(this.interval))}pulse(){this.events.emit(um.pulse)}};const v1e=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,E1e=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,C1e=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function _1e(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){A1e(t);return}return e}function A1e(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function hA(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!C1e.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(v1e.test(t)||E1e.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,_1e)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function dm(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function BQ(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=dm(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let WP;function Q_(){return WP||(WP=BQ("keyval-store","keyval")),WP}function A4(t,e=Q_()){return e("readonly",n=>dm(n.get(t)))}function S1e(t,e,n=Q_()){return n("readwrite",r=>(r.put(e,t),dm(r.transaction)))}function x1e(t,e=Q_()){return e("readwrite",n=>(n.delete(t),dm(n.transaction)))}function I1e(t=Q_()){return t("readwrite",e=>(e.clear(),dm(e.transaction)))}function N1e(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},dm(t.transaction)}function T1e(t=Q_()){return t("readonly",e=>{if(e.getAllKeys)return dm(e.getAllKeys());const n=[];return N1e(e,r=>n.push(r.key)).then(()=>n)})}const R1e=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),P1e=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function kg(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return P1e(t)}catch{return t}}function rd(t){return typeof t=="string"?t:R1e(t)||""}function O1e(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var k1e=D1e;function D1e(t,e,n){var r=n&&n.stringify||O1e,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const S4=k1e;var sy=Pl;const bC=H1e().console||{},M1e={mapHttpRequest:fA,mapHttpResponse:fA,wrapRequestSerializer:zP,wrapResponseSerializer:zP,wrapErrorSerializer:zP,req:fA,res:fA,err:F1e};function L1e(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Pl(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||bC;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=L1e(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=vC),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:j1e(t)};c.levels=Pl.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=vC,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=RD());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,Dm(l,c,"error","log"),Dm(l,c,"fatal","error"),Dm(l,c,"warn","error"),Dm(l,c,"info","log"),Dm(l,c,"debug","log"),Dm(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const w=g.serializers;if(s&&w){var m=Object.assign({},r,w),b=t.browser.serialize===!0?Object.keys(m):s;delete p.serializers,rT([p],b,m,this._stdErrSerialize)}function v(A){this._childLevel=(A._childLevel|0)+1,this.error=Mm(A,p,"error"),this.fatal=Mm(A,p,"fatal"),this.warn=Mm(A,p,"warn"),this.info=Mm(A,p,"info"),this.debug=Mm(A,p,"debug"),this.trace=Mm(A,p,"trace"),m&&(this.serializers=m,this._serialize=b),e&&(this._logEvent=RD([].concat(A._logEvent.bindings,p)))}return v.prototype=this,new v(this)}return c}Pl.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Pl.stdSerializers=M1e;Pl.stdTimeFunctions=Object.assign({},{nullTime:$Q,epochTime:FQ,unixTime:W1e,isoTime:z1e});function Dm(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?vC:s[n]?s[n]:bC[n]||bC[r]||vC,U1e(t,e,n)}function U1e(t,e,n){!t.transmit&&e[n]===vC||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===bC?bC:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&rT(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,B1e(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=Pl.levels.values[l],d=Pl.levels.values[n];if(d<u)return;$1e(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:Pl.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function B1e(t,e,n,r){t._serialize&&rT(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=Pl.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?S4(s.shift(),s):void 0}else typeof i=="string"&&(i=S4(s.shift(),s));return i!==void 0&&(o.msg=i),o}function rT(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=Pl.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Mm(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function $1e(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;rT(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=RD(c)}function RD(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function F1e(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function j1e(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?$Q:FQ}function fA(){return{}}function zP(t){return t}function vC(){}function $Q(){return!1}function FQ(){return Date.now()}function W1e(){return Math.round(Date.now()/1e3)}function z1e(){return new Date(Date.now()).toISOString()}function H1e(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const J_=Qg(sy),G1e={level:"info"},Z_="custom_context",cU=1e3*1024;let q1e=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},x4=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new q1e(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},jQ=class{constructor(e,n=cU){this.level=e??"error",this.levelValue=sy.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new x4(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===sy.levels.values.error?console.error(e):n===sy.levels.values.warn?console.warn(e):n===sy.levels.values.debug?console.debug(e):n===sy.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(rd({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new x4(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(rd({extraMetadata:e})),new Blob(n,{type:"application/json"})}},V1e=class{constructor(e,n=cU){this.baseChunkLogger=new jQ(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},K1e=class{constructor(e,n=cU){this.baseChunkLogger=new jQ(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var Y1e=Object.defineProperty,Q1e=Object.defineProperties,J1e=Object.getOwnPropertyDescriptors,I4=Object.getOwnPropertySymbols,Z1e=Object.prototype.hasOwnProperty,X1e=Object.prototype.propertyIsEnumerable,N4=(t,e,n)=>e in t?Y1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qx=(t,e)=>{for(var n in e||(e={}))Z1e.call(e,n)&&N4(t,n,e[n]);if(I4)for(var n of I4(e))X1e.call(e,n)&&N4(t,n,e[n]);return t},Vx=(t,e)=>Q1e(t,J1e(e));function hm(t){return Vx(qx({},t),{level:(t==null?void 0:t.level)||G1e.level})}function eAe(t,e=Z_){return t[e]||""}function tAe(t,e,n=Z_){return t[n]=e,t}function mo(t,e=Z_){let n="";return typeof t.bindings>"u"?n=eAe(t,e):n=t.bindings().context||"",n}function nAe(t,e,n=Z_){const r=mo(t,n);return r.trim()?`${r}/${e}`:e}function Fs(t,e,n=Z_){const r=nAe(t,e,n),s=t.child({context:r});return tAe(s,r,n)}function rAe(t){var e,n;const r=new V1e((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:J_(Vx(qx({},t.opts),{level:"trace",browser:Vx(qx({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function sAe(t){var e;const n=new K1e((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:J_(Vx(qx({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function sT(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?rAe(t):sAe(t)}function iAe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function WQ(t,...e){if(!iAe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function T4(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function oAe(t,e){WQ(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Lm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const HP=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function aAe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function zQ(t){return typeof t=="string"&&(t=aAe(t)),WQ(t),t}let cAe=class{clone(){return this._cloneInto()}};function lAe(t){const e=r=>t().update(zQ(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function HQ(t=32){if(Lm&&typeof Lm.getRandomValues=="function")return Lm.getRandomValues(new Uint8Array(t));if(Lm&&typeof Lm.randomBytes=="function")return Lm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function uAe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let dAe=class extends cAe{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=HP(this.buffer)}update(e){T4(this);const{view:n,buffer:r,blockLen:s}=this;e=zQ(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=HP(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){T4(this),oAe(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;uAe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=HP(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const pA=BigInt(2**32-1),PD=BigInt(32);function GQ(t,e=!1){return e?{h:Number(t&pA),l:Number(t>>PD&pA)}:{h:Number(t>>PD&pA)|0,l:Number(t&pA)|0}}function hAe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=GQ(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const fAe=(t,e)=>BigInt(t>>>0)<<PD|BigInt(e>>>0),pAe=(t,e,n)=>t>>>n,gAe=(t,e,n)=>t<<32-n|e>>>n,mAe=(t,e,n)=>t>>>n|e<<32-n,yAe=(t,e,n)=>t<<32-n|e>>>n,wAe=(t,e,n)=>t<<64-n|e>>>n-32,bAe=(t,e,n)=>t>>>n-32|e<<64-n,vAe=(t,e)=>e,EAe=(t,e)=>t,CAe=(t,e,n)=>t<<n|e>>>32-n,_Ae=(t,e,n)=>e<<n|t>>>32-n,AAe=(t,e,n)=>e<<n-32|t>>>64-n,SAe=(t,e,n)=>t<<n-32|e>>>64-n;function xAe(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const IAe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),NAe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,TAe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),RAe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,PAe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),OAe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,$t={fromBig:GQ,split:hAe,toBig:fAe,shrSH:pAe,shrSL:gAe,rotrSH:mAe,rotrSL:yAe,rotrBH:wAe,rotrBL:bAe,rotr32H:vAe,rotr32L:EAe,rotlSH:CAe,rotlSL:_Ae,rotlBH:AAe,rotlBL:SAe,add:xAe,add3L:IAe,add3H:NAe,add4L:TAe,add4H:RAe,add5H:OAe,add5L:PAe},[kAe,DAe]=$t.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Id=new Uint32Array(80),Nd=new Uint32Array(80);let MAe=class extends dAe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let v=0;v<16;v++,n+=4)Id[v]=e.getUint32(n),Nd[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const A=Id[v-15]|0,C=Nd[v-15]|0,T=$t.rotrSH(A,C,1)^$t.rotrSH(A,C,8)^$t.shrSH(A,C,7),x=$t.rotrSL(A,C,1)^$t.rotrSL(A,C,8)^$t.shrSL(A,C,7),N=Id[v-2]|0,S=Nd[v-2]|0,D=$t.rotrSH(N,S,19)^$t.rotrBH(N,S,61)^$t.shrSH(N,S,6),P=$t.rotrSL(N,S,19)^$t.rotrBL(N,S,61)^$t.shrSL(N,S,6),$=$t.add4L(x,P,Nd[v-7],Nd[v-16]),G=$t.add4H($,T,D,Id[v-7],Id[v-16]);Id[v]=G|0,Nd[v]=$|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:m,Hl:b}=this;for(let v=0;v<80;v++){const A=$t.rotrSH(d,h,14)^$t.rotrSH(d,h,18)^$t.rotrBH(d,h,41),C=$t.rotrSL(d,h,14)^$t.rotrSL(d,h,18)^$t.rotrBL(d,h,41),T=d&f^~d&g,x=h&p^~h&w,N=$t.add5L(b,C,x,DAe[v],Nd[v]),S=$t.add5H(N,m,A,T,kAe[v],Id[v]),D=N|0,P=$t.rotrSH(r,s,28)^$t.rotrBH(r,s,34)^$t.rotrBH(r,s,39),$=$t.rotrSL(r,s,28)^$t.rotrBL(r,s,34)^$t.rotrBL(r,s,39),G=r&i^r&a^i&a,W=s&o^s&c^o&c;m=g|0,b=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=$t.add(l|0,u|0,S|0,D|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=$t.add3L(D,$,W);r=$t.add3H(I,S,P,G),s=I|0}({h:r,l:s}=$t.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=$t.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=$t.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=$t.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=$t.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=$t.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=$t.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:m,l:b}=$t.add(this.Hh|0,this.Hl|0,m|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,w,m,b)}roundClean(){Id.fill(0),Nd.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const LAe=lAe(()=>new MAe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const lU=BigInt(0),qQ=BigInt(1),UAe=BigInt(2);function uU(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function dU(t){if(!uU(t))throw new Error("Uint8Array expected")}function GP(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const BAe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function hU(t){dU(t);let e="";for(let n=0;n<t.length;n++)e+=BAe[t[n]];return e}function VQ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?lU:BigInt("0x"+t)}const Zl={_0:48,_9:57,A:65,F:70,a:97,f:102};function R4(t){if(t>=Zl._0&&t<=Zl._9)return t-Zl._0;if(t>=Zl.A&&t<=Zl.F)return t-(Zl.A-10);if(t>=Zl.a&&t<=Zl.f)return t-(Zl.a-10)}function KQ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=R4(t.charCodeAt(i)),a=R4(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function $Ae(t){return VQ(hU(t))}function mS(t){return dU(t),VQ(hU(Uint8Array.from(t).reverse()))}function YQ(t,e){return KQ(t.toString(16).padStart(e*2,"0"))}function OD(t,e){return YQ(t,e).reverse()}function Xl(t,e,n){let r;if(typeof e=="string")try{r=KQ(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(uU(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function P4(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];dU(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const qP=t=>typeof t=="bigint"&&lU<=t;function FAe(t,e,n){return qP(t)&&qP(e)&&qP(n)&&e<=t&&t<n}function Xb(t,e,n,r){if(!FAe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function jAe(t){let e;for(e=0;t>lU;t>>=qQ,e+=1);return e}const WAe=t=>(UAe<<BigInt(t-1))-qQ,zAe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||uU(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function fU(t,e,n={}){const r=(s,i,o)=>{const a=zAe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function O4(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const ys=BigInt(0),kr=BigInt(1),ip=BigInt(2),HAe=BigInt(3),kD=BigInt(4),k4=BigInt(5),D4=BigInt(8);function Vr(t,e){const n=t%e;return n>=ys?n:e+n}function GAe(t,e,n){if(e<ys)throw new Error("invalid exponent, negatives unsupported");if(n<=ys)throw new Error("invalid modulus");if(n===kr)return ys;let r=kr;for(;e>ys;)e&kr&&(r=r*t%n),t=t*t%n,e>>=kr;return r}function Wc(t,e,n){let r=t;for(;e-- >ys;)r*=r,r%=n;return r}function M4(t,e){if(t===ys)throw new Error("invert: expected non-zero number");if(e<=ys)throw new Error("invert: expected positive modulus, got "+e);let n=Vr(t,e),r=e,s=ys,i=kr;for(;n!==ys;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==kr)throw new Error("invert: does not exist");return Vr(s,e)}function qAe(t){const e=(t-kr)/ip;let n,r,s;for(n=t-kr,r=0;n%ip===ys;n/=ip,r++);for(s=ip;s<t&&GAe(s,e,t)!==t-kr;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+kr)/kD;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+kr)/ip;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,kr<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function VAe(t){if(t%kD===HAe){const e=(t+kr)/kD;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%D4===k4){const e=(t-k4)/D4;return function(n,r){const s=n.mul(r,ip),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,ip),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return qAe(t)}const KAe=(t,e)=>(Vr(t,e)&kr)===kr,YAe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function QAe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=YAe.reduce((r,s)=>(r[s]="function",r),e);return fU(t,n)}function JAe(t,e,n){if(n<ys)throw new Error("invalid exponent, negatives unsupported");if(n===ys)return t.ONE;if(n===kr)return e;let r=t.ONE,s=e;for(;n>ys;)n&kr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=kr;return r}function ZAe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function QQ(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function JQ(t,e,n=!1,r={}){if(t<=ys)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=QQ(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:WAe(s),ZERO:ys,ONE:kr,create:c=>Vr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return ys<=c&&c<t},is0:c=>c===ys,isOdd:c=>(c&kr)===kr,neg:c=>Vr(-c,t),eql:(c,l)=>c===l,sqr:c=>Vr(c*c,t),add:(c,l)=>Vr(c+l,t),sub:(c,l)=>Vr(c-l,t),mul:(c,l)=>Vr(c*l,t),pow:(c,l)=>JAe(a,c,l),div:(c,l)=>Vr(c*M4(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>M4(c,t),sqrt:r.sqrt||(c=>(o||(o=VAe(t)),o(a,c))),invertBatch:c=>ZAe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?OD(c,i):YQ(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?mS(c):$Ae(c)}});return Object.freeze(a)}const L4=BigInt(0),gA=BigInt(1);function VP(t,e){const n=e.negate();return t?n:e}function ZQ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function KP(t,e){ZQ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function XAe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function eSe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const YP=new WeakMap,XQ=new WeakMap;function QP(t){return XQ.get(t)||1}function tSe(t,e){return{constTimeNegate:VP,hasPrecomputes(n){return QP(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>L4;)r&gA&&(s=s.add(i)),i=i.double(),r>>=gA;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=KP(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=KP(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=gA);const g=f,w=f+Math.abs(p)-1,m=h%2!==0,b=p<0;p===0?c=c.add(VP(m,r[g])):a=a.add(VP(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=KP(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===L4)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=gA),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=YP.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&YP.set(r,s(i))),i},wNAFCached(n,r,s){const i=QP(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=QP(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){ZQ(r,e),XQ.set(n,r),YP.delete(n)}}}function nSe(t,e,n,r){if(XAe(n,t),eSe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=jAe(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function rSe(t){return QAe(t.Fp),fU(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...QQ(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const qa=BigInt(0),Mi=BigInt(1),mA=BigInt(2),sSe=BigInt(8),iSe={zip215:!0};function oSe(t){const e=rSe(t);return fU(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function aSe(t){const e=oSe(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=mA<<BigInt(a*8)-Mi,u=n.create,d=JQ(e.n,e.nBitLength),h=e.uvRatio||((I,R)=>{try{return{isValid:!0,value:n.sqrt(I*n.inv(R))}}catch{return{isValid:!1,value:qa}}}),f=e.adjustScalarBytes||(I=>I),p=e.domain||((I,R,B)=>{if(GP("phflag",B),R.length||B)throw new Error("Contexts/pre-hash are not supported");return I});function g(I,R){Xb("coordinate "+I,R,qa,l)}function w(I){if(!(I instanceof v))throw new Error("ExtendedPoint expected")}const m=O4((I,R)=>{const{ex:B,ey:O,ez:M}=I,j=I.is0();R==null&&(R=j?sSe:n.inv(M));const V=u(B*R),te=u(O*R),Z=u(M*R);if(j)return{x:qa,y:Mi};if(Z!==Mi)throw new Error("invZ was invalid");return{x:V,y:te}}),b=O4(I=>{const{a:R,d:B}=e;if(I.is0())throw new Error("bad point: ZERO");const{ex:O,ey:M,ez:j,et:V}=I,te=u(O*O),Z=u(M*M),X=u(j*j),ce=u(X*X),ge=u(te*R),Me=u(X*u(ge+Z)),it=u(ce+u(B*u(te*Z)));if(Me!==it)throw new Error("bad point: equation left != right (1)");const Je=u(O*M),bt=u(j*V);if(Je!==bt)throw new Error("bad point: equation left != right (2)");return!0});class v{constructor(R,B,O,M){this.ex=R,this.ey=B,this.ez=O,this.et=M,g("x",R),g("y",B),g("z",O),g("t",M),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(R){if(R instanceof v)throw new Error("extended point not allowed");const{x:B,y:O}=R||{};return g("x",B),g("y",O),new v(B,O,Mi,u(B*O))}static normalizeZ(R){const B=n.invertBatch(R.map(O=>O.ez));return R.map((O,M)=>O.toAffine(B[M])).map(v.fromAffine)}static msm(R,B){return nSe(v,d,R,B)}_setWindowSize(R){T.setWindowSize(this,R)}assertValidity(){b(this)}equals(R){w(R);const{ex:B,ey:O,ez:M}=this,{ex:j,ey:V,ez:te}=R,Z=u(B*te),X=u(j*M),ce=u(O*te),ge=u(V*M);return Z===X&&ce===ge}is0(){return this.equals(v.ZERO)}negate(){return new v(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:R}=e,{ex:B,ey:O,ez:M}=this,j=u(B*B),V=u(O*O),te=u(mA*u(M*M)),Z=u(R*j),X=B+O,ce=u(u(X*X)-j-V),ge=Z+V,Me=ge-te,it=Z-V,Je=u(ce*Me),bt=u(ge*it),Nt=u(ce*it),At=u(Me*ge);return new v(Je,bt,At,Nt)}add(R){w(R);const{a:B,d:O}=e,{ex:M,ey:j,ez:V,et:te}=this,{ex:Z,ey:X,ez:ce,et:ge}=R;if(B===BigInt(-1)){const Xe=u((j-M)*(X+Z)),ct=u((j+M)*(X-Z)),Tt=u(ct-Xe);if(Tt===qa)return this.double();const In=u(V*mA*ge),nt=u(te*mA*ce),Dn=nt+In,zt=ct+Xe,ke=nt-In,Nn=u(Dn*Tt),Ri=u(zt*ke),lr=u(Dn*ke),fd=u(Tt*zt);return new v(Nn,Ri,fd,lr)}const Me=u(M*Z),it=u(j*X),Je=u(te*O*ge),bt=u(V*ce),Nt=u((M+j)*(Z+X)-Me-it),At=bt-Je,ne=bt+Je,ie=u(it-B*Me),be=u(Nt*At),fe=u(ne*ie),ve=u(Nt*ie),ht=u(At*ne);return new v(be,fe,ht,ve)}subtract(R){return this.add(R.negate())}wNAF(R){return T.wNAFCached(this,R,v.normalizeZ)}multiply(R){const B=R;Xb("scalar",B,Mi,r);const{p:O,f:M}=this.wNAF(B);return v.normalizeZ([O,M])[0]}multiplyUnsafe(R,B=v.ZERO){const O=R;return Xb("scalar",O,qa,r),O===qa?C:this.is0()||O===Mi?this:T.wNAFCachedUnsafe(this,O,v.normalizeZ,B)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return T.unsafeLadder(this,r).is0()}toAffine(R){return m(this,R)}clearCofactor(){const{h:R}=e;return R===Mi?this:this.multiplyUnsafe(R)}static fromHex(R,B=!1){const{d:O,a:M}=e,j=n.BYTES;R=Xl("pointHex",R,j),GP("zip215",B);const V=R.slice(),te=R[j-1];V[j-1]=te&-129;const Z=mS(V),X=B?l:n.ORDER;Xb("pointHex.y",Z,qa,X);const ce=u(Z*Z),ge=u(ce-Mi),Me=u(O*ce-M);let{isValid:it,value:Je}=h(ge,Me);if(!it)throw new Error("Point.fromHex: invalid y coordinate");const bt=(Je&Mi)===Mi,Nt=(te&128)!==0;if(!B&&Je===qa&&Nt)throw new Error("Point.fromHex: x=0 and x_0=1");return Nt!==bt&&(Je=u(-Je)),v.fromAffine({x:Je,y:Z})}static fromPrivateKey(R){return S(R).point}toRawBytes(){const{x:R,y:B}=this.toAffine(),O=OD(B,n.BYTES);return O[O.length-1]|=R&Mi?128:0,O}toHex(){return hU(this.toRawBytes())}}v.BASE=new v(e.Gx,e.Gy,Mi,u(e.Gx*e.Gy)),v.ZERO=new v(qa,Mi,Mi,qa);const{BASE:A,ZERO:C}=v,T=tSe(v,a*8);function x(I){return Vr(I,r)}function N(I){return x(mS(I))}function S(I){const R=n.BYTES;I=Xl("private key",I,R);const B=Xl("hashed private key",i(I),2*R),O=f(B.slice(0,R)),M=B.slice(R,2*R),j=N(O),V=A.multiply(j),te=V.toRawBytes();return{head:O,prefix:M,scalar:j,point:V,pointBytes:te}}function D(I){return S(I).pointBytes}function P(I=new Uint8Array,...R){const B=P4(...R);return N(i(p(B,Xl("context",I),!!s)))}function $(I,R,B={}){I=Xl("message",I),s&&(I=s(I));const{prefix:O,scalar:M,pointBytes:j}=S(R),V=P(B.context,O,I),te=A.multiply(V).toRawBytes(),Z=P(B.context,te,j,I),X=x(V+Z*M);Xb("signature.s",X,qa,r);const ce=P4(te,OD(X,n.BYTES));return Xl("result",ce,n.BYTES*2)}const G=iSe;function W(I,R,B,O=G){const{context:M,zip215:j}=O,V=n.BYTES;I=Xl("signature",I,2*V),R=Xl("message",R),B=Xl("publicKey",B,V),j!==void 0&&GP("zip215",j),s&&(R=s(R));const te=mS(I.slice(V,2*V));let Z,X,ce;try{Z=v.fromHex(B,j),X=v.fromHex(I.slice(0,V),j),ce=A.multiplyUnsafe(te)}catch{return!1}if(!j&&Z.isSmallOrder())return!1;const ge=P(M,X.toRawBytes(),Z.toRawBytes(),R);return X.add(Z.multiplyUnsafe(ge)).subtract(ce).clearCofactor().equals(v.ZERO)}return A._setWindowSize(8),{CURVE:e,getPublicKey:D,sign:$,verify:W,ExtendedPoint:v,utils:{getExtendedPublicKey:S,randomPrivateKey:()=>o(n.BYTES),precompute(I=8,R=v.BASE){return R._setWindowSize(I),R.multiply(BigInt(3)),R}}}}BigInt(0),BigInt(1);const pU=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),U4=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const cSe=BigInt(1),B4=BigInt(2);BigInt(3);const lSe=BigInt(5),uSe=BigInt(8);function dSe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=pU,o=t*t%i*t%i,a=Wc(o,B4,i)*o%i,c=Wc(a,cSe,i)*t%i,l=Wc(c,lSe,i)*c%i,u=Wc(l,e,i)*l%i,d=Wc(u,n,i)*u%i,h=Wc(d,r,i)*d%i,f=Wc(h,s,i)*h%i,p=Wc(f,s,i)*h%i,g=Wc(p,e,i)*l%i;return{pow_p_5_8:Wc(g,B4,i)*t%i,b2:o}}function hSe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function fSe(t,e){const n=pU,r=Vr(e*e*e,n),s=Vr(r*r*e,n),i=dSe(t*s).pow_p_5_8;let o=Vr(t*r*i,n);const a=Vr(e*o*o,n),c=o,l=Vr(o*U4,n),u=a===t,d=a===Vr(-t,n),h=a===Vr(-t*U4,n);return u&&(o=c),(d||h)&&(o=l),KAe(o,n)&&(o=Vr(-o,n)),{isValid:u||d,value:o}}const pSe=JQ(pU,void 0,!0),gSe={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:pSe,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:uSe,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:LAe,randomBytes:HQ,adjustScalarBytes:hSe,uvRatio:fSe},eJ=aSe(gSe),mSe="EdDSA",ySe="JWT",Kx=".",iT="base64url",tJ="utf8",nJ="utf8",wSe=":",bSe="did",vSe="key",$4="base58btc",ESe="z",CSe="K36",_Se=32;function gU(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function rJ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?gU(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function sJ(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=rJ(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return gU(n)}function ASe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,m=0,b=p.length;m!==b&&p[m]===0;)m++,g++;for(var v=(b-m)*u+1>>>0,A=new Uint8Array(v);m!==b;){for(var C=p[m],T=0,x=v-1;(C!==0||T<w)&&x!==-1;x--,T++)C+=256*A[x]>>>0,A[x]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");w=T,m++}for(var N=v-w;N!==v&&A[N]===0;)N++;for(var S=c.repeat(g);N<v;++N)S+=t.charAt(A[N]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,m=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var C=0,T=b-1;(A!==0||C<m)&&T!==-1;T--,C++)A+=a*v[T]>>>0,v[T]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");m=C,g++}if(p[g]!==" "){for(var x=b-m;x!==b&&v[x]===0;)x++;for(var N=new Uint8Array(w+(b-x)),S=w;x!==b;)N[S++]=v[x++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var SSe=ASe,xSe=SSe;const iJ=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},ISe=t=>new TextEncoder().encode(t),NSe=t=>new TextDecoder().decode(t);let TSe=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},RSe=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return oJ(this,e)}},PSe=class{constructor(e){this.decoders=e}or(e){return oJ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const oJ=(t,e)=>new PSe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let OSe=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new TSe(e,n,r),this.decoder=new RSe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const oT=({name:t,prefix:e,encode:n,decode:r})=>new OSe(t,e,n,r),X_=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=xSe(n,e);return oT({prefix:t,name:e,encode:r,decode:i=>iJ(s(i))})},kSe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},DSe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},js=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>oT({prefix:e,name:t,encode(s){return DSe(s,r,n)},decode(s){return kSe(s,r,n,t)}}),MSe=oT({prefix:"\0",name:"identity",encode:t=>NSe(t),decode:t=>ISe(t)});var LSe=Object.freeze({__proto__:null,identity:MSe});const USe=js({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var BSe=Object.freeze({__proto__:null,base2:USe});const $Se=js({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var FSe=Object.freeze({__proto__:null,base8:$Se});const jSe=X_({prefix:"9",name:"base10",alphabet:"0123456789"});var WSe=Object.freeze({__proto__:null,base10:jSe});const zSe=js({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),HSe=js({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var GSe=Object.freeze({__proto__:null,base16:zSe,base16upper:HSe});const qSe=js({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),VSe=js({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),KSe=js({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),YSe=js({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),QSe=js({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),JSe=js({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ZSe=js({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),XSe=js({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),exe=js({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var txe=Object.freeze({__proto__:null,base32:qSe,base32upper:VSe,base32pad:KSe,base32padupper:YSe,base32hex:QSe,base32hexupper:JSe,base32hexpad:ZSe,base32hexpadupper:XSe,base32z:exe});const nxe=X_({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),rxe=X_({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var sxe=Object.freeze({__proto__:null,base36:nxe,base36upper:rxe});const ixe=X_({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),oxe=X_({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var axe=Object.freeze({__proto__:null,base58btc:ixe,base58flickr:oxe});const cxe=js({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),lxe=js({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),uxe=js({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),dxe=js({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var hxe=Object.freeze({__proto__:null,base64:cxe,base64pad:lxe,base64url:uxe,base64urlpad:dxe});const aJ=Array.from(""),fxe=aJ.reduce((t,e,n)=>(t[n]=e,t),[]),pxe=aJ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function gxe(t){return t.reduce((e,n)=>(e+=fxe[n],e),"")}function mxe(t){const e=[];for(const n of t){const r=pxe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const yxe=oT({prefix:"",name:"base256emoji",encode:gxe,decode:mxe});var wxe=Object.freeze({__proto__:null,base256emoji:yxe}),bxe=cJ,F4=128,vxe=-128,Exe=Math.pow(2,31);function cJ(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Exe;)e[n++]=t&255|F4,t/=128;for(;t&vxe;)e[n++]=t&255|F4,t>>>=7;return e[n]=t|0,cJ.bytes=n-r+1,e}var Cxe=DD,_xe=128,j4=127;function DD(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw DD.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&j4)<<s:(o&j4)*Math.pow(2,s),s+=7}while(o>=_xe);return DD.bytes=i-r,n}var Axe=Math.pow(2,7),Sxe=Math.pow(2,14),xxe=Math.pow(2,21),Ixe=Math.pow(2,28),Nxe=Math.pow(2,35),Txe=Math.pow(2,42),Rxe=Math.pow(2,49),Pxe=Math.pow(2,56),Oxe=Math.pow(2,63),kxe=function(t){return t<Axe?1:t<Sxe?2:t<xxe?3:t<Ixe?4:t<Nxe?5:t<Txe?6:t<Rxe?7:t<Pxe?8:t<Oxe?9:10},Dxe={encode:bxe,decode:Cxe,encodingLength:kxe},lJ=Dxe;const W4=(t,e,n=0)=>(lJ.encode(t,e,n),e),z4=t=>lJ.encodingLength(t),MD=(t,e)=>{const n=e.byteLength,r=z4(t),s=r+z4(n),i=new Uint8Array(s+n);return W4(t,i,0),W4(n,i,r),i.set(e,s),new Mxe(t,n,e,i)};let Mxe=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const uJ=({name:t,code:e,encode:n})=>new Lxe(t,e,n);let Lxe=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?MD(this.code,n):n.then(r=>MD(this.code,r))}else throw Error("Unknown type, must be binary type")}};const dJ=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Uxe=uJ({name:"sha2-256",code:18,encode:dJ("SHA-256")}),Bxe=uJ({name:"sha2-512",code:19,encode:dJ("SHA-512")});var $xe=Object.freeze({__proto__:null,sha256:Uxe,sha512:Bxe});const hJ=0,Fxe="identity",fJ=iJ,jxe=t=>MD(hJ,fJ(t)),Wxe={code:hJ,name:Fxe,encode:fJ,digest:jxe};var zxe=Object.freeze({__proto__:null,identity:Wxe});new TextEncoder,new TextDecoder;const H4={...LSe,...BSe,...FSe,...WSe,...GSe,...txe,...sxe,...axe,...hxe,...wxe};({...$xe,...zxe});function pJ(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const G4=pJ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),JP=pJ("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=rJ(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),gJ={utf8:G4,"utf-8":G4,hex:H4.base16,latin1:JP,ascii:JP,binary:JP,...H4};function aT(t,e="utf8"){const n=gJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function lb(t,e="utf8"){const n=gJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?gU(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function q4(t){return kg(aT(lb(t,iT),tJ))}function Yx(t){return aT(lb(rd(t),tJ),iT)}function mJ(t){const e=lb(CSe,$4),n=ESe+aT(sJ([e,t]),$4);return[bSe,vSe,n].join(wSe)}function Hxe(t){return aT(t,iT)}function Gxe(t){return lb(t,iT)}function qxe(t){return lb([Yx(t.header),Yx(t.payload)].join(Kx),nJ)}function Vxe(t){return[Yx(t.header),Yx(t.payload),Hxe(t.signature)].join(Kx)}function LD(t){const e=t.split(Kx),n=q4(e[0]),r=q4(e[1]),s=Gxe(e[2]),i=lb(e.slice(0,2).join(Kx),nJ);return{header:n,payload:r,signature:s,data:i}}function V4(t=HQ(_Se)){const e=eJ.getPublicKey(t);return{secretKey:sJ([t,e]),publicKey:e}}async function Kxe(t,e,n,r,s=_e.fromMiliseconds(Date.now())){const i={alg:mSe,typ:ySe},o=mJ(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=qxe({header:i,payload:c}),u=eJ.sign(l,r.secretKey.slice(0,32));return Vxe({header:i,payload:c,signature:u})}var K4=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},Yxe=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),Qxe=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),Jxe=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),Zxe=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Xxe=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),eIe=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,tIe=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Y4=3,nIe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",eIe]],Q4=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function rIe(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Xxe:typeof navigator<"u"?iIe(navigator.userAgent):aIe()}function sIe(t){return t!==""&&nIe.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function iIe(t){var e=sIe(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new Zxe;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<Y4&&(s=K4(K4([],s,!0),cIe(Y4-s.length),!0)):s=[];var i=s.join("."),o=oIe(t),a=tIe.exec(t);return a&&a[1]?new Jxe(n,i,o,a[1]):new Yxe(n,i,o)}function oIe(t){for(var e=0,n=Q4.length;e<n;e++){var r=Q4[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function aIe(){var t=typeof process<"u"&&process.version;return t?new Qxe(process.version.slice(1)):null}function cIe(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.getLocalStorage=Jn.getLocalStorageOrThrow=Jn.getCrypto=Jn.getCryptoOrThrow=yJ=Jn.getLocation=Jn.getLocationOrThrow=mU=Jn.getNavigator=Jn.getNavigatorOrThrow=Dg=Jn.getDocument=Jn.getDocumentOrThrow=Jn.getFromWindowOrThrow=Jn.getFromWindow=void 0;function fm(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Jn.getFromWindow=fm;function ub(t){const e=fm(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Jn.getFromWindowOrThrow=ub;function lIe(){return ub("document")}Jn.getDocumentOrThrow=lIe;function uIe(){return fm("document")}var Dg=Jn.getDocument=uIe;function dIe(){return ub("navigator")}Jn.getNavigatorOrThrow=dIe;function hIe(){return fm("navigator")}var mU=Jn.getNavigator=hIe;function fIe(){return ub("location")}Jn.getLocationOrThrow=fIe;function pIe(){return fm("location")}var yJ=Jn.getLocation=pIe;function gIe(){return ub("crypto")}Jn.getCryptoOrThrow=gIe;function mIe(){return fm("crypto")}Jn.getCrypto=mIe;function yIe(){return ub("localStorage")}Jn.getLocalStorageOrThrow=yIe;function wIe(){return fm("localStorage")}Jn.getLocalStorage=wIe;var yU={};Object.defineProperty(yU,"__esModule",{value:!0});var wJ=yU.getWindowMetadata=void 0;const J4=Jn;function bIe(){let t,e;try{t=J4.getDocumentOrThrow(),e=J4.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const w=p.getAttribute("href");if(w)if(w.toLowerCase().indexOf("https:")===-1&&w.toLowerCase().indexOf("http:")===-1&&w.indexOf("//")!==0){let m=e.protocol+"//"+e.host;if(w.indexOf("/")===0)m+=w;else{const b=e.pathname.split("/");b.pop();const v=b.join("/");m+=v+"/"+w}h.push(m)}else if(w.indexOf("//")===0){const m=e.protocol+w;h.push(m)}else h.push(w)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(w=>p.getAttribute(w)).filter(w=>w?d.includes(w):!1);if(g.length&&g){const w=p.getAttribute("content");if(w)return w}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}wJ=yU.getWindowMetadata=bIe;function vIe(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let b=l[h],v=0;for(let A=p-1;(b!==0||v<d)&&A!==-1;A--,v++)b+=256*g[A]>>>0,g[A]=b%n>>>0,b=b/n>>>0;if(b!==0)throw new Error("Non-zero carry");d=v,h++}let w=p-d;for(;w!==p&&g[w]===0;)w++;let m=r.repeat(u);for(;w<p;++w)m+=t.charAt(g[w]);return m}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const b=l.charCodeAt(u);if(b>255)return;let v=e[b];if(v===255)return;let A=0;for(let C=f-1;(v!==0||A<h)&&C!==-1;C--,A++)v+=n*p[C]>>>0,p[C]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");h=A,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const w=new Uint8Array(d+(f-g));let m=d;for(;g!==f;)w[m++]=p[g++];return w}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var EIe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const bJ=vIe(EIe);function vJ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function cE(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=vJ(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function CIe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,m=0,b=p.length;m!==b&&p[m]===0;)m++,g++;for(var v=(b-m)*u+1>>>0,A=new Uint8Array(v);m!==b;){for(var C=p[m],T=0,x=v-1;(C!==0||T<w)&&x!==-1;x--,T++)C+=256*A[x]>>>0,A[x]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");w=T,m++}for(var N=v-w;N!==v&&A[N]===0;)N++;for(var S=c.repeat(g);N<v;++N)S+=t.charAt(A[N]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,m=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var C=0,T=b-1;(A!==0||C<m)&&T!==-1;T--,C++)A+=a*v[T]>>>0,v[T]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");m=C,g++}if(p[g]!==" "){for(var x=b-m;x!==b&&v[x]===0;)x++;for(var N=new Uint8Array(w+(b-x)),S=w;x!==b;)N[S++]=v[x++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var _Ie=CIe,AIe=_Ie;const SIe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},xIe=t=>new TextEncoder().encode(t),IIe=t=>new TextDecoder().decode(t);class NIe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class TIe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return EJ(this,e)}}class RIe{constructor(e){this.decoders=e}or(e){return EJ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const EJ=(t,e)=>new RIe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class PIe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new NIe(e,n,r),this.decoder=new TIe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const cT=({name:t,prefix:e,encode:n,decode:r})=>new PIe(t,e,n,r),e1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=AIe(n,e);return cT({prefix:t,name:e,encode:r,decode:i=>SIe(s(i))})},OIe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},kIe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Ws=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>cT({prefix:e,name:t,encode(s){return kIe(s,r,n)},decode(s){return OIe(s,r,n,t)}}),DIe=cT({prefix:"\0",name:"identity",encode:t=>IIe(t),decode:t=>xIe(t)}),MIe=Object.freeze(Object.defineProperty({__proto__:null,identity:DIe},Symbol.toStringTag,{value:"Module"})),LIe=Ws({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),UIe=Object.freeze(Object.defineProperty({__proto__:null,base2:LIe},Symbol.toStringTag,{value:"Module"})),BIe=Ws({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),$Ie=Object.freeze(Object.defineProperty({__proto__:null,base8:BIe},Symbol.toStringTag,{value:"Module"})),FIe=e1({prefix:"9",name:"base10",alphabet:"0123456789"}),jIe=Object.freeze(Object.defineProperty({__proto__:null,base10:FIe},Symbol.toStringTag,{value:"Module"})),WIe=Ws({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),zIe=Ws({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),HIe=Object.freeze(Object.defineProperty({__proto__:null,base16:WIe,base16upper:zIe},Symbol.toStringTag,{value:"Module"})),GIe=Ws({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),qIe=Ws({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),VIe=Ws({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),KIe=Ws({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),YIe=Ws({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),QIe=Ws({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),JIe=Ws({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ZIe=Ws({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),XIe=Ws({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),eNe=Object.freeze(Object.defineProperty({__proto__:null,base32:GIe,base32hex:YIe,base32hexpad:JIe,base32hexpadupper:ZIe,base32hexupper:QIe,base32pad:VIe,base32padupper:KIe,base32upper:qIe,base32z:XIe},Symbol.toStringTag,{value:"Module"})),tNe=e1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),nNe=e1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),rNe=Object.freeze(Object.defineProperty({__proto__:null,base36:tNe,base36upper:nNe},Symbol.toStringTag,{value:"Module"})),sNe=e1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),iNe=e1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),oNe=Object.freeze(Object.defineProperty({__proto__:null,base58btc:sNe,base58flickr:iNe},Symbol.toStringTag,{value:"Module"})),aNe=Ws({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),cNe=Ws({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),lNe=Ws({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),uNe=Ws({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),dNe=Object.freeze(Object.defineProperty({__proto__:null,base64:aNe,base64pad:cNe,base64url:lNe,base64urlpad:uNe},Symbol.toStringTag,{value:"Module"})),CJ=Array.from(""),hNe=CJ.reduce((t,e,n)=>(t[n]=e,t),[]),fNe=CJ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function pNe(t){return t.reduce((e,n)=>(e+=hNe[n],e),"")}function gNe(t){const e=[];for(const n of t){const r=fNe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const mNe=cT({prefix:"",name:"base256emoji",encode:pNe,decode:gNe}),yNe=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:mNe},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Z4={...MIe,...UIe,...$Ie,...jIe,...HIe,...eNe,...rNe,...oNe,...dNe,...yNe};function _J(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const X4=_J("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ZP=_J("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=vJ(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),AJ={utf8:X4,"utf-8":X4,hex:Z4.base16,latin1:ZP,ascii:ZP,binary:ZP,...Z4};function Na(t,e="utf8"){const n=AJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}function lo(t,e="utf8"){const n=AJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const wNe={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},bNe="PARSE_ERROR",vNe="INVALID_REQUEST",ENe="METHOD_NOT_FOUND",CNe="INVALID_PARAMS",SJ="INTERNAL_ERROR",wU="SERVER_ERROR",_Ne=[-32700,-32600,-32601,-32602,-32603],lE={[bNe]:{code:-32700,message:"Parse error"},[vNe]:{code:-32600,message:"Invalid Request"},[ENe]:{code:-32601,message:"Method not found"},[CNe]:{code:-32602,message:"Invalid params"},[SJ]:{code:-32603,message:"Internal error"},[wU]:{code:-32e3,message:"Server error"}},xJ=wU;function ANe(t){return _Ne.includes(t)}function eF(t){return Object.keys(lE).includes(t)?lE[t]:lE[xJ]}function SNe(t){const e=Object.values(lE).find(n=>n.code===t);return e||lE[xJ]}function IJ(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var NJ={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var UD=function(t,e){return UD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},UD(t,e)};function xNe(t,e){UD(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var BD=function(){return BD=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},BD.apply(this,arguments)};function INe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function NNe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function TNe(t,e){return function(n,r){e(n,r,t)}}function RNe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function PNe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function ONe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function kNe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function DNe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function $D(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function TJ(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function MNe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(TJ(arguments[e]));return t}function LNe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function EC(t){return this instanceof EC?(this.v=t,this):new EC(t)}function UNe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof EC?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function BNe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:EC(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function $Ne(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof $D=="function"?$D(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function FNe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function jNe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function WNe(t){return t&&t.__esModule?t:{default:t}}function zNe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function HNe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const GNe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return BD},__asyncDelegator:BNe,__asyncGenerator:UNe,__asyncValues:$Ne,__await:EC,__awaiter:PNe,__classPrivateFieldGet:zNe,__classPrivateFieldSet:HNe,__createBinding:kNe,__decorate:NNe,__exportStar:DNe,__extends:xNe,__generator:ONe,__importDefault:WNe,__importStar:jNe,__makeTemplateObject:FNe,__metadata:RNe,__param:TNe,__read:TJ,__rest:INe,__spread:MNe,__spreadArrays:LNe,__values:$D},Symbol.toStringTag,{value:"Module"})),qNe=jW(GNe);var eu={},tF;function VNe(){if(tF)return eu;tF=1,Object.defineProperty(eu,"__esModule",{value:!0}),eu.isBrowserCryptoAvailable=eu.getSubtleCrypto=eu.getBrowerCrypto=void 0;function t(){return(hl==null?void 0:hl.crypto)||(hl==null?void 0:hl.msCrypto)||{}}eu.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}eu.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return eu.isBrowserCryptoAvailable=n,eu}var tu={},nF;function KNe(){if(nF)return tu;nF=1,Object.defineProperty(tu,"__esModule",{value:!0}),tu.isBrowser=tu.isNode=tu.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}tu.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}tu.isNode=e;function n(){return!t()&&!e()}return tu.isBrowser=n,tu}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=qNe;e.__exportStar(VNe(),t),e.__exportStar(KNe(),t)})(NJ);function Jc(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function Sp(t=6){return BigInt(Jc(t))}function Th(t,e,n){return{id:n||Jc(),jsonrpc:"2.0",method:t,params:e}}function lT(t,e){return{id:t,jsonrpc:"2.0",result:e}}function uT(t,e,n){return{id:t,jsonrpc:"2.0",error:YNe(e)}}function YNe(t,e){return typeof t>"u"?eF(SJ):(typeof t=="string"&&(t=Object.assign(Object.assign({},eF(wU)),{message:t})),ANe(t.code)&&(t=SNe(t.code)),t)}let QNe=class{},JNe=class extends QNe{constructor(){super()}},ZNe=class extends JNe{constructor(e){super()}};const XNe="^https?:",eTe="^wss?:";function tTe(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function RJ(t,e){const n=tTe(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function rF(t){return RJ(t,XNe)}function sF(t){return RJ(t,eTe)}function nTe(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function PJ(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function bU(t){return PJ(t)&&"method"in t}function dT(t){return PJ(t)&&(Zc(t)||va(t))}function Zc(t){return"result"in t}function va(t){return"error"in t}let Fa=class extends ZNe{constructor(e){super(e),this.events=new $a.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Th(e.method,e.params||[],e.id||Sp().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{va(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),dT(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const rTe=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),sTe=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",iF=t=>t.split("?")[0],oF=10,iTe=rTe();let oTe=class{constructor(e){if(this.url=e,this.events=new $a.EventEmitter,this.registering=!1,!sF(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(rd(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!sF(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=NJ.isReactNative()?void 0:{rejectUnauthorized:!nTe(e)},i=new iTe(e,[],s);sTe()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?kg(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=uT(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return IJ(e,iF(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>oF&&this.events.setMaxListeners(oF)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${iF(this.url)}`));return this.events.emit("register_error",n),n}};var FD={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof hl<"u"&&hl,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof hl<"u"&&hl||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(I){return I&&DataView.prototype.isPrototypeOf(I)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(I){return I&&u.indexOf(Object.prototype.toString.call(I))>-1};function h(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(I)||I==="")throw new TypeError('Invalid character in header field name: "'+I+'"');return I.toLowerCase()}function f(I){return typeof I!="string"&&(I=String(I)),I}function p(I){var R={next:function(){var B=I.shift();return{done:B===void 0,value:B}}};return c.iterable&&(R[Symbol.iterator]=function(){return R}),R}function g(I){this.map={},I instanceof g?I.forEach(function(R,B){this.append(B,R)},this):Array.isArray(I)?I.forEach(function(R){if(R.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+R.length);this.append(R[0],R[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(R){this.append(R,I[R])},this)}g.prototype.append=function(I,R){I=h(I),R=f(R);var B=this.map[I];this.map[I]=B?B+", "+R:R},g.prototype.delete=function(I){delete this.map[h(I)]},g.prototype.get=function(I){return I=h(I),this.has(I)?this.map[I]:null},g.prototype.has=function(I){return this.map.hasOwnProperty(h(I))},g.prototype.set=function(I,R){this.map[h(I)]=f(R)},g.prototype.forEach=function(I,R){for(var B in this.map)this.map.hasOwnProperty(B)&&I.call(R,this.map[B],B,this)},g.prototype.keys=function(){var I=[];return this.forEach(function(R,B){I.push(B)}),p(I)},g.prototype.values=function(){var I=[];return this.forEach(function(R){I.push(R)}),p(I)},g.prototype.entries=function(){var I=[];return this.forEach(function(R,B){I.push([B,R])}),p(I)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function w(I){if(!I._noBody){if(I.bodyUsed)return Promise.reject(new TypeError("Already read"));I.bodyUsed=!0}}function m(I){return new Promise(function(R,B){I.onload=function(){R(I.result)},I.onerror=function(){B(I.error)}})}function b(I){var R=new FileReader,B=m(R);return R.readAsArrayBuffer(I),B}function v(I){var R=new FileReader,B=m(R),O=/charset=([A-Za-z0-9_-]+)/.exec(I.type),M=O?O[1]:"utf-8";return R.readAsText(I,M),B}function A(I){for(var R=new Uint8Array(I),B=new Array(R.length),O=0;O<R.length;O++)B[O]=String.fromCharCode(R[O]);return B.join("")}function C(I){if(I.slice)return I.slice(0);var R=new Uint8Array(I.byteLength);return R.set(new Uint8Array(I)),R.buffer}function T(){return this.bodyUsed=!1,this._initBody=function(I){this.bodyUsed=this.bodyUsed,this._bodyInit=I,I?typeof I=="string"?this._bodyText=I:c.blob&&Blob.prototype.isPrototypeOf(I)?this._bodyBlob=I:c.formData&&FormData.prototype.isPrototypeOf(I)?this._bodyFormData=I:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)?this._bodyText=I.toString():c.arrayBuffer&&c.blob&&l(I)?(this._bodyArrayBuffer=C(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(I)||d(I))?this._bodyArrayBuffer=C(I):this._bodyText=I=Object.prototype.toString.call(I):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var I=w(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var I=w(this);return I||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var I=w(this);if(I)return I;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(D)}),this.json=function(){return this.text().then(JSON.parse)},this}var x=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function N(I){var R=I.toUpperCase();return x.indexOf(R)>-1?R:I}function S(I,R){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');R=R||{};var B=R.body;if(I instanceof S){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,R.headers||(this.headers=new g(I.headers)),this.method=I.method,this.mode=I.mode,this.signal=I.signal,!B&&I._bodyInit!=null&&(B=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=R.credentials||this.credentials||"same-origin",(R.headers||!this.headers)&&(this.headers=new g(R.headers)),this.method=N(R.method||this.method||"GET"),this.mode=R.mode||this.mode||null,this.signal=R.signal||this.signal||function(){if("AbortController"in a){var j=new AbortController;return j.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&B)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(B),(this.method==="GET"||this.method==="HEAD")&&(R.cache==="no-store"||R.cache==="no-cache")){var O=/([?&])_=[^&]*/;if(O.test(this.url))this.url=this.url.replace(O,"$1_="+new Date().getTime());else{var M=/\?/;this.url+=(M.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}S.prototype.clone=function(){return new S(this,{body:this._bodyInit})};function D(I){var R=new FormData;return I.trim().split("&").forEach(function(B){if(B){var O=B.split("="),M=O.shift().replace(/\+/g," "),j=O.join("=").replace(/\+/g," ");R.append(decodeURIComponent(M),decodeURIComponent(j))}}),R}function P(I){var R=new g,B=I.replace(/\r?\n[\t ]+/g," ");return B.split("\r").map(function(O){return O.indexOf(`
`)===0?O.substr(1,O.length):O}).forEach(function(O){var M=O.split(":"),j=M.shift().trim();if(j){var V=M.join(":").trim();try{R.append(j,V)}catch(te){console.warn("Response "+te.message)}}}),R}T.call(S.prototype);function $(I,R){if(!(this instanceof $))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(R||(R={}),this.type="default",this.status=R.status===void 0?200:R.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=R.statusText===void 0?"":""+R.statusText,this.headers=new g(R.headers),this.url=R.url||"",this._initBody(I)}T.call($.prototype),$.prototype.clone=function(){return new $(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},$.error=function(){var I=new $(null,{status:200,statusText:""});return I.ok=!1,I.status=0,I.type="error",I};var G=[301,302,303,307,308];$.redirect=function(I,R){if(G.indexOf(R)===-1)throw new RangeError("Invalid status code");return new $(null,{status:R,headers:{location:I}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(R,B){this.message=R,this.name=B;var O=Error(R);this.stack=O.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function W(I,R){return new Promise(function(B,O){var M=new S(I,R);if(M.signal&&M.signal.aborted)return O(new o.DOMException("Aborted","AbortError"));var j=new XMLHttpRequest;function V(){j.abort()}j.onload=function(){var X={statusText:j.statusText,headers:P(j.getAllResponseHeaders()||"")};M.url.indexOf("file://")===0&&(j.status<200||j.status>599)?X.status=200:X.status=j.status,X.url="responseURL"in j?j.responseURL:X.headers.get("X-Request-URL");var ce="response"in j?j.response:j.responseText;setTimeout(function(){B(new $(ce,X))},0)},j.onerror=function(){setTimeout(function(){O(new TypeError("Network request failed"))},0)},j.ontimeout=function(){setTimeout(function(){O(new TypeError("Network request timed out"))},0)},j.onabort=function(){setTimeout(function(){O(new o.DOMException("Aborted","AbortError"))},0)};function te(X){try{return X===""&&a.location.href?a.location.href:X}catch{return X}}if(j.open(M.method,te(M.url),!0),M.credentials==="include"?j.withCredentials=!0:M.credentials==="omit"&&(j.withCredentials=!1),"responseType"in j&&(c.blob?j.responseType="blob":c.arrayBuffer&&(j.responseType="arraybuffer")),R&&typeof R.headers=="object"&&!(R.headers instanceof g||a.Headers&&R.headers instanceof a.Headers)){var Z=[];Object.getOwnPropertyNames(R.headers).forEach(function(X){Z.push(h(X)),j.setRequestHeader(X,f(R.headers[X]))}),M.headers.forEach(function(X,ce){Z.indexOf(ce)===-1&&j.setRequestHeader(ce,X)})}else M.headers.forEach(function(X,ce){j.setRequestHeader(ce,X)});M.signal&&(M.signal.addEventListener("abort",V),j.onreadystatechange=function(){j.readyState===4&&M.signal.removeEventListener("abort",V)}),j.send(typeof M._bodyInit>"u"?null:M._bodyInit)})}return W.polyfill=!0,a.fetch||(a.fetch=W,a.Headers=g,a.Request=S,a.Response=$),o.Headers=g,o.Request=S,o.Response=$,o.fetch=W,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(FD,FD.exports);var aTe=FD.exports;const aF=Qg(aTe);var cTe=Object.defineProperty,lTe=Object.defineProperties,uTe=Object.getOwnPropertyDescriptors,cF=Object.getOwnPropertySymbols,dTe=Object.prototype.hasOwnProperty,hTe=Object.prototype.propertyIsEnumerable,lF=(t,e,n)=>e in t?cTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uF=(t,e)=>{for(var n in e||(e={}))dTe.call(e,n)&&lF(t,n,e[n]);if(cF)for(var n of cF(e))hTe.call(e,n)&&lF(t,n,e[n]);return t},dF=(t,e)=>lTe(t,uTe(e));const fTe={Accept:"application/json","Content-Type":"application/json"},pTe="POST",hF={headers:fTe,method:pTe},fF=10;let Mc=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new $a.EventEmitter,this.isAvailable=!1,this.registering=!1,!rF(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=rd(e),r=await(await aF(this.url,dF(uF({},hF),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!rF(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=rd({id:1,jsonrpc:"2.0",method:"test",params:[]});await aF(e,dF(uF({},hF),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?kg(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=uT(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return IJ(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>fF&&this.events.setMaxListeners(fF)}};const uE={getSIWX(){return we.state.siwx},async initializeIfEnabled(){var i;const t=we.state.siwx,e=z.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(z.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await ms.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),hr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=yt._getClient())==null?void 0:i.disconnect().catch(console.error)),jt.reset("Connect"),mc.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=we.state.siwx,e=ot.getPlainAddress(z.getActiveCaipAddress()),n=z.getActiveCaipNetwork(),r=yt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();$e.getConnectorId(n.chainNamespace)===Fe.CONNECTOR_ID.AUTH&&jt.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),ms.close(),hr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!ms.state.open||jt.state.view==="ApproveTransaction")&&await ms.open({view:"SIWXSignMessage"}),i.isSmartAccount?mc.showError("This application might not support Smart Accounts"):mc.showError("Signature declined"),hr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await yt.disconnect():ms.close(),jt.reset("Connect"),hr.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=we.state.siwx,e=ot.getPlainAddress(z.getActiveCaipAddress()),n=z.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=jt.state.view==="ApproveTransaction",r=jt.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=uE.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=z.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(mc.showLoading("Authenticating...",{autoClose:!1}),Ve.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),hr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:uE.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),hr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:uE.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{mc.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=z.state.activeChain;return{network:((e=z.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=Ve.state.preferredAccountTypes)==null?void 0:n[t])===Ls.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};function yA(t,e){return $e.getConnectorId(t)===e}function gTe(t){const e=Array.from(z.state.chains.keys());let n=[];return t?(n.push([t,z.state.chains.get(t)]),yA(t,Fe.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&yA(r,Fe.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,z.state.chains.get(r)])}):yA(t,Fe.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&yA(r,Fe.CONNECTOR_ID.AUTH)&&n.push([r,z.state.chains.get(r)])})):n=Array.from(z.state.chains.entries()),n}const Yi={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},Qx={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[Fe.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Fe.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Fe.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[Fe.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[Fe.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[Fe.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[Fe.CONNECTOR_ID.INJECTED]:"Browser Wallet",[Fe.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[Fe.CONNECTOR_ID.COINBASE]:"Coinbase",[Fe.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[Fe.CONNECTOR_ID.LEDGER]:"Ledger",[Fe.CONNECTOR_ID.SAFE]:"Safe"}},hT={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Yi.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},mTe=new AbortController,pl={EmbeddedWalletAbortController:mTe,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${yTe()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function yTe(){return typeof window<"u"}const wTe={createLogger(t,e="error"){const n=hm({level:e}),{logger:r}=sT({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},bTe="rpc.walletconnect.org";function pF(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const XP=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],iy={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===bTe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:Fe.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${Fe.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return XP.includes(e)?pF(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(m=>m.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Qx.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>iy.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Ia(a.url,a.config))}),XP.includes(t.caipNetworkId)&&r.push(Ia(pF(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Ia(a))}),Hx(r)},extendWagmiTransports(t,e,n){if(XP.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return Hx([n,Ia(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:Fe.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=Ke.getActiveCaipNetworkId(),n=z.getAllRequestedCaipNetworks(),r=Array.from(((c=z.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},Jx={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Li=ar({providers:{...Jx},providerIds:{...Jx}}),Bn={state:Li,subscribeKey(t,e){return ii(Li,t,e)},subscribe(t){return ri(Li,()=>{t(Li)})},subscribeProviders(t){return ri(Li.providers,()=>t(Li.providers))},setProvider(t,e){e&&(Li.providers[t]=Sg(e))},getProvider(t){return Li.providers[t]},setProviderId(t,e){e&&(Li.providerIds[t]=e)},getProviderId(t){if(t)return Li.providerIds[t]},reset(){Li.providers={...Jx},Li.providerIds={...Jx}},resetChain(t){Li.providers[t]=void 0,Li.providerIds[t]=void 0}},gF={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Is={set(t,e){$o.isClient&&localStorage.setItem(`${Ge.STORAGE_KEY}${t}`,e)},get(t){return $o.isClient?localStorage.getItem(`${Ge.STORAGE_KEY}${t}`):null},delete(t,e){$o.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ge.STORAGE_KEY}${t}`))}},wA=30*1e3,$o={checkIfAllowedToTriggerEmail(){const t=Is.get(Ge.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<wA){const n=Math.ceil((wA-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Is.get(Ge.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<wA)return Math.ceil((wA-e)/1e3)}return 0},checkIfRequestExists(t){return Ls.NOT_SAFE_RPC_METHODS.includes(t.method)||Ls.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(gF.transactionHash))||(t==null?void 0:t.match(gF.signedMessage)))?Ge.RPC_RESPONSE_TYPE_TX:Ge.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Ls.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var yn;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(yn||(yn={}));var jD;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(jD||(jD={}));const Le=yn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Qd=t=>{switch(typeof t){case"undefined":return Le.undefined;case"string":return Le.string;case"number":return isNaN(t)?Le.nan:Le.number;case"boolean":return Le.boolean;case"function":return Le.function;case"bigint":return Le.bigint;case"symbol":return Le.symbol;case"object":return Array.isArray(t)?Le.array:t===null?Le.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Le.promise:typeof Map<"u"&&t instanceof Map?Le.map:typeof Set<"u"&&t instanceof Set?Le.set:typeof Date<"u"&&t instanceof Date?Le.date:Le.object;default:return Le.unknown}},Ce=yn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),vTe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class xc extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,yn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}xc.create=t=>new xc(t);const CC=(t,e)=>{let n;switch(t.code){case Ce.invalid_type:t.received===Le.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Ce.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,yn.jsonStringifyReplacer)}`;break;case Ce.unrecognized_keys:n=`Unrecognized key(s) in object: ${yn.joinValues(t.keys,", ")}`;break;case Ce.invalid_union:n="Invalid input";break;case Ce.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${yn.joinValues(t.options)}`;break;case Ce.invalid_enum_value:n=`Invalid enum value. Expected ${yn.joinValues(t.options)}, received '${t.received}'`;break;case Ce.invalid_arguments:n="Invalid function arguments";break;case Ce.invalid_return_type:n="Invalid function return type";break;case Ce.invalid_date:n="Invalid date";break;case Ce.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:yn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Ce.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Ce.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Ce.custom:n="Invalid input";break;case Ce.invalid_intersection_types:n="Intersection results could not be merged";break;case Ce.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Ce.not_finite:n="Number must be finite";break;default:n=e.defaultError,yn.assertNever(t)}return{message:n}};let OJ=CC;function ETe(t){OJ=t}function Zx(){return OJ}const Xx=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},CTe=[];function ze(t,e){const n=Xx({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Zx(),CC].filter(r=>!!r)});t.common.issues.push(n)}class si{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return kt;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return si.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return kt;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const kt=Object.freeze({status:"aborted"}),kJ=t=>({status:"dirty",value:t}),xi=t=>({status:"valid",value:t}),WD=t=>t.status==="aborted",zD=t=>t.status==="dirty",_C=t=>t.status==="valid",eI=t=>typeof Promise<"u"&&t instanceof Promise;var lt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(lt||(lt={}));class $l{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const mF=(t,e)=>{if(_C(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new xc(t.common.issues);return this._error=n,this._error}}};function Bt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class Wt{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Qd(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Qd(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new si,ctx:{common:e.parent.common,data:e.data,parsedType:Qd(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(eI(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Qd(e)},i=this._parseSync({data:e,path:s.path,parent:s});return mF(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Qd(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(eI(s)?s:Promise.resolve(s));return mF(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Ce.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Oc({schema:this,typeName:_t.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Wu.create(this,this._def)}nullable(){return Ug.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ic.create(this,this._def)}promise(){return Aw.create(this,this._def)}or(e){return IC.create([this,e],this._def)}and(e){return NC.create(this,e,this._def)}transform(e){return new Oc({...Bt(this._def),schema:this,typeName:_t.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new kC({...Bt(this._def),innerType:this,defaultValue:n,typeName:_t.ZodDefault})}brand(){return new MJ({typeName:_t.ZodBranded,type:this,...Bt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new sI({...Bt(this._def),innerType:this,catchValue:n,typeName:_t.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return t1.create(this,e)}readonly(){return oI.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const _Te=/^c[^\s-]{8,}$/i,ATe=/^[a-z][a-z0-9]*$/,STe=/^[0-9A-HJKMNP-TV-Z]{26}$/,xTe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ITe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,NTe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let eO;const TTe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,RTe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,PTe=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function OTe(t,e){return!!((e==="v4"||!e)&&TTe.test(t)||(e==="v6"||!e)&&RTe.test(t))}class Ec extends Wt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Le.string){const i=this._getOrReturnCtx(e);return ze(i,{code:Ce.invalid_type,expected:Le.string,received:i.parsedType}),kt}const r=new si;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),ze(s,{code:Ce.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),ze(s,{code:Ce.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?ze(s,{code:Ce.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&ze(s,{code:Ce.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")ITe.test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"email",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")eO||(eO=new RegExp(NTe,"u")),eO.test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"emoji",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")xTe.test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"uuid",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")_Te.test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"cuid",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")ATe.test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"cuid2",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")STe.test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"ulid",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ze(s,{validation:"url",code:Ce.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"regex",code:Ce.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),ze(s,{code:Ce.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),ze(s,{code:Ce.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),ze(s,{code:Ce.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?PTe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{code:Ce.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?OTe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"ip",code:Ce.invalid_string,message:i.message}),r.dirty()):yn.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Ce.invalid_string,...lt.errToObj(r)})}_addCheck(e){return new Ec({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...lt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...lt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...lt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...lt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...lt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...lt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...lt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...lt.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...lt.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...lt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...lt.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...lt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...lt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...lt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...lt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...lt.errToObj(n)})}nonempty(e){return this.min(1,lt.errToObj(e))}trim(){return new Ec({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ec({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ec({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ec.create=t=>{var e;return new Ec({checks:[],typeName:_t.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Bt(t)})};function kTe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class pf extends Wt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Le.number){const i=this._getOrReturnCtx(e);return ze(i,{code:Ce.invalid_type,expected:Le.number,received:i.parsedType}),kt}let r;const s=new si;for(const i of this._def.checks)i.kind==="int"?yn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ze(r,{code:Ce.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ze(r,{code:Ce.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ze(r,{code:Ce.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?kTe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),ze(r,{code:Ce.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ze(r,{code:Ce.not_finite,message:i.message}),s.dirty()):yn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,lt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,lt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,lt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,lt.toString(n))}setLimit(e,n,r,s){return new pf({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:lt.toString(s)}]})}_addCheck(e){return new pf({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:lt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:lt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:lt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:lt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:lt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:lt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:lt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:lt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:lt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&yn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}pf.create=t=>new pf({checks:[],typeName:_t.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Bt(t)});class gf extends Wt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Le.bigint){const i=this._getOrReturnCtx(e);return ze(i,{code:Ce.invalid_type,expected:Le.bigint,received:i.parsedType}),kt}let r;const s=new si;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ze(r,{code:Ce.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ze(r,{code:Ce.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ze(r,{code:Ce.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):yn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,lt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,lt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,lt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,lt.toString(n))}setLimit(e,n,r,s){return new gf({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:lt.toString(s)}]})}_addCheck(e){return new gf({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:lt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:lt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:lt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:lt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:lt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}gf.create=t=>{var e;return new gf({checks:[],typeName:_t.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Bt(t)})};class AC extends Wt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Le.boolean){const r=this._getOrReturnCtx(e);return ze(r,{code:Ce.invalid_type,expected:Le.boolean,received:r.parsedType}),kt}return xi(e.data)}}AC.create=t=>new AC({typeName:_t.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Bt(t)});class Mg extends Wt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Le.date){const i=this._getOrReturnCtx(e);return ze(i,{code:Ce.invalid_type,expected:Le.date,received:i.parsedType}),kt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return ze(i,{code:Ce.invalid_date}),kt}const r=new si;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),ze(s,{code:Ce.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),ze(s,{code:Ce.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):yn.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Mg({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:lt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:lt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Mg.create=t=>new Mg({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:_t.ZodDate,...Bt(t)});class tI extends Wt{_parse(e){if(this._getType(e)!==Le.symbol){const r=this._getOrReturnCtx(e);return ze(r,{code:Ce.invalid_type,expected:Le.symbol,received:r.parsedType}),kt}return xi(e.data)}}tI.create=t=>new tI({typeName:_t.ZodSymbol,...Bt(t)});class SC extends Wt{_parse(e){if(this._getType(e)!==Le.undefined){const r=this._getOrReturnCtx(e);return ze(r,{code:Ce.invalid_type,expected:Le.undefined,received:r.parsedType}),kt}return xi(e.data)}}SC.create=t=>new SC({typeName:_t.ZodUndefined,...Bt(t)});class xC extends Wt{_parse(e){if(this._getType(e)!==Le.null){const r=this._getOrReturnCtx(e);return ze(r,{code:Ce.invalid_type,expected:Le.null,received:r.parsedType}),kt}return xi(e.data)}}xC.create=t=>new xC({typeName:_t.ZodNull,...Bt(t)});class _w extends Wt{constructor(){super(...arguments),this._any=!0}_parse(e){return xi(e.data)}}_w.create=t=>new _w({typeName:_t.ZodAny,...Bt(t)});class ug extends Wt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return xi(e.data)}}ug.create=t=>new ug({typeName:_t.ZodUnknown,...Bt(t)});class sd extends Wt{_parse(e){const n=this._getOrReturnCtx(e);return ze(n,{code:Ce.invalid_type,expected:Le.never,received:n.parsedType}),kt}}sd.create=t=>new sd({typeName:_t.ZodNever,...Bt(t)});class nI extends Wt{_parse(e){if(this._getType(e)!==Le.undefined){const r=this._getOrReturnCtx(e);return ze(r,{code:Ce.invalid_type,expected:Le.void,received:r.parsedType}),kt}return xi(e.data)}}nI.create=t=>new nI({typeName:_t.ZodVoid,...Bt(t)});class Ic extends Wt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Le.array)return ze(n,{code:Ce.invalid_type,expected:Le.array,received:n.parsedType}),kt;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(ze(n,{code:o?Ce.too_big:Ce.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(ze(n,{code:Ce.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(ze(n,{code:Ce.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new $l(n,o,n.path,a)))).then(o=>si.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new $l(n,o,n.path,a)));return si.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Ic({...this._def,minLength:{value:e,message:lt.toString(n)}})}max(e,n){return new Ic({...this._def,maxLength:{value:e,message:lt.toString(n)}})}length(e,n){return new Ic({...this._def,exactLength:{value:e,message:lt.toString(n)}})}nonempty(e){return this.min(1,e)}}Ic.create=(t,e)=>new Ic({type:t,minLength:null,maxLength:null,exactLength:null,typeName:_t.ZodArray,...Bt(e)});function oy(t){if(t instanceof fr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Wu.create(oy(r))}return new fr({...t._def,shape:()=>e})}else return t instanceof Ic?new Ic({...t._def,type:oy(t.element)}):t instanceof Wu?Wu.create(oy(t.unwrap())):t instanceof Ug?Ug.create(oy(t.unwrap())):t instanceof Fl?Fl.create(t.items.map(e=>oy(e))):t}class fr extends Wt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=yn.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Le.object){const l=this._getOrReturnCtx(e);return ze(l,{code:Ce.invalid_type,expected:Le.object,received:l.parsedType}),kt}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof sd&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new $l(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof sd){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(ze(s,{code:Ce.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new $l(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>si.mergeObjectSync(r,l)):si.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return lt.errToObj,new fr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=lt.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new fr({...this._def,unknownKeys:"strip"})}passthrough(){return new fr({...this._def,unknownKeys:"passthrough"})}extend(e){return new fr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new fr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:_t.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new fr({...this._def,catchall:e})}pick(e){const n={};return yn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new fr({...this._def,shape:()=>n})}omit(e){const n={};return yn.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new fr({...this._def,shape:()=>n})}deepPartial(){return oy(this)}partial(e){const n={};return yn.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new fr({...this._def,shape:()=>n})}required(e){const n={};return yn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Wu;)i=i._def.innerType;n[r]=i}}),new fr({...this._def,shape:()=>n})}keyof(){return DJ(yn.objectKeys(this.shape))}}fr.create=(t,e)=>new fr({shape:()=>t,unknownKeys:"strip",catchall:sd.create(),typeName:_t.ZodObject,...Bt(e)});fr.strictCreate=(t,e)=>new fr({shape:()=>t,unknownKeys:"strict",catchall:sd.create(),typeName:_t.ZodObject,...Bt(e)});fr.lazycreate=(t,e)=>new fr({shape:t,unknownKeys:"strip",catchall:sd.create(),typeName:_t.ZodObject,...Bt(e)});class IC extends Wt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new xc(a.ctx.common.issues));return ze(n,{code:Ce.invalid_union,unionErrors:o}),kt}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new xc(c));return ze(n,{code:Ce.invalid_union,unionErrors:a}),kt}}get options(){return this._def.options}}IC.create=(t,e)=>new IC({options:t,typeName:_t.ZodUnion,...Bt(e)});const yS=t=>t instanceof RC?yS(t.schema):t instanceof Oc?yS(t.innerType()):t instanceof PC?[t.value]:t instanceof mf?t.options:t instanceof OC?Object.keys(t.enum):t instanceof kC?yS(t._def.innerType):t instanceof SC?[void 0]:t instanceof xC?[null]:null;class fT extends Wt{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Le.object)return ze(n,{code:Ce.invalid_type,expected:Le.object,received:n.parsedType}),kt;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(ze(n,{code:Ce.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),kt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=yS(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new fT({typeName:_t.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Bt(r)})}}function HD(t,e){const n=Qd(t),r=Qd(e);if(t===e)return{valid:!0,data:t};if(n===Le.object&&r===Le.object){const s=yn.objectKeys(e),i=yn.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=HD(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===Le.array&&r===Le.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=HD(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===Le.date&&r===Le.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class NC extends Wt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(WD(i)||WD(o))return kt;const a=HD(i.value,o.value);return a.valid?((zD(i)||zD(o))&&n.dirty(),{status:n.value,value:a.data}):(ze(r,{code:Ce.invalid_intersection_types}),kt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}NC.create=(t,e,n)=>new NC({left:t,right:e,typeName:_t.ZodIntersection,...Bt(n)});class Fl extends Wt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Le.array)return ze(r,{code:Ce.invalid_type,expected:Le.array,received:r.parsedType}),kt;if(r.data.length<this._def.items.length)return ze(r,{code:Ce.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),kt;!this._def.rest&&r.data.length>this._def.items.length&&(ze(r,{code:Ce.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new $l(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>si.mergeArray(n,o)):si.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Fl({...this._def,rest:e})}}Fl.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Fl({items:t,typeName:_t.ZodTuple,rest:null,...Bt(e)})};class TC extends Wt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Le.object)return ze(r,{code:Ce.invalid_type,expected:Le.object,received:r.parsedType}),kt;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new $l(r,a,r.path,a)),value:o._parse(new $l(r,r.data[a],r.path,a))});return r.common.async?si.mergeObjectAsync(n,s):si.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Wt?new TC({keyType:e,valueType:n,typeName:_t.ZodRecord,...Bt(r)}):new TC({keyType:Ec.create(),valueType:e,typeName:_t.ZodRecord,...Bt(n)})}}class rI extends Wt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Le.map)return ze(r,{code:Ce.invalid_type,expected:Le.map,received:r.parsedType}),kt;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new $l(r,a,r.path,[l,"key"])),value:i._parse(new $l(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return kt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return kt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}rI.create=(t,e,n)=>new rI({valueType:e,keyType:t,typeName:_t.ZodMap,...Bt(n)});class Lg extends Wt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Le.set)return ze(r,{code:Ce.invalid_type,expected:Le.set,received:r.parsedType}),kt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(ze(r,{code:Ce.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(ze(r,{code:Ce.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return kt;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new $l(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new Lg({...this._def,minSize:{value:e,message:lt.toString(n)}})}max(e,n){return new Lg({...this._def,maxSize:{value:e,message:lt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Lg.create=(t,e)=>new Lg({valueType:t,minSize:null,maxSize:null,typeName:_t.ZodSet,...Bt(e)});class qy extends Wt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Le.function)return ze(n,{code:Ce.invalid_type,expected:Le.function,received:n.parsedType}),kt;function r(a,c){return Xx({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Zx(),CC].filter(l=>!!l),issueData:{code:Ce.invalid_arguments,argumentsError:c}})}function s(a,c){return Xx({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Zx(),CC].filter(l=>!!l),issueData:{code:Ce.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Aw){const a=this;return xi(async function(...c){const l=new xc([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return xi(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new xc([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new xc([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new qy({...this._def,args:Fl.create(e).rest(ug.create())})}returns(e){return new qy({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new qy({args:e||Fl.create([]).rest(ug.create()),returns:n||ug.create(),typeName:_t.ZodFunction,...Bt(r)})}}class RC extends Wt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}RC.create=(t,e)=>new RC({getter:t,typeName:_t.ZodLazy,...Bt(e)});class PC extends Wt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ze(n,{received:n.data,code:Ce.invalid_literal,expected:this._def.value}),kt}return{status:"valid",value:e.data}}get value(){return this._def.value}}PC.create=(t,e)=>new PC({value:t,typeName:_t.ZodLiteral,...Bt(e)});function DJ(t,e){return new mf({values:t,typeName:_t.ZodEnum,...Bt(e)})}class mf extends Wt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return ze(n,{expected:yn.joinValues(r),received:n.parsedType,code:Ce.invalid_type}),kt}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return ze(n,{received:n.data,code:Ce.invalid_enum_value,options:r}),kt}return xi(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return mf.create(e)}exclude(e){return mf.create(this.options.filter(n=>!e.includes(n)))}}mf.create=DJ;class OC extends Wt{_parse(e){const n=yn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Le.string&&r.parsedType!==Le.number){const s=yn.objectValues(n);return ze(r,{expected:yn.joinValues(s),received:r.parsedType,code:Ce.invalid_type}),kt}if(n.indexOf(e.data)===-1){const s=yn.objectValues(n);return ze(r,{received:r.data,code:Ce.invalid_enum_value,options:s}),kt}return xi(e.data)}get enum(){return this._def.values}}OC.create=(t,e)=>new OC({values:t,typeName:_t.ZodNativeEnum,...Bt(e)});class Aw extends Wt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Le.promise&&n.common.async===!1)return ze(n,{code:Ce.invalid_type,expected:Le.promise,received:n.parsedType}),kt;const r=n.parsedType===Le.promise?n.data:Promise.resolve(n.data);return xi(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Aw.create=(t,e)=>new Aw({type:t,typeName:_t.ZodPromise,...Bt(e)});class Oc extends Wt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===_t.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{ze(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?kt:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?kt:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!_C(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>_C(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);yn.assertNever(s)}}Oc.create=(t,e,n)=>new Oc({schema:t,typeName:_t.ZodEffects,effect:e,...Bt(n)});Oc.createWithPreprocess=(t,e,n)=>new Oc({schema:e,effect:{type:"preprocess",transform:t},typeName:_t.ZodEffects,...Bt(n)});class Wu extends Wt{_parse(e){return this._getType(e)===Le.undefined?xi(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Wu.create=(t,e)=>new Wu({innerType:t,typeName:_t.ZodOptional,...Bt(e)});class Ug extends Wt{_parse(e){return this._getType(e)===Le.null?xi(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ug.create=(t,e)=>new Ug({innerType:t,typeName:_t.ZodNullable,...Bt(e)});class kC extends Wt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Le.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}kC.create=(t,e)=>new kC({innerType:t,typeName:_t.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Bt(e)});class sI extends Wt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return eI(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new xc(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new xc(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}sI.create=(t,e)=>new sI({innerType:t,typeName:_t.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Bt(e)});class iI extends Wt{_parse(e){if(this._getType(e)!==Le.nan){const r=this._getOrReturnCtx(e);return ze(r,{code:Ce.invalid_type,expected:Le.nan,received:r.parsedType}),kt}return{status:"valid",value:e.data}}}iI.create=t=>new iI({typeName:_t.ZodNaN,...Bt(t)});const DTe=Symbol("zod_brand");class MJ extends Wt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class t1 extends Wt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?kt:i.status==="dirty"?(n.dirty(),kJ(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?kt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new t1({in:e,out:n,typeName:_t.ZodPipeline})}}class oI extends Wt{_parse(e){const n=this._def.innerType._parse(e);return _C(n)&&(n.value=Object.freeze(n.value)),n}}oI.create=(t,e)=>new oI({innerType:t,typeName:_t.ZodReadonly,...Bt(e)});const LJ=(t,e={},n)=>t?_w.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):_w.create(),MTe={object:fr.lazycreate};var _t;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(_t||(_t={}));const LTe=(t,e={message:`Input not instance of ${t.name}`})=>LJ(n=>n instanceof t,e),UJ=Ec.create,BJ=pf.create,UTe=iI.create,BTe=gf.create,$J=AC.create,$Te=Mg.create,FTe=tI.create,jTe=SC.create,WTe=xC.create,zTe=_w.create,HTe=ug.create,GTe=sd.create,qTe=nI.create,VTe=Ic.create,KTe=fr.create,YTe=fr.strictCreate,QTe=IC.create,JTe=fT.create,ZTe=NC.create,XTe=Fl.create,eRe=TC.create,tRe=rI.create,nRe=Lg.create,rRe=qy.create,sRe=RC.create,iRe=PC.create,oRe=mf.create,aRe=OC.create,cRe=Aw.create,yF=Oc.create,lRe=Wu.create,uRe=Ug.create,dRe=Oc.createWithPreprocess,hRe=t1.create,fRe=()=>UJ().optional(),pRe=()=>BJ().optional(),gRe=()=>$J().optional(),mRe={string:t=>Ec.create({...t,coerce:!0}),number:t=>pf.create({...t,coerce:!0}),boolean:t=>AC.create({...t,coerce:!0}),bigint:t=>gf.create({...t,coerce:!0}),date:t=>Mg.create({...t,coerce:!0})},yRe=kt;var E=Object.freeze({__proto__:null,defaultErrorMap:CC,setErrorMap:ETe,getErrorMap:Zx,makeIssue:Xx,EMPTY_PATH:CTe,addIssueToContext:ze,ParseStatus:si,INVALID:kt,DIRTY:kJ,OK:xi,isAborted:WD,isDirty:zD,isValid:_C,isAsync:eI,get util(){return yn},get objectUtil(){return jD},ZodParsedType:Le,getParsedType:Qd,ZodType:Wt,ZodString:Ec,ZodNumber:pf,ZodBigInt:gf,ZodBoolean:AC,ZodDate:Mg,ZodSymbol:tI,ZodUndefined:SC,ZodNull:xC,ZodAny:_w,ZodUnknown:ug,ZodNever:sd,ZodVoid:nI,ZodArray:Ic,ZodObject:fr,ZodUnion:IC,ZodDiscriminatedUnion:fT,ZodIntersection:NC,ZodTuple:Fl,ZodRecord:TC,ZodMap:rI,ZodSet:Lg,ZodFunction:qy,ZodLazy:RC,ZodLiteral:PC,ZodEnum:mf,ZodNativeEnum:OC,ZodPromise:Aw,ZodEffects:Oc,ZodTransformer:Oc,ZodOptional:Wu,ZodNullable:Ug,ZodDefault:kC,ZodCatch:sI,ZodNaN:iI,BRAND:DTe,ZodBranded:MJ,ZodPipeline:t1,ZodReadonly:oI,custom:LJ,Schema:Wt,ZodSchema:Wt,late:MTe,get ZodFirstPartyTypeKind(){return _t},coerce:mRe,any:zTe,array:VTe,bigint:BTe,boolean:$J,date:$Te,discriminatedUnion:JTe,effect:yF,enum:oRe,function:rRe,instanceof:LTe,intersection:ZTe,lazy:sRe,literal:iRe,map:tRe,nan:UTe,nativeEnum:aRe,never:GTe,null:WTe,nullable:uRe,number:BJ,object:KTe,oboolean:gRe,onumber:pRe,optional:lRe,ostring:fRe,pipeline:hRe,preprocess:dRe,promise:cRe,record:eRe,set:nRe,strictObject:YTe,string:UJ,symbol:FTe,transformer:yF,tuple:XTe,undefined:jTe,union:QTe,unknown:HTe,void:qTe,NEVER:yRe,ZodIssueCode:Ce,quotelessJson:vTe,ZodError:xc});const vr=E.object({message:E.string()});function je(t){return E.literal(Ge[t])}E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const wRe=E.object({chainId:E.string().or(E.number())}),bRe=E.object({email:E.string().email()}),vRe=E.object({otp:E.string()}),ERe=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number()))}),CRe=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string())}),_Re=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),ARe=E.object({email:E.string().email()}),SRe=E.object({otp:E.string()}),xRe=E.object({otp:E.string()}),IRe=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),NRe=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),TRe=E.object({type:E.string()}),RRe=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),PRe=E.object({url:E.string()}),ORe=E.object({userName:E.string()}),kRe=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([Ls.ACCOUNT_TYPES.EOA,Ls.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string())}),DRe=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),MRe=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([Ls.ACCOUNT_TYPES.EOA,Ls.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string())}),LRe=E.object({uri:E.string()}),URe=E.object({isConnected:E.boolean()}),BRe=E.object({chainId:E.string().or(E.number())}),$Re=E.object({chainId:E.string().or(E.number())}),FRe=E.object({newEmail:E.string().email()}),jRe=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const WRe=E.object({version:E.string().optional()}),zRe=E.object({type:E.string(),address:E.string()}),HRe=E.any(),GRe=E.object({method:E.literal("eth_accounts")}),qRe=E.object({method:E.literal("eth_blockNumber")}),VRe=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),KRe=E.object({method:E.literal("eth_chainId")}),YRe=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),QRe=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),JRe=E.object({method:E.literal("eth_gasPrice")}),ZRe=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),XRe=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),ePe=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),tPe=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),nPe=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),rPe=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),sPe=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),iPe=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),oPe=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),aPe=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),cPe=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),lPe=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),uPe=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),dPe=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),hPe=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),fPe=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),pPe=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),gPe=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),mPe=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),yPe=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),wPe=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),bPe=E.object({method:E.literal("eth_newBlockFilter")}),vPe=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),EPe=E.object({method:E.literal("eth_newPendingTransactionFilter")}),CPe=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),_Pe=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),APe=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),wF=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),SPe=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),xPe=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),IPe=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),NPe=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),TPe=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),RPe=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),PPe=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),OPe=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),kPe=E.object({method:E.literal("wallet_getCapabilities")}),DPe=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),MPe=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),LPe=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),bF=E.object({token:E.string()}),We=E.object({id:E.string().optional()}),ev={appEvent:We.extend({type:je("APP_SWITCH_NETWORK"),payload:wRe}).or(We.extend({type:je("APP_CONNECT_EMAIL"),payload:bRe})).or(We.extend({type:je("APP_CONNECT_DEVICE")})).or(We.extend({type:je("APP_CONNECT_OTP"),payload:vRe})).or(We.extend({type:je("APP_CONNECT_SOCIAL"),payload:ERe})).or(We.extend({type:je("APP_GET_FARCASTER_URI")})).or(We.extend({type:je("APP_CONNECT_FARCASTER")})).or(We.extend({type:je("APP_GET_USER"),payload:E.optional(CRe)})).or(We.extend({type:je("APP_GET_SOCIAL_REDIRECT_URI"),payload:_Re})).or(We.extend({type:je("APP_SIGN_OUT")})).or(We.extend({type:je("APP_IS_CONNECTED"),payload:E.optional(bF)})).or(We.extend({type:je("APP_GET_CHAIN_ID")})).or(We.extend({type:je("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(We.extend({type:je("APP_INIT_SMART_ACCOUNT")})).or(We.extend({type:je("APP_SET_PREFERRED_ACCOUNT"),payload:TRe})).or(We.extend({type:je("APP_RPC_REQUEST"),payload:wF.or(LPe).or(GRe).or(qRe).or(VRe).or(KRe).or(YRe).or(QRe).or(JRe).or(ZRe).or(XRe).or(ePe).or(tPe).or(nPe).or(rPe).or(sPe).or(iPe).or(oPe).or(aPe).or(cPe).or(lPe).or(uPe).or(dPe).or(hPe).or(fPe).or(pPe).or(gPe).or(mPe).or(yPe).or(wPe).or(bPe).or(vPe).or(EPe).or(CPe).or(_Pe).or(APe).or(wF).or(SPe).or(xPe).or(IPe).or(NPe).or(TPe).or(RPe).or(OPe).or(PPe).or(kPe).or(DPe).or(MPe)})).or(We.extend({type:je("APP_UPDATE_EMAIL"),payload:ARe})).or(We.extend({type:je("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:SRe})).or(We.extend({type:je("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:xRe})).or(We.extend({type:je("APP_SYNC_THEME"),payload:IRe})).or(We.extend({type:je("APP_SYNC_DAPP_DATA"),payload:NRe})).or(We.extend({type:je("APP_RELOAD")})),frameEvent:We.extend({type:je("FRAME_SWITCH_NETWORK_ERROR"),payload:vr}).or(We.extend({type:je("FRAME_SWITCH_NETWORK_SUCCESS"),payload:$Re})).or(We.extend({type:je("FRAME_CONNECT_EMAIL_SUCCESS"),payload:RRe})).or(We.extend({type:je("FRAME_CONNECT_EMAIL_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:PRe})).or(We.extend({type:je("FRAME_GET_FARCASTER_URI_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:ORe})).or(We.extend({type:je("FRAME_CONNECT_FARCASTER_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_CONNECT_OTP_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_CONNECT_OTP_SUCCESS")})).or(We.extend({type:je("FRAME_CONNECT_DEVICE_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_CONNECT_DEVICE_SUCCESS")})).or(We.extend({type:je("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:kRe})).or(We.extend({type:je("FRAME_CONNECT_SOCIAL_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_GET_USER_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_GET_USER_SUCCESS"),payload:MRe})).or(We.extend({type:je("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:LRe})).or(We.extend({type:je("FRAME_SIGN_OUT_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_SIGN_OUT_SUCCESS")})).or(We.extend({type:je("FRAME_IS_CONNECTED_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_IS_CONNECTED_SUCCESS"),payload:URe})).or(We.extend({type:je("FRAME_GET_CHAIN_ID_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_GET_CHAIN_ID_SUCCESS"),payload:BRe})).or(We.extend({type:je("FRAME_RPC_REQUEST_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_RPC_REQUEST_SUCCESS"),payload:HRe})).or(We.extend({type:je("FRAME_SESSION_UPDATE"),payload:bF})).or(We.extend({type:je("FRAME_UPDATE_EMAIL_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_UPDATE_EMAIL_SUCCESS"),payload:DRe})).or(We.extend({type:je("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(We.extend({type:je("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:FRe})).or(We.extend({type:je("FRAME_SYNC_THEME_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_SYNC_THEME_SUCCESS")})).or(We.extend({type:je("FRAME_SYNC_DAPP_DATA_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(We.extend({type:je("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:jRe})).or(We.extend({type:je("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:zRe})).or(We.extend({type:je("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_READY"),payload:WRe})).or(We.extend({type:je("FRAME_RELOAD_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_RELOAD_SUCCESS")}))};function tO(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}let UPe=class{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=Fe.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!tO(Ge.FRAME_EVENT_KEY,l))return;const u=ev.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}$o.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{$o.isClient&&window.addEventListener("message",({data:o})=>{if(!tO(Ge.FRAME_EVENT_KEY,o))return;const a=ev.frameEvent.parse(o);i(a)})},onAppEvent:i=>{$o.isClient&&window.addEventListener("message",({data:o})=>{if(!tO(Ge.APP_EVENT_KEY,o))return;const a=ev.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if($o.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");ev.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if($o.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");ev.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),$o.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${Nye}?projectId=${e}&chainId=${r}&version=${Rye}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}},BPe=class{constructor(e){var i;const n=hm({level:Tye}),{logger:r,chunkLoggerController:s}=sT({opts:n});this.logger=Fs(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}},$Pe=class{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new BPe(e)),this.abortController=i,this.w3mFrame=new UPe({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Ge.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Is.get(Ge.EMAIL_LOGIN_USED_KEY)}getEmail(){return Is.get(Ge.EMAIL)}getUsername(){return Is.get(Ge.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Ge.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{$o.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Ge.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Ge.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Ge.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Ge.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Ge.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Ge.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Ge.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Ge.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Ge.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Ge.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Ge.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Ge.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Ge.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:Ge.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ge.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:Ge.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Ge.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Ge.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:Ge.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Ge.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(Ls.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:Ge.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ge.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ge.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Ge.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ge.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ge.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ge.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Ge.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Ls.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ge.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===Ge.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{Ls.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Ge.APP_SYNC_DAPP_DATA,Ge.APP_SYNC_THEME,Ge.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Ge.APP_CONNECT_EMAIL,Ge.APP_CONNECT_DEVICE,Ge.APP_CONNECT_OTP,Ge.APP_CONNECT_SOCIAL,Ge.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},3e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,m){var b,v,A;w.id===u&&((v=m==null?void 0:(b=m.logger).info)==null||v.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((A=w.payload)==null?void 0:A.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Is.set(Ge.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Is.set(Ge.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Is.set(Ge.EMAIL,e),Is.set(Ge.EMAIL_LOGIN_USED_KEY,"true"),Is.delete(Ge.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Is.delete(Ge.EMAIL_LOGIN_USED_KEY),Is.delete(Ge.EMAIL),Is.delete(Ge.LAST_USED_CHAIN_KEY),Is.delete(Ge.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Is.set(Ge.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Is.get(Ge.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Is.set(Ge.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}},FPe=class wS{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return wS.instance||(wS.instance=new $Pe({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),wS.instance}};function jPe(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function os(t,...e){try{return jPe(t(...e))}catch(n){return Promise.reject(n)}}function WPe(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function zPe(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function bS(t){if(WPe(t))return String(t);if(zPe(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return bS(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const GD="base64:";function HPe(t){return typeof t=="string"?t:GD+VPe(t)}function GPe(t){return typeof t!="string"||!t.startsWith(GD)?t:qPe(t.slice(GD.length))}function qPe(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function VPe(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function ji(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function KPe(...t){return ji(t.join(":"))}function bA(t){return t=ji(t),t?t+":":""}function YPe(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function QPe(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const JPe="memory",ZPe=()=>{const t=new Map;return{name:JPe,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function XPe(t={}){const e={mounts:{"":t.driver||ZPe()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=ji(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await vF(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",w=ji(g?p:p.key),m=g?void 0:p.value,b=g||!p.options?u:{...u,...p.options},v=n(w);f(v).items.push({key:w,value:m,relativeKey:v.relativeKey,options:b})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=ji(l);const{relativeKey:d,driver:h}=n(l);return os(h.hasItem,d,u)},getItem(l,u={}){l=ji(l);const{relativeKey:d,driver:h}=n(l);return os(h.getItem,d,u).then(f=>hA(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?os(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:KPe(d.base,f.key),value:hA(f.value)}))):Promise.all(d.items.map(h=>os(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:hA(f)})))))},getItemRaw(l,u={}){l=ji(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?os(h.getItemRaw,d,u):os(h.getItem,d,u).then(f=>GPe(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=ji(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await os(f.setItem,h,bS(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return os(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:bS(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>os(d.driver.setItem,h.relativeKey,bS(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=ji(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await os(f.setItemRaw,h,u,d);else if(f.setItem)await os(f.setItem,h,HPe(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=ji(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await os(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await os(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=ji(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await os(h.getMeta,d,u)),!u.nativeOnly){const p=await os(h.getItem,d+"$",u).then(g=>hA(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var w;l=bA(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const m of d){(w=m.driver.flags)!=null&&w.maxDepth||(p=!1);const b=await os(m.driver.getKeys,m.relativeBase,u);for(const v of b){const A=m.mountpoint+ji(v);h.some(C=>A.startsWith(C))||f.push(A)}h=[m.mountpoint,...h.filter(v=>!v.startsWith(m.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(m=>(!g||YPe(m,u.maxDepth))&&QPe(m,l))},async clear(l,u={}){l=bA(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return os(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>EF(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=bA(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(vF(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=bA(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await EF(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=ji(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=ji(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function vF(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function EF(t){typeof t.dispose=="function"&&await os(t.dispose)}const eOe="idb-keyval";var tOe=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=BQ(t.dbName,t.storeName)),{name:eOe,options:t,async hasItem(s){return!(typeof await A4(n(s),r)>"u")},async getItem(s){return await A4(n(s),r)??null},setItem(s,i){return S1e(n(s),i,r)},removeItem(s){return x1e(n(s),r)},getKeys(){return T1e(r)},clear(){return I1e(r)}}};const nOe="WALLET_CONNECT_V2_INDEXED_DB",rOe="keyvaluestorage";let sOe=class{constructor(){this.indexedDb=XPe({driver:tOe({dbName:nOe,storeName:rOe})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,rd(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var nO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vS={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof nO<"u"&&nO.localStorage?vS.exports=nO.localStorage:typeof window<"u"&&window.localStorage?vS.exports=window.localStorage:vS.exports=new e})();function iOe(t){var e;return[t[0],kg((e=t[1])!=null?e:"")]}let oOe=class{constructor(){this.localStorage=vS.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(iOe)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return kg(n)}async setItem(e,n){this.localStorage.setItem(e,rd(n))}async removeItem(e){this.localStorage.removeItem(e)}};const aOe="wc_storage_version",CF=1,cOe=async(t,e,n)=>{const r=aOe,s=await e.getItem(r);if(s&&s>=CF){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,CF),n(e),lOe(t,o)},lOe=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let uOe=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new oOe;this.storage=e;try{const n=new sOe;cOe(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var dOe=Object.defineProperty,hOe=(t,e,n)=>e in t?dOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_F=(t,e,n)=>hOe(t,typeof e!="symbol"?e+"":e,n);let fOe=class extends lm{constructor(e){super(),this.opts=e,_F(this,"protocol","wc"),_F(this,"version",2)}};var pOe=Object.defineProperty,gOe=(t,e,n)=>e in t?pOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mOe=(t,e,n)=>gOe(t,e+"",n);let yOe=class extends lm{constructor(e,n){super(),this.core=e,this.logger=n,mOe(this,"records",new Map)}},wOe=class{constructor(e,n){this.logger=e,this.core=n}},bOe=class extends lm{constructor(e,n){super(),this.relayer=e,this.logger=n}},vOe=class extends lm{constructor(e){super()}},EOe=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},COe=class extends lm{constructor(e,n){super(),this.relayer=e,this.logger=n}},_Oe=class extends lm{constructor(e,n){super(),this.core=e,this.logger=n}},AOe=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},SOe=class{constructor(e,n){this.projectId=e,this.logger=n}},xOe=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var IOe=Object.defineProperty,NOe=(t,e,n)=>e in t?IOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,AF=(t,e,n)=>NOe(t,typeof e!="symbol"?e+"":e,n);let TOe=class{constructor(e){this.opts=e,AF(this,"protocol","wc"),AF(this,"version",2)}},ROe=class{constructor(e){this.client=e}};function DC(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function SF(t){return DC(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const FJ="2.23.2";let tv={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${FJ}`},pT=class qD extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof qD?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof qD&&n.cause.docsPath||n.docsPath,i=(a=tv.getDocsUrl)==null?void 0:a.call(tv,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...tv.version?[`Version: ${tv.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=FJ}walk(e){return jJ(this,e)}};function jJ(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?jJ(t.cause,e):e?null:t}class WJ extends pT{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function db(t,{dir:e,size:n=32}={}){return typeof t=="string"?POe(t,{dir:e,size:n}):OOe(t,{dir:e,size:n})}function POe(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new WJ({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function OOe(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new WJ({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class kOe extends pT{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class DOe extends pT{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function hb(t,{size:e}){if(SF(t)>e)throw new DOe({givenSize:SF(t),maxSize:e})}function VD(t,e={}){const{signed:n}=e;e.size&&hb(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function MOe(t,e={}){return Number(VD(t,e))}const LOe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function KD(t,e={}){return typeof t=="number"||typeof t=="bigint"?HJ(t,e):typeof t=="string"?$Oe(t,e):typeof t=="boolean"?UOe(t,e):zJ(t,e)}function UOe(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(hb(n,{size:e.size}),db(n,{size:e.size})):n}function zJ(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=LOe[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(hb(r,{size:e.size}),db(r,{dir:"right",size:e.size})):r}function HJ(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new kOe({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?db(a,{size:r}):a}const BOe=new TextEncoder;function $Oe(t,e={}){const n=BOe.encode(t);return zJ(n,e)}const FOe=new TextEncoder;function jOe(t,e={}){return typeof t=="number"||typeof t=="bigint"?zOe(t,e):typeof t=="boolean"?WOe(t,e):DC(t)?GJ(t,e):qJ(t,e)}function WOe(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(hb(n,{size:e.size}),db(n,{size:e.size})):n}const nu={zero:48,nine:57,A:65,F:70,a:97,f:102};function xF(t){if(t>=nu.zero&&t<=nu.nine)return t-nu.zero;if(t>=nu.A&&t<=nu.F)return t-(nu.A-10);if(t>=nu.a&&t<=nu.f)return t-(nu.a-10)}function GJ(t,e={}){let n=t;e.size&&(hb(n,{size:e.size}),n=db(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=xF(r.charCodeAt(a++)),l=xF(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new pT(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function zOe(t,e){const n=HJ(t,e);return GJ(n)}function qJ(t,e={}){const n=FOe.encode(t);return typeof e.size=="number"?(hb(n,{size:e.size}),db(n,{dir:"right",size:e.size})):n}function aI(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function HOe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function gT(t,...e){if(!HOe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function PVe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");aI(t.outputLen),aI(t.blockLen)}function IF(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function GOe(t,e){gT(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const vA=BigInt(2**32-1),NF=BigInt(32);function qOe(t,e=!1){return e?{h:Number(t&vA),l:Number(t>>NF&vA)}:{h:Number(t>>NF&vA)|0,l:Number(t&vA)|0}}function VOe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=qOe(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const KOe=(t,e,n)=>t<<n|e>>>32-n,YOe=(t,e,n)=>e<<n|t>>>32-n,QOe=(t,e,n)=>e<<n-32|t>>>64-n,JOe=(t,e,n)=>t<<n-32|e>>>64-n,Um=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ZOe(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function OVe(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function kVe(t,e){return t<<32-e|t>>>e}const TF=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function XOe(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function RF(t){for(let e=0;e<t.length;e++)t[e]=XOe(t[e])}function e2e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function VJ(t){return typeof t=="string"&&(t=e2e(t)),gT(t),t}function DVe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];gT(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let t2e=class{clone(){return this._cloneInto()}};function n2e(t){const e=r=>t().update(VJ(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function LVe(t=32){if(Um&&typeof Um.getRandomValues=="function")return Um.getRandomValues(new Uint8Array(t));if(Um&&typeof Um.randomBytes=="function")return Um.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const KJ=[],YJ=[],QJ=[],r2e=BigInt(0),nv=BigInt(1),s2e=BigInt(2),i2e=BigInt(7),o2e=BigInt(256),a2e=BigInt(113);for(let t=0,e=nv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],KJ.push(2*(5*r+n)),YJ.push((t+1)*(t+2)/2%64);let s=r2e;for(let i=0;i<7;i++)e=(e<<nv^(e>>i2e)*a2e)%o2e,e&s2e&&(s^=nv<<(nv<<BigInt(i))-nv);QJ.push(s)}const[c2e,l2e]=VOe(QJ,!0),PF=(t,e,n)=>n>32?QOe(t,e,n):KOe(t,e,n),OF=(t,e,n)=>n>32?JOe(t,e,n):YOe(t,e,n);function u2e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=PF(l,u,1)^n[a],h=OF(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=YJ[o],c=PF(s,i,a),l=OF(s,i,a),u=KJ[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=c2e[r],t[1]^=l2e[r]}n.fill(0)}let d2e=class JJ extends t2e{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,aI(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=ZOe(this.state)}keccak(){TF||RF(this.state32),u2e(this.state32,this.rounds),TF||RF(this.state32),this.posOut=0,this.pos=0}update(e){IF(this);const{blockLen:n,state:r}=this;e=VJ(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){IF(this,!1),gT(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return aI(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(GOe(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new JJ(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const h2e=(t,e,n)=>n2e(()=>new d2e(e,t,n)),f2e=h2e(1,136,256/8);function ZJ(t,e){const n=e||"hex",r=f2e(DC(t,{strict:!1})?jOe(t):t);return n==="bytes"?r:KD(r)}class p2e extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const rO=new p2e(8192);function g2e(t,e){if(rO.has(`${t}.${e}`))return rO.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=ZJ(qJ(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return rO.set(`${t}.${e}`,i),i}function m2e(t){const e=ZJ(`0x${t.substring(4)}`).substring(26);return g2e(`0x${e}`)}async function y2e({hash:t,signature:e}){const n=DC(t)?t:KD(t),{secp256k1:r}=await Zs(async()=>{const{secp256k1:o}=await import("./secp256k1-Cdqu_b4r.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=kF(f);return new r.Signature(VD(l),VD(u)).addRecoveryBit(p)}const o=DC(e)?e:KD(e),a=MOe(`0x${o.slice(130)}`),c=kF(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function kF(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function w2e({hash:t,signature:e}){return m2e(await y2e({hash:t,signature:e}))}var b2e={};const v2e=":";function Vy(t){const[e,n]=t.split(v2e);return{namespace:e,reference:n}}function XJ(t,e){return t.includes(":")?[t]:e.chains||[]}var E2e=Object.defineProperty,C2e=Object.defineProperties,_2e=Object.getOwnPropertyDescriptors,DF=Object.getOwnPropertySymbols,A2e=Object.prototype.hasOwnProperty,S2e=Object.prototype.propertyIsEnumerable,MF=(t,e,n)=>e in t?E2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,LF=(t,e)=>{for(var n in e||(e={}))A2e.call(e,n)&&MF(t,n,e[n]);if(DF)for(var n of DF(e))S2e.call(e,n)&&MF(t,n,e[n]);return t},x2e=(t,e)=>C2e(t,_2e(e));const I2e="ReactNative",jo={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},N2e="js";function cI(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Nf(){return!Dg()&&!!mU()&&navigator.product===I2e}function T2e(){return Nf()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function R2e(){return Nf()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function fb(){return!cI()&&!!mU()&&!!Dg()}function n1(){return Nf()?jo.reactNative:cI()?jo.node:fb()?jo.browser:jo.unknown}function UF(){var t;try{return Nf()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function P2e(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function O2e(t){var e,n;const r=eZ();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),x2e(LF(LF({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function eZ(){return wJ()||{name:"",description:"",url:"",icons:[""]}}function k2e(){if(n1()===jo.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=rIe();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function D2e(){var t;const e=n1();return e===jo.browser?[e,((t=yJ())==null?void 0:t.host)||"unknown"].join(":"):e}function tZ(t,e,n){const r=k2e(),s=D2e();return[[t,e].join("-"),[N2e,n].join("-"),r,s].join("/")}function M2e({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=tZ(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=P2e(l[1]||"",d);return l[0]+"?"+h}function xp(t,e){return t.filter(n=>e.includes(n)).length===t.length}function YD(t){return Object.fromEntries(t.entries())}function QD(t){return new Map(Object.entries(t))}function Xf(t=_e.FIVE_MINUTES,e){const n=_e.toMiliseconds(t||_e.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function Rh(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function nZ(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function L2e(t){return nZ("topic",t)}function U2e(t){return nZ("id",t)}function rZ(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function Hr(t,e){return _e.fromMiliseconds(Date.now()+_e.toMiliseconds(t))}function Gd(t){return Date.now()>=_e.toMiliseconds(t)}function An(t,e){return`${t}${e?`:${e}`:""}`}function Ol(t=[],e=[]){return[...new Set([...t,...e])]}async function B2e({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=$2e(i,t,e),a=n1();if(a===jo.browser){if(!((r=Dg())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}F2e(o)}else a===jo.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function $2e(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${H2e(r,!0)}`}else s=`${s}/wc?${r}`;return s}function F2e(t){let e="_self";z2e()?e="_top":(W2e()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function j2e(t,e){let n="";try{if(fb()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function BF(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function $F(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function vU(){return typeof process<"u"&&b2e.IS_VITEST==="true"}function W2e(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function z2e(){try{return window.self!==window.top}catch{return!1}}function H2e(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function sZ(t){return Buffer.from(t,"base64").toString("utf-8")}function G2e(t){return new Promise(e=>setTimeout(e,t))}function MC(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function q2e(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function r1(t,...e){if(!q2e(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function EU(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");MC(t.outputLen),MC(t.blockLen)}function Sw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function iZ(t,e){r1(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const EA=BigInt(2**32-1),FF=BigInt(32);function V2e(t,e=!1){return e?{h:Number(t&EA),l:Number(t>>FF&EA)}:{h:Number(t>>FF&EA)|0,l:Number(t&EA)|0}}function K2e(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=V2e(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const Y2e=(t,e,n)=>t<<n|e>>>32-n,Q2e=(t,e,n)=>e<<n|t>>>32-n,J2e=(t,e,n)=>e<<n-32|t>>>64-n,Z2e=(t,e,n)=>t<<n-32|e>>>64-n,Bm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function X2e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function sO(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function zc(t,e){return t<<32-e|t>>>e}const jF=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function eke(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function WF(t){for(let e=0;e<t.length;e++)t[e]=eke(t[e])}function tke(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function xw(t){return typeof t=="string"&&(t=tke(t)),r1(t),t}function nke(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];r1(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let CU=class{clone(){return this._cloneInto()}};function oZ(t){const e=r=>t().update(xw(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function pb(t=32){if(Bm&&typeof Bm.getRandomValues=="function")return Bm.getRandomValues(new Uint8Array(t));if(Bm&&typeof Bm.randomBytes=="function")return Bm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const aZ=[],cZ=[],lZ=[],rke=BigInt(0),rv=BigInt(1),ske=BigInt(2),ike=BigInt(7),oke=BigInt(256),ake=BigInt(113);for(let t=0,e=rv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],aZ.push(2*(5*r+n)),cZ.push((t+1)*(t+2)/2%64);let s=rke;for(let i=0;i<7;i++)e=(e<<rv^(e>>ike)*ake)%oke,e&ske&&(s^=rv<<(rv<<BigInt(i))-rv);lZ.push(s)}const[cke,lke]=K2e(lZ,!0),zF=(t,e,n)=>n>32?J2e(t,e,n):Y2e(t,e,n),HF=(t,e,n)=>n>32?Z2e(t,e,n):Q2e(t,e,n);function uke(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=zF(l,u,1)^n[a],h=HF(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=cZ[o],c=zF(s,i,a),l=HF(s,i,a),u=aZ[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=cke[r],t[1]^=lke[r]}n.fill(0)}let dke=class uZ extends CU{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,MC(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=X2e(this.state)}keccak(){jF||WF(this.state32),uke(this.state32,this.rounds),jF||WF(this.state32),this.posOut=0,this.pos=0}update(e){Sw(this);const{blockLen:n,state:r}=this;e=xw(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Sw(this,!1),r1(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return MC(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(iZ(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new uZ(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const hke=(t,e,n)=>oZ(()=>new dke(e,t,n)),fke=hke(1,136,256/8),pke="https://rpc.walletconnect.org/v1";function dZ(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(fke(n)).toString("hex")}async function gke(t,e,n,r,s,i){switch(n.t){case"eip191":return await mke(t,e,n.s);case"eip1271":return await yke(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function mke(t,e,n){return(await w2e({hash:dZ(e),signature:n})).toLowerCase()===t.toLowerCase()}async function yke(t,e,n,r,s,i){const o=Vy(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),d=dZ(e).substring(2),h=a+d+c+l+u,f=await fetch(`${i||pke}/?chainId=${r}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:wke(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function wke(){return Date.now()+Math.floor(Math.random()*1e3)}function bke(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return bJ.encode(i)}var vke=Object.defineProperty,Eke=Object.defineProperties,Cke=Object.getOwnPropertyDescriptors,GF=Object.getOwnPropertySymbols,_ke=Object.prototype.hasOwnProperty,Ake=Object.prototype.propertyIsEnumerable,qF=(t,e,n)=>e in t?vke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ske=(t,e)=>{for(var n in e||(e={}))_ke.call(e,n)&&qF(t,n,e[n]);if(GF)for(var n of GF(e))Ake.call(e,n)&&qF(t,n,e[n]);return t},xke=(t,e)=>Eke(t,Cke(e));const Ike="did:pkh:",_U=t=>t==null?void 0:t.split(":"),Nke=t=>{const e=t&&_U(t);if(e)return t.includes(Ike)?e[3]:e[1]},JD=t=>{const e=t&&_U(t);if(e)return e[2]+":"+e[3]},lI=t=>{const e=t&&_U(t);if(e)return e.pop()};async function VF(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=hZ(s,s.iss),o=lI(s.iss);return await gke(o,i,r,JD(s.iss),n)}const hZ=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=lI(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${Nke(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=ES(t.resources);if(p){const g=LC(p);s=Uke(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function Tke(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function Rke(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Bg(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function Pke(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:Oke(e,n,r)}}}function Oke(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function fZ(t){return Bg(t),`urn:recap:${Tke(t).replace(/=/g,"")}`}function LC(t){const e=Rke(t.replace("urn:recap:",""));return Bg(e),e}function kke(t,e,n){const r=Pke(t,e,n);return fZ(r)}function Dke(t){return t&&t.includes("urn:recap:")}function Mke(t,e){const n=LC(t),r=LC(e),s=Lke(n,r);return fZ(s)}function Lke(t,e){Bg(t),Bg(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=xke(Ske({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function Uke(t="",e){Bg(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function KF(t){var e;const n=LC(t);Bg(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function YF(t){const e=LC(t);Bg(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function ES(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return Dke(e)?e:void 0}function iO(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function pZ(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Bo(t,...e){if(!pZ(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function QF(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Bke(t,e){Bo(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function JF(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const Jh=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),$ke=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Fke=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Fke)throw new Error("Non little-endian hardware is not supported");function jke(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function ZD(t){if(typeof t=="string")t=jke(t);else if(pZ(t))t=XD(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function Wke(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function zke(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const Hke=(t,e)=>{function n(r,...s){if(Bo(r),t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Bo(l):Bo(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&Bo(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Bo(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Bo(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Bo(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function ZF(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!Gke(e))throw new Error("invalid output, must be aligned");return e}function XF(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function Gke(t){return t.byteOffset%4===0}function XD(t){return Uint8Array.from(t)}function Iw(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const gZ=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),qke=gZ("expand 16-byte k"),Vke=gZ("expand 32-byte k"),Kke=Jh(qke),Yke=Jh(Vke);function fn(t,e){return t<<e|t>>>32-e}function e3(t){return t.byteOffset%4===0}const CA=64,Qke=16,mZ=2**32-1,ej=new Uint32Array;function Jke(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(CA),u=Jh(l),d=e3(s)&&e3(i),h=d?Jh(s):ej,f=d?Jh(i):ej;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=mZ)throw new Error("arx: counter overflow");const g=Math.min(CA,c-p);if(d&&g===CA){const w=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let m=0,b;m<Qke;m++)b=w+m,f[b]=h[b]^u[m];p+=CA;continue}for(let w=0,m;w<g;w++)m=p+w,i[m]=s[m]^l[w];p+=g}}function Zke(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=Wke({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return iO(s),iO(o),JF(i),JF(n),(a,c,l,u,d=0)=>{Bo(a),Bo(c),Bo(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),Bo(u),iO(d),d<0||d>=mZ)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,w;if(p===32)f.push(g=XD(a)),w=Yke;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),w=Kke,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);e3(c)||f.push(c=XD(c));const m=Jh(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(w,m,Jh(c.subarray(0,16)),m),c=c.subarray(16)}const b=16-s;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const A=new Uint8Array(12);A.set(c,i?0:12-c.length),c=A,f.push(c)}const v=Jh(c);return Jke(t,w,m,v,l,u,d,o),Iw(...f),u}}const _s=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class Xke{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=ZD(e),Bo(e,32);const n=_s(e,0),r=_s(e,2),s=_s(e,4),i=_s(e,6),o=_s(e,8),a=_s(e,10),c=_s(e,12),l=_s(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=_s(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],w=o[9],m=_s(e,n+0),b=_s(e,n+2),v=_s(e,n+4),A=_s(e,n+6),C=_s(e,n+8),T=_s(e,n+10),x=_s(e,n+12),N=_s(e,n+14);let S=i[0]+(m&8191),D=i[1]+((m>>>13|b<<3)&8191),P=i[2]+((b>>>10|v<<6)&8191),$=i[3]+((v>>>7|A<<9)&8191),G=i[4]+((A>>>4|C<<12)&8191),W=i[5]+(C>>>1&8191),I=i[6]+((C>>>14|T<<2)&8191),R=i[7]+((T>>>11|x<<5)&8191),B=i[8]+((x>>>8|N<<8)&8191),O=i[9]+(N>>>5|s),M=0,j=M+S*a+D*(5*w)+P*(5*g)+$*(5*p)+G*(5*f);M=j>>>13,j&=8191,j+=W*(5*h)+I*(5*d)+R*(5*u)+B*(5*l)+O*(5*c),M+=j>>>13,j&=8191;let V=M+S*c+D*a+P*(5*w)+$*(5*g)+G*(5*p);M=V>>>13,V&=8191,V+=W*(5*f)+I*(5*h)+R*(5*d)+B*(5*u)+O*(5*l),M+=V>>>13,V&=8191;let te=M+S*l+D*c+P*a+$*(5*w)+G*(5*g);M=te>>>13,te&=8191,te+=W*(5*p)+I*(5*f)+R*(5*h)+B*(5*d)+O*(5*u),M+=te>>>13,te&=8191;let Z=M+S*u+D*l+P*c+$*a+G*(5*w);M=Z>>>13,Z&=8191,Z+=W*(5*g)+I*(5*p)+R*(5*f)+B*(5*h)+O*(5*d),M+=Z>>>13,Z&=8191;let X=M+S*d+D*u+P*l+$*c+G*a;M=X>>>13,X&=8191,X+=W*(5*w)+I*(5*g)+R*(5*p)+B*(5*f)+O*(5*h),M+=X>>>13,X&=8191;let ce=M+S*h+D*d+P*u+$*l+G*c;M=ce>>>13,ce&=8191,ce+=W*a+I*(5*w)+R*(5*g)+B*(5*p)+O*(5*f),M+=ce>>>13,ce&=8191;let ge=M+S*f+D*h+P*d+$*u+G*l;M=ge>>>13,ge&=8191,ge+=W*c+I*a+R*(5*w)+B*(5*g)+O*(5*p),M+=ge>>>13,ge&=8191;let Me=M+S*p+D*f+P*h+$*d+G*u;M=Me>>>13,Me&=8191,Me+=W*l+I*c+R*a+B*(5*w)+O*(5*g),M+=Me>>>13,Me&=8191;let it=M+S*g+D*p+P*f+$*h+G*d;M=it>>>13,it&=8191,it+=W*u+I*l+R*c+B*a+O*(5*w),M+=it>>>13,it&=8191;let Je=M+S*w+D*g+P*p+$*f+G*h;M=Je>>>13,Je&=8191,Je+=W*d+I*u+R*l+B*c+O*a,M+=Je>>>13,Je&=8191,M=(M<<2)+M|0,M=M+j|0,j=M&8191,M=M>>>13,V+=M,i[0]=j,i[1]=V,i[2]=te,i[3]=Z,i[4]=X,i[5]=ce,i[6]=ge,i[7]=Me,i[8]=it,i[9]=Je}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;Iw(r)}update(e){QF(this);const{buffer:n,blockLen:r}=this;e=ZD(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Iw(this.h,this.r,this.buffer,this.pad)}digestInto(e){QF(this),Bke(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function eDe(t){const e=(r,s)=>t(s).update(ZD(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const tDe=eDe(t=>new Xke(t));function nDe(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],w=e[6],m=e[7],b=s,v=n[0],A=n[1],C=n[2],T=o,x=a,N=c,S=l,D=u,P=d,$=h,G=f,W=p,I=g,R=w,B=m,O=b,M=v,j=A,V=C;for(let Z=0;Z<i;Z+=2)T=T+D|0,O=fn(O^T,16),W=W+O|0,D=fn(D^W,12),T=T+D|0,O=fn(O^T,8),W=W+O|0,D=fn(D^W,7),x=x+P|0,M=fn(M^x,16),I=I+M|0,P=fn(P^I,12),x=x+P|0,M=fn(M^x,8),I=I+M|0,P=fn(P^I,7),N=N+$|0,j=fn(j^N,16),R=R+j|0,$=fn($^R,12),N=N+$|0,j=fn(j^N,8),R=R+j|0,$=fn($^R,7),S=S+G|0,V=fn(V^S,16),B=B+V|0,G=fn(G^B,12),S=S+G|0,V=fn(V^S,8),B=B+V|0,G=fn(G^B,7),T=T+P|0,V=fn(V^T,16),R=R+V|0,P=fn(P^R,12),T=T+P|0,V=fn(V^T,8),R=R+V|0,P=fn(P^R,7),x=x+$|0,O=fn(O^x,16),B=B+O|0,$=fn($^B,12),x=x+$|0,O=fn(O^x,8),B=B+O|0,$=fn($^B,7),N=N+G|0,M=fn(M^N,16),W=W+M|0,G=fn(G^W,12),N=N+G|0,M=fn(M^N,8),W=W+M|0,G=fn(G^W,7),S=S+D|0,j=fn(j^S,16),I=I+j|0,D=fn(D^I,12),S=S+D|0,j=fn(j^S,8),I=I+j|0,D=fn(D^I,7);let te=0;r[te++]=o+T|0,r[te++]=a+x|0,r[te++]=c+N|0,r[te++]=l+S|0,r[te++]=u+D|0,r[te++]=d+P|0,r[te++]=h+$|0,r[te++]=f+G|0,r[te++]=p+W|0,r[te++]=g+I|0,r[te++]=w+R|0,r[te++]=m+B|0,r[te++]=b+O|0,r[te++]=v+M|0,r[te++]=A+j|0,r[te++]=C+V|0}const rDe=Zke(nDe,{counterRight:!1,counterLength:4,allowShortKeys:!1}),sDe=new Uint8Array(16),tj=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(sDe.subarray(n))},iDe=new Uint8Array(32);function nj(t,e,n,r,s){const i=t(e,n,iDe),o=tDe.create(i);s&&tj(o,s),tj(o,r);const a=new Uint8Array(16),c=$ke(a);XF(c,0,BigInt(s?s.length:0),!0),XF(c,8,BigInt(r.length),!0),o.update(a);const l=o.digest();return Iw(i,a),l}const oDe=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=ZF(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=nj(t,e,n,a,r);return i.set(c,o),Iw(c),i},decrypt(s,i){i=ZF(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=nj(t,e,n,o,r);if(!zke(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),Iw(c),i}}),yZ=Hke({blockSize:64,nonceLength:12,tagLength:16},oDe(rDe));let wZ=class extends CU{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,EU(e);const r=xw(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Sw(this),this.iHash.update(e),this}digestInto(e){Sw(this),r1(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const mT=(t,e,n)=>new wZ(t,e).update(n).digest();mT.create=(t,e)=>new wZ(t,e);function aDe(t,e,n){return EU(t),n===void 0&&(n=new Uint8Array(t.outputLen)),mT(t,xw(n),xw(e))}const oO=new Uint8Array([0]),rj=new Uint8Array;function cDe(t,e,n,r=32){if(EU(t),MC(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/t.outputLen);n===void 0&&(n=rj);const i=new Uint8Array(s*t.outputLen),o=mT.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<s;l++)oO[0]=l+1,a.update(l===0?rj:c).update(n).update(oO).digestInto(c),i.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),oO.fill(0),i.slice(0,r)}const lDe=(t,e,n,r,s)=>cDe(t,aDe(t,e,n),r,s);function uDe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function dDe(t,e,n){return t&e^~t&n}function hDe(t,e,n){return t&e^t&n^e&n}let fDe=class extends CU{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=sO(this.buffer)}update(e){Sw(this);const{view:n,buffer:r,blockLen:s}=this;e=xw(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=sO(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Sw(this),iZ(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;uDe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=sO(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const pDe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Td=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Rd=new Uint32Array(64);class gDe extends fDe{constructor(){super(64,32,8,!1),this.A=Td[0]|0,this.B=Td[1]|0,this.C=Td[2]|0,this.D=Td[3]|0,this.E=Td[4]|0,this.F=Td[5]|0,this.G=Td[6]|0,this.H=Td[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Rd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Rd[d-15],f=Rd[d-2],p=zc(h,7)^zc(h,18)^h>>>3,g=zc(f,17)^zc(f,19)^f>>>10;Rd[d]=g+Rd[d-7]+p+Rd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=zc(a,6)^zc(a,11)^zc(a,25),f=u+h+dDe(a,c,l)+pDe[d]+Rd[d]|0,p=(zc(r,2)^zc(r,13)^zc(r,22))+hDe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Rd.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const s1=oZ(()=>new gDe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yT=BigInt(0),wT=BigInt(1),mDe=BigInt(2);function $g(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function i1(t){if(!$g(t))throw new Error("Uint8Array expected")}function Nw(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const yDe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Tw(t){i1(t);let e="";for(let n=0;n<t.length;n++)e+=yDe[t[n]];return e}function Iy(t){const e=t.toString(16);return e.length&1?"0"+e:e}function AU(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?yT:BigInt("0x"+t)}const ru={_0:48,_9:57,A:65,F:70,a:97,f:102};function sj(t){if(t>=ru._0&&t<=ru._9)return t-ru._0;if(t>=ru.A&&t<=ru.F)return t-(ru.A-10);if(t>=ru.a&&t<=ru.f)return t-(ru.a-10)}function Rw(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=sj(t.charCodeAt(i)),a=sj(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function dg(t){return AU(Tw(t))}function UC(t){return i1(t),AU(Tw(Uint8Array.from(t).reverse()))}function Pw(t,e){return Rw(t.toString(16).padStart(e*2,"0"))}function bT(t,e){return Pw(t,e).reverse()}function wDe(t){return Rw(Iy(t))}function Lo(t,e,n){let r;if(typeof e=="string")try{r=Rw(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if($g(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function BC(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];i1(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function bDe(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function vDe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const aO=t=>typeof t=="bigint"&&yT<=t;function vT(t,e,n){return aO(t)&&aO(e)&&aO(n)&&e<=t&&t<n}function zu(t,e,n,r){if(!vT(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function bZ(t){let e;for(e=0;t>yT;t>>=wT,e+=1);return e}function EDe(t,e){return t>>BigInt(e)&wT}function CDe(t,e,n){return t|(n?wT:yT)<<BigInt(e)}const SU=t=>(mDe<<BigInt(t-1))-wT,cO=t=>new Uint8Array(t),ij=t=>Uint8Array.from(t);function vZ(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=cO(t),s=cO(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...u)=>n(s,r,...u),c=(u=cO())=>{s=a(ij([0]),u),r=a(),u.length!==0&&(s=a(ij([1]),u),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return BC(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const _De={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||$g(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function gb(t,e,n={}){const r=(s,i,o)=>{const a=_De[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const ADe=()=>{throw new Error("not implemented")};function t3(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}var SDe=Object.freeze({__proto__:null,isBytes:$g,abytes:i1,abool:Nw,bytesToHex:Tw,numberToHexUnpadded:Iy,hexToNumber:AU,hexToBytes:Rw,bytesToNumberBE:dg,bytesToNumberLE:UC,numberToBytesBE:Pw,numberToBytesLE:bT,numberToVarBytesBE:wDe,ensureBytes:Lo,concatBytes:BC,equalBytes:bDe,utf8ToBytes:vDe,inRange:vT,aInRange:zu,bitLen:bZ,bitGet:EDe,bitSet:CDe,bitMask:SU,createHmacDrbg:vZ,validateObject:gb,notImplemented:ADe,memoized:t3});const ws=BigInt(0),Dr=BigInt(1),op=BigInt(2),xDe=BigInt(3),n3=BigInt(4),oj=BigInt(5),aj=BigInt(8);function Qi(t,e){const n=t%e;return n>=ws?n:e+n}function EZ(t,e,n){if(e<ws)throw new Error("invalid exponent, negatives unsupported");if(n<=ws)throw new Error("invalid modulus");if(n===Dr)return ws;let r=Dr;for(;e>ws;)e&Dr&&(r=r*t%n),t=t*t%n,e>>=Dr;return r}function Ja(t,e,n){let r=t;for(;e-- >ws;)r*=r,r%=n;return r}function r3(t,e){if(t===ws)throw new Error("invert: expected non-zero number");if(e<=ws)throw new Error("invert: expected positive modulus, got "+e);let n=Qi(t,e),r=e,s=ws,i=Dr;for(;n!==ws;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Dr)throw new Error("invert: does not exist");return Qi(s,e)}function IDe(t){const e=(t-Dr)/op;let n,r,s;for(n=t-Dr,r=0;n%op===ws;n/=op,r++);for(s=op;s<t&&EZ(s,e,t)!==t-Dr;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Dr)/n3;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+Dr)/op;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,Dr<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function NDe(t){if(t%n3===xDe){const e=(t+Dr)/n3;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%aj===oj){const e=(t-oj)/aj;return function(n,r){const s=n.mul(r,op),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,op),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return IDe(t)}const TDe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function RDe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=TDe.reduce((r,s)=>(r[s]="function",r),e);return gb(t,n)}function PDe(t,e,n){if(n<ws)throw new Error("invalid exponent, negatives unsupported");if(n===ws)return t.ONE;if(n===Dr)return e;let r=t.ONE,s=e;for(;n>ws;)n&Dr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Dr;return r}function ODe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function CZ(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function _Z(t,e,n=!1,r={}){if(t<=ws)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=CZ(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:SU(s),ZERO:ws,ONE:Dr,create:c=>Qi(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return ws<=c&&c<t},is0:c=>c===ws,isOdd:c=>(c&Dr)===Dr,neg:c=>Qi(-c,t),eql:(c,l)=>c===l,sqr:c=>Qi(c*c,t),add:(c,l)=>Qi(c+l,t),sub:(c,l)=>Qi(c-l,t),mul:(c,l)=>Qi(c*l,t),pow:(c,l)=>PDe(a,c,l),div:(c,l)=>Qi(c*r3(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>r3(c,t),sqrt:r.sqrt||(c=>(o||(o=NDe(t)),o(a,c))),invertBatch:c=>ODe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?bT(c,i):Pw(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?UC(c):dg(c)}});return Object.freeze(a)}function AZ(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function SZ(t){const e=AZ(t);return e+Math.ceil(e/2)}function kDe(t,e,n=!1){const r=t.length,s=AZ(e),i=SZ(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?UC(t):dg(t),a=Qi(o,e-Dr)+Dr;return n?bT(a,s):Pw(a,s)}const cj=BigInt(0),_A=BigInt(1);function lO(t,e){const n=e.negate();return t?n:e}function xZ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function uO(t,e){xZ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function DDe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function MDe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const dO=new WeakMap,IZ=new WeakMap;function hO(t){return IZ.get(t)||1}function LDe(t,e){return{constTimeNegate:lO,hasPrecomputes(n){return hO(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>cj;)r&_A&&(s=s.add(i)),i=i.double(),r>>=_A;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=uO(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=uO(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=_A);const g=f,w=f+Math.abs(p)-1,m=h%2!==0,b=p<0;p===0?c=c.add(lO(m,r[g])):a=a.add(lO(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=uO(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===cj)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=_A),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=dO.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&dO.set(r,s(i))),i},wNAFCached(n,r,s){const i=hO(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=hO(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){xZ(r,e),IZ.set(n,r),dO.delete(n)}}}function UDe(t,e,n,r){if(DDe(n,t),MDe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=bZ(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function NZ(t){return RDe(t.Fp),gb(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...CZ(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const $m=BigInt(0),fO=BigInt(1);function BDe(t){return gb(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function $De(t){const e=BDe(t),{P:n}=e,r=b=>Qi(b,n),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(b=>b),c=e.powPminus2||(b=>EZ(b,n-BigInt(2),n));function l(b,v,A){const C=r(b*(v-A));return v=r(v-C),A=r(A+C),[v,A]}const u=(e.a-BigInt(2))/BigInt(4);function d(b,v){zu("u",b,$m,n),zu("scalar",v,$m,n);const A=v,C=b;let T=fO,x=$m,N=b,S=fO,D=$m,P;for(let G=BigInt(s-1);G>=$m;G--){const W=A>>G&fO;D^=W,P=l(D,T,N),T=P[0],N=P[1],P=l(D,x,S),x=P[0],S=P[1],D=W;const I=T+x,R=r(I*I),B=T-x,O=r(B*B),M=R-O,j=N+S,V=N-S,te=r(V*I),Z=r(j*B),X=te+Z,ce=te-Z;N=r(X*X),S=r(C*r(ce*ce)),T=r(R*O),x=r(M*(R+r(u*M)))}P=l(D,T,N),T=P[0],N=P[1],P=l(D,x,S),x=P[0],S=P[1];const $=c(x);return r(T*$)}function h(b){return bT(r(b),i)}function f(b){const v=Lo("u coordinate",b,i);return o===32&&(v[31]&=127),UC(v)}function p(b){const v=Lo("scalar",b),A=v.length;if(A!==i&&A!==o){let C=""+i+" or "+o;throw new Error("invalid scalar, expected "+C+" bytes, got "+A)}return UC(a(v))}function g(b,v){const A=f(v),C=p(b),T=d(A,C);if(T===$m)throw new Error("invalid private or public key received");return h(T)}const w=h(e.Gu);function m(b){return g(b,w)}return{scalarMult:g,scalarMultBase:m,getSharedSecret:(b,v)=>g(b,v),getPublicKey:b=>m(b),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:w}}const s3=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const FDe=BigInt(1),lj=BigInt(2),jDe=BigInt(3),WDe=BigInt(5);BigInt(8);function zDe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=s3,o=t*t%i*t%i,a=Ja(o,lj,i)*o%i,c=Ja(a,FDe,i)*t%i,l=Ja(c,WDe,i)*c%i,u=Ja(l,e,i)*l%i,d=Ja(u,n,i)*u%i,h=Ja(d,r,i)*d%i,f=Ja(h,s,i)*h%i,p=Ja(f,s,i)*h%i,g=Ja(p,e,i)*l%i;return{pow_p_5_8:Ja(g,lj,i)*t%i,b2:o}}function HDe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const i3=$De({P:s3,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=s3,{pow_p_5_8:n,b2:r}=zDe(t);return Qi(Ja(n,jDe,e)*r,e)},adjustScalarBytes:HDe,randomBytes:pb});function uj(t){t.lowS!==void 0&&Nw("lowS",t.lowS),t.prehash!==void 0&&Nw("prehash",t.prehash)}function GDe(t){const e=NZ(t);gb(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:qDe,hexToBytes:VDe}=SDe;class KDe extends Error{constructor(e=""){super(e)}}const gu={Err:KDe,_tlv:{encode:(t,e)=>{const{Err:n}=gu;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Iy(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Iy(s.length/2|128):"";return Iy(t)+i+s+e},decode(t,e){const{Err:n}=gu;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=gu;if(t<Pu)throw new e("integer: negative integers are not allowed");let n=Iy(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=gu;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return qDe(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=gu,s=typeof t=="string"?VDe(t):t;i1(s);const{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=gu,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Pu=BigInt(0),cs=BigInt(1);BigInt(2);const dj=BigInt(3);BigInt(4);function YDe(t){const e=GDe(t),{Fp:n}=e,r=_Z(e.n,e.nBitLength),s=e.toBytes||((g,w,m)=>{const b=w.toAffine();return BC(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),i=e.fromBytes||(g=>{const w=g.subarray(1),m=n.fromBytes(w.subarray(0,n.BYTES)),b=n.fromBytes(w.subarray(n.BYTES,2*n.BYTES));return{x:m,y:b}});function o(g){const{a:w,b:m}=e,b=n.sqr(g),v=n.mul(b,g);return n.add(n.add(v,n.mul(g,w)),m)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return vT(g,cs,e.n)}function c(g){const{allowedPrivateKeyLengths:w,nByteLength:m,wrapPrivateKey:b,n:v}=e;if(w&&typeof g!="bigint"){if($g(g)&&(g=Tw(g)),typeof g!="string"||!w.includes(g.length))throw new Error("invalid private key");g=g.padStart(m*2,"0")}let A;try{A=typeof g=="bigint"?g:dg(Lo("private key",g,m))}catch{throw new Error("invalid private key, expected hex or "+m+" bytes, got "+typeof g)}return b&&(A=Qi(A,v)),zu("private key",A,cs,v),A}function l(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const u=t3((g,w)=>{const{px:m,py:b,pz:v}=g;if(n.eql(v,n.ONE))return{x:m,y:b};const A=g.is0();w==null&&(w=A?n.ONE:n.inv(v));const C=n.mul(m,w),T=n.mul(b,w),x=n.mul(v,w);if(A)return{x:n.ZERO,y:n.ZERO};if(!n.eql(x,n.ONE))throw new Error("invZ was invalid");return{x:C,y:T}}),d=t3(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:w,y:m}=g.toAffine();if(!n.isValid(w)||!n.isValid(m))throw new Error("bad point: x or y not FE");const b=n.sqr(m),v=o(w);if(!n.eql(b,v))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(w,m,b){if(this.px=w,this.py=m,this.pz=b,w==null||!n.isValid(w))throw new Error("x required");if(m==null||!n.isValid(m))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required");Object.freeze(this)}static fromAffine(w){const{x:m,y:b}=w||{};if(!w||!n.isValid(m)||!n.isValid(b))throw new Error("invalid affine point");if(w instanceof h)throw new Error("projective point not allowed");const v=A=>n.eql(A,n.ZERO);return v(m)&&v(b)?h.ZERO:new h(m,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const m=n.invertBatch(w.map(b=>b.pz));return w.map((b,v)=>b.toAffine(m[v])).map(h.fromAffine)}static fromHex(w){const m=h.fromAffine(i(Lo("pointHex",w)));return m.assertValidity(),m}static fromPrivateKey(w){return h.BASE.multiply(c(w))}static msm(w,m){return UDe(h,r,w,m)}_setWindowSize(w){p.setWindowSize(this,w)}assertValidity(){d(this)}hasEvenY(){const{y:w}=this.toAffine();if(n.isOdd)return!n.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){l(w);const{px:m,py:b,pz:v}=this,{px:A,py:C,pz:T}=w,x=n.eql(n.mul(m,T),n.mul(A,v)),N=n.eql(n.mul(b,T),n.mul(C,v));return x&&N}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:w,b:m}=e,b=n.mul(m,dj),{px:v,py:A,pz:C}=this;let T=n.ZERO,x=n.ZERO,N=n.ZERO,S=n.mul(v,v),D=n.mul(A,A),P=n.mul(C,C),$=n.mul(v,A);return $=n.add($,$),N=n.mul(v,C),N=n.add(N,N),T=n.mul(w,N),x=n.mul(b,P),x=n.add(T,x),T=n.sub(D,x),x=n.add(D,x),x=n.mul(T,x),T=n.mul($,T),N=n.mul(b,N),P=n.mul(w,P),$=n.sub(S,P),$=n.mul(w,$),$=n.add($,N),N=n.add(S,S),S=n.add(N,S),S=n.add(S,P),S=n.mul(S,$),x=n.add(x,S),P=n.mul(A,C),P=n.add(P,P),S=n.mul(P,$),T=n.sub(T,S),N=n.mul(P,D),N=n.add(N,N),N=n.add(N,N),new h(T,x,N)}add(w){l(w);const{px:m,py:b,pz:v}=this,{px:A,py:C,pz:T}=w;let x=n.ZERO,N=n.ZERO,S=n.ZERO;const D=e.a,P=n.mul(e.b,dj);let $=n.mul(m,A),G=n.mul(b,C),W=n.mul(v,T),I=n.add(m,b),R=n.add(A,C);I=n.mul(I,R),R=n.add($,G),I=n.sub(I,R),R=n.add(m,v);let B=n.add(A,T);return R=n.mul(R,B),B=n.add($,W),R=n.sub(R,B),B=n.add(b,v),x=n.add(C,T),B=n.mul(B,x),x=n.add(G,W),B=n.sub(B,x),S=n.mul(D,R),x=n.mul(P,W),S=n.add(x,S),x=n.sub(G,S),S=n.add(G,S),N=n.mul(x,S),G=n.add($,$),G=n.add(G,$),W=n.mul(D,W),R=n.mul(P,R),G=n.add(G,W),W=n.sub($,W),W=n.mul(D,W),R=n.add(R,W),$=n.mul(G,R),N=n.add(N,$),$=n.mul(B,R),x=n.mul(I,x),x=n.sub(x,$),$=n.mul(I,G),S=n.mul(B,S),S=n.add(S,$),new h(x,N,S)}subtract(w){return this.add(w.negate())}is0(){return this.equals(h.ZERO)}wNAF(w){return p.wNAFCached(this,w,h.normalizeZ)}multiplyUnsafe(w){const{endo:m,n:b}=e;zu("scalar",w,Pu,b);const v=h.ZERO;if(w===Pu)return v;if(this.is0()||w===cs)return this;if(!m||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,w,h.normalizeZ);let{k1neg:A,k1:C,k2neg:T,k2:x}=m.splitScalar(w),N=v,S=v,D=this;for(;C>Pu||x>Pu;)C&cs&&(N=N.add(D)),x&cs&&(S=S.add(D)),D=D.double(),C>>=cs,x>>=cs;return A&&(N=N.negate()),T&&(S=S.negate()),S=new h(n.mul(S.px,m.beta),S.py,S.pz),N.add(S)}multiply(w){const{endo:m,n:b}=e;zu("scalar",w,cs,b);let v,A;if(m){const{k1neg:C,k1:T,k2neg:x,k2:N}=m.splitScalar(w);let{p:S,f:D}=this.wNAF(T),{p:P,f:$}=this.wNAF(N);S=p.constTimeNegate(C,S),P=p.constTimeNegate(x,P),P=new h(n.mul(P.px,m.beta),P.py,P.pz),v=S.add(P),A=D.add($)}else{const{p:C,f:T}=this.wNAF(w);v=C,A=T}return h.normalizeZ([v,A])[0]}multiplyAndAddUnsafe(w,m,b){const v=h.BASE,A=(T,x)=>x===Pu||x===cs||!T.equals(v)?T.multiplyUnsafe(x):T.multiply(x),C=A(this,m).add(A(w,b));return C.is0()?void 0:C}toAffine(w){return u(this,w)}isTorsionFree(){const{h:w,isTorsionFree:m}=e;if(w===cs)return!0;if(m)return m(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:m}=e;return w===cs?this:m?m(h,this):this.multiplyUnsafe(e.h)}toRawBytes(w=!0){return Nw("isCompressed",w),this.assertValidity(),s(h,this,w)}toHex(w=!0){return Nw("isCompressed",w),Tw(this.toRawBytes(w))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=LDe(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function QDe(t){const e=NZ(t);return gb(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function JDe(t){const e=QDe(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(W){return Qi(W,r)}function a(W){return r3(W,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=YDe({...e,toBytes(W,I,R){const B=I.toAffine(),O=n.toBytes(B.x),M=BC;return Nw("isCompressed",R),R?M(Uint8Array.from([I.hasEvenY()?2:3]),O):M(Uint8Array.from([4]),O,n.toBytes(B.y))},fromBytes(W){const I=W.length,R=W[0],B=W.subarray(1);if(I===s&&(R===2||R===3)){const O=dg(B);if(!vT(O,cs,n.ORDER))throw new Error("Point is not on curve");const M=u(O);let j;try{j=n.sqrt(M)}catch(te){const Z=te instanceof Error?": "+te.message:"";throw new Error("Point is not on curve"+Z)}const V=(j&cs)===cs;return(R&1)===1!==V&&(j=n.neg(j)),{x:O,y:j}}else if(I===i&&R===4){const O=n.fromBytes(B.subarray(0,n.BYTES)),M=n.fromBytes(B.subarray(n.BYTES,2*n.BYTES));return{x:O,y:M}}else{const O=s,M=i;throw new Error("invalid Point, expected length of "+O+", or uncompressed "+M+", got "+I)}}}),h=W=>Tw(Pw(W,e.nByteLength));function f(W){const I=r>>cs;return W>I}function p(W){return f(W)?o(-W):W}const g=(W,I,R)=>dg(W.slice(I,R));class w{constructor(I,R,B){this.r=I,this.s=R,this.recovery=B,this.assertValidity()}static fromCompact(I){const R=e.nByteLength;return I=Lo("compactSignature",I,R*2),new w(g(I,0,R),g(I,R,2*R))}static fromDER(I){const{r:R,s:B}=gu.toSig(Lo("DER",I));return new w(R,B)}assertValidity(){zu("r",this.r,cs,r),zu("s",this.s,cs,r)}addRecoveryBit(I){return new w(this.r,this.s,I)}recoverPublicKey(I){const{r:R,s:B,recovery:O}=this,M=T(Lo("msgHash",I));if(O==null||![0,1,2,3].includes(O))throw new Error("recovery id invalid");const j=O===2||O===3?R+e.n:R;if(j>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const V=O&1?"03":"02",te=c.fromHex(V+h(j)),Z=a(j),X=o(-M*Z),ce=o(B*Z),ge=c.BASE.multiplyAndAddUnsafe(te,X,ce);if(!ge)throw new Error("point at infinify");return ge.assertValidity(),ge}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Rw(this.toDERHex())}toDERHex(){return gu.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Rw(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const m={isValidPrivateKey(W){try{return l(W),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const W=SZ(e.n);return kDe(e.randomBytes(W),e.n)},precompute(W=8,I=c.BASE){return I._setWindowSize(W),I.multiply(BigInt(3)),I}};function b(W,I=!0){return c.fromPrivateKey(W).toRawBytes(I)}function v(W){const I=$g(W),R=typeof W=="string",B=(I||R)&&W.length;return I?B===s||B===i:R?B===2*s||B===2*i:W instanceof c}function A(W,I,R=!0){if(v(W))throw new Error("first arg must be private key");if(!v(I))throw new Error("second arg must be public key");return c.fromHex(I).multiply(l(W)).toRawBytes(R)}const C=e.bits2int||function(W){if(W.length>8192)throw new Error("input is too large");const I=dg(W),R=W.length*8-e.nBitLength;return R>0?I>>BigInt(R):I},T=e.bits2int_modN||function(W){return o(C(W))},x=SU(e.nBitLength);function N(W){return zu("num < 2^"+e.nBitLength,W,Pu,x),Pw(W,e.nByteLength)}function S(W,I,R=D){if(["recovered","canonical"].some(it=>it in R))throw new Error("sign() legacy options not supported");const{hash:B,randomBytes:O}=e;let{lowS:M,prehash:j,extraEntropy:V}=R;M==null&&(M=!0),W=Lo("msgHash",W),uj(R),j&&(W=Lo("prehashed msgHash",B(W)));const te=T(W),Z=l(I),X=[N(Z),N(te)];if(V!=null&&V!==!1){const it=V===!0?O(n.BYTES):V;X.push(Lo("extraEntropy",it))}const ce=BC(...X),ge=te;function Me(it){const Je=C(it);if(!d(Je))return;const bt=a(Je),Nt=c.BASE.multiply(Je).toAffine(),At=o(Nt.x);if(At===Pu)return;const ne=o(bt*o(ge+At*Z));if(ne===Pu)return;let ie=(Nt.x===At?0:2)|Number(Nt.y&cs),be=ne;return M&&f(ne)&&(be=p(ne),ie^=1),new w(At,be,ie)}return{seed:ce,k2sig:Me}}const D={lowS:e.lowS,prehash:!1},P={lowS:e.lowS,prehash:!1};function $(W,I,R=D){const{seed:B,k2sig:O}=S(W,I,R),M=e;return vZ(M.hash.outputLen,M.nByteLength,M.hmac)(B,O)}c.BASE._setWindowSize(8);function G(W,I,R,B=P){var ne;const O=W;I=Lo("msgHash",I),R=Lo("publicKey",R);const{lowS:M,prehash:j,format:V}=B;if(uj(B),"strict"in B)throw new Error("options.strict was renamed to lowS");if(V!==void 0&&V!=="compact"&&V!=="der")throw new Error("format must be compact or der");const te=typeof O=="string"||$g(O),Z=!te&&!V&&typeof O=="object"&&O!==null&&typeof O.r=="bigint"&&typeof O.s=="bigint";if(!te&&!Z)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let X,ce;try{if(Z&&(X=new w(O.r,O.s)),te){try{V!=="compact"&&(X=w.fromDER(O))}catch(ie){if(!(ie instanceof gu.Err))throw ie}!X&&V!=="der"&&(X=w.fromCompact(O))}ce=c.fromHex(R)}catch{return!1}if(!X||M&&X.hasHighS())return!1;j&&(I=e.hash(I));const{r:ge,s:Me}=X,it=T(I),Je=a(Me),bt=o(it*Je),Nt=o(ge*Je),At=(ne=c.BASE.multiplyAndAddUnsafe(ce,bt,Nt))==null?void 0:ne.toAffine();return At?o(At.x)===ge:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:A,sign:$,verify:G,ProjectivePoint:c,Signature:w,utils:m}}function ZDe(t){return{hash:t,hmac:(e,...n)=>mT(t,e,nke(...n)),randomBytes:pb}}function XDe(t,e){const n=r=>JDe({...t,...ZDe(r)});return{...n(e),create:n}}const TZ=_Z(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),e3e=TZ.create(BigInt("-3")),t3e=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),n3e=XDe({a:e3e,b:t3e,Fp:TZ,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},s1),RZ="base10",Si="base16",Cc="base64pad",Jd="base64url",o1="utf8",PZ=0,Hu=1,a1=2,r3e=0,hj=1,dE=12,xU=32;function s3e(){const t=i3.utils.randomPrivateKey(),e=i3.getPublicKey(t);return{privateKey:lo(t,Si),publicKey:lo(e,Si)}}function o3(){const t=pb(xU);return lo(t,Si)}function i3e(t,e){const n=i3.getSharedSecret(Na(t,Si),Na(e,Si)),r=lDe(s1,n,void 0,void 0,xU);return lo(r,Si)}function CS(t){const e=s1(Na(t,Si));return lo(e,Si)}function gl(t){const e=s1(Na(t,o1));return lo(e,Si)}function OZ(t){return Na(`${t}`,RZ)}function Fg(t){return Number(lo(t,RZ))}function kZ(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function DZ(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function o3e(t){const e=OZ(typeof t.type<"u"?t.type:PZ);if(Fg(e)===Hu&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?Na(t.senderPublicKey,Si):void 0,r=typeof t.iv<"u"?Na(t.iv,Si):pb(dE),s=Na(t.symKey,Si),i=yZ(s,r).encrypt(Na(t.message,o1)),o=MZ({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===Jd?kZ(o):o}function a3e(t){const e=Na(t.symKey,Si),{sealed:n,iv:r}=$C({encoded:t.encoded,encoding:t.encoding}),s=yZ(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return lo(s,o1)}function c3e(t,e){const n=OZ(a1),r=pb(dE),s=Na(t,o1),i=MZ({type:n,sealed:s,iv:r});return e===Jd?kZ(i):i}function l3e(t,e){const{sealed:n}=$C({encoded:t,encoding:e});return lo(n,o1)}function MZ(t){if(Fg(t.type)===a1)return lo(cE([t.type,t.sealed]),Cc);if(Fg(t.type)===Hu){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return lo(cE([t.type,t.senderPublicKey,t.iv,t.sealed]),Cc)}return lo(cE([t.type,t.iv,t.sealed]),Cc)}function $C(t){const e=(t.encoding||Cc)===Jd?DZ(t.encoded):t.encoded,n=Na(e,Cc),r=n.slice(r3e,hj),s=hj;if(Fg(r)===Hu){const c=s+xU,l=c+dE,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(Fg(r)===a1){const c=n.slice(s),l=pb(dE);return{type:r,sealed:c,iv:l}}const i=s+dE,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function u3e(t,e){const n=$C({encoded:t,encoding:e==null?void 0:e.encoding});return LZ({type:Fg(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?lo(n.senderPublicKey,Si):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function LZ(t){const e=(t==null?void 0:t.type)||PZ;if(e===Hu){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function fj(t){return t.type===Hu&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function pj(t){return t.type===a1}function d3e(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return cE([new Uint8Array([4]),e,n])}function h3e(t,e){const[n,r,s]=t.split("."),i=Buffer.from(DZ(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=s1(c),u=d3e(e);if(!n3e.verify(cE([o,a]),l,u))throw new Error("Invalid signature");return LD(t).payload}const f3e="irn";function uI(t){return(t==null?void 0:t.relay)||{protocol:f3e}}function Sv(t){const e=wNe[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function p3e(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function gj(t){if(!t.includes("wc:")){const l=sZ(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:g3e(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:p3e(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function g3e(t){return t.startsWith("//")?t.substring(2):t}function m3e(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function mj(t){const e=new URLSearchParams,n=m3e(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function AA(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var y3e=Object.defineProperty,w3e=Object.defineProperties,b3e=Object.getOwnPropertyDescriptors,yj=Object.getOwnPropertySymbols,v3e=Object.prototype.hasOwnProperty,E3e=Object.prototype.propertyIsEnumerable,wj=(t,e,n)=>e in t?y3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,C3e=(t,e)=>{for(var n in e||(e={}))v3e.call(e,n)&&wj(t,n,e[n]);if(yj)for(var n of yj(e))E3e.call(e,n)&&wj(t,n,e[n]);return t},_3e=(t,e)=>w3e(t,b3e(e));function mb(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function A3e(t){const e=[];return Object.values(t).forEach(n=>{e.push(...mb(n.accounts))}),e}function S3e(t,e){const n=[];return Object.values(t).forEach(r=>{mb(r.accounts).includes(e)&&n.push(...r.methods)}),n}function x3e(t,e){const n=[];return Object.values(t).forEach(r=>{mb(r.accounts).includes(e)&&n.push(...r.events)}),n}function ET(t){return t.includes(":")}function Ny(t){return ET(t)?t.split(":")[0]:t}function bj(t){var e,n,r;const s={};if(!Xh(t))return s;for(const[i,o]of Object.entries(t)){const a=ET(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=Ny(i);s[u]=_3e(C3e({},s[u]),{chains:Ol(a,(e=s[u])==null?void 0:e.chains),methods:Ol(c,(n=s[u])==null?void 0:n.methods),events:Ol(l,(r=s[u])==null?void 0:r.events)})}return s}function I3e(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function vj(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=I3e(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Ol(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function N3e(t,e){var n,r,s,i,o,a;const c=bj(t),l=bj(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:Ol((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:Ol((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:Ol((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const T3e={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},R3e={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function xe(t,e){const{message:n,code:r}=R3e[t];return{message:e?`${n} ${e}`:n,code:r}}function $n(t,e){const{message:n,code:r}=T3e[t];return{message:e?`${n} ${e}`:n,code:r}}function Zh(t,e){return!!Array.isArray(t)}function Xh(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Ps(t){return typeof t>"u"}function Br(t,e){return e&&Ps(t)?!0:typeof t=="string"&&!!t.trim().length}function IU(t,e){return e&&Ps(t)?!0:typeof t=="number"&&!isNaN(t)}function P3e(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return xp(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=mb(a),d=n[o];(!xp(XJ(o,d),u)||!xp(d.methods,c)||!xp(d.events,l))&&(i=!1)}),i):!1}function dI(t){return Br(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function O3e(t){if(Br(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&dI(n)}}return!1}function k3e(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Br(t,!1)){if(e(t))return!0;const n=sZ(t);return e(n)}}catch{}return!1}function D3e(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function M3e(t){return t==null?void 0:t.topic}function L3e(t,e){let n=null;return Br(t==null?void 0:t.publicKey,!1)||(n=xe("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function Ej(t){let e=!0;return Zh(t)?t.length&&(e=t.every(n=>Br(n,!1))):e=!1,e}function U3e(t,e,n){let r=null;return Zh(e)&&e.length?e.forEach(s=>{r||dI(s)||(r=$n("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):dI(t)||(r=$n("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function B3e(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=U3e(s,XJ(s,i),`${e} ${n}`);o&&(r=o)}),r}function $3e(t,e){let n=null;return Zh(t)?t.forEach(r=>{n||O3e(r)||(n=$n("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=$n("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function F3e(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=$3e(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function j3e(t,e){let n=null;return Ej(t==null?void 0:t.methods)?Ej(t==null?void 0:t.events)||(n=$n("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=$n("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function UZ(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=j3e(r,`${e}, namespace`);s&&(n=s)}),n}function W3e(t,e,n){let r=null;if(t&&Xh(t)){const s=UZ(t,e);s&&(r=s);const i=B3e(t,e,n);i&&(r=i)}else r=xe("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function pO(t,e){let n=null;if(t&&Xh(t)){const r=UZ(t,e);r&&(n=r);const s=F3e(t,e);s&&(n=s)}else n=xe("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function BZ(t){return Br(t.protocol,!0)}function z3e(t,e){let n=!1;return t?t&&Zh(t)&&t.length&&t.forEach(r=>{n=BZ(r)}):n=!0,n}function H3e(t){return typeof t=="number"}function Wi(t){return typeof t<"u"&&typeof t!==null}function G3e(t){return!(!t||typeof t!="object"||!t.code||!IU(t.code,!1)||!t.message||!Br(t.message,!1))}function q3e(t){return!(Ps(t)||!Br(t.method,!1))}function V3e(t){return!(Ps(t)||Ps(t.result)&&Ps(t.error)||!IU(t.id,!1)||!Br(t.jsonrpc,!1))}function K3e(t){return!(Ps(t)||!Br(t.name,!1))}function Cj(t,e){return!(!dI(e)||!A3e(t).includes(e))}function Y3e(t,e,n){return Br(n,!1)?S3e(t,e).includes(n):!1}function Q3e(t,e,n){return Br(n,!1)?x3e(t,e).includes(n):!1}function _j(t,e,n){let r=null;const s=J3e(t),i=Z3e(e),o=Object.keys(s),a=Object.keys(i),c=Aj(Object.keys(t)),l=Aj(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=xe("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),xp(o,a)||(r=xe("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=mb(e[d].accounts);h.includes(d)||(r=xe("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(xp(s[d].methods,i[d].methods)?xp(s[d].events,i[d].events)||(r=xe("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=xe("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function J3e(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function Aj(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Z3e(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=mb(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function X3e(t,e){return IU(t,!1)&&t<=e.max&&t>=e.min}function Sj(){const t=n1();return new Promise(e=>{switch(t){case jo.browser:e(e5e());break;case jo.reactNative:e(t5e());break;case jo.node:e(n5e());break;default:e(!0)}})}function e5e(){return fb()&&(navigator==null?void 0:navigator.onLine)}async function t5e(){if(Nf()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function n5e(){return!0}function r5e(t){switch(n1()){case jo.browser:s5e(t);break;case jo.reactNative:i5e(t);break}}function s5e(t){!Nf()&&fb()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function i5e(t){Nf()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function o5e(){var t;return fb()&&Dg()?((t=Dg())==null?void 0:t.visibilityState)==="visible":!0}const gO={};class sv{static get(e){return gO[e]}static set(e,n){gO[e]=n}static delete(e){delete gO[e]}}var a5e={};const $Z="wc",FZ=2,a3="core",jl=`${$Z}@2:${a3}:`,c5e={logger:"error"},l5e={database:":memory:"},u5e="crypto",xj="client_ed25519_seed",d5e=_e.ONE_DAY,h5e="keychain",f5e="0.3",p5e="messages",g5e="0.3",Ij=_e.SIX_HOURS,m5e="publisher",jZ="irn",y5e="error",WZ="wss://relay.walletconnect.org",w5e="relayer",ps={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},b5e="_subscription",ia={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},v5e=.1,c3="2.21.0",sr={link_mode:"link_mode",relay:"relay"},_S={inbound:"inbound",outbound:"outbound"},E5e="0.3",C5e="WALLETCONNECT_CLIENT_ID",Nj="WALLETCONNECT_LINK_MODE_APPS",No={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},_5e="subscription",A5e="0.3",S5e="pairing",x5e="0.3",iv={wc_pairingDelete:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:0},res:{ttl:_e.ONE_DAY,prompt:!1,tag:0}}},ap={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Va={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},I5e="history",N5e="0.3",T5e="expirer",da={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},R5e="0.3",P5e="verify-api",O5e="https://verify.walletconnect.com",zZ="https://verify.walletconnect.org",hE=zZ,k5e=`${hE}/v3`,D5e=[O5e,zZ],M5e="echo",L5e="https://echo.walletconnect.com",Yc={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},au={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Ka={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Wf={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},zf={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},ov={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},U5e=.1,B5e="event-client",$5e=86400,F5e="https://pulse.walletconnect.org/batch";function j5e(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,m=0,b=p.length;m!==b&&p[m]===0;)m++,g++;for(var v=(b-m)*u+1>>>0,A=new Uint8Array(v);m!==b;){for(var C=p[m],T=0,x=v-1;(C!==0||T<w)&&x!==-1;x--,T++)C+=256*A[x]>>>0,A[x]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");w=T,m++}for(var N=v-w;N!==v&&A[N]===0;)N++;for(var S=c.repeat(g);N<v;++N)S+=t.charAt(A[N]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,m=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var C=0,T=b-1;(A!==0||C<m)&&T!==-1;T--,C++)A+=a*v[T]>>>0,v[T]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");m=C,g++}if(p[g]!==" "){for(var x=b-m;x!==b&&v[x]===0;)x++;for(var N=new Uint8Array(w+(b-x)),S=w;x!==b;)N[S++]=v[x++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var W5e=j5e,z5e=W5e;const HZ=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},H5e=t=>new TextEncoder().encode(t),G5e=t=>new TextDecoder().decode(t);class q5e{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class V5e{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return GZ(this,e)}}class K5e{constructor(e){this.decoders=e}or(e){return GZ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const GZ=(t,e)=>new K5e({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Y5e{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new q5e(e,n,r),this.decoder=new V5e(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const CT=({name:t,prefix:e,encode:n,decode:r})=>new Y5e(t,e,n,r),c1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=z5e(n,e);return CT({prefix:t,name:e,encode:r,decode:i=>HZ(s(i))})},Q5e=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},J5e=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},zs=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>CT({prefix:e,name:t,encode(s){return J5e(s,r,n)},decode(s){return Q5e(s,r,n,t)}}),Z5e=CT({prefix:"\0",name:"identity",encode:t=>G5e(t),decode:t=>H5e(t)});var X5e=Object.freeze({__proto__:null,identity:Z5e});const eMe=zs({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var tMe=Object.freeze({__proto__:null,base2:eMe});const nMe=zs({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var rMe=Object.freeze({__proto__:null,base8:nMe});const sMe=c1({prefix:"9",name:"base10",alphabet:"0123456789"});var iMe=Object.freeze({__proto__:null,base10:sMe});const oMe=zs({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),aMe=zs({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var cMe=Object.freeze({__proto__:null,base16:oMe,base16upper:aMe});const lMe=zs({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),uMe=zs({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),dMe=zs({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),hMe=zs({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),fMe=zs({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),pMe=zs({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),gMe=zs({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),mMe=zs({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),yMe=zs({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var wMe=Object.freeze({__proto__:null,base32:lMe,base32upper:uMe,base32pad:dMe,base32padupper:hMe,base32hex:fMe,base32hexupper:pMe,base32hexpad:gMe,base32hexpadupper:mMe,base32z:yMe});const bMe=c1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),vMe=c1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var EMe=Object.freeze({__proto__:null,base36:bMe,base36upper:vMe});const CMe=c1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),_Me=c1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var AMe=Object.freeze({__proto__:null,base58btc:CMe,base58flickr:_Me});const SMe=zs({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),xMe=zs({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),IMe=zs({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),NMe=zs({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var TMe=Object.freeze({__proto__:null,base64:SMe,base64pad:xMe,base64url:IMe,base64urlpad:NMe});const qZ=Array.from(""),RMe=qZ.reduce((t,e,n)=>(t[n]=e,t),[]),PMe=qZ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function OMe(t){return t.reduce((e,n)=>(e+=RMe[n],e),"")}function kMe(t){const e=[];for(const n of t){const r=PMe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const DMe=CT({prefix:"",name:"base256emoji",encode:OMe,decode:kMe});var MMe=Object.freeze({__proto__:null,base256emoji:DMe}),LMe=VZ,Tj=128,UMe=-128,BMe=Math.pow(2,31);function VZ(t,e,n){e=e||[],n=n||0;for(var r=n;t>=BMe;)e[n++]=t&255|Tj,t/=128;for(;t&UMe;)e[n++]=t&255|Tj,t>>>=7;return e[n]=t|0,VZ.bytes=n-r+1,e}var $Me=l3,FMe=128,Rj=127;function l3(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw l3.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&Rj)<<s:(o&Rj)*Math.pow(2,s),s+=7}while(o>=FMe);return l3.bytes=i-r,n}var jMe=Math.pow(2,7),WMe=Math.pow(2,14),zMe=Math.pow(2,21),HMe=Math.pow(2,28),GMe=Math.pow(2,35),qMe=Math.pow(2,42),VMe=Math.pow(2,49),KMe=Math.pow(2,56),YMe=Math.pow(2,63),QMe=function(t){return t<jMe?1:t<WMe?2:t<zMe?3:t<HMe?4:t<GMe?5:t<qMe?6:t<VMe?7:t<KMe?8:t<YMe?9:10},JMe={encode:LMe,decode:$Me,encodingLength:QMe},KZ=JMe;const Pj=(t,e,n=0)=>(KZ.encode(t,e,n),e),Oj=t=>KZ.encodingLength(t),u3=(t,e)=>{const n=e.byteLength,r=Oj(t),s=r+Oj(n),i=new Uint8Array(s+n);return Pj(t,i,0),Pj(n,i,r),i.set(e,s),new ZMe(t,n,e,i)};class ZMe{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const YZ=({name:t,code:e,encode:n})=>new XMe(t,e,n);class XMe{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?u3(this.code,n):n.then(r=>u3(this.code,r))}else throw Error("Unknown type, must be binary type")}}const QZ=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),eLe=YZ({name:"sha2-256",code:18,encode:QZ("SHA-256")}),tLe=YZ({name:"sha2-512",code:19,encode:QZ("SHA-512")});var nLe=Object.freeze({__proto__:null,sha256:eLe,sha512:tLe});const JZ=0,rLe="identity",ZZ=HZ,sLe=t=>u3(JZ,ZZ(t)),iLe={code:JZ,name:rLe,encode:ZZ,digest:sLe};var oLe=Object.freeze({__proto__:null,identity:iLe});new TextEncoder,new TextDecoder;const kj={...X5e,...tMe,...rMe,...iMe,...cMe,...wMe,...EMe,...AMe,...TMe,...MMe};({...nLe,...oLe});function aLe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function XZ(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Dj=XZ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),mO=XZ("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=aLe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),cLe={utf8:Dj,"utf-8":Dj,hex:kj.base16,latin1:mO,ascii:mO,binary:mO,...kj};function lLe(t,e="utf8"){const n=cLe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var uLe=Object.defineProperty,dLe=(t,e,n)=>e in t?uLe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hc=(t,e,n)=>dLe(t,typeof e!="symbol"?e+"":e,n);class hLe{constructor(e,n){this.core=e,this.logger=n,Hc(this,"keychain",new Map),Hc(this,"name",h5e),Hc(this,"version",f5e),Hc(this,"initialized",!1),Hc(this,"storagePrefix",jl),Hc(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),Hc(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),Hc(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),Hc(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=xe("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),Hc(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Fs(n,this.name)}get context(){return mo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,YD(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?QD(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var fLe=Object.defineProperty,pLe=(t,e,n)=>e in t?fLe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,As=(t,e,n)=>pLe(t,typeof e!="symbol"?e+"":e,n);class gLe{constructor(e,n,r){this.core=e,this.logger=n,As(this,"name",u5e),As(this,"keychain"),As(this,"randomSessionIdentifier",o3()),As(this,"initialized",!1),As(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),As(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),As(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=V4(s);return mJ(i.publicKey)}),As(this,"generateKeyPair",()=>{this.isInitialized();const s=s3e();return this.setPrivateKey(s.publicKey,s.privateKey)}),As(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=V4(i),a=this.randomSessionIdentifier;return await Kxe(a,s,d5e,o)}),As(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=i3e(a,i);return this.setSymKey(c,o)}),As(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||CS(s);return await this.keychain.set(o,s),o}),As(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),As(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),As(this,"encode",async(s,i,o)=>{this.isInitialized();const a=LZ(o),c=rd(i);if(pj(a))return c3e(c,o==null?void 0:o.encoding);if(fj(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return o3e({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),As(this,"decode",async(s,i,o)=>{this.isInitialized();const a=u3e(i,o);if(pj(a)){const c=l3e(i,o==null?void 0:o.encoding);return kg(c)}if(fj(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=a3e({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return kg(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),As(this,"getPayloadType",(s,i=Cc)=>{const o=$C({encoded:s,encoding:i});return Fg(o.type)}),As(this,"getPayloadSenderPublicKey",(s,i=Cc)=>{const o=$C({encoded:s,encoding:i});return o.senderPublicKey?lo(o.senderPublicKey,Si):void 0}),this.core=e,this.logger=Fs(n,this.name),this.keychain=r||new hLe(this.core,this.logger)}get context(){return mo(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(xj)}catch{e=o3(),await this.keychain.set(xj,e)}return lLe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var mLe=Object.defineProperty,yLe=Object.defineProperties,wLe=Object.getOwnPropertyDescriptors,Mj=Object.getOwnPropertySymbols,bLe=Object.prototype.hasOwnProperty,vLe=Object.prototype.propertyIsEnumerable,d3=(t,e,n)=>e in t?mLe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ELe=(t,e)=>{for(var n in e||(e={}))bLe.call(e,n)&&d3(t,n,e[n]);if(Mj)for(var n of Mj(e))vLe.call(e,n)&&d3(t,n,e[n]);return t},CLe=(t,e)=>yLe(t,wLe(e)),Eo=(t,e,n)=>d3(t,typeof e!="symbol"?e+"":e,n);class _Le extends wOe{constructor(e,n){super(e,n),this.logger=e,this.core=n,Eo(this,"messages",new Map),Eo(this,"messagesWithoutClientAck",new Map),Eo(this,"name",p5e),Eo(this,"version",g5e),Eo(this,"initialized",!1),Eo(this,"storagePrefix",jl),Eo(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),Eo(this,"set",async(r,s,i)=>{this.isInitialized();const o=gl(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===_S.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,CLe(ELe({},c),{[o]:s}))}return await this.persist(),o}),Eo(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),Eo(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),Eo(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=gl(s);return typeof i[o]<"u"}),Eo(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=gl(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),Eo(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Fs(e,this.name),this.core=n}get context(){return mo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,YD(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,YD(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?QD(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?QD(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var ALe=Object.defineProperty,SLe=Object.defineProperties,xLe=Object.getOwnPropertyDescriptors,Lj=Object.getOwnPropertySymbols,ILe=Object.prototype.hasOwnProperty,NLe=Object.prototype.propertyIsEnumerable,h3=(t,e,n)=>e in t?ALe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,SA=(t,e)=>{for(var n in e||(e={}))ILe.call(e,n)&&h3(t,n,e[n]);if(Lj)for(var n of Lj(e))NLe.call(e,n)&&h3(t,n,e[n]);return t},yO=(t,e)=>SLe(t,xLe(e)),Ya=(t,e,n)=>h3(t,typeof e!="symbol"?e+"":e,n);class TLe extends bOe{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Ya(this,"events",new $a.EventEmitter),Ya(this,"name",m5e),Ya(this,"queue",new Map),Ya(this,"publishTimeout",_e.toMiliseconds(_e.ONE_MINUTE)),Ya(this,"initialPublishTimeout",_e.toMiliseconds(_e.ONE_SECOND*15)),Ya(this,"needsTransportRestart",!1),Ya(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||Ij,c=uI(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||Sp().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const w=({id:b})=>{h.opts.id===b&&(this.removeRequestFromQueue(b),this.relayer.events.removeListener(ps.publish,w),g(h))};this.relayer.events.on(ps.publish,w);const m=Rh(new Promise((b,v)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(b).catch(A=>{this.logger.warn(A,A==null?void 0:A.message),v(A)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await m,this.events.removeListener(ps.publish,w)}catch(b){this.queue.set(d,yO(SA({},h),{attempt:1})),this.logger.warn(b,b==null?void 0:b.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await Rh(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),Ya(this,"on",(r,s)=>{this.events.on(r,s)}),Ya(this,"once",(r,s)=>{this.events.once(r,s)}),Ya(this,"off",(r,s)=>{this.events.off(r,s)}),Ya(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=Fs(n,this.name),this.registerEventListeners()}get context(){return mo(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=Ij,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:Sv(uI().protocol).publish,params:SA({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};Ps((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),Ps((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(ps.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,yO(SA({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(yO(SA({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(um.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(ps.connection_stalled);return}this.checkQueue()}),this.relayer.on(ps.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var RLe=Object.defineProperty,PLe=(t,e,n)=>e in t?RLe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fm=(t,e,n)=>PLe(t,typeof e!="symbol"?e+"":e,n);class OLe{constructor(){Fm(this,"map",new Map),Fm(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),Fm(this,"get",e=>this.map.get(e)||[]),Fm(this,"exists",(e,n)=>this.get(e).includes(n)),Fm(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Fm(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var kLe=Object.defineProperty,DLe=Object.defineProperties,MLe=Object.getOwnPropertyDescriptors,Uj=Object.getOwnPropertySymbols,LLe=Object.prototype.hasOwnProperty,ULe=Object.prototype.propertyIsEnumerable,f3=(t,e,n)=>e in t?kLe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,av=(t,e)=>{for(var n in e||(e={}))LLe.call(e,n)&&f3(t,n,e[n]);if(Uj)for(var n of Uj(e))ULe.call(e,n)&&f3(t,n,e[n]);return t},wO=(t,e)=>DLe(t,MLe(e)),Gn=(t,e,n)=>f3(t,typeof e!="symbol"?e+"":e,n);class BLe extends COe{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Gn(this,"subscriptions",new Map),Gn(this,"topicMap",new OLe),Gn(this,"events",new $a.EventEmitter),Gn(this,"name",_5e),Gn(this,"version",A5e),Gn(this,"pending",new Map),Gn(this,"cached",[]),Gn(this,"initialized",!1),Gn(this,"storagePrefix",jl),Gn(this,"subscribeTimeout",_e.toMiliseconds(_e.ONE_MINUTE)),Gn(this,"initialSubscribeTimeout",_e.toMiliseconds(_e.ONE_SECOND*15)),Gn(this,"clientId"),Gn(this,"batchSubscribeTopicsLimit",500),Gn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Gn(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=uI(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),Gn(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),Gn(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),Gn(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),Gn(this,"on",(r,s)=>{this.events.on(r,s)}),Gn(this,"once",(r,s)=>{this.events.once(r,s)}),Gn(this,"off",(r,s)=>{this.events.off(r,s)}),Gn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),Gn(this,"start",async()=>{await this.onConnect()}),Gn(this,"stop",async()=>{await this.onDisconnect()}),Gn(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Gn(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),Gn(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(um.pulse,async()=>{await this.checkPending()}),this.events.on(No.created,async r=>{const s=No.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(No.deleted,async r=>{const s=No.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=Fs(n,this.name),this.clientId=""}get context(){return mo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=uI(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=$n("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===sr.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:Sv(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===sr.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},_e.toMiliseconds(_e.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(No.created,d),u(h.id))};this.events.on(No.created,d);try{const h=await Rh(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(No.created,d),u(h)}catch{}}),l=await Rh(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(ps.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:Sv(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Rh(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(ps.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:Sv(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await Rh(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(ps.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:Sv(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,wO(av({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,av({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,av({},n)),this.topicMap.set(n.topic,e),this.events.emit(No.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(No.deleted,wO(av({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(No.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(No.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>wO(av({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await G2e(_e.toMiliseconds(_e.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return gl(e+await this.getClientId())}}var $Le=Object.defineProperty,Bj=Object.getOwnPropertySymbols,FLe=Object.prototype.hasOwnProperty,jLe=Object.prototype.propertyIsEnumerable,p3=(t,e,n)=>e in t?$Le(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$j=(t,e)=>{for(var n in e||(e={}))FLe.call(e,n)&&p3(t,n,e[n]);if(Bj)for(var n of Bj(e))jLe.call(e,n)&&p3(t,n,e[n]);return t},pn=(t,e,n)=>p3(t,typeof e!="symbol"?e+"":e,n);class WLe extends vOe{constructor(e){super(e),pn(this,"protocol","wc"),pn(this,"version",2),pn(this,"core"),pn(this,"logger"),pn(this,"events",new $a.EventEmitter),pn(this,"provider"),pn(this,"messages"),pn(this,"subscriber"),pn(this,"publisher"),pn(this,"name",w5e),pn(this,"transportExplicitlyClosed",!1),pn(this,"initialized",!1),pn(this,"connectionAttemptInProgress",!1),pn(this,"relayUrl"),pn(this,"projectId"),pn(this,"packageName"),pn(this,"bundleId"),pn(this,"hasExperiencedNetworkDisruption",!1),pn(this,"pingTimeout"),pn(this,"heartBeatTimeout",_e.toMiliseconds(_e.THIRTY_SECONDS+_e.FIVE_SECONDS)),pn(this,"reconnectTimeout"),pn(this,"connectPromise"),pn(this,"reconnectInProgress",!1),pn(this,"requestsInFlight",[]),pn(this,"connectTimeout",_e.toMiliseconds(_e.ONE_SECOND*15)),pn(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||Sp().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),pn(this,"resetPingTimeout",()=>{cI()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),pn(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),pn(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(ps.connect)}),pn(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),pn(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(ps.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),pn(this,"registerProviderListeners",()=>{this.provider.on(ia.payload,this.onPayloadHandler),this.provider.on(ia.connect,this.onConnectHandler),this.provider.on(ia.disconnect,this.onDisconnectHandler),this.provider.on(ia.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Fs(e.logger,this.name):J_(hm({level:e.logger||y5e})),this.messages=new _Le(this.logger,e.core),this.subscriber=new BLe(this,this.logger),this.publisher=new TLe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||WZ,this.projectId=e.projectId,T2e()?this.packageName=UF():R2e()&&(this.bundleId=UF()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return mo(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:sr.relay},_S.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(No.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(No.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,$j({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Rh(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Sj())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=Hr(_e.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(ps.message,e),await this.recordMessageEvent(e,_S.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(ia.disconnect,i),await Rh(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(ia.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(ia.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(ia.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,_e.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(cI())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Fa(new oTe(M2e({sdkVersion:c3,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),bU(e)){if(!e.method.endsWith(b5e))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:sr.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace($j({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else dT(e)&&this.events.emit(ps.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,_S.inbound),this.events.emit(ps.message,e))}async acknowledgePayload(e){const n=lT(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(ia.payload,this.onPayloadHandler),this.provider.off(ia.connect,this.onConnectHandler),this.provider.off(ia.disconnect,this.onDisconnectHandler),this.provider.off(ia.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await Sj();r5e(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(um.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&o5e())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(ps.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},_e.toMiliseconds(v5e)))))}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function zLe(){}function Fj(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function jj(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Wj(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const HLe="[object RegExp]",GLe="[object String]",qLe="[object Number]",VLe="[object Boolean]",zj="[object Arguments]",KLe="[object Symbol]",YLe="[object Date]",QLe="[object Map]",JLe="[object Set]",ZLe="[object Array]",XLe="[object Function]",eUe="[object ArrayBuffer]",bO="[object Object]",tUe="[object Error]",nUe="[object DataView]",rUe="[object Uint8Array]",sUe="[object Uint8ClampedArray]",iUe="[object Uint16Array]",oUe="[object Uint32Array]",aUe="[object BigUint64Array]",cUe="[object Int8Array]",lUe="[object Int16Array]",uUe="[object Int32Array]",dUe="[object BigInt64Array]",hUe="[object Float32Array]",fUe="[object Float64Array]";function pUe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function gUe(t,e,n){return xv(t,e,void 0,void 0,void 0,void 0,n)}function xv(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return fE(t,e,i,o)}return fE(t,e,i,o)}function fE(t,e,n,r){if(Object.is(t,e))return!0;let s=Wj(t),i=Wj(e);if(s===zj&&(s=bO),i===zj&&(i=bO),s!==i)return!1;switch(s){case GLe:return t.toString()===e.toString();case qLe:{const c=t.valueOf(),l=e.valueOf();return pUe(c,l)}case VLe:case YLe:case KLe:return Object.is(t.valueOf(),e.valueOf());case HLe:return t.source===e.source&&t.flags===e.flags;case XLe:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case QLe:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!xv(l,e.get(c),c,t,e,n,r))return!1;return!0}case JLe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>xv(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case ZLe:case rUe:case sUe:case iUe:case oUe:case aUe:case cUe:case lUe:case uUe:case dUe:case hUe:case fUe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!xv(t[c],e[c],c,t,e,n,r))return!1;return!0}case eUe:return t.byteLength!==e.byteLength?!1:fE(new Uint8Array(t),new Uint8Array(e),n,r);case nUe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:fE(new Uint8Array(t),new Uint8Array(e),n,r);case tUe:return t.name===e.name&&t.message===e.message;case bO:{if(!(fE(t.constructor,e.constructor,n,r)||Fj(t)&&Fj(e)))return!1;const c=[...Object.keys(t),...jj(t)],l=[...Object.keys(e),...jj(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!xv(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function mUe(t,e){return gUe(t,e,zLe)}var yUe=Object.defineProperty,Hj=Object.getOwnPropertySymbols,wUe=Object.prototype.hasOwnProperty,bUe=Object.prototype.propertyIsEnumerable,g3=(t,e,n)=>e in t?yUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gj=(t,e)=>{for(var n in e||(e={}))wUe.call(e,n)&&g3(t,n,e[n]);if(Hj)for(var n of Hj(e))bUe.call(e,n)&&g3(t,n,e[n]);return t},Ui=(t,e,n)=>g3(t,typeof e!="symbol"?e+"":e,n);class pm extends EOe{constructor(e,n,r,s=jl,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Ui(this,"map",new Map),Ui(this,"version",E5e),Ui(this,"cached",[]),Ui(this,"initialized",!1),Ui(this,"getKey"),Ui(this,"storagePrefix",jl),Ui(this,"recentlyDeleted",[]),Ui(this,"recentlyDeletedLimit",200),Ui(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Ps(o)?this.map.set(this.getKey(o),o):D3e(o)?this.map.set(o.id,o):M3e(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Ui(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Ui(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Ui(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>mUe(a[c],o[c]))):this.values)),Ui(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=Gj(Gj({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Ui(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Fs(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return mo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=xe("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var vUe=Object.defineProperty,EUe=(t,e,n)=>e in t?vUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tn=(t,e,n)=>EUe(t,typeof e!="symbol"?e+"":e,n);class CUe{constructor(e,n){this.core=e,this.logger=n,tn(this,"name",S5e),tn(this,"version",x5e),tn(this,"events",new aU),tn(this,"pairings"),tn(this,"initialized",!1),tn(this,"storagePrefix",jl),tn(this,"ignoredPayloadTypes",[Hu]),tn(this,"registeredMethods",[]),tn(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),tn(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),tn(this,"create",async r=>{this.isInitialized();const s=o3(),i=await this.core.crypto.setSymKey(s),o=Hr(_e.FIVE_MINUTES),a={protocol:jZ},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=mj({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(ap.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),tn(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[Yc.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=gj(r.uri);s.props.properties.topic=i,s.addTrace(Yc.pairing_uri_validation_success),s.addTrace(Yc.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(Yc.existing_pairing),u.active)throw s.setError(au.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(Yc.pairing_not_expired)}const d=c||Hr(_e.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(Yc.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(ap.create,h),s.addTrace(Yc.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(Yc.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(au.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(au.subscribe_pairing_topic_failure),f}return s.addTrace(Yc.subscribe_pairing_topic_success),h}),tn(this,"activate",async({topic:r})=>{this.isInitialized();const s=Hr(_e.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),tn(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Xf();this.events.once(An("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),tn(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),tn(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),tn(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),tn(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",$n("USER_DISCONNECTED")),await this.deletePairing(s))}),tn(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return mj({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),tn(this,"sendRequest",async(r,s,i)=>{const o=Th(s,i),a=await this.core.crypto.encode(r,o),c=iv[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),tn(this,"sendResult",async(r,s,i)=>{const o=lT(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=iv[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),tn(this,"sendError",async(r,s,i)=>{const o=uT(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=iv[c]?iv[c].res:iv.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),tn(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,$n("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),tn(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Gd(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),tn(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),tn(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),tn(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(ap.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),tn(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{Zc(s)?this.events.emit(An("pairing_ping",i),{}):va(s)&&this.events.emit(An("pairing_ping",i),{error:s.error})},500)}),tn(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(ap.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),tn(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=$n("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),tn(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error($n("WC_METHOD_UNSUPPORTED",r))}),tn(this,"isValidPair",(r,s)=>{var i;if(!Wi(r)){const{message:a}=xe("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(au.malformed_pairing_uri),new Error(a)}if(!k3e(r.uri)){const{message:a}=xe("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(au.malformed_pairing_uri),new Error(a)}const o=gj(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=xe("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(au.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=xe("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(au.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&_e.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(au.pairing_expired);const{message:a}=xe("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),tn(this,"isValidPing",async r=>{if(!Wi(r)){const{message:i}=xe("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),tn(this,"isValidDisconnect",async r=>{if(!Wi(r)){const{message:i}=xe("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),tn(this,"isValidPairingTopic",async r=>{if(!Br(r,!1)){const{message:s}=xe("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=xe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Gd(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=xe("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=Fs(n,this.name),this.pairings=new pm(this.core,this.logger,this.name,this.storagePrefix)}get context(){return mo(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(ps.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==sr.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);bU(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):dT(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(da.expired,async e=>{const{topic:n}=rZ(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(ap.expire,{topic:n}))})}}var _Ue=Object.defineProperty,AUe=(t,e,n)=>e in t?_Ue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ss=(t,e,n)=>AUe(t,typeof e!="symbol"?e+"":e,n);class SUe extends yOe{constructor(e,n){super(e,n),this.core=e,this.logger=n,Ss(this,"records",new Map),Ss(this,"events",new $a.EventEmitter),Ss(this,"name",I5e),Ss(this,"version",N5e),Ss(this,"cached",[]),Ss(this,"initialized",!1),Ss(this,"storagePrefix",jl),Ss(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ss(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:Hr(_e.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Va.created,o)}),Ss(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=va(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(Va.updated,s))}),Ss(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),Ss(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(Va.deleted,i)}}),this.persist()}),Ss(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),Ss(this,"on",(r,s)=>{this.events.on(r,s)}),Ss(this,"once",(r,s)=>{this.events.once(r,s)}),Ss(this,"off",(r,s)=>{this.events.off(r,s)}),Ss(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Fs(n,this.name)}get context(){return mo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Th(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Va.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Va.created,e=>{const n=Va.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Va.updated,e=>{const n=Va.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Va.deleted,e=>{const n=Va.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(um.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{_e.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(Va.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var xUe=Object.defineProperty,IUe=(t,e,n)=>e in t?xUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vs=(t,e,n)=>IUe(t,typeof e!="symbol"?e+"":e,n);class NUe extends _Oe{constructor(e,n){super(e,n),this.core=e,this.logger=n,Vs(this,"expirations",new Map),Vs(this,"events",new $a.EventEmitter),Vs(this,"name",T5e),Vs(this,"version",R5e),Vs(this,"cached",[]),Vs(this,"initialized",!1),Vs(this,"storagePrefix",jl),Vs(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Vs(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),Vs(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(da.created,{target:i,expiration:o})}),Vs(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),Vs(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(da.deleted,{target:s,expiration:i})}}),Vs(this,"on",(r,s)=>{this.events.on(r,s)}),Vs(this,"once",(r,s)=>{this.events.once(r,s)}),Vs(this,"off",(r,s)=>{this.events.off(r,s)}),Vs(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Fs(n,this.name)}get context(){return mo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return L2e(e);if(typeof e=="number")return U2e(e);const{message:n}=xe("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(da.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;_e.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(da.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(um.pulse,()=>this.checkExpirations()),this.events.on(da.created,e=>{const n=da.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(da.expired,e=>{const n=da.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(da.deleted,e=>{const n=da.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var TUe=Object.defineProperty,RUe=(t,e,n)=>e in t?TUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ur=(t,e,n)=>RUe(t,typeof e!="symbol"?e+"":e,n);class PUe extends AOe{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,Ur(this,"name",P5e),Ur(this,"abortController"),Ur(this,"isDevEnv"),Ur(this,"verifyUrlV3",k5e),Ur(this,"storagePrefix",jl),Ur(this,"version",FZ),Ur(this,"publicKey"),Ur(this,"fetchPromise"),Ur(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&_e.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Ur(this,"register",async s=>{if(!fb()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=Dg(),u=this.startAbortTimer(_e.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",w),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const w=m=>{if(m.data&&typeof m.data=="string")try{const b=JSON.parse(m.data);if(b.type==="verify_attestation"){if(LD(b.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",w),h(b.attestation===null?"":b.attestation)}}catch(b){this.logger.warn(b)}};l.body.appendChild(g),window.addEventListener("message",w,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),Ur(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(LD(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),Ur(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(_e.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),Ur(this,"getVerifyUrl",s=>{let i=s||hE;return D5e.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${hE}`),i=hE),i}),Ur(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(_e.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),Ur(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),Ur(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Ur(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),Ur(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Ur(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),Ur(this,"validateAttestation",(s,i)=>{const o=h3e(s,i.publicKey),a={hasExpired:_e.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Fs(n,this.name),this.abortController=new AbortController,this.isDevEnv=vU(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return mo(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),_e.toMiliseconds(e))}}var OUe=Object.defineProperty,kUe=(t,e,n)=>e in t?OUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qj=(t,e,n)=>kUe(t,typeof e!="symbol"?e+"":e,n);class DUe extends SOe{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,qj(this,"context",M5e),qj(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${L5e}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=Fs(n,this.context)}}var MUe=Object.defineProperty,Vj=Object.getOwnPropertySymbols,LUe=Object.prototype.hasOwnProperty,UUe=Object.prototype.propertyIsEnumerable,m3=(t,e,n)=>e in t?MUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cv=(t,e)=>{for(var n in e||(e={}))LUe.call(e,n)&&m3(t,n,e[n]);if(Vj)for(var n of Vj(e))UUe.call(e,n)&&m3(t,n,e[n]);return t},rs=(t,e,n)=>m3(t,typeof e!="symbol"?e+"":e,n);class BUe extends xOe{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,rs(this,"context",B5e),rs(this,"storagePrefix",jl),rs(this,"storageVersion",U5e),rs(this,"events",new Map),rs(this,"shouldPersist",!1),rs(this,"init",async()=>{if(!vU())try{const s={eventId:$F(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:tZ(this.core.relayer.protocol,this.core.relayer.version,c3)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),rs(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=$F(),u=this.core.projectId||"",d=Date.now(),h=cv({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),rs(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return cv(cv({},a),this.setMethods(a.eventId))}),rs(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),rs(this,"setEventListeners",()=>{this.core.heartbeat.on(um.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{_e.fromMiliseconds(Date.now())-_e.fromMiliseconds(s.timestamp)>$5e&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),rs(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),rs(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),rs(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),rs(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),rs(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,cv(cv({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),rs(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),rs(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${F5e}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${c3}${i}`,{method:"POST",body:JSON.stringify(s)})}),rs(this,"getAppDomain",()=>eZ().url),this.logger=Fs(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var $Ue=Object.defineProperty,Kj=Object.getOwnPropertySymbols,FUe=Object.prototype.hasOwnProperty,jUe=Object.prototype.propertyIsEnumerable,y3=(t,e,n)=>e in t?$Ue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yj=(t,e)=>{for(var n in e||(e={}))FUe.call(e,n)&&y3(t,n,e[n]);if(Kj)for(var n of Kj(e))jUe.call(e,n)&&y3(t,n,e[n]);return t},Yn=(t,e,n)=>y3(t,typeof e!="symbol"?e+"":e,n);let WUe=class eX extends fOe{constructor(e){var n;super(e),Yn(this,"protocol",$Z),Yn(this,"version",FZ),Yn(this,"name",a3),Yn(this,"relayUrl"),Yn(this,"projectId"),Yn(this,"customStoragePrefix"),Yn(this,"events",new $a.EventEmitter),Yn(this,"logger"),Yn(this,"heartbeat"),Yn(this,"relayer"),Yn(this,"crypto"),Yn(this,"storage"),Yn(this,"history"),Yn(this,"expirer"),Yn(this,"pairing"),Yn(this,"verify"),Yn(this,"echoClient"),Yn(this,"linkModeSupportedApps"),Yn(this,"eventClient"),Yn(this,"initialized",!1),Yn(this,"logChunkController"),Yn(this,"on",(a,c)=>this.events.on(a,c)),Yn(this,"once",(a,c)=>this.events.once(a,c)),Yn(this,"off",(a,c)=>this.events.off(a,c)),Yn(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Yn(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:sr.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||WZ,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=hm({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:c5e.logger,name:a3}),{logger:i,chunkLoggerController:o}=sT({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Fs(i,this.name),this.heartbeat=new b1e,this.crypto=new gLe(this,this.logger,e==null?void 0:e.keychain),this.history=new SUe(this,this.logger),this.expirer=new NUe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new uOe(Yj(Yj({},l5e),e==null?void 0:e.storageOptions)),this.relayer=new WLe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new CUe(this,this.logger),this.verify=new PUe(this,this.logger,this.storage),this.echoClient=new DUe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new BUe(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new eX(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(C5e,r),n}get context(){return mo(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(Nj,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(Nj)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&a5e.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const zUe=WUe,tX="wc",nX=2,rX="client",NU=`${tX}@${nX}:${rX}:`,vO={name:rX,logger:"error"},Qj="WALLETCONNECT_DEEPLINK_CHOICE",HUe="proposal",Jj="Proposal expired",GUe="session",jm=_e.SEVEN_DAYS,qUe="engine",ss={wc_sessionPropose:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1104},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1106},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1112},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1114},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:_e.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:_e.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1119}}},EO={min:_e.FIVE_MINUTES,max:_e.SEVEN_DAYS},Gc={idle:"IDLE",active:"ACTIVE"},Zj={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},VUe="request",KUe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],YUe="wc",QUe="auth",JUe="authKeys",ZUe="pairingTopics",XUe="requests",_T=`${YUe}@${1.5}:${QUe}:`,AS=`${_T}:PUB_KEY`;var eBe=Object.defineProperty,tBe=Object.defineProperties,nBe=Object.getOwnPropertyDescriptors,Xj=Object.getOwnPropertySymbols,rBe=Object.prototype.hasOwnProperty,sBe=Object.prototype.propertyIsEnumerable,w3=(t,e,n)=>e in t?eBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qn=(t,e)=>{for(var n in e||(e={}))rBe.call(e,n)&&w3(t,n,e[n]);if(Xj)for(var n of Xj(e))sBe.call(e,n)&&w3(t,n,e[n]);return t},ai=(t,e)=>tBe(t,nBe(e)),ye=(t,e,n)=>w3(t,typeof e!="symbol"?e+"":e,n);class iBe extends ROe{constructor(e){super(e),ye(this,"name",qUe),ye(this,"events",new aU),ye(this,"initialized",!1),ye(this,"requestQueue",{state:Gc.idle,queue:[]}),ye(this,"sessionRequestQueue",{state:Gc.idle,queue:[]}),ye(this,"requestQueueDelay",_e.ONE_SECOND),ye(this,"expectedPairingMethodMap",new Map),ye(this,"recentlyDeletedMap",new Map),ye(this,"recentlyDeletedLimit",200),ye(this,"relayMessageCache",[]),ye(this,"pendingSessions",new Map),ye(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(ss)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},_e.toMiliseconds(this.requestQueueDelay)))}),ye(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=ai(qn({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=N3e(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const T=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=T.active}}catch(T){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),T}if(!u||!h){const{topic:T,uri:x}=await this.client.core.pairing.create();u=T,d=x}if(!u){const{message:T}=xe("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(T)}const f=await this.client.core.crypto.generateKeyPair(),p=ss.wc_sessionPropose.req.ttl||_e.FIVE_MINUTES,g=Hr(p),w=ai(qn(qn({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:jZ}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Jc()}),m=An("session_connect",w.id),{reject:b,resolve:v,done:A}=Xf(p,Jj),C=({id:T})=>{T===w.id&&(this.client.events.off("proposal_expire",C),this.pendingSessions.delete(w.id),this.events.emit(m,{error:{message:Jj,code:0}}))};return this.client.events.on("proposal_expire",C),this.events.once(m,({error:T,session:x})=>{this.client.events.off("proposal_expire",C),T?b(T):x&&v(x)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:w,throwOnFailedPublish:!0,clientRpcId:w.id}),await this.setProposal(w.id,w),{uri:d,approval:A}}),ye(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),ye(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[Ka.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(S){throw o.setError(Wf.no_internet_connection),S}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(S){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(Wf.proposal_not_found),S}try{await this.isValidApprove(n)}catch(S){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Wf.session_approve_namespace_validation_failure),S}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:w,optionalNamespaces:m}=f;let b=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});b||(b=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Ka.session_approve_started,properties:{topic:p,trace:[Ka.session_approve_started,Ka.session_namespaces_validation_success]}}));const v=await this.client.core.crypto.generateKeyPair(),A=g.publicKey,C=await this.client.core.crypto.generateSharedKey(v,A),T=qn(qn(qn({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:v,metadata:this.client.metadata},expiry:Hr(jm)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),x=sr.relay;b.addTrace(Ka.subscribing_session_topic);try{await this.client.core.relayer.subscribe(C,{transportType:x})}catch(S){throw b.setError(Wf.subscribe_session_topic_failure),S}b.addTrace(Ka.subscribe_session_topic_success);const N=ai(qn({},T),{topic:C,requiredNamespaces:w,optionalNamespaces:m,pairingTopic:p,acknowledged:!1,self:T.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:v,transportType:sr.relay});await this.client.session.set(C,N),b.addTrace(Ka.store_session);try{b.addTrace(Ka.publishing_session_settle),await this.sendRequest({topic:C,method:"wc_sessionSettle",params:T,throwOnFailedPublish:!0}).catch(S=>{throw b==null||b.setError(Wf.session_settle_publish_failure),S}),b.addTrace(Ka.session_settle_publish_success),b.addTrace(Ka.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:v},throwOnFailedPublish:!0}).catch(S=>{throw b==null||b.setError(Wf.session_approve_publish_failure),S}),b.addTrace(Ka.session_approve_publish_success)}catch(S){throw this.client.logger.error(S),this.client.session.delete(C,$n("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(C),S}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(a,$n("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(C,Hr(jm)),{topic:C,acknowledged:()=>Promise.resolve(this.client.session.get(C))}}),ye(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&(await this.sendError({id:r,topic:i,error:s,rpcOpts:ss.wc_sessionPropose.reject}),await this.client.proposal.delete(r,$n("USER_DISCONNECTED")))}),ye(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=Xf(),c=Jc(),l=Sp().toString(),u=this.client.session.get(r).namespaces;return this.events.once(An("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),ye(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=Jc(),{done:i,resolve:o,reject:a}=Xf();return this.events.once(An("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,Hr(jm)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),ye(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(m){throw this.client.logger.error("request() -> isValidRequest() failed"),m}const{chainId:r,request:s,topic:i,expiry:o=ss.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===sr.relay&&await this.confirmOnlineStateOrThrow();const c=Jc(),l=Sp().toString(),{done:u,resolve:d,reject:h}=Xf(o,"Request expired. Please try again.");this.events.once(An("session_request",c),({error:m,result:b})=>{m?h(m):d(b)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:ai(qn({},s),{expiryTimestamp:Hr(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(m=>h(m)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:ai(qn({},s),{expiryTimestamp:Hr(o)}),chainId:r},w=this.shouldSetTVF(f,g);return await Promise.all([new Promise(async m=>{await this.sendRequest(qn({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0},w&&{tvf:this.getTVFParams(c,g)})).catch(b=>h(b)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),m()}),new Promise(async m=>{var b;if(!((b=a.sessionConfig)!=null&&b.disableDeepLink)){const v=await j2e(this.client.core.storage,Qj);await B2e({id:c,topic:i,wcDeepLink:v})}m()}),u()]).then(m=>m[2])}),ye(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===sr.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Zc(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):va(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),ye(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=Jc(),i=Sp().toString(),{done:o,resolve:a,reject:c}=Xf();this.events.once(An("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),ye(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=Sp().toString(),a=Jc();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),ye(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:$n("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=xe("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),ye(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>P3e(r,n)))),ye(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),ye(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?sr.link_mode:sr.relay;o===sr.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:w}=n,m=[...n.resources||[]],{topic:b,uri:v}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:v}});const A=await this.client.core.crypto.generateKeyPair(),C=CS(A);if(await Promise.all([this.client.auth.authKeys.set(AS,{responseTopic:C,publicKey:A}),this.client.auth.pairingTopics.set(C,{topic:C,pairingTopic:b})]),await this.client.core.relayer.subscribe(C,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${b}`),g.length>0){const{namespace:M}=Vy(a[0]);let j=kke(M,"request",g);ES(m)&&(j=Mke(j,m.pop())),m.push(j)}const T=w&&w>ss.wc_sessionAuthenticate.req.ttl?w:ss.wc_sessionAuthenticate.req.ttl,x={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:m},requester:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Hr(T)},N={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},S={requiredNamespaces:{},optionalNamespaces:N,relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Hr(ss.wc_sessionPropose.req.ttl),id:Jc()},{done:D,resolve:P,reject:$}=Xf(T,"Request expired"),G=Jc(),W=An("session_connect",S.id),I=An("session_request",G),R=async({error:M,session:j})=>{this.events.off(I,B),M?$(M):j&&P({session:j})},B=async M=>{var j,V,te;if(await this.deletePendingAuthRequest(G,{message:"fulfilled",code:0}),M.error){const Je=$n("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return M.error.code===Je.code?void 0:(this.events.off(W,R),$(M.error.message))}await this.deleteProposal(S.id),this.events.off(W,R);const{cacaos:Z,responder:X}=M.result,ce=[],ge=[];for(const Je of Z){await VF({cacao:Je,projectId:this.client.core.projectId})||(this.client.logger.error(Je,"Signature verification failed"),$($n("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:bt}=Je,Nt=ES(bt.resources),At=[JD(bt.iss)],ne=lI(bt.iss);if(Nt){const ie=KF(Nt),be=YF(Nt);ce.push(...ie),At.push(...be)}for(const ie of At)ge.push(`${ie}:${ne}`)}const Me=await this.client.core.crypto.generateSharedKey(A,X.publicKey);let it;ce.length>0&&(it={topic:Me,acknowledged:!0,self:{publicKey:A,metadata:this.client.metadata},peer:X,controller:X.publicKey,expiry:Hr(jm),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:vj([...new Set(ce)],[...new Set(ge)]),transportType:o},await this.client.core.relayer.subscribe(Me,{transportType:o}),await this.client.session.set(Me,it),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:X.metadata}),it=this.client.session.get(Me)),(j=this.client.metadata.redirect)!=null&&j.linkMode&&(V=X.metadata.redirect)!=null&&V.linkMode&&(te=X.metadata.redirect)!=null&&te.universal&&r&&(this.client.core.addLinkModeSupportedApp(X.metadata.redirect.universal),this.client.session.update(Me,{transportType:sr.link_mode})),P({auths:Z,session:it})};this.events.once(W,R),this.events.once(I,B);let O;try{if(i){const M=Th("wc_sessionAuthenticate",x,G);this.client.core.history.set(b,M);const j=await this.client.core.crypto.encode("",M,{type:a1,encoding:Jd});O=AA(r,b,j)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:x,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:G}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:S,expiry:ss.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:S.id})])}catch(M){throw this.events.off(W,R),this.events.off(I,B),M}return await this.setProposal(S.id,S),await this.setAuthRequest(G,{request:ai(qn({},x),{verifyContext:{}}),pairingTopic:b,transportType:o}),{uri:O??v,response:D}}),ye(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[zf.authenticated_session_approve_started]}});try{this.isInitialized()}catch(w){throw i.setError(ov.no_internet_connection),w}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(ov.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||sr.relay;a===sr.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=CS(c),d={type:Hu,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const w of s){if(!await VF({cacao:w,projectId:this.client.core.projectId})){i.setError(ov.invalid_cacao);const C=$n("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:C,encodeOpts:d}),new Error(C.message)}i.addTrace(zf.cacaos_verified);const{p:m}=w,b=ES(m.resources),v=[JD(m.iss)],A=lI(m.iss);if(b){const C=KF(b),T=YF(b);h.push(...C),v.push(...T)}for(const C of v)f.push(`${C}:${A}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(zf.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Hr(jm),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:vj([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(zf.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(w){throw i.setError(ov.subscribe_authenticated_session_topic_failure),w}i.addTrace(zf.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(zf.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(zf.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(w){throw i.setError(ov.authenticated_session_approve_publish_failure),w}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),ye(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===sr.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=CS(o),l={type:Hu,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:ss.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,$n("USER_DISCONNECTED"))}),ye(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return hZ(r,s)}),ye(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),ye(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),ye(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,$n("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(Qj).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,$n("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Gc.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),ye(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Wf.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,$n("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),ye(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=Gc.idle,this.client.events.emit("session_request_expire",{id:n}))}),ye(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),ye(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),ye(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,Hr(ss.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),ye(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=sr.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),ye(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||Hr(ss.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),ye(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=Th(s,i,c);let f;const p=!!u;try{const m=p?Jd:Cc;f=await this.client.core.crypto.encode(r,h,{encoding:m})}catch(m){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),m}let g;if(KUe.includes(s)){const m=gl(JSON.stringify(h)),b=gl(f);g=await this.client.core.verify.register({id:b,decryptedId:m})}const w=ss[s].req;if(w.attestation=g,o&&(w.ttl=o),a&&(w.id=a),this.client.core.history.set(r,h),p){const m=AA(u,r,f);await global.Linking.openURL(m,this.client.name)}else{const m=ss[s].req;o&&(m.ttl=o),a&&(m.id=a),m.tvf=ai(qn({},d),{correlationId:h.id}),l?(m.internal=ai(qn({},m.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,m)):this.client.core.relayer.publish(r,f,m).catch(b=>this.client.logger.error(b))}return h.id}),ye(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=lT(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?Jd:Cc;u=await this.client.core.crypto.encode(s,l,ai(qn({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{this.shouldSetTVF(p.method,p.params)&&(f=this.getTVFParams(r,p.params,i))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=AA(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=ss[p].res;g.tvf=ai(qn({},f),{correlationId:r}),o?(g.internal=ai(qn({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(w=>this.client.logger.error(w))}await this.client.core.history.resolve(l)}),ye(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=uT(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?Jd:Cc;u=await this.client.core.crypto.encode(s,l,ai(qn({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=AA(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||ss[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),ye(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Gd(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Gd(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),ye(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),ye(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),ye(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Gc.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Gc.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Gc.idle}),ye(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),ye(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),ye(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=xe("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),ye(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),ye(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(au.proposal_listener_not_found)),this.isValidConnect(qn({},s.params));const u=a.expiryTimestamp||Hr(ss.wc_sessionPropose.req.ttl),d=qn({id:c,pairingTopic:r,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:gl(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(Yc.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:ss.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),ye(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(Zc(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(va(r)){await this.client.proposal.delete(i,$n("USER_DISCONNECTED"));const o=An("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),ye(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(w=>w.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=ai(qn(qn(qn({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:sr.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(An("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),ye(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;Zc(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(An("session_approve",s),{})):va(r)&&(await this.client.session.delete(n,$n("USER_DISCONNECTED")),this.events.emit(An("session_approve",s),{error:r.error}))}),ye(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=sv.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:$n("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(qn({topic:n},s));try{sv.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw sv.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),ye(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),ye(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=An("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Zc(r)?this.events.emit(An("session_update",s),{}):va(r)&&this.events.emit(An("session_update",s),{error:r.error})}),ye(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,Hr(jm)),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),ye(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=An("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Zc(r)?this.events.emit(An("session_extend",s),{}):va(r)&&this.events.emit(An("session_extend",s),{error:r.error})}),ye(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),ye(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=An("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Zc(r)?this.events.emit(An("session_ping",s),{}):va(r)&&this.events.emit(An("session_ping",s),{error:r.error})},500)}),ye(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(ps.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:$n("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),ye(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(qn({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:gl(JSON.stringify(Th("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===sr.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),ye(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=An("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Zc(r)?this.events.emit(An("session_request",s),{result:r.result}):va(r)&&this.events.emit(An("session_request",s),{error:r.error})}),ye(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=sv.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(qn({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),sv.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),ye(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Zc(r)?this.events.emit(An("session_request",s),{result:r.result}):va(r)&&this.events.emit(An("session_request",s),{error:r.error})}),ye(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:gl(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===sr.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:Hu,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:ss.wc_sessionAuthenticate.autoReject,appLink:h})}}),ye(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),ye(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Gc.idle,this.processSessionRequestQueue()},_e.toMiliseconds(this.requestQueueDelay))}),ye(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=An("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(An("session_request",i.request.id),{error:r})})}),ye(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Gc.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Gc.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),ye(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),ye(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Th("wc_sessionPropose",ai(qn({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),ye(this,"isValidConnect",async n=>{if(!Wi(n)){const{message:l}=xe("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Ps(r)||await this.isValidPairingTopic(r),!z3e(c)){const{message:l}=xe("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Ps(s)&&Xh(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!Ps(i)&&Xh(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Ps(o)||this.validateSessionProps(o,"sessionProperties"),!Ps(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),ye(this,"validateNamespaces",(n,r)=>{const s=W3e(n,"connect()",r);if(s)throw new Error(s.message)}),ye(this,"isValidApprove",async n=>{if(!Wi(n))throw new Error(xe("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=pO(s,"approve()");if(l)throw new Error(l.message);const u=_j(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!Br(i,!0)){const{message:d}=xe("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(Ps(o)||this.validateSessionProps(o,"sessionProperties"),!Ps(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),ye(this,"isValidReject",async n=>{if(!Wi(n)){const{message:i}=xe("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!G3e(s)){const{message:i}=xe("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),ye(this,"isValidSessionSettleRequest",n=>{if(!Wi(n)){const{message:l}=xe("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!BZ(r)){const{message:l}=xe("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=L3e(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=pO(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Gd(o)){const{message:l}=xe("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),ye(this,"isValidUpdate",async n=>{if(!Wi(n)){const{message:c}=xe("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=pO(s,"update()");if(o)throw new Error(o.message);const a=_j(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),ye(this,"isValidExtend",async n=>{if(!Wi(n)){const{message:s}=xe("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),ye(this,"isValidRequest",async n=>{if(!Wi(n)){const{message:c}=xe("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!Cj(a,i)){const{message:c}=xe("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!q3e(s)){const{message:c}=xe("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!Y3e(a,i,s.method)){const{message:c}=xe("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!X3e(o,EO)){const{message:c}=xe("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${EO.min} and ${EO.max}`);throw new Error(c)}}),ye(this,"isValidRespond",async n=>{var r;if(!Wi(n)){const{message:o}=xe("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!V3e(i)){const{message:o}=xe("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),ye(this,"isValidPing",async n=>{if(!Wi(n)){const{message:s}=xe("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),ye(this,"isValidEmit",async n=>{if(!Wi(n)){const{message:a}=xe("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!Cj(o,i)){const{message:a}=xe("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!K3e(s)){const{message:a}=xe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!Q3e(o,i,s.name)){const{message:a}=xe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),ye(this,"isValidDisconnect",async n=>{if(!Wi(n)){const{message:s}=xe("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),ye(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Br(s,!1))throw new Error("uri is required parameter");if(!Br(i,!1))throw new Error("domain is required parameter");if(!Br(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>Vy(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Vy(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),ye(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||hE,validation:"UNKNOWN",origin:o.url||""}};try{if(a===sr.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),ye(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=xe("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),ye(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),ye(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),ye(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=xe("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),ye(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==sr.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),ye(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),ye(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=BF(n,"topic")||"",s=decodeURIComponent(BF(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:sr.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),ye(this,"registerLinkModeListeners",async()=>{var n;if(vU()||Nf()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),ye(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:s}=r;return Object.keys(Zj).includes(s.method)}),ye(this,"getTVFParams",(n,r,s)=>{var i,o;try{const a=r.request.method,c=this.extractTxHashesFromResult(a,s);return ai(qn({correlationId:n,rpcMethods:[a],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(o=(i=r.request.params)==null?void 0:i[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),ye(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),ye(this,"extractTxHashesFromResult",(n,r)=>{try{const s=Zj[n];if(typeof r=="string")return[r];const i=r[s.key];if(Zh(i))return n==="solana_signAllTransactions"?i.map(o=>bke(o)):i;if(typeof i=="string")return[i]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(ps.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(AS)?this.client.auth.authKeys.get(AS):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===sr.link_mode?Jd:Cc});bU(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:gl(r)})):dT(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(da.expired,async e=>{const{topic:n,id:r}=rZ(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,xe("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,xe("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(ap.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(ap.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Br(e,!1)){const{message:n}=xe("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=xe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Gd(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=xe("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!Br(e,!1)){const{message:n}=xe("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=xe("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Gd(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=xe("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=xe("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Br(e,!1)){const{message:n}=xe("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=xe("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!H3e(e)){const{message:n}=xe("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=xe("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Gd(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=xe("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class oBe extends pm{constructor(e,n){super(e,n,HUe,NU),this.core=e,this.logger=n}}let aBe=class extends pm{constructor(e,n){super(e,n,GUe,NU),this.core=e,this.logger=n}};class cBe extends pm{constructor(e,n){super(e,n,VUe,NU,r=>r.id),this.core=e,this.logger=n}}class lBe extends pm{constructor(e,n){super(e,n,JUe,_T,()=>AS),this.core=e,this.logger=n}}class uBe extends pm{constructor(e,n){super(e,n,ZUe,_T),this.core=e,this.logger=n}}class dBe extends pm{constructor(e,n){super(e,n,XUe,_T,r=>r.id),this.core=e,this.logger=n}}var hBe=Object.defineProperty,fBe=(t,e,n)=>e in t?hBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,CO=(t,e,n)=>fBe(t,typeof e!="symbol"?e+"":e,n);class pBe{constructor(e,n){this.core=e,this.logger=n,CO(this,"authKeys"),CO(this,"pairingTopics"),CO(this,"requests"),this.authKeys=new lBe(this.core,this.logger),this.pairingTopics=new uBe(this.core,this.logger),this.requests=new dBe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var gBe=Object.defineProperty,mBe=(t,e,n)=>e in t?gBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nn=(t,e,n)=>mBe(t,typeof e!="symbol"?e+"":e,n);let yBe=class sX extends TOe{constructor(e){super(e),nn(this,"protocol",tX),nn(this,"version",nX),nn(this,"name",vO.name),nn(this,"metadata"),nn(this,"core"),nn(this,"logger"),nn(this,"events",new $a.EventEmitter),nn(this,"engine"),nn(this,"session"),nn(this,"proposal"),nn(this,"pendingRequest"),nn(this,"auth"),nn(this,"signConfig"),nn(this,"on",(r,s)=>this.events.on(r,s)),nn(this,"once",(r,s)=>this.events.once(r,s)),nn(this,"off",(r,s)=>this.events.off(r,s)),nn(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),nn(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),nn(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),nn(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),nn(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||vO.name,this.metadata=O2e(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:J_(hm({level:(e==null?void 0:e.logger)||vO.logger}));this.core=(e==null?void 0:e.core)||new zUe(e),this.logger=Fs(n,this.name),this.session=new aBe(this.core,this.logger),this.proposal=new oBe(this.core,this.logger),this.pendingRequest=new cBe(this.core,this.logger),this.engine=new iBe(this),this.auth=new pBe(this.core,this.logger)}static async init(e){const n=new sX(e);return await n.initialize(),n}get context(){return mo(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},_e.toMiliseconds(_e.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const e9="error",wBe="wss://relay.walletconnect.org",bBe="wc",vBe="universal_provider",xA=`${bBe}@2:${vBe}:`,iX="https://rpc.walletconnect.org/v1/",ay="generic",EBe=`${iX}bundler`,ja={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function CBe(){}function TU(t){return t==null||typeof t!="object"&&typeof t!="function"}function RU(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function _Be(t){if(TU(t))return t;if(Array.isArray(t)||RU(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function t9(t){return typeof t=="object"&&t!==null}function oX(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function aX(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const ABe="[object RegExp]",cX="[object String]",lX="[object Number]",uX="[object Boolean]",dX="[object Arguments]",SBe="[object Symbol]",xBe="[object Date]",IBe="[object Map]",NBe="[object Set]",TBe="[object Array]",RBe="[object ArrayBuffer]",PBe="[object Object]",OBe="[object DataView]",kBe="[object Uint8Array]",DBe="[object Uint8ClampedArray]",MBe="[object Uint16Array]",LBe="[object Uint32Array]",UBe="[object Int8Array]",BBe="[object Int16Array]",$Be="[object Int32Array]",FBe="[object Float32Array]",jBe="[object Float64Array]";function WBe(t,e){return Ty(t,void 0,t,new Map,e)}function Ty(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(TU(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Ty(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,Ty(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(Ty(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(RU(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Ty(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),cp(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),cp(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),cp(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,cp(o,t,n,r,s),o}if(typeof t=="object"&&zBe(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),cp(o,t,n,r,s),o}return t}function cp(t,e,n=t,r,s){const i=[...Object.keys(e),...oX(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Ty(e[a],a,n,r,s))}}function zBe(t){switch(aX(t)){case dX:case TBe:case RBe:case OBe:case uX:case xBe:case FBe:case jBe:case UBe:case BBe:case $Be:case IBe:case lX:case PBe:case ABe:case NBe:case cX:case SBe:case kBe:case DBe:case MBe:case LBe:return!0;default:return!1}}function HBe(t,e){return WBe(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case lX:case cX:case uX:{const o=new t.constructor(t==null?void 0:t.valueOf());return cp(o,t),o}case dX:{const o={};return cp(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function n9(t){return HBe(t)}function r9(t){return t!==null&&typeof t=="object"&&aX(t)==="[object Arguments]"}function GBe(t){return RU(t)}function qBe(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function VBe(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=b3(s,o,r,new Map)}return s}function b3(t,e,n,r){if(TU(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return _Be(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...oX(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(r9(a)&&(a={...a}),r9(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=n9(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||t9(c)&&t9(a)?t[o]=b3(c,a,n,r):c==null&&qBe(a)?t[o]=b3({},a,n,r):c==null&&GBe(a)?t[o]=n9(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function KBe(t,...e){return VBe(t,...e,CBe)}var YBe=Object.defineProperty,QBe=Object.defineProperties,JBe=Object.getOwnPropertyDescriptors,s9=Object.getOwnPropertySymbols,ZBe=Object.prototype.hasOwnProperty,XBe=Object.prototype.propertyIsEnumerable,i9=(t,e,n)=>e in t?YBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,IA=(t,e)=>{for(var n in e||(e={}))ZBe.call(e,n)&&i9(t,n,e[n]);if(s9)for(var n of s9(e))XBe.call(e,n)&&i9(t,n,e[n]);return t},e$e=(t,e)=>QBe(t,JBe(e));function Ko(t,e,n){var r;const s=Vy(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${iX}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function gm(t){return t.includes(":")?t.split(":")[1]:t}function hX(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function t$e(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function NA(t={},e={}){const n=o9(t),r=o9(e);return KBe(n,r)}function o9(t){var e,n,r,s,i;const o={};if(!Xh(t))return o;for(const[a,c]of Object.entries(t)){const l=ET(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=Ny(a);o[f]=e$e(IA(IA({},o[f]),c),{chains:Ol(l,(e=o[f])==null?void 0:e.chains),methods:Ol(u,(n=o[f])==null?void 0:n.methods),events:Ol(d,(r=o[f])==null?void 0:r.events)}),(Xh(h)||Xh(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=IA(IA({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function a9(t){return t.includes(":")?t.split(":")[2]:t}function c9(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=ET(n)?[n]:r.chains?r.chains:hX(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function _O(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const fX={},bn=t=>fX[t],AO=(t,e)=>{fX[t]=e};var n$e=Object.defineProperty,r$e=(t,e,n)=>e in t?n$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wm=(t,e,n)=>r$e(t,typeof e!="symbol"?e+"":e,n);class s$e{constructor(e){Wm(this,"name","polkadot"),Wm(this,"client"),Wm(this,"httpProviders"),Wm(this,"events"),Wm(this,"namespace"),Wm(this,"chainId"),this.namespace=e.namespace,this.events=bn("events"),this.client=bn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ja.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=gm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ko(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fa(new Mc(r,bn("disableProviderPing")))}}var i$e=Object.defineProperty,o$e=Object.defineProperties,a$e=Object.getOwnPropertyDescriptors,l9=Object.getOwnPropertySymbols,c$e=Object.prototype.hasOwnProperty,l$e=Object.prototype.propertyIsEnumerable,v3=(t,e,n)=>e in t?i$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,u9=(t,e)=>{for(var n in e||(e={}))c$e.call(e,n)&&v3(t,n,e[n]);if(l9)for(var n of l9(e))l$e.call(e,n)&&v3(t,n,e[n]);return t},d9=(t,e)=>o$e(t,a$e(e)),zm=(t,e,n)=>v3(t,typeof e!="symbol"?e+"":e,n);class u$e{constructor(e){zm(this,"name","eip155"),zm(this,"client"),zm(this,"chainId"),zm(this,"namespace"),zm(this,"httpProviders"),zm(this,"events"),this.namespace=e.namespace,this.events=bn("events"),this.client=bn("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(ja.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||Ko(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fa(new Mc(r,bn("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(gm(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:d9(u9({},u.sessionProperties||{}),{capabilities:d9(u9({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Th("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${EBe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var d$e=Object.defineProperty,h$e=(t,e,n)=>e in t?d$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hm=(t,e,n)=>h$e(t,typeof e!="symbol"?e+"":e,n);class f$e{constructor(e){Hm(this,"name","solana"),Hm(this,"client"),Hm(this,"httpProviders"),Hm(this,"events"),Hm(this,"namespace"),Hm(this,"chainId"),this.namespace=e.namespace,this.events=bn("events"),this.client=bn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ja.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=gm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ko(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fa(new Mc(r,bn("disableProviderPing")))}}var p$e=Object.defineProperty,g$e=(t,e,n)=>e in t?p$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gm=(t,e,n)=>g$e(t,typeof e!="symbol"?e+"":e,n);class m$e{constructor(e){Gm(this,"name","cosmos"),Gm(this,"client"),Gm(this,"httpProviders"),Gm(this,"events"),Gm(this,"namespace"),Gm(this,"chainId"),this.namespace=e.namespace,this.events=bn("events"),this.client=bn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ja.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=gm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ko(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fa(new Mc(r,bn("disableProviderPing")))}}var y$e=Object.defineProperty,w$e=(t,e,n)=>e in t?y$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qm=(t,e,n)=>w$e(t,typeof e!="symbol"?e+"":e,n);class b$e{constructor(e){qm(this,"name","algorand"),qm(this,"client"),qm(this,"httpProviders"),qm(this,"events"),qm(this,"namespace"),qm(this,"chainId"),this.namespace=e.namespace,this.events=bn("events"),this.client=bn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||Ko(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(ja.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ko(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Fa(new Mc(r,bn("disableProviderPing")))}}var v$e=Object.defineProperty,E$e=(t,e,n)=>e in t?v$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vm=(t,e,n)=>E$e(t,typeof e!="symbol"?e+"":e,n);class C$e{constructor(e){Vm(this,"name","cip34"),Vm(this,"client"),Vm(this,"httpProviders"),Vm(this,"events"),Vm(this,"namespace"),Vm(this,"chainId"),this.namespace=e.namespace,this.events=bn("events"),this.client=bn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ja.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=gm(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fa(new Mc(r,bn("disableProviderPing")))}}var _$e=Object.defineProperty,A$e=(t,e,n)=>e in t?_$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Km=(t,e,n)=>A$e(t,typeof e!="symbol"?e+"":e,n);class S$e{constructor(e){Km(this,"name","elrond"),Km(this,"client"),Km(this,"httpProviders"),Km(this,"events"),Km(this,"namespace"),Km(this,"chainId"),this.namespace=e.namespace,this.events=bn("events"),this.client=bn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ja.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=gm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ko(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fa(new Mc(r,bn("disableProviderPing")))}}var x$e=Object.defineProperty,I$e=(t,e,n)=>e in t?x$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ym=(t,e,n)=>I$e(t,typeof e!="symbol"?e+"":e,n);class N$e{constructor(e){Ym(this,"name","multiversx"),Ym(this,"client"),Ym(this,"httpProviders"),Ym(this,"events"),Ym(this,"namespace"),Ym(this,"chainId"),this.namespace=e.namespace,this.events=bn("events"),this.client=bn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ja.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=gm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ko(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fa(new Mc(r,bn("disableProviderPing")))}}var T$e=Object.defineProperty,R$e=(t,e,n)=>e in t?T$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qm=(t,e,n)=>R$e(t,typeof e!="symbol"?e+"":e,n);class P$e{constructor(e){Qm(this,"name","near"),Qm(this,"client"),Qm(this,"httpProviders"),Qm(this,"events"),Qm(this,"namespace"),Qm(this,"chainId"),this.namespace=e.namespace,this.events=bn("events"),this.client=bn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Ko(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(ja.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ko(e,this.namespace);return typeof r>"u"?void 0:new Fa(new Mc(r,bn("disableProviderPing")))}}var O$e=Object.defineProperty,k$e=(t,e,n)=>e in t?O$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jm=(t,e,n)=>k$e(t,typeof e!="symbol"?e+"":e,n);class D$e{constructor(e){Jm(this,"name","tezos"),Jm(this,"client"),Jm(this,"httpProviders"),Jm(this,"events"),Jm(this,"namespace"),Jm(this,"chainId"),this.namespace=e.namespace,this.events=bn("events"),this.client=bn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Ko(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(ja.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ko(e,this.namespace);return typeof r>"u"?void 0:new Fa(new Mc(r))}}var M$e=Object.defineProperty,L$e=(t,e,n)=>e in t?M$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zm=(t,e,n)=>L$e(t,typeof e!="symbol"?e+"":e,n);class U$e{constructor(e){Zm(this,"name",ay),Zm(this,"client"),Zm(this,"httpProviders"),Zm(this,"events"),Zm(this,"namespace"),Zm(this,"chainId"),this.namespace=e.namespace,this.events=bn("events"),this.client=bn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ja.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=Vy(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ko(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fa(new Mc(r,bn("disableProviderPing")))}}var B$e=Object.defineProperty,$$e=Object.defineProperties,F$e=Object.getOwnPropertyDescriptors,h9=Object.getOwnPropertySymbols,j$e=Object.prototype.hasOwnProperty,W$e=Object.prototype.propertyIsEnumerable,E3=(t,e,n)=>e in t?B$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,TA=(t,e)=>{for(var n in e||(e={}))j$e.call(e,n)&&E3(t,n,e[n]);if(h9)for(var n of h9(e))W$e.call(e,n)&&E3(t,n,e[n]);return t},SO=(t,e)=>$$e(t,F$e(e)),oa=(t,e,n)=>E3(t,typeof e!="symbol"?e+"":e,n);let z$e=class pX{constructor(e){oa(this,"client"),oa(this,"namespaces"),oa(this,"optionalNamespaces"),oa(this,"sessionProperties"),oa(this,"scopedProperties"),oa(this,"events",new aU),oa(this,"rpcProviders",{}),oa(this,"session"),oa(this,"providerOpts"),oa(this,"logger"),oa(this,"uri"),oa(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:J_(hm({level:(e==null?void 0:e.logger)||e9})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new pX(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:TA({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,lT(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:$n("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=c9(this.session.namespaces);this.namespaces=NA(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=c9(s.namespaces);return this.namespaces=NA(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===ay?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(Zh(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await yBe.init({core:this.providerOpts.core,logger:this.providerOpts.logger||e9,relayUrl:this.providerOpts.relayUrl||wBe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>Ny(n)))];AO("client",this.client),AO("events",this.events),AO("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=t$e(n,this.session),s=hX(r),i=NA(this.namespaces,this.optionalNamespaces),o=SO(TA({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new u$e({namespace:o});break;case"algorand":this.rpcProviders[n]=new b$e({namespace:o});break;case"solana":this.rpcProviders[n]=new f$e({namespace:o});break;case"cosmos":this.rpcProviders[n]=new m$e({namespace:o});break;case"polkadot":this.rpcProviders[n]=new s$e({namespace:o});break;case"cip34":this.rpcProviders[n]=new C$e({namespace:o});break;case"elrond":this.rpcProviders[n]=new S$e({namespace:o});break;case"multiversx":this.rpcProviders[n]=new N$e({namespace:o});break;case"near":this.rpcProviders[n]=new P$e({namespace:o});break;case"tezos":this.rpcProviders[n]=new D$e({namespace:o});break;default:this.rpcProviders[ay]?this.rpcProviders[ay].updateNamespace(o):this.rpcProviders[ay]=new U$e({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&Zh(o)&&this.events.emit("accountsChanged",o.map(a9))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=Ny(o),l=_O(o)!==_O(a)?`${c}:${_O(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=SO(TA({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",SO(TA({},$n("USER_DISCONNECTED")),{data:e.topic})))}),this.on(ja.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[ay]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=NA(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>Ny(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=Ny(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(a9);if(!Zh(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${xA}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${xA}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${xA}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(xA)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};var f9={};const H$e={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof f9<"u"?f9.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},C3={filterOutDuplicatesByRDNS(t){const e=we.state.enableEIP6963?$e.state.connectors:[],n=Ke.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&ot.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=$e.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=Ke.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=$e.state,{featuredWalletIds:n}=we.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=we.state.features)==null?void 0:c.connectMethodsOrder),r=e||$e.state.connectors;if(n)return n;const{injected:s,announced:i}=SS.getConnectorsByType(r,at.state.recommended,at.state.featured),o=s.filter(SS.showConnector),a=i.filter(SS.showConnector);return o.length||a.length?["wallet","email","social"]:H$e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&at.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&at.state.excludedWallets.some(r=>hT.isLowerCaseMatch(r.name,t.name));return e||n}},SS={getConnectorsByType(t,e,n){const{customWallets:r}=we.state,s=Ke.getRecentWallets(),i=C3.filterOutDuplicateWallets(e),o=C3.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&at.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&at.state.excludedWallets.some(i=>hT.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!ot.isMobile()||ot.isMobile()&&!e&&!yt.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(z.state.chains.values()).some(n=>$e.getConnectorId(n.namespace)===Fe.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=we.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=SS.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:we.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(m=>m.isEnabled),p=new Set(f.map(m=>m.type)),g=c.filter(m=>p.has(m)).map(m=>({type:m,isEnabled:!0})),w=f.filter(({type:m})=>!g.some(({type:v})=>v===m));return Array.from(new Set([...g,...w].map(({type:m})=>m)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const xS=globalThis,PU=xS.ShadowRoot&&(xS.ShadyCSS===void 0||xS.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,OU=Symbol(),p9=new WeakMap;let gX=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==OU)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(PU&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=p9.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&p9.set(n,e))}return e}toString(){return this.cssText}};const la=t=>new gX(typeof t=="string"?t:t+"",void 0,OU),Gu=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new gX(n,t,OU)},G$e=(t,e)=>{if(PU)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=xS.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},g9=PU?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return la(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:q$e,defineProperty:V$e,getOwnPropertyDescriptor:K$e,getOwnPropertyNames:Y$e,getOwnPropertySymbols:Q$e,getPrototypeOf:J$e}=Object,ef=globalThis,m9=ef.trustedTypes,Z$e=m9?m9.emptyScript:"",xO=ef.reactiveElementPolyfillSupport,pE=(t,e)=>t,_3={toAttribute(t,e){switch(e){case Boolean:t=t?Z$e:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},mX=(t,e)=>!q$e(t,e),y9={attribute:!0,type:String,converter:_3,reflect:!1,useDefault:!1,hasChanged:mX};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),ef.litPropertyMetadata??(ef.litPropertyMetadata=new WeakMap);let cy=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=y9){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&V$e(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=K$e(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??y9}static _$Ei(){if(this.hasOwnProperty(pE("elementProperties")))return;const e=J$e(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(pE("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(pE("properties"))){const n=this.properties,r=[...Y$e(n),...Q$e(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(g9(s))}else e!==void 0&&n.push(g9(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return G$e(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:_3).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:_3;this._$Em=s;const l=c.fromAttribute(n,a.type);this[s]=l??((o=this._$Ej)==null?void 0:o.get(s))??l,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??mX)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};cy.elementStyles=[],cy.shadowRootOptions={mode:"open"},cy[pE("elementProperties")]=new Map,cy[pE("finalized")]=new Map,xO==null||xO({ReactiveElement:cy}),(ef.reactiveElementVersions??(ef.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const gE=globalThis,hI=gE.trustedTypes,w9=hI?hI.createPolicy("lit-html",{createHTML:t=>t}):void 0,yX="$lit$",Zd=`lit$${Math.random().toFixed(9).slice(2)}$`,wX="?"+Zd,X$e=`<${wX}>`,jg=document,FC=()=>jg.createComment(""),jC=t=>t===null||typeof t!="object"&&typeof t!="function",kU=Array.isArray,e6e=t=>kU(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",IO=`[ 	
\f\r]`,lv=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,b9=/-->/g,v9=/>/g,Hf=RegExp(`>|${IO}(?:([^\\s"'>=/]+)(${IO}*=${IO}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),E9=/'/g,C9=/"/g,bX=/^(?:script|style|textarea|title)$/i,vX=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),zVe=vX(1),HVe=vX(2),Ow=Symbol.for("lit-noChange"),gs=Symbol.for("lit-nothing"),_9=new WeakMap,Ip=jg.createTreeWalker(jg,129);function EX(t,e){if(!kU(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return w9!==void 0?w9.createHTML(e):e}const t6e=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=lv;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===lv?u[1]==="!--"?o=b9:u[1]!==void 0?o=v9:u[2]!==void 0?(bX.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=Hf):u[3]!==void 0&&(o=Hf):o===Hf?u[0]===">"?(o=s??lv,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Hf:u[3]==='"'?C9:E9):o===C9||o===E9?o=Hf:o===b9||o===v9?o=lv:(o=Hf,s=void 0);const f=o===Hf&&t[a+1].startsWith("/>")?" ":"";i+=o===lv?c+X$e:d>=0?(r.push(l),c.slice(0,d)+yX+c.slice(d)+Zd+f):c+Zd+(d===-2?a:f)}return[EX(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class WC{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=t6e(e,n);if(this.el=WC.createElement(l,r),Ip.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Ip.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(yX)){const h=u[o++],f=s.getAttribute(d).split(Zd),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?r6e:p[1]==="?"?s6e:p[1]==="@"?i6e:AT}),s.removeAttribute(d)}else d.startsWith(Zd)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(bX.test(s.tagName)){const d=s.textContent.split(Zd),h=d.length-1;if(h>0){s.textContent=hI?hI.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],FC()),Ip.nextNode(),c.push({type:2,index:++i});s.append(d[h],FC())}}}else if(s.nodeType===8)if(s.data===wX)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(Zd,d+1))!==-1;)c.push({type:7,index:i}),d+=Zd.length-1}i++}}static createElement(e,n){const r=jg.createElement("template");return r.innerHTML=e,r}}function kw(t,e,n=t,r){var o,a;if(e===Ow)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=jC(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=kw(t,s._$AS(t,e.values),s,r)),e}class n6e{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??jg).importNode(n,!0);Ip.currentNode=s;let i=Ip.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new l1(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new o6e(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=Ip.nextNode(),o++)}return Ip.currentNode=jg,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class l1{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=gs,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=kw(this,e,n),jC(e)?e===gs||e==null||e===""?(this._$AH!==gs&&this._$AR(),this._$AH=gs):e!==this._$AH&&e!==Ow&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):e6e(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==gs&&jC(this._$AH)?this._$AA.nextSibling.data=e:this.T(jg.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=WC.createElement(EX(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new n6e(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=_9.get(e.strings);return n===void 0&&_9.set(e.strings,n=new WC(e)),n}k(e){kU(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new l1(this.O(FC()),this.O(FC()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class AT{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=gs,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=gs}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=kw(this,e,n,0),o=!jC(e)||e!==this._$AH&&e!==Ow,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=kw(this,a[r+c],n,c),l===Ow&&(l=this._$AH[c]),o||(o=!jC(l)||l!==this._$AH[c]),l===gs?e=gs:e!==gs&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===gs?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class r6e extends AT{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===gs?void 0:e}}class s6e extends AT{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==gs)}}class i6e extends AT{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=kw(this,e,n,0)??gs)===Ow)return;const r=this._$AH,s=e===gs&&r!==gs||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==gs&&(r===gs||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class o6e{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){kw(this,e)}}const NO=gE.litHtmlPolyfillSupport;NO==null||NO(WC,l1),(gE.litHtmlVersions??(gE.litHtmlVersions=[])).push("3.3.1");const a6e=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new l1(e.insertBefore(FC(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const hg=globalThis;let IS=class extends cy{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=a6e(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Ow}};var TW;IS._$litElement$=!0,IS.finalized=!0,(TW=hg.litElementHydrateSupport)==null||TW.call(hg,{LitElement:IS});const TO=hg.litElementPolyfillSupport;TO==null||TO({LitElement:IS});(hg.litElementVersions??(hg.litElementVersions=[])).push("4.2.1");let mE,tf,nf;function qVe(t,e){mE=document.createElement("style"),tf=document.createElement("style"),nf=document.createElement("style"),mE.textContent=Ky(t).core.cssText,tf.textContent=Ky(t).dark.cssText,nf.textContent=Ky(t).light.cssText,document.head.appendChild(mE),document.head.appendChild(tf),document.head.appendChild(nf),CX(e)}function CX(t){tf&&nf&&(t==="light"?(tf.removeAttribute("media"),nf.media="enabled"):(nf.removeAttribute("media"),tf.media="enabled"))}function c6e(t){mE&&tf&&nf&&(mE.textContent=Ky(t).core.cssText,tf.textContent=Ky(t).dark.cssText,nf.textContent=Ky(t).light.cssText)}function Ky(t){return{core:Gu`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${la(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${la((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${la((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${la((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${la((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Gu`
      :root {
        --w3m-color-mix: ${la((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${la(Lu(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${la(Lu(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Gu`
      :root {
        --w3m-color-mix: ${la((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${la(Lu(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${la(Lu(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const VVe=Gu`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,KVe=Gu`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,YVe=Gu`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,Iv={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},fI=WY({id:42161,name:"Arbitrum One",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://arbiscan.io",apiUrl:"https://api.arbiscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7654707}}}),pI=WY({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function u1(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const gI=u1({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),mI=u1({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"}),_X=u1({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});u1({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});u1({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const l6e={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},NS={getMethodsByChainNamespace(t){return l6e[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case gI.caipNetworkId:u.chains.push(gI.deprecatedCaipNetworkId);break;case mI.caipNetworkId:u.chains.push(mI.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await aE.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};let AX=class{constructor({provider:e,namespace:n}){this.id=Fe.CONNECTOR_ID.WALLET_CONNECT,this.name=Qx.ConnectorNamesMap[Fe.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Qx.ConnectorImageIds[Fe.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=z.getCaipNetworks.bind(z),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=we.state.universalProviderConfigOverride,s=NS.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return uE.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:u6e})}};const u6e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];let d6e=class{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>z.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:Fe.CONNECTOR_ID.AUTH,type:"AUTH",name:Fe.CONNECTOR_NAMES.AUTH,provider:e,imageId:Qx.ConnectorImageIds[Fe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){Ve.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=Ve.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof AX);if(!e)throw new Error("WalletConnectConnector not found");return e}};class h6e extends d6e{setUniversalProvider(e){this.addConnector(new AX({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>ot.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&Fn.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(Ve.state.balanceLoading&&e.chainId===((c=z.state.activeCaipNetwork)==null?void 0:c.id))return{balance:Ve.state.balance||"0.00",symbol:Ve.state.balanceSymbol||""};const s=(await Ve.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=z.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===Fe.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:bJ.encode(new TextEncoder().encode(r)),pubkey:s}},(a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=z.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===Fe.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:Oa(n.id)}]}))}catch(u){if(u.code===Iv.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===Iv.ERROR_INVALID_CHAIN_ID||u.code===Iv.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===Iv.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:Oa(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const f6e=["email","socials","swaps","onramp","activity","reownBranding"],RA={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?Fn.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?Fn.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?Fn.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Fn.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?Fn.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Fn.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?Fn.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Fn.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Fn.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},p6e={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=RA[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=RA[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return RA[t].processApi(e)},processFallbackFeature(t,e){return RA[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await at.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?Fn.DEFAULT_REMOTE_FEATURES:Fn.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of f6e){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),Fn.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;El.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class g6e{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=z.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=z.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=z.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return z.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>z.getCaipNetworks(n),this.getActiveChainNamespace=()=>z.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{z.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>z.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>z.state.activeChain===n||!n?z.state.activeCaipAddress:z.getAccountProp("caipAddress",n),this.setClientId=n=>{mt.setClientId(n)},this.getProvider=n=>Bn.getProvider(n),this.getProviderType=n=>Bn.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=Ve.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{Ve.setCaipAddress(n,r),n&&we.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{Ve.setBalance(n,r,s)},this.setProfileName=(n,r)=>{Ve.setProfileName(n,r)},this.setProfileImage=(n,r)=>{Ve.setProfileImage(n,r)},this.setUser=(n,r)=>{Ve.setUser(n,r)},this.resetAccount=n=>{Ve.resetAccount(n)},this.setCaipNetwork=n=>{z.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{z.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{Ve.setAllAccounts(n,r),we.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{Ve.setStatus(n,r),$e.isConnected()?Ke.setConnectionStatus("connected"):Ke.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>z.getAccountProp("address",n),this.setConnectors=n=>{const r=[...$e.state.allConnectors,...n];$e.setConnectors(r)},this.setConnections=(n,r)=>{yt.setConnections(n,r)},this.fetchIdentity=n=>mt.fetchIdentity(n),this.getReownName=n=>aE.getNamesForAddress(n),this.getConnectors=()=>$e.getConnectors(),this.getConnectorImage=n=>KV.getConnectorImage(n),this.setConnectedWalletInfo=(n,r)=>{const s=Bn.getProviderId(r),i=n?{...n,type:s}:void 0;Ve.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!z.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{Ve.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{Ve.removeAddressLabel(n,r)},this.getAddress=n=>z.state.activeChain===n||!n?Ve.state.address:z.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>z.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{z.resetNetwork(n)},this.addConnector=n=>{$e.addConnector(n)},this.resetWcConnection=()=>{yt.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{Ve.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{Ve.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{z.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{Ve.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{we.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await p6e.fetchRemoteFeatures(e),we.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&xD.setOnrampProviders(this.remoteFeatures.onramp),((n=we.state.remoteFeatures)!=null&&n.email||Array.isArray((r=we.state.remoteFeatures)==null?void 0:r.socials)&&((s=we.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){const e=await at.fetchAllowedOrigins();if(e&&ot.isClient()){const n=window.location.origin;NS.isOriginAllowed(n,e,Iv.DEFAULT_ALLOWED_ANCESTORS)||El.open(pl.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else El.open(pl.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,hr.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Ki.setThemeMode(e.themeMode),e.themeVariables&&Ki.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");z.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&z.setActiveCaipNetwork(n)}initializeConnectionController(e){yt.setWcBasic(e.basic??!1)}initializeConnectorController(){$e.initialize(this.chainNamespaces)}initializeProjectSettings(e){we.setProjectId(e.projectId),we.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;we.setDebug(e.debug!==!1),we.setEnableWalletConnect(e.enableWalletConnect!==!1),we.setEnableWalletGuide(e.enableWalletGuide!==!1),we.setEnableWallets(e.enableWallets!==!1),we.setEIP6963Enabled(e.enableEIP6963!==!1),we.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),we.setEnableAuthLogger(e.enableAuthLogger!==!1),we.setCustomRpcUrls(e.customRpcUrls),we.setEnableEmbedded(e.enableEmbedded),we.setAllWallets(e.allWallets),we.setIncludeWalletIds(e.includeWalletIds),we.setExcludeWalletIds(e.excludeWalletIds),we.setFeaturedWalletIds(e.featuredWalletIds),we.setTokens(e.tokens),we.setTermsConditionsUrl(e.termsConditionsUrl),we.setPrivacyPolicyUrl(e.privacyPolicyUrl),we.setCustomWallets(e.customWallets),we.setFeatures(e.features),we.setAllowUnsupportedChain(e.allowUnsupportedChain),we.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),we.setPreferUniversalLinks(e.experimental_preferUniversalLinks),we.setDefaultAccountTypes(e.defaultAccountTypes);const n=Ke.getPreferredAccountTypes()||{},r={...we.state.defaultAccountTypes,...n};Ve.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),we.setMetadata(e.metadata),we.setDisableAppend(e.disableAppend),we.setEnableEmbedded(e.enableEmbedded),we.setSIWX(e.siwx),!e.projectId){El.open(pl.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===Fe.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");we.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return ot.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=iy.getUnsupportedNetwork(`${n}:${e}`);z.setActiveCaipNetwork(r)}}getDefaultNetwork(){return iy.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return iy.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return iy.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?iy.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=Bn.getProvider(e),s=Bn.getProviderId(e),{caipAddress:i}=z.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),Ke.removeConnectedNamespace(e),Bn.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),$e.removeConnectorId(e),z.resetAccount(e),z.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=z.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),Ke.setConnectedNamespaces([...z.state.chains.keys()]),this.chainNamespaces.forEach(o=>{$e.setConnectorId(Yi.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,w,m,b,v,A;const c=z.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const C=this.getCaipNetworks().find(T=>T.chainNamespace===i);C&&this.setCaipNetwork(C)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((m=(w=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:w.http)==null?void 0:m[0])||((A=(v=(b=d==null?void 0:d.rpcUrls)==null?void 0:b.default)==null?void 0:v.http)==null?void 0:A[0])});if(!h)return;Ke.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=Ve.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=z.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),Ke.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{const n=gTe(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));vn.resetSend(),yt.resetWcConnection(),await uE.clearSessions(),$e.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));Ke.deleteConnectedSocialProvider(),hr.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(z.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:Ve.state.address,provider:Bn.getProvider(z.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(Fn.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(z.state.activeChain),s=Bn.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===Fe.CHAIN.EVM){const n=this.getAdapter(z.state.activeChain),r=Bn.getProvider(z.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:Ve.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:z.state.activeChain}),Ve.state.profileImage||!1},getEnsAddress:async e=>await NS.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(z.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=Bn.getProvider(z.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(z.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(z.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(z.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(z.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(z.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(z.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!Ve.state.address||this.updateNativeBalance(Ve.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},yt.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(Bn.getProviderId(z.state.activeChain)===Yi.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=Bn.getProvider(n),i=Bn.getProviderId(n);if(e.chainNamespace===z.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===Yi.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=Cd.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new h6e({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=Ke.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(Ke.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=z.state.activeChain===e,c=z.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=Ve.state.address,i=z.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=z.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=z.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=z.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===Fe.CHAIN.EVM&&ot.isSafeApp()&&$e.setConnectorId(Fe.CONNECTOR_ID.SAFE,e);const n=$e.getConnectorId(e);switch(this.setStatus("connecting",e),n){case Fe.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case Fe.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=$e.getConnectorId(e),s=this.getCaipNetwork(e),o=$e.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([ot.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async n=>{var a,c,l,u,d;const r=this.getAdapter(n),s=((u=(l=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:l[n])==null?void 0:u.accounts)||[],i=(d=z.state.activeCaipNetwork)==null?void 0:d.id,o=s.find(h=>{const{chainId:f}=Cd.parseCaipAddress(h);return f===(i==null?void 0:i.toString())})||s[0];if(o){const h=Cd.validateCaipAddress(o),{chainId:f,address:p}=Cd.parseCaipAddress(h);if(Bn.setProviderId(n,Yi.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&z.state.activeCaipNetwork&&(r==null?void 0:r.namespace)!==Fe.CHAIN.EVM){const g=r==null?void 0:r.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:z.state.activeCaipNetwork});Bn.setProvider(n,g)}else Bn.setProvider(n,this.universalProvider);$e.setConnectorId(Fe.CONNECTOR_ID.WALLET_CONNECT,n),Ke.addConnectedNamespace(n),this.syncWalletConnectAccounts(n),await this.syncAccount({address:p,chainId:f,chainNamespace:n})}else this.setStatus("disconnected",n);this.syncConnectedWalletInfo(n),await z.setApprovedCaipNetworksData(n)});await Promise.all(e)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=Cd.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>ot.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){Bn.setProviderId(s,e),Bn.setProvider(s,n),$e.setConnectorId(r,s)}async syncAllAccounts(e){const n=$e.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===z.state.activeChain,r=z.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=Ke.getActiveNetworkProps(),c=i||a,l=((d=z.state.activeCaipNetwork)==null?void 0:d.name)===Fe.UNSUPPORTED_NETWORK_NAME,u=z.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(w=>w.id.toString()===c.toString()),p=this.getCaipNetworks().find(w=>w.chainNamespace===o);if(!u&&!f&&!p){const w=this.getApprovedCaipNetworkIds()||[],m=w.find(v=>{var A;return((A=Cd.parseCaipNetworkId(v))==null?void 0:A.chainId)===c.toString()}),b=w.find(v=>{var A;return((A=Cd.parseCaipNetworkId(v))==null?void 0:A.chainNamespace)===o});f=this.getCaipNetworks().find(v=>v.caipNetworkId===m),p=this.getCaipNetworks().find(v=>v.caipNetworkId===b||"deprecatedCaipNetworkId"in v&&v.deprecatedCaipNetworkId===b)}const g=f||p;(g==null?void 0:g.chainNamespace)===z.state.activeChain?we.state.enableNetworkSwitch&&!we.state.allowUnsupportedChain&&((h=z.state.activeCaipNetwork)==null?void 0:h.name)===Fe.UNSUPPORTED_NETWORK_NAME?z.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),hT.isLowerCaseMatch(s,Ve.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=$e.getConnectorId(e),r=Bn.getProviderId(e);if(r===Yi.CONNECTOR_TYPE_ANNOUNCED||r===Yi.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===Yi.CONNECTOR_TYPE_WALLET_CONNECT){const i=Bn.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===Fe.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===Fe.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!HV.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=z.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=wTe.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};we.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await z$e.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{yt.setUri(e)}),this.universalProvider.on("connect",yt.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),yt.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(NS.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&ot.isCaipAddress(r[0])&&this.syncAccount(Cd.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&ot.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){hr.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(pl.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=pl.ALERT_ERRORS[o];a&&(El.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&yt.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return ms.open({...e,data:{swap:e.arguments}})}return ms.open(e)}async close(){await this.injectModalUi(),ms.close()}setLoading(e,n){ms.setLoading(e,n)}async disconnect(e){await yt.disconnect(e)}getSIWX(){return we.state.siwx}getError(){return""}getChainId(){var e;return(e=z.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){El.open(pl.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await z.switchActiveNetwork(n)}getWalletProvider(){return z.state.activeChain?Bn.state.providers[z.state.activeChain]:null}getWalletProviderType(){return Bn.getProviderId(z.state.activeChain)}subscribeProviders(e){return Bn.subscribeProviders(e)}getThemeMode(){return Ki.state.themeMode}getThemeVariables(){return Ki.state.themeVariables}setThemeMode(e){Ki.setThemeMode(e),CX(Ki.state.themeMode)}setTermsConditionsUrl(e){we.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){we.setPrivacyPolicyUrl(e)}setThemeVariables(e){Ki.setThemeVariables(e),c6e(Ki.state.themeVariables)}subscribeTheme(e){return Ki.subscribe(e)}getWalletInfo(){return Ve.state.connectedWalletInfo}getAccount(e){var o;const n=$e.getAuthConnector(e),r=z.getAccountData(e),s=z.state.activeChain,i=Ke.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:ot.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===Fe.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:Ke.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?z.subscribeChainProp("accountState",r,n):z.subscribe(r),$e.subscribe(r)}subscribeNetwork(e){return z.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e){return Ve.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Ve.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){z.subscribeKey("activeCaipNetwork",e)}getState(){return Tl.state}subscribeState(e){return Tl.subscribe(e)}showErrorMessage(e){mc.showError(e)}showSuccessMessage(e){mc.showSuccess(e)}getEvent(){return{...hr.state}}subscribeEvents(e){return hr.subscribe(e)}replace(e){jt.replace(e)}redirect(e){jt.push(e)}popTransactionStack(e){jt.popTransactionStack(e)}isOpen(){return ms.state.open}isTransactionStackEmpty(){return jt.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){we.setFeatures(e)}updateRemoteFeatures(e){we.setRemoteFeatures(e)}updateOptions(e){const r={...we.state||{},...e};we.setOptions(r)}setConnectMethodsOrder(e){we.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){we.setWalletFeaturesOrder(e)}setCollapseWallets(e){we.setCollapseWallets(e)}setSocialsOrder(e){we.setSocialsOrder(e)}getConnectMethodsOrder(){return C3.getConnectOrderMethod(we.state.features,$e.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||z.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&z.removeNetwork(e,n)}}let A9=!1;class m6e extends g6e{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{$o.checkIfRequestExists(n)?$o.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(Ls.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(Ls.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=$o.checkIfRequestIsSafe(r),i=Ve.state.address,o=z.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=z.state.activeChain;$e.getConnectorId(n)===Fe.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=z.state.activeChain,s=r===Fe.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=we.state.defaultAccountTypes[r],o=(l=Ve.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;hT.isLowerCaseMatch(n.address,Ve.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...Ve.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>ot.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[ot.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...Ve.state.user||{},username:n},z.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,z.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,z.state.activeChain)})}async syncAuthConnector(e,n){var u,d,h,f;const r=Fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!r)return;this.setLoading(!0,n);const s=e.getLoginEmailUsed();this.setLoading(s,n),s&&this.setStatus("connecting",n);const i=e.getEmail(),o=e.getUsername();this.setUser({...((u=Ve.state)==null?void 0:u.user)||{},username:o,email:i},n),this.setupAuthConnectorListeners(e);const{isConnected:a}=await e.isConnected(),c=Ki.getSnapshot(),l=we.getSnapshot();await Promise.all([e.syncDappData({metadata:l.metadata,sdkVersion:l.sdkVersion,projectId:l.projectId,sdkType:l.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:Lu(c.themeVariables,c.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&(a&&((d=this.connectionControllerClient)!=null&&d.connectExternal)?(await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:Fe.CONNECTOR_ID.AUTH,info:{name:Fe.CONNECTOR_ID.AUTH},type:Yi.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=z.state.activeCaipNetwork)==null?void 0:h.id,chain:n})),this.setStatus("connected",n)):$e.getConnectorId(n)===Fe.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),Ke.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!ot.isTelegram())return;const r=Ke.getTelegramSocialProvider();if(!r||!ot.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;Ve.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=$e.getAuthConnector();r&&o&&(this.setLoading(!0,e),await yt.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),Ke.setConnectedSocialProvider(r),Ke.removeTelegramSocialProvider(),hr.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var o,a,c,l;if(!Fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(o=this.remoteFeatures)==null?void 0:o.email,s=Array.isArray((a=this.remoteFeatures)==null?void 0:a.socials)&&this.remoteFeatures.socials.length>0,i=r||s;!this.authProvider&&((c=this.options)!=null&&c.projectId)&&i&&(this.authProvider=FPe.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(l=this.getCaipNetwork(e))==null?void 0:l.caipNetworkId,abortController:pl.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?El.open(pl.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?El.open(pl.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&El.open(pl.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),Tl.subscribeOpen(u=>{var d;!u&&this.isTransactionStackEmpty()&&((d=this.authProvider)==null||d.rejectRpcRequests())}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&at.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=z.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=Bn.getProvider(r),u=Bn.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=Bn.getProviderId(n)===Yi.CONNECTOR_TYPE_AUTH,u=Bn.getProviderId(r),d=u===Yi.CONNECTOR_TYPE_AUTH,h=Fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(z.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:Fe.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:Yi.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===Yi.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Tl.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==Fe.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=Bn.getProviderId(e);if(n===Yi.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=Ke.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(ot.isClient()&&!A9)try{const e={...Fn.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),ot.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!we.state.disableAppend&&!we.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}A9=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!ot.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(Zs(()=>import("./embedded-wallet-DbxUrmpN.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),n.email&&r.push(Zs(()=>import("./email-CaZ04-MP.js"),__vite__mapDeps([12,1,11,5,10,4,9,13,6]))),n.socials&&r.push(Zs(()=>import("./socials-T5st5Upi.js"),__vite__mapDeps([14,1,15,4,16,17,10,18,9,5,11,19,3,20]))),n.swaps&&n.swaps.length>0&&r.push(Zs(()=>import("./swaps-DqnOegWI.js"),__vite__mapDeps([21,1,9,5,22,23,24,3,10,20,6,4]))),e.send&&r.push(Zs(()=>import("./send-ChcSmmux.js"),__vite__mapDeps([25,1,9,5,10,4,16,11,24,3,6,26,27]))),e.receive&&r.push(Zs(()=>import("./receive-CVFWNl1e.js"),__vite__mapDeps([28,1,29,3,19]))),n.onramp&&n.onramp.length>0&&r.push(Zs(()=>import("./onramp-PjRiCHN6.js"),__vite__mapDeps([30,1,31,20,10,3,5,32,15,4,16,33,11,9,18,6]))),n.activity&&r.push(Zs(()=>import("./transactions-BYi89wqR.js"),__vite__mapDeps([34,1,35,31,20,10,11,3]))),e.pay&&r.push(Zs(()=>import("./index-hJqAe3Xm.js"),__vite__mapDeps([36,1,9,5,37,3,10,7,32,27,18]))),await Promise.all([...r,Zs(()=>import("./index-CqtnjllB.js"),__vite__mapDeps([38,1,3,5,26,10,39,23,7,32,9,8,37,35,31,20,11,22,4,6,27,13,15,16,17,2,18,29,19,33])),Zs(()=>import("./w3m-modal-CcD5rXM0.js"),__vite__mapDeps([40,1,7,3,10,8,5,23,39]))])}}let $d;function y6e(t){t&&($d=t)}function d1(){if(!$d)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await($d==null?void 0:$d.open(n))}async function e(){await($d==null?void 0:$d.close())}return{open:t,close:e}}const w6e="1.7.8";let PA;function b6e(t){return PA||(PA=new m6e({...t,sdkVersion:ot.generateSdkVersion(t.adapters??[],"react",w6e)}),y6e(PA)),PA}const v6e=Dc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),S9=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],E6e=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=v6e({isOpen:t}),{open:i}=d1(),o=k.useRef(null),[a,c]=k.useState([]),[l,u]=k.useState(!0),[d,h]=k.useState(null),[f,p]=k.useState("all"),[g,w]=k.useState(1),[m,b]=k.useState(1),[v,A]=k.useState(0),[C,T]=k.useState(null),[x,N]=k.useState(S9[0]),[S,D]=k.useState(!1),[P,$]=k.useState(null),G=k.useCallback(async()=>{var M,j;try{if((M=window.solana)!=null&&M.isPhantom){const V=await window.solana.connect();$(V.publicKey.toString());return}if((j=window.solflare)!=null&&j.isSolflare){const V=await window.solflare.connect();$(V.publicKey.toString());return}i()}catch(V){console.error("Failed to connect Solana wallet:",V),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}D(!1)},[i]);k.useEffect(()=>{var M,j;(M=window.solana)!=null&&M.publicKey?$(window.solana.publicKey.toString()):(j=window.solflare)!=null&&j.publicKey&&$(window.solflare.publicKey.toString())},[]),k.useEffect(()=>{t&&(async()=>{var j;u(!0),h(null);try{let V,te=f==="owned"&&r||void 0;if(x.api==="opensea-solana"){if(f==="owned"&&!P){D(!0),u(!1);return}te=P||void 0,V=await jV(x.slug,50),console.log("Fetched Solana NFTs from collection:",V.data.length),f==="owned"&&P&&(console.log("Filtering for owner:",P),console.log("Sample NFT owner data:",(j=V.data[0])==null?void 0:j.owners),console.log("All NFTs owner data:",V.data.map(X=>({name:X.name,owners:X.owners,owner_of:X.owner_of}))),V.data.some(X=>X.owners&&X.owners.length>0)?(V.data=V.data.filter(X=>{const ce=X.owners.some(ge=>ge.owner_of&&ge.owner_of.toLowerCase()===P.toLowerCase());return ce&&console.log("Found owned NFT:",X.name),ce}),console.log("NFTs after filtering:",V.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else x.api==="opensea"?V=await EL(x.slug,50,te):V=await vL(x.slug,g,50,te);c(V.data),b(V.totalPages),A(V.totalCount)}catch(V){V instanceof Error?h(V.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,x,P]),k.useEffect(()=>{S&&G()},[S,G]);const W=M=>new Date(M).toLocaleDateString(),I=M=>x.api==="opensea-solana"?M.owner_of&&M.owner_of.length>0?`${M.owner_of.substring(0,6)}...${M.owner_of.substring(-4)}`:M.owners&&M.owners.length>0?`${M.owners[0].owner_of.substring(0,6)}...${M.owners[0].owner_of.substring(-4)}`:"Owner data unavailable":M.owner_of&&M.owner_of.length>0?`${M.owner_of.substring(0,6)}...${M.owner_of.substring(-4)}`:M.owners&&M.owners.length>0?`${M.owners[0].owner_of.substring(0,6)}...${M.owners[0].owner_of.substring(-4)}`:"N/A",R=()=>{n&&n()},B=async M=>{if(x.api==="opensea"&&x.chain)try{const j=await FV(x.chain,M.address,M.token_id.toString()),V={...M,attributes:JSON.stringify(j.traits||[])};T(V)}catch(j){console.error("Failed to fetch full NFT details",j),T(M)}else T(M)},O=M=>{N(M),w(1)};return t?y.jsxs(y.Fragment,{children:[y.jsx(M_,{nodeRef:o,handle:`.${s.header}`,children:y.jsxs("div",{ref:o,className:s.popup,children:[y.jsxs("div",{className:s.header,children:[y.jsx("span",{children:"LAWB NFT GALLERY"}),y.jsxs("div",{className:s.titleBarButtons,children:[y.jsx("button",{className:s.titleBarButton,onClick:R,title:"Minimize",children:"_"}),y.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:""})]})]}),y.jsx("div",{className:s.collectionSelector,children:S9.map(M=>y.jsx("button",{className:`${s.collectionButton} ${x.slug===M.slug?"active":""}`,onClick:()=>O(M),children:M.name},M.slug))}),y.jsxs("div",{className:s.content,children:[y.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[y.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),y.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),y.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!P,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||P?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||P?1:.6},children:"My NFTs"}),x.api==="opensea-solana"&&y.jsx("button",{onClick:()=>{G()},style:{background:P?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:P?"white":"black",marginLeft:"auto"},children:P?`Solana: ${P.slice(0,4)}...${P.slice(-4)}`:"Connect Solana"})]}),x.api==="opensea-solana"&&!P&&y.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&y.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?y.jsx("div",{children:"Loading NFTs..."}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${v} total)`,f==="recent"&&`Recently minted NFTs by ${x.api==="opensea-solana"?(P==null?void 0:P.slice(0,6))+"..."+(P==null?void 0:P.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${x.api==="opensea-solana"?(P==null?void 0:P.slice(0,6))+"..."+(P==null?void 0:P.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?y.jsx("div",{children:"No NFTs found."}):y.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map(M=>y.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{B(M)},children:[y.jsx(zV,{src:WV(M),alt:`NFT #${M.token_id}`,style:{width:"100%",height:"150px",objectFit:"cover",marginBottom:"10px",border:"1px solid #ccc",backgroundColor:"#f0f0f0"}}),y.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:y.jsxs("strong",{children:["#",M.token_id]})}),y.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",I(M)]}),y.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",W(M.created_at)]})]},M.id))}),f!=="recent"&&m>1&&y.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[y.jsx("button",{onClick:()=>w(M=>Math.max(1,M-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),y.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",m]}),y.jsx("button",{onClick:()=>w(M=>Math.min(m,M+1)),disabled:g===m,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===m?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),C&&y.jsx(Wme,{nft:C,onClose:()=>T(null)})]}):null};var OA,C6e=new Uint8Array(16);function _6e(){if(!OA&&(OA=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!OA))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return OA(C6e)}const A6e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function S6e(t){return typeof t=="string"&&A6e.test(t)}var xs=[];for(var RO=0;RO<256;++RO)xs.push((RO+256).toString(16).substr(1));function x6e(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(xs[t[e+0]]+xs[t[e+1]]+xs[t[e+2]]+xs[t[e+3]]+"-"+xs[t[e+4]]+xs[t[e+5]]+"-"+xs[t[e+6]]+xs[t[e+7]]+"-"+xs[t[e+8]]+xs[t[e+9]]+"-"+xs[t[e+10]]+xs[t[e+11]]+xs[t[e+12]]+xs[t[e+13]]+xs[t[e+14]]+xs[t[e+15]]).toLowerCase();if(!S6e(n))throw TypeError("Stringified UUID is invalid");return n}function I6e(t,e,n){t=t||{};var r=t.random||(t.rng||_6e)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,x6e(r)}const N6e=Dc({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000",textTransform:"uppercase"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),T6e=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}],R6e=["/images/sticker1.png","/images/sticker2.png","/images/sticker3.png","/images/sticker4.png","/images/sticker5.png"],Co=500;function SX(){const t=N6e(),e=k.useRef(null),[n,r]=k.useState(null),[s,i]=k.useState(""),[o,a]=k.useState(""),[c,l]=k.useState(50),[u,d]=k.useState(50),[h,f]=k.useState(!1),[p,g]=k.useState(!1),[w,m]=k.useState(!1),[b,v]=k.useState(!1),[A,C]=k.useState(!1),[T,x]=k.useState([]),[N,S]=k.useState(null),D=k.useRef(null),[P,$]=k.useState(null),G=async ne=>{const ie=ne.getContext("2d");if(!ie)return;ie.clearRect(0,0,ne.width,ne.height),n?await new Promise(fe=>{const ve=new window.Image;ve.crossOrigin="anonymous",ve.onload=()=>{const ht=Math.min(ne.width/ve.width,ne.height/ve.height),Xe=(ne.width-ve.width*ht)/2,ct=(ne.height-ve.height*ht)/2;ie.drawImage(ve,Xe,ct,ve.width*ht,ve.height*ht),fe()},ve.onerror=()=>fe(),ve.src=n}):(ie.fillStyle="#333",ie.fillRect(0,0,ne.width,ne.height)),(fe=>{fe.textAlign="center",fe.strokeStyle="black",fe.lineWidth=3,fe.fillStyle="white";const ve=(ht,Xe)=>{const ct=ht.toUpperCase().split(" "),Tt=[];let In=ct[0];for(let nt=1;nt<ct.length;nt++){const Dn=ct[nt];fe.measureText(In+" "+Dn).width<Xe?In+=" "+Dn:(Tt.push(In),In=Dn)}return Tt.push(In),Tt};if(s&&(fe.font=`${c}px Impact`,ve(s,Co-20).forEach((Xe,ct)=>{const Tt=c+ct*c*1.2;fe.strokeText(Xe,Co/2,Tt),fe.fillText(Xe,Co/2,Tt)})),o){fe.font=`${u}px Impact`;const ht=ve(o,Co-20);ht.forEach((Xe,ct)=>{const Tt=Co-(ht.length-ct)*u*1.2+u;fe.strokeText(Xe,Co/2,Tt),fe.fillText(Xe,Co/2,Tt)})}})(ie),await Promise.all(T.map(fe=>new Promise(ve=>{const ht=new window.Image;ht.src=fe.src,ht.onload=()=>{ie.save(),ie.translate(fe.x,fe.y),ie.rotate(fe.rotation*Math.PI/180),ie.scale(fe.scale,fe.scale),ie.drawImage(ht,-40,-40,80,80),ie.restore(),ve()},ht.onerror=()=>ve()})));try{h&&W(ne),p&&I(ne),w&&R(ne)}catch(fe){console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead.",fe),f(!1),g(!1),m(!1)}},W=ne=>{const ie=ne.getContext("2d");if(!ie)return;const be=ie.getImageData(0,0,ne.width,ne.height),fe=be.data;for(let ve=0;ve<fe.length;ve+=4){const ht=fe[ve],Xe=fe[ve+1],ct=fe[ve+2],Tt=(ht+Xe+ct)/3,In=1.8;fe[ve]=Math.min(255,Tt+(ht-Tt)*In),fe[ve+1]=Math.min(255,Tt+(Xe-Tt)*In*.7),fe[ve+2]=Math.min(255,Tt+(ct-Tt)*In*.4);const nt=1.3;fe[ve]=Math.min(255,Math.max(0,fe[ve]*nt)),fe[ve+1]=Math.min(255,Math.max(0,fe[ve+1]*nt)),fe[ve+2]=Math.min(255,Math.max(0,fe[ve+2]*nt))}ie.putImageData(be,0,0)},I=ne=>{const ie=ne.getContext("2d");if(!ie)return;const be=4,ve=ie.getImageData(0,0,ne.width,ne.height).data,ht=new Uint8ClampedArray(ve);for(let Xe=0;Xe<ne.height;Xe+=be)for(let ct=0;ct<ne.width;ct+=be){const Tt=(Xe*ne.width+ct)*4,In=ve[Tt],nt=ve[Tt+1],Dn=ve[Tt+2],zt=ve[Tt+3];for(let ke=0;ke<be&&Xe+ke<ne.height;ke++)for(let Nn=0;Nn<be&&ct+Nn<ne.width;Nn++){const Ri=((Xe+ke)*ne.width+(ct+Nn))*4;ht[Ri]=In,ht[Ri+1]=nt,ht[Ri+2]=Dn,ht[Ri+3]=zt}}ie.putImageData(new ImageData(ht,ne.width,ne.height),0,0)},R=ne=>{const ie=ne.getContext("2d");if(!ie)return;const be=ie.getImageData(0,0,ne.width,ne.height),fe=be.data;for(let ve=0;ve<fe.length;ve+=4){const ht=(Math.random()-.5)*50;fe[ve]=Math.max(0,Math.min(255,fe[ve]+ht)),fe[ve+1]=Math.max(0,Math.min(255,fe[ve+1]+ht)),fe[ve+2]=Math.max(0,Math.min(255,fe[ve+2]+ht))}ie.putImageData(be,0,0)};k.useEffect(()=>{e.current&&G(e.current)},[G]);const B=k.useRef(null),O=500,M=ne=>{ne.preventDefault(),B.current=setTimeout(()=>{const ie=e.current;ie&&(navigator.share?ie.toBlob(be=>{if(be){const fe=new File([be],"meme.png",{type:"image/png"});navigator.share({title:"Lawb Meme",text:"Check out this meme I made!",files:[fe]}).catch(()=>{ce()})}}):ce())},O)},j=()=>{B.current&&(clearTimeout(B.current),B.current=null)},V=()=>{B.current&&(clearTimeout(B.current),B.current=null)},te=ne=>{ne.preventDefault()},Z=ne=>{var be;const ie=(be=ne.target.files)==null?void 0:be[0];ie&&r(URL.createObjectURL(ie))},X=()=>{r(null),i(""),a(""),l(50),d(50),f(!1),g(!1),m(!1)},ce=async()=>{const ne=e.current;if(!ne)return;await G(ne);const ie=document.createElement("a");ie.download="meme.png",ie.href=ne.toDataURL("image/png"),document.body.appendChild(ie),ie.click(),document.body.removeChild(ie)},ge=async ne=>{C(!0),v(!1);try{console.log("Fetching NFTs for collection:",ne);let ie;if(ne.api==="opensea"){console.log("Using OpenSea API for:",ne.slug);const be=await EL(ne.slug,50);ie=be.data,console.log("OpenSea response:",be)}else if(ne.api==="opensea-solana"){console.log("Using Helius API for Solana collection:",ne.slug);const be=await jV(ne.slug,50);if(ie=be.data,console.log("Helius Solana response:",be),!ie||ie.length===0){alert("No NFTs found in this Solana collection. Try uploading your own image or use other collections.");return}}else{console.log("Using Scatter API for:",ne.slug);const be=await vL(ne.slug,1,50);ie=be.data,console.log("Scatter response:",be)}if(ie&&ie.length>0){const be=ie[Math.floor(Math.random()*ie.length)],fe=be.image||be.image_url||be.image_url_shrunk;console.log("Selected NFT:",be),console.log("Image URL:",fe),r(fe)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(ie){console.error("Error fetching NFTs:",ie),alert("Failed to fetch NFT images. Check console for details.")}finally{C(!1)}},Me=ne=>{const ie={id:I6e(),src:ne,x:80,y:80,scale:1,rotation:0};x(be=>be.length>=2||be.some(fe=>fe.src===ne&&!fe.id.startsWith("upload-"))?be:[...be,ie]),$(ie.id)},it=ne=>{var be;const ie=(be=ne.target.files)==null?void 0:be[0];if(ie){const fe=URL.createObjectURL(ie);Me(fe)}},Je=(ne,ie,be)=>{x(fe=>fe.map(ve=>{if(ve.id!==ne)return ve;let ht=ve.x+ie/1.2,Xe=ve.y+be/1.2;const ct=40*ve.scale,Tt=40*ve.scale;return ht=Math.max(ct,Math.min(Co-ct,ht)),Xe=Math.max(Tt,Math.min(Co-Tt,Xe)),{...ve,x:ht,y:Xe}}))},bt=(ne,ie,be,fe,ve)=>{x(ht=>ht.map(Xe=>{if(Xe.id!==ne)return Xe;const ct=Xe.x,Tt=Xe.y,In=Math.atan2(ve-Tt,fe-ct)*180/Math.PI;return{...Xe,rotation:be+(In-ie)*.5}}))},Nt=ne=>{x(ie=>ie.filter(be=>be.id!==ne))},At=(ne,ie)=>{x(be=>be.map(fe=>fe.id===ne?{...fe,scale:Math.max(.2,fe.scale*(1+(ie-1)*.2))}:fe))};return y.jsxs("div",{className:t.container,children:[y.jsxs("div",{className:t.header,children:[y.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),y.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",y.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),y.jsxs("div",{className:t.content,children:[y.jsxs("div",{className:t.section,children:[y.jsx("div",{className:t.sectionTitle,children:"Collections"}),y.jsxs("div",{className:t.row,children:[y.jsxs("div",{className:t.dropdown,children:[y.jsx("button",{className:t.button,onClick:()=>v(ne=>!ne),children:"Collections"}),b&&y.jsx("div",{className:t.dropdownContent,children:T6e.map(ne=>y.jsx("div",{className:t.dropdownItem,onClick:()=>{ge(ne)},children:ne.name},ne.id))})]}),y.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",y.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:Z})]}),A&&y.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),y.jsxs("div",{className:t.section,children:[y.jsx("div",{className:t.sectionTitle,children:"Text"}),y.jsxs("div",{className:t.row,children:[y.jsx("span",{className:t.label,children:"Top Text:"}),y.jsx("input",{className:t.input,type:"text",value:s,onChange:ne=>i(ne.target.value),placeholder:"Enter top text..."}),y.jsx("span",{className:t.label,children:"Size:"}),y.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:ne=>l(Number(ne.target.value)),style:{width:60,textAlign:"center"}})]}),y.jsxs("div",{className:t.row,children:[y.jsx("span",{className:t.label,children:"Bottom Text:"}),y.jsx("input",{className:t.input,type:"text",value:o,onChange:ne=>a(ne.target.value),placeholder:"Enter bottom text..."}),y.jsx("span",{className:t.label,children:"Size:"}),y.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:ne=>d(Number(ne.target.value)),style:{width:60,textAlign:"center"}})]})]}),y.jsxs("div",{className:t.section,children:[y.jsx("div",{className:t.sectionTitle,children:"Effects"}),y.jsxs("div",{className:t.row,children:[y.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(ne=>!ne),children:"Deep Fry"}),y.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(ne=>!ne),children:"Pixelate"}),y.jsx("button",{className:t.effectButton,style:{background:w?"#00ffff":void 0},onClick:()=>m(ne=>!ne),children:"Grain"})]})]}),y.jsxs("div",{className:t.section,children:[y.jsx("div",{className:t.sectionTitle,children:"Stickers"}),y.jsxs("div",{className:t.row,children:[R6e.map((ne,ie)=>y.jsx("img",{src:ne,alt:`sticker${ie+1}`,style:{width:32,height:32,cursor:"pointer",border:"1px solid #888",marginRight:4},onClick:()=>Me(ne)},ne)),y.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Sticker",y.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:D,onChange:it})]})]})]}),y.jsxs("div",{className:t.actions,children:[y.jsx("button",{className:t.button,onClick:ce,children:"Save Image"}),y.jsx("button",{className:t.button,onClick:X,children:"Restart"})]})]}),y.jsx("div",{className:t.memeArea,children:y.jsx("canvas",{ref:e,width:Co,height:Co,className:t.canvas,onTouchStart:M,onTouchEnd:j,onTouchMove:V,onContextMenu:te,style:{touchAction:"none"}})}),y.jsx("div",{style:{position:"absolute",left:0,top:0,width:Co,height:Co,pointerEvents:"none"},children:T.map(ne=>P===ne.id?y.jsxs("div",{style:{position:"absolute",left:ne.x,top:ne.y,width:80*ne.scale,height:80*ne.scale,transform:`rotate(${ne.rotation}deg)`,cursor:"move",pointerEvents:"auto",zIndex:10,border:"2px solid #00f",boxShadow:"0 0 8px #00f"},onMouseDown:ie=>{S(ne.id),ie.stopPropagation()},onMouseUp:()=>S(null),onMouseMove:ie=>{N===ne.id&&ie.buttons===1&&Je(ne.id,ie.movementX,ie.movementY)},children:[y.jsx("img",{src:ne.src,alt:"sticker",style:{width:"100%",height:"100%",userSelect:"none",pointerEvents:"none"},draggable:!1}),y.jsx("div",{style:{position:"absolute",right:-12,top:"40%",width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"grab",zIndex:11},onMouseDown:ie=>{var In;ie.stopPropagation();const be=(In=ie.currentTarget.parentElement)==null?void 0:In.getBoundingClientRect(),fe=be?be.left+be.width/2:0,ve=be?be.top+be.height/2:0,ht=Math.atan2(ie.clientY-ve,ie.clientX-fe)*180/Math.PI,Xe=ne.rotation,ct=nt=>{bt(ne.id,ht,Xe,nt.clientX,nt.clientY)},Tt=()=>{window.removeEventListener("mousemove",ct),window.removeEventListener("mouseup",Tt)};window.addEventListener("mousemove",ct),window.addEventListener("mouseup",Tt)}}),y.jsx("div",{style:{position:"absolute",bottom:-12,right:-12,width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"nwse-resize",zIndex:11},onMouseDown:ie=>{ie.stopPropagation();const be=ie.clientX,fe=ht=>{const Xe=(ht.clientX-be)/80;At(ne.id,1+Xe)},ve=()=>{window.removeEventListener("mousemove",fe),window.removeEventListener("mouseup",ve)};window.addEventListener("mousemove",fe),window.addEventListener("mouseup",ve)}}),y.jsx("button",{style:{position:"absolute",top:-12,left:-12,width:16,height:16,background:"#f00",color:"#fff",border:"none",borderRadius:"50%",fontSize:10,cursor:"pointer",zIndex:12},onClick:()=>Nt(ne.id),children:""}),y.jsx("button",{style:{position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:40,height:18,background:"#0f0",color:"#000",border:"1px solid #888",borderRadius:4,fontSize:8,cursor:"pointer",zIndex:12},onClick:()=>$(null),children:"Place"})]},ne.id):null)})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zC(){return zC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zC.apply(this,arguments)}var Ph;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ph||(Ph={}));const x9="popstate";function P6e(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return A3("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:IX(s)}return k6e(e,n,null,t)}function es(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function xX(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function O6e(){return Math.random().toString(36).substr(2,8)}function I9(t,e){return{usr:t.state,key:t.key,idx:e}}function A3(t,e,n,r){return n===void 0&&(n=null),zC({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?yb(e):e,{state:n,key:e&&e.key||r||O6e()})}function IX(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function yb(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function k6e(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Ph.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(zC({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Ph.Pop;let w=u(),m=w==null?null:w-l;l=w,c&&c({action:a,location:g.location,delta:m})}function h(w,m){a=Ph.Push;let b=A3(g.location,w,m);l=u()+1;let v=I9(b,l),A=g.createHref(b);try{o.pushState(v,"",A)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(A)}i&&c&&c({action:a,location:g.location,delta:1})}function f(w,m){a=Ph.Replace;let b=A3(g.location,w,m);l=u();let v=I9(b,l),A=g.createHref(b);o.replaceState(v,"",A),i&&c&&c({action:a,location:g.location,delta:0})}function p(w){let m=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof w=="string"?w:IX(w);return b=b.replace(/ $/,"%20"),es(m,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,m)}let g={get action(){return a},get location(){return t(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(x9,d),c=w,()=>{s.removeEventListener(x9,d),c=null}},createHref(w){return e(s,w)},createURL:p,encodeLocation(w){let m=p(w);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:f,go(w){return o.go(w)}};return g}var N9;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(N9||(N9={}));function D6e(t,e,n){return n===void 0&&(n="/"),M6e(t,e,n)}function M6e(t,e,n,r){let s=typeof e=="string"?yb(e):e,i=RX(s.pathname||"/",n);if(i==null)return null;let o=NX(t);L6e(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=K6e(i);a=G6e(o[c],l)}return a}function NX(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(es(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=fg([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(es(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),NX(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:z6e(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of TX(i.path))s(i,o,c)}),e}function TX(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=TX(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function L6e(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:H6e(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const U6e=/^:[\w-]+$/,B6e=3,$6e=2,F6e=1,j6e=10,W6e=-2,T9=t=>t==="*";function z6e(t,e){let n=t.split("/"),r=n.length;return n.some(T9)&&(r+=W6e),e&&(r+=$6e),n.filter(s=>!T9(s)).reduce((s,i)=>s+(U6e.test(i)?B6e:i===""?F6e:j6e),r)}function H6e(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function G6e(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=q6e({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:fg([i,d.pathname]),pathnameBase:e8e(fg([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=fg([i,d.pathnameBase]))}return o}function q6e(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=V6e(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function V6e(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),xX(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function K6e(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xX(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function RX(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Y6e(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?yb(t):t;return{pathname:n?n.startsWith("/")?n:Q6e(n,e):e,search:t8e(r),hash:n8e(s)}}function Q6e(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function PO(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function J6e(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Z6e(t,e){let n=J6e(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function X6e(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=yb(t):(s=zC({},t),es(!s.pathname||!s.pathname.includes("?"),PO("?","pathname","search",s)),es(!s.pathname||!s.pathname.includes("#"),PO("#","pathname","hash",s)),es(!s.search||!s.search.includes("#"),PO("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=Y6e(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const fg=t=>t.join("/").replace(/\/\/+/g,"/"),e8e=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),t8e=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,n8e=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function r8e(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const PX=["post","put","patch","delete"];new Set(PX);const s8e=["get",...PX];new Set(s8e);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function HC(){return HC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HC.apply(this,arguments)}const DU=k.createContext(null),i8e=k.createContext(null),ST=k.createContext(null),xT=k.createContext(null),wb=k.createContext({outlet:null,matches:[],isDataRoute:!1}),OX=k.createContext(null);function IT(){return k.useContext(xT)!=null}function kX(){return IT()||es(!1),k.useContext(xT).location}function DX(t){k.useContext(ST).static||k.useLayoutEffect(t)}function o8e(){let{isDataRoute:t}=k.useContext(wb);return t?b8e():a8e()}function a8e(){IT()||es(!1);let t=k.useContext(DU),{basename:e,future:n,navigator:r}=k.useContext(ST),{matches:s}=k.useContext(wb),{pathname:i}=kX(),o=JSON.stringify(Z6e(s,n.v7_relativeSplatPath)),a=k.useRef(!1);return DX(()=>{a.current=!0}),k.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=X6e(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:fg([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function c8e(t,e){return l8e(t,e)}function l8e(t,e,n,r){IT()||es(!1);let{navigator:s}=k.useContext(ST),{matches:i}=k.useContext(wb),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=kX(),u;if(e){var d;let w=typeof e=="string"?yb(e):e;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||es(!1),u=w}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let w=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=D6e(t,{pathname:f}),g=p8e(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:fg([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:fg([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&g?k.createElement(xT.Provider,{value:{location:HC({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ph.Pop}},g):g}function u8e(){let t=w8e(),e=r8e(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:s},n):null,null)}const d8e=k.createElement(u8e,null);class h8e extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?k.createElement(wb.Provider,{value:this.props.routeContext},k.createElement(OX.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function f8e(t){let{routeContext:e,match:n,children:r}=t,s=k.useContext(DU);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(wb.Provider,{value:e},r)}function p8e(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||es(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,w=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||d8e,c&&(l<0&&h===0?(v8e("route-fallback"),p=!0,w=null):l===h&&(p=!0,w=d.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,h+1)),b=()=>{let v;return f?v=g:p?v=w:d.route.Component?v=k.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=u,k.createElement(f8e,{match:d,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?k.createElement(h8e,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:b(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):b()},null)}var MX=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(MX||{}),LX=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(LX||{});function g8e(t){let e=k.useContext(DU);return e||es(!1),e}function m8e(t){let e=k.useContext(i8e);return e||es(!1),e}function y8e(t){let e=k.useContext(wb);return e||es(!1),e}function UX(t){let e=y8e(),n=e.matches[e.matches.length-1];return n.route.id||es(!1),n.route.id}function w8e(){var t;let e=k.useContext(OX),n=m8e(),r=UX();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function b8e(){let{router:t}=g8e(MX.UseNavigateStable),e=UX(LX.UseNavigateStable),n=k.useRef(!1);return DX(()=>{n.current=!0}),k.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,HC({fromRouteId:e},i)))},[t,e])}const R9={};function v8e(t,e,n){R9[t]||(R9[t]=!0)}function E8e(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function TS(t){es(!1)}function C8e(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ph.Pop,navigator:i,static:o=!1,future:a}=t;IT()&&es(!1);let c=e.replace(/^\/*/,"/"),l=k.useMemo(()=>({basename:c,navigator:i,static:o,future:HC({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=yb(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=k.useMemo(()=>{let w=RX(u,c);return w==null?null:{location:{pathname:w,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return g==null?null:k.createElement(ST.Provider,{value:l},k.createElement(xT.Provider,{children:n,value:g}))}function _8e(t){let{children:e,location:n}=t;return c8e(S3(e),n)}new Promise(()=>{});function S3(t,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(t,(r,s)=>{if(!k.isValidElement(r))return;let i=[...e,s];if(r.type===k.Fragment){n.push.apply(n,S3(r.props.children,i));return}r.type!==TS&&es(!1),!r.props.index||!r.props.children||es(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=S3(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const A8e="6";try{window.__reactRouterVersion=A8e}catch{}const S8e="startTransition",P9=sre[S8e];function x8e(t){let{basename:e,children:n,future:r,window:s}=t,i=k.useRef();i.current==null&&(i.current=P6e({window:s,v5Compat:!0}));let o=i.current,[a,c]=k.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=k.useCallback(d=>{l&&P9?P9(()=>c(d)):c(d)},[c,l]);return k.useLayoutEffect(()=>o.listen(u),[o,u]),k.useEffect(()=>E8e(r),[r]),k.createElement(C8e,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var O9;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(O9||(O9={}));var k9;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(k9||(k9={}));const I8e=Dc({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function N8e(){const t=I8e(),{open:e}=d1(),[n,r]=k.useState(),[s,i]=k.useState(!1),[o,a]=k.useState("pixelawbs-popup"),[c,l]=k.useState(new Set),[u,d]=k.useState(!1),[h,f]=k.useState(!1),[p,g]=k.useState(!1),[w,m]=k.useState(!1),b=o8e(),v=k.useRef(null);k.useEffect(()=>{if(o==="halloween-popup"&&v.current){const I=v.current.querySelector("script[data-tiktok-embed]");I&&I.remove();const R=document.createElement("script");R.src="https://www.tiktok.com/embed.js",R.async=!0,R.setAttribute("data-tiktok-embed","true"),v.current.appendChild(R)}},[o]);const A=(I,R,B)=>{if(I==="url"&&B)window.open(B,"_blank");else if(I==="popup"&&R)a(R),l(O=>{const M=new Set(O);return M.delete(R),M}),document.body.offsetWidth;else if(I==="wallet")s?(i(!1),r(void 0)):e();else if(I==="mint"){if(!n){alert("Please connect your wallet first!");return}d(!0)}else I==="nft-gallery"?f(!0):I==="meme-generator"?g(!0):I==="chess"&&(s?m(!0):e().then(()=>{const O=()=>{window.ethereum&&window.ethereum.selectedAddress?m(!0):setTimeout(O,200)};O()}))},C=()=>a(null),T=I=>{l(R=>new Set(R).add(I)),a(null)},x=I=>{I==="mint-popup"?d(!0):I==="nft-gallery-popup"?f(!0):I==="meme-generator-popup"?g(!0):a(I),l(R=>{const B=new Set(R);return B.delete(I),B})},N=()=>d(!1),S=()=>f(!1),D=()=>g(!1),P=()=>{d(!1),l(I=>new Set(I).add("mint-popup"))},$=()=>{f(!1),l(I=>new Set(I).add("nft-gallery-popup"))},G=()=>{g(!1),l(I=>new Set(I).add("meme-generator-popup"))},W=y.jsxs("div",{onClick:()=>{s?(i(!1),r(void 0)):e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:s?"limegreen":"red",fontWeight:"bold"},children:[y.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:s?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),s?`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return y.jsxs("div",{className:t.body,children:[w&&y.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[y.jsx("video",{src:"/images/loadingchess.mp4",style:{width:120,height:120,marginBottom:32},autoPlay:!0,muted:!0,onEnded:()=>{m(!1),b("/chess")}}),y.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),y.jsx(Dme,{onIconClick:A}),y.jsx(Lme,{minimizedWindows:Array.from(c),onRestoreWindow:x,walletButton:W,connectionStatus:{connected:s,address:n,ens:void 0}}),y.jsxs(ua,{id:"chat-popup",isOpen:o==="chat-popup",onClose:C,onMinimize:T,children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",y.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),y.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),y.jsxs(ua,{id:"purity-popup",isOpen:o==="purity-popup",onClose:C,onMinimize:T,children:[y.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),y.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),y.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),y.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),y.jsxs(ua,{id:"lawbstarz-popup",isOpen:o==="lawbstarz-popup",onClose:C,onMinimize:T,children:[y.jsxs("p",{style:{marginBottom:"10px"},children:[" LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER  666x PREMIUM PFP COLLECTION  LAWBSTARZ IS A MUSIC NFT  LAWBSTARZ IS AN ",y.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE  LAWBSTARZ IS INSPIRED BY ",y.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"}),"  LED BY NETWORK SPIRITUALITY  666 ",y.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",y.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 "]}),y.jsx("p",{children:"Chain: Ethereum"}),y.jsxs("p",{children:["Collect on ",y.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),y.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),y.jsxs("blockquote",{className:"twitter-tweet","data-media-max-width":"560",children:[y.jsxs("p",{lang:"en",dir:"ltr",children:["The following  has been transcripted from a live news broadcast:",y.jsx("br",{}),y.jsx("br",{}),"Anchor: Good evening, viewers. Tonight, we embark on an extraordinary journey that defies rational explanation. It all began with February's Cigawrette Packs cargo ship hijacking, little did we know that the.. ",y.jsx("a",{href:"https://t.co/BWgLOk59N4",children:"pic.twitter.com/BWgLOk59N4"})]})," wables (@wables411) ",y.jsx("a",{href:"https://twitter.com/wables411/status/1669009492007354369?ref_src=twsrc%5Etfw",children:"June 14, 2023"})]}),y.jsx("script",{async:!0,src:"https://platform.twitter.com/widgets.js"}),y.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),y.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),y.jsxs(ua,{id:"lawbstation-popup",isOpen:o==="lawbstation-popup",onClose:C,onMinimize:T,children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",y.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),y.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),y.jsx("p",{style:{marginBottom:"10px"},children:y.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),y.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),y.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),y.jsxs(ua,{id:"nexus-popup",isOpen:o==="nexus-popup",onClose:C,onMinimize:T,children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",y.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),y.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),y.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),y.jsxs(ua,{id:"lawbsters-popup",isOpen:o==="lawbsters-popup",onClose:C,onMinimize:T,children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",y.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),y.jsx("p",{children:"Chain: Ethereum"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",y.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",y.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),y.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:y.jsx(rfe,{id:"1620879129850834944"})}),y.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),y.jsx(ua,{id:"pixelawbs-popup",isOpen:o==="pixelawbs-popup",onClose:C,onMinimize:T,children:(()=>{const I=R=>{R.preventDefault(),a(null),d(!0)};return y.jsxs(y.Fragment,{children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",y.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:I,children:"COLLECT HERE"})," OR VISIT ",y.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),y.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",y.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),y.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",y.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),y.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),y.jsxs(ua,{id:"halloween-popup",isOpen:o==="halloween-popup",onClose:C,onMinimize:T,children:[y.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),y.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),y.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",y.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),y.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),y.jsx("div",{ref:v,style:{maxWidth:"400px",margin:"0 auto"},children:y.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:y.jsxs("section",{children:[y.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore  minting rn on @ourzora via @PC69 ",y.jsx("a",{target:"_blank",rel:"noreferrer",title:" original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:" original sound - wables.eth"})]})})})]}),y.jsxs(ua,{id:"lawb-popup",isOpen:o==="lawb-popup",onClose:C,onMinimize:T,children:[y.jsx("h1",{style:{marginBottom:"10px"},children:y.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:" $LAWB"})}),y.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",y.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),y.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),y.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),y.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),y.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),y.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, visit ",y.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),y.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",y.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),y.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),y.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:y.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}),y.jsx($me,{isOpen:u,onClose:N,onMinimize:P,walletAddress:n||""}),y.jsx(E6e,{isOpen:h,onClose:S,onMinimize:$,walletAddress:n}),y.jsx(ua,{id:"meme-generator-popup",isOpen:p,onClose:D,onMinimize:G,children:y.jsx(SX,{})})]})}function Go(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const RS="2.17.3",T8e=()=>`@wagmi/core@${RS}`;var BX=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},yI,$X;let dd=class x3 extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return T8e()}constructor(e,n={}){var i;super(),yI.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof x3?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof x3&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return BX(this,yI,"m",$X).call(this,this,e)}};yI=new WeakSet,$X=function t(e,n){return n!=null&&n(e)?e:e.cause?BX(this,yI,"m",t).call(this,e.cause,n):e};class GC extends dd{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class R8e extends dd{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class P8e extends dd{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class O8e extends dd{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class k8e extends dd{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class D8e extends dd{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function PS(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new R8e;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}async function h1(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new D8e({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new P8e;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new k8e({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=Nr(e.account??n.accounts[0]);if(o&&(o.address=Uu(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new O8e({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return OY({account:o,chain:a,name:"Connector Client",transport:l=>Yve(c)({...l,retryCount:0})})}async function I3(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function M8e(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await h1(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return Go(o,HN,"estimateGas")({...s,account:i})}function FX(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(Xwe[t])}function Yy(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function L8e(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return Go(o,JY,"multicall")({allowFailure:n,contracts:s,...i})}function jX(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Go(s,Bl,"readContract")(r)}async function U8e(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>L8e(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof GK)throw c;const l=()=>o.map(u=>jX(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function B8e(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await D9(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await D9(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=bK(Rl(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await Go(c,FL,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:im(u,FX(a)),symbol:d.nativeCurrency.symbol,value:u}}async function D9(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await U8e(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=im(c??"0",FX(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function M9(t){return t.state.chainId}function yf(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!yf(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!yf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let OO=[];function L9(t){const e=t.chains;return yf(OO,e)?OO:(OO=e,e)}function $8e(t,e={}){let n;try{n=t.getClient(e)}catch{}return n}let kA=[];function tc(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||yf(kA,e)?kA:(kA=e,e)}let kO=[];function U9(t){const e=t.connectors;return yf(kO,e)?kO:(kO=e,e)}function F8e(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Go(s,BY,"getEnsName")(r)}function N3(t,e={}){const n=$8e(t,e);return n==null?void 0:n.extend(f_e)}async function j8e(t,e={}){return(await h1(t,e)).extend(I_e)}async function W8e(t,e){const{account:n,chainId:r,...s}=e,i=n??Yy(t).address,o=t.getClient({chainId:r});return Go(o,q_,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let DO=!1;async function T3(t,e={}){var l,u;if(DO)return[];DO=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const w=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:w}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),DO=!1,a}async function z8e(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await h1(t,{account:n??void 0,chainId:r,connector:s}),await Go(o,Y_,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function H8e(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await h1(t,{account:n,connector:r}),Go(i,SQ,"signMessage")({...s,...n?{account:n}:{}})}class qd extends dd{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class G8e extends dd{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function R3(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new G8e({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new GC;return t.setState(a=>({...a,chainId:r})),i}function WX(t,e){const{onChange:n}=e;return t.subscribe(()=>Yy(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return yf(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function q8e(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function zX(t,e){const{onChange:n}=e;return t.subscribe(()=>tc(t),n,{equalityFn:yf})}function HX(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function V8e(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=Go(l,_Q,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}function K8e(t,e){const{onChange:n}=e;return t.subscribe(()=>N3(t),n,{equalityFn(r,s){return(r==null?void 0:r.uid)===(s==null?void 0:s.uid)}})}async function GX(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await Go(i,CQ,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await Go(i,ZN,"getTransaction")({hash:a.transactionHash}),d=await Go(i,V_,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?bK(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function qX(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await h1(t,{account:n??void 0,chainId:r,connector:s}),await Go(o,xY,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function ZVe(t){return t}NT.type="injected";function NT(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...Y8e[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:NT.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,w,m,b;const d=await this.getProvider();if(!d)throw new qd;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(w=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:w.map(A=>Uu(A)),h.length>0&&(h=await this.getAccounts())}catch(v){const A=v;if(A.code===Gr.code)throw new Gr(A);if(A.code===Qh.code)throw A}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(C=>Uu(C))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let v=await this.getChainId();if(l&&v!==l){const A=await this.switchChain({chainId:l}).catch(C=>{if(C.code===Gr.code)throw C;return{id:v}});v=(A==null?void 0:A.id)??v}return e&&await((m=c.storage)==null?void 0:m.removeItem(`${this.id}.disconnected`)),t.target||await((b=c.storage)==null?void 0:b.setItem("injected.connected",!0)),{accounts:h,chainId:v}}catch(v){const A=v;throw A.code===Gr.code?new Gr(A):A.code===Qh.code?new Qh(A):A}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new qd;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await kY(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new qd;return(await l.request({method:"eth_accounts"})).map(d=>Uu(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new qd;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=OS(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(m=>window.addEventListener("ethereum#initialized",()=>m(p()),{once:!0}))]:[],new Promise(m=>setTimeout(()=>m(p()),g))]))return!0}throw new qd}return!!(await zx(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,w,m;const d=await this.getProvider();if(!d)throw new qd;const h=c.chains.find(b=>b.id===u);if(!h)throw new Ll(new GC);const f=new Promise(b=>{const v=A=>{"chainId"in A&&A.chainId===u&&(c.emitter.off("change",v),b())};c.emitter.on("change",v)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:et(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(b){const v=b;if(v.code===4902||((g=(p=v==null?void 0:v.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:A,...C}=h.blockExplorers??{};let T;l!=null&&l.blockExplorerUrls?T=l.blockExplorerUrls:A&&(T=[A.url,...Object.values(C).map(S=>S.url)]);let x;(w=l==null?void 0:l.rpcUrls)!=null&&w.length?x=l.rpcUrls:x=[((m=h.rpcUrls.default)==null?void 0:m.http[0])??""];const N={blockExplorerUrls:T,chainId:et(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:x};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[N]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new Gr(new Error("User rejected switch after adding network."))}),f]),h}catch(A){throw new Gr(A)}throw v.code===Gr.code?new Gr(v):new Ll(v)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>Uu(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const Y8e={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:OS(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return OS(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:OS(t,"isPhantom")}}};function OS(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function Q8e(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function J8e(){const t=new Set;let e=[];const n=()=>Q8e(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const Z8e=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},X8e=Z8e;function e4e(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const P3=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return P3(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return P3(r)(n)}}}},t4e=(t,e)=>(n,r,s)=>{let i={storage:e4e(()=>localStorage),partialize:g=>g,version:0,merge:(g,w)=>({...w,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,w)=>{d(g,w),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,w;if(!l)return;o=!1,a.forEach(b=>{var v;return b((v=r())!=null?v:h)});const m=((w=i.onRehydrateStorage)==null?void 0:w.call(i,(g=r())!=null?g:h))||void 0;return P3(l.getItem.bind(l))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var v;const[A,C]=b;if(f=i.merge(C,(v=r())!=null?v:h),n(f,!0),A)return u()}).then(()=>{m==null||m(f,void 0),f=r(),o=!0,c.forEach(b=>b(f))}).catch(b=>{m==null||m(void 0,b)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},n4e=t4e,B9=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},MO=t=>t?B9(t):B9;var VX={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var w=this._events[g],m=arguments.length,b,v;if(w.fn){switch(w.once&&this.removeListener(l,w.fn,void 0,!0),m){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,u),!0;case 3:return w.fn.call(w.context,u,d),!0;case 4:return w.fn.call(w.context,u,d,h),!0;case 5:return w.fn.call(w.context,u,d,h,f),!0;case 6:return w.fn.call(w.context,u,d,h,f,p),!0}for(v=1,b=new Array(m-1);v<m;v++)b[v-1]=arguments[v];w.fn.apply(w.context,b)}else{var A=w.length,C;for(v=0;v<A;v++)switch(w[v].once&&this.removeListener(l,w[v].fn,void 0,!0),m){case 1:w[v].fn.call(w[v].context);break;case 2:w[v].fn.call(w[v].context,u);break;case 3:w[v].fn.call(w[v].context,u,d);break;case 4:w[v].fn.call(w[v].context,u,d,h);break;default:if(!b)for(C=1,b=new Array(m-1);C<m;C++)b[C-1]=arguments[C];w[v].fn.apply(w[v].context,b)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,w=[],m=p.length;g<m;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&w.push(p[g]);w.length?this._events[f]=w.length===1?w[0]:w:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(VX);var r4e=VX.exports;const s4e=Qg(r4e);class i4e{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new s4e})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function o4e(t){return new i4e(t)}function a4e(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function $9(t,e){return t.slice(0,e).join(".")||"."}function F9(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function c4e(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=F9(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=F9(s,c);if(u!==0)return r?e.call(this,a,c,$9(i,u)):`[ref=${$9(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function l4e(t,e,n,r){return JSON.stringify(t,c4e((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function u4e(t){const{deserialize:e=a4e,key:n="wagmi",serialize:r=l4e,storage:s=KX}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const KX={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function d4e(){const t=typeof window<"u"&&window.localStorage?window.localStorage:KX;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const O3=256;let DA=O3,MA;function h4e(t=11){if(!MA||DA+t>O3*2){MA="",DA=0;for(let e=0;e<O3;e++)MA+=(256+Math.random()*256|0).toString(16).substring(1)}return MA.substring(DA,DA+++t)}function YX(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=u4e({storage:d4e()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?J8e():void 0,a=MO(()=>i.chains),c=MO(()=>{const C=[],T=new Set;for(const x of i.connectors??[]){const N=l(x);if(C.push(N),!s&&N.rdns){const S=typeof N.rdns=="string"?[N.rdns]:N.rdns;for(const D of S)T.add(D)}}if(!s&&o){const x=o.getProviders();for(const N of x)T.has(N.info.rdns)||C.push(l(u(N)))}return C});function l(C){var N;const T=o4e(h4e()),x={...C({emitter:T,chains:a.getState(),storage:n,transports:i.transports}),emitter:T,uid:T.uid};return T.on("connect",v),(N=x.setup)==null||N.call(x),x}function u(C){const{info:T}=C,x=C.provider;return NT({target:{...T,id:T.rdns,provider:x}})}const d=new Map;function h(C={}){const T=C.chainId??w.getState().chainId,x=a.getState().find(S=>S.id===T);if(C.chainId&&!x)throw new GC;{const S=d.get(w.getState().chainId);if(S&&!x)return S;if(!x)throw new GC}{const S=d.get(T);if(S)return S}let N;if(i.client)N=i.client({chain:x});else{const S=x.id,D=a.getState().map(G=>G.id),P={},$=Object.entries(i);for(const[G,W]of $)if(!(G==="chains"||G==="client"||G==="connectors"||G==="transports"))if(typeof W=="object")if(S in W)P[G]=W[S];else{if(D.some(R=>R in W))continue;P[G]=W}else P[G]=W;N=OY({...P,chain:x,batch:P.batch??{multicall:!0},transport:G=>i.transports[S]({...G,connectors:c})})}return d.set(T,N),N}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";RS.startsWith(g)?p=Number.parseInt(RS.replace(g,"")):p=Number.parseInt(RS.split(".")[0]??"0");const w=MO(X8e(n?n4e(f,{migrate(C,T){if(T===p)return C;const x=f(),N=m(C,x.chainId);return{...x,chainId:N}},name:"store",partialize(C){return{connections:{__type:"Map",value:Array.from(C.connections.entries()).map(([T,x])=>{const{id:N,name:S,type:D,uid:P}=x.connector;return[T,{...x,connector:{id:N,name:S,type:D,uid:P}}]})},chainId:C.chainId,current:C.current}},merge(C,T){typeof C=="object"&&C&&"status"in C&&delete C.status;const x=m(C,T.chainId);return{...T,...C,chainId:x}},skipHydration:s,storage:n,version:p}):f));w.setState(f());function m(C,T){return C&&typeof C=="object"&&"chainId"in C&&typeof C.chainId=="number"&&a.getState().some(x=>x.id===C.chainId)?C.chainId:T}r&&w.subscribe(({connections:C,current:T})=>{var x;return T?(x=C.get(T))==null?void 0:x.chainId:void 0},C=>{if(a.getState().some(x=>x.id===C))return w.setState(x=>({...x,chainId:C??x.chainId}))}),o==null||o.subscribe(C=>{const T=new Set,x=new Set;for(const S of c.getState())if(T.add(S.id),S.rdns){const D=typeof S.rdns=="string"?[S.rdns]:S.rdns;for(const P of D)x.add(P)}const N=[];for(const S of C){if(x.has(S.info.rdns))continue;const D=l(u(S));T.has(D.id)||N.push(D)}n&&!w.persist.hasHydrated()||c.setState(S=>[...S,...N],!0)});function b(C){w.setState(T=>{const x=T.connections.get(C.uid);return x?{...T,connections:new Map(T.connections).set(C.uid,{accounts:C.accounts??x.accounts,chainId:C.chainId??x.chainId,connector:x.connector})}:T})}function v(C){w.getState().status==="connecting"||w.getState().status==="reconnecting"||w.setState(T=>{const x=c.getState().find(N=>N.uid===C.uid);return x?(x.emitter.listenerCount("connect")&&x.emitter.off("connect",b),x.emitter.listenerCount("change")||x.emitter.on("change",b),x.emitter.listenerCount("disconnect")||x.emitter.on("disconnect",A),{...T,connections:new Map(T.connections).set(C.uid,{accounts:C.accounts,chainId:C.chainId,connector:x}),current:C.uid,status:"connected"}):T})}function A(C){w.setState(T=>{const x=T.connections.get(C.uid);if(x){const S=x.connector;S.emitter.listenerCount("change")&&x.connector.emitter.off("change",b),S.emitter.listenerCount("disconnect")&&x.connector.emitter.off("disconnect",A),S.emitter.listenerCount("connect")||x.connector.emitter.on("connect",v)}if(T.connections.delete(C.uid),T.connections.size===0)return{...T,connections:new Map,current:null,status:"disconnected"};const N=T.connections.values().next().value;return{...T,connections:new Map(T.connections),current:N.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return w.getState()},setState(C){let T;typeof C=="function"?T=C(w.getState()):T=C;const x=f();typeof T!="object"&&(T=x),Object.keys(x).some(S=>!(S in T))&&(T=x),w.setState(T,!0)},subscribe(C,T,x){return w.subscribe(C,T,x?{...x,fireImmediately:x.emitImmediately}:void 0)},_internal:{mipd:o,store:w,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(C){const T=typeof C=="function"?C(a.getState()):C;if(T.length!==0)return a.setState(T,!0)},subscribe(C){return a.subscribe(C)}},connectors:{providerDetailToConnector:u,setup:l,setState(C){return c.setState(typeof C=="function"?C(c.getState()):C,!0)},subscribe(C){return c.subscribe(C)}},events:{change:b,connect:v,disconnect:A}}}}function f4e(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?T3(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function p4e(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=f4e(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=k.useRef(!0);return k.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const QX=k.createContext(void 0);function g4e(t){const{children:e,config:n}=t,r={value:n};return k.createElement(p4e,t,k.createElement(QX.Provider,r,e))}const m4e="2.15.6",y4e=()=>`wagmi@${m4e}`;class w4e extends dd{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return y4e()}}class b4e extends w4e{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function yo(t={}){const e=t.config??k.useContext(QX);if(!e)throw new b4e;return e}function v4e(t,e){const{onChange:n}=e;return t._internal.chains.subscribe((r,s)=>{n(r,s)})}var JX={exports:{}},ZX={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TT=k,E4e=zq;function C4e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _4e=typeof Object.is=="function"?Object.is:C4e,A4e=E4e.useSyncExternalStore,S4e=TT.useRef,x4e=TT.useEffect,I4e=TT.useMemo,N4e=TT.useDebugValue;ZX.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=S4e(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=I4e(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,_4e(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=A4e(t,i[0],i[1]);return x4e(function(){o.hasValue=!0,o.value=a},[a]),N4e(a),a};JX.exports=ZX;var XX=JX.exports;const LO=t=>typeof t=="object"&&!Array.isArray(t);function T4e(t,e,n=e,r=yf){const s=k.useRef([]),i=XX.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(LO(o)&&LO(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return k.useMemo(()=>{if(LO(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function f1(t={}){const e=yo(t);return T4e(n=>WX(e,{onChange:n}),()=>Yy(e))}var bb=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Wg=typeof window>"u"||"Deno"in globalThis;function pi(){}function R4e(t,e){return typeof t=="function"?t(e):t}function k3(t){return typeof t=="number"&&t>=0&&t!==1/0}function eee(t,e){return Math.max(t+(e||0)-Date.now(),0)}function rf(t,e){return typeof t=="function"?t(e):t}function _a(t,e){return typeof t=="function"?t(e):t}function j9(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==MU(o,e.options))return!1}else if(!qC(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function W9(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(zg(e.options.mutationKey)!==zg(i))return!1}else if(!qC(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function MU(t,e){return((e==null?void 0:e.queryKeyHashFn)||zg)(t)}function zg(t){return JSON.stringify(t,(e,n)=>D3(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function qC(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>qC(t[n],e[n])):!1}function LU(t,e){if(t===e)return t;const n=z9(t)&&z9(e);if(n||D3(t)&&D3(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=LU(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function wI(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function z9(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function D3(t){if(!H9(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!H9(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function H9(t){return Object.prototype.toString.call(t)==="[object Object]"}function P4e(t){return new Promise(e=>{setTimeout(e,t)})}function M3(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?LU(t,e):e}function O4e(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function k4e(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var UU=Symbol();function tee(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===UU?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function nee(t,e){return typeof t=="function"?t(...e):!!t}var Pp,Xd,n0,RW,D4e=(RW=class extends bb{constructor(){super();Y(this,Pp);Y(this,Xd);Y(this,n0);L(this,n0,e=>{if(!Wg&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){_(this,Xd)||this.setEventListener(_(this,n0))}onUnsubscribe(){var e;this.hasListeners()||((e=_(this,Xd))==null||e.call(this),L(this,Xd,void 0))}setEventListener(e){var n;L(this,n0,e),(n=_(this,Xd))==null||n.call(this),L(this,Xd,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){_(this,Pp)!==e&&(L(this,Pp,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof _(this,Pp)=="boolean"?_(this,Pp):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Pp=new WeakMap,Xd=new WeakMap,n0=new WeakMap,RW),BU=new D4e,r0,eh,s0,PW,M4e=(PW=class extends bb{constructor(){super();Y(this,r0,!0);Y(this,eh);Y(this,s0);L(this,s0,e=>{if(!Wg&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){_(this,eh)||this.setEventListener(_(this,s0))}onUnsubscribe(){var e;this.hasListeners()||((e=_(this,eh))==null||e.call(this),L(this,eh,void 0))}setEventListener(e){var n;L(this,s0,e),(n=_(this,eh))==null||n.call(this),L(this,eh,e(this.setOnline.bind(this)))}setOnline(e){_(this,r0)!==e&&(L(this,r0,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return _(this,r0)}},r0=new WeakMap,eh=new WeakMap,s0=new WeakMap,PW),bI=new M4e;function L3(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function L4e(t){return Math.min(1e3*2**t,3e4)}function ree(t){return(t??"online")==="online"?bI.isOnline():!0}var see=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function UO(t){return t instanceof see}function iee(t){let e=!1,n=0,r=!1,s;const i=L3(),o=g=>{var w;r||(h(new see(g)),(w=t.abort)==null||w.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>BU.isFocused()&&(t.networkMode==="always"||bI.isOnline())&&t.canRun(),u=()=>ree(t.networkMode)&&t.canRun(),d=g=>{var w;r||(r=!0,(w=t.onSuccess)==null||w.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var w;r||(r=!0,(w=t.onError)==null||w.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var w;s=m=>{(r||l())&&g(m)},(w=t.onPause)==null||w.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const w=n===0?t.initialPromise:void 0;try{g=w??t.fn()}catch(m){g=Promise.reject(m)}Promise.resolve(g).then(d).catch(m=>{var T;if(r)return;const b=t.retry??(Wg?0:3),v=t.retryDelay??L4e,A=typeof v=="function"?v(n,m):v,C=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,m);if(e||!C){h(m);return}n++,(T=t.onFail)==null||T.call(t,n,m),P4e(A).then(()=>l()?void 0:f()).then(()=>{e?h(m):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var U4e=t=>setTimeout(t,0);function B4e(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=U4e;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Kr=B4e(),Op,OW,oee=(OW=class{constructor(){Y(this,Op)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),k3(this.gcTime)&&L(this,Op,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Wg?1/0:5*60*1e3))}clearGcTimeout(){_(this,Op)&&(clearTimeout(_(this,Op)),L(this,Op,void 0))}},Op=new WeakMap,OW),i0,kp,ga,Dp,Ks,o_,Mp,rc,cu,kW,$4e=(kW=class extends oee{constructor(e){super();Y(this,rc);Y(this,i0);Y(this,kp);Y(this,ga);Y(this,Dp);Y(this,Ks);Y(this,o_);Y(this,Mp);L(this,Mp,!1),L(this,o_,e.defaultOptions),this.setOptions(e.options),this.observers=[],L(this,Dp,e.client),L(this,ga,_(this,Dp).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,L(this,i0,F4e(this.options)),this.state=e.state??_(this,i0),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=_(this,Ks))==null?void 0:e.promise}setOptions(e){this.options={..._(this,o_),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&_(this,ga).remove(this)}setData(e,n){const r=M3(this.state.data,e,this.options);return de(this,rc,cu).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){de(this,rc,cu).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=_(this,Ks))==null?void 0:r.promise;return(s=_(this,Ks))==null||s.cancel(e),n?n.then(pi).catch(pi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(_(this,i0))}isActive(){return this.observers.some(e=>_a(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===UU||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>rf(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!eee(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=_(this,Ks))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=_(this,Ks))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),_(this,ga).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(_(this,Ks)&&(_(this,Mp)?_(this,Ks).cancel({revert:!0}):_(this,Ks).cancelRetry()),this.scheduleGc()),_(this,ga).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||de(this,rc,cu).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(_(this,Ks))return _(this,Ks).continueRetry(),_(this,Ks).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(L(this,Mp,!0),r.signal)})},i=()=>{const h=tee(this.options,n),p=(()=>{const g={client:_(this,Dp),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return L(this,Mp,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:_(this,Dp),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),L(this,kp,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&de(this,rc,cu).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,w;UO(h)&&h.silent||de(this,rc,cu).call(this,{type:"error",error:h}),UO(h)||((p=(f=_(this,ga).config).onError)==null||p.call(f,h,this),(w=(g=_(this,ga).config).onSettled)==null||w.call(g,this.state.data,h,this)),this.scheduleGc()};return L(this,Ks,iee({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,w;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(m){c(m);return}(p=(f=_(this,ga).config).onSuccess)==null||p.call(f,h,this),(w=(g=_(this,ga).config).onSettled)==null||w.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{de(this,rc,cu).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{de(this,rc,cu).call(this,{type:"pause"})},onContinue:()=>{de(this,rc,cu).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),_(this,Ks).start()}},i0=new WeakMap,kp=new WeakMap,ga=new WeakMap,Dp=new WeakMap,Ks=new WeakMap,o_=new WeakMap,Mp=new WeakMap,rc=new WeakSet,cu=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...aee(r.data,this.options),fetchMeta:e.meta??null};case"success":return L(this,kp,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return UO(s)&&s.revert&&_(this,kp)?{..._(this,kp),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Kr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),_(this,ga).notify({query:this,type:"updated",action:e})})},kW);function aee(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ree(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function F4e(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var el,DW,j4e=(DW=class extends bb{constructor(e={}){super();Y(this,el);this.config=e,L(this,el,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??MU(s,n);let o=this.get(i);return o||(o=new $4e({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){_(this,el).has(e.queryHash)||(_(this,el).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=_(this,el).get(e.queryHash);n&&(e.destroy(),n===e&&_(this,el).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Kr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return _(this,el).get(e)}getAll(){return[..._(this,el).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>j9(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>j9(e,r)):n}notify(e){Kr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Kr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Kr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},el=new WeakMap,DW),tl,li,Lp,nl,Fd,MW,W4e=(MW=class extends oee{constructor(e){super();Y(this,nl);Y(this,tl);Y(this,li);Y(this,Lp);this.mutationId=e.mutationId,L(this,li,e.mutationCache),L(this,tl,[]),this.state=e.state||cee(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){_(this,tl).includes(e)||(_(this,tl).push(e),this.clearGcTimeout(),_(this,li).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){L(this,tl,_(this,tl).filter(n=>n!==e)),this.scheduleGc(),_(this,li).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){_(this,tl).length||(this.state.status==="pending"?this.scheduleGc():_(this,li).remove(this))}continue(){var e;return((e=_(this,Lp))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,w,m,b,v,A,C,T,x,N;const n=()=>{de(this,nl,Fd).call(this,{type:"continue"})};L(this,Lp,iee({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(S,D)=>{de(this,nl,Fd).call(this,{type:"failed",failureCount:S,error:D})},onPause:()=>{de(this,nl,Fd).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>_(this,li).canRun(this)}));const r=this.state.status==="pending",s=!_(this,Lp).canStart();try{if(r)n();else{de(this,nl,Fd).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=_(this,li).config).onMutate)==null?void 0:o.call(i,e,this));const D=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));D!==this.state.context&&de(this,nl,Fd).call(this,{type:"pending",context:D,variables:e,isPaused:s})}const S=await _(this,Lp).start();return await((u=(l=_(this,li).config).onSuccess)==null?void 0:u.call(l,S,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,S,e,this.state.context)),await((p=(f=_(this,li).config).onSettled)==null?void 0:p.call(f,S,null,this.state.variables,this.state.context,this)),await((w=(g=this.options).onSettled)==null?void 0:w.call(g,S,null,e,this.state.context)),de(this,nl,Fd).call(this,{type:"success",data:S}),S}catch(S){try{throw await((b=(m=_(this,li).config).onError)==null?void 0:b.call(m,S,e,this.state.context,this)),await((A=(v=this.options).onError)==null?void 0:A.call(v,S,e,this.state.context)),await((T=(C=_(this,li).config).onSettled)==null?void 0:T.call(C,void 0,S,this.state.variables,this.state.context,this)),await((N=(x=this.options).onSettled)==null?void 0:N.call(x,void 0,S,e,this.state.context)),S}finally{de(this,nl,Fd).call(this,{type:"error",error:S})}}finally{_(this,li).runNext(this)}}},tl=new WeakMap,li=new WeakMap,Lp=new WeakMap,nl=new WeakSet,Fd=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Kr.batch(()=>{_(this,tl).forEach(r=>{r.onMutationUpdate(e)}),_(this,li).notify({mutation:this,type:"updated",action:e})})},MW);function cee(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var yu,sc,a_,LW,z4e=(LW=class extends bb{constructor(e={}){super();Y(this,yu);Y(this,sc);Y(this,a_);this.config=e,L(this,yu,new Set),L(this,sc,new Map),L(this,a_,0)}build(e,n,r){const s=new W4e({mutationCache:this,mutationId:++yd(this,a_)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){_(this,yu).add(e);const n=LA(e);if(typeof n=="string"){const r=_(this,sc).get(n);r?r.push(e):_(this,sc).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(_(this,yu).delete(e)){const n=LA(e);if(typeof n=="string"){const r=_(this,sc).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&_(this,sc).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=LA(e);if(typeof n=="string"){const r=_(this,sc).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=LA(e);if(typeof n=="string"){const s=(r=_(this,sc).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Kr.batch(()=>{_(this,yu).forEach(e=>{this.notify({type:"removed",mutation:e})}),_(this,yu).clear(),_(this,sc).clear()})}getAll(){return Array.from(_(this,yu))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>W9(n,r))}findAll(e={}){return this.getAll().filter(n=>W9(e,n))}notify(e){Kr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Kr.batch(()=>Promise.all(e.map(n=>n.continue().catch(pi))))}},yu=new WeakMap,sc=new WeakMap,a_=new WeakMap,LW);function LA(t){var e;return(e=t.options.scope)==null?void 0:e.id}function G9(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const w=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},m=tee(e.options,e.fetchOptions),b=async(v,A,C)=>{if(g)return Promise.reject();if(A==null&&v.pages.length)return Promise.resolve(v);const x=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:A,direction:C?"backward":"forward",meta:e.options.meta};return w(P),P})(),N=await m(x),{maxPages:S}=e.options,D=C?k4e:O4e;return{pages:D(v.pages,N,S),pageParams:D(v.pageParams,A,S)}};if(s&&i.length){const v=s==="backward",A=v?H4e:q9,C={pages:i,pageParams:o},T=A(r,C);a=await b(C,T,v)}else{const v=t??i.length;do{const A=c===0?o[0]??r.initialPageParam:q9(r,a);if(c>0&&A==null)break;a=await b(a,A),c++}while(c<v)}return a};e.options.persister?e.fetchFn=()=>{var g,w;return(w=(g=e.options).persister)==null?void 0:w.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function q9(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function H4e(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Cr,th,nh,o0,a0,rh,c0,l0,UW,G4e=(UW=class{constructor(t={}){Y(this,Cr);Y(this,th);Y(this,nh);Y(this,o0);Y(this,a0);Y(this,rh);Y(this,c0);Y(this,l0);L(this,Cr,t.queryCache||new j4e),L(this,th,t.mutationCache||new z4e),L(this,nh,t.defaultOptions||{}),L(this,o0,new Map),L(this,a0,new Map),L(this,rh,0)}mount(){yd(this,rh)._++,_(this,rh)===1&&(L(this,c0,BU.subscribe(async t=>{t&&(await this.resumePausedMutations(),_(this,Cr).onFocus())})),L(this,l0,bI.subscribe(async t=>{t&&(await this.resumePausedMutations(),_(this,Cr).onOnline())})))}unmount(){var t,e;yd(this,rh)._--,_(this,rh)===0&&((t=_(this,c0))==null||t.call(this),L(this,c0,void 0),(e=_(this,l0))==null||e.call(this),L(this,l0,void 0))}isFetching(t){return _(this,Cr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return _(this,th).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=_(this,Cr).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=_(this,Cr).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(rf(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return _(this,Cr).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=_(this,Cr).get(r.queryHash),i=s==null?void 0:s.state.data,o=R4e(e,i);if(o!==void 0)return _(this,Cr).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Kr.batch(()=>_(this,Cr).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=_(this,Cr).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=_(this,Cr);Kr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=_(this,Cr);return Kr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Kr.batch(()=>_(this,Cr).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(pi).catch(pi)}invalidateQueries(t,e={}){return Kr.batch(()=>(_(this,Cr).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Kr.batch(()=>_(this,Cr).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(pi)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(pi)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=_(this,Cr).build(this,e);return n.isStaleByTime(rf(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(pi).catch(pi)}fetchInfiniteQuery(t){return t.behavior=G9(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(pi).catch(pi)}ensureInfiniteQueryData(t){return t.behavior=G9(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return bI.isOnline()?_(this,th).resumePausedMutations():Promise.resolve()}getQueryCache(){return _(this,Cr)}getMutationCache(){return _(this,th)}getDefaultOptions(){return _(this,nh)}setDefaultOptions(t){L(this,nh,t)}setQueryDefaults(t,e){_(this,o0).set(zg(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[..._(this,o0).values()],n={};return e.forEach(r=>{qC(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){_(this,a0).set(zg(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[..._(this,a0).values()],n={};return e.forEach(r=>{qC(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={..._(this,nh).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=MU(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===UU&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{..._(this,nh).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){_(this,Cr).clear(),_(this,th).clear()}},Cr=new WeakMap,th=new WeakMap,nh=new WeakMap,o0=new WeakMap,a0=new WeakMap,rh=new WeakMap,c0=new WeakMap,l0=new WeakMap,UW),zi,rn,c_,ui,Up,u0,sh,ih,l_,d0,h0,Bp,$p,oh,f0,xn,Nv,U3,B3,$3,F3,j3,W3,z3,lee,BW,q4e=(BW=class extends bb{constructor(e,n){super();Y(this,xn);Y(this,zi);Y(this,rn);Y(this,c_);Y(this,ui);Y(this,Up);Y(this,u0);Y(this,sh);Y(this,ih);Y(this,l_);Y(this,d0);Y(this,h0);Y(this,Bp);Y(this,$p);Y(this,oh);Y(this,f0,new Set);this.options=n,L(this,zi,e),L(this,ih,null),L(this,sh,L3()),this.options.experimental_prefetchInRender||_(this,sh).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(_(this,rn).addObserver(this),V9(_(this,rn),this.options)?de(this,xn,Nv).call(this):this.updateResult(),de(this,xn,F3).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return H3(_(this,rn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return H3(_(this,rn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,de(this,xn,j3).call(this),de(this,xn,W3).call(this),_(this,rn).removeObserver(this)}setOptions(e){const n=this.options,r=_(this,rn);if(this.options=_(this,zi).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof _a(this.options.enabled,_(this,rn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");de(this,xn,z3).call(this),_(this,rn).setOptions(this.options),n._defaulted&&!wI(this.options,n)&&_(this,zi).getQueryCache().notify({type:"observerOptionsUpdated",query:_(this,rn),observer:this});const s=this.hasListeners();s&&K9(_(this,rn),r,this.options,n)&&de(this,xn,Nv).call(this),this.updateResult(),s&&(_(this,rn)!==r||_a(this.options.enabled,_(this,rn))!==_a(n.enabled,_(this,rn))||rf(this.options.staleTime,_(this,rn))!==rf(n.staleTime,_(this,rn)))&&de(this,xn,U3).call(this);const i=de(this,xn,B3).call(this);s&&(_(this,rn)!==r||_a(this.options.enabled,_(this,rn))!==_a(n.enabled,_(this,rn))||i!==_(this,oh))&&de(this,xn,$3).call(this,i)}getOptimisticResult(e){const n=_(this,zi).getQueryCache().build(_(this,zi),e),r=this.createResult(n,e);return K4e(this,r)&&(L(this,ui,r),L(this,u0,this.options),L(this,Up,_(this,rn).state)),r}getCurrentResult(){return _(this,ui)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){_(this,f0).add(e)}getCurrentQuery(){return _(this,rn)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=_(this,zi).defaultQueryOptions(e),r=_(this,zi).getQueryCache().build(_(this,zi),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return de(this,xn,Nv).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),_(this,ui)))}createResult(e,n){var S;const r=_(this,rn),s=this.options,i=_(this,ui),o=_(this,Up),a=_(this,u0),l=e!==r?e.state:_(this,c_),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const D=this.hasListeners(),P=!D&&V9(e,n),$=D&&K9(e,r,n,s);(P||$)&&(d={...d,...aee(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:w}=d;f=d.data;let m=!1;if(n.placeholderData!==void 0&&f===void 0&&w==="pending"){let D;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(D=i.data,m=!0):D=typeof n.placeholderData=="function"?n.placeholderData((S=_(this,h0))==null?void 0:S.state.data,_(this,h0)):n.placeholderData,D!==void 0&&(w="success",f=M3(i==null?void 0:i.data,D,n),h=!0)}if(n.select&&f!==void 0&&!m)if(i&&f===(o==null?void 0:o.data)&&n.select===_(this,l_))f=_(this,d0);else try{L(this,l_,n.select),f=n.select(f),f=M3(i==null?void 0:i.data,f,n),L(this,d0,f),L(this,ih,null)}catch(D){L(this,ih,D)}_(this,ih)&&(p=_(this,ih),f=_(this,d0),g=Date.now(),w="error");const b=d.fetchStatus==="fetching",v=w==="pending",A=w==="error",C=v&&b,T=f!==void 0,N={status:w,fetchStatus:d.fetchStatus,isPending:v,isSuccess:w==="success",isError:A,isInitialLoading:C,isLoading:C,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:b,isRefetching:b&&!v,isLoadingError:A&&!T,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:A&&T,isStale:$U(e,n),refetch:this.refetch,promise:_(this,sh),isEnabled:_a(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const D=G=>{N.status==="error"?G.reject(N.error):N.data!==void 0&&G.resolve(N.data)},P=()=>{const G=L(this,sh,N.promise=L3());D(G)},$=_(this,sh);switch($.status){case"pending":e.queryHash===r.queryHash&&D($);break;case"fulfilled":(N.status==="error"||N.data!==$.value)&&P();break;case"rejected":(N.status!=="error"||N.error!==$.reason)&&P();break}}return N}updateResult(){const e=_(this,ui),n=this.createResult(_(this,rn),this.options);if(L(this,Up,_(this,rn).state),L(this,u0,this.options),_(this,Up).data!==void 0&&L(this,h0,_(this,rn)),wI(n,e))return;L(this,ui,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!_(this,f0).size)return!0;const o=new Set(i??_(this,f0));return this.options.throwOnError&&o.add("error"),Object.keys(_(this,ui)).some(a=>{const c=a;return _(this,ui)[c]!==e[c]&&o.has(c)})};de(this,xn,lee).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&de(this,xn,F3).call(this)}},zi=new WeakMap,rn=new WeakMap,c_=new WeakMap,ui=new WeakMap,Up=new WeakMap,u0=new WeakMap,sh=new WeakMap,ih=new WeakMap,l_=new WeakMap,d0=new WeakMap,h0=new WeakMap,Bp=new WeakMap,$p=new WeakMap,oh=new WeakMap,f0=new WeakMap,xn=new WeakSet,Nv=function(e){de(this,xn,z3).call(this);let n=_(this,rn).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(pi)),n},U3=function(){de(this,xn,j3).call(this);const e=rf(this.options.staleTime,_(this,rn));if(Wg||_(this,ui).isStale||!k3(e))return;const r=eee(_(this,ui).dataUpdatedAt,e)+1;L(this,Bp,setTimeout(()=>{_(this,ui).isStale||this.updateResult()},r))},B3=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(_(this,rn)):this.options.refetchInterval)??!1},$3=function(e){de(this,xn,W3).call(this),L(this,oh,e),!(Wg||_a(this.options.enabled,_(this,rn))===!1||!k3(_(this,oh))||_(this,oh)===0)&&L(this,$p,setInterval(()=>{(this.options.refetchIntervalInBackground||BU.isFocused())&&de(this,xn,Nv).call(this)},_(this,oh)))},F3=function(){de(this,xn,U3).call(this),de(this,xn,$3).call(this,de(this,xn,B3).call(this))},j3=function(){_(this,Bp)&&(clearTimeout(_(this,Bp)),L(this,Bp,void 0))},W3=function(){_(this,$p)&&(clearInterval(_(this,$p)),L(this,$p,void 0))},z3=function(){const e=_(this,zi).getQueryCache().build(_(this,zi),this.options);if(e===_(this,rn))return;const n=_(this,rn);L(this,rn,e),L(this,c_,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},lee=function(e){Kr.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(_(this,ui))}),_(this,zi).getQueryCache().notify({query:_(this,rn),type:"observerResultsUpdated"})})},BW);function V4e(t,e){return _a(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function V9(t,e){return V4e(t,e)||t.state.data!==void 0&&H3(t,e,e.refetchOnMount)}function H3(t,e,n){if(_a(e.enabled,t)!==!1&&rf(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&$U(t,e)}return!1}function K9(t,e,n,r){return(t!==e||_a(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&$U(t,n)}function $U(t,e){return _a(e.enabled,t)!==!1&&t.isStaleByTime(rf(e.staleTime,t))}function K4e(t,e){return!wI(t.getCurrentResult(),e)}var ah,ch,Hi,wu,Ku,kS,G3,$W,Y4e=($W=class extends bb{constructor(n,r){super();Y(this,Ku);Y(this,ah);Y(this,ch);Y(this,Hi);Y(this,wu);L(this,ah,n),this.setOptions(r),this.bindMethods(),de(this,Ku,kS).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=_(this,ah).defaultMutationOptions(n),wI(this.options,r)||_(this,ah).getMutationCache().notify({type:"observerOptionsUpdated",mutation:_(this,Hi),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&zg(r.mutationKey)!==zg(this.options.mutationKey)?this.reset():((s=_(this,Hi))==null?void 0:s.state.status)==="pending"&&_(this,Hi).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=_(this,Hi))==null||n.removeObserver(this)}onMutationUpdate(n){de(this,Ku,kS).call(this),de(this,Ku,G3).call(this,n)}getCurrentResult(){return _(this,ch)}reset(){var n;(n=_(this,Hi))==null||n.removeObserver(this),L(this,Hi,void 0),de(this,Ku,kS).call(this),de(this,Ku,G3).call(this)}mutate(n,r){var s;return L(this,wu,r),(s=_(this,Hi))==null||s.removeObserver(this),L(this,Hi,_(this,ah).getMutationCache().build(_(this,ah),this.options)),_(this,Hi).addObserver(this),_(this,Hi).execute(n)}},ah=new WeakMap,ch=new WeakMap,Hi=new WeakMap,wu=new WeakMap,Ku=new WeakSet,kS=function(){var r;const n=((r=_(this,Hi))==null?void 0:r.state)??cee();L(this,ch,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},G3=function(n){Kr.batch(()=>{var r,s,i,o,a,c,l,u;if(_(this,wu)&&this.hasListeners()){const d=_(this,ch).variables,h=_(this,ch).context;(n==null?void 0:n.type)==="success"?((s=(r=_(this,wu)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=_(this,wu)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=_(this,wu)).onError)==null||c.call(a,n.error,d,h),(u=(l=_(this,wu)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(_(this,ch))})})},$W);function Q4e(t,e){return LU(t,e)}function J4e(t){return JSON.stringify(t,(e,n)=>Z4e(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function Z4e(t){if(!Y9(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!Y9(n)||!n.hasOwnProperty("isPrototypeOf"))}function Y9(t){return Object.prototype.toString.call(t)==="[object Object]"}function RT(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:w,getNextPageParam:m,initialPageParam:b,_optimisticResults:v,enabled:A,notifyOnChangeProps:C,placeholderData:T,refetchInterval:x,refetchIntervalInBackground:N,refetchOnMount:S,refetchOnReconnect:D,refetchOnWindowFocus:P,retryOnMount:$,select:G,staleTime:W,suspense:I,throwOnError:R,config:B,connector:O,query:M,...j}=t;return j}function X4e(t){return{mutationFn(e){return PS(t,e)},mutationKey:["connect"]}}function eFe(t){return{mutationFn(e){return I3(t,e)},mutationKey:["disconnect"]}}function tFe(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return F8e(t,{...i,address:r})},queryKey:nFe(e)}}function nFe(t={}){return["ensName",RT(t)]}function rFe(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return j8e(t,{...o,connector:r})},queryKey:sFe(e)}}function sFe(t={}){const{connector:e,...n}=t;return["walletClient",{...RT(n),connectorUid:e==null?void 0:e.uid}]}function iFe(t,e={}){return{async queryFn({queryKey:n}){const r=e.abi;if(!r)throw new Error("abi is required");const{functionName:s,scopeKey:i,...o}=n[1],a=(()=>{const c=n[1];if(c.address)return{address:c.address};if(c.code)return{code:c.code};throw new Error("address or code is required")})();if(!s)throw new Error("functionName is required");return jX(t,{abi:r,functionName:s,args:o.args,...a,...o})},queryKey:oFe(e)}}function oFe(t={}){const{abi:e,...n}=t;return["readContract",RT(n)]}function aFe(t){return{mutationFn(e){return R3(t,e)},mutationKey:["switchChain"]}}function cFe(t,e={}){return{async queryFn({queryKey:n}){const{hash:r,...s}=n[1];if(!r)throw new Error("hash is required");return GX(t,{...s,onReplaced:e.onReplaced,hash:r})},queryKey:lFe(e)}}function lFe(t={}){const{onReplaced:e,...n}=t;return["waitForTransactionReceipt",RT(n)]}function uFe(t){return{mutationFn(e){return qX(t,e)},mutationKey:["writeContract"]}}var uee=k.createContext(void 0),FU=t=>{const e=k.useContext(uee);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},dFe=({client:t,children:e})=>(k.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),y.jsx(uee.Provider,{value:t,children:e})),dee=k.createContext(!1),hFe=()=>k.useContext(dee);dee.Provider;function fFe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var pFe=k.createContext(fFe()),gFe=()=>k.useContext(pFe),mFe=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},yFe=t=>{k.useEffect(()=>{t.clearReset()},[t])},wFe=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||nee(n,[t.error,r])),bFe=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},vFe=(t,e)=>t.isLoading&&t.isFetching&&!e,EFe=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Q9=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function CFe(t,e,n){var d,h,f,p,g;const r=hFe(),s=gFe(),i=FU(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",bFe(o),mFe(o,s),yFe(s);const a=!i.getQueryCache().get(o.queryHash),[c]=k.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(k.useSyncExternalStore(k.useCallback(w=>{const m=u?c.subscribe(Kr.batchCalls(w)):pi;return c.updateResult(),m},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),k.useEffect(()=>{c.setOptions(o)},[o,c]),EFe(o,l))throw Q9(o,c,s);if(wFe({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!Wg&&vFe(l,r)){const w=a?Q9(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;w==null||w.catch(pi).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function _Fe(t,e){return CFe(t,q4e)}function PT(t,e){const n=FU(),[r]=k.useState(()=>new Y4e(n,t));k.useEffect(()=>{r.setOptions(t)},[r,t]);const s=k.useSyncExternalStore(k.useCallback(o=>r.subscribe(Kr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=k.useCallback((o,a)=>{r.mutate(o,a).catch(pi)},[r]);if(s.error&&nee(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function OT(t){const e=_Fe({...t,queryKeyHashFn:J4e});return e.queryKey=t.queryKey,e}function p1(t={}){const e=yo(t);return k.useSyncExternalStore(n=>q8e(e,{onChange:n}),()=>M9(e),()=>M9(e))}function AFe(t={}){const e=yo(t);return k.useSyncExternalStore(n=>v4e(e,{onChange:n}),()=>L9(e),()=>L9(e))}function SFe(t={}){const e=yo(t);return k.useSyncExternalStore(n=>HX(e,{onChange:n}),()=>U9(e),()=>U9(e))}function xFe(t={}){const{mutation:e}=t,n=yo(t),r=X4e(n),{mutate:s,mutateAsync:i,...o}=PT({...e,...r});return k.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:SFe({config:n})}}function IFe(t={}){const e=yo(t);return k.useSyncExternalStore(n=>zX(e,{onChange:n}),()=>tc(e),()=>tc(e))}function NFe(t={}){const{mutation:e}=t,n=yo(t),r=eFe(n),{mutate:s,mutateAsync:i,...o}=PT({...e,...r});return{...o,connectors:IFe({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function TFe(t={}){const{address:e,query:n={}}=t,r=yo(t),s=p1({config:r}),i=tFe(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return OT({...n,...i,enabled:o})}function RFe(t={}){const e=yo(t);return XX.useSyncExternalStoreWithSelector(n=>K8e(e,{onChange:n}),()=>N3(e,t),()=>N3(e,t),n=>n,(n,r)=>(n==null?void 0:n.uid)===(r==null?void 0:r.uid))}function q3(t={}){const{abi:e,address:n,functionName:r,query:s={}}=t,i=t.code,o=yo(t),a=p1({config:o}),c=iFe(o,{...t,chainId:t.chainId??a}),l=!!((n||i)&&e&&r&&(s.enabled??!0));return OT({...s,...c,enabled:l,structuralSharing:s.structuralSharing??Q4e})}function PFe(t={}){const{mutation:e}=t,n=yo(t),r=aFe(n),{mutate:s,mutateAsync:i,...o}=PT({...e,...r});return{...o,chains:AFe({config:n}),switchChain:s,switchChainAsync:i}}function OFe(t={}){const{query:e={},...n}=t,r=yo(n),s=FU(),{address:i,connector:o,status:a}=f1({config:r}),c=p1({config:r}),l=t.connector??o,{queryKey:u,...d}=rFe(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=k.useRef(i);return k.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),OT({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}function UA(t={}){const{hash:e,query:n={}}=t,r=yo(t),s=p1({config:r}),i=cFe(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return OT({...n,...i,enabled:o})}function BA(t={}){const{mutation:e}=t,n=yo(t),r=uFe(n),{mutate:s,mutateAsync:i,...o}=PT({...e,...r});return{...o,writeContract:s,writeContractAsync:i}}const kFe=Dc({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),J9=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],DFe=({onBack:t,walletAddress:e})=>{const n=kFe(),{open:r}=d1(),[s,i]=k.useState([]),[o,a]=k.useState(!0),[c,l]=k.useState(null),[u,d]=k.useState(J9[0]),[h,f]=k.useState(!1),[p,g]=k.useState(null),[w,m]=k.useState("all"),[b,v]=k.useState(null),A=k.useCallback(async()=>{var N,S;try{if((N=window.solana)!=null&&N.isPhantom){const D=await window.solana.connect();g(D.publicKey.toString());return}if((S=window.solflare)!=null&&S.isSolflare){const D=await window.solflare.connect();g(D.publicKey.toString());return}r()}catch(D){console.error("Failed to connect Solana wallet:",D),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);k.useEffect(()=>{var N,S;(N=window.solana)!=null&&N.publicKey?g(window.solana.publicKey.toString()):(S=window.solflare)!=null&&S.publicKey&&g(window.solflare.publicKey.toString())},[]),k.useEffect(()=>{(async()=>{a(!0);try{let S,D=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}D=p,S=await Ume(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",S.data.length)}else u.api==="opensea"?S=await EL(u.slug,100,D):S=await vL(u.slug,1,100,D);w==="owned"&&p&&(console.log("Filtering for owner:",p),S.data.some($=>$.owners&&$.owners.length>0)?S.data=S.data.filter($=>$.owners.some(W=>W.owner_of&&W.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),v("Owner data not available for this Solana collection. Showing all NFTs."))),i(S.data)}catch(S){console.error(S)}finally{a(!1)}})()},[e,u,p,w]),k.useEffect(()=>{h&&A()},[h,A]);const C=async N=>{if(a(!0),u.api==="opensea"&&u.chain)try{const S=await FV(u.chain,N.address,N.token_id.toString()),D={...N,attributes:JSON.stringify(S.traits||[])};l(D)}catch(S){console.error("Failed to fetch full NFT details",S),l(N)}else l(N);a(!1)},T=()=>{if(!c)return null;let N=[];try{N=JSON.parse(c.attributes||"[]")}catch(S){console.error("Failed to parse NFT attributes:",S)}return y.jsxs("div",{className:n.detailView,children:[y.jsx("img",{src:c.image,alt:c.name}),y.jsx("h2",{children:c.name}),y.jsx("h4",{children:"Traits:"}),y.jsx("ul",{children:N.map((S,D)=>y.jsxs("li",{children:[y.jsxs("strong",{children:[S.trait_type,":"]})," ",S.value]},D))})]})},x=()=>y.jsxs(y.Fragment,{children:[y.jsx("div",{className:n.collectionSelector,children:J9.map(N=>y.jsx("button",{className:`${n.collectionButton} ${u.slug===N.slug?"active":""}`,onClick:()=>d(N),children:N.name},N.slug))}),y.jsxs("div",{className:n.content,children:[y.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[y.jsx("button",{onClick:()=>m("all"),style:{background:w==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:w==="all"?"white":"black"},children:"All NFTs"}),y.jsx("button",{onClick:()=>m("owned"),disabled:!e&&!p,style:{background:w==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:w==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&y.jsx("button",{onClick:()=>{A()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),b&&y.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:b}),u.api==="opensea-solana"&&!p&&y.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?y.jsx("div",{className:n.loading,children:"Loading NFTs..."}):y.jsx("div",{className:n.grid,children:s.map(N=>{let S=N.image||N.image_url||N.image_url_shrunk||"/assets/pixelawb.png";return y.jsxs("div",{className:n.gridItem,onClick:()=>void C(N),children:[y.jsx("img",{src:S,alt:N.name,onError:D=>{D.currentTarget.src!==N.image_url&&N.image_url?D.currentTarget.src=N.image_url:D.currentTarget.src!==N.image_url_shrunk&&N.image_url_shrunk?D.currentTarget.src=N.image_url_shrunk:D.currentTarget.src="/assets/pixelawb.png"}}),y.jsx("span",{children:N.name})]},N.id)})})]})]});return y.jsxs("div",{className:n.galleryContainer,children:[y.jsxs("header",{className:n.header,children:[y.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),y.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),y.jsx("div",{className:n.content,children:o?y.jsx("p",{className:n.loading,children:"Loading..."}):c?T():x()})]})},MFe=Dc({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),Za=({isOpen:t,onClose:e,title:n,children:r})=>{const s=MFe();return t?y.jsx("div",{className:s.overlay,children:y.jsxs("div",{className:s.popup,children:[y.jsxs("div",{className:s.titleBar,children:[y.jsx("span",{children:n}),y.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:""})]}),y.jsx("div",{className:s.content,children:r})]})}):null},LFe=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=k.useState([]),[i,o]=k.useState(!1),[a,c]=k.useState(!1),[l,u]=k.useState({}),[d,h]=k.useState(null),{data:f}=OFe();k.useEffect(()=>{t&&n&&p()},[t,n]);const p=async()=>{o(!0),h(null);try{const A=await BV(n);s(A);const C={};A.forEach(T=>{C[T.id]=0}),u(C)}catch(A){h(A.message)}finally{o(!1)}},g=(A,C)=>{u(T=>({...T,[A]:Math.max(0,C)}))},w=async()=>{const A=Object.entries(l).filter(([,C])=>C>0).map(([C,T])=>({id:C,quantity:T}));if(A.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}c(!0),h(null);try{const C=await $V(n,A);if(C.success&&C.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const T=await f.sendTransaction({to:C.mintTransaction.to,value:BigInt(C.mintTransaction.value),data:C.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${T}`),e()}catch(T){h("Transaction failed: "+T.message)}}else throw new Error(C.message||"Could not retrieve minting transaction.")}catch(C){h("Minting failed: "+C.message)}finally{c(!1)}},m=(A,C)=>`${parseFloat(A)} ${C}`,b={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},v={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return y.jsxs(Za,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&y.jsx("div",{style:v,children:d}),i?y.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?y.jsx("div",{children:"No eligible invite lists found for your wallet."}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{style:{marginBottom:"20px"},children:[y.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(A=>y.jsxs("div",{style:b,children:[y.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:A.name}),y.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",m(A.token_price,A.currency_symbol)]}),y.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",A.wallet_limit===4294967295?"Unlimited":A.wallet_limit," per wallet"]}),y.jsx("input",{type:"number",min:0,max:A.wallet_limit===4294967295?void 0:A.wallet_limit,value:l[A.id]||"",onChange:C=>g(A.id,parseInt(C.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),y.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},A.id))]}),y.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:w,disabled:a,children:a?"Minting...":"Mint"})]})]})},UFe=Dc({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),BFe=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],$Fe=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],FFe=()=>{const t=UFe(),{open:e}=d1(),{address:n,isConnected:r}=f1(),{isPending:s}=xFe(),{disconnect:i}=NFe(),{data:o}=TFe({address:n}),[a,c]=k.useState("main"),[l,u]=k.useState(!1),[d,h]=k.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=k.useState(!1),[g,w]=k.useState(!1),[m,b]=k.useState(!1),[v,A]=k.useState(!1),[C,T]=k.useState(!1),[x,N]=k.useState(!1),[S,D]=k.useState(!1),[P,$]=k.useState(!1),[G,W]=k.useState(!1),[I,R]=k.useState(!1),[B,O]=k.useState(!1),[M,j]=k.useState(!1),V=[{label:"Mint",icon:"/assets/mint.gif",action:()=>w(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>b(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>A(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>T(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],te=ce=>{ce.disabled||ce.action()};if(k.useEffect(()=>{const ce=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(ce)},[]),k.useEffect(()=>{u(!0)},[]),a==="gallery")return y.jsx(DFe,{onBack:()=>c("main"),walletAddress:n||void 0});function Z({open:ce,onClose:ge,title:Me,nfts:it}){const Je=bt=>{switch(bt){case"lawbsters":N(!0);break;case"lawbstarz":D(!0);break;case"pixelawbs":$(!0);break;case"halloween":W(!0);break;case"lawbstation":R(!0);break;case"nexus":O(!0);break}};return y.jsx(Za,{isOpen:ce,onClose:ge,title:Me,children:y.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:it.map(bt=>y.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>Je(bt.id),children:[y.jsx("img",{src:bt.image,alt:bt.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),y.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:bt.name}),y.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:bt.description})]},bt.id))})})}function X({open:ce,onClose:ge}){return ce?y.jsxs(Za,{isOpen:ce,onClose:ge,title:"$LAWB",children:[y.jsx("h1",{style:{marginBottom:"10px"},children:y.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:" $LAWB"})}),y.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",y.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),y.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),y.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),y.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),y.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),y.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, visit ",y.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),y.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",y.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),y.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),y.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:y.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}):null}return y.jsxs("div",{className:t.mobileContainer,children:[y.jsx("header",{className:t.header,children:y.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),y.jsx("div",{className:t.iconGrid,children:V.map(ce=>y.jsxs("div",{className:t.icon,onClick:()=>te(ce),children:[y.jsx("img",{src:ce.icon,alt:ce.label}),y.jsx("span",{children:ce.label})]},ce.label))}),l&&y.jsxs(Za,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",y.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",y.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),y.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",y.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),y.jsx("p",{style:{marginBottom:"10px"},children:y.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&y.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:y.jsxs("div",{className:t.menuModal,onClick:ce=>ce.stopPropagation(),children:[y.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"GeckoTerminal"}),y.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),y.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),y.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),y.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),y.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),y.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),y.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),y.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),y.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),j(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),y.jsx(LFe,{isOpen:g,onClose:()=>w(!1),walletAddress:n||""}),y.jsx(Z,{open:m,onClose:()=>b(!1),title:"EVM NFT'S FOLDER",nfts:BFe}),y.jsx(Z,{open:v,onClose:()=>A(!1),title:"SOL NFTS FOLDER",nfts:$Fe}),y.jsx(X,{open:C,onClose:()=>T(!1)}),y.jsxs(Za,{isOpen:x,onClose:()=>N(!1),title:"Lawbsters",children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",y.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),y.jsx("p",{children:"Chain: Ethereum"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",y.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",y.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),y.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),y.jsxs(Za,{isOpen:S,onClose:()=>D(!1),title:"Lawbstarz",children:[y.jsxs("p",{style:{marginBottom:"10px"},children:[" LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER  666x PREMIUM PFP COLLECTION  LAWBSTARZ IS A MUSIC NFT  LAWBSTARZ IS AN ",y.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE  LAWBSTARZ IS INSPIRED BY ",y.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"}),"  LED BY NETWORK SPIRITUALITY  666 ",y.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",y.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 "]}),y.jsx("p",{children:"Chain: Ethereum"}),y.jsxs("p",{children:["Collect on ",y.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),y.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),y.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),y.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),y.jsxs(Za,{isOpen:P,onClose:()=>$(!1),title:"Pixelawbs",children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",y.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{$(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",y.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),y.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",y.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),y.jsxs(Za,{isOpen:G,onClose:()=>W(!1),title:"A Lawbster Halloween",children:[y.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),y.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),y.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",y.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),y.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),y.jsxs(Za,{isOpen:I,onClose:()=>R(!1),title:"Lawbstation",children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",y.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),y.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),y.jsx("p",{style:{marginBottom:"10px"},children:y.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),y.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),y.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),y.jsxs(Za,{isOpen:B,onClose:()=>O(!1),title:"Nexus",children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",y.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),y.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),y.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),y.jsx(Za,{isOpen:M,onClose:()=>j(!1),title:"Meme Generator",children:y.jsx(SX,{})}),y.jsxs("div",{className:t.taskbar,children:[y.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),y.jsxs("div",{className:t.walletStatus,children:[y.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),y.jsx("span",{className:t.clock,children:d})]})]})};function jFe(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=k.useState(e(t));function s(){r(e(t))}return k.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}const vI={id:1992,name:"Sanko Testnet",network:"sanko-testnet",nativeCurrency:{decimals:18,name:"tDMT",symbol:"tDMT"},rpcUrls:{default:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]},public:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}},blockExplorers:{default:{name:"SankoScan",url:"https://testnet.sankoscan.io"}}},EI={id:1996,name:"Sanko",network:"sanko",nativeCurrency:{decimals:18,name:"DMT",symbol:"DMT"},rpcUrls:{default:{http:["https://mainnet.sanko.xyz"]},public:{http:["https://mainnet.sanko.xyz"]}},blockExplorers:{default:{name:"SankoScan",url:"https://explorer.sanko.xyz"}}},WFe=YX({chains:[pI,fI,vI,EI],transports:{[pI.id]:Ia(),[fI.id]:Ia(),[vI.id]:Ia("https://sanko-arb-sepolia.rpc.caldera.xyz/http"),[EI.id]:Ia("https://mainnet.sanko.xyz")}}),zFe=Symbol(),Z9=Object.getPrototypeOf,V3=new WeakMap,HFe=t=>t&&(V3.has(t)?V3.get(t):Z9(t)===Object.prototype||Z9(t)===Array.prototype),GFe=t=>HFe(t)&&t[zFe]||null,X9=(t,e=!0)=>{V3.set(t,e)},CI={},jU=t=>typeof t=="object"&&t!==null,qFe=t=>jU(t)&&!g1.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),hee=(t,e)=>{const n=K3.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return X9(r,!0),K3.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(g1.has(i))X9(i,!1);else if(wf.has(i)){const[c,l]=wf.get(i);a.value=hee(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},VFe=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(e7(l,o)||VC.has(o)&&e7(l,VC.get(o))))return!0;n(i),jU(o)&&(o=GFe(o)||o);const u=!wf.has(o)&&YFe(o)?cr(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),wf=new WeakMap,g1=new WeakSet,K3=new WeakMap,Tv=[1,1],VC=new WeakMap;let e7=Object.is,KFe=(t,e)=>new Proxy(t,e),YFe=qFe,QFe=hee,JFe=VFe;function cr(t={}){if(!jU(t))throw new Error("object required");const e=VC.get(t);if(e)return e;let n=Tv[0];const r=new Set,s=(w,m=++Tv[0])=>{n!==m&&(n=m,r.forEach(b=>b(w,m)))};let i=Tv[1];const o=(w=++Tv[1])=>(i!==w&&!r.size&&(i=w,c.forEach(([m])=>{const b=m[1](w);b>n&&(n=b)})),n),a=w=>(m,b)=>{const v=[...m];v[1]=[w,...v[1]],s(v,b)},c=new Map,l=(w,m)=>{const b=!g1.has(m)&&wf.get(m);if(b){if((CI?"production":void 0)!=="production"&&c.has(w))throw new Error("prop listener already exists");if(r.size){const v=b[2](a(w));c.set(w,[b,v])}else c.set(w,[b])}},u=w=>{var m;const b=c.get(w);b&&(c.delete(w),(m=b[1])==null||m.call(b))},d=w=>(r.add(w),r.size===1&&c.forEach(([b,v],A)=>{if((CI?"production":void 0)!=="production"&&v)throw new Error("remove already exists");const C=b[2](a(A));c.set(A,[b,C])}),()=>{r.delete(w),r.size===0&&c.forEach(([b,v],A)=>{v&&(v(),c.set(A,[b]))})});let h=!0;const f=JFe(()=>h,l,u,s),p=KFe(t,f);VC.set(t,p);const g=[t,o,d];return wf.set(p,g),Reflect.ownKeys(t).forEach(w=>{const m=Object.getOwnPropertyDescriptor(t,w);"value"in m&&m.writable&&(p[w]=t[w])}),h=!1,p}function fo(t,e,n){const r=wf.get(t);(CI?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function KC(t){const e=wf.get(t);(CI?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return QFe(n,r())}function Dw(t){return g1.add(t),t}function ZFe(){return{proxyStateMap:wf,refSet:g1,snapCache:K3,versionHolder:Tv,proxyCache:VC}}function Ti(t,e,n,r){let s=t[e];return fo(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:XFe,snapCache:eje}=ZFe(),$A=t=>XFe.has(t);function tje(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=eje.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return $A(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!$A(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!$A(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!$A(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,h)=>{l(this.data[d],h,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=cr(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var t7={};const he={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof t7<"u"?t7.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},_I={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=he.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},nje={bigNumber(t){return t?new vl(t):new vl(0)},multiply(t,e){if(t===void 0||e===void 0)return new vl(0);const n=new vl(t),r=new vl(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},rje=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],sje=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],ije=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],oje={getERC20Abi:t=>he.USDT_CONTRACT_ADDRESSES.includes(t)?ije:rje,getSwapAbi:()=>sje},Oh={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},It={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function BO(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const vt={setItem(t,e){Rv()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Rv())return localStorage.getItem(t)||void 0},removeItem(t){Rv()&&localStorage.removeItem(t)},clear(){Rv()&&localStorage.clear()}};function Rv(){return typeof window<"u"&&typeof localStorage<"u"}function AI(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const bi={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,NAMES_SUPPORTED_CHAIN_NAMESPACES:[he.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,DEFAULT_REMOTE_FEATURES:{socials:["google","x","discord","farcaster","github","apple","facebook"]},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},Ze={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Ze.getActiveNamespace(),e=Ze.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{vt.setItem(It.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=vt.getItem(It.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{vt.removeItem(It.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{vt.setItem(It.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{vt.setItem(It.ACTIVE_CAIP_NETWORK_ID,t),Ze.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return vt.getItem(It.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{vt.removeItem(It.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=BO(t);vt.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Ze.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),vt.setItem(It.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=vt.getItem(It.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=BO(t);vt.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return vt.getItem(It.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=BO(t);return vt.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{vt.setItem(It.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return vt.getItem(It.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{vt.removeItem(It.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return vt.getItem(It.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=vt.getItem(It.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{vt.setItem(It.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return vt.getItem(It.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=vt.getItem(It.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));vt.setItem(It.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Ze.getConnectedNamespaces();e.includes(t)||(e.push(t),Ze.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Ze.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),Ze.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return vt.getItem(It.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{vt.setItem(It.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{vt.removeItem(It.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=vt.getItem(It.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Ze.getBalanceCache();vt.setItem(It.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=Ze.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;Ze.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Ze.getBalanceCache();e[t.caipAddress]=t,vt.setItem(It.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=vt.getItem(It.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Ze.getBalanceCache();vt.setItem(It.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=Ze.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),Ze.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Ze.getNativeBalanceCache();e[t.caipAddress]=t,vt.setItem(It.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=vt.getItem(It.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=Ze.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;Ze.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Ze.getEnsCache();e[t.address]=t,vt.setItem(It.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Ze.getEnsCache();vt.setItem(It.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=vt.getItem(It.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=Ze.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;Ze.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Ze.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},vt.setItem(It.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Ze.getIdentityCache();vt.setItem(It.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{vt.removeItem(It.PORTFOLIO_CACHE),vt.removeItem(It.NATIVE_BALANCE_CACHE),vt.removeItem(It.ENS_CACHE),vt.removeItem(It.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{vt.setItem(It.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=vt.getItem(It.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=Ze.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===he.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};vt.setItem(It.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=vt.getItem(It.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=Ze.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),vt.setItem(It.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=vt.getItem(It.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=Ze.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),vt.setItem(It.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=Ze.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),vt.setItem(It.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(Ze.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},dt={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return dt.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=bi.TEN_SEC_MS:!0},isAllowedRetry(t,e=bi.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(dt.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+bi.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(dt.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!dt.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Ze.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,dt.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return he.W3M_API_URL},getBlockchainApiUrl(){return he.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return he.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?bi.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in he.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function uv(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class m1{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await uv(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await uv(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await uv(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await uv(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await uv(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const aje={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?bi.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(dt.isTelegram()){if(dt.isIos())return t.filter(e=>e!=="google");if(dt.isMac())return t.filter(e=>e!=="x");if(dt.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},gt=cr({features:bi.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:bi.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),Ot={state:gt,subscribeKey(t,e){return Ti(gt,t,e)},setOptions(t){Object.assign(gt,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...gt.remoteFeatures,...t};gt.remoteFeatures=e,(n=gt.remoteFeatures)!=null&&n.socials&&(gt.remoteFeatures.socials=aje.filterSocialsByPlatform(gt.remoteFeatures.socials))},setFeatures(t){if(!t)return;gt.features||(gt.features=bi.DEFAULT_FEATURES);const e={...gt.features,...t};gt.features=e},setProjectId(t){gt.projectId=t},setCustomRpcUrls(t){gt.customRpcUrls=t},setAllWallets(t){gt.allWallets=t},setIncludeWalletIds(t){gt.includeWalletIds=t},setExcludeWalletIds(t){gt.excludeWalletIds=t},setFeaturedWalletIds(t){gt.featuredWalletIds=t},setTokens(t){gt.tokens=t},setTermsConditionsUrl(t){gt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){gt.privacyPolicyUrl=t},setCustomWallets(t){gt.customWallets=t},setIsSiweEnabled(t){gt.isSiweEnabled=t},setIsUniversalProvider(t){gt.isUniversalProvider=t},setSdkVersion(t){gt.sdkVersion=t},setMetadata(t){gt.metadata=t},setDisableAppend(t){gt.disableAppend=t},setEIP6963Enabled(t){gt.enableEIP6963=t},setDebug(t){gt.debug=t},setEnableWalletConnect(t){gt.enableWalletConnect=t},setEnableWalletGuide(t){gt.enableWalletGuide=t},setEnableAuthLogger(t){gt.enableAuthLogger=t},setEnableWallets(t){gt.enableWallets=t},setPreferUniversalLinks(t){gt.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(bi.SIWX_DEFAULTS))t[e]??(t[e]=n);gt.siwx=t},setConnectMethodsOrder(t){gt.features={...gt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){gt.features={...gt.features,walletFeaturesOrder:t}},setSocialsOrder(t){gt.remoteFeatures={...gt.remoteFeatures,socials:t}},setCollapseWallets(t){gt.features={...gt.features,collapseWallets:t}},setEnableEmbedded(t){gt.enableEmbedded=t},setAllowUnsupportedChain(t){gt.allowUnsupportedChain=t},setManualWCControl(t){gt.manualWCControl=t},setEnableNetworkSwitch(t){gt.enableNetworkSwitch=t},setEnableReconnect(t){gt.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(gt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){gt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return gt.universalProviderConfigOverride},getSnapshot(){return KC(gt)}},cje=Object.freeze({enabled:!0,events:[]}),lje=new m1({baseUrl:dt.getAnalyticsUrl(),clientId:null}),uje=5,dje=60*1e3,Pd=cr({...cje}),hje={state:Pd,subscribeKey(t,e){return Ti(Pd,t,e)},async sendError(t,e){if(!Pd.enabled)return;const n=Date.now();if(Pd.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<dje}).length>=uje)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Pd.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=Ot.state;await lje.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:dt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Pd.enabled=!0},disable(){Pd.enabled=!1},clearEvents(){Pd.events=[]}};class Mw extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,Mw.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,Mw):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function n7(t,e){const n=t instanceof Mw?t:new Mw(t instanceof Error?t.message:String(t),e,t);throw hje.sendError(n,n.category),n}function Wa(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return n7(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return n7(a,e)}},n[r]=i}else n[r]=s}),n}var Lw={};const fje="https://secure.walletconnect.org/sdk",pje=(typeof process<"u"&&typeof Lw<"u"?Lw.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||fje,gje=(typeof process<"u"&&typeof Lw<"u"?Lw.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",mje=(typeof process<"u"&&typeof Lw<"u"?Lw.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ye={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Us={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},ml={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},yje={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===ml.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${ml.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===ml.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${ml.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===he.CHAIN.SOLANA&&t===ml.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${ml.COINBASE.url}/dapp?cb_url=${r}`)}},_o=cr({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),wje={state:_o,subscribeNetworkImages(t){return fo(_o.networkImages,()=>t(_o.networkImages))},subscribeKey(t,e){return Ti(_o,t,e)},subscribe(t){return fo(_o,()=>t(_o))},setWalletImage(t,e){_o.walletImages[t]=e},setNetworkImage(t,e){_o.networkImages[t]=e},setChainImage(t,e){_o.chainImages[t]=e},setConnectorImage(t,e){_o.connectorImages={..._o.connectorImages,[t]:e}},setTokenImage(t,e){_o.tokenImages[t]=e},setCurrencyImage(t,e){_o.currencyImages[t]=e}},fc=Wa(wje),bje={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},$O=cr({networkImagePromises:{}}),vje={async fetchWalletImage(t){if(t)return await Et._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||($O.networkImagePromises[t]||($O.networkImagePromises[t]=Et._fetchNetworkImage(t)),await $O.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return fc.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return fc.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return fc.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return fc.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return fc.state.connectorImages[t.imageId]},getChainImage(t){return fc.state.networkImages[bje[t]]}},Od=cr({message:"",variant:"info",open:!1}),Eje={state:Od,subscribeKey(t,e){return Ti(Od,t,e)},open(t,e){const{debug:n}=Ot.state,{shortMessage:r,longMessage:s}=t;n&&(Od.message=r,Od.variant=e,Od.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Od.open=!1,Od.message="",Od.variant="info"}},ep=Wa(Eje),Cje=dt.getAnalyticsUrl(),_je=new m1({baseUrl:Cje,clientId:null}),Aje=["MODAL_CREATED"],su=cr({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),gr={state:su,subscribe(t){return fo(su,()=>t(su))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=Ot.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=En.state.address;if(Aje.includes(t.data.event)||typeof window>"u")return;await _je.post({path:"/e",params:gr.getSdkProperties(),body:{eventId:dt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),su.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===he.HTTP_STATUS_CODES.FORBIDDEN&&!su.reportedErrors.FORBIDDEN&&(ep.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Rv()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),su.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;su.timestamp=Date.now(),su.data=t,(e=Ot.state.features)!=null&&e.analytics&&gr._sendAnalyticsEvent(su)}},Sje=dt.getApiUrl(),Bi=new m1({baseUrl:Sje,clientId:null}),xje=40,r7=4,Ije=20,Lt=cr({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Et={state:Lt,subscribeKey(t,e){return Ti(Lt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=Ot.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return Ot.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Bi.baseUrl}/getWalletImage/${t}`,n=await Bi.getBlob({path:e,params:Et._getSdkProperties()});fc.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Bi.baseUrl}/public/getAssetImage/${t}`,n=await Bi.getBlob({path:e,params:Et._getSdkProperties()});fc.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Bi.baseUrl}/public/getAssetImage/${t}`,n=await Bi.getBlob({path:e,params:Et._getSdkProperties()});fc.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Bi.baseUrl}/public/getCurrencyImage/${t}`,n=await Bi.getBlob({path:e,params:Et._getSdkProperties()});fc.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Bi.baseUrl}/public/getTokenImage/${t}`,n=await Bi.getBlob({path:e,params:Et._getSdkProperties()});fc.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return dt.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===ml.COINBASE.id?!0:Q.state.activeChain==="solana"&&(n.id===ml.SOLFLARE.id||n.id===ml.PHANTOM.id)):t},async fetchProjectConfig(){return(await Bi.get({path:"/appkit/v1/config",params:Et._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Bi.get({path:"/projects/v1/origins",params:Et._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===he.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=he.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=Q.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!vje.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>Et._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=st.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>Et._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Et._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Et._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];Et._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(ml).map(o=>o.id));const r=await Bi.get({path:"/getWallets",params:{...Et._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:Et._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=Ot.state;if(t!=null&&t.length){const e={...Et._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??r7,include:t},{data:n}=await Et.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Et._fetchWalletImage(i))),Lt.featured=r,Lt.allFeatured=r}},async fetchRecommendedWallets(){try{Lt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=Ot.state,r=[...e??[],...n??[]].filter(Boolean),s=Q.getRequestedCaipNetworkIds().join(","),i={page:1,entries:r7,include:t,exclude:r,chains:s},{data:o,count:a}=await Et.fetchWallets(i),c=Ze.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>Et._fetchWalletImage(d))),Lt.recommended=o,Lt.allRecommended=o,Lt.count=a??0}catch{}finally{Lt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=Ot.state,s=Q.getRequestedCaipNetworkIds().join(","),i=[...Lt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:xje,include:e,exclude:i,chains:s},{data:a,count:c}=await Et.fetchWallets(o),l=a.slice(0,Ije).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>Et._fetchWalletImage(u))),Lt.wallets=dt.uniqueBy([...Lt.wallets,...Et._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Lt.count=c>Lt.count?c:Lt.count,Lt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await Et.fetchWallets(e);n&&n.forEach(r=>{Lt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=Ot.state,s=Q.getRequestedCaipNetworkIds().join(",");Lt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await Et.fetchWallets(i);gr.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Et._fetchWalletImage(c)),dt.wait(300)]),Lt.search=Et._filterOutExtensions(o)},initPromise(t,e){const n=Lt.promises[t];return n||(Lt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&Et.initPromise("connectorImages",Et.fetchConnectorImages),e&&Et.initPromise("featuredWallets",Et.fetchFeaturedWallets),n&&Et.initPromise("recommendedWallets",Et.fetchRecommendedWallets),r&&Et.initPromise("networkImages",Et.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=Ot.state.features)!=null&&t.analytics&&Et.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Bi.get({path:"/getAnalyticsConfig",params:Et._getSdkProperties()});Ot.setFeatures({analytics:t})}catch{Ot.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Lt.featured=Lt.allFeatured,Lt.recommended=Lt.allRecommended;return}const e=Q.getRequestedCaipNetworkIds().join(",");Lt.featured=Lt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Lt.recommended=Lt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Lt.filteredWallets=Lt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Lt.filteredWallets=[]},setFilterByNamespace(t){if(!t){Lt.featured=Lt.allFeatured,Lt.recommended=Lt.allRecommended;return}const e=Q.getRequestedCaipNetworkIds().join(",");Lt.featured=Lt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Lt.recommended=Lt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Lt.filteredWallets=Lt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Un=cr({view:"Connect",history:["Connect"],transactionStack:[]}),Nje={state:Un,subscribeKey(t,e){return Ti(Un,t,e)},pushTransactionStack(t){Un.transactionStack.push(t)},popTransactionStack(t){const e=Un.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Pt.goBack();break;case"cancel":s==null||s(),Pt.goBack();break}},push(t,e){t!==Un.view&&(Un.view=t,Un.history.push(t),Un.data=e)},reset(t,e){Un.view=t,Un.history=[t],Un.data=e},replace(t,e){Un.history.at(-1)===t||(Un.view=t,Un.history[Un.history.length-1]=t,Un.data=e)},goBack(){var r;const t=Q.state.activeCaipAddress,e=Pt.state.view==="ConnectingFarcaster",n=!t&&e;if(Un.history.length>1){Un.history.pop();const[s]=Un.history.slice(-1);s&&(t&&s==="Connect"?Un.view="Account":Un.view=s)}else Xn.close();(r=Un.data)!=null&&r.wallet&&(Un.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){En.setFarcasterUrl(void 0,Q.state.activeChain);const a=st.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=KC(Ot.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Un.history.length>1){Un.history=Un.history.slice(0,t+1);const[e]=Un.history.slice(-1);e&&(Un.view=e)}},goBackOrCloseModal(){Pt.state.history.length>1?Pt.goBack():Xn.close()}},Pt=Wa(Nje),iu=cr({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),Y3={state:iu,subscribe(t){return fo(iu,()=>t(iu))},setThemeMode(t){iu.themeMode=t;try{const e=st.getAuthConnector();if(e){const n=Y3.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:AI(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){iu.themeVariables={...iu.themeVariables,...t};try{const e=st.getAuthConnector();if(e){const n=Y3.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:AI(iu.themeVariables,iu.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return KC(iu)}},FA=Wa(Y3),fee={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},gn=cr({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...fee},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),Tje={state:gn,subscribe(t){return fo(gn,()=>{t(gn)})},subscribeKey(t,e){return Ti(gn,t,e)},initialize(t){t.forEach(e=>{const n=Ze.getConnectedConnectorId(e);n&&st.setConnectorId(n,e)})},setActiveConnector(t){t&&(gn.activeConnector=Dw(t))},setConnectors(t){t.filter(s=>!gn.allConnectors.some(i=>i.id===s.id&&st.getConnectorName(i.name)===st.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&gn.allConnectors.push(Dw(s))});const n=st.getEnabledNamespaces(),r=st.getEnabledConnectors(n);gn.connectors=st.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(gn.filterByNamespaceMap).forEach(e=>{gn.filterByNamespaceMap[e]=!1}),t.forEach(e=>{gn.filterByNamespaceMap[e]=!0}),st.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){gn.filterByNamespaceMap[t]=e,st.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=st.getEnabledNamespaces(),e=st.getEnabledConnectors(t),n=st.areAllNamespacesEnabled();gn.connectors=st.mergeMultiChainConnectors(e),n?Et.clearFilterByNamespaces():Et.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(gn.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return gn.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(gn.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=st.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===he.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=st.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===he.CONNECTOR_ID.AUTH){const s=t,i=KC(Ot.state),o=FA.getSnapshot().themeMode,a=FA.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:AI(a,o)}),st.setConnectors([t])}else st.setConnectors([t])},getAuthConnector(t){var r;const e=t||Q.state.activeChain,n=gn.connectors.find(s=>s.id===he.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return gn.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return gn.allConnectors.find(e=>e.id===t)},getConnector(t,e){return gn.allConnectors.filter(r=>r.chain===Q.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=KC(Ot.state),r=FA.getSnapshot().themeMode,s=FA.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:AI(s,r)})},getConnectorsByNamespace(t){const e=gn.allConnectors.filter(n=>n.chain===t);return st.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return Q.checkIfSmartAccountEnabled()&&Wl(t)===Us.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=st.getConnector(t.id,t.rdns);yje.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,Q.state.activeChain),e?Pt.push("ConnectingExternal",{connector:e}):Pt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?st.getConnectorsByNamespace(t):st.mergeMultiChainConnectors(gn.allConnectors)},setFilterByNamespace(t){gn.filterByNamespace=t,gn.connectors=st.getConnectors(t),Et.setFilterByNamespace(t)},setConnectorId(t,e){t&&(gn.activeConnectorIds={...gn.activeConnectorIds,[e]:t},Ze.setConnectedConnectorId(e,t))},removeConnectorId(t){gn.activeConnectorIds={...gn.activeConnectorIds,[t]:void 0},Ze.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return gn.activeConnectorIds[t]},isConnected(t){return t?!!gn.activeConnectorIds[t]:Object.values(gn.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){gn.activeConnectorIds={...fee}}},st=Wa(Tje),Rje=1e3,dv={checkNamespaceConnectorId(t,e){return st.getConnectorId(t)===e},isSocialProvider(t){return bi.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&st.setActiveConnector(e),s==null||s(dt.isMobile()&&t),r){const l=Xn.subscribeKey("open",u=>{u||(Pt.state.view!==r&&Pt.replace(r),l(),a(new Error("Modal closed")))})}const c=Q.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&Xn.close(),c(),o(Oh.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=Q.subscribeKey("activeCaipAddress",s=>{s&&(Xn.close(),r(),e(Oh.parseCaipAddress(s)))});rt.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=En.state.socialWindow,i=En.state.socialProvider,o=!1,a=null;const c=Q.subscribeKey("activeCaipAddress",l=>{l&&(e&&Xn.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===he.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=st.getAuthConnector();if(g&&!o){s&&(s.close(),En.setSocialWindow(void 0,Q.state.activeChain),s=En.state.socialWindow),o=!0;const w=f.data.resultUri;i&&gr.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}});const m=Q.state.activeCaipNetwork;if(await g.provider.connectSocial({uri:w,chainId:m==null?void 0:m.caipNetworkId}),i){Ze.setConnectedSocialProvider(i),await rt.connectExternal({id:g.id,type:g.type,socialUri:w},g.chain);const b=Q.state.activeCaipAddress;if(!b){u(new Error("Failed to connect"));return}l(Oh.parseCaipAddress(b)),gr.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&gr.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&gr.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(En.setSocialProvider(t,Q.state.activeChain),i=En.state.socialProvider,gr.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=Xn.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=st.getAuthConnector();if(p&&!En.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();En.setFarcasterUrl(g,Q.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=st.getAuthConnector();a=dt.returnOpenHref(`${he.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){En.setSocialWindow(a,Q.state.activeChain),s=En.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=Xn.subscribeKey("open",c=>{c||(Pt.state.view!==e&&Pt.replace(e),a(),i(new Error("Modal closed")))})}const o=Q.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&Xn.close(),o(),s(Oh.parseCaipAddress(a)))})})},async updateEmail(){const t=Ze.getConnectedConnectorId(Q.state.activeChain),e=st.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==he.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return Pt.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(Xn.close(),clearInterval(i),o(),r({email:a}))},Rje),o=Xn.subscribeKey("open",a=>{a||(Pt.state.view!=="Connect"&&Pt.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return Q.checkIfSmartAccountEnabled()&&Wl(t)===Us.ACCOUNT_TYPES.EOA}};function pee(){var r,s;const t=((r=Q.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=Q.state.activeCaipNetwork)==null?void 0:s.id)||1,n=bi.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function Wl(t){var n;return(n=Q.getAccountData(t))==null?void 0:n.preferredAccountType}const gee={getConnectionStatus(t,e){const n=st.state.activeConnectorIds[e],r=rt.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=Ot.state.remoteFeatures)!=null&&a.multiWallet),n=st.state.activeConnectorIds[t],r=rt.getConnections(t),i=(rt.state.recentConnections.get(t)??[]).filter(c=>st.getConnectorById(c.connectorId)),o=gee.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},tp=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),zr=cr({...tp}),Pje={state:zr,subscribeKey(t,e){return Ti(zr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=dt.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){zr.message=tp.message,zr.variant=tp.variant,zr.svg=tp.svg,zr.open=tp.open,zr.autoClose=tp.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=tp.autoClose}){zr.open?(zr.open=!1,setTimeout(()=>{zr.message=t,zr.variant=n,zr.svg=e,zr.open=!0,zr.autoClose=r},150)):(zr.message=t,zr.variant=n,zr.svg=e,zr.open=!0,zr.autoClose=r)}},kh=Pje,Qn=cr({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),Oje={state:Qn,subscribe(t){return fo(Qn,()=>t(Qn))},setLastNetworkInView(t){Qn.lastNetworkInView=t},async fetchTransactions(t,e){var n;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Qn.loading=!0;try{const r=await xt.fetchTransactions({account:t,cursor:Qn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=Q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),s=Pv.filterSpamTransactions(r.data),i=Pv.filterByConnectedChain(s),o=[...Qn.transactions,...i];Qn.loading=!1,e==="coinbase"?Qn.coinbaseTransactions=Pv.groupTransactionsByYearAndMonth(Qn.coinbaseTransactions,r.data):(Qn.transactions=o,Qn.transactionsByYear=Pv.groupTransactionsByYearAndMonth(Qn.transactionsByYear,i)),Qn.empty=o.length===0,Qn.next=r.next?r.next:void 0}catch{const s=Q.state.activeChain;gr.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:Ot.state.projectId,cursor:Qn.next,isSmartAccount:Wl(s)===Us.ACCOUNT_TYPES.SMART_ACCOUNT}}),kh.showError("Failed to fetch transactions"),Qn.loading=!1,Qn.empty=!0,Qn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=Q.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Qn.next=void 0},resetTransactions(){Qn.transactions=[],Qn.transactionsByYear={},Qn.lastNetworkInView=void 0,Qn.loading=!1,Qn.empty=!1,Qn.next=void 0}},Pv=Wa(Oje,"API_ERROR"),an=cr({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Gf;const kje={state:an,subscribe(t){return fo(an,()=>t(an))},subscribeKey(t,e){return Ti(an,t,e)},_getClient(){return an._client},setClient(t){an._client=Dw(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);rt.syncStorageConnections(e)},syncStorageConnections(t){const e=Ze.getConnections(),n=t??Array.from(Q.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(an.recentConnections);i.set(r,s),an.recentConnections=i}},getConnections(t){return t?an.connections.get(t)??[]:[]},hasAnyConnection(t){const e=rt.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){var t,e,n,r;if(dt.isTelegram()||dt.isSafari()&&dt.isIos()){if(Gf){await Gf,Gf=void 0;return}if(!dt.isPairingExpired(an==null?void 0:an.wcPairingExpiry)){const s=an.wcUri;an.wcUri=s;return}Gf=(e=(t=rt._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),rt.state.status="connecting",await Gf,Gf=void 0,an.wcPairingExpiry=void 0,rt.state.status="connected"}else await((r=(n=rt._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=rt._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&Q.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=rt._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||Q.state.activeChain;e&&st.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;Xn.setLoading(!0,Q.state.activeChain);const n=st.getAuthConnector();n&&(En.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),Ze.setPreferredAccountTypes(Object.entries(Q.state.chains).reduce((s,[i,o])=>{const a=i,c=Wl(a);return c!==void 0&&(s[a]=c),s},{})),await rt.reconnectExternal(n),Xn.setLoading(!1,Q.state.activeChain),gr.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=Q.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=rt._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=rt._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=rt._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=rt._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=rt._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=rt._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=rt._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=rt._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=rt._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=rt._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=rt._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=rt._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){an.wcUri=void 0,an.wcPairingExpiry=void 0,an.wcLinking=void 0,an.recentWallet=void 0,an.status="disconnected",Pv.resetTransactions(),Ze.deleteWalletConnectDeepLink()},resetUri(){an.wcUri=void 0,an.wcPairingExpiry=void 0,Gf=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=rt.state;t&&Ze.setWalletConnectDeepLink(t),e&&Ze.setAppKitRecent(e),gr.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Pt.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){an.wcBasic=t},setUri(t){an.wcUri=t,an.wcPairingExpiry=dt.getPairingExpiry()},setWcLinking(t){an.wcLinking=t},setWcError(t){an.wcError=t,an.buffering=!1},setRecentWallet(t){an.recentWallet=t},setBuffering(t){an.buffering=t},setStatus(t){an.status=t},setIsSwitchingConnection(t){an.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=rt._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new Mw("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(an.connections);n.set(e,t),an.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=En.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&dv.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await rt.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=st.getConnectorById(t.connectorId),s=t.connectorId===he.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await rt.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await rt.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=st.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===he.CONNECTOR_ID.AUTH,a=t.connectorId===he.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&dv.isSocialProvider(i)){const{address:d}=await dv.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){Xn.open({view:"ConnectingFarcaster"})},onConnect(){Pt.replace("ProfileWallets")}});c=d}else{const{address:d}=await dv.connectEmail({closeModalOnConnect:r,onOpen(){Xn.open({view:"EmailLogin"})},onConnect(){Pt.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await dv.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){Xn.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){Pt.replace("ProfileWallets")}});c=d}else{const d=await rt.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await rt.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=En.getCaipAddress(n);if(o){const{address:c}=Oh.parseCaipAddress(o);i=c}const a=gee.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await rt.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await rt.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},rt=Wa(kje),Xm=cr({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Qy={state:Xm,subscribe(t){return fo(Xm,()=>t(Xm))},subscribeOpen(t){return Ti(Xm,"open",t)},set(t){Object.assign(Xm,{...Xm,...t})}},Dje={async getTokenList(){var r;const t=Q.state.activeCaipNetwork,e=await xt.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=Q.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(rt==null?void 0:rt.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await xt.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await xt.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=rt.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await WU.getMyTokensWithBalance(t);return En.setTokenBalance(e,Q.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:pee(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Rn=cr({tokenBalances:[],loading:!1}),Mje={state:Rn,subscribe(t){return fo(Rn,()=>t(Rn))},subscribeKey(t,e){return Ti(Rn,t,e)},setToken(t){t&&(Rn.token=Dw(t))},setTokenAmount(t){Rn.sendTokenAmount=t},setReceiverAddress(t){Rn.receiverAddress=t},setReceiverProfileImageUrl(t){Rn.receiverProfileImageUrl=t},setReceiverProfileName(t){Rn.receiverProfileName=t},setNetworkBalanceInUsd(t){Rn.networkBalanceInUSD=t},setLoading(t){Rn.loading=t},async sendToken(){var t;try{switch(_n.setLoading(!0),(t=Q.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await _n.sendEvmToken();return;case"solana":await _n.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{_n.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=Q.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=Wl(t);if(!_n.state.sendTokenAmount||!_n.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!_n.state.token)throw new Error("A token is required");(n=_n.state.token)!=null&&n.address?(gr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Us.ACCOUNT_TYPES.SMART_ACCOUNT,token:_n.state.token.address,amount:_n.state.sendTokenAmount,network:((r=Q.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await _n.sendERC20Token({receiverAddress:_n.state.receiverAddress,tokenAddress:_n.state.token.address,sendTokenAmount:_n.state.sendTokenAmount,decimals:_n.state.token.quantity.decimals})):(gr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Us.ACCOUNT_TYPES.SMART_ACCOUNT,token:_n.state.token.symbol||"",amount:_n.state.sendTokenAmount,network:((s=Q.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await _n.sendNativeToken({receiverAddress:_n.state.receiverAddress,sendTokenAmount:_n.state.sendTokenAmount,decimals:_n.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Rn.loading=!0;const e=(i=Q.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=Q.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=Q.state.activeCaipAddress,s=r?dt.getPlainAddress(r):void 0;if(Rn.lastRetry&&!dt.isAllowedRetry(Rn.lastRetry,30*bi.ONE_SEC_MS))return Rn.loading=!1,[];try{if(s&&e&&n){const a=await WU.getMyTokensWithBalance();return Rn.tokenBalances=a,Rn.lastRetry=void 0,a}}catch(a){Rn.lastRetry=Date.now(),t==null||t(a),kh.showError("Token Balance Unavailable")}finally{Rn.loading=!1}return[]},fetchNetworkBalance(){if(Rn.tokenBalances.length===0)return;const t=Dje.mapBalancesToSwapTokens(Rn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===pee());e&&(Rn.networkBalanceInUSD=e?nje.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;Pt.pushTransactionStack({});const e=t.receiverAddress,n=En.state.address,r=rt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await rt.sendTransaction({chainNamespace:he.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),gr.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Wl("eip155")===Us.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=_n.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=Q.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=rt._getClient())==null||a.updateBalance("eip155"),_n.resetSend()},async sendERC20Token(t){Pt.pushTransactionStack({onSuccess(){Pt.replace("Account")}});const e=rt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(En.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=dt.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await rt.writeContract({fromAddress:En.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:oje.getERC20Abi(n),chainNamespace:he.CHAIN.EVM}),_n.resetSend()}},async sendSolanaToken(){var t;if(!_n.state.sendTokenAmount||!_n.state.receiverAddress)throw new Error("An amount and receiver address are required");Pt.pushTransactionStack({onSuccess(){Pt.replace("Account")}}),await rt.sendTransaction({chainNamespace:"solana",to:_n.state.receiverAddress,value:_n.state.sendTokenAmount}),(t=rt._getClient())==null||t.updateBalance("solana"),_n.resetSend()},resetSend(){Rn.token=void 0,Rn.sendTokenAmount=void 0,Rn.receiverAddress=void 0,Rn.receiverProfileImageUrl=void 0,Rn.receiverProfileName=void 0,Rn.loading=!1,Rn.tokenBalances=[]}},_n=Wa(Mje),FO={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},jA={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Re=cr({chains:tje(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),Lje={state:Re,subscribe(t){return fo(Re,()=>{t(Re)})},subscribeKey(t,e){return Ti(Re,t,e)},subscribeChainProp(t,e,n){let r;return fo(Re.chains,()=>{var i;const s=n||Re.activeChain;if(s){const o=(i=Re.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=Ze.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=Ot.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Re.noAdapters=!0),Re.noAdapters||(Re.activeChain=a==null?void 0:a.namespace,Re.activeCaipNetwork=i,Q.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Re.activeChain&&Qy.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),h=Ze.getPreferredAccountTypes()||{},f={...Ot.state.defaultAccountTypes,...h};Q.state.chains.set(u,{namespace:u,networkState:cr({...jA,caipNetwork:d==null?void 0:d[0]}),accountState:cr({...FO,preferredAccountType:f[u]}),caipNetworks:d??[],...n}),Q.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Re.activeChain===t){const r=Array.from(Re.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&Q.setActiveCaipNetwork(s)}}Re.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Re.chains.set(t.namespace,{namespace:t.namespace,networkState:{...jA,caipNetwork:r[0]},accountState:FO,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),Q.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Re.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Re.chains.set(t.chainNamespace,{...e,caipNetworks:r}),Q.setRequestedCaipNetworks(r,t.chainNamespace),st.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Re.chains.get(t);if(n){const o=((r=Re.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&Q.setActiveCaipNetwork(n.caipNetworks[0]),Re.chains.set(t,{...n,caipNetworks:a}),Q.setRequestedCaipNetworks(a||[],t),a.length===0&&st.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Re.chains.get(t);n&&(n.networkState={...n.networkState||jA,...e},Re.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Re.chains.get(t);if(r){const s={...r.accountState||FO,...e};Re.chains.set(t,{...r,accountState:s}),(Re.chains.size===1||Re.activeChain===t)&&(e.caipAddress&&(Re.activeCaipAddress=e.caipAddress),En.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Re.chains.get(t);if(n){const r={...n.networkState||jA,...e};Re.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){Q.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;Re.activeChain=t;const e=t?Re.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Re.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Re.activeCaipNetwork=n,Q.setChainNetworkData(t,{caipNetwork:n}),Ze.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Qy.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Re.activeChain!==t.chainNamespace&&Q.setIsSwitchingNamespace(!0);const e=Re.chains.get(t.chainNamespace);Re.activeChain=t.chainNamespace,Re.activeCaipNetwork=t,Q.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Re.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Re.activeCaipAddress=void 0,Q.setAccountProp("caipAddress",Re.activeCaipAddress,t.chainNamespace),e&&En.replaceState(e.accountState),_n.resetSend(),Qy.set({activeChain:Re.activeChain,selectedNetworkId:(i=Re.activeCaipNetwork)==null?void 0:i.caipNetworkId}),Ze.setActiveCaipNetworkId(t.caipNetworkId),!Q.checkIfSupportedNetwork(t.chainNamespace)&&Ot.state.enableNetworkSwitch&&!Ot.state.allowUnsupportedChain&&!rt.state.wcBasic&&Q.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Re.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==Q.state.activeChain,n=(s=Q.getNetworkData(t))==null?void 0:s.caipNetwork,r=Q.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await Q.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=Q.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=Q.state.chains.get(e),r=!((i=n==null?void 0:n.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=Re.activeCaipNetwork)==null?void 0:a.id)})),s=Q.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&Xn.close()}catch{Pt.goBack()}gr.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Re.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=Re.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Re.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Re.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Re.activeChain;if(e&&(n=e),!n)return;const r=(s=Re.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Re.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Re.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return dt.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Re.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=Q.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){Q.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=Q.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));st.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Re.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=Q.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=Re.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:Re.activeCaipNetwork},getActiveCaipAddress(){return Re.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Re.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=Q.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());Q.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Re.activeCaipNetwork,r=Q.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Re.activeChain)return!0;const e=Q.getRequestedCaipNetworks(Re.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){Q.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=_I.caipNetworkIdToNumber((r=Re.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Re.activeChain;if(!e||!t)return!1;const n=Q.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){Xn.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Re.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&bi.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){Q.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=Q.getAccountProp("preferredAccountType",e);Re.activeCaipAddress=void 0,Q.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),st.removeConnectorId(e)},setIsSwitchingNamespace(t){Re.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Re.chains.forEach(s=>{he.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Re.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=Q.state.chains.get(t))==null?void 0:e.accountState:En.state},getNetworkData(t){var n;const e=t||Re.activeChain;if(e)return(n=Q.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=Q.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=st.state.filterByNamespace;return(t?[Re.chains.get(t)]:Array.from(Re.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?Q.getRequestedCaipNetworks(t):Q.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){Re.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Re.lastConnectedSIWECaipNetwork}},Q=Wa(Lje),Uje={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},mee=dt.getBlockchainApiUrl(),$i=cr({clientId:null,api:new m1({baseUrl:mee,clientId:null}),supportedChains:{http:[],ws:[]}}),xt={state:$i,async get(t){const{st:e,sv:n}=xt.getSdkProperties(),r=Ot.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return $i.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=Ot.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{$i.supportedChains.http.length||await xt.getSupportedNetworks()}catch{return!1}return $i.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await xt.get({path:"v1/supported-chains"});return $i.supportedChains=t,t}catch{return $i.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await xt.isNetworkSupported(e))return{avatar:"",name:""};const r=Ze.getIdentityFromCacheForAddress(t);if(r)return r;const s=await xt.get({path:`/v1/identity/${t}`,params:{sender:Q.state.activeCaipAddress?dt.getPlainAddress(Q.state.activeCaipAddress):void 0}});return Ze.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await xt.isNetworkSupported((a=Q.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?xt.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await xt.isNetworkSupported((o=Q.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?xt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await xt.isNetworkSupported((n=Q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?xt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await xt.isNetworkSupported((n=Q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?$i.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:Ot.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await xt.isNetworkSupported((r=Q.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?xt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=xt.getSdkProperties();if(!await xt.isNetworkSupported((s=Q.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return xt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await xt.isNetworkSupported((o=Q.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return $i.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:bi.CONVERT_SLIPPAGE_TOLERANCE},projectId:Ot.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=xt.getSdkProperties();if(!await xt.isNetworkSupported((o=Q.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return xt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=xt.getSdkProperties();if(!await xt.isNetworkSupported((l=Q.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return kh.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Ze.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await xt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return Ze.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await xt.isNetworkSupported((n=Q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?xt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await xt.isNetworkSupported((n=Q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?xt.get({path:`/v1/profile/reverse/${t}`,params:{sender:En.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await xt.isNetworkSupported((n=Q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?xt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await xt.isNetworkSupported((i=Q.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?$i.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await xt.isNetworkSupported((a=Q.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await $i.api.post({path:"/v1/generators/onrampurl",params:{projectId:Ot.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await xt.isNetworkSupported((e=Q.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await xt.get({path:"/v1/onramp/options"})}catch{return Uje}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await xt.isNetworkSupported((s=Q.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await $i.api.post({path:"/v1/onramp/quote",params:{projectId:Ot.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await xt.isNetworkSupported((n=Q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?xt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await xt.isNetworkSupported((s=Q.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?$i.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:Ot.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){$i.clientId=t,$i.api=new m1({baseUrl:mee,clientId:t})}},jO={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return im(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},WU={async getMyTokensWithBalance(t){const e=En.state.address,n=Q.state.activeCaipNetwork,r=st.getConnectorId("eip155")===he.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=Ze.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===he.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await xt.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=jO.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await rt.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await rt.walletGetAssets({account:t,chainFilter:[s]});if(!jO.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>jO.createBalance(l,e.caipNetworkId));return Ze.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},qc=cr({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),Bje={state:qc,replaceState(t){t&&Object.assign(qc,Dw(t))},subscribe(t){return Q.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return Q.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){Q.setAccountProp("status",t,e)},getCaipAddress(t){return Q.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?dt.getPlainAddress(t):void 0;e===Q.state.activeChain&&(Q.state.activeCaipAddress=t),Q.setAccountProp("caipAddress",t,e),Q.setAccountProp("address",n,e)},setBalance(t,e,n){Q.setAccountProp("balance",t,n),Q.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){Q.setAccountProp("profileName",t,e)},setProfileImage(t,e){Q.setAccountProp("profileImage",t,e)},setUser(t,e){Q.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){Q.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){Q.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){Q.setAccountProp("currentTab",t,Q.state.activeChain)},setTokenBalance(t,e){t&&Q.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){Q.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=Q.getAccountProp("addressLabels",n)||new Map;r.set(t,e),Q.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=Q.getAccountProp("addressLabels",e)||new Map;n.delete(t),Q.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){Q.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){Q.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&Q.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){Q.setAccountProp("socialWindow",t?Dw(t):void 0,e)},setFarcasterUrl(t,e){Q.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;qc.balanceLoading=!0;const e=(i=Q.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=Q.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=Q.state.activeCaipAddress,s=r?dt.getPlainAddress(r):void 0;if(qc.lastRetry&&!dt.isAllowedRetry(qc.lastRetry,30*bi.ONE_SEC_MS))return qc.balanceLoading=!1,[];try{if(s&&e&&n){const a=await WU.getMyTokensWithBalance();return En.setTokenBalance(a,n),qc.lastRetry=void 0,qc.balanceLoading=!1,a}}catch(a){qc.lastRetry=Date.now(),t==null||t(a),kh.showError("Token Balance Unavailable")}finally{qc.balanceLoading=!1}return[]},resetAccount(t){Q.resetAccount(t)}},En=Wa(Bje),$je={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=Q.state.activeCaipNetwork,r=Pt.state.data;if(t.id===(n==null?void 0:n.id))return;const i=En.getCaipAddress(Q.state.activeChain),o=t.chainNamespace!==Q.state.activeChain,a=En.getCaipAddress(t.chainNamespace),l=st.getConnectorId(Q.state.activeChain)===he.CONNECTOR_ID.AUTH,u=he.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Pt.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Pt.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Pt.push("SwitchNetwork",{...r,network:t})}},Fi=cr({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),Fje={state:Fi,subscribe(t){return fo(Fi,()=>t(Fi))},subscribeKey(t,e){return Ti(Fi,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,n=Q.state.activeChain,r=e&&e!==n,s=(i=Q.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(rt.state.wcBasic?Et.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Et.prefetch(),st.setFilterByNamespace(t==null?void 0:t.namespace),Xn.setLoading(!0,e),e&&r){const a=((o=Q.getNetworkData(e))==null?void 0:o.caipNetwork)||Q.getRequestedCaipNetworks(e)[0];a&&$je.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=Q.state.noAdapters;Ot.state.manualWCControl||a&&!s?dt.isMobile()?Pt.reset("AllWallets"):Pt.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Pt.reset(t.view,t.data):s?Pt.reset("Account"):Pt.reset("Connect")}Fi.open=!0,Qy.set({open:!0}),gr.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=Ot.state.enableEmbedded,e=!!Q.state.activeCaipAddress;Fi.open&&gr.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Fi.open=!1,Pt.reset("Connect"),Xn.clearLoading(),t?e?Pt.replace("Account"):Pt.push("Connect"):Qy.set({open:!1}),rt.resetUri()},setLoading(t,e){e&&Fi.loadingNamespaceMap.set(e,t),Fi.loading=t,Qy.set({loading:t})},clearLoading(){Fi.loadingNamespaceMap.clear(),Fi.loading=!1},shake(){Fi.shake||(Fi.shake=!0,setTimeout(()=>{Fi.shake=!1},500))}},Xn=Wa(Fje),s7=2147483648,jje={convertEVMChainIdToCoinType(t){if(t>=s7)throw new Error("Invalid chainId");return(s7|t)>>>0}},aa=cr({suggestions:[],loading:!1}),Wje={state:aa,subscribe(t){return fo(aa,()=>t(aa))},subscribeKey(t,e){return Ti(aa,t,e)},async resolveName(t){var e,n;try{return await xt.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await xt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{aa.loading=!0,aa.suggestions=[];const e=await xt.getEnsNameSuggestions(t);return aa.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],aa.suggestions}catch(e){const n=DS.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{aa.loading=!1}},async getNamesForAddress(t){try{if(!Q.state.activeCaipNetwork)return[];const n=Ze.getEnsFromCacheForAddress(t);if(n)return n;const r=await xt.reverseLookupEnsName({address:t});return Ze.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=DS.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=Q.state.activeCaipNetwork,n=En.state.address,r=st.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");aa.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Pt.pushTransactionStack({onCancel(){Pt.replace("RegisterAccountName")}});const i=await rt.signMessage(s);aa.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=jje.convertEVMChainIdToCoinType(Number(o));await xt.registerEnsName({coinType:a,address:n,signature:i,message:s}),En.setProfileName(t,e.chainNamespace),Pt.replace("RegisterAccountNameSuccess")}catch(s){const i=DS.parseEnsApiError(s,`Error registering name ${t}`);throw Pt.replace("RegisterAccountName"),new Error(i)}finally{aa.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},DS=Wa(Wje);let qf=null;const Vd={getSIWX(){return Ot.state.siwx},async initializeIfEnabled(){var i;const t=Ot.state.siwx,e=Q.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(Q.checkIfSupportedNetwork(n))try{if(qf&&await qf,(await t.getSessions(`${n}:${r}`,s)).length)return;await Xn.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),gr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=rt._getClient())==null?void 0:i.disconnect().catch(console.error)),Pt.reset("Connect"),kh.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=Ot.state.siwx,e=dt.getPlainAddress(Q.getActiveCaipAddress()),n=Q.getActiveCaipNetwork(),r=rt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();st.getConnectorId(n.chainNamespace)===he.CONNECTOR_ID.AUTH&&Pt.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),Q.setLastConnectedSIWECaipNetwork(n),Xn.close(),gr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Xn.state.open||Pt.state.view==="ApproveTransaction")&&await Xn.open({view:"SIWXSignMessage"}),kh.showError("Error signing message"),gr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=Q.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,dt.getPlainAddress(Q.getActiveCaipAddress())||""));s&&s.length>0?await Q.switchActiveNetwork(r):await rt.disconnect()}else await rt.disconnect()}else Xn.close();Xn.close(),gr.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=Q.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,dt.getPlainAddress(Q.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=Ot.state.siwx,e=dt.getPlainAddress(Q.getActiveCaipAddress()),n=Q.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Pt.state.view==="ApproveTransaction",r=Pt.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var l;const i=Vd.getSIWX();if(!i||!s.includes(he.CHAIN.EVM)){const u=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:u.address,chainId:u.chainId,accounts:u.accounts}}const o=await i.createMessage({chainId:((l=Q.getActiveCaipNetwork())==null?void 0:l.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),a={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},c=await t.connect({chainId:e,socialUri:n,siwxMessage:a,preferredAccountType:r});return a.accountAddress=c.address,a.serializedMessage=c.message||"",c.signature&&c.message&&await Vd.addEmbeddedWalletSession(a,c.message,c.signature),{address:c.address,chainId:c.chainId,accounts:c.accounts}},async addEmbeddedWalletSession(t,e,n){if(qf)return qf;const r=Vd.getSIWX();return r?(qf=r.addSession({data:t,message:e,signature:n}).finally(()=>{qf=null}),qf):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=Vd.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=Q.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(kh.showLoading("Authenticating...",{autoClose:!1}),En.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),gr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Vd.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),gr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Vd.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{kh.hide()}}return!0},getSIWXEventProperties(){var e;const t=Q.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=Q.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:Wl(t)===Us.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},xo={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:he.CHAIN.EVM,CONNECTOR_TYPE_AUTH:"AUTH"},Uo={ConnectorExplorerIds:{[he.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[he.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[he.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[he.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[he.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[xo.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[xo.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[xo.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[xo.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[xo.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[xo.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[xo.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[xo.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[xo.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[xo.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[xo.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[he.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[he.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[he.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[he.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[he.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[he.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[he.CONNECTOR_ID.INJECTED]:"Browser Wallet",[he.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[he.CONNECTOR_ID.COINBASE]:"Coinbase",[he.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[he.CONNECTOR_ID.LEDGER]:"Ledger",[he.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[he.CONNECTOR_ID.INJECTED]:"INJECTED",[he.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[he.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[he.CONNECTOR_ID.AUTH]:"AUTH",[xo.CONNECTOR_TYPE_AUTH]:"AUTH"}},eo={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${xo.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=Q.state.activeChain;return he.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>st.getConnectorId(e)===he.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}},zje=new AbortController,kd={EmbeddedWalletAbortController:zje,ALERT_ERRORS:{IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"}}},Hje="rpc.walletconnect.org";function i7(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const WO=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Ov={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===Hje}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:he.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${he.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return WO.includes(e)?i7(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(m=>m.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Uo.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Ov.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Ia(a.url,a.config))}),WO.includes(t.caipNetworkId)&&r.push(Ia(i7(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Ia(a))}),Hx(r)},extendWagmiTransports(t,e,n){if(WO.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return Hx([n,Ia(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:he.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=Ze.getActiveCaipNetworkId(),n=Q.getAllRequestedCaipNetworks(),r=Array.from(((c=Q.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},o7={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Ns={set(t,e){yl.isClient&&localStorage.setItem(`${Ye.STORAGE_KEY}${t}`,e)},get(t){return yl.isClient?localStorage.getItem(`${Ye.STORAGE_KEY}${t}`):null},delete(t,e){yl.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ye.STORAGE_KEY}${t}`))}},WA=30*1e3,yl={checkIfAllowedToTriggerEmail(){const t=Ns.get(Ye.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<WA){const n=Math.ceil((WA-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Ns.get(Ye.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<WA)return Math.ceil((WA-e)/1e3)}return 0},checkIfRequestExists(t){return Us.NOT_SAFE_RPC_METHODS.includes(t.method)||Us.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(o7.transactionHash))||(t==null?void 0:t.match(o7.signedMessage)))?Ye.RPC_RESPONSE_TYPE_TX:Ye.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Us.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"},Er=E.object({message:E.string()});function Ue(t){return E.literal(Ye[t])}const kT=E.object({serializedMessage:E.string().optional(),accountAddress:E.string(),chainId:E.string(),notBefore:E.string().optional(),domain:E.string(),uri:E.string(),version:E.string(),nonce:E.string(),statement:E.string().optional(),resources:E.array(E.string()).optional(),requestId:E.string().optional(),issuedAt:E.string().optional(),expirationTime:E.string().optional()});E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const Gje=E.object({chainId:E.string().or(E.number()),rpcUrl:E.optional(E.string())}),qje=E.object({email:E.string().email()}),Vje=E.object({otp:E.string()}),Kje=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number())),siwxMessage:E.optional(kT),rpcUrl:E.optional(E.string())}),Yje=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string()),siwxMessage:E.optional(kT),rpcUrl:E.optional(E.string())}),Qje=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),Jje=E.object({email:E.string().email()}),Zje=E.object({otp:E.string()}),Xje=E.object({otp:E.string()}),e9e=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),t9e=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),n9e=E.object({type:E.string()}),r9e=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),s9e=E.object({url:E.string()}),i9e=E.object({userName:E.string()}),o9e=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([Us.ACCOUNT_TYPES.EOA,Us.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(kT)}),a9e=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),c9e=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([Us.ACCOUNT_TYPES.EOA,Us.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(kT)}),l9e=E.object({uri:E.string()}),u9e=E.object({isConnected:E.boolean()}),d9e=E.object({chainId:E.string().or(E.number())}),h9e=E.object({chainId:E.string().or(E.number())}),f9e=E.object({newEmail:E.string().email()}),p9e=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const g9e=E.object({version:E.string().optional()}),m9e=E.object({type:E.string(),address:E.string()}),y9e=E.any(),w9e=E.object({method:E.literal("eth_accounts")}),b9e=E.object({method:E.literal("eth_blockNumber")}),v9e=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),E9e=E.object({method:E.literal("eth_chainId")}),C9e=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),_9e=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),A9e=E.object({method:E.literal("eth_gasPrice")}),S9e=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),x9e=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),I9e=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),N9e=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),T9e=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),R9e=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),P9e=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),O9e=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),k9e=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),D9e=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),M9e=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),L9e=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),U9e=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),B9e=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),$9e=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),F9e=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),j9e=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),W9e=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),z9e=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),H9e=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),G9e=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),q9e=E.object({method:E.literal("eth_newBlockFilter")}),V9e=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),K9e=E.object({method:E.literal("eth_newPendingTransactionFilter")}),Y9e=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),Q9e=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),J9e=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),a7=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),Z9e=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),X9e=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),e7e=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),t7e=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),n7e=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),r7e=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),s7e=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),i7e=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),o7e=E.object({method:E.literal("wallet_getCapabilities"),params:E.array(E.string().or(E.number()).optional()).optional()}),a7e=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),c7e=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),l7e=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),c7=E.object({token:E.string()}),Be=E.object({id:E.string().optional()}),hv={appEvent:Be.extend({type:Ue("APP_SWITCH_NETWORK"),payload:Gje}).or(Be.extend({type:Ue("APP_CONNECT_EMAIL"),payload:qje})).or(Be.extend({type:Ue("APP_CONNECT_DEVICE")})).or(Be.extend({type:Ue("APP_CONNECT_OTP"),payload:Vje})).or(Be.extend({type:Ue("APP_CONNECT_SOCIAL"),payload:Kje})).or(Be.extend({type:Ue("APP_GET_FARCASTER_URI")})).or(Be.extend({type:Ue("APP_CONNECT_FARCASTER")})).or(Be.extend({type:Ue("APP_GET_USER"),payload:E.optional(Yje)})).or(Be.extend({type:Ue("APP_GET_SOCIAL_REDIRECT_URI"),payload:Qje})).or(Be.extend({type:Ue("APP_SIGN_OUT")})).or(Be.extend({type:Ue("APP_IS_CONNECTED"),payload:E.optional(c7)})).or(Be.extend({type:Ue("APP_GET_CHAIN_ID")})).or(Be.extend({type:Ue("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Be.extend({type:Ue("APP_INIT_SMART_ACCOUNT")})).or(Be.extend({type:Ue("APP_SET_PREFERRED_ACCOUNT"),payload:n9e})).or(Be.extend({type:Ue("APP_RPC_REQUEST"),payload:a7.or(l7e).or(w9e).or(b9e).or(v9e).or(E9e).or(C9e).or(_9e).or(A9e).or(S9e).or(x9e).or(I9e).or(N9e).or(T9e).or(R9e).or(P9e).or(O9e).or(k9e).or(D9e).or(M9e).or(L9e).or(U9e).or(B9e).or($9e).or(F9e).or(j9e).or(W9e).or(z9e).or(H9e).or(G9e).or(q9e).or(V9e).or(K9e).or(Y9e).or(Q9e).or(J9e).or(a7).or(Z9e).or(X9e).or(e7e).or(t7e).or(n7e).or(r7e).or(i7e).or(s7e).or(o7e).or(a7e).or(c7e).and(E.object({chainId:E.string().or(E.number()).optional(),chainNamespace:E.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:E.string().optional()}))})).or(Be.extend({type:Ue("APP_UPDATE_EMAIL"),payload:Jje})).or(Be.extend({type:Ue("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:Zje})).or(Be.extend({type:Ue("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:Xje})).or(Be.extend({type:Ue("APP_SYNC_THEME"),payload:e9e})).or(Be.extend({type:Ue("APP_SYNC_DAPP_DATA"),payload:t9e})).or(Be.extend({type:Ue("APP_RELOAD")})).or(Be.extend({type:Ue("APP_RPC_ABORT")})),frameEvent:Be.extend({type:Ue("FRAME_SWITCH_NETWORK_ERROR"),payload:Er}).or(Be.extend({type:Ue("FRAME_SWITCH_NETWORK_SUCCESS"),payload:h9e})).or(Be.extend({type:Ue("FRAME_CONNECT_EMAIL_SUCCESS"),payload:r9e})).or(Be.extend({type:Ue("FRAME_CONNECT_EMAIL_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:s9e})).or(Be.extend({type:Ue("FRAME_GET_FARCASTER_URI_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:i9e})).or(Be.extend({type:Ue("FRAME_CONNECT_FARCASTER_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_CONNECT_OTP_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_CONNECT_OTP_SUCCESS")})).or(Be.extend({type:Ue("FRAME_CONNECT_DEVICE_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Be.extend({type:Ue("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:o9e})).or(Be.extend({type:Ue("FRAME_CONNECT_SOCIAL_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_GET_USER_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_GET_USER_SUCCESS"),payload:c9e})).or(Be.extend({type:Ue("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:l9e})).or(Be.extend({type:Ue("FRAME_SIGN_OUT_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_SIGN_OUT_SUCCESS")})).or(Be.extend({type:Ue("FRAME_IS_CONNECTED_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_IS_CONNECTED_SUCCESS"),payload:u9e})).or(Be.extend({type:Ue("FRAME_GET_CHAIN_ID_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_GET_CHAIN_ID_SUCCESS"),payload:d9e})).or(Be.extend({type:Ue("FRAME_RPC_REQUEST_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_RPC_REQUEST_SUCCESS"),payload:y9e})).or(Be.extend({type:Ue("FRAME_SESSION_UPDATE"),payload:c7})).or(Be.extend({type:Ue("FRAME_UPDATE_EMAIL_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_UPDATE_EMAIL_SUCCESS"),payload:a9e})).or(Be.extend({type:Ue("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Be.extend({type:Ue("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:f9e})).or(Be.extend({type:Ue("FRAME_SYNC_THEME_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_SYNC_THEME_SUCCESS")})).or(Be.extend({type:Ue("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Be.extend({type:Ue("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:p9e})).or(Be.extend({type:Ue("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:m9e})).or(Be.extend({type:Ue("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_READY"),payload:g9e})).or(Be.extend({type:Ue("FRAME_RELOAD_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_RELOAD_SUCCESS")}))};function zO(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function u7e({projectId:t,chainId:e,version:n,enableLogger:r,rpcUrl:s=he.BLOCKCHAIN_API_RPC_URL}){const i=new URL(pje);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",n),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",s),i.toString()}class d7e{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:i=he.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const o=document.getElementById("w3m-iframe");this.iframe&&!o&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(o,a,c)=>{function l({data:u}){if(!zO(Ye.FRAME_EVENT_KEY,u))return;const d=hv.frameEvent.parse(u);d.id===o&&(a(d),window.removeEventListener("message",l))}yl.isClient&&(window.addEventListener("message",l),c.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:o=>{yl.isClient&&window.addEventListener("message",({data:a})=>{if(!zO(Ye.FRAME_EVENT_KEY,a))return;const c=hv.frameEvent.parse(a);o(c)})},onAppEvent:o=>{yl.isClient&&window.addEventListener("message",({data:a})=>{if(!zO(Ye.APP_EVENT_KEY,a))return;const c=hv.appEvent.parse(a);o(c)})},postAppEvent:o=>{var a;if(yl.isClient){if(!((a=this.iframe)!=null&&a.contentWindow))throw new Error("W3mFrame: iframe is not set");hv.appEvent.parse(o),this.iframe.contentWindow.postMessage(o,"*")}},postFrameEvent:o=>{if(yl.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");hv.frameEvent.parse(o),parent.postMessage(o,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),this.rpcUrl=i,n&&(this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),yl.isClient)){const o=document.createElement("iframe");o.id="w3m-iframe",o.src=u7e({projectId:e,chainId:r,version:mje,enableLogger:s,rpcUrl:this.rpcUrl}),o.name="w3m-secure-iframe",o.style.position="fixed",o.style.zIndex="999999",o.style.display="none",o.style.border="none",o.style.animationDelay="0s, 50ms",o.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",o.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=o,this.iframe.onerror=()=>{var a;(a=this.frameLoadPromiseResolver)==null||a.reject("Unable to load email login dependency")},this.events.onFrameEvent(a=>{var c;a.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(c=this.frameLoadPromiseResolver)==null||c.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class h7e{constructor(e){var i;const n=hm({level:gje}),{logger:r,chunkLoggerController:s}=sT({opts:n});this.logger=Fs(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class f7e{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new h7e(e)),this.abortController=i,this.getActiveCaipNetwork=o;const a=this.getRpcUrl(n);this.w3mFrame=new d7e({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:a}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Ye.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Ns.get(Ye.EMAIL_LOGIN_USED_KEY)}getEmail(){return Ns.get(Ye.EMAIL)}getUsername(){return Ns.get(Ye.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Ye.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{yl.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Ye.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Ye.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Ye.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Ye.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Ye.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Ye.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Ye.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Ye.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Ye.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Ye.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Ye.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Ye.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Ye.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:Ye.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ye.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:Ye.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Ye.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Ye.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:Ye.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Ye.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if(Us.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",l=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=l,n.rpcUrl=this.getRpcUrl(l),(s=this.rpcRequestHandler)==null||s.call(this,e);const u=await this.appEvent({type:Ye.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,u,n),u}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ye.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ye.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Ye.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ye.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ye.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ye.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Ye.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Us.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:n,method:r})=>{Us.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:Ye.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Ye.APP_SYNC_DAPP_DATA,Ye.APP_SYNC_THEME,Ye.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Ye.APP_CONNECT_EMAIL,Ye.APP_CONNECT_DEVICE,Ye.APP_CONNECT_OTP,Ye.APP_CONNECT_SOCIAL,Ye.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,m){var b,v,A;w.id===u&&((v=m==null?void 0:(b=m.logger).info)==null||v.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((A=w.payload)==null?void 0:A.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Ns.set(Ye.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Ns.set(Ye.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Ns.set(Ye.EMAIL,e),Ns.set(Ye.EMAIL_LOGIN_USED_KEY,"true"),Ns.delete(Ye.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Ns.delete(Ye.EMAIL_LOGIN_USED_KEY),Ns.delete(Ye.EMAIL),Ns.delete(Ye.LAST_USED_CHAIN_KEY),Ns.delete(Ye.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Ns.set(Ye.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Ns.get(Ye.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Ns.set(Ye.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var s,i;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(s=Oh.parseCaipNetworkId(e))==null?void 0:s.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getActiveCaipNetwork(n);return(i=r==null?void 0:r.rpcUrls.default.http)==null?void 0:i[0]}}class Jy{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){return Jy.instance||(Jy.instance=new f7e({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o})),Jy.instance}}const p7e={DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]},l7={filterOutDuplicatesByRDNS(t){const e=Ot.state.enableEIP6963?st.state.connectors:[],n=Ze.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&dt.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=st.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=Ze.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=st.state,{featuredWalletIds:n}=Ot.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=Ot.state.features)==null?void 0:c.connectMethodsOrder),r=e||st.state.connectors;if(n)return n;const{injected:s,announced:i}=MS.getConnectorsByType(r,Et.state.recommended,Et.state.featured),o=s.filter(MS.showConnector),a=i.filter(MS.showConnector);return o.length||a.length?["wallet","email","social"]:p7e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Et.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&Et.state.excludedWallets.some(r=>eo.isLowerCaseMatch(r.name,t.name));return e||n}},MS={getConnectorsByType(t,e,n){const{customWallets:r}=Ot.state,s=Ze.getRecentWallets(),i=l7.filterOutDuplicateWallets(e),o=l7.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&Et.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&Et.state.excludedWallets.some(i=>eo.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!dt.isMobile()||dt.isMobile()&&!e&&!rt.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(Q.state.chains.values()).some(n=>st.getConnectorId(n.namespace)===he.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=Ot.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const h=[{type:"walletConnect",isEnabled:Ot.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(w=>w.isEnabled),f=new Set(h.map(w=>w.type)),p=c.filter(w=>f.has(w)).map(w=>({type:w,isEnabled:!0})),g=h.filter(({type:w})=>!p.some(({type:b})=>b===w));return Array.from(new Set([...p,...g].map(({type:w})=>w)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!dt.isMobile())return{accounts:[],chainId:void 0};if(t.id===he.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};Gu`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`;Gu`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`;Gu`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`;const LS={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([LS.getAddresses(t),LS.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:LS.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[Uo.NetworkImageIds[e.id]]}]})}},ey={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function y1(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const u7=y1({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),d7=y1({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});y1({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});y1({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});y1({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const g7e={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},pg={getMethodsByChainNamespace(t){return g7e[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case u7.caipNetworkId:u.chains.push(u7.deprecatedCaipNetworkId);break;case d7.caipNetworkId:u.chains.push(d7.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await DS.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=pg.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",a=>{if(pg.isSessionEventData(a)){const{name:c,data:l}=a.params.event;if(c==="accountsChanged"&&Array.isArray(l)){const u=l.filter(d=>dt.isCaipAddress(d)).map(d=>Oh.parseCaipAddress(d)).filter(d=>d.chainNamespace===e);s(u)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>Oh.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};class m7e{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case he.CHAIN.EVM:await this.syncEVMConnections(e);break;case he.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case he.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===he.CONNECTOR_ID.WALLET_CONNECT){const c=pg.getWalletConnectAccounts(r,this.namespace),l=n.find(u=>{var d,h;return u.chainNamespace===this.namespace&&u.id.toString()===((h=(d=c[0])==null?void 0:d.chainId)==null?void 0:h.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await MS.fetchProviderData(a);if(c.length>0&&l){const u=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:u}),a.provider&&a.id!==he.CONNECTOR_ID.AUTH&&a.id!==he.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===he.CONNECTOR_ID.WALLET_CONNECT){const c=pg.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n==null?void 0:n.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{var h,f,p,g,w,m;if(a.id===he.CONNECTOR_ID.WALLET_CONNECT){const b=pg.getWalletConnectAccounts(r,this.namespace);b.length>0&&i({connectorId:a.id,accounts:b.map(v=>({address:v.address})),caipNetwork:n});return}const c=await a.connect(),l=await a.getAccountAddresses();let u=l==null?void 0:l.map(b=>dt.createAccount(he.CHAIN.BITCOIN,b.address,b.purpose||"payment",b.publicKey,b.path));if(u&&u.length>1&&(u=[{namespace:he.CHAIN.BITCOIN,publicKey:((h=u[ey.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.publicKey)??"",path:((f=u[ey.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.path)??"",address:((p=u[ey.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.address)??"",type:"payment"},{namespace:he.CHAIN.BITCOIN,publicKey:((g=u[ey.ACCOUNT_INDEXES.ORDINAL])==null?void 0:g.publicKey)??"",path:((w=u[ey.ACCOUNT_INDEXES.ORDINAL])==null?void 0:w.path)??"",address:((m=u[ey.ACCOUNT_INDEXES.ORDINAL])==null?void 0:m.address)??"",type:"ordinal"}]),!(a.chains.find(b=>b.id===(n==null?void 0:n.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(b=>({address:b.address,type:b.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>eo.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>eo.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>eo.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>eo.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>eo.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}class yee{constructor({provider:e,namespace:n}){this.id=he.CONNECTOR_ID.WALLET_CONNECT,this.name=Uo.ConnectorNamesMap[he.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Uo.ConnectorImageIds[he.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=Q.getCaipNetworks.bind(Q),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=Ot.state.universalProviderConfigOverride,s=pg.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Vd.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:y7e})}}const y7e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],w7e=[he.CONNECTOR_ID.AUTH,he.CONNECTOR_ID.WALLET_CONNECT];class b7e{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>Q.getCaipNetworks(n),this.getConnectorId=n=>st.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new m7e({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:he.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:he.CONNECTOR_ID.AUTH,type:"AUTH",name:he.CONNECTOR_NAMES.AUTH,provider:e,imageId:Uo.ConnectorImageIds[he.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!eo.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){En.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=Wl(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof yee);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=dt.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=dt.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=dt.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&eo.isLowerCaseMatch(this.getConnectorId(he.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=dt.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),eo.isLowerCaseMatch(this.getConnectorId(he.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?LS.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),eo.isLowerCaseMatch(this.getConnectorId(he.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(w7e.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}function v7e(t){let e=[],n,r;function s(a){return _I.parseEvmChainId(a)||1}function i(){var a;return n||(n=Jy.getInstance({projectId:t.options.projectId,chainId:(a=Q.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?ep.open(kd.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?ep.open(kd.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&ep.open(kd.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:kd.EmbeddedWalletAbortController,getActiveCaipNetwork:c=>Q.getActiveCaipNetwork(c)})),n}async function o(a={}){var g;const c=i();let l=a.chainId;if(a.isReconnecting){const w=_I.parseEvmChainId(c.getLastUsedChainId()||""),m=(g=t.chains)==null?void 0:g[0].id;if(l=w||m,!l)throw new Error("ChainId not found in provider")}const u=Wl("eip155"),{address:d,chainId:h,accounts:f}=await Vd.authConnectorAuthenticate({authConnector:c,chainId:l,preferredAccountType:u,socialUri:a.socialUri,chainNamespace:he.CHAIN.EVM});e=(f==null?void 0:f.map(w=>w.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:he.CONNECTOR_ID.AUTH,name:he.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:he.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=Jy.getInstance({projectId:t.options.projectId,chainId:(c=Q.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:kd.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?ep.open(kd.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?ep.open(kd.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&ep.open(kd.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:l=>Q.getActiveCaipNetwork(l)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=Q.state.activeChain===he.CHAIN.EVM;if(he.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>st.getConnectorId(h)===he.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l;try{const u=a.chains.find(p=>p.id===c);if(!u)throw new Ll(new Error("chain not found on connector."));const d=await this.getProvider(),h=Wl("eip155"),f=await d.connect({chainId:c,preferredAccountType:h});return e=((l=f==null?void 0:f.accounts)==null?void 0:l.map(p=>p.address))||[f.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),u}catch(u){throw u instanceof Error?new Ll(u):u}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(Uu)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}zU.type="walletConnect";function zU(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:zU.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=Q.getCaipNetworks(),w=await this.getProvider();if(!w)throw new qd;a||(a=this.onDisplayUri,w.on("display_uri",a));const m=await this.isChainsStale();w.session&&m&&await w.disconnect();const b=Ot.state.universalProviderConfigOverride;if(!w.session||m){const S=pg.createNamespaces(g,b);await w.connect({optionalNamespaces:S,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(D=>Number(D.id)))}const v=await this.getAccounts(),A=await this.getChainId(),C=(p=(f=(h=w.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,T=C==null?void 0:C.some(S=>Number(S.split(":")[1])===A);let x=1;T?x=A:C!=null&&C[0]&&(x=Number(C[0].split(":")[1])),a&&(w.removeListener("display_uri",a),a=void 0),o&&(w.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),w.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),w.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),w.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),w.on("session_delete",c));const N=b==null?void 0:b.defaultChain;return w.setDefaultChain(N??`eip155:${x}`),{accounts:v,chainId:x}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new Gr(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var w,m,b;const d=await this.getProvider();if(!((w=d==null?void 0:d.session)!=null&&w.namespaces))return[];const h=(b=(m=d==null?void 0:d.session)==null?void 0:m.namespaces[he.CHAIN.EVM])==null?void 0:b.accounts,f=(h==null?void 0:h.map(v=>v.split(":")[2]))??[],p=new Set;return f.filter(v=>{const A=v==null?void 0:v.toLowerCase();return p.has(A)?!1:(p.add(A),!0)})},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=Ze.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const w=Ze.getStoredActiveCaipNetworkId(),m=h?e.getCaipNetworks(h):[],b=m==null?void 0:m.find(v=>v.id===w);b&&b.chainNamespace===he.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(b.id)}))}return r},async getChainId(){var g,w,m,b;const d=(g=e.getCaipNetwork(he.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(b=(m=(w=(await this.getProvider()).session)==null?void 0:w.namespaces[he.CHAIN.EVM])==null?void 0:m.chains)==null?void 0:b[0],p=Q.getCaipNetworks().find(v=>v.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,w,m,b;const f=await this.getProvider();if(!f)throw new qd;const p=Q.getCaipNetworks().find(v=>v.id===h);if(!p)throw new Ll(new GC);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:et(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const v=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...v,h]),{...p,id:p.id}}catch(v){const A=v;if(/(?:user rejected)/iu.test(A.message))throw new Gr(A);try{let C;d!=null&&d.blockExplorerUrls?C=d.blockExplorerUrls:C=(g=p.blockExplorers)!=null&&g.default.url?[(w=p.blockExplorers)==null?void 0:w.default.url]:[];const T=((b=(m=p.rpcUrls)==null?void 0:m.chainDefault)==null?void 0:b.http)||[],x={blockExplorerUrls:C,chainId:et(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:T};await f.request({method:"wallet_addEthereumChain",params:[x]});const N=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...N,h]),{...p,id:p.id}}catch(C){throw new Gr(C)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>Uu(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(Q.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[he.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(w=>Number.parseInt(w.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const fv=cr({pendingTransactions:0}),h7={state:fv,subscribeKey(t,e){return Ti(fv,t,e)},increase(t){fv[t]+=1},decrease(t){fv[t]-=1},reset(t){fv[t]=0}};function E7e(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function C7e(t){if(dt.isSafeApp()){const{safe:e}=await Zs(async()=>{const{safe:n}=await import("./index-v250HNqi.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function _7e(t){try{const{coinbaseWallet:e}=await Zs(async()=>{const{coinbaseWallet:n}=await import("./index-v250HNqi.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const A7e={enable:!1,pollingInterval:3e4};class S7e extends b7e{constructor(e){const n=Ov.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=he.CHAIN.EVM,this.adapterType=he.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...A7e,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===he.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>dt.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=Yy(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>dt.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=Yy(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===he.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=Ov.getCaipNetworkId(s);i?n[s.id]=Ov.extendWagmiTransports(s,e.projectId,i):n[s.id]=Ov.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=YX({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=V8e(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),h7.increase("pendingTransactions")}});const e=h7.subscribeKey("pendingTransactions",n=>{var r;n>=he.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){WX(this.wagmiConfig,{onChange:(e,n)=>{var r;if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const s=e.address!==(n==null?void 0:n.address),i=e.connector.id!==((r=n.connector)==null?void 0:r.id),o=n.status!=="connected";(s||i||o)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}}),zX(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===he.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:i})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:Ze.getConnectedSocialProvider(),username:Ze.getConnectedSocialUsername()}:void 0}}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await _7e(this.wagmiConfig.connectors);s&&n.push(s)}const r=await C7e(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(zU(e,n)),e.enableEIP6963!==!1&&r.push(NT({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(v7e({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:e,chainId:n,connector:{id:r.id,name:Uo.ConnectorNamesMap[r.id]??r.name,imageId:Uo.ConnectorImageIds[r.id],type:Uo.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===he.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await H8e(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=Yy(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await W8e(this.wagmiConfig,s);const i=await z8e(this.wagmiConfig,s);return await GX(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(_I.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await qX(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await M8e(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return GEe(e.value,e.decimals)}formatUnits(e){return im(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");if(e.type===he.CONNECTOR_ID.INJECTED&&n.enableEIP6963===!1||e.id===he.CONNECTOR_ID.AUTH||e.id===he.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:Uo.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:Uo.ConnectorNamesMap[e.id]??e.name,imageId:Uo.ConnectorImageIds[e.id],type:Uo.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===he.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){HX(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnections(){return Promise.resolve()}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=tc(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(dt.isSafeApp()&&n===he.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await PS(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await PS(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await R3(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var h,f,p,g,w;const{id:n,address:r,provider:s,type:i,info:o,chainId:a,socialUri:c}=e,l=this.getWagmiConnector(n);if(!l)throw new Error("connectionControllerClient:connectExternal - connector is undefined");s&&o&&l.id===he.CONNECTOR_ID.EIP6963&&((h=l.setEip6963Wallet)==null||h.call(l,{provider:s,info:o}));const u=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(l.uid);if(u){await((g=this.wagmiConfig.storage)==null?void 0:g.setItem("recentConnectorId",l.id));const m=[...u.accounts].sort((b,v)=>eo.isLowerCaseMatch(b,r)?-1:eo.isLowerCaseMatch(v,r)?1:0);return(w=this.wagmiConfig)==null||w.setState(b=>({...b,connections:new Map(b.connections).set(l.uid,{accounts:m,chainId:u.chainId,connector:u.connector}),current:l.uid,status:"connected"})),{address:m[0],chainId:u.chainId,provider:s,type:i,id:n}}const d=await PS(this.wagmiConfig,{connector:l,chainId:a?Number(a):void 0,socialUri:c});return{address:d.accounts[0],chainId:d.chainId,provider:s,type:i,id:n}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:n})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await T3(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=Ze.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await B8e(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});Ze.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=tc(this.wagmiConfig).find(i=>eo.isLowerCaseMatch(i.connector.id,e.id));return await I3(this.wagmiConfig,{connector:n}),Ot.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:i})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=tc(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await I3(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:s})),connectorId:r.connector.id}))}}async switchNetwork(e){var s,i,o,a,c,l,u,d,h,f;const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(p=>p.id.toString()===n.id.toString());await R3(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:(r==null?void 0:r.name)??n.name,nativeCurrency:(r==null?void 0:r.nativeCurrency)??n.nativeCurrency,rpcUrls:[((o=(i=(s=n.rpcUrls)==null?void 0:s.chainDefault)==null?void 0:i.http)==null?void 0:o[0])??((l=(c=(a=r==null?void 0:r.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0])??""],blockExplorerUrls:[((d=(u=r==null?void 0:r.blockExplorers)==null?void 0:u.default)==null?void 0:d.url)??((f=(h=n.blockExplorers)==null?void 0:h.default)==null?void 0:f.url)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=tc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=E7e(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=tc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=tc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=tc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:he.CONNECTOR_ID.AUTH,type:"AUTH",name:he.CONNECTOR_NAMES.AUTH,provider:e,imageId:Uo.ConnectorImageIds[he.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){return e.on("connect",()=>{const n=tc(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(Q.state.activeChain==="eip155")return;T3(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new yee({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}}const wee="7c65f27254d6ddd24cf7eedf2685c4fb",x7e={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},I7e=new S7e({projectId:wee,networks:[pI,fI,gI,_X,mI,vI,EI],pendingTransactionsFilter:{enable:!0,pollingInterval:1e3}});b6e({projectId:wee,metadata:x7e,adapters:[I7e],networks:[pI,fI,gI,_X,mI,vI,EI],features:{analytics:!0}});const HU=()=>{if(!lx)throw new Error("[FIREBASE] Database not initialized");return lx},Hg=t=>!t||t.length<10?t:`${t.slice(0,6)}...${t.slice(-4)}`,SI=async(t,e)=>{try{if(!t)return console.error("[LEADERBOARD] No wallet address provided"),!1;if(t==="0x0000000000000000000000000000000000000000")return console.warn("[LEADERBOARD] Skipping leaderboard update for zero address"),!1;const n=new Date().toISOString(),r=HU(),s=To(r,`leaderboard/${t}`),i=await rp(s),o=i.exists()?i.val():null,a=e==="win"?3:e==="draw"?1:0,c={username:t,chain_type:"sanko",wins:((o==null?void 0:o.wins)||0)+(e==="win"?1:0),losses:((o==null?void 0:o.losses)||0)+(e==="loss"?1:0),draws:((o==null?void 0:o.draws)||0)+(e==="draw"?1:0),total_games:((o==null?void 0:o.total_games)||0)+1,points:((o==null?void 0:o.points)||0)+a,created_at:(o==null?void 0:o.created_at)||n,updated_at:n};return await Hv(s,c),console.log("[LEADERBOARD] Successfully updated entry for:",Hg(t),"Result:",e),!0}catch(n){return console.error("[LEADERBOARD] Error updating leaderboard entry:",n),!1}},N7e=async(t,e,n)=>{try{return!e||!n?(console.error("[LEADERBOARD] Missing player addresses"),!1):e==="0x0000000000000000000000000000000000000000"||n==="0x0000000000000000000000000000000000000000"?(console.warn("[LEADERBOARD] Skipping leaderboard update - one or both players have zero addresses:",{bluePlayer:e,redPlayer:n}),!1):(console.log("[LEADERBOARD] Updating both players scores:",{winner:t,bluePlayer:Hg(e),redPlayer:Hg(n)}),await SI(e,t==="blue"?"win":t==="red"?"loss":"draw"),await SI(n,t==="red"?"win":t==="blue"?"loss":"draw"),console.log("[LEADERBOARD] Successfully updated both players scores"),!0)}catch(r){return console.error("[LEADERBOARD] Error updating both players scores:",r),!1}},bee=async(t=20)=>{try{const e=HU(),n=To(e,"leaderboard"),r=await rp(n);if(!r.exists())return[];const s=[];return r.forEach(i=>{const o=i.val();o&&s.push(o)}),s.sort((i,o)=>o.points!==i.points?o.points-i.points:o.wins!==i.wins?o.wins-i.wins:i.total_games-o.total_games),s.slice(0,t)}catch(e){return console.error("[LEADERBOARD] Error getting top entries:",e),[]}},vee=async()=>{try{const t=HU(),e=To(t,"leaderboard/0x0000000000000000000000000000000000000000");return await kH(e),console.log("[LEADERBOARD] Removed zero address entry from leaderboard"),!0}catch(t){return console.error("[LEADERBOARD] Error removing zero address entry:",t),!1}},Vc=()=>{if(!lx)throw new Error("[FIREBASE] Database not initialized");return lx},is={async getGame(t){try{const e=Vc(),n=To(e,`chess_games/${t}`),r=await rp(n);return r.exists()?r.val():null}catch(e){return console.error("[FIREBASE] Error getting game:",e),null}},async updateGame(t,e){if(!t)throw console.error("[FIREBASE] Tried to update game with undefined inviteCode!",e),new Error("inviteCode is required for updateGame");try{const n=Vc(),r=To(n,`chess_games/${t}`);await Hv(r,{...e,updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game updated successfully")}catch(n){console.error("[FIREBASE] Error updating game:",n)}},subscribeToGame(t,e){try{const n=Vc(),r=To(n,`chess_games/${t}`);console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",t);const s=v$(r,i=>{if(i.exists()){const o=i.val();console.log("[FIREBASE] Game update received:",o),e(o)}});return console.log("[FIREBASE] Firebase subscription setup complete for game:",t),s}catch(n){return console.error("[FIREBASE] Error subscribing to game:",n),()=>{}}},async createGame(t){const e=t.invite_code;if(!e)throw console.error("[FIREBASE] Tried to create game with undefined inviteCode!",t),new Error("inviteCode is required for createGame");try{const n=Vc(),r=To(n,`chess_games/${e}`);console.log("[FIREBASE] Creating game with data:",t),await Hv(r,{...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game created successfully:",e);const s=await rp(r);s.exists()?console.log("[FIREBASE] Game verification successful:",s.val()):console.error("[FIREBASE] Game creation verification failed - game not found after creation")}catch(n){throw console.error("[FIREBASE] Error creating game:",n),n}},async getActiveGames(){try{const t=Vc(),e=To(t,"chess_games"),n=await rp(e);if(!n.exists())return[];const r=n.val();return Object.values(r).filter(s=>s.game_state==="waiting"||s.game_state==="active")}catch(t){return console.error("[FIREBASE] Error getting active games:",t),[]}},async getOpenGames(){try{const t=Vc(),e=To(t,"chess_games"),n=await rp(e);if(!n.exists())return console.log("[FIREBASE] No games found in database"),[];const r=n.val();console.log("[FIREBASE] All games in database:",r);const s=Object.values(r).filter(i=>{const o=i.game_state==="waiting",a=i.is_public,c=!i.red_player||i.red_player==="0x0000000000000000000000000000000000000000";return console.log("[FIREBASE] Game filter check:",{inviteCode:i.invite_code,gameState:i.game_state,isPublic:i.is_public,redPlayer:i.red_player,isWaiting:o,noRedPlayer:c,passes:o&&a&&c}),o&&a&&c});return s.sort((i,o)=>new Date(o.created_at).getTime()-new Date(i.created_at).getTime()),console.log("[FIREBASE] Open games found:",s.length,s),s}catch(t){return console.error("[FIREBASE] Error getting open games:",t),[]}},async deleteGame(t){try{const e=Vc(),n=To(e,`chess_games/${t}`);await kH(n),console.log("[FIREBASE] Game deleted:",t)}catch(e){console.error("[FIREBASE] Error deleting game:",e)}},async updateLeaderboard(t){try{const e=Vc(),n=To(e,`leaderboard/${t.username}`);await Hv(n,{...t,updated_at:new Date().toISOString()})}catch(e){console.error("[FIREBASE] Error updating leaderboard:",e)}},async getLeaderboard(){try{const t=Vc(),e=To(t,"leaderboard"),n=await rp(e);if(!n.exists())return[];const r=n.val();return Object.values(r).sort((s,i)=>i.points-s.points)}catch(t){return console.error("[FIREBASE] Error getting leaderboard:",t),[]}},subscribeToLeaderboard(t){try{const e=Vc(),n=To(e,"leaderboard");return v$(n,s=>{if(s.exists()){const i=s.val(),o=Object.values(i).sort((a,c)=>c.points-a.points);console.log("[FIREBASE] Leaderboard update received:",o),t(o)}})}catch(e){return console.error("[FIREBASE] Error subscribing to leaderboard:",e),()=>{}}}},T7e="6.15.0";function R7e(t,e,n){const r=e.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${n}`,s.value=t,s}async function fi(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,s,i)=>(r[e[i]]=s,r),{})}function wt(t,e,n){for(let r in e){let s=e[r];const i=n?n[r]:null;i&&R7e(s,i,r),Object.defineProperty(t,r,{enumerable:!0,value:s,writable:!1})}}function Ry(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>Ry(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let s=0;s<t.length;s++)r+=n[t[s]>>4],r+=n[t[s]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return Ry(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${Ry(r,e)}: ${Ry(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function ks(t,e){return t&&t.code===e}function GU(t){return ks(t,"CALL_EXCEPTION")}function ur(t,e,n){let r=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${Ry(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];i.push(o+"="+Ry(a))}}i.push(`code=${e}`),i.push(`version=${T7e}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return wt(s,{code:e}),n&&Object.assign(s,n),s.shortMessage==null&&wt(s,{shortMessage:r}),s}function me(t,e,n,r){if(!t)throw ur(e,n,r)}function J(t,e,n,r){me(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function Eee(t,e,n){n==null&&(n=""),n&&(n=": "+n),me(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),me(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");t.push(e)}catch{}return t},[]);function DT(t,e,n){if(n==null&&(n=""),t!==e){let r=n,s="new";n&&(r+=".",s+=" "+n),me(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function Cee(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(t.substring(s,s+2),16),s+=2;return r}J(!1,"invalid BytesLike value",e||"value",t)}function Yt(t,e){return Cee(t,e,!1)}function yi(t,e){return Cee(t,e,!0)}function nr(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function qU(t){return nr(t,!0)||t instanceof Uint8Array}const f7="0123456789abcdef";function Oe(t){const e=Yt(t);let n="0x";for(let r=0;r<e.length;r++){const s=e[r];n+=f7[(s&240)>>4]+f7[s&15]}return n}function Ir(t){return"0x"+t.map(e=>Oe(e).substring(2)).join("")}function Zy(t){return nr(t,!0)?(t.length-2)/2:Yt(t).length}function _r(t,e,n){const r=Yt(t);return n!=null&&n>r.length&&me(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),Oe(r.slice(e??0,n??r.length))}function _ee(t,e,n){const r=Yt(t);me(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),n?s.set(r,e-r.length):s.set(r,0),Oe(s)}function id(t,e){return _ee(t,e,!0)}function P7e(t,e){return _ee(t,e,!1)}const MT=BigInt(0),wc=BigInt(1),Py=9007199254740991;function O7e(t,e){const n=LT(t,"value"),r=BigInt(Qt(e,"width"));if(me(n>>r===MT,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-wc){const s=(wc<<r)-wc;return-((~n&s)+wc)}return n}function Aee(t,e){let n=Qe(t,"value");const r=BigInt(Qt(e,"width")),s=wc<<r-wc;if(n<MT){n=-n,me(n<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(wc<<r)-wc;return(~n&i)+wc}else me(n<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function kv(t,e){const n=LT(t,"value"),r=BigInt(Qt(e,"bits"));return n&(wc<<r)-wc}function Qe(t,e){switch(typeof t){case"bigint":return t;case"number":return J(Number.isInteger(t),"underflow",e||"value",t),J(t>=-Py&&t<=Py,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){J(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}J(!1,"invalid BigNumberish value",e||"value",t)}function LT(t,e){const n=Qe(t,e);return me(n>=MT,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const p7="0123456789abcdef";function VU(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=p7[n>>4],e+=p7[n&15];return BigInt(e)}return Qe(t)}function Qt(t,e){switch(typeof t){case"bigint":return J(t>=-Py&&t<=Py,"overflow",e||"value",t),Number(t);case"number":return J(Number.isInteger(t),"underflow",e||"value",t),J(t>=-Py&&t<=Py,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Qt(BigInt(t),e)}catch(n){J(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}J(!1,"invalid numeric value",e||"value",t)}function k7e(t){return Qt(VU(t))}function bf(t,e){let r=LT(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const s=Qt(e,"width");for(me(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<s*2;)r="0"+r}return"0x"+r}function Zr(t){const e=LT(t,"value");if(e===MT)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(n.substring(i,i+2),16)}return r}function pc(t){let e=Oe(qU(t)?t:Zr(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const g7="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const m7=BigInt(58);function D7e(t){const e=Yt(t);let n=VU(e),r="";for(;n;)r=g7[Number(n%m7)]+r,n/=m7;for(let s=0;s<e.length&&!e[s];s++)r=g7[0]+r;return r}function M7e(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return Yt(e)}function L7e(t){const e=Yt(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var p0;class See{constructor(e,n,r){se(this,"filter");se(this,"emitter");Y(this,p0);L(this,p0,n),wt(this,{emitter:e,filter:r})}async removeListener(){_(this,p0)!=null&&await this.emitter.off(this.filter,_(this,p0))}}p0=new WeakMap;function U7e(t,e,n,r,s){J(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function xee(t,e,n,r,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)i++;return i}return t==="OVERRUN"?n.length-e-1:0}function B7e(t,e,n,r,s){return t==="OVERLONG"?(J(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),xee(t,e,n))}const $7e=Object.freeze({error:U7e,ignore:xee,replace:B7e});function F7e(t,e){e==null&&(e=$7e.error);const n=Yt(t,"bytes"),r=[];let s=0;for(;s<n.length;){const i=n[s++];if(!(i>>7)){r.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,n,r):s+=e("BAD_PREFIX",s-1,n,r);continue}if(s-1+o>=n.length){s+=e("OVERRUN",s-1,n,r);continue}let c=i&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=n[s];if((u&192)!=128){s+=e("MISSING_CONTINUE",s,n,r),c=null;break}c=c<<6|u&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-o,n,r,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-o,n,r,c);continue}if(c<=a){s+=e("OVERLONG",s-1-o,n,r,c);continue}r.push(c)}}return r}function qu(t,e){J(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(s&63|128);else if((s&64512)==55296){r++;const i=t.charCodeAt(r);J(r<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((s&1023)<<10)+(i&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128)}return new Uint8Array(n)}function j7e(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function xI(t,e){return j7e(F7e(t,e))}function Iee(t){async function e(n,r){me(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=n.url.split(":")[0].toLowerCase();me(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),me(s==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=ur("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{i=ur("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let l;try{l=await fetch(n.url,c)}catch(f){throw clearTimeout(a),i||f}clearTimeout(a);const u={};l.headers.forEach((f,p)=>{u[p.toLowerCase()]=f});const d=await l.arrayBuffer(),h=d==null?null:new Uint8Array(d);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:h}}return e}const W7e=12,z7e=250;let y7=Iee();const H7e=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),G7e=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let HO=!1;async function Nee(t,e){try{const n=t.match(H7e);if(!n)throw new Error("invalid data");return new sf(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?M7e(n[3]):V7e(n[3]))}catch{return new sf(599,"BAD REQUEST (invalid data: URI)",{},null,new vf(t))}}function Tee(t){async function e(n,r){try{const s=n.match(G7e);if(!s)throw new Error("invalid link");return new vf(`${t}${s[2]}`)}catch{return new sf(599,"BAD REQUEST (invalid IPFS URI)",{},null,new vf(n))}}return e}const zA={data:Nee,ipfs:Tee("https://gateway.ipfs.io/ipfs/")},Ree=new WeakMap;var Fp,lh;class q7e{constructor(e){Y(this,Fp);Y(this,lh);L(this,Fp,[]),L(this,lh,!1),Ree.set(e,()=>{if(!_(this,lh)){L(this,lh,!0);for(const n of _(this,Fp))setTimeout(()=>{n()},0);L(this,Fp,[])}})}addListener(e){me(!_(this,lh),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),_(this,Fp).push(e)}get cancelled(){return _(this,lh)}checkSignal(){me(!this.cancelled,"cancelled","CANCELLED",{})}}Fp=new WeakMap,lh=new WeakMap;function HA(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var g0,m0,ic,bu,y0,w0,as,Po,vu,jp,Wp,zp,rl,oc,uh,Hp,Dv;const BI=class BI{constructor(e){Y(this,Hp);Y(this,g0);Y(this,m0);Y(this,ic);Y(this,bu);Y(this,y0);Y(this,w0);Y(this,as);Y(this,Po);Y(this,vu);Y(this,jp);Y(this,Wp);Y(this,zp);Y(this,rl);Y(this,oc);Y(this,uh);L(this,w0,String(e)),L(this,g0,!1),L(this,m0,!0),L(this,ic,{}),L(this,bu,""),L(this,y0,3e5),L(this,oc,{slotInterval:z7e,maxAttempts:W7e}),L(this,uh,null)}get url(){return _(this,w0)}set url(e){L(this,w0,String(e))}get body(){return _(this,as)==null?null:new Uint8Array(_(this,as))}set body(e){if(e==null)L(this,as,void 0),L(this,Po,void 0);else if(typeof e=="string")L(this,as,qu(e)),L(this,Po,"text/plain");else if(e instanceof Uint8Array)L(this,as,e),L(this,Po,"application/octet-stream");else if(typeof e=="object")L(this,as,qu(JSON.stringify(e))),L(this,Po,"application/json");else throw new Error("invalid body")}hasBody(){return _(this,as)!=null}get method(){return _(this,bu)?_(this,bu):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),L(this,bu,String(e).toUpperCase())}get headers(){const e=Object.assign({},_(this,ic));return _(this,vu)&&(e.authorization=`Basic ${L7e(qu(_(this,vu)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&_(this,Po)&&(e["content-type"]=_(this,Po)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){_(this,ic)[String(e).toLowerCase()]=String(n)}clearHeaders(){L(this,ic,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return _(this,vu)||null}setCredentials(e,n){J(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),L(this,vu,`${e}:${n}`)}get allowGzip(){return _(this,m0)}set allowGzip(e){L(this,m0,!!e)}get allowInsecureAuthentication(){return!!_(this,g0)}set allowInsecureAuthentication(e){L(this,g0,!!e)}get timeout(){return _(this,y0)}set timeout(e){J(e>=0,"timeout must be non-zero","timeout",e),L(this,y0,e)}get preflightFunc(){return _(this,jp)||null}set preflightFunc(e){L(this,jp,e)}get processFunc(){return _(this,Wp)||null}set processFunc(e){L(this,Wp,e)}get retryFunc(){return _(this,zp)||null}set retryFunc(e){L(this,zp,e)}get getUrlFunc(){return _(this,uh)||y7}set getUrlFunc(e){L(this,uh,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${_(this,as)?Oe(_(this,as)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(_(this,oc).slotInterval=e.slotInterval),e.maxAttempts!=null&&(_(this,oc).maxAttempts=e.maxAttempts)}send(){return me(_(this,rl)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),L(this,rl,new q7e(this)),de(this,Hp,Dv).call(this,0,w7()+this.timeout,0,this,new sf(0,"",{},null,this))}cancel(){me(_(this,rl)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=Ree.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();me(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new BI(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,L(s,ic,Object.assign({},_(this,ic))),_(this,as)&&L(s,as,new Uint8Array(_(this,as))),L(s,Po,_(this,Po)),s}clone(){const e=new BI(this.url);return L(e,bu,_(this,bu)),_(this,as)&&L(e,as,_(this,as)),L(e,Po,_(this,Po)),L(e,ic,Object.assign({},_(this,ic))),L(e,vu,_(this,vu)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),L(e,jp,_(this,jp)),L(e,Wp,_(this,Wp)),L(e,zp,_(this,zp)),L(e,oc,Object.assign({},_(this,oc))),L(e,uh,_(this,uh)),e}static lockConfig(){HO=!0}static getGateway(e){return zA[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(HO)throw new Error("gateways locked");zA[e]=n}static registerGetUrl(e){if(HO)throw new Error("gateways locked");y7=e}static createGetUrlFunc(e){return Iee(e)}static createDataGateway(){return Nee}static createIpfsGatewayFunc(e){return Tee(e)}};g0=new WeakMap,m0=new WeakMap,ic=new WeakMap,bu=new WeakMap,y0=new WeakMap,w0=new WeakMap,as=new WeakMap,Po=new WeakMap,vu=new WeakMap,jp=new WeakMap,Wp=new WeakMap,zp=new WeakMap,rl=new WeakMap,oc=new WeakMap,uh=new WeakMap,Hp=new WeakSet,Dv=async function(e,n,r,s,i){var u,d,h;if(e>=_(this,oc).maxAttempts)return i.makeServerError("exceeded maximum retry limit");me(w7()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await K7e(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in zA){const f=await zA[a](o.url,HA(_(s,rl)));if(f instanceof sf){let p=f;if(this.processFunc){HA(_(s,rl));try{p=await this.processFunc(o,p)}catch(g){(g.throttle==null||typeof g.stall!="number")&&p.makeServerError("error in post-processing function",g).assertOk()}}return p}o=f}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,HA(_(s,rl)));let l=new sf(c.statusCode,c.statusMessage,c.headers,c.body,s);if(l.statusCode===301||l.statusCode===302){try{const f=l.headers.location||"";return de(u=o.redirect(f),Hp,Dv).call(u,e+1,n,0,s,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,e))){const f=l.headers["retry-after"];let p=_(this,oc).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof f=="string"&&f.match(/^[1-9][0-9]*$/)&&(p=parseInt(f)),de(d=o.clone(),Hp,Dv).call(d,e+1,n,p,s,l)}if(this.processFunc){HA(_(s,rl));try{l=await this.processFunc(o,l)}catch(f){(f.throttle==null||typeof f.stall!="number")&&l.makeServerError("error in post-processing function",f).assertOk();let p=_(this,oc).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return f.stall>=0&&(p=f.stall),de(h=o.clone(),Hp,Dv).call(h,e+1,n,p,s,l)}}return l};let vf=BI;var u_,d_,h_,Oo,b0,Gp;const dB=class dB{constructor(e,n,r,s,i){Y(this,u_);Y(this,d_);Y(this,h_);Y(this,Oo);Y(this,b0);Y(this,Gp);L(this,u_,e),L(this,d_,n),L(this,h_,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),L(this,Oo,s==null?null:new Uint8Array(s)),L(this,b0,i||null),L(this,Gp,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${_(this,Oo)?Oe(_(this,Oo)):"null"}>`}get statusCode(){return _(this,u_)}get statusMessage(){return _(this,d_)}get headers(){return Object.assign({},_(this,h_))}get body(){return _(this,Oo)==null?null:new Uint8Array(_(this,Oo))}get bodyText(){try{return _(this,Oo)==null?"":xI(_(this,Oo))}catch{me(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{me(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new dB(599,r,this.headers,this.body,_(this,b0)||void 0);return L(s,Gp,{message:e,error:n}),s}throwThrottleError(e,n){n==null?n=-1:J(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw wt(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return _(this,Oo)!=null}get request(){return _(this,b0)}ok(){return _(this,Gp).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=_(this,Gp);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{_(this,Oo)&&(s=xI(_(this,Oo)))}catch{}me(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};u_=new WeakMap,d_=new WeakMap,h_=new WeakMap,Oo=new WeakMap,b0=new WeakMap,Gp=new WeakMap;let sf=dB;function w7(){return new Date().getTime()}function V7e(t){return qu(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function K7e(t){return new Promise(e=>setTimeout(e,t))}function Y7e(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function b7(t,e,n){let r=0;for(let s=0;s<n;s++)r=r*256+t[e+s];return r}function v7(t,e,n,r){const s=[];for(;n<e+1+r;){const i=Pee(t,n);s.push(i.result),n+=i.consumed,me(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:s}}function Pee(t,e){me(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{me(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const s=b7(t,e+1,r);return n(e+1+r+s),v7(t,e,e+1+r,r+s)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),v7(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const s=b7(t,e+1,r);n(e+1+r+s);const i=Oe(t.slice(e+1+r,e+1+r+s));return{consumed:1+r+s,result:i}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const s=Oe(t.slice(e+1,e+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:Y7e(t[e])}}function w1(t){const e=Yt(t,"data"),n=Pee(e,0);return J(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function E7(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function Oee(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(i){r=r.concat(Oee(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=E7(r.length);return s.unshift(247+s.length),s.concat(r)}const e=Array.prototype.slice.call(Yt(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=E7(e.length);return n.unshift(183+n.length),n.concat(e)}const C7="0123456789abcdef";function Ef(t){let e="0x";for(const n of Oee(t))e+=C7[n>>4],e+=C7[n&15];return e}const vi=32,Q3=new Uint8Array(vi),Q7e=["then"],GA={},kee=new WeakMap;function lp(t){return kee.get(t)}function _7(t,e){kee.set(t,e)}function pv(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function J3(t,e,n){return t.indexOf(null)>=0?e.map((r,s)=>r instanceof Uw?J3(lp(r),r,n):r):t.reduce((r,s,i)=>{let o=e.getValue(s);return s in r||(n&&o instanceof Uw&&(o=J3(lp(o),o,n)),r[s]=o),r},{})}var v0;const Oy=class Oy extends Array{constructor(...n){const r=n[0];let s=n[1],i=(n[2]||[]).slice(),o=!0;r!==GA&&(s=n,i=[],o=!1);super(s.length);Y(this,v0);s.forEach((l,u)=>{this[u]=l});const a=i.reduce((l,u)=>(typeof u=="string"&&l.set(u,(l.get(u)||0)+1),l),new Map);if(_7(this,Object.freeze(s.map((l,u)=>{const d=i[u];return d!=null&&a.get(d)===1?d:null}))),L(this,v0,[]),_(this,v0)==null&&_(this,v0),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(l,u,d)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const f=Qt(u,"%index");if(f<0||f>=this.length)throw new RangeError("out of result range");const p=l[f];return p instanceof Error&&pv(`index ${f}`,p),p}if(Q7e.indexOf(u)>=0)return Reflect.get(l,u,d);const h=l[u];if(h instanceof Function)return function(...f){return h.apply(this===d?l:this,f)};if(!(u in l))return l.getValue.apply(this===d?l:this,[u])}return Reflect.get(l,u,d)}});return _7(c,lp(this)),c}toArray(n){const r=[];return this.forEach((s,i)=>{s instanceof Error&&pv(`index ${i}`,s),n&&s instanceof Oy&&(s=s.toArray(n)),r.push(s)}),r}toObject(n){const r=lp(this);return r.reduce((s,i,o)=>(me(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),J3(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=lp(this),i=[],o=[];for(let a=n;a<r;a++)i.push(this[a]),o.push(s[a]);return new Oy(GA,i,o)}filter(n,r){const s=lp(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&pv(`index ${a}`,c),n.call(r,c,a,this)&&(i.push(c),o.push(s[a]))}return new Oy(GA,i,o)}map(n,r){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&pv(`index ${i}`,o),s.push(n.call(r,o,i,this))}return s}getValue(n){const r=lp(this).indexOf(n);if(r===-1)return;const s=this[r];return s instanceof Error&&pv(`property ${JSON.stringify(n)}`,s.error),s}static fromItems(n,r){return new Oy(GA,n,r)}};v0=new WeakMap;let Uw=Oy;function A7(t){let e=Zr(t);return me(e.length<=vi,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:vi,offset:e.length}),e.length!==vi&&(e=yi(Ir([Q3.slice(e.length%vi),e]))),e}class hd{constructor(e,n,r,s){se(this,"name");se(this,"type");se(this,"localName");se(this,"dynamic");wt(this,{name:e,type:n,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){J(!1,e,this.localName,n)}}var Eu,qp,E0,US;class Z3{constructor(){Y(this,E0);Y(this,Eu);Y(this,qp);L(this,Eu,[]),L(this,qp,0)}get data(){return Ir(_(this,Eu))}get length(){return _(this,qp)}appendWriter(e){return de(this,E0,US).call(this,yi(e.data))}writeBytes(e){let n=yi(e);const r=n.length%vi;return r&&(n=yi(Ir([n,Q3.slice(r)]))),de(this,E0,US).call(this,n)}writeValue(e){return de(this,E0,US).call(this,A7(e))}writeUpdatableValue(){const e=_(this,Eu).length;return _(this,Eu).push(Q3),L(this,qp,_(this,qp)+vi),n=>{_(this,Eu)[e]=A7(n)}}}Eu=new WeakMap,qp=new WeakMap,E0=new WeakSet,US=function(e){return _(this,Eu).push(e),L(this,qp,_(this,qp)+e.length),e.length};var Gi,ko,Vp,Kp,dh,Yg,e5,Dee;const hB=class hB{constructor(e,n,r){Y(this,Yg);se(this,"allowLoose");Y(this,Gi);Y(this,ko);Y(this,Vp);Y(this,Kp);Y(this,dh);wt(this,{allowLoose:!!n}),L(this,Gi,yi(e)),L(this,Vp,0),L(this,Kp,null),L(this,dh,r??1024),L(this,ko,0)}get data(){return Oe(_(this,Gi))}get dataLength(){return _(this,Gi).length}get consumed(){return _(this,ko)}get bytes(){return new Uint8Array(_(this,Gi))}subReader(e){const n=new hB(_(this,Gi).slice(_(this,ko)+e),this.allowLoose,_(this,dh));return L(n,Kp,this),n}readBytes(e,n){let r=de(this,Yg,Dee).call(this,0,e,!!n);return de(this,Yg,e5).call(this,e),L(this,ko,_(this,ko)+r.length),r.slice(0,e)}readValue(){return VU(this.readBytes(vi))}readIndex(){return k7e(this.readBytes(vi))}};Gi=new WeakMap,ko=new WeakMap,Vp=new WeakMap,Kp=new WeakMap,dh=new WeakMap,Yg=new WeakSet,e5=function(e){var n;if(_(this,Kp))return de(n=_(this,Kp),Yg,e5).call(n,e);L(this,Vp,_(this,Vp)+e),me(_(this,dh)<1||_(this,Vp)<=_(this,dh)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${_(this,dh)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:yi(_(this,Gi)),offset:_(this,ko),length:e,info:{bytesRead:_(this,Vp),dataLength:this.dataLength}})},Dee=function(e,n,r){let s=Math.ceil(n/vi)*vi;return _(this,ko)+s>_(this,Gi).length&&(this.allowLoose&&r&&_(this,ko)+n<=_(this,Gi).length?s=n:me(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:yi(_(this,Gi)),length:_(this,Gi).length,offset:_(this,ko)+s})),_(this,Gi).slice(_(this,ko),_(this,ko)+s)};let X3=hB;function II(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function KU(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function J7e(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");II(t.outputLen),II(t.blockLen)}function Bw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Mee(t,e){KU(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const GO=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Lee=t=>t instanceof Uint8Array,Z7e=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),qO=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Kc=(t,e)=>t<<32-e|t>>>e,X7e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!X7e)throw new Error("Non little-endian hardware is not supported");function eWe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function UT(t){if(typeof t=="string"&&(t=eWe(t)),!Lee(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function tWe(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!Lee(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class YU{clone(){return this._cloneInto()}}function QU(t){const e=r=>t().update(UT(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function nWe(t=32){if(GO&&typeof GO.getRandomValues=="function")return GO.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class Uee extends YU{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,J7e(e);const r=UT(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Bw(this),this.iHash.update(e),this}digestInto(e){Bw(this),KU(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Bee=(t,e,n)=>new Uee(t,e).update(n).digest();Bee.create=(t,e)=>new Uee(t,e);function rWe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}class $ee extends YU{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=qO(this.buffer)}update(e){Bw(this);const{view:n,buffer:r,blockLen:s}=this;e=UT(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=qO(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Bw(this),Mee(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;rWe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=qO(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const sWe=(t,e,n)=>t&e^~t&n,iWe=(t,e,n)=>t&e^t&n^e&n,oWe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Dd=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Md=new Uint32Array(64);class aWe extends $ee{constructor(){super(64,32,8,!1),this.A=Dd[0]|0,this.B=Dd[1]|0,this.C=Dd[2]|0,this.D=Dd[3]|0,this.E=Dd[4]|0,this.F=Dd[5]|0,this.G=Dd[6]|0,this.H=Dd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Md[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Md[d-15],f=Md[d-2],p=Kc(h,7)^Kc(h,18)^h>>>3,g=Kc(f,17)^Kc(f,19)^f>>>10;Md[d]=g+Md[d-7]+p+Md[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Kc(a,6)^Kc(a,11)^Kc(a,25),f=u+h+sWe(a,c,l)+oWe[d]+Md[d]|0,g=(Kc(r,2)^Kc(r,13)^Kc(r,22))+iWe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Md.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Fee=QU(()=>new aWe),qA=BigInt(2**32-1),t5=BigInt(32);function jee(t,e=!1){return e?{h:Number(t&qA),l:Number(t>>t5&qA)}:{h:Number(t>>t5&qA)|0,l:Number(t&qA)|0}}function Wee(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=jee(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const cWe=(t,e)=>BigInt(t>>>0)<<t5|BigInt(e>>>0),lWe=(t,e,n)=>t>>>n,uWe=(t,e,n)=>t<<32-n|e>>>n,dWe=(t,e,n)=>t>>>n|e<<32-n,hWe=(t,e,n)=>t<<32-n|e>>>n,fWe=(t,e,n)=>t<<64-n|e>>>n-32,pWe=(t,e,n)=>t>>>n-32|e<<64-n,gWe=(t,e)=>e,mWe=(t,e)=>t,zee=(t,e,n)=>t<<n|e>>>32-n,Hee=(t,e,n)=>e<<n|t>>>32-n,Gee=(t,e,n)=>e<<n-32|t>>>64-n,qee=(t,e,n)=>t<<n-32|e>>>64-n;function yWe(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const wWe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),bWe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,vWe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),EWe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,CWe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),_We=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Ft={fromBig:jee,split:Wee,toBig:cWe,shrSH:lWe,shrSL:uWe,rotrSH:dWe,rotrSL:hWe,rotrBH:fWe,rotrBL:pWe,rotr32H:gWe,rotr32L:mWe,rotlSH:zee,rotlSL:Hee,rotlBH:Gee,rotlBL:qee,add:yWe,add3L:wWe,add3H:bWe,add4L:vWe,add4H:EWe,add5H:_We,add5L:CWe},[AWe,SWe]=Ft.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ld=new Uint32Array(80),Ud=new Uint32Array(80);class xWe extends $ee{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let v=0;v<16;v++,n+=4)Ld[v]=e.getUint32(n),Ud[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const A=Ld[v-15]|0,C=Ud[v-15]|0,T=Ft.rotrSH(A,C,1)^Ft.rotrSH(A,C,8)^Ft.shrSH(A,C,7),x=Ft.rotrSL(A,C,1)^Ft.rotrSL(A,C,8)^Ft.shrSL(A,C,7),N=Ld[v-2]|0,S=Ud[v-2]|0,D=Ft.rotrSH(N,S,19)^Ft.rotrBH(N,S,61)^Ft.shrSH(N,S,6),P=Ft.rotrSL(N,S,19)^Ft.rotrBL(N,S,61)^Ft.shrSL(N,S,6),$=Ft.add4L(x,P,Ud[v-7],Ud[v-16]),G=Ft.add4H($,T,D,Ld[v-7],Ld[v-16]);Ld[v]=G|0,Ud[v]=$|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:m,Hl:b}=this;for(let v=0;v<80;v++){const A=Ft.rotrSH(d,h,14)^Ft.rotrSH(d,h,18)^Ft.rotrBH(d,h,41),C=Ft.rotrSL(d,h,14)^Ft.rotrSL(d,h,18)^Ft.rotrBL(d,h,41),T=d&f^~d&g,x=h&p^~h&w,N=Ft.add5L(b,C,x,SWe[v],Ud[v]),S=Ft.add5H(N,m,A,T,AWe[v],Ld[v]),D=N|0,P=Ft.rotrSH(r,s,28)^Ft.rotrBH(r,s,34)^Ft.rotrBH(r,s,39),$=Ft.rotrSL(r,s,28)^Ft.rotrBL(r,s,34)^Ft.rotrBL(r,s,39),G=r&i^r&a^i&a,W=s&o^s&c^o&c;m=g|0,b=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=Ft.add(l|0,u|0,S|0,D|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=Ft.add3L(D,$,W);r=Ft.add3H(I,S,P,G),s=I|0}({h:r,l:s}=Ft.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Ft.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Ft.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Ft.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Ft.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Ft.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=Ft.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:m,l:b}=Ft.add(this.Hh|0,this.Hl|0,m|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,w,m,b)}roundClean(){Ld.fill(0),Ud.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const IWe=QU(()=>new xWe);function NWe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const S7=NWe();S7.crypto||S7.msCrypto;function TWe(t){switch(t){case"sha256":return Fee.create();case"sha512":return IWe.create()}J(!1,"invalid hashing algorithm name","algorithm",t)}const[Vee,Kee,Yee]=[[],[],[]],RWe=BigInt(0),gv=BigInt(1),PWe=BigInt(2),OWe=BigInt(7),kWe=BigInt(256),DWe=BigInt(113);for(let t=0,e=gv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Vee.push(2*(5*r+n)),Kee.push((t+1)*(t+2)/2%64);let s=RWe;for(let i=0;i<7;i++)e=(e<<gv^(e>>OWe)*DWe)%kWe,e&PWe&&(s^=gv<<(gv<<BigInt(i))-gv);Yee.push(s)}const[MWe,LWe]=Wee(Yee,!0),x7=(t,e,n)=>n>32?Gee(t,e,n):zee(t,e,n),I7=(t,e,n)=>n>32?qee(t,e,n):Hee(t,e,n);function UWe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=x7(l,u,1)^n[a],h=I7(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Kee[o],c=x7(s,i,a),l=I7(s,i,a),u=Vee[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=MWe[r],t[1]^=LWe[r]}n.fill(0)}class JU extends YU{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,II(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Z7e(this.state)}keccak(){UWe(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Bw(this);const{blockLen:n,state:r}=this;e=UT(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Bw(this,!1),KU(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return II(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Mee(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new JU(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const BWe=(t,e,n)=>QU(()=>new JU(e,t,n)),$We=BWe(1,136,256/8);let Qee=!1;const Jee=function(t){return $We(t)};let Zee=Jee;function Fr(t){const e=Yt(t,"data");return Oe(Zee(e))}Fr._=Jee;Fr.lock=function(){Qee=!0};Fr.register=function(t){if(Qee)throw new TypeError("keccak256 is locked");Zee=t};Object.freeze(Fr);const Xee=function(t){return TWe("sha256").update(t).digest()};let ete=Xee,tte=!1;function vb(t){const e=Yt(t,"data");return Oe(ete(e))}vb._=Xee;vb.lock=function(){tte=!0};vb.register=function(t){if(tte)throw new Error("sha256 is locked");ete=t};Object.freeze(vb);Object.freeze(vb);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nte=BigInt(0),BT=BigInt(1),FWe=BigInt(2),$T=t=>t instanceof Uint8Array,jWe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function $w(t){if(!$T(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=jWe[t[n]];return e}function rte(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function ZU(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function Fw(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const s=r*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function gg(t){return ZU($w(t))}function XU(t){if(!$T(t))throw new Error("Uint8Array expected");return ZU($w(Uint8Array.from(t).reverse()))}function jw(t,e){return Fw(t.toString(16).padStart(e*2,"0"))}function eB(t,e){return jw(t,e).reverse()}function WWe(t){return Fw(rte(t))}function nc(t,e,n){let r;if(typeof e=="string")try{r=Fw(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if($T(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function YC(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!$T(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function zWe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function HWe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function GWe(t){let e;for(e=0;t>nte;t>>=BT,e+=1);return e}function qWe(t,e){return t>>BigInt(e)&BT}const VWe=(t,e,n)=>t|(n?BT:nte)<<BigInt(e),tB=t=>(FWe<<BigInt(t-1))-BT,VO=t=>new Uint8Array(t),N7=t=>Uint8Array.from(t);function ste(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=VO(t),s=VO(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=VO())=>{s=a(N7([0]),d),r=a(),d.length!==0&&(s=a(N7([1]),d),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return YC(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const KWe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function b1(t,e,n={}){const r=(s,i,o)=>{const a=KWe[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const YWe=Object.freeze(Object.defineProperty({__proto__:null,bitGet:qWe,bitLen:GWe,bitMask:tB,bitSet:VWe,bytesToHex:$w,bytesToNumberBE:gg,bytesToNumberLE:XU,concatBytes:YC,createHmacDrbg:ste,ensureBytes:nc,equalBytes:zWe,hexToBytes:Fw,hexToNumber:ZU,numberToBytesBE:jw,numberToBytesLE:eB,numberToHexUnpadded:rte,numberToVarBytesBE:WWe,utf8ToBytes:HWe,validateObject:b1},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bs=BigInt(0),Mr=BigInt(1),up=BigInt(2),QWe=BigInt(3),n5=BigInt(4),T7=BigInt(5),R7=BigInt(8);BigInt(9);BigInt(16);function Ji(t,e){const n=t%e;return n>=bs?n:e+n}function JWe(t,e,n){if(n<=bs||e<bs)throw new Error("Expected power/modulo > 0");if(n===Mr)return bs;let r=Mr;for(;e>bs;)e&Mr&&(r=r*t%n),t=t*t%n,e>>=Mr;return r}function ca(t,e,n){let r=t;for(;e-- >bs;)r*=r,r%=n;return r}function r5(t,e){if(t===bs||e<=bs)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Ji(t,e),r=e,s=bs,i=Mr;for(;n!==bs;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Mr)throw new Error("invert: does not exist");return Ji(s,e)}function ZWe(t){const e=(t-Mr)/up;let n,r,s;for(n=t-Mr,r=0;n%up===bs;n/=up,r++);for(s=up;s<t&&JWe(s,e,t)!==t-Mr;s++);if(r===1){const o=(t+Mr)/n5;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(n+Mr)/up;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,s),n),d=a.pow(c,i),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(h);f<l&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const p=a.pow(u,Mr<<BigInt(l-f-1));u=a.sqr(p),d=a.mul(d,p),h=a.mul(h,u),l=f}return d}}function XWe(t){if(t%n5===QWe){const e=(t+Mr)/n5;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%R7===T7){const e=(t-T7)/R7;return function(r,s){const i=r.mul(s,up),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,up),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return ZWe(t)}const eze=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function tze(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=eze.reduce((r,s)=>(r[s]="function",r),e);return b1(t,n)}function nze(t,e,n){if(n<bs)throw new Error("Expected power > 0");if(n===bs)return t.ONE;if(n===Mr)return e;let r=t.ONE,s=e;for(;n>bs;)n&Mr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Mr;return r}function rze(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function ite(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function sze(t,e,n=!1,r={}){if(t<=bs)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=ite(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=XWe(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:tB(s),ZERO:bs,ONE:Mr,create:c=>Ji(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return bs<=c&&c<t},is0:c=>c===bs,isOdd:c=>(c&Mr)===Mr,neg:c=>Ji(-c,t),eql:(c,l)=>c===l,sqr:c=>Ji(c*c,t),add:(c,l)=>Ji(c+l,t),sub:(c,l)=>Ji(c-l,t),mul:(c,l)=>Ji(c*l,t),pow:(c,l)=>nze(a,c,l),div:(c,l)=>Ji(c*r5(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>r5(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>rze(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?eB(c,i):jw(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?XU(c):gg(c)}});return Object.freeze(a)}function ote(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function ate(t){const e=ote(t);return e+Math.ceil(e/2)}function ize(t,e,n=!1){const r=t.length,s=ote(e),i=ate(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=n?gg(t):XU(t),a=Ji(o,e-Mr)+Mr;return n?eB(a,s):jw(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const oze=BigInt(0),KO=BigInt(1);function aze(t,e){const n=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>oze;)i&KO&&(o=o.add(a)),a=a.double(),i>>=KO;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=r(i),c=[];let l=s,u=l;for(let d=0;d<o;d++){u=l,c.push(u);for(let h=1;h<a;h++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=r(s);let l=t.ZERO,u=t.BASE;const d=BigInt(2**s-1),h=2**s,f=BigInt(s);for(let p=0;p<a;p++){const g=p*c;let w=Number(o&d);o>>=f,w>c&&(w-=h,o+=KO);const m=g,b=g+Math.abs(w)-1,v=p%2!==0,A=w<0;w===0?u=u.add(n(v,i[m])):l=l.add(n(A,i[b]))}return{p:l,f:u}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function cte(t){return tze(t.Fp),b1(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ite(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function cze(t){const e=cte(t);b1(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:lze,hexToBytes:uze}=YWe,Np={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Np;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:lze(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Np,n=typeof t=="string"?uze(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=Np._parseInt(n.subarray(2)),{d:o,l:a}=Np._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,o=s.length/2,a=n(i),c=n(o);return`30${n(o+i+4)}02${c}${s}02${a}${r}`}},Ou=BigInt(0),Ea=BigInt(1);BigInt(2);const P7=BigInt(3);BigInt(4);function dze(t){const e=cze(t),{Fp:n}=e,r=e.toBytes||((p,g,w)=>{const m=g.toAffine();return YC(Uint8Array.from([4]),n.toBytes(m.x),n.toBytes(m.y))}),s=e.fromBytes||(p=>{const g=p.subarray(1),w=n.fromBytes(g.subarray(0,n.BYTES)),m=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:w,y:m}});function i(p){const{a:g,b:w}=e,m=n.sqr(p),b=n.mul(m,p);return n.add(n.add(b,n.mul(p,g)),w)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&Ou<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:g,nByteLength:w,wrapPrivateKey:m,n:b}=e;if(g&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=$w(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(w*2,"0")}let v;try{v=typeof p=="bigint"?p:gg(nc("private key",p,w))}catch{throw new Error(`private key must be ${w} bytes, hex or bigint, not ${typeof p}`)}return m&&(v=Ji(v,b)),a(v),v}const l=new Map;function u(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(g,w,m){if(this.px=g,this.py=w,this.pz=m,g==null||!n.isValid(g))throw new Error("x required");if(w==null||!n.isValid(w))throw new Error("y required");if(m==null||!n.isValid(m))throw new Error("z required")}static fromAffine(g){const{x:w,y:m}=g||{};if(!g||!n.isValid(w)||!n.isValid(m))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const b=v=>n.eql(v,n.ZERO);return b(w)&&b(m)?d.ZERO:new d(w,m,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const w=n.invertBatch(g.map(m=>m.pz));return g.map((m,b)=>m.toAffine(w[b])).map(d.fromAffine)}static fromHex(g){const w=d.fromAffine(s(nc("pointHex",g)));return w.assertValidity(),w}static fromPrivateKey(g){return d.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y:w}=this.toAffine();if(!n.isValid(g)||!n.isValid(w))throw new Error("bad point: x or y not FE");const m=n.sqr(w),b=i(g);if(!n.eql(m,b))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:w,py:m,pz:b}=this,{px:v,py:A,pz:C}=g,T=n.eql(n.mul(w,C),n.mul(v,b)),x=n.eql(n.mul(m,C),n.mul(A,b));return T&&x}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:w}=e,m=n.mul(w,P7),{px:b,py:v,pz:A}=this;let C=n.ZERO,T=n.ZERO,x=n.ZERO,N=n.mul(b,b),S=n.mul(v,v),D=n.mul(A,A),P=n.mul(b,v);return P=n.add(P,P),x=n.mul(b,A),x=n.add(x,x),C=n.mul(g,x),T=n.mul(m,D),T=n.add(C,T),C=n.sub(S,T),T=n.add(S,T),T=n.mul(C,T),C=n.mul(P,C),x=n.mul(m,x),D=n.mul(g,D),P=n.sub(N,D),P=n.mul(g,P),P=n.add(P,x),x=n.add(N,N),N=n.add(x,N),N=n.add(N,D),N=n.mul(N,P),T=n.add(T,N),D=n.mul(v,A),D=n.add(D,D),N=n.mul(D,P),C=n.sub(C,N),x=n.mul(D,S),x=n.add(x,x),x=n.add(x,x),new d(C,T,x)}add(g){u(g);const{px:w,py:m,pz:b}=this,{px:v,py:A,pz:C}=g;let T=n.ZERO,x=n.ZERO,N=n.ZERO;const S=e.a,D=n.mul(e.b,P7);let P=n.mul(w,v),$=n.mul(m,A),G=n.mul(b,C),W=n.add(w,m),I=n.add(v,A);W=n.mul(W,I),I=n.add(P,$),W=n.sub(W,I),I=n.add(w,b);let R=n.add(v,C);return I=n.mul(I,R),R=n.add(P,G),I=n.sub(I,R),R=n.add(m,b),T=n.add(A,C),R=n.mul(R,T),T=n.add($,G),R=n.sub(R,T),N=n.mul(S,I),T=n.mul(D,G),N=n.add(T,N),T=n.sub($,N),N=n.add($,N),x=n.mul(T,N),$=n.add(P,P),$=n.add($,P),G=n.mul(S,G),I=n.mul(D,I),$=n.add($,G),G=n.sub(P,G),G=n.mul(S,G),I=n.add(I,G),P=n.mul($,I),x=n.add(x,P),P=n.mul(R,I),T=n.mul(W,T),T=n.sub(T,P),P=n.mul(W,$),N=n.mul(R,N),N=n.add(N,P),new d(T,x,N)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return f.wNAFCached(this,l,g,w=>{const m=n.invertBatch(w.map(b=>b.pz));return w.map((b,v)=>b.toAffine(m[v])).map(d.fromAffine)})}multiplyUnsafe(g){const w=d.ZERO;if(g===Ou)return w;if(a(g),g===Ea)return this;const{endo:m}=e;if(!m)return f.unsafeLadder(this,g);let{k1neg:b,k1:v,k2neg:A,k2:C}=m.splitScalar(g),T=w,x=w,N=this;for(;v>Ou||C>Ou;)v&Ea&&(T=T.add(N)),C&Ea&&(x=x.add(N)),N=N.double(),v>>=Ea,C>>=Ea;return b&&(T=T.negate()),A&&(x=x.negate()),x=new d(n.mul(x.px,m.beta),x.py,x.pz),T.add(x)}multiply(g){a(g);let w=g,m,b;const{endo:v}=e;if(v){const{k1neg:A,k1:C,k2neg:T,k2:x}=v.splitScalar(w);let{p:N,f:S}=this.wNAF(C),{p:D,f:P}=this.wNAF(x);N=f.constTimeNegate(A,N),D=f.constTimeNegate(T,D),D=new d(n.mul(D.px,v.beta),D.py,D.pz),m=N.add(D),b=S.add(P)}else{const{p:A,f:C}=this.wNAF(w);m=A,b=C}return d.normalizeZ([m,b])[0]}multiplyAndAddUnsafe(g,w,m){const b=d.BASE,v=(C,T)=>T===Ou||T===Ea||!C.equals(b)?C.multiplyUnsafe(T):C.multiply(T),A=v(this,w).add(v(g,m));return A.is0()?void 0:A}toAffine(g){const{px:w,py:m,pz:b}=this,v=this.is0();g==null&&(g=v?n.ONE:n.inv(b));const A=n.mul(w,g),C=n.mul(m,g),T=n.mul(b,g);if(v)return{x:n.ZERO,y:n.ZERO};if(!n.eql(T,n.ONE))throw new Error("invZ was invalid");return{x:A,y:C}}isTorsionFree(){const{h:g,isTorsionFree:w}=e;if(g===Ea)return!0;if(w)return w(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:w}=e;return g===Ea?this:w?w(d,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),r(d,this,g)}toHex(g=!0){return $w(this.toRawBytes(g))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,f=aze(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function hze(t){const e=cte(t);return b1(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function fze(t){const e=hze(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(I){return Ou<I&&I<n.ORDER}function a(I){return Ji(I,r)}function c(I){return r5(I,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:h}=dze({...e,toBytes(I,R,B){const O=R.toAffine(),M=n.toBytes(O.x),j=YC;return B?j(Uint8Array.from([R.hasEvenY()?2:3]),M):j(Uint8Array.from([4]),M,n.toBytes(O.y))},fromBytes(I){const R=I.length,B=I[0],O=I.subarray(1);if(R===s&&(B===2||B===3)){const M=gg(O);if(!o(M))throw new Error("Point is not on curve");const j=d(M);let V=n.sqrt(j);const te=(V&Ea)===Ea;return(B&1)===1!==te&&(V=n.neg(V)),{x:M,y:V}}else if(R===i&&B===4){const M=n.fromBytes(O.subarray(0,n.BYTES)),j=n.fromBytes(O.subarray(n.BYTES,2*n.BYTES));return{x:M,y:j}}else throw new Error(`Point of length ${R} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=I=>$w(jw(I,e.nByteLength));function p(I){const R=r>>Ea;return I>R}function g(I){return p(I)?a(-I):I}const w=(I,R,B)=>gg(I.slice(R,B));class m{constructor(R,B,O){this.r=R,this.s=B,this.recovery=O,this.assertValidity()}static fromCompact(R){const B=e.nByteLength;return R=nc("compactSignature",R,B*2),new m(w(R,0,B),w(R,B,2*B))}static fromDER(R){const{r:B,s:O}=Np.toSig(nc("DER",R));return new m(B,O)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(R){return new m(this.r,this.s,R)}recoverPublicKey(R){const{r:B,s:O,recovery:M}=this,j=x(nc("msgHash",R));if(M==null||![0,1,2,3].includes(M))throw new Error("recovery id invalid");const V=M===2||M===3?B+e.n:B;if(V>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const te=M&1?"03":"02",Z=l.fromHex(te+f(V)),X=c(V),ce=a(-j*X),ge=a(O*X),Me=l.BASE.multiplyAndAddUnsafe(Z,ce,ge);if(!Me)throw new Error("point at infinify");return Me.assertValidity(),Me}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Fw(this.toDERHex())}toDERHex(){return Np.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Fw(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const b={isValidPrivateKey(I){try{return u(I),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const I=ate(e.n);return ize(e.randomBytes(I),e.n)},precompute(I=8,R=l.BASE){return R._setWindowSize(I),R.multiply(BigInt(3)),R}};function v(I,R=!0){return l.fromPrivateKey(I).toRawBytes(R)}function A(I){const R=I instanceof Uint8Array,B=typeof I=="string",O=(R||B)&&I.length;return R?O===s||O===i:B?O===2*s||O===2*i:I instanceof l}function C(I,R,B=!0){if(A(I))throw new Error("first arg must be private key");if(!A(R))throw new Error("second arg must be public key");return l.fromHex(R).multiply(u(I)).toRawBytes(B)}const T=e.bits2int||function(I){const R=gg(I),B=I.length*8-e.nBitLength;return B>0?R>>BigInt(B):R},x=e.bits2int_modN||function(I){return a(T(I))},N=tB(e.nBitLength);function S(I){if(typeof I!="bigint")throw new Error("bigint expected");if(!(Ou<=I&&I<N))throw new Error(`bigint expected < 2^${e.nBitLength}`);return jw(I,e.nByteLength)}function D(I,R,B=P){if(["recovered","canonical"].some(Je=>Je in B))throw new Error("sign() legacy options not supported");const{hash:O,randomBytes:M}=e;let{lowS:j,prehash:V,extraEntropy:te}=B;j==null&&(j=!0),I=nc("msgHash",I),V&&(I=nc("prehashed msgHash",O(I)));const Z=x(I),X=u(R),ce=[S(X),S(Z)];if(te!=null){const Je=te===!0?M(n.BYTES):te;ce.push(nc("extraEntropy",Je))}const ge=YC(...ce),Me=Z;function it(Je){const bt=T(Je);if(!h(bt))return;const Nt=c(bt),At=l.BASE.multiply(bt).toAffine(),ne=a(At.x);if(ne===Ou)return;const ie=a(Nt*a(Me+ne*X));if(ie===Ou)return;let be=(At.x===ne?0:2)|Number(At.y&Ea),fe=ie;return j&&p(ie)&&(fe=g(ie),be^=1),new m(ne,fe,be)}return{seed:ge,k2sig:it}}const P={lowS:e.lowS,prehash:!1},$={lowS:e.lowS,prehash:!1};function G(I,R,B=P){const{seed:O,k2sig:M}=D(I,R,B),j=e;return ste(j.hash.outputLen,j.nByteLength,j.hmac)(O,M)}l.BASE._setWindowSize(8);function W(I,R,B,O=$){var At;const M=I;if(R=nc("msgHash",R),B=nc("publicKey",B),"strict"in O)throw new Error("options.strict was renamed to lowS");const{lowS:j,prehash:V}=O;let te,Z;try{if(typeof M=="string"||M instanceof Uint8Array)try{te=m.fromDER(M)}catch(ne){if(!(ne instanceof Np.Err))throw ne;te=m.fromCompact(M)}else if(typeof M=="object"&&typeof M.r=="bigint"&&typeof M.s=="bigint"){const{r:ne,s:ie}=M;te=new m(ne,ie)}else throw new Error("PARSE");Z=l.fromHex(B)}catch(ne){if(ne.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(j&&te.hasHighS())return!1;V&&(R=e.hash(R));const{r:X,s:ce}=te,ge=x(R),Me=c(ce),it=a(ge*Me),Je=a(X*Me),bt=(At=l.BASE.multiplyAndAddUnsafe(Z,it,Je))==null?void 0:At.toAffine();return bt?a(bt.x)===X:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:C,sign:G,verify:W,ProjectivePoint:l,Signature:m,utils:b}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function pze(t){return{hash:t,hmac:(e,...n)=>Bee(t,e,tWe(...n)),randomBytes:nWe}}function gze(t,e){const n=r=>fze({...t,...pze(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const lte=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),O7=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),mze=BigInt(1),s5=BigInt(2),k7=(t,e)=>(t+e/s5)/e;function yze(t){const e=lte,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=ca(u,n,e)*u%e,h=ca(d,n,e)*u%e,f=ca(h,s5,e)*l%e,p=ca(f,s,e)*f%e,g=ca(p,i,e)*p%e,w=ca(g,a,e)*g%e,m=ca(w,c,e)*w%e,b=ca(m,a,e)*g%e,v=ca(b,n,e)*u%e,A=ca(v,o,e)*p%e,C=ca(A,r,e)*l%e,T=ca(C,s5,e);if(!i5.eql(i5.sqr(T),t))throw new Error("Cannot find square root");return T}const i5=sze(lte,void 0,void 0,{sqrt:yze}),jd=gze({a:BigInt(0),b:BigInt(7),Fp:i5,n:O7,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=O7,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-mze*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=k7(i*t,e),c=k7(-r*t,e);let l=Ji(t-a*n-c*s,e),u=Ji(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},Fee);BigInt(0);jd.ProjectivePoint;const QC="0x0000000000000000000000000000000000000000",D7="0x0000000000000000000000000000000000000000000000000000000000000000",M7=BigInt(0),L7=BigInt(1),U7=BigInt(2),B7=BigInt(27),$7=BigInt(28),VA=BigInt(35),ty={};function F7(t){return id(Zr(t),32)}var C0,sl,_0,Yp;const Xa=class Xa{constructor(e,n,r,s){Y(this,C0);Y(this,sl);Y(this,_0);Y(this,Yp);DT(e,ty,"Signature"),L(this,C0,n),L(this,sl,r),L(this,_0,s),L(this,Yp,null)}get r(){return _(this,C0)}set r(e){J(Zy(e)===32,"invalid r","value",e),L(this,C0,Oe(e))}get s(){return J(parseInt(_(this,sl).substring(0,3))<8,"non-canonical s; use ._s","s",_(this,sl)),_(this,sl)}set s(e){J(Zy(e)===32,"invalid s","value",e),L(this,sl,Oe(e))}get _s(){return _(this,sl)}isValid(){return parseInt(_(this,sl).substring(0,3))<8}get v(){return _(this,_0)}set v(e){const n=Qt(e,"value");J(n===27||n===28,"invalid v","v",e),L(this,_0,n)}get networkV(){return _(this,Yp)}get legacyChainId(){const e=this.networkV;return e==null?null:Xa.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Yt(this.s);return this.yParity&&(e[0]|=128),Oe(e)}get compactSerialized(){return Ir([this.r,this.yParityAndS])}get serialized(){return Ir([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Xa(ty,this.r,this._s,this.v);return this.networkV&&L(e,Yp,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const n=Qe(e,"v");return n==B7||n==$7?M7:(J(n>=VA,"invalid EIP-155 v","v",e),(n-VA)/U7)}static getChainIdV(e,n){return Qe(e)*U7+BigInt(35+n-27)}static getNormalizedV(e){const n=Qe(e);return n===M7||n===B7?27:n===L7||n===$7?28:(J(n>=VA,"invalid v","v",e),n&L7?27:28)}static from(e){function n(l,u){J(l,u,"signature",e)}if(e==null)return new Xa(ty,D7,D7,27);if(typeof e=="string"){const l=Yt(e,"signature");if(l.length===64){const u=Oe(l.slice(0,32)),d=l.slice(32,64),h=d[0]&128?28:27;return d[0]&=127,new Xa(ty,u,Oe(d),h)}if(l.length===65){const u=Oe(l.slice(0,32)),d=Oe(l.slice(32,64)),h=Xa.getNormalizedV(l[64]);return new Xa(ty,u,d,h)}n(!1,"invalid raw signature length")}if(e instanceof Xa)return e.clone();const r=e.r;n(r!=null,"missing r");const s=F7(r),i=function(l,u){if(l!=null)return F7(l);if(u!=null){n(nr(u,32),"invalid yParityAndS");const d=Yt(u);return d[0]&=127,Oe(d)}n(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:a}=function(l,u,d){if(l!=null){const h=Qe(l);return{networkV:h>=VA?h:void 0,v:Xa.getNormalizedV(h)}}if(u!=null)return n(nr(u,32),"invalid yParityAndS"),{v:Yt(u)[0]&128?28:27};if(d!=null){switch(Qt(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new Xa(ty,s,i,a);return o&&L(c,Yp,o),n(e.yParity==null||Qt(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};C0=new WeakMap,sl=new WeakMap,_0=new WeakMap,Yp=new WeakMap;let uo=Xa;var Cu;const dp=class dp{constructor(e){Y(this,Cu);J(Zy(e)===32,"invalid private key","privateKey","[REDACTED]"),L(this,Cu,Oe(e))}get privateKey(){return _(this,Cu)}get publicKey(){return dp.computePublicKey(_(this,Cu))}get compressedPublicKey(){return dp.computePublicKey(_(this,Cu),!0)}sign(e){J(Zy(e)===32,"invalid digest length","digest",e);const n=jd.sign(yi(e),yi(_(this,Cu)),{lowS:!0});return uo.from({r:bf(n.r,32),s:bf(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=dp.computePublicKey(e);return Oe(jd.getSharedSecret(yi(_(this,Cu)),Yt(n),!1))}static computePublicKey(e,n){let r=Yt(e,"key");if(r.length===32){const i=jd.getPublicKey(r,!!n);return Oe(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=jd.ProjectivePoint.fromHex(r);return Oe(s.toRawBytes(n))}static recoverPublicKey(e,n){J(Zy(e)===32,"invalid digest length","digest",e);const r=uo.from(n);let s=jd.Signature.fromCompact(yi(Ir([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey(yi(e));return J(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,r){const s=jd.ProjectivePoint.fromHex(dp.computePublicKey(e).substring(2)),i=jd.ProjectivePoint.fromHex(dp.computePublicKey(n).substring(2));return"0x"+s.add(i).toHex(!!r)}};Cu=new WeakMap;let JC=dp;const wze=BigInt(0),bze=BigInt(36);function j7(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let s=0;s<40;s++)n[s]=e[s].charCodeAt(0);const r=Yt(Fr(n));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const nB={};for(let t=0;t<10;t++)nB[String(t)]=String(t);for(let t=0;t<26;t++)nB[String.fromCharCode(65+t)]=String(10+t);const W7=15;function vze(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>nB[r]).join("");for(;e.length>=W7;){let r=e.substring(0,W7);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const Eze=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function Cze(t){t=t.toLowerCase();let e=wze;for(let n=0;n<t.length;n++)e=e*bze+Eze[t[n]];return e}function Sn(t){if(J(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=j7(t);return J(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){J(t.substring(2,4)===vze(t),"bad icap checksum","address",t);let e=Cze(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return j7("0x"+e)}J(!1,"invalid address","address",t)}function _ze(t){const e=Sn(t.from);let r=Qe(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,Sn(_r(Fr(Ef([e,r])),12))}function ute(t){return t&&typeof t.getAddress=="function"}async function YO(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(me(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),J(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),Sn(n)}function Ei(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?Sn(t):(me(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),YO(t,e.resolveName(t)));if(ute(t))return YO(t,t.getAddress());if(t&&typeof t.then=="function")return YO(t,t);J(!1,"unsupported addressable value","target",t)}const du={};function He(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new ti(du,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function mn(t,e){return new ti(du,`bytes${e||""}`,t,{size:e})}const z7=Symbol.for("_ethers_typed");var Qp;const hu=class hu{constructor(e,n,r,s){se(this,"type");se(this,"value");Y(this,Qp);se(this,"_typedSymbol");s==null&&(s=null),DT(du,e,"Typed"),wt(this,{_typedSymbol:z7,type:n,value:r}),L(this,Qp,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return _(this,Qp)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return _(this,Qp)===!0?-1:_(this,Qp)===!1?this.value.length:null}static from(e,n){return new hu(du,e,n)}static uint8(e){return He(e,8)}static uint16(e){return He(e,16)}static uint24(e){return He(e,24)}static uint32(e){return He(e,32)}static uint40(e){return He(e,40)}static uint48(e){return He(e,48)}static uint56(e){return He(e,56)}static uint64(e){return He(e,64)}static uint72(e){return He(e,72)}static uint80(e){return He(e,80)}static uint88(e){return He(e,88)}static uint96(e){return He(e,96)}static uint104(e){return He(e,104)}static uint112(e){return He(e,112)}static uint120(e){return He(e,120)}static uint128(e){return He(e,128)}static uint136(e){return He(e,136)}static uint144(e){return He(e,144)}static uint152(e){return He(e,152)}static uint160(e){return He(e,160)}static uint168(e){return He(e,168)}static uint176(e){return He(e,176)}static uint184(e){return He(e,184)}static uint192(e){return He(e,192)}static uint200(e){return He(e,200)}static uint208(e){return He(e,208)}static uint216(e){return He(e,216)}static uint224(e){return He(e,224)}static uint232(e){return He(e,232)}static uint240(e){return He(e,240)}static uint248(e){return He(e,248)}static uint256(e){return He(e,256)}static uint(e){return He(e,256)}static int8(e){return He(e,-8)}static int16(e){return He(e,-16)}static int24(e){return He(e,-24)}static int32(e){return He(e,-32)}static int40(e){return He(e,-40)}static int48(e){return He(e,-48)}static int56(e){return He(e,-56)}static int64(e){return He(e,-64)}static int72(e){return He(e,-72)}static int80(e){return He(e,-80)}static int88(e){return He(e,-88)}static int96(e){return He(e,-96)}static int104(e){return He(e,-104)}static int112(e){return He(e,-112)}static int120(e){return He(e,-120)}static int128(e){return He(e,-128)}static int136(e){return He(e,-136)}static int144(e){return He(e,-144)}static int152(e){return He(e,-152)}static int160(e){return He(e,-160)}static int168(e){return He(e,-168)}static int176(e){return He(e,-176)}static int184(e){return He(e,-184)}static int192(e){return He(e,-192)}static int200(e){return He(e,-200)}static int208(e){return He(e,-208)}static int216(e){return He(e,-216)}static int224(e){return He(e,-224)}static int232(e){return He(e,-232)}static int240(e){return He(e,-240)}static int248(e){return He(e,-248)}static int256(e){return He(e,-256)}static int(e){return He(e,-256)}static bytes1(e){return mn(e,1)}static bytes2(e){return mn(e,2)}static bytes3(e){return mn(e,3)}static bytes4(e){return mn(e,4)}static bytes5(e){return mn(e,5)}static bytes6(e){return mn(e,6)}static bytes7(e){return mn(e,7)}static bytes8(e){return mn(e,8)}static bytes9(e){return mn(e,9)}static bytes10(e){return mn(e,10)}static bytes11(e){return mn(e,11)}static bytes12(e){return mn(e,12)}static bytes13(e){return mn(e,13)}static bytes14(e){return mn(e,14)}static bytes15(e){return mn(e,15)}static bytes16(e){return mn(e,16)}static bytes17(e){return mn(e,17)}static bytes18(e){return mn(e,18)}static bytes19(e){return mn(e,19)}static bytes20(e){return mn(e,20)}static bytes21(e){return mn(e,21)}static bytes22(e){return mn(e,22)}static bytes23(e){return mn(e,23)}static bytes24(e){return mn(e,24)}static bytes25(e){return mn(e,25)}static bytes26(e){return mn(e,26)}static bytes27(e){return mn(e,27)}static bytes28(e){return mn(e,28)}static bytes29(e){return mn(e,29)}static bytes30(e){return mn(e,30)}static bytes31(e){return mn(e,31)}static bytes32(e){return mn(e,32)}static address(e){return new hu(du,"address",e)}static bool(e){return new hu(du,"bool",!!e)}static bytes(e){return new hu(du,"bytes",e)}static string(e){return new hu(du,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new hu(du,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===z7}static dereference(e,n){if(hu.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};Qp=new WeakMap;let ti=hu;class Aze extends hd{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=ti.dereference(n,"string");try{r=Sn(r)}catch(s){return this._throwError(s.message,n)}return e.writeValue(r)}decode(e){return Sn(bf(e.readValue(),20))}}class Sze extends hd{constructor(n){super(n.name,n.type,"_",n.dynamic);se(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function dte(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(l=>{const u=l.localName;return me(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),me(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),c[u]=!0,n[u]})}else J(!1,"invalid tuple value","tuple",n);J(e.length===r.length,"types/value length mismatch","tuple",n);let s=new Z3,i=new Z3,o=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let d=i.length;c.encode(i,u);let h=s.writeUpdatableValue();o.push(f=>{h(f+d)})}else c.encode(s,u)}),o.forEach(c=>{c(s.length)});let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function hte(t,e){let n=[],r=[],s=t.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=t.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(l){if(ks(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(a){if(ks(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");n.push(o),r.push(i.localName||null)}),Uw.fromItems(n,r)}class xze extends hd{constructor(n,r,s){const i=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",i,s,o);se(this,"coder");se(this,"length");wt(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(n);return r}encode(n,r){const s=ti.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,n.writeValue(s.length)),Eee(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return dte(n,o,s)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),me(r*vi<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*vi,length:n.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new Sze(this.coder));return hte(n,s)}}class Ize extends hd{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=ti.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class fte extends hd{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=yi(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class Nze extends fte{constructor(e){super("bytes",e)}decode(e){return Oe(super.decode(e))}}class Tze extends hd{constructor(n,r){let s="bytes"+String(n);super(s,s,r,!1);se(this,"size");wt(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let s=yi(ti.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(s)}decode(n){return Oe(n.readBytes(this.size))}}const Rze=new Uint8Array([]);class Pze extends hd{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(Rze)}decode(e){return e.readBytes(0),null}}const Oze=BigInt(0),kze=BigInt(1),Dze=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Mze extends hd{constructor(n,r,s){const i=(r?"int":"uint")+n*8;super(i,i,s,!1);se(this,"size");se(this,"signed");wt(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let s=Qe(ti.dereference(r,this.type)),i=kv(Dze,vi*8);if(this.signed){let o=kv(i,this.size*8-1);(s>o||s<-(o+kze))&&this._throwError("value out-of-bounds",r),s=Aee(s,8*vi)}else(s<Oze||s>kv(i,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(s)}decode(n){let r=kv(n.readValue(),this.size*8);return this.signed&&(r=O7e(r,this.size*8)),r}}class Lze extends fte{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,qu(ti.dereference(n,"string")))}decode(e){return xI(super.decode(e))}}class KA extends hd{constructor(n,r){let s=!1;const i=[];n.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,r,s);se(this,"coders");wt(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(s=>{n.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[i]))}),Object.freeze(n)}encode(n,r){const s=ti.dereference(r,"tuple");return dte(n,this.coders,s)}decode(n){return hte(n,this.coders)}}function QO(t,e){return{address:Sn(t),storageKeys:e.map((n,r)=>(J(nr(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function mm(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(J(n.length===2,"invalid slot set",`value[${r}]`,n),QO(n[0],n[1])):(J(n!=null&&typeof n=="object","invalid address-slot set","value",t),QO(n.address,n.storageKeys)));J(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((s,i)=>(s[i]=!0,s),{});return QO(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function pte(t){return{address:Sn(t.address),nonce:Qe(t.nonce!=null?t.nonce:0),chainId:Qe(t.chainId!=null?t.chainId:0),signature:uo.from(t.signature)}}function Uze(t){let e;return typeof t=="string"?e=JC.computePublicKey(t,!1):e=t.publicKey,Sn(Fr("0x"+e.substring(4)).substring(26))}function Bze(t,e){return Uze(JC.recoverPublicKey(t,e))}const hs=BigInt(0),$ze=BigInt(2),Fze=BigInt(27),jze=BigInt(28),Wze=BigInt(35),zze=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),JO=4096*32;function Hze(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Yt(t.blobToKzgCommitment(Oe(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Yt(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return Yt(t.blobToKZGCommitment(Oe(r)));J(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return Yt(t.computeBlobProof(Oe(r),Oe(s)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return Yt(t.computeBlobKZGProof(Oe(r),Oe(s)));J(!1,"unsupported KZG library","kzg",t)}}}function H7(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=vb(e).substring(4),"0x"+n}function Eb(t){return t==="0x"?null:Sn(t)}function FT(t,e){try{return mm(t)}catch(n){J(!1,n.message,e,t)}}function Gze(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const s=t[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);n.push({address:Eb(s[1]),nonce:jn(s[2],"nonce"),chainId:jn(s[0],"chainId"),signature:uo.from({yParity:ym(s[3],"yParity"),r:id(s[4],32),s:id(s[5],32)})})}return n}catch(n){J(!1,n.message,e,t)}}function ym(t,e){return t==="0x"?0:Qt(t,e)}function jn(t,e){if(t==="0x")return hs;const n=Qe(t,e);return J(n<=zze,"value exceeds uint size",e,n),n}function on(t,e){const n=Qe(t,"value"),r=Zr(n);return J(r.length<=32,"value too large",`tx.${e}`,n),r}function jT(t){return mm(t).map(e=>[e.address,e.storageKeys])}function qze(t){return t.map(e=>[on(e.chainId,"chainId"),e.address,on(e.nonce,"nonce"),on(e.signature.yParity,"yParity"),Zr(e.signature.r),Zr(e.signature.s)])}function Vze(t,e){J(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)J(nr(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function Kze(t){const e=w1(t);J(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:ym(e[0],"nonce"),gasPrice:jn(e[1],"gasPrice"),gasLimit:jn(e[2],"gasLimit"),to:Eb(e[3]),value:jn(e[4],"value"),data:Oe(e[5]),chainId:hs};if(e.length===6)return n;const r=jn(e[6],"v"),s=jn(e[7],"r"),i=jn(e[8],"s");if(s===hs&&i===hs)n.chainId=r;else{let o=(r-Wze)/$ze;o<hs&&(o=hs),n.chainId=o,J(o!==hs||r===Fze||r===jze,"non-canonical legacy v","v",e[6]),n.signature=uo.from({r:id(e[7],32),s:id(e[8],32),v:r})}return n}function Yze(t,e){const n=[on(t.nonce,"nonce"),on(t.gasPrice||0,"gasPrice"),on(t.gasLimit,"gasLimit"),t.to||"0x",on(t.value,"value"),t.data];let r=hs;if(t.chainId!=hs)r=Qe(t.chainId,"tx.chainId"),J(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(r=i)}if(!e)return r!==hs&&(n.push(Zr(r)),n.push("0x"),n.push("0x")),Ef(n);let s=BigInt(27+e.yParity);return r!==hs?s=uo.getChainIdV(r,e.v):BigInt(e.v)!==s&&J(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(Zr(s)),n.push(Zr(e.r)),n.push(Zr(e.s)),Ef(n)}function WT(t,e){let n;try{if(n=ym(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{J(!1,"invalid yParity","yParity",e[0])}const r=id(e[1],32),s=id(e[2],32),i=uo.from({r,s,yParity:n});t.signature=i}function Qze(t){const e=w1(Yt(t).slice(1));J(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Oe(t));const n={type:2,chainId:jn(e[0],"chainId"),nonce:ym(e[1],"nonce"),maxPriorityFeePerGas:jn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:jn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:jn(e[4],"gasLimit"),to:Eb(e[5]),value:jn(e[6],"value"),data:Oe(e[7]),accessList:FT(e[8],"accessList")};return e.length===9||WT(n,e.slice(9)),n}function Jze(t,e){const n=[on(t.chainId,"chainId"),on(t.nonce,"nonce"),on(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),on(t.maxFeePerGas||0,"maxFeePerGas"),on(t.gasLimit,"gasLimit"),t.to||"0x",on(t.value,"value"),t.data,jT(t.accessList||[])];return e&&(n.push(on(e.yParity,"yParity")),n.push(Zr(e.r)),n.push(Zr(e.s))),Ir(["0x02",Ef(n)])}function Zze(t){const e=w1(Yt(t).slice(1));J(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Oe(t));const n={type:1,chainId:jn(e[0],"chainId"),nonce:ym(e[1],"nonce"),gasPrice:jn(e[2],"gasPrice"),gasLimit:jn(e[3],"gasLimit"),to:Eb(e[4]),value:jn(e[5],"value"),data:Oe(e[6]),accessList:FT(e[7],"accessList")};return e.length===8||WT(n,e.slice(8)),n}function Xze(t,e){const n=[on(t.chainId,"chainId"),on(t.nonce,"nonce"),on(t.gasPrice||0,"gasPrice"),on(t.gasLimit,"gasLimit"),t.to||"0x",on(t.value,"value"),t.data,jT(t.accessList||[])];return e&&(n.push(on(e.yParity,"recoveryParam")),n.push(Zr(e.r)),n.push(Zr(e.s))),Ir(["0x01",Ef(n)])}function eHe(t){let e=w1(Yt(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const i=e[1],o=e[2],a=e[3];J(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),J(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),J(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),J(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),J(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:i[c],commitment:o[c],proof:a[c]});e=e[0]}J(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",Oe(t));const s={type:3,chainId:jn(e[0],"chainId"),nonce:ym(e[1],"nonce"),maxPriorityFeePerGas:jn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:jn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:jn(e[4],"gasLimit"),to:Eb(e[5]),value:jn(e[6],"value"),data:Oe(e[7]),accessList:FT(e[8],"accessList"),maxFeePerBlobGas:jn(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(s.blobs=r),J(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),J(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<s.blobVersionedHashes.length;i++)J(nr(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||WT(s,e.slice(11)),s}function tHe(t,e,n){const r=[on(t.chainId,"chainId"),on(t.nonce,"nonce"),on(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),on(t.maxFeePerGas||0,"maxFeePerGas"),on(t.gasLimit,"gasLimit"),t.to||QC,on(t.value,"value"),t.data,jT(t.accessList||[]),on(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),Vze(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(on(e.yParity,"yParity")),r.push(Zr(e.r)),r.push(Zr(e.s)),n)?Ir(["0x03",Ef([r,n.map(s=>s.data),n.map(s=>s.commitment),n.map(s=>s.proof)])]):Ir(["0x03",Ef(r)])}function nHe(t){const e=w1(Yt(t).slice(1));J(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Oe(t));const n={type:4,chainId:jn(e[0],"chainId"),nonce:ym(e[1],"nonce"),maxPriorityFeePerGas:jn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:jn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:jn(e[4],"gasLimit"),to:Eb(e[5]),value:jn(e[6],"value"),data:Oe(e[7]),accessList:FT(e[8],"accessList"),authorizationList:Gze(e[9],"authorizationList")};return e.length===10||WT(n,e.slice(10)),n}function rHe(t,e){const n=[on(t.chainId,"chainId"),on(t.nonce,"nonce"),on(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),on(t.maxFeePerGas||0,"maxFeePerGas"),on(t.gasLimit,"gasLimit"),t.to||"0x",on(t.value,"value"),t.data,jT(t.accessList||[]),qze(t.authorizationList||[])];return e&&(n.push(on(e.yParity,"yParity")),n.push(Zr(e.r)),n.push(Zr(e.s))),Ir(["0x04",Ef(n)])}var ac,A0,S0,x0,I0,N0,T0,R0,P0,O0,k0,D0,Jp,hh,il,fh,M0,L0,BS;const Xc=class Xc{constructor(){Y(this,L0);Y(this,ac);Y(this,A0);Y(this,S0);Y(this,x0);Y(this,I0);Y(this,N0);Y(this,T0);Y(this,R0);Y(this,P0);Y(this,O0);Y(this,k0);Y(this,D0);Y(this,Jp);Y(this,hh);Y(this,il);Y(this,fh);Y(this,M0);L(this,ac,null),L(this,A0,null),L(this,x0,0),L(this,I0,hs),L(this,N0,null),L(this,T0,null),L(this,R0,null),L(this,S0,"0x"),L(this,P0,hs),L(this,O0,hs),L(this,k0,null),L(this,D0,null),L(this,Jp,null),L(this,hh,null),L(this,il,null),L(this,fh,null),L(this,M0,null)}get type(){return _(this,ac)}set type(e){switch(e){case null:L(this,ac,null);break;case 0:case"legacy":L(this,ac,0);break;case 1:case"berlin":case"eip-2930":L(this,ac,1);break;case 2:case"london":case"eip-1559":L(this,ac,2);break;case 3:case"cancun":case"eip-4844":L(this,ac,3);break;case 4:case"pectra":case"eip-7702":L(this,ac,4);break;default:J(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=_(this,A0);return e==null&&this.type===3?QC:e}set to(e){L(this,A0,e==null?null:Sn(e))}get nonce(){return _(this,x0)}set nonce(e){L(this,x0,Qt(e,"value"))}get gasLimit(){return _(this,I0)}set gasLimit(e){L(this,I0,Qe(e))}get gasPrice(){const e=_(this,N0);return e==null&&(this.type===0||this.type===1)?hs:e}set gasPrice(e){L(this,N0,e==null?null:Qe(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=_(this,T0);return e??(this.type===2||this.type===3?hs:null)}set maxPriorityFeePerGas(e){L(this,T0,e==null?null:Qe(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=_(this,R0);return e??(this.type===2||this.type===3?hs:null)}set maxFeePerGas(e){L(this,R0,e==null?null:Qe(e,"maxFeePerGas"))}get data(){return _(this,S0)}set data(e){L(this,S0,Oe(e))}get value(){return _(this,P0)}set value(e){L(this,P0,Qe(e,"value"))}get chainId(){return _(this,O0)}set chainId(e){L(this,O0,Qe(e))}get signature(){return _(this,k0)||null}set signature(e){L(this,k0,e==null?null:uo.from(e))}get accessList(){const e=_(this,D0)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){L(this,D0,e==null?null:mm(e))}get authorizationList(){const e=_(this,M0)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){L(this,M0,e==null?null:e.map(n=>pte(n)))}get maxFeePerBlobGas(){const e=_(this,Jp);return e==null&&this.type===3?hs:e}set maxFeePerBlobGas(e){L(this,Jp,e==null?null:Qe(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=_(this,hh);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){J(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)J(nr(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}L(this,hh,e)}get blobs(){return _(this,fh)==null?null:_(this,fh).map(e=>Object.assign({},e))}set blobs(e){if(e==null){L(this,fh,null);return}const n=[],r=[];for(let s=0;s<e.length;s++){const i=e[s];if(qU(i)){me(_(this,il),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=Yt(i);if(J(o.length<=JO,"blob is too large",`blobs[${s}]`,i),o.length!==JO){const l=new Uint8Array(JO);l.set(o),o=l}const a=_(this,il).blobToKzgCommitment(o),c=Oe(_(this,il).computeBlobKzgProof(o,a));n.push({data:Oe(o),commitment:Oe(a),proof:c}),r.push(H7(1,a))}else{const o=Oe(i.commitment);n.push({data:Oe(i.data),commitment:o,proof:Oe(i.proof)}),r.push(H7(1,o))}}L(this,fh,n),L(this,hh,r)}get kzg(){return _(this,il)}set kzg(e){e==null?L(this,il,null):L(this,il,Hze(e))}get hash(){return this.signature==null?null:Fr(de(this,L0,BS).call(this,!0,!1))}get unsignedHash(){return Fr(this.unsignedSerialized)}get from(){return this.signature==null?null:Bze(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:JC.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return de(this,L0,BS).call(this,!0,!0)}get unsignedSerialized(){return de(this,L0,BS).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=_(this,Jp)!=null||_(this,hh);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&me(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),me(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),me(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Xc.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new Xc;if(typeof e=="string"){const r=Yt(e);if(r[0]>=127)return Xc.from(Kze(r));switch(r[0]){case 1:return Xc.from(Zze(r));case 2:return Xc.from(Qze(r));case 3:return Xc.from(eHe(r));case 4:return Xc.from(nHe(r))}me(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new Xc;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=uo.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(J(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),J(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(J(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),J(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};ac=new WeakMap,A0=new WeakMap,S0=new WeakMap,x0=new WeakMap,I0=new WeakMap,N0=new WeakMap,T0=new WeakMap,R0=new WeakMap,P0=new WeakMap,O0=new WeakMap,k0=new WeakMap,D0=new WeakMap,Jp=new WeakMap,hh=new WeakMap,il=new WeakMap,fh=new WeakMap,M0=new WeakMap,L0=new WeakSet,BS=function(e,n){me(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return Yze(this,r);case 1:return Xze(this,r);case 2:return Jze(this,r);case 3:return tHe(this,r,n?this.blobs:null);case 4:return rHe(this,r)}me(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let NI=Xc;function Gg(t){return Fr(qu(t))}var sHe="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const G7=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),q7=4;function iHe(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),s=1,i=[0,1];for(let C=1;C<r;C++)i.push(s+=n());let o=n(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const d=31,h=2**d,f=h>>>1,p=f>>1,g=h-1;let w=0;for(let C=0;C<d;C++)w=w<<1|u();let m=[],b=0,v=h;for(;;){let C=Math.floor(((w-b+1)*s-1)/v),T=0,x=r;for(;x-T>1;){let D=T+x>>>1;C<i[D]?x=D:T=D}if(T==0)break;m.push(T);let N=b+Math.floor(v*i[T]/s),S=b+Math.floor(v*i[T+1]/s)-1;for(;!((N^S)&f);)w=w<<1&g|u(),N=N<<1&g,S=S<<1&g|1;for(;N&~S&p;)w=w&f|w<<1&g>>>1|u(),N=N<<1^f,S=(S^f)<<1|f|1;b=N,v=1+S-N}let A=r-4;return m.map(C=>{switch(C-A){case 3:return A+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return A+256+(t[a++]<<8|t[a++]);case 1:return A+t[a++];default:return C-1}})}function oHe(t){let e=0;return()=>t[e++]}function gte(t){return oHe(iHe(aHe(t)))}function aHe(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let n=t.length,r=new Uint8Array(6*n>>3);for(let s=0,i=0,o=0,a=0;s<n;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(r[i++]=a>>(o-=8));return r}function cHe(t){return t&1?~t>>1:t>>1}function lHe(t,e){let n=Array(t);for(let r=0,s=0;r<t;r++)n[r]=s+=cHe(e());return n}function ZC(t,e=0){let n=[];for(;;){let r=t(),s=t();if(!s)break;e+=r;for(let i=0;i<s;i++)n.push(e+i);e+=s+1}return n}function mte(t){return XC(()=>{let e=ZC(t);if(e.length)return e})}function yte(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(uHe(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(dHe(n,t))}return e.flat()}function XC(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function wte(t,e,n){let r=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)lHe(t,n).forEach((i,o)=>r[o].push(i));return r}function uHe(t,e){let n=1+e(),r=e(),s=XC(e);return wte(s.length,1+t,e).flatMap((o,a)=>{let[c,...l]=o;return Array(s[a]).fill().map((u,d)=>{let h=d*r;return[c+d*n,l.map(f=>f+h)]})})}function dHe(t,e){let n=1+e();return wte(n,1+t,e).map(s=>[s[0],s.slice(1)])}function hHe(t){let e=[],n=ZC(t);return s(r([]),[]),e;function r(i){let o=t(),a=XC(()=>{let c=ZC(t).map(l=>n[l]);if(c.length)return r(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&e.push(a);for(let l of o)for(let u of l.Q)s(l,[...a,u],c)}}}function fHe(t){return t.toString(16).toUpperCase().padStart(2,"0")}function bte(t){return`{${fHe(t)}}`}function pHe(t){let e=[];for(let n=0,r=t.length;n<r;){let s=t.codePointAt(n);n+=s<65536?1:2,e.push(s)}return e}function Ww(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let s=0;s<n;)r.push(String.fromCodePoint(...t.slice(s,s+=4096)));return r.join("")}function gHe(t,e){let n=t.length,r=n-e.length;for(let s=0;r==0&&s<n;s++)r=t[s]-e[s];return r}var mHe="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const e_=44032,TI=4352,RI=4449,PI=4519,vte=19,Ete=21,zw=28,OI=Ete*zw,yHe=vte*OI,wHe=e_+yHe,bHe=TI+vte,vHe=RI+Ete,EHe=PI+zw;function Mv(t){return t>>24&255}function Cte(t){return t&16777215}let o5,V7,a5,$S;function CHe(){let t=gte(mHe);o5=new Map(mte(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),V7=new Set(ZC(t)),a5=new Map,$S=new Map;for(let[e,n]of yte(t)){if(!V7.has(e)&&n.length==2){let[r,s]=n,i=$S.get(r);i||(i=new Map,$S.set(r,i)),i.set(s,e)}a5.set(e,n.reverse())}}function _te(t){return t>=e_&&t<wHe}function _He(t,e){if(t>=TI&&t<bHe&&e>=RI&&e<vHe)return e_+(t-TI)*OI+(e-RI)*zw;if(_te(t)&&e>PI&&e<EHe&&(t-e_)%zw==0)return t+(e-PI);{let n=$S.get(t);return n&&(n=n.get(e),n)?n:-1}}function Ate(t){o5||CHe();let e=[],n=[],r=!1;function s(i){let o=o5.get(i);o&&(r=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(_te(i)){let o=i-e_,a=o/OI|0,c=o%OI/zw|0,l=o%zw;s(TI+a),s(RI+c),l>0&&s(PI+l)}else{let o=a5.get(i);o?n.push(...o):s(i)}if(!n.length)break;i=n.pop()}if(r&&e.length>1){let i=Mv(e[0]);for(let o=1;o<e.length;o++){let a=Mv(e[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(i=Mv(e[--c]),i<=a))break}i=Mv(e[o])}}return e}function AHe(t){let e=[],n=[],r=-1,s=0;for(let i of t){let o=Mv(i),a=Cte(i);if(r==-1)o==0?r=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),s=o;else{let c=_He(r,a);c>=0?r=c:s==0&&o==0?(e.push(r),r=a):(n.push(a),s=o)}}return r>=0&&e.push(r,...n),e}function Ste(t){return Ate(t).map(Cte)}function SHe(t){return AHe(Ate(t))}const K7=45,xte=".",Ite=65039,Nte=1,kI=t=>Array.from(t);function t_(t,e){return t.P.has(e)||t.Q.has(e)}class xHe extends Array{get is_emoji(){return!0}}let c5,Tte,Tp,l5,Rte,Xy,ZO,ly,np,Y7,u5;function rB(){if(c5)return;let t=gte(sHe);const e=()=>ZC(t),n=()=>new Set(e()),r=(u,d)=>d.forEach(h=>u.add(h));c5=new Map(yte(t)),Tte=n(),Tp=e(),l5=new Set(e().map(u=>Tp[u])),Tp=new Set(Tp),Rte=n(),n();let s=mte(t),i=t();const o=()=>{let u=new Set;return e().forEach(d=>r(u,s[d])),r(u,e()),u};Xy=XC(u=>{let d=XC(t).map(h=>h+96);if(d.length){let h=u>=i;d[0]-=32,d=Ww(d),h&&(d=`Restricted[${d}]`);let f=o(),p=o(),g=!t();return{N:d,P:f,Q:p,M:g,R:h}}}),ZO=n(),ly=new Map;let a=e().concat(kI(ZO)).sort((u,d)=>u-d);a.forEach((u,d)=>{let h=t(),f=a[d]=h?a[d-h]:{V:[],M:new Map};f.V.push(u),ZO.has(u)||ly.set(u,f)});for(let{V:u,M:d}of new Set(ly.values())){let h=[];for(let p of u){let g=Xy.filter(m=>t_(m,p)),w=h.find(({G:m})=>g.some(b=>m.has(b)));w||(w={G:new Set,V:[]},h.push(w)),w.V.push(p),r(w.G,g)}let f=h.flatMap(p=>kI(p.G));for(let{G:p,V:g}of h){let w=new Set(f.filter(m=>!p.has(m)));for(let m of g)d.set(m,w)}}np=new Set;let c=new Set;const l=u=>np.has(u)?c.add(u):np.add(u);for(let u of Xy){for(let d of u.P)l(d);for(let d of u.Q)l(d)}for(let u of np)!ly.has(u)&&!c.has(u)&&ly.set(u,Nte);r(np,Ste(np)),Y7=hHe(t).map(u=>xHe.from(u)).sort(gHe),u5=new Map;for(let u of Y7){let d=[u5];for(let h of u){let f=d.map(p=>{let g=p.get(h);return g||(g=new Map,p.set(h,g)),g});h===Ite?d.push(...f):d=f}for(let h of d)h.V=u}}function sB(t){return(Pte(t)?"":`${iB(zT([t]))} `)+bte(t)}function iB(t){return`"${t}"`}function IHe(t){if(t.length>=4&&t[2]==K7&&t[3]==K7)throw new Error(`invalid label extension: "${Ww(t.slice(0,4))}"`)}function NHe(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function THe(t){let e=t[0],n=G7.get(e);if(n)throw yE(`leading ${n}`);let r=t.length,s=-1;for(let i=1;i<r;i++){e=t[i];let o=G7.get(e);if(o){if(s==i)throw yE(`${n} + ${o}`);s=i+1,n=o}}if(s==r)throw yE(`trailing ${n}`)}function zT(t,e=1/0,n=bte){let r=[];RHe(t[0])&&r.push(""),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let o=0;o<i;o++){let a=t[o];Pte(a)&&(r.push(Ww(t.slice(s,o))),r.push(n(a)),s=o+1)}return r.push(Ww(t.slice(s,i))),r.join("")}function RHe(t){return rB(),Tp.has(t)}function Pte(t){return rB(),Rte.has(t)}function PHe(t){return MHe(OHe(t,SHe,BHe))}function OHe(t,e,n){if(!t)return[];rB();let r=0;return t.split(xte).map(s=>{let i=pHe(s),o={input:i,offset:r};r+=i.length+1;try{let a=o.tokens=UHe(i,e,n),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(NHe(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(h=>h<128))IHe(u),l="ASCII";else{let h=a.flatMap(f=>f.is_emoji?[]:f);if(!h.length)l="Emoji";else{if(Tp.has(u[0]))throw yE("leading combining mark");for(let g=1;g<c;g++){let w=a[g];if(!w.is_emoji&&Tp.has(w[0]))throw yE(`emoji + combining mark: "${Ww(a[g-1])} + ${zT([w[0]])}"`)}THe(u);let f=kI(new Set(h)),[p]=DHe(f);LHe(p,h),kHe(p,f),l=p.N}}o.type=l}catch(a){o.error=a}return o})}function kHe(t,e){let n,r=[];for(let s of e){let i=ly.get(s);if(i===Nte)return;if(i){let o=i.M.get(s);if(n=n?n.filter(a=>o.has(a)):kI(o),!n.length)return}else r.push(s)}if(n){for(let s of n)if(r.every(i=>t_(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function DHe(t){let e=Xy;for(let n of t){let r=e.filter(s=>t_(s,n));if(!r.length)throw Xy.some(s=>t_(s,n))?kte(e[0],n):Ote(n);if(e=r,r.length==1)break}return e}function MHe(t){return t.map(({input:e,error:n,output:r})=>{if(n){let s=n.message;throw new Error(t.length==1?s:`Invalid label ${iB(zT(e,63))}: ${s}`)}return Ww(r)}).join(xte)}function Ote(t){return new Error(`disallowed character: ${sB(t)}`)}function kte(t,e){let n=sB(e),r=Xy.find(s=>s.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function yE(t){return new Error(`illegal placement: ${t}`)}function LHe(t,e){for(let n of e)if(!t_(t,n))throw kte(t,n);if(t.M){let n=Ste(e);for(let r=1,s=n.length;r<s;r++)if(l5.has(n[r])){let i=r+1;for(let o;i<s&&l5.has(o=n[i]);i++)for(let a=r;a<i;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${sB(o)}`);if(i-r>q7)throw new Error(`excessive non-spacing marks: ${iB(zT(n.slice(r-1,i)))} (${i-r}/${q7})`);r=i}}}function UHe(t,e,n){let r=[],s=[];for(t=t.slice().reverse();t.length;){let i=$He(t);if(i)s.length&&(r.push(e(s)),s=[]),r.push(n(i));else{let o=t.pop();if(np.has(o))s.push(o);else{let a=c5.get(o);if(a)s.push(...a);else if(!Tte.has(o))throw Ote(o)}}}return s.length&&r.push(e(s)),r}function BHe(t){return t.filter(e=>e!=Ite)}function $He(t,e){let n=u5,r,s=t.length;for(;s&&(n=n.get(t[--s]),!!n);){let{V:i}=n;i&&(r=i,t.length=s)}return r}const Dte=new Uint8Array(32);Dte.fill(0);function Q7(t){return J(t.length!==0,"invalid ENS name; empty component","comp",t),t}function Mte(t){const e=qu(FHe(t)),n=[];if(t.length===0)return n;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(n.push(Q7(e.slice(r,s))),r=s+1);return J(r<e.length,"invalid ENS name; empty component","name",t),n.push(Q7(e.slice(r))),n}function FHe(t){try{if(t.length===0)throw new Error("empty label");return PHe(t)}catch(e){J(!1,`invalid ENS name (${e.message})`,"name",t)}}function d5(t){J(typeof t=="string","invalid ENS name; not a string","name",t),J(t.length,"invalid ENS name (empty label)","name",t);let e=Dte;const n=Mte(t);for(;n.length;)e=Fr(Ir([e,Fr(n.pop())]));return Oe(e)}function jHe(t,e){const n=e;return J(n<=255,"DNS encoded label cannot exceed 255","length",n),Oe(Ir(Mte(t).map(r=>{J(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}const Lte=new Uint8Array(32);Lte.fill(0);const WHe=BigInt(-1),Ute=BigInt(0),Bte=BigInt(1),zHe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function HHe(t){const e=Yt(t),n=e.length%32;return n?Ir([e,Lte.slice(n)]):Oe(e)}const GHe=bf(Bte,32),qHe=bf(Ute,32),J7={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},XO=["name","version","chainId","verifyingContract","salt"];function Z7(t){return function(e){return J(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const VHe={name:Z7("name"),version:Z7("version"),chainId:function(t){const e=Qe(t,"domain.chainId");return J(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):pc(e)},verifyingContract:function(t){try{return Sn(t).toLowerCase()}catch{}J(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=Yt(t,"domain.salt");return J(e.length===32,'invalid domain value "salt"',"domain.salt",t),Oe(e)}};function e2(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);J(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const s=kv(zHe,n?r-1:r),i=n?(s+Bte)*WHe:Ute;return function(o){const a=Qe(o,"value");return J(a>=i&&a<=s,`value out-of-bounds for ${t}`,"value",a),bf(n?Aee(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return J(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const s=Yt(r);return J(s.length===n,`invalid length for ${t}`,"value",r),HHe(r)}}}switch(t){case"address":return function(e){return id(Sn(e),32)};case"bool":return function(e){return e?GHe:qHe};case"bytes":return function(e){return Fr(e)};case"string":return function(e){return Gg(e)}}return null}function X7(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function YA(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var f_,_u,U0,$I,$te;const ha=class ha{constructor(e){Y(this,$I);se(this,"primaryType");Y(this,f_);Y(this,_u);Y(this,U0);L(this,_u,new Map),L(this,U0,new Map);const n=new Map,r=new Map,s=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:l,type:u})=>{let{base:d,index:h}=YA(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:l,type:d+(h||"")}}),n.set(c,new Set),r.set(c,[]),s.set(c,new Set)}),L(this,f_,JSON.stringify(i));for(const c in i){const l=new Set;for(const u of i[c]){J(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const d=YA(u.type).base;J(d!==c,`circular type reference to ${JSON.stringify(d)}`,"types",e),!e2(d)&&(J(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),r.get(d).push(c),n.get(c).add(d))}}const o=Array.from(r.keys()).filter(c=>r.get(c).length===0);J(o.length!==0,"missing primary type","types",e),J(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),wt(this,{primaryType:o[0]});function a(c,l){J(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of n.get(c))if(r.has(u)){a(u,l);for(const d of l)s.get(d).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of s){const u=Array.from(l);u.sort(),_(this,_u).set(c,X7(c,i[c])+u.map(d=>X7(d,i[d])).join(""))}}get types(){return JSON.parse(_(this,f_))}getEncoder(e){let n=_(this,U0).get(e);return n||(n=de(this,$I,$te).call(this,e),_(this,U0).set(e,n)),n}encodeType(e){const n=_(this,_u).get(e);return J(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return Fr(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(e2(e))return r(e,n);const s=YA(e).array;if(s)return J(s.count===-1||s.count===n.length,`array length mismatch; expected length ${s.count}`,"value",n),n.map(o=>this._visit(s.prefix,o,r));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,n[a],r),o),{});J(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new ha(e)}static getPrimaryType(e){return ha.from(e).primaryType}static hashStruct(e,n,r){return ha.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const s=J7[r];J(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:s})}return n.sort((r,s)=>XO.indexOf(r.name)-XO.indexOf(s.name)),ha.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return Ir(["0x1901",ha.hashDomain(e),ha.from(n).hash(r)])}static hash(e,n,r){return Fr(ha.encode(e,n,r))}static async resolveNames(e,n,r,s){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!nr(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=ha.from(n);o.visit(r,(a,c)=>(a==="address"&&!nr(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:r}}static getPayload(e,n,r){ha.hashDomain(e);const s={},i=[];XO.forEach(c=>{const l=e[c];l!=null&&(s[c]=VHe[c](l),i.push({name:c,type:J7[c]}))});const o=ha.from(n);n=o.types;const a=Object.assign({},n);return J(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=i,o.encode(r),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return Oe(Yt(l));if(c.match(/^u?int/))return Qe(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return J(typeof l=="string","invalid string","value",l),l}J(!1,"unsupported type","type",c)})}}};f_=new WeakMap,_u=new WeakMap,U0=new WeakMap,$I=new WeakSet,$te=function(e){{const s=e2(e);if(s)return s}const n=YA(e).array;if(n){const s=n.prefix,i=this.getEncoder(s);return o=>{J(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(i);return _(this,_u).has(s)&&(a=a.map(Fr)),Fr(Ir(a))}}const r=this.types[e];if(r){const s=Gg(_(this,_u).get(e));return i=>{const o=r.map(({name:a,type:c})=>{const l=this.getEncoder(c)(i[a]);return _(this,_u).has(c)?Fr(l):l});return o.unshift(s),Ir(o)}}J(!1,`unknown type: ${e}`,"type",e)};let DI=ha;function Ci(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const KHe="external public payable override",YHe=Ci(KHe.split(" ")),Fte="constant external internal payable private public pure view override",QHe=Ci(Fte.split(" ")),jte="constructor error event fallback function receive struct",Wte=Ci(jte.split(" ")),zte="calldata memory storage payable indexed",JHe=Ci(zte.split(" ")),ZHe="tuple returns",XHe=[jte,zte,ZHe,Fte].join(" "),eGe=Ci(XHe.split(" ")),tGe={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},nGe=new RegExp("^(\\s*)"),rGe=new RegExp("^([0-9]+)"),sGe=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Hte=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),Gte=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var Ts,cc,p_,h5;const FI=class FI{constructor(e){Y(this,p_);Y(this,Ts);Y(this,cc);L(this,Ts,0),L(this,cc,e.slice())}get offset(){return _(this,Ts)}get length(){return _(this,cc).length-_(this,Ts)}clone(){return new FI(_(this,cc))}reset(){L(this,Ts,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=de(this,p_,h5).call(this,_(this,Ts)+1,e.match+1);return L(this,Ts,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;_(this,Ts)<e.match-1;){const r=this.peek().linkNext;n.push(de(this,p_,h5).call(this,_(this,Ts)+1,r)),L(this,Ts,r)}return L(this,Ts,e.match+1),n}peek(){if(_(this,Ts)>=_(this,cc).length)throw new Error("out-of-bounds");return _(this,cc)[_(this,Ts)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return yd(this,Ts)._++,e}toString(){const e=[];for(let n=_(this,Ts);n<_(this,cc).length;n++){const r=_(this,cc)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};Ts=new WeakMap,cc=new WeakMap,p_=new WeakSet,h5=function(e=0,n=0){return new FI(_(this,cc).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let kc=FI;function Tf(t){const e=[],n=o=>{const a=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let r=[],s=[],i=0;for(;i<t.length;){let o=t.substring(i),a=o.match(nGe);a&&(i+=a[1].length,o=t.substring(i));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=tGe[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,l==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(l=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const d=e.pop().text;u=d+u,e[e.length-1].value=Qt(d)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(sGe),a){if(c.text=a[1],i+=c.text.length,eGe.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(Gte)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(rGe),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new kc(e.map(o=>Object.freeze(o)))}function eW(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function HT(t,e){if(e.peekKeyword(Wte)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function od(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function qte(t){let e=od(t,QHe);return eW(e,Ci("constant payable nonpayable".split(" "))),eW(e,Ci("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Vu(t,e){return t.popParams().map(n=>Bs.from(n,e))}function Vte(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Qe(t.pop().text);throw new Error("invalid gas")}return null}function qg(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const iGe=new RegExp(/^(.*)\[([0-9]*)\]$/);function tW(t){const e=t.match(Gte);if(J(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);J(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);J(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const mr={},po=Symbol.for("_ethers_internal"),nW="_ParamTypeInternal",rW="_ErrorInternal",sW="_EventInternal",iW="_ConstructorInternal",oW="_FallbackInternal",aW="_FunctionInternal",cW="_StructInternal";var B0,FS;const fa=class fa{constructor(e,n,r,s,i,o,a,c){Y(this,B0);se(this,"name");se(this,"type");se(this,"baseType");se(this,"indexed");se(this,"components");se(this,"arrayLength");se(this,"arrayChildren");if(DT(e,mr,"ParamType"),Object.defineProperty(this,po,{value:nW}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");wt(this,{name:n,type:r,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(s=>r.arrayChildren.walk(s,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((s,i)=>r.components[i].walk(s,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],s=[e];return de(this,B0,FS).call(this,r,e,n,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(e,n){if(fa.isParamType(e))return e;if(typeof e=="string")try{return fa.from(Tf(e),n)}catch{J(!1,"invalid param type","obj",e)}else if(e instanceof kc){let a="",c="",l=null;od(e,Ci(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(g=>fa.from(g)),a=`tuple(${l.map(g=>g.format()).join(",")})`):(a=tW(e.popType("TYPE")),c=a);let u=null,d=null;for(;e.length&&e.peekType("BRACKET");){const g=e.pop();u=new fa(mr,"",a,c,null,l,d,u),d=g.value,a+=g.text,c="array",l=null}let h=null;if(od(e,JHe).has("indexed")){if(!n)throw new Error("");h=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new fa(mr,p,a,c,h,l,d,u)}const r=e.name;J(!r||typeof r=="string"&&r.match(Hte),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(J(n,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(iGe);if(o){const a=parseInt(o[2]||"-1"),c=fa.from({type:o[1],components:e.components});return new fa(mr,r||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(l=>fa.from(l)):null;return new fa(mr,r||"",i,"tuple",s,a,null,null)}return i=tW(e.type),new fa(mr,r||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[po]===nW}};B0=new WeakSet,FS=function(e,n,r,s){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((c,l)=>{var u;de(u=o,B0,FS).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in n))throw new Error(`missing value for component ${c.name}`);return n[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{var u;de(u=o[l],B0,FS).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}const i=r(this.type,n);i.then?e.push(async function(){s(await i)}()):s(i)};let Bs=fa;class Vg{constructor(e,n,r){se(this,"type");se(this,"inputs");DT(e,mr,"Fragment"),r=Object.freeze(r.slice()),wt(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{Vg.from(JSON.parse(e))}catch{}return Vg.from(Tf(e))}if(e instanceof kc)switch(e.peekKeyword(Wte)){case"constructor":return Bu.from(e);case"error":return Xi.from(e);case"event":return Cl.from(e);case"fallback":case"receive":return mu.from(e);case"function":return _l.from(e);case"struct":return mg.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Bu.from(e);case"error":return Xi.from(e);case"event":return Cl.from(e);case"fallback":case"receive":return mu.from(e);case"function":return _l.from(e);case"struct":return mg.from(e)}me(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}J(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Bu.isFragment(e)}static isError(e){return Xi.isFragment(e)}static isEvent(e){return Cl.isFragment(e)}static isFunction(e){return _l.isFragment(e)}static isStruct(e){return mg.isFragment(e)}}class GT extends Vg{constructor(n,r,s,i){super(n,r,i);se(this,"name");J(typeof s=="string"&&s.match(Hte),"invalid identifier","name",s),i=Object.freeze(i.slice()),wt(this,{name:s})}}function n_(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class Xi extends GT{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,po,{value:rW})}get selector(){return Gg(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+n_(e,this.inputs)),n.join(" ")}static from(e){if(Xi.isFragment(e))return e;if(typeof e=="string")return Xi.from(Tf(e));if(e instanceof kc){const n=HT("error",e),r=Vu(e);return qg(e),new Xi(mr,n,r)}return new Xi(mr,e.name,e.inputs?e.inputs.map(Bs.from):[])}static isFragment(e){return e&&e[po]===rW}}class Cl extends GT{constructor(n,r,s,i){super(n,"event",r,s);se(this,"anonymous");Object.defineProperty(this,po,{value:sW}),wt(this,{anonymous:i})}get topicHash(){return Gg(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+n_(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(i=>Bs.from(i)),new Cl(mr,n,r,!1).topicHash}static from(n){if(Cl.isFragment(n))return n;if(typeof n=="string")try{return Cl.from(Tf(n))}catch{J(!1,"invalid event fragment","obj",n)}else if(n instanceof kc){const r=HT("event",n),s=Vu(n,!0),i=!!od(n,Ci(["anonymous"])).has("anonymous");return qg(n),new Cl(mr,r,s,i)}return new Cl(mr,n.name,n.inputs?n.inputs.map(r=>Bs.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[po]===sW}}class Bu extends Vg{constructor(n,r,s,i,o){super(n,r,s);se(this,"payable");se(this,"gas");Object.defineProperty(this,po,{value:iW}),wt(this,{payable:i,gas:o})}format(n){if(me(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[`constructor${n_(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(Bu.isFragment(n))return n;if(typeof n=="string")try{return Bu.from(Tf(n))}catch{J(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof kc){od(n,Ci(["constructor"]));const r=Vu(n),s=!!od(n,YHe).has("payable"),i=Vte(n);return qg(n),new Bu(mr,"constructor",r,s,i)}return new Bu(mr,"constructor",n.inputs?n.inputs.map(Bs.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[po]===iW}}class mu extends Vg{constructor(n,r,s){super(n,"fallback",r);se(this,"payable");Object.defineProperty(this,po,{value:oW}),wt(this,{payable:s})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(n){if(mu.isFragment(n))return n;if(typeof n=="string")try{return mu.from(Tf(n))}catch{J(!1,"invalid fallback fragment","obj",n)}else if(n instanceof kc){const r=n.toString(),s=n.peekKeyword(Ci(["fallback","receive"]));if(J(s,"type must be fallback or receive","obj",r),n.popKeyword(Ci(["fallback","receive"]))==="receive"){const c=Vu(n);return J(c.length===0,"receive cannot have arguments","obj.inputs",c),od(n,Ci(["payable"])),qg(n),new mu(mr,[],!0)}let o=Vu(n);o.length?J(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[Bs.from("bytes")];const a=qte(n);if(J(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),od(n,Ci(["returns"])).has("returns")){const c=Vu(n);J(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(l=>l.format("minimal")).join(", "))}return qg(n),new mu(mr,o,a==="payable")}if(n.type==="receive")return new mu(mr,[],!0);if(n.type==="fallback"){const r=[Bs.from("bytes")],s=n.stateMutability==="payable";return new mu(mr,r,s)}J(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[po]===oW}}class _l extends GT{constructor(n,r,s,i,o,a){super(n,"function",r,i);se(this,"constant");se(this,"outputs");se(this,"stateMutability");se(this,"payable");se(this,"gas");Object.defineProperty(this,po,{value:aW}),o=Object.freeze(o.slice()),wt(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return Gg(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n))),outputs:this.outputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+n_(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(n_(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(i=>Bs.from(i)),new _l(mr,n,"view",r,[],null).selector}static from(n){if(_l.isFragment(n))return n;if(typeof n=="string")try{return _l.from(Tf(n))}catch{J(!1,"invalid function fragment","obj",n)}else if(n instanceof kc){const s=HT("function",n),i=Vu(n),o=qte(n);let a=[];od(n,Ci(["returns"])).has("returns")&&(a=Vu(n));const c=Vte(n);return qg(n),new _l(mr,s,o,i,a,c)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new _l(mr,n.name,r,n.inputs?n.inputs.map(Bs.from):[],n.outputs?n.outputs.map(Bs.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[po]===aW}}class mg extends GT{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,po,{value:cW})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return mg.from(Tf(e))}catch{J(!1,"invalid struct fragment","obj",e)}else if(e instanceof kc){const n=HT("struct",e),r=Vu(e);return qg(e),new mg(mr,n,r)}return new mg(mr,e.name,e.inputs?e.inputs.map(Bs.from):[])}static isFragment(e){return e&&e[po]===cW}}const Lc=new Map;Lc.set(0,"GENERIC_PANIC");Lc.set(1,"ASSERT_FALSE");Lc.set(17,"OVERFLOW");Lc.set(18,"DIVIDE_BY_ZERO");Lc.set(33,"ENUM_RANGE_ERROR");Lc.set(34,"BAD_STORAGE_DATA");Lc.set(49,"STACK_UNDERFLOW");Lc.set(50,"ARRAY_RANGE_ERROR");Lc.set(65,"OUT_OF_MEMORY");Lc.set(81,"UNINITIALIZED_FUNCTION_CALL");const oGe=new RegExp(/^bytes([0-9]*)$/),aGe=new RegExp(/^(u?int)([0-9]*)$/);let t2=null,lW=1024;function cGe(t,e,n,r){let s="missing revert data",i=null;const o=null;let a=null;if(n){s="execution reverted";const l=Yt(n);if(n=Oe(n),l.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(Oe(l.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(Oe(l.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},i=`Panic due to ${Lc.get(u)||"UNKNOWN"}(${u})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?Sn(e.to):null,data:e.data||"0x"};return e.from&&(c.from=Sn(e.from)),ur(s,"CALL_EXCEPTION",{action:t,data:n,reason:i,transaction:c,invocation:o,revert:a})}var ph,uy;const jI=class jI{constructor(){Y(this,ph)}getDefaultValue(e){const n=e.map(s=>de(this,ph,uy).call(this,Bs.from(s)));return new KA(n,"_").defaultValue()}encode(e,n){Eee(n.length,e.length,"types/values length mismatch");const r=e.map(o=>de(this,ph,uy).call(this,Bs.from(o))),s=new KA(r,"_"),i=new Z3;return s.encode(i,n),i.data}decode(e,n,r){const s=e.map(o=>de(this,ph,uy).call(this,Bs.from(o)));return new KA(s,"_").decode(new X3(n,r,lW))}static _setDefaultMaxInflation(e){J(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),lW=e}static defaultAbiCoder(){return t2==null&&(t2=new jI),t2}static getBuiltinCallException(e,n,r){return cGe(e,n,r,jI.defaultAbiCoder())}};ph=new WeakSet,uy=function(e){if(e.isArray())return new xze(de(this,ph,uy).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new KA(e.components.map(r=>de(this,ph,uy).call(this,r)),e.name);switch(e.baseType){case"address":return new Aze(e.name);case"bool":return new Ize(e.name);case"string":return new Lze(e.name);case"bytes":return new Nze(e.name);case"":return new Pze(e.name)}let n=e.type.match(aGe);if(n){let r=parseInt(n[2]||"256");return J(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new Mze(r/8,n[1]==="int",e.name)}if(n=e.type.match(oGe),n){let r=parseInt(n[1]);return J(r!==0&&r<=32,"invalid bytes length","param",e),new Tze(r,e.name)}J(!1,"invalid type","type",e.type)};let r_=jI;class lGe{constructor(e,n,r){se(this,"fragment");se(this,"name");se(this,"signature");se(this,"topic");se(this,"args");const s=e.name,i=e.format();wt(this,{fragment:e,name:s,signature:i,topic:n,args:r})}}class uGe{constructor(e,n,r,s){se(this,"fragment");se(this,"name");se(this,"args");se(this,"signature");se(this,"selector");se(this,"value");const i=e.name,o=e.format();wt(this,{fragment:e,name:i,args:r,signature:o,selector:n,value:s})}}class dGe{constructor(e,n,r){se(this,"fragment");se(this,"name");se(this,"args");se(this,"signature");se(this,"selector");const s=e.name,i=e.format();wt(this,{fragment:e,name:s,args:r,signature:i,selector:n})}}class uW{constructor(e){se(this,"hash");se(this,"_isIndexed");wt(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const dW={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},hW={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&dW[t.toString()]&&(e=dW[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var ol,al,cl,Ys,kl,jS,WS;const hp=class hp{constructor(e){Y(this,kl);se(this,"fragments");se(this,"deploy");se(this,"fallback");se(this,"receive");Y(this,ol);Y(this,al);Y(this,cl);Y(this,Ys);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,L(this,cl,new Map),L(this,ol,new Map),L(this,al,new Map);const r=[];for(const o of n)try{r.push(Vg.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}wt(this,{fragments:Object.freeze(r)});let s=null,i=!1;L(this,Ys,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}wt(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(J(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=_(this,cl);break;case"event":c=_(this,al);break;case"error":c=_(this,ol);break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||wt(this,{deploy:Bu.from("constructor()")}),wt(this,{fallback:s,receive:i})}format(e){const n=e?"minimal":"full";return this.fragments.map(s=>s.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return r_.defaultAbiCoder()}getFunctionName(e){const n=de(this,kl,jS).call(this,e,null,!1);return J(n,"no matching function","key",e),n.name}hasFunction(e){return!!de(this,kl,jS).call(this,e,null,!1)}getFunction(e,n){return de(this,kl,jS).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(_(this,cl).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(_(this,cl).get(s),r)}}getEventName(e){const n=de(this,kl,WS).call(this,e,null,!1);return J(n,"no matching event","key",e),n.name}hasEvent(e){return!!de(this,kl,WS).call(this,e,null,!1)}getEvent(e,n){return de(this,kl,WS).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(_(this,al).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(_(this,al).get(s),r)}}getError(e,n){if(nr(e)){const s=e.toLowerCase();if(hW[s])return Xi.from(hW[s].signature);for(const i of _(this,ol).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of _(this,ol))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?Xi.from("error Error(string)"):e==="Panic"?Xi.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");J(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=Xi.from(e).format(),e==="Error(string)")return Xi.from("error Error(string)");if(e==="Panic(uint256)")return Xi.from("error Panic(uint256)");const r=_(this,ol).get(e);return r||null}forEachError(e){const n=Array.from(_(this,ol).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(_(this,ol).get(s),r)}}_decodeParams(e,n){return _(this,Ys).decode(e,n)}_encodeParams(e,n){return _(this,Ys).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);J(r,"unknown error","fragment",e),e=r}return J(_r(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,_r(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);J(r,"unknown error","fragment",e),e=r}return Ir([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);J(r,"unknown function","fragment",e),e=r}return J(_r(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,_r(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);J(r,"unknown function","fragment",e),e=r}return Ir([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const i=this.getFunction(e);J(i,"unknown function","fragment",e),e=i}let r="invalid length for result data";const s=yi(n);if(s.length%32===0)try{return _(this,Ys).decode(e.outputs,s)}catch{r="could not decode result data"}me(!1,r,"BAD_DATA",{value:Oe(s),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=Yt(e,"data"),s=r_.getBuiltinCallException("call",n,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=Oe(r.slice(0,4)),c=this.getError(a);if(c)try{const l=_(this,Ys).decode(c.inputs,r.slice(4));s.revert={name:c.name,signature:c.format(),args:l},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);J(r,"unknown function","fragment",e),e=r}return Oe(_(this,Ys).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const i=this.getEvent(e);J(i,"unknown event","eventFragment",e),e=i}me(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(i,o)=>i.type==="string"?Gg(o):i.type==="bytes"?Fr(Oe(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=bf(o):i.type.match(/^bytes/)?o=P7e(o,32):i.type==="address"&&_(this,Ys).encode(["address"],[o]),id(Oe(o),32));for(n.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){J(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?J(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?r.push(i.map(c=>s(a,c))):r.push(s(a,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);J(o,"unknown event","eventFragment",e),e=o}const r=[],s=[],i=[];return e.anonymous||r.push(e.topicHash),J(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const c=n[a];if(o.indexed)if(o.type==="string")r.push(Gg(c));else if(o.type==="bytes")r.push(Fr(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(_(this,Ys).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:_(this,Ys).encode(s,i),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const f=this.getEvent(e);J(f,"unknown event","eventFragment",e),e=f}if(r!=null&&!e.anonymous){const f=e.topicHash;J(nr(r[0],32)&&r[0].toLowerCase()===f,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((f,p)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(s.push(Bs.from({type:"bytes32",name:f.name})),o.push(!0)):(s.push(f),o.push(!1)):(i.push(f),o.push(!1))});const a=r!=null?_(this,Ys).decode(s,Ir(r)):null,c=_(this,Ys).decode(i,n,!0),l=[],u=[];let d=0,h=0;return e.inputs.forEach((f,p)=>{let g=null;if(f.indexed)if(a==null)g=new uW(null);else if(o[p])g=new uW(a[h++]);else try{g=a[h++]}catch(w){g=w}else try{g=c[d++]}catch(w){g=w}l.push(g),u.push(f.name||null)}),Uw.fromItems(l,u)}parseTransaction(e){const n=Yt(e.data,"tx.data"),r=Qe(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(Oe(n.slice(0,4)));if(!s)return null;const i=_(this,Ys).decode(s.inputs,n.slice(4));return new uGe(s,s.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new lGe(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=Oe(e),r=this.getError(_r(n,0,4));if(!r)return null;const s=_(this,Ys).decode(r.inputs,_r(n,4));return new dGe(r,r.selector,s)}static from(e){return e instanceof hp?e:typeof e=="string"?new hp(JSON.parse(e)):typeof e.formatJson=="function"?new hp(e.formatJson()):typeof e.format=="function"?new hp(e.format("json")):new hp(e)}};ol=new WeakMap,al=new WeakMap,cl=new WeakMap,Ys=new WeakMap,kl=new WeakSet,jS=function(e,n,r){if(nr(e)){const i=e.toLowerCase();for(const o of _(this,cl).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of _(this,cl))o.split("(")[0]===e&&i.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,c=!0;ti.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=i.length-1;l>=0;l--){const u=i[l].inputs.length;u!==a&&(!c||u!==a-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){const u=i[l].inputs;for(let d=0;d<n.length;d++)if(ti.isTyped(n[d])){if(d>=u.length){if(n[d].type==="overrides")continue;i.splice(l,1);break}if(n[d].type!==u[d].baseType){i.splice(l,1);break}}}}if(i.length===1&&n&&n.length!==i[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");J(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=_(this,cl).get(_l.from(e).format());return s||null},WS=function(e,n,r){if(nr(e)){const i=e.toLowerCase();for(const o of _(this,al).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of _(this,al))o.split("(")[0]===e&&i.push(a);if(n){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<n.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<n.length;c++)if(ti.isTyped(n[c])&&n[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");J(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=_(this,al).get(Cl.from(e).format());return s||null};let f5=hp;const Kte=BigInt(0);function e0(t){return t??null}function Pr(t){return t==null?null:t.toString()}class fW{constructor(e,n,r){se(this,"gasPrice");se(this,"maxFeePerGas");se(this,"maxPriorityFeePerGas");wt(this,{gasPrice:e0(e),maxFeePerGas:e0(n),maxPriorityFeePerGas:e0(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Pr(e),maxFeePerGas:Pr(n),maxPriorityFeePerGas:Pr(r)}}}function MI(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=Oe(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=Qe(t[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=Qt(t[s],`request.${s}`));return t.accessList&&(e.accessList=mm(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>qU(s)?Oe(s):Object.assign({},s))),e}var Au;class hGe{constructor(e,n){se(this,"provider");se(this,"number");se(this,"hash");se(this,"timestamp");se(this,"parentHash");se(this,"parentBeaconBlockRoot");se(this,"nonce");se(this,"difficulty");se(this,"gasLimit");se(this,"gasUsed");se(this,"stateRoot");se(this,"receiptsRoot");se(this,"blobGasUsed");se(this,"excessBlobGas");se(this,"miner");se(this,"prevRandao");se(this,"extraData");se(this,"baseFeePerGas");Y(this,Au);L(this,Au,e.transactions.map(r=>typeof r!="string"?new s_(r,n):r)),wt(this,{provider:n,hash:e0(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:e0(e.prevRandao),extraData:e.extraData,baseFeePerGas:e0(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return _(this,Au).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=_(this,Au).slice();return e.length===0?[]:(me(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,timestamp:g,transactions:w}=this;return{_type:"Block",baseFeePerGas:Pr(e),difficulty:Pr(n),extraData:r,gasLimit:Pr(s),gasUsed:Pr(i),blobGasUsed:Pr(this.blobGasUsed),excessBlobGas:Pr(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,timestamp:g,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,transactions:w}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return _(this,Au).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=_(this,Au)[e];else{const r=e.toLowerCase();for(const s of _(this,Au))if(typeof s=="string"){if(s!==r)continue;n=s;break}else{if(s.hash!==r)continue;n=s;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;J(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return fGe(this)}}Au=new WeakMap;class v1{constructor(e,n){se(this,"provider");se(this,"transactionHash");se(this,"blockHash");se(this,"blockNumber");se(this,"removed");se(this,"address");se(this,"data");se(this,"topics");se(this,"index");se(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());wt(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return me(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return me(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return me(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return pGe(this)}}var g_;class Yte{constructor(e,n){se(this,"provider");se(this,"to");se(this,"from");se(this,"contractAddress");se(this,"hash");se(this,"index");se(this,"blockHash");se(this,"blockNumber");se(this,"logsBloom");se(this,"gasUsed");se(this,"blobGasUsed");se(this,"cumulativeGasUsed");se(this,"gasPrice");se(this,"blobGasPrice");se(this,"type");se(this,"status");se(this,"root");Y(this,g_);L(this,g_,Object.freeze(e.logs.map(s=>new v1(s,n))));let r=Kte;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),wt(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return _(this,g_)}toJSON(){const{to:e,from:n,contractAddress:r,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:Pr(this.cumulativeGasUsed),from:n,gasPrice:Pr(this.gasPrice),blobGasUsed:Pr(this.blobGasUsed),blobGasPrice:Pr(this.blobGasPrice),gasUsed:Pr(this.gasUsed),hash:s,index:i,logs:l,logsBloom:c,root:d,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Jte(this)}reorderedEvent(e){return me(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Qte(this,e)}}g_=new WeakMap;var gh;const fB=class fB{constructor(e,n){se(this,"provider");se(this,"blockNumber");se(this,"blockHash");se(this,"index");se(this,"hash");se(this,"type");se(this,"to");se(this,"from");se(this,"nonce");se(this,"gasLimit");se(this,"gasPrice");se(this,"maxPriorityFeePerGas");se(this,"maxFeePerGas");se(this,"maxFeePerBlobGas");se(this,"data");se(this,"value");se(this,"chainId");se(this,"signature");se(this,"accessList");se(this,"blobVersionedHashes");se(this,"authorizationList");Y(this,gh);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,L(this,gh,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:s,type:i,to:o,from:a,nonce:c,data:l,signature:u,accessList:d,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:n,blobVersionedHashes:h,chainId:Pr(this.chainId),data:l,from:a,gasLimit:Pr(this.gasLimit),gasPrice:Pr(this.gasPrice),hash:s,maxFeePerGas:Pr(this.maxFeePerGas),maxPriorityFeePerGas:Pr(this.maxPriorityFeePerGas),maxFeePerBlobGas:Pr(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:r,type:i,value:Pr(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await fi({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,s=n??0;let i=_(this,gh),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:h,nonce:f}=await fi({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(f<this.nonce){i=h;return}if(a)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(o===-1&&(o=i-3,o<_(this,gh)&&(o=_(this,gh)));o<=h;){if(a)return null;const g=await this.provider.getBlock(o,!0);if(g==null)return;for(const w of g)if(w===this.hash)return;for(let w=0;w<g.length;w++){const m=await g.getTransaction(w);if(m.from===this.from&&m.nonce===this.nonce){if(a)return null;const b=await this.provider.getTransactionReceipt(m.hash);if(b==null||h-b.blockNumber+1<r)return;let v="replaced";m.data===this.data&&m.to===this.to&&m.value===this.value?v="repriced":m.data==="0x"&&m.from===m.to&&m.value===Kte&&(v="cancelled"),me(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:v==="replaced"||v==="cancelled",reason:v,replacement:m.replaceableTransaction(i),hash:m.hash,receipt:b})}}o++}},l=h=>{if(h==null||h.status!==0)return h;me(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:h.to,from:h.from,data:""},receipt:h})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return l(u);if(u){if(r===1||await u.confirmations()>=r)return l(u)}else if(await c(),r===0)return null;return await new Promise((h,f)=>{const p=[],g=()=>{p.forEach(m=>m())};if(p.push(()=>{a=!0}),s>0){const m=setTimeout(()=>{g(),f(ur("wait for transaction timeout","TIMEOUT"))},s);p.push(()=>{clearTimeout(m)})}const w=async m=>{if(await m.confirmations()>=r){g();try{h(l(m))}catch(b){f(b)}}};if(p.push(()=>{this.provider.off(this.hash,w)}),this.provider.on(this.hash,w),i>=0){const m=async()=>{try{await c()}catch(b){if(ks(b,"TRANSACTION_REPLACED")){g(),f(b);return}}a||this.provider.once("block",m)};p.push(()=>{this.provider.off("block",m)}),this.provider.once("block",m)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return me(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Jte(this)}reorderedEvent(e){return me(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),me(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Qte(this,e)}replaceableTransaction(e){J(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new fB(this,this.provider);return L(n,gh,e),n}};gh=new WeakMap;let s_=fB;function fGe(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function Qte(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function Jte(t){return{orphan:"drop-transaction",tx:t}}function pGe(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class oB extends v1{constructor(n,r,s){super(n,n.provider);se(this,"interface");se(this,"fragment");se(this,"args");const i=r.decodeEventLog(s,n.data,n.topics);wt(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Zte extends v1{constructor(n,r){super(n,n.provider);se(this,"error");wt(this,{error:r})}}var $0;class gGe extends Yte{constructor(n,r,s){super(s,r);Y(this,$0);L(this,$0,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?_(this,$0).getEvent(n.topics[0]):null;if(r)try{return new oB(n,_(this,$0),r)}catch(s){return new Zte(n,s)}return n})}}$0=new WeakMap;var m_;class aB extends s_{constructor(n,r,s){super(s,r);Y(this,m_);L(this,m_,n)}async wait(n,r){const s=await super.wait(n,r);return s==null?null:new gGe(_(this,m_),this.provider,s)}}m_=new WeakMap;class Xte extends See{constructor(n,r,s,i){super(n,r,s);se(this,"log");wt(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class mGe extends Xte{constructor(e,n,r,s,i){super(e,n,r,new oB(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);wt(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const pW=BigInt(0);function ene(t){return t&&typeof t.call=="function"}function tne(t){return t&&typeof t.estimateGas=="function"}function qT(t){return t&&typeof t.resolveName=="function"}function nne(t){return t&&typeof t.sendTransaction=="function"}function rne(t){if(t!=null){if(qT(t))return t;if(t.provider)return t.provider}}var y_;class yGe{constructor(e,n,r){Y(this,y_);se(this,"fragment");if(wt(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const s=Kg(e.runner,"resolveName"),i=qT(s)?s:null;L(this,y_,async function(){const o=await Promise.all(n.inputs.map((a,c)=>r[c]==null?null:a.walkAsync(r[c],(u,d)=>u==="address"?Array.isArray(d)?Promise.all(d.map(h=>Ei(h,i))):Ei(d,i):d)));return e.interface.encodeFilterTopics(n,o)}())}getTopicFilter(){return _(this,y_)}}y_=new WeakMap;function Kg(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function Rp(t){return t==null?null:t.provider||null}async function sne(t,e){const n=ti.dereference(t,"overrides");J(typeof n=="object","invalid overrides parameter","overrides",t);const r=MI(n);return J(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),J(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function wGe(t,e,n){const r=Kg(t,"resolveName"),s=qT(r)?r:null;return await Promise.all(e.map((i,o)=>i.walkAsync(n[o],(a,c)=>(c=ti.dereference(c,a),a==="address"?Ei(c,s):c))))}function bGe(t){const e=async function(o){const a=await sne(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await Ei(a.from,rne(t.runner)));const c=t.interface,l=Qe(a.value||pW,"overrides.value")===pW,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&J(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),J(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const d=c.receive||c.fallback&&c.fallback.payable;return J(d||l,"cannot send value to non-payable fallback","overrides.value",a.value),J(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=Kg(t.runner,"call");me(ene(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(l){throw GU(l)&&l.data?t.interface.makeError(l.data,c):l}},r=async function(o){const a=t.runner;me(nne(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),l=Rp(t.runner);return new aB(t.interface,l,c)},s=async function(o){const a=Kg(t.runner,"estimateGas");return me(tne(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await r(o);return wt(i,{_contract:t,estimateGas:s,populateTransaction:e,send:r,staticCall:n}),i}function vGe(t,e){const n=function(...l){const u=t.interface.getFunction(e,l);return me(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},r=async function(...l){const u=n(...l);let d={};if(u.inputs.length+1===l.length&&(d=await sne(l.pop()),d.from&&(d.from=await Ei(d.from,rne(t.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const h=await wGe(t.runner,u.inputs,l);return Object.assign({},d,await fi({to:t.getAddress(),data:t.interface.encodeFunctionData(u,h)}))},s=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},i=async function(...l){const u=t.runner;me(nne(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await u.sendTransaction(await r(...l)),h=Rp(t.runner);return new aB(t.interface,h,d)},o=async function(...l){const u=Kg(t.runner,"estimateGas");return me(tne(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...l))},a=async function(...l){const u=Kg(t.runner,"call");me(ene(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...l);let h="0x";try{h=await u.call(d)}catch(p){throw GU(p)&&p.data?t.interface.makeError(p.data,d):p}const f=n(...l);return t.interface.decodeFunctionResult(f,h)},c=async(...l)=>n(...l).constant?await s(...l):await i(...l);return wt(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=t.interface.getFunction(e);return me(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function EGe(t,e){const n=function(...s){const i=t.interface.getEvent(e,s);return me(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},r=function(...s){return new yGe(t,n(...s),s)};return wt(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return me(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}const LI=Symbol.for("_ethersInternal_contract"),ine=new WeakMap;function CGe(t,e){ine.set(t[LI],e)}function Ro(t){return ine.get(t[LI])}function _Ge(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function cB(t,e){let n,r=null;if(Array.isArray(e)){const i=function(o){if(nr(o,32))return o;const a=t.interface.getEvent(o);return J(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?n=[null]:typeof e=="string"?nr(e,32)?n=[e]:(r=t.interface.getEvent(e),J(r,"unknown fragment","event",e),n=[r.topicHash]):_Ge(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):J(!1,"unknown event name","event",e);n=n.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=n.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:n}}async function Lv(t,e){const{subs:n}=Ro(t);return n.get((await cB(t,e)).tag)||null}async function gW(t,e,n){const r=Rp(t.runner);me(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await cB(t,n),{addr:a,subs:c}=Ro(t);let l=c.get(i);if(!l){const d={address:a||t,topics:o},h=w=>{let m=s;if(m==null)try{m=t.interface.getEvent(w.topics[0])}catch{}if(m){const b=m,v=s?t.interface.decodeEventLog(s,w.data,w.topics):[];g5(t,n,v,A=>new mGe(t,A,n,b,w))}else g5(t,n,[],b=>new Xte(t,b,n,w))};let f=[];l={tag:i,listeners:[],start:()=>{f.length||f.push(r.on(d,h))},stop:async()=>{if(f.length==0)return;let w=f;f=[],await Promise.all(w),r.off(d,h)}},c.set(i,l)}return l}let p5=Promise.resolve();async function AGe(t,e,n,r){await p5;const s=await Lv(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(n);r&&c.push(r(a?null:o));try{o.call(t,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),Ro(t).subs.delete(s.tag)),i>0}async function g5(t,e,n,r){try{await p5}catch{}const s=AGe(t,e,n,r);return p5=s,await s}const QA=["then"];var FW;FW=LI;const wE=class wE{constructor(e,n,r,s){se(this,"target");se(this,"interface");se(this,"runner");se(this,"filters");se(this,FW);se(this,"fallback");J(typeof e=="string"||ute(e),"invalid value for Contract target","target",e),r==null&&(r=null);const i=f5.from(n);wt(this,{target:e,runner:r,interface:i}),Object.defineProperty(this,LI,{value:{}});let o,a=null,c=null;if(s){const d=Rp(r);c=new aB(this.interface,d,s)}let l=new Map;if(typeof e=="string")if(nr(e))a=e,o=Promise.resolve(e);else{const d=Kg(r,"resolveName");if(!qT(d))throw ur("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(e).then(h=>{if(h==null)throw ur("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Ro(this).addr=h,h})}else o=e.getAddress().then(d=>{if(d==null)throw new Error("TODO");return Ro(this).addr=d,d});CGe(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(d,h,f)=>{if(typeof h=="symbol"||QA.indexOf(h)>=0)return Reflect.get(d,h,f);try{return this.getEvent(h)}catch(p){if(!ks(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>QA.indexOf(h)>=0?Reflect.has(d,h):Reflect.has(d,h)||this.interface.hasEvent(String(h))});return wt(this,{filters:u}),wt(this,{fallback:i.receive||i.fallback?bGe(this):null}),new Proxy(this,{get:(d,h,f)=>{if(typeof h=="symbol"||h in d||QA.indexOf(h)>=0)return Reflect.get(d,h,f);try{return d.getFunction(h)}catch(p){if(!ks(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>typeof h=="symbol"||h in d||QA.indexOf(h)>=0?Reflect.has(d,h):d.interface.hasFunction(h)})}connect(e){return new wE(this.target,this.interface,e)}attach(e){return new wE(e,this.interface,this.runner)}async getAddress(){return await Ro(this).addrPromise}async getDeployedCode(){const e=Rp(this.runner);me(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=Rp(this.runner);return me(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return Ro(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),vGe(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),EGe(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=Ro(this),o=s||await i,{fragment:a,topics:c}=await cB(this,e),l={address:o,topics:c,fromBlock:n,toBlock:r},u=Rp(this.runner);return me(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(d=>{let h=a;if(h==null)try{h=this.interface.getEvent(d.topics[0])}catch{}if(h)try{return new oB(d,this.interface,h)}catch(f){return new Zte(d,f)}return new v1(d,u)})}async on(e,n){const r=await gW(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await gW(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await g5(this,e,n,null)}async listenerCount(e){if(e){const s=await Lv(this,e);return s?s.listeners.length:0}const{subs:n}=Ro(this);let r=0;for(const{listeners:s}of n.values())r+=s.length;return r}async listeners(e){if(e){const s=await Lv(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:n}=Ro(this);let r=[];for(const{listeners:s}of n.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(e,n){const r=await Lv(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(n==null||r.listeners.length===0)&&(r.stop(),Ro(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await Lv(this,e);if(!n)return this;n.stop(),Ro(this).subs.delete(n.tag)}else{const{subs:n}=Ro(this);for(const{tag:r,stop:s}of n.values())s(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends wE{constructor(s,i=null){super(s,e,i)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let m5=wE;function SGe(){return m5}class t0 extends SGe(){}function n2(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):J(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class xGe{constructor(e){se(this,"name");wt(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const one=new RegExp("^(ipfs)://(.*)$","i"),mW=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),one,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var mh,Zp,yh,dy,WI,ane;const ky=class ky{constructor(e,n,r){Y(this,yh);se(this,"provider");se(this,"address");se(this,"name");Y(this,mh);Y(this,Zp);wt(this,{provider:e,address:n,name:r}),L(this,mh,null),L(this,Zp,new t0(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return _(this,mh)==null&&L(this,mh,(async()=>{try{return await _(this,Zp).supportsInterface("0x9061b923")}catch(e){if(ks(e,"CALL_EXCEPTION"))return!1;throw L(this,mh,null),e}})()),await _(this,mh)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await de(this,yh,dy).call(this,"addr(bytes32)");return i==null||i===QC?null:i}catch(i){if(ks(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await de(this,yh,dy).call(this,"addr(bytes32,uint)",[i]);if(nr(o,20))return Sn(o)}let n=null;for(const i of this.provider.plugins)if(i instanceof xGe&&i.supportsCoinType(e)){n=i;break}if(n==null)return null;const r=await de(this,yh,dy).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const s=await n.decodeAddress(e,r);if(s!=null)return s;me(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await de(this,yh,dy).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await de(this,yh,dy).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const s=n[1]==="e3010170"?"ipfs":"ipns",i=parseInt(n[4],16);if(n[5].length===i*2)return`${s}://${D7e("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;me(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<mW.length;r++){const s=n.match(mW[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=n2(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const l=c[1],u=new t0(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const g=await u.ownerOf(l);if(a!==g)return e.push({type:"!owner",value:g}),{url:null,linkage:e};e.push({type:"owner",value:g})}else if(i==="erc1155"){const g=await u.balanceOf(a,l);if(!g)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:g.toString()})}let d=await u[o](l);if(d==null||d==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:d}),i==="erc1155"&&(d=d.replace("{id}",bf(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=n2(d)),e.push({type:"metadata-url",value:d});let h={};const f=await new vf(d).send();f.assertOk();try{h=f.bodyJson}catch{try{e.push({type:"!metadata",value:f.bodyText})}catch{const m=f.body;return m&&e.push({type:"!metadata",value:Oe(m)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!h)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(h)});let p=h.image;if(typeof p!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(one)==null)return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=n2(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return me(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var s;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const i=await de(s=ky,WI,ane).call(s,e,r);if(i!=null){const o=new ky(e,i,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};mh=new WeakMap,Zp=new WeakMap,yh=new WeakSet,dy=async function(e,n){n=(n||[]).slice();const r=_(this,Zp).interface;n.unshift(d5(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),me(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[jHe(this.name,255),r.encodeFunctionData(s,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const i=await _(this,Zp)[e](...n);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!ks(i,"CALL_EXCEPTION"))throw i}return null},WI=new WeakSet,ane=async function(e,n){const r=await ky.getEnsAddress(e);try{const i=await new t0(r,["function resolver(bytes32) view returns (address)"],e).resolver(d5(n),{enableCcipRead:!0});return i===QC?null:i}catch(s){throw s}return null},Y(ky,WI);let UI=ky;const yW=BigInt(0);function sn(t,e){return function(n){return n==null?e:t(n)}}function i_(t,e){return n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))}}function E1(t,e){return n=>{const r={};for(const s in t){let i=s;if(e&&s in e&&!(i in n)){for(const o of e[s])if(o in n){i=o;break}}try{const o=t[s](n[i]);o!==void 0&&(r[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";me(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:n})}}return r}}function IGe(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}J(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function Hw(t){return J(nr(t,!0),"invalid data","value",t),t}function Os(t){return J(nr(t,32),"invalid hash","value",t),t}const NGe=E1({address:Sn,blockHash:Os,blockNumber:Qt,data:Hw,index:Qt,removed:sn(IGe,!1),topics:i_(Os),transactionHash:Os,transactionIndex:Qt},{index:["logIndex"]});function TGe(t){return NGe(t)}const RGe=E1({hash:sn(Os),parentHash:Os,parentBeaconBlockRoot:sn(Os,null),number:Qt,timestamp:Qt,nonce:sn(Hw),difficulty:Qe,gasLimit:Qe,gasUsed:Qe,stateRoot:sn(Os,null),receiptsRoot:sn(Os,null),blobGasUsed:sn(Qe,null),excessBlobGas:sn(Qe,null),miner:sn(Sn),prevRandao:sn(Os,null),extraData:Hw,baseFeePerGas:sn(Qe)},{prevRandao:["mixHash"]});function PGe(t){const e=RGe(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:cne(n)),e}const OGe=E1({transactionIndex:Qt,blockNumber:Qt,transactionHash:Os,address:Sn,topics:i_(Os),data:Hw,index:Qt,blockHash:Os},{index:["logIndex"]});function kGe(t){return OGe(t)}const DGe=E1({to:sn(Sn,null),from:sn(Sn,null),contractAddress:sn(Sn,null),index:Qt,root:sn(Oe),gasUsed:Qe,blobGasUsed:sn(Qe,null),logsBloom:sn(Hw),blockHash:Os,hash:Os,logs:i_(kGe),blockNumber:Qt,cumulativeGasUsed:Qe,effectiveGasPrice:sn(Qe),blobGasPrice:sn(Qe,null),status:sn(Qt),type:sn(Qt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function MGe(t){return DGe(t)}function cne(t){t.to&&Qe(t.to)===yW&&(t.to="0x0000000000000000000000000000000000000000");const e=E1({hash:Os,index:sn(Qt,void 0),type:n=>n==="0x"||n==null?0:Qt(n),accessList:sn(mm,null),blobVersionedHashes:sn(i_(Os,!0),null),authorizationList:sn(i_(n=>{let r;if(n.signature)r=n.signature;else{let s=n.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},n,{yParity:s})}return{address:Sn(n.address),chainId:Qe(n.chainId),nonce:Qe(n.nonce),signature:uo.from(r)}},!1),null),blockHash:sn(Os,null),blockNumber:sn(Qt,null),transactionIndex:sn(Qt,null),from:Sn,gasPrice:sn(Qe),maxPriorityFeePerGas:sn(Qe),maxFeePerGas:sn(Qe),maxFeePerBlobGas:sn(Qe,null),gasLimit:Qe,to:sn(Sn,null),value:Qe,nonce:Qt,data:Hw,creates:sn(Sn,null),chainId:sn(Qe,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=_ze(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=uo.from(t.signature):e.signature=uo.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&Qe(e.blockHash)===yW&&(e.blockHash=null),e}const LGe="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class C1{constructor(e){se(this,"name");wt(this,{name:e})}clone(){return new C1(this.name)}}class VT extends C1{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);se(this,"effectiveBlock");se(this,"txBase");se(this,"txCreate");se(this,"txDataZero");se(this,"txDataNonzero");se(this,"txAccessListStorageKey");se(this,"txAccessListAddress");const s={effectiveBlock:n};function i(o,a){let c=(r||{})[o];c==null&&(c=a),J(typeof c=="number",`invalud value for ${o}`,"costs",r),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),wt(this,s)}clone(){return new VT(this.effectiveBlock,this)}}class KT extends C1{constructor(n,r){super("org.ethers.plugins.network.Ens");se(this,"address");se(this,"targetNetwork");wt(this,{address:n||LGe,targetNetwork:r??1})}clone(){return new KT(this.address,this.targetNetwork)}}var w_,b_;class UGe extends C1{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");Y(this,w_);Y(this,b_);L(this,w_,n),L(this,b_,r)}get url(){return _(this,w_)}get processFunc(){return _(this,b_)}clone(){return this}}w_=new WeakMap,b_=new WeakMap;const r2=new Map;var F0,j0,wh;const Dy=class Dy{constructor(e,n){Y(this,F0);Y(this,j0);Y(this,wh);L(this,F0,e),L(this,j0,Qe(n)),L(this,wh,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return _(this,F0)}set name(e){L(this,F0,e)}get chainId(){return _(this,j0)}set chainId(e){L(this,j0,Qe(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Qe(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Qe(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Qe(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(_(this,wh).values())}attachPlugin(e){if(_(this,wh).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return _(this,wh).set(e.name,e.clone()),this}getPlugin(e){return _(this,wh).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new Dy(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new VT;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const s=mm(e.accessList);for(const i in s)r+=n.txAccessListAddress+n.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(e){if(BGe(),e==null)return Dy.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=r2.get(e);if(n)return n();if(typeof e=="bigint")return new Dy("unknown",e);J(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){J(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new Dy(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new KT(e.ensAddress,e.ensNetwork)),n}J(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=r2.get(e);r&&J(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),r2.set(e,n)}};F0=new WeakMap,j0=new WeakMap,wh=new WeakMap;let Sl=Dy;function wW(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function bW(t){return new UGe(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([r.send(),e()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:wW(a.maxFee,9),maxPriorityFeePerGas:wW(a.maxPriorityFee,9)}}catch(i){me(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let vW=!1;function BGe(){if(vW)return;vW=!0;function t(e,n,r){const s=function(){const i=new Sl(e,n);return r.ensNetwork!=null&&i.attachPlugin(new KT(null,r.ensNetwork)),i.attachPlugin(new VT),(r.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Sl.register(e,s),Sl.register(n,s),r.altNames&&r.altNames.forEach(i=>{Sl.register(i,s)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[bW("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[bW("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function y5(t){return JSON.parse(JSON.stringify(t))}var Su,ma,bh,ll,W0,zS;class $Ge{constructor(e){Y(this,W0);Y(this,Su);Y(this,ma);Y(this,bh);Y(this,ll);L(this,Su,e),L(this,ma,null),L(this,bh,4e3),L(this,ll,-2)}get pollingInterval(){return _(this,bh)}set pollingInterval(e){L(this,bh,e)}start(){_(this,ma)||(L(this,ma,_(this,Su)._setTimeout(de(this,W0,zS).bind(this),_(this,bh))),de(this,W0,zS).call(this))}stop(){_(this,ma)&&(_(this,Su)._clearTimeout(_(this,ma)),L(this,ma,null))}pause(e){this.stop(),e&&L(this,ll,-2)}resume(){this.start()}}Su=new WeakMap,ma=new WeakMap,bh=new WeakMap,ll=new WeakMap,W0=new WeakSet,zS=async function(){try{const e=await _(this,Su).getBlockNumber();if(_(this,ll)===-2){L(this,ll,e);return}if(e!==_(this,ll)){for(let n=_(this,ll)+1;n<=e;n++){if(_(this,ma)==null)return;await _(this,Su).emit("block",n)}L(this,ll,e)}}catch{}_(this,ma)!=null&&L(this,ma,_(this,Su)._setTimeout(de(this,W0,zS).bind(this),_(this,bh)))};var Xp,eg,vh;class lB{constructor(e){Y(this,Xp);Y(this,eg);Y(this,vh);L(this,Xp,e),L(this,vh,!1),L(this,eg,n=>{this._poll(n,_(this,Xp))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){_(this,vh)||(L(this,vh,!0),_(this,eg).call(this,-2),_(this,Xp).on("block",_(this,eg)))}stop(){_(this,vh)&&(L(this,vh,!1),_(this,Xp).off("block",_(this,eg)))}pause(e){this.stop()}resume(){this.start()}}Xp=new WeakMap,eg=new WeakMap,vh=new WeakMap;var z0,xu;class FGe extends lB{constructor(n,r){super(n);Y(this,z0);Y(this,xu);L(this,z0,r),L(this,xu,-2)}pause(n){n&&L(this,xu,-2),super.pause(n)}async _poll(n,r){const s=await r.getBlock(_(this,z0));s!=null&&(_(this,xu)===-2?L(this,xu,s.number):s.number>_(this,xu)&&(r.emit(_(this,z0),s.number),L(this,xu,s.number)))}}z0=new WeakMap,xu=new WeakMap;var zI;class jGe extends lB{constructor(n,r){super(n);Y(this,zI);L(this,zI,y5(r))}async _poll(n,r){throw new Error("@TODO")}}zI=new WeakMap;var H0;class WGe extends lB{constructor(n,r){super(n);Y(this,H0);L(this,H0,r)}async _poll(n,r){const s=await r.getTransactionReceipt(_(this,H0));s&&r.emit(_(this,H0),s)}}H0=new WeakMap;var Iu,G0,q0,Eh,ya,HI,lne;class uB{constructor(e,n){Y(this,HI);Y(this,Iu);Y(this,G0);Y(this,q0);Y(this,Eh);Y(this,ya);L(this,Iu,e),L(this,G0,y5(n)),L(this,q0,de(this,HI,lne).bind(this)),L(this,Eh,!1),L(this,ya,-2)}start(){_(this,Eh)||(L(this,Eh,!0),_(this,ya)===-2&&_(this,Iu).getBlockNumber().then(e=>{L(this,ya,e)}),_(this,Iu).on("block",_(this,q0)))}stop(){_(this,Eh)&&(L(this,Eh,!1),_(this,Iu).off("block",_(this,q0)))}pause(e){this.stop(),e&&L(this,ya,-2)}resume(){this.start()}}Iu=new WeakMap,G0=new WeakMap,q0=new WeakMap,Eh=new WeakMap,ya=new WeakMap,HI=new WeakSet,lne=async function(e){if(_(this,ya)===-2)return;const n=y5(_(this,G0));n.fromBlock=_(this,ya)+1,n.toBlock=e;const r=await _(this,Iu).getLogs(n);if(r.length===0){_(this,ya)<e-60&&L(this,ya,e-60);return}for(const s of r)_(this,Iu).emit(_(this,G0),s),L(this,ya,s.blockNumber)};const zGe=BigInt(2),HGe=10;function JA(t){return t&&typeof t.then=="function"}function HS(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,o)=>(i[o]=r[o],i),{})}return r})}class une{constructor(e){se(this,"name");wt(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function GGe(t){return JSON.parse(JSON.stringify(t))}function w5(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function s2(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(nr(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:HS("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:HS("orphan",n),filter:GGe(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(s=>s==null?null:Array.isArray(s)?w5(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(n.address){const s=[],i=[],o=a=>{nr(a)?s.push(a):i.push((async()=>{s.push(await Ei(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),i.length&&await Promise.all(i),r.address=w5(s.map(a=>a.toLowerCase()))}return{filter:r,tag:HS("event",r),type:"event"}}J(!1,"unknown ProviderEvent","event",t)}function i2(){return new Date().getTime()}const qGe={cacheTimeout:250,pollingInterval:4e3};var Qs,Ch,Js,V0,Do,tg,_h,Nu,v_,wa,K0,Y0,qt,Io,b5,v5,Uv,E5,Bv,GS;class VGe{constructor(e,n){Y(this,qt);Y(this,Qs);Y(this,Ch);Y(this,Js);Y(this,V0);Y(this,Do);Y(this,tg);Y(this,_h);Y(this,Nu);Y(this,v_);Y(this,wa);Y(this,K0);Y(this,Y0);if(L(this,Y0,Object.assign({},qGe,n||{})),e==="any")L(this,tg,!0),L(this,Do,null);else if(e){const r=Sl.from(e);L(this,tg,!1),L(this,Do,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else L(this,tg,!1),L(this,Do,null);L(this,Nu,-1),L(this,_h,new Map),L(this,Qs,new Map),L(this,Ch,new Map),L(this,Js,null),L(this,V0,!1),L(this,v_,1),L(this,wa,new Map),L(this,K0,!1)}get pollingInterval(){return _(this,Y0).pollingInterval}get provider(){return this}get plugins(){return Array.from(_(this,Ch).values())}attachPlugin(e){if(_(this,Ch).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return _(this,Ch).set(e.name,e.connect(this)),this}getPlugin(e){return _(this,Ch).get(e)||null}get disableCcipRead(){return _(this,K0)}set disableCcipRead(e){L(this,K0,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const c=r[a],l=c.replace("{sender}",s).replace("{data}",i),u=new vf(l);c.indexOf("{data}")===-1&&(u.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let d="unknown error",h;try{h=await u.send()}catch(f){o.push(f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:f}});continue}try{const f=h.bodyJson;if(f.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:f}),f.data;f.message&&(d=f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:f})}catch{}me(h.statusCode<400||h.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:d}}),o.push(d)}me(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new hGe(PGe(e),this)}_wrapLog(e,n){return new v1(TGe(e),this)}_wrapTransactionReceipt(e,n){return new Yte(MGe(e),this)}_wrapTransactionResponse(e,n){return new s_(cne(e),this)}_detectNetwork(){me(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){me(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Qt(await de(this,qt,Io).call(this,{method:"getBlockNumber"}),"%response");return _(this,Nu)>=0&&L(this,Nu,e),e}_getAddress(e){return Ei(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(nr(e))return nr(e,32)?e:pc(e);if(typeof e=="bigint"&&(e=Qt(e,"blockTag")),typeof e=="number")return e>=0?pc(e):_(this,Nu)>=0?pc(_(this,Nu)+e):this.getBlockNumber().then(n=>pc(n+e));J(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?w5(c.map(l=>l.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,s=(c,l,u)=>{let d;switch(c.length){case 0:break;case 1:d=c[0];break;default:c.sort(),d=c}if(r&&(l!=null||u!=null))throw new Error("invalid filter");const h={};return d&&(h.address=d),n.length&&(h.topics=n),l&&(h.fromBlock=l),u&&(h.toBlock=u),r&&(h.blockHash=r),h};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(e){const n=MI(e),r=[];if(["to","from"].forEach(s=>{if(n[s]==null)return;const i=Ei(n[s],this);JA(i)?r.push(async function(){n[s]=await i}()):n[s]=i}),n.blockTag!=null){const s=this._getBlockTag(n.blockTag);JA(s)?r.push(async function(){n.blockTag=await s}()):n.blockTag=s}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(_(this,Do)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw _(this,Do)===s&&L(this,Do,null),i}})();return L(this,Do,s),(await s).clone()}const e=_(this,Do),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(_(this,tg)?(this.emit("network",r,n),_(this,Do)===e&&L(this,Do,Promise.resolve(r))):me(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await fi({_block:de(this,qt,E5).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await de(this,qt,Io).call(this,{method:"getGasPrice"});return Qe(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await de(this,qt,Io).call(this,{method:"getPriorityFee"});return Qe(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(s,e);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*zGe+c),new fW(i,a,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new vf(r.url),i=await r.processFunc(n,this,s);return new fW(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return JA(n)&&(n=await n),Qe(await de(this,qt,Io).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await fi({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await de(this,qt,v5).call(this,de(this,qt,b5).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return Qe(await de(this,qt,Uv).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return Qt(await de(this,qt,Uv).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return Oe(await de(this,qt,Uv).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const s=Qe(n,"position");return Oe(await de(this,qt,Uv).call(this,{method:"getStorage",position:s},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:s}=await fi({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=NI.from(e);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:s}=await fi({network:this.getNetwork(),params:de(this,qt,E5).call(this,e,!!n)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(e){const{network:n,params:r}=await fi({network:this.getNetwork(),params:de(this,qt,Io).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await fi({network:this.getNetwork(),params:de(this,qt,Io).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await de(this,qt,Io).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await fi({network:this.getNetwork(),result:de(this,qt,Io).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:Oe(n)}async getLogs(e){let n=this._getFilter(e);JA(n)&&(n=await n);const{network:r,params:s}=await fi({network:this.getNetwork(),params:de(this,qt,Io).call(this,{method:"getLogs",filter:n})});return s.map(i=>this._wrapLog(i,r))}_getProvider(e){me(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await UI.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=Sn(e);const n=d5(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await UI.getEnsAddress(this),i=await new t0(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(i==null||i===QC)return null;const a=await new t0(i,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(ks(r,"BAD_DATA")&&r.value==="0x"||ks(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const s=n??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const c=async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=s){i(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(ur("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){me(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=_(this,wa).get(e);n&&(n.timer&&clearTimeout(n.timer),_(this,wa).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=yd(this,v_)._++,s=()=>{_(this,wa).delete(r),e()};if(this.paused)_(this,wa).set(r,{timer:null,func:s,time:n});else{const i=setTimeout(s,n);_(this,wa).set(r,{timer:i,func:s,time:i2()})}return r}_forEachSubscriber(e){for(const n of _(this,Qs).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new une(e.type);case"block":{const n=new $Ge(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new FGe(this,e.type);case"event":return new uB(this,e.filter);case"transaction":return new WGe(this,e.hash);case"orphan":return new jGe(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of _(this,Qs).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),_(this,Js)!=null&&n.pause(_(this,Js));break}}async on(e,n){const r=await de(this,qt,GS).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,_(this,Js)!=null&&r.subscriber.pause(_(this,Js))),this}async once(e,n){const r=await de(this,qt,GS).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,_(this,Js)!=null&&r.subscriber.pause(_(this,Js))),this}async emit(e,...n){const r=await de(this,qt,Bv).call(this,e,n);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:o})=>{const a=new See(this,o?null:i,e);try{i.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),_(this,Qs).delete(r.tag)),s>0}async listenerCount(e){if(e){const r=await de(this,qt,Bv).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of _(this,Qs).values())n+=r.length;return n}async listeners(e){if(e){const r=await de(this,qt,Bv).call(this,e);return r?r.listeners.map(({listener:s})=>s):[]}let n=[];for(const{listeners:r}of _(this,Qs).values())n=n.concat(r.map(({listener:s})=>s));return n}async off(e,n){const r=await de(this,qt,Bv).call(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),_(this,Qs).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:s}=await de(this,qt,GS).call(this,e);r&&s.stop(),_(this,Qs).delete(n)}else for(const[n,{started:r,subscriber:s}]of _(this,Qs))r&&s.stop(),_(this,Qs).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return _(this,V0)}destroy(){this.removeAllListeners();for(const e of _(this,wa).keys())this._clearTimeout(e);L(this,V0,!0)}get paused(){return _(this,Js)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(L(this,Nu,-1),_(this,Js)!=null){if(_(this,Js)==!!e)return;me(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),L(this,Js,!!e);for(const n of _(this,wa).values())n.timer&&clearTimeout(n.timer),n.time=i2()-n.time}resume(){if(_(this,Js)!=null){this._forEachSubscriber(e=>e.resume()),L(this,Js,null);for(const e of _(this,wa).values()){let n=e.time;n<0&&(n=0),e.time=i2(),setTimeout(e.func,n)}}}}Qs=new WeakMap,Ch=new WeakMap,Js=new WeakMap,V0=new WeakMap,Do=new WeakMap,tg=new WeakMap,_h=new WeakMap,Nu=new WeakMap,v_=new WeakMap,wa=new WeakMap,K0=new WeakMap,Y0=new WeakMap,qt=new WeakSet,Io=async function(e){const n=_(this,Y0).cacheTimeout;if(n<0)return await this._perform(e);const r=HS(e.method,e);let s=_(this,_h).get(r);return s||(s=this._perform(e),_(this,_h).set(r,s),setTimeout(()=>{_(this,_h).get(r)===s&&_(this,_h).delete(r)},n)),await s},b5=async function(e,n,r){me(r<HGe,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const s=MI(e);try{return Oe(await this._perform({method:"call",transaction:s,blockTag:n}))}catch(i){if(!this.disableCcipRead&&GU(i)&&i.data&&r>=0&&n==="latest"&&s.to!=null&&_r(i.data,0,4)==="0x556f1830"){const o=i.data,a=await Ei(s.to,this);let c;try{c=ZGe(_r(i.data,4))}catch(d){me(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}me(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(s,c.calldata,c.urls);me(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const u={to:a,data:Ir([c.selector,JGe([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const d=await de(this,qt,b5).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:d}),d}}throw i}},v5=async function(e){const{value:n}=await fi({network:this.getNetwork(),value:e});return n},Uv=async function(e,n,r){let s=this._getAddress(n),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await de(this,qt,v5).call(this,de(this,qt,Io).call(this,Object.assign(e,{address:s,blockTag:i})))},E5=async function(e,n){if(nr(e,32))return await de(this,qt,Io).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await de(this,qt,Io).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},Bv=async function(e,n){let r=await s2(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await s2({orphan:"drop-log",log:n[0]},this)),_(this,Qs).get(r.tag)||null},GS=async function(e){const n=await s2(e,this),r=n.tag;let s=_(this,Qs).get(r);return s||(s={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},_(this,Qs).set(r,s)),s};function KGe(t,e){try{const n=C5(t,e);if(n)return xI(n)}catch{}return null}function C5(t,e){if(t==="0x")return null;try{const n=Qt(_r(t,e,e+32)),r=Qt(_r(t,n,n+32));return _r(t,n+32,n+32+r)}catch{}return null}function EW(t){const e=Zr(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function YGe(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const QGe=new Uint8Array([]);function JGe(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(QGe),n+=32;for(let r=0;r<t.length;r++){const s=Yt(t[r]);e[r]=EW(n),e.push(EW(s.length)),e.push(YGe(s)),n+=32+Math.ceil(s.length/32)*32}return Ir(e)}const CW="0x0000000000000000000000000000000000000000000000000000000000000000";function ZGe(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};me(Zy(t)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=_r(t,0,32);me(_r(n,0,12)===_r(CW,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=_r(n,12);try{const r=[],s=Qt(_r(t,32,64)),i=Qt(_r(t,s,s+32)),o=_r(t,s+32);for(let a=0;a<i;a++){const c=KGe(o,a*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{me(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=C5(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{me(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}me(_r(t,100,128)===_r(CW,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=_r(t,96,100);try{const r=C5(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{me(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function Vf(t,e){if(t.provider)return t.provider;me(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function _W(t,e){let n=MI(e);if(n.to!=null&&(n.to=Ei(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),Ei(r,t)]).then(([s,i])=>(J(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else n.from=t.getAddress();return await fi(n)}class XGe{constructor(e){se(this,"provider");wt(this,{provider:e||null})}async getNonce(e){return Vf(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await _W(this,e)}async populateTransaction(e){const n=Vf(this,"populateTransaction"),r=await _W(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const o=Qe(r.chainId);J(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?J(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&i&&J(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();me(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(me(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):me(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await fi(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await Vf(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return Vf(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Vf(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Vf(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=Vf(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const s=NI.from(r);return await n.broadcastTransaction(await this.signTransaction(s))}authorize(e){me(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function eqe(t){return JSON.parse(JSON.stringify(t))}var di,ul,ng,Ah,rg,Q0,Cf,_5,A5;class dne{constructor(e){Y(this,Cf);Y(this,di);Y(this,ul);Y(this,ng);Y(this,Ah);Y(this,rg);Y(this,Q0);L(this,di,e),L(this,ul,null),L(this,ng,de(this,Cf,_5).bind(this)),L(this,Ah,!1),L(this,rg,null),L(this,Q0,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){_(this,Ah)||(L(this,Ah,!0),de(this,Cf,_5).call(this,-2))}stop(){_(this,Ah)&&(L(this,Ah,!1),L(this,Q0,!0),de(this,Cf,A5).call(this),_(this,di).off("block",_(this,ng)))}pause(e){e&&de(this,Cf,A5).call(this),_(this,di).off("block",_(this,ng))}resume(){this.start()}}di=new WeakMap,ul=new WeakMap,ng=new WeakMap,Ah=new WeakMap,rg=new WeakMap,Q0=new WeakMap,Cf=new WeakSet,_5=async function(e){try{_(this,ul)==null&&L(this,ul,this._subscribe(_(this,di)));let n=null;try{n=await _(this,ul)}catch(i){if(!ks(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(n==null){L(this,ul,null),_(this,di)._recoverSubscriber(this,this._recover(_(this,di)));return}const r=await _(this,di).getNetwork();if(_(this,rg)||L(this,rg,r),_(this,rg).chainId!==r.chainId)throw new Error("chaid changed");if(_(this,Q0))return;const s=await _(this,di).send("eth_getFilterChanges",[n]);await this._emitResults(_(this,di),s)}catch(n){console.log("@TODO",n)}_(this,di).once("block",_(this,ng))},A5=function(){const e=_(this,ul);e&&(L(this,ul,null),e.then(n=>{_(this,di).destroyed||_(this,di).send("eth_uninstallFilter",[n])}))};var sg;class tqe extends dne{constructor(n,r){super(n);Y(this,sg);L(this,sg,eqe(r))}_recover(n){return new uB(n,_(this,sg))}async _subscribe(n){return await n.send("eth_newFilter",[_(this,sg)])}async _emitResults(n,r){for(const s of r)n.emit(_(this,sg),n._wrapLog(s,n._network))}}sg=new WeakMap;class nqe extends dne{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const rqe="bigint,boolean,function,number,string,symbol".split(/,/g);function qS(t){if(t==null||rqe.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(qS);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function sqe(t){return new Promise(e=>{setTimeout(e,t)})}function ny(t){return t&&t.toLowerCase()}function AW(t){return t&&typeof t.pollingInterval=="number"}const hne={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class o2 extends XGe{constructor(n,r){super(n);se(this,"address");r=Sn(r),wt(this,{address:r})}connect(n){me(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=qS(n),s=[];if(r.from){const o=r.from;s.push((async()=>{const a=await Ei(o,this.provider);J(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;s.push((async()=>{r.to=await Ei(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(n);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const l=async()=>{try{const u=await this.provider.getTransaction(s);if(u!=null){i(u.replaceableTransaction(r));return}}catch(u){if(ks(u,"CANCELLED")||ks(u,"BAD_DATA")||ks(u,"NETWORK_ERROR")||ks(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=s,o(u);return}if(ks(u,"INVALID_ARGUMENT")&&(c++,u.info==null&&(u.info={}),u.info.sendTransactionHash=s,c>10)){o(u);return}this.provider.emit("error",ur("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{l()},a.pop()||4e3)};l()})}async signTransaction(n){const r=qS(n);if(r.from){const i=await Ei(r.from,this.provider);J(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(n){const r=typeof n=="string"?qu(n):n;return await this.provider.send("personal_sign",[Oe(r),this.address.toLowerCase()])}async signTypedData(n,r,s){const i=qS(s),o=await DI.resolveNames(n,r,i,async a=>{const c=await Ei(a);return J(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(DI.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?qu(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Oe(r)])}}var ig,J0,Tu,dl,lc,ba,qi,E_,S5;class iqe extends VGe{constructor(n,r){super(n,r);Y(this,E_);Y(this,ig);Y(this,J0);Y(this,Tu);Y(this,dl);Y(this,lc);Y(this,ba);Y(this,qi);L(this,J0,1),L(this,ig,Object.assign({},hne,r||{})),L(this,Tu,[]),L(this,dl,null),L(this,ba,null),L(this,qi,null);{let i=null;const o=new Promise(a=>{i=a});L(this,lc,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(J(!s||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&n!=null&&L(this,ba,Sl.from(n))):s&&(J(n==null||s.matches(n),"staticNetwork MUST match network object","options",r),L(this,ba,s))}_getOption(n){return _(this,ig)[n]}get _network(){return me(_(this,ba),"network is not available yet","NETWORK_ERROR"),_(this,ba)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let s=n.transaction;if(s&&s.type!=null&&Qe(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(_(this,ba))return _(this,ba)}else return n;return _(this,qi)?await _(this,qi):this.ready?(L(this,qi,(async()=>{try{const r=Sl.from(Qe(await this.send("eth_chainId",[])));return L(this,qi,null),r}catch(r){throw L(this,qi,null),r}})()),await _(this,qi)):(L(this,qi,(async()=>{const r={id:yd(this,J0)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],L(this,qi,null)}catch(i){throw L(this,qi,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Sl.from(Qe(s.result));throw this.getRpcError(r,s)})()),await _(this,qi))}_start(){_(this,lc)==null||_(this,lc).resolve==null||(_(this,lc).resolve(),L(this,lc,null),(async()=>{for(;_(this,ba)==null&&!this.destroyed;)try{L(this,ba,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",ur("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await sqe(1e3)}de(this,E_,S5).call(this)})())}async _waitUntilReady(){if(_(this,lc)!=null)return await _(this,lc).promise}_getSubscriber(n){return n.type==="pending"?new nqe(this):n.type==="event"?this._getOption("polling")?new uB(this,n.filter):new tqe(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new une("orphan"):super._getSubscriber(n)}get ready(){return _(this,lc)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(n[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=pc(Qe(n[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{n[s]!=null&&(r[s]=Oe(n[s]))}),n.accessList&&(r.accessList=mm(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(s=>s.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(s=>{const i=pte(s);return{address:i.address,nonce:pc(i.nonce),chainId:pc(i.chainId),yParity:pc(i.signature.yParity),r:pc(i.signature.r),s:pc(i.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[ny(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[ny(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[ny(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[ny(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(ny):n.filter.address=ny(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:s}=n,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return ur("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:i}});if(c.match(/nonce/i)&&c.match(/too low/i))return ur("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=x5(i),l=r_.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",n.params[0],c?c.data:null);return l.info={error:i,payload:n},l}const o=JSON.stringify(aqe(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return ur("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:n,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return ur("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return ur("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return ur("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return ur("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?ur("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:i,payload:n}}):ur("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(ur("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const s=yd(this,J0)._++,i=new Promise((o,a)=>{_(this,Tu).push({resolve:o,reject:a,payload:{method:n,params:r,id:s,jsonrpc:"2.0"}})});return de(this,E_,S5).call(this),i}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const i=await r;if(n>=i.length)throw new Error("no such account");return new o2(this,i[n])}const{accounts:s}=await fi({network:this.getNetwork(),accounts:r});n=Sn(n);for(const i of s)if(Sn(i)===n)return new o2(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new o2(this,r))}destroy(){_(this,dl)&&(clearTimeout(_(this,dl)),L(this,dl,null));for(const{payload:n,reject:r}of _(this,Tu))r(ur("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));L(this,Tu,[]),super.destroy()}}ig=new WeakMap,J0=new WeakMap,Tu=new WeakMap,dl=new WeakMap,lc=new WeakMap,ba=new WeakMap,qi=new WeakMap,E_=new WeakSet,S5=function(){if(_(this,dl))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");L(this,dl,setTimeout(()=>{L(this,dl,null);const r=_(this,Tu);for(L(this,Tu,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==_(this,ig).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(o=>o.payload)).length>_(this,ig).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:l}of s){if(this.destroyed){c(ur("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const u=o.filter(d=>d.id===l.id)[0];if(u==null){const d=ur("missing response for request","BAD_DATA",{value:o,info:{payload:l}});this.emit("error",d),c(d);continue}if("error"in u){c(this.getRpcError(l,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},n))};var Sh;class oqe extends iqe{constructor(n,r){super(n,r);Y(this,Sh);let s=this._getOption("pollingInterval");s==null&&(s=hne.pollingInterval),L(this,Sh,s)}_getSubscriber(n){const r=super._getSubscriber(n);return AW(r)&&(r.pollingInterval=_(this,Sh)),r}get pollingInterval(){return _(this,Sh)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");L(this,Sh,n),this._forEachSubscriber(r=>{AW(r)&&(r.pollingInterval=_(this,Sh))})}}Sh=new WeakMap;function x5(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&nr(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=x5(t[e]);if(n)return n}return null}if(typeof t=="string")try{return x5(JSON.parse(t))}catch{}return null}function I5(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)I5(t[n],e);if(typeof t=="string")try{return I5(JSON.parse(t),e)}catch{}}}function aqe(t){const e=[];return I5(t,e),e}var Z0,X0;const fp=class fp extends oqe{constructor(n,r,s){const i=Object.assign({},s??{},{batchMaxCount:1});J(n&&n.request,"invalid EIP-1193 provider","ethereum",n);super(r,i);Y(this,Z0);Y(this,X0);L(this,X0,null),s&&s.providerInfo&&L(this,X0,s.providerInfo),L(this,Z0,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const l=await n.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const u=new Error(l.message);throw u.code=l.code,u.data=l.data,u.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}})}get providerInfo(){return _(this,X0)}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){J(!Array.isArray(n),"EIP-1193 does not support batch request","payload",n);try{const r=await _(this,Z0).call(this,n.method,n.params||[]);return[{id:n.id,result:r}]}catch(r){return[{id:n.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(n,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(n,r)}async hasSigner(n){n==null&&(n=0);const r=await this.send("eth_accounts",[]);return typeof n=="number"?r.length>n:(n=n.toLowerCase(),r.filter(s=>s.toLowerCase()===n).length!==0)}async getSigner(n){if(n==null&&(n=0),!await this.hasSigner(n))try{await _(this,Z0).call(this,"eth_requestAccounts",[])}catch(r){const s=r.payload;throw this.getRpcError(s,{id:s.id,error:r})}return await super.getSigner(n)}static async discover(n){if(n==null&&(n={}),n.provider)return new fp(n.provider);const r=n.window?n.window:typeof window<"u"?window:null;if(r==null)return null;const s=n.anyProvider;if(s&&r.ethereum)return new fp(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const i=n.timeout?n.timeout:300;return i===0?null:await new Promise((o,a)=>{let c=[];const l=h=>{c.push(h.detail),s&&u()},u=()=>{if(clearTimeout(d),c.length)if(n&&n.filter){const h=n.filter(c.map(f=>Object.assign({},f.info)));if(h==null)o(null);else if(h instanceof fp)o(h);else{let f=null;if(h.uuid&&(f=c.filter(g=>h.uuid===g.info.uuid)[0]),f){const{provider:p,info:g}=f;o(new fp(p,void 0,{providerInfo:g}))}else a(ur("filter returned unknown info","UNSUPPORTED_OPERATION",{value:h}))}}else{const{provider:h,info:f}=c[0];o(new fp(h,void 0,{providerInfo:f}))}else o(null);r.removeEventListener("eip6963:announceProvider",l)},d=setTimeout(()=>{u()},i);r.addEventListener("eip6963:announceProvider",l),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};Z0=new WeakMap,X0=new WeakMap;let N5=fp;const Dh={DMT:{symbol:"DMT",name:"DMT",address:"0x754cDAd6f5821077d6915004Be2cE05f93d176f8",decimals:18,logo:"/images/dmt-logo.png"},GOLD:{symbol:"GOLD",name:"GOLD",address:"0x6F5e2d3b8c5C5c5F9bcB4adCF40b13308e688D4D",decimals:18,logo:"/images/gold-logo.png"},LAWB:{symbol:"LAWB",name:"LAWB",address:"0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F",decimals:18,logo:"/images/lawb-logo.png"},MOSS:{symbol:"MOSS",name:"MOSS",address:"0xeA240b96A9621e67159c59941B9d588eb290ef09",decimals:18,logo:"/images/moss-logo.png"}},SW={testnet:{chess:"0x3112AF5728520F52FD1C6710dD7bD52285a68e47"},mainnet:{chess:"0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56"}},fne={testnet:{chainId:1992},mainnet:{chainId:1996}},cqe=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],lu=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"target",type:"address"}],name:"AddressEmptyCode",type:"error"},{inputs:[{internalType:"address",name:"implementation",type:"address"}],name:"ERC1967InvalidImplementation",type:"error"},{inputs:[],name:"ERC1967NonPayable",type:"error"},{inputs:[],name:"FailedCall",type:"error"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[],name:"UUPSUnauthorizedCallContext",type:"error"},{inputs:[{internalType:"bytes32",name:"slot",type:"bytes32"}],name:"UUPSUnsupportedProxiableUUID",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player1",type:"address"}],name:"GameCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player1",type:"address"},{indexed:!1,internalType:"uint256",name:"wagerAmount",type:"uint256"},{indexed:!1,internalType:"address",name:"wagerToken",type:"address"}],name:"GameCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"winner",type:"address"},{indexed:!1,internalType:"uint256",name:"houseFee",type:"uint256"},{indexed:!1,internalType:"uint256",name:"payoutOrRefund",type:"uint256"},{indexed:!1,internalType:"address",name:"wagerToken",type:"address"}],name:"GameEnded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player2",type:"address"}],name:"GameJoined",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"minWager",type:"uint256"},{indexed:!1,internalType:"uint256",name:"maxWager",type:"uint256"}],name:"TokenLimitsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{inputs:[],name:"DMT_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"GOLD_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"LAWB_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"MOSS_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"UPGRADE_INTERFACE_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"addSupportedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"cancelGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"wagerToken",type:"address"},{internalType:"uint256",name:"wagerAmount",type:"uint256"}],name:"createGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"winner",type:"address"}],name:"endGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"games",outputs:[{internalType:"address",name:"player1",type:"address"},{internalType:"address",name:"player2",type:"address"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"address",name:"winner",type:"address"},{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"uint256",name:"wagerAmount",type:"uint256"},{internalType:"address",name:"wagerToken",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"house",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_house",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"joinGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"leaderboard",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerToGame",outputs:[{internalType:"bytes6",name:"",type:"bytes6"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"removeSupportedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"player",type:"address"}],name:"resetPlayerGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"supportedTokens",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenMaxWager",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenMinWager",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"minWager",type:"uint256"},{internalType:"uint256",name:"maxWager",type:"uint256"}],name:"updateTokenLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newImplementation",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address payable",name:"recipient",type:"address"}],name:"withdrawTokens",outputs:[],stateMutability:"nonpayable",type:"function"}];function lqe(t,e){const n=Dh[t],{data:r,isLoading:s,error:i}=q3({address:n.address,abi:cqe,functionName:"balanceOf",args:e?[e]:void 0,query:{enabled:!!e}});return{balance:r?Number(r)/Math.pow(10,n.decimals):0,balanceWei:r||BigInt(0),isLoading:s,error:i}}const uqe=({selectedToken:t,onTokenSelect:e,wagerAmount:n,onWagerChange:r,disabled:s=!1})=>{const{address:i}=f1(),{balance:o}=lqe(t,i),[a,c]=k.useState(!1),l=u=>{e(u),c(!1)};return y.jsxs("div",{style:{marginBottom:"10px"},children:[y.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[y.jsx("label",{style:{fontWeight:"bold",minWidth:"80px"},children:"Token:"}),y.jsxs("div",{style:{position:"relative"},children:[y.jsxs("button",{type:"button",onClick:()=>c(!a),disabled:s,style:{padding:"5px 10px",border:"2px outset #fff",background:"#c0c0c0",cursor:s?"not-allowed":"pointer",minWidth:"100px",textAlign:"left"},children:[Dh[t].symbol,y.jsx("span",{style:{float:"right"},children:""})]}),a&&!s&&y.jsx("div",{style:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",zIndex:10,minWidth:"100px"},children:Object.entries(Dh).map(([u,d])=>y.jsx("div",{onClick:()=>l(u),style:{padding:"5px 10px",cursor:"pointer",borderBottom:"1px solid #eee"},onMouseEnter:h=>h.currentTarget.style.background="#f0f0f0",onMouseLeave:h=>h.currentTarget.style.background="#fff",children:d.symbol},u))})]})]}),y.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[y.jsx("label",{style:{fontWeight:"bold",minWidth:"80px"},children:"Amount:"}),y.jsx("input",{type:"number",value:n,onChange:u=>r(Number(u.target.value)),disabled:s,min:"0.1",max:"1000",step:"0.1",style:{padding:"5px",border:"2px inset #fff",background:"#fff",width:"100px"}}),y.jsxs("span",{style:{color:"#666",fontSize:"12px"},children:["Balance: ",o.toFixed(2)," ",Dh[t].symbol]})]}),n>o&&y.jsxs("div",{style:{color:"#ff0000",fontSize:"12px",marginTop:"5px"},children:["Insufficient balance. You have ",o.toFixed(2)," ",Dh[t].symbol]})]})},dqe=t=>t===fne.testnet.chainId?SW.testnet.chess:SW.mainnet.chess,Cn={LOBBY:"lobby",WAITING:"waiting",ACTIVE:"active",FINISHED:"finished"},a2={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},ou=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],hqe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}];function fqe(){const t=new Uint8Array(6);return window.crypto.getRandomValues(t),"0x"+Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}async function pqe(t,e){try{if(typeof window>"u"||!window.ethereum)throw new Error("No Ethereum provider found. Please connect your wallet.");const n=new N5(window.ethereum);return await new t0(e,lu,n).playerToGame(t)}catch(n){return console.error("Error fetching invite code from contract:",n),null}}const pne=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s,chainId:i}=f1(),o=dqe(i||fne.mainnet.chainId),[a,c]=k.useState(""),[l,u]=k.useState(""),[d,h]=k.useState(!1),[f,p]=k.useState(!1),[g,w]=k.useState(!1),[m,b]=k.useState(!1),{writeContract:v,isPending:A,data:C}=BA(),{writeContract:T,isPending:x,data:N,error:S}=BA(),{writeContract:D,isPending:P,data:$}=BA(),{writeContract:G,isPending:W,data:I}=BA(),R=RFe(),{isLoading:B}=UA({hash:C}),{isLoading:O,data:M}=UA({hash:N}),{isLoading:j}=UA({hash:$}),{isLoading:V}=UA({hash:I});k.useEffect(()=>{I&&!V&&(console.log("[REFUND] Transaction completed successfully"),nt("Game refunded successfully! Your wager has been returned."),zt(Cn.LOBBY),ce(""),Nn(null),Me(0,"refund completed"),lr(null),Mf())},[I,V]);const{data:te}=q3({address:o,abi:lu,functionName:"playerToGame",args:r?[r]:void 0,query:{enabled:!!r}}),{data:Z}=q3({address:o,abi:lu,functionName:"games",args:te?[te]:void 0,query:{enabled:!!te&&te!=="0x000000000000"}}),[X,ce]=k.useState(""),ge=(U,H)=>{console.log(`[INVITE_DEBUG] Setting inviteCode to "${U}" from ${H}`),X&&!U&&console.warn(`[INVITE_DEBUG] WARNING: Clearing inviteCode from "${X}" to "${U}" from ${H}`),ce(U)},Me=(U,H)=>{console.log(`[WAGER_DEBUG] Setting wager to ${U} TDMT from ${H}`),fd!==U&&console.log(`[WAGER_DEBUG] Wager changed from ${fd} to ${U} TDMT`),YT(U)},[it,Je]=k.useState("moves"),bt=async()=>{if(!X||!r){alert("No game to refund or wallet not connected");return}try{console.log("[REFUND] Attempting to refund game:",X);const U=await is.getGame(X);if(!U||U.blue_player!==r){alert("Only the game creator can refund the game");return}if(U.red_player&&U.red_player!=="0x0000000000000000000000000000000000000000"){alert("Cannot refund game after opponent has joined");return}await G({address:o,abi:lu,functionName:"cancelGame",args:[X]}),console.log("[REFUND] Cancel game transaction submitted")}catch(U){console.error("[REFUND] Error refunding game:",U),alert("Failed to refund game. Please try again.")}},Nt=async()=>{if(!r||!ke){console.error("[CLAIM] Missing required data for claiming winnings");return}let U=X;if(!U&&r){console.log("[CLAIM] Invite code missing from state, trying to get from contract...");try{const H=await pqe(r,o);H&&H!=="0x000000000000"&&(U=H,console.log("[CLAIM] Retrieved invite code from contract:",U))}catch(H){console.error("[CLAIM] Error getting invite code from contract:",H)}}if(!U){console.error("[CLAIM] Could not determine invite code for claiming winnings"),alert("Could not determine game invite code. Please try refreshing the page.");return}try{w(!0),console.log("[CLAIM] Claiming winnings for game:",U,"Player:",ke,"Address:",r);const H=await is.getGame(U);if(!H){console.error("[CLAIM] Error fetching game data:","Game data not found"),alert("Failed to fetch game data. Please try again.");return}console.log("[CLAIM] Firebase game data:",H);let F=null;if(H.winner&&(H.blue_player||H.red_player)&&(F=H.winner==="blue"?H.blue_player:H.red_player,console.log("[CLAIM] Using Firebase winner data:",{winner:H.winner,winnerAddress:F})),!F&&Z)if(H.winner&&(H.winner==="blue"||H.winner==="red")){console.log("[CLAIM] Using Firebase winner color with contract player addresses");let le,Te,Se,De,ft,Gt;if(Array.isArray(Z))[le,Te,Se,De,ft,Gt]=Z;else{console.error("[CLAIM] Unexpected contract data format:",Z),alert("Failed to verify winner. Please try again.");return}F=H.winner==="blue"?le:Te,console.log("[CLAIM] Winner from Firebase color + contract addresses:",{winnerColor:H.winner,winnerAddress:F,player1:le,player2:Te})}else{console.log("[CLAIM] Using contract data for winner verification"),console.log("[CLAIM] Full contract data:",Z);let le,Te,Se,De,ft,Gt;if(Array.isArray(Z))[le,Te,Se,De,ft,Gt]=Z;else{console.error("[CLAIM] Unexpected contract data format:",Z),alert("Failed to verify winner. Please try again.");return}const St=String(De);if(St.startsWith("0x"))F=St;else if(St==="blue"||St==="red")F=St==="blue"?le:Te;else if(St==="1"||St==="2")F=St==="1"?le:Te;else{console.error("[CLAIM] Unknown winner format:",De,"as string:",St),alert("Failed to verify winner. Please try again.");return}console.log("[CLAIM] Winner from contract:",{winner:De,winnerAddress:F,player1:le,player2:Te,winnerType:typeof De,winnerValue:De,address:r,addressType:typeof r})}if(!F){console.error("[CLAIM] Could not determine winner address"),alert("Failed to verify winner. Please try again.");return}if(console.log("[CLAIM] Winner verification details:",{winnerAddress:F,address:r,playerColor:ke,winnerAddressType:typeof F,addressType:typeof r,addressesMatch:F===r,winnerAddressLength:F==null?void 0:F.length,addressLength:r==null?void 0:r.length}),F!==r){console.error("[CLAIM] Player is not the winner",{winnerAddress:F,address:r,playerColor:ke}),alert("Only the winner can claim winnings.");return}console.log("[CLAIM]  Winner verification passed! Proceeding with contract call...");let ee=U;if(!ee&&Z){console.log("[CLAIM] Using invite code from contract data as fallback");let le,Te,Se,De,ft,Gt;if(Array.isArray(Z))[le,Te,Se,De,ft,Gt]=Z,ee=ft;else{console.error("[CLAIM] Unexpected contract data format for invite code:",Z),alert("Failed to get invite code. Please try again.");return}}if(!ee||typeof ee!="string"||!ee.startsWith("0x")||ee.length!==14){console.error("[CLAIM] Invalid invite code for contract claim:",ee),alert("Invalid invite code for contract claim.");return}console.log("[CLAIM] Calling contract with:",{inviteCode:ee,winner:F,functionName:"endGame",inviteCodeSource:H.invite_code?"Firebase":"Contract"}),D({address:o,abi:lu,functionName:"endGame",args:[ee,F]}),console.log("[CLAIM] Contract call initiated successfully"),P?console.log("[CLAIM] Contract call is pending..."):console.log("[CLAIM] Contract call status:",{isEndingGame:P,endGameHash:$})}catch(H){console.error("[CLAIM] Error claiming winnings:",H),alert("Failed to claim winnings. Please try again.")}finally{w(!1)}},[At,ne]=k.useState(ou),[ie,be]=k.useState("blue"),[fe,ve]=k.useState(null),[ht,Xe]=k.useState([]),[ct,Tt]=k.useState([]),[In,nt]=k.useState("Waiting for opponent..."),[Dn,zt]=k.useState(Cn.LOBBY),[ke,Nn]=k.useState(null),[Ri,lr]=k.useState(null),[fd,YT]=k.useState(0),[QT,pB]=k.useState([]),[wm,pd]=k.useState(!1),[Rf,wo]=k.useState(!1),[Ht,Pf]=k.useState(null),[zn,ns]=k.useState(null),[gB,mB]=k.useState(""),[Gl,_1]=k.useState(0),[gd,A1]=k.useState("DMT"),[yB]=k.useState(!0),[Uc,Cb]=k.useState(null),[bo,bm]=k.useState(0),[S1,JT]=k.useState(Date.now()),_b=36e5;k.useEffect(()=>{document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode")},[]);const[Bc,ZT]=k.useState(!1),[Ab,Of]=k.useState(null),[Sb,xb]=k.useState(!1),[kf,Ib]=k.useState(null),[x1,vm]=k.useState(!1),[I1,N1]=k.useState(!0),[Em,T1]=k.useState(null),Cm=k.useCallback(()=>{Uc&&clearTimeout(Uc);const U=setTimeout(()=>{console.log("[TIMEOUT] 60-minute timeout reached, ending game"),R1()},_b);Cb(U),JT(Date.now())},[Uc]),_m=k.useCallback(()=>{Uc&&(clearTimeout(Uc),Cb(null))},[Uc]),R1=async()=>{if(!X||!ke)return;console.log("[TIMEOUT] Handling timeout for game:",X);const U=ie==="blue"?"red":"blue",H=U==="blue"?Z==null?void 0:Z[0]:Z==null?void 0:Z[1];H&&(console.log("[TIMEOUT] Ending game with winner:",H),D({address:o,abi:lu,functionName:"endGame",args:[X,H]}),nt(`Game ended due to timeout. ${U==="red"?"Red":"Blue"} wins!`),zt(Cn.FINISHED))},[Rr,P1]=k.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),[XT,Nb]=k.useState([]),[Df,Tb]=k.useState(null),ta=k.useRef(null),za=k.useRef(null),O1=k.useRef(r);k.useEffect(()=>{O1.current=r},[r]),k.useEffect(()=>{console.log("[JOIN RECEIPT DEBUG] - joinGameHash:",N),console.log("[JOIN RECEIPT DEBUG] - isWaitingForJoinReceipt:",O),console.log("[JOIN RECEIPT DEBUG] - pendingJoinGameData:",zn),console.log("[JOIN RECEIPT DEBUG] - condition:",N&&!O&&zn),N&&!O&&zn&&(console.log("[CONTRACT] Join transaction confirmed:",N),r===zn.address&&(console.log("[CONTRACT] Setting playerColor to red for confirmed join transaction"),Nn("red"),lr(zn.gameData.blue_player)),is.updateGame(zn.inviteCode,{...zn.gameData,red_player:zn.address,game_state:"active"}).then(()=>{console.log("[CONTRACT] Firebase updated successfully after join confirmation"),zt(Cn.ACTIVE),nt("Game started!"),en(zn.inviteCode),console.log("[CONTRACT] Clearing pending join data"),ns(null)}).catch(U=>{console.error("Error updating game in database:",U),nt("Joined game on contract but failed to update database"),ns(null)}))},[N,O,zn,r]),k.useEffect(()=>{$&&!j&&(console.log("[CLAIM] End game transaction confirmed:",$),nt("Winnings claimed successfully! Transaction hash: "+$.slice(0,10)+"..."),w(!1))},[$,j]),k.useEffect(()=>{P===!1&&g&&!$&&(console.log("[CLAIM] End game transaction rejected or failed"),nt("Claim transaction was rejected. Please try again."),w(!1))},[P,g,$]),k.useEffect(()=>{console.log("[CREATE DEBUG] Transaction receipt handler - createGameHash:",C),console.log("[CREATE DEBUG] Transaction receipt handler - isWaitingForCreateReceipt:",B),console.log("[CREATE DEBUG] Transaction receipt handler - pendingGameData:",Ht),console.log("[CREATE DEBUG] Transaction receipt handler - inviteCode:",X),console.log("[CREATE DEBUG] Transaction receipt handler - condition:",C&&!B&&Ht&&!X),console.log("[CREATE DEBUG] Transaction receipt handler - individual conditions:"),console.log("[CREATE DEBUG] - createGameHash exists:",!!C),console.log("[CREATE DEBUG] - not waiting for receipt:",!B),console.log("[CREATE DEBUG] - pendingGameData exists:",!!Ht),console.log("[CREATE DEBUG] - no inviteCode set:",!X),C&&!B&&Ht&&!X?(console.log("[CONTRACT] Create game transaction confirmed:",C),is.createGame(Ht).then(()=>{console.log("[FIREBASE] Game created successfully after transaction confirmation"),ce(Ht.invite_code),Nn("blue"),Me(Gl,"create game success"),zt(Cn.WAITING),nt("Waiting for opponent to join..."),en(Ht.invite_code),setTimeout(()=>{Mf()},1e3),Pf(null),pd(!1),wo(!1)}).catch(U=>{console.error("[FIREBASE] Error creating game after transaction:",U),nt("Transaction confirmed but failed to create game in database"),Pf(null),pd(!1),wo(!1)})):C&&!B&&(console.log("[CREATE DEBUG] Transaction confirmed but conditions not met for Firebase update:"),console.log("[CREATE DEBUG] - pendingGameData missing:",!Ht),console.log("[CREATE DEBUG] - inviteCode already set:",!!X))},[C,B,Ht,Gl]),k.useEffect(()=>{console.log("[PENDING DEBUG] pendingGameData changed:",Ht)},[Ht]),k.useEffect(()=>{if(console.log("[PENDING DEBUG] pendingJoinGameData changed:",zn),zn){const U=setTimeout(()=>{console.log("[AUTO-CLEAR] Pending join data has been stuck for too long, clearing automatically"),ns(null)},3e4);return()=>clearTimeout(U)}},[zn]),k.useEffect(()=>{console.log("[CREATE REJECTION DEBUG] - isCreatingGameContract:",A),console.log("[CREATE REJECTION DEBUG] - pendingGameData:",Ht),console.log("[CREATE REJECTION DEBUG] - createGameHash:",C),console.log("[CREATE REJECTION DEBUG] - condition:",A===!1&&Ht&&!C),A===!1&&Ht&&!C&&(console.log("[CONTRACT] Create game transaction rejected or failed"),nt("Transaction was rejected. Please try again."),Pf(null),pd(!1),wo(!1))},[A,Ht,C]),k.useEffect(()=>{x===!1&&zn&&!N&&(console.log("[CONTRACT] Join game transaction rejected or failed"),console.log("[CONTRACT] Rejection details - isJoiningGameContract:",x),console.log("[CONTRACT] Rejection details - pendingJoinGameData:",zn),console.log("[CONTRACT] Rejection details - joinGameHash:",N),console.log("[CONTRACT] Rejection details - address:",r),console.log("[CONTRACT] Rejection details - playerGameInviteCode:",te),nt("Transaction was rejected. Please try again."),ge("","join transaction rejection"),Nn(null),Me(0,"join transaction rejection"),lr(null),zt(Cn.LOBBY),nt(""),ns(null))},[x,zn,N,r,te]),k.useEffect(()=>{r&&te!==void 0&&(m||(te!=="0x000000000000"&&Z||te==="0x000000000000")&&eR())},[r,te,Z,m]),k.useEffect(()=>{b(!1)},[r]),k.useEffect(()=>{Dn===Cn.ACTIVE&&ke?(console.log("[TIMEOUT] Starting timeout timer for active game"),Cm()):_m()},[Dn,ke,Cm,_m]),k.useEffect(()=>{Dn===Cn.ACTIVE&&ct.length>0&&(console.log("[TIMEOUT] Move made, resetting timeout timer"),Cm())},[ct,Dn,Cm]),k.useEffect(()=>{if(Dn===Cn.ACTIVE&&Uc){const U=setInterval(()=>{const H=Date.now()-S1,F=Math.max(0,_b-H);bm(Math.ceil(F/1e3))},1e3);return()=>clearInterval(U)}},[Dn,Uc,S1]),k.useEffect(()=>()=>{cn(),_m(),ta.current&&ta.current(),za.current&&clearTimeout(za.current)},[_m]);const eR=async()=>{if(r)try{if(console.log("[GAME_STATE] Checking for active games for player:",r),te&&te!=="0x000000000000"&&!Z){console.log("[GAME_STATE] Waiting for contract data...");return}if(te&&te!=="0x000000000000"&&(console.log("[GAME_STATE] Found game in contract:",te),Z)){let F,ee,le,Te,Se,De;if(Array.isArray(Z))[F,ee,le,Te,Se,De]=Z;else{console.error("[GAME_STATE] Unexpected contract data format:",Z);return}if(console.log("[GAME_STATE] Parsed contract game data:",{player1:F,player2:ee,isActive:le,winner:Te,inviteCode:Se,wagerAmount:De}),!Se){console.error("[GAME_STATE] Invalid invite code:",Se);return}const ft=F===r?"blue":"red",Gt=F===r?ee:F;console.log("[GAME_STATE] Player is",ft,"opponent is",Gt),console.log("[DEBUG] Contract address comparison:"),console.log("[DEBUG] - player1 (blue):",F),console.log("[DEBUG] - player2 (red):",ee),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - player1 === address:",F===r),console.log("[DEBUG] - player2 === address:",ee===r);const St=await is.getGame(Se);if(St){if(console.log("[GAME_STATE] Found game in Firebase:",St),ce(Se),Nn(ft),Me(parseFloat(St.bet_amount)/1e18,"checkPlayerGameState Firebase"),lr(Gt),St.game_state==="waiting")zt(Cn.WAITING),nt("Waiting for opponent to join..."),console.log("[GAME_STATE] Setting game mode to WAITING");else if(St.game_state==="active"||St.game_state==="test_update"){if(zt(Cn.ACTIVE),nt("Game in progress"),console.log("[GAME_STATE] Setting game mode to ACTIVE (from state:",St.game_state,")"),St.board){const jr=St.board;ne(Xt(jr)),be(St.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state:",St.game_state,"- treating as active"),zt(Cn.ACTIVE),nt("Game in progress"),St.board){const jr=St.board;ne(Xt(jr)),be(St.current_player||"blue")}en(Se),b(!0),console.log("[GAME_STATE] Game state loaded from Firebase"),console.log("[GAME_STATE] Current game mode:",Dn),console.log("[GAME_STATE] Game state from Firebase:",St.game_state);return}else{console.log("[GAME_STATE] Game exists in contract but not in Firebase, syncing...");const jr={invite_code:Se,game_title:`Game ${Se.slice(-6)}`,bet_amount:De?De.toString():"0",blue_player:F,red_player:ee,game_state:le?"active":"waiting",board:{positions:Mn(ou),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:o,is_public:!0};if(await is.createGame(jr),console.log("[GAME_STATE] Successfully synced game to Firebase:",jr),ce(Se),Nn(ft),Me(parseFloat(jr.bet_amount)/1e18,"checkPlayerGameState sync"),lr(Gt),le?(zt(Cn.ACTIVE),nt("Game in progress")):(zt(Cn.WAITING),nt("Waiting for opponent to join...")),jr.board){const $ne=jr.board;ne(Xt($ne)),be(jr.current_player||"blue")}en(Se),b(!0),console.log("[GAME_STATE] Game state loaded after sync");return}}console.log("[GAME_STATE] No contract game found, checking Firebase...");const H=(await is.getActiveGames()).filter(F=>F.chain==="sanko"&&(F.blue_player===r||F.red_player===r)&&["waiting","active"].includes(F.game_state));if(H&&H.length>0){const F=H[0];if(console.log("[GAME_STATE] Found active game in Firebase:",F),console.log("[DEBUG] Firebase fallback address comparison:"),console.log("[DEBUG] - blue_player:",F.blue_player),console.log("[DEBUG] - red_player:",F.red_player),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - blue_player === address:",F.blue_player===r),console.log("[DEBUG] - red_player === address:",F.red_player===r),ce(F.invite_code),Nn(F.blue_player===r?"blue":"red"),Me(parseFloat(F.bet_amount)/1e18,"checkPlayerGameState fallback"),lr(F.blue_player===r?F.red_player:F.blue_player),F.game_state==="waiting")zt(Cn.WAITING),nt("Waiting for opponent to join...");else if(F.game_state==="active"||F.game_state==="test_update"){if(zt(Cn.ACTIVE),nt("Game in progress"),F.board){const ee=F.board;ne(Xt(ee)),be(F.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state in Firebase check:",F.game_state,"- treating as active"),zt(Cn.ACTIVE),nt("Game in progress"),F.board){const ee=F.board;ne(Xt(ee)),be(F.current_player||"blue")}en(F.invite_code),b(!0),console.log("[GAME_STATE] Game state loaded successfully from Firebase");return}console.log("[GAME_STATE] No active games found"),zt(Cn.LOBBY),pd(!1),b(!0)}catch(U){console.error("[GAME_STATE] Error in checkPlayerGameState:",U)}},ql=async()=>{try{await vee();const U=await bee(20);Nb(U)}catch(U){console.error("Error loading leaderboard:",U)}},Ha=async U=>{if(console.log("[SCORE] updateScore called with:",U,"for address:",r),!r){console.error("[SCORE] No address available for score update");return}try{console.log("[SCORE] Updating score for address:",Hg(r)),await SI(r,U)?console.log("[SCORE] Successfully updated score for:",Hg(r)):console.error("[SCORE] Failed to update score"),console.log("[SCORE] updateScore completed successfully")}catch(H){console.error("[SCORE] Error updating score:",H)}},md=async(U,H,F)=>{try{if(console.log("[SCORE] Updating both players scores:",{winner:U,bluePlayer:H,redPlayer:F}),!H||!F){console.error("[SCORE] Missing player addresses from contract");return}await N7e(U,H,F)?(console.log("[SCORE] Successfully updated both players scores"),await ql()):console.error("[SCORE] Failed to update both players scores")}catch(ee){console.error("[SCORE] Error updating both players scores:",ee)}},Mf=async()=>{try{const U=await is.getOpenGames();console.log("[FIREBASE] Loaded open games:",U),await tR(U),pB(U)}catch(U){console.error("Error loading open games:",U)}},tR=async U=>{if(console.log("[CLEANUP] Checking for ghost games..."),!R){console.log("[CLEANUP] Public client not available, skipping cleanup");return}for(const H of U)try{const F=H.invite_code;if(!F||typeof F!="string"||!F.startsWith("0x")||F.length!==14){console.warn("[CLEANUP] Invalid invite code for game:",H.invite_code,F);continue}const ee=await R.readContract({address:o,abi:lu,functionName:"games",args:[F]});(!ee||Array.isArray(ee)&&ee[0]==="0x0000000000000000000000000000000000000000")&&(console.log("[CLEANUP] Found ghost game:",H.invite_code,"- removing from Firebase"),await is.deleteGame(H.invite_code),console.log("[CLEANUP] Ghost game removed:",H.invite_code))}catch(F){console.error("[CLEANUP] Error checking game:",H.invite_code,F)}},q=async()=>{if(!(!r||Gl<=0)){console.log("[CREATE] Starting game creation - address:",r,"wager:",Gl),wo(!0);try{const U=fqe();console.log("[CREATE] Generated invite code:",U);const H=Dh[gd].address,F=BigInt(Math.floor(Gl*Math.pow(10,Dh[gd].decimals))),ee={invite_code:U,game_title:`Chess Game ${U.slice(-6)}`,bet_amount:F.toString(),bet_token:gd,blue_player:r,game_state:"waiting",board:{positions:Mn(ou),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:o,is_public:!0,created_at:new Date().toISOString()};console.log("[CREATE] Game data prepared:",ee),console.log("[CREATE] Calling contract with args:",[U,H,F]),v({address:o,abi:lu,functionName:"createGame",args:[U,H,F]}),console.log("[CREATE] Contract call initiated, setting pending data"),console.log("[CREATE] Pending game data being set:",ee),Pf(ee),nt("Creating game... Please confirm transaction in your wallet.")}catch(U){console.error("[CREATE] Error creating game:",U),nt("Failed to create game. Please try again.")}finally{wo(!1)}}},K=async U=>{if(r)try{const H=await is.getGame(U);if(!H||H.game_state!=="waiting"){nt("Game not found or already full");return}const ee=parseFloat(H.bet_amount)/1e18;if(ce(U),Nn("red"),Me(ee,"joinGame"),lr(H.blue_player),console.log("[JOIN] Setting up join game with data:",{inviteCode:U,playerColor:"red",wagerAmountTDMT:ee,opponent:H.blue_player,address:r}),r===H.blue_player){console.error("[JOIN] Player cannot join their own game"),nt("You cannot join your own game");return}if(te&&te!=="0x000000000000"){console.error("[JOIN] Player already has an active game:",te),nt("You already have an active game");return}if(typeof window<"u"&&window.ethereum)try{const le=await window.ethereum.request({method:"eth_chainId"}),Te=await window.ethereum.request({method:"eth_accounts"});console.log("[JOIN] Wallet state check - chainId:",le),console.log("[JOIN] Wallet state check - connectedAccounts:",Te),console.log("[JOIN] Wallet state check - currentAddress:",r),console.log("[JOIN] Wallet state check - isConnected:",s)}catch(le){console.error("[JOIN] Error checking wallet state:",le)}console.log("[JOIN] Contract call parameters - contractAddress:",o),console.log("[JOIN] Contract call parameters - functionName: joinGame"),console.log("[JOIN] Contract call parameters - args:",[U]),nt("Joining game... Please confirm transaction in your wallet."),setTimeout(()=>{console.log("[JOIN] About to call writeJoinGame..."),console.log("[JOIN] Final contract call parameters:"),console.log("[JOIN] - address:",o),console.log("[JOIN] - functionName: joinGame"),console.log("[JOIN] - args:",[U]),T({address:o,abi:lu,functionName:"joinGame",args:[U]}),console.log("[JOIN] writeJoinGame called, setting pending data..."),ns({inviteCode:U,gameData:H,address:r}),console.log("[JOIN] Pending data set"),console.log("[JOIN] Transaction initiated - waiting for user confirmation in MetaMask...")},500)}catch(H){console.error("[JOIN] Error joining game:",H),nt("Failed to join game. Please try again."),ge("","join game error"),Nn(null),Me(0,"join game error"),lr(null)}},[ae,oe]=k.useState(null),[re,Ie]=k.useState(""),[Ne,tt]=k.useState(!0),cn=()=>{console.log("[FIREBASE] No fallback to stop")},en=U=>{console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",U),ta.current&&(console.log("[FIREBASE] Removing existing subscription"),ta.current());const H=is.subscribeToGame(U,F=>{const ee=O1.current;if(console.log("=== [DEBUG] FIREBASE SUBSCRIPTION CALLBACK ==="),console.log("[DEBUG] Current wallet address (from addressRef):",ee),console.log("[DEBUG] Current wallet address (from useAccount):",r),console.log("[DEBUG] Game data received:",F),console.log("[DEBUG] Blue player from Firebase:",F==null?void 0:F.blue_player),console.log("[DEBUG] Red player from Firebase:",F==null?void 0:F.red_player),console.log("[DEBUG] Blue player type:",typeof(F==null?void 0:F.blue_player)),console.log("[DEBUG] Red player type:",typeof(F==null?void 0:F.red_player)),console.log("[DEBUG] Current address type:",typeof ee),console.log("[DEBUG] Current playerColor state:",ke),console.log("[DEBUG] Pending join game data:",!!zn),!F){console.log("[DEBUG] No game data received");return}if(zn&&ee===zn.address)console.log("[DEBUG] Pending join transaction detected - preserving playerColor:",ke),F.game_state==="active"&&(console.log("[AUTO-CLEAR] Game is active, clearing pending join data"),ns(null)),F.blue_player&&F.red_player&&F.red_player!=="0x0000000000000000000000000000000000000000"&&lr(F.blue_player===ee?F.red_player:F.blue_player);else if(ee&&F.blue_player&&F.red_player&&F.red_player!=="0x0000000000000000000000000000000000000000"){console.log("[DEBUG] Both players present, comparing addresses...");const Te=ee.toLowerCase()===F.blue_player.toLowerCase(),Se=ee.toLowerCase()===F.red_player.toLowerCase();console.log("[DEBUG] Blue player match:",Te),console.log("[DEBUG] Red player match:",Se),console.log("[DEBUG] Blue comparison:",`${ee.toLowerCase()} === ${F.blue_player.toLowerCase()}`),console.log("[DEBUG] Red comparison:",`${ee.toLowerCase()} === ${F.red_player.toLowerCase()}`),Te&&ke!=="blue"?(console.log("[DEBUG] Setting player color to BLUE"),Nn("blue"),lr(F.red_player)):Se&&ke!=="red"?(console.log("[DEBUG] Setting player color to RED"),Nn("red"),lr(F.blue_player)):!Te&&!Se&&ke!==null?(console.log("[DEBUG] No address match found - setting playerColor to null"),Nn(null),lr(null)):console.log("[DEBUG] Player color already correctly set to:",ke)}else{if(console.log("[DEBUG] Missing player data or red player is zero address - using contract data as fallback"),console.log("[DEBUG] - currentAddress:",!!ee),console.log("[DEBUG] - blue_player:",!!F.blue_player),console.log("[DEBUG] - red_player:",F==null?void 0:F.red_player),console.log("[DEBUG] - Current playerColor state:",ke),console.log("[DEBUG] - Contract game data available:",!!Z),ke&&(ke==="blue"||ke==="red")){console.log("[DEBUG] Preserving existing valid playerColor:",ke);return}else if(Z&&Array.isArray(Z)&&ee){const[Te,Se]=Z;if(Te&&Se){const De=Te.toLowerCase()===ee.toLowerCase()?"blue":"red",ft=Te.toLowerCase()===ee.toLowerCase()?Se:Te;console.log("[DEBUG] Setting playerColor from contract fallback:",De),Nn(De),lr(ft)}}else console.log("[DEBUG] No valid data available, but preserving existing playerColor if valid"),(!ke||ke!=="blue"&&ke!=="red")&&(console.log("[DEBUG] Setting playerColor to null"),Nn(null));F.blue_player&&F.red_player&&F.red_player!=="0x0000000000000000000000000000000000000000"&&lr(F.blue_player===ee?F.red_player:F.blue_player)}console.log("=== [DEBUG] END FIREBASE SUBSCRIPTION CALLBACK ==="),console.log("[WAGER DEBUG] bet_amount from Firebase:",F.bet_amount),console.log("[WAGER DEBUG] bet_amount type:",typeof F.bet_amount),console.log("[WAGER DEBUG] Full gameData:",F),console.log("[WAGER DEBUG] parsed value:",F.bet_amount?parseFloat(F.bet_amount):"null"),console.log("[WAGER DEBUG] converted to TDMT:",F.bet_amount?parseFloat(F.bet_amount)/1e18:"null");let le=0;F.bet_amount&&!isNaN(parseFloat(F.bet_amount))?(le=parseFloat(F.bet_amount)/1e18,console.log("[WAGER DEBUG] Setting wager from Firebase:",le)):Z&&Array.isArray(Z)&&Z[5]?(le=parseFloat(Z[5].toString())/1e18,console.log("[WAGER DEBUG] Setting wager from contract data:",le)):console.log("[WAGER DEBUG] Setting wager to 0 (no valid bet_amount found)"),Me(le,"Firebase subscription"),F.board&&ne(Xt(F.board)),F.current_player&&be(F.current_player),F.game_state==="active"?(zt(Cn.ACTIVE),nt("Game in progress")):F.game_state==="finished"?(zt(Cn.FINISHED),nt("Game finished")):F.game_state==="waiting"&&(zt(Cn.WAITING),nt("Waiting for opponent to join..."))});ta.current=H,console.log("[FIREBASE] Firebase subscription setup complete for game:",U)};k.useEffect(()=>(X&&en(X),()=>{ta.current&&ta.current()}),[X,r]),k.useEffect(()=>{if(Z&&!ke&&r){console.log("[FALLBACK] Setting playerColor from contract data");let U,H,F,ee,le,Te;if(Array.isArray(Z))[U,H,F,ee,le,Te]=Z;else{console.error("[FALLBACK] Unexpected contract data format:",Z);return}const Se=U===r?"blue":"red",De=U===r?H:U;console.log("[FALLBACK] Contract-based player assignment:"),console.log("[FALLBACK] - player1 (blue):",U),console.log("[FALLBACK] - player2 (red):",H),console.log("[FALLBACK] - current address:",r),console.log("[FALLBACK] - assigned color:",Se),console.log("[FALLBACK] - opponent:",De),console.log("[FALLBACK] - inviteCode from contract:",le),Nn(Se),lr(De),!X&&le&&(console.log("[FALLBACK] Setting missing inviteCode:",le),ce(le)),X&&is.getGame(X).then(ft=>{ft&&(!ft.blue_player||!ft.red_player)&&(console.log("[AUTO-FIX] Detected missing player data, attempting to fix..."),Tne()),ft&&ft.game_state==="active"&&zn&&(console.log("[AUTO-CLEAR] Game is confirmed active, clearing pending join data"),ns(null))}).catch(ft=>{console.error("[AUTO-FIX] Error checking game data for auto-fix:",ft)})}},[Z,ke,r,X]),k.useEffect(()=>{if(M&&zn){console.log("[RECEIPT] Join transaction confirmed!"),console.log("[RECEIPT] Transaction hash:",M.transactionHash),console.log("[RECEIPT] Pending data:",zn);const{inviteCode:U,gameData:H,address:F}=zn;is.updateGame(U,{red_player:F,blue_player:H.blue_player,bet_amount:H.bet_amount,game_state:"active",last_move:null,board:{positions:Mn(ou),rows:8,cols:8},current_player:"blue"}).then(()=>{console.log("[RECEIPT] Firebase updated successfully after join confirmation"),nt("Game started! You are the red player."),zt(Cn.ACTIVE),ns(null)}).catch(ee=>{console.error("[RECEIPT] Error updating Firebase after join confirmation:",ee),nt("Game joined but failed to update game state. Please refresh.")})}},[M,zn]),k.useEffect(()=>{S&&(console.error("[ERROR] Join transaction failed:",S),nt(`Failed to join game: ${S.message||"Transaction rejected"}`),ge("","join game error effect"),Nn(null),Me(0,"join game error effect"),lr(null),ns(null))},[S]);const Mn=U=>{const H={};return U.forEach((F,ee)=>{F.forEach((le,Te)=>{H[`${ee}_${Te}`]=le})}),H},Xt=U=>{if(!U||!U.positions)return console.warn("[BOARD] No board data available, using initial board"),ou;if(console.log("[BOARD] Attempting to reconstruct board from:",U),console.log("[BOARD] Positions type:",typeof U.positions),console.log("[BOARD] Positions is array:",Array.isArray(U.positions)),console.log("[BOARD] Positions value:",U.positions),typeof U.positions=="object"&&!Array.isArray(U.positions)){const H=U.positions,F=U.rows||8,ee=U.cols||8,le=Array(F).fill(null).map(()=>Array(ee).fill(null));for(let Te=0;Te<F;Te++)for(let Se=0;Se<ee;Se++){const De=`${Te}_${Se}`;le[Te][Se]=H[De]||null}return console.log("[BOARD] Reconstructed from flat structure:",le),le}return Array.isArray(U.positions)?(console.log("[BOARD] Found array structure, length:",U.positions.length),U.positions.length===8?U.positions.every((F,ee)=>{const le=Array.isArray(F)&&F.length===8;return le||console.warn(`[BOARD] Row ${ee} is invalid:`,F,"Type:",typeof F,"Length:",F==null?void 0:F.length),le})?(console.log("[BOARD] Using legacy array structure"),U.positions):(console.warn("[BOARD] Legacy array structure is malformed, using initial board"),ou):(console.warn("[BOARD] Array has wrong length:",U.positions.length,"expected 8"),ou)):(console.warn("[BOARD] Unknown board structure, using initial board:",U),ou)},Lf=U=>`${U.slice(0,6)}...${U.slice(-4)}`,Pi=U=>U&&U===U.toUpperCase()?"red":"blue",wB=(U,H)=>U>=0&&U<8&&H>=0&&H<8,Rb=(U,H)=>{const F=H==="red"?"K":"k";let ee=-1,le=-1;for(let Se=0;Se<8;Se++){for(let De=0;De<8;De++)if(U[Se][De]===F){ee=Se,le=De;break}if(ee!==-1)break}return ee===-1?!1:gne(ee,le,H==="red"?"blue":"red",U)},gne=(U,H,F,ee)=>{if(!ee||!Array.isArray(ee)||ee.length!==8)return console.warn("[SAFETY] Invalid board structure in isSquareUnderAttack:",ee),!1;for(let le=0;le<8;le++){if(!ee[le]||!Array.isArray(ee[le])||ee[le].length!==8)return console.warn("[SAFETY] Invalid board row structure:",ee[le]),!1;for(let Te=0;Te<8;Te++){const Se=ee[le][Te];if(Se&&Pi(Se)===F&&Am(Se,le,Te,U,H,!1,F,ee,!0))return!0}}return!1},mne=(U,H,F,ee,le,Te=At)=>{const Se=Te[U][H];if(!Se)return!1;const De=Te.map(ft=>[...ft]);return De[F][ee]=Se,De[U][H]=null,Rb(De,le)},yne=(U,H,F,ee,le,Te)=>{const Se=U==="blue"?-1:1,De=U==="blue"?6:1;if(!wB(ee,le)||U==="blue"&&ee>=H||U==="red"&&ee<=H)return!1;if(F===le&&ee===H+Se)return Te[ee][le]===null;if(F===le&&H===De&&ee===H+2*Se)return Te[H+Se][F]===null&&Te[ee][le]===null;if(Math.abs(F-le)===1&&ee===H+Se){const ft=Te[ee][le];if(ft!==null&&Pi(ft)!==U)return!0;if(ft===null&&Rr.lastPawnDoubleMove){const{row:Gt,col:St}=Rr.lastPawnDoubleMove;if(Gt===H&&St===le){const jr=Te[H][le];if(jr&&jr.toLowerCase()==="p"&&Pi(jr)!==U)return!0}}}return!1},bB=(U,H,F,ee,le)=>U===F||H===ee,wne=(U,H,F,ee)=>{const le=Math.abs(U-F),Te=Math.abs(H-ee);return le===2&&Te===1||le===1&&Te===2},vB=(U,H,F,ee,le)=>Math.abs(U-F)===Math.abs(H-ee),bne=(U,H,F,ee,le)=>bB(U,H,F,ee)||vB(U,H,F,ee),vne=(U,H,F,ee,le)=>{const Te=Math.abs(H-ee),Se=Math.abs(F-le);if(Te<=1&&Se<=1)return!0;if(Te===0&&Se===2){if(U==="blue"&&!Rr.blueKingMoved){if(le===6&&!Rr.blueRooksMove.right||le===2&&!Rr.blueRooksMove.left)return!0}else if(U==="red"&&!Rr.redKingMoved&&(le===6&&!Rr.redRooksMove.right||le===2&&!Rr.redRooksMove.left))return!0}return!1},nR=(U,H,F,ee,le)=>{const Te=U===F?0:(F-U)/Math.abs(F-U),Se=H===ee?0:(ee-H)/Math.abs(ee-H);let De=U+Te,ft=H+Se;for(;De!==F||ft!==ee;){if(le[De][ft]!==null)return!1;De+=Te,ft+=Se}return!0},Am=(U,H,F,ee,le,Te=!0,Se=Pi(U),De=At,ft=!1)=>{if(!U||!wB(ee,le))return!1;const Gt=De[ee][le];if(Gt&&Pi(Gt)===Se)return!1;let St=!1;switch(U.toUpperCase()){case"P":St=yne(Se,H,F,ee,le,De);break;case"R":St=bB(H,F,ee,le)&&nR(H,F,ee,le,De);break;case"N":St=wne(H,F,ee,le);break;case"B":St=vB(H,F,ee,le)&&nR(H,F,ee,le,De);break;case"Q":St=bne(H,F,ee,le)&&nR(H,F,ee,le,De);break;case"K":St=vne(Se,H,F,ee,le);break}return!(!St||Te&&mne(H,F,ee,le,Se,De))},rR=(U,H=At,F=ie)=>{const ee=[],le=H[U.row][U.col];if(!le||Pi(le)!==F)return ee;const Te=le.toLowerCase();if(Te==="p"){const Se=F==="blue"?-1:1,De=F==="blue"?6:1,ft=U.row+Se;if(ft>=0&&ft<8&&Am(le,U.row,U.col,ft,U.col,!0,F,H,!0)&&ee.push({row:ft,col:U.col}),U.row===De){const Gt=U.row+2*Se;Gt>=0&&Gt<8&&Am(le,U.row,U.col,Gt,U.col,!0,F,H,!0)&&ee.push({row:Gt,col:U.col})}for(const Gt of[-1,1]){const St=U.col+Gt,jr=U.row+Se;St>=0&&St<8&&jr>=0&&jr<8&&Am(le,U.row,U.col,jr,St,!0,F,H,!0)&&ee.push({row:jr,col:St})}}else if(Te==="n"){const Se=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[De,ft]of Se){const Gt=U.row+De,St=U.col+ft;Gt>=0&&Gt<8&&St>=0&&St<8&&Am(le,U.row,U.col,Gt,St,!0,F,H,!0)&&ee.push({row:Gt,col:St})}}else for(let Se=0;Se<8;Se++)for(let De=0;De<8;De++)Am(le,U.row,U.col,Se,De,!0,F,H,!0)&&ee.push({row:Se,col:De});return ee},Ene=(U,H=At)=>{if(!Rb(H,U))return!1;for(let F=0;F<8;F++)for(let ee=0;ee<8;ee++){const le=H[F][ee];if(le&&Pi(le)===U&&rR({row:F,col:ee},H,U).length>0)return!1}return!0},Cne=(U,H=At)=>{if(Rb(H,U))return!1;for(let F=0;F<8;F++)for(let ee=0;ee<8;ee++){const le=H[F][ee];if(le&&Pi(le)===U&&rR({row:F,col:ee},H,U).length>0)return!1}return!0},EB=(U,H)=>{if(console.log("[CLICK] Square clicked:",{row:U,col:H}),console.log("[CLICK] Game mode:",Dn,"Player color:",ke),console.log("[CLICK] Current player:",ie,"Player color:",ke),Dn!==Cn.ACTIVE||!ke){console.log("[CLICK] Game not active or no player color");return}const F=At[U][H],ee=F?Pi(F):null;if(console.log("[CLICK] Piece at square:",F,"Piece color:",ee),ie!==ke){console.log("[CLICK] Not player's turn. Current:",ie,"Player:",ke);return}if(F&&ee===ke){ve({row:U,col:H});const le=rR({row:U,col:H});Xe(le);return}if(fe&&ht.some(le=>le.row===U&&le.col===H)){_ne(fe,{row:U,col:H}),ve(null),Xe([]);return}ve(null),Xe([])},_ne=async(U,H)=>{if(console.log("[PROMOTION DEBUG] makeMove called with:",{from:U,to:H,playerColor:ke,currentPlayer:ie}),!ke||ie!==ke){console.log("[PROMOTION DEBUG] Early return - playerColor:",ke,"currentPlayer:",ie);return}const F=At[U.row][U.col];if(!F){console.log("[PROMOTION DEBUG] No piece at position:",U);return}if(console.log("[PROMOTION DEBUG] Piece:",F,"isPawn:",F.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] Current player:",ie,"to.row:",H.row),console.log("[PROMOTION DEBUG] Player color:",ke),console.log("[PROMOTION DEBUG] Promotion condition check:"),console.log("[PROMOTION DEBUG] - piece.toUpperCase() === P:",F.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] - currentPlayer === red && to.row === 7:",ie==="red"&&H.row===7),console.log("[PROMOTION DEBUG] - currentPlayer === blue && to.row === 0:",ie==="blue"&&H.row===0),console.log("[PROMOTION DEBUG] - Full condition:",F.toUpperCase()==="P"&&(ie==="red"&&H.row===7||ie==="blue"&&H.row===0)),F.toUpperCase()==="P"&&(ie==="red"&&H.row===7||ie==="blue"&&H.row===0)){console.log("[PROMOTION] Showing promotion dialog for piece:",F,"at position:",H),Ib({from:U,to:H}),xb(!0);return}await CB(U,H)},CB=async(U,H,F="q")=>{if(!ke||ie!==ke||!At[U.row][U.col])return;const Te=At[H.row][H.col]!==null;if(Uf(Te?"capture":"move"),Te){T1({row:H.row,col:H.col,show:!0}),setTimeout(()=>{_B(U,H,F),T1(null)},500);return}_B(U,H,F)},_B=async(U,H,F="q")=>{if(!ke||ie!==ke)return;const ee=At[U.row][U.col];if(!ee)return;const le=At.map(Gt=>[...Gt]);let Te=ee;console.log("[PROMOTION DEBUG] executeMoveAfterAnimation - checking promotion:"),console.log("[PROMOTION DEBUG] - piece:",ee,"isPawn:",ee.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] - playerColor:",ke,"to.row:",H.row),console.log("[PROMOTION DEBUG] - promotion condition:",ee.toUpperCase()==="P"&&(ke==="red"&&H.row===7||ke==="blue"&&H.row===0)),console.log("[PROMOTION DEBUG] - promotionPiece:",F),ee.toUpperCase()==="P"&&(ke==="red"&&H.row===7||ke==="blue"&&H.row===0)&&(Te=ke==="red"?F.toUpperCase():F.toLowerCase(),console.log("[PROMOTION DEBUG] - Promoting pawn to:",Te)),Sne(le,U,H,ee),le[H.row][H.col]=Te,le[U.row][U.col]=null,xne(U,H,ee);const Se=ie==="blue"?"red":"blue";Rb(le,Se)&&Uf("check");let De="active",ft=null;if(Ene(Se,le))De="finished",ft=ie,nt(`${ie==="red"?"Red":"Blue"} wins by checkmate!`),Uf(ie===ke?"victory":"loser"),Ane(),console.log("[SCORE] Updating scores - Winner:",ie,"Loser:",Se),console.log("[SCORE] Contract game data:",Z),console.log("[SCORE] Player game invite code:",te),Z&&Z.length>=2?(console.log("[SCORE] Using contract data for both players update"),await md(ie,Z[0],Z[1])):(console.log("[SCORE] Contract data not available, falling back to single player update"),await Ha(ie===ke?"win":"loss"),await ql()),ft===ke&&(console.log("[CONTRACT] Triggering automatic payout for winner:",ft),setTimeout(()=>{Nt()},2e3));else if(Cne(Se,le)){const Gt=ie;De="finished",nt(`${Gt==="red"?"Red":"Blue"} wins by stalemate!`),Uf(Gt===ke?"victory":"loser"),console.log("[SCORE] Updating scores - Stalemate winner:",Gt,"Loser:",Se),console.log("[SCORE] Contract game data:",Z),console.log("[SCORE] Player game invite code:",te),Z&&Z.length>=2?(console.log("[SCORE] Using contract data for both players update"),await md(Gt,Z[0],Z[1])):(console.log("[SCORE] Contract data not available, falling back to single player update"),await Ha(Gt===ke?"win":"loss"),await ql()),Gt===ke&&(console.log("[CONTRACT] Triggering automatic payout for stalemate winner:",Gt),setTimeout(()=>{Nt()},2e3))}try{if(!X){console.error("[BUG] inviteCode is missing when trying to update game!"),nt("Game code missing. Please reload or rejoin the game.");return}console.log("[DEBUG] About to update game. inviteCode:",X,"gameData:",{board:{positions:le},current_player:Se,game_state:De,winner:ft,last_move:{from:U,to:H}});const St={...await is.getGame(X),board:{positions:Mn(le),rows:8,cols:8},current_player:Se,game_state:De,winner:ft,last_move:{from:U,to:H}};console.log("[FIREBASE] Storing data in Firebase:",St),await is.updateGame(X,St),console.log("[FIREBASE] Game updated successfully"),console.log("[FIREBASE] Real-time event should be delivered immediately")}catch(Gt){console.error("[DATABASE] Error updating game:",Gt)}ne(le),be(Se),Tb({from:U,to:H}),xb(!1),Ib(null)},Ane=()=>{vm(!0);for(let U=0;U<50;U++)setTimeout(()=>{const H=document.createElement("div");H.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(H),setTimeout(()=>H.remove(),300)},U*100);za.current&&clearTimeout(za.current),za.current=setTimeout(()=>{vm(!1)},5e3)},Sne=(U,H,F,ee)=>{if(ee.toLowerCase()==="k"&&Math.abs(H.col-F.col)===2){if(F.col===6)U[H.row][7]=null,U[H.row][5]=Pi(ee)==="blue"?"r":"R";else if(F.col===2){const le=U[H.row][3];U[H.row][0]=null,U[H.row][3]=Pi(ee)==="blue"?"r":"R",le&&le.toLowerCase()==="q"&&(U[H.row][4]=le)}}ee.toLowerCase()==="p"&&Math.abs(H.col-F.col)===1&&U[F.row][F.col]===null&&Rr.lastPawnDoubleMove&&Rr.lastPawnDoubleMove.row===H.row&&Rr.lastPawnDoubleMove.col===F.col&&(U[H.row][F.col]=null)},xne=(U,H,F)=>{const ee={...Rr};F.toLowerCase()==="k"?Pi(F)==="blue"?ee.blueKingMoved=!0:ee.redKingMoved=!0:F.toLowerCase()==="r"&&(Pi(F)==="blue"?(U.col===0&&(ee.blueRooksMove.left=!0),U.col===7&&(ee.blueRooksMove.right=!0)):(U.col===0&&(ee.redRooksMove.left=!0),U.col===7&&(ee.redRooksMove.right=!0))),F.toLowerCase()==="p"&&Math.abs(U.row-H.row)===2?ee.lastPawnDoubleMove={row:H.row,col:H.col}:ee.lastPawnDoubleMove=null,P1(ee)},Uf=U=>{if(!I1)return;let H="";switch(U){case"move":H="/images/move.mp3";break;case"capture":H="/images/capture.mp3";break;case"check":H="/images/play.mp3";break;case"checkmate":H="/images/victory.mp3";break;case"victory":H="/images/victory.mp3";break;case"loser":H="/images/loser.mp3";break;case"upgrade":H="/images/upgrade.mp3";break;default:H="/images/move.mp3"}try{const F=new Audio(H);F.volume=.3,F.play().catch(ee=>console.warn("Audio play failed:",ee))}catch(F){console.warn("Sound play failed:",F)}},Ine=async()=>{if(X)try{console.log("[RESET] Resetting corrupted game data for:",X);const U={board:{positions:Mn(ou),rows:8,cols:8},current_player:"blue",game_state:"active",winner:null,last_move:null};await is.updateGame(X,U),console.log("[RESET] Successfully reset game data"),nt("Game reset successfully. You can now make moves.")}catch(U){console.error("[RESET] Error resetting game data:",U),nt("Failed to reset game. Please try again.")}},Nne=async()=>{try{console.warn("[STUCK GAMES] checkStuckGames is not implemented.")}catch(U){console.error("Error checking stuck games:",U)}},Tne=async()=>{if(console.log("[FIX] Attempting to fix missing player data..."),!X||!r){console.log("[FIX] Missing inviteCode or address");return}try{const U=await is.getGame(X);if(!U){console.log("[FIX] No game data found");return}if(console.log("[FIX] Current game data:",U),Z&&Array.isArray(Z)){const[H,F,ee,le,Te,Se]=Z;console.log("[FIX] Contract data for fixing:"),console.log("[FIX] - Contract player1 (blue):",H),console.log("[FIX] - Contract player2 (red):",F),console.log("[FIX] - Contract isActive:",ee),console.log("[FIX] - Firebase blue_player:",U.blue_player),console.log("[FIX] - Firebase red_player:",U.red_player),console.log("[FIX] - Firebase game_state:",U.game_state);let De=!1;const ft={};F&&F!=="0x0000000000000000000000000000000000000000"&&(!U.red_player||U.red_player==="0x0000000000000000000000000000000000000000")&&(console.log("[FIX] Fixing red player address in Firebase"),ft.red_player=F,De=!0),H&&H!=="0x0000000000000000000000000000000000000000"&&(!U.blue_player||U.blue_player==="0x0000000000000000000000000000000000000000")&&(console.log("[FIX] Fixing blue player address in Firebase"),ft.blue_player=H,De=!0),H&&F&&H!=="0x0000000000000000000000000000000000000000"&&F!=="0x0000000000000000000000000000000000000000"&&(U.game_state==="waiting"||!U.game_state)&&(console.log("[FIX] Activating game in Firebase"),ft.game_state="active",ft.current_player="blue",De=!0),ee&&U.game_state!=="active"&&(console.log("[FIX] Syncing game state to active"),ft.game_state="active",De=!0),De?(console.log("[FIX] Updating Firebase with:",ft),await is.updateGame(X,ft),console.log("[FIX] Firebase updated successfully")):console.log("[FIX] No missing player data to fix")}else console.log("[FIX] No contract data available for fixing")}catch(U){console.error("[FIX] Error fixing missing player data:",U)}},Rne=(U,H)=>{if(!At||!Array.isArray(At)||At.length!==8||!At[U]||!Array.isArray(At[U])||At[U].length!==8)return console.warn("[SAFETY] Invalid board structure in renderSquare:",{row:U,col:H,board:At}),y.jsx("div",{className:"square error",children:y.jsx("div",{className:"error-indicator",children:"!"})},`${U}-${H}`);const F=At[U][H],ee=(fe==null?void 0:fe.row)===U&&(fe==null?void 0:fe.col)===H,le=ht.some(De=>De.row===U&&De.col===H),Te=Df&&(Df.from.row===U&&Df.from.col===H||Df.to.row===U&&Df.to.col===H),Se=F&&F.toUpperCase()==="K"&&Rb(At,Pi(F));return y.jsxs("div",{className:`square ${ee?"selected":""} ${le?"legal-move":""} ${Te?"last-move":""} ${Se?"square-in-check":""}`,onClick:()=>EB(U,H),onTouchStart:De=>Une(U,H,De),onTouchMove:Bne,children:[F&&y.jsx("div",{className:"piece",style:{backgroundImage:a2[F]?`url(${a2[F]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),le&&y.jsx("div",{className:"legal-move-indicator"})]},`${U}-${H}`)},Pne=()=>{if(console.log("[PROMOTION DEBUG] renderPromotionDialog called - showPromotion:",Sb,"promotionMove:",kf),!Sb||!kf)return console.log("[PROMOTION DEBUG] Not rendering dialog - showPromotion:",Sb,"promotionMove:",kf),null;const U=ie==="blue"?["q","r","b","n"]:["Q","R","B","N"];return y.jsx("div",{className:"promotion-dialog",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.9)",border:"2px solid gold",borderRadius:"8px",padding:"20px",zIndex:1e3},children:y.jsxs("div",{className:"promotion-content",children:[y.jsx("h3",{style:{color:"white",marginBottom:"15px"},children:"Choose promotion piece:"}),y.jsx("div",{className:"promotion-pieces",style:{display:"flex",gap:"10px"},children:U.map(H=>y.jsx("div",{className:"promotion-piece",onClick:()=>{console.log("[PROMOTION] Selected piece:",H),CB(kf.from,kf.to,H),xb(!1),Ib(null)},style:{cursor:"pointer",padding:"10px",border:"2px solid white",borderRadius:"4px",background:"rgba(255, 255, 255, 0.1)"},children:y.jsx("img",{src:a2[H],alt:H,style:{width:"40px",height:"40px"}})},H))})]})})},One=()=>y.jsxs("div",{className:"piece-gallery",children:[y.jsx("h3",{children:"Chess Pieces"}),y.jsx("div",{className:"piece-gallery-grid",children:hqe.map(U=>y.jsxs("div",{className:"piece-gallery-item",onClick:()=>{Of(Ab===U.key?null:U.key)},children:[y.jsx("img",{src:U.img,alt:U.name,className:"piece-gallery-img"}),y.jsx("div",{className:"piece-gallery-name",children:U.name}),Ab===U.key&&y.jsx("div",{className:"piece-gallery-desc",children:U.desc})]},U.key))})]}),AB=()=>y.jsxs("div",{className:"chess-multiplayer-lobby",children:[y.jsx("h2",{children:"PvP Chess Lawby"}),s?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"status-bar",children:["Connected: ",Lf(r)]}),y.jsxs("div",{className:"lobby-content",children:[y.jsxs("div",{className:"open-games",children:[y.jsx("h3",{children:"Open Games"}),y.jsxs("div",{className:"games-list",children:[QT.map(U=>y.jsxs("div",{className:"game-item",children:[y.jsxs("div",{className:"game-info",children:[y.jsx("div",{className:"game-id",children:U.game_title||"Untitled Game"}),y.jsxs("div",{className:"wager",children:["Wager: ",(parseFloat(U.bet_amount)/Math.pow(10,Dh[U.bet_token||"DMT"].decimals)).toFixed(2)," ",U.bet_token||"DMT"]}),y.jsxs("div",{className:"title",children:["Created by: ",Lf(U.blue_player)]})]}),y.jsx("button",{className:"join-btn",onClick:()=>K(U.invite_code),children:"Join Game"})]},U.invite_code)),QT.length===0&&y.jsx("div",{className:"no-games",children:"No open games available"})]})]}),y.jsxs("div",{className:"actions",children:[y.jsx("button",{className:"create-btn",onClick:()=>pd(!0),disabled:wm||Rf,children:"Create New Game"}),y.jsx("button",{onClick:Mf,style:{marginTop:"10px",background:"rgba(0, 123, 255, 0.1)",border:"2px solid #007bff",color:"#007bff",padding:"8px 16px",borderRadius:"0px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"14px",fontWeight:"bold",transition:"all 0.3s ease"},children:" Refresh Lobby"}),y.jsx("button",{onClick:()=>window.location.href="/chess",style:{marginTop:"10px",background:"rgba(255, 193, 7, 0.1)",border:"2px solid #ffc107",color:"#ffc107",padding:"12px 24px",borderRadius:"0px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:" Back to Chess Home"})]}),wm&&y.jsxs("div",{className:"create-form",children:[y.jsx("h3",{children:"Create New Game"}),y.jsx(uqe,{selectedToken:gd,onTokenSelect:A1,wagerAmount:Gl,onWagerChange:_1,disabled:Rf}),y.jsxs("div",{className:"form-actions",children:[y.jsx("button",{className:"create-confirm-btn",onClick:q,disabled:Gl<=0||Rf,children:Rf?"Creating...":"Create Game"}),y.jsx("button",{className:"cancel-btn",onClick:()=>{pd(!1),wo(!1)},children:"Cancel"})]})]})]})]}):y.jsx("div",{className:"wallet-notice",children:"Please connect your wallet to play multiplayer chess"})]}),kne=()=>y.jsxs("div",{className:"chess-multiplayer-waiting",children:[y.jsx("h2",{children:"Waiting for Opponent"}),y.jsxs("div",{className:"game-code",children:["Invite Code: ",y.jsx("strong",{children:X})]}),y.jsxs("div",{className:"game-info",children:[y.jsxs("p",{children:["Wager: ",fd," ",gd]}),y.jsx("p",{children:"Share this invite code with your opponent"})]}),y.jsxs("div",{className:"waiting-actions",children:[y.jsx("button",{onClick:bt,disabled:W||V,className:"refund-game-btn",children:W||V?" Refunding...":" Refund Game"}),y.jsx("p",{className:"refund-note",children:"You can refund your wager anytime before an opponent joins"})]})]}),Dne=()=>y.jsxs("div",{className:"chess-game",children:[y.jsxs("div",{className:"chess-header",children:[y.jsx("h2",{children:" Multiplayer Chess"}),y.jsxs("div",{className:"chess-controls",children:[e&&y.jsx("button",{onClick:e,className:"minimize-btn",title:"Minimize",children:"_"}),y.jsx("button",{onClick:t,className:"close-btn",title:"Close",children:""})]})]}),y.jsxs("div",{className:"game-info",children:[y.jsxs("div",{className:"game-status-section",children:[y.jsx("span",{className:`status ${In.includes("Check")?"check-status":""}`,children:In}),y.jsxs("span",{className:`current-player ${ie==="red"?"red-turn":"blue-turn"}`,children:["Current: ",ie==="red"?" Red":" Blue"]})]}),y.jsxs("div",{className:"game-details-section",children:[y.jsxs("span",{className:"wager-display",children:[" ",fd," ",gd]}),Ri&&y.jsxs("span",{className:"opponent-info",children:["vs ",Lf(Ri)]}),Dn===Cn.ACTIVE&&bo>0&&y.jsxs("span",{className:"timeout-countdown",style:{color:bo<300?"#ff0000":"#00ff00",fontWeight:"bold",textShadow:"0 0 6px currentColor"},children:[" ",Math.floor(bo/60),":",(bo%60).toString().padStart(2,"0")]})]}),Dn===Cn.FINISHED&&y.jsxs("div",{className:"game-finished-actions",children:[y.jsx("button",{onClick:Nt,disabled:g,className:"claim-winnings-btn",children:g?" Claiming...":" Claim Winnings"}),y.jsx("button",{onClick:()=>window.location.href="/chess",className:"back-to-chess-btn",children:" Back to Chess Home"})]})]}),y.jsxs("div",{className:"game-stable-layout",children:[y.jsxs("div",{className:"left-sidebar",children:[y.jsxs("div",{className:"sidebar-tabs",children:[y.jsx("button",{className:`tab-button ${it==="moves"?"active":""}`,onClick:()=>Je("moves"),children:" Moves"}),y.jsx("button",{className:`tab-button ${it==="leaderboard"?"active":""}`,onClick:()=>Je("leaderboard"),children:" Leaderboard"})]}),it==="moves"&&y.jsxs("div",{className:"move-history",children:[y.jsx("h4",{children:"Move History"}),y.jsx("div",{className:"moves",children:ct.slice().reverse().map((U,H)=>y.jsx("div",{className:"move",children:U},ct.length-1-H))})]}),it==="leaderboard"&&y.jsxs("div",{className:"leaderboard",children:[y.jsx("h4",{children:"Leaderboard"}),y.jsx("div",{className:"leaderboard-table",children:y.jsxs("table",{children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:"#"}),y.jsx("th",{children:"Player"}),y.jsx("th",{children:"W"}),y.jsx("th",{children:"L"}),y.jsx("th",{children:"D"}),y.jsx("th",{children:"Pts"})]})}),y.jsx("tbody",{children:XT.map((U,H)=>y.jsxs("tr",{children:[y.jsx("td",{children:H+1}),y.jsx("td",{children:U.username}),y.jsx("td",{children:U.wins}),y.jsx("td",{children:U.losses}),y.jsx("td",{children:U.draws}),y.jsx("td",{children:U.points})]},U.username))})]})})]})]}),y.jsxs("div",{className:"center-area",children:[y.jsxs("div",{className:"chessboard-container",children:[y.jsx("div",{className:"chessboard",children:Array.from({length:8},(U,H)=>y.jsx("div",{className:"board-row",children:Array.from({length:8},(F,ee)=>Rne(H,ee))},H))}),Em&&Em.show&&y.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${Em.row*12.5}%`,left:`${Em.col*12.5}%`,width:"12.5%",height:"12.5%",pointerEvents:"none",zIndex:1e3},children:y.jsx("div",{className:"explosion-effect",children:""})})]}),y.jsxs("div",{className:"game-controls",children:[y.jsx("div",{className:"control-section",children:In.includes("corrupted")&&y.jsx("button",{className:"reset-game-btn",onClick:Ine,children:" Reset Game"})}),y.jsx("div",{className:"settings-section",children:y.jsxs("div",{className:"sound-controls",children:[y.jsxs("label",{className:"control-label",children:[y.jsx("input",{type:"checkbox",id:"sound-toggle",checked:I1,onChange:U=>N1(U.target.checked),className:"control-checkbox"}),y.jsx("span",{className:"control-text",children:" Sound Effects"})]}),y.jsxs("label",{className:"control-label",children:[y.jsx("input",{type:"checkbox",id:"victory-toggle",checked:x1,onChange:U=>vm(U.target.checked),className:"control-checkbox"}),y.jsx("span",{className:"control-text",children:" Victory Celebration"})]})]})}),f&&y.jsx("button",{className:"claim-winnings-btn",onClick:Nt,disabled:g||P||j,children:g||P||j?" Claiming...":" Claim Winnings"})]})]}),y.jsx("div",{className:"right-sidebar"})]}),Bc&&y.jsx("div",{className:"piece-gallery-panel",children:One()}),Pne(),x1&&y.jsxs("div",{className:"victory-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)"},children:[y.jsx("div",{className:"balloons-container"}),y.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:"320px",height:"auto",zIndex:2}}),y.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24},children:[y.jsx("button",{onClick:()=>zt(Cn.LOBBY),children:"Back to Lobby"}),y.jsx("button",{onClick:()=>window.location.reload(),children:"New Game"})]})]})]}),Mne=()=>null;k.useEffect(()=>{ql(),Mf(),Nne();const U=setInterval(Mf,3e4);return()=>{clearInterval(U),ta.current&&ta.current(),za.current&&clearTimeout(za.current)}},[]),console.log("[RENDER] Current game mode:",Dn,"Game ID:",X);const Lne=(()=>{switch(Dn){case Cn.LOBBY:return AB();case Cn.WAITING:return kne();case Cn.ACTIVE:case Cn.FINISHED:return Dne();default:return AB()}})(),Une=(U,H,F)=>{F.preventDefault(),EB(U,H)},Bne=U=>{U.preventDefault()};return y.jsxs(y.Fragment,{children:[Lne,Mne()]})},c2={AI:"ai"},gqe=1992,ZA={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},xW=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],mqe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],yqe=()=>{const[t,e]=k.useState(!1),n=k.useRef(null),r=k.useRef(!1);k.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=new Worker("/stockfish.worker.js");a.onmessage=c=>{console.log("[DEBUG] Stockfish worker message:",c.data)},a.onerror=c=>{console.error("[DEBUG] Stockfish worker error:",c),e(!1),r.current=!1},console.log("[DEBUG] LawbBot initialized successfully"),n.current=a,e(!0),r.current=!1,console.log("[DEBUG] Stockfish worker ready for commands")}catch(a){console.error("[DEBUG] Failed to create Stockfish worker:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=k.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var p;const f=h.data;typeof f=="string"&&f.startsWith("bestmove ")&&(l=f.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(p=n.current)==null||p.removeEventListener("message",d),c(l)))};try{n.current.addEventListener("message",d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeEventListener("message",d)}catch(g){console.warn("[DEBUG] Error removing message listener:",g)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=k.useCallback(async(o,a=4e3)=>{try{const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l="https://chess.lawb.xyz/api/stockfish";console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.move||null}else return console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},wqe=()=>{const[t,e]=k.useState(null),[n,r]=k.useState(!1),s=k.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=k.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},bqe=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s}=f1(),i=p1();PFe();const{open:o}=d1(),[a,c]=k.useState(c2.AI),[l,u]=k.useState(()=>JSON.parse(JSON.stringify(xW))),[d,h]=k.useState("blue"),[f,p]=k.useState(null),[g,w]=k.useState("active"),[m,b]=k.useState("hard"),[v,A]=k.useState("Connect wallet to play"),[C,T]=k.useState([]),[x,N]=k.useState([]),[S,D]=k.useState([]),[P,$]=k.useState(null),[G,W]=k.useState(!1),[I,R]=k.useState(!1),[B,O]=k.useState(null),[M,j]=k.useState(null),[V]=k.useState(""),[te]=k.useState(.1),[Z,X]=k.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),ce=k.useRef(null),ge=k.useRef(!1),Me=k.useRef(l),it=k.useRef(null),Je=k.useRef(null),bt=k.useRef(!1),Nt=k.useRef(!1),[At,ne]=k.useState(!1),[ie,be]=k.useState(!1),[fe,ve]=k.useState(!1),[ht]=k.useState(!0);k.useEffect(()=>{document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode")},[]);const{stockfishReady:Xe}=yqe(),{getOpeningData:ct}=wqe(),[Tt,In]=k.useState("loading"),[nt,Dn]=k.useState(!1),[zt,ke]=k.useState([]),[Nn,Ri]=k.useState(!1),[lr,fd]=k.useState(()=>{const q=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],K=Math.floor(Math.random()*q.length),ae=q[K];return console.log("[DEBUG] Initial random chessboard selected:",ae,"(index:",K,")"),ae}),[YT,QT]=k.useState(!0),[pB,wm]=k.useState(!1);k.useEffect(()=>{!s||!r?(A("Connect wallet to play"),W(!1),ne(!1),o()):i!==gqe?(A("Switch to Sanko Testnet to play"),W(!1),ne(!1),o()):A("Select game mode")},[s,r,i,o]);const pd=()=>{const q=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],K=Math.floor(Math.random()*q.length),ae=q[K];return console.log("[DEBUG] Random chessboard selected:",ae,"(index:",K,")"),ae};k.useEffect(()=>{if(Xe)In("ready");else{const q=window.setTimeout(()=>{Xe||(In("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(q)}},[Xe]),k.useEffect(()=>{Me.current=l},[l]),k.useEffect(()=>(!ce.current&&typeof Worker<"u"&&(ce.current=new Worker("/aiWorker.js"),ce.current.onmessage=q=>{console.log("[DEBUG] AI worker response received:",q.data);const{move:K,nodes:ae}=q.data;K&&ge.current&&g==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",K),console.log("[DEBUG] AI searched",ae,"nodes"),ge.current=!1,Je.current&&(window.clearTimeout(Je.current),Je.current=null),it.current&&it.current(K.from,K.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},ce.current.onerror=q=>{console.error("[DEBUG] AI worker error:",q),A("AI worker error - using fallback mode"),ge.current=!1}),()=>{ce.current&&(ce.current.terminate(),ce.current=null),Je.current&&(window.clearTimeout(Je.current),Je.current=null)}),[]),k.useEffect(()=>{Rf()},[]);const Rf=async()=>{try{await vee();const q=await bee(20);N(q),console.log("Leaderboard data loaded:",q)}catch(q){A("Failed to load leaderboard"),console.error("Leaderboard error:",q)}},wo=async q=>{if(console.log("[DEBUG] updateScore called with:",q),!r){console.log("[DEBUG] No wallet address, returning");return}try{console.log("[DEBUG] Updating score for address:",Hg(r)),await SI(r,q)?(console.log("[DEBUG] Successfully updated score for:",Hg(r)),await Rf()):console.error("[DEBUG] Failed to update score")}catch(K){console.error("[DEBUG] Error in updateScore:",K)}},Ht=q=>q&&q===q.toUpperCase()?"red":"blue",Pf=(q,K)=>q>=0&&q<8&&K>=0&&K<8,zn=(q,K)=>`${String.fromCharCode(97+K)}${8-q}`,ns=(q,K)=>{const ae=K==="blue"?"k":"K";let oe=null;for(let Ne=0;Ne<8;Ne++){for(let tt=0;tt<8;tt++)if(q[Ne][tt]===ae){oe={row:Ne,col:tt};break}if(oe)break}if(!oe)return console.log(`King not found for ${K}`),!1;const re=K==="blue"?"red":"blue",Ie=gB(oe.row,oe.col,re,q);return console.log(`${K} king at ${oe.row},${oe.col} under attack: ${Ie}`),Ie},gB=(q,K,ae,oe)=>{for(let re=0;re<8;re++)for(let Ie=0;Ie<8;Ie++){const Ne=oe[re][Ie];if(Ne&&Ht(Ne)===ae&&bo(Ne,re,Ie,q,K,!1,ae,oe,!0))return!0}return!1},mB=(q,K,ae,oe,re,Ie=l)=>{const Ne=Ie.map(cn=>[...cn]),tt=Ne[q][K];return Ne[ae][oe]=tt,Ne[q][K]=null,ns(Ne,re)},Gl=(q,K,ae,oe,re,Ie)=>{const Ne=q==="blue"?-1:1,tt=q==="blue"?6:1;if(!Pf(oe,re)||q==="blue"&&oe>=K||q==="red"&&oe<=K)return!1;const cn=Math.abs(oe-K),en=Math.abs(re-ae);if((cn===1&&en===0||cn===2&&en===0&&K===tt||cn===1&&en===1)&&cn<=2&&en<=1&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("[DEBUG] Pawn move check:",{color:q,from:`${K},${ae}`,to:`${oe},${re}`}),ae===re&&oe===K+Ne)return Ie[oe][re]===null;if(ae===re&&K===tt&&oe===K+2*Ne)return Ie[K+Ne][ae]===null&&Ie[oe][re]===null;if(Math.abs(ae-re)===1&&oe===K+Ne){const Xt=Ie[oe][re];return Xt!==null&&Ht(Xt)!==q}if(Math.abs(ae-re)===1&&oe===K+Ne){const Xt=Ie[K][re];if(Xt&&Ht(Xt)!==q&&Xt.toLowerCase()==="p"&&Z.lastPawnDoubleMove&&Z.lastPawnDoubleMove.row===K&&Z.lastPawnDoubleMove.col===re)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},_1=(q,K,ae,oe,re)=>q!==ae&&K!==oe?!1:Cb(q,K,ae,oe,re),gd=(q,K,ae,oe)=>{const re=Math.abs(q-ae),Ie=Math.abs(K-oe);return re===2&&Ie===1||re===1&&Ie===2},A1=(q,K,ae,oe,re)=>Math.abs(q-ae)!==Math.abs(K-oe)?!1:Cb(q,K,ae,oe,re),yB=(q,K,ae,oe,re)=>_1(q,K,ae,oe,re)||A1(q,K,ae,oe,re),Uc=(q,K,ae,oe,re)=>{const Ie=Math.abs(K-oe),Ne=Math.abs(ae-re);if(Ie<=1&&Ne<=1)return!0;if(Ie===0&&Ne===2){if(q==="blue"&&!Z.blueKingMoved){if(re===6&&!Z.blueRooksMove.right||re===2&&!Z.blueRooksMove.left)return!0}else if(q==="red"&&!Z.redKingMoved&&(re===6&&!Z.redRooksMove.right||re===2&&!Z.redRooksMove.left))return!0}return!1},Cb=(q,K,ae,oe,re)=>{const Ie=q===ae?0:(ae-q)/Math.abs(ae-q),Ne=K===oe?0:(oe-K)/Math.abs(oe-K);let tt=q+Ie,cn=K+Ne;for(;tt!==ae||cn!==oe;){if(re[tt][cn]!==null)return!1;tt+=Ie,cn+=Ne}return!0},bo=(q,K,ae,oe,re,Ie=!0,Ne=Ht(q),tt=l,cn=!1)=>{if(!Pf(oe,re))return cn||console.log("[ILLEGAL MOVE] Out of board:",{piece:q,startRow:K,startCol:ae,endRow:oe,endCol:re}),!1;const en=tt[oe][re];if(en&&Ht(en)===Ne)return cn||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:q,startRow:K,startCol:ae,endRow:oe,endCol:re}),!1;const Mn=q.toLowerCase();let Xt=!1;switch(Mn){case"p":Xt=Gl(Ne,K,ae,oe,re,tt);break;case"r":Xt=_1(K,ae,oe,re,tt);break;case"n":Xt=gd(K,ae,oe,re);break;case"b":Xt=A1(K,ae,oe,re,tt);break;case"q":Xt=yB(K,ae,oe,re,tt);break;case"k":Xt=Uc(Ne,K,ae,oe,re);break}return Xt?Xt&&Ie&&mB(K,ae,oe,re,Ne,tt)?(cn||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:q,startRow:K,startCol:ae,endRow:oe,endCol:re}),!1):Xt:(cn||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:q,startRow:K,startCol:ae,endRow:oe,endCol:re,playerColor:Ne,pieceType:Mn,targetPiece:tt[oe][re],targetPieceColor:tt[oe][re]?Ht(tt[oe][re]):null}),!1)},bm=(q,K=l,ae=d)=>{const oe=[],re=K[q.row][q.col];if(!re||Ht(re)!==ae)return oe;const Ie=re.toLowerCase();if(Ie==="p"){const Ne=ae==="blue"?-1:1,tt=ae==="blue"?6:1,cn=q.row+Ne;if(cn>=0&&cn<8&&bo(re,q.row,q.col,cn,q.col,!0,ae,K,!0)&&oe.push({row:cn,col:q.col}),q.row===tt){const en=q.row+2*Ne;en>=0&&en<8&&bo(re,q.row,q.col,en,q.col,!0,ae,K,!0)&&oe.push({row:en,col:q.col})}for(const en of[-1,1]){const Mn=q.col+en,Xt=q.row+Ne;Mn>=0&&Mn<8&&Xt>=0&&Xt<8&&bo(re,q.row,q.col,Xt,Mn,!0,ae,K,!0)&&oe.push({row:Xt,col:Mn})}}else if(Ie==="n"){const Ne=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[tt,cn]of Ne){const en=q.row+tt,Mn=q.col+cn;en>=0&&en<8&&Mn>=0&&Mn<8&&bo(re,q.row,q.col,en,Mn,!0,ae,K,!0)&&oe.push({row:en,col:Mn})}}else for(let Ne=0;Ne<8;Ne++)for(let tt=0;tt<8;tt++)bo(re,q.row,q.col,Ne,tt,!0,ae,K,!0)&&oe.push({row:Ne,col:tt});return oe},S1=(q,K=l)=>{if(!ns(K,q))return!1;for(let ae=0;ae<8;ae++)for(let oe=0;oe<8;oe++){const re=K[ae][oe];if(re&&Ht(re)===q&&bm({row:ae,col:oe},K,q).length>0)return!1}return!0},JT=(q,K=l)=>{if(ns(K,q))return!1;for(let ae=0;ae<8;ae++)for(let oe=0;oe<8;oe++){const re=K[ae][oe];if(re&&Ht(re)===q&&bm({row:ae,col:oe},K,q).length>0)return!1}return!0},_b=(q,K)=>{if(g!=="active"||ge.current)return;const ae=l[q][K],oe=ae?Ht(ae):null;if(f&&S.some(re=>re.row===q&&re.col===K)){Bc(f,{row:q,col:K});return}if(ae&&oe===d){const re=bm({row:q,col:K});p({row:q,col:K}),D(re);return}p(null),D([])},Bc=(q,K,ae=!1)=>{const oe=l[q.row][q.col];if(console.log("[MOVE ATTEMPT]",{from:q,to:K,piece:oe,isAIMove:ae,board:JSON.parse(JSON.stringify(l)),moveHistory:C}),!!oe){if(oe.toLowerCase()==="p"&&(Ht(oe)==="blue"&&K.row===0||Ht(oe)==="red"&&K.row===7)){O({from:q,to:K}),R(!0);return}R1(q,K,"q",ae)}};it.current=Bc;const ZT=k.useCallback((q,K,ae=!1)=>{Ri(!0);const oe=l.map(Ne=>[...Ne]),re=oe[q.row][q.col];if(!re)return;oe[K.row][K.col]=re,oe[q.row][q.col]=null,T1(oe,q,K,re);const Ie=Cm(q,K);if(T(Ne=>{const tt=[...Ne,Ie];return console.log("[MOVE HISTORY UPDATED]",tt),tt}),$({from:q,to:K}),p(null),D([]),C.length<10&&!ae){const Ne=IW(oe,d==="blue"?"red":"blue");ct(Ne).then(tt=>{tt&&tt.moves&&tt.moves.length>0&&(ke(tt.moves.slice(0,3)),Dn(!0),setTimeout(()=>Dn(!1),5e3))})}_m(q,K,re),h(Ne=>{const tt=Ne==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",tt),Ab(oe,tt),tt}),Ab(oe,d==="blue"?"red":"blue"),u(oe),ge.current=!1,bt.current=!1,Nt.current=!1,Ri(!1)},[l,d,C,ct]);k.useEffect(()=>{if(!ge.current&&a==="ai"&&d==="red"&&!bt.current&&!Nn)if(ge.current=!0,m==="easy")setTimeout(()=>{const q=Of(l);q?Bc(q.from,q.to,!0):ge.current=!1},600);else{A("AI is calculating...");const q=IW(l,d);if(Nt.current)return;Nt.current=!0,fetch("https://chess.lawb.xyz/api/stockfish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:q,difficulty:m,movetime:3e3})}).then(ae=>{if(ae.ok)return ae.json();throw new Error("API call failed")}).then(ae=>{console.log("[DEBUG] Stockfish API response:",ae);const oe=ae.bestmove||ae.move;if(oe&&oe!=="(none)"&&oe.length===4){const re=oe.charCodeAt(0)-97,Ie=parseInt(oe[1]),Ne=oe.charCodeAt(2)-97,tt=parseInt(oe[3]),cn=8-Ie,en=8-tt;if(console.log("[DEBUG] Parsed move:",{fromCol:re,fromRowStockfish:Ie,toCol:Ne,toRowStockfish:tt,fromRow:cn,toRow:en}),re>=0&&re<8&&cn>=0&&cn<8&&Ne>=0&&Ne<8&&en>=0&&en<8){const Mn={from:{row:cn,col:re},to:{row:en,col:Ne}},Xt=l[cn][re];if(console.log("[DEBUG] Move validation:",{piece:Xt,moveObj:Mn,isValid:Xt&&Ht(Xt)==="red"&&bo(Xt,cn,re,en,Ne,!0,"red",l)}),Xt&&Ht(Xt)==="red"&&bo(Xt,cn,re,en,Ne,!0,"red",l))console.log("[DEBUG] Executing Stockfish move:",Mn),Bc(Mn.from,Mn.to,!0);else{console.warn("[DEBUG] Invalid Stockfish move, falling back to random");const Lf=Of(l);Lf&&Bc(Lf.from,Lf.to,!0),ge.current=!1,Nt.current=!1}}else{console.warn("[DEBUG] Invalid move coordinates, falling back to random");const Mn=Of(l);Mn&&Bc(Mn.from,Mn.to,!0),ge.current=!1,Nt.current=!1}}else{console.warn("[DEBUG] Invalid move format from API, falling back to random");const re=Of(l);re&&Bc(re.from,re.to,!0),ge.current=!1,Nt.current=!1}}).catch(ae=>{console.error("[DEBUG] Stockfish API error:",ae),A("AI error. Falling back to random moves.");const oe=Of(l);oe&&Bc(oe.from,oe.to,!0),ge.current=!1,Nt.current=!1})}},[d,a,m,l,Z,Xe]);const Ab=(q,K)=>{console.log("Checking game end for player:",K);const ae=q.some(re=>re.some(Ie=>Ie==="k")),oe=q.some(re=>re.some(Ie=>Ie==="K"));if(!ae)return console.log("[GAME END] KING CAPTURED - Red wins!"),w("checkmate"),A("King captured! Red wins!"),wo("loss"),ve(!0),setTimeout(()=>ve(!1),3e3),"checkmate";if(!oe)return console.log("[GAME END] KING CAPTURED - Blue wins!"),w("checkmate"),A("King captured! You win!"),wo("win"),ve(!0),setTimeout(()=>ve(!1),3e3),"checkmate";if(console.log("Is king in check:",ns(q,K)),S1(K,q)){console.log("[GAME END] CHECKMATE",{winner:K==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(q)),moveHistory:C}),w("checkmate");const re=K==="blue"?"red":"blue";return re==="blue"?(A("Checkmate! You win!"),Rr("victory"),Nb(!0),wm(!0),P1(),wo("win"),ve(!0),setTimeout(()=>ve(!1),3e3)):(A(`Checkmate! ${re==="red"?"AI":"Opponent"} wins!`),Rr("loser"),Tb(!0),wo("loss"),ve(!0),setTimeout(()=>ve(!1),3e3)),"checkmate"}if(JT(K,q)){console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(q)),moveHistory:C}),w("stalemate");const re=K==="blue"?"red":"blue";return re==="blue"?(A("Stalemate! You win!"),Rr("victory"),Nb(!0),wm(!0),P1(),wo("win"),ve(!0),setTimeout(()=>ve(!1),3e3)):(A(`Stalemate! ${re==="red"?"AI":"Opponent"} wins!`),Rr("loser"),Tb(!0),wo("loss"),ve(!0),setTimeout(()=>ve(!1),3e3)),"stalemate"}return ns(q,K)?(console.log("CHECK detected!"),Rr("check"),A(`${K==="blue"?"Blue":"Red"} is in check!`)):A("Your turn"),null},Of=q=>{const K=[];for(let re=0;re<8;re++)for(let Ie=0;Ie<8;Ie++){const Ne=q[re][Ie];Ne&&Ht(Ne)==="red"&&K.push({row:re,col:Ie})}for(let re=K.length-1;re>0;re--){const Ie=Math.floor(Math.random()*(re+1));[K[re],K[Ie]]=[K[Ie],K[re]]}const ae=[],oe=[];for(const re of K){const Ie=bm(re,q,"red");for(const Ne of Ie){const tt=q[Ne.row][Ne.col];if(tt&&Ht(tt)==="blue"){const en={p:100,n:320,b:330,r:500,q:900,k:2e4}[tt.toLowerCase()]||0;ae.push({from:re,to:Ne,value:en})}else oe.push({from:re,to:Ne})}}if(ae.length>0&&Math.random()<.3){ae.sort((re,Ie)=>re.value-Ie.value);for(const re of ae){const Ie=q.map(tt=>[...tt]),Ne=Ie[re.from.row][re.from.col];if(Ie[re.to.row][re.to.col]=Ne,Ie[re.from.row][re.from.col]=null,!ns(Ie,"red"))return{from:re.from,to:re.to}}}for(const re of oe){const Ie=q.map(tt=>[...tt]),Ne=Ie[re.from.row][re.from.col];if(Ie[re.to.row][re.to.col]=Ne,Ie[re.from.row][re.from.col]=null,!ns(Ie,"red"))return re}ae.sort((re,Ie)=>re.value-Ie.value);for(const re of ae){const Ie=q.map(tt=>[...tt]),Ne=Ie[re.from.row][re.from.col];if(Ie[re.to.row][re.to.col]=Ne,Ie[re.from.row][re.from.col]=null,!ns(Ie,"red"))return{from:re.from,to:re.to}}return null},Sb=()=>{u(JSON.parse(JSON.stringify(xW))),h("blue"),p(null),w("active"),T([]),D([]),$(null),W(!1),A("Select game mode"),X({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),ge.current&&(ge.current=!1)},xb=()=>{if(eR(),console.log("[DEBUG] startGame called, difficulty:",m,"gameMode:",a),a==="online"){W(!1),ne(!1);return}W(!0),ne(!1),A("Game started! Your turn");const q=pd();fd(q),console.log("[DEBUG] Game started with chessboard:",q)},kf=q=>`${q.slice(0,6)}...${q.slice(-4)}`,Ib=(q,K)=>{const ae=l[q][K],oe=(f==null?void 0:f.row)===q&&(f==null?void 0:f.col)===K,re=S.some(Ne=>Ne.row===q&&Ne.col===K),Ie=P&&(P.from.row===q&&P.from.col===K||P.to.row===q&&P.to.col===K);return y.jsxs("div",{className:`square ${oe?"selected":""} ${re?"legal-move":""} ${Ie?"last-move":""}`,onClick:()=>_b(q,K),onTouchStart:Ne=>Mf(q,K,Ne),onTouchMove:tR,children:[ae&&y.jsx("div",{className:"piece",style:{backgroundImage:ZA[ae]?`url(${ZA[ae]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),re&&y.jsx("div",{className:"legal-move-indicator"})]},`${q}-${K}`)},x1=()=>{if(!I||!B)return null;const q=d==="blue"?["q","r","b","n"]:["Q","R","B","N"];return y.jsx("div",{className:"promotion-dialog",children:y.jsxs("div",{className:"promotion-content",children:[y.jsx("h3",{children:"Choose promotion piece:"}),y.jsx("div",{className:"promotion-pieces",children:q.map(K=>y.jsx("div",{className:"promotion-piece",onClick:()=>{R1(B.from,B.to,K),R(!1),O(null)},style:{backgroundImage:ZA[K]?`url(${ZA[K]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},K))})]})})},[vm,I1]=k.useState(null),N1=(q=!1,K="Click a piece to learn more about it.")=>y.jsxs("div",{className:`piece-gallery${q?" piece-gallery-sm":""}`,children:[y.jsx("h3",{style:{color:"#32CD32"},children:"Lawbstation Chess Pieces"}),y.jsx("div",{className:"piece-gallery-grid",children:mqe.map(ae=>y.jsxs("div",{className:"piece-gallery-item",onClick:()=>{I1(vm===ae.key?null:ae.key)},children:[y.jsx("img",{src:ae.img,alt:ae.name,className:"piece-gallery-img"}),y.jsx("div",{className:"piece-gallery-name",children:ae.name}),vm===ae.key&&y.jsx("div",{className:"piece-gallery-desc",children:ae.desc})]},ae.key))}),y.jsx("div",{className:"piece-gallery-tip",children:K})]}),Em=()=>y.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:y.jsx("div",{className:"difficulty-controls-col",children:y.jsxs("div",{className:"difficulty-selection-panel",style:{background:"transparent",borderRadius:0,padding:"32px 24px",boxShadow:"none",textAlign:"center"},children:[y.jsx("h2",{style:{fontWeight:700,letterSpacing:1,fontSize:"2rem",color:"#00ff00",marginBottom:16,textShadow:"0 0 6px #00ff00, 0 0 2px #00ff00"},children:"Select Difficulty"}),y.jsx("p",{style:{fontSize:"1.1rem",color:"#00ff00",marginBottom:24,textShadow:"0 0 6px #00ff00, 0 0 2px #00ff00"},children:"Compete against the computer to climb the leaderboard."}),y.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24},children:[y.jsx("button",{className:`difficulty-btn${m==="easy"?" selected":""}`,style:{background:m==="easy"?"#00ff00":"transparent",color:m==="easy"?"#000":"#00ff00",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:0,border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,boxShadow:m==="easy"?"0 0 6px #00ff00, 0 0 2px #00ff00":"none"},onClick:()=>b("easy"),children:"Easy"}),y.jsx("button",{className:`difficulty-btn${m==="hard"?" selected":""}`,style:{background:m==="hard"?"#00ff00":"transparent",color:m==="hard"?"#000":"#00ff00",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:0,border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,boxShadow:m==="hard"?"0 0 6px #00ff00, 0 0 2px #00ff00":"none"},onClick:()=>b("hard"),children:"Hard"})]}),y.jsxs("button",{className:"difficulty-btn start-btn",onClick:()=>{xb()},style:{background:"transparent",color:"#00ff00",fontWeight:"bold",fontSize:"1.3em",padding:"18px 48px",borderRadius:0,boxShadow:"0 0 6px #00ff00, 0 0 2px #00ff00",border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,marginBottom:8},children:[y.jsx("span",{role:"img","aria-label":"chess",children:""})," Start Game"]})]})})}),T1=(q,K,ae,oe)=>{if(oe.toLowerCase()==="p"&&(Ht(oe)==="blue"&&ae.row===0||Ht(oe)==="red"&&ae.row===7)){const re=Ht(oe)==="blue"?"q":"Q";q[ae.row][ae.col]=re}if(oe.toLowerCase()==="k"&&Math.abs(K.col-ae.col)===2){if(ae.col===6)q[K.row][7]=null,q[K.row][5]=Ht(oe)==="blue"?"r":"R";else if(ae.col===2){const re=q[K.row][3];q[K.row][0]=null,q[K.row][3]=Ht(oe)==="blue"?"r":"R",re&&re.toLowerCase()==="q"&&(q[K.row][4]=re)}}},Cm=(q,K,ae,oe)=>{const re=zn(q.row,q.col),Ie=zn(K.row,K.col);return`${re}-${Ie}`},_m=(q,K,ae)=>{const oe={...Z};ae.toLowerCase()==="k"?Ht(ae)==="blue"?oe.blueKingMoved=!0:oe.redKingMoved=!0:ae.toLowerCase()==="r"&&(Ht(ae)==="blue"?(q.col===0&&(oe.blueRooksMove.left=!0),q.col===7&&(oe.blueRooksMove.right=!0)):(q.col===0&&(oe.redRooksMove.left=!0),q.col===7&&(oe.redRooksMove.right=!0))),ae.toLowerCase()==="p"&&Math.abs(q.row-K.row)===2?oe.lastPawnDoubleMove={row:K.row,col:K.col}:oe.lastPawnDoubleMove=null,X(oe)},R1=(q,K,ae="q",oe=!1)=>{l[q.row][q.col];const Ie=l[K.row][K.col]!==null;if(Rr(Ie?"capture":"move"),Ie){j({row:K.row,col:K.col,show:!0}),setTimeout(()=>{ZT(q,K,oe),j(null)},500);return}ZT(q,K,oe)},Rr=q=>{if(!YT)return;let K="";switch(q){case"move":K="/images/move.mp3";break;case"capture":K="/images/capture.mp3";break;case"check":K="/images/play.mp3";break;case"checkmate":K="/images/victory.mp3";break;case"victory":K="/images/victory.mp3";break;case"loser":K="/images/loser.mp3";break;case"upgrade":K="/images/upgrade.mp3";break;default:K="/images/move.mp3"}new Audio(K).play().catch(()=>{})},P1=()=>{Rr("victory");for(let q=0;q<50;q++)setTimeout(()=>{const K=document.createElement("div");K.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(K),setTimeout(()=>K.remove(),3e3)},q*100);for(let q=0;q<15;q++)setTimeout(()=>{const K=document.createElement("div"),ae=["#ff4444","#4444ff","#ffff44","#ff44ff","#ff8844"],oe=ae[Math.floor(Math.random()*ae.length)];K.style.cssText=`
          position: fixed;
          width: 60px;
          height: 80px;
          background: ${oe};
          border-radius: 50% 50% 50% 50% /60% 40% 60% 40%;
          left: ${Math.random()*window.innerWidth}px;
          bottom: -80px;
          z-index: 9998;
          animation: balloon-float 6s ease-out forwards;
          box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        `,document.body.appendChild(K),setTimeout(()=>K.remove(),6e3)},q*200);setTimeout(()=>wm(!1),5e3)},[XT,Nb]=k.useState(!1),[Df,Tb]=k.useState(!1),ta=()=>{Nb(!1),Tb(!1)},za=()=>{ta(),Sb()},O1=()=>{ta(),W(!1)},eR=()=>{new Audio("/images/start.mp3").play().catch(()=>{})},ql=a==="online",[Ha,md]=k.useState("leaderboard"),Mf=(q,K,ae)=>{ae.preventDefault(),_b(q,K)},tR=q=>{q.preventDefault()};return y.jsxs("div",{className:`chess-game${n?" fullscreen":""}${ht?" chess-dark-mode":""}${G?" game-active":""}`,children:[y.jsxs("div",{className:"chess-header",children:[y.jsx("h2",{children:"LAWB CHESS TESTNET BETA 3000"}),y.jsxs("div",{className:"chess-controls",children:[e&&y.jsx("button",{onClick:e,children:"_"}),y.jsx("button",{onClick:t,children:""})]})]}),y.jsx("div",{className:"game-stable-layout",children:y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"left-sidebar",children:[Ha==="leaderboard"&&y.jsxs("div",{className:"leaderboard-compact",children:[y.jsx("h3",{children:"Leaderboard"}),y.jsx("div",{className:"leaderboard-table-compact",children:y.jsxs("table",{children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:"Rank"}),y.jsx("th",{children:"Player"}),y.jsx("th",{children:"Pts"})]})}),y.jsx("tbody",{children:Array.isArray(x)&&x.slice(0,8).map((q,K)=>{if(typeof q=="object"&&q!==null&&"username"in q&&"wins"in q&&"losses"in q&&"draws"in q&&"points"in q){const ae=q;return y.jsxs("tr",{children:[y.jsx("td",{children:K+1}),y.jsx("td",{children:kf(ae.username)}),y.jsx("td",{children:ae.points})]},ae.username)}return null})})]})})]}),Ha==="moves"&&G&&y.jsxs("div",{className:"move-history-compact",children:[y.jsx("div",{className:"move-history-title",children:"Moves"}),y.jsx("ul",{className:"move-history-list-compact",children:C.slice().reverse().map((q,K)=>y.jsx("li",{children:q},C.length-1-K))})]}),Ha==="gallery"&&y.jsx("div",{className:"piece-gallery-compact",children:N1(!0,"Click pieces to learn more")})]}),y.jsxs("div",{className:"center-area",children:[G&&y.jsxs("div",{className:"game-info-compact",children:[y.jsxs("span",{className:d==="blue"?"current-blue":"current-red",children:[d==="blue"?"Blue":"Red"," to move"]}),a===c2.AI&&y.jsxs("span",{className:"mode-play",children:[m==="easy"?"Easy":"Hard"," AI"]}),ql&&y.jsxs("span",{className:"wager-display",children:["Wager: ",te," tDMT"]})]}),G?y.jsxs("div",{className:"chess-main-area",children:[y.jsx("div",{className:"chessboard-container",children:y.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${lr})`},children:[Array.from({length:8},(q,K)=>y.jsx("div",{className:"board-row",children:Array.from({length:8},(ae,oe)=>Ib(K,oe))},K)),M&&M.show&&y.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${M.row*12.5}%`,left:`${M.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:y.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),y.jsxs("div",{className:"game-controls-compact",children:[y.jsxs("div",{className:"sidebar-toggle-group",children:[y.jsx("button",{className:Ha==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>md("leaderboard"),children:"Leaderboard"}),y.jsx("button",{className:Ha==="moves"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>md("moves"),children:"Moves"}),y.jsx("button",{className:Ha==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>md("gallery"),children:"Gallery"})]}),y.jsx("button",{onClick:za,children:"New Game"}),y.jsx("button",{onClick:O1,children:"Menu"})]})]}):At?Em():ql?y.jsx(pne,{onClose:t,onMinimize:e,fullscreen:n}):y.jsxs("div",{className:"game-mode-panel-streamlined",children:[y.jsx("div",{style:{textAlign:"center",marginBottom:"20px"},children:y.jsx("img",{src:"/assets/lawbstationgame.png",alt:"Lawbstation Chess",style:{width:"100%",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),y.jsxs("div",{className:"mode-selection-compact",children:[y.jsx("button",{className:`mode-btn-compact ${a==="ai"?"selected":""}`,onClick:()=>c("ai"),children:"VS AI"}),y.jsx("button",{className:`mode-btn-compact ${ql?"selected":""}`,onClick:()=>c("online"),children:"PvP"})]}),a===c2.AI&&y.jsx("button",{className:"start-btn-compact",onClick:()=>ne(!0),children:"Start Game"}),ql&&y.jsxs("div",{className:"pvp-info",children:[y.jsx("p",{children:"Challenge other players with tDMT wagers"}),y.jsx("p",{children:"Create or join games instantly"})]}),y.jsxs("div",{className:"help-section-compact",children:[y.jsx("h4",{children:"How to Play"}),y.jsxs("div",{className:"help-content",children:[y.jsxs("p",{children:[y.jsx("strong",{children:"Objective:"})," Checkmate your opponent's king by placing it under attack with no legal moves to escape."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Game Setup:"})," Blue pieces start at the bottom, Red pieces at the top. Blue always moves first."]}),y.jsx("p",{children:y.jsx("strong",{children:"Piece Movements:"})}),y.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Pawn:"})," Moves forward one square (or two on first move), captures diagonally"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Knight:"})," Moves in L-shape: 2 squares in one direction, then 1 square perpendicular"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Bishop:"})," Moves any number of squares diagonally"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Rook:"})," Moves any number of squares horizontally or vertically"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Queen:"})," Moves any number of squares in any one direction"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"King:"})," Moves one square in any direction"]})]}),y.jsx("p",{children:y.jsx("strong",{children:"Special Rules:"})}),y.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Check:"})," When your king is under attack - you must move to escape"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Checkmate:"})," When your king is under attack with no legal moves to escape. endGame."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Stalemate:"})," When you have no legal moves but your king is not in check (draw). endGame."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Pawn Promotion:"})," When a pawn reaches the opposite end of chess board, Player chooses which chess piece to swap pawn out for."]})]}),y.jsx("p",{children:y.jsx("strong",{children:"Game Modes:"})}),y.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Single Player:"})," Practice against the computer (Easy/Hard difficulty)"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Multiplayer:"})," wage tDMT and challenge other players on Sanko testnet. Winner takes the pot minus 5% house fee."]})]}),y.jsx("p",{children:y.jsx("strong",{children:"Multiplayer Flow:"})}),y.jsxs("ol",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[y.jsx("li",{children:"Connect your wallet to Sanko testnet"}),y.jsx("li",{children:"Create a game and set your wager amount in tDMT"}),y.jsx("li",{children:"Share your invite code with an opponent"}),y.jsx("li",{children:"Opponent joins and matches your wager"}),y.jsx("li",{children:"Game begins automatically - Blue (Player 1) moves first"}),y.jsx("li",{children:"Winner claims the pot minus 5% house fee"})]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Leaderboard:"})," All games are tracked to your connected wallet. Win = 3 points, Draw = 1 point, Loss = 0 points."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Lawb Chess Testnet Contract:"})," ",y.jsx("a",{href:"https://testnet.sankoscan.io/address/0x3112AF5728520F52FD1C6710dD7bD52285a68e47?tab=contract",target:"_blank",rel:"noopener noreferrer",style:{color:"#32CD32"},children:"0x3112AF5728520F52FD1C6710dD7bD52285a68e47"})]}),y.jsxs("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#000000",borderRadius:"4px",fontSize:"12px"},children:[y.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[y.jsx("strong",{children:"Network Name:"})," Sanko Testnet"]}),y.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[y.jsx("strong",{children:"RPC URL:"})," https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}),y.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[y.jsx("strong",{children:"Chain ID:"})," 1992"]}),y.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[y.jsx("strong",{children:"Currency Symbol:"})," tDMT"]})]})]})]}),y.jsx("div",{style:{textAlign:"center",marginTop:"20px",marginBottom:"20px"},children:y.jsx("img",{src:"/images/chessboards.gif",alt:"Chessboards Animation",style:{maxWidth:"100%",width:"300px",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),y.jsxs("div",{className:"sidebar-toggle-group",style:{marginTop:"20px",justifyContent:"center"},children:[y.jsx("button",{className:Ha==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>md("leaderboard"),children:"Leaderboard"}),y.jsx("button",{className:Ha==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>md("gallery"),children:"Gallery"})]})]})]})]})}),ie&&N1(!0),I&&x1(),fe&&y.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"}),XT&&y.jsxs("div",{className:"victory-overlay",children:[y.jsx("div",{className:"balloons-container"}),y.jsx("div",{className:"victory-modal",children:y.jsxs("div",{className:"victory-content",children:[y.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:120,marginBottom:16}}),y.jsx("div",{children:"Victory!"}),y.jsx("button",{onClick:za,children:"New Game"})]})})]}),Df&&y.jsxs("div",{className:"defeat-overlay",children:[y.jsx("div",{className:"blood-overlay"}),y.jsx("div",{className:"victory-modal",children:y.jsxs("div",{className:"victory-content",children:[y.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:120,marginBottom:16}}),y.jsx("div",{children:"Defeat!"}),y.jsx("button",{onClick:za,children:"Try Again"})]})})]})]})};function IW(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const NW=()=>{const[t,e]=k.useState("singleplayer"),n=()=>{window.location.href="/"};return y.jsx("div",{className:"chess-page",children:y.jsx("div",{className:"chess-content",children:t==="singleplayer"?y.jsx(bqe,{onClose:n}):y.jsx(pne,{onClose:n,onMinimize:()=>{},fullscreen:!1})})})},vqe=new G4e,Eqe=typeof window<"u"&&window.location.hostname.startsWith("chess."),Cqe=()=>jFe("(max-width: 768px)")?y.jsx(FFe,{}):y.jsx(N8e,{});N2.createRoot(document.getElementById("root")).render(y.jsx(Wo.StrictMode,{children:y.jsx(g4e,{config:WFe,children:y.jsx(dFe,{client:vqe,children:y.jsx(x8e,{children:y.jsx(_8e,{children:Eqe?y.jsx(TS,{path:"/*",element:y.jsx(NW,{})}):y.jsxs(y.Fragment,{children:[y.jsx(TS,{path:"/",element:y.jsx(Cqe,{})}),y.jsx(TS,{path:"/chess",element:y.jsx(NW,{})})]})})})})})}));export{qVe as $,Ve as A,mt as B,$e as C,at as D,aE as E,xD as F,Av as G,hc as H,aye as I,Bn as J,YVe as K,C3 as L,ms as M,rye as N,we as O,Cd as P,SS as Q,jt as R,mc as S,Ki as T,O_e as U,uE as V,Ls as W,HVe as X,gs as Y,Qg as Z,hl as _,IS as a,mX as a0,_3 as a1,Ow as a2,Zs as a3,ZVe as a4,Uu as a5,Ll as a6,GC as a7,et as a8,Gr as a9,jW as aA,Dqe as aB,tC as aC,Bbe as aD,s4e as aE,$a as aF,Ba as aG,YY as aH,DEe as aI,qd as aa,kY as ab,NT as ac,pe as ad,kL as ae,Xr as af,Qwe as ag,GN as ah,eU as ai,rEe as aj,V_ as ak,Ma as al,If as am,nE as an,Ml as ao,t2e as ap,OVe as aq,IF as ar,VJ as as,GOe as at,n2e as au,kVe as av,PVe as aw,gT as ax,LVe as ay,DVe as az,Fn as b,Fe as c,ot as d,z as e,hr as f,Lu as g,KVe as h,Gu as i,$o as j,yt as k,Yi as l,$Pe as m,El as n,H$e as o,Ke as p,pl as q,VVe as r,vn as s,KV as t,ar as u,u4 as v,Zo as w,zVe as x,ii as y,ri as z};
