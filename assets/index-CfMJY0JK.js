const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/secp256k1-CBY3JFfc.js","assets/hmac-D_OEe-V4.js","assets/secp256k1-CSa1SMd2.js","assets/embedded-wallet-CdAkcKbA.js","assets/if-defined-Bp2VPqUz.js","assets/index-BGT_Bpfr.js","assets/index-Cm9raaji.js","assets/ref-DG6tOtmd.js","assets/index-D3l3mbTl.js","assets/index-BizKoqKC.js","assets/index-D7c7jX7m.js","assets/index-CxcYE8BC.js","assets/index-foTdBTLx.js","assets/index-DUJ7wVUt.js","assets/index-BgHaxEd1.js","assets/email-BURKtR_J.js","assets/index-KfuCX0Np.js","assets/socials-CsKMtMw_.js","assets/index-CjgVvlnK.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-DujcaFHD.js","assets/index-BdXzkb53.js","assets/index-DYWYHjGd.js","assets/index-B8siM-YC.js","assets/swaps-OXtdc8Oz.js","assets/index-CY2DwK05.js","assets/index-CZI2uybi.js","assets/index-QkaSs5GR.js","assets/send-DOw8FzNO.js","assets/index-5L9CW3HZ.js","assets/index-BGkrAB9_.js","assets/receive-DUgL14du.js","assets/index-BOIUqdlq.js","assets/onramp-D3sdlvH8.js","assets/index-DpTKpqEL.js","assets/index-7toX9lM0.js","assets/index-CdvW4q-G.js","assets/transactions-B_RKq55o.js","assets/index-DT2BZReA.js","assets/index-Dl2FmEQc.js","assets/index-Be6IQ4tX.js","assets/index-Blvz3iw8.js","assets/index-CfsKvtQQ.js","assets/w3m-modal-CvGgQNBx.js"])))=>i.map(i=>d[i]);
var JV=Object.defineProperty;var B3=t=>{throw TypeError(t)};var YV=(t,e,n)=>e in t?JV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var J=(t,e,n)=>YV(t,typeof e!="symbol"?e+"":e,n),IA=(t,e,n)=>e.has(t)||B3("Cannot "+n);var E=(t,e,n)=>(IA(t,e,"read from private field"),n?n.call(t):e.get(t)),H=(t,e,n)=>e.has(t)?B3("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),O=(t,e,n,r)=>(IA(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),te=(t,e,n)=>(IA(t,e,"access private method"),n);var ml=(t,e,n,r)=>({set _(s){O(t,e,s,n)},get _(){return E(t,e,r)}});function ZV(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Pn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Of(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ux(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var MB={exports:{}},Bx={},jB={exports:{}},ft={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cv=Symbol.for("react.element"),XV=Symbol.for("react.portal"),eK=Symbol.for("react.fragment"),tK=Symbol.for("react.strict_mode"),nK=Symbol.for("react.profiler"),rK=Symbol.for("react.provider"),sK=Symbol.for("react.context"),iK=Symbol.for("react.forward_ref"),oK=Symbol.for("react.suspense"),aK=Symbol.for("react.memo"),cK=Symbol.for("react.lazy"),L3=Symbol.iterator;function lK(t){return t===null||typeof t!="object"?null:(t=L3&&t[L3]||t["@@iterator"],typeof t=="function"?t:null)}var FB={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zB=Object.assign,HB={};function Zm(t,e,n){this.props=t,this.context=e,this.refs=HB,this.updater=n||FB}Zm.prototype.isReactComponent={};Zm.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zm.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function WB(){}WB.prototype=Zm.prototype;function fk(t,e,n){this.props=t,this.context=e,this.refs=HB,this.updater=n||FB}var pk=fk.prototype=new WB;pk.constructor=fk;zB(pk,Zm.prototype);pk.isPureReactComponent=!0;var M3=Array.isArray,qB=Object.prototype.hasOwnProperty,gk={current:null},GB={key:!0,ref:!0,__self:!0,__source:!0};function VB(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)qB.call(e,r)&&!GB.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:cv,type:t,key:i,ref:o,props:s,_owner:gk.current}}function uK(t,e){return{$$typeof:cv,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function mk(t){return typeof t=="object"&&t!==null&&t.$$typeof===cv}function dK(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var j3=/\/+/g;function TA(t,e){return typeof t=="object"&&t!==null&&t.key!=null?dK(""+t.key):e.toString(36)}function gE(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case cv:case XV:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+TA(o,0):r,M3(s)?(n="",t!=null&&(n=t.replace(j3,"$&/")+"/"),gE(s,e,n,"",function(l){return l})):s!=null&&(mk(s)&&(s=uK(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(j3,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",M3(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+TA(i,a);o+=gE(i,e,n,c,s)}else if(c=lK(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+TA(i,a++),o+=gE(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qv(t,e,n){if(t==null)return t;var r=[],s=0;return gE(t,r,"","",function(i){return e.call(n,i,s++)}),r}function hK(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Es={current:null},mE={transition:null},fK={ReactCurrentDispatcher:Es,ReactCurrentBatchConfig:mE,ReactCurrentOwner:gk};function KB(){throw Error("act(...) is not supported in production builds of React.")}ft.Children={map:Qv,forEach:function(t,e,n){Qv(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Qv(t,function(){e++}),e},toArray:function(t){return Qv(t,function(e){return e})||[]},only:function(t){if(!mk(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ft.Component=Zm;ft.Fragment=eK;ft.Profiler=nK;ft.PureComponent=fk;ft.StrictMode=tK;ft.Suspense=oK;ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fK;ft.act=KB;ft.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=zB({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=gk.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)qB.call(e,c)&&!GB.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:cv,type:t.type,key:s,ref:i,props:r,_owner:o}};ft.createContext=function(t){return t={$$typeof:sK,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:rK,_context:t},t.Consumer=t};ft.createElement=VB;ft.createFactory=function(t){var e=VB.bind(null,t);return e.type=t,e};ft.createRef=function(){return{current:null}};ft.forwardRef=function(t){return{$$typeof:iK,render:t}};ft.isValidElement=mk;ft.lazy=function(t){return{$$typeof:cK,_payload:{_status:-1,_result:t},_init:hK}};ft.memo=function(t,e){return{$$typeof:aK,type:t,compare:e===void 0?null:e}};ft.startTransition=function(t){var e=mE.transition;mE.transition={};try{t()}finally{mE.transition=e}};ft.unstable_act=KB;ft.useCallback=function(t,e){return Es.current.useCallback(t,e)};ft.useContext=function(t){return Es.current.useContext(t)};ft.useDebugValue=function(){};ft.useDeferredValue=function(t){return Es.current.useDeferredValue(t)};ft.useEffect=function(t,e){return Es.current.useEffect(t,e)};ft.useId=function(){return Es.current.useId()};ft.useImperativeHandle=function(t,e,n){return Es.current.useImperativeHandle(t,e,n)};ft.useInsertionEffect=function(t,e){return Es.current.useInsertionEffect(t,e)};ft.useLayoutEffect=function(t,e){return Es.current.useLayoutEffect(t,e)};ft.useMemo=function(t,e){return Es.current.useMemo(t,e)};ft.useReducer=function(t,e,n){return Es.current.useReducer(t,e,n)};ft.useRef=function(t){return Es.current.useRef(t)};ft.useState=function(t){return Es.current.useState(t)};ft.useSyncExternalStore=function(t,e,n){return Es.current.useSyncExternalStore(t,e,n)};ft.useTransition=function(){return Es.current.useTransition()};ft.version="18.3.1";jB.exports=ft;var D=jB.exports;const Ci=Of(D),pK=ZV({__proto__:null,default:Ci},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gK=D,mK=Symbol.for("react.element"),yK=Symbol.for("react.fragment"),wK=Object.prototype.hasOwnProperty,bK=gK.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vK={key:!0,ref:!0,__self:!0,__source:!0};function QB(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)wK.call(e,r)&&!vK.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:mK,type:t,key:i,ref:o,props:s,_owner:bK.current}}Bx.Fragment=yK;Bx.jsx=QB;Bx.jsxs=QB;MB.exports=Bx;var m=MB.exports,mI={},JB={exports:{}},Pi={},YB={exports:{}},ZB={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,$){var M=U.length;U.push($);e:for(;0<M;){var G=M-1>>>1,X=U[G];if(0<s(X,$))U[G]=$,U[M]=X,M=G;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var $=U[0],M=U.pop();if(M!==$){U[0]=M;e:for(var G=0,X=U.length,ie=X>>>1;G<ie;){var se=2*(G+1)-1,ce=U[se],ye=se+1,Y=U[ye];if(0>s(ce,M))ye<X&&0>s(Y,ce)?(U[G]=Y,U[ye]=M,G=ye):(U[G]=ce,U[se]=M,G=se);else if(ye<X&&0>s(Y,M))U[G]=Y,U[ye]=M,G=ye;else break e}}return $}function s(U,$){var M=U.sortIndex-$.sortIndex;return M!==0?M:U.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var $=n(l);$!==null;){if($.callback===null)r(l);else if($.startTime<=U)r(l),$.sortIndex=$.expirationTime,e(c,$);else break;$=n(l)}}function x(U){if(g=!1,b(U),!p)if(n(c)!==null)p=!0,N(_);else{var $=n(l);$!==null&&L(x,$.startTime-U)}}function _(U,$){p=!1,g&&(g=!1,w(T),T=-1),f=!0;var M=h;try{for(b($),d=n(c);d!==null&&(!(d.expirationTime>$)||U&&!R());){var G=d.callback;if(typeof G=="function"){d.callback=null,h=d.priorityLevel;var X=G(d.expirationTime<=$);$=t.unstable_now(),typeof X=="function"?d.callback=X:d===n(c)&&r(c),b($)}else r(c);d=n(c)}if(d!==null)var ie=!0;else{var se=n(l);se!==null&&L(x,se.startTime-$),ie=!1}return ie}finally{d=null,h=M,f=!1}}var C=!1,S=null,T=-1,A=5,P=-1;function R(){return!(t.unstable_now()-P<A)}function j(){if(S!==null){var U=t.unstable_now();P=U;var $=!0;try{$=S(!0,U)}finally{$?z():(C=!1,S=null)}}else C=!1}var z;if(typeof v=="function")z=function(){v(j)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,I=K.port2;K.port1.onmessage=j,z=function(){I.postMessage(null)}}else z=function(){y(j,0)};function N(U){S=U,C||(C=!0,z())}function L(U,$){T=y(function(){U(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,N(_))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(U){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var M=h;h=$;try{return U()}finally{h=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,$){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var M=h;h=U;try{return $()}finally{h=M}},t.unstable_scheduleCallback=function(U,$,M){var G=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?G+M:G):M=G,U){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=M+X,U={id:u++,callback:$,priorityLevel:U,startTime:M,expirationTime:X,sortIndex:-1},M>G?(U.sortIndex=M,e(l,U),n(c)===null&&U===n(l)&&(g?(w(T),T=-1):g=!0,L(x,M-G))):(U.sortIndex=X,e(c,U),p||f||(p=!0,N(_))),U},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(U){var $=h;return function(){var M=h;h=$;try{return U.apply(this,arguments)}finally{h=M}}}})(ZB);YB.exports=ZB;var EK=YB.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _K=D,Ti=EK;function me(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var XB=new Set,gw={};function Rf(t,e){_m(t,e),_m(t+"Capture",e)}function _m(t,e){for(gw[t]=e,t=0;t<e.length;t++)XB.add(e[t])}var Jc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yI=Object.prototype.hasOwnProperty,xK=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,F3={},z3={};function CK(t){return yI.call(z3,t)?!0:yI.call(F3,t)?!1:xK.test(t)?z3[t]=!0:(F3[t]=!0,!1)}function AK(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function SK(t,e,n,r){if(e===null||typeof e>"u"||AK(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _s(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Pr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pr[t]=new _s(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pr[e]=new _s(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pr[t]=new _s(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pr[t]=new _s(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pr[t]=new _s(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pr[t]=new _s(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pr[t]=new _s(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pr[t]=new _s(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pr[t]=new _s(t,5,!1,t.toLowerCase(),null,!1,!1)});var yk=/[\-:]([a-z])/g;function wk(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(yk,wk);Pr[e]=new _s(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(yk,wk);Pr[e]=new _s(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(yk,wk);Pr[e]=new _s(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pr[t]=new _s(t,1,!1,t.toLowerCase(),null,!1,!1)});Pr.xlinkHref=new _s("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pr[t]=new _s(t,1,!1,t.toLowerCase(),null,!0,!0)});function bk(t,e,n,r){var s=Pr.hasOwnProperty(e)?Pr[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(SK(e,n,s,r)&&(n=null),r||s===null?CK(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var al=_K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jv=Symbol.for("react.element"),Bp=Symbol.for("react.portal"),Lp=Symbol.for("react.fragment"),vk=Symbol.for("react.strict_mode"),wI=Symbol.for("react.profiler"),eL=Symbol.for("react.provider"),tL=Symbol.for("react.context"),Ek=Symbol.for("react.forward_ref"),bI=Symbol.for("react.suspense"),vI=Symbol.for("react.suspense_list"),_k=Symbol.for("react.memo"),ql=Symbol.for("react.lazy"),nL=Symbol.for("react.offscreen"),H3=Symbol.iterator;function Ny(t){return t===null||typeof t!="object"?null:(t=H3&&t[H3]||t["@@iterator"],typeof t=="function"?t:null)}var Cn=Object.assign,NA;function f0(t){if(NA===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);NA=e&&e[1]||""}return`
`+NA+t}var PA=!1;function kA(t,e){if(!t||PA)return"";PA=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{PA=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?f0(t):""}function IK(t){switch(t.tag){case 5:return f0(t.type);case 16:return f0("Lazy");case 13:return f0("Suspense");case 19:return f0("SuspenseList");case 0:case 2:case 15:return t=kA(t.type,!1),t;case 11:return t=kA(t.type.render,!1),t;case 1:return t=kA(t.type,!0),t;default:return""}}function EI(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Lp:return"Fragment";case Bp:return"Portal";case wI:return"Profiler";case vk:return"StrictMode";case bI:return"Suspense";case vI:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case tL:return(t.displayName||"Context")+".Consumer";case eL:return(t._context.displayName||"Context")+".Provider";case Ek:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _k:return e=t.displayName||null,e!==null?e:EI(t.type)||"Memo";case ql:e=t._payload,t=t._init;try{return EI(t(e))}catch{}}return null}function TK(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return EI(e);case 8:return e===vk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ad(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rL(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function NK(t){var e=rL(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yv(t){t._valueTracker||(t._valueTracker=NK(t))}function sL(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=rL(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function r_(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _I(t,e){var n=e.checked;return Cn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function W3(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ad(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function iL(t,e){e=e.checked,e!=null&&bk(t,"checked",e,!1)}function xI(t,e){iL(t,e);var n=ad(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?CI(t,e.type,n):e.hasOwnProperty("defaultValue")&&CI(t,e.type,ad(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function q3(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function CI(t,e,n){(e!=="number"||r_(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var p0=Array.isArray;function sg(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ad(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function AI(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(me(91));return Cn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function G3(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(me(92));if(p0(n)){if(1<n.length)throw Error(me(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ad(n)}}function oL(t,e){var n=ad(e.value),r=ad(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function V3(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function aL(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function SI(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?aL(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zv,cL=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zv=Zv||document.createElement("div"),Zv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zv.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function mw(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var $0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PK=["Webkit","ms","Moz","O"];Object.keys($0).forEach(function(t){PK.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$0[e]=$0[t]})});function lL(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||$0.hasOwnProperty(t)&&$0[t]?(""+e).trim():e+"px"}function uL(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=lL(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var kK=Cn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function II(t,e){if(e){if(kK[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(me(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(me(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(me(61))}if(e.style!=null&&typeof e.style!="object")throw Error(me(62))}}function TI(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var NI=null;function xk(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var PI=null,ig=null,og=null;function K3(t){if(t=dv(t)){if(typeof PI!="function")throw Error(me(280));var e=t.stateNode;e&&(e=zx(e),PI(t.stateNode,t.type,e))}}function dL(t){ig?og?og.push(t):og=[t]:ig=t}function hL(){if(ig){var t=ig,e=og;if(og=ig=null,K3(t),e)for(t=0;t<e.length;t++)K3(e[t])}}function fL(t,e){return t(e)}function pL(){}var OA=!1;function gL(t,e,n){if(OA)return t(e,n);OA=!0;try{return fL(t,e,n)}finally{OA=!1,(ig!==null||og!==null)&&(pL(),hL())}}function yw(t,e){var n=t.stateNode;if(n===null)return null;var r=zx(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(me(231,e,typeof n));return n}var kI=!1;if(Jc)try{var Py={};Object.defineProperty(Py,"passive",{get:function(){kI=!0}}),window.addEventListener("test",Py,Py),window.removeEventListener("test",Py,Py)}catch{kI=!1}function OK(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var U0=!1,s_=null,i_=!1,OI=null,RK={onError:function(t){U0=!0,s_=t}};function DK(t,e,n,r,s,i,o,a,c){U0=!1,s_=null,OK.apply(RK,arguments)}function $K(t,e,n,r,s,i,o,a,c){if(DK.apply(this,arguments),U0){if(U0){var l=s_;U0=!1,s_=null}else throw Error(me(198));i_||(i_=!0,OI=l)}}function Df(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function mL(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Q3(t){if(Df(t)!==t)throw Error(me(188))}function UK(t){var e=t.alternate;if(!e){if(e=Df(t),e===null)throw Error(me(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Q3(s),t;if(i===r)return Q3(s),e;i=i.sibling}throw Error(me(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(me(189))}}if(n.alternate!==r)throw Error(me(190))}if(n.tag!==3)throw Error(me(188));return n.stateNode.current===n?t:e}function yL(t){return t=UK(t),t!==null?wL(t):null}function wL(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=wL(t);if(e!==null)return e;t=t.sibling}return null}var bL=Ti.unstable_scheduleCallback,J3=Ti.unstable_cancelCallback,BK=Ti.unstable_shouldYield,LK=Ti.unstable_requestPaint,$n=Ti.unstable_now,MK=Ti.unstable_getCurrentPriorityLevel,Ck=Ti.unstable_ImmediatePriority,vL=Ti.unstable_UserBlockingPriority,o_=Ti.unstable_NormalPriority,jK=Ti.unstable_LowPriority,EL=Ti.unstable_IdlePriority,Lx=null,La=null;function FK(t){if(La&&typeof La.onCommitFiberRoot=="function")try{La.onCommitFiberRoot(Lx,t,void 0,(t.current.flags&128)===128)}catch{}}var Vo=Math.clz32?Math.clz32:WK,zK=Math.log,HK=Math.LN2;function WK(t){return t>>>=0,t===0?32:31-(zK(t)/HK|0)|0}var Xv=64,e1=4194304;function g0(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function a_(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=g0(a):(i&=o,i!==0&&(r=g0(i)))}else o=n&~s,o!==0?r=g0(o):i!==0&&(r=g0(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Vo(e),s=1<<n,r|=t[n],e&=~s;return r}function qK(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GK(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Vo(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=qK(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function RI(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _L(){var t=Xv;return Xv<<=1,!(Xv&4194240)&&(Xv=64),t}function RA(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function lv(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vo(e),t[e]=n}function VK(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Vo(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Ak(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Vo(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Wt=0;function xL(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var CL,Sk,AL,SL,IL,DI=!1,t1=[],zu=null,Hu=null,Wu=null,ww=new Map,bw=new Map,tu=[],KK="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Y3(t,e){switch(t){case"focusin":case"focusout":zu=null;break;case"dragenter":case"dragleave":Hu=null;break;case"mouseover":case"mouseout":Wu=null;break;case"pointerover":case"pointerout":ww.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":bw.delete(e.pointerId)}}function ky(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=dv(e),e!==null&&Sk(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function QK(t,e,n,r,s){switch(e){case"focusin":return zu=ky(zu,t,e,n,r,s),!0;case"dragenter":return Hu=ky(Hu,t,e,n,r,s),!0;case"mouseover":return Wu=ky(Wu,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ww.set(i,ky(ww.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,bw.set(i,ky(bw.get(i)||null,t,e,n,r,s)),!0}return!1}function TL(t){var e=sh(t.target);if(e!==null){var n=Df(e);if(n!==null){if(e=n.tag,e===13){if(e=mL(n),e!==null){t.blockedOn=e,IL(t.priority,function(){AL(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yE(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$I(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);NI=r,n.target.dispatchEvent(r),NI=null}else return e=dv(n),e!==null&&Sk(e),t.blockedOn=n,!1;e.shift()}return!0}function Z3(t,e,n){yE(t)&&n.delete(e)}function JK(){DI=!1,zu!==null&&yE(zu)&&(zu=null),Hu!==null&&yE(Hu)&&(Hu=null),Wu!==null&&yE(Wu)&&(Wu=null),ww.forEach(Z3),bw.forEach(Z3)}function Oy(t,e){t.blockedOn===e&&(t.blockedOn=null,DI||(DI=!0,Ti.unstable_scheduleCallback(Ti.unstable_NormalPriority,JK)))}function vw(t){function e(s){return Oy(s,t)}if(0<t1.length){Oy(t1[0],t);for(var n=1;n<t1.length;n++){var r=t1[n];r.blockedOn===t&&(r.blockedOn=null)}}for(zu!==null&&Oy(zu,t),Hu!==null&&Oy(Hu,t),Wu!==null&&Oy(Wu,t),ww.forEach(e),bw.forEach(e),n=0;n<tu.length;n++)r=tu[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<tu.length&&(n=tu[0],n.blockedOn===null);)TL(n),n.blockedOn===null&&tu.shift()}var ag=al.ReactCurrentBatchConfig,c_=!0;function YK(t,e,n,r){var s=Wt,i=ag.transition;ag.transition=null;try{Wt=1,Ik(t,e,n,r)}finally{Wt=s,ag.transition=i}}function ZK(t,e,n,r){var s=Wt,i=ag.transition;ag.transition=null;try{Wt=4,Ik(t,e,n,r)}finally{Wt=s,ag.transition=i}}function Ik(t,e,n,r){if(c_){var s=$I(t,e,n,r);if(s===null)HA(t,e,r,l_,n),Y3(t,r);else if(QK(s,t,e,n,r))r.stopPropagation();else if(Y3(t,r),e&4&&-1<KK.indexOf(t)){for(;s!==null;){var i=dv(s);if(i!==null&&CL(i),i=$I(t,e,n,r),i===null&&HA(t,e,r,l_,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else HA(t,e,r,null,n)}}var l_=null;function $I(t,e,n,r){if(l_=null,t=xk(r),t=sh(t),t!==null)if(e=Df(t),e===null)t=null;else if(n=e.tag,n===13){if(t=mL(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return l_=t,null}function NL(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(MK()){case Ck:return 1;case vL:return 4;case o_:case jK:return 16;case EL:return 536870912;default:return 16}default:return 16}}var Du=null,Tk=null,wE=null;function PL(){if(wE)return wE;var t,e=Tk,n=e.length,r,s="value"in Du?Du.value:Du.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return wE=s.slice(t,1<r?1-r:void 0)}function bE(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function n1(){return!0}function X3(){return!1}function ki(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?n1:X3,this.isPropagationStopped=X3,this}return Cn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=n1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=n1)},persist:function(){},isPersistent:n1}),e}var Xm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nk=ki(Xm),uv=Cn({},Xm,{view:0,detail:0}),XK=ki(uv),DA,$A,Ry,Mx=Cn({},uv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pk,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ry&&(Ry&&t.type==="mousemove"?(DA=t.screenX-Ry.screenX,$A=t.screenY-Ry.screenY):$A=DA=0,Ry=t),DA)},movementY:function(t){return"movementY"in t?t.movementY:$A}}),eD=ki(Mx),eQ=Cn({},Mx,{dataTransfer:0}),tQ=ki(eQ),nQ=Cn({},uv,{relatedTarget:0}),UA=ki(nQ),rQ=Cn({},Xm,{animationName:0,elapsedTime:0,pseudoElement:0}),sQ=ki(rQ),iQ=Cn({},Xm,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),oQ=ki(iQ),aQ=Cn({},Xm,{data:0}),tD=ki(aQ),cQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dQ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=uQ[t])?!!e[t]:!1}function Pk(){return dQ}var hQ=Cn({},uv,{key:function(t){if(t.key){var e=cQ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bE(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lQ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pk,charCode:function(t){return t.type==="keypress"?bE(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bE(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fQ=ki(hQ),pQ=Cn({},Mx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nD=ki(pQ),gQ=Cn({},uv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pk}),mQ=ki(gQ),yQ=Cn({},Xm,{propertyName:0,elapsedTime:0,pseudoElement:0}),wQ=ki(yQ),bQ=Cn({},Mx,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vQ=ki(bQ),EQ=[9,13,27,32],kk=Jc&&"CompositionEvent"in window,B0=null;Jc&&"documentMode"in document&&(B0=document.documentMode);var _Q=Jc&&"TextEvent"in window&&!B0,kL=Jc&&(!kk||B0&&8<B0&&11>=B0),rD=" ",sD=!1;function OL(t,e){switch(t){case"keyup":return EQ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function RL(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Mp=!1;function xQ(t,e){switch(t){case"compositionend":return RL(e);case"keypress":return e.which!==32?null:(sD=!0,rD);case"textInput":return t=e.data,t===rD&&sD?null:t;default:return null}}function CQ(t,e){if(Mp)return t==="compositionend"||!kk&&OL(t,e)?(t=PL(),wE=Tk=Du=null,Mp=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kL&&e.locale!=="ko"?null:e.data;default:return null}}var AQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iD(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!AQ[t.type]:e==="textarea"}function DL(t,e,n,r){dL(r),e=u_(e,"onChange"),0<e.length&&(n=new Nk("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var L0=null,Ew=null;function SQ(t){qL(t,0)}function jx(t){var e=zp(t);if(sL(e))return t}function IQ(t,e){if(t==="change")return e}var $L=!1;if(Jc){var BA;if(Jc){var LA="oninput"in document;if(!LA){var oD=document.createElement("div");oD.setAttribute("oninput","return;"),LA=typeof oD.oninput=="function"}BA=LA}else BA=!1;$L=BA&&(!document.documentMode||9<document.documentMode)}function aD(){L0&&(L0.detachEvent("onpropertychange",UL),Ew=L0=null)}function UL(t){if(t.propertyName==="value"&&jx(Ew)){var e=[];DL(e,Ew,t,xk(t)),gL(SQ,e)}}function TQ(t,e,n){t==="focusin"?(aD(),L0=e,Ew=n,L0.attachEvent("onpropertychange",UL)):t==="focusout"&&aD()}function NQ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jx(Ew)}function PQ(t,e){if(t==="click")return jx(e)}function kQ(t,e){if(t==="input"||t==="change")return jx(e)}function OQ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zo=typeof Object.is=="function"?Object.is:OQ;function _w(t,e){if(Zo(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!yI.call(e,s)||!Zo(t[s],e[s]))return!1}return!0}function cD(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function lD(t,e){var n=cD(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cD(n)}}function BL(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?BL(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function LL(){for(var t=window,e=r_();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=r_(t.document)}return e}function Ok(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function RQ(t){var e=LL(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&BL(n.ownerDocument.documentElement,n)){if(r!==null&&Ok(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=lD(n,i);var o=lD(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var DQ=Jc&&"documentMode"in document&&11>=document.documentMode,jp=null,UI=null,M0=null,BI=!1;function uD(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;BI||jp==null||jp!==r_(r)||(r=jp,"selectionStart"in r&&Ok(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),M0&&_w(M0,r)||(M0=r,r=u_(UI,"onSelect"),0<r.length&&(e=new Nk("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=jp)))}function r1(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fp={animationend:r1("Animation","AnimationEnd"),animationiteration:r1("Animation","AnimationIteration"),animationstart:r1("Animation","AnimationStart"),transitionend:r1("Transition","TransitionEnd")},MA={},ML={};Jc&&(ML=document.createElement("div").style,"AnimationEvent"in window||(delete Fp.animationend.animation,delete Fp.animationiteration.animation,delete Fp.animationstart.animation),"TransitionEvent"in window||delete Fp.transitionend.transition);function Fx(t){if(MA[t])return MA[t];if(!Fp[t])return t;var e=Fp[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ML)return MA[t]=e[n];return t}var jL=Fx("animationend"),FL=Fx("animationiteration"),zL=Fx("animationstart"),HL=Fx("transitionend"),WL=new Map,dD="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xd(t,e){WL.set(t,e),Rf(e,[t])}for(var jA=0;jA<dD.length;jA++){var FA=dD[jA],$Q=FA.toLowerCase(),UQ=FA[0].toUpperCase()+FA.slice(1);xd($Q,"on"+UQ)}xd(jL,"onAnimationEnd");xd(FL,"onAnimationIteration");xd(zL,"onAnimationStart");xd("dblclick","onDoubleClick");xd("focusin","onFocus");xd("focusout","onBlur");xd(HL,"onTransitionEnd");_m("onMouseEnter",["mouseout","mouseover"]);_m("onMouseLeave",["mouseout","mouseover"]);_m("onPointerEnter",["pointerout","pointerover"]);_m("onPointerLeave",["pointerout","pointerover"]);Rf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rf("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var m0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BQ=new Set("cancel close invalid load scroll toggle".split(" ").concat(m0));function hD(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,$K(r,e,void 0,t),t.currentTarget=null}function qL(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;hD(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;hD(s,a,l),i=c}}}if(i_)throw t=OI,i_=!1,OI=null,t}function un(t,e){var n=e[zI];n===void 0&&(n=e[zI]=new Set);var r=t+"__bubble";n.has(r)||(GL(e,t,2,!1),n.add(r))}function zA(t,e,n){var r=0;e&&(r|=4),GL(n,t,r,e)}var s1="_reactListening"+Math.random().toString(36).slice(2);function xw(t){if(!t[s1]){t[s1]=!0,XB.forEach(function(n){n!=="selectionchange"&&(BQ.has(n)||zA(n,!1,t),zA(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[s1]||(e[s1]=!0,zA("selectionchange",!1,e))}}function GL(t,e,n,r){switch(NL(e)){case 1:var s=YK;break;case 4:s=ZK;break;default:s=Ik}n=s.bind(null,e,n,t),s=void 0,!kI||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function HA(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=sh(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}gL(function(){var l=i,u=xk(n),d=[];e:{var h=WL.get(t);if(h!==void 0){var f=Nk,p=t;switch(t){case"keypress":if(bE(n)===0)break e;case"keydown":case"keyup":f=fQ;break;case"focusin":p="focus",f=UA;break;case"focusout":p="blur",f=UA;break;case"beforeblur":case"afterblur":f=UA;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=eD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=tQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=mQ;break;case jL:case FL:case zL:f=sQ;break;case HL:f=wQ;break;case"scroll":f=XK;break;case"wheel":f=vQ;break;case"copy":case"cut":case"paste":f=oQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=nD}var g=(e&4)!==0,y=!g&&t==="scroll",w=g?h!==null?h+"Capture":null:h;g=[];for(var v=l,b;v!==null;){b=v;var x=b.stateNode;if(b.tag===5&&x!==null&&(b=x,w!==null&&(x=yw(v,w),x!=null&&g.push(Cw(v,x,b)))),y)break;v=v.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==NI&&(p=n.relatedTarget||n.fromElement)&&(sh(p)||p[Yc]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?sh(p):null,p!==null&&(y=Df(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=eD,x="onMouseLeave",w="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=nD,x="onPointerLeave",w="onPointerEnter",v="pointer"),y=f==null?h:zp(f),b=p==null?h:zp(p),h=new g(x,v+"leave",f,n,u),h.target=y,h.relatedTarget=b,x=null,sh(u)===l&&(g=new g(w,v+"enter",p,n,u),g.target=b,g.relatedTarget=y,x=g),y=x,f&&p)t:{for(g=f,w=p,v=0,b=g;b;b=Jf(b))v++;for(b=0,x=w;x;x=Jf(x))b++;for(;0<v-b;)g=Jf(g),v--;for(;0<b-v;)w=Jf(w),b--;for(;v--;){if(g===w||w!==null&&g===w.alternate)break t;g=Jf(g),w=Jf(w)}g=null}else g=null;f!==null&&fD(d,h,f,g,!1),p!==null&&y!==null&&fD(d,y,p,g,!0)}}e:{if(h=l?zp(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var _=IQ;else if(iD(h))if($L)_=kQ;else{_=NQ;var C=TQ}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=PQ);if(_&&(_=_(t,l))){DL(d,_,n,u);break e}C&&C(t,h,l),t==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&CI(h,"number",h.value)}switch(C=l?zp(l):window,t){case"focusin":(iD(C)||C.contentEditable==="true")&&(jp=C,UI=l,M0=null);break;case"focusout":M0=UI=jp=null;break;case"mousedown":BI=!0;break;case"contextmenu":case"mouseup":case"dragend":BI=!1,uD(d,n,u);break;case"selectionchange":if(DQ)break;case"keydown":case"keyup":uD(d,n,u)}var S;if(kk)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Mp?OL(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(kL&&n.locale!=="ko"&&(Mp||T!=="onCompositionStart"?T==="onCompositionEnd"&&Mp&&(S=PL()):(Du=u,Tk="value"in Du?Du.value:Du.textContent,Mp=!0)),C=u_(l,T),0<C.length&&(T=new tD(T,t,null,n,u),d.push({event:T,listeners:C}),S?T.data=S:(S=RL(n),S!==null&&(T.data=S)))),(S=_Q?xQ(t,n):CQ(t,n))&&(l=u_(l,"onBeforeInput"),0<l.length&&(u=new tD("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=S))}qL(d,e)})}function Cw(t,e,n){return{instance:t,listener:e,currentTarget:n}}function u_(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=yw(t,n),i!=null&&r.unshift(Cw(t,i,s)),i=yw(t,e),i!=null&&r.push(Cw(t,i,s))),t=t.return}return r}function Jf(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function fD(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=yw(n,i),c!=null&&o.unshift(Cw(n,c,a))):s||(c=yw(n,i),c!=null&&o.push(Cw(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var LQ=/\r\n?/g,MQ=/\u0000|\uFFFD/g;function pD(t){return(typeof t=="string"?t:""+t).replace(LQ,`
`).replace(MQ,"")}function i1(t,e,n){if(e=pD(e),pD(t)!==e&&n)throw Error(me(425))}function d_(){}var LI=null,MI=null;function jI(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var FI=typeof setTimeout=="function"?setTimeout:void 0,jQ=typeof clearTimeout=="function"?clearTimeout:void 0,gD=typeof Promise=="function"?Promise:void 0,FQ=typeof queueMicrotask=="function"?queueMicrotask:typeof gD<"u"?function(t){return gD.resolve(null).then(t).catch(zQ)}:FI;function zQ(t){setTimeout(function(){throw t})}function WA(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),vw(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);vw(e)}function qu(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function mD(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ey=Math.random().toString(36).slice(2),Oa="__reactFiber$"+ey,Aw="__reactProps$"+ey,Yc="__reactContainer$"+ey,zI="__reactEvents$"+ey,HQ="__reactListeners$"+ey,WQ="__reactHandles$"+ey;function sh(t){var e=t[Oa];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Yc]||n[Oa]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=mD(t);t!==null;){if(n=t[Oa])return n;t=mD(t)}return e}t=n,n=t.parentNode}return null}function dv(t){return t=t[Oa]||t[Yc],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zp(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(me(33))}function zx(t){return t[Aw]||null}var HI=[],Hp=-1;function Cd(t){return{current:t}}function fn(t){0>Hp||(t.current=HI[Hp],HI[Hp]=null,Hp--)}function on(t,e){Hp++,HI[Hp]=t.current,t.current=e}var cd={},Xr=Cd(cd),Js=Cd(!1),sf=cd;function xm(t,e){var n=t.type.contextTypes;if(!n)return cd;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ys(t){return t=t.childContextTypes,t!=null}function h_(){fn(Js),fn(Xr)}function yD(t,e,n){if(Xr.current!==cd)throw Error(me(168));on(Xr,e),on(Js,n)}function VL(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(me(108,TK(t)||"Unknown",s));return Cn({},n,r)}function f_(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||cd,sf=Xr.current,on(Xr,t),on(Js,Js.current),!0}function wD(t,e,n){var r=t.stateNode;if(!r)throw Error(me(169));n?(t=VL(t,e,sf),r.__reactInternalMemoizedMergedChildContext=t,fn(Js),fn(Xr),on(Xr,t)):fn(Js),on(Js,n)}var wc=null,Hx=!1,qA=!1;function KL(t){wc===null?wc=[t]:wc.push(t)}function qQ(t){Hx=!0,KL(t)}function Ad(){if(!qA&&wc!==null){qA=!0;var t=0,e=Wt;try{var n=wc;for(Wt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}wc=null,Hx=!1}catch(s){throw wc!==null&&(wc=wc.slice(t+1)),bL(Ck,Ad),s}finally{Wt=e,qA=!1}}return null}var Wp=[],qp=0,p_=null,g_=0,eo=[],to=0,of=null,Lc=1,Mc="";function Fd(t,e){Wp[qp++]=g_,Wp[qp++]=p_,p_=t,g_=e}function QL(t,e,n){eo[to++]=Lc,eo[to++]=Mc,eo[to++]=of,of=t;var r=Lc;t=Mc;var s=32-Vo(r)-1;r&=~(1<<s),n+=1;var i=32-Vo(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Lc=1<<32-Vo(e)+s|n<<s|r,Mc=i+t}else Lc=1<<i|n<<s|r,Mc=t}function Rk(t){t.return!==null&&(Fd(t,1),QL(t,1,0))}function Dk(t){for(;t===p_;)p_=Wp[--qp],Wp[qp]=null,g_=Wp[--qp],Wp[qp]=null;for(;t===of;)of=eo[--to],eo[to]=null,Mc=eo[--to],eo[to]=null,Lc=eo[--to],eo[to]=null}var Ai=null,Ei=null,mn=!1,Lo=null;function JL(t,e){var n=no(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function bD(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ai=t,Ei=qu(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ai=t,Ei=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=of!==null?{id:Lc,overflow:Mc}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=no(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ai=t,Ei=null,!0):!1;default:return!1}}function WI(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qI(t){if(mn){var e=Ei;if(e){var n=e;if(!bD(t,e)){if(WI(t))throw Error(me(418));e=qu(n.nextSibling);var r=Ai;e&&bD(t,e)?JL(r,n):(t.flags=t.flags&-4097|2,mn=!1,Ai=t)}}else{if(WI(t))throw Error(me(418));t.flags=t.flags&-4097|2,mn=!1,Ai=t}}}function vD(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ai=t}function o1(t){if(t!==Ai)return!1;if(!mn)return vD(t),mn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jI(t.type,t.memoizedProps)),e&&(e=Ei)){if(WI(t))throw YL(),Error(me(418));for(;e;)JL(t,e),e=qu(e.nextSibling)}if(vD(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(me(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ei=qu(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ei=null}}else Ei=Ai?qu(t.stateNode.nextSibling):null;return!0}function YL(){for(var t=Ei;t;)t=qu(t.nextSibling)}function Cm(){Ei=Ai=null,mn=!1}function $k(t){Lo===null?Lo=[t]:Lo.push(t)}var GQ=al.ReactCurrentBatchConfig;function Dy(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(me(309));var r=n.stateNode}if(!r)throw Error(me(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(me(284));if(!n._owner)throw Error(me(290,t))}return t}function a1(t,e){throw t=Object.prototype.toString.call(e),Error(me(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ED(t){var e=t._init;return e(t._payload)}function ZL(t){function e(w,v){if(t){var b=w.deletions;b===null?(w.deletions=[v],w.flags|=16):b.push(v)}}function n(w,v){if(!t)return null;for(;v!==null;)e(w,v),v=v.sibling;return null}function r(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function s(w,v){return w=Qu(w,v),w.index=0,w.sibling=null,w}function i(w,v,b){return w.index=b,t?(b=w.alternate,b!==null?(b=b.index,b<v?(w.flags|=2,v):b):(w.flags|=2,v)):(w.flags|=1048576,v)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,v,b,x){return v===null||v.tag!==6?(v=ZA(b,w.mode,x),v.return=w,v):(v=s(v,b),v.return=w,v)}function c(w,v,b,x){var _=b.type;return _===Lp?u(w,v,b.props.children,x,b.key):v!==null&&(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ql&&ED(_)===v.type)?(x=s(v,b.props),x.ref=Dy(w,v,b),x.return=w,x):(x=SE(b.type,b.key,b.props,null,w.mode,x),x.ref=Dy(w,v,b),x.return=w,x)}function l(w,v,b,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=XA(b,w.mode,x),v.return=w,v):(v=s(v,b.children||[]),v.return=w,v)}function u(w,v,b,x,_){return v===null||v.tag!==7?(v=Jh(b,w.mode,x,_),v.return=w,v):(v=s(v,b),v.return=w,v)}function d(w,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=ZA(""+v,w.mode,b),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Jv:return b=SE(v.type,v.key,v.props,null,w.mode,b),b.ref=Dy(w,null,v),b.return=w,b;case Bp:return v=XA(v,w.mode,b),v.return=w,v;case ql:var x=v._init;return d(w,x(v._payload),b)}if(p0(v)||Ny(v))return v=Jh(v,w.mode,b,null),v.return=w,v;a1(w,v)}return null}function h(w,v,b,x){var _=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:a(w,v,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Jv:return b.key===_?c(w,v,b,x):null;case Bp:return b.key===_?l(w,v,b,x):null;case ql:return _=b._init,h(w,v,_(b._payload),x)}if(p0(b)||Ny(b))return _!==null?null:u(w,v,b,x,null);a1(w,b)}return null}function f(w,v,b,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return w=w.get(b)||null,a(v,w,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Jv:return w=w.get(x.key===null?b:x.key)||null,c(v,w,x,_);case Bp:return w=w.get(x.key===null?b:x.key)||null,l(v,w,x,_);case ql:var C=x._init;return f(w,v,b,C(x._payload),_)}if(p0(x)||Ny(x))return w=w.get(b)||null,u(v,w,x,_,null);a1(v,x)}return null}function p(w,v,b,x){for(var _=null,C=null,S=v,T=v=0,A=null;S!==null&&T<b.length;T++){S.index>T?(A=S,S=null):A=S.sibling;var P=h(w,S,b[T],x);if(P===null){S===null&&(S=A);break}t&&S&&P.alternate===null&&e(w,S),v=i(P,v,T),C===null?_=P:C.sibling=P,C=P,S=A}if(T===b.length)return n(w,S),mn&&Fd(w,T),_;if(S===null){for(;T<b.length;T++)S=d(w,b[T],x),S!==null&&(v=i(S,v,T),C===null?_=S:C.sibling=S,C=S);return mn&&Fd(w,T),_}for(S=r(w,S);T<b.length;T++)A=f(S,w,T,b[T],x),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?T:A.key),v=i(A,v,T),C===null?_=A:C.sibling=A,C=A);return t&&S.forEach(function(R){return e(w,R)}),mn&&Fd(w,T),_}function g(w,v,b,x){var _=Ny(b);if(typeof _!="function")throw Error(me(150));if(b=_.call(b),b==null)throw Error(me(151));for(var C=_=null,S=v,T=v=0,A=null,P=b.next();S!==null&&!P.done;T++,P=b.next()){S.index>T?(A=S,S=null):A=S.sibling;var R=h(w,S,P.value,x);if(R===null){S===null&&(S=A);break}t&&S&&R.alternate===null&&e(w,S),v=i(R,v,T),C===null?_=R:C.sibling=R,C=R,S=A}if(P.done)return n(w,S),mn&&Fd(w,T),_;if(S===null){for(;!P.done;T++,P=b.next())P=d(w,P.value,x),P!==null&&(v=i(P,v,T),C===null?_=P:C.sibling=P,C=P);return mn&&Fd(w,T),_}for(S=r(w,S);!P.done;T++,P=b.next())P=f(S,w,T,P.value,x),P!==null&&(t&&P.alternate!==null&&S.delete(P.key===null?T:P.key),v=i(P,v,T),C===null?_=P:C.sibling=P,C=P);return t&&S.forEach(function(j){return e(w,j)}),mn&&Fd(w,T),_}function y(w,v,b,x){if(typeof b=="object"&&b!==null&&b.type===Lp&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Jv:e:{for(var _=b.key,C=v;C!==null;){if(C.key===_){if(_=b.type,_===Lp){if(C.tag===7){n(w,C.sibling),v=s(C,b.props.children),v.return=w,w=v;break e}}else if(C.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ql&&ED(_)===C.type){n(w,C.sibling),v=s(C,b.props),v.ref=Dy(w,C,b),v.return=w,w=v;break e}n(w,C);break}else e(w,C);C=C.sibling}b.type===Lp?(v=Jh(b.props.children,w.mode,x,b.key),v.return=w,w=v):(x=SE(b.type,b.key,b.props,null,w.mode,x),x.ref=Dy(w,v,b),x.return=w,w=x)}return o(w);case Bp:e:{for(C=b.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(w,v.sibling),v=s(v,b.children||[]),v.return=w,w=v;break e}else{n(w,v);break}else e(w,v);v=v.sibling}v=XA(b,w.mode,x),v.return=w,w=v}return o(w);case ql:return C=b._init,y(w,v,C(b._payload),x)}if(p0(b))return p(w,v,b,x);if(Ny(b))return g(w,v,b,x);a1(w,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(w,v.sibling),v=s(v,b),v.return=w,w=v):(n(w,v),v=ZA(b,w.mode,x),v.return=w,w=v),o(w)):n(w,v)}return y}var Am=ZL(!0),XL=ZL(!1),m_=Cd(null),y_=null,Gp=null,Uk=null;function Bk(){Uk=Gp=y_=null}function Lk(t){var e=m_.current;fn(m_),t._currentValue=e}function GI(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function cg(t,e){y_=t,Uk=Gp=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ks=!0),t.firstContext=null)}function io(t){var e=t._currentValue;if(Uk!==t)if(t={context:t,memoizedValue:e,next:null},Gp===null){if(y_===null)throw Error(me(308));Gp=t,y_.dependencies={lanes:0,firstContext:t}}else Gp=Gp.next=t;return e}var ih=null;function Mk(t){ih===null?ih=[t]:ih.push(t)}function eM(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Mk(e)):(n.next=s.next,s.next=n),e.interleaved=n,Zc(t,r)}function Zc(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Gl=!1;function jk(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tM(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zc(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gu(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ct&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Zc(t,n)}return s=r.interleaved,s===null?(e.next=e,Mk(r)):(e.next=s.next,s.next=e),r.interleaved=e,Zc(t,n)}function vE(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ak(t,n)}}function _D(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function w_(t,e,n,r){var s=t.updateQueue;Gl=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Cn({},d,h);break e;case 2:Gl=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);cf|=o,t.lanes=o,t.memoizedState=d}}function xD(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(me(191,s));s.call(r)}}}var hv={},Ma=Cd(hv),Sw=Cd(hv),Iw=Cd(hv);function oh(t){if(t===hv)throw Error(me(174));return t}function Fk(t,e){switch(on(Iw,e),on(Sw,t),on(Ma,hv),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:SI(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=SI(e,t)}fn(Ma),on(Ma,e)}function Sm(){fn(Ma),fn(Sw),fn(Iw)}function nM(t){oh(Iw.current);var e=oh(Ma.current),n=SI(e,t.type);e!==n&&(on(Sw,t),on(Ma,n))}function zk(t){Sw.current===t&&(fn(Ma),fn(Sw))}var vn=Cd(0);function b_(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var GA=[];function Hk(){for(var t=0;t<GA.length;t++)GA[t]._workInProgressVersionPrimary=null;GA.length=0}var EE=al.ReactCurrentDispatcher,VA=al.ReactCurrentBatchConfig,af=0,xn=null,Qn=null,or=null,v_=!1,j0=!1,Tw=0,VQ=0;function Br(){throw Error(me(321))}function Wk(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Zo(t[n],e[n]))return!1;return!0}function qk(t,e,n,r,s,i){if(af=i,xn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,EE.current=t===null||t.memoizedState===null?YQ:ZQ,t=n(r,s),j0){i=0;do{if(j0=!1,Tw=0,25<=i)throw Error(me(301));i+=1,or=Qn=null,e.updateQueue=null,EE.current=XQ,t=n(r,s)}while(j0)}if(EE.current=E_,e=Qn!==null&&Qn.next!==null,af=0,or=Qn=xn=null,v_=!1,e)throw Error(me(300));return t}function Gk(){var t=Tw!==0;return Tw=0,t}function pa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return or===null?xn.memoizedState=or=t:or=or.next=t,or}function oo(){if(Qn===null){var t=xn.alternate;t=t!==null?t.memoizedState:null}else t=Qn.next;var e=or===null?xn.memoizedState:or.next;if(e!==null)or=e,Qn=t;else{if(t===null)throw Error(me(310));Qn=t,t={memoizedState:Qn.memoizedState,baseState:Qn.baseState,baseQueue:Qn.baseQueue,queue:Qn.queue,next:null},or===null?xn.memoizedState=or=t:or=or.next=t}return or}function Nw(t,e){return typeof e=="function"?e(t):e}function KA(t){var e=oo(),n=e.queue;if(n===null)throw Error(me(311));n.lastRenderedReducer=t;var r=Qn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((af&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,xn.lanes|=u,cf|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,Zo(r,e.memoizedState)||(Ks=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,xn.lanes|=i,cf|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function QA(t){var e=oo(),n=e.queue;if(n===null)throw Error(me(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Zo(i,e.memoizedState)||(Ks=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function rM(){}function sM(t,e){var n=xn,r=oo(),s=e(),i=!Zo(r.memoizedState,s);if(i&&(r.memoizedState=s,Ks=!0),r=r.queue,Vk(aM.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||or!==null&&or.memoizedState.tag&1){if(n.flags|=2048,Pw(9,oM.bind(null,n,r,s,e),void 0,null),hr===null)throw Error(me(349));af&30||iM(n,e,s)}return s}function iM(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=xn.updateQueue,e===null?(e={lastEffect:null,stores:null},xn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function oM(t,e,n,r){e.value=n,e.getSnapshot=r,cM(e)&&lM(t)}function aM(t,e,n){return n(function(){cM(e)&&lM(t)})}function cM(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Zo(t,n)}catch{return!0}}function lM(t){var e=Zc(t,1);e!==null&&Ko(e,t,1,-1)}function CD(t){var e=pa();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nw,lastRenderedState:t},e.queue=t,t=t.dispatch=JQ.bind(null,xn,t),[e.memoizedState,t]}function Pw(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=xn.updateQueue,e===null?(e={lastEffect:null,stores:null},xn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function uM(){return oo().memoizedState}function _E(t,e,n,r){var s=pa();xn.flags|=t,s.memoizedState=Pw(1|e,n,void 0,r===void 0?null:r)}function Wx(t,e,n,r){var s=oo();r=r===void 0?null:r;var i=void 0;if(Qn!==null){var o=Qn.memoizedState;if(i=o.destroy,r!==null&&Wk(r,o.deps)){s.memoizedState=Pw(e,n,i,r);return}}xn.flags|=t,s.memoizedState=Pw(1|e,n,i,r)}function AD(t,e){return _E(8390656,8,t,e)}function Vk(t,e){return Wx(2048,8,t,e)}function dM(t,e){return Wx(4,2,t,e)}function hM(t,e){return Wx(4,4,t,e)}function fM(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function pM(t,e,n){return n=n!=null?n.concat([t]):null,Wx(4,4,fM.bind(null,e,t),n)}function Kk(){}function gM(t,e){var n=oo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wk(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function mM(t,e){var n=oo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wk(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function yM(t,e,n){return af&21?(Zo(n,e)||(n=_L(),xn.lanes|=n,cf|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ks=!0),t.memoizedState=n)}function KQ(t,e){var n=Wt;Wt=n!==0&&4>n?n:4,t(!0);var r=VA.transition;VA.transition={};try{t(!1),e()}finally{Wt=n,VA.transition=r}}function wM(){return oo().memoizedState}function QQ(t,e,n){var r=Ku(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},bM(t))vM(e,n);else if(n=eM(t,e,n,r),n!==null){var s=gs();Ko(n,t,r,s),EM(n,e,r)}}function JQ(t,e,n){var r=Ku(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(bM(t))vM(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Zo(a,o)){var c=e.interleaved;c===null?(s.next=s,Mk(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=eM(t,e,s,r),n!==null&&(s=gs(),Ko(n,t,r,s),EM(n,e,r))}}function bM(t){var e=t.alternate;return t===xn||e!==null&&e===xn}function vM(t,e){j0=v_=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function EM(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ak(t,n)}}var E_={readContext:io,useCallback:Br,useContext:Br,useEffect:Br,useImperativeHandle:Br,useInsertionEffect:Br,useLayoutEffect:Br,useMemo:Br,useReducer:Br,useRef:Br,useState:Br,useDebugValue:Br,useDeferredValue:Br,useTransition:Br,useMutableSource:Br,useSyncExternalStore:Br,useId:Br,unstable_isNewReconciler:!1},YQ={readContext:io,useCallback:function(t,e){return pa().memoizedState=[t,e===void 0?null:e],t},useContext:io,useEffect:AD,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_E(4194308,4,fM.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _E(4194308,4,t,e)},useInsertionEffect:function(t,e){return _E(4,2,t,e)},useMemo:function(t,e){var n=pa();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=pa();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=QQ.bind(null,xn,t),[r.memoizedState,t]},useRef:function(t){var e=pa();return t={current:t},e.memoizedState=t},useState:CD,useDebugValue:Kk,useDeferredValue:function(t){return pa().memoizedState=t},useTransition:function(){var t=CD(!1),e=t[0];return t=KQ.bind(null,t[1]),pa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=xn,s=pa();if(mn){if(n===void 0)throw Error(me(407));n=n()}else{if(n=e(),hr===null)throw Error(me(349));af&30||iM(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,AD(aM.bind(null,r,i,t),[t]),r.flags|=2048,Pw(9,oM.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=pa(),e=hr.identifierPrefix;if(mn){var n=Mc,r=Lc;n=(r&~(1<<32-Vo(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Tw++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=VQ++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ZQ={readContext:io,useCallback:gM,useContext:io,useEffect:Vk,useImperativeHandle:pM,useInsertionEffect:dM,useLayoutEffect:hM,useMemo:mM,useReducer:KA,useRef:uM,useState:function(){return KA(Nw)},useDebugValue:Kk,useDeferredValue:function(t){var e=oo();return yM(e,Qn.memoizedState,t)},useTransition:function(){var t=KA(Nw)[0],e=oo().memoizedState;return[t,e]},useMutableSource:rM,useSyncExternalStore:sM,useId:wM,unstable_isNewReconciler:!1},XQ={readContext:io,useCallback:gM,useContext:io,useEffect:Vk,useImperativeHandle:pM,useInsertionEffect:dM,useLayoutEffect:hM,useMemo:mM,useReducer:QA,useRef:uM,useState:function(){return QA(Nw)},useDebugValue:Kk,useDeferredValue:function(t){var e=oo();return Qn===null?e.memoizedState=t:yM(e,Qn.memoizedState,t)},useTransition:function(){var t=QA(Nw)[0],e=oo().memoizedState;return[t,e]},useMutableSource:rM,useSyncExternalStore:sM,useId:wM,unstable_isNewReconciler:!1};function So(t,e){if(t&&t.defaultProps){e=Cn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function VI(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Cn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var qx={isMounted:function(t){return(t=t._reactInternals)?Df(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=gs(),s=Ku(t),i=zc(r,s);i.payload=e,n!=null&&(i.callback=n),e=Gu(t,i,s),e!==null&&(Ko(e,t,s,r),vE(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=gs(),s=Ku(t),i=zc(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Gu(t,i,s),e!==null&&(Ko(e,t,s,r),vE(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=gs(),r=Ku(t),s=zc(n,r);s.tag=2,e!=null&&(s.callback=e),e=Gu(t,s,r),e!==null&&(Ko(e,t,r,n),vE(e,t,r))}};function SD(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!_w(n,r)||!_w(s,i):!0}function _M(t,e,n){var r=!1,s=cd,i=e.contextType;return typeof i=="object"&&i!==null?i=io(i):(s=Ys(e)?sf:Xr.current,r=e.contextTypes,i=(r=r!=null)?xm(t,s):cd),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qx,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ID(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&qx.enqueueReplaceState(e,e.state,null)}function KI(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},jk(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=io(i):(i=Ys(e)?sf:Xr.current,s.context=xm(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(VI(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&qx.enqueueReplaceState(s,s.state,null),w_(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Im(t,e){try{var n="",r=e;do n+=IK(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function JA(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function QI(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var eJ=typeof WeakMap=="function"?WeakMap:Map;function xM(t,e,n){n=zc(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){x_||(x_=!0,iT=r),QI(t,e)},n}function CM(t,e,n){n=zc(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){QI(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){QI(t,e),typeof r!="function"&&(Vu===null?Vu=new Set([this]):Vu.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function TD(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new eJ;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=pJ.bind(null,t,e,n),e.then(t,t))}function ND(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function PD(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=zc(-1,1),e.tag=2,Gu(n,e,1))),n.lanes|=1),t)}var tJ=al.ReactCurrentOwner,Ks=!1;function as(t,e,n,r){e.child=t===null?XL(e,null,n,r):Am(e,t.child,n,r)}function kD(t,e,n,r,s){n=n.render;var i=e.ref;return cg(e,s),r=qk(t,e,n,r,i,s),n=Gk(),t!==null&&!Ks?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xc(t,e,s)):(mn&&n&&Rk(e),e.flags|=1,as(t,e,r,s),e.child)}function OD(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!nO(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,AM(t,e,i,r,s)):(t=SE(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:_w,n(o,r)&&t.ref===e.ref)return Xc(t,e,s)}return e.flags|=1,t=Qu(i,r),t.ref=e.ref,t.return=e,e.child=t}function AM(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(_w(i,r)&&t.ref===e.ref)if(Ks=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ks=!0);else return e.lanes=t.lanes,Xc(t,e,s)}return JI(t,e,n,r,s)}function SM(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},on(Kp,yi),yi|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,on(Kp,yi),yi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,on(Kp,yi),yi|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,on(Kp,yi),yi|=r;return as(t,e,s,n),e.child}function IM(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function JI(t,e,n,r,s){var i=Ys(n)?sf:Xr.current;return i=xm(e,i),cg(e,s),n=qk(t,e,n,r,i,s),r=Gk(),t!==null&&!Ks?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xc(t,e,s)):(mn&&r&&Rk(e),e.flags|=1,as(t,e,n,s),e.child)}function RD(t,e,n,r,s){if(Ys(n)){var i=!0;f_(e)}else i=!1;if(cg(e,s),e.stateNode===null)xE(t,e),_M(e,n,r),KI(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=io(l):(l=Ys(n)?sf:Xr.current,l=xm(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&ID(e,o,r,l),Gl=!1;var h=e.memoizedState;o.state=h,w_(e,r,o,s),c=e.memoizedState,a!==r||h!==c||Js.current||Gl?(typeof u=="function"&&(VI(e,n,u,r),c=e.memoizedState),(a=Gl||SD(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,tM(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:So(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=io(c):(c=Ys(n)?sf:Xr.current,c=xm(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&ID(e,o,r,c),Gl=!1,h=e.memoizedState,o.state=h,w_(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||Js.current||Gl?(typeof f=="function"&&(VI(e,n,f,r),p=e.memoizedState),(l=Gl||SD(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return YI(t,e,n,r,i,s)}function YI(t,e,n,r,s,i){IM(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&wD(e,n,!1),Xc(t,e,i);r=e.stateNode,tJ.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Am(e,t.child,null,i),e.child=Am(e,null,a,i)):as(t,e,a,i),e.memoizedState=r.state,s&&wD(e,n,!0),e.child}function TM(t){var e=t.stateNode;e.pendingContext?yD(t,e.pendingContext,e.pendingContext!==e.context):e.context&&yD(t,e.context,!1),Fk(t,e.containerInfo)}function DD(t,e,n,r,s){return Cm(),$k(s),e.flags|=256,as(t,e,n,r),e.child}var ZI={dehydrated:null,treeContext:null,retryLane:0};function XI(t){return{baseLanes:t,cachePool:null,transitions:null}}function NM(t,e,n){var r=e.pendingProps,s=vn.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),on(vn,s&1),t===null)return qI(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Kx(o,r,0,null),t=Jh(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=XI(n),e.memoizedState=ZI,t):Qk(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return nJ(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Qu(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Qu(a,i):(i=Jh(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?XI(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=ZI,r}return i=t.child,t=i.sibling,r=Qu(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Qk(t,e){return e=Kx({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function c1(t,e,n,r){return r!==null&&$k(r),Am(e,t.child,null,n),t=Qk(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function nJ(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=JA(Error(me(422))),c1(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Kx({mode:"visible",children:r.children},s,0,null),i=Jh(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Am(e,t.child,null,o),e.child.memoizedState=XI(o),e.memoizedState=ZI,i);if(!(e.mode&1))return c1(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(me(419)),r=JA(i,r,void 0),c1(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ks||a){if(r=hr,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Zc(t,s),Ko(r,t,s,-1))}return tO(),r=JA(Error(me(421))),c1(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=gJ.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ei=qu(s.nextSibling),Ai=e,mn=!0,Lo=null,t!==null&&(eo[to++]=Lc,eo[to++]=Mc,eo[to++]=of,Lc=t.id,Mc=t.overflow,of=e),e=Qk(e,r.children),e.flags|=4096,e)}function $D(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),GI(t.return,e,n)}function YA(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function PM(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(as(t,e,r.children,n),r=vn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$D(t,n,e);else if(t.tag===19)$D(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(on(vn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&b_(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),YA(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&b_(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}YA(e,!0,n,null,i);break;case"together":YA(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xE(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xc(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),cf|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(me(153));if(e.child!==null){for(t=e.child,n=Qu(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Qu(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function rJ(t,e,n){switch(e.tag){case 3:TM(e),Cm();break;case 5:nM(e);break;case 1:Ys(e.type)&&f_(e);break;case 4:Fk(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;on(m_,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(on(vn,vn.current&1),e.flags|=128,null):n&e.child.childLanes?NM(t,e,n):(on(vn,vn.current&1),t=Xc(t,e,n),t!==null?t.sibling:null);on(vn,vn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return PM(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),on(vn,vn.current),r)break;return null;case 22:case 23:return e.lanes=0,SM(t,e,n)}return Xc(t,e,n)}var kM,eT,OM,RM;kM=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};eT=function(){};OM=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,oh(Ma.current);var i=null;switch(n){case"input":s=_I(t,s),r=_I(t,r),i=[];break;case"select":s=Cn({},s,{value:void 0}),r=Cn({},r,{value:void 0}),i=[];break;case"textarea":s=AI(t,s),r=AI(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=d_)}II(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(gw.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(gw.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&un("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};RM=function(t,e,n,r){n!==r&&(e.flags|=4)};function $y(t,e){if(!mn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Lr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function sJ(t,e,n){var r=e.pendingProps;switch(Dk(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lr(e),null;case 1:return Ys(e.type)&&h_(),Lr(e),null;case 3:return r=e.stateNode,Sm(),fn(Js),fn(Xr),Hk(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(o1(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Lo!==null&&(cT(Lo),Lo=null))),eT(t,e),Lr(e),null;case 5:zk(e);var s=oh(Iw.current);if(n=e.type,t!==null&&e.stateNode!=null)OM(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(me(166));return Lr(e),null}if(t=oh(Ma.current),o1(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Oa]=e,r[Aw]=i,t=(e.mode&1)!==0,n){case"dialog":un("cancel",r),un("close",r);break;case"iframe":case"object":case"embed":un("load",r);break;case"video":case"audio":for(s=0;s<m0.length;s++)un(m0[s],r);break;case"source":un("error",r);break;case"img":case"image":case"link":un("error",r),un("load",r);break;case"details":un("toggle",r);break;case"input":W3(r,i),un("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},un("invalid",r);break;case"textarea":G3(r,i),un("invalid",r)}II(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&i1(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&i1(r.textContent,a,t),s=["children",""+a]):gw.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&un("scroll",r)}switch(n){case"input":Yv(r),q3(r,i,!0);break;case"textarea":Yv(r),V3(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=d_)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=aL(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Oa]=e,t[Aw]=r,kM(t,e,!1,!1),e.stateNode=t;e:{switch(o=TI(n,r),n){case"dialog":un("cancel",t),un("close",t),s=r;break;case"iframe":case"object":case"embed":un("load",t),s=r;break;case"video":case"audio":for(s=0;s<m0.length;s++)un(m0[s],t);s=r;break;case"source":un("error",t),s=r;break;case"img":case"image":case"link":un("error",t),un("load",t),s=r;break;case"details":un("toggle",t),s=r;break;case"input":W3(t,r),s=_I(t,r),un("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Cn({},r,{value:void 0}),un("invalid",t);break;case"textarea":G3(t,r),s=AI(t,r),un("invalid",t);break;default:s=r}II(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?uL(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&cL(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&mw(t,c):typeof c=="number"&&mw(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(gw.hasOwnProperty(i)?c!=null&&i==="onScroll"&&un("scroll",t):c!=null&&bk(t,i,c,o))}switch(n){case"input":Yv(t),q3(t,r,!1);break;case"textarea":Yv(t),V3(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ad(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?sg(t,!!r.multiple,i,!1):r.defaultValue!=null&&sg(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=d_)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Lr(e),null;case 6:if(t&&e.stateNode!=null)RM(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(me(166));if(n=oh(Iw.current),oh(Ma.current),o1(e)){if(r=e.stateNode,n=e.memoizedProps,r[Oa]=e,(i=r.nodeValue!==n)&&(t=Ai,t!==null))switch(t.tag){case 3:i1(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&i1(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Oa]=e,e.stateNode=r}return Lr(e),null;case 13:if(fn(vn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(mn&&Ei!==null&&e.mode&1&&!(e.flags&128))YL(),Cm(),e.flags|=98560,i=!1;else if(i=o1(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(me(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(me(317));i[Oa]=e}else Cm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Lr(e),i=!1}else Lo!==null&&(cT(Lo),Lo=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||vn.current&1?Zn===0&&(Zn=3):tO())),e.updateQueue!==null&&(e.flags|=4),Lr(e),null);case 4:return Sm(),eT(t,e),t===null&&xw(e.stateNode.containerInfo),Lr(e),null;case 10:return Lk(e.type._context),Lr(e),null;case 17:return Ys(e.type)&&h_(),Lr(e),null;case 19:if(fn(vn),i=e.memoizedState,i===null)return Lr(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)$y(i,!1);else{if(Zn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=b_(t),o!==null){for(e.flags|=128,$y(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return on(vn,vn.current&1|2),e.child}t=t.sibling}i.tail!==null&&$n()>Tm&&(e.flags|=128,r=!0,$y(i,!1),e.lanes=4194304)}else{if(!r)if(t=b_(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$y(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!mn)return Lr(e),null}else 2*$n()-i.renderingStartTime>Tm&&n!==1073741824&&(e.flags|=128,r=!0,$y(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=$n(),e.sibling=null,n=vn.current,on(vn,r?n&1|2:n&1),e):(Lr(e),null);case 22:case 23:return eO(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?yi&1073741824&&(Lr(e),e.subtreeFlags&6&&(e.flags|=8192)):Lr(e),null;case 24:return null;case 25:return null}throw Error(me(156,e.tag))}function iJ(t,e){switch(Dk(e),e.tag){case 1:return Ys(e.type)&&h_(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Sm(),fn(Js),fn(Xr),Hk(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return zk(e),null;case 13:if(fn(vn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(me(340));Cm()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return fn(vn),null;case 4:return Sm(),null;case 10:return Lk(e.type._context),null;case 22:case 23:return eO(),null;case 24:return null;default:return null}}var l1=!1,Yr=!1,oJ=typeof WeakSet=="function"?WeakSet:Set,Le=null;function Vp(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Nn(t,e,r)}else n.current=null}function tT(t,e,n){try{n()}catch(r){Nn(t,e,r)}}var UD=!1;function aJ(t,e){if(LI=c_,t=LL(),Ok(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(MI={focusedElem:t,selectionRange:n},c_=!1,Le=e;Le!==null;)if(e=Le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Le=t;else for(;Le!==null;){e=Le;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,y=p.memoizedState,w=e.stateNode,v=w.getSnapshotBeforeUpdate(e.elementType===e.type?g:So(e.type,g),y);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(me(163))}}catch(x){Nn(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,Le=t;break}Le=e.return}return p=UD,UD=!1,p}function F0(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&tT(e,n,i)}s=s.next}while(s!==r)}}function Gx(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function nT(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function DM(t){var e=t.alternate;e!==null&&(t.alternate=null,DM(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Oa],delete e[Aw],delete e[zI],delete e[HQ],delete e[WQ])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $M(t){return t.tag===5||t.tag===3||t.tag===4}function BD(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$M(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rT(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=d_));else if(r!==4&&(t=t.child,t!==null))for(rT(t,e,n),t=t.sibling;t!==null;)rT(t,e,n),t=t.sibling}function sT(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(sT(t,e,n),t=t.sibling;t!==null;)sT(t,e,n),t=t.sibling}var Cr=null,Uo=!1;function yl(t,e,n){for(n=n.child;n!==null;)UM(t,e,n),n=n.sibling}function UM(t,e,n){if(La&&typeof La.onCommitFiberUnmount=="function")try{La.onCommitFiberUnmount(Lx,n)}catch{}switch(n.tag){case 5:Yr||Vp(n,e);case 6:var r=Cr,s=Uo;Cr=null,yl(t,e,n),Cr=r,Uo=s,Cr!==null&&(Uo?(t=Cr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Cr.removeChild(n.stateNode));break;case 18:Cr!==null&&(Uo?(t=Cr,n=n.stateNode,t.nodeType===8?WA(t.parentNode,n):t.nodeType===1&&WA(t,n),vw(t)):WA(Cr,n.stateNode));break;case 4:r=Cr,s=Uo,Cr=n.stateNode.containerInfo,Uo=!0,yl(t,e,n),Cr=r,Uo=s;break;case 0:case 11:case 14:case 15:if(!Yr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&tT(n,e,o),s=s.next}while(s!==r)}yl(t,e,n);break;case 1:if(!Yr&&(Vp(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Nn(n,e,a)}yl(t,e,n);break;case 21:yl(t,e,n);break;case 22:n.mode&1?(Yr=(r=Yr)||n.memoizedState!==null,yl(t,e,n),Yr=r):yl(t,e,n);break;default:yl(t,e,n)}}function LD(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new oJ),e.forEach(function(r){var s=mJ.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function po(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Cr=a.stateNode,Uo=!1;break e;case 3:Cr=a.stateNode.containerInfo,Uo=!0;break e;case 4:Cr=a.stateNode.containerInfo,Uo=!0;break e}a=a.return}if(Cr===null)throw Error(me(160));UM(i,o,s),Cr=null,Uo=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){Nn(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)BM(e,t),e=e.sibling}function BM(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(po(e,t),oa(t),r&4){try{F0(3,t,t.return),Gx(3,t)}catch(g){Nn(t,t.return,g)}try{F0(5,t,t.return)}catch(g){Nn(t,t.return,g)}}break;case 1:po(e,t),oa(t),r&512&&n!==null&&Vp(n,n.return);break;case 5:if(po(e,t),oa(t),r&512&&n!==null&&Vp(n,n.return),t.flags&32){var s=t.stateNode;try{mw(s,"")}catch(g){Nn(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&iL(s,i),TI(a,o);var l=TI(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?uL(s,d):u==="dangerouslySetInnerHTML"?cL(s,d):u==="children"?mw(s,d):bk(s,u,d,l)}switch(a){case"input":xI(s,i);break;case"textarea":oL(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?sg(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?sg(s,!!i.multiple,i.defaultValue,!0):sg(s,!!i.multiple,i.multiple?[]:"",!1))}s[Aw]=i}catch(g){Nn(t,t.return,g)}}break;case 6:if(po(e,t),oa(t),r&4){if(t.stateNode===null)throw Error(me(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Nn(t,t.return,g)}}break;case 3:if(po(e,t),oa(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vw(e.containerInfo)}catch(g){Nn(t,t.return,g)}break;case 4:po(e,t),oa(t);break;case 13:po(e,t),oa(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Zk=$n())),r&4&&LD(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Yr=(l=Yr)||u,po(e,t),Yr=l):po(e,t),oa(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(Le=t,u=t.child;u!==null;){for(d=Le=u;Le!==null;){switch(h=Le,f=h.child,h.tag){case 0:case 11:case 14:case 15:F0(4,h,h.return);break;case 1:Vp(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Nn(r,n,g)}}break;case 5:Vp(h,h.return);break;case 22:if(h.memoizedState!==null){jD(d);continue}}f!==null?(f.return=h,Le=f):jD(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=lL("display",o))}catch(g){Nn(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){Nn(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:po(e,t),oa(t),r&4&&LD(t);break;case 21:break;default:po(e,t),oa(t)}}function oa(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($M(n)){var r=n;break e}n=n.return}throw Error(me(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(mw(s,""),r.flags&=-33);var i=BD(t);sT(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=BD(t);rT(t,a,o);break;default:throw Error(me(161))}}catch(c){Nn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function cJ(t,e,n){Le=t,LM(t)}function LM(t,e,n){for(var r=(t.mode&1)!==0;Le!==null;){var s=Le,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||l1;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Yr;a=l1;var l=Yr;if(l1=o,(Yr=c)&&!l)for(Le=s;Le!==null;)o=Le,c=o.child,o.tag===22&&o.memoizedState!==null?FD(s):c!==null?(c.return=o,Le=c):FD(s);for(;i!==null;)Le=i,LM(i),i=i.sibling;Le=s,l1=a,Yr=l}MD(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Le=i):MD(t)}}function MD(t){for(;Le!==null;){var e=Le;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yr||Gx(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Yr)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:So(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&xD(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}xD(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&vw(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(me(163))}Yr||e.flags&512&&nT(e)}catch(h){Nn(e,e.return,h)}}if(e===t){Le=null;break}if(n=e.sibling,n!==null){n.return=e.return,Le=n;break}Le=e.return}}function jD(t){for(;Le!==null;){var e=Le;if(e===t){Le=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Le=n;break}Le=e.return}}function FD(t){for(;Le!==null;){var e=Le;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Gx(4,e)}catch(c){Nn(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Nn(e,s,c)}}var i=e.return;try{nT(e)}catch(c){Nn(e,i,c)}break;case 5:var o=e.return;try{nT(e)}catch(c){Nn(e,o,c)}}}catch(c){Nn(e,e.return,c)}if(e===t){Le=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Le=a;break}Le=e.return}}var lJ=Math.ceil,__=al.ReactCurrentDispatcher,Jk=al.ReactCurrentOwner,so=al.ReactCurrentBatchConfig,Ct=0,hr=null,Hn=null,Tr=0,yi=0,Kp=Cd(0),Zn=0,kw=null,cf=0,Vx=0,Yk=0,z0=null,qs=null,Zk=0,Tm=1/0,pc=null,x_=!1,iT=null,Vu=null,u1=!1,$u=null,C_=0,H0=0,oT=null,CE=-1,AE=0;function gs(){return Ct&6?$n():CE!==-1?CE:CE=$n()}function Ku(t){return t.mode&1?Ct&2&&Tr!==0?Tr&-Tr:GQ.transition!==null?(AE===0&&(AE=_L()),AE):(t=Wt,t!==0||(t=window.event,t=t===void 0?16:NL(t.type)),t):1}function Ko(t,e,n,r){if(50<H0)throw H0=0,oT=null,Error(me(185));lv(t,n,r),(!(Ct&2)||t!==hr)&&(t===hr&&(!(Ct&2)&&(Vx|=n),Zn===4&&nu(t,Tr)),Zs(t,r),n===1&&Ct===0&&!(e.mode&1)&&(Tm=$n()+500,Hx&&Ad()))}function Zs(t,e){var n=t.callbackNode;GK(t,e);var r=a_(t,t===hr?Tr:0);if(r===0)n!==null&&J3(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&J3(n),e===1)t.tag===0?qQ(zD.bind(null,t)):KL(zD.bind(null,t)),FQ(function(){!(Ct&6)&&Ad()}),n=null;else{switch(xL(r)){case 1:n=Ck;break;case 4:n=vL;break;case 16:n=o_;break;case 536870912:n=EL;break;default:n=o_}n=GM(n,MM.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function MM(t,e){if(CE=-1,AE=0,Ct&6)throw Error(me(327));var n=t.callbackNode;if(lg()&&t.callbackNode!==n)return null;var r=a_(t,t===hr?Tr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=A_(t,r);else{e=r;var s=Ct;Ct|=2;var i=FM();(hr!==t||Tr!==e)&&(pc=null,Tm=$n()+500,Qh(t,e));do try{hJ();break}catch(a){jM(t,a)}while(!0);Bk(),__.current=i,Ct=s,Hn!==null?e=0:(hr=null,Tr=0,e=Zn)}if(e!==0){if(e===2&&(s=RI(t),s!==0&&(r=s,e=aT(t,s))),e===1)throw n=kw,Qh(t,0),nu(t,r),Zs(t,$n()),n;if(e===6)nu(t,r);else{if(s=t.current.alternate,!(r&30)&&!uJ(s)&&(e=A_(t,r),e===2&&(i=RI(t),i!==0&&(r=i,e=aT(t,i))),e===1))throw n=kw,Qh(t,0),nu(t,r),Zs(t,$n()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(me(345));case 2:zd(t,qs,pc);break;case 3:if(nu(t,r),(r&130023424)===r&&(e=Zk+500-$n(),10<e)){if(a_(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){gs(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=FI(zd.bind(null,t,qs,pc),e);break}zd(t,qs,pc);break;case 4:if(nu(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Vo(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=$n()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lJ(r/1960))-r,10<r){t.timeoutHandle=FI(zd.bind(null,t,qs,pc),r);break}zd(t,qs,pc);break;case 5:zd(t,qs,pc);break;default:throw Error(me(329))}}}return Zs(t,$n()),t.callbackNode===n?MM.bind(null,t):null}function aT(t,e){var n=z0;return t.current.memoizedState.isDehydrated&&(Qh(t,e).flags|=256),t=A_(t,e),t!==2&&(e=qs,qs=n,e!==null&&cT(e)),t}function cT(t){qs===null?qs=t:qs.push.apply(qs,t)}function uJ(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Zo(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function nu(t,e){for(e&=~Yk,e&=~Vx,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Vo(e),r=1<<n;t[n]=-1,e&=~r}}function zD(t){if(Ct&6)throw Error(me(327));lg();var e=a_(t,0);if(!(e&1))return Zs(t,$n()),null;var n=A_(t,e);if(t.tag!==0&&n===2){var r=RI(t);r!==0&&(e=r,n=aT(t,r))}if(n===1)throw n=kw,Qh(t,0),nu(t,e),Zs(t,$n()),n;if(n===6)throw Error(me(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zd(t,qs,pc),Zs(t,$n()),null}function Xk(t,e){var n=Ct;Ct|=1;try{return t(e)}finally{Ct=n,Ct===0&&(Tm=$n()+500,Hx&&Ad())}}function lf(t){$u!==null&&$u.tag===0&&!(Ct&6)&&lg();var e=Ct;Ct|=1;var n=so.transition,r=Wt;try{if(so.transition=null,Wt=1,t)return t()}finally{Wt=r,so.transition=n,Ct=e,!(Ct&6)&&Ad()}}function eO(){yi=Kp.current,fn(Kp)}function Qh(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,jQ(n)),Hn!==null)for(n=Hn.return;n!==null;){var r=n;switch(Dk(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&h_();break;case 3:Sm(),fn(Js),fn(Xr),Hk();break;case 5:zk(r);break;case 4:Sm();break;case 13:fn(vn);break;case 19:fn(vn);break;case 10:Lk(r.type._context);break;case 22:case 23:eO()}n=n.return}if(hr=t,Hn=t=Qu(t.current,null),Tr=yi=e,Zn=0,kw=null,Yk=Vx=cf=0,qs=z0=null,ih!==null){for(e=0;e<ih.length;e++)if(n=ih[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ih=null}return t}function jM(t,e){do{var n=Hn;try{if(Bk(),EE.current=E_,v_){for(var r=xn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}v_=!1}if(af=0,or=Qn=xn=null,j0=!1,Tw=0,Jk.current=null,n===null||n.return===null){Zn=1,kw=e,Hn=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Tr,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=ND(o);if(f!==null){f.flags&=-257,PD(f,o,a,i,e),f.mode&1&&TD(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){TD(i,l,e),tO();break e}c=Error(me(426))}}else if(mn&&a.mode&1){var y=ND(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),PD(y,o,a,i,e),$k(Im(c,a));break e}}i=c=Im(c,a),Zn!==4&&(Zn=2),z0===null?z0=[i]:z0.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=xM(i,c,e);_D(i,w);break e;case 1:a=c;var v=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Vu===null||!Vu.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=CM(i,a,e);_D(i,x);break e}}i=i.return}while(i!==null)}HM(n)}catch(_){e=_,Hn===n&&n!==null&&(Hn=n=n.return);continue}break}while(!0)}function FM(){var t=__.current;return __.current=E_,t===null?E_:t}function tO(){(Zn===0||Zn===3||Zn===2)&&(Zn=4),hr===null||!(cf&268435455)&&!(Vx&268435455)||nu(hr,Tr)}function A_(t,e){var n=Ct;Ct|=2;var r=FM();(hr!==t||Tr!==e)&&(pc=null,Qh(t,e));do try{dJ();break}catch(s){jM(t,s)}while(!0);if(Bk(),Ct=n,__.current=r,Hn!==null)throw Error(me(261));return hr=null,Tr=0,Zn}function dJ(){for(;Hn!==null;)zM(Hn)}function hJ(){for(;Hn!==null&&!BK();)zM(Hn)}function zM(t){var e=qM(t.alternate,t,yi);t.memoizedProps=t.pendingProps,e===null?HM(t):Hn=e,Jk.current=null}function HM(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=iJ(n,e),n!==null){n.flags&=32767,Hn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Zn=6,Hn=null;return}}else if(n=sJ(n,e,yi),n!==null){Hn=n;return}if(e=e.sibling,e!==null){Hn=e;return}Hn=e=t}while(e!==null);Zn===0&&(Zn=5)}function zd(t,e,n){var r=Wt,s=so.transition;try{so.transition=null,Wt=1,fJ(t,e,n,r)}finally{so.transition=s,Wt=r}return null}function fJ(t,e,n,r){do lg();while($u!==null);if(Ct&6)throw Error(me(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(me(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(VK(t,i),t===hr&&(Hn=hr=null,Tr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||u1||(u1=!0,GM(o_,function(){return lg(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=so.transition,so.transition=null;var o=Wt;Wt=1;var a=Ct;Ct|=4,Jk.current=null,aJ(t,n),BM(n,t),RQ(MI),c_=!!LI,MI=LI=null,t.current=n,cJ(n),LK(),Ct=a,Wt=o,so.transition=i}else t.current=n;if(u1&&(u1=!1,$u=t,C_=s),i=t.pendingLanes,i===0&&(Vu=null),FK(n.stateNode),Zs(t,$n()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(x_)throw x_=!1,t=iT,iT=null,t;return C_&1&&t.tag!==0&&lg(),i=t.pendingLanes,i&1?t===oT?H0++:(H0=0,oT=t):H0=0,Ad(),null}function lg(){if($u!==null){var t=xL(C_),e=so.transition,n=Wt;try{if(so.transition=null,Wt=16>t?16:t,$u===null)var r=!1;else{if(t=$u,$u=null,C_=0,Ct&6)throw Error(me(331));var s=Ct;for(Ct|=4,Le=t.current;Le!==null;){var i=Le,o=i.child;if(Le.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(Le=l;Le!==null;){var u=Le;switch(u.tag){case 0:case 11:case 15:F0(8,u,i)}var d=u.child;if(d!==null)d.return=u,Le=d;else for(;Le!==null;){u=Le;var h=u.sibling,f=u.return;if(DM(u),u===l){Le=null;break}if(h!==null){h.return=f,Le=h;break}Le=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}Le=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Le=o;else e:for(;Le!==null;){if(i=Le,i.flags&2048)switch(i.tag){case 0:case 11:case 15:F0(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,Le=w;break e}Le=i.return}}var v=t.current;for(Le=v;Le!==null;){o=Le;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Le=b;else e:for(o=v;Le!==null;){if(a=Le,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Gx(9,a)}}catch(_){Nn(a,a.return,_)}if(a===o){Le=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,Le=x;break e}Le=a.return}}if(Ct=s,Ad(),La&&typeof La.onPostCommitFiberRoot=="function")try{La.onPostCommitFiberRoot(Lx,t)}catch{}r=!0}return r}finally{Wt=n,so.transition=e}}return!1}function HD(t,e,n){e=Im(n,e),e=xM(t,e,1),t=Gu(t,e,1),e=gs(),t!==null&&(lv(t,1,e),Zs(t,e))}function Nn(t,e,n){if(t.tag===3)HD(t,t,n);else for(;e!==null;){if(e.tag===3){HD(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vu===null||!Vu.has(r))){t=Im(n,t),t=CM(e,t,1),e=Gu(e,t,1),t=gs(),e!==null&&(lv(e,1,t),Zs(e,t));break}}e=e.return}}function pJ(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=gs(),t.pingedLanes|=t.suspendedLanes&n,hr===t&&(Tr&n)===n&&(Zn===4||Zn===3&&(Tr&130023424)===Tr&&500>$n()-Zk?Qh(t,0):Yk|=n),Zs(t,e)}function WM(t,e){e===0&&(t.mode&1?(e=e1,e1<<=1,!(e1&130023424)&&(e1=4194304)):e=1);var n=gs();t=Zc(t,e),t!==null&&(lv(t,e,n),Zs(t,n))}function gJ(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),WM(t,n)}function mJ(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(me(314))}r!==null&&r.delete(e),WM(t,n)}var qM;qM=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Js.current)Ks=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ks=!1,rJ(t,e,n);Ks=!!(t.flags&131072)}else Ks=!1,mn&&e.flags&1048576&&QL(e,g_,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xE(t,e),t=e.pendingProps;var s=xm(e,Xr.current);cg(e,n),s=qk(null,e,r,t,s,n);var i=Gk();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ys(r)?(i=!0,f_(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,jk(e),s.updater=qx,e.stateNode=s,s._reactInternals=e,KI(e,r,t,n),e=YI(null,e,r,!0,i,n)):(e.tag=0,mn&&i&&Rk(e),as(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(xE(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=wJ(r),t=So(r,t),s){case 0:e=JI(null,e,r,t,n);break e;case 1:e=RD(null,e,r,t,n);break e;case 11:e=kD(null,e,r,t,n);break e;case 14:e=OD(null,e,r,So(r.type,t),n);break e}throw Error(me(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:So(r,s),JI(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:So(r,s),RD(t,e,r,s,n);case 3:e:{if(TM(e),t===null)throw Error(me(387));r=e.pendingProps,i=e.memoizedState,s=i.element,tM(t,e),w_(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Im(Error(me(423)),e),e=DD(t,e,r,n,s);break e}else if(r!==s){s=Im(Error(me(424)),e),e=DD(t,e,r,n,s);break e}else for(Ei=qu(e.stateNode.containerInfo.firstChild),Ai=e,mn=!0,Lo=null,n=XL(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Cm(),r===s){e=Xc(t,e,n);break e}as(t,e,r,n)}e=e.child}return e;case 5:return nM(e),t===null&&qI(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,jI(r,s)?o=null:i!==null&&jI(r,i)&&(e.flags|=32),IM(t,e),as(t,e,o,n),e.child;case 6:return t===null&&qI(e),null;case 13:return NM(t,e,n);case 4:return Fk(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Am(e,null,r,n):as(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:So(r,s),kD(t,e,r,s,n);case 7:return as(t,e,e.pendingProps,n),e.child;case 8:return as(t,e,e.pendingProps.children,n),e.child;case 12:return as(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,on(m_,r._currentValue),r._currentValue=o,i!==null)if(Zo(i.value,o)){if(i.children===s.children&&!Js.current){e=Xc(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=zc(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),GI(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(me(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),GI(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}as(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,cg(e,n),s=io(s),r=r(s),e.flags|=1,as(t,e,r,n),e.child;case 14:return r=e.type,s=So(r,e.pendingProps),s=So(r.type,s),OD(t,e,r,s,n);case 15:return AM(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:So(r,s),xE(t,e),e.tag=1,Ys(r)?(t=!0,f_(e)):t=!1,cg(e,n),_M(e,r,s),KI(e,r,s,n),YI(null,e,r,!0,t,n);case 19:return PM(t,e,n);case 22:return SM(t,e,n)}throw Error(me(156,e.tag))};function GM(t,e){return bL(t,e)}function yJ(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function no(t,e,n,r){return new yJ(t,e,n,r)}function nO(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wJ(t){if(typeof t=="function")return nO(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ek)return 11;if(t===_k)return 14}return 2}function Qu(t,e){var n=t.alternate;return n===null?(n=no(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function SE(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")nO(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Lp:return Jh(n.children,s,i,e);case vk:o=8,s|=8;break;case wI:return t=no(12,n,e,s|2),t.elementType=wI,t.lanes=i,t;case bI:return t=no(13,n,e,s),t.elementType=bI,t.lanes=i,t;case vI:return t=no(19,n,e,s),t.elementType=vI,t.lanes=i,t;case nL:return Kx(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case eL:o=10;break e;case tL:o=9;break e;case Ek:o=11;break e;case _k:o=14;break e;case ql:o=16,r=null;break e}throw Error(me(130,t==null?t:typeof t,""))}return e=no(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Jh(t,e,n,r){return t=no(7,t,r,e),t.lanes=n,t}function Kx(t,e,n,r){return t=no(22,t,r,e),t.elementType=nL,t.lanes=n,t.stateNode={isHidden:!1},t}function ZA(t,e,n){return t=no(6,t,null,e),t.lanes=n,t}function XA(t,e,n){return e=no(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bJ(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=RA(0),this.expirationTimes=RA(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=RA(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function rO(t,e,n,r,s,i,o,a,c){return t=new bJ(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=no(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jk(i),t}function vJ(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bp,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function VM(t){if(!t)return cd;t=t._reactInternals;e:{if(Df(t)!==t||t.tag!==1)throw Error(me(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ys(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(me(171))}if(t.tag===1){var n=t.type;if(Ys(n))return VL(t,n,e)}return e}function KM(t,e,n,r,s,i,o,a,c){return t=rO(n,r,!0,t,s,i,o,a,c),t.context=VM(null),n=t.current,r=gs(),s=Ku(n),i=zc(r,s),i.callback=e??null,Gu(n,i,s),t.current.lanes=s,lv(t,s,r),Zs(t,r),t}function Qx(t,e,n,r){var s=e.current,i=gs(),o=Ku(s);return n=VM(n),e.context===null?e.context=n:e.pendingContext=n,e=zc(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Gu(s,e,o),t!==null&&(Ko(t,s,o,i),vE(t,s,o)),o}function S_(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function WD(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function sO(t,e){WD(t,e),(t=t.alternate)&&WD(t,e)}function EJ(){return null}var QM=typeof reportError=="function"?reportError:function(t){console.error(t)};function iO(t){this._internalRoot=t}Jx.prototype.render=iO.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(me(409));Qx(t,e,null,null)};Jx.prototype.unmount=iO.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;lf(function(){Qx(null,t,null,null)}),e[Yc]=null}};function Jx(t){this._internalRoot=t}Jx.prototype.unstable_scheduleHydration=function(t){if(t){var e=SL();t={blockedOn:null,target:t,priority:e};for(var n=0;n<tu.length&&e!==0&&e<tu[n].priority;n++);tu.splice(n,0,t),n===0&&TL(t)}};function oO(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function qD(){}function _J(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=S_(o);i.call(l)}}var o=KM(e,r,t,0,null,!1,!1,"",qD);return t._reactRootContainer=o,t[Yc]=o.current,xw(t.nodeType===8?t.parentNode:t),lf(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=S_(c);a.call(l)}}var c=rO(t,0,!1,null,null,!1,!1,"",qD);return t._reactRootContainer=c,t[Yc]=c.current,xw(t.nodeType===8?t.parentNode:t),lf(function(){Qx(e,c,n,r)}),c}function Zx(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=S_(o);a.call(c)}}Qx(e,o,t,s)}else o=_J(n,e,t,s,r);return S_(o)}CL=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=g0(e.pendingLanes);n!==0&&(Ak(e,n|1),Zs(e,$n()),!(Ct&6)&&(Tm=$n()+500,Ad()))}break;case 13:lf(function(){var r=Zc(t,1);if(r!==null){var s=gs();Ko(r,t,1,s)}}),sO(t,1)}};Sk=function(t){if(t.tag===13){var e=Zc(t,134217728);if(e!==null){var n=gs();Ko(e,t,134217728,n)}sO(t,134217728)}};AL=function(t){if(t.tag===13){var e=Ku(t),n=Zc(t,e);if(n!==null){var r=gs();Ko(n,t,e,r)}sO(t,e)}};SL=function(){return Wt};IL=function(t,e){var n=Wt;try{return Wt=t,e()}finally{Wt=n}};PI=function(t,e,n){switch(e){case"input":if(xI(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=zx(r);if(!s)throw Error(me(90));sL(r),xI(r,s)}}}break;case"textarea":oL(t,n);break;case"select":e=n.value,e!=null&&sg(t,!!n.multiple,e,!1)}};fL=Xk;pL=lf;var xJ={usingClientEntryPoint:!1,Events:[dv,zp,zx,dL,hL,Xk]},Uy={findFiberByHostInstance:sh,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},CJ={bundleType:Uy.bundleType,version:Uy.version,rendererPackageName:Uy.rendererPackageName,rendererConfig:Uy.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:al.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=yL(t),t===null?null:t.stateNode},findFiberByHostInstance:Uy.findFiberByHostInstance||EJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var d1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!d1.isDisabled&&d1.supportsFiber)try{Lx=d1.inject(CJ),La=d1}catch{}}Pi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xJ;Pi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!oO(e))throw Error(me(200));return vJ(t,e,null,n)};Pi.createRoot=function(t,e){if(!oO(t))throw Error(me(299));var n=!1,r="",s=QM;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=rO(t,1,!1,null,null,n,!1,r,s),t[Yc]=e.current,xw(t.nodeType===8?t.parentNode:t),new iO(e)};Pi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(me(188)):(t=Object.keys(t).join(","),Error(me(268,t)));return t=yL(e),t=t===null?null:t.stateNode,t};Pi.flushSync=function(t){return lf(t)};Pi.hydrate=function(t,e,n){if(!Yx(e))throw Error(me(200));return Zx(null,t,e,!0,n)};Pi.hydrateRoot=function(t,e,n){if(!oO(t))throw Error(me(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=QM;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=KM(e,null,t,1,n??null,s,!1,i,o),t[Yc]=e.current,xw(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Jx(e)};Pi.render=function(t,e,n){if(!Yx(e))throw Error(me(200));return Zx(null,t,e,!1,n)};Pi.unmountComponentAtNode=function(t){if(!Yx(t))throw Error(me(40));return t._reactRootContainer?(lf(function(){Zx(null,null,t,!1,function(){t._reactRootContainer=null,t[Yc]=null})}),!0):!1};Pi.unstable_batchedUpdates=Xk;Pi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Yx(n))throw Error(me(200));if(t==null||t._reactInternals===void 0)throw Error(me(38));return Zx(t,e,n,!1,r)};Pi.version="18.3.1-next-f1338f8080-20240426";function JM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JM)}catch(t){console.error(t)}}JM(),JB.exports=Pi;var aO=JB.exports,GD=aO;mI.createRoot=GD.createRoot,mI.hydrateRoot=GD.hydrateRoot;const YM="2.31.4";let By={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${YM}`},he=class lT extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof lT?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof lT&&n.cause.docsPath||n.docsPath,i=(a=By.getDocsUrl)==null?void 0:a.call(By,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...By.version?[`Version: ${By.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=YM}walk(e){return ZM(this,e)}};function ZM(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?ZM(t.cause,e):e?null:t}let XM=class extends he{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class AJ extends he{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}let SJ=class extends he{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};class ej extends he{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}let tj=class extends he{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class VD extends he{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function ty(t,{dir:e,size:n=32}={}){return typeof t=="string"?Ju(t,{dir:e,size:n}):IJ(t,{dir:e,size:n})}function Ju(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new tj({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function IJ(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new tj({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}function el(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Ln(t){return el(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function ny(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const TJ=new TextEncoder;function Xx(t,e={}){return typeof t=="number"||typeof t=="bigint"?PJ(t,e):typeof t=="boolean"?NJ(t,e):el(t)?qa(t,e):ug(t,e)}function NJ(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(na(n,{size:e.size}),ty(n,{size:e.size})):n}const Xa={zero:48,nine:57,A:65,F:70,a:97,f:102};function KD(t){if(t>=Xa.zero&&t<=Xa.nine)return t-Xa.zero;if(t>=Xa.A&&t<=Xa.F)return t-(Xa.A-10);if(t>=Xa.a&&t<=Xa.f)return t-(Xa.a-10)}function qa(t,e={}){let n=t;e.size&&(na(n,{size:e.size}),n=ty(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=KD(r.charCodeAt(a++)),l=KD(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new he(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function PJ(t,e){const n=Ye(t,e);return qa(n)}function ug(t,e={}){const n=TJ.encode(t);return typeof e.size=="number"?(na(n,{size:e.size}),ty(n,{dir:"right",size:e.size})):n}function na(t,{size:e}){if(Ln(t)>e)throw new SJ({givenSize:Ln(t),maxSize:e})}function tl(t,e={}){const{signed:n}=e;e.size&&na(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function nl(t,e={}){return Number(tl(t,e))}function nj(t,e={}){let n=qa(t);return e.size&&(na(n,{size:e.size}),n=ny(n,{dir:"right"})),new TextDecoder().decode(n)}const kJ=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function uf(t,e={}){return typeof t=="number"||typeof t=="bigint"?Ye(t,e):typeof t=="string"?eC(t,e):typeof t=="boolean"?rj(t,e):bs(t,e)}function rj(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(na(n,{size:e.size}),ty(n,{size:e.size})):n}function bs(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=kJ[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(na(r,{size:e.size}),ty(r,{dir:"right",size:e.size})):r}function Ye(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new XM({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?ty(a,{size:r}):a}const OJ=new TextEncoder;function eC(t,e={}){const n=OJ.encode(t);return bs(n,e)}async function RJ(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:Ye(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function ld(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new GJ(t.type);return`${t.name}(${tC(t.inputs,{includeName:e})})`}function tC(t,{includeName:e=!1}={}){return t?t.map(n=>DJ(n,{includeName:e})).join(e?", ":","):""}function DJ(t,{includeName:e}){return t.type.startsWith("tuple")?`(${tC(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class $J extends he{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class QD extends he{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class sj extends he{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${tC(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class nC extends he{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class UJ extends he{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class BJ extends he{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Ln(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class LJ extends he{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class R5e extends he{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class D5e extends he{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class ij extends he{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class MJ extends he{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class oj extends he{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class I_ extends he{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class jJ extends he{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class $5e extends he{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class FJ extends he{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${ld(e.abiItem)}\`, and`,`\`${n.type}\` in \`${ld(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class zJ extends he{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class uT extends he{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${tC(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class aj extends he{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${ld(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class HJ extends he{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class WJ extends he{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class qJ extends he{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class GJ extends he{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function ud(t){return typeof t[0]=="string"?rC(t):VJ(t)}function VJ(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function rC(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}class dd extends he{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}let sC=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const h1=BigInt(2**32-1),JD=BigInt(32);function KJ(t,e=!1){return e?{h:Number(t&h1),l:Number(t>>JD&h1)}:{h:Number(t>>JD&h1)|0,l:Number(t&h1)|0}}function QJ(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=KJ(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const JJ=(t,e,n)=>t<<n|e>>>32-n,YJ=(t,e,n)=>e<<n|t>>>32-n,ZJ=(t,e,n)=>e<<n-32|t>>>64-n,XJ=(t,e,n)=>t<<n-32|e>>>64-n,Yf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function eY(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function T_(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function df(t,...e){if(!eY(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function B5e(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");T_(t.outputLen),T_(t.blockLen)}function N_(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function cj(t,e){df(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function tY(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Ow(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function eS(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function aa(t,e){return t<<32-e|t>>>e}const nY=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function rY(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function sY(t){for(let e=0;e<t.length;e++)t[e]=rY(t[e]);return t}const YD=nY?t=>t:sY,lj=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",iY=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function L5e(t){if(df(t),lj)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=iY[t[n]];return e}const ec={_0:48,_9:57,A:65,F:70,a:97,f:102};function ZD(t){if(t>=ec._0&&t<=ec._9)return t-ec._0;if(t>=ec.A&&t<=ec.F)return t-(ec.A-10);if(t>=ec.a&&t<=ec.f)return t-(ec.a-10)}function M5e(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(lj)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=ZD(t.charCodeAt(i)),a=ZD(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function oY(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function iC(t){return typeof t=="string"&&(t=oY(t)),df(t),t}function j5e(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];df(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let uj=class{};function dj(t){const e=r=>t().update(iC(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function aY(t){const e=(r,s)=>t(s).update(iC(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function z5e(t=32){if(Yf&&typeof Yf.getRandomValues=="function")return Yf.getRandomValues(new Uint8Array(t));if(Yf&&typeof Yf.randomBytes=="function")return Uint8Array.from(Yf.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const cY=BigInt(0),Ly=BigInt(1),lY=BigInt(2),uY=BigInt(7),dY=BigInt(256),hY=BigInt(113),hj=[],fj=[],pj=[];for(let t=0,e=Ly,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],hj.push(2*(5*r+n)),fj.push((t+1)*(t+2)/2%64);let s=cY;for(let i=0;i<7;i++)e=(e<<Ly^(e>>uY)*hY)%dY,e&lY&&(s^=Ly<<(Ly<<BigInt(i))-Ly);pj.push(s)}const gj=QJ(pj,!0),fY=gj[0],pY=gj[1],XD=(t,e,n)=>n>32?ZJ(t,e,n):JJ(t,e,n),e$=(t,e,n)=>n>32?XJ(t,e,n):YJ(t,e,n);function mj(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=XD(l,u,1)^n[a],h=e$(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=fj[o],c=XD(s,i,a),l=e$(s,i,a),u=hj[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=fY[r],t[1]^=pY[r]}Ow(n)}let cO=class yj extends uj{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,T_(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=tY(this.state)}clone(){return this._cloneInto()}keccak(){YD(this.state32),mj(this.state32,this.rounds),YD(this.state32),this.posOut=0,this.pos=0}update(e){N_(this),e=iC(e),df(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){N_(this,!1),df(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return T_(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(cj(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ow(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new yj(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Sd=(t,e,n)=>dj(()=>new cO(e,t,n)),gY=Sd(6,144,224/8),mY=Sd(6,136,256/8),yY=Sd(6,104,384/8),wY=Sd(6,72,512/8),bY=Sd(1,144,224/8),lO=Sd(1,136,256/8),vY=Sd(1,104,384/8),EY=Sd(1,72,512/8),wj=(t,e,n)=>aY((r={})=>new cO(e,t,r.dkLen===void 0?n:r.dkLen,!0)),_Y=wj(31,168,128/8),xY=wj(31,136,256/8),H5e=Object.freeze(Object.defineProperty({__proto__:null,Keccak:cO,keccakP:mj,keccak_224:bY,keccak_256:lO,keccak_384:vY,keccak_512:EY,sha3_224:gY,sha3_256:mY,sha3_384:yY,sha3_512:wY,shake128:_Y,shake256:xY},Symbol.toStringTag,{value:"Module"}));function ry(t,e){const n=e||"hex",r=lO(el(t,{strict:!1})?Xx(t):t);return n==="bytes"?r:uf(r)}const tS=new sC(8192);function fv(t,e){if(tS.has(`${t}.${e}`))return tS.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=ry(ug(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return tS.set(`${t}.${e}`,i),i}function Uu(t,e){if(!Xo(t,{strict:!1}))throw new dd({address:t});return fv(t,e)}const CY=/^0x[a-fA-F0-9]{40}$/,nS=new sC(8192);function Xo(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(nS.has(r))return nS.get(r);const s=CY.test(t)?t.toLowerCase()===t?!0:n?fv(t)===t:!0:!1;return nS.set(r,s),s}function P_(t,e,n,{strict:r}={}){return el(t,{strict:!1})?dT(t,e,n,{strict:r}):Ej(t,e,n,{strict:r})}function bj(t,e){if(typeof e=="number"&&e>0&&e>Ln(t)-1)throw new ej({offset:e,position:"start",size:Ln(t)})}function vj(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Ln(t)!==n-e)throw new ej({offset:n,position:"end",size:Ln(t)})}function Ej(t,e,n,{strict:r}={}){bj(t,e);const s=t.slice(e,n);return r&&vj(s,e,n),s}function dT(t,e,n,{strict:r}={}){bj(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&vj(s,e,n),s}const AY=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,_j=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function xj(t,e){if(t.length!==e.length)throw new LJ({expectedLength:t.length,givenLength:e.length});const n=SY({params:t,values:e}),r=dO(n);return r.length===0?"0x":r}function SY({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(uO({param:t[r],value:e[r]}));return n}function uO({param:t,value:e}){const n=hO(t.type);if(n){const[r,s]=n;return TY(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return RY(e,{param:t});if(t.type==="address")return IY(e);if(t.type==="bool")return PY(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=_j.exec(t.type)??[];return kY(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return NY(e,{param:t});if(t.type==="string")return OY(e);throw new HJ(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function dO(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Ln(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(Ye(e+s,{size:32})),r.push(a),s+=Ln(a)):n.push(a)}return ud([...n,...r])}function IY(t){if(!Xo(t))throw new dd({address:t});return{dynamic:!1,encoded:Ju(t.toLowerCase())}}function TY(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new qJ(t);if(!r&&t.length!==e)throw new UJ({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=uO({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=dO(i);if(r){const a=Ye(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?ud([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:ud(i.map(({encoded:o})=>o))}}function NY(t,{param:e}){const[,n]=e.type.split("bytes"),r=Ln(t);if(!n){let s=t;return r%32!==0&&(s=Ju(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:ud([Ju(Ye(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new BJ({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:Ju(t,{dir:"right"})}}function PY(t){if(typeof t!="boolean")throw new he(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Ju(rj(t))}}function kY(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new XM({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Ye(t,{size:32,signed:e})}}function OY(t){const e=eC(t),n=Math.ceil(Ln(e)/32),r=[];for(let s=0;s<n;s++)r.push(Ju(P_(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:ud([Ju(Ye(Ln(e),{size:32})),...r])}}function RY(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=uO({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?dO(r):ud(r.map(({encoded:s})=>s))}}function hO(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const rS="/docs/contract/encodeDeployData";function fO(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new $J({docsPath:rS});if(!("inputs"in s))throw new QD({docsPath:rS});if(!s.inputs||s.inputs.length===0)throw new QD({docsPath:rS});const i=xj(s.inputs,n);return rC([r,i])}function kr(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class $f extends he{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class IE extends he{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function DY(t){const e=ry(`0x${t.substring(4)}`).substring(26);return fv(`0x${e}`)}const $Y="modulepreload",UY=function(t){return"/"+t},t$={},Rn=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=UY(c),c in t$)return;t$[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":$Y,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function BY({hash:t,signature:e}){const n=el(t)?t:uf(t),{secp256k1:r}=await Rn(async()=>{const{secp256k1:o}=await import("./secp256k1-CBY3JFfc.js");return{secp256k1:o}},__vite__mapDeps([0,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=n$(f);return new r.Signature(tl(l),tl(u)).addRecoveryBit(p)}const o=el(e)?e:uf(e);if(Ln(o)!==65)throw new Error("invalid signature length");const a=nl(`0x${o.slice(130)}`),c=n$(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function n$(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function LY({hash:t,signature:e}){return DY(await BY({hash:t,signature:e}))}class r$ extends he{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class Cj extends he{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class MY extends he{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const jY={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new MY({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new Cj({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new r$({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new r$({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function pO(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(jY);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function FY(t,e="hex"){const n=Aj(t),r=pO(new Uint8Array(n.length));return n.encode(r),e==="hex"?bs(r.bytes):r.bytes}function Aj(t){return Array.isArray(t)?zY(t.map(e=>Aj(e))):HY(t)}function zY(t){const e=t.reduce((s,i)=>s+i.length,0),n=Sj(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function HY(t){const e=typeof t=="string"?qa(t):t,n=Sj(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function Sj(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new he("Length is too large.")}function WY(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=ry(rC(["0x05",FY([e?Ye(e):"0x",s,n?Ye(n):"0x"])]));return r==="bytes"?qa(i):i}async function Ij(t){const{authorization:e,signature:n}=t;return LY({hash:WY(e),signature:n??e})}class hT extends he{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class qY extends he{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class GY extends he{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class Tj extends he{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function Nj({chain:t,currentChainId:e}){if(!t)throw new GY;if(e!==t.id)throw new qY({chain:t,currentChainId:e})}const VY={gwei:9,wei:18},KY={ether:-9,wei:9},QY={ether:-18,gwei:-9};function sy(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function Xs(t,e="wei"){return sy(t,KY[e])}class ah extends he{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(ah,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(ah,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class k_ extends he{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${Xs(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(k_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class fT extends he{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${Xs(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(fT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class pT extends he{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(pT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class gT extends he{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(gT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class mT extends he{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(mT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class yT extends he{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(yT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class wT extends he{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(wT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class bT extends he{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(bT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class vT extends he{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(vT,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class O_ extends he{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${Xs(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${Xs(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(O_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class oC extends he{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function gO(t,e="wei"){return sy(t,VY[e])}function pv(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class JY extends he{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class YY extends he{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",pv(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class ZY extends he{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=pv({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${gO(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${Xs(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Xs(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${Xs(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Pj extends he{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class kj extends he{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class XY extends he{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const ms=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),eZ=t=>t,mO=t=>t;class W0 extends he{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${mO(o)}`,e&&`Request body: ${ms(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class yO extends he{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${mO(r)}`,`Request body: ${ms(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class s$ extends he{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${mO(n)}`,`Request body: ${ms(e)}`],name:"TimeoutError"})}}const tZ=-1;class ri extends he{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof yO?e.code:n??tZ}}class Oi extends ri{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class Rw extends ri{constructor(e){super(e,{code:Rw.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Rw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Dw extends ri{constructor(e){super(e,{code:Dw.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Dw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class $w extends ri{constructor(e,{method:n}={}){super(e,{code:$w.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty($w,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Uw extends ri{constructor(e){super(e,{code:Uw.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Uw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class hf extends ri{constructor(e){super(e,{code:hf.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(hf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Bw extends ri{constructor(e){super(e,{code:Bw.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Bw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Lw extends ri{constructor(e){super(e,{code:Lw.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Lw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Yu extends ri{constructor(e){super(e,{code:Yu.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Yu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Nm extends ri{constructor(e){super(e,{code:Nm.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Nm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class ch extends ri{constructor(e,{method:n}={}){super(e,{code:ch.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(ch,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Pm extends ri{constructor(e){super(e,{code:Pm.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Pm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Mw extends ri{constructor(e){super(e,{code:Mw.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Mw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Kn extends Oi{constructor(e){super(e,{code:Kn.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Kn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class jw extends Oi{constructor(e){super(e,{code:jw.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(jw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Fw extends Oi{constructor(e,{method:n}={}){super(e,{code:Fw.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(Fw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class zw extends Oi{constructor(e){super(e,{code:zw.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(zw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Hw extends Oi{constructor(e){super(e,{code:Hw.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Hw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Ga extends Oi{constructor(e){super(e,{code:Ga.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Ga,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class km extends Oi{constructor(e){super(e,{code:km.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(km,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Ww extends Oi{constructor(e){super(e,{code:Ww.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Ww,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class qw extends Oi{constructor(e){super(e,{code:qw.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(qw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class Gw extends Oi{constructor(e){super(e,{code:Gw.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(Gw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Vw extends Oi{constructor(e){super(e,{code:Vw.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Vw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Kw extends Oi{constructor(e){super(e,{code:Kw.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Kw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Om extends Oi{constructor(e){super(e,{code:Om.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Om,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class nZ extends ri{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function wO(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof he?t.walk(s=>(s==null?void 0:s.code)===ah.code):t;return r instanceof he?new ah({cause:t,message:r.details}):ah.nodeMessage.test(n)?new ah({cause:t,message:t.details}):k_.nodeMessage.test(n)?new k_({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):fT.nodeMessage.test(n)?new fT({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):pT.nodeMessage.test(n)?new pT({cause:t,nonce:e==null?void 0:e.nonce}):gT.nodeMessage.test(n)?new gT({cause:t,nonce:e==null?void 0:e.nonce}):mT.nodeMessage.test(n)?new mT({cause:t,nonce:e==null?void 0:e.nonce}):yT.nodeMessage.test(n)?new yT({cause:t}):wT.nodeMessage.test(n)?new wT({cause:t,gas:e==null?void 0:e.gas}):bT.nodeMessage.test(n)?new bT({cause:t,gas:e==null?void 0:e.gas}):vT.nodeMessage.test(n)?new vT({cause:t}):O_.nodeMessage.test(n)?new O_({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new oC({cause:t})}function Oj(t,{docsPath:e,...n}){const r=(()=>{const s=wO(t,n);return s instanceof oC?t:s})();return new ZY(r,{docsPath:e,...n})}function bO(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const rZ={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function aC(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=sZ(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>bs(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=Ye(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=Ye(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=Ye(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=Ye(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=Ye(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=Ye(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=rZ[t.type]),typeof t.value<"u"&&(e.value=Ye(t.value)),e}function sZ(t){return t.map(e=>({address:e.address,r:e.r?Ye(BigInt(e.r)):e.r,s:e.s?Ye(BigInt(e.s)):e.s,chainId:Ye(e.chainId),nonce:Ye(e.nonce),...typeof e.yParity<"u"?{yParity:Ye(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:Ye(e.v)}:{}}))}function Zt(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const iZ=2n**256n-1n;function gv(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?kr(e):void 0;if(o&&!Xo(o.address))throw new dd({address:o.address});if(i&&!Xo(i))throw new dd({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new JY;if(r&&r>iZ)throw new k_({maxFeePerGas:r});if(s&&r&&s>r)throw new O_({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function mv(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return nl(e)}class oZ extends he{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class vO extends he{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class aZ extends he{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${Xs(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class Rj extends he{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const Dj={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function $j(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?nl(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?nl(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?Dj[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=cZ(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function cZ(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function lZ(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:$j(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function Qw(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?Ye(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new Rj({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||lZ)(c)}async function Uj(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function uZ(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await Zt(t,Qw,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return tl(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):Zt(t,Qw,"getBlock")({}),Zt(t,Uj,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new vO;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function i$(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new oZ;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await Zt(t,Qw,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new vO;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await uZ(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await Zt(t,Uj,"getGasPrice")({}))}}class dZ extends he{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=pv({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${gO(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${Xs(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Xs(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${Xs(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function hZ(t,{docsPath:e,...n}){const r=(()=>{const s=wO(t,n);return s instanceof oC?t:s})();return new dZ(r,{docsPath:e,...n})}class fZ extends he{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class pZ extends he{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function o$(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function gZ(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=o$(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=o$(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function a$(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new VD({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new VD({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function mZ(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=Ye(e)),n!==void 0&&(o.nonce=Ye(n)),r!==void 0&&(o.state=a$(r)),s!==void 0){if(o.state)throw new pZ;o.stateDiff=a$(s)}return o}function Bj(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Xo(n,{strict:!1}))throw new dd({address:n});if(e[n])throw new fZ({address:n});e[n]=mZ(r)}return e}async function Lj(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?Ye(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function Mj(t,e){var s,i,o;const{account:n=t.account}=e,r=n?kr(n):void 0;try{let K=function(N){const{block:L,request:U,rpcStateOverride:$}=N;return t.request({method:"eth_estimateGas",params:$?[U,L??"latest",$]:L?[U,L]:[U]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:v,nonce:b,value:x,stateOverride:_,...C}=await cC(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),T=(typeof d=="bigint"?Ye(d):void 0)||h,A=Bj(_),P=await(async()=>{if(C.to)return C.to;if(c&&c.length>0)return await Ij({authorization:c[0]}).catch(()=>{throw new he("`to` is required. Could not infer from `authorizationList`")})})();gv(e);const R=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,z=(R||aC)({...bO(C,{format:R}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:v,nonce:b,to:P,value:x});let I=BigInt(await K({block:T,request:z,rpcStateOverride:A}));if(c){const N=await Lj(t,{address:z.from}),L=await Promise.all(c.map(async U=>{const{address:$}=U,M=await K({block:T,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:$,value:Ye(N)},rpcStateOverride:A}).catch(()=>100000n);return 2n*BigInt(M)}));I+=L.reduce((U,$)=>U+$,0n)}return I}catch(a){throw hZ(a,{...e,account:r,chain:t.chain})}}async function jj(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?Ye(r):n]},{dedupe:!!r});return nl(s)}function Fj(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>qa(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>bs(i))}function zj(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>qa(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>qa(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>bs(o))}function yZ(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function wZ(t,e,n){return t&e^~t&n}function bZ(t,e,n){return t&e^t&n^e&n}class vZ extends uj{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=eS(this.buffer)}update(e){N_(this),e=iC(e),df(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=eS(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){N_(this),cj(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Ow(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;yZ(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=eS(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const wl=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),EZ=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),bl=new Uint32Array(64);let _Z=class extends vZ{constructor(e=32){super(64,e,8,!1),this.A=wl[0]|0,this.B=wl[1]|0,this.C=wl[2]|0,this.D=wl[3]|0,this.E=wl[4]|0,this.F=wl[5]|0,this.G=wl[6]|0,this.H=wl[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)bl[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=bl[d-15],f=bl[d-2],p=aa(h,7)^aa(h,18)^h>>>3,g=aa(f,17)^aa(f,19)^f>>>10;bl[d]=g+bl[d-7]+p+bl[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=aa(a,6)^aa(a,11)^aa(a,25),f=u+h+wZ(a,c,l)+EZ[d]+bl[d]|0,g=(aa(r,2)^aa(r,13)^aa(r,22))+bZ(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Ow(bl)}destroy(){this.set(0,0,0,0,0,0,0,0),Ow(this.buffer)}};const xZ=dj(()=>new _Z),CZ=xZ;function AZ(t,e){return CZ(el(t,{strict:!1})?Xx(t):t)}function SZ(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=AZ(e);return s.set([n],0),r==="bytes"?s:bs(s)}function IZ(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(SZ({commitment:i,to:r,version:n}));return s}const c$=6,Hj=32,EO=4096,Wj=Hj*EO,l$=Wj*c$-1-1*EO*c$;class TZ extends he{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class NZ extends he{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function PZ(t){const e=typeof t.data=="string"?qa(t.data):t.data,n=Ln(e);if(!n)throw new NZ;if(n>l$)throw new TZ({maxSize:l$,size:n});const r=[];let s=!0,i=0;for(;s;){const o=pO(new Uint8Array(Wj));let a=0;for(;a<EO;){const c=e.slice(i,i+(Hj-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>bs(o.bytes))}function kZ(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??PZ({data:e}),i=t.commitments??Fj({blobs:s,kzg:n,to:r}),o=t.proofs??zj({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function OZ(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new YY({transaction:t})}const qj=["blobVersionedHashes","chainId","fees","gas","nonce","type"],u$=new Map;async function cC(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=qj,type:u}=e,d=n&&kr(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await Zt(t,Qw,"getBlock")({blockTag:"latest"}),f)}let g;async function y(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await Zt(t,mv,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const w=await y();h.nonce=await c.consume({address:d.address,chainId:w,client:t})}else h.nonce=await Zt(t,jj,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const w=Fj({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const v=IZ({commitments:w,to:"hex"});h.blobVersionedHashes=v}if(l.includes("sidecars")){const v=zj({blobs:r,commitments:w,kzg:o}),b=kZ({blobs:r,commitments:w,proofs:v,to:"hex"});h.sidecars=b}}if(l.includes("chainId")&&(h.chainId=await y()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=OZ(h)}catch{let w=u$.get(t.uid);if(typeof w>"u"){const v=await p();w=typeof(v==null?void 0:v.baseFeePerGas)=="bigint",u$.set(t.uid,w)}h.type=w?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const w=await p(),{maxFeePerGas:v,maxPriorityFeePerGas:b}=await i$(t,{block:w,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<b)throw new aZ({maxPriorityFeePerGas:b});h.maxPriorityFeePerGas=b,h.maxFeePerGas=v}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new vO;if(typeof e.gasPrice>"u"){const w=await p(),{gasPrice:v}=await i$(t,{block:w,chain:s,request:h,type:"legacy"});h.gasPrice=v}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await Zt(t,Mj,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),gv(h),delete h.parameters,h}async function Gj(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const sS=new sC(128);async function yv(t,e){var v,b,x,_;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...y}=e;if(typeof n>"u")throw new $f({docsPath:"/docs/actions/wallet/sendTransaction"});const w=n?kr(n):null;try{gv(e);const C=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await Ij({authorization:i[0]}).catch(()=>{throw new he("`to` is required. Could not infer from `authorizationList`.")})})();if((w==null?void 0:w.type)==="json-rpc"||w===null){let S;r!==null&&(S=await Zt(t,mv,"getChainId")({}),Nj({currentChainId:S,chain:r}));const T=(x=(b=(v=t.chain)==null?void 0:v.formatters)==null?void 0:b.transactionRequest)==null?void 0:x.format,P=(T||aC)({...bO(y,{format:T}),accessList:s,authorizationList:i,blobs:o,chainId:S,data:a,from:w==null?void 0:w.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:C,type:p,value:g}),R=sS.get(t.uid),j=R?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:j,params:[P]},{retryCount:0})}catch(z){if(R===!1)throw z;const K=z;if(K.name==="InvalidInputRpcError"||K.name==="InvalidParamsRpcError"||K.name==="MethodNotFoundRpcError"||K.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[P]},{retryCount:0}).then(I=>(sS.set(t.uid,!0),I)).catch(I=>{const N=I;throw N.name==="MethodNotFoundRpcError"||N.name==="MethodNotSupportedRpcError"?(sS.set(t.uid,!1),K):N});throw K}}if((w==null?void 0:w.type)==="local"){const S=await Zt(t,cC,"prepareTransactionRequest")({account:w,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:w.nonceManager,parameters:[...qj,"sidecars"],type:p,value:g,...y,to:C}),T=(_=r==null?void 0:r.serializers)==null?void 0:_.transaction,A=await w.signTransaction(S,{serializer:T});return await Zt(t,Gj,"sendRawTransaction")({serializedTransaction:A})}throw(w==null?void 0:w.type)==="smart"?new IE({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new IE({docsPath:"/docs/actions/wallet/sendTransaction",type:w==null?void 0:w.type})}catch(C){throw C instanceof IE?C:Oj(C,{...e,account:w,chain:e.chain||void 0})}}function RZ(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=fO({abi:n,args:r,bytecode:s});return yv(t,{...i,...i.authorizationList?{to:null}:{},data:o})}const ET=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],q5e=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],DZ=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],$Z=[...DZ,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}];function UZ(t,e={}){typeof e.size<"u"&&na(t,{size:e.size});const n=bs(t,e);return tl(n,e)}function BZ(t,e={}){let n=t;if(typeof e.size<"u"&&(na(n,{size:e.size}),n=ny(n)),n.length>1||n[0]>1)throw new AJ(n);return!!n[0]}function Hc(t,e={}){typeof e.size<"u"&&na(t,{size:e.size});const n=bs(t,e);return nl(n,e)}function LZ(t,e={}){let n=t;return typeof e.size<"u"&&(na(n,{size:e.size}),n=ny(n,{dir:"right"})),new TextDecoder().decode(n)}function lC(t,e){const n=typeof e=="string"?qa(e):e,r=pO(n);if(Ln(n)===0&&t.length>0)throw new nC;if(Ln(e)&&Ln(e)<32)throw new sj({data:typeof e=="string"?e:bs(e),params:t,size:Ln(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=dg(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function dg(t,e,{staticPosition:n}){const r=hO(e.type);if(r){const[s,i]=r;return jZ(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return WZ(t,e,{staticPosition:n});if(e.type==="address")return MZ(t);if(e.type==="bool")return FZ(t);if(e.type.startsWith("bytes"))return zZ(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return HZ(t,e);if(e.type==="string")return qZ(t,{staticPosition:n});throw new WJ(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const d$=32,_T=32;function MZ(t){const e=t.readBytes(32);return[fv(bs(Ej(e,-20))),32]}function jZ(t,e,{length:n,staticPosition:r}){if(!n){const o=Hc(t.readBytes(_T)),a=r+o,c=a+d$;t.setPosition(a);const l=Hc(t.readBytes(d$)),u=Jw(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=dg(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(Jw(e)){const o=Hc(t.readBytes(_T)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=dg(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=dg(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function FZ(t){return[BZ(t.readBytes(32),{size:32}),32]}function zZ(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=Hc(t.readBytes(32));t.setPosition(n+o);const a=Hc(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[bs(c),32]}return[bs(t.readBytes(Number.parseInt(s),32)),32]}function HZ(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?UZ(s,{signed:n}):Hc(s,{signed:n}),32]}function WZ(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(Jw(e)){const o=Hc(t.readBytes(_T)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=dg(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=dg(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function qZ(t,{staticPosition:e}){const n=Hc(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Hc(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=LZ(ny(i));return t.setPosition(e+32),[o,32]}function Jw(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(Jw);const n=hO(t.type);return!!(n&&Jw({...t,type:n[1]}))}const GZ=t=>ry(Xx(t));function VZ(t){return GZ(t)}const KZ="1.0.8";let lo=class xT extends Error{constructor(e,n={}){var o;const r=n.cause instanceof xT?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof xT&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${KZ}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function cl(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const Vj=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Kj=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Qj=/^\(.+?\).*?$/,h$=/^tuple(?<array>(\[(\d*)\])*)$/;function CT(t){let e=t.type;if(h$.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=CT(i),s<n-1&&(e+=", ")}const r=cl(h$,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,CT({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function My(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=CT(s),r!==n-1&&(e+=", ")}return e}function QZ(t){var e;return t.type==="function"?`function ${t.name}(${My(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${My(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${My(t.inputs)})`:t.type==="error"?`error ${t.name}(${My(t.inputs)})`:t.type==="constructor"?`constructor(${My(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const Jj=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function JZ(t){return Jj.test(t)}function YZ(t){return cl(Jj,t)}const Yj=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function ZZ(t){return Yj.test(t)}function XZ(t){return cl(Yj,t)}const Zj=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function eX(t){return Zj.test(t)}function tX(t){return cl(Zj,t)}const Xj=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function eF(t){return Xj.test(t)}function nX(t){return cl(Xj,t)}const tF=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function rX(t){return tF.test(t)}function sX(t){return cl(tF,t)}const nF=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function iX(t){return nF.test(t)}function oX(t){return cl(nF,t)}const aX=/^receive\(\) external payable$/;function cX(t){return aX.test(t)}const lX=new Set(["indexed"]),AT=new Set(["calldata","memory","storage"]);class uX extends lo{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class dX extends lo{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class hX extends lo{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class fX extends lo{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class pX extends lo{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class gX extends lo{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class mX extends lo{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class iy extends lo{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class yX extends lo{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class wX extends lo{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class bX extends lo{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class vX extends lo{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function EX(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const iS=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function _X(t,e={}){if(eX(t))return xX(t,e);if(ZZ(t))return CX(t,e);if(JZ(t))return AX(t,e);if(rX(t))return SX(t,e);if(iX(t))return IX(t);if(cX(t))return{type:"receive",stateMutability:"payable"};throw new yX({signature:t})}function xX(t,e={}){const n=tX(t);if(!n)throw new iy({signature:t,type:"function"});const r=zo(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(ff(r[a],{modifiers:AT,structs:e,type:"function"}));const o=[];if(n.returns){const a=zo(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(ff(a[l],{modifiers:AT,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function CX(t,e={}){const n=XZ(t);if(!n)throw new iy({signature:t,type:"event"});const r=zo(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(ff(r[o],{modifiers:lX,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function AX(t,e={}){const n=YZ(t);if(!n)throw new iy({signature:t,type:"error"});const r=zo(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(ff(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function SX(t,e={}){const n=sX(t);if(!n)throw new iy({signature:t,type:"constructor"});const r=zo(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(ff(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function IX(t){const e=oX(t);if(!e)throw new iy({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const TX=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,NX=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,PX=/^u?int$/;function ff(t,e){var d,h;const n=EX(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(iS.has(n))return iS.get(n);const r=Qj.test(t),s=cl(r?NX:TX,t);if(!s)throw new hX({param:t});if(s.name&&OX(s.name))throw new fX({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=zo(s.type),p=[],g=f.length;for(let y=0;y<g;y++)p.push(ff(f[y],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(PX.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!rF(c))throw new dX({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new pX({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(AT.has(s.modifier)&&!RX(c,!!s.array))throw new gX({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return iS.set(n,u),u}function zo(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?zo(a,[...e,n.trim()]):zo(a,e,`${n}${o}`,r);case"(":return zo(a,e,`${n}${o}`,r+1);case")":return zo(a,e,`${n}${o}`,r-1);default:return zo(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new vX({current:n,depth:r});return e.push(n.trim()),e}function rF(t){return t==="address"||t==="bool"||t==="function"||t==="string"||Vj.test(t)||Kj.test(t)}const kX=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function OX(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||Vj.test(t)||Kj.test(t)||kX.test(t)}function RX(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function DX(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!eF(a))continue;const c=nX(a);if(!c)throw new iy({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=ff(p,{type:"struct"});u.push(g)}if(!u.length)throw new wX({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=sF(c,e)}return r}const $X=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function sF(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(Qj.test(o.type))r.push(o);else{const c=cl($X,o.type);if(!(c!=null&&c.type))throw new mX({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new bX({type:u});r.push({...o,type:`tuple${l??""}`,components:sF(e[u]??[],e,new Set([...n,u]))})}else if(rF(u))r.push(o);else throw new uX({type:u})}}return r}function iF(t){const e=DX(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];eF(i)||n.push(_X(i,e))}return n}function UX(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new he("Unable to normalize signature.");return s}const BX=t=>{const e=typeof t=="string"?t:QZ(t);return UX(e)};function oF(t){return VZ(BX(t))}const _O=oF,xO=t=>P_(oF(t),0,4);function CO(t){const{abi:e,args:n=[],name:r}=t,s=el(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?xO(a)===r:a.type==="event"?_O(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?ST(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=aF(a.inputs,o.inputs,n);if(l)throw new FJ({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function ST(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Xo(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>ST(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>ST(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function aF(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return aF(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Xo(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Xo(n[r],{strict:!1}):!1)return o}}const oS="/docs/contract/decodeFunctionResult";function AO(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=CO({abi:e,args:n,name:r});if(!a)throw new I_(r,{docsPath:oS});i=a}if(i.type!=="function")throw new I_(void 0,{docsPath:oS});if(!i.outputs)throw new jJ(i.name,{docsPath:oS});const o=lC(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const f$="/docs/contract/encodeFunctionData";function LX(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=CO({abi:e,args:n,name:r});if(!i)throw new I_(r,{docsPath:f$});s=i}if(s.type!=="function")throw new I_(void 0,{docsPath:f$});return{abi:[s],functionName:xO(ld(s))}}function wv(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:LX(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?xj(s.inputs,e??[]):void 0;return rC([i,o??"0x"])}function SO({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new hT({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new hT({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const cF={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},MX={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},jX={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function FX(t){const{abi:e,data:n}=t,r=P_(n,0,4);if(r==="0x")throw new nC;const i=[...e||[],MX,jX].find(o=>o.type==="error"&&r===xO(ld(o)));if(!i)throw new ij(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?lC(i.inputs,P_(n,4)):void 0,errorName:i.name}}function lF({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?ms(e[i]):e[i]}`).join(", ")})`}class zX extends he{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var y;const p=n?kr(n):void 0;let g=pv({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${gO(h)} ${((y=s==null?void 0:s.nativeCurrency)==null?void 0:y.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${Xs(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Xs(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${Xs(l)} gwei`,nonce:u});f&&(g+=`
${gZ(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class uF extends he{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=CO({abi:n,args:r,name:o}),l=c?lF({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?ld(c,{includeName:!0}):void 0,d=pv({address:s&&eZ(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class IT extends he{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=FX({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=cF[f]}else{const f=u?ld(u,{includeName:!0}):void 0,p=u&&h?lF({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof ij&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class HX extends he{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class WX extends he{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class IO extends he{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function qX(t,e){var r,s,i,o,a,c;if(!(t instanceof he))return!1;const n=t.walk(l=>l instanceof IT);return n instanceof IT?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||n.reason===cF[50]):!1}function GX(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return el(e)?e:null}function VX(t){return`[${t.slice(2)}]`}function KX(t){const e=new Uint8Array(32).fill(0);return t?GX(t)||ry(ug(t)):bs(e)}function QX(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(ug(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=ug(s[i]);o.byteLength>255&&(o=ug(VX(KX(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const JX=3;function R_(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof IO?t:t instanceof he?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof nC?new HX({functionName:i}):[JX,hf.code].includes(c)&&(l||u||d||h)?new IT({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof yO?u:h??d}):t;return new uF(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}const YX="0.1.1";function ZX(){return YX}let dF=class TT extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof TT){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof TT&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${ZX()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return hF(this,e)}};function hF(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?hF(t.cause,e):e?null:t}function XX(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new nee({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}function bc(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new tee({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?eee(c,r):c}function eee(t,e){return XX(t,{dir:"left",size:e})}let tee=class extends dF{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}},nee=class extends dF{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function ree(t){return{address:t.address,amount:bc(t.amount),index:bc(t.index),validatorIndex:bc(t.validatorIndex)}}function see(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:bc(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:bc(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:bc(t.gasLimit)},...typeof t.number=="bigint"&&{number:bc(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:bc(t.prevRandao)},...typeof t.time=="bigint"&&{time:bc(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(ree)}}}const iee="0x82ad56cb",oee="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",aee="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe";function cee(t,{docsPath:e,...n}){const r=(()=>{const s=wO(t,n);return s instanceof oC?t:s})();return new zX(r,{docsPath:e,...n})}function TO(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const aS=new Map;function fF({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>aS.delete(e),a=()=>c().map(({args:u})=>u),c=()=>aS.get(e)||[],l=u=>aS.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=TO();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function pF(t,e){var z,K,I,N;const{account:n=t.account,authorizationList:r,batch:s=!!((z=t.batch)!=null&&z.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:v,nonce:b,to:x,value:_,stateOverride:C,...S}=e,T=n?kr(n):void 0;if(u&&(h||f))throw new he("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&x)throw new he("Cannot provide both `code` & `to` as parameters.");const A=u&&d,P=h&&f&&x&&d,R=A||P,j=A?dee({code:u,data:d}):P?hee({data:d,factory:h,factoryData:f,to:x}):d;try{gv(e);const U=(typeof i=="bigint"?Ye(i):void 0)||o,$=l?see(l):void 0,M=Bj(C),G=(N=(I=(K=t.chain)==null?void 0:K.formatters)==null?void 0:I.transactionRequest)==null?void 0:N.format,ie=(G||aC)({...bO(S,{format:G}),from:T==null?void 0:T.address,accessList:a,authorizationList:r,blobs:c,data:j,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:v,nonce:b,to:R?void 0:x,value:_});if(s&&lee({request:ie})&&!M&&!$)try{return await uee(t,{...ie,blockNumber:i,blockTag:o})}catch(ye){if(!(ye instanceof Tj)&&!(ye instanceof hT))throw ye}const se=(()=>{const ye=[ie,U];return M&&$?[...ye,M,$]:M?[...ye,M]:$?[...ye,{},$]:ye})(),ce=await t.request({method:"eth_call",params:se});return ce==="0x"?{data:void 0}:{data:ce}}catch(L){const U=fee(L),{offchainLookup:$,offchainLookupSignature:M}=await Rn(async()=>{const{offchainLookup:G,offchainLookupSignature:X}=await import("./ccip-DSRb9O6R.js");return{offchainLookup:G,offchainLookupSignature:X}},[]);if(t.ccipRead!==!1&&(U==null?void 0:U.slice(0,10))===M&&x)return{data:await $(t,{data:U,to:x})};throw R&&(U==null?void 0:U.slice(0,10))==="0x101bb98d"?new WX({factory:h}):cee(L,{...e,account:T,chain:t.chain})}}function lee({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(iee)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function uee(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new Tj;l=SO({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?Ye(s):void 0)||i,{schedule:h}=fF({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(y){return y.reduce((v,{data:b})=>v+(b.length-2),0)>n*2},fn:async y=>{const w=y.map(x=>({allowFailure:!0,callData:x.data,target:x.to})),v=wv({abi:ET,args:[w],functionName:"aggregate3"}),b=await t.request({method:"eth_call",params:[{data:v,to:l},d]});return AO({abi:ET,args:[w],functionName:"aggregate3",data:b||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new IO({data:f});return f==="0x"?{data:void 0}:{data:f}}function dee(t){const{code:e,data:n}=t;return fO({abi:iF(["constructor(bytes, bytes)"]),bytecode:oee,args:[e,n]})}function hee(t){const{data:e,factory:n,factoryData:r,to:s}=t;return fO({abi:iF(["constructor(address, bytes, address, bytes)"]),bytecode:aee,args:[s,e,n,r]})}function fee(t){var n;if(!(t instanceof he))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function NO(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=wv({abi:n,args:s,functionName:i});try{const{data:c}=await Zt(t,pF,"call")({...o,data:a,to:r});return AO({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw R_(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function pee(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=SO({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:$Z,functionName:"reverse",args:[uf(QX(c))],blockNumber:n,blockTag:r},u=Zt(t,NO,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(qX(l))return null;throw l}}function gee(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function mee(t){const e=gee(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}const yee=new Map,wee=new Map;function bee(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,yee),r=e(t,wee);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function vee(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=bee(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const Eee=t=>`blockNumber.${t}`;async function _ee(t,{cacheTime:e=t.cacheTime}={}){const n=await vee(()=>t.request({method:"eth_blockNumber"}),{cacheKey:Eee(t.uid),cacheTime:e});return BigInt(n)}function gF(t,e){if(!Xo(t,{strict:!1}))throw new dd({address:t});if(!Xo(e,{strict:!1}))throw new dd({address:e});return t.toLowerCase()===e.toLowerCase()}const p$="/docs/contract/decodeEventLog";function xee(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new MJ({docsPath:p$});const c=e.find(g=>g.type==="event"&&o===_O(ld(g)));if(!(c&&"name"in c)||c.type!=="event")throw new oj(o,{docsPath:p$});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,y)=>[g,y]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[y,w]=f[g],v=a[g];if(!v)throw new aj({abiItem:c,param:y});h[d?w:y.name||w]=Cee({param:y,value:v})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=lC(p,n);if(g)if(d)for(let y=0;y<u.length;y++)h[y]=h[y]??g.shift();else for(let y=0;y<p.length;y++)h[p[y].name]=g[y]}catch(g){if(i)throw g instanceof sj||g instanceof Cj?new uT({abiItem:c,data:n,params:p,size:Ln(n)}):g}else if(i)throw new uT({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function Cee({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(lC([t],e)||[])[0]}function Aee(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===_O(u));if(!c)return null;const l=xee({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!See({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof oj)return null;if(c instanceof uT||c instanceof aj){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function See(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?gF(o,a):i.type==="string"||i.type==="bytes"?ry(Xx(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function mF(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function Iee(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>mF(i));return!("abi"in e)||!e.abi?s:Aee({abi:e.abi,logs:s,strict:n})}async function yF(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?Ye(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,Ye(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,Ye(i)]},{dedupe:!!a}),!c)throw new Pj({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||$j)(c)}const wF={"0x0":"reverted","0x1":"success"};function Tee(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>mF(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?nl(t.transactionIndex):null,status:t.status?wF[t.status]:null,type:t.type?Dj[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}async function g$(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new kj({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||Tee)(n)}async function Nee(t,e){var w;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((w=t.batch)==null?void 0:w.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=SO({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let v=0;v<l.length;v++){const{abi:b,address:x,args:_,functionName:C}=l[v];try{const S=wv({abi:b,args:_,functionName:C});p+=(S.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(S.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:S,target:x}]}catch(S){const T=R_(S,{abi:b,address:x,args:_,docsPath:"/docs/contract/multicall",functionName:C,sender:n});if(!r)throw T;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:x}]}}const g=await Promise.allSettled(h.map(v=>Zt(t,NO,"readContract")({abi:ET,account:n,address:d,args:[v],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),y=[];for(let v=0;v<g.length;v++){const b=g[v];if(b.status==="rejected"){if(!r)throw b.reason;for(let _=0;_<h[v].length;_++)y.push({status:"failure",error:b.reason,result:void 0});continue}const x=b.value;for(let _=0;_<x.length;_++){const{returnData:C,success:S}=x[_],{callData:T}=h[v][_],{abi:A,address:P,functionName:R,args:j}=l[y.length];try{if(T==="0x")throw new nC;if(!S)throw new IO({data:C});const z=AO({abi:A,args:j,data:C,functionName:R});y.push(r?{result:z,status:"success"}:z)}catch(z){const K=R_(z,{abi:A,address:P,args:j,docsPath:"/docs/contract/multicall",functionName:R});if(!r)throw K;y.push({error:K,result:void 0,status:"failure"})}}}if(y.length!==l.length)throw new he("multicall results mismatch");return y}const f1=new sC(8192);function Pee(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(f1.get(n))return f1.get(n);const r=t().finally(()=>f1.delete(n));return f1.set(n,r),r}async function D_(t){return new Promise(e=>setTimeout(e,t))}function $_(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await D_(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function kee(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new ch(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new ch(new Error("method not supported"),{method:l});const u=s?eC(`${c}.${ms(n)}`):void 0;return Pee(()=>$_(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case Rw.code:throw new Rw(f);case Dw.code:throw new Dw(f);case $w.code:throw new $w(f,{method:n.method});case Uw.code:throw new Uw(f);case hf.code:throw new hf(f);case Bw.code:throw new Bw(f);case Lw.code:throw new Lw(f);case Yu.code:throw new Yu(f);case Nm.code:throw new Nm(f);case ch.code:throw new ch(f,{method:n.method});case Pm.code:throw new Pm(f);case Mw.code:throw new Mw(f);case Kn.code:throw new Kn(f);case jw.code:throw new jw(f);case Fw.code:throw new Fw(f);case zw.code:throw new zw(f);case Hw.code:throw new Hw(f);case Ga.code:throw new Ga(f);case km.code:throw new km(f);case Ww.code:throw new Ww(f);case qw.code:throw new qw(f);case Gw.code:throw new Gw(f);case Vw.code:throw new Vw(f);case Kw.code:throw new Kw(f);case Om.code:throw new Om(f);case 5e3:throw new Kn(f);default:throw h instanceof he?h:new nZ(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof W0){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>Oee(h)}),{enabled:s,id:u})}}function Oee(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===Pm.code||t.code===hf.code:t instanceof W0&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function Ree(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function bF(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function Dee(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const m$=Dee();function $ee(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await bF(async({signal:p})=>{const g={...a,body:Array.isArray(r)?ms(r.map(b=>({jsonrpc:"2.0",id:b.id??m$.take(),...b}))):ms({jsonrpc:"2.0",id:r.id??m$.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},y=new Request(t,g),w=await(s==null?void 0:s(y,g))??{...g,url:t};return await fetch(w.url??t,w)},{errorInstance:new s$({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new W0({body:r,details:ms(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof W0||h instanceof s$?h:new W0({body:r,cause:h,url:t})}}}}class Uee extends he{constructor({domain:e}){super(`Invalid domain "${ms(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class Bee extends he{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class Lee extends he{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function Mee(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return ms({domain:o,message:a,primaryType:r,types:s})}function jee(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(_j);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,y,w]=h;Ye(d,{signed:y==="int",size:Number.parseInt(w)/8})}if(u==="address"&&typeof d=="string"&&!Xo(d))throw new dd({address:d});const f=u.match(AY);if(f){const[g,y]=f;if(y&&Ln(d)!==Number.parseInt(y))throw new zJ({expectedSize:Number.parseInt(y),givenSize:Ln(d)})}const p=s[u];p&&(zee(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new Uee({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new Bee({primaryType:r,types:s})}function Fee({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function zee(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new Lee({type:t})}class Hee extends he{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function Wee(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new Hee({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}const cS=new Map,y$=new Map;let qee=0;function Yw(t,e,n){const r=++qee,s=()=>cS.get(t)||[],i=()=>{const u=s();cS.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=y$.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(cS.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&y$.set(t,l),o}function PO(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await D_(c);const l=async()=>{s&&(await t({unpoll:i}),await D_(r),l())};l()})(),i}function Gee(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=ms(["watchBlockNumber",t.uid,e,n,o]);return Yw(d,{onBlockNumber:r,onError:s},h=>PO(async()=>{var f;try{const p=await Zt(t,_ee,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=ms(["watchBlockNumber",t.uid,e,n]);return Yw(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const w=t.transport.transports.find(v=>v.config.type==="webSocket"||v.config.type==="ipc");return w?w.value:t.transport}return t.transport})(),{unsubscribe:y}=await g.subscribe({params:["newHeads"],onData(w){var b;if(!f)return;const v=tl((b=w.result)==null?void 0:b.number);h.onBlockNumber(v,c),c=v},onError(w){var v;(v=h.onError)==null||v.call(h,w)}});p=y,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function Vee(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function Kee(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=ms(["watchPendingTransactions",t.uid,e,i]);return Yw(l,{onTransactions:r,onError:n},u=>{let d;const h=PO(async()=>{var f;try{if(!d)try{d=await Zt(t,mee,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await Zt(t,Iee,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await Zt(t,Vee,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function Qee(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>fv(r))}async function Jee(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function Yee(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?kr(n):void 0,i=r?[s==null?void 0:s.address,[Ye(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}const vF="0x5792579257925792579257925792579257925792579257925792579257925792",EF=Ye(0,{size:32});async function Zee(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?kr(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?wv({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?ud([p,f.dataSuffix]):p,to:f.to,value:f.value?Ye(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:Ye(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(v=>!v.optional)){const v="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new km(new he(v,{details:v}))}if(a&&d.length>1){const w="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new Om(new he(w,{details:w}))}const p=[];for(const w of d){const v=yv(t,{account:u,chain:s,data:w.data,to:w.to,value:w.value?tl(w.value):void 0});p.push(v),o>0&&await new Promise(b=>setTimeout(b,o))}const g=await Promise.allSettled(p);if(g.every(w=>w.status==="rejected"))throw g[0].reason;const y=g.map(w=>w.status==="fulfilled"?w.value:EF);return{id:ud([...y,Ye(s.id,{size:32}),vF])}}throw Oj(h,{...e,account:u,chain:e.chain})}}async function _F(t,e){async function n(u){if(u.endsWith(vF.slice(2))){const h=ny(dT(u,-64,-32)),f=dT(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(y=>EF.slice(2)!==y?t.request({method:"eth_getTransactionReceipt",params:[`0x${y}`]},{dedupe:!0}):void 0)),g=p.some(y=>y===null)?100:p.every(y=>(y==null?void 0:y.status)==="0x1")?200:p.every(y=>(y==null?void 0:y.status)==="0x0")?500:600;return{atomic:!1,chainId:nl(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?nl(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:tl(u.blockNumber),gasUsed:tl(u.gasUsed),status:wF[u.status]})))??[],statusCode:l,status:c,version:o}}async function Xee(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function ete(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=ms(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=TO();let u;const d=Yw(o,{resolve:c,reject:l},h=>{const f=PO(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await _F(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new tte({id:n}))},i):void 0,await a}class tte extends he{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}async function nte(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=ms(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:y,reject:w}=TO(),v=a?setTimeout(()=>{p(),f(),w(new XY({hash:n}))},a):void 0;return f=Yw(c,{onReplaced:r,resolve:y,reject:w},b=>{p=Zt(t,Gee,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(x){const _=S=>{clearTimeout(v),p(),S(),f()};let C=x;if(!h)try{if(d){if(e>1&&(!d.blockNumber||C-d.blockNumber+1n<e))return;_(()=>b.resolve(d));return}if(l||(h=!0,await $_(async()=>{l=await Zt(t,yF,"getTransaction")({hash:n}),l.blockNumber&&(C=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await Zt(t,g$,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||C-d.blockNumber+1n<e))return;_(()=>b.resolve(d))}catch(S){if(S instanceof Pj||S instanceof kj){if(!l){h=!1;return}try{u=l,h=!0;const T=await $_(()=>Zt(t,Qw,"getBlock")({blockNumber:C,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:R})=>R instanceof Rj});h=!1;const A=T.transactions.find(({from:R,nonce:j})=>R===u.from&&j===u.nonce);if(!A||(d=await Zt(t,g$,"getTransactionReceipt")({hash:A.hash}),e>1&&(!d.blockNumber||C-d.blockNumber+1n<e)))return;let P="replaced";A.to===u.to&&A.value===u.value&&A.input===u.input?P="repriced":A.from===A.to&&A.value===0n&&(P="cancelled"),_(()=>{var R;(R=b.onReplaced)==null||R.call(b,{reason:P,replacedTransaction:u,transaction:A,transactionReceipt:d}),b.resolve(d)})}catch(T){_(()=>b.reject(T))}}else _(()=>b.reject(S))}}})}),g}async function rte(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>Uu(n))}async function ste(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function xF(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new $f({docsPath:"/docs/eip7702/prepareAuthorization"});const i=kr(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:kr(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await Zt(t,mv,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await Zt(t,jj,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&gF(o.address,i.address))&&(a.nonce+=1)),a}async function ite(t,e){const{account:n=t.account}=e;if(!n)throw new $f({docsPath:"/docs/eip7702/signAuthorization"});const r=kr(n);if(!r.signAuthorization)throw new IE({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await xF(t,e);return r.signAuthorization(s)}async function ote(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new $f({docsPath:"/docs/actions/wallet/signTransaction"});const i=kr(n);gv({account:i,...e});const o=await Zt(t,mv,"getChainId")({});r!==null&&Nj({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||aC;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:Ye(o),from:i.address}]},{retryCount:0})}async function CF(t,{account:e=t.account,message:n}){if(!e)throw new $f({docsPath:"/docs/actions/wallet/signMessage"});const r=kr(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?eC(n):n.raw instanceof Uint8Array?uf(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function ate(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new $f({docsPath:"/docs/actions/wallet/signTypedData"});const o=kr(n),a={EIP712Domain:Fee({domain:r}),...e.types};if(jee({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=Mee({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function cte(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:Ye(e)}]},{retryCount:0})}async function lte(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}async function AF(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new $f({docsPath:"/docs/contract/writeContract"});const l=r?kr(r):null,u=wv({abi:n,args:i,functionName:a});try{return await Zt(t,yv,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw R_(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function Si(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const TE="2.17.3",ute=()=>`@wagmi/core@${TE}`;var SF=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},U_,IF;let ll=class NT extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return ute()}constructor(e,n={}){var i;super(),U_.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof NT?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof NT&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return SF(this,U_,"m",IF).call(this,this,e)}};U_=new WeakSet,IF=function t(e,n){return n!=null&&n(e)?e:e.cause?SF(this,U_,"m",t).call(this,e.cause,n):e};class Zw extends ll{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class dte extends ll{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class hte extends ll{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class fte extends ll{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class pte extends ll{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class gte extends ll{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function NE(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new dte;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const PT=256;let p1=PT,g1;function TF(t=11){if(!g1||p1+t>PT*2){g1="",p1=0;for(let e=0;e<PT;e++)g1+=(256+Math.random()*256|0).toString(16).substring(1)}return g1.substring(p1,p1+++t)}function NF(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?kr(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},y={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:TF()};function w(v){return b=>{const x=b(v);for(const C in y)delete x[C];const _={...v,...x};return Object.assign(_,{extend:w(_)})}}return Object.assign(y,{extend:w(y)})}function kO({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=TF();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:kee(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function mte(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>kO({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function w$(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=yte,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=kO({key:n,name:r,async request({method:g,params:y}){let w;const v=async(b=0)=>{const x=h[b]({...d,chain:c,retryCount:0,timeout:u});try{const _=await x.request({method:g,params:y});return f({method:g,params:y,response:_,transport:x,status:"success"}),_}catch(_){if(f({error:_,method:g,params:y,transport:x,status:"error"}),i(_)||b===h.length-1||(w??(w=h.slice(b+1).some(C=>{const{include:S,exclude:T}=C({chain:c}).config.methods||{};return S?S.includes(g):T?!T.includes(g):!0})),!w))throw _;return v(b+1)}};return v()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};wte({chain:c,interval:g.interval??l,onTransports:y=>h=y,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function yte(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===Nm.code||t.code===Kn.code||ah.nodeMessage.test(t.message)||t.code===5e3))}function wte({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const y=g({chain:t,retryCount:0,timeout:i}),w=Date.now();let v,b;try{await(r?r({transport:y}):y.request({method:"net_listening"})),b=1}catch{b=0}finally{v=Date.now()}return{latency:v-w,success:b}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:y})=>y)))),p=o.map((g,y)=>{const w=u.map(C=>C[y].latency),b=1-w.reduce((C,S)=>C+S,0)/w.length/f,x=u.map(C=>C[y].success),_=x.reduce((C,S)=>C+S,0)/x.length;return _===0?[0,y]:[l*b+c*_,y]}).sort((g,y)=>y[0]-g[0]);n(p.map(([,g])=>o[g])),await D_(e),d()};d()}class bte extends he{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function m1(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},y=e.retryCount??h,w=f??e.timeout??1e4,v=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!v)throw new bte;const b=$ee(v,{fetchOptions:r,onRequest:a,onResponse:c,timeout:w});return kO({key:s,methods:i,name:o,async request({method:x,params:_}){const C={method:x,params:_},{schedule:S}=fF({id:v,wait:g,shouldSplitBatch(R){return R.length>p},fn:R=>b.request({body:R}),sort:(R,j)=>R.id-j.id}),T=async R=>n?S(R):[await b.request({body:R})],[{error:A,result:P}]=await T(C);if(u)return{error:A,result:P};if(A)throw new yO({body:C,error:A,url:v});return P},retryCount:y,retryDelay:l,timeout:w,type:"http"},{fetchOptions:r,url:v})}}function vte(t){return{addChain:e=>RJ(t,e),deployContract:e=>RZ(t,e),getAddresses:()=>Qee(t),getCallsStatus:e=>_F(t,e),getCapabilities:e=>Yee(t,e),getChainId:()=>mv(t),getPermissions:()=>Jee(t),prepareAuthorization:e=>xF(t,e),prepareTransactionRequest:e=>cC(t,e),requestAddresses:()=>rte(t),requestPermissions:e=>ste(t,e),sendCalls:e=>Zee(t,e),sendRawTransaction:e=>Gj(t,e),sendTransaction:e=>yv(t,e),showCallsStatus:e=>Xee(t,e),signAuthorization:e=>ite(t,e),signMessage:e=>CF(t,e),signTransaction:e=>ote(t,e),signTypedData:e=>ate(t,e),switchChain:e=>cte(t,e),waitForCallsStatus:e=>ete(t,e),watchAsset:e=>lte(t,e),writeContract:e=>AF(t,e)}}async function bv(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new gte({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new hte;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new pte({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=kr(e.account??n.accounts[0]);if(o&&(o.address=Uu(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new fte({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return NF({account:o,chain:a,name:"Connector Client",transport:l=>mte(c)({...l,retryCount:0})})}async function PF(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function Ete(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await bv(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return Si(o,Mj,"estimateGas")({...s,account:i})}function kF(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(QY[t])}function hg(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function _te(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return Si(o,Nee,"multicall")({allowFailure:n,contracts:s,...i})}function xte(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Si(s,NO,"readContract")(r)}async function Cte(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>_te(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof uF)throw c;const l=()=>o.map(u=>xte(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function Ate(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await b$(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await b$(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=nj(ny(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await Si(c,Lj,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:sy(u,kF(a)),symbol:d.nativeCurrency.symbol,value:u}}async function b$(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await Cte(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=sy(c??"0",kF(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function v$(t){return t.state.chainId}function hd(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!hd(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!hd(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let lS=[];function E$(t){const e=t.chains;return hd(lS,e)?lS:(lS=e,e)}let y1=[];function wa(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||hd(y1,e)?y1:(y1=e,e)}let uS=[];function _$(t){const e=t.connectors;return hd(uS,e)?uS:(uS=e,e)}function Ste(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Si(s,pee,"getEnsName")(r)}async function Ite(t,e={}){return(await bv(t,e)).extend(vte)}async function Tte(t,e){const{account:n,chainId:r,...s}=e,i=n??hg(t).address,o=t.getClient({chainId:r});return Si(o,cC,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let dS=!1;async function kT(t,e={}){var l,u;if(dS)return[];dS=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const y=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:y}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),dS=!1,a}async function Nte(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await bv(t,{account:n??void 0,chainId:r,connector:s}),await Si(o,yv,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function Pte(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await bv(t,{account:n,connector:r}),Si(i,CF,"signMessage")({...s,...n?{account:n}:{}})}class Vl extends ll{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class kte extends ll{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function OT(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new kte({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new Zw;return t.setState(a=>({...a,chainId:r})),i}function OF(t,e){const{onChange:n}=e;return t.subscribe(()=>hg(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return hd(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function Ote(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function Rte(t,e){const{onChange:n}=e;return t.subscribe(()=>wa(t),n,{equalityFn:hd})}function RF(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function Dte(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=Si(l,Kee,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}async function $te(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await Si(i,nte,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await Si(i,yF,"getTransaction")({hash:a.transactionHash}),d=await Si(i,pF,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?nj(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function Ute(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await bv(t,{account:n??void 0,chainId:r,connector:s}),await Si(o,AF,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function K5e(t){return t}uC.type="injected";function uC(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...Bte[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:uC.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,y,w,v;const d=await this.getProvider();if(!d)throw new Vl;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(y=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:y.map(x=>Uu(x)),h.length>0&&(h=await this.getAccounts())}catch(b){const x=b;if(x.code===Kn.code)throw new Kn(x);if(x.code===Yu.code)throw x}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(_=>Uu(_))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let b=await this.getChainId();if(l&&b!==l){const x=await this.switchChain({chainId:l}).catch(_=>{if(_.code===Kn.code)throw _;return{id:b}});b=(x==null?void 0:x.id)??b}return e&&await((w=c.storage)==null?void 0:w.removeItem(`${this.id}.disconnected`)),t.target||await((v=c.storage)==null?void 0:v.setItem("injected.connected",!0)),{accounts:h,chainId:b}}catch(b){const x=b;throw x.code===Kn.code?new Kn(x):x.code===Yu.code?new Yu(x):x}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new Vl;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await bF(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new Vl;return(await l.request({method:"eth_accounts"})).map(d=>Uu(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new Vl;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=PE(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(w=>window.addEventListener("ethereum#initialized",()=>w(p()),{once:!0}))]:[],new Promise(w=>setTimeout(()=>w(p()),g))]))return!0}throw new Vl}return!!(await $_(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,y,w;const d=await this.getProvider();if(!d)throw new Vl;const h=c.chains.find(v=>v.id===u);if(!h)throw new Ga(new Zw);const f=new Promise(v=>{const b=x=>{"chainId"in x&&x.chainId===u&&(c.emitter.off("change",b),v())};c.emitter.on("change",b)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:Ye(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(v){const b=v;if(b.code===4902||((g=(p=b==null?void 0:b.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:x,..._}=h.blockExplorers??{};let C;l!=null&&l.blockExplorerUrls?C=l.blockExplorerUrls:x&&(C=[x.url,...Object.values(_).map(A=>A.url)]);let S;(y=l==null?void 0:l.rpcUrls)!=null&&y.length?S=l.rpcUrls:S=[((w=h.rpcUrls.default)==null?void 0:w.http[0])??""];const T={blockExplorerUrls:C,chainId:Ye(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:S};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[T]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new Kn(new Error("User rejected switch after adding network."))}),f]),h}catch(x){throw new Kn(x)}throw b.code===Kn.code?new Kn(b):new Ga(b)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>Uu(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const Bte={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:PE(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return PE(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:PE(t,"isPhantom")}}};function PE(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function Lte(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function Mte(){const t=new Set;let e=[];const n=()=>Lte(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const jte=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},Fte=jte;function zte(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const RT=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return RT(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return RT(r)(n)}}}},Hte=(t,e)=>(n,r,s)=>{let i={storage:zte(()=>localStorage),partialize:g=>g,version:0,merge:(g,y)=>({...y,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,y)=>{d(g,y),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,y;if(!l)return;o=!1,a.forEach(v=>{var b;return v((b=r())!=null?b:h)});const w=((y=i.onRehydrateStorage)==null?void 0:y.call(i,(g=r())!=null?g:h))||void 0;return RT(l.getItem.bind(l))(i.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==i.version){if(i.migrate)return[!0,i.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var b;const[x,_]=v;if(f=i.merge(_,(b=r())!=null?b:h),n(f,!0),x)return u()}).then(()=>{w==null||w(f,void 0),f=r(),o=!0,c.forEach(v=>v(f))}).catch(v=>{w==null||w(void 0,v)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},Wte=Hte,x$=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},hS=t=>t?x$(t):x$;var DF={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var y=this._events[g],w=arguments.length,v,b;if(y.fn){switch(y.once&&this.removeListener(l,y.fn,void 0,!0),w){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,h),!0;case 5:return y.fn.call(y.context,u,d,h,f),!0;case 6:return y.fn.call(y.context,u,d,h,f,p),!0}for(b=1,v=new Array(w-1);b<w;b++)v[b-1]=arguments[b];y.fn.apply(y.context,v)}else{var x=y.length,_;for(b=0;b<x;b++)switch(y[b].once&&this.removeListener(l,y[b].fn,void 0,!0),w){case 1:y[b].fn.call(y[b].context);break;case 2:y[b].fn.call(y[b].context,u);break;case 3:y[b].fn.call(y[b].context,u,d);break;case 4:y[b].fn.call(y[b].context,u,d,h);break;default:if(!v)for(_=1,v=new Array(w-1);_<w;_++)v[_-1]=arguments[_];y[b].fn.apply(y[b].context,v)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,y=[],w=p.length;g<w;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&y.push(p[g]);y.length?this._events[f]=y.length===1?y[0]:y:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(DF);var qte=DF.exports;const Gte=Of(qte);class Vte{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new Gte})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function Kte(t){return new Vte(t)}function Qte(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function C$(t,e){return t.slice(0,e).join(".")||"."}function A$(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function Jte(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=A$(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=A$(s,c);if(u!==0)return r?e.call(this,a,c,C$(i,u)):`[ref=${C$(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function Yte(t,e,n,r){return JSON.stringify(t,Jte((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function Zte(t){const{deserialize:e=Qte,key:n="wagmi",serialize:r=Yte,storage:s=$F}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const $F={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function Xte(){const t=typeof window<"u"&&window.localStorage?window.localStorage:$F;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const DT=256;let w1=DT,b1;function ene(t=11){if(!b1||w1+t>DT*2){b1="",w1=0;for(let e=0;e<DT;e++)b1+=(256+Math.random()*256|0).toString(16).substring(1)}return b1.substring(w1,w1+++t)}function tne(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=Zte({storage:Xte()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?Mte():void 0,a=hS(()=>i.chains),c=hS(()=>{const _=[],C=new Set;for(const S of i.connectors??[]){const T=l(S);if(_.push(T),!s&&T.rdns){const A=typeof T.rdns=="string"?[T.rdns]:T.rdns;for(const P of A)C.add(P)}}if(!s&&o){const S=o.getProviders();for(const T of S)C.has(T.info.rdns)||_.push(l(u(T)))}return _});function l(_){var T;const C=Kte(ene()),S={..._({emitter:C,chains:a.getState(),storage:n,transports:i.transports}),emitter:C,uid:C.uid};return C.on("connect",b),(T=S.setup)==null||T.call(S),S}function u(_){const{info:C}=_,S=_.provider;return uC({target:{...C,id:C.rdns,provider:S}})}const d=new Map;function h(_={}){const C=_.chainId??y.getState().chainId,S=a.getState().find(A=>A.id===C);if(_.chainId&&!S)throw new Zw;{const A=d.get(y.getState().chainId);if(A&&!S)return A;if(!S)throw new Zw}{const A=d.get(C);if(A)return A}let T;if(i.client)T=i.client({chain:S});else{const A=S.id,P=a.getState().map(z=>z.id),R={},j=Object.entries(i);for(const[z,K]of j)if(!(z==="chains"||z==="client"||z==="connectors"||z==="transports"))if(typeof K=="object")if(A in K)R[z]=K[A];else{if(P.some(N=>N in K))continue;R[z]=K}else R[z]=K;T=NF({...R,chain:S,batch:R.batch??{multicall:!0},transport:z=>i.transports[A]({...z,connectors:c})})}return d.set(C,T),T}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";TE.startsWith(g)?p=Number.parseInt(TE.replace(g,"")):p=Number.parseInt(TE.split(".")[0]??"0");const y=hS(Fte(n?Wte(f,{migrate(_,C){if(C===p)return _;const S=f(),T=w(_,S.chainId);return{...S,chainId:T}},name:"store",partialize(_){return{connections:{__type:"Map",value:Array.from(_.connections.entries()).map(([C,S])=>{const{id:T,name:A,type:P,uid:R}=S.connector;return[C,{...S,connector:{id:T,name:A,type:P,uid:R}}]})},chainId:_.chainId,current:_.current}},merge(_,C){typeof _=="object"&&_&&"status"in _&&delete _.status;const S=w(_,C.chainId);return{...C,..._,chainId:S}},skipHydration:s,storage:n,version:p}):f));y.setState(f());function w(_,C){return _&&typeof _=="object"&&"chainId"in _&&typeof _.chainId=="number"&&a.getState().some(S=>S.id===_.chainId)?_.chainId:C}r&&y.subscribe(({connections:_,current:C})=>{var S;return C?(S=_.get(C))==null?void 0:S.chainId:void 0},_=>{if(a.getState().some(S=>S.id===_))return y.setState(S=>({...S,chainId:_??S.chainId}))}),o==null||o.subscribe(_=>{const C=new Set,S=new Set;for(const A of c.getState())if(C.add(A.id),A.rdns){const P=typeof A.rdns=="string"?[A.rdns]:A.rdns;for(const R of P)S.add(R)}const T=[];for(const A of _){if(S.has(A.info.rdns))continue;const P=l(u(A));C.has(P.id)||T.push(P)}n&&!y.persist.hasHydrated()||c.setState(A=>[...A,...T],!0)});function v(_){y.setState(C=>{const S=C.connections.get(_.uid);return S?{...C,connections:new Map(C.connections).set(_.uid,{accounts:_.accounts??S.accounts,chainId:_.chainId??S.chainId,connector:S.connector})}:C})}function b(_){y.getState().status==="connecting"||y.getState().status==="reconnecting"||y.setState(C=>{const S=c.getState().find(T=>T.uid===_.uid);return S?(S.emitter.listenerCount("connect")&&S.emitter.off("connect",v),S.emitter.listenerCount("change")||S.emitter.on("change",v),S.emitter.listenerCount("disconnect")||S.emitter.on("disconnect",x),{...C,connections:new Map(C.connections).set(_.uid,{accounts:_.accounts,chainId:_.chainId,connector:S}),current:_.uid,status:"connected"}):C})}function x(_){y.setState(C=>{const S=C.connections.get(_.uid);if(S){const A=S.connector;A.emitter.listenerCount("change")&&S.connector.emitter.off("change",v),A.emitter.listenerCount("disconnect")&&S.connector.emitter.off("disconnect",x),A.emitter.listenerCount("connect")||S.connector.emitter.on("connect",b)}if(C.connections.delete(_.uid),C.connections.size===0)return{...C,connections:new Map,current:null,status:"disconnected"};const T=C.connections.values().next().value;return{...C,connections:new Map(C.connections),current:T.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return y.getState()},setState(_){let C;typeof _=="function"?C=_(y.getState()):C=_;const S=f();typeof C!="object"&&(C=S),Object.keys(S).some(A=>!(A in C))&&(C=S),y.setState(C,!0)},subscribe(_,C,S){return y.subscribe(_,C,S?{...S,fireImmediately:S.emitImmediately}:void 0)},_internal:{mipd:o,store:y,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(_){const C=typeof _=="function"?_(a.getState()):_;if(C.length!==0)return a.setState(C,!0)},subscribe(_){return a.subscribe(_)}},connectors:{providerDetailToConnector:u,setup:l,setState(_){return c.setState(typeof _=="function"?_(c.getState()):_,!0)},subscribe(_){return c.subscribe(_)}},events:{change:v,connect:b,disconnect:x}}}}function nne(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?kT(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function rne(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=nne(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=D.useRef(!0);return D.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const UF=D.createContext(void 0);function sne(t){const{children:e,config:n}=t,r={value:n};return D.createElement(rne,t,D.createElement(UF.Provider,r,e))}const ine="2.15.6",one=()=>`wagmi@${ine}`;let ane=class extends ll{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return one()}};class cne extends ane{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function Ja(t={}){const e=t.config??D.useContext(UF);if(!e)throw new cne;return e}function lne(t,e){const{onChange:n}=e;return t._internal.chains.subscribe((r,s)=>{n(r,s)})}var BF={exports:{}},LF={},MF={exports:{}},jF={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rm=D;function une(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dne=typeof Object.is=="function"?Object.is:une,hne=Rm.useState,fne=Rm.useEffect,pne=Rm.useLayoutEffect,gne=Rm.useDebugValue;function mne(t,e){var n=e(),r=hne({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return pne(function(){s.value=n,s.getSnapshot=e,fS(s)&&i({inst:s})},[t,n,e]),fne(function(){return fS(s)&&i({inst:s}),t(function(){fS(s)&&i({inst:s})})},[t]),gne(n),n}function fS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!dne(t,n)}catch{return!0}}function yne(t,e){return e()}var wne=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?yne:mne;jF.useSyncExternalStore=Rm.useSyncExternalStore!==void 0?Rm.useSyncExternalStore:wne;MF.exports=jF;var bne=MF.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dC=D,vne=bne;function Ene(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _ne=typeof Object.is=="function"?Object.is:Ene,xne=vne.useSyncExternalStore,Cne=dC.useRef,Ane=dC.useEffect,Sne=dC.useMemo,Ine=dC.useDebugValue;LF.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=Cne(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Sne(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,_ne(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=xne(t,i[0],i[1]);return Ane(function(){o.hasValue=!0,o.value=a},[a]),Ine(a),a};BF.exports=LF;var Tne=BF.exports;const pS=t=>typeof t=="object"&&!Array.isArray(t);function Nne(t,e,n=e,r=hd){const s=D.useRef([]),i=Tne.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(pS(o)&&pS(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return D.useMemo(()=>{if(pS(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function vv(t={}){const e=Ja(t);return Nne(n=>OF(e,{onChange:n}),()=>hg(e))}var oy=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},pf=typeof window>"u"||"Deno"in globalThis;function ls(){}function Pne(t,e){return typeof t=="function"?t(e):t}function $T(t){return typeof t=="number"&&t>=0&&t!==1/0}function FF(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Zu(t,e){return typeof t=="function"?t(e):t}function Mo(t,e){return typeof t=="function"?t(e):t}function S$(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==OO(o,e.options))return!1}else if(!Xw(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function I$(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(gf(e.options.mutationKey)!==gf(i))return!1}else if(!Xw(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function OO(t,e){return((e==null?void 0:e.queryKeyHashFn)||gf)(t)}function gf(t){return JSON.stringify(t,(e,n)=>UT(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Xw(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Xw(t[n],e[n])):!1}function zF(t,e){if(t===e)return t;const n=T$(t)&&T$(e);if(n||UT(t)&&UT(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=zF(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function B_(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function T$(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function UT(t){if(!N$(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!N$(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function N$(t){return Object.prototype.toString.call(t)==="[object Object]"}function kne(t){return new Promise(e=>{setTimeout(e,t)})}function BT(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?zF(t,e):e}function One(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function Rne(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var RO=Symbol();function HF(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===RO?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function WF(t,e){return typeof t=="function"?t(...e):!!t}var vh,au,xg,IB,Dne=(IB=class extends oy{constructor(){super();H(this,vh);H(this,au);H(this,xg);O(this,xg,e=>{if(!pf&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){E(this,au)||this.setEventListener(E(this,xg))}onUnsubscribe(){var e;this.hasListeners()||((e=E(this,au))==null||e.call(this),O(this,au,void 0))}setEventListener(e){var n;O(this,xg,e),(n=E(this,au))==null||n.call(this),O(this,au,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){E(this,vh)!==e&&(O(this,vh,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof E(this,vh)=="boolean"?E(this,vh):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},vh=new WeakMap,au=new WeakMap,xg=new WeakMap,IB),DO=new Dne,Cg,cu,Ag,TB,$ne=(TB=class extends oy{constructor(){super();H(this,Cg,!0);H(this,cu);H(this,Ag);O(this,Ag,e=>{if(!pf&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){E(this,cu)||this.setEventListener(E(this,Ag))}onUnsubscribe(){var e;this.hasListeners()||((e=E(this,cu))==null||e.call(this),O(this,cu,void 0))}setEventListener(e){var n;O(this,Ag,e),(n=E(this,cu))==null||n.call(this),O(this,cu,e(this.setOnline.bind(this)))}setOnline(e){E(this,Cg)!==e&&(O(this,Cg,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return E(this,Cg)}},Cg=new WeakMap,cu=new WeakMap,Ag=new WeakMap,TB),L_=new $ne;function LT(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function Une(t){return Math.min(1e3*2**t,3e4)}function qF(t){return(t??"online")==="online"?L_.isOnline():!0}var GF=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function gS(t){return t instanceof GF}function VF(t){let e=!1,n=0,r=!1,s;const i=LT(),o=g=>{var y;r||(h(new GF(g)),(y=t.abort)==null||y.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>DO.isFocused()&&(t.networkMode==="always"||L_.isOnline())&&t.canRun(),u=()=>qF(t.networkMode)&&t.canRun(),d=g=>{var y;r||(r=!0,(y=t.onSuccess)==null||y.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var y;r||(r=!0,(y=t.onError)==null||y.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var y;s=w=>{(r||l())&&g(w)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const y=n===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(w){g=Promise.reject(w)}Promise.resolve(g).then(d).catch(w=>{var C;if(r)return;const v=t.retry??(pf?0:3),b=t.retryDelay??Une,x=typeof b=="function"?b(n,w):b,_=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,w);if(e||!_){h(w);return}n++,(C=t.onFail)==null||C.call(t,n,w),kne(x).then(()=>l()?void 0:f()).then(()=>{e?h(w):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var Bne=t=>setTimeout(t,0);function Lne(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=Bne;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Yn=Lne(),Eh,NB,KF=(NB=class{constructor(){H(this,Eh)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),$T(this.gcTime)&&O(this,Eh,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(pf?1/0:5*60*1e3))}clearGcTimeout(){E(this,Eh)&&(clearTimeout(E(this,Eh)),O(this,Eh,void 0))}},Eh=new WeakMap,NB),Sg,_h,Gi,xh,Vr,Gb,Ch,To,lc,PB,Mne=(PB=class extends KF{constructor(e){super();H(this,To);H(this,Sg);H(this,_h);H(this,Gi);H(this,xh);H(this,Vr);H(this,Gb);H(this,Ch);O(this,Ch,!1),O(this,Gb,e.defaultOptions),this.setOptions(e.options),this.observers=[],O(this,xh,e.client),O(this,Gi,E(this,xh).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,O(this,Sg,jne(this.options)),this.state=e.state??E(this,Sg),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=E(this,Vr))==null?void 0:e.promise}setOptions(e){this.options={...E(this,Gb),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&E(this,Gi).remove(this)}setData(e,n){const r=BT(this.state.data,e,this.options);return te(this,To,lc).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){te(this,To,lc).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=E(this,Vr))==null?void 0:r.promise;return(s=E(this,Vr))==null||s.cancel(e),n?n.then(ls).catch(ls):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(E(this,Sg))}isActive(){return this.observers.some(e=>Mo(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===RO||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Zu(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!FF(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=E(this,Vr))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=E(this,Vr))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),E(this,Gi).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(E(this,Vr)&&(E(this,Ch)?E(this,Vr).cancel({revert:!0}):E(this,Vr).cancelRetry()),this.scheduleGc()),E(this,Gi).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||te(this,To,lc).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(E(this,Vr))return E(this,Vr).continueRetry(),E(this,Vr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(O(this,Ch,!0),r.signal)})},i=()=>{const h=HF(this.options,n),p=(()=>{const g={client:E(this,xh),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return O(this,Ch,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:E(this,xh),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),O(this,_h,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&te(this,To,lc).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,y;gS(h)&&h.silent||te(this,To,lc).call(this,{type:"error",error:h}),gS(h)||((p=(f=E(this,Gi).config).onError)==null||p.call(f,h,this),(y=(g=E(this,Gi).config).onSettled)==null||y.call(g,this.state.data,h,this)),this.scheduleGc()};return O(this,Vr,VF({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,y;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(w){c(w);return}(p=(f=E(this,Gi).config).onSuccess)==null||p.call(f,h,this),(y=(g=E(this,Gi).config).onSettled)==null||y.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{te(this,To,lc).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{te(this,To,lc).call(this,{type:"pause"})},onContinue:()=>{te(this,To,lc).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),E(this,Vr).start()}},Sg=new WeakMap,_h=new WeakMap,Gi=new WeakMap,xh=new WeakMap,Vr=new WeakMap,Gb=new WeakMap,Ch=new WeakMap,To=new WeakSet,lc=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...QF(r.data,this.options),fetchMeta:e.meta??null};case"success":return O(this,_h,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return gS(s)&&s.revert&&E(this,_h)?{...E(this,_h),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Yn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),E(this,Gi).notify({query:this,type:"updated",action:e})})},PB);function QF(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:qF(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function jne(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ba,kB,Fne=(kB=class extends oy{constructor(e={}){super();H(this,ba);this.config=e,O(this,ba,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??OO(s,n);let o=this.get(i);return o||(o=new Mne({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){E(this,ba).has(e.queryHash)||(E(this,ba).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=E(this,ba).get(e.queryHash);n&&(e.destroy(),n===e&&E(this,ba).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Yn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return E(this,ba).get(e)}getAll(){return[...E(this,ba).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>S$(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>S$(e,r)):n}notify(e){Yn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Yn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Yn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ba=new WeakMap,kB),va,rs,Ah,Ea,jl,OB,zne=(OB=class extends KF{constructor(e){super();H(this,Ea);H(this,va);H(this,rs);H(this,Ah);this.mutationId=e.mutationId,O(this,rs,e.mutationCache),O(this,va,[]),this.state=e.state||JF(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){E(this,va).includes(e)||(E(this,va).push(e),this.clearGcTimeout(),E(this,rs).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){O(this,va,E(this,va).filter(n=>n!==e)),this.scheduleGc(),E(this,rs).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){E(this,va).length||(this.state.status==="pending"?this.scheduleGc():E(this,rs).remove(this))}continue(){var e;return((e=E(this,Ah))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,y,w,v,b,x,_,C,S,T;const n=()=>{te(this,Ea,jl).call(this,{type:"continue"})};O(this,Ah,VF({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(A,P)=>{te(this,Ea,jl).call(this,{type:"failed",failureCount:A,error:P})},onPause:()=>{te(this,Ea,jl).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>E(this,rs).canRun(this)}));const r=this.state.status==="pending",s=!E(this,Ah).canStart();try{if(r)n();else{te(this,Ea,jl).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=E(this,rs).config).onMutate)==null?void 0:o.call(i,e,this));const P=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));P!==this.state.context&&te(this,Ea,jl).call(this,{type:"pending",context:P,variables:e,isPaused:s})}const A=await E(this,Ah).start();return await((u=(l=E(this,rs).config).onSuccess)==null?void 0:u.call(l,A,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,A,e,this.state.context)),await((p=(f=E(this,rs).config).onSettled)==null?void 0:p.call(f,A,null,this.state.variables,this.state.context,this)),await((y=(g=this.options).onSettled)==null?void 0:y.call(g,A,null,e,this.state.context)),te(this,Ea,jl).call(this,{type:"success",data:A}),A}catch(A){try{throw await((v=(w=E(this,rs).config).onError)==null?void 0:v.call(w,A,e,this.state.context,this)),await((x=(b=this.options).onError)==null?void 0:x.call(b,A,e,this.state.context)),await((C=(_=E(this,rs).config).onSettled)==null?void 0:C.call(_,void 0,A,this.state.variables,this.state.context,this)),await((T=(S=this.options).onSettled)==null?void 0:T.call(S,void 0,A,e,this.state.context)),A}finally{te(this,Ea,jl).call(this,{type:"error",error:A})}}finally{E(this,rs).runNext(this)}}},va=new WeakMap,rs=new WeakMap,Ah=new WeakMap,Ea=new WeakSet,jl=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Yn.batch(()=>{E(this,va).forEach(r=>{r.onMutationUpdate(e)}),E(this,rs).notify({mutation:this,type:"updated",action:e})})},OB);function JF(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var _c,No,Vb,RB,Hne=(RB=class extends oy{constructor(e={}){super();H(this,_c);H(this,No);H(this,Vb);this.config=e,O(this,_c,new Set),O(this,No,new Map),O(this,Vb,0)}build(e,n,r){const s=new zne({mutationCache:this,mutationId:++ml(this,Vb)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){E(this,_c).add(e);const n=v1(e);if(typeof n=="string"){const r=E(this,No).get(n);r?r.push(e):E(this,No).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(E(this,_c).delete(e)){const n=v1(e);if(typeof n=="string"){const r=E(this,No).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&E(this,No).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=v1(e);if(typeof n=="string"){const r=E(this,No).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=v1(e);if(typeof n=="string"){const s=(r=E(this,No).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Yn.batch(()=>{E(this,_c).forEach(e=>{this.notify({type:"removed",mutation:e})}),E(this,_c).clear(),E(this,No).clear()})}getAll(){return Array.from(E(this,_c))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>I$(n,r))}findAll(e={}){return this.getAll().filter(n=>I$(e,n))}notify(e){Yn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Yn.batch(()=>Promise.all(e.map(n=>n.continue().catch(ls))))}},_c=new WeakMap,No=new WeakMap,Vb=new WeakMap,RB);function v1(t){var e;return(e=t.options.scope)==null?void 0:e.id}function P$(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const y=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},w=HF(e.options,e.fetchOptions),v=async(b,x,_)=>{if(g)return Promise.reject();if(x==null&&b.pages.length)return Promise.resolve(b);const S=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:x,direction:_?"backward":"forward",meta:e.options.meta};return y(R),R})(),T=await w(S),{maxPages:A}=e.options,P=_?Rne:One;return{pages:P(b.pages,T,A),pageParams:P(b.pageParams,x,A)}};if(s&&i.length){const b=s==="backward",x=b?Wne:k$,_={pages:i,pageParams:o},C=x(r,_);a=await v(_,C,b)}else{const b=t??i.length;do{const x=c===0?o[0]??r.initialPageParam:k$(r,a);if(c>0&&x==null)break;a=await v(a,x),c++}while(c<b)}return a};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function k$(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Wne(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var In,lu,uu,Ig,Tg,du,Ng,Pg,DB,qne=(DB=class{constructor(t={}){H(this,In);H(this,lu);H(this,uu);H(this,Ig);H(this,Tg);H(this,du);H(this,Ng);H(this,Pg);O(this,In,t.queryCache||new Fne),O(this,lu,t.mutationCache||new Hne),O(this,uu,t.defaultOptions||{}),O(this,Ig,new Map),O(this,Tg,new Map),O(this,du,0)}mount(){ml(this,du)._++,E(this,du)===1&&(O(this,Ng,DO.subscribe(async t=>{t&&(await this.resumePausedMutations(),E(this,In).onFocus())})),O(this,Pg,L_.subscribe(async t=>{t&&(await this.resumePausedMutations(),E(this,In).onOnline())})))}unmount(){var t,e;ml(this,du)._--,E(this,du)===0&&((t=E(this,Ng))==null||t.call(this),O(this,Ng,void 0),(e=E(this,Pg))==null||e.call(this),O(this,Pg,void 0))}isFetching(t){return E(this,In).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return E(this,lu).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=E(this,In).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=E(this,In).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Zu(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return E(this,In).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=E(this,In).get(r.queryHash),i=s==null?void 0:s.state.data,o=Pne(e,i);if(o!==void 0)return E(this,In).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Yn.batch(()=>E(this,In).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=E(this,In).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=E(this,In);Yn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=E(this,In);return Yn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Yn.batch(()=>E(this,In).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(ls).catch(ls)}invalidateQueries(t,e={}){return Yn.batch(()=>(E(this,In).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Yn.batch(()=>E(this,In).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(ls)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(ls)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=E(this,In).build(this,e);return n.isStaleByTime(Zu(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ls).catch(ls)}fetchInfiniteQuery(t){return t.behavior=P$(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ls).catch(ls)}ensureInfiniteQueryData(t){return t.behavior=P$(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return L_.isOnline()?E(this,lu).resumePausedMutations():Promise.resolve()}getQueryCache(){return E(this,In)}getMutationCache(){return E(this,lu)}getDefaultOptions(){return E(this,uu)}setDefaultOptions(t){O(this,uu,t)}setQueryDefaults(t,e){E(this,Ig).set(gf(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...E(this,Ig).values()],n={};return e.forEach(r=>{Xw(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){E(this,Tg).set(gf(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...E(this,Tg).values()],n={};return e.forEach(r=>{Xw(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...E(this,uu).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=OO(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===RO&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...E(this,uu).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){E(this,In).clear(),E(this,lu).clear()}},In=new WeakMap,lu=new WeakMap,uu=new WeakMap,Ig=new WeakMap,Tg=new WeakMap,du=new WeakMap,Ng=new WeakMap,Pg=new WeakMap,DB),Us,mt,Kb,ss,Sh,kg,hu,fu,Qb,Og,Rg,Ih,Th,pu,Dg,Lt,y0,MT,jT,FT,zT,HT,WT,qT,YF,$B,Gne=($B=class extends oy{constructor(e,n){super();H(this,Lt);H(this,Us);H(this,mt);H(this,Kb);H(this,ss);H(this,Sh);H(this,kg);H(this,hu);H(this,fu);H(this,Qb);H(this,Og);H(this,Rg);H(this,Ih);H(this,Th);H(this,pu);H(this,Dg,new Set);this.options=n,O(this,Us,e),O(this,fu,null),O(this,hu,LT()),this.options.experimental_prefetchInRender||E(this,hu).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(E(this,mt).addObserver(this),O$(E(this,mt),this.options)?te(this,Lt,y0).call(this):this.updateResult(),te(this,Lt,zT).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return GT(E(this,mt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return GT(E(this,mt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,te(this,Lt,HT).call(this),te(this,Lt,WT).call(this),E(this,mt).removeObserver(this)}setOptions(e){const n=this.options,r=E(this,mt);if(this.options=E(this,Us).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Mo(this.options.enabled,E(this,mt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");te(this,Lt,qT).call(this),E(this,mt).setOptions(this.options),n._defaulted&&!B_(this.options,n)&&E(this,Us).getQueryCache().notify({type:"observerOptionsUpdated",query:E(this,mt),observer:this});const s=this.hasListeners();s&&R$(E(this,mt),r,this.options,n)&&te(this,Lt,y0).call(this),this.updateResult(),s&&(E(this,mt)!==r||Mo(this.options.enabled,E(this,mt))!==Mo(n.enabled,E(this,mt))||Zu(this.options.staleTime,E(this,mt))!==Zu(n.staleTime,E(this,mt)))&&te(this,Lt,MT).call(this);const i=te(this,Lt,jT).call(this);s&&(E(this,mt)!==r||Mo(this.options.enabled,E(this,mt))!==Mo(n.enabled,E(this,mt))||i!==E(this,pu))&&te(this,Lt,FT).call(this,i)}getOptimisticResult(e){const n=E(this,Us).getQueryCache().build(E(this,Us),e),r=this.createResult(n,e);return Kne(this,r)&&(O(this,ss,r),O(this,kg,this.options),O(this,Sh,E(this,mt).state)),r}getCurrentResult(){return E(this,ss)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){E(this,Dg).add(e)}getCurrentQuery(){return E(this,mt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=E(this,Us).defaultQueryOptions(e),r=E(this,Us).getQueryCache().build(E(this,Us),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return te(this,Lt,y0).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),E(this,ss)))}createResult(e,n){var A;const r=E(this,mt),s=this.options,i=E(this,ss),o=E(this,Sh),a=E(this,kg),l=e!==r?e.state:E(this,Kb),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const P=this.hasListeners(),R=!P&&O$(e,n),j=P&&R$(e,r,n,s);(R||j)&&(d={...d,...QF(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:y}=d;f=d.data;let w=!1;if(n.placeholderData!==void 0&&f===void 0&&y==="pending"){let P;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(P=i.data,w=!0):P=typeof n.placeholderData=="function"?n.placeholderData((A=E(this,Rg))==null?void 0:A.state.data,E(this,Rg)):n.placeholderData,P!==void 0&&(y="success",f=BT(i==null?void 0:i.data,P,n),h=!0)}if(n.select&&f!==void 0&&!w)if(i&&f===(o==null?void 0:o.data)&&n.select===E(this,Qb))f=E(this,Og);else try{O(this,Qb,n.select),f=n.select(f),f=BT(i==null?void 0:i.data,f,n),O(this,Og,f),O(this,fu,null)}catch(P){O(this,fu,P)}E(this,fu)&&(p=E(this,fu),f=E(this,Og),g=Date.now(),y="error");const v=d.fetchStatus==="fetching",b=y==="pending",x=y==="error",_=b&&v,C=f!==void 0,T={status:y,fetchStatus:d.fetchStatus,isPending:b,isSuccess:y==="success",isError:x,isInitialLoading:_,isLoading:_,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:v,isRefetching:v&&!b,isLoadingError:x&&!C,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:x&&C,isStale:$O(e,n),refetch:this.refetch,promise:E(this,hu)};if(this.options.experimental_prefetchInRender){const P=z=>{T.status==="error"?z.reject(T.error):T.data!==void 0&&z.resolve(T.data)},R=()=>{const z=O(this,hu,T.promise=LT());P(z)},j=E(this,hu);switch(j.status){case"pending":e.queryHash===r.queryHash&&P(j);break;case"fulfilled":(T.status==="error"||T.data!==j.value)&&R();break;case"rejected":(T.status!=="error"||T.error!==j.reason)&&R();break}}return T}updateResult(){const e=E(this,ss),n=this.createResult(E(this,mt),this.options);if(O(this,Sh,E(this,mt).state),O(this,kg,this.options),E(this,Sh).data!==void 0&&O(this,Rg,E(this,mt)),B_(n,e))return;O(this,ss,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!E(this,Dg).size)return!0;const o=new Set(i??E(this,Dg));return this.options.throwOnError&&o.add("error"),Object.keys(E(this,ss)).some(a=>{const c=a;return E(this,ss)[c]!==e[c]&&o.has(c)})};te(this,Lt,YF).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&te(this,Lt,zT).call(this)}},Us=new WeakMap,mt=new WeakMap,Kb=new WeakMap,ss=new WeakMap,Sh=new WeakMap,kg=new WeakMap,hu=new WeakMap,fu=new WeakMap,Qb=new WeakMap,Og=new WeakMap,Rg=new WeakMap,Ih=new WeakMap,Th=new WeakMap,pu=new WeakMap,Dg=new WeakMap,Lt=new WeakSet,y0=function(e){te(this,Lt,qT).call(this);let n=E(this,mt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(ls)),n},MT=function(){te(this,Lt,HT).call(this);const e=Zu(this.options.staleTime,E(this,mt));if(pf||E(this,ss).isStale||!$T(e))return;const r=FF(E(this,ss).dataUpdatedAt,e)+1;O(this,Ih,setTimeout(()=>{E(this,ss).isStale||this.updateResult()},r))},jT=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(E(this,mt)):this.options.refetchInterval)??!1},FT=function(e){te(this,Lt,WT).call(this),O(this,pu,e),!(pf||Mo(this.options.enabled,E(this,mt))===!1||!$T(E(this,pu))||E(this,pu)===0)&&O(this,Th,setInterval(()=>{(this.options.refetchIntervalInBackground||DO.isFocused())&&te(this,Lt,y0).call(this)},E(this,pu)))},zT=function(){te(this,Lt,MT).call(this),te(this,Lt,FT).call(this,te(this,Lt,jT).call(this))},HT=function(){E(this,Ih)&&(clearTimeout(E(this,Ih)),O(this,Ih,void 0))},WT=function(){E(this,Th)&&(clearInterval(E(this,Th)),O(this,Th,void 0))},qT=function(){const e=E(this,Us).getQueryCache().build(E(this,Us),this.options);if(e===E(this,mt))return;const n=E(this,mt);O(this,mt,e),O(this,Kb,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},YF=function(e){Yn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(E(this,ss))}),E(this,Us).getQueryCache().notify({query:E(this,mt),type:"observerResultsUpdated"})})},$B);function Vne(t,e){return Mo(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function O$(t,e){return Vne(t,e)||t.state.data!==void 0&&GT(t,e,e.refetchOnMount)}function GT(t,e,n){if(Mo(e.enabled,t)!==!1&&Zu(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&$O(t,e)}return!1}function R$(t,e,n,r){return(t!==e||Mo(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&$O(t,n)}function $O(t,e){return Mo(e.enabled,t)!==!1&&t.isStaleByTime(Zu(e.staleTime,t))}function Kne(t,e){return!B_(t.getCurrentResult(),e)}var gu,mu,Bs,xc,Qc,kE,VT,UB,Qne=(UB=class extends oy{constructor(n,r){super();H(this,Qc);H(this,gu);H(this,mu);H(this,Bs);H(this,xc);O(this,gu,n),this.setOptions(r),this.bindMethods(),te(this,Qc,kE).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=E(this,gu).defaultMutationOptions(n),B_(this.options,r)||E(this,gu).getMutationCache().notify({type:"observerOptionsUpdated",mutation:E(this,Bs),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&gf(r.mutationKey)!==gf(this.options.mutationKey)?this.reset():((s=E(this,Bs))==null?void 0:s.state.status)==="pending"&&E(this,Bs).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=E(this,Bs))==null||n.removeObserver(this)}onMutationUpdate(n){te(this,Qc,kE).call(this),te(this,Qc,VT).call(this,n)}getCurrentResult(){return E(this,mu)}reset(){var n;(n=E(this,Bs))==null||n.removeObserver(this),O(this,Bs,void 0),te(this,Qc,kE).call(this),te(this,Qc,VT).call(this)}mutate(n,r){var s;return O(this,xc,r),(s=E(this,Bs))==null||s.removeObserver(this),O(this,Bs,E(this,gu).getMutationCache().build(E(this,gu),this.options)),E(this,Bs).addObserver(this),E(this,Bs).execute(n)}},gu=new WeakMap,mu=new WeakMap,Bs=new WeakMap,xc=new WeakMap,Qc=new WeakSet,kE=function(){var r;const n=((r=E(this,Bs))==null?void 0:r.state)??JF();O(this,mu,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},VT=function(n){Yn.batch(()=>{var r,s,i,o,a,c,l,u;if(E(this,xc)&&this.hasListeners()){const d=E(this,mu).variables,h=E(this,mu).context;(n==null?void 0:n.type)==="success"?((s=(r=E(this,xc)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=E(this,xc)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=E(this,xc)).onError)==null||c.call(a,n.error,d,h),(u=(l=E(this,xc)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(E(this,mu))})})},UB);function Jne(t){return JSON.stringify(t,(e,n)=>Yne(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function Yne(t){if(!D$(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!D$(n)||!n.hasOwnProperty("isPrototypeOf"))}function D$(t){return Object.prototype.toString.call(t)==="[object Object]"}function ZF(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:y,getNextPageParam:w,initialPageParam:v,_optimisticResults:b,enabled:x,notifyOnChangeProps:_,placeholderData:C,refetchInterval:S,refetchIntervalInBackground:T,refetchOnMount:A,refetchOnReconnect:P,refetchOnWindowFocus:R,retryOnMount:j,select:z,staleTime:K,suspense:I,throwOnError:N,config:L,connector:U,query:$,...M}=t;return M}function Zne(t){return{mutationFn(e){return NE(t,e)},mutationKey:["connect"]}}function Xne(t){return{mutationFn(e){return PF(t,e)},mutationKey:["disconnect"]}}function ere(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return Ste(t,{...i,address:r})},queryKey:tre(e)}}function tre(t={}){return["ensName",ZF(t)]}function nre(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return Ite(t,{...o,connector:r})},queryKey:rre(e)}}function rre(t={}){const{connector:e,...n}=t;return["walletClient",{...ZF(n),connectorUid:e==null?void 0:e.uid}]}function sre(t){return{mutationFn(e){return OT(t,e)},mutationKey:["switchChain"]}}var XF=D.createContext(void 0),UO=t=>{const e=D.useContext(XF);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},ire=({client:t,children:e})=>(D.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(XF.Provider,{value:t,children:e})),e9=D.createContext(!1),ore=()=>D.useContext(e9);e9.Provider;function are(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var cre=D.createContext(are()),lre=()=>D.useContext(cre),ure=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},dre=t=>{D.useEffect(()=>{t.clearReset()},[t])},hre=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||WF(n,[t.error,r])),fre=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},pre=(t,e)=>t.isLoading&&t.isFetching&&!e,gre=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,$$=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function mre(t,e,n){var d,h,f,p,g;const r=ore(),s=lre(),i=UO(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",fre(o),ure(o,s),dre(s);const a=!i.getQueryCache().get(o.queryHash),[c]=D.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(D.useSyncExternalStore(D.useCallback(y=>{const w=u?c.subscribe(Yn.batchCalls(y)):ls;return c.updateResult(),w},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),D.useEffect(()=>{c.setOptions(o)},[o,c]),gre(o,l))throw $$(o,c,s);if(hre({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!pf&&pre(l,r)){const y=a?$$(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;y==null||y.catch(ls).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function yre(t,e){return mre(t,Gne)}function BO(t,e){const n=UO(),[r]=D.useState(()=>new Qne(n,t));D.useEffect(()=>{r.setOptions(t)},[r,t]);const s=D.useSyncExternalStore(D.useCallback(o=>r.subscribe(Yn.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=D.useCallback((o,a)=>{r.mutate(o,a).catch(ls)},[r]);if(s.error&&WF(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function t9(t){const e=yre({...t,queryKeyHashFn:Jne});return e.queryKey=t.queryKey,e}function n9(t={}){const e=Ja(t);return D.useSyncExternalStore(n=>Ote(e,{onChange:n}),()=>v$(e),()=>v$(e))}function wre(t={}){const e=Ja(t);return D.useSyncExternalStore(n=>lne(e,{onChange:n}),()=>E$(e),()=>E$(e))}function bre(t={}){const e=Ja(t);return D.useSyncExternalStore(n=>RF(e,{onChange:n}),()=>_$(e),()=>_$(e))}function r9(t={}){const{mutation:e}=t,n=Ja(t),r=Zne(n),{mutate:s,mutateAsync:i,...o}=BO({...e,...r});return D.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:bre({config:n})}}function vre(t={}){const e=Ja(t);return D.useSyncExternalStore(n=>Rte(e,{onChange:n}),()=>wa(e),()=>wa(e))}function s9(t={}){const{mutation:e}=t,n=Ja(t),r=Xne(n),{mutate:s,mutateAsync:i,...o}=BO({...e,...r});return{...o,connectors:vre({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function i9(t={}){const{address:e,query:n={}}=t,r=Ja(t),s=n9({config:r}),i=ere(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return t9({...n,...i,enabled:o})}function Ere(t={}){const{mutation:e}=t,n=Ja(t),r=sre(n),{mutate:s,mutateAsync:i,...o}=BO({...e,...r});return{...o,chains:wre({config:n}),switchChain:s,switchChainAsync:i}}function o9(t={}){const{query:e={},...n}=t,r=Ja(n),s=UO(),{address:i,connector:o,status:a}=vv({config:r}),c=n9({config:r}),l=t.connector??o,{queryKey:u,...d}=nre(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=D.useRef(i);return D.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),t9({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}const _re="_verified_lvyh0_1",LO={verified:_re},xre=()=>m.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:LO.verified,children:m.jsx("g",{children:m.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),Cre=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:LO.verified,children:m.jsxs("g",{children:[m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[m.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),m.jsx("stop",{offset:".539",stopColor:"#cd8105"}),m.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),m.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),m.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[m.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),m.jsx("stop",{offset:".406",stopColor:"#e2b719"}),m.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),m.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[m.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),m.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),m.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),Are=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:LO.verified,children:m.jsx("g",{children:m.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function a9(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=a9(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Xu(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=a9(t))&&(r&&(r+=" "),r+=e);return r}const Sre="_root_98iqw_1",Ire="_article_98iqw_21",U$={root:Sre,article:Ire},MO=({className:t,children:e})=>m.jsx("div",{className:Xu("react-tweet-theme",U$.root,t),children:m.jsx("article",{className:U$.article,children:e})}),c9=t=>m.jsx("img",{...t}),Tre="_header_nqq4j_1",Nre="_avatar_nqq4j_11",Pre="_avatarOverflow_nqq4j_16",kre="_avatarSquare_nqq4j_23",Ore="_avatarShadow_nqq4j_26",Rre="_author_nqq4j_37",Dre="_authorLink_nqq4j_44",$re="_authorVerified_nqq4j_53",Ure="_authorLinkText_nqq4j_56",Bre="_authorMeta_nqq4j_63",Lre="_authorFollow_nqq4j_66",Mre="_username_nqq4j_69",jre="_follow_nqq4j_74",Fre="_separator_nqq4j_82",zre="_brand_nqq4j_86",Hre="_twitterIcon_nqq4j_90",mr={header:Tre,avatar:Nre,avatarOverflow:Pre,avatarSquare:kre,avatarShadow:Ore,author:Rre,authorLink:Dre,authorVerified:$re,authorLinkText:Ure,authorMeta:Bre,authorFollow:Lre,username:Mre,follow:jre,separator:Fre,brand:zre,twitterIcon:Hre},Wre="_verifiedOld_lcna5_1",qre="_verifiedBlue_lcna5_4",Gre="_verifiedGovernment_lcna5_7",mS={verifiedOld:Wre,verifiedBlue:qre,verifiedGovernment:Gre},l9=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=m.jsx(xre,{}),s=mS.verifiedBlue;if(n)switch(t.is_blue_verified||(s=mS.verifiedOld),t.verified_type){case"Government":r=m.jsx(Are,{}),s=mS.verifiedGovernment;break;case"Business":r=m.jsx(Cre,{}),s=null;break}return n?m.jsx("div",{className:Xu(e,s),children:r}):null},Vre=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:c9,{user:s}=t;return m.jsxs("div",{className:mr.header,children:[m.jsxs("a",{href:t.url,className:mr.avatar,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:Xu(mr.avatarOverflow,s.profile_image_shape==="Square"&&mr.avatarSquare),children:m.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),m.jsx("div",{className:mr.avatarOverflow,children:m.jsx("div",{className:mr.avatarShadow})})]}),m.jsxs("div",{className:mr.author,children:[m.jsxs("a",{href:t.url,className:mr.authorLink,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:mr.authorLinkText,children:m.jsx("span",{title:s.name,children:s.name})}),m.jsx(l9,{user:s,className:mr.authorVerified})]}),m.jsxs("div",{className:mr.authorMeta,children:[m.jsx("a",{href:t.url,className:mr.username,target:"_blank",rel:"noopener noreferrer",children:m.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),m.jsxs("div",{className:mr.authorFollow,children:[m.jsx("span",{className:mr.separator,children:"·"}),m.jsx("a",{href:s.follow_url,className:mr.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),m.jsx("a",{href:t.url,className:mr.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:mr.twitterIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},Kre="_root_1ec15_1",Qre={root:Kre},Jre=({tweet:t})=>m.jsxs("a",{href:t.in_reply_to_url,className:Qre.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),Yre="_root_eihfa_1",Zre={root:Yre},Xre=({href:t,children:e})=>m.jsx("a",{href:t,className:Zre.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),ese="_root_1xq52_1",tse={root:ese},nse=({tweet:t})=>m.jsx("p",{className:tse.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return m.jsx(Xre,{href:e.href,children:e.text},n);case"media":return;default:return m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),B$=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,u9=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,rse=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,sse=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,ise=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,ose=t=>`https://x.com/hashtag/${t.text}`,ase=t=>`https://x.com/search?q=%24${t.text}`,cse=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,d9=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},lse=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},use=t=>{const e=lse(t);return e.length>1?e[1]:e[0]},KT=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function L$(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return jy(n,"hashtag",t.entities.hashtags),jy(n,"mention",t.entities.user_mentions),jy(n,"url",t.entities.urls),jy(n,"symbol",t.entities.symbols),t.entities.media&&jy(n,"media",t.entities.media),dse(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:ose(r),text:s});case"mention":return Object.assign(r,{href:u9(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:ase(r),text:s});default:return Object.assign(r,{text:s})}})}function jy(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function dse(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const hse=t=>({...t,url:B$(t),user:{...t.user,url:u9(t),follow_url:ise(t)},like_url:rse(t),reply_url:sse(t),in_reply_to_url:t.in_reply_to_screen_name?cse(t):void 0,entities:L$(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:B$(t.quoted_tweet),entities:L$(t.quoted_tweet)}:void 0}),fse="_root_g9tkv_1",pse="_rounded_g9tkv_6",gse="_mediaWrapper_g9tkv_10",mse="_grid2Columns_g9tkv_17",yse="_grid3_g9tkv_20",wse="_grid2x2_g9tkv_23",bse="_mediaContainer_g9tkv_26",vse="_mediaLink_g9tkv_34",Ese="_skeleton_g9tkv_38",_se="_image_g9tkv_43",ci={root:fse,rounded:pse,mediaWrapper:gse,grid2Columns:mse,grid3:yse,grid2x2:wse,mediaContainer:bse,mediaLink:vse,skeleton:Ese,image:_se},xse="_anchor_fp31d_1",Cse="_videoButton_fp31d_17",Ase="_videoButtonIcon_fp31d_35",Sse="_watchOnTwitter_fp31d_44",Ise="_viewReplies_fp31d_60",Zf={anchor:xse,videoButton:Cse,videoButtonIcon:Ase,watchOnTwitter:Sse,viewReplies:Ise},Tse=({tweet:t,media:e})=>{const[n,r]=D.useState(!0),[s,i]=D.useState(!1),[o,a]=D.useState(!1),c=use(e);let l=0;return m.jsxs(m.Fragment,{children:[m.jsx("video",{className:ci.image,poster:d9(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:m.jsx("source",{src:c.url,type:c.content_type})}),n&&m.jsx("button",{type:"button",className:Zf.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:m.jsx("svg",{viewBox:"0 0 24 24",className:Zf.videoButtonIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&m.jsx("div",{className:Zf.watchOnTwitter,children:m.jsx("a",{href:t.url,className:Zf.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&m.jsx("a",{href:t.url,className:Xu(Zf.anchor,Zf.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},Nse=t=>m.jsx("img",{...t}),M$=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},h9=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:Nse;return m.jsx("div",{className:Xu(ci.root,!n&&ci.rounded),children:m.jsx("div",{className:Xu(ci.mediaWrapper,o>1&&ci.grid2Columns,o===3&&ci.grid3,o>4&&ci.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>m.jsx(D.Fragment,{children:l.type==="photo"?m.jsxs("a",{href:t.url,className:Xu(ci.mediaContainer,ci.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:ci.skeleton,style:M$(l,o)}),m.jsx(c,{src:d9(l,"small"),alt:l.ext_alt_text||"Image",className:ci.image,draggable:!0})]},l.media_url_https):m.jsxs("div",{className:ci.mediaContainer,children:[m.jsx("div",{className:ci.skeleton,style:M$(l,o)}),m.jsx(Tse,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},Pse={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},kse=new Intl.DateTimeFormat("en-US",Pse),Ose=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},Rse=t=>{const e=Ose(kse.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n} · ${r}`},Dse="_root_i24yn_1",$se={root:Dse},Use=({tweet:t})=>{const e=new Date(t.created_at),n=Rse(e);return m.jsx("a",{className:$se.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:m.jsx("time",{dateTime:e.toISOString(),children:n})})},Bse="_info_19qcj_1",Lse="_infoLink_19qcj_10",Mse="_infoIcon_19qcj_30",yS={info:Bse,infoLink:Lse,infoIcon:Mse},jse=({tweet:t})=>m.jsxs("div",{className:yS.info,children:[m.jsx(Use,{tweet:t}),m.jsx("a",{className:yS.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:yS.infoIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),Fse="_actions_n2anf_1",zse="_like_n2anf_13",Hse="_reply_n2anf_14",Wse="_copy_n2anf_15",qse="_likeIconWrapper_n2anf_27",Gse="_likeCount_n2anf_30",Vse="_replyIconWrapper_n2anf_35",Kse="_copyIconWrapper_n2anf_36",Qse="_likeIcon_n2anf_27",Jse="_replyIcon_n2anf_35",Yse="_copyIcon_n2anf_36",Zse="_replyText_n2anf_56",Xse="_copyText_n2anf_57",js={actions:Fse,like:zse,reply:Hse,copy:Wse,likeIconWrapper:qse,likeCount:Gse,replyIconWrapper:Vse,copyIconWrapper:Kse,likeIcon:Qse,replyIcon:Jse,copyIcon:Yse,replyText:Zse,copyText:Xse},eie=({tweet:t})=>{const[e,n]=D.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return D.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),m.jsxs("button",{type:"button",className:js.copy,"aria-label":"Copy link",onClick:r,children:[m.jsx("div",{className:js.copyIconWrapper,children:e?m.jsx("svg",{viewBox:"0 0 24 24",className:js.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):m.jsx("svg",{viewBox:"0 0 24 24",className:js.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),m.jsx("span",{className:js.copyText,children:e?"Copied!":"Copy link"})]})},tie=({tweet:t})=>{const e=KT(t.favorite_count);return m.jsxs("div",{className:js.actions,children:[m.jsxs("a",{className:js.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[m.jsx("div",{className:js.likeIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:js.likeIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),m.jsx("span",{className:js.likeCount,children:e})]}),m.jsxs("a",{className:js.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[m.jsx("div",{className:js.replyIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:js.replyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),m.jsx("span",{className:js.replyText,children:"Reply"})]}),m.jsx(eie,{tweet:t})]})},nie="_replies_1cutb_1",rie="_link_1cutb_4",sie="_text_1cutb_23",wS={replies:nie,link:rie,text:sie},iie=({tweet:t})=>m.jsx("div",{className:wS.replies,children:m.jsx("a",{className:wS.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:m.jsx("span",{className:wS.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${KT(t.conversation_count)} reply`:`Read ${KT(t.conversation_count)} replies`})})}),oie="_root_q5799_1",aie="_article_q5799_16",j$={root:oie,article:aie},cie=({tweet:t,children:e})=>m.jsx("div",{className:j$.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:m.jsx("article",{className:j$.article,children:e})}),lie="_header_r31i5_1",uie="_avatar_r31i5_11",die="_avatarSquare_r31i5_17",hie="_author_r31i5_21",fie="_authorText_r31i5_26",pie="_username_r31i5_33",kd={header:lie,avatar:uie,avatarSquare:die,author:hie,authorText:fie,username:pie},gie=({tweet:t})=>{const{user:e}=t;return m.jsxs("div",{className:kd.header,children:[m.jsx("a",{href:t.url,className:kd.avatar,target:"_blank",rel:"noopener noreferrer",children:m.jsx("div",{className:Xu(kd.avatarOverflow,e.profile_image_shape==="Square"&&kd.avatarSquare),children:m.jsx(c9,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),m.jsxs("div",{className:kd.author,children:[m.jsx("div",{className:kd.authorText,children:m.jsx("span",{title:e.name,children:e.name})}),m.jsx(l9,{user:e}),m.jsx("div",{className:kd.username,children:m.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},mie="_root_175ot_1",yie={root:mie},wie=({tweet:t})=>m.jsx("p",{className:yie.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),bie=({tweet:t})=>{var e;return m.jsxs(cie,{tweet:t,children:[m.jsx(gie,{tweet:t}),m.jsx(wie,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?m.jsx(h9,{quoted:!0,tweet:t}):null]})},vie=({tweet:t,components:e})=>{var n;const r=D.useMemo(()=>hse(t),[t]);return m.jsxs(MO,{children:[m.jsx(Vre,{tweet:r,components:e}),r.in_reply_to_status_id_str&&m.jsx(Jre,{tweet:r}),m.jsx(nse,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?m.jsx(h9,{tweet:r,components:e}):null,r.quoted_tweet&&m.jsx(bie,{tweet:r.quoted_tweet}),m.jsx(jse,{tweet:r}),m.jsx(tie,{tweet:r}),m.jsx(iie,{tweet:r})]})},Eie="_root_16yxa_1",_ie={root:Eie},xie=t=>m.jsx(MO,{children:m.jsxs("div",{className:_ie.root,children:[m.jsx("h3",{children:"Tweet not found"}),m.jsx("p",{children:"The embedded tweet could not be found…"})]})}),Cie="_skeleton_oi7hr_1",Aie={skeleton:Cie},E1=({style:t})=>m.jsx("span",{className:Aie.skeleton,style:t}),Sie="_root_17qqv_1",Iie={root:Sie},Tie=()=>m.jsxs(MO,{className:Iie.root,children:[m.jsx(E1,{style:{height:"3rem",marginBottom:"0.75rem"}}),m.jsx(E1,{style:{height:"6rem",margin:"0.5rem 0"}}),m.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),m.jsx(E1,{style:{height:"2rem"}}),m.jsx(E1,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]});var f9={exports:{}},p9={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dm=D;function Nie(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pie=typeof Object.is=="function"?Object.is:Nie,kie=Dm.useState,Oie=Dm.useEffect,Rie=Dm.useLayoutEffect,Die=Dm.useDebugValue;function $ie(t,e){var n=e(),r=kie({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Rie(function(){s.value=n,s.getSnapshot=e,bS(s)&&i({inst:s})},[t,n,e]),Oie(function(){return bS(s)&&i({inst:s}),t(function(){bS(s)&&i({inst:s})})},[t]),Die(n),n}function bS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Pie(t,n)}catch{return!0}}function Uie(t,e){return e()}var Bie=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Uie:$ie;p9.useSyncExternalStore=Dm.useSyncExternalStore!==void 0?Dm.useSyncExternalStore:Bie;f9.exports=p9;var Lie=f9.exports;const g9=0,m9=1,y9=2,F$=3;var z$=Object.prototype.hasOwnProperty;function QT(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&QT(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(z$.call(t,n)&&++r&&!z$.call(e,n)||!(n in e)||!QT(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const $c=new WeakMap,Bu=()=>{},us=Bu(),JT=Object,xt=t=>t===us,Ra=t=>typeof t=="function",fd=(t,e)=>({...t,...e}),w9=t=>Ra(t.then),vS={},_1={},jO="undefined",Ev=typeof window!=jO,YT=typeof document!=jO,Mie=Ev&&"Deno"in window,jie=()=>Ev&&typeof window.requestAnimationFrame!=jO,b9=(t,e)=>{const n=$c.get(t);return[()=>!xt(e)&&t.get(e)||vS,r=>{if(!xt(e)){const s=t.get(e);e in _1||(_1[e]=s),n[5](e,fd(s,r),s||vS)}},n[6],()=>!xt(e)&&e in _1?_1[e]:!xt(e)&&t.get(e)||vS]};let ZT=!0;const Fie=()=>ZT,[XT,eN]=Ev&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Bu,Bu],zie=()=>{const t=YT&&document.visibilityState;return xt(t)||t!=="hidden"},Hie=t=>(YT&&document.addEventListener("visibilitychange",t),XT("focus",t),()=>{YT&&document.removeEventListener("visibilitychange",t),eN("focus",t)}),Wie=t=>{const e=()=>{ZT=!0,t()},n=()=>{ZT=!1};return XT("online",e),XT("offline",n),()=>{eN("online",e),eN("offline",n)}},qie={isOnline:Fie,isVisible:zie},Gie={initFocus:Hie,initReconnect:Wie},H$=!Ci.useId,eb=!Ev||Mie,Vie=t=>jie()?window.requestAnimationFrame(t):setTimeout(t,1),ES=eb?D.useEffect:D.useLayoutEffect,_S=typeof navigator<"u"&&navigator.connection,W$=!eb&&_S&&(["slow-2g","2g"].includes(_S.effectiveType)||_S.saveData),x1=new WeakMap,xS=(t,e)=>JT.prototype.toString.call(t)===`[object ${e}]`;let Kie=0;const tN=t=>{const e=typeof t,n=xS(t,"Date"),r=xS(t,"RegExp"),s=xS(t,"Object");let i,o;if(JT(t)===t&&!n&&!r){if(i=x1.get(t),i)return i;if(i=++Kie+"~",x1.set(t,i),Array.isArray(t)){for(i="@",o=0;o<t.length;o++)i+=tN(t[o])+",";x1.set(t,i)}if(s){i="#";const a=JT.keys(t).sort();for(;!xt(o=a.pop());)xt(t[o])||(i+=o+":"+tN(t[o])+",");x1.set(t,i)}}else i=n?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return i},FO=t=>{if(Ra(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?tN(t):"",[t,e]};let Qie=0;const nN=()=>++Qie;async function v9(...t){const[e,n,r,s]=t,i=fd({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(Ra(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=FO(h);if(!f)return;const[p,g]=b9(e,f),[y,w,v,b]=$c.get(e),x=()=>{const z=y[f];return(Ra(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete v[f],delete b[f],z&&z[0])?z[0](y9).then(()=>p().data):p().data};if(t.length<3)return x();let _=r,C;const S=nN();w[f]=[S,0];const T=!xt(c),A=p(),P=A.data,R=A._c,j=xt(R)?P:R;if(T&&(c=Ra(c)?c(j,P):c,g({data:c,_c:j})),Ra(_))try{_=_(j)}catch(z){C=z}if(_&&w9(_))if(_=await _.catch(z=>{C=z}),S!==w[f][0]){if(C)throw C;return _}else C&&T&&l(C)&&(o=!0,g({data:j,_c:us}));if(o&&!C)if(Ra(o)){const z=o(_,j);g({data:z,error:us,_c:us})}else g({data:_,error:us,_c:us});if(w[f][1]=nN(),Promise.resolve(x()).then(()=>{g({_c:us})}),C){if(u)throw C;return}return _}}const q$=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},Jie=(t,e)=>{if(!$c.has(t)){const n=fd(Gie,e),r=Object.create(null),s=v9.bind(us,t);let i=Bu;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!$c.has(t)&&($c.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!eb)){const u=n.initFocus(setTimeout.bind(us,q$.bind(us,r,g9))),d=n.initReconnect(setTimeout.bind(us,q$.bind(us,r,m9)));i=()=>{u&&u(),d&&d(),$c.delete(t)}}};return l(),[t,s,l,i]}return[t,$c.get(t)[4]]},Yie=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!xt(i)&&o>i||setTimeout(r,a,s)},Zie=QT,[E9,Xie]=Jie(new Map),eoe=fd({onLoadingSlow:Bu,onSuccess:Bu,onError:Bu,onErrorRetry:Yie,onDiscarded:Bu,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:W$?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:W$?5e3:3e3,compare:Zie,isPaused:()=>!1,cache:E9,mutate:Xie,fallback:{}},qie),toe=(t,e)=>{const n=fd(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=fd(s,o))}return n},noe=D.createContext({}),roe="$inf$",_9=Ev&&window.__SWR_DEVTOOLS_USE__,soe=_9?window.__SWR_DEVTOOLS_USE__:[],ioe=()=>{_9&&(window.__SWR_DEVTOOLS_REACT__=Ci)},ooe=t=>Ra(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],aoe=()=>fd(eoe,D.useContext(noe)),coe=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=FO(e),[,,,a]=$c.get(E9);if(o.startsWith(roe))return n(...i);const c=a[o];return xt(c)?n(...i):(delete a[o],c)}),r),loe=soe.concat(coe),uoe=t=>function(...n){const r=aoe(),[s,i,o]=ooe(n),a=toe(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(loe);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},doe=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};ioe();const CS=Ci.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),AS={dedupe:!0},hoe=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,y]=$c.get(r),[w,v]=FO(t),b=D.useRef(!1),x=D.useRef(!1),_=D.useRef(w),C=D.useRef(e),S=D.useRef(n),T=()=>S.current,A=()=>T().isVisible()&&T().isOnline(),[P,R,j,z]=b9(r,w),K=D.useRef({}).current,I=xt(o)?xt(n.fallback)?us:n.fallback[w]:o,N=(de,ge)=>{for(const Pe in K){const Ve=Pe;if(Ve==="data"){if(!s(de[Ve],ge[Ve])&&(!xt(de[Ve])||!s(ce,ge[Ve])))return!1}else if(ge[Ve]!==de[Ve])return!1}return!0},L=D.useMemo(()=>{const de=!w||!e?!1:xt(a)?T().isPaused()||i?!1:c!==!1:a,ge=bt=>{const yn=fd(bt);return delete yn._k,de?{isValidating:!0,isLoading:!0,...yn}:yn},Pe=P(),Ve=z(),ut=ge(Pe),Vt=Pe===Ve?ut:ge(Ve);let Mt=ut;return[()=>{const bt=ge(P());return N(bt,Mt)?(Mt.data=bt.data,Mt.isLoading=bt.isLoading,Mt.isValidating=bt.isValidating,Mt.error=bt.error,Mt):(Mt=bt,bt)},()=>Vt]},[r,w]),U=Lie.useSyncExternalStore(D.useCallback(de=>j(w,(ge,Pe)=>{N(Pe,ge)||de()}),[r,w]),L[0],L[1]),$=!b.current,M=f[w]&&f[w].length>0,G=U.data,X=xt(G)?I&&w9(I)?CS(I):I:G,ie=U.error,se=D.useRef(X),ce=h?xt(G)?xt(se.current)?X:se.current:G:X,ye=M&&!xt(ie)?!1:$&&!xt(a)?a:T().isPaused()?!1:i?xt(X)?!1:c:xt(X)||c,Y=!!(w&&e&&$&&ye),ne=xt(U.isValidating)?Y:U.isValidating,le=xt(U.isLoading)?Y:U.isLoading,V=D.useCallback(async de=>{const ge=C.current;if(!w||!ge||x.current||T().isPaused())return!1;let Pe,Ve,ut=!0;const Vt=de||{},Mt=!g[w]||!Vt.dedupe,bt=()=>H$?!x.current&&w===_.current&&b.current:w===_.current,yn={isValidating:!1,isLoading:!1},$i=()=>{R(yn)},dl=()=>{const gr=g[w];gr&&gr[1]===Ve&&delete g[w]},hl={isValidating:!0};xt(P().data)&&(hl.isLoading=!0);try{if(Mt&&(R(hl),n.loadingTimeout&&xt(P().data)&&setTimeout(()=>{ut&&bt()&&T().onLoadingSlow(w,n)},n.loadingTimeout),g[w]=[ge(v),nN()]),[Pe,Ve]=g[w],Pe=await Pe,Mt&&setTimeout(dl,n.dedupingInterval),!g[w]||g[w][1]!==Ve)return Mt&&bt()&&T().onDiscarded(w),!1;yn.error=us;const gr=p[w];if(!xt(gr)&&(Ve<=gr[0]||Ve<=gr[1]||gr[1]===0))return $i(),Mt&&bt()&&T().onDiscarded(w),!1;const xs=P().data;yn.data=s(xs,Pe)?xs:Pe,Mt&&bt()&&T().onSuccess(Pe,w,n)}catch(gr){dl();const xs=T(),{shouldRetryOnError:fl}=xs;xs.isPaused()||(yn.error=gr,Mt&&bt()&&(xs.onError(gr,w,xs),(fl===!0||Ra(fl)&&fl(gr))&&(!T().revalidateOnFocus||!T().revalidateOnReconnect||A())&&xs.onErrorRetry(gr,w,xs,Ay=>{const pl=f[w];pl&&pl[0]&&pl[0](F$,Ay)},{retryCount:(Vt.retryCount||0)+1,dedupe:!0})))}return ut=!1,$i(),!0},[w,r]),oe=D.useCallback((...de)=>v9(r,_.current,...de),[]);if(ES(()=>{C.current=e,S.current=n,xt(G)||(se.current=G)}),ES(()=>{if(!w)return;const de=V.bind(us,AS);let ge=0;T().revalidateOnFocus&&(ge=Date.now()+T().focusThrottleInterval);const Ve=doe(w,f,(ut,Vt={})=>{if(ut==g9){const Mt=Date.now();T().revalidateOnFocus&&Mt>ge&&A()&&(ge=Mt+T().focusThrottleInterval,de())}else if(ut==m9)T().revalidateOnReconnect&&A()&&de();else{if(ut==y9)return V();if(ut==F$)return V(Vt)}});return x.current=!1,_.current=w,b.current=!0,R({_k:v}),ye&&(xt(X)||eb?de():Vie(de)),()=>{x.current=!0,Ve()}},[w]),ES(()=>{let de;function ge(){const Ve=Ra(l)?l(P().data):l;Ve&&de!==-1&&(de=setTimeout(Pe,Ve))}function Pe(){!P().error&&(u||T().isVisible())&&(d||T().isOnline())?V(AS).then(ge):ge()}return ge(),()=>{de&&(clearTimeout(de),de=-1)}},[l,u,d,w]),D.useDebugValue(ce),i&&xt(X)&&w){if(!H$&&eb)throw new Error("Fallback data is required when using Suspense in SSR.");C.current=e,S.current=n,x.current=!1;const de=y[w];if(!xt(de)){const ge=oe(de);CS(ge)}if(xt(ie)){const ge=V(AS);xt(ce)||(ge.status="fulfilled",ge.value=!0),CS(ge)}else throw ie}return{mutate:oe,get data(){return K.data=!0,ce},get error(){return K.error=!0,ie},get isValidating(){return K.isValidating=!0,ne},get isLoading(){return K.isLoading=!0,le}}},G$=uoe(hoe);class foe extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const poe=G$.default||G$,goe="https://react-tweet.vercel.app";async function moe([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new foe({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const yoe=(t,e,n)=>{const{isLoading:r,data:s,error:i}=poe(()=>e||t?[e||t&&`${goe}/api/tweet/${t}`,n]:null,moe,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},woe=({id:t,apiUrl:e,fallback:n=m.jsx(Tie,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=yoe(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||xie;return m.jsx(l,{error:i?i(a):a})}return m.jsx(vie,{tweet:o,components:r})};var hC={exports:{}},x9={},C9={exports:{}},boe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",voe=boe,Eoe=voe;function A9(){}function S9(){}S9.resetWarningCache=A9;var _oe=function(){function t(r,s,i,o,a,c){if(c!==Eoe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:S9,resetWarningCache:A9};return n.PropTypes=n,n};C9.exports=_oe();var I9=C9.exports;function T9(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=T9(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function V$(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=T9(t))&&(r&&(r+=" "),r+=e);return r}const xoe=Object.freeze(Object.defineProperty({__proto__:null,clsx:V$,default:V$},Symbol.toStringTag,{value:"Module"})),Coe=Ux(xoe);var On={},Ya={};Object.defineProperty(Ya,"__esModule",{value:!0});Ya.dontSetMe=Noe;Ya.findInArray=Aoe;Ya.int=Toe;Ya.isFunction=Soe;Ya.isNum=Ioe;function Aoe(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function Soe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function Ioe(t){return typeof t=="number"&&!isNaN(t)}function Toe(t){return parseInt(t,10)}function Noe(t,e,n){if(t[e])return new Error("Invalid prop ".concat(e," passed to ").concat(n," - do not set this, set it on the child."))}var Uf={};Object.defineProperty(Uf,"__esModule",{value:!0});Uf.browserPrefixToKey=P9;Uf.browserPrefixToStyle=Poe;Uf.default=void 0;Uf.getPrefix=N9;const SS=["Moz","Webkit","O","ms"];function N9(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const n=(t=window.document)===null||t===void 0||(t=t.documentElement)===null||t===void 0?void 0:t.style;if(!n||e in n)return"";for(let r=0;r<SS.length;r++)if(P9(e,SS[r])in n)return SS[r];return""}function P9(t,e){return e?"".concat(e).concat(koe(t)):t}function Poe(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t}function koe(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}Uf.default=N9();Object.defineProperty(On,"__esModule",{value:!0});On.addClassName=R9;On.addEvent=Doe;On.addUserSelectStyles=qoe;On.createCSSTransform=Foe;On.createSVGTransform=zoe;On.getTouch=Hoe;On.getTouchIdentifier=Woe;On.getTranslation=zO;On.innerHeight=Loe;On.innerWidth=Moe;On.matchesSelector=O9;On.matchesSelectorAndParentsTo=Roe;On.offsetXYFromParent=joe;On.outerHeight=Uoe;On.outerWidth=Boe;On.removeClassName=D9;On.removeEvent=$oe;On.removeUserSelectStyles=Goe;var Ii=Ya,K$=Ooe(Uf);function k9(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(k9=function(r){return r?n:e})(t)}function Ooe(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=k9(e);if(n&&n.has(t))return n.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}let C1="";function O9(t,e){return C1||(C1=(0,Ii.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,Ii.isFunction)(t[n])})),(0,Ii.isFunction)(t[C1])?t[C1](e):!1}function Roe(t,e,n){let r=t;do{if(O9(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function Doe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function $oe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function Uoe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Ii.int)(n.borderTopWidth),e+=(0,Ii.int)(n.borderBottomWidth),e}function Boe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Ii.int)(n.borderLeftWidth),e+=(0,Ii.int)(n.borderRightWidth),e}function Loe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Ii.int)(n.paddingTop),e-=(0,Ii.int)(n.paddingBottom),e}function Moe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Ii.int)(n.paddingLeft),e-=(0,Ii.int)(n.paddingRight),e}function joe(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function Foe(t,e){const n=zO(t,e,"px");return{[(0,K$.browserPrefixToKey)("transform",K$.default)]:n}}function zoe(t,e){return zO(t,e,"")}function zO(t,e,n){let{x:r,y:s}=t,i="translate(".concat(r).concat(n,",").concat(s).concat(n,")");if(e){const o="".concat(typeof e.x=="string"?e.x:e.x+n),a="".concat(typeof e.y=="string"?e.y:e.y+n);i="translate(".concat(o,", ").concat(a,")")+i}return i}function Hoe(t,e){return t.targetTouches&&(0,Ii.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,Ii.findInArray)(t.changedTouches,n=>e===n.identifier)}function Woe(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function qoe(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&R9(t.body,"react-draggable-transparent-selection")}function Goe(t){if(t)try{if(t.body&&D9(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function R9(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function D9(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var Za={};Object.defineProperty(Za,"__esModule",{value:!0});Za.canDragX=Qoe;Za.canDragY=Joe;Za.createCoreData=Zoe;Za.createDraggableData=Xoe;Za.getBoundPosition=Voe;Za.getControlPosition=Yoe;Za.snapToGrid=Koe;var li=Ya,Qp=On;function Voe(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:eae(r);const s=HO(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=i.querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,li.int)(u.paddingLeft)+(0,li.int)(l.marginLeft),top:-s.offsetTop+(0,li.int)(u.paddingTop)+(0,li.int)(l.marginTop),right:(0,Qp.innerWidth)(c)-(0,Qp.outerWidth)(s)-s.offsetLeft+(0,li.int)(u.paddingRight)-(0,li.int)(l.marginRight),bottom:(0,Qp.innerHeight)(c)-(0,Qp.outerHeight)(s)-s.offsetTop+(0,li.int)(u.paddingBottom)-(0,li.int)(l.marginBottom)}}return(0,li.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,li.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,li.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,li.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function Koe(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function Qoe(t){return t.props.axis==="both"||t.props.axis==="x"}function Joe(t){return t.props.axis==="both"||t.props.axis==="y"}function Yoe(t,e,n){const r=typeof e=="number"?(0,Qp.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=HO(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,Qp.offsetXYFromParent)(r||t,i,n.props.scale)}function Zoe(t,e,n){const r=!(0,li.isNum)(t.lastX),s=HO(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function Xoe(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function eae(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function HO(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var fC={},pC={};Object.defineProperty(pC,"__esModule",{value:!0});pC.default=tae;function tae(){}Object.defineProperty(fC,"__esModule",{value:!0});fC.default=void 0;var IS=rae(D),Cs=WO(I9),nae=WO(aO),Mr=On,vl=Za,TS=Ya,Fy=WO(pC);function WO(t){return t&&t.__esModule?t:{default:t}}function $9(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return($9=function(r){return r?n:e})(t)}function rae(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=$9(e);if(n&&n.has(t))return n.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function ns(t,e,n){return e=sae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sae(t){var e=iae(t,"string");return typeof e=="symbol"?e:String(e)}function iae(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const bo={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let El=bo.mouse,gC=class extends IS.Component{constructor(){super(...arguments),ns(this,"dragging",!1),ns(this,"lastX",NaN),ns(this,"lastY",NaN),ns(this,"touchIdentifier",null),ns(this,"mounted",!1),ns(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,Mr.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,Mr.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&e.preventDefault();const s=(0,Mr.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,vl.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,vl.createCoreData)(this,o,a);(0,Fy.default)("DraggableCore: handleDragStart: %j",c),(0,Fy.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,Mr.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,Mr.addEvent)(r,El.move,this.handleDrag),(0,Mr.addEvent)(r,El.stop,this.handleDragStop))}),ns(this,"handleDrag",e=>{const n=(0,vl.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,vl.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,vl.createCoreData)(this,r,s);if((0,Fy.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),ns(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,vl.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,vl.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,vl.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,Mr.removeUserSelectStyles)(a.ownerDocument),(0,Fy.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,Fy.default)("DraggableCore: Removing handlers"),(0,Mr.removeEvent)(a.ownerDocument,El.move,this.handleDrag),(0,Mr.removeEvent)(a.ownerDocument,El.stop,this.handleDragStop))}),ns(this,"onMouseDown",e=>(El=bo.mouse,this.handleDragStart(e))),ns(this,"onMouseUp",e=>(El=bo.mouse,this.handleDragStop(e))),ns(this,"onTouchStart",e=>(El=bo.touch,this.handleDragStart(e))),ns(this,"onTouchEnd",e=>(El=bo.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,Mr.addEvent)(e,bo.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,Mr.removeEvent)(n,bo.mouse.move,this.handleDrag),(0,Mr.removeEvent)(n,bo.touch.move,this.handleDrag),(0,Mr.removeEvent)(n,bo.mouse.stop,this.handleDragStop),(0,Mr.removeEvent)(n,bo.touch.stop,this.handleDragStop),(0,Mr.removeEvent)(e,bo.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Mr.removeUserSelectStyles)(n)}}findDOMNode(){var e,n;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(n=this.props)===null||n===void 0||(n=n.nodeRef)===null||n===void 0?void 0:n.current:nae.default.findDOMNode(this)}render(){return IS.cloneElement(IS.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};fC.default=gC;ns(gC,"displayName","DraggableCore");ns(gC,"propTypes",{allowAnyClick:Cs.default.bool,children:Cs.default.node.isRequired,disabled:Cs.default.bool,enableUserSelectHack:Cs.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Cs.default.arrayOf(Cs.default.number),handle:Cs.default.string,cancel:Cs.default.string,nodeRef:Cs.default.object,onStart:Cs.default.func,onDrag:Cs.default.func,onStop:Cs.default.func,onMouseDown:Cs.default.func,scale:Cs.default.number,className:TS.dontSetMe,style:TS.dontSetMe,transform:TS.dontSetMe});ns(gC,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=h(D),n=u(I9),r=u(aO),s=u(Coe),i=On,o=Za,a=Ya,c=u(fC),l=u(pC);function u(v){return v&&v.__esModule?v:{default:v}}function d(v){if(typeof WeakMap!="function")return null;var b=new WeakMap,x=new WeakMap;return(d=function(_){return _?x:b})(v)}function h(v,b){if(v&&v.__esModule)return v;if(v===null||typeof v!="object"&&typeof v!="function")return{default:v};var x=d(b);if(x&&x.has(v))return x.get(v);var _={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in v)if(S!=="default"&&Object.prototype.hasOwnProperty.call(v,S)){var T=C?Object.getOwnPropertyDescriptor(v,S):null;T&&(T.get||T.set)?Object.defineProperty(_,S,T):_[S]=v[S]}return _.default=v,x&&x.set(v,_),_}function f(){return f=Object.assign?Object.assign.bind():function(v){for(var b=1;b<arguments.length;b++){var x=arguments[b];for(var _ in x)Object.prototype.hasOwnProperty.call(x,_)&&(v[_]=x[_])}return v},f.apply(this,arguments)}function p(v,b,x){return b=g(b),b in v?Object.defineProperty(v,b,{value:x,enumerable:!0,configurable:!0,writable:!0}):v[b]=x,v}function g(v){var b=y(v,"string");return typeof b=="symbol"?b:String(b)}function y(v,b){if(typeof v!="object"||v===null)return v;var x=v[Symbol.toPrimitive];if(x!==void 0){var _=x.call(v,b);if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(v)}class w extends e.Component{static getDerivedStateFromProps(b,x){let{position:_}=b,{prevPropsPosition:C}=x;return _&&(!C||_.x!==C.x||_.y!==C.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:_,prevPropsPosition:C}),{x:_.x,y:_.y,prevPropsPosition:{..._}}):null}constructor(b){super(b),p(this,"onDragStart",(x,_)=>{if((0,l.default)("Draggable: onDragStart: %j",_),this.props.onStart(x,(0,o.createDraggableData)(this,_))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),p(this,"onDrag",(x,_)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",_);const C=(0,o.createDraggableData)(this,_),S={x:C.x,y:C.y,slackX:0,slackY:0};if(this.props.bounds){const{x:A,y:P}=S;S.x+=this.state.slackX,S.y+=this.state.slackY;const[R,j]=(0,o.getBoundPosition)(this,S.x,S.y);S.x=R,S.y=j,S.slackX=this.state.slackX+(A-S.x),S.slackY=this.state.slackY+(P-S.y),C.x=S.x,C.y=S.y,C.deltaX=S.x-this.state.x,C.deltaY=S.y-this.state.y}if(this.props.onDrag(x,C)===!1)return!1;this.setState(S)}),p(this,"onDragStop",(x,_)=>{if(!this.state.dragging||this.props.onStop(x,(0,o.createDraggableData)(this,_))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",_);const S={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:A,y:P}=this.props.position;S.x=A,S.y=P}this.setState(S)}),this.state={dragging:!1,dragged:!1,x:b.position?b.position.x:b.defaultPosition.x,y:b.position?b.position.y:b.defaultPosition.y,prevPropsPosition:{...b.position},slackX:0,slackY:0,isElementSVG:!1},b.position&&!(b.onDrag||b.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var b,x;return(b=(x=this.props)===null||x===void 0||(x=x.nodeRef)===null||x===void 0?void 0:x.current)!==null&&b!==void 0?b:r.default.findDOMNode(this)}render(){const{axis:b,bounds:x,children:_,defaultPosition:C,defaultClassName:S,defaultClassNameDragging:T,defaultClassNameDragged:A,position:P,positionOffset:R,scale:j,...z}=this.props;let K={},I=null;const L=!!!P||this.state.dragging,U=P||C,$={x:(0,o.canDragX)(this)&&L?this.state.x:U.x,y:(0,o.canDragY)(this)&&L?this.state.y:U.y};this.state.isElementSVG?I=(0,i.createSVGTransform)($,R):K=(0,i.createCSSTransform)($,R);const M=(0,s.default)(_.props.className||"",S,{[T]:this.state.dragging,[A]:this.state.dragged});return e.createElement(c.default,f({},z,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(_),{className:M,style:{..._.props.style,...K},transform:I}))}}t.default=w,p(w,"displayName","Draggable"),p(w,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),p(w,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(x9);const{default:U9,DraggableCore:oae}=x9;hC.exports=U9;hC.exports.default=U9;hC.exports.DraggableCore=oae;var aae=hC.exports;const _v=Of(aae);function _n(){return _n=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_n.apply(null,arguments)}function B9(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var L9={exports:{}},Gt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pr=typeof Symbol=="function"&&Symbol.for,qO=pr?Symbol.for("react.element"):60103,GO=pr?Symbol.for("react.portal"):60106,mC=pr?Symbol.for("react.fragment"):60107,yC=pr?Symbol.for("react.strict_mode"):60108,wC=pr?Symbol.for("react.profiler"):60114,bC=pr?Symbol.for("react.provider"):60109,vC=pr?Symbol.for("react.context"):60110,VO=pr?Symbol.for("react.async_mode"):60111,EC=pr?Symbol.for("react.concurrent_mode"):60111,_C=pr?Symbol.for("react.forward_ref"):60112,xC=pr?Symbol.for("react.suspense"):60113,cae=pr?Symbol.for("react.suspense_list"):60120,CC=pr?Symbol.for("react.memo"):60115,AC=pr?Symbol.for("react.lazy"):60116,lae=pr?Symbol.for("react.block"):60121,uae=pr?Symbol.for("react.fundamental"):60117,dae=pr?Symbol.for("react.responder"):60118,hae=pr?Symbol.for("react.scope"):60119;function Ri(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case qO:switch(t=t.type,t){case VO:case EC:case mC:case wC:case yC:case xC:return t;default:switch(t=t&&t.$$typeof,t){case vC:case _C:case AC:case CC:case bC:return t;default:return e}}case GO:return e}}}function M9(t){return Ri(t)===EC}Gt.AsyncMode=VO;Gt.ConcurrentMode=EC;Gt.ContextConsumer=vC;Gt.ContextProvider=bC;Gt.Element=qO;Gt.ForwardRef=_C;Gt.Fragment=mC;Gt.Lazy=AC;Gt.Memo=CC;Gt.Portal=GO;Gt.Profiler=wC;Gt.StrictMode=yC;Gt.Suspense=xC;Gt.isAsyncMode=function(t){return M9(t)||Ri(t)===VO};Gt.isConcurrentMode=M9;Gt.isContextConsumer=function(t){return Ri(t)===vC};Gt.isContextProvider=function(t){return Ri(t)===bC};Gt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===qO};Gt.isForwardRef=function(t){return Ri(t)===_C};Gt.isFragment=function(t){return Ri(t)===mC};Gt.isLazy=function(t){return Ri(t)===AC};Gt.isMemo=function(t){return Ri(t)===CC};Gt.isPortal=function(t){return Ri(t)===GO};Gt.isProfiler=function(t){return Ri(t)===wC};Gt.isStrictMode=function(t){return Ri(t)===yC};Gt.isSuspense=function(t){return Ri(t)===xC};Gt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===mC||t===EC||t===wC||t===yC||t===xC||t===cae||typeof t=="object"&&t!==null&&(t.$$typeof===AC||t.$$typeof===CC||t.$$typeof===bC||t.$$typeof===vC||t.$$typeof===_C||t.$$typeof===uae||t.$$typeof===dae||t.$$typeof===hae||t.$$typeof===lae)};Gt.typeOf=Ri;L9.exports=Gt;var fae=L9.exports,KO=fae,pae={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},gae={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},mae={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},j9={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},QO={};QO[KO.ForwardRef]=mae;QO[KO.Memo]=j9;function Q$(t){return KO.isMemo(t)?j9:QO[t.$$typeof]||pae}var yae=Object.defineProperty,wae=Object.getOwnPropertyNames,J$=Object.getOwnPropertySymbols,bae=Object.getOwnPropertyDescriptor,vae=Object.getPrototypeOf,Y$=Object.prototype;function F9(t,e,n){if(typeof e!="string"){if(Y$){var r=vae(e);r&&r!==Y$&&F9(t,r,n)}var s=wae(e);J$&&(s=s.concat(J$(e)));for(var i=Q$(t),o=Q$(e),a=0;a<s.length;++a){var c=s[a];if(!gae[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=bae(e,c);try{yae(t,c,l)}catch{}}}}return t}var Eae=F9;const _ae=Of(Eae);var z9={};Object.defineProperty(z9,"__esModule",{value:!0});z9.default=xae;function xae(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function A1(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M_(){return M_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},M_.apply(this,arguments)}function Cae(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function _l(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Aae(t){var e=function(n){Cae(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,A1(_l(_l(i)),"cachedTheme",void 0),A1(_l(_l(i)),"lastOuterTheme",void 0),A1(_l(_l(i)),"lastTheme",void 0),A1(_l(_l(i)),"renderProvider",function(l){var u=i.props.children;return Ci.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?M_({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?Ci.createElement(t.Consumer,null,this.renderProvider):null},r}(Ci.Component);return e}function Sae(t){return function(n){var r=Ci.forwardRef(function(s,i){return Ci.createElement(t.Consumer,null,function(o){return Ci.createElement(n,M_({theme:o,ref:i},s))})});return _ae(r,n),r}}function Iae(t){var e=function(){var r=Ci.useContext(t);return r};return e}function Tae(t){return{context:t,withTheme:Sae(t),useTheme:Iae(t),ThemeProvider:Aae(t)}}var H9=D.createContext();Tae(H9);var Z$=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ay=(typeof window>"u"?"undefined":Z$(window))==="object"&&(typeof document>"u"?"undefined":Z$(document))==="object"&&document.nodeType===9;function tb(t){"@babel/helpers - typeof";return tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tb(t)}function Nae(t,e){if(tb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Pae(t){var e=Nae(t,"string");return tb(e)=="symbol"?e:e+""}function kae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pae(r.key),r)}}function JO(t,e,n){return e&&kae(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function rN(t,e){return rN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},rN(t,e)}function W9(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,rN(t,e)}function X$(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Oae={}.constructor;function sN(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(sN);if(t.constructor!==Oae)return t;var e={};for(var n in t)e[n]=sN(t[n]);return e}function SC(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=sN(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var e8=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},Yh=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=e8(e[r]," ");else n=e8(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function cy(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function zy(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function nb(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=cy(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=zy(f+":"+u+Yh(p)+";",o))}}else for(var g in a){var y=a[g];y!=null&&(r&&(r+=l),r+=zy(g+":"+u+Yh(y)+";",o))}for(var w in e){var v=e[w];v!=null&&w!=="fallbacks"&&(r&&(r+=l),r+=zy(w+":"+u+Yh(v)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),zy(""+t+u+"{"+r,o)+zy("}",o))}var Rae=/([[\].#*$><+~=|^:(),"'`\s])/g,t8=typeof CSS<"u"&&CSS.escape,YO=function(t){return t8?t8(t):t.replace(Rae,"\\$1")},q9=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),iN=function(t){W9(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(X$(X$(o)),l),o.selectorText="."+YO(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=Yh(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?_n({},s,{allowEmpty:!0}):s;return nb(this.selectorText,this.style,a)},JO(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(q9),Dae={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new iN(e,n,r)}},NS={indent:1,children:!0},$ae=/@([\w-]+)/,Uae=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match($ae);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new IC(_n({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=NS);var s=cy(r),i=s.linebreak;if(r.indent==null&&(r.indent=NS.indent),r.children==null&&(r.children=NS.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),Bae=/@container|@media|@supports\s+/,Lae={onCreateRule:function(e,n,r){return Bae.test(e)?new Uae(e,n,r):null}},PS={indent:1,children:!0},Mae=/@keyframes\s+([\w-]+)/,oN=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(Mae);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:YO(c(this,a)),this.rules=new IC(_n({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],_n({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=PS);var s=cy(r),i=s.linebreak;if(r.indent==null&&(r.indent=PS.indent),r.children==null&&(r.children=PS.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),jae=/@keyframes\s+/,Fae=/\$([\w-]+)/g,aN=function(e,n){return typeof e=="string"?e.replace(Fae,function(r,s){return s in n?n[s]:r}):e},n8=function(e,n,r){var s=e[n],i=aN(s,r);i!==s&&(e[n]=i)},zae={onCreateRule:function(e,n,r){return typeof e=="string"&&jae.test(e)?new oN(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&n8(e,"animation-name",r.keyframes),"animation"in e&&n8(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return aN(e,s.keyframes);case"animation-name":return aN(e,s.keyframes);default:return e}}},Hae=function(t){W9(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?_n({},s,{allowEmpty:!0}):s;return nb(this.key,this.style,a)},e}(q9),Wae={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new Hae(e,n,r):null}},qae=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=cy(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=nb(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return nb(this.at,this.style,r)},t}(),Gae=/@font-face/,Vae={onCreateRule:function(e,n,r){return Gae.test(e)?new qae(e,n,r):null}},Kae=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return nb(this.key,this.style,r)},t}(),Qae={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new Kae(e,n,r):null}},Jae=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),Yae={"@charset":!0,"@import":!0,"@namespace":!0},Zae={onCreateRule:function(e,n,r){return e in Yae?new Jae(e,n,r):null}},r8=[Dae,Lae,zae,Wae,Vae,Qae,Zae],Xae={process:!0},s8={force:!0,process:!0},IC=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=_n({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+YO(this.classes[p]));var g=SC(p,s,f);if(!g)return null;this.register(g);var y=f.index===void 0?this.index.length:f.index;return this.index.splice(y,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=_n({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof iN?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof oN&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof iN?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof oN&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=Xae);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,s8)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,s8)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=cy(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),G9=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=_n({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new IC(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),ece=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),tce=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=B9(s,["attached"]),a=cy(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},JO(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),q0=new tce,cN=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),lN="2f1acc6c3a606b082e5eef5e54414ffb";cN[lN]==null&&(cN[lN]=0);var i8=cN[lN]++,o8=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+i8+a+n:c+i.key+"-"+i8+(a?"-"+a:"")+"-"+n};return r},V9=function(e){var n;return function(){return n||(n=e()),n}},nce=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},rce=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=Yh(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},sce=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},ice=function(e,n){return e.selectorText=n,e.selectorText===n},K9=V9(function(){return document.querySelector("head")});function oce(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function ace(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function cce(t){for(var e=K9(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function lce(t){var e=q0.registry;if(e.length>0){var n=oce(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=ace(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=cce(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function uce(t,e){var n=e.insertionPoint,r=lce(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}K9().appendChild(t)}var dce=V9(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),a8=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},c8=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},hce=function(){var e=document.createElement("style");return e.textContent=`
`,e},fce=function(){function t(n){this.getPropertyValue=nce,this.setProperty=rce,this.removeProperty=sce,this.setSelector=ice,this.hasInsertedRules=!1,this.cssRules=[],n&&q0.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||hce(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=dce();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){uce(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=c8(i,s);if(a=a8(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=c8(i,s),d=a8(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof G9&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),pce=0,gce=function(){function t(n){this.id=pce++,this.version="10.10.0",this.plugins=new ece,this.options={id:{minify:!1},createGenerateId:o8,Renderer:ay?fce:null,plugins:[]},this.generateId=o8({minify:!1});for(var r=0;r<r8.length;r++)this.plugins.use(r8[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=_n({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=q0.index===0?0:q0.index+1);var a=new G9(r,_n({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),q0.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=_n({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=SC(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),Q9=function(e){return new gce(e)},l8=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},JO(t,[{key:"size",get:function(){return this.length}}]),t}(),ZO=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function J9(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=J9(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */Q9();var Y9=Date.now(),kS="fnValues"+Y9,OS="fnStyle"+ ++Y9,mce=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=SC(n,{},s);return i[OS]=r,i},onProcessStyle:function(n,r){if(kS in r||OS in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[kS]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[OS];a&&(o.style=a(n)||{});var c=o[kS];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function yce(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var Tp;typeof self<"u"?Tp=self:typeof window<"u"?Tp=window:typeof global<"u"?Tp=global:typeof module<"u"?Tp=module:Tp=Function("return this")();var u8=yce(Tp),d8=function(e){return e&&e[u8]&&e===e[u8]()},wce=function(e){return{onCreateRule:function(r,s,i){if(!d8(s))return null;var o=s,a=SC(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!d8(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},bce=/;\n/,vce=function(e){for(var n={},r=e.split(bce),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},Ece=function(e){typeof e.style=="string"&&(e.style=vce(e.style))};function _ce(){return{onProcessRule:Ece}}var ed="@global",uN="@global ",xce=function(){function t(n,r,s){this.type="global",this.at=ed,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new IC(_n({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),Cce=function(){function t(n,r,s){this.type="global",this.at=ed,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(uN.length);this.rule=s.jss.createRule(i,r,_n({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),Ace=/\s*,\s*/g;function Z9(t,e){for(var n=t.split(Ace),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function Sce(t,e){var n=t.options,r=t.style,s=r?r[ed]:null;if(s){for(var i in s)e.addRule(i,s[i],_n({},n,{selector:Z9(i,t.selector)}));delete r[ed]}}function Ice(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,ed.length)!==ed)){var i=Z9(s.substr(ed.length),t.selector);e.addRule(i,r[s],_n({},n,{selector:i})),delete r[s]}}function Tce(){function t(n,r,s){if(!n)return null;if(n===ed)return new xce(n,r,s);if(n[0]==="@"&&n.substr(0,uN.length)===uN)return new Cce(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(Sce(n,r),Ice(n,r))}return{onCreateRule:t,onProcessRule:e}}var OE=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},RS="extendCurrValue"+Date.now();function Nce(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];lh(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?_n({},t,{extend:l}):t.extend[c];lh(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){lh(t.extend.extend,e,n,r);continue}if(OE(t.extend[d])){d in r||(r[d]={}),lh(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function Pce(t,e,n,r){for(var s in t)if(s!=="extend"){if(OE(r[s])&&OE(t[s])){lh(t[s],e,n,r[s]);continue}if(OE(t[s])){r[s]=lh(t[s],e,n);continue}r[s]=t[s]}}function lh(t,e,n,r){return r===void 0&&(r={}),Nce(t,e,n,r),Pce(t,e,n,r),r}function kce(){function t(n,r,s){return"extend"in n?lh(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[RS])s.prop(i,null);return s[RS]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[RS]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var h8=/\s*,\s*/g,Oce=/&/g,Rce=/\$([\w-]+)/g;function Dce(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(h8),a=s.split(h8),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(Oce,u):u+" "+h}return c}function n(s,i,o){if(o)return _n({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=_n({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(Rce,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],_n({},l,{selector:p})):c.addRule(g,s[d],_n({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function dN(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=dN(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return dN(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function $ce(){function t(e,n){return"composes"in e&&(dN(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var Uce=/[A-Z]/g,Bce=/^ms-/,DS={};function Lce(t){return"-"+t.toLowerCase()}function X9(t){if(DS.hasOwnProperty(t))return DS[t];var e=t.replace(Uce,Lce);return DS[t]=Bce.test(e)?"-"+e:e}function j_(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:X9(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(j_):e.fallbacks=j_(t.fallbacks)),e}function Mce(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=j_(n[r]);return n}return j_(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=X9(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var re=ZO&&CSS?CSS.px:"px",S1=ZO&&CSS?CSS.ms:"ms",Xf=ZO&&CSS?CSS.percent:"%",jce={"animation-delay":S1,"animation-duration":S1,"background-position":re,"background-position-x":re,"background-position-y":re,"background-size":re,border:re,"border-bottom":re,"border-bottom-left-radius":re,"border-bottom-right-radius":re,"border-bottom-width":re,"border-left":re,"border-left-width":re,"border-radius":re,"border-right":re,"border-right-width":re,"border-top":re,"border-top-left-radius":re,"border-top-right-radius":re,"border-top-width":re,"border-width":re,"border-block":re,"border-block-end":re,"border-block-end-width":re,"border-block-start":re,"border-block-start-width":re,"border-block-width":re,"border-inline":re,"border-inline-end":re,"border-inline-end-width":re,"border-inline-start":re,"border-inline-start-width":re,"border-inline-width":re,"border-start-start-radius":re,"border-start-end-radius":re,"border-end-start-radius":re,"border-end-end-radius":re,margin:re,"margin-bottom":re,"margin-left":re,"margin-right":re,"margin-top":re,"margin-block":re,"margin-block-end":re,"margin-block-start":re,"margin-inline":re,"margin-inline-end":re,"margin-inline-start":re,padding:re,"padding-bottom":re,"padding-left":re,"padding-right":re,"padding-top":re,"padding-block":re,"padding-block-end":re,"padding-block-start":re,"padding-inline":re,"padding-inline-end":re,"padding-inline-start":re,"mask-position-x":re,"mask-position-y":re,"mask-size":re,height:re,width:re,"min-height":re,"max-height":re,"min-width":re,"max-width":re,bottom:re,left:re,top:re,right:re,inset:re,"inset-block":re,"inset-block-end":re,"inset-block-start":re,"inset-inline":re,"inset-inline-end":re,"inset-inline-start":re,"box-shadow":re,"text-shadow":re,"column-gap":re,"column-rule":re,"column-rule-width":re,"column-width":re,"font-size":re,"font-size-delta":re,"letter-spacing":re,"text-decoration-thickness":re,"text-indent":re,"text-stroke":re,"text-stroke-width":re,"word-spacing":re,motion:re,"motion-offset":re,outline:re,"outline-offset":re,"outline-width":re,perspective:re,"perspective-origin-x":Xf,"perspective-origin-y":Xf,"transform-origin":Xf,"transform-origin-x":Xf,"transform-origin-y":Xf,"transform-origin-z":Xf,"transition-delay":S1,"transition-duration":S1,"vertical-align":re,"flex-basis":re,"shape-margin":re,size:re,gap:re,grid:re,"grid-gap":re,"row-gap":re,"grid-row-gap":re,"grid-column-gap":re,"grid-template-rows":re,"grid-template-columns":re,"grid-auto-rows":re,"grid-auto-columns":re,"box-shadow-x":re,"box-shadow-y":re,"box-shadow-blur":re,"box-shadow-spread":re,"font-line-height":re,"text-shadow-x":re,"text-shadow-y":re,"text-shadow-blur":re};function e7(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var Fce=e7(jce);function G0(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=G0(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=G0(s,e[s],n);else for(var i in e)e[i]=G0(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||Fce[t];return o&&!(e===0&&o===re)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function zce(t){t===void 0&&(t={});var e=e7(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=G0(o,s[o],e);return s}function r(s,i){return G0(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var Hce={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},Wce={position:!0,size:!0},I1={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},$S={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function qce(t,e,n){return t.map(function(r){return n7(r,e,n,!1,!0)})}function t7(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?t7(t[0],e,n,r):typeof t[0]=="object"?qce(t,e,r):[t]}function n7(t,e,n,r,s){if(!(I1[e]||$S[e]))return[];var i=[];if($S[e]&&(t=Gce(t,n,$S[e],r)),Object.keys(t).length)for(var o in I1[e]){if(t[o]){Array.isArray(t[o])?i.push(Wce[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}I1[e][o]!=null&&i.push(I1[e][o])}return!i.length||s?i:[i]}function Gce(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=rb((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function rb(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=rb(t.fallbacks[i],e,!0);continue}t[r]=t7(s,r,Hce,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=rb(t.fallbacks,e,!0);continue}t[r]=n7(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function Vce(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=rb(e[r],n);return e}return rb(e,n)}return{onProcessStyle:t}}function hN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Kce(t){if(Array.isArray(t))return hN(t)}function Qce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Jce(t,e){if(t){if(typeof t=="string")return hN(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hN(t,e):void 0}}function Yce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zce(t){return Kce(t)||Qce(t)||Jce(t)||Yce()}var w0="",fN="",r7="",s7="",Xce=ay&&"ontouchstart"in document.documentElement;if(ay){var US={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},ele=document.createElement("p"),BS=ele.style,tle="Transform";for(var LS in US)if(LS+tle in BS){w0=LS,fN=US[LS];break}w0==="Webkit"&&"msHyphens"in BS&&(w0="ms",fN=US.ms,s7="edge"),w0==="Webkit"&&"-apple-trailing-word"in BS&&(r7="apple")}var rt={js:w0,css:fN,vendor:r7,browser:s7,isTouch:Xce};function nle(t){return t[1]==="-"||rt.js==="ms"?t:"@"+rt.css+"keyframes"+t.substr(10)}var rle={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:rt.js==="ms"?"-webkit-"+e:rt.css+e}},sle={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:rt.js==="Webkit"?rt.css+"print-"+e:e}},ile=/[-\s]+(.)?/g;function ole(t,e){return e?e.toUpperCase():""}function XO(t){return t.replace(ile,ole)}function pd(t){return XO("-"+t)}var ale={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(rt.js==="Webkit"){var r="mask-image";if(XO(r)in n)return e;if(rt.js+pd(r)in n)return rt.css+e}return e}},cle={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:rt.vendor==="apple"&&!rt.isTouch?rt.css+e:e}},lle={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:rt.css+e}},ule={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:rt.css+e}},dle={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:rt.js==="Webkit"||rt.js==="ms"&&rt.browser!=="edge"?rt.css+e:e}},hle={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:rt.js==="Moz"||rt.js==="ms"||rt.vendor==="apple"?rt.css+e:e}},fle={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(rt.js==="Webkit"){var r="WebkitColumn"+pd(e);return r in n?rt.css+"column-"+e:!1}if(rt.js==="Moz"){var s="page"+pd(e);return s in n?"page-"+e:!1}return!1}},ple={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(rt.js==="Moz")return e;var r=e.replace("-inline","");return rt.js+pd(r)in n?rt.css+r:!1}},gle={supportedProperty:function(e,n){return XO(e)in n?e:!1}},mle={supportedProperty:function(e,n){var r=pd(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:rt.js+r in n?rt.css+e:rt.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},yle={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:rt.js==="ms"?""+rt.css+e:e}},wle={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:rt.js==="ms"?rt.css+"scroll-chaining":e}},ble={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},vle={supportedProperty:function(e,n){var r=ble[e];return r&&rt.js+pd(r)in n?rt.css+r:!1}},i7={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},Ele=Object.keys(i7),_le=function(e){return rt.css+e},xle={supportedProperty:function(e,n,r){var s=r.multiple;if(Ele.indexOf(e)>-1){var i=i7[e];if(!Array.isArray(i))return rt.js+pd(i)in n?rt.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(rt.js+pd(i[0])in n))return!1;return i.map(_le)}return!1}},o7=[rle,sle,ale,cle,lle,ule,dle,hle,fle,ple,gle,mle,yle,wle,vle,xle],f8=o7.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),Cle=o7.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,Zce(e.noPrefill)),t},[]),b0,Kd={};if(ay){b0=document.createElement("p");var MS=window.getComputedStyle(document.documentElement,"");for(var jS in MS)isNaN(jS)||(Kd[MS[jS]]=MS[jS]);Cle.forEach(function(t){return delete Kd[t]})}function pN(t,e){if(e===void 0&&(e={}),!b0)return t;if(Kd[t]!=null)return Kd[t];(t==="transition"||t==="transform")&&(e[t]=t in b0.style);for(var n=0;n<f8.length&&(Kd[t]=f8[n](t,b0.style,e),!Kd[t]);n++);try{b0.style[t]=""}catch{return!1}return Kd[t]}var ep={},Ale={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},Sle=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Fl;function Ile(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?pN(e):", "+pN(n);return r||e||n}ay&&(Fl=document.createElement("p"));function p8(t,e){var n=e;if(!Fl||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(ep[r]!=null)return ep[r];try{Fl.style[t]=n}catch{return ep[r]=!1,!1}if(Ale[t])n=n.replace(Sle,Ile);else if(Fl.style[t]===""&&(n=rt.css+n,n==="-ms-flex"&&(Fl.style[t]="-ms-flexbox"),Fl.style[t]=n,Fl.style[t]===""))return ep[r]=!1,!1;return Fl.style[t]="",ep[r]=n,ep[r]}function Tle(){function t(s){if(s.type==="keyframes"){var i=s;i.at=nle(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=pN(i);c&&c!==i&&(a=!0);var l=!1,u=p8(c,Yh(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return p8(i,Yh(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function Nle(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var Ple=function(e){return e===void 0&&(e={}),{plugins:[mce(),wce(e.observable),_ce(),Tce(),kce(),Dce(),$ce(),Mce(),zce(e.defaultUnit),Vce(),Tle(),Nle()]}},kle=Number.MIN_SAFE_INTEGER||-1e9,Ole=function(){return kle++},Rle=D.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!ay}),g8=new Map,eR=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new l8),r[n];var s=g8.get(n);return s||(s=new l8,g8.set(n,s)),s},m8=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=eR(r,s);o.manage(i),r.registry&&r.registry.add(n)}},Dle=function(e){if(e.sheet){var n=eR(e.context,e.index);n.unmanage(e.theme)}},$le=Q9(Ple()),a7=new WeakMap,c7=function(e){return a7.get(e)},Ule=function(e,n){a7.set(e,n)},Ble=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function Lle(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",_n({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var Mle=function(e){if(!e.context.disableStylesGeneration){var n=eR(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||$le,i=Ble(e),o=J9(i),a=s.createStyleSheet(i,Lle(e,o!==null));return Ule(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},jle=function(e,n){for(var r in n)e.deleteRule(n[r])},Fle=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},zle=function(e,n){var r=c7(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},Hle=function(e,n){if(!n)return e.classes;var r=c7(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function y8(t){return t?D.useEffect:Ci.useInsertionEffect||D.useLayoutEffect}var FS={},ra=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?Ole():s,o=r.theming,a=r.name,c=B9(r,["index","theming","name"]),l=o&&o.context||H9,u=function(f){return typeof e=="function"&&(f||D.useContext(l))||FS},d={};return function(f){var p=D.useRef(!0),g=D.useContext(Rle),y=u(f&&f.theme),w=D.useMemo(function(){var _=Mle({context:g,styles:e,name:a,theme:y,index:i,sheetOptions:c});return _&&g.isSSR&&m8({index:i,context:g,sheet:_,theme:y}),[_,_?zle(_,f):null]},[g,y]),v=w[0],b=w[1];y8(g.isSSR)(function(){v&&b&&!p.current&&Fle(f,v,b)},[f]),y8(g.isSSR)(function(){return v&&m8({index:i,context:g,sheet:v,theme:y}),function(){v&&(Dle({index:i,context:g,sheet:v,theme:y}),b&&jle(v,b))}},[v]);var x=D.useMemo(function(){return v&&b?Hle(v,b):d},[v,b]);return D.useDebugValue(x),D.useDebugValue(y===FS?"No theme":y),D.useEffect(function(){p.current=!1}),x}};const Wle=ra({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function zS({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=Wle(),d=D.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=m.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[m.jsx("img",{src:t,alt:e,className:u.iconImage}),m.jsx("span",{className:u.iconLabel,children:e})]});return o?f:m.jsx(_v,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const qle=ra({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function zi({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=qle({isOpen:e}),u=D.useRef(null),d=()=>{r&&r(t)};return m.jsx(_v,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:m.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[m.jsxs("div",{className:l.header,children:[m.jsx("span",{children:i||t.replace("-popup","")}),m.jsxs("div",{className:l.titleBarButtons,children:[m.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),m.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:"✕"})]})]}),m.jsx("div",{className:l.content,children:s})]})})}const HS=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],Gle=80,Vle=80,Kle=10,Qle=10,Jle=10,Yle=10,Zle=({onIconClick:t})=>{const e=HS.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:Jle+d*(Gle+Kle),y:Yle+u*(Vle+Qle)},u++,u>=4&&(u=0,d++)}),l},[r,s]=D.useState(n()),[i,o]=D.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return m.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:m.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>m.jsx(zS,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&m.jsx(zi,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:HS.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>m.jsx(zS,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&m.jsx(zi,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:HS.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>m.jsx(zS,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},Xle=ra({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),eue=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=D.useState(!1),[o,a]=D.useState(new Date),c=Xle({isOpen:s});D.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return m.jsxs("div",{className:c.taskbar,children:[m.jsxs("div",{className:c.leftSection,children:[m.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),m.jsx("div",{className:c.windows,children:t.map(h=>m.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),m.jsxs("div",{className:c.rightSection,children:[m.jsxs("div",{className:c.statusSection,children:[m.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:m.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),m.jsx("div",{className:c.clock,children:l(o)})]}),s&&m.jsxs("div",{className:c.menu,children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function l7(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function tR(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function u7(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function nR(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function d7(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function h7(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=`https://api.opensea.io/api/v2/collection/${t}/nfts?chain=solana&limit=${e}&include_orders=true`;try{const i=await fetch(r,{headers:{"X-API-KEY":n}});if(!i.ok)throw new Error(`Failed to get OpenSea Solana NFTs: ${i.statusText}`);const o=await i.json();console.log("Solana collection response:",o),console.log("Sample NFT from response:",o.nfts[0]),console.log("Sample NFT owners:",(s=o.nfts[0])==null?void 0:s.owners),console.log("Sample NFT full structure:",JSON.stringify(o.nfts[0],null,2));const a=o.nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"SOL",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea Solana NFTs:",i),i}}async function tue(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=[`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false&include_metadata=true`];for(const i of r){console.log("Trying OpenSea endpoint:",i);try{const o=await fetch(i,{headers:{"X-API-KEY":n}});if(console.log("Response status:",o.status),!o.ok){const c=await o.text();console.error("API Error response:",c);continue}const a=await o.json();if(console.log("Raw API response:",a),console.log("Number of NFTs returned:",((s=a.nfts)==null?void 0:s.length)||0),a.nfts&&a.nfts.length>0){const c=a.nfts.map(l=>({id:l.identifier,address:l.contract,token_id:parseInt(l.identifier,10),attributes:JSON.stringify(l.traits||[]),name:l.name||`#${l.identifier}`,image_url:l.image_url,owner_of:t,block_minted:0,contract_type:"SOL",description:l.description||"",image:l.image_url,image_url_shrunk:l.image_url,animation_url:l.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:"",num_items:1,created_at:l.updated_at||new Date().toISOString(),updated_at:l.updated_at||new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}));return console.log("Transformed NFTs:",c.length),{page:1,pageSize:e,totalCount:c.length,totalPages:1,data:c}}}catch(o){console.error("Error with endpoint:",i,o);continue}}return console.log("All OpenSea endpoints failed, returning empty result"),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]}}const nue=ra({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),rue=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=nue({isOpen:t}),i=D.useRef(null),[o,a]=D.useState([]),[c,l]=D.useState(!1),[u,d]=D.useState(!1),[h,f]=D.useState({}),[p,g]=D.useState(null),{data:y}=o9();D.useEffect(()=>{t&&r&&w()},[t,r]);const w=async()=>{l(!0),g(null);try{const C=await l7(r);a(C);const S={};C.forEach(T=>{S[T.id]=0}),f(S)}catch(C){g(C.message)}finally{l(!1)}},v=(C,S)=>{f(T=>({...T,[C]:Math.max(0,S)}))},b=async()=>{const C=Object.entries(h).filter(([,S])=>S>0).map(([S,T])=>({id:S,quantity:T}));if(C.length===0){g("Please select at least one item to mint");return}if(!y){g("Wallet not connected");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const S=await u7(r,C);if(console.log("Mint API result:",S),S.success&&S.mintTransaction){console.log("Got mint transaction:",S.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const T=await y.sendTransaction({to:S.mintTransaction.to,value:BigInt(S.mintTransaction.value),data:S.mintTransaction.data});console.log("Transaction sent successfully:",T),alert(`NFT Minted Successfully: Transaction Hash - ${T}`),e()}catch(T){console.error("Transaction sending failed:",T),g("Transaction failed: "+T.message)}}else throw new Error(S.message||"Could not retrieve minting transaction.")}catch(S){console.error("Minting failed:",S),g("Minting failed: "+S.message)}finally{d(!1)}},x=(C,S)=>`${parseFloat(C)} ${S}`,_=()=>{n&&n()};return t?m.jsx(_v,{nodeRef:i,handle:`.${s.header}`,children:m.jsxs("div",{ref:i,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"Mint Pixelawbster"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:_,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),m.jsxs("div",{className:s.content,children:[p&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:p}),c?m.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{children:"Available Lists:"}),o.map(C=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:C.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",x(C.token_price,C.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",C.wallet_limit===4294967295?"Unlimited":C.wallet_limit," per wallet"]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[m.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),m.jsx("input",{type:"number",min:"0",max:C.wallet_limit===4294967295?999:C.wallet_limit,value:h[C.id]||0,onChange:S=>v(C.id,parseInt(S.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},C.id))]}),m.jsx("button",{onClick:b,disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},sue=ra({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),iue=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},oue=({nft:t,onClose:e})=>{const n=sue(),r=D.useRef(null),s=iue(t.attributes);return m.jsx(_v,{nodeRef:r,handle:`.${n.header}`,children:m.jsxs("div",{className:n.popup,ref:r,children:[m.jsxs("div",{className:n.header,children:[m.jsxs("span",{children:[t.name," - Details"]}),m.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),m.jsxs("div",{className:n.content,children:[m.jsx("img",{src:t.image_url,alt:t.name,className:n.detailImage}),m.jsx("h3",{children:"Traits"}),m.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):m.jsx("li",{children:"No traits found."})})]})]})})},aue=Symbol(),w8=Object.getPrototypeOf,gN=new WeakMap,cue=t=>t&&(gN.has(t)?gN.get(t):w8(t)===Object.prototype||w8(t)===Array.prototype),lue=t=>cue(t)&&t[aue]||null,b8=(t,e=!0)=>{gN.set(t,e)},F_={},WS=t=>typeof t=="object"&&t!==null,Kl=new WeakMap,v0=new WeakSet,uue=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>WS(l)&&!v0.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return b8(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:y}=Reflect.getOwnPropertyDescriptor(l,p),w={value:g,enumerable:y,configurable:!0};if(v0.has(g))b8(g,!1);else if(g instanceof Promise)delete w.value,w.get=()=>d(g);else if(Kl.has(g)){const[v,b]=Kl.get(g);w.value=i(v,b(),d)}Object.defineProperty(f,p,w)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!WS(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(A,P=++a[0])=>{d!==P&&(d=P,h.forEach(R=>R(A,P)))};let p=a[1];const g=(A=++a[1])=>(p!==A&&!h.size&&(p=A,w.forEach(([P])=>{const R=P[1](A);R>d&&(d=R)})),d),y=A=>(P,R)=>{const j=[...P];j[1]=[A,...j[1]],f(j,R)},w=new Map,v=(A,P)=>{if((F_?"production":void 0)!=="production"&&w.has(A))throw new Error("prop listener already exists");if(h.size){const R=P[3](y(A));w.set(A,[P,R])}else w.set(A,[P])},b=A=>{var P;const R=w.get(A);R&&(w.delete(A),(P=R[1])==null||P.call(R))},x=A=>(h.add(A),h.size===1&&w.forEach(([R,j],z)=>{if((F_?"production":void 0)!=="production"&&j)throw new Error("remove already exists");const K=R[3](y(z));w.set(z,[R,K])}),()=>{h.delete(A),h.size===0&&w.forEach(([R,j],z)=>{j&&(j(),w.set(z,[R]))})}),_=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),S=e(_,{deleteProperty(A,P){const R=Reflect.get(A,P);b(P);const j=Reflect.deleteProperty(A,P);return j&&f(["delete",[P],R]),j},set(A,P,R,j){const z=Reflect.has(A,P),K=Reflect.get(A,P,j);if(z&&(t(K,R)||o.has(R)&&t(K,o.get(R))))return!0;b(P),WS(R)&&(R=lue(R)||R);let I=R;if(R instanceof Promise)R.then(N=>{R.status="fulfilled",R.value=N,f(["resolve",[P],N])}).catch(N=>{R.status="rejected",R.reason=N,f(["reject",[P],N])});else{!Kl.has(R)&&n(R)&&(I=c(R));const N=!v0.has(I)&&Kl.get(I);N&&v(P,N)}return Reflect.set(A,P,I,j),f(["set",[P],R,K]),!0}});o.set(l,S);const T=[_,g,i,x];return Kl.set(S,T),Reflect.ownKeys(l).forEach(A=>{const P=Object.getOwnPropertyDescriptor(l,A);"value"in P&&(S[A]=l[A],delete P.value,delete P.writable),Object.defineProperty(_,A,P)}),S})=>[c,Kl,v0,t,e,n,r,s,i,o,a],[due]=uue();function cn(t={}){return due(t)}function Or(t,e,n){const r=Kl.get(t);(F_?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function sb(t,e){const n=Kl.get(t);(F_?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function mf(t){return v0.add(t),t}function Rr(t,e,n,r){let s=t[e];return Or(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function hue(t){const e=cn({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var v8={};const ae={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof v8<"u"?v8.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},ib={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=ae.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var fue=20,pue=1,yf=1e6,E8=1e6,gue=-7,mue=21,yue=!1,xv="[big.js] ",Bf=xv+"Invalid ",TC=Bf+"decimal places",wue=Bf+"rounding mode",f7=xv+"Division by zero",qt={},ja=void 0,bue=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function p7(){function t(e){var n=this;if(!(n instanceof t))return e===ja?p7():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(Bf+"value");e=e===0&&1/e<0?"-0":String(e)}vue(n,e)}n.constructor=t}return t.prototype=qt,t.DP=fue,t.RM=pue,t.NE=gue,t.PE=mue,t.strict=yue,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function vue(t,e){var n,r,s;if(!bue.test(e))throw Error(Bf+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function Lf(t,e,n,r){var s=t.c;if(n===ja&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(wue);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==ja))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==ja||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function Mf(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}qt.abs=function(){var t=new this.constructor(this);return t.s=1,t};qt.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};qt.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>yf)throw Error(TC);if(!s[0])throw Error(f7);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),y=g.length,w=t,v=w.c=[],b=0,x=o+(w.e=e.e-t.e)+1;for(w.s=i,i=x<0?0:x,h.unshift(0);y++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(y=g.length))u=a>y?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=y==a?s:h;y;){if(g[--y]<c[y]){for(d=y;d&&!g[--d];)g[d]=9;--g[d],g[y]+=10}g[y]-=c[y]}for(;!g[0];)g.shift()}else break}v[b++]=u?l:++l,g[0]&&u?g[y]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==ja)&&i--);return!v[0]&&b!=1&&(v.shift(),w.e--,x--),b>x&&Lf(w,x,n.RM,g[0]!==ja),w};qt.eq=function(t){return this.cmp(t)===0};qt.gt=function(t){return this.cmp(t)>0};qt.gte=function(t){return this.cmp(t)>-1};qt.lt=function(t){return this.cmp(t)<0};qt.lte=function(t){return this.cmp(t)<1};qt.minus=qt.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};qt.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(f7);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};qt.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};qt.plus=qt.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};qt.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-E8||t>E8)throw Error(Bf+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};qt.prec=function(t,e){if(t!==~~t||t<1||t>yf)throw Error(Bf+"precision");return Lf(new this.constructor(this),t,e)};qt.round=function(t,e){if(t===ja)t=0;else if(t!==~~t||t<-yf||t>yf)throw Error(TC);return Lf(new this.constructor(this),t+this.e+1,e)};qt.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(xv+"No square root");i=Math.sqrt(+Mf(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return Lf(t,(s.DP-=4)+t.e+1,s.RM)};qt.times=qt.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};qt.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==ja){if(t!==~~t||t<0||t>yf)throw Error(TC);for(n=Lf(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return Mf(n,!0,!!r)};qt.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==ja){if(t!==~~t||t<0||t>yf)throw Error(TC);for(n=Lf(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return Mf(n,!1,!!r)};qt[Symbol.for("nodejs.util.inspect.custom")]=qt.toJSON=qt.toString=function(){var t=this,e=t.constructor;return Mf(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};qt.toNumber=function(){var t=+Mf(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(xv+"Imprecise conversion");return t};qt.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==ja){if(t!==~~t||t<1||t>yf)throw Error(Bf+"precision");for(n=Lf(new r(n),t,e);n.c.length<t;)n.c.push(0)}return Mf(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};qt.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(xv+"valueOf disallowed");return Mf(t,t.e<=e.NE||t.e>=e.PE,!0)};var Hy=p7();const Eue={bigNumber(t){return t?new Hy(t):new Hy(0)},multiply(t,e){if(t===void 0||e===void 0)return new Hy(0);const n=new Hy(t),r=new Hy(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},_ue=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],xue=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],Cue=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Aue={getERC20Abi:t=>ae.USDT_CONTRACT_ADDRESSES.includes(t)?Cue:_ue,getSwapAbi:()=>xue},wi={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},Ze={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function qS(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Qe={setItem(t,e){E0()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(E0())return localStorage.getItem(t)||void 0},removeItem(t){E0()&&localStorage.removeItem(t)},clear(){E0()&&localStorage.clear()}};function E0(){return typeof window<"u"&&typeof localStorage<"u"}function jc(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var _8={};const GS=(typeof process<"u"&&typeof _8<"u"?_8.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",g7=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]},{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]}],Sue="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",zt={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:GS,SECURE_SITE_DASHBOARD:`${GS}/dashboard`,SECURE_SITE_FAVICON:`${GS}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld","coinbase"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},_e={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=_e.getActiveNamespace(),e=_e.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Qe.setItem(Ze.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Qe.getItem(Ze.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Qe.removeItem(Ze.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Qe.setItem(Ze.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Qe.setItem(Ze.ACTIVE_CAIP_NETWORK_ID,t),_e.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Qe.getItem(Ze.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Qe.removeItem(Ze.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=qS(t);Qe.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=_e.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Qe.setItem(Ze.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Qe.getItem(Ze.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=qS(t);Qe.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Qe.getItem(Ze.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=qS(t);return Qe.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{Qe.setItem(Ze.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Qe.getItem(Ze.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Qe.removeItem(Ze.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Qe.getItem(Ze.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=Qe.getItem(Ze.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{Qe.setItem(Ze.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Qe.getItem(Ze.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Qe.getItem(Ze.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Qe.setItem(Ze.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=_e.getConnectedNamespaces();e.includes(t)||(e.push(t),_e.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=_e.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),_e.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Qe.getItem(Ze.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Qe.setItem(Ze.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Qe.removeItem(Ze.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Qe.getItem(Ze.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=_e.getBalanceCache();Qe.setItem(Ze.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=_e.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;_e.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=_e.getBalanceCache();e[t.caipAddress]=t,Qe.setItem(Ze.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Qe.getItem(Ze.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=_e.getBalanceCache();Qe.setItem(Ze.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=_e.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),_e.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=_e.getNativeBalanceCache();e[t.caipAddress]=t,Qe.setItem(Ze.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Qe.getItem(Ze.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=_e.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;_e.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=_e.getEnsCache();e[t.address]=t,Qe.setItem(Ze.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=_e.getEnsCache();Qe.setItem(Ze.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Qe.getItem(Ze.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=_e.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;_e.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=_e.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Qe.setItem(Ze.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=_e.getIdentityCache();Qe.setItem(Ze.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Qe.removeItem(Ze.PORTFOLIO_CACHE),Qe.removeItem(Ze.NATIVE_BALANCE_CACHE),Qe.removeItem(Ze.ENS_CACHE),Qe.removeItem(Ze.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Qe.setItem(Ze.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Qe.getItem(Ze.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=_e.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===ae.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};Qe.setItem(Ze.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Qe.getItem(Ze.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=_e.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),Qe.setItem(Ze.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=Qe.getItem(Ze.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=_e.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),Qe.setItem(Ze.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=_e.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),Qe.setItem(Ze.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(_e.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},je={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return je.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=zt.TEN_SEC_MS:!0},isAllowedRetry(t,e=zt.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(je.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+zt.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(je.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!je.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?_e.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,je.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return ae.W3M_API_URL},getBlockchainApiUrl(){return ae.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return ae.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?zt.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in ae.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function Wy(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class Cv{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await Wy(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await Wy(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Wy(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Wy(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Wy(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const Iue={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?zt.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(je.isTelegram()){if(je.isIos())return t.filter(e=>e!=="google");if(je.isMac())return t.filter(e=>e!=="x");if(je.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},We=cn({features:zt.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:zt.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),pe={state:We,subscribeKey(t,e){return Rr(We,t,e)},setOptions(t){Object.assign(We,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...We.remoteFeatures,...t};We.remoteFeatures=e,(n=We.remoteFeatures)!=null&&n.socials&&(We.remoteFeatures.socials=Iue.filterSocialsByPlatform(We.remoteFeatures.socials))},setFeatures(t){if(!t)return;We.features||(We.features=zt.DEFAULT_FEATURES);const e={...We.features,...t};We.features=e},setProjectId(t){We.projectId=t},setCustomRpcUrls(t){We.customRpcUrls=t},setAllWallets(t){We.allWallets=t},setIncludeWalletIds(t){We.includeWalletIds=t},setExcludeWalletIds(t){We.excludeWalletIds=t},setFeaturedWalletIds(t){We.featuredWalletIds=t},setTokens(t){We.tokens=t},setTermsConditionsUrl(t){We.termsConditionsUrl=t},setPrivacyPolicyUrl(t){We.privacyPolicyUrl=t},setCustomWallets(t){We.customWallets=t},setIsSiweEnabled(t){We.isSiweEnabled=t},setIsUniversalProvider(t){We.isUniversalProvider=t},setSdkVersion(t){We.sdkVersion=t},setMetadata(t){We.metadata=t},setDisableAppend(t){We.disableAppend=t},setEIP6963Enabled(t){We.enableEIP6963=t},setDebug(t){We.debug=t},setEnableWalletConnect(t){We.enableWalletConnect=t},setEnableWalletGuide(t){We.enableWalletGuide=t},setEnableAuthLogger(t){We.enableAuthLogger=t},setEnableWallets(t){We.enableWallets=t},setPreferUniversalLinks(t){We.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){We.hasMultipleAddresses=t},setSIWX(t){We.siwx=t},setConnectMethodsOrder(t){We.features={...We.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){We.features={...We.features,walletFeaturesOrder:t}},setSocialsOrder(t){We.remoteFeatures={...We.remoteFeatures,socials:t}},setCollapseWallets(t){We.features={...We.features,collapseWallets:t}},setEnableEmbedded(t){We.enableEmbedded=t},setAllowUnsupportedChain(t){We.allowUnsupportedChain=t},setManualWCControl(t){We.manualWCControl=t},setEnableNetworkSwitch(t){We.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(We.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){We.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return We.universalProviderConfigOverride},getSnapshot(){return sb(We)}},Tue=Object.freeze({enabled:!0,events:[]}),Nue=new Cv({baseUrl:je.getAnalyticsUrl(),clientId:null}),Pue=5,kue=60*1e3,xl=cn({...Tue}),Oue={state:xl,subscribeKey(t,e){return Rr(xl,t,e)},async sendError(t,e){if(!xl.enabled)return;const n=Date.now();if(xl.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<kue}).length>=Pue)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};xl.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=pe.state;await Nue.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:je.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){xl.enabled=!0},disable(){xl.enabled=!1},clearEvents(){xl.events=[]}};class $m extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,$m.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,$m):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function x8(t,e){const n=t instanceof $m?t:new $m(t instanceof Error?t.message:String(t),e,t);throw Oue.sendError(n,n.category),n}function Di(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return x8(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return x8(a,e)}},n[r]=i}else n[r]=s}),n}const Pa={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},Rue={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Pa.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Pa.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Pa.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Pa.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===ae.CHAIN.SOLANA&&t===Pa.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Pa.COINBASE.url}/dapp?cb_url=${r}`)}},ii=cn({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),Due={state:ii,subscribeNetworkImages(t){return Or(ii.networkImages,()=>t(ii.networkImages))},subscribeKey(t,e){return Rr(ii,t,e)},subscribe(t){return Or(ii,()=>t(ii))},setWalletImage(t,e){ii.walletImages[t]=e},setNetworkImage(t,e){ii.networkImages[t]=e},setChainImage(t,e){ii.chainImages[t]=e},setConnectorImage(t,e){ii.connectorImages={...ii.connectorImages,[t]:e}},setTokenImage(t,e){ii.tokenImages[t]=e},setCurrencyImage(t,e){ii.currencyImages[t]=e}},jo=Di(Due),$ue={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},VS=cn({networkImagePromises:{}}),m7={async fetchWalletImage(t){if(t)return await ze._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(VS.networkImagePromises[t]||(VS.networkImagePromises[t]=ze._fetchNetworkImage(t)),await VS.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return jo.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return jo.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return jo.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return jo.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return jo.state.connectorImages[t.imageId]},getChainImage(t){return jo.state.networkImages[$ue[t]]}},Cl=cn({message:"",variant:"info",open:!1}),Uue={state:Cl,subscribeKey(t,e){return Rr(Cl,t,e)},open(t,e){const{debug:n}=pe.state,{shortMessage:r,longMessage:s}=t;n&&(Cl.message=r,Cl.variant=e,Cl.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Cl.open=!1,Cl.message="",Cl.variant="info"}},Fn=Di(Uue),Bue=je.getAnalyticsUrl(),Lue=new Cv({baseUrl:Bue,clientId:null}),Mue=["MODAL_CREATED"],tc=cn({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Ht={state:tc,subscribe(t){return Or(tc,()=>t(tc))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=pe.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Ee.state.address;if(Mue.includes(t.data.event)||typeof window>"u")return;await Lue.post({path:"/e",params:Ht.getSdkProperties(),body:{eventId:je.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),tc.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===ae.HTTP_STATUS_CODES.FORBIDDEN&&!tc.reportedErrors.FORBIDDEN&&(Fn.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${E0()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),tc.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;tc.timestamp=Date.now(),tc.data=t,(e=pe.state.features)!=null&&e.analytics&&Ht._sendAnalyticsEvent(tc)}},jue=je.getApiUrl(),As=new Cv({baseUrl:jue,clientId:null}),Fue=40,C8=4,zue=20,et=cn({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),ze={state:et,subscribeKey(t,e){return Rr(et,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=pe.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return pe.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${As.baseUrl}/getWalletImage/${t}`,n=await As.getBlob({path:e,params:ze._getSdkProperties()});jo.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${As.baseUrl}/public/getAssetImage/${t}`,n=await As.getBlob({path:e,params:ze._getSdkProperties()});jo.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${As.baseUrl}/public/getAssetImage/${t}`,n=await As.getBlob({path:e,params:ze._getSdkProperties()});jo.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${As.baseUrl}/public/getCurrencyImage/${t}`,n=await As.getBlob({path:e,params:ze._getSdkProperties()});jo.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${As.baseUrl}/public/getTokenImage/${t}`,n=await As.getBlob({path:e,params:ze._getSdkProperties()});jo.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return je.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Pa.COINBASE.id?!0:B.state.activeChain==="solana"&&(n.id===Pa.SOLFLARE.id||n.id===Pa.PHANTOM.id)):t},async fetchProjectConfig(){return(await As.get({path:"/appkit/v1/config",params:ze._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await As.get({path:"/projects/v1/origins",params:ze._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===ae.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=ae.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=B.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!m7.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>ze._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Ce.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>ze._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>ze._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>ze._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];ze._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Pa).map(o=>o.id));const r=await As.get({path:"/getWallets",params:{...ze._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:ze._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=pe.state;if(t!=null&&t.length){const e={...ze._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??C8,include:t},{data:n}=await ze.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>ze._fetchWalletImage(i))),et.featured=r,et.allFeatured=r}},async fetchRecommendedWallets(){try{et.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=pe.state,r=[...e??[],...n??[]].filter(Boolean),s=B.getRequestedCaipNetworkIds().join(","),i={page:1,entries:C8,include:t,exclude:r,chains:s},{data:o,count:a}=await ze.fetchWallets(i),c=_e.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>ze._fetchWalletImage(d))),et.recommended=o,et.allRecommended=o,et.count=a??0}catch{}finally{et.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=pe.state,s=B.getRequestedCaipNetworkIds().join(","),i=[...et.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:Fue,include:e,exclude:i,chains:s},{data:a,count:c}=await ze.fetchWallets(o),l=a.slice(0,zue).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>ze._fetchWalletImage(u))),et.wallets=je.uniqueBy([...et.wallets,...ze._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),et.count=c>et.count?c:et.count,et.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await ze.fetchWallets(e);n&&n.forEach(r=>{et.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=pe.state,s=B.getRequestedCaipNetworkIds().join(",");et.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await ze.fetchWallets(i);Ht.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>ze._fetchWalletImage(c)),je.wait(300)]),et.search=ze._filterOutExtensions(o)},initPromise(t,e){const n=et.promises[t];return n||(et.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&ze.initPromise("connectorImages",ze.fetchConnectorImages),e&&ze.initPromise("featuredWallets",ze.fetchFeaturedWallets),n&&ze.initPromise("recommendedWallets",ze.fetchRecommendedWallets),r&&ze.initPromise("networkImages",ze.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=pe.state.features)!=null&&t.analytics&&ze.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await As.get({path:"/getAnalyticsConfig",params:ze._getSdkProperties()});pe.setFeatures({analytics:t})}catch{pe.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){et.featured=et.allFeatured,et.recommended=et.allRecommended;return}const e=B.getRequestedCaipNetworkIds().join(",");et.featured=et.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),et.recommended=et.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),et.filteredWallets=et.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){et.filteredWallets=[]},setFilterByNamespace(t){if(!t){et.featured=et.allFeatured,et.recommended=et.allRecommended;return}const e=B.getRequestedCaipNetworkIds().join(",");et.featured=et.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),et.recommended=et.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),et.filteredWallets=et.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Kt=cn({view:"Connect",history:["Connect"],transactionStack:[]}),Hue={state:Kt,subscribeKey(t,e){return Rr(Kt,t,e)},pushTransactionStack(t){Kt.transactionStack.push(t)},popTransactionStack(t){const e=Kt.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Ke.goBack();break;case"cancel":s==null||s(),Ke.goBack();break}},push(t,e){t!==Kt.view&&(Kt.view=t,Kt.history.push(t),Kt.data=e)},reset(t,e){Kt.view=t,Kt.history=[t],Kt.data=e},replace(t,e){Kt.history.at(-1)===t||(Kt.view=t,Kt.history[Kt.history.length-1]=t,Kt.data=e)},goBack(){var r;const t=B.state.activeCaipAddress,e=Ke.state.view==="ConnectingFarcaster",n=!t&&e;if(Kt.history.length>1){Kt.history.pop();const[s]=Kt.history.slice(-1);s&&(t&&s==="Connect"?Kt.view="Account":Kt.view=s)}else $t.close();(r=Kt.data)!=null&&r.wallet&&(Kt.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){Ee.setFarcasterUrl(void 0,B.state.activeChain);const a=Ce.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=sb(pe.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Kt.history.length>1){Kt.history=Kt.history.slice(0,t+1);const[e]=Kt.history.slice(-1);e&&(Kt.view=e)}},goBackOrCloseModal(){Ke.state.history.length>1?Ke.goBack():$t.close()}},Ke=Di(Hue),nc=cn({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),mN={state:nc,subscribe(t){return Or(nc,()=>t(nc))},setThemeMode(t){nc.themeMode=t;try{const e=Ce.getAuthConnector();if(e){const n=mN.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:jc(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){nc.themeVariables={...nc.themeVariables,...t};try{const e=Ce.getAuthConnector();if(e){const n=mN.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:jc(nc.themeVariables,nc.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return sb(nc)}},Fs=Di(mN),y7={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},At=cn({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...y7},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),Wue={state:At,subscribe(t){return Or(At,()=>{t(At)})},subscribeKey(t,e){return Rr(At,t,e)},initialize(t){t.forEach(e=>{const n=_e.getConnectedConnectorId(e);n&&Ce.setConnectorId(n,e)})},setActiveConnector(t){t&&(At.activeConnector=mf(t))},setConnectors(t){t.filter(s=>!At.allConnectors.some(i=>i.id===s.id&&Ce.getConnectorName(i.name)===Ce.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&At.allConnectors.push(mf(s))});const n=Ce.getEnabledNamespaces(),r=Ce.getEnabledConnectors(n);At.connectors=Ce.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(At.filterByNamespaceMap).forEach(e=>{At.filterByNamespaceMap[e]=!1}),t.forEach(e=>{At.filterByNamespaceMap[e]=!0}),Ce.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){At.filterByNamespaceMap[t]=e,Ce.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Ce.getEnabledNamespaces(),e=Ce.getEnabledConnectors(t),n=Ce.areAllNamespacesEnabled();At.connectors=Ce.mergeMultiChainConnectors(e),n?ze.clearFilterByNamespaces():ze.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(At.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return At.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(At.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Ce.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===ae.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Ce.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===ae.CONNECTOR_ID.AUTH){const s=t,i=sb(pe.state),o=Fs.getSnapshot().themeMode,a=Fs.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:jc(a,o)}),Ce.setConnectors([t])}else Ce.setConnectors([t])},getAuthConnector(t){var r;const e=t||B.state.activeChain,n=At.connectors.find(s=>s.id===ae.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return At.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return At.allConnectors.find(e=>e.id===t)},getConnector(t,e){return At.allConnectors.filter(r=>r.chain===B.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=sb(pe.state),r=Fs.getSnapshot().themeMode,s=Fs.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:jc(s,r)})},getConnectorsByNamespace(t){const e=At.allConnectors.filter(n=>n.chain===t);return Ce.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=Ce.getConnector(t.id,t.rdns),n=B.state.activeChain;Rue.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?Ke.push("ConnectingExternal",{connector:e}):Ke.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Ce.getConnectorsByNamespace(t):Ce.mergeMultiChainConnectors(At.allConnectors)},setFilterByNamespace(t){At.filterByNamespace=t,At.connectors=Ce.getConnectors(t),ze.setFilterByNamespace(t)},setConnectorId(t,e){t&&(At.activeConnectorIds={...At.activeConnectorIds,[e]:t},_e.setConnectedConnectorId(e,t))},removeConnectorId(t){At.activeConnectorIds={...At.activeConnectorIds,[t]:void 0},_e.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return At.activeConnectorIds[t]},isConnected(t){return t?!!At.activeConnectorIds[t]:Object.values(At.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){At.activeConnectorIds={...y7}}},Ce=Di(Wue),ob={getConnectionStatus(t,e){const n=Ce.state.activeConnectorIds[e],r=De.state.connections.get(e)??[];return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},validateAccountSwitch({namespace:t,connection:e,address:n}){if(t===ae.CHAIN.BITCOIN){if(!n)throw new Error("Address parameter is required for switching bip122 connection");const{type:s}=e.accounts.find(i=>i.address.toLowerCase()===n.toLowerCase())??{};if(typeof s=="string"&&s!=="payment")throw new Error(`Switching to non-payment accounts is not allowed for ${t}`)}},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},filterConnectionsByAccountType(t,e){return t.map(n=>{const r=n.accounts.filter(s=>typeof s.type=="string"?s.type.toLowerCase()===e.toLowerCase():!0);return{...n,accounts:r}})},getConnectionsData(t){const e=De.state.connections.get(t)??[],n=e.filter(a=>!a.recent),r=Ce.state.activeConnectorIds[t],i=e.filter(a=>a.recent).filter(a=>Ce.getConnectorById(a.connectorId)),o=ob.excludeExistingConnections([...n.map(a=>a.connectorId),...r?[r]:[]],i);return{connections:n,recentConnections:o}}};var Um={};const que="https://secure.walletconnect.org/sdk",Gue=(typeof process<"u"&&typeof Um<"u"?Um.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||que,Vue=(typeof process<"u"&&typeof Um<"u"?Um.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",Kue=(typeof process<"u"&&typeof Um<"u"?Um.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Be={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},fr={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Que=1e3,Uc={checkNamespaceConnectorId(t,e){return Ce.getConnectorId(t)===e},isSocialProvider(t){return zt.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&Ce.setActiveConnector(e),s==null||s(je.isMobile()&&t),r){const l=$t.subscribeKey("open",u=>{u||(Ke.state.view!==r&&Ke.replace(r),l(),a(new Error("Modal closed")))})}const c=B.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&$t.close(),c(),o(wi.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=B.subscribeKey("activeCaipAddress",s=>{s&&($t.close(),r(),e(wi.parseCaipAddress(s)))});De.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=Ee.state.socialWindow,i=Ee.state.socialProvider,o=!1,a=null;const c=B.subscribeKey("activeCaipAddress",l=>{l&&(e&&$t.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===ae.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=Ce.getAuthConnector();if(g&&!o){s&&(s.close(),Ee.setSocialWindow(void 0,B.state.activeChain),s=Ee.state.socialWindow),o=!0;const y=f.data.resultUri;if(i&&Ht.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}}),await g.provider.connectSocial(y),i){_e.setConnectedSocialProvider(i),await De.connectExternal({id:g.id,type:g.type,socialUri:y},g.chain);const w=B.state.activeCaipAddress;if(!w){u(new Error("Failed to connect"));return}l(wi.parseCaipAddress(w)),Ht.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&Ht.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&Ht.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(Ee.setSocialProvider(t,B.state.activeChain),i=Ee.state.socialProvider,Ht.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=$t.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=Ce.getAuthConnector();if(p&&!Ee.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();Ee.setFarcasterUrl(g,B.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=Ce.getAuthConnector();a=je.returnOpenHref(`${ae.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){Ee.setSocialWindow(a,B.state.activeChain),s=Ee.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=$t.subscribeKey("open",c=>{c||(Ke.state.view!==e&&Ke.replace(e),a(),i(new Error("Modal closed")))})}const o=B.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&$t.close(),o(),s(wi.parseCaipAddress(a)))})})},async updateEmail(){const t=_e.getConnectedConnectorId(B.state.activeChain),e=Ce.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==ae.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return Ke.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&($t.close(),clearInterval(i),o(),r({email:a}))},Que),o=$t.subscribeKey("open",a=>{a||(Ke.state.view!=="Connect"&&Ke.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){var n;return B.checkIfSmartAccountEnabled()&&((n=Ee.state.preferredAccountTypes)==null?void 0:n[t])===fr.ACCOUNT_TYPES.EOA}},Hd=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),qn=cn({...Hd}),Jue={state:qn,subscribeKey(t,e){return Rr(qn,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=je.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){qn.message=Hd.message,qn.variant=Hd.variant,qn.svg=Hd.svg,qn.open=Hd.open,qn.autoClose=Hd.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Hd.autoClose}){qn.open?(qn.open=!1,setTimeout(()=>{qn.message=t,qn.variant=n,qn.svg=e,qn.open=!0,qn.autoClose=r},150)):(qn.message=t,qn.variant=n,qn.svg=e,qn.open=!0,qn.autoClose=r)}},Ho=Jue,tn=cn({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),Yue={state:tn,subscribe(t){return Or(tn,()=>t(tn))},setLastNetworkInView(t){tn.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");tn.loading=!0;try{const s=await qe.fetchTransactions({account:t,cursor:tn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=B.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=_0.filterSpamTransactions(s.data),o=_0.filterByConnectedChain(i),a=[...tn.transactions,...o];tn.loading=!1,e==="coinbase"?tn.coinbaseTransactions=_0.groupTransactionsByYearAndMonth(tn.coinbaseTransactions,s.data):(tn.transactions=a,tn.transactionsByYear=_0.groupTransactionsByYearAndMonth(tn.transactionsByYear,o)),tn.empty=a.length===0,tn.next=s.next?s.next:void 0}catch{const i=B.state.activeChain;Ht.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:pe.state.projectId,cursor:tn.next,isSmartAccount:((r=Ee.state.preferredAccountTypes)==null?void 0:r[i])===fr.ACCOUNT_TYPES.SMART_ACCOUNT}}),Ho.showError("Failed to fetch transactions"),tn.loading=!1,tn.empty=!0,tn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=B.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){tn.next=void 0},resetTransactions(){tn.transactions=[],tn.transactionsByYear={},tn.lastNetworkInView=void 0,tn.loading=!1,tn.empty=!1,tn.next=void 0}},_0=Di(Yue,"API_ERROR"),Et=cn({connections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Od;const Zue={state:Et,subscribe(t){return Or(Et,()=>t(Et))},subscribeKey(t,e){return Rr(Et,t,e)},_getClient(){return Et._client},setClient(t){Et._client=mf(t)},initialize(t){const e=_e.getConnections();for(const n of t){const r=n.namespace;if(r){const s=Et.connections.get(r)??[],i=e[r]??[],o=[...s,...i];Et.connections.set(r,o)}}},async connectWalletConnect(){var t,e,n,r;if(je.isTelegram()||je.isSafari()&&je.isIos()){if(Od){await Od,Od=void 0;return}if(!je.isPairingExpired(Et==null?void 0:Et.wcPairingExpiry)){const s=Et.wcUri;Et.wcUri=s;return}Od=(e=(t=De._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),De.state.status="connecting",await Od,Od=void 0,Et.wcPairingExpiry=void 0,De.state.status="connected"}else await((r=(n=De._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=De._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&B.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=De._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||B.state.activeChain;e&&Ce.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;$t.setLoading(!0,B.state.activeChain);const n=Ce.getAuthConnector();n&&(Ee.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),_e.setPreferredAccountTypes(Ee.state.preferredAccountTypes??{[e]:t}),await De.reconnectExternal(n),$t.setLoading(!1,B.state.activeChain),Ht.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=B.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=De._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=De._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=De._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=De._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=De._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=De._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=De._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=De._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=De._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=De._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=De._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=De._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Et.wcUri=void 0,Et.wcPairingExpiry=void 0,Et.wcLinking=void 0,Et.recentWallet=void 0,Et.status="disconnected",_0.resetTransactions(),_e.deleteWalletConnectDeepLink()},resetUri(){Et.wcUri=void 0,Et.wcPairingExpiry=void 0,Od=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=De.state;t&&_e.setWalletConnectDeepLink(t),e&&_e.setAppKitRecent(e),Ht.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Ke.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Et.wcBasic=t},setUri(t){Et.wcUri=t,Et.wcPairingExpiry=je.getPairingExpiry()},setWcLinking(t){Et.wcLinking=t},setWcError(t){Et.wcError=t,Et.buffering=!1},setRecentWallet(t){Et.recentWallet=t},setBuffering(t){Et.buffering=t},setStatus(t){Et.status=t},setIsSwitchingConnection(t){Et.isSwitchingConnection=t},async disconnect({id:t,namespace:e}={}){var n;try{await((n=De._getClient())==null?void 0:n.disconnect({id:t,chainNamespace:e}))}catch(r){throw new $m("Failed to disconnect","INTERNAL_SDK_ERROR",r)}},setConnections(t,e){Et.connections=new Map(Et.connections.set(e,t))},async handleAuthAccountSwitch({address:t,connection:e,namespace:n}){var o;const r=(o=e.accounts.find(a=>a.type==="smartAccount"))==null?void 0:o.address,i=(r==null?void 0:r.toLowerCase())===t.toLowerCase()&&Uc.canSwitchToSmartAccount(n)?"smartAccount":"eoa";await De.setPreferredAccountType(i,n)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=Ce.getConnectorById(t.connectorId),s=t.connectorId===ae.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);const i=await De.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return s&&n&&await De.handleAuthAccountSwitch({address:n,connection:t,namespace:e}),i==null?void 0:i.address},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=Ce.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===ae.CONNECTOR_ID.AUTH,a=t.connectorId===ae.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&Uc.isSocialProvider(i)){const{address:d}=await Uc.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){$t.open({view:"ConnectingFarcaster"})},onConnect(){Ke.replace("ProfileWallets")}});c=d}else{const{address:d}=await Uc.connectEmail({closeModalOnConnect:r,onOpen(){$t.open({view:"EmailLogin"})},onConnect(){Ke.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await Uc.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){$t.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){Ke.replace("ProfileWallets")}});c=d}else{const d=await De.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await De.handleAuthAccountSwitch({address:n,connection:t,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){ob.validateAccountSwitch({namespace:n,connection:t,address:e});let i;const o=Ee.getCaipAddress(n);if(o){const{address:c}=wi.parseCaipAddress(o);i=c}const a=ob.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await De.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await De.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},De=Di(Zue),tp=cn({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Fa={state:tp,subscribe(t){return Or(tp,()=>t(tp))},subscribeOpen(t){return Rr(tp,"open",t)},set(t){Object.assign(tp,{...tp,...t})}};function Xue(t){const e=Array.from(B.state.chains.keys());let n=[];return t?(n.push([t,B.state.chains.get(t)]),Uc.checkNamespaceConnectorId(t,ae.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&Uc.checkNamespaceConnectorId(r,ae.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,B.state.chains.get(r)])}):Uc.checkNamespaceConnectorId(t,ae.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&Uc.checkNamespaceConnectorId(r,ae.CONNECTOR_ID.AUTH)&&n.push([r,B.state.chains.get(r)])})):n=Array.from(B.state.chains.entries()),n}function w7(){var r,s;const t=((r=B.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=B.state.activeCaipNetwork)==null?void 0:s.id)||1,n=zt.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}const ede={async getTokenList(){var r;const t=B.state.activeCaipNetwork,e=await qe.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=B.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(De==null?void 0:De.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await qe.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await qe.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=De.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await rR.getMyTokensWithBalance(t);return Ee.setTokenBalance(e,B.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:w7(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Ft=cn({tokenBalances:[],loading:!1}),tde={state:Ft,subscribe(t){return Or(Ft,()=>t(Ft))},subscribeKey(t,e){return Rr(Ft,t,e)},setToken(t){t&&(Ft.token=mf(t))},setTokenAmount(t){Ft.sendTokenAmount=t},setReceiverAddress(t){Ft.receiverAddress=t},setReceiverProfileImageUrl(t){Ft.receiverProfileImageUrl=t},setReceiverProfileName(t){Ft.receiverProfileName=t},setNetworkBalanceInUsd(t){Ft.networkBalanceInUSD=t},setLoading(t){Ft.loading=t},async sendToken(){var t;try{switch(Ot.setLoading(!0),(t=B.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await Ot.sendEvmToken();return;case"solana":await Ot.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Ot.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=B.state.activeChain,e=(n=Ee.state.preferredAccountTypes)==null?void 0:n[t];if(!Ot.state.sendTokenAmount||!Ot.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Ot.state.token)throw new Error("A token is required");(r=Ot.state.token)!=null&&r.address?(Ht.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===fr.ACCOUNT_TYPES.SMART_ACCOUNT,token:Ot.state.token.address,amount:Ot.state.sendTokenAmount,network:((s=B.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await Ot.sendERC20Token({receiverAddress:Ot.state.receiverAddress,tokenAddress:Ot.state.token.address,sendTokenAmount:Ot.state.sendTokenAmount,decimals:Ot.state.token.quantity.decimals})):(Ht.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===fr.ACCOUNT_TYPES.SMART_ACCOUNT,token:Ot.state.token.symbol||"",amount:Ot.state.sendTokenAmount,network:((i=B.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await Ot.sendNativeToken({receiverAddress:Ot.state.receiverAddress,sendTokenAmount:Ot.state.sendTokenAmount,decimals:Ot.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Ft.loading=!0;const e=(i=B.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=B.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=B.state.activeCaipAddress,s=r?je.getPlainAddress(r):void 0;if(Ft.lastRetry&&!je.isAllowedRetry(Ft.lastRetry,30*zt.ONE_SEC_MS))return Ft.loading=!1,[];try{if(s&&e&&n){const a=await rR.getMyTokensWithBalance();return Ft.tokenBalances=a,Ft.lastRetry=void 0,a}}catch(a){Ft.lastRetry=Date.now(),t==null||t(a),Ho.showError("Token Balance Unavailable")}finally{Ft.loading=!1}return[]},fetchNetworkBalance(){if(Ft.tokenBalances.length===0)return;const t=ede.mapBalancesToSwapTokens(Ft.tokenBalances);if(!t)return;const e=t.find(n=>n.address===w7());e&&(Ft.networkBalanceInUSD=e?Eue.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;Ke.pushTransactionStack({});const e=t.receiverAddress,n=Ee.state.address,r=De.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await De.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),Ht.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=Ee.state.preferredAccountTypes)==null?void 0:i.eip155)===fr.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=Ot.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=B.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=De._getClient())==null||c.updateBalance("eip155"),Ot.resetSend()},async sendERC20Token(t){Ke.pushTransactionStack({onSuccess(){Ke.replace("Account")}});const e=De.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Ee.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=je.getPlainAddress(t.tokenAddress);await De.writeContract({fromAddress:Ee.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:Aue.getERC20Abi(n),chainNamespace:"eip155"}),Ot.resetSend()}},async sendSolanaToken(){var t;if(!Ot.state.sendTokenAmount||!Ot.state.receiverAddress)throw new Error("An amount and receiver address are required");Ke.pushTransactionStack({onSuccess(){Ke.replace("Account")}}),await De.sendTransaction({chainNamespace:"solana",to:Ot.state.receiverAddress,value:Ot.state.sendTokenAmount}),(t=De._getClient())==null||t.updateBalance("solana"),Ot.resetSend()},resetSend(){Ft.token=void 0,Ft.sendTokenAmount=void 0,Ft.receiverAddress=void 0,Ft.receiverProfileImageUrl=void 0,Ft.receiverProfileName=void 0,Ft.loading=!1,Ft.tokenBalances=[]}},Ot=Di(tde),KS={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},T1={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Te=cn({chains:hue(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),nde={state:Te,subscribe(t){return Or(Te,()=>{t(Te)})},subscribeKey(t,e){return Rr(Te,t,e)},subscribeChainProp(t,e,n){let r;return Or(Te.chains,()=>{var i;const s=n||Te.activeChain;if(s){const o=(i=Te.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=_e.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=pe.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Te.noAdapters=!0),Te.noAdapters||(Te.activeChain=a==null?void 0:a.namespace,Te.activeCaipNetwork=i,B.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Te.activeChain&&Fa.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);B.state.chains.set(u,{namespace:u,networkState:cn({...T1,caipNetwork:d==null?void 0:d[0]}),accountState:cn(KS),caipNetworks:d??[],...n}),B.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Te.activeChain===t){const r=Array.from(Te.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&B.setActiveCaipNetwork(s)}}Te.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){Te.chains.set(t.namespace,{namespace:t.namespace,networkState:{...T1,caipNetwork:r[0]},accountState:KS,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),B.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Te.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Te.chains.set(t.chainNamespace,{...e,caipNetworks:r}),B.setRequestedCaipNetworks(r,t.chainNamespace),Ce.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Te.chains.get(t);if(n){const o=((r=Te.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&B.setActiveCaipNetwork(n.caipNetworks[0]),Te.chains.set(t,{...n,caipNetworks:a}),B.setRequestedCaipNetworks(a||[],t),a.length===0&&Ce.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Te.chains.get(t);n&&(n.networkState={...n.networkState||T1,...e},Te.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Te.chains.get(t);if(r){const s={...r.accountState||KS,...e};Te.chains.set(t,{...r,accountState:s}),(Te.chains.size===1||Te.activeChain===t)&&(e.caipAddress&&(Te.activeCaipAddress=e.caipAddress),Ee.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Te.chains.get(t);if(n){const r={...n.networkState||T1,...e};Te.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){B.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&Ce.removeConnectorId(n)},setActiveNamespace(t){var r,s;Te.activeChain=t;const e=t?Te.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Te.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Te.activeCaipNetwork=n,B.setChainNetworkData(t,{caipNetwork:n}),_e.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Fa.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Te.activeChain!==t.chainNamespace&&B.setIsSwitchingNamespace(!0);const e=Te.chains.get(t.chainNamespace);Te.activeChain=t.chainNamespace,Te.activeCaipNetwork=t,B.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Te.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Te.activeCaipAddress=void 0,B.setAccountProp("caipAddress",Te.activeCaipAddress,t.chainNamespace),e&&Ee.replaceState(e.accountState),Ot.resetSend(),Fa.set({activeChain:Te.activeChain,selectedNetworkId:(i=Te.activeCaipNetwork)==null?void 0:i.caipNetworkId}),_e.setActiveCaipNetworkId(t.caipNetworkId),!B.checkIfSupportedNetwork(t.chainNamespace)&&pe.state.enableNetworkSwitch&&!pe.state.allowUnsupportedChain&&!De.state.wcBasic&&B.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Te.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==B.state.activeChain,n=(s=B.getNetworkData(t))==null?void 0:s.caipNetwork,r=B.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await B.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=B.state.chains.get(B.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=Te.activeCaipNetwork)==null?void 0:o.id)})),r=B.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&$t.close()}catch{Ke.goBack()}Ht.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Te.activeChain,n=Te.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Te.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Te.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Te.activeChain;if(e&&(n=e),!n)return;const r=(s=Te.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Te.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Te.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return je.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Te.chains.forEach(e=>{const n=B.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){B.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=B.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Ce.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Te.chains.forEach(e=>{const n=B.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return Te.activeCaipNetwork},getActiveCaipAddress(){return Te.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Te.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=B.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());B.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Te.activeCaipNetwork,r=B.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Te.activeChain)return!0;const e=B.getRequestedCaipNetworks(Te.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){B.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=ib.caipNetworkIdToNumber((r=Te.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Te.activeChain;if(!e||!t)return!1;const n=B.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){$t.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Te.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&zt.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){B.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");Te.activeCaipAddress=void 0,B.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),Ce.removeConnectorId(e)},setIsSwitchingNamespace(t){Te.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Te.chains.forEach(s=>{ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Te.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=B.state.chains.get(t))==null?void 0:e.accountState:Ee.state},getNetworkData(t){var n;const e=t||Te.activeChain;if(e)return(n=B.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=B.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Ce.state.filterByNamespace;return(t?[Te.chains.get(t)]:Array.from(Te.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?B.getRequestedCaipNetworks(t):B.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){Te.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Te.lastConnectedSIWECaipNetwork}},B=Di(nde),rde={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},b7=je.getBlockchainApiUrl(),Ss=cn({clientId:null,api:new Cv({baseUrl:b7,clientId:null}),supportedChains:{http:[],ws:[]}}),qe={state:Ss,async get(t){const{st:e,sv:n}=qe.getSdkProperties(),r=pe.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Ss.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=pe.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Ss.supportedChains.http.length||await qe.getSupportedNetworks()}catch{return!1}return Ss.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await qe.get({path:"v1/supported-chains"});return Ss.supportedChains=t,t}catch{return Ss.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await qe.isNetworkSupported(e))return{avatar:"",name:""};const r=_e.getIdentityFromCacheForAddress(t);if(r)return r;const s=await qe.get({path:`/v1/identity/${t}`,params:{sender:B.state.activeCaipAddress?je.getPlainAddress(B.state.activeCaipAddress):void 0}});return _e.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await qe.isNetworkSupported((a=B.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?qe.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await qe.isNetworkSupported((o=B.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?qe.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await qe.isNetworkSupported((n=B.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?qe.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await qe.isNetworkSupported((n=B.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ss.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:pe.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await qe.isNetworkSupported((r=B.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?qe.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=qe.getSdkProperties();if(!await qe.isNetworkSupported((s=B.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return qe.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await qe.isNetworkSupported((o=B.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Ss.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:zt.CONVERT_SLIPPAGE_TOLERANCE},projectId:pe.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=qe.getSdkProperties();if(!await qe.isNetworkSupported((o=B.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return qe.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=qe.getSdkProperties();if(!await qe.isNetworkSupported((l=B.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Ho.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=_e.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await qe.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return _e.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await qe.isNetworkSupported((n=B.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?qe.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await qe.isNetworkSupported((n=B.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?qe.get({path:`/v1/profile/reverse/${t}`,params:{sender:Ee.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await qe.isNetworkSupported((n=B.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?qe.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await qe.isNetworkSupported((i=B.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Ss.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await qe.isNetworkSupported((a=B.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Ss.api.post({path:"/v1/generators/onrampurl",params:{projectId:pe.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await qe.isNetworkSupported((e=B.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await qe.get({path:"/v1/onramp/options"})}catch{return rde}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await qe.isNetworkSupported((s=B.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Ss.api.post({path:"/v1/onramp/quote",params:{projectId:pe.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await qe.isNetworkSupported((n=B.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?qe.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await qe.isNetworkSupported((s=B.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Ss.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:pe.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Ss.clientId=t,Ss.api=new Cv({baseUrl:b7,clientId:t})}},QS={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return sy(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},rR={async getMyTokensWithBalance(t){const e=Ee.state.address,n=B.state.activeCaipNetwork,r=Ce.getConnectorId("eip155")===ae.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=_e.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace==="eip155"&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await qe.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=QS.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await De.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await De.walletGetAssets({account:t,chainFilter:[s]});if(!QS.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>QS.createBalance(l,e.caipNetworkId));return _e.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},Ui=cn({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),sde={state:Ui,replaceState(t){t&&Object.assign(Ui,mf(t))},subscribe(t){return B.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return B.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){B.setAccountProp("status",t,e)},getCaipAddress(t){return B.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?je.getPlainAddress(t):void 0;e===B.state.activeChain&&(B.state.activeCaipAddress=t),B.setAccountProp("caipAddress",t,e),B.setAccountProp("address",n,e)},setBalance(t,e,n){B.setAccountProp("balance",t,n),B.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){B.setAccountProp("profileName",t,e)},setProfileImage(t,e){B.setAccountProp("profileImage",t,e)},setUser(t,e){B.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){B.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){B.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){B.setAccountProp("currentTab",t,B.state.activeChain)},setTokenBalance(t,e){t&&B.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){B.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){B.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=B.getAccountProp("addressLabels",n)||new Map;r.set(t,e),B.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=B.getAccountProp("addressLabels",e)||new Map;n.delete(t),B.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){B.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){B.setAccountProp("preferredAccountTypes",{...Ui.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){Ui.preferredAccountTypes=t},setSocialProvider(t,e){t&&B.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){B.setAccountProp("socialWindow",t?mf(t):void 0,e)},setFarcasterUrl(t,e){B.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Ui.balanceLoading=!0;const e=(i=B.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=B.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=B.state.activeCaipAddress,s=r?je.getPlainAddress(r):void 0;if(Ui.lastRetry&&!je.isAllowedRetry(Ui.lastRetry,30*zt.ONE_SEC_MS))return Ui.balanceLoading=!1,[];try{if(s&&e&&n){const a=await rR.getMyTokensWithBalance();return Ee.setTokenBalance(a,n),Ui.lastRetry=void 0,Ui.balanceLoading=!1,a}}catch(a){Ui.lastRetry=Date.now(),t==null||t(a),Ho.showError("Token Balance Unavailable")}finally{Ui.balanceLoading=!1}return[]},resetAccount(t){B.resetAccount(t)}},Ee=Di(sde),ide={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=B.state.activeCaipNetwork,r=Ke.state.data;if(t.id===(n==null?void 0:n.id))return;const i=Ee.getCaipAddress(B.state.activeChain),o=t.chainNamespace!==B.state.activeChain,a=Ee.getCaipAddress(t.chainNamespace),l=Ce.getConnectorId(B.state.activeChain)===ae.CONNECTOR_ID.AUTH,u=ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Ke.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Ke.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Ke.push("SwitchNetwork",{...r,network:t})}},Is=cn({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),ode={state:Is,subscribe(t){return Or(Is,()=>t(Is))},subscribeKey(t,e){return Rr(Is,t,e)},async open(t){var o,a;const e=Ee.state.status==="connected",n=t==null?void 0:t.namespace,r=B.state.activeChain,s=n&&n!==r,i=(o=B.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(De.state.wcBasic?ze.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await ze.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),Ce.setFilterByNamespace(t==null?void 0:t.namespace),$t.setLoading(!0,n),n&&s){const c=((a=B.getNetworkData(n))==null?void 0:a.caipNetwork)||B.getRequestedCaipNetworks(n)[0];c&&ide.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=B.state.noAdapters;pe.state.manualWCControl||c&&!i?je.isMobile()?Ke.reset("AllWallets"):Ke.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Ke.reset(t.view,t.data):i?Ke.reset("Account"):Ke.reset("Connect")}Is.open=!0,Fa.set({open:!0}),Ht.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=pe.state.enableEmbedded,e=!!B.state.activeCaipAddress;Is.open&&Ht.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Is.open=!1,Ke.reset("Connect"),$t.clearLoading(),t?e?Ke.replace("Account"):Ke.push("Connect"):Fa.set({open:!1}),De.resetUri()},setLoading(t,e){e&&Is.loadingNamespaceMap.set(e,t),Is.loading=t,Fa.set({loading:t})},clearLoading(){Is.loadingNamespaceMap.clear(),Is.loading=!1},shake(){Is.shake||(Is.shake=!0,setTimeout(()=>{Is.shake=!1},500))}},$t=Di(ode),V0={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},yN={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},ade={providers:g7,selectedProvider:null,error:null,purchaseCurrency:V0,paymentCurrency:yN,purchaseCurrencies:[V0],paymentCurrencies:[],quotesLoading:!1},_t=cn(ade),cde={state:_t,subscribe(t){return Or(_t,()=>t(_t))},subscribeKey(t,e){return Rr(_t,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=B.state.activeChain===ae.CHAIN.SOLANA?"SOL":"USDC",n=Ee.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",Sue),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",pe.state.projectId),_t.selectedProvider={...t,url:r.toString()}}else _t.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=g7.filter(r=>e.includes(r.name));_t.providers=n}else _t.providers=[]},setPurchaseCurrency(t){_t.purchaseCurrency=t},setPaymentCurrency(t){_t.paymentCurrency=t},setPurchaseAmount(t){wN.state.purchaseAmount=t},setPaymentAmount(t){wN.state.paymentAmount=t},async getAvailableCurrencies(){const t=await qe.getOnrampOptions();_t.purchaseCurrencies=t.purchaseCurrencies,_t.paymentCurrencies=t.paymentCurrencies,_t.paymentCurrency=t.paymentCurrencies[0]||yN,_t.purchaseCurrency=t.purchaseCurrencies[0]||V0,await ze.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await ze.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;_t.quotesLoading=!0;try{const n=await qe.getOnrampQuote({purchaseCurrency:_t.purchaseCurrency,paymentCurrency:_t.paymentCurrency,amount:((t=_t.paymentAmount)==null?void 0:t.toString())||"0",network:(e=_t.purchaseCurrency)==null?void 0:e.symbol});return _t.quotesLoading=!1,_t.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return _t.error=n.message,_t.quotesLoading=!1,null}finally{_t.quotesLoading=!1}},resetState(){_t.selectedProvider=null,_t.error=null,_t.purchaseCurrency=V0,_t.paymentCurrency=yN,_t.purchaseCurrencies=[V0],_t.paymentCurrencies=[],_t.paymentAmount=void 0,_t.purchaseAmount=void 0,_t.quotesLoading=!1}},wN=Di(cde),A8=2147483648,lde={convertEVMChainIdToCoinType(t){if(t>=A8)throw new Error("Invalid chainId");return(A8|t)>>>0}},Bi=cn({suggestions:[],loading:!1}),ude={state:Bi,subscribe(t){return Or(Bi,()=>t(Bi))},subscribeKey(t,e){return Rr(Bi,t,e)},async resolveName(t){var e,n;try{return await qe.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await qe.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Bi.loading=!0,Bi.suggestions=[];const e=await qe.getEnsNameSuggestions(t);return Bi.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Bi.suggestions}catch(e){const n=K0.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Bi.loading=!1}},async getNamesForAddress(t){try{if(!B.state.activeCaipNetwork)return[];const n=_e.getEnsFromCacheForAddress(t);if(n)return n;const r=await qe.reverseLookupEnsName({address:t});return _e.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=K0.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=B.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=Ee.state.address,r=Ce.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");Bi.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Ke.pushTransactionStack({onCancel(){Ke.replace("RegisterAccountName")}});const i=await De.signMessage(s);Bi.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=lde.convertEVMChainIdToCoinType(Number(o));await qe.registerEnsName({coinType:a,address:n,signature:i,message:s}),Ee.setProfileName(t,e.chainNamespace),Ke.replace("RegisterAccountNameSuccess")}catch(s){const i=K0.parseEnsApiError(s,`Error registering name ${t}`);throw Ke.replace("RegisterAccountName"),new Error(i)}finally{Bi.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},K0=Di(ude);var sR={exports:{}},fg=typeof Reflect=="object"?Reflect:null,S8=fg&&typeof fg.apply=="function"?fg.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},RE;fg&&typeof fg.ownKeys=="function"?RE=fg.ownKeys:Object.getOwnPropertySymbols?RE=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:RE=function(e){return Object.getOwnPropertyNames(e)};function dde(t){console&&console.warn&&console.warn(t)}var v7=Number.isNaN||function(e){return e!==e};function Xt(){Xt.init.call(this)}sR.exports=Xt;sR.exports.once=gde;Xt.EventEmitter=Xt;Xt.prototype._events=void 0;Xt.prototype._eventsCount=0;Xt.prototype._maxListeners=void 0;var I8=10;function NC(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Xt,"defaultMaxListeners",{enumerable:!0,get:function(){return I8},set:function(t){if(typeof t!="number"||t<0||v7(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");I8=t}});Xt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Xt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||v7(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function E7(t){return t._maxListeners===void 0?Xt.defaultMaxListeners:t._maxListeners}Xt.prototype.getMaxListeners=function(){return E7(this)};Xt.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")S8(c,this,n);else for(var l=c.length,u=S7(c,l),r=0;r<l;++r)S8(u[r],this,n);return!0};function _7(t,e,n,r){var s,i,o;if(NC(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=E7(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,dde(a)}return t}Xt.prototype.addListener=function(e,n){return _7(this,e,n,!1)};Xt.prototype.on=Xt.prototype.addListener;Xt.prototype.prependListener=function(e,n){return _7(this,e,n,!0)};function hde(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function x7(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=hde.bind(r);return s.listener=n,r.wrapFn=s,s}Xt.prototype.once=function(e,n){return NC(n),this.on(e,x7(this,e,n)),this};Xt.prototype.prependOnceListener=function(e,n){return NC(n),this.prependListener(e,x7(this,e,n)),this};Xt.prototype.removeListener=function(e,n){var r,s,i,o,a;if(NC(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():fde(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Xt.prototype.off=Xt.prototype.removeListener;Xt.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function C7(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?pde(s):S7(s,s.length)}Xt.prototype.listeners=function(e){return C7(this,e,!0)};Xt.prototype.rawListeners=function(e){return C7(this,e,!1)};Xt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):A7.call(t,e)};Xt.prototype.listenerCount=A7;function A7(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Xt.prototype.eventNames=function(){return this._eventsCount>0?RE(this._events):[]};function S7(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function fde(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function pde(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function gde(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}I7(t,e,i,{once:!0}),e!=="error"&&mde(t,s,{once:!0})})}function mde(t,e,n){typeof t.on=="function"&&I7(t,"error",e,n)}function I7(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var uo=sR.exports;const iR=Of(uo);var be={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var bN=function(t,e){return bN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},bN(t,e)};function yde(t,e){bN(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var vN=function(){return vN=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},vN.apply(this,arguments)};function wde(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function bde(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function vde(t,e){return function(n,r){e(n,r,t)}}function Ede(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function _de(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function xde(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Cde(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function Ade(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function EN(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function T7(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function Sde(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(T7(arguments[e]));return t}function Ide(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function ab(t){return this instanceof ab?(this.v=t,this):new ab(t)}function Tde(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof ab?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Nde(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:ab(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function Pde(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof EN=="function"?EN(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function kde(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Ode(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Rde(t){return t&&t.__esModule?t:{default:t}}function Dde(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function $de(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const Ude=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return vN},__asyncDelegator:Nde,__asyncGenerator:Tde,__asyncValues:Pde,__await:ab,__awaiter:_de,__classPrivateFieldGet:Dde,__classPrivateFieldSet:$de,__createBinding:Cde,__decorate:bde,__exportStar:Ade,__extends:yde,__generator:xde,__importDefault:Rde,__importStar:Ode,__makeTemplateObject:kde,__metadata:Ede,__param:vde,__read:T7,__rest:wde,__spread:Sde,__spreadArrays:Ide,__values:EN},Symbol.toStringTag,{value:"Module"})),PC=Ux(Ude);var JS={},qy={},T8;function Bde(){if(T8)return qy;T8=1,Object.defineProperty(qy,"__esModule",{value:!0}),qy.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return qy.delay=t,qy}var Rd={},YS={},Dd={},N8;function Lde(){return N8||(N8=1,Object.defineProperty(Dd,"__esModule",{value:!0}),Dd.ONE_THOUSAND=Dd.ONE_HUNDRED=void 0,Dd.ONE_HUNDRED=100,Dd.ONE_THOUSAND=1e3),Dd}var ZS={},P8;function Mde(){return P8||(P8=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(ZS)),ZS}var k8;function N7(){return k8||(k8=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=PC;e.__exportStar(Lde(),t),e.__exportStar(Mde(),t)}(YS)),YS}var O8;function jde(){if(O8)return Rd;O8=1,Object.defineProperty(Rd,"__esModule",{value:!0}),Rd.fromMiliseconds=Rd.toMiliseconds=void 0;const t=N7();function e(r){return r*t.ONE_THOUSAND}Rd.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Rd.fromMiliseconds=n,Rd}var R8;function Fde(){return R8||(R8=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=PC;e.__exportStar(Bde(),t),e.__exportStar(jde(),t)}(JS)),JS}var np={},D8;function zde(){if(D8)return np;D8=1,Object.defineProperty(np,"__esModule",{value:!0}),np.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return np.Watch=t,np.default=t,np}var XS={},Gy={},$8;function Hde(){if($8)return Gy;$8=1,Object.defineProperty(Gy,"__esModule",{value:!0}),Gy.IWatch=void 0;class t{}return Gy.IWatch=t,Gy}var U8;function Wde(){return U8||(U8=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),PC.__exportStar(Hde(),t)}(XS)),XS}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=PC;e.__exportStar(Fde(),t),e.__exportStar(zde(),t),e.__exportStar(Wde(),t),e.__exportStar(N7(),t)})(be);class jf{}let qde=class extends jf{constructor(e){super()}};const B8=be.FIVE_SECONDS,Ff={pulse:"heartbeat_pulse"};let Gde=class P7 extends qde{constructor(e){super(e),this.events=new uo.EventEmitter,this.interval=B8,this.interval=(e==null?void 0:e.interval)||B8}static async init(e){const n=new P7(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),be.toMiliseconds(this.interval))}pulse(){this.events.emit(Ff.pulse)}};const Vde=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Kde=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Qde=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Jde(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Yde(t);return}return e}function Yde(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function N1(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!Qde.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Vde.test(t)||Kde.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,Jde)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function Zde(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function rr(t,...e){try{return Zde(t(...e))}catch(n){return Promise.reject(n)}}function Xde(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function ehe(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function DE(t){if(Xde(t))return String(t);if(ehe(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return DE(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const _N="base64:";function the(t){return typeof t=="string"?t:_N+she(t)}function nhe(t){return typeof t!="string"||!t.startsWith(_N)?t:rhe(t.slice(_N.length))}function rhe(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function she(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Ds(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function ihe(...t){return Ds(t.join(":"))}function P1(t){return t=Ds(t),t?t+":":""}function ohe(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function ahe(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const che="memory",lhe=()=>{const t=new Map;return{name:che,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function uhe(t={}){const e={mounts:{"":t.driver||lhe()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=Ds(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await L8(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",y=Ds(g?p:p.key),w=g?void 0:p.value,v=g||!p.options?u:{...u,...p.options},b=n(y);f(b).items.push({key:y,value:w,relativeKey:b.relativeKey,options:v})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=Ds(l);const{relativeKey:d,driver:h}=n(l);return rr(h.hasItem,d,u)},getItem(l,u={}){l=Ds(l);const{relativeKey:d,driver:h}=n(l);return rr(h.getItem,d,u).then(f=>N1(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?rr(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:ihe(d.base,f.key),value:N1(f.value)}))):Promise.all(d.items.map(h=>rr(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:N1(f)})))))},getItemRaw(l,u={}){l=Ds(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?rr(h.getItemRaw,d,u):rr(h.getItem,d,u).then(f=>nhe(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Ds(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await rr(f.setItem,h,DE(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return rr(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:DE(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>rr(d.driver.setItem,h.relativeKey,DE(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Ds(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await rr(f.setItemRaw,h,u,d);else if(f.setItem)await rr(f.setItem,h,the(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Ds(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await rr(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await rr(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Ds(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await rr(h.getMeta,d,u)),!u.nativeOnly){const p=await rr(h.getItem,d+"$",u).then(g=>N1(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var y;l=P1(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const w of d){(y=w.driver.flags)!=null&&y.maxDepth||(p=!1);const v=await rr(w.driver.getKeys,w.relativeBase,u);for(const b of v){const x=w.mountpoint+Ds(b);h.some(_=>x.startsWith(_))||f.push(x)}h=[w.mountpoint,...h.filter(b=>!b.startsWith(w.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(w=>(!g||ohe(w,u.maxDepth))&&ahe(w,l))},async clear(l,u={}){l=P1(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return rr(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>M8(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=P1(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(L8(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=P1(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await M8(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=Ds(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Ds(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function L8(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function M8(t){typeof t.dispose=="function"&&await rr(t.dispose)}function zf(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function k7(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=zf(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let e2;function Av(){return e2||(e2=k7("keyval-store","keyval")),e2}function j8(t,e=Av()){return e("readonly",n=>zf(n.get(t)))}function dhe(t,e,n=Av()){return n("readwrite",r=>(r.put(e,t),zf(r.transaction)))}function hhe(t,e=Av()){return e("readwrite",n=>(n.delete(t),zf(n.transaction)))}function fhe(t=Av()){return t("readwrite",e=>(e.clear(),zf(e.transaction)))}function phe(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},zf(t.transaction)}function ghe(t=Av()){return t("readonly",e=>{if(e.getAllKeys)return zf(e.getAllKeys());const n=[];return phe(e,r=>n.push(r.key)).then(()=>n)})}const mhe=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),yhe=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function wf(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return yhe(t)}catch{return t}}function rl(t){return typeof t=="string"?t:mhe(t)||""}const whe="idb-keyval";var bhe=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=k7(t.dbName,t.storeName)),{name:whe,options:t,async hasItem(s){return!(typeof await j8(n(s),r)>"u")},async getItem(s){return await j8(n(s),r)??null},setItem(s,i){return dhe(n(s),i,r)},removeItem(s){return hhe(n(s),r)},getKeys(){return ghe(r)},clear(){return fhe(r)}}};const vhe="WALLET_CONNECT_V2_INDEXED_DB",Ehe="keyvaluestorage";let _he=class{constructor(){this.indexedDb=uhe({driver:bhe({dbName:vhe,storeName:Ehe})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,rl(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var t2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$E={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof t2<"u"&&t2.localStorage?$E.exports=t2.localStorage:typeof window<"u"&&window.localStorage?$E.exports=window.localStorage:$E.exports=new e})();function xhe(t){var e;return[t[0],wf((e=t[1])!=null?e:"")]}let Che=class{constructor(){this.localStorage=$E.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(xhe)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return wf(n)}async setItem(e,n){this.localStorage.setItem(e,rl(n))}async removeItem(e){this.localStorage.removeItem(e)}};const Ahe="wc_storage_version",F8=1,She=async(t,e,n)=>{const r=Ahe,s=await e.getItem(r);if(s&&s>=F8){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,F8),n(e),Ihe(t,o)},Ihe=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let The=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new Che;this.storage=e;try{const n=new _he;She(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};function Nhe(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var Phe=khe;function khe(t,e,n){var r=n&&n.stringify||Nhe,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const z8=Phe;var Np=za;const cb=Fhe().console||{},Ohe={mapHttpRequest:k1,mapHttpResponse:k1,wrapRequestSerializer:n2,wrapResponseSerializer:n2,wrapErrorSerializer:n2,req:k1,res:k1,err:Bhe};function Rhe(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function za(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||cb;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=Rhe(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=lb),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:Lhe(t)};c.levels=za.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=lb,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=xN());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,rp(l,c,"error","log"),rp(l,c,"fatal","error"),rp(l,c,"warn","error"),rp(l,c,"info","log"),rp(l,c,"debug","log"),rp(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const y=g.serializers;if(s&&y){var w=Object.assign({},r,y),v=t.browser.serialize===!0?Object.keys(w):s;delete p.serializers,kC([p],v,w,this._stdErrSerialize)}function b(x){this._childLevel=(x._childLevel|0)+1,this.error=sp(x,p,"error"),this.fatal=sp(x,p,"fatal"),this.warn=sp(x,p,"warn"),this.info=sp(x,p,"info"),this.debug=sp(x,p,"debug"),this.trace=sp(x,p,"trace"),w&&(this.serializers=w,this._serialize=v),e&&(this._logEvent=xN([].concat(x._logEvent.bindings,p)))}return b.prototype=this,new b(this)}return c}za.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};za.stdSerializers=Ohe;za.stdTimeFunctions=Object.assign({},{nullTime:O7,epochTime:R7,unixTime:Mhe,isoTime:jhe});function rp(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?lb:s[n]?s[n]:cb[n]||cb[r]||lb,Dhe(t,e,n)}function Dhe(t,e,n){!t.transmit&&e[n]===lb||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===cb?cb:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&kC(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,$he(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=za.levels.values[l],d=za.levels.values[n];if(d<u)return;Uhe(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:za.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function $he(t,e,n,r){t._serialize&&kC(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=za.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?z8(s.shift(),s):void 0}else typeof i=="string"&&(i=z8(s.shift(),s));return i!==void 0&&(o.msg=i),o}function kC(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=za.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function sp(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function Uhe(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;kC(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=xN(c)}function xN(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function Bhe(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function Lhe(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?O7:R7}function k1(){return{}}function n2(t){return t}function lb(){}function O7(){return!1}function R7(){return Date.now()}function Mhe(){return Math.round(Date.now()/1e3)}function jhe(){return new Date(Date.now()).toISOString()}function Fhe(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const Sv=Of(Np),zhe={level:"info"},Iv="custom_context",oR=1e3*1024;let Hhe=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},H8=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new Hhe(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},D7=class{constructor(e,n=oR){this.level=e??"error",this.levelValue=Np.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new H8(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===Np.levels.values.error?console.error(e):n===Np.levels.values.warn?console.warn(e):n===Np.levels.values.debug?console.debug(e):n===Np.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(rl({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new H8(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(rl({extraMetadata:e})),new Blob(n,{type:"application/json"})}},Whe=class{constructor(e,n=oR){this.baseChunkLogger=new D7(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},qhe=class{constructor(e,n=oR){this.baseChunkLogger=new D7(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var Ghe=Object.defineProperty,Vhe=Object.defineProperties,Khe=Object.getOwnPropertyDescriptors,W8=Object.getOwnPropertySymbols,Qhe=Object.prototype.hasOwnProperty,Jhe=Object.prototype.propertyIsEnumerable,q8=(t,e,n)=>e in t?Ghe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,z_=(t,e)=>{for(var n in e||(e={}))Qhe.call(e,n)&&q8(t,n,e[n]);if(W8)for(var n of W8(e))Jhe.call(e,n)&&q8(t,n,e[n]);return t},H_=(t,e)=>Vhe(t,Khe(e));function ly(t){return H_(z_({},t),{level:(t==null?void 0:t.level)||zhe.level})}function Yhe(t,e=Iv){return t[e]||""}function Zhe(t,e,n=Iv){return t[n]=e,t}function si(t,e=Iv){let n="";return typeof t.bindings>"u"?n=Yhe(t,e):n=t.bindings().context||"",n}function Xhe(t,e,n=Iv){const r=si(t,n);return r.trim()?`${r}/${e}`:e}function ts(t,e,n=Iv){const r=Xhe(t,e,n),s=t.child({context:r});return Zhe(s,r,n)}function efe(t){var e,n;const r=new Whe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Sv(H_(z_({},t.opts),{level:"trace",browser:H_(z_({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function tfe(t){var e;const n=new qhe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Sv(H_(z_({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function aR(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?efe(t):tfe(t)}var nfe=Object.defineProperty,rfe=(t,e,n)=>e in t?nfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,G8=(t,e,n)=>rfe(t,typeof e!="symbol"?e+"":e,n);let sfe=class extends jf{constructor(e){super(),this.opts=e,G8(this,"protocol","wc"),G8(this,"version",2)}};var ife=Object.defineProperty,ofe=(t,e,n)=>e in t?ife(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,afe=(t,e,n)=>ofe(t,e+"",n);let cfe=class extends jf{constructor(e,n){super(),this.core=e,this.logger=n,afe(this,"records",new Map)}},lfe=class{constructor(e,n){this.logger=e,this.core=n}},ufe=class extends jf{constructor(e,n){super(),this.relayer=e,this.logger=n}},dfe=class extends jf{constructor(e){super()}},hfe=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},ffe=class extends jf{constructor(e,n){super(),this.relayer=e,this.logger=n}},pfe=class extends jf{constructor(e,n){super(),this.core=e,this.logger=n}},gfe=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},mfe=class{constructor(e,n){this.projectId=e,this.logger=n}},yfe=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var wfe=Object.defineProperty,bfe=(t,e,n)=>e in t?wfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,V8=(t,e,n)=>bfe(t,typeof e!="symbol"?e+"":e,n);let vfe=class{constructor(e){this.opts=e,V8(this,"protocol","wc"),V8(this,"version",2)}},Efe=class{constructor(e){this.client=e}};function _fe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function $7(t,...e){if(!_fe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function K8(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function xfe(t,e){$7(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const ip=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const r2=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function Cfe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function U7(t){return typeof t=="string"&&(t=Cfe(t)),$7(t),t}let Afe=class{clone(){return this._cloneInto()}};function Sfe(t){const e=r=>t().update(U7(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function B7(t=32){if(ip&&typeof ip.getRandomValues=="function")return ip.getRandomValues(new Uint8Array(t));if(ip&&typeof ip.randomBytes=="function")return ip.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function Ife(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let Tfe=class extends Afe{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=r2(this.buffer)}update(e){K8(this);const{view:n,buffer:r,blockLen:s}=this;e=U7(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=r2(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){K8(this),xfe(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Ife(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=r2(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const O1=BigInt(2**32-1),CN=BigInt(32);function L7(t,e=!1){return e?{h:Number(t&O1),l:Number(t>>CN&O1)}:{h:Number(t>>CN&O1)|0,l:Number(t&O1)|0}}function Nfe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=L7(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const Pfe=(t,e)=>BigInt(t>>>0)<<CN|BigInt(e>>>0),kfe=(t,e,n)=>t>>>n,Ofe=(t,e,n)=>t<<32-n|e>>>n,Rfe=(t,e,n)=>t>>>n|e<<32-n,Dfe=(t,e,n)=>t<<32-n|e>>>n,$fe=(t,e,n)=>t<<64-n|e>>>n-32,Ufe=(t,e,n)=>t>>>n-32|e<<64-n,Bfe=(t,e)=>e,Lfe=(t,e)=>t,Mfe=(t,e,n)=>t<<n|e>>>32-n,jfe=(t,e,n)=>e<<n|t>>>32-n,Ffe=(t,e,n)=>e<<n-32|t>>>64-n,zfe=(t,e,n)=>t<<n-32|e>>>64-n;function Hfe(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const Wfe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),qfe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Gfe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Vfe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,Kfe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),Qfe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,ot={fromBig:L7,split:Nfe,toBig:Pfe,shrSH:kfe,shrSL:Ofe,rotrSH:Rfe,rotrSL:Dfe,rotrBH:$fe,rotrBL:Ufe,rotr32H:Bfe,rotr32L:Lfe,rotlSH:Mfe,rotlSL:jfe,rotlBH:Ffe,rotlBL:zfe,add:Hfe,add3L:Wfe,add3H:qfe,add4L:Gfe,add4H:Vfe,add5H:Qfe,add5L:Kfe},[Jfe,Yfe]=ot.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Al=new Uint32Array(80),Sl=new Uint32Array(80);let Zfe=class extends Tfe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let b=0;b<16;b++,n+=4)Al[b]=e.getUint32(n),Sl[b]=e.getUint32(n+=4);for(let b=16;b<80;b++){const x=Al[b-15]|0,_=Sl[b-15]|0,C=ot.rotrSH(x,_,1)^ot.rotrSH(x,_,8)^ot.shrSH(x,_,7),S=ot.rotrSL(x,_,1)^ot.rotrSL(x,_,8)^ot.shrSL(x,_,7),T=Al[b-2]|0,A=Sl[b-2]|0,P=ot.rotrSH(T,A,19)^ot.rotrBH(T,A,61)^ot.shrSH(T,A,6),R=ot.rotrSL(T,A,19)^ot.rotrBL(T,A,61)^ot.shrSL(T,A,6),j=ot.add4L(S,R,Sl[b-7],Sl[b-16]),z=ot.add4H(j,C,P,Al[b-7],Al[b-16]);Al[b]=z|0,Sl[b]=j|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:y,Hh:w,Hl:v}=this;for(let b=0;b<80;b++){const x=ot.rotrSH(d,h,14)^ot.rotrSH(d,h,18)^ot.rotrBH(d,h,41),_=ot.rotrSL(d,h,14)^ot.rotrSL(d,h,18)^ot.rotrBL(d,h,41),C=d&f^~d&g,S=h&p^~h&y,T=ot.add5L(v,_,S,Yfe[b],Sl[b]),A=ot.add5H(T,w,x,C,Jfe[b],Al[b]),P=T|0,R=ot.rotrSH(r,s,28)^ot.rotrBH(r,s,34)^ot.rotrBH(r,s,39),j=ot.rotrSL(r,s,28)^ot.rotrBL(r,s,34)^ot.rotrBL(r,s,39),z=r&i^r&a^i&a,K=s&o^s&c^o&c;w=g|0,v=y|0,g=f|0,y=p|0,f=d|0,p=h|0,{h:d,l:h}=ot.add(l|0,u|0,A|0,P|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=ot.add3L(P,j,K);r=ot.add3H(I,A,R,z),s=I|0}({h:r,l:s}=ot.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=ot.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=ot.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=ot.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=ot.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=ot.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=ot.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:w,l:v}=ot.add(this.Hh|0,this.Hl|0,w|0,v|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,y,w,v)}roundClean(){Al.fill(0),Sl.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const Xfe=Sfe(()=>new Zfe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const cR=BigInt(0),M7=BigInt(1),epe=BigInt(2);function lR(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function uR(t){if(!lR(t))throw new Error("Uint8Array expected")}function s2(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const tpe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function dR(t){uR(t);let e="";for(let n=0;n<t.length;n++)e+=tpe[t[n]];return e}function j7(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?cR:BigInt("0x"+t)}const rc={_0:48,_9:57,A:65,F:70,a:97,f:102};function Q8(t){if(t>=rc._0&&t<=rc._9)return t-rc._0;if(t>=rc.A&&t<=rc.F)return t-(rc.A-10);if(t>=rc.a&&t<=rc.f)return t-(rc.a-10)}function F7(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=Q8(t.charCodeAt(i)),a=Q8(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function npe(t){return j7(dR(t))}function UE(t){return uR(t),j7(dR(Uint8Array.from(t).reverse()))}function z7(t,e){return F7(t.toString(16).padStart(e*2,"0"))}function AN(t,e){return z7(t,e).reverse()}function sc(t,e,n){let r;if(typeof e=="string")try{r=F7(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(lR(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function J8(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];uR(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const i2=t=>typeof t=="bigint"&&cR<=t;function rpe(t,e,n){return i2(t)&&i2(e)&&i2(n)&&e<=t&&t<n}function Vy(t,e,n,r){if(!rpe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function spe(t){let e;for(e=0;t>cR;t>>=M7,e+=1);return e}const ipe=t=>(epe<<BigInt(t-1))-M7,ope={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||lR(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function hR(t,e,n={}){const r=(s,i,o)=>{const a=ope[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function Y8(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const ur=BigInt(0),Un=BigInt(1),Qd=BigInt(2),ape=BigInt(3),SN=BigInt(4),Z8=BigInt(5),X8=BigInt(8);function Jn(t,e){const n=t%e;return n>=ur?n:e+n}function cpe(t,e,n){if(e<ur)throw new Error("invalid exponent, negatives unsupported");if(n<=ur)throw new Error("invalid modulus");if(n===Un)return ur;let r=Un;for(;e>ur;)e&Un&&(r=r*t%n),t=t*t%n,e>>=Un;return r}function ca(t,e,n){let r=t;for(;e-- >ur;)r*=r,r%=n;return r}function e5(t,e){if(t===ur)throw new Error("invert: expected non-zero number");if(e<=ur)throw new Error("invert: expected positive modulus, got "+e);let n=Jn(t,e),r=e,s=ur,i=Un;for(;n!==ur;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Un)throw new Error("invert: does not exist");return Jn(s,e)}function lpe(t){const e=(t-Un)/Qd;let n,r,s;for(n=t-Un,r=0;n%Qd===ur;n/=Qd,r++);for(s=Qd;s<t&&cpe(s,e,t)!==t-Un;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Un)/SN;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+Un)/Qd;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,Un<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function upe(t){if(t%SN===ape){const e=(t+Un)/SN;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%X8===Z8){const e=(t-Z8)/X8;return function(n,r){const s=n.mul(r,Qd),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,Qd),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return lpe(t)}const dpe=(t,e)=>(Jn(t,e)&Un)===Un,hpe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function fpe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=hpe.reduce((r,s)=>(r[s]="function",r),e);return hR(t,n)}function ppe(t,e,n){if(n<ur)throw new Error("invalid exponent, negatives unsupported");if(n===ur)return t.ONE;if(n===Un)return e;let r=t.ONE,s=e;for(;n>ur;)n&Un&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Un;return r}function gpe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function H7(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function W7(t,e,n=!1,r={}){if(t<=ur)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=H7(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:ipe(s),ZERO:ur,ONE:Un,create:c=>Jn(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return ur<=c&&c<t},is0:c=>c===ur,isOdd:c=>(c&Un)===Un,neg:c=>Jn(-c,t),eql:(c,l)=>c===l,sqr:c=>Jn(c*c,t),add:(c,l)=>Jn(c+l,t),sub:(c,l)=>Jn(c-l,t),mul:(c,l)=>Jn(c*l,t),pow:(c,l)=>ppe(a,c,l),div:(c,l)=>Jn(c*e5(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>e5(c,t),sqrt:r.sqrt||(c=>(o||(o=upe(t)),o(a,c))),invertBatch:c=>gpe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?AN(c,i):z7(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?UE(c):npe(c)}});return Object.freeze(a)}const t5=BigInt(0),R1=BigInt(1);function o2(t,e){const n=e.negate();return t?n:e}function q7(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function a2(t,e){q7(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function mpe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function ype(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const c2=new WeakMap,G7=new WeakMap;function l2(t){return G7.get(t)||1}function wpe(t,e){return{constTimeNegate:o2,hasPrecomputes(n){return l2(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>t5;)r&R1&&(s=s.add(i)),i=i.double(),r>>=R1;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=a2(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=a2(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=R1);const g=f,y=f+Math.abs(p)-1,w=h%2!==0,v=p<0;p===0?c=c.add(o2(w,r[g])):a=a.add(o2(v,r[y]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=a2(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===t5)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=R1),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=c2.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&c2.set(r,s(i))),i},wNAFCached(n,r,s){const i=l2(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=l2(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){q7(r,e),G7.set(n,r),c2.delete(n)}}}function bpe(t,e,n,r){if(mpe(n,t),ype(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=spe(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function vpe(t){return fpe(t.Fp),hR(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...H7(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const go=BigInt(0),Ts=BigInt(1),D1=BigInt(2),Epe=BigInt(8),_pe={zip215:!0};function xpe(t){const e=vpe(t);return hR(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Cpe(t){const e=xpe(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=D1<<BigInt(a*8)-Ts,u=n.create,d=W7(e.n,e.nBitLength),h=e.uvRatio||((I,N)=>{try{return{isValid:!0,value:n.sqrt(I*n.inv(N))}}catch{return{isValid:!1,value:go}}}),f=e.adjustScalarBytes||(I=>I),p=e.domain||((I,N,L)=>{if(s2("phflag",L),N.length||L)throw new Error("Contexts/pre-hash are not supported");return I});function g(I,N){Vy("coordinate "+I,N,go,l)}function y(I){if(!(I instanceof b))throw new Error("ExtendedPoint expected")}const w=Y8((I,N)=>{const{ex:L,ey:U,ez:$}=I,M=I.is0();N==null&&(N=M?Epe:n.inv($));const G=u(L*N),X=u(U*N),ie=u($*N);if(M)return{x:go,y:Ts};if(ie!==Ts)throw new Error("invZ was invalid");return{x:G,y:X}}),v=Y8(I=>{const{a:N,d:L}=e;if(I.is0())throw new Error("bad point: ZERO");const{ex:U,ey:$,ez:M,et:G}=I,X=u(U*U),ie=u($*$),se=u(M*M),ce=u(se*se),ye=u(X*N),Y=u(se*u(ye+ie)),ne=u(ce+u(L*u(X*ie)));if(Y!==ne)throw new Error("bad point: equation left != right (1)");const le=u(U*$),V=u(M*G);if(le!==V)throw new Error("bad point: equation left != right (2)");return!0});class b{constructor(N,L,U,$){this.ex=N,this.ey=L,this.ez=U,this.et=$,g("x",N),g("y",L),g("z",U),g("t",$),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(N){if(N instanceof b)throw new Error("extended point not allowed");const{x:L,y:U}=N||{};return g("x",L),g("y",U),new b(L,U,Ts,u(L*U))}static normalizeZ(N){const L=n.invertBatch(N.map(U=>U.ez));return N.map((U,$)=>U.toAffine(L[$])).map(b.fromAffine)}static msm(N,L){return bpe(b,d,N,L)}_setWindowSize(N){C.setWindowSize(this,N)}assertValidity(){v(this)}equals(N){y(N);const{ex:L,ey:U,ez:$}=this,{ex:M,ey:G,ez:X}=N,ie=u(L*X),se=u(M*$),ce=u(U*X),ye=u(G*$);return ie===se&&ce===ye}is0(){return this.equals(b.ZERO)}negate(){return new b(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:N}=e,{ex:L,ey:U,ez:$}=this,M=u(L*L),G=u(U*U),X=u(D1*u($*$)),ie=u(N*M),se=L+U,ce=u(u(se*se)-M-G),ye=ie+G,Y=ye-X,ne=ie-G,le=u(ce*Y),V=u(ye*ne),oe=u(ce*ne),Ie=u(Y*ye);return new b(le,V,Ie,oe)}add(N){y(N);const{a:L,d:U}=e,{ex:$,ey:M,ez:G,et:X}=this,{ex:ie,ey:se,ez:ce,et:ye}=N;if(L===BigInt(-1)){const Mt=u((M-$)*(se+ie)),bt=u((M+$)*(se-ie)),yn=u(bt-Mt);if(yn===go)return this.double();const $i=u(G*D1*ye),dl=u(X*D1*ce),hl=dl+$i,gr=bt+Mt,xs=dl-$i,fl=u(hl*yn),Ay=u(gr*xs),pl=u(hl*xs),Gv=u(yn*gr);return new b(fl,Ay,Gv,pl)}const Y=u($*ie),ne=u(M*se),le=u(X*U*ye),V=u(G*ce),oe=u(($+M)*(ie+se)-Y-ne),Ie=V-le,de=V+le,ge=u(ne-L*Y),Pe=u(oe*Ie),Ve=u(de*ge),ut=u(oe*ge),Vt=u(Ie*de);return new b(Pe,Ve,Vt,ut)}subtract(N){return this.add(N.negate())}wNAF(N){return C.wNAFCached(this,N,b.normalizeZ)}multiply(N){const L=N;Vy("scalar",L,Ts,r);const{p:U,f:$}=this.wNAF(L);return b.normalizeZ([U,$])[0]}multiplyUnsafe(N,L=b.ZERO){const U=N;return Vy("scalar",U,go,r),U===go?_:this.is0()||U===Ts?this:C.wNAFCachedUnsafe(this,U,b.normalizeZ,L)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return C.unsafeLadder(this,r).is0()}toAffine(N){return w(this,N)}clearCofactor(){const{h:N}=e;return N===Ts?this:this.multiplyUnsafe(N)}static fromHex(N,L=!1){const{d:U,a:$}=e,M=n.BYTES;N=sc("pointHex",N,M),s2("zip215",L);const G=N.slice(),X=N[M-1];G[M-1]=X&-129;const ie=UE(G),se=L?l:n.ORDER;Vy("pointHex.y",ie,go,se);const ce=u(ie*ie),ye=u(ce-Ts),Y=u(U*ce-$);let{isValid:ne,value:le}=h(ye,Y);if(!ne)throw new Error("Point.fromHex: invalid y coordinate");const V=(le&Ts)===Ts,oe=(X&128)!==0;if(!L&&le===go&&oe)throw new Error("Point.fromHex: x=0 and x_0=1");return oe!==V&&(le=u(-le)),b.fromAffine({x:le,y:ie})}static fromPrivateKey(N){return A(N).point}toRawBytes(){const{x:N,y:L}=this.toAffine(),U=AN(L,n.BYTES);return U[U.length-1]|=N&Ts?128:0,U}toHex(){return dR(this.toRawBytes())}}b.BASE=new b(e.Gx,e.Gy,Ts,u(e.Gx*e.Gy)),b.ZERO=new b(go,Ts,Ts,go);const{BASE:x,ZERO:_}=b,C=wpe(b,a*8);function S(I){return Jn(I,r)}function T(I){return S(UE(I))}function A(I){const N=n.BYTES;I=sc("private key",I,N);const L=sc("hashed private key",i(I),2*N),U=f(L.slice(0,N)),$=L.slice(N,2*N),M=T(U),G=x.multiply(M),X=G.toRawBytes();return{head:U,prefix:$,scalar:M,point:G,pointBytes:X}}function P(I){return A(I).pointBytes}function R(I=new Uint8Array,...N){const L=J8(...N);return T(i(p(L,sc("context",I),!!s)))}function j(I,N,L={}){I=sc("message",I),s&&(I=s(I));const{prefix:U,scalar:$,pointBytes:M}=A(N),G=R(L.context,U,I),X=x.multiply(G).toRawBytes(),ie=R(L.context,X,M,I),se=S(G+ie*$);Vy("signature.s",se,go,r);const ce=J8(X,AN(se,n.BYTES));return sc("result",ce,n.BYTES*2)}const z=_pe;function K(I,N,L,U=z){const{context:$,zip215:M}=U,G=n.BYTES;I=sc("signature",I,2*G),N=sc("message",N),L=sc("publicKey",L,G),M!==void 0&&s2("zip215",M),s&&(N=s(N));const X=UE(I.slice(G,2*G));let ie,se,ce;try{ie=b.fromHex(L,M),se=b.fromHex(I.slice(0,G),M),ce=x.multiplyUnsafe(X)}catch{return!1}if(!M&&ie.isSmallOrder())return!1;const ye=R($,se.toRawBytes(),ie.toRawBytes(),N);return se.add(ie.multiplyUnsafe(ye)).subtract(ce).clearCofactor().equals(b.ZERO)}return x._setWindowSize(8),{CURVE:e,getPublicKey:P,sign:j,verify:K,ExtendedPoint:b,utils:{getExtendedPublicKey:A,randomPrivateKey:()=>o(n.BYTES),precompute(I=8,N=b.BASE){return N._setWindowSize(I),N.multiply(BigInt(3)),N}}}}BigInt(0),BigInt(1);const fR=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),n5=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Ape=BigInt(1),r5=BigInt(2);BigInt(3);const Spe=BigInt(5),Ipe=BigInt(8);function Tpe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=fR,o=t*t%i*t%i,a=ca(o,r5,i)*o%i,c=ca(a,Ape,i)*t%i,l=ca(c,Spe,i)*c%i,u=ca(l,e,i)*l%i,d=ca(u,n,i)*u%i,h=ca(d,r,i)*d%i,f=ca(h,s,i)*h%i,p=ca(f,s,i)*h%i,g=ca(p,e,i)*l%i;return{pow_p_5_8:ca(g,r5,i)*t%i,b2:o}}function Npe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function Ppe(t,e){const n=fR,r=Jn(e*e*e,n),s=Jn(r*r*e,n),i=Tpe(t*s).pow_p_5_8;let o=Jn(t*r*i,n);const a=Jn(e*o*o,n),c=o,l=Jn(o*n5,n),u=a===t,d=a===Jn(-t,n),h=a===Jn(-t*n5,n);return u&&(o=c),(d||h)&&(o=l),dpe(o,n)&&(o=Jn(-o,n)),{isValid:u||d,value:o}}const kpe=W7(fR,void 0,!0),Ope={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:kpe,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Ipe,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Xfe,randomBytes:B7,adjustScalarBytes:Npe,uvRatio:Ppe},V7=Cpe(Ope),Rpe="EdDSA",Dpe="JWT",W_=".",OC="base64url",K7="utf8",Q7="utf8",$pe=":",Upe="did",Bpe="key",s5="base58btc",Lpe="z",Mpe="K36",jpe=32;function pR(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function J7(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?pR(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Y7(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=J7(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return pR(n)}function Fpe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,w=0,v=p.length;w!==v&&p[w]===0;)w++,g++;for(var b=(v-w)*u+1>>>0,x=new Uint8Array(b);w!==v;){for(var _=p[w],C=0,S=b-1;(_!==0||C<y)&&S!==-1;S--,C++)_+=256*x[S]>>>0,x[S]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");y=C,w++}for(var T=b-y;T!==b&&x[T]===0;)T++;for(var A=c.repeat(g);T<b;++T)A+=t.charAt(x[T]);return A}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,w=0;p[g]===c;)y++,g++;for(var v=(p.length-g)*l+1>>>0,b=new Uint8Array(v);p[g];){var x=n[p.charCodeAt(g)];if(x===255)return;for(var _=0,C=v-1;(x!==0||_<w)&&C!==-1;C--,_++)x+=a*b[C]>>>0,b[C]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");w=_,g++}if(p[g]!==" "){for(var S=v-w;S!==v&&b[S]===0;)S++;for(var T=new Uint8Array(y+(v-S)),A=y;S!==v;)T[A++]=b[S++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var zpe=Fpe,Hpe=zpe;const Z7=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Wpe=t=>new TextEncoder().encode(t),qpe=t=>new TextDecoder().decode(t);let Gpe=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Vpe=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return X7(this,e)}},Kpe=class{constructor(e){this.decoders=e}or(e){return X7(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const X7=(t,e)=>new Kpe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let Qpe=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Gpe(e,n,r),this.decoder=new Vpe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const RC=({name:t,prefix:e,encode:n,decode:r})=>new Qpe(t,e,n,r),Tv=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=Hpe(n,e);return RC({prefix:t,name:e,encode:r,decode:i=>Z7(s(i))})},Jpe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Ype=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Dr=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>RC({prefix:e,name:t,encode(s){return Ype(s,r,n)},decode(s){return Jpe(s,r,n,t)}}),Zpe=RC({prefix:"\0",name:"identity",encode:t=>qpe(t),decode:t=>Wpe(t)});var Xpe=Object.freeze({__proto__:null,identity:Zpe});const ege=Dr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var tge=Object.freeze({__proto__:null,base2:ege});const nge=Dr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var rge=Object.freeze({__proto__:null,base8:nge});const sge=Tv({prefix:"9",name:"base10",alphabet:"0123456789"});var ige=Object.freeze({__proto__:null,base10:sge});const oge=Dr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),age=Dr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var cge=Object.freeze({__proto__:null,base16:oge,base16upper:age});const lge=Dr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),uge=Dr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),dge=Dr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),hge=Dr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),fge=Dr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),pge=Dr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),gge=Dr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),mge=Dr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),yge=Dr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var wge=Object.freeze({__proto__:null,base32:lge,base32upper:uge,base32pad:dge,base32padupper:hge,base32hex:fge,base32hexupper:pge,base32hexpad:gge,base32hexpadupper:mge,base32z:yge});const bge=Tv({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),vge=Tv({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Ege=Object.freeze({__proto__:null,base36:bge,base36upper:vge});const _ge=Tv({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),xge=Tv({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Cge=Object.freeze({__proto__:null,base58btc:_ge,base58flickr:xge});const Age=Dr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Sge=Dr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ige=Dr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Tge=Dr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Nge=Object.freeze({__proto__:null,base64:Age,base64pad:Sge,base64url:Ige,base64urlpad:Tge});const ez=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Pge=ez.reduce((t,e,n)=>(t[n]=e,t),[]),kge=ez.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Oge(t){return t.reduce((e,n)=>(e+=Pge[n],e),"")}function Rge(t){const e=[];for(const n of t){const r=kge[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Dge=RC({prefix:"🚀",name:"base256emoji",encode:Oge,decode:Rge});var $ge=Object.freeze({__proto__:null,base256emoji:Dge}),Uge=tz,i5=128,Bge=-128,Lge=Math.pow(2,31);function tz(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Lge;)e[n++]=t&255|i5,t/=128;for(;t&Bge;)e[n++]=t&255|i5,t>>>=7;return e[n]=t|0,tz.bytes=n-r+1,e}var Mge=IN,jge=128,o5=127;function IN(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw IN.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&o5)<<s:(o&o5)*Math.pow(2,s),s+=7}while(o>=jge);return IN.bytes=i-r,n}var Fge=Math.pow(2,7),zge=Math.pow(2,14),Hge=Math.pow(2,21),Wge=Math.pow(2,28),qge=Math.pow(2,35),Gge=Math.pow(2,42),Vge=Math.pow(2,49),Kge=Math.pow(2,56),Qge=Math.pow(2,63),Jge=function(t){return t<Fge?1:t<zge?2:t<Hge?3:t<Wge?4:t<qge?5:t<Gge?6:t<Vge?7:t<Kge?8:t<Qge?9:10},Yge={encode:Uge,decode:Mge,encodingLength:Jge},nz=Yge;const a5=(t,e,n=0)=>(nz.encode(t,e,n),e),c5=t=>nz.encodingLength(t),TN=(t,e)=>{const n=e.byteLength,r=c5(t),s=r+c5(n),i=new Uint8Array(s+n);return a5(t,i,0),a5(n,i,r),i.set(e,s),new Zge(t,n,e,i)};let Zge=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const rz=({name:t,code:e,encode:n})=>new Xge(t,e,n);let Xge=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?TN(this.code,n):n.then(r=>TN(this.code,r))}else throw Error("Unknown type, must be binary type")}};const sz=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),eme=rz({name:"sha2-256",code:18,encode:sz("SHA-256")}),tme=rz({name:"sha2-512",code:19,encode:sz("SHA-512")});var nme=Object.freeze({__proto__:null,sha256:eme,sha512:tme});const iz=0,rme="identity",oz=Z7,sme=t=>TN(iz,oz(t)),ime={code:iz,name:rme,encode:oz,digest:sme};var ome=Object.freeze({__proto__:null,identity:ime});new TextEncoder,new TextDecoder;const l5={...Xpe,...tge,...rge,...ige,...cge,...wge,...Ege,...Cge,...Nge,...$ge};({...nme,...ome});function az(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const u5=az("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),u2=az("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=J7(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),cz={utf8:u5,"utf-8":u5,hex:l5.base16,latin1:u2,ascii:u2,binary:u2,...l5};function DC(t,e="utf8"){const n=cz[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function uy(t,e="utf8"){const n=cz[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?pR(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function d5(t){return wf(DC(uy(t,OC),K7))}function q_(t){return DC(uy(rl(t),K7),OC)}function lz(t){const e=uy(Mpe,s5),n=Lpe+DC(Y7([e,t]),s5);return[Upe,Bpe,n].join($pe)}function ame(t){return DC(t,OC)}function cme(t){return uy(t,OC)}function lme(t){return uy([q_(t.header),q_(t.payload)].join(W_),Q7)}function ume(t){return[q_(t.header),q_(t.payload),ame(t.signature)].join(W_)}function NN(t){const e=t.split(W_),n=d5(e[0]),r=d5(e[1]),s=cme(e[2]),i=uy(e.slice(0,2).join(W_),Q7);return{header:n,payload:r,signature:s,data:i}}function h5(t=B7(jpe)){const e=V7.getPublicKey(t);return{secretKey:Y7([t,e]),publicKey:e}}async function dme(t,e,n,r,s=be.fromMiliseconds(Date.now())){const i={alg:Rpe,typ:Dpe},o=lz(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=lme({header:i,payload:c}),u=V7.sign(l,r.secretKey.slice(0,32));return ume({header:i,payload:c,signature:u})}var f5=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},hme=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),fme=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),pme=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),gme=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),mme=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),yme=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,wme=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,p5=3,bme=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",yme]],g5=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function vme(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new mme:typeof navigator<"u"?_me(navigator.userAgent):Cme()}function Eme(t){return t!==""&&bme.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function _me(t){var e=Eme(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new gme;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<p5&&(s=f5(f5([],s,!0),Ame(p5-s.length),!0)):s=[];var i=s.join("."),o=xme(t),a=wme.exec(t);return a&&a[1]?new pme(n,i,o,a[1]):new hme(n,i,o)}function xme(t){for(var e=0,n=g5.length;e<n;e++){var r=g5[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function Cme(){var t=typeof process<"u"&&process.version;return t?new fme(process.version.slice(1)):null}function Ame(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var sn={};Object.defineProperty(sn,"__esModule",{value:!0});sn.getLocalStorage=sn.getLocalStorageOrThrow=sn.getCrypto=sn.getCryptoOrThrow=uz=sn.getLocation=sn.getLocationOrThrow=gR=sn.getNavigator=sn.getNavigatorOrThrow=bf=sn.getDocument=sn.getDocumentOrThrow=sn.getFromWindowOrThrow=sn.getFromWindow=void 0;function Hf(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}sn.getFromWindow=Hf;function dy(t){const e=Hf(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}sn.getFromWindowOrThrow=dy;function Sme(){return dy("document")}sn.getDocumentOrThrow=Sme;function Ime(){return Hf("document")}var bf=sn.getDocument=Ime;function Tme(){return dy("navigator")}sn.getNavigatorOrThrow=Tme;function Nme(){return Hf("navigator")}var gR=sn.getNavigator=Nme;function Pme(){return dy("location")}sn.getLocationOrThrow=Pme;function kme(){return Hf("location")}var uz=sn.getLocation=kme;function Ome(){return dy("crypto")}sn.getCryptoOrThrow=Ome;function Rme(){return Hf("crypto")}sn.getCrypto=Rme;function Dme(){return dy("localStorage")}sn.getLocalStorageOrThrow=Dme;function $me(){return Hf("localStorage")}sn.getLocalStorage=$me;var mR={};Object.defineProperty(mR,"__esModule",{value:!0});var dz=mR.getWindowMetadata=void 0;const m5=sn;function Ume(){let t,e;try{t=m5.getDocumentOrThrow(),e=m5.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const y=p.getAttribute("href");if(y)if(y.toLowerCase().indexOf("https:")===-1&&y.toLowerCase().indexOf("http:")===-1&&y.indexOf("//")!==0){let w=e.protocol+"//"+e.host;if(y.indexOf("/")===0)w+=y;else{const v=e.pathname.split("/");v.pop();const b=v.join("/");w+=b+"/"+y}h.push(w)}else if(y.indexOf("//")===0){const w=e.protocol+y;h.push(w)}else h.push(y)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(y=>p.getAttribute(y)).filter(y=>y?d.includes(y):!1);if(g.length&&g){const y=p.getAttribute("content");if(y)return y}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}dz=mR.getWindowMetadata=Ume;function ub(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function PN(t){return ub(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const hz="2.31.0";let Ky={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${hz}`};class vf extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof vf?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof vf&&n.cause.docsPath||n.docsPath,i=(a=Ky.getDocsUrl)==null?void 0:a.call(Ky,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Ky.version?[`Version: ${Ky.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=hz}walk(e){return fz(this,e)}}function fz(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?fz(t.cause,e):e?null:t}class pz extends vf{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function hy(t,{dir:e,size:n=32}={}){return typeof t=="string"?Bme(t,{dir:e,size:n}):Lme(t,{dir:e,size:n})}function Bme(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new pz({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function Lme(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new pz({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class Mme extends vf{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class jme extends vf{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function fy(t,{size:e}){if(PN(t)>e)throw new jme({givenSize:PN(t),maxSize:e})}function kN(t,e={}){const{signed:n}=e;e.size&&fy(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Fme(t,e={}){return Number(kN(t,e))}const zme=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ON(t,e={}){return typeof t=="number"||typeof t=="bigint"?mz(t,e):typeof t=="string"?qme(t,e):typeof t=="boolean"?Hme(t,e):gz(t,e)}function Hme(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(fy(n,{size:e.size}),hy(n,{size:e.size})):n}function gz(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=zme[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(fy(r,{size:e.size}),hy(r,{dir:"right",size:e.size})):r}function mz(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new Mme({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?hy(a,{size:r}):a}const Wme=new TextEncoder;function qme(t,e={}){const n=Wme.encode(t);return gz(n,e)}const Gme=new TextEncoder;function Vme(t,e={}){return typeof t=="number"||typeof t=="bigint"?Qme(t,e):typeof t=="boolean"?Kme(t,e):ub(t)?yz(t,e):wz(t,e)}function Kme(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(fy(n,{size:e.size}),hy(n,{size:e.size})):n}const ic={zero:48,nine:57,A:65,F:70,a:97,f:102};function y5(t){if(t>=ic.zero&&t<=ic.nine)return t-ic.zero;if(t>=ic.A&&t<=ic.F)return t-(ic.A-10);if(t>=ic.a&&t<=ic.f)return t-(ic.a-10)}function yz(t,e={}){let n=t;e.size&&(fy(n,{size:e.size}),n=hy(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=y5(r.charCodeAt(a++)),l=y5(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new vf(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function Qme(t,e){const n=mz(t,e);return yz(n)}function wz(t,e={}){const n=Gme.encode(t);return typeof e.size=="number"?(fy(n,{size:e.size}),hy(n,{dir:"right",size:e.size})):n}function bz(t,e){const n=e||"hex",r=lO(ub(t,{strict:!1})?Vme(t):t);return n==="bytes"?r:ON(r)}class Jme extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const d2=new Jme(8192);function Yme(t,e){if(d2.has(`${t}.${e}`))return d2.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=bz(wz(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return d2.set(`${t}.${e}`,i),i}function Zme(t){const e=bz(`0x${t.substring(4)}`).substring(26);return Yme(`0x${e}`)}async function Xme({hash:t,signature:e}){const n=ub(t)?t:ON(t),{secp256k1:r}=await Rn(async()=>{const{secp256k1:o}=await import("./secp256k1-CSa1SMd2.js");return{secp256k1:o}},__vite__mapDeps([2,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=w5(f);return new r.Signature(kN(l),kN(u)).addRecoveryBit(p)}const o=ub(e)?e:ON(e);if(PN(o)!==65)throw new Error("invalid signature length");const a=Fme(`0x${o.slice(130)}`),c=w5(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function w5(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function eye({hash:t,signature:e}){return Zme(await Xme({hash:t,signature:e}))}function tye(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let v=l[h],b=0;for(let x=p-1;(v!==0||b<d)&&x!==-1;x--,b++)v+=256*g[x]>>>0,g[x]=v%n>>>0,v=v/n>>>0;if(v!==0)throw new Error("Non-zero carry");d=b,h++}let y=p-d;for(;y!==p&&g[y]===0;)y++;let w=r.repeat(u);for(;y<p;++y)w+=t.charAt(g[y]);return w}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const v=l.charCodeAt(u);if(v>255)return;let b=e[v];if(b===255)return;let x=0;for(let _=f-1;(b!==0||x<h)&&_!==-1;_--,x++)b+=n*p[_]>>>0,p[_]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");h=x,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const y=new Uint8Array(d+(f-g));let w=d;for(;g!==f;)y[w++]=p[g++];return y}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var nye="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const py=tye(nye);function rye(t){const e=t.length;let n=0,r=0;for(;r<e;){let s=t.charCodeAt(r++);if(s&4294967168)if(!(s&4294965248))n+=2;else{if(s>=55296&&s<=56319&&r<e){const i=t.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}s&4294901760?n+=4:n+=3}else{n++;continue}}return n}function sye(t,e,n){const r=t.length;let s=n,i=0;for(;i<r;){let o=t.charCodeAt(i++);if(o&4294967168)if(!(o&4294965248))e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){const a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}o&4294901760?(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128):(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128)}else{e[s++]=o;continue}e[s++]=o&63|128}}const iye=new TextEncoder,oye=50;function aye(t,e,n){iye.encodeInto(t,e.subarray(n))}function cye(t,e,n){t.length>oye?aye(t,e,n):sye(t,e,n)}const lye=4096;function vz(t,e,n){let r=e;const s=r+n,i=[];let o="";for(;r<s;){const a=t[r++];if(!(a&128))i.push(a);else if((a&224)===192){const c=t[r++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){const c=t[r++]&63,l=t[r++]&63;i.push((a&31)<<12|c<<6|l)}else if((a&248)===240){const c=t[r++]&63,l=t[r++]&63,u=t[r++]&63;let d=(a&7)<<18|c<<12|l<<6|u;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=lye&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const uye=new TextDecoder,dye=200;function hye(t,e,n){const r=t.subarray(e,e+n);return uye.decode(r)}function fye(t,e,n){return n>dye?hye(t,e,n):vz(t,e,n)}class $1{constructor(e,n){this.type=e,this.data=n}}class bi extends Error{constructor(e){super(e);const n=Object.create(bi.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:bi.name})}}const Qy=4294967295;function pye(t,e,n){const r=n/4294967296,s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function Ez(t,e,n){const r=Math.floor(n/4294967296),s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function _z(t,e){const n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function gye(t,e){const n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}const mye=-1,yye=4294967296-1,wye=17179869184-1;function bye({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=wye)if(e===0&&t<=yye){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,r=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|n&3),i.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),Ez(r,4,t),n}}function vye(t){const e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function Eye(t){if(t instanceof Date){const e=vye(t);return bye(e)}else return null}function _ye(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),r=e.getUint32(4),s=(n&3)*4294967296+r,i=n>>>2;return{sec:s,nsec:i}}case 12:{const n=_z(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new bi(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function xye(t){const e=_ye(t);return new Date(e.sec*1e3+e.nsec/1e6)}const Cye={type:mye,encode:Eye,decode:xye};class G_{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(Cye)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=-1-r;return new $1(o,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=r;return new $1(o,i)}}}return e instanceof $1?e:null}decode(e,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(e,n,r):new $1(n,e)}}G_.defaultCodec=new G_;function Aye(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function RN(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Aye(t)?new Uint8Array(t):Uint8Array.from(t)}const Sye=100,Iye=2048;let Tye=class xz{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??G_.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??Sye,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??Iye,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new xz({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=rye(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),cye(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=RN(e);this.writeU8a(r)}encodeArray(e,n){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,n+1)}countWithoutUndefined(e,n){let r=0;for(const s of n)e[s]!==void 0&&r++;return r}encodeMap(e,n){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),pye(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),Ez(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function Nye(t,e){return new Tye(e).encodeSharedRef(t)}function h2(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const Pye=16,kye=16;class Oye{constructor(e=Pye,n=kye){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){const s=this.caches[r-1];e:for(const i of s){const o=i.bytes;for(let a=0;a<r;a++)if(o[a]!==e[n+a])continue e;return i.str}return null}store(e,n){const r=this.caches[e.length-1],s={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,n,r){const s=this.find(e,n,r);if(s!=null)return this.hit++,s;this.miss++;const i=vz(e,n,r),o=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(o,i),i}}const DN="array",Q0="map_key",Cz="map_value",Rye=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new bi("The type of key must be string or number but "+typeof t)};class Dye{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=DN,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=Q0,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===DN){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===Q0||e.type===Cz){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const Jy=-1,yR=new DataView(new ArrayBuffer(0)),$ye=new Uint8Array(yR.buffer);try{yR.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const b5=new RangeError("Insufficient data"),Uye=new Oye;let Bye=class Az{constructor(e){this.totalPos=0,this.pos=0,this.view=yR,this.bytes=$ye,this.headByte=Jy,this.stack=new Dye,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??G_.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??Qy,this.maxBinLength=(e==null?void 0:e.maxBinLength)??Qy,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??Qy,this.maxMapLength=(e==null?void 0:e.maxMapLength)??Qy,this.maxExtLength=(e==null?void 0:e.maxExtLength)??Qy,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:Uye,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??Rye}clone(){return new Az({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Jy,this.stack.reset()}setBuffer(e){const n=RN(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===Jy&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),r=RN(e),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(const a of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),n=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${h2(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,s=-1;for await(const i of e){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=e-160;n=this.decodeString(s,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new bi(`Unrecognized type byte: ${h2(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===DN)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===Q0){if(n==="__proto__")throw new bi("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=Cz;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=Q0;continue e}}return n}}readHeadByte(){return this.headByte===Jy&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Jy}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new bi(`Unrecognized array type byte: ${h2(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new bi(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new bi(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){var i;if(e>this.maxStrLength)throw new bi(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw b5;const r=this.pos+n;let s;return this.stateIsMapKey()&&((i=this.keyDecoder)!=null&&i.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,r,e):s=fye(this.bytes,r,e),this.pos+=n+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===Q0:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new bi(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw b5;const r=this.pos+n,s=this.bytes.subarray(r,r+e);return this.pos+=n+e,s}decodeExtension(e,n){if(e>this.maxExtLength)throw new bi(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(e,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=gye(this.view,this.pos);return this.pos+=8,e}readI64(){const e=_z(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function Lye(t,e){return new Bye(e).decode(t)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Mye(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Sz(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function V_(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function wR(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function $N(t){if(!Array.isArray(t))throw new Error("array expected")}function K_(t,e){if(!Sz(!0,e))throw new Error(`${t}: array of strings expected`)}function jye(t,e){if(!Sz(!1,e))throw new Error(`${t}: array of numbers expected`)}function Fye(...t){const e=i=>i,n=(i,o)=>a=>i(o(a)),r=t.map(i=>i.encode).reduceRight(n,e),s=t.map(i=>i.decode).reduce(n,e);return{encode:r,decode:s}}function zye(t){const e=typeof t=="string"?t.split(""):t,n=e.length;K_("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>($N(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>($N(s),s.map(i=>{V_("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return o}))}}function Hye(t=""){return V_("join",t),{encode:e=>(K_("join.decode",e),e.join(t)),decode:e=>(V_("join.decode",e),e.split(t))}}function Wye(t,e="="){return wR(t),V_("padding",e),{encode(n){for(K_("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){K_("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const Iz=(t,e)=>e===0?t:Iz(e,t%e),Q_=(t,e)=>t+(e-Iz(t,e)),f2=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function v5(t,e,n,r){if($N(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Q_(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${Q_(e,n)}`);let s=0,i=0;const o=f2[e],a=f2[n]-1,c=[];for(const l of t){if(wR(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(s=s<<e|l,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=n;i-=n)c.push((s>>i-n&a)>>>0);const u=f2[i];if(u===void 0)throw new Error("invalid carry");s&=u-1}if(s=s<<n-i&a,!r&&i>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&c.push(s>>>0),c}function qye(t,e=!1){if(wR(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(Q_(8,t)>32||Q_(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!Mye(n))throw new Error("radix2.encode input should be Uint8Array");return v5(Array.from(n),8,t,!e)},decode:n=>(jye("radix2.decode",n),Uint8Array.from(v5(n,t,8,e)))}}const Gye=Fye(qye(5),zye("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Wye(5),Hye(""));function bR(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Tz(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?bR(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function J0(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=Tz(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return bR(n)}function Vye(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,w=0,v=p.length;w!==v&&p[w]===0;)w++,g++;for(var b=(v-w)*u+1>>>0,x=new Uint8Array(b);w!==v;){for(var _=p[w],C=0,S=b-1;(_!==0||C<y)&&S!==-1;S--,C++)_+=256*x[S]>>>0,x[S]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");y=C,w++}for(var T=b-y;T!==b&&x[T]===0;)T++;for(var A=c.repeat(g);T<b;++T)A+=t.charAt(x[T]);return A}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,w=0;p[g]===c;)y++,g++;for(var v=(p.length-g)*l+1>>>0,b=new Uint8Array(v);p[g];){var x=n[p.charCodeAt(g)];if(x===255)return;for(var _=0,C=v-1;(x!==0||_<w)&&C!==-1;C--,_++)x+=a*b[C]>>>0,b[C]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");w=_,g++}if(p[g]!==" "){for(var S=v-w;S!==v&&b[S]===0;)S++;for(var T=new Uint8Array(y+(v-S)),A=y;S!==v;)T[A++]=b[S++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Kye=Vye,Qye=Kye;const Jye=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Yye=t=>new TextEncoder().encode(t),Zye=t=>new TextDecoder().decode(t);class Xye{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class e0e{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Nz(this,e)}}class t0e{constructor(e){this.decoders=e}or(e){return Nz(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Nz=(t,e)=>new t0e({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class n0e{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Xye(e,n,r),this.decoder=new e0e(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const $C=({name:t,prefix:e,encode:n,decode:r})=>new n0e(t,e,n,r),Nv=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=Qye(n,e);return $C({prefix:t,name:e,encode:r,decode:i=>Jye(s(i))})},r0e=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},s0e=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},$r=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>$C({prefix:e,name:t,encode(s){return s0e(s,r,n)},decode(s){return r0e(s,r,n,t)}}),i0e=$C({prefix:"\0",name:"identity",encode:t=>Zye(t),decode:t=>Yye(t)}),o0e=Object.freeze(Object.defineProperty({__proto__:null,identity:i0e},Symbol.toStringTag,{value:"Module"})),a0e=$r({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),c0e=Object.freeze(Object.defineProperty({__proto__:null,base2:a0e},Symbol.toStringTag,{value:"Module"})),l0e=$r({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),u0e=Object.freeze(Object.defineProperty({__proto__:null,base8:l0e},Symbol.toStringTag,{value:"Module"})),d0e=Nv({prefix:"9",name:"base10",alphabet:"0123456789"}),h0e=Object.freeze(Object.defineProperty({__proto__:null,base10:d0e},Symbol.toStringTag,{value:"Module"})),f0e=$r({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),p0e=$r({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),g0e=Object.freeze(Object.defineProperty({__proto__:null,base16:f0e,base16upper:p0e},Symbol.toStringTag,{value:"Module"})),m0e=$r({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),y0e=$r({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),w0e=$r({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),b0e=$r({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),v0e=$r({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),E0e=$r({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),_0e=$r({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),x0e=$r({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),C0e=$r({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),A0e=Object.freeze(Object.defineProperty({__proto__:null,base32:m0e,base32hex:v0e,base32hexpad:_0e,base32hexpadupper:x0e,base32hexupper:E0e,base32pad:w0e,base32padupper:b0e,base32upper:y0e,base32z:C0e},Symbol.toStringTag,{value:"Module"})),S0e=Nv({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),I0e=Nv({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),T0e=Object.freeze(Object.defineProperty({__proto__:null,base36:S0e,base36upper:I0e},Symbol.toStringTag,{value:"Module"})),N0e=Nv({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),P0e=Nv({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),k0e=Object.freeze(Object.defineProperty({__proto__:null,base58btc:N0e,base58flickr:P0e},Symbol.toStringTag,{value:"Module"})),O0e=$r({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),R0e=$r({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),D0e=$r({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),$0e=$r({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),U0e=Object.freeze(Object.defineProperty({__proto__:null,base64:O0e,base64pad:R0e,base64url:D0e,base64urlpad:$0e},Symbol.toStringTag,{value:"Module"})),Pz=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),B0e=Pz.reduce((t,e,n)=>(t[n]=e,t),[]),L0e=Pz.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function M0e(t){return t.reduce((e,n)=>(e+=B0e[n],e),"")}function j0e(t){const e=[];for(const n of t){const r=L0e[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const F0e=$C({prefix:"🚀",name:"base256emoji",encode:M0e,decode:j0e}),z0e=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:F0e},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const E5={...o0e,...c0e,...u0e,...h0e,...g0e,...A0e,...T0e,...k0e,...U0e,...z0e};function kz(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const _5=kz("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),p2=kz("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=Tz(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),Oz={utf8:_5,"utf-8":_5,hex:E5.base16,latin1:p2,ascii:p2,binary:p2,...E5};function ro(t,e="utf8"){const n=Oz[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?bR(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function ei(t,e="utf8"){const n=Oz[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const H0e={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},W0e="Input must be an string, Buffer or Uint8Array";function q0e(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(W0e);return e}function G0e(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function U1(t){return(4294967296+t).toString(16).substring(1)}function V0e(t,e,n){let r=`
`+t+" = ";for(let s=0;s<e.length;s+=2){if(n===32)r+=U1(e[s]).toUpperCase(),r+=" ",r+=U1(e[s+1]).toUpperCase();else if(n===64)r+=U1(e[s+1]).toUpperCase(),r+=U1(e[s]).toUpperCase();else throw new Error("Invalid size "+n);s%6===4?r+=`
`+new Array(t.length+4).join(" "):s<e.length-2&&(r+=" ")}console.log(r)}function K0e(t,e,n){let r=new Date().getTime();const s=new Uint8Array(e);for(let o=0;o<e;o++)s[o]=o%256;const i=new Date().getTime();console.log("Generated random input in "+(i-r)+"ms"),r=i;for(let o=0;o<n;o++){const a=t(s),c=new Date().getTime(),l=c-r;r=c,console.log("Hashed in "+l+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(l/1e3)*100)/100+" MB PER SECOND")}}var Rz={normalizeInput:q0e,toHex:G0e,debugPrint:V0e,testSpeed:K0e};const BE=Rz;function B1(t,e,n){const r=t[e]+t[n];let s=t[e+1]+t[n+1];r>=4294967296&&s++,t[e]=r,t[e+1]=s}function x5(t,e,n,r){let s=t[e]+n;n<0&&(s+=4294967296);let i=t[e+1]+r;s>=4294967296&&i++,t[e]=s,t[e+1]=i}function Dz(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Il(t,e,n,r,s,i){const o=x0[s],a=x0[s+1],c=x0[i],l=x0[i+1];B1(tt,t,e),x5(tt,t,o,a);let u=tt[r]^tt[t],d=tt[r+1]^tt[t+1];tt[r]=d,tt[r+1]=u,B1(tt,n,r),u=tt[e]^tt[n],d=tt[e+1]^tt[n+1],tt[e]=u>>>24^d<<8,tt[e+1]=d>>>24^u<<8,B1(tt,t,e),x5(tt,t,c,l),u=tt[r]^tt[t],d=tt[r+1]^tt[t+1],tt[r]=u>>>16^d<<16,tt[r+1]=d>>>16^u<<16,B1(tt,n,r),u=tt[e]^tt[n],d=tt[e+1]^tt[n+1],tt[e]=d>>>31^u<<1,tt[e+1]=u>>>31^d<<1}const $z=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Q0e=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],jr=new Uint8Array(Q0e.map(function(t){return t*2})),tt=new Uint32Array(32),x0=new Uint32Array(32);function Uz(t,e){let n=0;for(n=0;n<16;n++)tt[n]=t.h[n],tt[n+16]=$z[n];for(tt[24]=tt[24]^t.t,tt[25]=tt[25]^t.t/4294967296,e&&(tt[28]=~tt[28],tt[29]=~tt[29]),n=0;n<32;n++)x0[n]=Dz(t.b,4*n);for(n=0;n<12;n++)Il(0,8,16,24,jr[n*16+0],jr[n*16+1]),Il(2,10,18,26,jr[n*16+2],jr[n*16+3]),Il(4,12,20,28,jr[n*16+4],jr[n*16+5]),Il(6,14,22,30,jr[n*16+6],jr[n*16+7]),Il(0,10,20,30,jr[n*16+8],jr[n*16+9]),Il(2,12,22,24,jr[n*16+10],jr[n*16+11]),Il(4,14,16,26,jr[n*16+12],jr[n*16+13]),Il(6,8,18,28,jr[n*16+14],jr[n*16+15]);for(n=0;n<16;n++)t.h[n]=t.h[n]^tt[n]^tt[n+16]}const Tl=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function Bz(t,e,n,r){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&n.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&r.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const s={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};Tl.fill(0),Tl[0]=t,e&&(Tl[1]=e.length),Tl[2]=1,Tl[3]=1,n&&Tl.set(n,32),r&&Tl.set(r,48);for(let i=0;i<16;i++)s.h[i]=$z[i]^Dz(Tl,i*4);return e&&(vR(s,e),s.c=128),s}function vR(t,e){for(let n=0;n<e.length;n++)t.c===128&&(t.t+=t.c,Uz(t,!1),t.c=0),t.b[t.c++]=e[n]}function Lz(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;Uz(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3);return e}function Mz(t,e,n,r,s){n=n||64,t=BE.normalizeInput(t),r&&(r=BE.normalizeInput(r)),s&&(s=BE.normalizeInput(s));const i=Bz(n,e,r,s);return vR(i,t),Lz(i)}function J0e(t,e,n,r,s){const i=Mz(t,e,n,r,s);return BE.toHex(i)}var Y0e={blake2b:Mz,blake2bHex:J0e,blake2bInit:Bz,blake2bUpdate:vR,blake2bFinal:Lz};const jz=Rz;function Z0e(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Nl(t,e,n,r,s,i){Nt[t]=Nt[t]+Nt[e]+s,Nt[r]=L1(Nt[r]^Nt[t],16),Nt[n]=Nt[n]+Nt[r],Nt[e]=L1(Nt[e]^Nt[n],12),Nt[t]=Nt[t]+Nt[e]+i,Nt[r]=L1(Nt[r]^Nt[t],8),Nt[n]=Nt[n]+Nt[r],Nt[e]=L1(Nt[e]^Nt[n],7)}function L1(t,e){return t>>>e^t<<32-e}const Fz=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Fr=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),Nt=new Uint32Array(16),yr=new Uint32Array(16);function zz(t,e){let n=0;for(n=0;n<8;n++)Nt[n]=t.h[n],Nt[n+8]=Fz[n];for(Nt[12]^=t.t,Nt[13]^=t.t/4294967296,e&&(Nt[14]=~Nt[14]),n=0;n<16;n++)yr[n]=Z0e(t.b,4*n);for(n=0;n<10;n++)Nl(0,4,8,12,yr[Fr[n*16+0]],yr[Fr[n*16+1]]),Nl(1,5,9,13,yr[Fr[n*16+2]],yr[Fr[n*16+3]]),Nl(2,6,10,14,yr[Fr[n*16+4]],yr[Fr[n*16+5]]),Nl(3,7,11,15,yr[Fr[n*16+6]],yr[Fr[n*16+7]]),Nl(0,5,10,15,yr[Fr[n*16+8]],yr[Fr[n*16+9]]),Nl(1,6,11,12,yr[Fr[n*16+10]],yr[Fr[n*16+11]]),Nl(2,7,8,13,yr[Fr[n*16+12]],yr[Fr[n*16+13]]),Nl(3,4,9,14,yr[Fr[n*16+14]],yr[Fr[n*16+15]]);for(n=0;n<8;n++)t.h[n]^=Nt[n]^Nt[n+8]}function Hz(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=e?e.length:0;if(e&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(Fz),b:new Uint8Array(64),c:0,t:0,outlen:t};return r.h[0]^=16842752^n<<8^t,n>0&&(ER(r,e),r.c=64),r}function ER(t,e){for(let n=0;n<e.length;n++)t.c===64&&(t.t+=t.c,zz(t,!1),t.c=0),t.b[t.c++]=e[n]}function Wz(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;zz(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3)&255;return e}function qz(t,e,n){n=n||32,t=jz.normalizeInput(t);const r=Hz(n,e);return ER(r,t),Wz(r)}function X0e(t,e,n){const r=qz(t,e,n);return jz.toHex(r)}var ewe={blake2s:qz,blake2sHex:X0e,blake2sInit:Hz,blake2sUpdate:ER,blake2sFinal:Wz};const Yy=Y0e,Zy=ewe;var twe={blake2b:Yy.blake2b,blake2bHex:Yy.blake2bHex,blake2bInit:Yy.blake2bInit,blake2bUpdate:Yy.blake2bUpdate,blake2bFinal:Yy.blake2bFinal,blake2s:Zy.blake2s,blake2sHex:Zy.blake2sHex,blake2sInit:Zy.blake2sInit,blake2sUpdate:Zy.blake2sUpdate,blake2sFinal:Zy.blake2sFinal},nwe={};const rwe=":";function pg(t){const[e,n]=t.split(rwe);return{namespace:e,reference:n}}function Gz(t,e){return t.includes(":")?[t]:e.chains||[]}var swe=Object.defineProperty,iwe=Object.defineProperties,owe=Object.getOwnPropertyDescriptors,C5=Object.getOwnPropertySymbols,awe=Object.prototype.hasOwnProperty,cwe=Object.prototype.propertyIsEnumerable,A5=(t,e,n)=>e in t?swe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,S5=(t,e)=>{for(var n in e||(e={}))awe.call(e,n)&&A5(t,n,e[n]);if(C5)for(var n of C5(e))cwe.call(e,n)&&A5(t,n,e[n]);return t},lwe=(t,e)=>iwe(t,owe(e));const uwe="ReactNative",_i={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},dwe="js";function J_(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Id(){return!bf()&&!!gR()&&navigator.product===uwe}function hwe(){return Id()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function fwe(){return Id()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function gy(){return!J_()&&!!gR()&&!!bf()}function Pv(){return Id()?_i.reactNative:J_()?_i.node:gy()?_i.browser:_i.unknown}function I5(){var t;try{return Id()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function pwe(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function gwe(t){var e,n;const r=Vz();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),lwe(S5(S5({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function Vz(){return dz()||{name:"",description:"",url:"",icons:[""]}}function mwe(){if(Pv()===_i.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=vme();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function ywe(){var t;const e=Pv();return e===_i.browser?[e,((t=uz())==null?void 0:t.host)||"unknown"].join(":"):e}function Kz(t,e,n){const r=mwe(),s=ywe();return[[t,e].join("-"),[dwe,n].join("-"),r,s].join("/")}function wwe({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=Kz(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=pwe(l[1]||"",d);return l[0]+"?"+h}function uh(t,e){return t.filter(n=>e.includes(n)).length===t.length}function UN(t){return Object.fromEntries(t.entries())}function BN(t){return new Map(Object.entries(t))}function Wd(t=be.FIVE_MINUTES,e){const n=be.toMiliseconds(t||be.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function Lu(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function Qz(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function bwe(t){return Qz("topic",t)}function vwe(t){return Qz("id",t)}function Jz(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function Vn(t,e){return be.fromMiliseconds(Date.now()+be.toMiliseconds(t))}function Ql(t){return Date.now()>=be.toMiliseconds(t)}function Dt(t,e){return`${t}${e?`:${e}`:""}`}function Ha(t=[],e=[]){return[...new Set([...t,...e])]}async function Ewe({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=_we(i,t,e),a=Pv();if(a===_i.browser){if(!((r=bf())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}xwe(o)}else a===_i.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function _we(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${Iwe(r,!0)}`}else s=`${s}/wc?${r}`;return s}function xwe(t){let e="_self";Swe()?e="_top":(Awe()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function Cwe(t,e){let n="";try{if(gy()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function T5(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function N5(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function _R(){return typeof process<"u"&&nwe.IS_VITEST==="true"}function Awe(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function Swe(){try{return window.self!==window.top}catch{return!1}}function Iwe(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function Yz(t){return Buffer.from(t,"base64").toString("utf-8")}function Twe(t){return new Promise(e=>setTimeout(e,t))}const M1=BigInt(2**32-1),P5=BigInt(32);function Zz(t,e=!1){return e?{h:Number(t&M1),l:Number(t>>P5&M1)}:{h:Number(t>>P5&M1)|0,l:Number(t&M1)|0}}function Xz(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=Zz(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const k5=(t,e,n)=>t>>>n,O5=(t,e,n)=>t<<32-n|e>>>n,Jl=(t,e,n)=>t>>>n|e<<32-n,Yl=(t,e,n)=>t<<32-n|e>>>n,C0=(t,e,n)=>t<<64-n|e>>>n-32,A0=(t,e,n)=>t>>>n-32|e<<64-n,Nwe=(t,e)=>e,Pwe=(t,e)=>t,kwe=(t,e,n)=>t<<n|e>>>32-n,Owe=(t,e,n)=>e<<n|t>>>32-n,Rwe=(t,e,n)=>e<<n-32|t>>>64-n,Dwe=(t,e,n)=>t<<n-32|e>>>64-n;function xo(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const xR=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),CR=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,$we=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Uwe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,Bwe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),Lwe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,op=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function AR(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function sl(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function ao(t,...e){if(!AR(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function SR(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");sl(t.outputLen),sl(t.blockLen)}function gd(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function IR(t,e){ao(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function db(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function co(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function g2(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function la(t,e){return t<<32-e|t>>>e}const eH=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function tH(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const uc=eH?t=>t:t=>tH(t);function Mwe(t){for(let e=0;e<t.length;e++)t[e]=tH(t[e]);return t}const Zl=eH?t=>t:Mwe,nH=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",jwe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function hb(t){if(ao(t),nH)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=jwe[t[n]];return e}const oc={_0:48,_9:57,A:65,F:70,a:97,f:102};function R5(t){if(t>=oc._0&&t<=oc._9)return t-oc._0;if(t>=oc.A&&t<=oc.F)return t-(oc.A-10);if(t>=oc.a&&t<=oc.f)return t-(oc.a-10)}function TR(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(nH)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=R5(t.charCodeAt(i)),a=R5(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Fwe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Qo(t){return typeof t=="string"&&(t=Fwe(t)),ao(t),t}function dh(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];ao(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let UC=class{};function kv(t){const e=r=>t().update(Qo(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function zwe(t){const e=(r,s)=>t(s).update(Qo(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function my(t=32){if(op&&typeof op.getRandomValues=="function")return op.getRandomValues(new Uint8Array(t));if(op&&typeof op.randomBytes=="function")return Uint8Array.from(op.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const Hwe=BigInt(0),Xy=BigInt(1),Wwe=BigInt(2),qwe=BigInt(7),Gwe=BigInt(256),Vwe=BigInt(113),rH=[],sH=[],iH=[];for(let t=0,e=Xy,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],rH.push(2*(5*r+n)),sH.push((t+1)*(t+2)/2%64);let s=Hwe;for(let i=0;i<7;i++)e=(e<<Xy^(e>>qwe)*Vwe)%Gwe,e&Wwe&&(s^=Xy<<(Xy<<BigInt(i))-Xy);iH.push(s)}const oH=Xz(iH,!0),Kwe=oH[0],Qwe=oH[1],D5=(t,e,n)=>n>32?Rwe(t,e,n):kwe(t,e,n),$5=(t,e,n)=>n>32?Dwe(t,e,n):Owe(t,e,n);function Jwe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=D5(l,u,1)^n[a],h=$5(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=sH[o],c=D5(s,i,a),l=$5(s,i,a),u=rH[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Kwe[r],t[1]^=Qwe[r]}co(n)}let Ywe=class aH extends UC{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,sl(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=db(this.state)}clone(){return this._cloneInto()}keccak(){Zl(this.state32),Jwe(this.state32,this.rounds),Zl(this.state32),this.posOut=0,this.pos=0}update(e){gd(this),e=Qo(e),ao(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){gd(this,!1),ao(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return sl(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(IR(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,co(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new aH(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Zwe=(t,e,n)=>kv(()=>new Ywe(e,t,n)),Xwe=Zwe(1,136,256/8);function ebe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function tbe(t,e,n){return t&e^~t&n}function nbe(t,e,n){return t&e^t&n^e&n}let cH=class extends UC{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=g2(this.buffer)}update(e){gd(this),e=Qo(e),ao(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=g2(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){gd(this),IR(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,co(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;ebe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=g2(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const Pl=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),zr=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Hr=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),rbe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),kl=new Uint32Array(64);let sbe=class extends cH{constructor(e=32){super(64,e,8,!1),this.A=Pl[0]|0,this.B=Pl[1]|0,this.C=Pl[2]|0,this.D=Pl[3]|0,this.E=Pl[4]|0,this.F=Pl[5]|0,this.G=Pl[6]|0,this.H=Pl[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)kl[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=kl[d-15],f=kl[d-2],p=la(h,7)^la(h,18)^h>>>3,g=la(f,17)^la(f,19)^f>>>10;kl[d]=g+kl[d-7]+p+kl[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=la(a,6)^la(a,11)^la(a,25),f=u+h+tbe(a,c,l)+rbe[d]+kl[d]|0,p=(la(r,2)^la(r,13)^la(r,22))+nbe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){co(kl)}destroy(){this.set(0,0,0,0,0,0,0,0),co(this.buffer)}};const lH=Xz(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),ibe=lH[0],obe=lH[1],Ol=new Uint32Array(80),Rl=new Uint32Array(80);let NR=class extends cH{constructor(e=64){super(128,e,16,!1),this.Ah=Hr[0]|0,this.Al=Hr[1]|0,this.Bh=Hr[2]|0,this.Bl=Hr[3]|0,this.Ch=Hr[4]|0,this.Cl=Hr[5]|0,this.Dh=Hr[6]|0,this.Dl=Hr[7]|0,this.Eh=Hr[8]|0,this.El=Hr[9]|0,this.Fh=Hr[10]|0,this.Fl=Hr[11]|0,this.Gh=Hr[12]|0,this.Gl=Hr[13]|0,this.Hh=Hr[14]|0,this.Hl=Hr[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let b=0;b<16;b++,n+=4)Ol[b]=e.getUint32(n),Rl[b]=e.getUint32(n+=4);for(let b=16;b<80;b++){const x=Ol[b-15]|0,_=Rl[b-15]|0,C=Jl(x,_,1)^Jl(x,_,8)^k5(x,_,7),S=Yl(x,_,1)^Yl(x,_,8)^O5(x,_,7),T=Ol[b-2]|0,A=Rl[b-2]|0,P=Jl(T,A,19)^C0(T,A,61)^k5(T,A,6),R=Yl(T,A,19)^A0(T,A,61)^O5(T,A,6),j=$we(S,R,Rl[b-7],Rl[b-16]),z=Uwe(j,C,P,Ol[b-7],Ol[b-16]);Ol[b]=z|0,Rl[b]=j|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:y,Hh:w,Hl:v}=this;for(let b=0;b<80;b++){const x=Jl(d,h,14)^Jl(d,h,18)^C0(d,h,41),_=Yl(d,h,14)^Yl(d,h,18)^A0(d,h,41),C=d&f^~d&g,S=h&p^~h&y,T=Bwe(v,_,S,obe[b],Rl[b]),A=Lwe(T,w,x,C,ibe[b],Ol[b]),P=T|0,R=Jl(r,s,28)^C0(r,s,34)^C0(r,s,39),j=Yl(r,s,28)^A0(r,s,34)^A0(r,s,39),z=r&i^r&a^i&a,K=s&o^s&c^o&c;w=g|0,v=y|0,g=f|0,y=p|0,f=d|0,p=h|0,{h:d,l:h}=xo(l|0,u|0,A|0,P|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=xR(P,j,K);r=CR(I,A,R,z),s=I|0}({h:r,l:s}=xo(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=xo(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=xo(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=xo(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=xo(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=xo(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=xo(this.Gh|0,this.Gl|0,g|0,y|0),{h:w,l:v}=xo(this.Hh|0,this.Hl|0,w|0,v|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,y,w,v)}roundClean(){co(Ol,Rl)}destroy(){co(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},abe=class extends NR{constructor(){super(48),this.Ah=zr[0]|0,this.Al=zr[1]|0,this.Bh=zr[2]|0,this.Bl=zr[3]|0,this.Ch=zr[4]|0,this.Cl=zr[5]|0,this.Dh=zr[6]|0,this.Dl=zr[7]|0,this.Eh=zr[8]|0,this.El=zr[9]|0,this.Fh=zr[10]|0,this.Fl=zr[11]|0,this.Gh=zr[12]|0,this.Gl=zr[13]|0,this.Hh=zr[14]|0,this.Hl=zr[15]|0}};const Wr=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);let cbe=class extends NR{constructor(){super(32),this.Ah=Wr[0]|0,this.Al=Wr[1]|0,this.Bh=Wr[2]|0,this.Bl=Wr[3]|0,this.Ch=Wr[4]|0,this.Cl=Wr[5]|0,this.Dh=Wr[6]|0,this.Dl=Wr[7]|0,this.Eh=Wr[8]|0,this.El=Wr[9]|0,this.Fh=Wr[10]|0,this.Fl=Wr[11]|0,this.Gh=Wr[12]|0,this.Gl=Wr[13]|0,this.Hh=Wr[14]|0,this.Hl=Wr[15]|0}};const BC=kv(()=>new sbe),lbe=kv(()=>new NR),ube=kv(()=>new abe),dbe=kv(()=>new cbe),hbe=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Gn=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Ne=new Uint32Array(32);function Dl(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=Ne[2*t],l=Ne[2*t+1],u=Ne[2*e],d=Ne[2*e+1],h=Ne[2*n],f=Ne[2*n+1],p=Ne[2*r],g=Ne[2*r+1],y=xR(c,u,o);l=CR(y,l,d,a),c=y|0,{Dh:g,Dl:p}={Dh:g^l,Dl:p^c},{Dh:g,Dl:p}={Dh:Nwe(g,p),Dl:Pwe(g)},{h:f,l:h}=xo(f,h,g,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:Jl(d,u,24),Bl:Yl(d,u,24)},Ne[2*t]=c,Ne[2*t+1]=l,Ne[2*e]=u,Ne[2*e+1]=d,Ne[2*n]=h,Ne[2*n+1]=f,Ne[2*r]=p,Ne[2*r+1]=g}function $l(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=Ne[2*t],l=Ne[2*t+1],u=Ne[2*e],d=Ne[2*e+1],h=Ne[2*n],f=Ne[2*n+1],p=Ne[2*r],g=Ne[2*r+1],y=xR(c,u,o);l=CR(y,l,d,a),c=y|0,{Dh:g,Dl:p}={Dh:g^l,Dl:p^c},{Dh:g,Dl:p}={Dh:Jl(g,p,16),Dl:Yl(g,p,16)},{h:f,l:h}=xo(f,h,g,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:C0(d,u,63),Bl:A0(d,u,63)},Ne[2*t]=c,Ne[2*t+1]=l,Ne[2*e]=u,Ne[2*e+1]=d,Ne[2*n]=h,Ne[2*n+1]=f,Ne[2*r]=p,Ne[2*r+1]=g}function fbe(t,e={},n,r,s){if(sl(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class pbe extends UC{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,sl(e),sl(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=db(this.buffer)}update(e){gd(this),e=Qo(e),ao(e);const{blockLen:n,buffer:r,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===n&&(Zl(s),this.compress(s,0,!1),Zl(s),this.pos=0);const l=Math.min(n-this.pos,i-c),u=o+c;if(l===n&&!(u%4)&&c+l<i){const d=new Uint32Array(a,u,Math.floor((i-c)/4));Zl(d);for(let h=0;c+n<i;h+=s.length,c+=n)this.length+=n,this.compress(d,h,!1);Zl(d);continue}r.set(e.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(e){gd(this),IR(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,co(this.buffer.subarray(n)),Zl(r),this.compress(r,0,!0),Zl(r);const s=db(e);this.get().forEach((i,o)=>s[o]=uc(i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(n),e.destroyed=i,e.finished=s,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class gbe extends pbe{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=Gn[0]|0,this.v0h=Gn[1]|0,this.v1l=Gn[2]|0,this.v1h=Gn[3]|0,this.v2l=Gn[4]|0,this.v2h=Gn[5]|0,this.v3l=Gn[6]|0,this.v3h=Gn[7]|0,this.v4l=Gn[8]|0,this.v4h=Gn[9]|0,this.v5l=Gn[10]|0,this.v5h=Gn[11]|0,this.v6l=Gn[12]|0,this.v6h=Gn[13]|0,this.v7l=Gn[14]|0,this.v7h=Gn[15]|0,fbe(n,e,64,16,16);let{key:r,personalization:s,salt:i}=e,o=0;if(r!==void 0&&(r=Qo(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=Qo(i);const a=db(i);this.v4l^=uc(a[0]),this.v4h^=uc(a[1]),this.v5l^=uc(a[2]),this.v5h^=uc(a[3])}if(s!==void 0){s=Qo(s);const a=db(s);this.v6l^=uc(a[0]),this.v6h^=uc(a[1]),this.v7l^=uc(a[2]),this.v7h^=uc(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:l,v4h:u,v5l:d,v5h:h,v6l:f,v6h:p,v7l:g,v7h:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=d|0,this.v5h=h|0,this.v6l=f|0,this.v6h=p|0,this.v7l=g|0,this.v7h=y|0}compress(e,n,r){this.get().forEach((c,l)=>Ne[l]=c),Ne.set(Gn,16);let{h:s,l:i}=Zz(BigInt(this.length));Ne[24]=Gn[8]^i,Ne[25]=Gn[9]^s,r&&(Ne[28]=~Ne[28],Ne[29]=~Ne[29]);let o=0;const a=hbe;for(let c=0;c<12;c++)Dl(0,4,8,12,e,n+2*a[o++]),$l(0,4,8,12,e,n+2*a[o++]),Dl(1,5,9,13,e,n+2*a[o++]),$l(1,5,9,13,e,n+2*a[o++]),Dl(2,6,10,14,e,n+2*a[o++]),$l(2,6,10,14,e,n+2*a[o++]),Dl(3,7,11,15,e,n+2*a[o++]),$l(3,7,11,15,e,n+2*a[o++]),Dl(0,5,10,15,e,n+2*a[o++]),$l(0,5,10,15,e,n+2*a[o++]),Dl(1,6,11,12,e,n+2*a[o++]),$l(1,6,11,12,e,n+2*a[o++]),Dl(2,7,8,13,e,n+2*a[o++]),$l(2,7,8,13,e,n+2*a[o++]),Dl(3,4,9,14,e,n+2*a[o++]),$l(3,4,9,14,e,n+2*a[o++]);this.v0l^=Ne[0]^Ne[16],this.v0h^=Ne[1]^Ne[17],this.v1l^=Ne[2]^Ne[18],this.v1h^=Ne[3]^Ne[19],this.v2l^=Ne[4]^Ne[20],this.v2h^=Ne[5]^Ne[21],this.v3l^=Ne[6]^Ne[22],this.v3h^=Ne[7]^Ne[23],this.v4l^=Ne[8]^Ne[24],this.v4h^=Ne[9]^Ne[25],this.v5l^=Ne[10]^Ne[26],this.v5h^=Ne[11]^Ne[27],this.v6l^=Ne[12]^Ne[28],this.v6h^=Ne[13]^Ne[29],this.v7l^=Ne[14]^Ne[30],this.v7h^=Ne[15]^Ne[31],co(Ne)}destroy(){this.destroyed=!0,co(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const mbe=zwe(t=>new gbe(t)),ybe="https://rpc.walletconnect.org/v1";function uH(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(Xwe(n)).toString("hex")}async function wbe(t,e,n,r,s,i){switch(n.t){case"eip191":return await bbe(t,e,n.s);case"eip1271":return await vbe(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function bbe(t,e,n){return(await eye({hash:uH(e),signature:n})).toLowerCase()===t.toLowerCase()}async function vbe(t,e,n,r,s,i){const o=pg(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l=n.substring(2),u=(l.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:uH(e)).substring(2),h=a+d+c+u+l,f=await fetch(`${i||ybe}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:Ebe(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function Ebe(){return Date.now()+Math.floor(Math.random()*1e3)}function _be(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return py.encode(i)}function xbe(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const s=mbe(r,{dkLen:32});return py.encode(s)}function U5(t){const e=new Uint8Array(BC(Cbe(t)));return py.encode(e)}function Cbe(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function B5(t){const e=Buffer.from(t,"base64"),n=Lye(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=Nye(n),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(r)]),o=dbe(i);return Gye.encode(o).replace(/=+$/,"")}function m2(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function Abe(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(m2(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(m2(n.length)),s.push(n),s.push(Buffer.from([26])),s.push(m2(r.length)),s.push(r);const i=Buffer.concat(s),o=BC(i);return Buffer.from(o).toString("hex").toUpperCase()}var Sbe=Object.defineProperty,Ibe=Object.defineProperties,Tbe=Object.getOwnPropertyDescriptors,L5=Object.getOwnPropertySymbols,Nbe=Object.prototype.hasOwnProperty,Pbe=Object.prototype.propertyIsEnumerable,M5=(t,e,n)=>e in t?Sbe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kbe=(t,e)=>{for(var n in e||(e={}))Nbe.call(e,n)&&M5(t,n,e[n]);if(L5)for(var n of L5(e))Pbe.call(e,n)&&M5(t,n,e[n]);return t},Obe=(t,e)=>Ibe(t,Tbe(e));const Rbe="did:pkh:",PR=t=>t==null?void 0:t.split(":"),Dbe=t=>{const e=t&&PR(t);if(e)return t.includes(Rbe)?e[3]:e[1]},LN=t=>{const e=t&&PR(t);if(e)return e[2]+":"+e[3]},Y_=t=>{const e=t&&PR(t);if(e)return e.pop()};async function j5(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=dH(s,s.iss),o=Y_(s.iss);return await wbe(o,i,r,LN(s.iss),n)}const dH=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=Y_(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${Dbe(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=LE(t.resources);if(p){const g=fb(p);s=Hbe(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function $be(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function Ube(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Ef(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function Bbe(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:Lbe(e,n,r)}}}function Lbe(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function hH(t){return Ef(t),`urn:recap:${$be(t).replace(/=/g,"")}`}function fb(t){const e=Ube(t.replace("urn:recap:",""));return Ef(e),e}function Mbe(t,e,n){const r=Bbe(t,e,n);return hH(r)}function jbe(t){return t&&t.includes("urn:recap:")}function Fbe(t,e){const n=fb(t),r=fb(e),s=zbe(n,r);return hH(s)}function zbe(t,e){Ef(t),Ef(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=Obe(kbe({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function Hbe(t="",e){Ef(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function F5(t){var e;const n=fb(t);Ef(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function z5(t){const e=fb(t);Ef(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function LE(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return jbe(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function fH(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function MN(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function y2(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Hs(t,...e){if(!fH(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function H5(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Wbe(t,e){Hs(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function td(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Bm(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function qbe(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const Gbe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Vbe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function jN(t){if(typeof t=="string")t=Vbe(t);else if(fH(t))t=FN(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function Kbe(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Qbe(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const Jbe=(t,e)=>{function n(r,...s){if(Hs(r),!Gbe)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Hs(l):Hs(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&Hs(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Hs(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Hs(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Hs(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function W5(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!Zbe(e))throw new Error("invalid output, must be aligned");return e}function q5(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function Ybe(t,e,n){MN(n);const r=new Uint8Array(16),s=qbe(r);return q5(s,0,BigInt(e),n),q5(s,8,BigInt(t),n),r}function Zbe(t){return t.byteOffset%4===0}function FN(t){return Uint8Array.from(t)}const pH=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Xbe=pH("expand 16-byte k"),eve=pH("expand 32-byte k"),tve=td(Xbe),nve=td(eve);function St(t,e){return t<<e|t>>>32-e}function zN(t){return t.byteOffset%4===0}const j1=64,rve=16,gH=2**32-1,G5=new Uint32Array;function sve(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(j1),u=td(l),d=zN(s)&&zN(i),h=d?td(s):G5,f=d?td(i):G5;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=gH)throw new Error("arx: counter overflow");const g=Math.min(j1,c-p);if(d&&g===j1){const y=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let w=0,v;w<rve;w++)v=y+w,f[v]=h[v]^u[w];p+=j1;continue}for(let y=0,w;y<g;y++)w=p+y,i[w]=s[w]^l[y];p+=g}}function ive(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=Kbe({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return y2(s),y2(o),MN(i),MN(n),(a,c,l,u,d=0)=>{Hs(a),Hs(c),Hs(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),Hs(u),y2(d),d<0||d>=gH)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,y;if(p===32)f.push(g=FN(a)),y=nve;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),y=tve,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);zN(c)||f.push(c=FN(c));const w=td(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(y,w,td(c.subarray(0,16)),w),c=c.subarray(16)}const v=16-s;if(v!==c.length)throw new Error(`arx: nonce must be ${v} or 16 bytes`);if(v!==12){const x=new Uint8Array(12);x.set(c,i?0:12-c.length),c=x,f.push(c)}const b=td(c);return sve(t,y,w,b,l,u,d,o),Bm(...f),u}}const wr=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class ove{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=jN(e),Hs(e,32);const n=wr(e,0),r=wr(e,2),s=wr(e,4),i=wr(e,6),o=wr(e,8),a=wr(e,10),c=wr(e,12),l=wr(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=wr(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],y=o[9],w=wr(e,n+0),v=wr(e,n+2),b=wr(e,n+4),x=wr(e,n+6),_=wr(e,n+8),C=wr(e,n+10),S=wr(e,n+12),T=wr(e,n+14);let A=i[0]+(w&8191),P=i[1]+((w>>>13|v<<3)&8191),R=i[2]+((v>>>10|b<<6)&8191),j=i[3]+((b>>>7|x<<9)&8191),z=i[4]+((x>>>4|_<<12)&8191),K=i[5]+(_>>>1&8191),I=i[6]+((_>>>14|C<<2)&8191),N=i[7]+((C>>>11|S<<5)&8191),L=i[8]+((S>>>8|T<<8)&8191),U=i[9]+(T>>>5|s),$=0,M=$+A*a+P*(5*y)+R*(5*g)+j*(5*p)+z*(5*f);$=M>>>13,M&=8191,M+=K*(5*h)+I*(5*d)+N*(5*u)+L*(5*l)+U*(5*c),$+=M>>>13,M&=8191;let G=$+A*c+P*a+R*(5*y)+j*(5*g)+z*(5*p);$=G>>>13,G&=8191,G+=K*(5*f)+I*(5*h)+N*(5*d)+L*(5*u)+U*(5*l),$+=G>>>13,G&=8191;let X=$+A*l+P*c+R*a+j*(5*y)+z*(5*g);$=X>>>13,X&=8191,X+=K*(5*p)+I*(5*f)+N*(5*h)+L*(5*d)+U*(5*u),$+=X>>>13,X&=8191;let ie=$+A*u+P*l+R*c+j*a+z*(5*y);$=ie>>>13,ie&=8191,ie+=K*(5*g)+I*(5*p)+N*(5*f)+L*(5*h)+U*(5*d),$+=ie>>>13,ie&=8191;let se=$+A*d+P*u+R*l+j*c+z*a;$=se>>>13,se&=8191,se+=K*(5*y)+I*(5*g)+N*(5*p)+L*(5*f)+U*(5*h),$+=se>>>13,se&=8191;let ce=$+A*h+P*d+R*u+j*l+z*c;$=ce>>>13,ce&=8191,ce+=K*a+I*(5*y)+N*(5*g)+L*(5*p)+U*(5*f),$+=ce>>>13,ce&=8191;let ye=$+A*f+P*h+R*d+j*u+z*l;$=ye>>>13,ye&=8191,ye+=K*c+I*a+N*(5*y)+L*(5*g)+U*(5*p),$+=ye>>>13,ye&=8191;let Y=$+A*p+P*f+R*h+j*d+z*u;$=Y>>>13,Y&=8191,Y+=K*l+I*c+N*a+L*(5*y)+U*(5*g),$+=Y>>>13,Y&=8191;let ne=$+A*g+P*p+R*f+j*h+z*d;$=ne>>>13,ne&=8191,ne+=K*u+I*l+N*c+L*a+U*(5*y),$+=ne>>>13,ne&=8191;let le=$+A*y+P*g+R*p+j*f+z*h;$=le>>>13,le&=8191,le+=K*d+I*u+N*l+L*c+U*a,$+=le>>>13,le&=8191,$=($<<2)+$|0,$=$+M|0,M=$&8191,$=$>>>13,G+=$,i[0]=M,i[1]=G,i[2]=X,i[3]=ie,i[4]=se,i[5]=ce,i[6]=ye,i[7]=Y,i[8]=ne,i[9]=le}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;Bm(r)}update(e){H5(this),e=jN(e),Hs(e);const{buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Bm(this.h,this.r,this.buffer,this.pad)}digestInto(e){H5(this),Wbe(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function ave(t){const e=(r,s)=>t(s).update(jN(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const cve=ave(t=>new ove(t));function lve(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],y=e[6],w=e[7],v=s,b=n[0],x=n[1],_=n[2],C=o,S=a,T=c,A=l,P=u,R=d,j=h,z=f,K=p,I=g,N=y,L=w,U=v,$=b,M=x,G=_;for(let ie=0;ie<i;ie+=2)C=C+P|0,U=St(U^C,16),K=K+U|0,P=St(P^K,12),C=C+P|0,U=St(U^C,8),K=K+U|0,P=St(P^K,7),S=S+R|0,$=St($^S,16),I=I+$|0,R=St(R^I,12),S=S+R|0,$=St($^S,8),I=I+$|0,R=St(R^I,7),T=T+j|0,M=St(M^T,16),N=N+M|0,j=St(j^N,12),T=T+j|0,M=St(M^T,8),N=N+M|0,j=St(j^N,7),A=A+z|0,G=St(G^A,16),L=L+G|0,z=St(z^L,12),A=A+z|0,G=St(G^A,8),L=L+G|0,z=St(z^L,7),C=C+R|0,G=St(G^C,16),N=N+G|0,R=St(R^N,12),C=C+R|0,G=St(G^C,8),N=N+G|0,R=St(R^N,7),S=S+j|0,U=St(U^S,16),L=L+U|0,j=St(j^L,12),S=S+j|0,U=St(U^S,8),L=L+U|0,j=St(j^L,7),T=T+z|0,$=St($^T,16),K=K+$|0,z=St(z^K,12),T=T+z|0,$=St($^T,8),K=K+$|0,z=St(z^K,7),A=A+P|0,M=St(M^A,16),I=I+M|0,P=St(P^I,12),A=A+P|0,M=St(M^A,8),I=I+M|0,P=St(P^I,7);let X=0;r[X++]=o+C|0,r[X++]=a+S|0,r[X++]=c+T|0,r[X++]=l+A|0,r[X++]=u+P|0,r[X++]=d+R|0,r[X++]=h+j|0,r[X++]=f+z|0,r[X++]=p+K|0,r[X++]=g+I|0,r[X++]=y+N|0,r[X++]=w+L|0,r[X++]=v+U|0,r[X++]=b+$|0,r[X++]=x+M|0,r[X++]=_+G|0}const uve=ive(lve,{counterRight:!1,counterLength:4,allowShortKeys:!1}),dve=new Uint8Array(16),V5=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(dve.subarray(n))},hve=new Uint8Array(32);function K5(t,e,n,r,s){const i=t(e,n,hve),o=cve.create(i);s&&V5(o,s),V5(o,r);const a=Ybe(r.length,s?s.length:0,!0);o.update(a);const c=o.digest();return Bm(i,a),c}const fve=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=W5(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=K5(t,e,n,a,r);return i.set(c,o),Bm(c),i},decrypt(s,i){i=W5(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=K5(t,e,n,o,r);if(!Qbe(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),Bm(c),i}}),mH=Jbe({blockSize:64,nonceLength:12,tagLength:16},fve(uve));let yH=class extends UC{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,SR(e);const r=Qo(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),co(i)}update(e){return gd(this),this.iHash.update(e),this}digestInto(e){gd(this),ao(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const LC=(t,e,n)=>new yH(t,e).update(n).digest();LC.create=(t,e)=>new yH(t,e);function pve(t,e,n){return SR(t),n===void 0&&(n=new Uint8Array(t.outputLen)),LC(t,Qo(n),Qo(e))}const w2=Uint8Array.from([0]),Q5=Uint8Array.of();function gve(t,e,n,r=32){SR(t),sl(r);const s=t.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);n===void 0&&(n=Q5);const o=new Uint8Array(i*s),a=LC.create(t,e),c=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let u=0;u<i;u++)w2[0]=u+1,c.update(u===0?Q5:l).update(n).update(w2).digestInto(l),o.set(l,s*u),a._cloneInto(c);return a.destroy(),c.destroy(),co(l,w2),o.slice(0,r)}const mve=(t,e,n,r,s)=>gve(t,pve(t,e,n),r,s),MC=BC,kR=BigInt(0),HN=BigInt(1);function Z_(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function F1(t){const e=t.toString(16);return e.length&1?"0"+e:e}function wH(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?kR:BigInt("0x"+t)}function jC(t){return wH(hb(t))}function X_(t){return ao(t),wH(hb(Uint8Array.from(t).reverse()))}function OR(t,e){return TR(t.toString(16).padStart(e*2,"0"))}function RR(t,e){return OR(t,e).reverse()}function zs(t,e,n){let r;if(typeof e=="string")try{r=TR(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(AR(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const b2=t=>typeof t=="bigint"&&kR<=t;function yve(t,e,n){return b2(t)&&b2(e)&&b2(n)&&e<=t&&t<n}function WN(t,e,n,r){if(!yve(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function wve(t){let e;for(e=0;t>kR;t>>=HN,e+=1);return e}const FC=t=>(HN<<BigInt(t))-HN;function bve(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=h=>new Uint8Array(h),s=h=>Uint8Array.of(h);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...h)=>n(o,i,...h),u=(h=r(0))=>{o=l(s(0),h),i=l(),h.length!==0&&(o=l(s(1),h),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const f=[];for(;h<e;){i=l();const p=i.slice();f.push(p),h+=i.length}return dh(...f)};return(h,f)=>{c(),u(h);let p;for(;!(p=f(d()));)u();return c(),p}}function zC(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function J5(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Qs=BigInt(0),ys=BigInt(1),hh=BigInt(2),vve=BigInt(3),bH=BigInt(4),vH=BigInt(5),EH=BigInt(8);function Xi(t,e){const n=t%e;return n>=Qs?n:e+n}function vo(t,e,n){let r=t;for(;e-- >Qs;)r*=r,r%=n;return r}function Y5(t,e){if(t===Qs)throw new Error("invert: expected non-zero number");if(e<=Qs)throw new Error("invert: expected positive modulus, got "+e);let n=Xi(t,e),r=e,s=Qs,i=ys;for(;n!==Qs;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==ys)throw new Error("invert: does not exist");return Xi(s,e)}function _H(t,e){const n=(t.ORDER+ys)/bH,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function Eve(t,e){const n=(t.ORDER-vH)/EH,r=t.mul(e,hh),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,hh),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function _ve(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-ys,n=0;for(;e%hh===Qs;)e/=hh,n++;let r=hh;const s=yy(t);for(;Z5(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return _H;let i=s.pow(r,e);const o=(e+ys)/hh;return function(a,c){if(a.is0(c))return c;if(Z5(a,c)!==1)throw new Error("Cannot find square root");let l=n,u=a.mul(a.ONE,i),d=a.pow(c,e),h=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let f=1,p=a.sqr(d);for(;!a.eql(p,a.ONE);)if(f++,p=a.sqr(p),f===l)throw new Error("Cannot find square root");const g=ys<<BigInt(l-f-1),y=a.pow(u,g);l=f,u=a.sqr(y),d=a.mul(d,u),h=a.mul(h,y)}return h}}function xve(t){return t%bH===vve?_H:t%EH===vH?Eve:_ve(t)}const Cve=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ave(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Cve.reduce((r,s)=>(r[s]="function",r),e);return zC(t,n),t}function Sve(t,e,n){if(n<Qs)throw new Error("invalid exponent, negatives unsupported");if(n===Qs)return t.ONE;if(n===ys)return e;let r=t.ONE,s=e;for(;n>Qs;)n&ys&&(r=t.mul(r,s)),s=t.sqr(s),n>>=ys;return r}function xH(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function Z5(t,e){const n=(t.ORDER-ys)/hh,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Ive(t,e){e!==void 0&&sl(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function yy(t,e,n=!1,r={}){if(t<=Qs)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=Ive(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:FC(o),ZERO:Qs,ONE:ys,create:u=>Xi(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return Qs<=u&&u<t},is0:u=>u===Qs,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&ys)===ys,neg:u=>Xi(-u,t),eql:(u,d)=>u===d,sqr:u=>Xi(u*u,t),add:(u,d)=>Xi(u+d,t),sub:(u,d)=>Xi(u-d,t),mul:(u,d)=>Xi(u*d,t),pow:(u,d)=>Sve(l,u,d),div:(u,d)=>Xi(u*Y5(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>Y5(u,t),sqrt:i||(u=>(c||(c=xve(t)),c(l,u))),toBytes:u=>n?RR(u,a):OR(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?X_(u):jC(u)},invertBatch:u=>xH(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function CH(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function AH(t){const e=CH(t);return e+Math.ceil(e/2)}function Tve(t,e,n=!1){const r=t.length,s=CH(e),i=AH(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?X_(t):jC(t),a=Xi(o,e-ys)+ys;return n?RR(a,s):OR(a,s)}const Lm=BigInt(0),fh=BigInt(1);function Y0(t,e){const n=e.negate();return t?n:e}function Nve(t,e,n){const r=i=>i.pz,s=xH(t.Fp,n.map(r));return n.map((i,o)=>i.toAffine(s[o])).map(t.fromAffine)}function SH(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function v2(t,e){SH(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=FC(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function X5(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=fh);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function Pve(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function kve(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const E2=new WeakMap,IH=new WeakMap;function _2(t){return IH.get(t)||1}function eU(t){if(t!==Lm)throw new Error("invalid wNAF")}function Ove(t,e){return{constTimeNegate:Y0,hasPrecomputes(n){return _2(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Lm;)r&fh&&(s=s.add(i)),i=i.double(),r>>=fh;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=v2(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=v2(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=X5(s,c,a);s=l,d?o=o.add(Y0(f,r[p])):i=i.add(Y0(h,r[u]))}return eU(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=v2(n,e);for(let a=0;a<o.windows&&s!==Lm;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=X5(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return eU(s),i},getPrecomputes(n,r,s){let i=E2.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),E2.set(r,i))),i},wNAFCached(n,r,s){const i=_2(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=_2(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){SH(r,e),IH.set(n,r),E2.delete(n)}}}function Rve(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>Lm||r>Lm;)n&fh&&(i=i.add(s)),r&fh&&(o=o.add(s)),s=s.double(),n>>=fh,r>>=fh;return{p1:i,p2:o}}function Dve(t,e,n,r){Pve(n,t),kve(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=wve(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=FC(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const y=r[g],w=Number(y>>BigInt(f)&l);u[w]=u[w].add(n[g])}let p=o;for(let g=u.length-1,y=o;g>0;g--)y=y.add(u[g]),p=p.add(y);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function tU(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Ave(e),e}else return yy(t)}function $ve(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const o of["p","n","h"]){const a=e[o];if(!(typeof a=="bigint"&&a>Lm))throw new Error(`CURVE.${o} must be positive bigint`)}const r=tU(e.p,n.Fp),s=tU(e.n,n.Fn),i=["Gx","Gy","a","b"];for(const o of i)if(!r.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const e0=BigInt(0),ap=BigInt(1),z1=BigInt(2);function Uve(t){return zC(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function Bve(t){const e=Uve(t),{P:n,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const c=o||my,l=a?255:448,u=a?32:56,d=BigInt(a?9:5),h=BigInt(a?121665:39081),f=a?z1**BigInt(254):z1**BigInt(447),p=a?BigInt(8)*z1**BigInt(251)-ap:BigInt(4)*z1**BigInt(445)-ap,g=f+p+ap,y=A=>Xi(A,n),w=v(d);function v(A){return RR(y(A),u)}function b(A){const P=zs("u coordinate",A,u);return a&&(P[31]&=127),y(X_(P))}function x(A){return X_(s(zs("scalar",A,u)))}function _(A,P){const R=T(b(P),x(A));if(R===e0)throw new Error("invalid private or public key received");return v(R)}function C(A){return _(A,w)}function S(A,P,R){const j=y(A*(P-R));return P=y(P-j),R=y(R+j),{x_2:P,x_3:R}}function T(A,P){WN("u",A,e0,n),WN("scalar",P,f,g);const R=P,j=A;let z=ap,K=e0,I=A,N=ap,L=e0;for(let $=BigInt(l-1);$>=e0;$--){const M=R>>$&ap;L^=M,{x_2:z,x_3:I}=S(L,z,I),{x_2:K,x_3:N}=S(L,K,N),L=M;const G=z+K,X=y(G*G),ie=z-K,se=y(ie*ie),ce=X-se,ye=I+N,Y=I-N,ne=y(Y*G),le=y(ye*ie),V=ne+le,oe=ne-le;I=y(V*V),N=y(j*y(oe*oe)),z=y(X*se),K=y(ce*(X+y(h*ce)))}({x_2:z,x_3:I}=S(L,z,I)),{x_2:K,x_3:N}=S(L,K,N);const U=i(K);return y(z*U)}return{scalarMult:_,scalarMultBase:C,getSharedSecret:(A,P)=>_(A,P),getPublicKey:A=>C(A),utils:{randomPrivateKey:()=>c(u)},GuBytes:w.slice()}}BigInt(0);const Lve=BigInt(1),nU=BigInt(2),Mve=BigInt(3),jve=BigInt(5);BigInt(8);const TH={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Fve(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=TH.p,o=t*t%i*t%i,a=vo(o,nU,i)*o%i,c=vo(a,Lve,i)*t%i,l=vo(c,jve,i)*c%i,u=vo(l,e,i)*l%i,d=vo(u,n,i)*u%i,h=vo(d,r,i)*d%i,f=vo(h,s,i)*h%i,p=vo(f,s,i)*h%i,g=vo(p,e,i)*l%i;return{pow_p_5_8:vo(g,nU,i)*t%i,b2:o}}function zve(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const qN=(()=>{const t=TH.p;return Bve({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=Fve(e);return Xi(vo(n,Mve,t)*r,t)},adjustScalarBytes:zve})})();function rU(t){t.lowS!==void 0&&Z_("lowS",t.lowS),t.prehash!==void 0&&Z_("prehash",t.prehash)}class Hve extends Error{constructor(e=""){super(e)}}const vc={Err:Hve,_tlv:{encode:(t,e)=>{const{Err:n}=vc;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=F1(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?F1(s.length/2|128):"";return F1(t)+i+s+e},decode(t,e){const{Err:n}=vc;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=vc;if(t<Z0)throw new e("integer: negative integers are not allowed");let n=F1(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=vc;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return jC(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=vc,s=zs("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=vc,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Z0=BigInt(0),X0=BigInt(1),Wve=BigInt(2),H1=BigInt(3),qve=BigInt(4);function Gve(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function NH(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=zs("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function Vve(t,e={}){const{Fp:n,Fn:r}=$ve("weierstrass",t,e),{h:s,n:i}=t;zC(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(T,A,P){const{x:R,y:j}=A.toAffine(),z=n.toBytes(R);if(Z_("isCompressed",P),P){a();const K=!n.isOdd(j);return dh(PH(K),z)}else return dh(Uint8Array.of(4),z,n.toBytes(j))}function l(T){ao(T);const A=n.BYTES,P=A+1,R=2*A+1,j=T.length,z=T[0],K=T.subarray(1);if(j===P&&(z===2||z===3)){const I=n.fromBytes(K);if(!n.isValid(I))throw new Error("bad point: is not on curve, wrong x");const N=h(I);let L;try{L=n.sqrt(N)}catch($){const M=$ instanceof Error?": "+$.message:"";throw new Error("bad point: is not on curve, sqrt error"+M)}a();const U=n.isOdd(L);return(z&1)===1!==U&&(L=n.neg(L)),{x:I,y:L}}else if(j===R&&z===4){const I=n.fromBytes(K.subarray(A*0,A*1)),N=n.fromBytes(K.subarray(A*1,A*2));if(!f(I,N))throw new Error("bad point: is not on curve");return{x:I,y:N}}else throw new Error(`bad point: got length ${j}, expected compressed=${P} or uncompressed=${R}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=Gve(n,t.a,t.b);function f(T,A){const P=n.sqr(A),R=h(T);return n.eql(P,R)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,H1),qve),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function y(T,A,P=!1){if(!n.isValid(A)||P&&n.is0(A))throw new Error(`bad point coordinate ${T}`);return A}function w(T){if(!(T instanceof _))throw new Error("ProjectivePoint expected")}const v=J5((T,A)=>{const{px:P,py:R,pz:j}=T;if(n.eql(j,n.ONE))return{x:P,y:R};const z=T.is0();A==null&&(A=z?n.ONE:n.inv(j));const K=n.mul(P,A),I=n.mul(R,A),N=n.mul(j,A);if(z)return{x:n.ZERO,y:n.ZERO};if(!n.eql(N,n.ONE))throw new Error("invZ was invalid");return{x:K,y:I}}),b=J5(T=>{if(T.is0()){if(e.allowInfinityPoint&&!n.is0(T.py))return;throw new Error("bad point: ZERO")}const{x:A,y:P}=T.toAffine();if(!n.isValid(A)||!n.isValid(P))throw new Error("bad point: x or y not field elements");if(!f(A,P))throw new Error("bad point: equation left != right");if(!T.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function x(T,A,P,R,j){return P=new _(n.mul(P.px,T),P.py,P.pz),A=Y0(R,A),P=Y0(j,P),A.add(P)}class _{constructor(A,P,R){this.px=y("x",A),this.py=y("y",P,!0),this.pz=y("z",R),Object.freeze(this)}static fromAffine(A){const{x:P,y:R}=A||{};if(!A||!n.isValid(P)||!n.isValid(R))throw new Error("invalid affine point");if(A instanceof _)throw new Error("projective point not allowed");return n.is0(P)&&n.is0(R)?_.ZERO:new _(P,R,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(A){return Nve(_,"pz",A)}static fromBytes(A){return ao(A),_.fromHex(A)}static fromHex(A){const P=_.fromAffine(d(zs("pointHex",A)));return P.assertValidity(),P}static fromPrivateKey(A){const P=NH(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return _.BASE.multiply(P(A))}static msm(A,P){return Dve(_,r,A,P)}precompute(A=8,P=!0){return S.setWindowSize(this,A),P||this.multiply(H1),this}_setWindowSize(A){this.precompute(A)}assertValidity(){b(this)}hasEvenY(){const{y:A}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(A)}equals(A){w(A);const{px:P,py:R,pz:j}=this,{px:z,py:K,pz:I}=A,N=n.eql(n.mul(P,I),n.mul(z,j)),L=n.eql(n.mul(R,I),n.mul(K,j));return N&&L}negate(){return new _(this.px,n.neg(this.py),this.pz)}double(){const{a:A,b:P}=t,R=n.mul(P,H1),{px:j,py:z,pz:K}=this;let I=n.ZERO,N=n.ZERO,L=n.ZERO,U=n.mul(j,j),$=n.mul(z,z),M=n.mul(K,K),G=n.mul(j,z);return G=n.add(G,G),L=n.mul(j,K),L=n.add(L,L),I=n.mul(A,L),N=n.mul(R,M),N=n.add(I,N),I=n.sub($,N),N=n.add($,N),N=n.mul(I,N),I=n.mul(G,I),L=n.mul(R,L),M=n.mul(A,M),G=n.sub(U,M),G=n.mul(A,G),G=n.add(G,L),L=n.add(U,U),U=n.add(L,U),U=n.add(U,M),U=n.mul(U,G),N=n.add(N,U),M=n.mul(z,K),M=n.add(M,M),U=n.mul(M,G),I=n.sub(I,U),L=n.mul(M,$),L=n.add(L,L),L=n.add(L,L),new _(I,N,L)}add(A){w(A);const{px:P,py:R,pz:j}=this,{px:z,py:K,pz:I}=A;let N=n.ZERO,L=n.ZERO,U=n.ZERO;const $=t.a,M=n.mul(t.b,H1);let G=n.mul(P,z),X=n.mul(R,K),ie=n.mul(j,I),se=n.add(P,R),ce=n.add(z,K);se=n.mul(se,ce),ce=n.add(G,X),se=n.sub(se,ce),ce=n.add(P,j);let ye=n.add(z,I);return ce=n.mul(ce,ye),ye=n.add(G,ie),ce=n.sub(ce,ye),ye=n.add(R,j),N=n.add(K,I),ye=n.mul(ye,N),N=n.add(X,ie),ye=n.sub(ye,N),U=n.mul($,ce),N=n.mul(M,ie),U=n.add(N,U),N=n.sub(X,U),U=n.add(X,U),L=n.mul(N,U),X=n.add(G,G),X=n.add(X,G),ie=n.mul($,ie),ce=n.mul(M,ce),X=n.add(X,ie),ie=n.sub(G,ie),ie=n.mul($,ie),ce=n.add(ce,ie),G=n.mul(X,ce),L=n.add(L,G),G=n.mul(ye,ce),N=n.mul(se,N),N=n.sub(N,G),G=n.mul(se,X),U=n.mul(ye,U),U=n.add(U,G),new _(N,L,U)}subtract(A){return this.add(A.negate())}is0(){return this.equals(_.ZERO)}multiply(A){const{endo:P}=e;if(!r.isValidNot0(A))throw new Error("invalid scalar: out of range");let R,j;const z=K=>S.wNAFCached(this,K,_.normalizeZ);if(P){const{k1neg:K,k1:I,k2neg:N,k2:L}=P.splitScalar(A),{p:U,f:$}=z(I),{p:M,f:G}=z(L);j=$.add(G),R=x(P.beta,U,M,K,N)}else{const{p:K,f:I}=z(A);R=K,j=I}return _.normalizeZ([R,j])[0]}multiplyUnsafe(A){const{endo:P}=e,R=this;if(!r.isValid(A))throw new Error("invalid scalar: out of range");if(A===Z0||R.is0())return _.ZERO;if(A===X0)return R;if(S.hasPrecomputes(this))return this.multiply(A);if(P){const{k1neg:j,k1:z,k2neg:K,k2:I}=P.splitScalar(A),{p1:N,p2:L}=Rve(_,R,z,I);return x(P.beta,N,L,j,K)}else return S.wNAFCachedUnsafe(R,A)}multiplyAndAddUnsafe(A,P,R){const j=this.multiplyUnsafe(P).add(A.multiplyUnsafe(R));return j.is0()?void 0:j}toAffine(A){return v(this,A)}isTorsionFree(){const{isTorsionFree:A}=e;return s===X0?!0:A?A(_,this):S.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:A}=e;return s===X0?this:A?A(_,this):this.multiplyUnsafe(s)}toBytes(A=!0){return Z_("isCompressed",A),this.assertValidity(),u(_,this,A)}toRawBytes(A=!0){return this.toBytes(A)}toHex(A=!0){return hb(this.toBytes(A))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}_.BASE=new _(t.Gx,t.Gy,n.ONE),_.ZERO=new _(n.ZERO,n.ONE,n.ZERO),_.Fp=n,_.Fn=r;const C=r.BITS,S=Ove(_,e.endo?Math.ceil(C/2):C);return _}function PH(t){return Uint8Array.of(t?2:3)}function Kve(t,e,n={}){zC(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||my,s=e.hmac||((R,...j)=>LC(e.hash,R,dh(...j))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(R){const j=a>>X0;return R>j}function u(R){return l(R)?o.neg(R):R}function d(R,j){if(!o.isValidNot0(j))throw new Error(`invalid signature ${R}: out of range 1..CURVE.n`)}class h{constructor(j,z,K){d("r",j),d("s",z),this.r=j,this.s=z,K!=null&&(this.recovery=K),Object.freeze(this)}static fromCompact(j){const z=o.BYTES,K=zs("compactSignature",j,z*2);return new h(o.fromBytes(K.subarray(0,z)),o.fromBytes(K.subarray(z,z*2)))}static fromDER(j){const{r:z,s:K}=vc.toSig(zs("DER",j));return new h(z,K)}assertValidity(){}addRecoveryBit(j){return new h(this.r,this.s,j)}recoverPublicKey(j){const z=i.ORDER,{r:K,s:I,recovery:N}=this;if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");if(a*Wve<z&&N>1)throw new Error("recovery id is ambiguous for h>1 curve");const L=N===2||N===3?K+a:K;if(!i.isValid(L))throw new Error("recovery id 2 or 3 invalid");const U=i.toBytes(L),$=t.fromHex(dh(PH((N&1)===0),U)),M=o.inv(L),G=b(zs("msgHash",j)),X=o.create(-G*M),ie=o.create(I*M),se=t.BASE.multiplyUnsafe(X).add($.multiplyUnsafe(ie));if(se.is0())throw new Error("point at infinify");return se.assertValidity(),se}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(j){if(j==="compact")return dh(o.toBytes(this.r),o.toBytes(this.s));if(j==="der")return TR(vc.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return hb(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return hb(this.toBytes("compact"))}}const f=NH(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(R){try{return f(R),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const R=a;return Tve(r(AH(R)),R)},precompute(R=8,j=t.BASE){return j.precompute(R,!1)}};function g(R,j=!0){return t.fromPrivateKey(R).toBytes(j)}function y(R){if(typeof R=="bigint")return!1;if(R instanceof t)return!0;const j=zs("key",R).length,z=i.BYTES,K=z+1,I=2*z+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===K))return j===K||j===I}function w(R,j,z=!0){if(y(R)===!0)throw new Error("first arg must be private key");if(y(j)===!1)throw new Error("second arg must be public key");return t.fromHex(j).multiply(f(R)).toBytes(z)}const v=e.bits2int||function(R){if(R.length>8192)throw new Error("input is too large");const j=jC(R),z=R.length*8-c;return z>0?j>>BigInt(z):j},b=e.bits2int_modN||function(R){return o.create(v(R))},x=FC(c);function _(R){return WN("num < 2^"+c,R,Z0,x),o.toBytes(R)}function C(R,j,z=S){if(["recovered","canonical"].some(se=>se in z))throw new Error("sign() legacy options not supported");const{hash:K}=e;let{lowS:I,prehash:N,extraEntropy:L}=z;I==null&&(I=!0),R=zs("msgHash",R),rU(z),N&&(R=zs("prehashed msgHash",K(R)));const U=b(R),$=f(j),M=[_($),_(U)];if(L!=null&&L!==!1){const se=L===!0?r(i.BYTES):L;M.push(zs("extraEntropy",se))}const G=dh(...M),X=U;function ie(se){const ce=v(se);if(!o.isValidNot0(ce))return;const ye=o.inv(ce),Y=t.BASE.multiply(ce).toAffine(),ne=o.create(Y.x);if(ne===Z0)return;const le=o.create(ye*o.create(X+ne*$));if(le===Z0)return;let V=(Y.x===ne?0:2)|Number(Y.y&X0),oe=le;return I&&l(le)&&(oe=u(le),V^=1),new h(ne,oe,V)}return{seed:G,k2sig:ie}}const S={lowS:e.lowS,prehash:!1},T={lowS:e.lowS,prehash:!1};function A(R,j,z=S){const{seed:K,k2sig:I}=C(R,j,z);return bve(e.hash.outputLen,o.BYTES,s)(K,I)}t.BASE.precompute(8);function P(R,j,z,K=T){const I=R;j=zs("msgHash",j),z=zs("publicKey",z),rU(K);const{lowS:N,prehash:L,format:U}=K;if("strict"in K)throw new Error("options.strict was renamed to lowS");if(U!==void 0&&!["compact","der","js"].includes(U))throw new Error('format must be "compact", "der" or "js"');const $=typeof I=="string"||AR(I),M=!$&&!U&&typeof I=="object"&&I!==null&&typeof I.r=="bigint"&&typeof I.s=="bigint";if(!$&&!M)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let G,X;try{if(M)if(U===void 0||U==="js")G=new h(I.r,I.s);else throw new Error("invalid format");if($){try{U!=="compact"&&(G=h.fromDER(I))}catch(V){if(!(V instanceof vc.Err))throw V}!G&&U!=="der"&&(G=h.fromCompact(I))}X=t.fromHex(z)}catch{return!1}if(!G||N&&G.hasHighS())return!1;L&&(j=e.hash(j));const{r:ie,s:se}=G,ce=b(j),ye=o.inv(se),Y=o.create(ce*ye),ne=o.create(ie*ye),le=t.BASE.multiplyUnsafe(Y).add(X.multiplyUnsafe(ne));return le.is0()?!1:o.create(le.x)===ie}return Object.freeze({getPublicKey:g,getSharedSecret:w,sign:A,verify:P,utils:p,Point:t,Signature:h})}function Qve(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=yy(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function Jve(t){const{CURVE:e,curveOpts:n}=Qve(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function Yve(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function Zve(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=Jve(t),s=Vve(e,n),i=Kve(s,r,n);return Yve(t,i)}function GN(t,e){const n=r=>Zve({...t,hash:r});return{...n(e),create:n}}const kH={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},OH={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},RH={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Xve=yy(kH.p),e1e=yy(OH.p),t1e=yy(RH.p),n1e=GN({...kH,Fp:Xve,lowS:!1},BC);GN({...OH,Fp:e1e,lowS:!1},ube),GN({...RH,Fp:t1e,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},lbe);const r1e=n1e,DH="base10",ws="base16",qo="base64pad",ru="base64url",Ov="utf8",$H=0,Wc=1,Rv=2,s1e=0,sU=1,ew=12,DR=32;function i1e(){const t=qN.utils.randomPrivateKey(),e=qN.getPublicKey(t);return{privateKey:ei(t,ws),publicKey:ei(e,ws)}}function VN(){const t=my(DR);return ei(t,ws)}function o1e(t,e){const n=qN.getSharedSecret(ro(t,ws),ro(e,ws)),r=mve(MC,n,void 0,void 0,DR);return ei(r,ws)}function ME(t){const e=MC(ro(t,ws));return ei(e,ws)}function ka(t){const e=MC(ro(t,Ov));return ei(e,ws)}function UH(t){return ro(`${t}`,DH)}function _f(t){return Number(ei(t,DH))}function BH(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function LH(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function a1e(t){const e=UH(typeof t.type<"u"?t.type:$H);if(_f(e)===Wc&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?ro(t.senderPublicKey,ws):void 0,r=typeof t.iv<"u"?ro(t.iv,ws):my(ew),s=ro(t.symKey,ws),i=mH(s,r).encrypt(ro(t.message,Ov)),o=MH({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===ru?BH(o):o}function c1e(t){const e=ro(t.symKey,ws),{sealed:n,iv:r}=pb({encoded:t.encoded,encoding:t.encoding}),s=mH(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return ei(s,Ov)}function l1e(t,e){const n=UH(Rv),r=my(ew),s=ro(t,Ov),i=MH({type:n,sealed:s,iv:r});return e===ru?BH(i):i}function u1e(t,e){const{sealed:n}=pb({encoded:t,encoding:e});return ei(n,Ov)}function MH(t){if(_f(t.type)===Rv)return ei(J0([t.type,t.sealed]),qo);if(_f(t.type)===Wc){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ei(J0([t.type,t.senderPublicKey,t.iv,t.sealed]),qo)}return ei(J0([t.type,t.iv,t.sealed]),qo)}function pb(t){const e=(t.encoding||qo)===ru?LH(t.encoded):t.encoded,n=ro(e,qo),r=n.slice(s1e,sU),s=sU;if(_f(r)===Wc){const c=s+DR,l=c+ew,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(_f(r)===Rv){const c=n.slice(s),l=my(ew);return{type:r,sealed:c,iv:l}}const i=s+ew,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function d1e(t,e){const n=pb({encoded:t,encoding:e==null?void 0:e.encoding});return jH({type:_f(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?ei(n.senderPublicKey,ws):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function jH(t){const e=(t==null?void 0:t.type)||$H;if(e===Wc){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function iU(t){return t.type===Wc&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function oU(t){return t.type===Rv}function h1e(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return J0([new Uint8Array([4]),e,n])}function f1e(t,e){const[n,r,s]=t.split("."),i=Buffer.from(LH(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=MC(c),u=h1e(e);if(!r1e.verify(J0([o,a]),l,u))throw new Error("Invalid signature");return NN(t).payload}const p1e="irn";function ex(t){return(t==null?void 0:t.relay)||{protocol:p1e}}function S0(t){const e=H0e[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function g1e(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function aU(t){if(!t.includes("wc:")){const l=Yz(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:m1e(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:g1e(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function m1e(t){return t.startsWith("//")?t.substring(2):t}function y1e(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function cU(t){const e=new URLSearchParams,n=y1e(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function W1(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var w1e=Object.defineProperty,b1e=Object.defineProperties,v1e=Object.getOwnPropertyDescriptors,lU=Object.getOwnPropertySymbols,E1e=Object.prototype.hasOwnProperty,_1e=Object.prototype.propertyIsEnumerable,uU=(t,e,n)=>e in t?w1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,x1e=(t,e)=>{for(var n in e||(e={}))E1e.call(e,n)&&uU(t,n,e[n]);if(lU)for(var n of lU(e))_1e.call(e,n)&&uU(t,n,e[n]);return t},C1e=(t,e)=>b1e(t,v1e(e));function wy(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function A1e(t){const e=[];return Object.values(t).forEach(n=>{e.push(...wy(n.accounts))}),e}function S1e(t,e){const n=[];return Object.values(t).forEach(r=>{wy(r.accounts).includes(e)&&n.push(...r.methods)}),n}function I1e(t,e){const n=[];return Object.values(t).forEach(r=>{wy(r.accounts).includes(e)&&n.push(...r.events)}),n}function HC(t){return t.includes(":")}function Jp(t){return HC(t)?t.split(":")[0]:t}function dU(t){var e,n,r;const s={};if(!nd(t))return s;for(const[i,o]of Object.entries(t)){const a=HC(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=Jp(i);s[u]=C1e(x1e({},s[u]),{chains:Ha(a,(e=s[u])==null?void 0:e.chains),methods:Ha(c,(n=s[u])==null?void 0:n.methods),events:Ha(l,(r=s[u])==null?void 0:r.events)})}return s}function T1e(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function hU(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=T1e(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Ha(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function N1e(t,e){var n,r,s,i,o,a;const c=dU(t),l=dU(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:Ha((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:Ha((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:Ha((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const P1e={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},k1e={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ve(t,e){const{message:n,code:r}=k1e[t];return{message:e?`${n} ${e}`:n,code:r}}function gn(t,e){const{message:n,code:r}=P1e[t];return{message:e?`${n} ${e}`:n,code:r}}function qc(t,e){return!!Array.isArray(t)}function nd(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Ar(t){return typeof t>"u"}function zn(t,e){return e&&Ar(t)?!0:typeof t=="string"&&!!t.trim().length}function $R(t,e){return e&&Ar(t)?!0:typeof t=="number"&&!isNaN(t)}function O1e(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return uh(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=wy(a),d=n[o];(!uh(Gz(o,d),u)||!uh(d.methods,c)||!uh(d.events,l))&&(i=!1)}),i):!1}function tx(t){return zn(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function R1e(t){if(zn(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&tx(n)}}return!1}function D1e(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(zn(t,!1)){if(e(t))return!0;const n=Yz(t);return e(n)}}catch{}return!1}function $1e(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function U1e(t){return t==null?void 0:t.topic}function B1e(t,e){let n=null;return zn(t==null?void 0:t.publicKey,!1)||(n=ve("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function fU(t){let e=!0;return qc(t)?t.length&&(e=t.every(n=>zn(n,!1))):e=!1,e}function L1e(t,e,n){let r=null;return qc(e)&&e.length?e.forEach(s=>{r||tx(s)||(r=gn("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):tx(t)||(r=gn("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function M1e(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=L1e(s,Gz(s,i),`${e} ${n}`);o&&(r=o)}),r}function j1e(t,e){let n=null;return qc(t)?t.forEach(r=>{n||R1e(r)||(n=gn("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=gn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function F1e(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=j1e(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function z1e(t,e){let n=null;return fU(t==null?void 0:t.methods)?fU(t==null?void 0:t.events)||(n=gn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=gn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function FH(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=z1e(r,`${e}, namespace`);s&&(n=s)}),n}function H1e(t,e,n){let r=null;if(t&&nd(t)){const s=FH(t,e);s&&(r=s);const i=M1e(t,e,n);i&&(r=i)}else r=ve("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function x2(t,e){let n=null;if(t&&nd(t)){const r=FH(t,e);r&&(n=r);const s=F1e(t,e);s&&(n=s)}else n=ve("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function zH(t){return zn(t.protocol,!0)}function W1e(t,e){let n=!1;return t?t&&qc(t)&&t.length&&t.forEach(r=>{n=zH(r)}):n=!0,n}function q1e(t){return typeof t=="number"}function $s(t){return typeof t<"u"&&typeof t!==null}function G1e(t){return!(!t||typeof t!="object"||!t.code||!$R(t.code,!1)||!t.message||!zn(t.message,!1))}function V1e(t){return!(Ar(t)||!zn(t.method,!1))}function K1e(t){return!(Ar(t)||Ar(t.result)&&Ar(t.error)||!$R(t.id,!1)||!zn(t.jsonrpc,!1))}function Q1e(t){return!(Ar(t)||!zn(t.name,!1))}function pU(t,e){return!(!tx(e)||!A1e(t).includes(e))}function J1e(t,e,n){return zn(n,!1)?S1e(t,e).includes(n):!1}function Y1e(t,e,n){return zn(n,!1)?I1e(t,e).includes(n):!1}function gU(t,e,n){let r=null;const s=Z1e(t),i=X1e(e),o=Object.keys(s),a=Object.keys(i),c=mU(Object.keys(t)),l=mU(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=ve("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),uh(o,a)||(r=ve("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=wy(e[d].accounts);h.includes(d)||(r=ve("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(uh(s[d].methods,i[d].methods)?uh(s[d].events,i[d].events)||(r=ve("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=ve("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function Z1e(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function mU(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function X1e(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=wy(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function eEe(t,e){return $R(t,!1)&&t<=e.max&&t>=e.min}function yU(){const t=Pv();return new Promise(e=>{switch(t){case _i.browser:e(tEe());break;case _i.reactNative:e(nEe());break;case _i.node:e(rEe());break;default:e(!0)}})}function tEe(){return gy()&&(navigator==null?void 0:navigator.onLine)}async function nEe(){if(Id()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function rEe(){return!0}function sEe(t){switch(Pv()){case _i.browser:iEe(t);break;case _i.reactNative:oEe(t);break}}function iEe(t){!Id()&&gy()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function oEe(t){Id()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function aEe(){var t;return gy()&&bf()?((t=bf())==null?void 0:t.visibilityState)==="visible":!0}const C2={};class t0{static get(e){return C2[e]}static set(e,n){C2[e]=n}static delete(e){delete C2[e]}}function cEe(t){const e=py.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function lEe({publicKey:t,signature:e,payload:n}){var r;const s=KN(n.method),i=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),o=hEe(n.address),a=n.era==="00"?new Uint8Array([0]):KN(n.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),l=new Uint8Array([c&255,c>>8&255]),u=BigInt(`0x${dEe(n.tip)}`),d=pEe(u),h=new Uint8Array([0,...t,o,...e,...a,...l,...d,...s]),f=fEe(h.length+1);return new Uint8Array([...f,i,...h])}function uEe(t){const e=KN(t),n=twe.blake2b(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function KN(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function dEe(t){return t.startsWith("0x")?t.slice(2):t}function hEe(t){const e=py.decode(t)[0];return e===42?0:e===60?2:1}function fEe(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function pEe(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function gEe(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=cEe(t.transaction.address),r=lEe({publicKey:n,signature:e,payload:t.transaction}),s=Buffer.from(r).toString("hex");return uEe(s)}const mEe="PARSE_ERROR",yEe="INVALID_REQUEST",wEe="METHOD_NOT_FOUND",bEe="INVALID_PARAMS",HH="INTERNAL_ERROR",UR="SERVER_ERROR",vEe=[-32700,-32600,-32601,-32602,-32603],tw={[mEe]:{code:-32700,message:"Parse error"},[yEe]:{code:-32600,message:"Invalid Request"},[wEe]:{code:-32601,message:"Method not found"},[bEe]:{code:-32602,message:"Invalid params"},[HH]:{code:-32603,message:"Internal error"},[UR]:{code:-32e3,message:"Server error"}},WH=UR;function EEe(t){return vEe.includes(t)}function wU(t){return Object.keys(tw).includes(t)?tw[t]:tw[WH]}function _Ee(t){const e=Object.values(tw).find(n=>n.code===t);return e||tw[WH]}function qH(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var GH={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var QN=function(t,e){return QN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},QN(t,e)};function xEe(t,e){QN(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var JN=function(){return JN=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},JN.apply(this,arguments)};function CEe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function AEe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function SEe(t,e){return function(n,r){e(n,r,t)}}function IEe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function TEe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function NEe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function PEe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function kEe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function YN(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function VH(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function OEe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(VH(arguments[e]));return t}function REe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function gb(t){return this instanceof gb?(this.v=t,this):new gb(t)}function DEe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof gb?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function $Ee(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:gb(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function UEe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof YN=="function"?YN(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function BEe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function LEe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function MEe(t){return t&&t.__esModule?t:{default:t}}function jEe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function FEe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const zEe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return JN},__asyncDelegator:$Ee,__asyncGenerator:DEe,__asyncValues:UEe,__await:gb,__awaiter:TEe,__classPrivateFieldGet:jEe,__classPrivateFieldSet:FEe,__createBinding:PEe,__decorate:AEe,__exportStar:kEe,__extends:xEe,__generator:NEe,__importDefault:MEe,__importStar:LEe,__makeTemplateObject:BEe,__metadata:IEe,__param:SEe,__read:VH,__rest:CEe,__spread:OEe,__spreadArrays:REe,__values:YN},Symbol.toStringTag,{value:"Module"})),HEe=Ux(zEe);var ac={},bU;function WEe(){if(bU)return ac;bU=1,Object.defineProperty(ac,"__esModule",{value:!0}),ac.isBrowserCryptoAvailable=ac.getSubtleCrypto=ac.getBrowerCrypto=void 0;function t(){return(Pn==null?void 0:Pn.crypto)||(Pn==null?void 0:Pn.msCrypto)||{}}ac.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}ac.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return ac.isBrowserCryptoAvailable=n,ac}var cc={},vU;function qEe(){if(vU)return cc;vU=1,Object.defineProperty(cc,"__esModule",{value:!0}),cc.isBrowser=cc.isNode=cc.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}cc.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}cc.isNode=e;function n(){return!t()&&!e()}return cc.isBrowser=n,cc}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=HEe;e.__exportStar(WEe(),t),e.__exportStar(qEe(),t)})(GH);function ga(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function ph(t=6){return BigInt(ga(t))}function Mu(t,e,n){return{id:n||ga(),jsonrpc:"2.0",method:t,params:e}}function WC(t,e){return{id:t,jsonrpc:"2.0",result:e}}function qC(t,e,n){return{id:t,jsonrpc:"2.0",error:GEe(e)}}function GEe(t,e){return typeof t>"u"?wU(HH):(typeof t=="string"&&(t=Object.assign(Object.assign({},wU(UR)),{message:t})),EEe(t.code)&&(t=_Ee(t.code)),t)}let VEe=class{},KEe=class extends VEe{constructor(){super()}},QEe=class extends KEe{constructor(e){super()}};const JEe="^https?:",YEe="^wss?:";function ZEe(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function KH(t,e){const n=ZEe(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function EU(t){return KH(t,JEe)}function _U(t){return KH(t,YEe)}function XEe(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function QH(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function BR(t){return QH(t)&&"method"in t}function GC(t){return QH(t)&&(ma(t)||Yi(t))}function ma(t){return"result"in t}function Yi(t){return"error"in t}let ho=class extends QEe{constructor(e){super(e),this.events=new uo.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Mu(e.method,e.params||[],e.id||ph().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Yi(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),GC(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const e_e=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),t_e=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",xU=t=>t.split("?")[0],CU=10,n_e=e_e();let r_e=class{constructor(e){if(this.url=e,this.events=new uo.EventEmitter,this.registering=!1,!_U(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(rl(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!_U(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=GH.isReactNative()?void 0:{rejectUnauthorized:!XEe(e)},i=new n_e(e,[],s);t_e()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?wf(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=qC(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return qH(e,xU(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>CU&&this.events.setMaxListeners(CU)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${xU(this.url)}`));return this.events.emit("register_error",n),n}};var s_e={};const JH="wc",YH=2,ZN="core",Va=`${JH}@2:${ZN}:`,i_e={logger:"error"},o_e={database:":memory:"},a_e="crypto",AU="client_ed25519_seed",c_e=be.ONE_DAY,l_e="keychain",u_e="0.3",d_e="messages",h_e="0.3",SU=be.SIX_HOURS,f_e="publisher",ZH="irn",p_e="error",XH="wss://relay.walletconnect.org",g_e="relayer",cr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},m_e="_subscription",Li={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},y_e=.1,XN="2.21.3",dn={link_mode:"link_mode",relay:"relay"},jE={inbound:"inbound",outbound:"outbound"},w_e="0.3",b_e="WALLETCONNECT_CLIENT_ID",IU="WALLETCONNECT_LINK_MODE_APPS",di={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},v_e="subscription",E_e="0.3",__e="pairing",x_e="0.3",n0={wc_pairingDelete:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:be.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:be.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:be.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:be.ONE_DAY,prompt:!1,tag:0},res:{ttl:be.ONE_DAY,prompt:!1,tag:0}}},Jd={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},mo={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},C_e="history",A_e="0.3",S_e="expirer",Hi={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},I_e="0.3",T_e="verify-api",N_e="https://verify.walletconnect.com",eW="https://verify.walletconnect.org",nw=eW,P_e=`${nw}/v3`,k_e=[N_e,eW],O_e="echo",R_e="https://echo.walletconnect.com",fa={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},dc={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},yo={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},$d={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Ud={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},r0={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},D_e=.1,$_e="event-client",U_e=86400,B_e="https://pulse.walletconnect.org/batch";function L_e(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,w=0,v=p.length;w!==v&&p[w]===0;)w++,g++;for(var b=(v-w)*u+1>>>0,x=new Uint8Array(b);w!==v;){for(var _=p[w],C=0,S=b-1;(_!==0||C<y)&&S!==-1;S--,C++)_+=256*x[S]>>>0,x[S]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");y=C,w++}for(var T=b-y;T!==b&&x[T]===0;)T++;for(var A=c.repeat(g);T<b;++T)A+=t.charAt(x[T]);return A}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,w=0;p[g]===c;)y++,g++;for(var v=(p.length-g)*l+1>>>0,b=new Uint8Array(v);p[g];){var x=n[p.charCodeAt(g)];if(x===255)return;for(var _=0,C=v-1;(x!==0||_<w)&&C!==-1;C--,_++)x+=a*b[C]>>>0,b[C]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");w=_,g++}if(p[g]!==" "){for(var S=v-w;S!==v&&b[S]===0;)S++;for(var T=new Uint8Array(y+(v-S)),A=y;S!==v;)T[A++]=b[S++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var M_e=L_e,j_e=M_e;const tW=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},F_e=t=>new TextEncoder().encode(t),z_e=t=>new TextDecoder().decode(t);class H_e{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class W_e{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return nW(this,e)}}class q_e{constructor(e){this.decoders=e}or(e){return nW(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const nW=(t,e)=>new q_e({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class G_e{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new H_e(e,n,r),this.decoder=new W_e(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const VC=({name:t,prefix:e,encode:n,decode:r})=>new G_e(t,e,n,r),Dv=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=j_e(n,e);return VC({prefix:t,name:e,encode:r,decode:i=>tW(s(i))})},V_e=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},K_e=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Ur=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>VC({prefix:e,name:t,encode(s){return K_e(s,r,n)},decode(s){return V_e(s,r,n,t)}}),Q_e=VC({prefix:"\0",name:"identity",encode:t=>z_e(t),decode:t=>F_e(t)});var J_e=Object.freeze({__proto__:null,identity:Q_e});const Y_e=Ur({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Z_e=Object.freeze({__proto__:null,base2:Y_e});const X_e=Ur({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var exe=Object.freeze({__proto__:null,base8:X_e});const txe=Dv({prefix:"9",name:"base10",alphabet:"0123456789"});var nxe=Object.freeze({__proto__:null,base10:txe});const rxe=Ur({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),sxe=Ur({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ixe=Object.freeze({__proto__:null,base16:rxe,base16upper:sxe});const oxe=Ur({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),axe=Ur({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),cxe=Ur({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),lxe=Ur({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),uxe=Ur({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),dxe=Ur({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),hxe=Ur({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),fxe=Ur({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),pxe=Ur({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var gxe=Object.freeze({__proto__:null,base32:oxe,base32upper:axe,base32pad:cxe,base32padupper:lxe,base32hex:uxe,base32hexupper:dxe,base32hexpad:hxe,base32hexpadupper:fxe,base32z:pxe});const mxe=Dv({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),yxe=Dv({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var wxe=Object.freeze({__proto__:null,base36:mxe,base36upper:yxe});const bxe=Dv({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),vxe=Dv({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Exe=Object.freeze({__proto__:null,base58btc:bxe,base58flickr:vxe});const _xe=Ur({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),xxe=Ur({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Cxe=Ur({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Axe=Ur({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Sxe=Object.freeze({__proto__:null,base64:_xe,base64pad:xxe,base64url:Cxe,base64urlpad:Axe});const rW=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Ixe=rW.reduce((t,e,n)=>(t[n]=e,t),[]),Txe=rW.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Nxe(t){return t.reduce((e,n)=>(e+=Ixe[n],e),"")}function Pxe(t){const e=[];for(const n of t){const r=Txe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const kxe=VC({prefix:"🚀",name:"base256emoji",encode:Nxe,decode:Pxe});var Oxe=Object.freeze({__proto__:null,base256emoji:kxe}),Rxe=sW,TU=128,Dxe=-128,$xe=Math.pow(2,31);function sW(t,e,n){e=e||[],n=n||0;for(var r=n;t>=$xe;)e[n++]=t&255|TU,t/=128;for(;t&Dxe;)e[n++]=t&255|TU,t>>>=7;return e[n]=t|0,sW.bytes=n-r+1,e}var Uxe=eP,Bxe=128,NU=127;function eP(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw eP.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&NU)<<s:(o&NU)*Math.pow(2,s),s+=7}while(o>=Bxe);return eP.bytes=i-r,n}var Lxe=Math.pow(2,7),Mxe=Math.pow(2,14),jxe=Math.pow(2,21),Fxe=Math.pow(2,28),zxe=Math.pow(2,35),Hxe=Math.pow(2,42),Wxe=Math.pow(2,49),qxe=Math.pow(2,56),Gxe=Math.pow(2,63),Vxe=function(t){return t<Lxe?1:t<Mxe?2:t<jxe?3:t<Fxe?4:t<zxe?5:t<Hxe?6:t<Wxe?7:t<qxe?8:t<Gxe?9:10},Kxe={encode:Rxe,decode:Uxe,encodingLength:Vxe},iW=Kxe;const PU=(t,e,n=0)=>(iW.encode(t,e,n),e),kU=t=>iW.encodingLength(t),tP=(t,e)=>{const n=e.byteLength,r=kU(t),s=r+kU(n),i=new Uint8Array(s+n);return PU(t,i,0),PU(n,i,r),i.set(e,s),new Qxe(t,n,e,i)};class Qxe{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const oW=({name:t,code:e,encode:n})=>new Jxe(t,e,n);class Jxe{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?tP(this.code,n):n.then(r=>tP(this.code,r))}else throw Error("Unknown type, must be binary type")}}const aW=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Yxe=oW({name:"sha2-256",code:18,encode:aW("SHA-256")}),Zxe=oW({name:"sha2-512",code:19,encode:aW("SHA-512")});var Xxe=Object.freeze({__proto__:null,sha256:Yxe,sha512:Zxe});const cW=0,eCe="identity",lW=tW,tCe=t=>tP(cW,lW(t)),nCe={code:cW,name:eCe,encode:lW,digest:tCe};var rCe=Object.freeze({__proto__:null,identity:nCe});new TextEncoder,new TextDecoder;const OU={...J_e,...Z_e,...exe,...nxe,...ixe,...gxe,...wxe,...Exe,...Sxe,...Oxe};({...Xxe,...rCe});function uW(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function sCe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?uW(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function dW(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const RU=dW("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),A2=dW("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=sCe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),iCe={utf8:RU,"utf-8":RU,hex:OU.base16,latin1:A2,ascii:A2,binary:A2,...OU};function oCe(t,e="utf8"){const n=iCe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?uW(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var aCe=Object.defineProperty,cCe=(t,e,n)=>e in t?aCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ua=(t,e,n)=>cCe(t,typeof e!="symbol"?e+"":e,n);class lCe{constructor(e,n){this.core=e,this.logger=n,ua(this,"keychain",new Map),ua(this,"name",l_e),ua(this,"version",u_e),ua(this,"initialized",!1),ua(this,"storagePrefix",Va),ua(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),ua(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),ua(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),ua(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=ve("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),ua(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=ts(n,this.name)}get context(){return si(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,UN(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?BN(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ve("NOT_INITIALIZED",this.name);throw new Error(e)}}}var uCe=Object.defineProperty,dCe=(t,e,n)=>e in t?uCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,br=(t,e,n)=>dCe(t,typeof e!="symbol"?e+"":e,n);class hCe{constructor(e,n,r){this.core=e,this.logger=n,br(this,"name",a_e),br(this,"keychain"),br(this,"randomSessionIdentifier",VN()),br(this,"initialized",!1),br(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),br(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),br(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=h5(s);return lz(i.publicKey)}),br(this,"generateKeyPair",()=>{this.isInitialized();const s=i1e();return this.setPrivateKey(s.publicKey,s.privateKey)}),br(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=h5(i),a=this.randomSessionIdentifier;return await dme(a,s,c_e,o)}),br(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=o1e(a,i);return this.setSymKey(c,o)}),br(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||ME(s);return await this.keychain.set(o,s),o}),br(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),br(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),br(this,"encode",async(s,i,o)=>{this.isInitialized();const a=jH(o),c=rl(i);if(oU(a))return l1e(c,o==null?void 0:o.encoding);if(iU(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return a1e({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),br(this,"decode",async(s,i,o)=>{this.isInitialized();const a=d1e(i,o);if(oU(a)){const c=u1e(i,o==null?void 0:o.encoding);return wf(c)}if(iU(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=c1e({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return wf(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),br(this,"getPayloadType",(s,i=qo)=>{const o=pb({encoded:s,encoding:i});return _f(o.type)}),br(this,"getPayloadSenderPublicKey",(s,i=qo)=>{const o=pb({encoded:s,encoding:i});return o.senderPublicKey?ei(o.senderPublicKey,ws):void 0}),this.core=e,this.logger=ts(n,this.name),this.keychain=r||new lCe(this.core,this.logger)}get context(){return si(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(AU)}catch{e=VN(),await this.keychain.set(AU,e)}return oCe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ve("NOT_INITIALIZED",this.name);throw new Error(e)}}}var fCe=Object.defineProperty,pCe=Object.defineProperties,gCe=Object.getOwnPropertyDescriptors,DU=Object.getOwnPropertySymbols,mCe=Object.prototype.hasOwnProperty,yCe=Object.prototype.propertyIsEnumerable,nP=(t,e,n)=>e in t?fCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wCe=(t,e)=>{for(var n in e||(e={}))mCe.call(e,n)&&nP(t,n,e[n]);if(DU)for(var n of DU(e))yCe.call(e,n)&&nP(t,n,e[n]);return t},bCe=(t,e)=>pCe(t,gCe(e)),oi=(t,e,n)=>nP(t,typeof e!="symbol"?e+"":e,n);class vCe extends lfe{constructor(e,n){super(e,n),this.logger=e,this.core=n,oi(this,"messages",new Map),oi(this,"messagesWithoutClientAck",new Map),oi(this,"name",d_e),oi(this,"version",h_e),oi(this,"initialized",!1),oi(this,"storagePrefix",Va),oi(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),oi(this,"set",async(r,s,i)=>{this.isInitialized();const o=ka(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===jE.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,bCe(wCe({},c),{[o]:s}))}return await this.persist(),o}),oi(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),oi(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),oi(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=ka(s);return typeof i[o]<"u"}),oi(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=ka(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),oi(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=ts(e,this.name),this.core=n}get context(){return si(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,UN(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,UN(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?BN(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?BN(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=ve("NOT_INITIALIZED",this.name);throw new Error(e)}}}var ECe=Object.defineProperty,_Ce=Object.defineProperties,xCe=Object.getOwnPropertyDescriptors,$U=Object.getOwnPropertySymbols,CCe=Object.prototype.hasOwnProperty,ACe=Object.prototype.propertyIsEnumerable,rP=(t,e,n)=>e in t?ECe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,q1=(t,e)=>{for(var n in e||(e={}))CCe.call(e,n)&&rP(t,n,e[n]);if($U)for(var n of $U(e))ACe.call(e,n)&&rP(t,n,e[n]);return t},S2=(t,e)=>_Ce(t,xCe(e)),wo=(t,e,n)=>rP(t,typeof e!="symbol"?e+"":e,n);class SCe extends ufe{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,wo(this,"events",new uo.EventEmitter),wo(this,"name",f_e),wo(this,"queue",new Map),wo(this,"publishTimeout",be.toMiliseconds(be.ONE_MINUTE)),wo(this,"initialPublishTimeout",be.toMiliseconds(be.ONE_SECOND*15)),wo(this,"needsTransportRestart",!1),wo(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||SU,c=ex(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||ph().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const y=({id:v})=>{h.opts.id===v&&(this.removeRequestFromQueue(v),this.relayer.events.removeListener(cr.publish,y),g(h))};this.relayer.events.on(cr.publish,y);const w=Lu(new Promise((v,b)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(v).catch(x=>{this.logger.warn(x,x==null?void 0:x.message),b(x)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await w,this.events.removeListener(cr.publish,y)}catch(v){this.queue.set(d,S2(q1({},h),{attempt:1})),this.logger.warn(v,v==null?void 0:v.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await Lu(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),wo(this,"on",(r,s)=>{this.events.on(r,s)}),wo(this,"once",(r,s)=>{this.events.once(r,s)}),wo(this,"off",(r,s)=>{this.events.off(r,s)}),wo(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=ts(n,this.name),this.registerEventListeners()}get context(){return si(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=SU,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:S0(ex().protocol).publish,params:q1({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};Ar((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),Ar((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(cr.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,S2(q1({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(S2(q1({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Ff.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(cr.connection_stalled);return}this.checkQueue()}),this.relayer.on(cr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var ICe=Object.defineProperty,TCe=(t,e,n)=>e in t?ICe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cp=(t,e,n)=>TCe(t,typeof e!="symbol"?e+"":e,n);class NCe{constructor(){cp(this,"map",new Map),cp(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),cp(this,"get",e=>this.map.get(e)||[]),cp(this,"exists",(e,n)=>this.get(e).includes(n)),cp(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),cp(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var PCe=Object.defineProperty,kCe=Object.defineProperties,OCe=Object.getOwnPropertyDescriptors,UU=Object.getOwnPropertySymbols,RCe=Object.prototype.hasOwnProperty,DCe=Object.prototype.propertyIsEnumerable,sP=(t,e,n)=>e in t?PCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,s0=(t,e)=>{for(var n in e||(e={}))RCe.call(e,n)&&sP(t,n,e[n]);if(UU)for(var n of UU(e))DCe.call(e,n)&&sP(t,n,e[n]);return t},I2=(t,e)=>kCe(t,OCe(e)),en=(t,e,n)=>sP(t,typeof e!="symbol"?e+"":e,n);class $Ce extends ffe{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,en(this,"subscriptions",new Map),en(this,"topicMap",new NCe),en(this,"events",new uo.EventEmitter),en(this,"name",v_e),en(this,"version",E_e),en(this,"pending",new Map),en(this,"cached",[]),en(this,"initialized",!1),en(this,"storagePrefix",Va),en(this,"subscribeTimeout",be.toMiliseconds(be.ONE_MINUTE)),en(this,"initialSubscribeTimeout",be.toMiliseconds(be.ONE_SECOND*15)),en(this,"clientId"),en(this,"batchSubscribeTopicsLimit",500),en(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),en(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=ex(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),en(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),en(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),en(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),en(this,"on",(r,s)=>{this.events.on(r,s)}),en(this,"once",(r,s)=>{this.events.once(r,s)}),en(this,"off",(r,s)=>{this.events.off(r,s)}),en(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),en(this,"start",async()=>{await this.onConnect()}),en(this,"stop",async()=>{await this.onDisconnect()}),en(this,"restart",async()=>{await this.restore(),await this.onRestart()}),en(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),en(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Ff.pulse,async()=>{await this.checkPending()}),this.events.on(di.created,async r=>{const s=di.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(di.deleted,async r=>{const s=di.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=ts(n,this.name),this.clientId=""}get context(){return si(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=ex(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=gn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===dn.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:S0(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===dn.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},be.toMiliseconds(be.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(di.created,d),u(h.id))};this.events.on(di.created,d);try{const h=await Lu(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(di.created,d),u(h)}catch{}}),l=await Lu(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(cr.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:S0(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Lu(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(cr.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:S0(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await Lu(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(cr.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:S0(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,I2(s0({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,s0({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,s0({},n)),this.topicMap.set(n.topic,e),this.events.emit(di.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=ve("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(di.deleted,I2(s0({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(di.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(di.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=ve("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>I2(s0({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await Twe(be.toMiliseconds(be.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=ve("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return ka(e+await this.getClientId())}}var UCe=Object.defineProperty,BU=Object.getOwnPropertySymbols,BCe=Object.prototype.hasOwnProperty,LCe=Object.prototype.propertyIsEnumerable,iP=(t,e,n)=>e in t?UCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,LU=(t,e)=>{for(var n in e||(e={}))BCe.call(e,n)&&iP(t,n,e[n]);if(BU)for(var n of BU(e))LCe.call(e,n)&&iP(t,n,e[n]);return t},It=(t,e,n)=>iP(t,typeof e!="symbol"?e+"":e,n);class MCe extends dfe{constructor(e){super(e),It(this,"protocol","wc"),It(this,"version",2),It(this,"core"),It(this,"logger"),It(this,"events",new uo.EventEmitter),It(this,"provider"),It(this,"messages"),It(this,"subscriber"),It(this,"publisher"),It(this,"name",g_e),It(this,"transportExplicitlyClosed",!1),It(this,"initialized",!1),It(this,"connectionAttemptInProgress",!1),It(this,"relayUrl"),It(this,"projectId"),It(this,"packageName"),It(this,"bundleId"),It(this,"hasExperiencedNetworkDisruption",!1),It(this,"pingTimeout"),It(this,"heartBeatTimeout",be.toMiliseconds(be.THIRTY_SECONDS+be.FIVE_SECONDS)),It(this,"reconnectTimeout"),It(this,"connectPromise"),It(this,"reconnectInProgress",!1),It(this,"requestsInFlight",[]),It(this,"connectTimeout",be.toMiliseconds(be.ONE_SECOND*15)),It(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||ph().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),It(this,"resetPingTimeout",()=>{J_()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),It(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),It(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(cr.connect)}),It(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),It(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(cr.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),It(this,"registerProviderListeners",()=>{this.provider.on(Li.payload,this.onPayloadHandler),this.provider.on(Li.connect,this.onConnectHandler),this.provider.on(Li.disconnect,this.onDisconnectHandler),this.provider.on(Li.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?ts(e.logger,this.name):Sv(ly({level:e.logger||p_e})),this.messages=new vCe(this.logger,e.core),this.subscriber=new $Ce(this,this.logger),this.publisher=new SCe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||XH,this.projectId=e.projectId,hwe()?this.packageName=I5():fwe()&&(this.bundleId=I5()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e==null?void 0:e.message))}get context(){return si(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:dn.relay},jE.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(di.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(di.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,LU({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Lu(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await yU())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=Vn(be.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(cr.message,e),await this.recordMessageEvent(e,jE.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(Li.disconnect,i),await Lu(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Li.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Li.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Li.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,be.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(J_())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new ho(new r_e(wwe({sdkVersion:XN,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),BR(e)){if(!e.method.endsWith(m_e))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:dn.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(LU({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else GC(e)&&this.events.emit(cr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,jE.inbound),this.events.emit(cr.message,e))}async acknowledgePayload(e){const n=WC(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Li.payload,this.onPayloadHandler),this.provider.off(Li.connect,this.onConnectHandler),this.provider.off(Li.disconnect,this.onDisconnectHandler),this.provider.off(Li.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await yU();sEe(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Ff.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&aEe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(cr.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},be.toMiliseconds(y_e)))))}isInitialized(){if(!this.initialized){const{message:e}=ve("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function jCe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function MU(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function jU(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const FCe="[object RegExp]",zCe="[object String]",HCe="[object Number]",WCe="[object Boolean]",FU="[object Arguments]",qCe="[object Symbol]",GCe="[object Date]",VCe="[object Map]",KCe="[object Set]",QCe="[object Array]",JCe="[object Function]",YCe="[object ArrayBuffer]",T2="[object Object]",ZCe="[object Error]",XCe="[object DataView]",eAe="[object Uint8Array]",tAe="[object Uint8ClampedArray]",nAe="[object Uint16Array]",rAe="[object Uint32Array]",sAe="[object BigUint64Array]",iAe="[object Int8Array]",oAe="[object Int16Array]",aAe="[object Int32Array]",cAe="[object BigInt64Array]",lAe="[object Float32Array]",uAe="[object Float64Array]";function dAe(){}function zU(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function hAe(t,e,n){return I0(t,e,void 0,void 0,void 0,void 0,n)}function I0(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return rw(t,e,i,o)}return rw(t,e,i,o)}function rw(t,e,n,r){if(Object.is(t,e))return!0;let s=jU(t),i=jU(e);if(s===FU&&(s=T2),i===FU&&(i=T2),s!==i)return!1;switch(s){case zCe:return t.toString()===e.toString();case HCe:{const c=t.valueOf(),l=e.valueOf();return jCe(c,l)}case WCe:case GCe:case qCe:return Object.is(t.valueOf(),e.valueOf());case FCe:return t.source===e.source&&t.flags===e.flags;case JCe:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case VCe:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!I0(l,e.get(c),c,t,e,n,r))return!1;return!0}case KCe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>I0(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case QCe:case eAe:case tAe:case nAe:case rAe:case sAe:case iAe:case oAe:case aAe:case cAe:case lAe:case uAe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!I0(t[c],e[c],c,t,e,n,r))return!1;return!0}case YCe:return t.byteLength!==e.byteLength?!1:rw(new Uint8Array(t),new Uint8Array(e),n,r);case XCe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:rw(new Uint8Array(t),new Uint8Array(e),n,r);case ZCe:return t.name===e.name&&t.message===e.message;case T2:{if(!(rw(t.constructor,e.constructor,n,r)||zU(t)&&zU(e)))return!1;const c=[...Object.keys(t),...MU(t)],l=[...Object.keys(e),...MU(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!I0(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function fAe(t,e){return hAe(t,e,dAe)}var pAe=Object.defineProperty,HU=Object.getOwnPropertySymbols,gAe=Object.prototype.hasOwnProperty,mAe=Object.prototype.propertyIsEnumerable,oP=(t,e,n)=>e in t?pAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,WU=(t,e)=>{for(var n in e||(e={}))gAe.call(e,n)&&oP(t,n,e[n]);if(HU)for(var n of HU(e))mAe.call(e,n)&&oP(t,n,e[n]);return t},Ns=(t,e,n)=>oP(t,typeof e!="symbol"?e+"":e,n);class Wf extends hfe{constructor(e,n,r,s=Va,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Ns(this,"map",new Map),Ns(this,"version",w_e),Ns(this,"cached",[]),Ns(this,"initialized",!1),Ns(this,"getKey"),Ns(this,"storagePrefix",Va),Ns(this,"recentlyDeleted",[]),Ns(this,"recentlyDeletedLimit",200),Ns(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Ar(o)?this.map.set(this.getKey(o),o):$1e(o)?this.map.set(o.id,o):U1e(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Ns(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Ns(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Ns(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>fAe(a[c],o[c]))):this.values)),Ns(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=WU(WU({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Ns(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=ts(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return si(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=ve("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=ve("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=ve("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ve("NOT_INITIALIZED",this.name);throw new Error(e)}}}var yAe=Object.defineProperty,wAe=(t,e,n)=>e in t?yAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pt=(t,e,n)=>wAe(t,typeof e!="symbol"?e+"":e,n);class bAe{constructor(e,n){this.core=e,this.logger=n,pt(this,"name",__e),pt(this,"version",x_e),pt(this,"events",new iR),pt(this,"pairings"),pt(this,"initialized",!1),pt(this,"storagePrefix",Va),pt(this,"ignoredPayloadTypes",[Wc]),pt(this,"registeredMethods",[]),pt(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),pt(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),pt(this,"create",async r=>{this.isInitialized();const s=VN(),i=await this.core.crypto.setSymKey(s),o=Vn(be.FIVE_MINUTES),a={protocol:ZH},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=cU({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(Jd.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),pt(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[fa.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=aU(r.uri);s.props.properties.topic=i,s.addTrace(fa.pairing_uri_validation_success),s.addTrace(fa.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(fa.existing_pairing),u.active)throw s.setError(dc.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(fa.pairing_not_expired)}const d=c||Vn(be.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(fa.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(Jd.create,h),s.addTrace(fa.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(fa.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(dc.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(dc.subscribe_pairing_topic_failure),f}return s.addTrace(fa.subscribe_pairing_topic_success),h}),pt(this,"activate",async({topic:r})=>{this.isInitialized();const s=Vn(be.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),pt(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Wd();this.events.once(Dt("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),pt(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),pt(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),pt(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),pt(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",gn("USER_DISCONNECTED")),await this.deletePairing(s))}),pt(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return cU({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),pt(this,"sendRequest",async(r,s,i)=>{const o=Mu(s,i),a=await this.core.crypto.encode(r,o),c=n0[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),pt(this,"sendResult",async(r,s,i)=>{const o=WC(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=n0[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),pt(this,"sendError",async(r,s,i)=>{const o=qC(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=n0[c]?n0[c].res:n0.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),pt(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,gn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),pt(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Ql(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),pt(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),pt(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),pt(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(Jd.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),pt(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{ma(s)?this.events.emit(Dt("pairing_ping",i),{}):Yi(s)&&this.events.emit(Dt("pairing_ping",i),{error:s.error})},500)}),pt(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(Jd.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),pt(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=gn("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),pt(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(gn("WC_METHOD_UNSUPPORTED",r))}),pt(this,"isValidPair",(r,s)=>{var i;if(!$s(r)){const{message:a}=ve("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(dc.malformed_pairing_uri),new Error(a)}if(!D1e(r.uri)){const{message:a}=ve("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(dc.malformed_pairing_uri),new Error(a)}const o=aU(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=ve("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(dc.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=ve("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(dc.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&be.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(dc.pairing_expired);const{message:a}=ve("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),pt(this,"isValidPing",async r=>{if(!$s(r)){const{message:i}=ve("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),pt(this,"isValidDisconnect",async r=>{if(!$s(r)){const{message:i}=ve("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),pt(this,"isValidPairingTopic",async r=>{if(!zn(r,!1)){const{message:s}=ve("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=ve("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Ql(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=ve("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=ts(n,this.name),this.pairings=new Wf(this.core,this.logger,this.name,this.storagePrefix)}get context(){return si(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ve("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(cr.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==dn.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);BR(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):GC(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Hi.expired,async e=>{const{topic:n}=Jz(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(Jd.expire,{topic:n}))})}}var vAe=Object.defineProperty,EAe=(t,e,n)=>e in t?vAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vr=(t,e,n)=>EAe(t,typeof e!="symbol"?e+"":e,n);class _Ae extends cfe{constructor(e,n){super(e,n),this.core=e,this.logger=n,vr(this,"records",new Map),vr(this,"events",new uo.EventEmitter),vr(this,"name",C_e),vr(this,"version",A_e),vr(this,"cached",[]),vr(this,"initialized",!1),vr(this,"storagePrefix",Va),vr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),vr(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:Vn(be.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(mo.created,o)}),vr(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Yi(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(mo.updated,s))}),vr(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),vr(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(mo.deleted,i)}}),this.persist()}),vr(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),vr(this,"on",(r,s)=>{this.events.on(r,s)}),vr(this,"once",(r,s)=>{this.events.once(r,s)}),vr(this,"off",(r,s)=>{this.events.off(r,s)}),vr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=ts(n,this.name)}get context(){return si(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Mu(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=ve("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(mo.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=ve("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(mo.created,e=>{const n=mo.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(mo.updated,e=>{const n=mo.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(mo.deleted,e=>{const n=mo.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(Ff.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{be.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(mo.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ve("NOT_INITIALIZED",this.name);throw new Error(e)}}}var xAe=Object.defineProperty,CAe=(t,e,n)=>e in t?xAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qr=(t,e,n)=>CAe(t,typeof e!="symbol"?e+"":e,n);class AAe extends pfe{constructor(e,n){super(e,n),this.core=e,this.logger=n,qr(this,"expirations",new Map),qr(this,"events",new uo.EventEmitter),qr(this,"name",S_e),qr(this,"version",I_e),qr(this,"cached",[]),qr(this,"initialized",!1),qr(this,"storagePrefix",Va),qr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),qr(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),qr(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(Hi.created,{target:i,expiration:o})}),qr(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),qr(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Hi.deleted,{target:s,expiration:i})}}),qr(this,"on",(r,s)=>{this.events.on(r,s)}),qr(this,"once",(r,s)=>{this.events.once(r,s)}),qr(this,"off",(r,s)=>{this.events.off(r,s)}),qr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=ts(n,this.name)}get context(){return si(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return bwe(e);if(typeof e=="number")return vwe(e);const{message:n}=ve("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Hi.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=ve("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=ve("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;be.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(Hi.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(Ff.pulse,()=>this.checkExpirations()),this.events.on(Hi.created,e=>{const n=Hi.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Hi.expired,e=>{const n=Hi.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Hi.deleted,e=>{const n=Hi.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ve("NOT_INITIALIZED",this.name);throw new Error(e)}}}var SAe=Object.defineProperty,IAe=(t,e,n)=>e in t?SAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jn=(t,e,n)=>IAe(t,typeof e!="symbol"?e+"":e,n);class TAe extends gfe{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,jn(this,"name",T_e),jn(this,"abortController"),jn(this,"isDevEnv"),jn(this,"verifyUrlV3",P_e),jn(this,"storagePrefix",Va),jn(this,"version",YH),jn(this,"publicKey"),jn(this,"fetchPromise"),jn(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&be.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),jn(this,"register",async s=>{if(!gy()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=bf(),u=this.startAbortTimer(be.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",y),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const y=w=>{if(w.data&&typeof w.data=="string")try{const v=JSON.parse(w.data);if(v.type==="verify_attestation"){if(NN(v.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",y),h(v.attestation===null?"":v.attestation)}}catch(v){this.logger.warn(v)}};l.body.appendChild(g),window.addEventListener("message",y,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),jn(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(NN(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),jn(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(be.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),jn(this,"getVerifyUrl",s=>{let i=s||nw;return k_e.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${nw}`),i=nw),i}),jn(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(be.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),jn(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),jn(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),jn(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),jn(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),jn(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),jn(this,"validateAttestation",(s,i)=>{const o=f1e(s,i.publicKey),a={hasExpired:be.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=ts(n,this.name),this.abortController=new AbortController,this.isDevEnv=_R(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return si(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),be.toMiliseconds(e))}}var NAe=Object.defineProperty,PAe=(t,e,n)=>e in t?NAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qU=(t,e,n)=>PAe(t,typeof e!="symbol"?e+"":e,n);class kAe extends mfe{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,qU(this,"context",O_e),qU(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${R_e}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=ts(n,this.context)}}var OAe=Object.defineProperty,GU=Object.getOwnPropertySymbols,RAe=Object.prototype.hasOwnProperty,DAe=Object.prototype.propertyIsEnumerable,aP=(t,e,n)=>e in t?OAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,i0=(t,e)=>{for(var n in e||(e={}))RAe.call(e,n)&&aP(t,n,e[n]);if(GU)for(var n of GU(e))DAe.call(e,n)&&aP(t,n,e[n]);return t},tr=(t,e,n)=>aP(t,typeof e!="symbol"?e+"":e,n);class $Ae extends yfe{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,tr(this,"context",$_e),tr(this,"storagePrefix",Va),tr(this,"storageVersion",D_e),tr(this,"events",new Map),tr(this,"shouldPersist",!1),tr(this,"init",async()=>{if(!_R())try{const s={eventId:N5(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:Kz(this.core.relayer.protocol,this.core.relayer.version,XN)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),tr(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=N5(),u=this.core.projectId||"",d=Date.now(),h=i0({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),tr(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return i0(i0({},a),this.setMethods(a.eventId))}),tr(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),tr(this,"setEventListeners",()=>{this.core.heartbeat.on(Ff.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{be.fromMiliseconds(Date.now())-be.fromMiliseconds(s.timestamp)>U_e&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),tr(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),tr(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),tr(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),tr(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),tr(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,i0(i0({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),tr(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),tr(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${B_e}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${XN}${i}`,{method:"POST",body:JSON.stringify(s)})}),tr(this,"getAppDomain",()=>Vz().url),this.logger=ts(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var UAe=Object.defineProperty,VU=Object.getOwnPropertySymbols,BAe=Object.prototype.hasOwnProperty,LAe=Object.prototype.propertyIsEnumerable,cP=(t,e,n)=>e in t?UAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,KU=(t,e)=>{for(var n in e||(e={}))BAe.call(e,n)&&cP(t,n,e[n]);if(VU)for(var n of VU(e))LAe.call(e,n)&&cP(t,n,e[n]);return t},nn=(t,e,n)=>cP(t,typeof e!="symbol"?e+"":e,n);let MAe=class hW extends sfe{constructor(e){var n;super(e),nn(this,"protocol",JH),nn(this,"version",YH),nn(this,"name",ZN),nn(this,"relayUrl"),nn(this,"projectId"),nn(this,"customStoragePrefix"),nn(this,"events",new uo.EventEmitter),nn(this,"logger"),nn(this,"heartbeat"),nn(this,"relayer"),nn(this,"crypto"),nn(this,"storage"),nn(this,"history"),nn(this,"expirer"),nn(this,"pairing"),nn(this,"verify"),nn(this,"echoClient"),nn(this,"linkModeSupportedApps"),nn(this,"eventClient"),nn(this,"initialized",!1),nn(this,"logChunkController"),nn(this,"on",(a,c)=>this.events.on(a,c)),nn(this,"once",(a,c)=>this.events.once(a,c)),nn(this,"off",(a,c)=>this.events.off(a,c)),nn(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),nn(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:dn.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||XH,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=ly({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:i_e.logger,name:ZN}),{logger:i,chunkLoggerController:o}=aR({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=ts(i,this.name),this.heartbeat=new Gde,this.crypto=new hCe(this,this.logger,e==null?void 0:e.keychain),this.history=new _Ae(this,this.logger),this.expirer=new AAe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new The(KU(KU({},o_e),e==null?void 0:e.storageOptions)),this.relayer=new MCe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new bAe(this,this.logger),this.verify=new TAe(this,this.logger,this.storage),this.echoClient=new kAe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new $Ae(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new hW(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(b_e,r),n}get context(){return si(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(IU,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(IU)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&s_e.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const jAe=MAe,fW="wc",pW=2,gW="client",LR=`${fW}@${pW}:${gW}:`,N2={name:gW,logger:"error"},QU="WALLETCONNECT_DEEPLINK_CHOICE",FAe="proposal",JU="Proposal expired",zAe="session",lp=be.SEVEN_DAYS,HAe="engine",nr={wc_sessionPropose:{req:{ttl:be.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1104},res:{ttl:be.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1106},res:{ttl:be.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:be.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:be.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1112},res:{ttl:be.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1114},res:{ttl:be.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:be.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:be.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1119}}},P2={min:be.FIVE_MINUTES,max:be.SEVEN_DAYS},da={idle:"IDLE",active:"ACTIVE"},WAe={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},qAe="request",GAe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],VAe="wc",KAe="auth",QAe="authKeys",JAe="pairingTopics",YAe="requests",KC=`${VAe}@${1.5}:${KAe}:`,FE=`${KC}:PUB_KEY`;var ZAe=Object.defineProperty,XAe=Object.defineProperties,eSe=Object.getOwnPropertyDescriptors,YU=Object.getOwnPropertySymbols,tSe=Object.prototype.hasOwnProperty,nSe=Object.prototype.propertyIsEnumerable,lP=(t,e,n)=>e in t?ZAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ln=(t,e)=>{for(var n in e||(e={}))tSe.call(e,n)&&lP(t,n,e[n]);if(YU)for(var n of YU(e))nSe.call(e,n)&&lP(t,n,e[n]);return t},Ps=(t,e)=>XAe(t,eSe(e)),fe=(t,e,n)=>lP(t,typeof e!="symbol"?e+"":e,n);class rSe extends Efe{constructor(e){super(e),fe(this,"name",HAe),fe(this,"events",new iR),fe(this,"initialized",!1),fe(this,"requestQueue",{state:da.idle,queue:[]}),fe(this,"sessionRequestQueue",{state:da.idle,queue:[]}),fe(this,"requestQueueDelay",be.ONE_SECOND),fe(this,"expectedPairingMethodMap",new Map),fe(this,"recentlyDeletedMap",new Map),fe(this,"recentlyDeletedLimit",200),fe(this,"relayMessageCache",[]),fe(this,"pendingSessions",new Map),fe(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(nr)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},be.toMiliseconds(this.requestQueueDelay)))}),fe(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=Ps(ln({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=N1e(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const C=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=C.active}}catch(C){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),C}if(!u||!h){const{topic:C,uri:S}=await this.client.core.pairing.create();u=C,d=S}if(!u){const{message:C}=ve("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(C)}const f=await this.client.core.crypto.generateKeyPair(),p=nr.wc_sessionPropose.req.ttl||be.FIVE_MINUTES,g=Vn(p),y=Ps(ln(ln({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:ZH}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:ga()}),w=Dt("session_connect",y.id),{reject:v,resolve:b,done:x}=Wd(p,JU),_=({id:C})=>{C===y.id&&(this.client.events.off("proposal_expire",_),this.pendingSessions.delete(y.id),this.events.emit(w,{error:{message:JU,code:0}}))};return this.client.events.on("proposal_expire",_),this.events.once(w,({error:C,session:S})=>{this.client.events.off("proposal_expire",_),C?v(C):S&&b(S)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:y,throwOnFailedPublish:!0,clientRpcId:y.id}),await this.setProposal(y.id,y),{uri:d,approval:x}}),fe(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),fe(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[yo.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(A){throw o.setError($d.no_internet_connection),A}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(A){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError($d.proposal_not_found),A}try{await this.isValidApprove(n)}catch(A){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError($d.session_approve_namespace_validation_failure),A}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:y,optionalNamespaces:w}=f;let v=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});v||(v=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:yo.session_approve_started,properties:{topic:p,trace:[yo.session_approve_started,yo.session_namespaces_validation_success]}}));const b=await this.client.core.crypto.generateKeyPair(),x=g.publicKey,_=await this.client.core.crypto.generateSharedKey(b,x),C=ln(ln(ln({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:b,metadata:this.client.metadata},expiry:Vn(lp)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),S=dn.relay;v.addTrace(yo.subscribing_session_topic);try{await this.client.core.relayer.subscribe(_,{transportType:S})}catch(A){throw v.setError($d.subscribe_session_topic_failure),A}v.addTrace(yo.subscribe_session_topic_success);const T=Ps(ln({},C),{topic:_,requiredNamespaces:y,optionalNamespaces:w,pairingTopic:p,acknowledged:!1,self:C.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:b,transportType:dn.relay});await this.client.session.set(_,T),v.addTrace(yo.store_session);try{v.addTrace(yo.publishing_session_settle),await this.sendRequest({topic:_,method:"wc_sessionSettle",params:C,throwOnFailedPublish:!0}).catch(A=>{throw v==null||v.setError($d.session_settle_publish_failure),A}),v.addTrace(yo.session_settle_publish_success),v.addTrace(yo.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:b},throwOnFailedPublish:!0}).catch(A=>{throw v==null||v.setError($d.session_approve_publish_failure),A}),v.addTrace(yo.session_approve_publish_success)}catch(A){throw this.client.logger.error(A),this.client.session.delete(_,gn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(_),A}return this.client.core.eventClient.deleteEvent({eventId:v.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(_,Vn(lp)),{topic:_,acknowledged:()=>Promise.resolve(this.client.session.get(_))}}),fe(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&await this.sendError({id:r,topic:i,error:s,rpcOpts:nr.wc_sessionPropose.reject}),await this.deleteProposal(r)}),fe(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=Wd(),c=ga(),l=ph().toString(),u=this.client.session.get(r).namespaces;return this.events.once(Dt("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),fe(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=ga(),{done:i,resolve:o,reject:a}=Wd();return this.events.once(Dt("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,Vn(lp)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),fe(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:s,topic:i,expiry:o=nr.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===dn.relay&&await this.confirmOnlineStateOrThrow();const c=ga(),l=ph().toString(),{done:u,resolve:d,reject:h}=Wd(o,"Request expired. Please try again.");this.events.once(Dt("session_request",c),({error:y,result:w})=>{y?h(y):d(w)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:Ps(ln({},s),{expiryTimestamp:Vn(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:Ps(ln({},s),{expiryTimestamp:Vn(o)}),chainId:r};return await Promise.all([new Promise(async y=>{await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,g)}).catch(w=>h(w)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),y()}),new Promise(async y=>{var w;if(!((w=a.sessionConfig)!=null&&w.disableDeepLink)){const v=await Cwe(this.client.core.storage,QU);await Ewe({id:c,topic:i,wcDeepLink:v})}y()}),u()]).then(y=>y[2])}),fe(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===dn.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);ma(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):Yi(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),fe(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=ga(),i=ph().toString(),{done:o,resolve:a,reject:c}=Wd();this.events.once(Dt("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),fe(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=ph().toString(),a=ga();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),fe(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:gn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=ve("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),fe(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>O1e(r,n)))),fe(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),fe(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?dn.link_mode:dn.relay;o===dn.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:y}=n,w=[...n.resources||[]],{topic:v,uri:b}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:v,uri:b}});const x=await this.client.core.crypto.generateKeyPair(),_=ME(x);if(await Promise.all([this.client.auth.authKeys.set(FE,{responseTopic:_,publicKey:x}),this.client.auth.pairingTopics.set(_,{topic:_,pairingTopic:v})]),await this.client.core.relayer.subscribe(_,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${v}`),g.length>0){const{namespace:$}=pg(a[0]);let M=Mbe($,"request",g);LE(w)&&(M=Fbe(M,w.pop())),w.push(M)}const C=y&&y>nr.wc_sessionAuthenticate.req.ttl?y:nr.wc_sessionAuthenticate.req.ttl,S={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:w},requester:{publicKey:x,metadata:this.client.metadata},expiryTimestamp:Vn(C)},T={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},A={requiredNamespaces:{},optionalNamespaces:T,relays:[{protocol:"irn"}],pairingTopic:v,proposer:{publicKey:x,metadata:this.client.metadata},expiryTimestamp:Vn(nr.wc_sessionPropose.req.ttl),id:ga()},{done:P,resolve:R,reject:j}=Wd(C,"Request expired"),z=ga(),K=Dt("session_connect",A.id),I=Dt("session_request",z),N=async({error:$,session:M})=>{this.events.off(I,L),$?j($):M&&R({session:M})},L=async $=>{var M,G,X;if(await this.deletePendingAuthRequest(z,{message:"fulfilled",code:0}),$.error){const le=gn("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return $.error.code===le.code?void 0:(this.events.off(K,N),j($.error.message))}await this.deleteProposal(A.id),this.events.off(K,N);const{cacaos:ie,responder:se}=$.result,ce=[],ye=[];for(const le of ie){await j5({cacao:le,projectId:this.client.core.projectId})||(this.client.logger.error(le,"Signature verification failed"),j(gn("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:V}=le,oe=LE(V.resources),Ie=[LN(V.iss)],de=Y_(V.iss);if(oe){const ge=F5(oe),Pe=z5(oe);ce.push(...ge),Ie.push(...Pe)}for(const ge of Ie)ye.push(`${ge}:${de}`)}const Y=await this.client.core.crypto.generateSharedKey(x,se.publicKey);let ne;ce.length>0&&(ne={topic:Y,acknowledged:!0,self:{publicKey:x,metadata:this.client.metadata},peer:se,controller:se.publicKey,expiry:Vn(lp),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:v,namespaces:hU([...new Set(ce)],[...new Set(ye)]),transportType:o},await this.client.core.relayer.subscribe(Y,{transportType:o}),await this.client.session.set(Y,ne),v&&await this.client.core.pairing.updateMetadata({topic:v,metadata:se.metadata}),ne=this.client.session.get(Y)),(M=this.client.metadata.redirect)!=null&&M.linkMode&&(G=se.metadata.redirect)!=null&&G.linkMode&&(X=se.metadata.redirect)!=null&&X.universal&&r&&(this.client.core.addLinkModeSupportedApp(se.metadata.redirect.universal),this.client.session.update(Y,{transportType:dn.link_mode})),R({auths:ie,session:ne})};this.events.once(K,N),this.events.once(I,L);let U;try{if(i){const $=Mu("wc_sessionAuthenticate",S,z);this.client.core.history.set(v,$);const M=await this.client.core.crypto.encode("",$,{type:Rv,encoding:ru});U=W1(r,v,M)}else await Promise.all([this.sendRequest({topic:v,method:"wc_sessionAuthenticate",params:S,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:z}),this.sendRequest({topic:v,method:"wc_sessionPropose",params:A,expiry:nr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:A.id})])}catch($){throw this.events.off(K,N),this.events.off(I,L),$}return await this.setProposal(A.id,A),await this.setAuthRequest(z,{request:Ps(ln({},S),{verifyContext:{}}),pairingTopic:v,transportType:o}),{uri:U??b,response:P}}),fe(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Ud.authenticated_session_approve_started]}});try{this.isInitialized()}catch(y){throw i.setError(r0.no_internet_connection),y}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(r0.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||dn.relay;a===dn.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=ME(c),d={type:Wc,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const y of s){if(!await j5({cacao:y,projectId:this.client.core.projectId})){i.setError(r0.invalid_cacao);const _=gn("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:_,encodeOpts:d}),new Error(_.message)}i.addTrace(Ud.cacaos_verified);const{p:w}=y,v=LE(w.resources),b=[LN(w.iss)],x=Y_(w.iss);if(v){const _=F5(v),C=z5(v);h.push(..._),b.push(...C)}for(const _ of b)f.push(`${_}:${x}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(Ud.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Vn(lp),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:hU([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(Ud.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(y){throw i.setError(r0.subscribe_authenticated_session_topic_failure),y}i.addTrace(Ud.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(Ud.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Ud.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(y){throw i.setError(r0.authenticated_session_approve_publish_failure),y}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),fe(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===dn.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=ME(o),l={type:Wc,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:nr.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),fe(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return dH(r,s)}),fe(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),fe(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),fe(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,gn("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(QU).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,gn("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=da.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),fe(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError($d.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,gn("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),fe(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=da.idle,this.client.events.emit("session_request_expire",{id:n}))}),fe(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),fe(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),fe(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,Vn(nr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),fe(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=dn.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),fe(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||Vn(nr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),fe(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=Mu(s,i,c);let f;const p=!!u;try{const w=p?ru:qo;f=await this.client.core.crypto.encode(r,h,{encoding:w})}catch(w){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),w}let g;if(GAe.includes(s)){const w=ka(JSON.stringify(h)),v=ka(f);g=await this.client.core.verify.register({id:v,decryptedId:w})}const y=nr[s].req;if(y.attestation=g,o&&(y.ttl=o),a&&(y.id=a),this.client.core.history.set(r,h),p){const w=W1(u,r,f);await global.Linking.openURL(w,this.client.name)}else{const w=nr[s].req;o&&(w.ttl=o),a&&(w.id=a),w.tvf=Ps(ln({},d),{correlationId:h.id}),l?(w.internal=Ps(ln({},w.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,w)):this.client.core.relayer.publish(r,f,w).catch(v=>this.client.logger.error(v))}return h.id}),fe(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=WC(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?ru:qo;u=await this.client.core.crypto.encode(s,l,Ps(ln({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{f=this.getTVFParams(r,p.params,i)}catch(g){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${g==null?void 0:g.message}`)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=W1(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=nr[p].res;g.tvf=Ps(ln({},f),{correlationId:r}),o?(g.internal=Ps(ln({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(y=>this.client.logger.error(y))}await this.client.core.history.resolve(l)}),fe(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=qC(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?ru:qo;u=await this.client.core.crypto.encode(s,l,Ps(ln({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=W1(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||nr[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),fe(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Ql(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Ql(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),fe(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),fe(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),fe(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===da.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=da.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=da.idle}),fe(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),fe(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),fe(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=ve("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),fe(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),fe(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(dc.proposal_listener_not_found)),this.isValidConnect(ln({},s.params));const u=a.expiryTimestamp||Vn(nr.wc_sessionPropose.req.ttl),d=ln({id:c,pairingTopic:r,expiryTimestamp:u,attestation:i,encryptedId:o},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:ka(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(fa.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:nr.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),fe(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(ma(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Yi(r)){await this.deleteProposal(i);const o=Dt("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),fe(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(y=>y.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=Ps(ln(ln(ln({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:dn.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(Dt("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),fe(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;ma(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Dt("session_approve",s),{})):Yi(r)&&(await this.client.session.delete(n,gn("USER_DISCONNECTED")),this.events.emit(Dt("session_approve",s),{error:r.error}))}),fe(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=t0.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:gn("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(ln({topic:n},s));try{t0.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0})}catch(c){throw t0.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),fe(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),fe(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=Dt("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);ma(r)?this.events.emit(Dt("session_update",s),{}):Yi(r)&&this.events.emit(Dt("session_update",s),{error:r.error})}),fe(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,Vn(lp)),await this.sendResult({id:s,topic:n,result:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),fe(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=Dt("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);ma(r)?this.events.emit(Dt("session_extend",s),{}):Yi(r)&&this.events.emit(Dt("session_extend",s),{error:r.error})}),fe(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),fe(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=Dt("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);ma(r)?this.events.emit(Dt("session_ping",s),{}):Yi(r)&&this.events.emit(Dt("session_ping",s),{error:r.error})},500)}),fe(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(cr.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:gn("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),fe(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(ln({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:ka(JSON.stringify(Mu("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===dn.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),fe(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=Dt("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);ma(r)?this.events.emit(Dt("session_request",s),{result:r.result}):Yi(r)&&this.events.emit(Dt("session_request",s),{error:r.error})}),fe(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=t0.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(ln({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),t0.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),fe(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),ma(r)?this.events.emit(Dt("session_request",s),{result:r.result}):Yi(r)&&this.events.emit(Dt("session_request",s),{error:r.error})}),fe(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:ka(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===dn.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:Wc,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:nr.wc_sessionAuthenticate.autoReject,appLink:h})}}),fe(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),fe(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=da.idle,this.processSessionRequestQueue()},be.toMiliseconds(this.requestQueueDelay))}),fe(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=Dt("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Dt("session_request",i.request.id),{error:r})})}),fe(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===da.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=da.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),fe(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),fe(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Mu("wc_sessionPropose",Ps(ln({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),fe(this,"isValidConnect",async n=>{if(!$s(n)){const{message:l}=ve("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Ar(r)||await this.isValidPairingTopic(r),!W1e(c)){const{message:l}=ve("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Ar(s)&&nd(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!Ar(i)&&nd(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Ar(o)||this.validateSessionProps(o,"sessionProperties"),!Ar(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),fe(this,"validateNamespaces",(n,r)=>{const s=H1e(n,"connect()",r);if(s)throw new Error(s.message)}),fe(this,"isValidApprove",async n=>{if(!$s(n))throw new Error(ve("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=x2(s,"approve()");if(l)throw new Error(l.message);const u=gU(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!zn(i,!0)){const{message:d}=ve("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(Ar(o)||this.validateSessionProps(o,"sessionProperties"),!Ar(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),fe(this,"isValidReject",async n=>{if(!$s(n)){const{message:i}=ve("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!G1e(s)){const{message:i}=ve("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),fe(this,"isValidSessionSettleRequest",n=>{if(!$s(n)){const{message:l}=ve("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!zH(r)){const{message:l}=ve("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=B1e(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=x2(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Ql(o)){const{message:l}=ve("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),fe(this,"isValidUpdate",async n=>{if(!$s(n)){const{message:c}=ve("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=x2(s,"update()");if(o)throw new Error(o.message);const a=gU(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),fe(this,"isValidExtend",async n=>{if(!$s(n)){const{message:s}=ve("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),fe(this,"isValidRequest",async n=>{if(!$s(n)){const{message:c}=ve("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!pU(a,i)){const{message:c}=ve("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!V1e(s)){const{message:c}=ve("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!J1e(a,i,s.method)){const{message:c}=ve("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!eEe(o,P2)){const{message:c}=ve("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${P2.min} and ${P2.max}`);throw new Error(c)}}),fe(this,"isValidRespond",async n=>{var r;if(!$s(n)){const{message:o}=ve("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!K1e(i)){const{message:o}=ve("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),fe(this,"isValidPing",async n=>{if(!$s(n)){const{message:s}=ve("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),fe(this,"isValidEmit",async n=>{if(!$s(n)){const{message:a}=ve("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!pU(o,i)){const{message:a}=ve("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!Q1e(s)){const{message:a}=ve("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!Y1e(o,i,s.name)){const{message:a}=ve("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),fe(this,"isValidDisconnect",async n=>{if(!$s(n)){const{message:s}=ve("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),fe(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!zn(s,!1))throw new Error("uri is required parameter");if(!zn(i,!1))throw new Error("domain is required parameter");if(!zn(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>pg(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=pg(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),fe(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||nw,validation:"UNKNOWN",origin:o.url||""}};try{if(a===dn.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),fe(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=ve("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),fe(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),fe(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),fe(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=ve("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),fe(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==dn.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),fe(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),fe(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=T5(n,"topic")||"",s=decodeURIComponent(T5(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:dn.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),fe(this,"registerLinkModeListeners",async()=>{var n;if(_R()||Id()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),fe(this,"getTVFParams",(n,r,s)=>{var i,o,a;if(!((i=r.request)!=null&&i.method))return{};const c={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const l=this.extractTxHashesFromResult(r.request,s);c.txHashes=l,c.contractAddresses=this.isValidContractData(r.request.params)?[(a=(o=r.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(l){this.client.logger.warn("Error getting TVF params",l)}return c}),fe(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),fe(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const i=n.method,o=WAe[i];if(i==="sui_signTransaction")return[xbe(r.transactionBytes)];if(i==="near_signTransaction")return[U5(r)];if(i==="near_signTransactions")return r.map(c=>U5(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[gEe({transaction:n.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return qc(r)?r.map(c=>B5(c)):[B5(r)];if(i==="cosmos_signDirect")return[Abe(r)];if(typeof r=="string")return[r];const a=r[o.key];if(qc(a))return i==="solana_signAllTransactions"?a.map(c=>_be(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=ve("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(cr.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(FE)?this.client.auth.authKeys.get(FE):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===dn.link_mode?ru:qo});BR(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:ka(r)})):GC(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Hi.expired,async e=>{const{topic:n,id:r}=Jz(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,ve("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,ve("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(Jd.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Jd.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!zn(e,!1)){const{message:n}=ve("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=ve("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Ql(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=ve("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!zn(e,!1)){const{message:n}=ve("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=ve("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Ql(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=ve("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=ve("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(zn(e,!1)){const{message:n}=ve("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=ve("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!q1e(e)){const{message:n}=ve("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=ve("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Ql(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=ve("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class sSe extends Wf{constructor(e,n){super(e,n,FAe,LR),this.core=e,this.logger=n}}let iSe=class extends Wf{constructor(e,n){super(e,n,zAe,LR),this.core=e,this.logger=n}};class oSe extends Wf{constructor(e,n){super(e,n,qAe,LR,r=>r.id),this.core=e,this.logger=n}}class aSe extends Wf{constructor(e,n){super(e,n,QAe,KC,()=>FE),this.core=e,this.logger=n}}class cSe extends Wf{constructor(e,n){super(e,n,JAe,KC),this.core=e,this.logger=n}}class lSe extends Wf{constructor(e,n){super(e,n,YAe,KC,r=>r.id),this.core=e,this.logger=n}}var uSe=Object.defineProperty,dSe=(t,e,n)=>e in t?uSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,k2=(t,e,n)=>dSe(t,typeof e!="symbol"?e+"":e,n);class hSe{constructor(e,n){this.core=e,this.logger=n,k2(this,"authKeys"),k2(this,"pairingTopics"),k2(this,"requests"),this.authKeys=new aSe(this.core,this.logger),this.pairingTopics=new cSe(this.core,this.logger),this.requests=new lSe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var fSe=Object.defineProperty,pSe=(t,e,n)=>e in t?fSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gt=(t,e,n)=>pSe(t,typeof e!="symbol"?e+"":e,n);let gSe=class mW extends vfe{constructor(e){super(e),gt(this,"protocol",fW),gt(this,"version",pW),gt(this,"name",N2.name),gt(this,"metadata"),gt(this,"core"),gt(this,"logger"),gt(this,"events",new uo.EventEmitter),gt(this,"engine"),gt(this,"session"),gt(this,"proposal"),gt(this,"pendingRequest"),gt(this,"auth"),gt(this,"signConfig"),gt(this,"on",(r,s)=>this.events.on(r,s)),gt(this,"once",(r,s)=>this.events.once(r,s)),gt(this,"off",(r,s)=>this.events.off(r,s)),gt(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),gt(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),gt(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),gt(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),gt(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||N2.name,this.metadata=gwe(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Sv(ly({level:(e==null?void 0:e.logger)||N2.logger}));this.core=(e==null?void 0:e.core)||new jAe(e),this.logger=ts(n,this.name),this.session=new iSe(this.core,this.logger),this.proposal=new sSe(this.core,this.logger),this.pendingRequest=new oSe(this.core,this.logger),this.engine=new rSe(this),this.auth=new hSe(this.core,this.logger)}static async init(e){const n=new mW(e);return await n.initialize(),n}get context(){return si(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},be.toMiliseconds(be.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var uP={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Pn<"u"&&Pn,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof Pn<"u"&&Pn||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(I){return I&&DataView.prototype.isPrototypeOf(I)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(I){return I&&u.indexOf(Object.prototype.toString.call(I))>-1};function h(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(I)||I==="")throw new TypeError('Invalid character in header field name: "'+I+'"');return I.toLowerCase()}function f(I){return typeof I!="string"&&(I=String(I)),I}function p(I){var N={next:function(){var L=I.shift();return{done:L===void 0,value:L}}};return c.iterable&&(N[Symbol.iterator]=function(){return N}),N}function g(I){this.map={},I instanceof g?I.forEach(function(N,L){this.append(L,N)},this):Array.isArray(I)?I.forEach(function(N){if(N.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+N.length);this.append(N[0],N[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(N){this.append(N,I[N])},this)}g.prototype.append=function(I,N){I=h(I),N=f(N);var L=this.map[I];this.map[I]=L?L+", "+N:N},g.prototype.delete=function(I){delete this.map[h(I)]},g.prototype.get=function(I){return I=h(I),this.has(I)?this.map[I]:null},g.prototype.has=function(I){return this.map.hasOwnProperty(h(I))},g.prototype.set=function(I,N){this.map[h(I)]=f(N)},g.prototype.forEach=function(I,N){for(var L in this.map)this.map.hasOwnProperty(L)&&I.call(N,this.map[L],L,this)},g.prototype.keys=function(){var I=[];return this.forEach(function(N,L){I.push(L)}),p(I)},g.prototype.values=function(){var I=[];return this.forEach(function(N){I.push(N)}),p(I)},g.prototype.entries=function(){var I=[];return this.forEach(function(N,L){I.push([L,N])}),p(I)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function y(I){if(!I._noBody){if(I.bodyUsed)return Promise.reject(new TypeError("Already read"));I.bodyUsed=!0}}function w(I){return new Promise(function(N,L){I.onload=function(){N(I.result)},I.onerror=function(){L(I.error)}})}function v(I){var N=new FileReader,L=w(N);return N.readAsArrayBuffer(I),L}function b(I){var N=new FileReader,L=w(N),U=/charset=([A-Za-z0-9_-]+)/.exec(I.type),$=U?U[1]:"utf-8";return N.readAsText(I,$),L}function x(I){for(var N=new Uint8Array(I),L=new Array(N.length),U=0;U<N.length;U++)L[U]=String.fromCharCode(N[U]);return L.join("")}function _(I){if(I.slice)return I.slice(0);var N=new Uint8Array(I.byteLength);return N.set(new Uint8Array(I)),N.buffer}function C(){return this.bodyUsed=!1,this._initBody=function(I){this.bodyUsed=this.bodyUsed,this._bodyInit=I,I?typeof I=="string"?this._bodyText=I:c.blob&&Blob.prototype.isPrototypeOf(I)?this._bodyBlob=I:c.formData&&FormData.prototype.isPrototypeOf(I)?this._bodyFormData=I:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)?this._bodyText=I.toString():c.arrayBuffer&&c.blob&&l(I)?(this._bodyArrayBuffer=_(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(I)||d(I))?this._bodyArrayBuffer=_(I):this._bodyText=I=Object.prototype.toString.call(I):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var I=y(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var I=y(this);return I||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(v);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var I=y(this);if(I)return I;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(x(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(P)}),this.json=function(){return this.text().then(JSON.parse)},this}var S=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function T(I){var N=I.toUpperCase();return S.indexOf(N)>-1?N:I}function A(I,N){if(!(this instanceof A))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');N=N||{};var L=N.body;if(I instanceof A){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,N.headers||(this.headers=new g(I.headers)),this.method=I.method,this.mode=I.mode,this.signal=I.signal,!L&&I._bodyInit!=null&&(L=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=N.credentials||this.credentials||"same-origin",(N.headers||!this.headers)&&(this.headers=new g(N.headers)),this.method=T(N.method||this.method||"GET"),this.mode=N.mode||this.mode||null,this.signal=N.signal||this.signal||function(){if("AbortController"in a){var M=new AbortController;return M.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&L)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(L),(this.method==="GET"||this.method==="HEAD")&&(N.cache==="no-store"||N.cache==="no-cache")){var U=/([?&])_=[^&]*/;if(U.test(this.url))this.url=this.url.replace(U,"$1_="+new Date().getTime());else{var $=/\?/;this.url+=($.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}A.prototype.clone=function(){return new A(this,{body:this._bodyInit})};function P(I){var N=new FormData;return I.trim().split("&").forEach(function(L){if(L){var U=L.split("="),$=U.shift().replace(/\+/g," "),M=U.join("=").replace(/\+/g," ");N.append(decodeURIComponent($),decodeURIComponent(M))}}),N}function R(I){var N=new g,L=I.replace(/\r?\n[\t ]+/g," ");return L.split("\r").map(function(U){return U.indexOf(`
`)===0?U.substr(1,U.length):U}).forEach(function(U){var $=U.split(":"),M=$.shift().trim();if(M){var G=$.join(":").trim();try{N.append(M,G)}catch(X){console.warn("Response "+X.message)}}}),N}C.call(A.prototype);function j(I,N){if(!(this instanceof j))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(N||(N={}),this.type="default",this.status=N.status===void 0?200:N.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=N.statusText===void 0?"":""+N.statusText,this.headers=new g(N.headers),this.url=N.url||"",this._initBody(I)}C.call(j.prototype),j.prototype.clone=function(){return new j(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},j.error=function(){var I=new j(null,{status:200,statusText:""});return I.ok=!1,I.status=0,I.type="error",I};var z=[301,302,303,307,308];j.redirect=function(I,N){if(z.indexOf(N)===-1)throw new RangeError("Invalid status code");return new j(null,{status:N,headers:{location:I}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(N,L){this.message=N,this.name=L;var U=Error(N);this.stack=U.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function K(I,N){return new Promise(function(L,U){var $=new A(I,N);if($.signal&&$.signal.aborted)return U(new o.DOMException("Aborted","AbortError"));var M=new XMLHttpRequest;function G(){M.abort()}M.onload=function(){var se={statusText:M.statusText,headers:R(M.getAllResponseHeaders()||"")};$.url.indexOf("file://")===0&&(M.status<200||M.status>599)?se.status=200:se.status=M.status,se.url="responseURL"in M?M.responseURL:se.headers.get("X-Request-URL");var ce="response"in M?M.response:M.responseText;setTimeout(function(){L(new j(ce,se))},0)},M.onerror=function(){setTimeout(function(){U(new TypeError("Network request failed"))},0)},M.ontimeout=function(){setTimeout(function(){U(new TypeError("Network request timed out"))},0)},M.onabort=function(){setTimeout(function(){U(new o.DOMException("Aborted","AbortError"))},0)};function X(se){try{return se===""&&a.location.href?a.location.href:se}catch{return se}}if(M.open($.method,X($.url),!0),$.credentials==="include"?M.withCredentials=!0:$.credentials==="omit"&&(M.withCredentials=!1),"responseType"in M&&(c.blob?M.responseType="blob":c.arrayBuffer&&(M.responseType="arraybuffer")),N&&typeof N.headers=="object"&&!(N.headers instanceof g||a.Headers&&N.headers instanceof a.Headers)){var ie=[];Object.getOwnPropertyNames(N.headers).forEach(function(se){ie.push(h(se)),M.setRequestHeader(se,f(N.headers[se]))}),$.headers.forEach(function(se,ce){ie.indexOf(ce)===-1&&M.setRequestHeader(ce,se)})}else $.headers.forEach(function(se,ce){M.setRequestHeader(ce,se)});$.signal&&($.signal.addEventListener("abort",G),M.onreadystatechange=function(){M.readyState===4&&$.signal.removeEventListener("abort",G)}),M.send(typeof $._bodyInit>"u"?null:$._bodyInit)})}return K.polyfill=!0,a.fetch||(a.fetch=K,a.Headers=g,a.Request=A,a.Response=j),o.Headers=g,o.Request=A,o.Response=j,o.fetch=K,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(uP,uP.exports);var mSe=uP.exports;const ZU=Of(mSe);var ySe=Object.defineProperty,wSe=Object.defineProperties,bSe=Object.getOwnPropertyDescriptors,XU=Object.getOwnPropertySymbols,vSe=Object.prototype.hasOwnProperty,ESe=Object.prototype.propertyIsEnumerable,e4=(t,e,n)=>e in t?ySe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,t4=(t,e)=>{for(var n in e||(e={}))vSe.call(e,n)&&e4(t,n,e[n]);if(XU)for(var n of XU(e))ESe.call(e,n)&&e4(t,n,e[n]);return t},n4=(t,e)=>wSe(t,bSe(e));const _Se={Accept:"application/json","Content-Type":"application/json"},xSe="POST",r4={headers:_Se,method:xSe},s4=10;let sa=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new uo.EventEmitter,this.isAvailable=!1,this.registering=!1,!EU(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=rl(e),r=await(await ZU(this.url,n4(t4({},r4),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!EU(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=rl({id:1,jsonrpc:"2.0",method:"test",params:[]});await ZU(e,n4(t4({},r4),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?wf(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=qC(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return qH(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>s4&&this.events.setMaxListeners(s4)}};const i4="error",CSe="wss://relay.walletconnect.org",ASe="wc",SSe="universal_provider",G1=`${ASe}@2:${SSe}:`,yW="https://rpc.walletconnect.org/v1/",Pp="generic",ISe=`${yW}bundler`,fo={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function MR(t){return t==null||typeof t!="object"&&typeof t!="function"}function wW(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function bW(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const TSe="[object RegExp]",vW="[object String]",EW="[object Number]",_W="[object Boolean]",xW="[object Arguments]",NSe="[object Symbol]",PSe="[object Date]",kSe="[object Map]",OSe="[object Set]",RSe="[object Array]",DSe="[object ArrayBuffer]",$Se="[object Object]",USe="[object DataView]",BSe="[object Uint8Array]",LSe="[object Uint8ClampedArray]",MSe="[object Uint16Array]",jSe="[object Uint32Array]",FSe="[object Int8Array]",zSe="[object Int16Array]",HSe="[object Int32Array]",WSe="[object Float32Array]",qSe="[object Float64Array]";function jR(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function GSe(t,e){return Yp(t,void 0,t,new Map,e)}function Yp(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(MR(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Yp(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,Yp(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(Yp(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(jR(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Yp(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),Yd(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),Yd(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),Yd(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,Yd(o,t,n,r,s),o}if(typeof t=="object"&&VSe(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),Yd(o,t,n,r,s),o}return t}function Yd(t,e,n=t,r,s){const i=[...Object.keys(e),...wW(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Yp(e[a],a,n,r,s))}}function VSe(t){switch(bW(t)){case xW:case RSe:case DSe:case USe:case _W:case PSe:case WSe:case qSe:case FSe:case zSe:case HSe:case kSe:case EW:case $Se:case TSe:case OSe:case vW:case NSe:case BSe:case LSe:case MSe:case jSe:return!0;default:return!1}}function KSe(t,e){return GSe(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case EW:case vW:case _W:{const o=new t.constructor(t==null?void 0:t.valueOf());return Yd(o,t),o}case xW:{const o={};return Yd(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function o4(t){return KSe(t)}function a4(t){return t!==null&&typeof t=="object"&&bW(t)==="[object Arguments]"}function c4(t){return typeof t=="object"&&t!==null}function QSe(){}function JSe(t){return jR(t)}function YSe(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function ZSe(t){if(MR(t))return t;if(Array.isArray(t)||jR(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function XSe(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=dP(s,o,r,new Map)}return s}function dP(t,e,n,r){if(MR(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return ZSe(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...wW(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(a4(a)&&(a={...a}),a4(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=o4(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||c4(c)&&c4(a)?t[o]=dP(c,a,n,r):c==null&&YSe(a)?t[o]=dP({},a,n,r):c==null&&JSe(a)?t[o]=o4(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function e2e(t,...e){return XSe(t,...e,QSe)}var t2e=Object.defineProperty,n2e=Object.defineProperties,r2e=Object.getOwnPropertyDescriptors,l4=Object.getOwnPropertySymbols,s2e=Object.prototype.hasOwnProperty,i2e=Object.prototype.propertyIsEnumerable,u4=(t,e,n)=>e in t?t2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,V1=(t,e)=>{for(var n in e||(e={}))s2e.call(e,n)&&u4(t,n,e[n]);if(l4)for(var n of l4(e))i2e.call(e,n)&&u4(t,n,e[n]);return t},o2e=(t,e)=>n2e(t,r2e(e));function Ni(t,e,n){var r;const s=pg(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${yW}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function qf(t){return t.includes(":")?t.split(":")[1]:t}function CW(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function a2e(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function K1(t={},e={}){const n=d4(t),r=d4(e);return e2e(n,r)}function d4(t){var e,n,r,s,i;const o={};if(!nd(t))return o;for(const[a,c]of Object.entries(t)){const l=HC(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=Jp(a);o[f]=o2e(V1(V1({},o[f]),c),{chains:Ha(l,(e=o[f])==null?void 0:e.chains),methods:Ha(u,(n=o[f])==null?void 0:n.methods),events:Ha(d,(r=o[f])==null?void 0:r.events)}),(nd(h)||nd(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=V1(V1({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function h4(t){return t.includes(":")?t.split(":")[2]:t}function f4(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=HC(n)?[n]:r.chains?r.chains:CW(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function O2(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const AW={},kt=t=>AW[t],R2=(t,e)=>{AW[t]=e};var c2e=Object.defineProperty,l2e=(t,e,n)=>e in t?c2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,up=(t,e,n)=>l2e(t,typeof e!="symbol"?e+"":e,n);class u2e{constructor(e){up(this,"name","polkadot"),up(this,"client"),up(this,"httpProviders"),up(this,"events"),up(this,"namespace"),up(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(fo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=qf(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ni(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new ho(new sa(r,kt("disableProviderPing")))}}var d2e=Object.defineProperty,h2e=Object.defineProperties,f2e=Object.getOwnPropertyDescriptors,p4=Object.getOwnPropertySymbols,p2e=Object.prototype.hasOwnProperty,g2e=Object.prototype.propertyIsEnumerable,hP=(t,e,n)=>e in t?d2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,g4=(t,e)=>{for(var n in e||(e={}))p2e.call(e,n)&&hP(t,n,e[n]);if(p4)for(var n of p4(e))g2e.call(e,n)&&hP(t,n,e[n]);return t},m4=(t,e)=>h2e(t,f2e(e)),dp=(t,e,n)=>hP(t,typeof e!="symbol"?e+"":e,n);class m2e{constructor(e){dp(this,"name","eip155"),dp(this,"client"),dp(this,"chainId"),dp(this,"namespace"),dp(this,"httpProviders"),dp(this,"events"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(fo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||Ni(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new ho(new sa(r,kt("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(qf(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:m4(g4({},u.sessionProperties||{}),{capabilities:m4(g4({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Mu("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${ISe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var y2e=Object.defineProperty,w2e=(t,e,n)=>e in t?y2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hp=(t,e,n)=>w2e(t,typeof e!="symbol"?e+"":e,n);class b2e{constructor(e){hp(this,"name","solana"),hp(this,"client"),hp(this,"httpProviders"),hp(this,"events"),hp(this,"namespace"),hp(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(fo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=qf(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ni(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new ho(new sa(r,kt("disableProviderPing")))}}var v2e=Object.defineProperty,E2e=(t,e,n)=>e in t?v2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fp=(t,e,n)=>E2e(t,typeof e!="symbol"?e+"":e,n);class _2e{constructor(e){fp(this,"name","cosmos"),fp(this,"client"),fp(this,"httpProviders"),fp(this,"events"),fp(this,"namespace"),fp(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(fo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=qf(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ni(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new ho(new sa(r,kt("disableProviderPing")))}}var x2e=Object.defineProperty,C2e=(t,e,n)=>e in t?x2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pp=(t,e,n)=>C2e(t,typeof e!="symbol"?e+"":e,n);class A2e{constructor(e){pp(this,"name","algorand"),pp(this,"client"),pp(this,"httpProviders"),pp(this,"events"),pp(this,"namespace"),pp(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||Ni(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(fo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ni(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new ho(new sa(r,kt("disableProviderPing")))}}var S2e=Object.defineProperty,I2e=(t,e,n)=>e in t?S2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gp=(t,e,n)=>I2e(t,typeof e!="symbol"?e+"":e,n);class T2e{constructor(e){gp(this,"name","cip34"),gp(this,"client"),gp(this,"httpProviders"),gp(this,"events"),gp(this,"namespace"),gp(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(fo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=qf(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new ho(new sa(r,kt("disableProviderPing")))}}var N2e=Object.defineProperty,P2e=(t,e,n)=>e in t?N2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mp=(t,e,n)=>P2e(t,typeof e!="symbol"?e+"":e,n);class k2e{constructor(e){mp(this,"name","elrond"),mp(this,"client"),mp(this,"httpProviders"),mp(this,"events"),mp(this,"namespace"),mp(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(fo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=qf(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ni(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new ho(new sa(r,kt("disableProviderPing")))}}var O2e=Object.defineProperty,R2e=(t,e,n)=>e in t?O2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yp=(t,e,n)=>R2e(t,typeof e!="symbol"?e+"":e,n);class D2e{constructor(e){yp(this,"name","multiversx"),yp(this,"client"),yp(this,"httpProviders"),yp(this,"events"),yp(this,"namespace"),yp(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(fo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=qf(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ni(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new ho(new sa(r,kt("disableProviderPing")))}}var $2e=Object.defineProperty,U2e=(t,e,n)=>e in t?$2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wp=(t,e,n)=>U2e(t,typeof e!="symbol"?e+"":e,n);class B2e{constructor(e){wp(this,"name","near"),wp(this,"client"),wp(this,"httpProviders"),wp(this,"events"),wp(this,"namespace"),wp(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Ni(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(fo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ni(e,this.namespace);return typeof r>"u"?void 0:new ho(new sa(r,kt("disableProviderPing")))}}var L2e=Object.defineProperty,M2e=(t,e,n)=>e in t?L2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bp=(t,e,n)=>M2e(t,typeof e!="symbol"?e+"":e,n);class j2e{constructor(e){bp(this,"name","tezos"),bp(this,"client"),bp(this,"httpProviders"),bp(this,"events"),bp(this,"namespace"),bp(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Ni(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(fo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ni(e,this.namespace);return typeof r>"u"?void 0:new ho(new sa(r))}}var F2e=Object.defineProperty,z2e=(t,e,n)=>e in t?F2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vp=(t,e,n)=>z2e(t,typeof e!="symbol"?e+"":e,n);class H2e{constructor(e){vp(this,"name",Pp),vp(this,"client"),vp(this,"httpProviders"),vp(this,"events"),vp(this,"namespace"),vp(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(fo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=pg(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ni(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new ho(new sa(r,kt("disableProviderPing")))}}var W2e=Object.defineProperty,q2e=Object.defineProperties,G2e=Object.getOwnPropertyDescriptors,y4=Object.getOwnPropertySymbols,V2e=Object.prototype.hasOwnProperty,K2e=Object.prototype.propertyIsEnumerable,fP=(t,e,n)=>e in t?W2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Q1=(t,e)=>{for(var n in e||(e={}))V2e.call(e,n)&&fP(t,n,e[n]);if(y4)for(var n of y4(e))K2e.call(e,n)&&fP(t,n,e[n]);return t},D2=(t,e)=>q2e(t,G2e(e)),Mi=(t,e,n)=>fP(t,typeof e!="symbol"?e+"":e,n);let Q2e=class SW{constructor(e){Mi(this,"client"),Mi(this,"namespaces"),Mi(this,"optionalNamespaces"),Mi(this,"sessionProperties"),Mi(this,"scopedProperties"),Mi(this,"events",new iR),Mi(this,"rpcProviders",{}),Mi(this,"session"),Mi(this,"providerOpts"),Mi(this,"logger"),Mi(this,"uri"),Mi(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Sv(ly({level:(e==null?void 0:e.logger)||i4})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new SW(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Q1({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,WC(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:gn("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=f4(this.session.namespaces);this.namespaces=K1(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=f4(s.namespaces);return this.namespaces=K1(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===Pp?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(qc(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await gSe.init({core:this.providerOpts.core,logger:this.providerOpts.logger||i4,relayUrl:this.providerOpts.relayUrl||CSe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>Jp(n)))];R2("client",this.client),R2("events",this.events),R2("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=a2e(n,this.session),s=CW(r),i=K1(this.namespaces,this.optionalNamespaces),o=D2(Q1({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new m2e({namespace:o});break;case"algorand":this.rpcProviders[n]=new A2e({namespace:o});break;case"solana":this.rpcProviders[n]=new b2e({namespace:o});break;case"cosmos":this.rpcProviders[n]=new _2e({namespace:o});break;case"polkadot":this.rpcProviders[n]=new u2e({namespace:o});break;case"cip34":this.rpcProviders[n]=new T2e({namespace:o});break;case"elrond":this.rpcProviders[n]=new k2e({namespace:o});break;case"multiversx":this.rpcProviders[n]=new D2e({namespace:o});break;case"near":this.rpcProviders[n]=new B2e({namespace:o});break;case"tezos":this.rpcProviders[n]=new j2e({namespace:o});break;default:this.rpcProviders[Pp]?this.rpcProviders[Pp].updateNamespace(o):this.rpcProviders[Pp]=new H2e({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&qc(o)&&this.events.emit("accountsChanged",o.map(h4))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=Jp(o),l=O2(o)!==O2(a)?`${c}:${O2(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=D2(Q1({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",D2(Q1({},gn("USER_DISCONNECTED")),{data:e.topic})))}),this.on(fo.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Pp]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=K1(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>Jp(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=Jp(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(h4);if(!qc(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${G1}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${G1}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${G1}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(G1)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};const sw={getSIWX(){return pe.state.siwx},async initializeIfEnabled(){var i;const t=pe.state.siwx,e=B.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(B.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await $t.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),Ht.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=De._getClient())==null?void 0:i.disconnect().catch(console.error)),Ke.reset("Connect"),Ho.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=pe.state.siwx,e=je.getPlainAddress(B.getActiveCaipAddress()),n=B.getActiveCaipNetwork(),r=De._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Ce.getConnectorId(n.chainNamespace)===ae.CONNECTOR_ID.AUTH&&Ke.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),B.setLastConnectedSIWECaipNetwork(n),$t.close(),Ht.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!$t.state.open||Ke.state.view==="ApproveTransaction")&&await $t.open({view:"SIWXSignMessage"}),i.isSmartAccount?Ho.showError("This application might not support Smart Accounts"):Ho.showError("Signature declined"),Ht.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=B.getLastConnectedSIWECaipNetwork();r?B.switchActiveNetwork(r):await De.disconnect()}else $t.close();Ke.reset("Connect"),Ht.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=B.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,je.getPlainAddress(B.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=pe.state.siwx,e=je.getPlainAddress(B.getActiveCaipAddress()),n=B.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Ke.state.view==="ApproveTransaction",r=Ke.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=sw.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=B.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Ho.showLoading("Authenticating...",{autoClose:!1}),Ee.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),Ht.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:sw.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),Ht.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:sw.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Ho.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=B.state.activeChain;return{network:((e=B.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=Ee.state.preferredAccountTypes)==null?void 0:n[t])===fr.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},hn={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},ju={ConnectorExplorerIds:{[ae.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ae.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ae.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[ae.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[ae.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[hn.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[hn.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[hn.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[hn.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[hn.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[hn.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[hn.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[hn.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[hn.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[hn.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[hn.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[ae.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ae.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ae.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[ae.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[ae.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[ae.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[ae.CONNECTOR_ID.INJECTED]:"Browser Wallet",[ae.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[ae.CONNECTOR_ID.COINBASE]:"Coinbase",[ae.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[ae.CONNECTOR_ID.LEDGER]:"Ledger",[ae.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[ae.CONNECTOR_ID.INJECTED]:"INJECTED",[ae.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[ae.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[ae.CONNECTOR_ID.AUTH]:"AUTH"}},mb={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${hn.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=B.state.activeChain;return ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>Ce.getConnectorId(e)===ae.CONNECTOR_ID.AUTH&&e===t)}},J2e=new AbortController,wn={EmbeddedWalletAbortController:J2e,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${Y2e()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"},SERVER_ERROR_APP_CONFIGURATION:{shortMessage:"Server Error",longMessage:t=>`Failed to get App Configuration ${t||""}`},RATE_LIMITED_APP_CONFIGURATION:{shortMessage:"Rate Limited",longMessage:"Rate limited when trying to get the App Configuration"}}};function Y2e(){return typeof window<"u"}const Z2e={createLogger(t,e="error"){const n=ly({level:e}),{logger:r}=aR({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},X2e="rpc.walletconnect.org";function w4(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const $2=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Da={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===X2e}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:ae.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${ae.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return $2.includes(e)?w4(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,y;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((y=r==null?void 0:r[i])==null?void 0:y.map(w=>w.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:ju.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Da.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(m1(a.url,a.config))}),$2.includes(t.caipNetworkId)&&r.push(m1(w4(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(m1(a))}),w$(r)},extendWagmiTransports(t,e,n){if($2.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return w$([n,m1(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:ae.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=_e.getActiveCaipNetworkId(),n=B.getAllRequestedCaipNetworks(),r=Array.from(((c=B.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},nx={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},ks=cn({providers:{...nx},providerIds:{...nx}}),Jt={state:ks,subscribeKey(t,e){return Rr(ks,t,e)},subscribe(t){return Or(ks,()=>{t(ks)})},subscribeProviders(t){return Or(ks.providers,()=>t(ks.providers))},setProvider(t,e){e&&(ks.providers[t]=mf(e))},getProvider(t){return ks.providers[t]},setProviderId(t,e){e&&(ks.providerIds[t]=e)},getProviderId(t){if(t)return ks.providerIds[t]},reset(){ks.providers={...nx},ks.providerIds={...nx}},resetChain(t){ks.providers[t]=void 0,ks.providerIds[t]=void 0}},b4={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},_r={set(t,e){vi.isClient&&localStorage.setItem(`${Be.STORAGE_KEY}${t}`,e)},get(t){return vi.isClient?localStorage.getItem(`${Be.STORAGE_KEY}${t}`):null},delete(t,e){vi.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Be.STORAGE_KEY}${t}`))}},J1=30*1e3,vi={checkIfAllowedToTriggerEmail(){const t=_r.get(Be.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<J1){const n=Math.ceil((J1-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=_r.get(Be.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<J1)return Math.ceil((J1-e)/1e3)}return 0},checkIfRequestExists(t){return fr.NOT_SAFE_RPC_METHODS.includes(t.method)||fr.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(b4.transactionHash))||(t==null?void 0:t.match(b4.signedMessage)))?Be.RPC_RESPONSE_TYPE_TX:Be.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return fr.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var Pt;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Pt||(Pt={}));var pP;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(pP||(pP={}));const ke=Pt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),su=t=>{switch(typeof t){case"undefined":return ke.undefined;case"string":return ke.string;case"number":return isNaN(t)?ke.nan:ke.number;case"boolean":return ke.boolean;case"function":return ke.function;case"bigint":return ke.bigint;case"symbol":return ke.symbol;case"object":return Array.isArray(t)?ke.array:t===null?ke.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ke.promise:typeof Map<"u"&&t instanceof Map?ke.map:typeof Set<"u"&&t instanceof Set?ke.set:typeof Date<"u"&&t instanceof Date?ke.date:ke.object;default:return ke.unknown}},we=Pt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),eIe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Jo extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,Pt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Jo.create=t=>new Jo(t);const yb=(t,e)=>{let n;switch(t.code){case we.invalid_type:t.received===ke.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case we.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Pt.jsonStringifyReplacer)}`;break;case we.unrecognized_keys:n=`Unrecognized key(s) in object: ${Pt.joinValues(t.keys,", ")}`;break;case we.invalid_union:n="Invalid input";break;case we.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Pt.joinValues(t.options)}`;break;case we.invalid_enum_value:n=`Invalid enum value. Expected ${Pt.joinValues(t.options)}, received '${t.received}'`;break;case we.invalid_arguments:n="Invalid function arguments";break;case we.invalid_return_type:n="Invalid function return type";break;case we.invalid_date:n="Invalid date";break;case we.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Pt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case we.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case we.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case we.custom:n="Invalid input";break;case we.invalid_intersection_types:n="Intersection results could not be merged";break;case we.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case we.not_finite:n="Number must be finite";break;default:n=e.defaultError,Pt.assertNever(t)}return{message:n}};let IW=yb;function tIe(t){IW=t}function rx(){return IW}const sx=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},nIe=[];function $e(t,e){const n=sx({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,rx(),yb].filter(r=>!!r)});t.common.issues.push(n)}class es{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Xe;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return es.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Xe;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Xe=Object.freeze({status:"aborted"}),TW=t=>({status:"dirty",value:t}),vs=t=>({status:"valid",value:t}),gP=t=>t.status==="aborted",mP=t=>t.status==="dirty",wb=t=>t.status==="valid",ix=t=>typeof Promise<"u"&&t instanceof Promise;var He;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(He||(He={}));class Ka{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const v4=(t,e)=>{if(wb(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Jo(t.common.issues);return this._error=n,this._error}}};function st(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class lt{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return su(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:su(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new es,ctx:{common:e.parent.common,data:e.data,parsedType:su(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(ix(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:su(e)},i=this._parseSync({data:e,path:s.path,parent:s});return v4(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:su(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(ix(s)?s:Promise.resolve(s));return v4(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:we.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new ea({schema:this,typeName:Je.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Gc.create(this,this._def)}nullable(){return Af.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Yo.create(this,this._def)}promise(){return jm.create(this,this._def)}or(e){return _b.create([this,e],this._def)}and(e){return xb.create(this,e,this._def)}transform(e){return new ea({...st(this._def),schema:this,typeName:Je.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Tb({...st(this._def),innerType:this,defaultValue:n,typeName:Je.ZodDefault})}brand(){return new PW({typeName:Je.ZodBranded,type:this,...st(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new lx({...st(this._def),innerType:this,catchValue:n,typeName:Je.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return $v.create(this,e)}readonly(){return dx.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const rIe=/^c[^\s-]{8,}$/i,sIe=/^[a-z][a-z0-9]*$/,iIe=/^[0-9A-HJKMNP-TV-Z]{26}$/,oIe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,aIe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,cIe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let U2;const lIe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,uIe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,dIe=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function hIe(t,e){return!!((e==="v4"||!e)&&lIe.test(t)||(e==="v6"||!e)&&uIe.test(t))}class Go extends lt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ke.string){const i=this._getOrReturnCtx(e);return $e(i,{code:we.invalid_type,expected:ke.string,received:i.parsedType}),Xe}const r=new es;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),$e(s,{code:we.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),$e(s,{code:we.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?$e(s,{code:we.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&$e(s,{code:we.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")aIe.test(e.data)||(s=this._getOrReturnCtx(e,s),$e(s,{validation:"email",code:we.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")U2||(U2=new RegExp(cIe,"u")),U2.test(e.data)||(s=this._getOrReturnCtx(e,s),$e(s,{validation:"emoji",code:we.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")oIe.test(e.data)||(s=this._getOrReturnCtx(e,s),$e(s,{validation:"uuid",code:we.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")rIe.test(e.data)||(s=this._getOrReturnCtx(e,s),$e(s,{validation:"cuid",code:we.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")sIe.test(e.data)||(s=this._getOrReturnCtx(e,s),$e(s,{validation:"cuid2",code:we.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")iIe.test(e.data)||(s=this._getOrReturnCtx(e,s),$e(s,{validation:"ulid",code:we.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),$e(s,{validation:"url",code:we.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),$e(s,{validation:"regex",code:we.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),$e(s,{code:we.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),$e(s,{code:we.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),$e(s,{code:we.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?dIe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),$e(s,{code:we.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?hIe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),$e(s,{validation:"ip",code:we.invalid_string,message:i.message}),r.dirty()):Pt.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:we.invalid_string,...He.errToObj(r)})}_addCheck(e){return new Go({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...He.errToObj(e)})}url(e){return this._addCheck({kind:"url",...He.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...He.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...He.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...He.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...He.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...He.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...He.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...He.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...He.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...He.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...He.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...He.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...He.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...He.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...He.errToObj(n)})}nonempty(e){return this.min(1,He.errToObj(e))}trim(){return new Go({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Go({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Go({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Go.create=t=>{var e;return new Go({checks:[],typeName:Je.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...st(t)})};function fIe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class md extends lt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ke.number){const i=this._getOrReturnCtx(e);return $e(i,{code:we.invalid_type,expected:ke.number,received:i.parsedType}),Xe}let r;const s=new es;for(const i of this._def.checks)i.kind==="int"?Pt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),$e(r,{code:we.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),$e(r,{code:we.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),$e(r,{code:we.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?fIe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),$e(r,{code:we.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),$e(r,{code:we.not_finite,message:i.message}),s.dirty()):Pt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,He.toString(n))}gt(e,n){return this.setLimit("min",e,!1,He.toString(n))}lte(e,n){return this.setLimit("max",e,!0,He.toString(n))}lt(e,n){return this.setLimit("max",e,!1,He.toString(n))}setLimit(e,n,r,s){return new md({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:He.toString(s)}]})}_addCheck(e){return new md({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:He.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:He.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:He.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:He.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:He.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:He.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:He.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:He.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:He.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Pt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}md.create=t=>new md({checks:[],typeName:Je.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...st(t)});class yd extends lt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ke.bigint){const i=this._getOrReturnCtx(e);return $e(i,{code:we.invalid_type,expected:ke.bigint,received:i.parsedType}),Xe}let r;const s=new es;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),$e(r,{code:we.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),$e(r,{code:we.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),$e(r,{code:we.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Pt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,He.toString(n))}gt(e,n){return this.setLimit("min",e,!1,He.toString(n))}lte(e,n){return this.setLimit("max",e,!0,He.toString(n))}lt(e,n){return this.setLimit("max",e,!1,He.toString(n))}setLimit(e,n,r,s){return new yd({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:He.toString(s)}]})}_addCheck(e){return new yd({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:He.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:He.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:He.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:He.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:He.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}yd.create=t=>{var e;return new yd({checks:[],typeName:Je.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...st(t)})};class bb extends lt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ke.boolean){const r=this._getOrReturnCtx(e);return $e(r,{code:we.invalid_type,expected:ke.boolean,received:r.parsedType}),Xe}return vs(e.data)}}bb.create=t=>new bb({typeName:Je.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...st(t)});class xf extends lt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ke.date){const i=this._getOrReturnCtx(e);return $e(i,{code:we.invalid_type,expected:ke.date,received:i.parsedType}),Xe}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return $e(i,{code:we.invalid_date}),Xe}const r=new es;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),$e(s,{code:we.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),$e(s,{code:we.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Pt.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new xf({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:He.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:He.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}xf.create=t=>new xf({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Je.ZodDate,...st(t)});class ox extends lt{_parse(e){if(this._getType(e)!==ke.symbol){const r=this._getOrReturnCtx(e);return $e(r,{code:we.invalid_type,expected:ke.symbol,received:r.parsedType}),Xe}return vs(e.data)}}ox.create=t=>new ox({typeName:Je.ZodSymbol,...st(t)});class vb extends lt{_parse(e){if(this._getType(e)!==ke.undefined){const r=this._getOrReturnCtx(e);return $e(r,{code:we.invalid_type,expected:ke.undefined,received:r.parsedType}),Xe}return vs(e.data)}}vb.create=t=>new vb({typeName:Je.ZodUndefined,...st(t)});class Eb extends lt{_parse(e){if(this._getType(e)!==ke.null){const r=this._getOrReturnCtx(e);return $e(r,{code:we.invalid_type,expected:ke.null,received:r.parsedType}),Xe}return vs(e.data)}}Eb.create=t=>new Eb({typeName:Je.ZodNull,...st(t)});class Mm extends lt{constructor(){super(...arguments),this._any=!0}_parse(e){return vs(e.data)}}Mm.create=t=>new Mm({typeName:Je.ZodAny,...st(t)});class Zh extends lt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return vs(e.data)}}Zh.create=t=>new Zh({typeName:Je.ZodUnknown,...st(t)});class il extends lt{_parse(e){const n=this._getOrReturnCtx(e);return $e(n,{code:we.invalid_type,expected:ke.never,received:n.parsedType}),Xe}}il.create=t=>new il({typeName:Je.ZodNever,...st(t)});class ax extends lt{_parse(e){if(this._getType(e)!==ke.undefined){const r=this._getOrReturnCtx(e);return $e(r,{code:we.invalid_type,expected:ke.void,received:r.parsedType}),Xe}return vs(e.data)}}ax.create=t=>new ax({typeName:Je.ZodVoid,...st(t)});class Yo extends lt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==ke.array)return $e(n,{code:we.invalid_type,expected:ke.array,received:n.parsedType}),Xe;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&($e(n,{code:o?we.too_big:we.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&($e(n,{code:we.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&($e(n,{code:we.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Ka(n,o,n.path,a)))).then(o=>es.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Ka(n,o,n.path,a)));return es.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Yo({...this._def,minLength:{value:e,message:He.toString(n)}})}max(e,n){return new Yo({...this._def,maxLength:{value:e,message:He.toString(n)}})}length(e,n){return new Yo({...this._def,exactLength:{value:e,message:He.toString(n)}})}nonempty(e){return this.min(1,e)}}Yo.create=(t,e)=>new Yo({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Je.ZodArray,...st(e)});function kp(t){if(t instanceof bn){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Gc.create(kp(r))}return new bn({...t._def,shape:()=>e})}else return t instanceof Yo?new Yo({...t._def,type:kp(t.element)}):t instanceof Gc?Gc.create(kp(t.unwrap())):t instanceof Af?Af.create(kp(t.unwrap())):t instanceof Qa?Qa.create(t.items.map(e=>kp(e))):t}class bn extends lt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Pt.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ke.object){const l=this._getOrReturnCtx(e);return $e(l,{code:we.invalid_type,expected:ke.object,received:l.parsedType}),Xe}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof il&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Ka(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof il){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&($e(s,{code:we.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Ka(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>es.mergeObjectSync(r,l)):es.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return He.errToObj,new bn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=He.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new bn({...this._def,unknownKeys:"strip"})}passthrough(){return new bn({...this._def,unknownKeys:"passthrough"})}extend(e){return new bn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new bn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Je.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new bn({...this._def,catchall:e})}pick(e){const n={};return Pt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new bn({...this._def,shape:()=>n})}omit(e){const n={};return Pt.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new bn({...this._def,shape:()=>n})}deepPartial(){return kp(this)}partial(e){const n={};return Pt.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new bn({...this._def,shape:()=>n})}required(e){const n={};return Pt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Gc;)i=i._def.innerType;n[r]=i}}),new bn({...this._def,shape:()=>n})}keyof(){return NW(Pt.objectKeys(this.shape))}}bn.create=(t,e)=>new bn({shape:()=>t,unknownKeys:"strip",catchall:il.create(),typeName:Je.ZodObject,...st(e)});bn.strictCreate=(t,e)=>new bn({shape:()=>t,unknownKeys:"strict",catchall:il.create(),typeName:Je.ZodObject,...st(e)});bn.lazycreate=(t,e)=>new bn({shape:t,unknownKeys:"strip",catchall:il.create(),typeName:Je.ZodObject,...st(e)});class _b extends lt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Jo(a.ctx.common.issues));return $e(n,{code:we.invalid_union,unionErrors:o}),Xe}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Jo(c));return $e(n,{code:we.invalid_union,unionErrors:a}),Xe}}get options(){return this._def.options}}_b.create=(t,e)=>new _b({options:t,typeName:Je.ZodUnion,...st(e)});const zE=t=>t instanceof Ab?zE(t.schema):t instanceof ea?zE(t.innerType()):t instanceof Sb?[t.value]:t instanceof wd?t.options:t instanceof Ib?Object.keys(t.enum):t instanceof Tb?zE(t._def.innerType):t instanceof vb?[void 0]:t instanceof Eb?[null]:null;class QC extends lt{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ke.object)return $e(n,{code:we.invalid_type,expected:ke.object,received:n.parsedType}),Xe;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):($e(n,{code:we.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Xe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=zE(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new QC({typeName:Je.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...st(r)})}}function yP(t,e){const n=su(t),r=su(e);if(t===e)return{valid:!0,data:t};if(n===ke.object&&r===ke.object){const s=Pt.objectKeys(e),i=Pt.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=yP(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===ke.array&&r===ke.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=yP(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===ke.date&&r===ke.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class xb extends lt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(gP(i)||gP(o))return Xe;const a=yP(i.value,o.value);return a.valid?((mP(i)||mP(o))&&n.dirty(),{status:n.value,value:a.data}):($e(r,{code:we.invalid_intersection_types}),Xe)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}xb.create=(t,e,n)=>new xb({left:t,right:e,typeName:Je.ZodIntersection,...st(n)});class Qa extends lt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ke.array)return $e(r,{code:we.invalid_type,expected:ke.array,received:r.parsedType}),Xe;if(r.data.length<this._def.items.length)return $e(r,{code:we.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Xe;!this._def.rest&&r.data.length>this._def.items.length&&($e(r,{code:we.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Ka(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>es.mergeArray(n,o)):es.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Qa({...this._def,rest:e})}}Qa.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Qa({items:t,typeName:Je.ZodTuple,rest:null,...st(e)})};class Cb extends lt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ke.object)return $e(r,{code:we.invalid_type,expected:ke.object,received:r.parsedType}),Xe;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Ka(r,a,r.path,a)),value:o._parse(new Ka(r,r.data[a],r.path,a))});return r.common.async?es.mergeObjectAsync(n,s):es.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof lt?new Cb({keyType:e,valueType:n,typeName:Je.ZodRecord,...st(r)}):new Cb({keyType:Go.create(),valueType:e,typeName:Je.ZodRecord,...st(n)})}}class cx extends lt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ke.map)return $e(r,{code:we.invalid_type,expected:ke.map,received:r.parsedType}),Xe;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new Ka(r,a,r.path,[l,"key"])),value:i._parse(new Ka(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return Xe;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return Xe;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}cx.create=(t,e,n)=>new cx({valueType:e,keyType:t,typeName:Je.ZodMap,...st(n)});class Cf extends lt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ke.set)return $e(r,{code:we.invalid_type,expected:ke.set,received:r.parsedType}),Xe;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&($e(r,{code:we.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&($e(r,{code:we.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return Xe;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new Ka(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new Cf({...this._def,minSize:{value:e,message:He.toString(n)}})}max(e,n){return new Cf({...this._def,maxSize:{value:e,message:He.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Cf.create=(t,e)=>new Cf({valueType:t,minSize:null,maxSize:null,typeName:Je.ZodSet,...st(e)});class gg extends lt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ke.function)return $e(n,{code:we.invalid_type,expected:ke.function,received:n.parsedType}),Xe;function r(a,c){return sx({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,rx(),yb].filter(l=>!!l),issueData:{code:we.invalid_arguments,argumentsError:c}})}function s(a,c){return sx({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,rx(),yb].filter(l=>!!l),issueData:{code:we.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof jm){const a=this;return vs(async function(...c){const l=new Jo([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return vs(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new Jo([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new Jo([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new gg({...this._def,args:Qa.create(e).rest(Zh.create())})}returns(e){return new gg({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new gg({args:e||Qa.create([]).rest(Zh.create()),returns:n||Zh.create(),typeName:Je.ZodFunction,...st(r)})}}class Ab extends lt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Ab.create=(t,e)=>new Ab({getter:t,typeName:Je.ZodLazy,...st(e)});class Sb extends lt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return $e(n,{received:n.data,code:we.invalid_literal,expected:this._def.value}),Xe}return{status:"valid",value:e.data}}get value(){return this._def.value}}Sb.create=(t,e)=>new Sb({value:t,typeName:Je.ZodLiteral,...st(e)});function NW(t,e){return new wd({values:t,typeName:Je.ZodEnum,...st(e)})}class wd extends lt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return $e(n,{expected:Pt.joinValues(r),received:n.parsedType,code:we.invalid_type}),Xe}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return $e(n,{received:n.data,code:we.invalid_enum_value,options:r}),Xe}return vs(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return wd.create(e)}exclude(e){return wd.create(this.options.filter(n=>!e.includes(n)))}}wd.create=NW;class Ib extends lt{_parse(e){const n=Pt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ke.string&&r.parsedType!==ke.number){const s=Pt.objectValues(n);return $e(r,{expected:Pt.joinValues(s),received:r.parsedType,code:we.invalid_type}),Xe}if(n.indexOf(e.data)===-1){const s=Pt.objectValues(n);return $e(r,{received:r.data,code:we.invalid_enum_value,options:s}),Xe}return vs(e.data)}get enum(){return this._def.values}}Ib.create=(t,e)=>new Ib({values:t,typeName:Je.ZodNativeEnum,...st(e)});class jm extends lt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ke.promise&&n.common.async===!1)return $e(n,{code:we.invalid_type,expected:ke.promise,received:n.parsedType}),Xe;const r=n.parsedType===ke.promise?n.data:Promise.resolve(n.data);return vs(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}jm.create=(t,e)=>new jm({type:t,typeName:Je.ZodPromise,...st(e)});class ea extends lt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Je.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{$e(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Xe:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Xe:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!wb(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>wb(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);Pt.assertNever(s)}}ea.create=(t,e,n)=>new ea({schema:t,typeName:Je.ZodEffects,effect:e,...st(n)});ea.createWithPreprocess=(t,e,n)=>new ea({schema:e,effect:{type:"preprocess",transform:t},typeName:Je.ZodEffects,...st(n)});class Gc extends lt{_parse(e){return this._getType(e)===ke.undefined?vs(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Gc.create=(t,e)=>new Gc({innerType:t,typeName:Je.ZodOptional,...st(e)});class Af extends lt{_parse(e){return this._getType(e)===ke.null?vs(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Af.create=(t,e)=>new Af({innerType:t,typeName:Je.ZodNullable,...st(e)});class Tb extends lt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ke.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Tb.create=(t,e)=>new Tb({innerType:t,typeName:Je.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...st(e)});class lx extends lt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return ix(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Jo(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Jo(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}lx.create=(t,e)=>new lx({innerType:t,typeName:Je.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...st(e)});class ux extends lt{_parse(e){if(this._getType(e)!==ke.nan){const r=this._getOrReturnCtx(e);return $e(r,{code:we.invalid_type,expected:ke.nan,received:r.parsedType}),Xe}return{status:"valid",value:e.data}}}ux.create=t=>new ux({typeName:Je.ZodNaN,...st(t)});const pIe=Symbol("zod_brand");class PW extends lt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class $v extends lt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Xe:i.status==="dirty"?(n.dirty(),TW(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Xe:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new $v({in:e,out:n,typeName:Je.ZodPipeline})}}class dx extends lt{_parse(e){const n=this._def.innerType._parse(e);return wb(n)&&(n.value=Object.freeze(n.value)),n}}dx.create=(t,e)=>new dx({innerType:t,typeName:Je.ZodReadonly,...st(e)});const kW=(t,e={},n)=>t?Mm.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):Mm.create(),gIe={object:bn.lazycreate};var Je;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Je||(Je={}));const mIe=(t,e={message:`Input not instance of ${t.name}`})=>kW(n=>n instanceof t,e),OW=Go.create,RW=md.create,yIe=ux.create,wIe=yd.create,DW=bb.create,bIe=xf.create,vIe=ox.create,EIe=vb.create,_Ie=Eb.create,xIe=Mm.create,CIe=Zh.create,AIe=il.create,SIe=ax.create,IIe=Yo.create,TIe=bn.create,NIe=bn.strictCreate,PIe=_b.create,kIe=QC.create,OIe=xb.create,RIe=Qa.create,DIe=Cb.create,$Ie=cx.create,UIe=Cf.create,BIe=gg.create,LIe=Ab.create,MIe=Sb.create,jIe=wd.create,FIe=Ib.create,zIe=jm.create,E4=ea.create,HIe=Gc.create,WIe=Af.create,qIe=ea.createWithPreprocess,GIe=$v.create,VIe=()=>OW().optional(),KIe=()=>RW().optional(),QIe=()=>DW().optional(),JIe={string:t=>Go.create({...t,coerce:!0}),number:t=>md.create({...t,coerce:!0}),boolean:t=>bb.create({...t,coerce:!0}),bigint:t=>yd.create({...t,coerce:!0}),date:t=>xf.create({...t,coerce:!0})},YIe=Xe;var k=Object.freeze({__proto__:null,defaultErrorMap:yb,setErrorMap:tIe,getErrorMap:rx,makeIssue:sx,EMPTY_PATH:nIe,addIssueToContext:$e,ParseStatus:es,INVALID:Xe,DIRTY:TW,OK:vs,isAborted:gP,isDirty:mP,isValid:wb,isAsync:ix,get util(){return Pt},get objectUtil(){return pP},ZodParsedType:ke,getParsedType:su,ZodType:lt,ZodString:Go,ZodNumber:md,ZodBigInt:yd,ZodBoolean:bb,ZodDate:xf,ZodSymbol:ox,ZodUndefined:vb,ZodNull:Eb,ZodAny:Mm,ZodUnknown:Zh,ZodNever:il,ZodVoid:ax,ZodArray:Yo,ZodObject:bn,ZodUnion:_b,ZodDiscriminatedUnion:QC,ZodIntersection:xb,ZodTuple:Qa,ZodRecord:Cb,ZodMap:cx,ZodSet:Cf,ZodFunction:gg,ZodLazy:Ab,ZodLiteral:Sb,ZodEnum:wd,ZodNativeEnum:Ib,ZodPromise:jm,ZodEffects:ea,ZodTransformer:ea,ZodOptional:Gc,ZodNullable:Af,ZodDefault:Tb,ZodCatch:lx,ZodNaN:ux,BRAND:pIe,ZodBranded:PW,ZodPipeline:$v,ZodReadonly:dx,custom:kW,Schema:lt,ZodSchema:lt,late:gIe,get ZodFirstPartyTypeKind(){return Je},coerce:JIe,any:xIe,array:IIe,bigint:wIe,boolean:DW,date:bIe,discriminatedUnion:kIe,effect:E4,enum:jIe,function:BIe,instanceof:mIe,intersection:OIe,lazy:LIe,literal:MIe,map:$Ie,nan:yIe,nativeEnum:FIe,never:AIe,null:_Ie,nullable:WIe,number:RW,object:TIe,oboolean:QIe,onumber:KIe,optional:HIe,ostring:VIe,pipeline:GIe,preprocess:qIe,promise:zIe,record:DIe,set:UIe,strictObject:NIe,string:OW,symbol:vIe,transformer:E4,tuple:RIe,undefined:EIe,union:PIe,unknown:CIe,void:SIe,NEVER:YIe,ZodIssueCode:we,quotelessJson:eIe,ZodError:Jo});const Sn=k.object({message:k.string()});function Oe(t){return k.literal(Be[t])}k.object({accessList:k.array(k.string()),blockHash:k.string().nullable(),blockNumber:k.string().nullable(),chainId:k.string().or(k.number()),from:k.string(),gas:k.string(),hash:k.string(),input:k.string().nullable(),maxFeePerGas:k.string(),maxPriorityFeePerGas:k.string(),nonce:k.string(),r:k.string(),s:k.string(),to:k.string(),transactionIndex:k.string().nullable(),type:k.string(),v:k.string(),value:k.string()});const ZIe=k.object({chainId:k.string().or(k.number())}),XIe=k.object({email:k.string().email()}),eTe=k.object({otp:k.string()}),tTe=k.object({uri:k.string(),preferredAccountType:k.optional(k.string()),chainId:k.optional(k.string().or(k.number()))}),nTe=k.object({chainId:k.optional(k.string().or(k.number())),preferredAccountType:k.optional(k.string()),socialUri:k.optional(k.string())}),rTe=k.object({provider:k.enum(["google","github","apple","facebook","x","discord"])}),sTe=k.object({email:k.string().email()}),iTe=k.object({otp:k.string()}),oTe=k.object({otp:k.string()}),aTe=k.object({themeMode:k.optional(k.enum(["light","dark"])),themeVariables:k.optional(k.record(k.string(),k.string().or(k.number()))),w3mThemeVariables:k.optional(k.record(k.string(),k.string()))}),cTe=k.object({metadata:k.object({name:k.string(),description:k.string(),url:k.string(),icons:k.array(k.string())}).optional(),sdkVersion:k.string().optional(),sdkType:k.string().optional(),projectId:k.string()}),lTe=k.object({type:k.string()}),uTe=k.object({action:k.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),dTe=k.object({url:k.string()}),hTe=k.object({userName:k.string()}),fTe=k.object({email:k.string().optional().nullable(),address:k.string(),chainId:k.string().or(k.number()),accounts:k.array(k.object({address:k.string(),type:k.enum([fr.ACCOUNT_TYPES.EOA,fr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:k.string().optional().nullable(),preferredAccountType:k.optional(k.string())}),pTe=k.object({action:k.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),gTe=k.object({email:k.string().email().optional().nullable(),address:k.string(),chainId:k.string().or(k.number()),smartAccountDeployed:k.optional(k.boolean()),accounts:k.array(k.object({address:k.string(),type:k.enum([fr.ACCOUNT_TYPES.EOA,fr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:k.optional(k.string())}),mTe=k.object({uri:k.string()}),yTe=k.object({isConnected:k.boolean()}),wTe=k.object({chainId:k.string().or(k.number())}),bTe=k.object({chainId:k.string().or(k.number())}),vTe=k.object({newEmail:k.string().email()}),ETe=k.object({smartAccountEnabledNetworks:k.array(k.number())});k.object({address:k.string(),isDeployed:k.boolean()});const _Te=k.object({version:k.string().optional()}),xTe=k.object({type:k.string(),address:k.string()}),CTe=k.any(),ATe=k.object({method:k.literal("eth_accounts")}),STe=k.object({method:k.literal("eth_blockNumber")}),ITe=k.object({method:k.literal("eth_call"),params:k.array(k.any())}),TTe=k.object({method:k.literal("eth_chainId")}),NTe=k.object({method:k.literal("eth_estimateGas"),params:k.array(k.any())}),PTe=k.object({method:k.literal("eth_feeHistory"),params:k.array(k.any())}),kTe=k.object({method:k.literal("eth_gasPrice")}),OTe=k.object({method:k.literal("eth_getAccount"),params:k.array(k.any())}),RTe=k.object({method:k.literal("eth_getBalance"),params:k.array(k.any())}),DTe=k.object({method:k.literal("eth_getBlockByHash"),params:k.array(k.any())}),$Te=k.object({method:k.literal("eth_getBlockByNumber"),params:k.array(k.any())}),UTe=k.object({method:k.literal("eth_getBlockReceipts"),params:k.array(k.any())}),BTe=k.object({method:k.literal("eth_getBlockTransactionCountByHash"),params:k.array(k.any())}),LTe=k.object({method:k.literal("eth_getBlockTransactionCountByNumber"),params:k.array(k.any())}),MTe=k.object({method:k.literal("eth_getCode"),params:k.array(k.any())}),jTe=k.object({method:k.literal("eth_getFilterChanges"),params:k.array(k.any())}),FTe=k.object({method:k.literal("eth_getFilterLogs"),params:k.array(k.any())}),zTe=k.object({method:k.literal("eth_getLogs"),params:k.array(k.any())}),HTe=k.object({method:k.literal("eth_getProof"),params:k.array(k.any())}),WTe=k.object({method:k.literal("eth_getStorageAt"),params:k.array(k.any())}),qTe=k.object({method:k.literal("eth_getTransactionByBlockHashAndIndex"),params:k.array(k.any())}),GTe=k.object({method:k.literal("eth_getTransactionByBlockNumberAndIndex"),params:k.array(k.any())}),VTe=k.object({method:k.literal("eth_getTransactionByHash"),params:k.array(k.any())}),KTe=k.object({method:k.literal("eth_getTransactionCount"),params:k.array(k.any())}),QTe=k.object({method:k.literal("eth_getTransactionReceipt"),params:k.array(k.any())}),JTe=k.object({method:k.literal("eth_getUncleCountByBlockHash"),params:k.array(k.any())}),YTe=k.object({method:k.literal("eth_getUncleCountByBlockNumber"),params:k.array(k.any())}),ZTe=k.object({method:k.literal("eth_maxPriorityFeePerGas")}),XTe=k.object({method:k.literal("eth_newBlockFilter")}),eNe=k.object({method:k.literal("eth_newFilter"),params:k.array(k.any())}),tNe=k.object({method:k.literal("eth_newPendingTransactionFilter")}),nNe=k.object({method:k.literal("eth_sendRawTransaction"),params:k.array(k.any())}),rNe=k.object({method:k.literal("eth_syncing"),params:k.array(k.any())}),sNe=k.object({method:k.literal("eth_uninstallFilter"),params:k.array(k.any())}),_4=k.object({method:k.literal("personal_sign"),params:k.array(k.any())}),iNe=k.object({method:k.literal("eth_signTypedData_v4"),params:k.array(k.any())}),oNe=k.object({method:k.literal("eth_sendTransaction"),params:k.array(k.any())}),aNe=k.object({method:k.literal("solana_signMessage"),params:k.object({message:k.string(),pubkey:k.string()})}),cNe=k.object({method:k.literal("solana_signTransaction"),params:k.object({transaction:k.string()})}),lNe=k.object({method:k.literal("solana_signAllTransactions"),params:k.object({transactions:k.array(k.string())})}),uNe=k.object({method:k.literal("solana_signAndSendTransaction"),params:k.object({transaction:k.string(),options:k.object({skipPreflight:k.boolean().optional(),preflightCommitment:k.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:k.number().optional(),minContextSlot:k.number().optional()}).optional()})}),dNe=k.object({method:k.literal("wallet_sendCalls"),params:k.array(k.object({chainId:k.string().or(k.number()).optional(),from:k.string().optional(),version:k.string().optional(),capabilities:k.any().optional(),calls:k.array(k.object({to:k.string().startsWith("0x"),data:k.string().startsWith("0x").optional(),value:k.string().optional()}))}))}),hNe=k.object({method:k.literal("wallet_getCallsStatus"),params:k.array(k.string())}),fNe=k.object({method:k.literal("wallet_getCapabilities")}),pNe=k.object({method:k.literal("wallet_grantPermissions"),params:k.array(k.any())}),gNe=k.object({method:k.literal("wallet_revokePermissions"),params:k.any()}),mNe=k.object({method:k.literal("wallet_getAssets"),params:k.any()}),x4=k.object({token:k.string()}),Re=k.object({id:k.string().optional()}),o0={appEvent:Re.extend({type:Oe("APP_SWITCH_NETWORK"),payload:ZIe}).or(Re.extend({type:Oe("APP_CONNECT_EMAIL"),payload:XIe})).or(Re.extend({type:Oe("APP_CONNECT_DEVICE")})).or(Re.extend({type:Oe("APP_CONNECT_OTP"),payload:eTe})).or(Re.extend({type:Oe("APP_CONNECT_SOCIAL"),payload:tTe})).or(Re.extend({type:Oe("APP_GET_FARCASTER_URI")})).or(Re.extend({type:Oe("APP_CONNECT_FARCASTER")})).or(Re.extend({type:Oe("APP_GET_USER"),payload:k.optional(nTe)})).or(Re.extend({type:Oe("APP_GET_SOCIAL_REDIRECT_URI"),payload:rTe})).or(Re.extend({type:Oe("APP_SIGN_OUT")})).or(Re.extend({type:Oe("APP_IS_CONNECTED"),payload:k.optional(x4)})).or(Re.extend({type:Oe("APP_GET_CHAIN_ID")})).or(Re.extend({type:Oe("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Re.extend({type:Oe("APP_INIT_SMART_ACCOUNT")})).or(Re.extend({type:Oe("APP_SET_PREFERRED_ACCOUNT"),payload:lTe})).or(Re.extend({type:Oe("APP_RPC_REQUEST"),payload:_4.or(mNe).or(ATe).or(STe).or(ITe).or(TTe).or(NTe).or(PTe).or(kTe).or(OTe).or(RTe).or(DTe).or($Te).or(UTe).or(BTe).or(LTe).or(MTe).or(jTe).or(FTe).or(zTe).or(HTe).or(WTe).or(qTe).or(GTe).or(VTe).or(KTe).or(QTe).or(JTe).or(YTe).or(ZTe).or(XTe).or(eNe).or(tNe).or(nNe).or(rNe).or(sNe).or(_4).or(iNe).or(oNe).or(aNe).or(cNe).or(lNe).or(uNe).or(hNe).or(dNe).or(fNe).or(pNe).or(gNe)})).or(Re.extend({type:Oe("APP_UPDATE_EMAIL"),payload:sTe})).or(Re.extend({type:Oe("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:iTe})).or(Re.extend({type:Oe("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:oTe})).or(Re.extend({type:Oe("APP_SYNC_THEME"),payload:aTe})).or(Re.extend({type:Oe("APP_SYNC_DAPP_DATA"),payload:cTe})).or(Re.extend({type:Oe("APP_RELOAD")})),frameEvent:Re.extend({type:Oe("FRAME_SWITCH_NETWORK_ERROR"),payload:Sn}).or(Re.extend({type:Oe("FRAME_SWITCH_NETWORK_SUCCESS"),payload:bTe})).or(Re.extend({type:Oe("FRAME_CONNECT_EMAIL_SUCCESS"),payload:uTe})).or(Re.extend({type:Oe("FRAME_CONNECT_EMAIL_ERROR"),payload:Sn})).or(Re.extend({type:Oe("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:dTe})).or(Re.extend({type:Oe("FRAME_GET_FARCASTER_URI_ERROR"),payload:Sn})).or(Re.extend({type:Oe("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:hTe})).or(Re.extend({type:Oe("FRAME_CONNECT_FARCASTER_ERROR"),payload:Sn})).or(Re.extend({type:Oe("FRAME_CONNECT_OTP_ERROR"),payload:Sn})).or(Re.extend({type:Oe("FRAME_CONNECT_OTP_SUCCESS")})).or(Re.extend({type:Oe("FRAME_CONNECT_DEVICE_ERROR"),payload:Sn})).or(Re.extend({type:Oe("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Re.extend({type:Oe("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:fTe})).or(Re.extend({type:Oe("FRAME_CONNECT_SOCIAL_ERROR"),payload:Sn})).or(Re.extend({type:Oe("FRAME_GET_USER_ERROR"),payload:Sn})).or(Re.extend({type:Oe("FRAME_GET_USER_SUCCESS"),payload:gTe})).or(Re.extend({type:Oe("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Sn})).or(Re.extend({type:Oe("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:mTe})).or(Re.extend({type:Oe("FRAME_SIGN_OUT_ERROR"),payload:Sn})).or(Re.extend({type:Oe("FRAME_SIGN_OUT_SUCCESS")})).or(Re.extend({type:Oe("FRAME_IS_CONNECTED_ERROR"),payload:Sn})).or(Re.extend({type:Oe("FRAME_IS_CONNECTED_SUCCESS"),payload:yTe})).or(Re.extend({type:Oe("FRAME_GET_CHAIN_ID_ERROR"),payload:Sn})).or(Re.extend({type:Oe("FRAME_GET_CHAIN_ID_SUCCESS"),payload:wTe})).or(Re.extend({type:Oe("FRAME_RPC_REQUEST_ERROR"),payload:Sn})).or(Re.extend({type:Oe("FRAME_RPC_REQUEST_SUCCESS"),payload:CTe})).or(Re.extend({type:Oe("FRAME_SESSION_UPDATE"),payload:x4})).or(Re.extend({type:Oe("FRAME_UPDATE_EMAIL_ERROR"),payload:Sn})).or(Re.extend({type:Oe("FRAME_UPDATE_EMAIL_SUCCESS"),payload:pTe})).or(Re.extend({type:Oe("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Sn})).or(Re.extend({type:Oe("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Re.extend({type:Oe("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Sn})).or(Re.extend({type:Oe("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:vTe})).or(Re.extend({type:Oe("FRAME_SYNC_THEME_ERROR"),payload:Sn})).or(Re.extend({type:Oe("FRAME_SYNC_THEME_SUCCESS")})).or(Re.extend({type:Oe("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Sn})).or(Re.extend({type:Oe("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Re.extend({type:Oe("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:ETe})).or(Re.extend({type:Oe("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Sn})).or(Re.extend({type:Oe("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Sn})).or(Re.extend({type:Oe("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:xTe})).or(Re.extend({type:Oe("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Sn})).or(Re.extend({type:Oe("FRAME_READY"),payload:_Te})).or(Re.extend({type:Oe("FRAME_RELOAD_ERROR"),payload:Sn})).or(Re.extend({type:Oe("FRAME_RELOAD_SUCCESS")}))};function B2(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}class yNe{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=ae.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!B2(Be.FRAME_EVENT_KEY,l))return;const u=o0.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}vi.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{vi.isClient&&window.addEventListener("message",({data:o})=>{if(!B2(Be.FRAME_EVENT_KEY,o))return;const a=o0.frameEvent.parse(o);i(a)})},onAppEvent:i=>{vi.isClient&&window.addEventListener("message",({data:o})=>{if(!B2(Be.APP_EVENT_KEY,o))return;const a=o0.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(vi.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");o0.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(vi.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");o0.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),vi.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${Gue}?projectId=${e}&chainId=${r}&version=${Kue}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class wNe{constructor(e){var i;const n=ly({level:Vue}),{logger:r,chunkLoggerController:s}=aR({opts:n});this.logger=ts(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class bNe{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new wNe(e)),this.abortController=i,this.w3mFrame=new yNe({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Be.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!_r.get(Be.EMAIL_LOGIN_USED_KEY)}getEmail(){return _r.get(Be.EMAIL)}getUsername(){return _r.get(Be.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Be.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{vi.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Be.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Be.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Be.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Be.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Be.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Be.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Be.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Be.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Be.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Be.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Be.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Be.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Be.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:Be.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Be.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:Be.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Be.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Be.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:Be.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Be.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(fr.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:Be.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Be.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Be.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Be.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Be.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Be.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Be.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Be.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:fr.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Be.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===Be.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{fr.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Be.APP_SYNC_DAPP_DATA,Be.APP_SYNC_THEME,Be.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Be.APP_CONNECT_EMAIL,Be.APP_CONNECT_DEVICE,Be.APP_CONNECT_OTP,Be.APP_CONNECT_SOCIAL,Be.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const y=e;this.openRpcRequests=[...this.openRpcRequests,{...y.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(y,w){var v,b,x;y.id===u&&((b=w==null?void 0:(v=w.logger).info)==null||b.call(v,{framEvent:y,id:u},"Received frame response"),y.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&c(y.payload),c(void 0)):y.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&l(new Error(((x=y.payload)==null?void 0:x.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,y=>h(y,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){_r.set(Be.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){_r.set(Be.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&_r.set(Be.EMAIL,e),_r.set(Be.EMAIL_LOGIN_USED_KEY,"true"),_r.delete(Be.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){_r.delete(Be.EMAIL_LOGIN_USED_KEY),_r.delete(Be.EMAIL),_r.delete(Be.LAST_USED_CHAIN_KEY),_r.delete(Be.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&_r.set(Be.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=_r.get(Be.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){_r.set(Be.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}}class Xh{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return Xh.instance||(Xh.instance=new bNe({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),Xh.instance}}var C4={};const vNe={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof C4<"u"?C4.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},wP={filterOutDuplicatesByRDNS(t){const e=pe.state.enableEIP6963?Ce.state.connectors:[],n=_e.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&je.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=Ce.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=_e.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Ce.state,{featuredWalletIds:n}=pe.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=pe.state.features)==null?void 0:c.connectMethodsOrder),r=e||Ce.state.connectors;if(n)return n;const{injected:s,announced:i}=HE.getConnectorsByType(r,ze.state.recommended,ze.state.featured),o=s.filter(HE.showConnector),a=i.filter(HE.showConnector);return o.length||a.length?["wallet","email","social"]:vNe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&ze.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&ze.state.excludedWallets.some(r=>mb.isLowerCaseMatch(r.name,t.name));return e||n}},HE={getConnectorsByType(t,e,n){const{customWallets:r}=pe.state,s=_e.getRecentWallets(),i=wP.filterOutDuplicateWallets(e),o=wP.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&ze.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&ze.state.excludedWallets.some(i=>mb.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!je.isMobile()||je.isMobile()&&!e&&!De.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(B.state.chains.values()).some(n=>Ce.getConnectorId(n.namespace)===ae.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=pe.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=HE.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:pe.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(w=>w.isEnabled),p=new Set(f.map(w=>w.type)),g=c.filter(w=>p.has(w)).map(w=>({type:w,isEnabled:!0})),y=f.filter(({type:w})=>!g.some(({type:b})=>b===w));return Array.from(new Set([...g,...y].map(({type:w})=>w)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!je.isMobile())return{accounts:[],chainId:void 0};if(t.id===ae.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const WE=globalThis,FR=WE.ShadowRoot&&(WE.ShadyCSS===void 0||WE.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,zR=Symbol(),A4=new WeakMap;let $W=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==zR)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(FR&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=A4.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&A4.set(n,e))}return e}toString(){return this.cssText}};const Fi=t=>new $W(typeof t=="string"?t:t+"",void 0,zR),mg=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new $W(n,t,zR)},ENe=(t,e)=>{if(FR)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=WE.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},S4=FR?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return Fi(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:_Ne,defineProperty:xNe,getOwnPropertyDescriptor:CNe,getOwnPropertyNames:ANe,getOwnPropertySymbols:SNe,getPrototypeOf:INe}=Object,rd=globalThis,I4=rd.trustedTypes,TNe=I4?I4.emptyScript:"",L2=rd.reactiveElementPolyfillSupport,iw=(t,e)=>t,bP={toAttribute(t,e){switch(e){case Boolean:t=t?TNe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},UW=(t,e)=>!_Ne(t,e),T4={attribute:!0,type:String,converter:bP,reflect:!1,useDefault:!1,hasChanged:UW};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),rd.litPropertyMetadata??(rd.litPropertyMetadata=new WeakMap);let Op=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=T4){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&xNe(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=CNe(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??T4}static _$Ei(){if(this.hasOwnProperty(iw("elementProperties")))return;const e=INe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(iw("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(iw("properties"))){const n=this.properties,r=[...ANe(n),...SNe(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(S4(s))}else e!==void 0&&n.push(S4(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return ENe(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:bP).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:bP;this._$Em=s,this[s]=c.fromAttribute(n,a.type)??((o=this._$Ej)==null?void 0:o.get(s))??null,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??UW)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};Op.elementStyles=[],Op.shadowRootOptions={mode:"open"},Op[iw("elementProperties")]=new Map,Op[iw("finalized")]=new Map,L2==null||L2({ReactiveElement:Op}),(rd.reactiveElementVersions??(rd.reactiveElementVersions=[])).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ow=globalThis,hx=ow.trustedTypes,N4=hx?hx.createPolicy("lit-html",{createHTML:t=>t}):void 0,BW="$lit$",iu=`lit$${Math.random().toFixed(9).slice(2)}$`,LW="?"+iu,NNe=`<${LW}>`,Sf=document,Nb=()=>Sf.createComment(""),Pb=t=>t===null||typeof t!="object"&&typeof t!="function",HR=Array.isArray,PNe=t=>HR(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",M2=`[ 	
\f\r]`,a0=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,P4=/-->/g,k4=/>/g,Bd=RegExp(`>|${M2}(?:([^\\s"'>=/]+)(${M2}*=${M2}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),O4=/'/g,R4=/"/g,MW=/^(?:script|style|textarea|title)$/i,jW=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),qUe=jW(1),GUe=jW(2),Fm=Symbol.for("lit-noChange"),lr=Symbol.for("lit-nothing"),D4=new WeakMap,gh=Sf.createTreeWalker(Sf,129);function FW(t,e){if(!HR(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return N4!==void 0?N4.createHTML(e):e}const kNe=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=a0;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===a0?u[1]==="!--"?o=P4:u[1]!==void 0?o=k4:u[2]!==void 0?(MW.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=Bd):u[3]!==void 0&&(o=Bd):o===Bd?u[0]===">"?(o=s??a0,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Bd:u[3]==='"'?R4:O4):o===R4||o===O4?o=Bd:o===P4||o===k4?o=a0:(o=Bd,s=void 0);const f=o===Bd&&t[a+1].startsWith("/>")?" ":"";i+=o===a0?c+NNe:d>=0?(r.push(l),c.slice(0,d)+BW+c.slice(d)+iu+f):c+iu+(d===-2?a:f)}return[FW(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class kb{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=kNe(e,n);if(this.el=kb.createElement(l,r),gh.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=gh.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(BW)){const h=u[o++],f=s.getAttribute(d).split(iu),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?RNe:p[1]==="?"?DNe:p[1]==="@"?$Ne:JC}),s.removeAttribute(d)}else d.startsWith(iu)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(MW.test(s.tagName)){const d=s.textContent.split(iu),h=d.length-1;if(h>0){s.textContent=hx?hx.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],Nb()),gh.nextNode(),c.push({type:2,index:++i});s.append(d[h],Nb())}}}else if(s.nodeType===8)if(s.data===LW)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(iu,d+1))!==-1;)c.push({type:7,index:i}),d+=iu.length-1}i++}}static createElement(e,n){const r=Sf.createElement("template");return r.innerHTML=e,r}}function zm(t,e,n=t,r){var o,a;if(e===Fm)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=Pb(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=zm(t,s._$AS(t,e.values),s,r)),e}class ONe{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??Sf).importNode(n,!0);gh.currentNode=s;let i=gh.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new Uv(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new UNe(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=gh.nextNode(),o++)}return gh.currentNode=Sf,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class Uv{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=lr,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=zm(this,e,n),Pb(e)?e===lr||e==null||e===""?(this._$AH!==lr&&this._$AR(),this._$AH=lr):e!==this._$AH&&e!==Fm&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):PNe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==lr&&Pb(this._$AH)?this._$AA.nextSibling.data=e:this.T(Sf.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=kb.createElement(FW(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new ONe(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=D4.get(e.strings);return n===void 0&&D4.set(e.strings,n=new kb(e)),n}k(e){HR(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new Uv(this.O(Nb()),this.O(Nb()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class JC{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=lr,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=lr}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=zm(this,e,n,0),o=!Pb(e)||e!==this._$AH&&e!==Fm,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=zm(this,a[r+c],n,c),l===Fm&&(l=this._$AH[c]),o||(o=!Pb(l)||l!==this._$AH[c]),l===lr?e=lr:e!==lr&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===lr?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class RNe extends JC{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===lr?void 0:e}}class DNe extends JC{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==lr)}}class $Ne extends JC{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=zm(this,e,n,0)??lr)===Fm)return;const r=this._$AH,s=e===lr&&r!==lr||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==lr&&(r===lr||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class UNe{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){zm(this,e)}}const j2=ow.litHtmlPolyfillSupport;j2==null||j2(kb,Uv),(ow.litHtmlVersions??(ow.litHtmlVersions=[])).push("3.3.0");const BNe=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new Uv(e.insertBefore(Nb(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ef=globalThis;let qE=class extends Op{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=BNe(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Fm}};var BB;qE._$litElement$=!0,qE.finalized=!0,(BB=ef.litElementHydrateSupport)==null||BB.call(ef,{LitElement:qE});const F2=ef.litElementPolyfillSupport;F2==null||F2({LitElement:qE});(ef.litElementVersions??(ef.litElementVersions=[])).push("4.2.0");let aw,sd,id;function KUe(t,e){aw=document.createElement("style"),sd=document.createElement("style"),id=document.createElement("style"),aw.textContent=yg(t).core.cssText,sd.textContent=yg(t).dark.cssText,id.textContent=yg(t).light.cssText,document.head.appendChild(aw),document.head.appendChild(sd),document.head.appendChild(id),zW(e)}function zW(t){sd&&id&&(t==="light"?(sd.removeAttribute("media"),id.media="enabled"):(id.removeAttribute("media"),sd.media="enabled"))}function LNe(t){aw&&sd&&id&&(aw.textContent=yg(t).core.cssText,sd.textContent=yg(t).dark.cssText,id.textContent=yg(t).light.cssText)}function yg(t){return{core:mg`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${Fi(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${Fi((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${Fi((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${Fi((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${Fi((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:mg`
      :root {
        --w3m-color-mix: ${Fi((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${Fi(jc(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${Fi(jc(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:mg`
      :root {
        --w3m-color-mix: ${Fi((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${Fi(jc(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${Fi(jc(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const QUe=mg`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,JUe=mg`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,YUe=mg`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,T0={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},HW=Ree({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function Bv(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const $4=Bv({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),U4=Bv({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});Bv({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});Bv({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});Bv({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const MNe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},cw={getMethodsByChainNamespace(t){return MNe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case $4.caipNetworkId:u.chains.push($4.deprecatedCaipNetworkId);break;case U4.caipNetworkId:u.chains.push(U4.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await K0.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};class WR{constructor({provider:e,namespace:n}){this.id=ae.CONNECTOR_ID.WALLET_CONNECT,this.name=ju.ConnectorNamesMap[ae.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=ju.ConnectorImageIds[ae.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=B.getCaipNetworks.bind(B),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=pe.state.universalProviderConfigOverride,s=cw.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return sw.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:jNe})}}const jNe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class WW{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>B.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:ae.CONNECTOR_ID.AUTH,type:"AUTH",name:ae.CONNECTOR_NAMES.AUTH,provider:e,imageId:ju.ConnectorImageIds[ae.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){Ee.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=Ee.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof WR);if(!e)throw new Error("WalletConnectConnector not found");return e}}class FNe extends WW{setUniversalProvider(e){this.addConnector(new WR({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>je.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&zt.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(Ee.state.balanceLoading&&e.chainId===((c=B.state.activeCaipNetwork)==null?void 0:c.id))return{balance:Ee.state.balance||"0.00",symbol:Ee.state.balanceSymbol||""};const s=(await Ee.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=B.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===ae.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:py.encode(new TextEncoder().encode(r)),pubkey:s}},(a=B.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=B.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===ae.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:uf(n.id)}]}))}catch(u){if(u.code===T0.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===T0.ERROR_INVALID_CHAIN_ID||u.code===T0.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===T0.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:uf(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const zNe=["email","socials","swaps","onramp","activity","reownBranding"],Y1={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?zt.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?zt.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?zt.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?zt.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?zt.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?zt.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?zt.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?zt.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?zt.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},HNe={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=Y1[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=Y1[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return Y1[t].processApi(e)},processFallbackFeature(t,e){return Y1[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await ze.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?zt.DEFAULT_REMOTE_FEATURES:zt.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of zNe){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),zt.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Fn.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class WNe{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=B.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=B.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=B.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return B.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>B.getCaipNetworks(n),this.getActiveChainNamespace=()=>B.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{B.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>B.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>B.state.activeChain===n||!n?B.state.activeCaipAddress:B.getAccountProp("caipAddress",n),this.setClientId=n=>{qe.setClientId(n)},this.getProvider=n=>Jt.getProvider(n),this.getProviderType=n=>Jt.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=Ee.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{Ee.setCaipAddress(n,r),n&&pe.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{Ee.setBalance(n,r,s)},this.setProfileName=(n,r)=>{Ee.setProfileName(n,r)},this.setProfileImage=(n,r)=>{Ee.setProfileImage(n,r)},this.setUser=(n,r)=>{Ee.setUser(n,r)},this.resetAccount=n=>{Ee.resetAccount(n)},this.setCaipNetwork=n=>{B.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{B.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{Ee.setAllAccounts(n,r),pe.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{Ee.setStatus(n,r),Ce.isConnected()?_e.setConnectionStatus("connected"):_e.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>B.getAccountProp("address",n),this.setConnectors=n=>{const r=[...Ce.state.allConnectors,...n];Ce.setConnectors(r)},this.setConnections=(n,r)=>{De.setConnections(n,r)},this.fetchIdentity=n=>qe.fetchIdentity(n),this.getReownName=n=>K0.getNamesForAddress(n),this.getConnectors=()=>Ce.getConnectors(),this.getConnectorImage=n=>m7.getConnectorImage(n),this.getConnections=n=>ob.getConnectionsData(n).connections,this.getRecentConnections=n=>ob.getConnectionsData(n).recentConnections,this.switchConnection=n=>De.switchConnection(n),this.deleteConnection=n=>_e.deleteAddressFromConnection(n),this.setConnectedWalletInfo=(n,r)=>{const s=Jt.getProviderId(r),i=n?{...n,type:s}:void 0;Ee.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!B.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{Ee.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{Ee.removeAddressLabel(n,r)},this.getAddress=n=>B.state.activeChain===n||!n?Ee.state.address:B.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>B.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{B.resetNetwork(n)},this.addConnector=n=>{Ce.addConnector(n)},this.resetWcConnection=()=>{De.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{Ee.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{Ee.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{B.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{Ee.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{pe.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await HNe.fetchRemoteFeatures(e),pe.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&wN.setOnrampProviders(this.remoteFeatures.onramp),((n=pe.state.remoteFeatures)!=null&&n.email||Array.isArray((r=pe.state.remoteFeatures)==null?void 0:r.socials)&&((s=pe.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){try{const e=await ze.fetchAllowedOrigins();if(!e||!je.isClient()){Fn.open(wn.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const n=window.location.origin;cw.isOriginAllowed(n,e,T0.DEFAULT_ALLOWED_ANCESTORS)||Fn.open(wn.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}catch(e){if(!(e instanceof Error)){Fn.open(wn.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":Fn.open(wn.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const n=e.cause instanceof Error?e.cause:e;Fn.open({shortMessage:wn.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.shortMessage,longMessage:wn.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.longMessage(n.message)},"error");break}default:Fn.open(wn.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,Ht.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Fs.setThemeMode(e.themeMode),e.themeVariables&&Fs.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");B.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&B.setActiveCaipNetwork(n)}initializeConnectionController(e){De.initialize(e.adapters??[]),De.setWcBasic(e.basic??!1)}initializeConnectorController(){Ce.initialize(this.chainNamespaces)}initializeProjectSettings(e){pe.setProjectId(e.projectId),pe.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;pe.setDebug(e.debug!==!1),pe.setEnableWalletConnect(e.enableWalletConnect!==!1),pe.setEnableWalletGuide(e.enableWalletGuide!==!1),pe.setEnableWallets(e.enableWallets!==!1),pe.setEIP6963Enabled(e.enableEIP6963!==!1),pe.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),pe.setEnableAuthLogger(e.enableAuthLogger!==!1),pe.setCustomRpcUrls(e.customRpcUrls),pe.setEnableEmbedded(e.enableEmbedded),pe.setAllWallets(e.allWallets),pe.setIncludeWalletIds(e.includeWalletIds),pe.setExcludeWalletIds(e.excludeWalletIds),pe.setFeaturedWalletIds(e.featuredWalletIds),pe.setTokens(e.tokens),pe.setTermsConditionsUrl(e.termsConditionsUrl),pe.setPrivacyPolicyUrl(e.privacyPolicyUrl),pe.setCustomWallets(e.customWallets),pe.setFeatures(e.features),pe.setAllowUnsupportedChain(e.allowUnsupportedChain),pe.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),pe.setPreferUniversalLinks(e.experimental_preferUniversalLinks),pe.setDefaultAccountTypes(e.defaultAccountTypes);const n=_e.getPreferredAccountTypes()||{},r={...pe.state.defaultAccountTypes,...n};Ee.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),pe.setMetadata(e.metadata),pe.setDisableAppend(e.disableAppend),pe.setEnableEmbedded(e.enableEmbedded),pe.setSIWX(e.siwx),!e.projectId){Fn.open(wn.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===ae.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");pe.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return je.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=Da.getUnsupportedNetwork(`${n}:${e}`);B.setActiveCaipNetwork(r)}}getDefaultNetwork(){return Da.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return Da.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return Da.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?Da.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=Jt.getProvider(e),s=Jt.getProviderId(e),{caipAddress:i}=B.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),_e.removeConnectedNamespace(e),Jt.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),Ce.removeConnectorId(e),B.resetAccount(e),B.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=B.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),_e.setConnectedNamespaces([...B.state.chains.keys()]),this.chainNamespaces.forEach(o=>{Ce.setConnectorId(hn.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,y,w,v,b,x;const c=B.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const _=this.getCaipNetworks().find(C=>C.chainNamespace===i);_&&this.setCaipNetwork(_)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((w=(y=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:y.http)==null?void 0:w[0])||((x=(b=(v=d==null?void 0:d.rpcUrls)==null?void 0:v.default)==null?void 0:b.http)==null?void 0:x[0])});if(!h)return;_e.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=Ee.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=B.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),_e.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async({chainNamespace:e}={})=>{const n=Xue(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));Ot.resetSend(),De.resetWcConnection(),await sw.clearSessions(),Ce.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));_e.deleteConnectedSocialProvider(),Ht.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(B.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:Ee.state.address,provider:Jt.getProvider(B.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(zt.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(B.state.activeChain),s=Jt.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===ae.CHAIN.EVM){const n=this.getAdapter(B.state.activeChain),r=Jt.getProvider(B.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:Ee.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:B.state.activeChain}),Ee.state.profileImage||!1},getEnsAddress:async e=>await cw.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(B.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=Jt.getProvider(B.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(B.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(B.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(B.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(B.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(B.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(B.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!Ee.state.address||this.updateNativeBalance(Ee.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},De.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(Jt.getProviderId(B.state.activeChain)===hn.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=Jt.getProvider(n),i=Jt.getProviderId(n);if(e.chainNamespace===B.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===hn.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=wi.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new FNe({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=_e.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(_e.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=B.state.activeChain===e,c=B.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=Ee.state.address,i=B.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=B.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=B.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=B.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===ae.CHAIN.EVM&&je.isSafeApp()&&Ce.setConnectorId(ae.CONNECTOR_ID.SAFE,e);const n=Ce.getConnectorId(e);switch(this.setStatus("connecting",e),n){case ae.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case ae.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=Ce.getConnectorId(e),s=this.getCaipNetwork(e),o=Ce.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([je.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){var r,s;const e=Object.keys(((s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)||{}),n=this.chainNamespaces.map(async i=>{var u,d,h,f,p;const o=this.getAdapter(i),a=((f=(h=(d=(u=this.universalProvider)==null?void 0:u.session)==null?void 0:d.namespaces)==null?void 0:h[i])==null?void 0:f.accounts)||[],c=(p=B.state.activeCaipNetwork)==null?void 0:p.id,l=a.find(g=>{const{chainId:y}=wi.parseCaipAddress(g);return y===(c==null?void 0:c.toString())})||a[0];if(l){const g=wi.validateCaipAddress(l),{chainId:y,address:w}=wi.parseCaipAddress(g);if(Jt.setProviderId(i,hn.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&B.state.activeCaipNetwork&&(o==null?void 0:o.namespace)!==ae.CHAIN.EVM){const v=o==null?void 0:o.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:B.state.activeCaipNetwork});Jt.setProvider(i,v)}else Jt.setProvider(i,this.universalProvider);Ce.setConnectorId(ae.CONNECTOR_ID.WALLET_CONNECT,i),_e.addConnectedNamespace(i),this.syncWalletConnectAccounts(i),await this.syncAccount({address:w,chainId:y,chainNamespace:i})}else e.includes(i)&&this.setStatus("disconnected",i);this.syncConnectedWalletInfo(i),await B.setApprovedCaipNetworksData(i)});await Promise.all(n)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=wi.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>je.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){Jt.setProviderId(s,e),Jt.setProvider(s,n),Ce.setConnectorId(r,s)}async syncAllAccounts(e){const n=Ce.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===B.state.activeChain,r=B.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=_e.getActiveNetworkProps(),c=i||a,l=((d=B.state.activeCaipNetwork)==null?void 0:d.name)===ae.UNSUPPORTED_NETWORK_NAME,u=B.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(y=>y.id.toString()===c.toString()),p=this.getCaipNetworks().find(y=>y.chainNamespace===o);if(!u&&!f&&!p){const y=this.getApprovedCaipNetworkIds()||[],w=y.find(b=>{var x;return((x=wi.parseCaipNetworkId(b))==null?void 0:x.chainId)===c.toString()}),v=y.find(b=>{var x;return((x=wi.parseCaipNetworkId(b))==null?void 0:x.chainNamespace)===o});f=this.getCaipNetworks().find(b=>b.caipNetworkId===w),p=this.getCaipNetworks().find(b=>b.caipNetworkId===v||"deprecatedCaipNetworkId"in b&&b.deprecatedCaipNetworkId===v)}const g=f||p;(g==null?void 0:g.chainNamespace)===B.state.activeChain?pe.state.enableNetworkSwitch&&!pe.state.allowUnsupportedChain&&((h=B.state.activeCaipNetwork)==null?void 0:h.name)===ae.UNSUPPORTED_NETWORK_NAME?B.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),mb.isLowerCaseMatch(s,Ee.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=Ce.getConnectorId(e),r=Jt.getProviderId(e);if(r===hn.CONNECTOR_TYPE_ANNOUNCED||r===hn.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===hn.CONNECTOR_TYPE_WALLET_CONNECT){const i=Jt.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===ae.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===ae.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!ib.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=B.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=Z2e.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};pe.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await Q2e.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{De.setUri(e)}),this.universalProvider.on("connect",De.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),De.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(cw.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&je.isCaipAddress(r[0])&&this.syncAccount(wi.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&je.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Ht.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(wn.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=wn.ALERT_ERRORS[o];a&&(Fn.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&De.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return $t.open({...e,data:{swap:e.arguments}})}return $t.open(e)}async close(){await this.injectModalUi(),$t.close()}setLoading(e,n){$t.setLoading(e,n)}async disconnect(e){await De.disconnect({namespace:e})}getSIWX(){return pe.state.siwx}getError(){return""}getChainId(){var e;return(e=B.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){Fn.open(wn.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await B.switchActiveNetwork(n)}getWalletProvider(){return B.state.activeChain?Jt.state.providers[B.state.activeChain]:null}getWalletProviderType(){return Jt.getProviderId(B.state.activeChain)}subscribeProviders(e){return Jt.subscribeProviders(e)}getThemeMode(){return Fs.state.themeMode}getThemeVariables(){return Fs.state.themeVariables}setThemeMode(e){Fs.setThemeMode(e),zW(Fs.state.themeMode)}setTermsConditionsUrl(e){pe.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){pe.setPrivacyPolicyUrl(e)}setThemeVariables(e){Fs.setThemeVariables(e),LNe(Fs.state.themeVariables)}subscribeTheme(e){return Fs.subscribe(e)}subscribeConnections(e){return De.subscribe(e)}getWalletInfo(e){return e?B.getAccountProp("connectedWalletInfo",e):Ee.state.connectedWalletInfo}getAccount(e){var o;const n=Ce.getAuthConnector(e),r=B.getAccountData(e),s=B.state.activeChain,i=_e.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:je.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===ae.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:_e.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?B.subscribeChainProp("accountState",r,n):B.subscribe(r),Ce.subscribe(r)}subscribeNetwork(e){return B.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e,n){return n?Ee.subscribeKey("connectedWalletInfo",e,n):Ee.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Ee.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){B.subscribeKey("activeCaipNetwork",e)}getState(){return Fa.state}subscribeState(e){return Fa.subscribe(e)}showErrorMessage(e){Ho.showError(e)}showSuccessMessage(e){Ho.showSuccess(e)}getEvent(){return{...Ht.state}}subscribeEvents(e){return Ht.subscribe(e)}replace(e){Ke.replace(e)}redirect(e){Ke.push(e)}popTransactionStack(e){Ke.popTransactionStack(e)}isOpen(){return $t.state.open}isTransactionStackEmpty(){return Ke.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){pe.setFeatures(e)}updateRemoteFeatures(e){pe.setRemoteFeatures(e)}updateOptions(e){const r={...pe.state||{},...e};pe.setOptions(r)}setConnectMethodsOrder(e){pe.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){pe.setWalletFeaturesOrder(e)}setCollapseWallets(e){pe.setCollapseWallets(e)}setSocialsOrder(e){pe.setSocialsOrder(e)}getConnectMethodsOrder(){return wP.getConnectOrderMethod(pe.state.features,Ce.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||B.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&B.removeNetwork(e,n)}}let B4=!1;class qNe extends WNe{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{vi.checkIfRequestExists(n)?vi.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(fr.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(fr.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=vi.checkIfRequestIsSafe(r),i=Ee.state.address,o=B.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=B.state.activeChain;Ce.getConnectorId(n)===ae.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=B.state.activeChain,s=r===ae.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=pe.state.defaultAccountTypes[r],o=(l=Ee.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;mb.isLowerCaseMatch(n.address,Ee.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...Ee.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>je.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[je.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...Ee.state.user||{},username:n},B.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,B.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,B.state.activeChain)})}async syncAuthConnector(e,n){var d,h,f,p;const r=ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n),s=n===B.state.activeChain;if(!r)return;this.setLoading(!0,n);const i=e.getLoginEmailUsed();this.setLoading(i,n),i&&this.setStatus("connecting",n);const o=e.getEmail(),a=e.getUsername();this.setUser({...((d=Ee.state)==null?void 0:d.user)||{},username:a,email:o},n),this.setupAuthConnectorListeners(e);const{isConnected:c}=await e.isConnected(),l=Fs.getSnapshot(),u=pe.getSnapshot();await Promise.all([e.syncDappData({metadata:u.metadata,sdkVersion:u.sdkVersion,projectId:u.projectId,sdkType:u.sdkType}),e.syncTheme({themeMode:l.themeMode,themeVariables:l.themeVariables,w3mThemeVariables:jc(l.themeVariables,l.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&s&&(c&&((h=this.connectionControllerClient)!=null&&h.connectExternal)?(await((p=this.connectionControllerClient)==null?void 0:p.connectExternal({id:ae.CONNECTOR_ID.AUTH,info:{name:ae.CONNECTOR_ID.AUTH},type:hn.CONNECTOR_TYPE_AUTH,provider:e,chainId:(f=B.state.activeCaipNetwork)==null?void 0:f.id,chain:n})),this.setStatus("connected",n)):Ce.getConnectorId(n)===ae.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),_e.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!je.isTelegram())return;const r=_e.getTelegramSocialProvider();if(!r||!je.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;Ee.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=Ce.getAuthConnector();r&&o&&(this.setLoading(!0,e),await De.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),_e.setConnectedSocialProvider(r),_e.removeTelegramSocialProvider(),Ht.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var l,u,d,h;if(!ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(l=this.remoteFeatures)==null?void 0:l.email,s=Array.isArray((u=this.remoteFeatures)==null?void 0:u.socials)&&this.remoteFeatures.socials.length>0,i=r||s,a=mb.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&((d=this.options)!=null&&d.projectId)&&i&&(this.authProvider=Xh.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(h=this.getCaipNetwork(a))==null?void 0:h.caipNetworkId,abortController:wn.EmbeddedWalletAbortController,onTimeout:f=>{f==="iframe_load_failed"?Fn.open(wn.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):f==="iframe_request_timeout"?Fn.open(wn.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):f==="unverified_domain"&&Fn.open(wn.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),Fa.subscribeOpen(f=>{var p;!f&&this.isTransactionStackEmpty()&&((p=this.authProvider)==null||p.rejectRpcRequests())}));const c=e===B.state.activeChain;this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&ze.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=B.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=Jt.getProvider(r),u=Jt.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=Jt.getProviderId(n)===hn.CONNECTOR_TYPE_AUTH,u=Jt.getProviderId(r),d=u===hn.CONNECTOR_TYPE_AUTH,h=ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(B.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:ae.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:hn.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===hn.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Fa.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==ae.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=Jt.getProviderId(e);if(n===hn.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=_e.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(je.isClient()&&!B4)try{const e={...zt.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),je.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!pe.state.disableAppend&&!pe.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}B4=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!je.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(Rn(()=>import("./embedded-wallet-CdAkcKbA.js"),__vite__mapDeps([3,4,5,6,7,8,9,10,11,12,13,14]))),n.email&&r.push(Rn(()=>import("./email-BURKtR_J.js"),__vite__mapDeps([15,4,14,8,13,7,12,16,9]))),n.socials&&r.push(Rn(()=>import("./socials-CsKMtMw_.js"),__vite__mapDeps([17,4,18,7,19,20,13,21,12,8,14,22,6,23]))),n.swaps&&n.swaps.length>0&&r.push(Rn(()=>import("./swaps-OXtdc8Oz.js"),__vite__mapDeps([24,4,12,8,25,26,27,6,13,23,9,7]))),e.send&&r.push(Rn(()=>import("./send-DOw8FzNO.js"),__vite__mapDeps([28,4,12,8,13,7,19,14,27,6,9,29,30]))),e.receive&&r.push(Rn(()=>import("./receive-DUgL14du.js"),__vite__mapDeps([31,4,32,6,22]))),n.onramp&&n.onramp.length>0&&r.push(Rn(()=>import("./onramp-D3sdlvH8.js"),__vite__mapDeps([33,4,34,23,13,6,8,35,18,7,19,36,14,12,21,9]))),n.activity&&r.push(Rn(()=>import("./transactions-B_RKq55o.js"),__vite__mapDeps([37,4,38,34,23,13,14,6]))),e.pay&&r.push(Rn(()=>import("./index-Dl2FmEQc.js"),__vite__mapDeps([39,4,12,8,40,6,13,10,35,30,21]))),await Promise.all([...r,Rn(()=>import("./index-Blvz3iw8.js"),__vite__mapDeps([41,4,6,8,29,13,42,26,10,35,12,11,40,38,34,23,14,25,30,7,9,16,18,19,20,5,21,32,22,36])),Rn(()=>import("./w3m-modal-CvGgQNBx.js"),__vite__mapDeps([43,4,10,6,13,11,8,26,42]))])}}let zl;function GNe(t){t&&(zl=t)}function YC(){if(!zl)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(zl==null?void 0:zl.open(n))}async function e(){await(zl==null?void 0:zl.close())}return{open:t,close:e}}const VNe="1.7.10";let Z1;function KNe(t){return Z1||(Z1=new qNe({...t,sdkVersion:je.generateSdkVersion(t.adapters??[],"react",VNe)}),GNe(Z1)),Z1}const QNe=ra({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),L4=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],JNe=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=QNe({isOpen:t}),{open:i}=YC(),o=D.useRef(null),[a,c]=D.useState([]),[l,u]=D.useState(!0),[d,h]=D.useState(null),[f,p]=D.useState("all"),[g,y]=D.useState(1),[w,v]=D.useState(1),[b,x]=D.useState(0),[_,C]=D.useState(null),[S,T]=D.useState(L4[0]),[A,P]=D.useState(!1),[R,j]=D.useState(null),z=D.useCallback(async()=>{var $,M;try{if(($=window.solana)!=null&&$.isPhantom){const G=await window.solana.connect();j(G.publicKey.toString());return}if((M=window.solflare)!=null&&M.isSolflare){const G=await window.solflare.connect();j(G.publicKey.toString());return}i()}catch(G){console.error("Failed to connect Solana wallet:",G),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}P(!1)},[i]);D.useEffect(()=>{var $,M;($=window.solana)!=null&&$.publicKey?j(window.solana.publicKey.toString()):(M=window.solflare)!=null&&M.publicKey&&j(window.solflare.publicKey.toString())},[]),D.useEffect(()=>{t&&(async()=>{var M;u(!0),h(null);try{let G,X=f==="owned"&&r||void 0;if(S.api==="opensea-solana"){if(f==="owned"&&!R){P(!0),u(!1);return}X=R||void 0,G=await h7(S.slug,50),console.log("Fetched Solana NFTs from collection:",G.data.length),f==="owned"&&R&&(console.log("Filtering for owner:",R),console.log("Sample NFT owner data:",(M=G.data[0])==null?void 0:M.owners),console.log("All NFTs owner data:",G.data.map(se=>({name:se.name,owners:se.owners,owner_of:se.owner_of}))),G.data.some(se=>se.owners&&se.owners.length>0)?(G.data=G.data.filter(se=>{const ce=se.owners.some(ye=>ye.owner_of&&ye.owner_of.toLowerCase()===R.toLowerCase());return ce&&console.log("Found owned NFT:",se.name),ce}),console.log("NFTs after filtering:",G.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else S.api==="opensea"?G=await nR(S.slug,50,X):G=await tR(S.slug,g,50,X);c(G.data),v(G.totalPages),x(G.totalCount)}catch(G){G instanceof Error?h(G.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,S,R]),D.useEffect(()=>{A&&z()},[A,z]);const K=$=>new Date($).toLocaleDateString(),I=$=>S.api==="opensea-solana"&&(!$.owners||$.owners.length===0)?"Owner data unavailable":$.owners.length>0?`${$.owners[0].owner_of.substring(0,6)}...`:"N/A",N=()=>{n&&n()},L=async $=>{if(S.api==="opensea"&&S.chain)try{const M=await d7(S.chain,$.address,$.token_id.toString()),G={...$,attributes:JSON.stringify(M.traits||[])};C(G)}catch(M){console.error("Failed to fetch full NFT details",M),C($)}else C($)},U=$=>{T($),y(1)};return t?m.jsxs(m.Fragment,{children:[m.jsx(_v,{nodeRef:o,handle:`.${s.header}`,children:m.jsxs("div",{ref:o,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"LAWB NFT GALLERY"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:N,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),m.jsx("div",{className:s.collectionSelector,children:L4.map($=>m.jsx("button",{className:`${s.collectionButton} ${S.slug===$.slug?"active":""}`,onClick:()=>U($),children:$.name},$.slug))}),m.jsxs("div",{className:s.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),m.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!R,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||R?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||R?1:.6},children:"My NFTs"}),S.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{z()},style:{background:R?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:R?"white":"black",marginLeft:"auto"},children:R?`Solana: ${R.slice(0,4)}...${R.slice(-4)}`:"Connect Solana"})]}),S.api==="opensea-solana"&&!R&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?m.jsx("div",{children:"Loading NFTs..."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${b} total)`,f==="recent"&&`Recently minted NFTs by ${S.api==="opensea-solana"?(R==null?void 0:R.slice(0,6))+"..."+(R==null?void 0:R.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${S.api==="opensea-solana"?(R==null?void 0:R.slice(0,6))+"..."+(R==null?void 0:R.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?m.jsx("div",{children:"No NFTs found."}):m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map($=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{L($)},children:[m.jsx("div",{style:{width:"100%",height:"150px",backgroundImage:`url(${$.image_url})`,backgroundSize:"cover",backgroundPosition:"center",marginBottom:"10px",border:"1px solid #ccc"}}),m.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:m.jsxs("strong",{children:["#",$.token_id]})}),m.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",I($)]}),m.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",K($.created_at)]})]},$.id))}),f!=="recent"&&w>1&&m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[m.jsx("button",{onClick:()=>y($=>Math.max(1,$-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),m.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",w]}),m.jsx("button",{onClick:()=>y($=>Math.min(w,$+1)),disabled:g===w,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===w?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),_&&m.jsx(oue,{nft:_,onClose:()=>C(null)})]}):null};var X1,YNe=new Uint8Array(16);function ZNe(){if(!X1&&(X1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!X1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return X1(YNe)}const XNe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ePe(t){return typeof t=="string"&&XNe.test(t)}var Er=[];for(var z2=0;z2<256;++z2)Er.push((z2+256).toString(16).substr(1));function tPe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Er[t[e+0]]+Er[t[e+1]]+Er[t[e+2]]+Er[t[e+3]]+"-"+Er[t[e+4]]+Er[t[e+5]]+"-"+Er[t[e+6]]+Er[t[e+7]]+"-"+Er[t[e+8]]+Er[t[e+9]]+"-"+Er[t[e+10]]+Er[t[e+11]]+Er[t[e+12]]+Er[t[e+13]]+Er[t[e+14]]+Er[t[e+15]]).toLowerCase();if(!ePe(n))throw TypeError("Stringified UUID is invalid");return n}function nPe(t,e,n){t=t||{};var r=t.random||(t.rng||ZNe)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,tPe(r)}const rPe=ra({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000",textTransform:"uppercase"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),sPe=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}],iPe=["/images/sticker1.png","/images/sticker2.png","/images/sticker3.png","/images/sticker4.png","/images/sticker5.png"],ai=500;function qW(){const t=rPe(),e=D.useRef(null),[n,r]=D.useState(null),[s,i]=D.useState(""),[o,a]=D.useState(""),[c,l]=D.useState(36),[u,d]=D.useState(36),[h,f]=D.useState(!1),[p,g]=D.useState(!1),[y,w]=D.useState(!1),[v,b]=D.useState(!1),[x,_]=D.useState(!1),[C,S]=D.useState([]),[T,A]=D.useState(null),P=D.useRef(null),[R,j]=D.useState(null),z=async Y=>{const ne=Y.getContext("2d");if(!ne)return;ne.clearRect(0,0,Y.width,Y.height),n?await new Promise(V=>{const oe=new window.Image;oe.crossOrigin="anonymous",oe.onload=()=>{const Ie=Math.min(Y.width/oe.width,Y.height/oe.height),de=(Y.width-oe.width*Ie)/2,ge=(Y.height-oe.height*Ie)/2;ne.drawImage(oe,de,ge,oe.width*Ie,oe.height*Ie),V()},oe.onerror=()=>V(),oe.src=n}):(ne.fillStyle="#333",ne.fillRect(0,0,Y.width,Y.height)),(V=>{V.textAlign="center",V.strokeStyle="black",V.lineWidth=3,V.fillStyle="white";const oe=(Ie,de)=>{const ge=Ie.toUpperCase().split(" "),Pe=[];let Ve=ge[0];for(let ut=1;ut<ge.length;ut++){const Vt=ge[ut];V.measureText(Ve+" "+Vt).width<de?Ve+=" "+Vt:(Pe.push(Ve),Ve=Vt)}return Pe.push(Ve),Pe};s&&(V.font=`${c}px Impact`,oe(s,ai-20).forEach((de,ge)=>{const Pe=c+ge*c*1.2;V.strokeText(de,ai/2,Pe),V.fillText(de,ai/2,Pe)})),o&&(V.font=`${u}px Impact`,oe(o,ai-20).reverse().forEach((de,ge)=>{const Pe=ai-u*1.2*(ge+1);V.strokeText(de,ai/2,Pe),V.fillText(de,ai/2,Pe)}))})(ne),await Promise.all(C.map(V=>new Promise(oe=>{const Ie=new window.Image;Ie.src=V.src,Ie.onload=()=>{ne.save(),ne.translate(V.x,V.y),ne.rotate(V.rotation*Math.PI/180),ne.scale(V.scale,V.scale),ne.drawImage(Ie,-40,-40,80,80),ne.restore(),oe()},Ie.onerror=()=>oe()})));try{h&&K(Y),p&&I(Y),y&&N(Y)}catch(V){console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead.",V),f(!1),g(!1),w(!1)}},K=Y=>{const ne=Y.getContext("2d");if(!ne)return;const le=ne.getImageData(0,0,Y.width,Y.height),V=le.data;for(let oe=0;oe<V.length;oe+=4){const Ie=V[oe],de=V[oe+1],ge=V[oe+2],Pe=(Ie+de+ge)/3,Ve=1.8;V[oe]=Math.min(255,Pe+(Ie-Pe)*Ve),V[oe+1]=Math.min(255,Pe+(de-Pe)*Ve*.7),V[oe+2]=Math.min(255,Pe+(ge-Pe)*Ve*.4);const ut=1.3;V[oe]=Math.min(255,Math.max(0,V[oe]*ut)),V[oe+1]=Math.min(255,Math.max(0,V[oe+1]*ut)),V[oe+2]=Math.min(255,Math.max(0,V[oe+2]*ut))}ne.putImageData(le,0,0)},I=Y=>{const ne=Y.getContext("2d");if(!ne)return;const le=4,oe=ne.getImageData(0,0,Y.width,Y.height).data,Ie=new Uint8ClampedArray(oe);for(let de=0;de<Y.height;de+=le)for(let ge=0;ge<Y.width;ge+=le){const Pe=(de*Y.width+ge)*4,Ve=oe[Pe],ut=oe[Pe+1],Vt=oe[Pe+2],Mt=oe[Pe+3];for(let bt=0;bt<le&&de+bt<Y.height;bt++)for(let yn=0;yn<le&&ge+yn<Y.width;yn++){const $i=((de+bt)*Y.width+(ge+yn))*4;Ie[$i]=Ve,Ie[$i+1]=ut,Ie[$i+2]=Vt,Ie[$i+3]=Mt}}ne.putImageData(new ImageData(Ie,Y.width,Y.height),0,0)},N=Y=>{const ne=Y.getContext("2d");if(!ne)return;const le=ne.getImageData(0,0,Y.width,Y.height),V=le.data;for(let oe=0;oe<V.length;oe+=4){const Ie=(Math.random()-.5)*50;V[oe]=Math.max(0,Math.min(255,V[oe]+Ie)),V[oe+1]=Math.max(0,Math.min(255,V[oe+1]+Ie)),V[oe+2]=Math.max(0,Math.min(255,V[oe+2]+Ie))}ne.putImageData(le,0,0)};D.useEffect(()=>{e.current&&z(e.current)},[z]);const L=Y=>{var le;const ne=(le=Y.target.files)==null?void 0:le[0];ne&&r(URL.createObjectURL(ne))},U=()=>{r(null),i(""),a(""),l(36),d(36),f(!1),g(!1),w(!1)},$=async()=>{const Y=e.current;if(!Y)return;await z(Y);const ne=document.createElement("a");ne.download="meme.png",ne.href=Y.toDataURL("image/png"),document.body.appendChild(ne),ne.click(),document.body.removeChild(ne)},M=async Y=>{_(!0),b(!1);try{console.log("Fetching NFTs for collection:",Y);let ne;if(Y.api==="opensea"){console.log("Using OpenSea API for:",Y.slug);const le=await nR(Y.slug,50);ne=le.data,console.log("OpenSea response:",le)}else if(Y.api==="opensea-solana"){console.log("Using OpenSea Solana API for:",Y.slug);const le=await h7(Y.slug,50);ne=le.data,console.log("OpenSea Solana response:",le)}else{console.log("Using Scatter API for:",Y.slug);const le=await tR(Y.slug,1,50);ne=le.data,console.log("Scatter response:",le)}if(ne&&ne.length>0){const le=ne[Math.floor(Math.random()*ne.length)],V=le.image||le.image_url||le.image_url_shrunk;console.log("Selected NFT:",le),console.log("Image URL:",V),r(V)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(ne){console.error("Error fetching NFTs:",ne),alert("Failed to fetch NFT images. Check console for details.")}finally{_(!1)}},G=Y=>{const ne={id:nPe(),src:Y,x:80,y:80,scale:1,rotation:0};S(le=>le.length>=2||le.some(V=>V.src===Y&&!V.id.startsWith("upload-"))?le:[...le,ne]),j(ne.id)},X=Y=>{var le;const ne=(le=Y.target.files)==null?void 0:le[0];if(ne){const V=URL.createObjectURL(ne);G(V)}},ie=(Y,ne,le)=>{S(V=>V.map(oe=>{if(oe.id!==Y)return oe;let Ie=oe.x+ne/1.2,de=oe.y+le/1.2;const ge=40*oe.scale,Pe=40*oe.scale;return Ie=Math.max(ge,Math.min(ai-ge,Ie)),de=Math.max(Pe,Math.min(ai-Pe,de)),{...oe,x:Ie,y:de}}))},se=(Y,ne,le,V,oe)=>{S(Ie=>Ie.map(de=>{if(de.id!==Y)return de;const ge=de.x,Pe=de.y,Ve=Math.atan2(oe-Pe,V-ge)*180/Math.PI;return{...de,rotation:le+(Ve-ne)*.5}}))},ce=Y=>{S(ne=>ne.filter(le=>le.id!==Y))},ye=(Y,ne)=>{S(le=>le.map(V=>V.id===Y?{...V,scale:Math.max(.2,V.scale*(1+(ne-1)*.2))}:V))};return m.jsxs("div",{className:t.container,children:[m.jsxs("div",{className:t.header,children:[m.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),m.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",m.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),m.jsxs("div",{className:t.content,children:[m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Collections"}),m.jsxs("div",{className:t.row,children:[m.jsxs("div",{className:t.dropdown,children:[m.jsx("button",{className:t.button,onClick:()=>b(Y=>!Y),children:"Collections"}),v&&m.jsx("div",{className:t.dropdownContent,children:sPe.map(Y=>m.jsx("div",{className:t.dropdownItem,onClick:()=>{M(Y)},children:Y.name},Y.id))})]}),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:L})]}),x&&m.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Text"}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Top Text:"}),m.jsx("input",{className:t.input,type:"text",value:s,onChange:Y=>i(Y.target.value),placeholder:"Enter top text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:Y=>l(Number(Y.target.value)),style:{width:60,textAlign:"center"}})]}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Bottom Text:"}),m.jsx("input",{className:t.input,type:"text",value:o,onChange:Y=>a(Y.target.value),placeholder:"Enter bottom text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:Y=>d(Number(Y.target.value)),style:{width:60,textAlign:"center"}})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Effects"}),m.jsxs("div",{className:t.row,children:[m.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(Y=>!Y),children:"Deep Fry"}),m.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(Y=>!Y),children:"Pixelate"}),m.jsx("button",{className:t.effectButton,style:{background:y?"#00ffff":void 0},onClick:()=>w(Y=>!Y),children:"Grain"})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Stickers"}),m.jsxs("div",{className:t.row,children:[iPe.map((Y,ne)=>m.jsx("img",{src:Y,alt:`sticker${ne+1}`,style:{width:32,height:32,cursor:"pointer",border:"1px solid #888",marginRight:4},onClick:()=>G(Y)},Y)),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Sticker",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:P,onChange:X})]})]})]}),m.jsxs("div",{className:t.actions,children:[m.jsx("button",{className:t.button,onClick:$,children:"Save Image"}),m.jsx("button",{className:t.button,onClick:U,children:"Restart"})]})]}),m.jsx("div",{className:t.memeArea,children:m.jsx("canvas",{ref:e,width:ai,height:ai,className:t.canvas})}),m.jsx("div",{style:{position:"absolute",left:0,top:0,width:ai,height:ai,pointerEvents:"none"},children:C.map(Y=>R===Y.id?m.jsxs("div",{style:{position:"absolute",left:Y.x,top:Y.y,width:80*Y.scale,height:80*Y.scale,transform:`rotate(${Y.rotation}deg)`,cursor:"move",pointerEvents:"auto",zIndex:10,border:"2px solid #00f",boxShadow:"0 0 8px #00f"},onMouseDown:ne=>{A(Y.id),ne.stopPropagation()},onMouseUp:()=>A(null),onMouseMove:ne=>{T===Y.id&&ne.buttons===1&&ie(Y.id,ne.movementX,ne.movementY)},children:[m.jsx("img",{src:Y.src,alt:"sticker",style:{width:"100%",height:"100%",userSelect:"none",pointerEvents:"none"},draggable:!1}),m.jsx("div",{style:{position:"absolute",right:-12,top:"40%",width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"grab",zIndex:11},onMouseDown:ne=>{var Ve;ne.stopPropagation();const le=(Ve=ne.currentTarget.parentElement)==null?void 0:Ve.getBoundingClientRect(),V=le?le.left+le.width/2:0,oe=le?le.top+le.height/2:0,Ie=Math.atan2(ne.clientY-oe,ne.clientX-V)*180/Math.PI,de=Y.rotation,ge=ut=>{se(Y.id,Ie,de,ut.clientX,ut.clientY)},Pe=()=>{window.removeEventListener("mousemove",ge),window.removeEventListener("mouseup",Pe)};window.addEventListener("mousemove",ge),window.addEventListener("mouseup",Pe)}}),m.jsx("div",{style:{position:"absolute",bottom:-12,right:-12,width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"nwse-resize",zIndex:11},onMouseDown:ne=>{ne.stopPropagation();const le=ne.clientX,V=Ie=>{const de=(Ie.clientX-le)/80;ye(Y.id,1+de)},oe=()=>{window.removeEventListener("mousemove",V),window.removeEventListener("mouseup",oe)};window.addEventListener("mousemove",V),window.addEventListener("mouseup",oe)}}),m.jsx("button",{style:{position:"absolute",top:-12,left:-12,width:16,height:16,background:"#f00",color:"#fff",border:"none",borderRadius:"50%",fontSize:10,cursor:"pointer",zIndex:12},onClick:()=>ce(Y.id),children:"×"}),m.jsx("button",{style:{position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:40,height:18,background:"#0f0",color:"#000",border:"1px solid #888",borderRadius:4,fontSize:8,cursor:"pointer",zIndex:12},onClick:()=>j(null),children:"Place"})]},Y.id):null)})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ob(){return Ob=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ob.apply(this,arguments)}var Fu;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Fu||(Fu={}));const M4="popstate";function oPe(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return vP("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:VW(s)}return cPe(e,n,null,t)}function er(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function GW(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aPe(){return Math.random().toString(36).substr(2,8)}function j4(t,e){return{usr:t.state,key:t.key,idx:e}}function vP(t,e,n,r){return n===void 0&&(n=null),Ob({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?by(e):e,{state:n,key:e&&e.key||r||aPe()})}function VW(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function by(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function cPe(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Fu.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(Ob({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Fu.Pop;let y=u(),w=y==null?null:y-l;l=y,c&&c({action:a,location:g.location,delta:w})}function h(y,w){a=Fu.Push;let v=vP(g.location,y,w);l=u()+1;let b=j4(v,l),x=g.createHref(v);try{o.pushState(b,"",x)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(x)}i&&c&&c({action:a,location:g.location,delta:1})}function f(y,w){a=Fu.Replace;let v=vP(g.location,y,w);l=u();let b=j4(v,l),x=g.createHref(v);o.replaceState(b,"",x),i&&c&&c({action:a,location:g.location,delta:0})}function p(y){let w=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof y=="string"?y:VW(y);return v=v.replace(/ $/,"%20"),er(w,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,w)}let g={get action(){return a},get location(){return t(s,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(M4,d),c=y,()=>{s.removeEventListener(M4,d),c=null}},createHref(y){return e(s,y)},createURL:p,encodeLocation(y){let w=p(y);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:h,replace:f,go(y){return o.go(y)}};return g}var F4;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(F4||(F4={}));function lPe(t,e,n){return n===void 0&&(n="/"),uPe(t,e,n)}function uPe(t,e,n,r){let s=typeof e=="string"?by(e):e,i=JW(s.pathname||"/",n);if(i==null)return null;let o=KW(t);dPe(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=xPe(i);a=vPe(o[c],l)}return a}function KW(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(er(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=tf([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(er(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),KW(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:wPe(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of QW(i.path))s(i,o,c)}),e}function QW(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=QW(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function dPe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:bPe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const hPe=/^:[\w-]+$/,fPe=3,pPe=2,gPe=1,mPe=10,yPe=-2,z4=t=>t==="*";function wPe(t,e){let n=t.split("/"),r=n.length;return n.some(z4)&&(r+=yPe),e&&(r+=pPe),n.filter(s=>!z4(s)).reduce((s,i)=>s+(hPe.test(i)?fPe:i===""?gPe:mPe),r)}function bPe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function vPe(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=EPe({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:tf([i,d.pathname]),pathnameBase:NPe(tf([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=tf([i,d.pathnameBase]))}return o}function EPe(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=_Pe(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function _Pe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),GW(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function xPe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return GW(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function JW(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function CPe(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?by(t):t;return{pathname:n?n.startsWith("/")?n:APe(n,e):e,search:PPe(r),hash:kPe(s)}}function APe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function H2(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function SPe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function IPe(t,e){let n=SPe(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function TPe(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=by(t):(s=Ob({},t),er(!s.pathname||!s.pathname.includes("?"),H2("?","pathname","search",s)),er(!s.pathname||!s.pathname.includes("#"),H2("#","pathname","hash",s)),er(!s.search||!s.search.includes("#"),H2("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=CPe(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const tf=t=>t.join("/").replace(/\/\/+/g,"/"),NPe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),PPe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,kPe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function OPe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const YW=["post","put","patch","delete"];new Set(YW);const RPe=["get",...YW];new Set(RPe);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rb(){return Rb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rb.apply(this,arguments)}const qR=D.createContext(null),DPe=D.createContext(null),ZC=D.createContext(null),XC=D.createContext(null),vy=D.createContext({outlet:null,matches:[],isDataRoute:!1}),ZW=D.createContext(null);function eA(){return D.useContext(XC)!=null}function XW(){return eA()||er(!1),D.useContext(XC).location}function eq(t){D.useContext(ZC).static||D.useLayoutEffect(t)}function $Pe(){let{isDataRoute:t}=D.useContext(vy);return t?KPe():UPe()}function UPe(){eA()||er(!1);let t=D.useContext(qR),{basename:e,future:n,navigator:r}=D.useContext(ZC),{matches:s}=D.useContext(vy),{pathname:i}=XW(),o=JSON.stringify(IPe(s,n.v7_relativeSplatPath)),a=D.useRef(!1);return eq(()=>{a.current=!0}),D.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=TPe(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:tf([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function BPe(t,e){return LPe(t,e)}function LPe(t,e,n,r){eA()||er(!1);let{navigator:s}=D.useContext(ZC),{matches:i}=D.useContext(vy),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=XW(),u;if(e){var d;let y=typeof e=="string"?by(e):e;c==="/"||(d=y.pathname)!=null&&d.startsWith(c)||er(!1),u=y}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let y=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=lPe(t,{pathname:f}),g=HPe(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:tf([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:tf([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return e&&g?D.createElement(XC.Provider,{value:{location:Rb({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Fu.Pop}},g):g}function MPe(){let t=VPe(),e=OPe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,null)}const jPe=D.createElement(MPe,null);class FPe extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(vy.Provider,{value:this.props.routeContext},D.createElement(ZW.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zPe(t){let{routeContext:e,match:n,children:r}=t,s=D.useContext(qR);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(vy.Provider,{value:e},r)}function HPe(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||er(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,y=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||jPe,c&&(l<0&&h===0?(QPe("route-fallback"),p=!0,y=null):l===h&&(p=!0,y=d.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,h+1)),v=()=>{let b;return f?b=g:p?b=y:d.route.Component?b=D.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,D.createElement(zPe,{match:d,routeContext:{outlet:u,matches:w,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?D.createElement(FPe,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:v(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):v()},null)}var tq=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(tq||{}),nq=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(nq||{});function WPe(t){let e=D.useContext(qR);return e||er(!1),e}function qPe(t){let e=D.useContext(DPe);return e||er(!1),e}function GPe(t){let e=D.useContext(vy);return e||er(!1),e}function rq(t){let e=GPe(),n=e.matches[e.matches.length-1];return n.route.id||er(!1),n.route.id}function VPe(){var t;let e=D.useContext(ZW),n=qPe(),r=rq();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function KPe(){let{router:t}=WPe(tq.UseNavigateStable),e=rq(nq.UseNavigateStable),n=D.useRef(!1);return eq(()=>{n.current=!0}),D.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Rb({fromRouteId:e},i)))},[t,e])}const H4={};function QPe(t,e,n){H4[t]||(H4[t]=!0)}function JPe(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function GE(t){er(!1)}function YPe(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Fu.Pop,navigator:i,static:o=!1,future:a}=t;eA()&&er(!1);let c=e.replace(/^\/*/,"/"),l=D.useMemo(()=>({basename:c,navigator:i,static:o,future:Rb({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=by(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=D.useMemo(()=>{let y=JW(u,c);return y==null?null:{location:{pathname:y,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return g==null?null:D.createElement(ZC.Provider,{value:l},D.createElement(XC.Provider,{children:n,value:g}))}function ZPe(t){let{children:e,location:n}=t;return BPe(EP(e),n)}new Promise(()=>{});function EP(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,s)=>{if(!D.isValidElement(r))return;let i=[...e,s];if(r.type===D.Fragment){n.push.apply(n,EP(r.props.children,i));return}r.type!==GE&&er(!1),!r.props.index||!r.props.children||er(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=EP(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const XPe="6";try{window.__reactRouterVersion=XPe}catch{}const eke="startTransition",W4=pK[eke];function tke(t){let{basename:e,children:n,future:r,window:s}=t,i=D.useRef();i.current==null&&(i.current=oPe({window:s,v5Compat:!0}));let o=i.current,[a,c]=D.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=D.useCallback(d=>{l&&W4?W4(()=>c(d)):c(d)},[c,l]);return D.useLayoutEffect(()=>o.listen(u),[o,u]),D.useEffect(()=>JPe(r),[r]),D.createElement(YPe,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var q4;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(q4||(q4={}));var G4;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(G4||(G4={}));const nke=ra({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function rke(){const t=nke(),{open:e}=YC(),{address:n,isConnected:r}=vv(),{isPending:s}=r9(),{disconnect:i}=s9(),{data:o}=i9({address:n}),[a,c]=D.useState("pixelawbs-popup"),[l,u]=D.useState(new Set),[d,h]=D.useState(!1),[f,p]=D.useState(!1),[g,y]=D.useState(!1),[w,v]=D.useState(!1),b=$Pe(),x=D.useRef(null);D.useEffect(()=>{if(a==="halloween-popup"&&x.current){const N=x.current.querySelector("script[data-tiktok-embed]");N&&N.remove();const L=document.createElement("script");L.src="https://www.tiktok.com/embed.js",L.async=!0,L.setAttribute("data-tiktok-embed","true"),x.current.appendChild(L)}},[a]);const _=(N,L,U)=>{if(N==="url"&&U)window.open(U,"_blank");else if(N==="popup"&&L)c(L),u($=>{const M=new Set($);return M.delete(L),M}),document.body.offsetWidth;else if(N==="wallet")r?i():e();else if(N==="mint"){if(!n){alert("Please connect your wallet first!");return}h(!0)}else N==="nft-gallery"?p(!0):N==="meme-generator"?y(!0):N==="chess"&&(r?(v(!0),setTimeout(()=>{v(!1),b("/chess")},1500)):e().then(()=>{const $=()=>{window.ethereum&&window.ethereum.selectedAddress?(v(!0),setTimeout(()=>{v(!1),b("/chess")},1500)):setTimeout($,200)};$()}))},C=()=>c(null),S=N=>{u(L=>new Set(L).add(N)),c(null)},T=N=>{N==="mint-popup"?h(!0):N==="nft-gallery-popup"?p(!0):N==="meme-generator-popup"?y(!0):c(N),u(L=>{const U=new Set(L);return U.delete(N),U})},A=()=>h(!1),P=()=>p(!1),R=()=>y(!1),j=()=>{h(!1),u(N=>new Set(N).add("mint-popup"))},z=()=>{p(!1),u(N=>new Set(N).add("nft-gallery-popup"))},K=()=>{y(!1),u(N=>new Set(N).add("meme-generator-popup"))},I=m.jsxs("div",{onClick:()=>{r?i():e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:r?"limegreen":"red",fontWeight:"bold"},children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),s?"Connecting...":r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return m.jsxs("div",{className:t.body,children:[w&&m.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[m.jsx("img",{src:"/images/blueknight.png",alt:"Booting Chess...",style:{width:120,height:120,marginBottom:32}}),m.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),m.jsx(Zle,{onIconClick:_}),m.jsx(eue,{minimizedWindows:Array.from(l),onRestoreWindow:T,walletButton:I,connectionStatus:{connected:r,address:n,ens:o||void 0}}),m.jsxs(zi,{id:"chat-popup",isOpen:a==="chat-popup",onClose:C,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",m.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),m.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(zi,{id:"purity-popup",isOpen:a==="purity-popup",onClose:C,onMinimize:S,children:[m.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),m.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),m.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),m.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(zi,{id:"lawbstarz-popup",isOpen:a==="lawbstarz-popup",onClose:C,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsxs("blockquote",{className:"twitter-tweet","data-media-max-width":"560",children:[m.jsxs("p",{lang:"en",dir:"ltr",children:["The following 🧵 has been transcripted from a live news broadcast:",m.jsx("br",{}),m.jsx("br",{}),"Anchor: “Good evening, viewers. Tonight, we embark on an extraordinary journey that defies rational explanation. It all began with February's Cigawrette Packs cargo ship hijacking, little did we know that the.. ",m.jsx("a",{href:"https://t.co/BWgLOk59N4",children:"pic.twitter.com/BWgLOk59N4"})]}),"— wables (@wables411) ",m.jsx("a",{href:"https://twitter.com/wables411/status/1669009492007354369?ref_src=twsrc%5Etfw",children:"June 14, 2023"})]}),m.jsx("script",{async:!0,src:"https://platform.twitter.com/widgets.js"}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(zi,{id:"lawbstation-popup",isOpen:a==="lawbstation-popup",onClose:C,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(zi,{id:"nexus-popup",isOpen:a==="nexus-popup",onClose:C,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsxs(zi,{id:"lawbsters-popup",isOpen:a==="lawbsters-popup",onClose:C,onMinimize:S,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx(woe,{id:"1620879129850834944"})}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsx(zi,{id:"pixelawbs-popup",isOpen:a==="pixelawbs-popup",onClose:C,onMinimize:S,children:(()=>{const N=L=>{L.preventDefault(),c(null),h(!0)};return m.jsxs(m.Fragment,{children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:N,children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),m.jsxs(zi,{id:"halloween-popup",isOpen:a==="halloween-popup",onClose:C,onMinimize:S,children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),m.jsx("div",{ref:x,style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:m.jsxs("section",{children:[m.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore 🦞🎃 minting rn on @ourzora via @PC69 ",m.jsx("a",{target:"_blank",rel:"noreferrer",title:"♬ original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:"♬ original sound - wables.eth"})]})})})]}),m.jsxs(zi,{id:"lawb-popup",isOpen:a==="lawb-popup",onClose:C,onMinimize:S,children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"🦞 $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}),m.jsx(rue,{isOpen:d,onClose:A,onMinimize:j,walletAddress:n||""}),m.jsx(JNe,{isOpen:f,onClose:P,onMinimize:z,walletAddress:n}),m.jsx(zi,{id:"meme-generator-popup",isOpen:g,onClose:R,onMinimize:K,children:m.jsx(qW,{})})]})}const ske=ra({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),V4=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],ike=({onBack:t,walletAddress:e})=>{const n=ske(),{open:r}=YC(),[s,i]=D.useState([]),[o,a]=D.useState(!0),[c,l]=D.useState(null),[u,d]=D.useState(V4[0]),[h,f]=D.useState(!1),[p,g]=D.useState(null),[y,w]=D.useState("all"),[v,b]=D.useState(null),x=D.useCallback(async()=>{var T,A;try{if((T=window.solana)!=null&&T.isPhantom){const P=await window.solana.connect();g(P.publicKey.toString());return}if((A=window.solflare)!=null&&A.isSolflare){const P=await window.solflare.connect();g(P.publicKey.toString());return}r()}catch(P){console.error("Failed to connect Solana wallet:",P),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);D.useEffect(()=>{var T,A;(T=window.solana)!=null&&T.publicKey?g(window.solana.publicKey.toString()):(A=window.solflare)!=null&&A.publicKey&&g(window.solflare.publicKey.toString())},[]),D.useEffect(()=>{(async()=>{a(!0);try{let A,P=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}P=p,A=await tue(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",A.data.length)}else u.api==="opensea"?A=await nR(u.slug,100,P):A=await tR(u.slug,1,100,P);y==="owned"&&p&&(console.log("Filtering for owner:",p),A.data.some(j=>j.owners&&j.owners.length>0)?A.data=A.data.filter(j=>j.owners.some(K=>K.owner_of&&K.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),b("Owner data not available for this Solana collection. Showing all NFTs."))),i(A.data)}catch(A){console.error(A)}finally{a(!1)}})()},[e,u,p,y]),D.useEffect(()=>{h&&x()},[h,x]);const _=async T=>{if(a(!0),u.api==="opensea"&&u.chain)try{const A=await d7(u.chain,T.address,T.token_id.toString()),P={...T,attributes:JSON.stringify(A.traits||[])};l(P)}catch(A){console.error("Failed to fetch full NFT details",A),l(T)}else l(T);a(!1)},C=()=>{if(!c)return null;let T=[];try{T=JSON.parse(c.attributes||"[]")}catch(A){console.error("Failed to parse NFT attributes:",A)}return m.jsxs("div",{className:n.detailView,children:[m.jsx("img",{src:c.image,alt:c.name}),m.jsx("h2",{children:c.name}),m.jsx("h4",{children:"Traits:"}),m.jsx("ul",{children:T.map((A,P)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[A.trait_type,":"]})," ",A.value]},P))})]})},S=()=>m.jsxs(m.Fragment,{children:[m.jsx("div",{className:n.collectionSelector,children:V4.map(T=>m.jsx("button",{className:`${n.collectionButton} ${u.slug===T.slug?"active":""}`,onClick:()=>d(T),children:T.name},T.slug))}),m.jsxs("div",{className:n.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>w("all"),style:{background:y==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:y==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>w("owned"),disabled:!e&&!p,style:{background:y==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:y==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{x()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),v&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:v}),u.api==="opensea-solana"&&!p&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?m.jsx("div",{className:n.loading,children:"Loading NFTs..."}):m.jsx("div",{className:n.grid,children:s.map(T=>{let A=T.image||T.image_url||T.image_url_shrunk||"/assets/pixelawb.png";return m.jsxs("div",{className:n.gridItem,onClick:()=>void _(T),children:[m.jsx("img",{src:A,alt:T.name,onError:P=>{P.currentTarget.src!==T.image_url&&T.image_url?P.currentTarget.src=T.image_url:P.currentTarget.src!==T.image_url_shrunk&&T.image_url_shrunk?P.currentTarget.src=T.image_url_shrunk:P.currentTarget.src="/assets/pixelawb.png"}}),m.jsx("span",{children:T.name})]},T.id)})})]})]});return m.jsxs("div",{className:n.galleryContainer,children:[m.jsxs("header",{className:n.header,children:[m.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),m.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),m.jsx("div",{className:n.content,children:o?m.jsx("p",{className:n.loading,children:"Loading..."}):c?C():S()})]})},oke=ra({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),Eo=({isOpen:t,onClose:e,title:n,children:r})=>{const s=oke();return t?m.jsx("div",{className:s.overlay,children:m.jsxs("div",{className:s.popup,children:[m.jsxs("div",{className:s.titleBar,children:[m.jsx("span",{children:n}),m.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:"✕"})]}),m.jsx("div",{className:s.content,children:r})]})}):null},ake=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=D.useState([]),[i,o]=D.useState(!1),[a,c]=D.useState(!1),[l,u]=D.useState({}),[d,h]=D.useState(null),{data:f}=o9();D.useEffect(()=>{t&&n&&p()},[t,n]);const p=async()=>{o(!0),h(null);try{const x=await l7(n);s(x);const _={};x.forEach(C=>{_[C.id]=0}),u(_)}catch(x){h(x.message)}finally{o(!1)}},g=(x,_)=>{u(C=>({...C,[x]:Math.max(0,_)}))},y=async()=>{const x=Object.entries(l).filter(([,_])=>_>0).map(([_,C])=>({id:_,quantity:C}));if(x.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}c(!0),h(null);try{const _=await u7(n,x);if(_.success&&_.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const C=await f.sendTransaction({to:_.mintTransaction.to,value:BigInt(_.mintTransaction.value),data:_.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${C}`),e()}catch(C){h("Transaction failed: "+C.message)}}else throw new Error(_.message||"Could not retrieve minting transaction.")}catch(_){h("Minting failed: "+_.message)}finally{c(!1)}},w=(x,_)=>`${parseFloat(x)} ${_}`,v={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},b={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return m.jsxs(Eo,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&m.jsx("div",{style:b,children:d}),i?m.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(x=>m.jsxs("div",{style:v,children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:x.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",w(x.token_price,x.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",x.wallet_limit===4294967295?"Unlimited":x.wallet_limit," per wallet"]}),m.jsx("input",{type:"number",min:0,max:x.wallet_limit===4294967295?void 0:x.wallet_limit,value:l[x.id]||"",onChange:_=>g(x.id,parseInt(_.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),m.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},x.id))]}),m.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:y,disabled:a,children:a?"Minting...":"Mint"})]})]})},cke=ra({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),lke=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],uke=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],dke=()=>{const t=cke(),{open:e}=YC(),{address:n,isConnected:r}=vv(),{isPending:s}=r9(),{disconnect:i}=s9(),{data:o}=i9({address:n}),[a,c]=D.useState("main"),[l,u]=D.useState(!1),[d,h]=D.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=D.useState(!1),[g,y]=D.useState(!1),[w,v]=D.useState(!1),[b,x]=D.useState(!1),[_,C]=D.useState(!1),[S,T]=D.useState(!1),[A,P]=D.useState(!1),[R,j]=D.useState(!1),[z,K]=D.useState(!1),[I,N]=D.useState(!1),[L,U]=D.useState(!1),[$,M]=D.useState(!1),G=[{label:"Mint",icon:"/assets/mint.gif",action:()=>y(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>v(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>x(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>C(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],X=ce=>{ce.disabled||ce.action()};if(D.useEffect(()=>{const ce=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(ce)},[]),D.useEffect(()=>{u(!0)},[]),a==="gallery")return m.jsx(ike,{onBack:()=>c("main"),walletAddress:n||void 0});function ie({open:ce,onClose:ye,title:Y,nfts:ne}){const le=V=>{switch(V){case"lawbsters":T(!0);break;case"lawbstarz":P(!0);break;case"pixelawbs":j(!0);break;case"halloween":K(!0);break;case"lawbstation":N(!0);break;case"nexus":U(!0);break}};return m.jsx(Eo,{isOpen:ce,onClose:ye,title:Y,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:ne.map(V=>m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>le(V.id),children:[m.jsx("img",{src:V.image,alt:V.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),m.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:V.name}),m.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:V.description})]},V.id))})})}function se({open:ce,onClose:ye}){return ce?m.jsxs(Eo,{isOpen:ce,onClose:ye,title:"$LAWB",children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"🦞 $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}):null}return m.jsxs("div",{className:t.mobileContainer,children:[m.jsx("header",{className:t.header,children:m.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),m.jsx("div",{className:t.iconGrid,children:G.map(ce=>m.jsxs("div",{className:t.icon,onClick:()=>X(ce),children:[m.jsx("img",{src:ce.icon,alt:ce.label}),m.jsx("span",{children:ce.label})]},ce.label))}),l&&m.jsxs(Eo,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),y(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&m.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:m.jsxs("div",{className:t.menuModal,onClick:ce=>ce.stopPropagation(),children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),m.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),M(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),m.jsx(ake,{isOpen:g,onClose:()=>y(!1),walletAddress:n||""}),m.jsx(ie,{open:w,onClose:()=>v(!1),title:"EVM NFT'S FOLDER",nfts:lke}),m.jsx(ie,{open:b,onClose:()=>x(!1),title:"SOL NFTS FOLDER",nfts:uke}),m.jsx(se,{open:_,onClose:()=>C(!1)}),m.jsxs(Eo,{isOpen:S,onClose:()=>T(!1),title:"Lawbsters",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(Eo,{isOpen:A,onClose:()=>P(!1),title:"Lawbstarz",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Eo,{isOpen:R,onClose:()=>j(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{j(!1),y(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),m.jsxs(Eo,{isOpen:z,onClose:()=>K(!1),title:"A Lawbster Halloween",children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),m.jsxs(Eo,{isOpen:I,onClose:()=>N(!1),title:"Lawbstation",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(Eo,{isOpen:L,onClose:()=>U(!1),title:"Nexus",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsx(Eo,{isOpen:$,onClose:()=>M(!1),title:"Meme Generator",children:m.jsx(qW,{})}),m.jsxs("div",{className:t.taskbar,children:[m.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),m.jsxs("div",{className:t.walletStatus,children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),m.jsx("span",{className:t.clock,children:d})]})]})};function hke(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=D.useState(e(t));function s(){r(e(t))}return D.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}function fke(t){let e=[],n,r;function s(a){return ib.parseEvmChainId(a)||1}function i(){var a;return n||(n=Xh.getInstance({projectId:t.options.projectId,chainId:(a=B.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?Fn.open(wn.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?Fn.open(wn.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&Fn.open(wn.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:wn.EmbeddedWalletAbortController})),n}async function o(a={}){var g,y;const c=i();let l=a.chainId;if(a.isReconnecting){const w=ib.parseEvmChainId(c.getLastUsedChainId()||""),v=(g=t.chains)==null?void 0:g[0].id;if(l=w||v,!l)throw new Error("ChainId not found in provider")}const u=(y=Ee.state.preferredAccountTypes)==null?void 0:y.eip155,{address:d,chainId:h,accounts:f}=await c.connect({chainId:l,preferredAccountType:u,socialUri:a.socialUri});e=(f==null?void 0:f.map(w=>w.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:ae.CONNECTOR_ID.AUTH,name:ae.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:ae.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=Xh.getInstance({projectId:t.options.projectId,chainId:(c=B.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:wn.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?Fn.open(wn.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?Fn.open(wn.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&Fn.open(wn.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=B.state.activeChain===ae.CHAIN.EVM;if(ae.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>Ce.getConnectorId(h)===ae.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l,u;try{const d=a.chains.find(g=>g.id===c);if(!d)throw new Ga(new Error("chain not found on connector."));const h=await this.getProvider(),f=(l=Ee.state.preferredAccountTypes)==null?void 0:l.eip155,p=await h.connect({chainId:c,preferredAccountType:f});return e=((u=p==null?void 0:p.accounts)==null?void 0:u.map(g=>g.address))||[p.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),d}catch(d){throw d instanceof Error?new Ga(d):d}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(Uu)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}GR.type="walletConnect";function GR(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:GR.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=B.getCaipNetworks(),y=await this.getProvider();if(!y)throw new Vl;a||(a=this.onDisplayUri,y.on("display_uri",a));const w=await this.isChainsStale();y.session&&w&&await y.disconnect();const v=pe.state.universalProviderConfigOverride;if(!y.session||w){const A=cw.createNamespaces(g,v);await y.connect({optionalNamespaces:A,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(P=>Number(P.id)))}const b=await this.getAccounts(),x=await this.getChainId(),_=(p=(f=(h=y.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,C=_==null?void 0:_.some(A=>Number(A.split(":")[1])===x);let S=1;C?S=x:_!=null&&_[0]&&(S=Number(_[0].split(":")[1])),a&&(y.removeListener("display_uri",a),a=void 0),o&&(y.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),y.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),y.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),y.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),y.on("session_delete",c));const T=v==null?void 0:v.defaultChain;return y.setDefaultChain(T??`eip155:${S}`),{accounts:b,chainId:S}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new Kn(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var p,g,y;const d=await this.getProvider();if(!((p=d==null?void 0:d.session)!=null&&p.namespaces))return[];const h=(y=(g=d==null?void 0:d.session)==null?void 0:g.namespaces[ae.CHAIN.EVM])==null?void 0:y.accounts;return(h==null?void 0:h.map(w=>w.split(":")[2]))??[]},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=_e.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const y=_e.getStoredActiveCaipNetworkId(),w=e.getCaipNetworks(h),v=w==null?void 0:w.find(b=>b.id===y);v&&v.chainNamespace===ae.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(v.id)}))}return r},async getChainId(){var g,y,w,v;const d=(g=e.getCaipNetwork(ae.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(v=(w=(y=(await this.getProvider()).session)==null?void 0:y.namespaces[ae.CHAIN.EVM])==null?void 0:w.chains)==null?void 0:v[0],p=B.getCaipNetworks().find(b=>b.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,y,w,v;const f=await this.getProvider();if(!f)throw new Vl;const p=B.getCaipNetworks().find(b=>b.id===h);if(!p)throw new Ga(new Zw);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:Ye(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const b=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...b,h]),{...p,id:p.id}}catch(b){const x=b;if(/(?:user rejected)/iu.test(x.message))throw new Kn(x);try{let _;d!=null&&d.blockExplorerUrls?_=d.blockExplorerUrls:_=(g=p.blockExplorers)!=null&&g.default.url?[(y=p.blockExplorers)==null?void 0:y.default.url]:[];const C=((v=(w=p.rpcUrls)==null?void 0:w.chainDefault)==null?void 0:v.http)||[],S={blockExplorerUrls:_,chainId:Ye(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:C};await f.request({method:"wallet_addEthereumChain",params:[S]});const T=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...T,h]),{...p,id:p.id}}catch(_){throw new Kn(_)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>Uu(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(B.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[ae.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(y=>Number.parseInt(y.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const c0=cn({pendingTransactions:0}),K4={state:c0,subscribeKey(t,e){return Rr(c0,t,e)},increase(t){c0[t]+=1},decrease(t){c0[t]-=1},reset(t){c0[t]=0}};function pke(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function gke(t){if(je.isSafeApp()){const{safe:e}=await Rn(async()=>{const{safe:n}=await import("./index-WGsdzkC1.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function mke(t){try{const{coinbaseWallet:e}=await Rn(async()=>{const{coinbaseWallet:n}=await import("./index-WGsdzkC1.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const yke={enable:!1,pollingInterval:3e4};class wke extends WW{constructor(e){const n=Da.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=ae.CHAIN.EVM,this.adapterType=ae.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...yke,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===ae.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>je.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=hg(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>je.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=hg(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===ae.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=Da.getCaipNetworkId(s);i?n[s.id]=Da.extendWagmiTransports(s,e.projectId,i):n[s.id]=Da.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=tne({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=Dte(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),K4.increase("pendingTransactions")}});const e=K4.subscribeKey("pendingTransactions",n=>{var r;n>=ae.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){OF(this.wagmiConfig,{onChange:(e,n)=>{e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"&&(e.address!==(n==null?void 0:n.address)||n.status!=="connected")&&(this.setupWatchPendingTransactions(),this.emit("accountChanged",{address:e.address,chainId:e.chainId}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await mke(this.wagmiConfig.connectors);s&&n.push(s)}const r=await gke(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(GR(e,n)),e.enableInjected!==!1&&r.push(uC({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(fke({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async signMessage(e){try{return{signature:await Pte(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=hg(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await Tte(this.wagmiConfig,s);const i=await Nte(this.wagmiConfig,s);return await $te(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(ib.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await Ute(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await Ete(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return Wee(e.value,e.decimals)}formatUnits(e){return sy(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(e.id===ae.CONNECTOR_ID.AUTH||e.id===ae.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:ju.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:ju.ConnectorNamesMap[e.id]??e.name,imageId:ju.ConnectorImageIds[e.id],type:ju.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===ae.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){RF(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=wa(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(je.isSafeApp()&&n===ae.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await NE(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await NE(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await OT(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var u,d,h,f,p;const{id:n,provider:r,type:s,info:i,chainId:o,socialUri:a}=e,c=this.getWagmiConnector(n);if(!c)throw new Error("connectionControllerClient:connectExternal - connector is undefined");if(r&&i&&c.id===ae.CONNECTOR_ID.EIP6963&&((u=c.setEip6963Wallet)==null||u.call(c,{provider:r,info:i})),c.uid===((h=(d=this.wagmiConfig)==null?void 0:d.state)==null?void 0:h.current)){const g=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(c.uid);if(g)return{address:g==null?void 0:g.accounts[0],chainId:g==null?void 0:g.chainId,provider:r,type:s,id:n}}const l=await NE(this.wagmiConfig,{connector:c,chainId:o?Number(o):void 0,socialUri:a});return{address:l.accounts[0],chainId:l.chainId,provider:r,type:s,id:n}}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await kT(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=_e.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await Ate(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});_e.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(){const e=wa(this.wagmiConfig);await Promise.allSettled(e.map(async n=>{const r=this.getWagmiConnector(n.connector.id);r&&await PF(this.wagmiConfig,{connector:r})})),this.wagmiConfig.state.connections.clear()}async switchNetwork(e){var r,s,i,o,a;const{caipNetwork:n}=e;await OT(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:n.name,nativeCurrency:n.nativeCurrency,rpcUrls:[((i=(s=(r=n.rpcUrls)==null?void 0:r.chainDefault)==null?void 0:s.http)==null?void 0:i[0])??""],blockExplorerUrls:[((o=n.blockExplorers)==null?void 0:o.default.url)??""],iconUrls:[((a=n.assets)==null?void 0:a.imageUrl)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=wa(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=pke(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=wa(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=wa(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=wa(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setUniversalProvider(e){e.on("connect",()=>{const n=wa(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(B.state.activeChain==="eip155")return;kT(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new WR({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"}))}}const sq="7c65f27254d6ddd24cf7eedf2685c4fb",bke={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},iq=new wke({networks:[HW],projectId:sq,ssr:!1});KNe({adapters:[iq],networks:[HW],projectId:sq,metadata:bke,features:{analytics:!1}});const vke=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Rn(async()=>{const{default:r}=await Promise.resolve().then(()=>Ey);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class VR extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Eke extends VR{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class _ke extends VR{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class xke extends VR{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var _P;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(_P||(_P={}));var Cke=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class Ake{constructor(e,{headers:n={},customFetch:r,region:s=_P.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=vke(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return Cke(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:c}=n;c||(c=this.region),c&&c!=="any"&&(a["x-region"]=c);let l;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:l}).catch(p=>{throw new Eke(p)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new _ke(u);if(!u.ok)throw new xke(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield u.json():h==="application/octet-stream"?f=yield u.blob():h==="text/event-stream"?f=u:h==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(s){return{data:null,error:s}}})}}var Gs={},KR={},tA={},Lv={},nA={},rA={},Ske=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Hm=Ske();const Ike=Hm.fetch,oq=Hm.fetch.bind(Hm),aq=Hm.Headers,Tke=Hm.Request,Nke=Hm.Response,Ey=Object.freeze(Object.defineProperty({__proto__:null,Headers:aq,Request:Tke,Response:Nke,default:oq,fetch:Ike},Symbol.toStringTag,{value:"Module"})),Pke=Ux(Ey);var sA={};Object.defineProperty(sA,"__esModule",{value:!0});let kke=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};sA.default=kke;var cq=Pn&&Pn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rA,"__esModule",{value:!0});const Oke=cq(Pke),Rke=cq(sA);let Dke=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Oke.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,c;let l=null,u=null,d=null,h=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=await i.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=w:u=JSON.parse(w))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");g&&y&&y.length>1&&(d=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await i.text();try{l=JSON.parse(g),Array.isArray(l)&&i.status===404&&(u=[],l=null,h=200,f="OK")}catch{i.status===404&&g===""?(h=204,f="No Content"):l={message:g}}if(l&&this.isMaybeSingle&&(!((c=l==null?void 0:l.details)===null||c===void 0)&&c.includes("0 rows"))&&(l=null,h=200,f="OK"),l&&this.shouldThrowOnError)throw new Rke.default(l)}return{error:l,data:u,count:d,status:h,statusText:f}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};rA.default=Dke;var $ke=Pn&&Pn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nA,"__esModule",{value:!0});const Uke=$ke(rA);let Bke=class extends Uke.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};nA.default=Bke;var Lke=Pn&&Pn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Lv,"__esModule",{value:!0});const Mke=Lke(nA);let jke=class extends Mke.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Lv.default=jke;var Fke=Pn&&Pn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tA,"__esModule",{value:!0});const l0=Fke(Lv);let zke=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new l0.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){const a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new l0.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const c=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){const l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new l0.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new l0.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new l0.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};tA.default=zke;var iA={},oA={};Object.defineProperty(oA,"__esModule",{value:!0});oA.version=void 0;oA.version="0.0.0-automated";Object.defineProperty(iA,"__esModule",{value:!0});iA.DEFAULT_HEADERS=void 0;const Hke=oA;iA.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Hke.version}`};var lq=Pn&&Pn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(KR,"__esModule",{value:!0});const Wke=lq(tA),qke=lq(Lv),Gke=iA;let Vke=class uq{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},Gke.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new Wke.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new uq(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let c;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(o="POST",c=n);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new qke.default({method:o,url:a,headers:l,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};KR.default=Vke;var _y=Pn&&Pn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gs,"__esModule",{value:!0});Gs.PostgrestError=Gs.PostgrestBuilder=Gs.PostgrestTransformBuilder=Gs.PostgrestFilterBuilder=Gs.PostgrestQueryBuilder=Gs.PostgrestClient=void 0;const dq=_y(KR);Gs.PostgrestClient=dq.default;const hq=_y(tA);Gs.PostgrestQueryBuilder=hq.default;const fq=_y(Lv);Gs.PostgrestFilterBuilder=fq.default;const pq=_y(nA);Gs.PostgrestTransformBuilder=pq.default;const gq=_y(rA);Gs.PostgrestBuilder=gq.default;const mq=_y(sA);Gs.PostgrestError=mq.default;var Kke=Gs.default={PostgrestClient:dq.default,PostgrestQueryBuilder:hq.default,PostgrestFilterBuilder:fq.default,PostgrestTransformBuilder:pq.default,PostgrestBuilder:gq.default,PostgrestError:mq.default};const{PostgrestClient:Qke,PostgrestQueryBuilder:r4e,PostgrestFilterBuilder:s4e,PostgrestTransformBuilder:i4e,PostgrestBuilder:o4e,PostgrestError:a4e}=Kke;function Jke(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Yke=Jke(),Zke="2.11.13",Xke={"X-Client-Info":`realtime-js/${Zke}`},eOe="1.0.0",yq=1e4,tOe=1e3;var lw;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(lw||(lw={}));var Gr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Gr||(Gr={}));var Bo;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Bo||(Bo={}));var xP;(function(t){t.websocket="websocket"})(xP||(xP={}));var Zd;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Zd||(Zd={}));class nOe{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const c=r.decode(e.slice(o,o+i));o=o+i;const l=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:l}}}class wq{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var rn;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(rn||(rn={}));const Q4=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=rOe(o,t,e,s),i),{})},rOe=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?bq(i,o):CP(o)},bq=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return aOe(e,n)}switch(t){case rn.bool:return sOe(e);case rn.float4:case rn.float8:case rn.int2:case rn.int4:case rn.int8:case rn.numeric:case rn.oid:return iOe(e);case rn.json:case rn.jsonb:return oOe(e);case rn.timestamp:return cOe(e);case rn.abstime:case rn.date:case rn.daterange:case rn.int4range:case rn.int8range:case rn.money:case rn.reltime:case rn.text:case rn.time:case rn.timestamptz:case rn.timetz:case rn.tsrange:case rn.tstzrange:return CP(e);default:return CP(e)}},CP=t=>t,sOe=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},iOe=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},oOe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},aOe=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>bq(e,a))}return t},cOe=t=>typeof t=="string"?t.replace(" ","T"):t,vq=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class W2{constructor(e,n,r={},s=yq){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var J4;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(J4||(J4={}));class uw{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=uw.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=uw.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=uw.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},c={};return this.map(i,(l,u)=>{o[l]||(c[l]=u)}),this.map(o,(l,u)=>{const d=i[l];if(d){const h=u.map(y=>y.presence_ref),f=d.map(y=>y.presence_ref),p=u.filter(y=>f.indexOf(y.presence_ref)<0),g=d.filter(y=>h.indexOf(y.presence_ref)<0);p.length>0&&(a[l]=p),g.length>0&&(c[l]=g)}else a[l]=u}),this.syncDiff(i,{joins:a,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,c)=>{var l;const u=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(c),u.length>0){const d=e[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,u,c)}),this.map(o,(a,c)=>{let l=e[a];if(!l)return;const u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=l,s(a,l,c),l.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Y4;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Y4||(Y4={}));var Z4;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Z4||(Z4={}));var gc;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(gc||(gc={}));class QR{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Gr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new W2(this,Bo.join,this.params,this.timeout),this.rejoinTimer=new wq(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Gr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Gr.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Gr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Gr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Bo.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new uw(this),this.broadcastEndpointURL=vq(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Gr.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(gc.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(gc.CLOSED));const c={},l={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(gc.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,f=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,p=[];for(let g=0;g<f;g++){const y=h[g],{filter:{event:w,schema:v,table:b,filter:x}}=y,_=u&&u[g];if(_&&_.event===w&&_.schema===v&&_.table===b&&_.filter===x)p.push(Object.assign(Object.assign({},y),{id:_.id}));else{this.unsubscribe(),this.state=Gr.errored,e==null||e(gc.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(gc.SUBSCRIBED);return}}).receive("error",u=>{this.state=Gr.errored,e==null||e(gc.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(gc.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=l.body)===null||s===void 0?void 0:s.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const l=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),l.receive("ok",()=>i("ok")),l.receive("error",()=>i("error")),l.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Gr.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Bo.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new W2(this,Bo.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new W2(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=Bo;if(r&&[a,c,l,u].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var p,g,y;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((y=(g=f.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(f=>f.callback(h,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var p,g,y,w,v,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const x=f.id,_=(p=f.filter)===null||p===void 0?void 0:p.event;return x&&((g=n.ids)===null||g===void 0?void 0:g.includes(x))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const x=(v=(w=f==null?void 0:f.filter)===null||w===void 0?void 0:w.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return x==="*"||x===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:g,table:y,commit_timestamp:w,type:v,errors:b}=p;h=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:w,eventType:v,new:{},old:{},errors:b}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===Gr.closed}_isJoined(){return this.state===Gr.joined}_isJoining(){return this.state===Gr.joining}_isLeaving(){return this.state===Gr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&QR.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Bo.close,{},e)}_onError(e){this._on(Bo.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Gr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Q4(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Q4(e.columns,e.old_record)),n}}const X4=()=>{},lOe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class uOe{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=Xke,this.params={},this.timeout=yq,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=X4,this.ref=0,this.logger=X4,this.conn=null,this.sendBuffer=[],this.serializer=new nOe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>Rn(async()=>{const{default:c}=await Promise.resolve().then(()=>Ey);return{default:c}},void 0).then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${xP.websocket}`,this.httpEndpoint=vq(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new wq(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){this.conn||(this.transport||(this.transport=Yke),this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection())}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:eOe}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case lw.connecting:return Zd.Connecting;case lw.open:return Zd.Open;case lw.closing:return Zd.Closing;default:return Zd.Closed}}isConnected(){return this.connectionState()===Zd.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new QR(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{n&&r.updateJoinPayload({access_token:n,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(Bo.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(tOe,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Bo.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([lOe],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class JR extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ir(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class dOe extends JR{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class AP extends JR{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var hOe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const Eq=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Rn(async()=>{const{default:r}=await Promise.resolve().then(()=>Ey);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},fOe=()=>hOe(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Rn(()=>Promise.resolve().then(()=>Ey),void 0)).Response:Response}),SP=t=>{if(Array.isArray(t))return t.map(n=>SP(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=SP(r)}),e};var Gf=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const q2=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),pOe=(t,e,n)=>Gf(void 0,void 0,void 0,function*(){const r=yield fOe();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new dOe(q2(s),t.status||500))}).catch(s=>{e(new AP(q2(s),s))}):e(new AP(q2(t),t))}),gOe=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function Mv(t,e,n,r,s,i){return Gf(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,gOe(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>pOe(c,a,r))})})}function fx(t,e,n,r){return Gf(this,void 0,void 0,function*(){return Mv(t,"GET",e,n,r)})}function Xl(t,e,n,r,s){return Gf(this,void 0,void 0,function*(){return Mv(t,"POST",e,r,s,n)})}function mOe(t,e,n,r,s){return Gf(this,void 0,void 0,function*(){return Mv(t,"PUT",e,r,s,n)})}function yOe(t,e,n,r){return Gf(this,void 0,void 0,function*(){return Mv(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function _q(t,e,n,r,s){return Gf(this,void 0,void 0,function*(){return Mv(t,"DELETE",e,r,s,n)})}var Os=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const wOe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},e6={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class bOe{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=Eq(s)}uploadOrUpdate(e,n,r,s){return Os(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},e6),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const l=this._removeEmptyFolders(n),u=this._getFinalPath(l),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield d.json();return d.ok?{data:{path:l,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(ir(i))return{data:null,error:i};throw i}})}upload(e,n,r){return Os(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Os(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let c;const l=Object.assign({upsert:e6.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",l.cacheControl)):(c=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:u}),h=yield d.json();return d.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(ir(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return Os(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Xl(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new JR("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(ir(r))return{data:null,error:r};throw r}})}update(e,n,r){return Os(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Os(this,void 0,void 0,function*(){try{return{data:yield Xl(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(ir(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Os(this,void 0,void 0,function*(){try{return{data:{path:(yield Xl(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(ir(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Os(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Xl(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(ir(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Os(this,void 0,void 0,function*(){try{const s=yield Xl(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(ir(s))return{data:null,error:s};throw s}})}download(e,n){return Os(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield fx(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(ir(a))return{data:null,error:a};throw a}})}info(e){return Os(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield fx(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:SP(r),error:null}}catch(r){if(ir(r))return{data:null,error:r};throw r}})}exists(e){return Os(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield yOe(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(ir(r)&&r instanceof AP){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}remove(e){return Os(this,void 0,void 0,function*(){try{return{data:yield _q(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(ir(n))return{data:null,error:n};throw n}})}list(e,n,r){return Os(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},wOe),n),{prefix:e||""});return{data:yield Xl(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(ir(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const vOe="2.7.1",EOe={"X-Client-Info":`storage-js/${vOe}`};var Ep=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class _Oe{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},EOe),n),this.fetch=Eq(r)}listBuckets(){return Ep(this,void 0,void 0,function*(){try{return{data:yield fx(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ir(e))return{data:null,error:e};throw e}})}getBucket(e){return Ep(this,void 0,void 0,function*(){try{return{data:yield fx(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(ir(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Ep(this,void 0,void 0,function*(){try{return{data:yield Xl(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ir(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Ep(this,void 0,void 0,function*(){try{return{data:yield mOe(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ir(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ep(this,void 0,void 0,function*(){try{return{data:yield Xl(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(ir(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ep(this,void 0,void 0,function*(){try{return{data:yield _q(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(ir(n))return{data:null,error:n};throw n}})}}class xOe extends _Oe{constructor(e,n={},r){super(e,n,r)}from(e){return new bOe(this.url,this.headers,e,this.fetch)}}const COe="2.50.1";let N0="";typeof Deno<"u"?N0="deno":typeof document<"u"?N0="web":typeof navigator<"u"&&navigator.product==="ReactNative"?N0="react-native":N0="node";const AOe={"X-Client-Info":`supabase-js-${N0}/${COe}`},SOe={headers:AOe},IOe={schema:"public"},TOe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},NOe={};var POe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const kOe=t=>{let e;return t?e=t:typeof fetch>"u"?e=oq:e=fetch,(...n)=>e(...n)},OOe=()=>typeof Headers>"u"?aq:Headers,ROe=(t,e,n)=>{const r=kOe(n),s=OOe();return(i,o)=>POe(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:t;let l=new s(o==null?void 0:o.headers);return l.has("apikey")||l.set("apikey",t),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:l}))})};var DOe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};function $Oe(t){return t.endsWith("/")?t:t+"/"}function UOe(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:c,auth:l,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},l),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>DOe(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}const xq="2.70.0",Rp=30*1e3,IP=3,G2=IP*Rp,BOe="http://localhost:9999",LOe="supabase.auth.token",MOe={"X-Client-Info":`gotrue-js/${xq}`},TP="X-Supabase-Api-Version",Cq={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},jOe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,FOe=6e5;class YR extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function nt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class zOe extends YR{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function HOe(t){return nt(t)&&t.name==="AuthApiError"}class Aq extends YR{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Td extends YR{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Hl extends Td{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function WOe(t){return nt(t)&&t.name==="AuthSessionMissingError"}class eE extends Td{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class tE extends Td{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class nE extends Td{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function qOe(t){return nt(t)&&t.name==="AuthImplicitGrantRedirectError"}class t6 extends Td{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class NP extends Td{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function V2(t){return nt(t)&&t.name==="AuthRetryableFetchError"}class n6 extends Td{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class dw extends Td{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const px="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),r6=` 	
\r=`.split(""),GOe=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<r6.length;e+=1)t[r6[e].charCodeAt(0)]=-2;for(let e=0;e<px.length;e+=1)t[px[e].charCodeAt(0)]=e;return t})();function s6(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(px[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(px[r]),e.queuedBits-=6}}function Sq(t,e,n){const r=GOe[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function i6(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{QOe(o,r,n)};for(let o=0;o<t.length;o+=1)Sq(t.charCodeAt(o),s,i);return e.join("")}function VOe(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function KOe(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}VOe(r,e)}}function QOe(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function JOe(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Sq(t.charCodeAt(s),n,r);return new Uint8Array(e)}function YOe(t){const e=[];return KOe(t,n=>e.push(n)),new Uint8Array(e)}function ZOe(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>s6(s,n,r)),s6(null,n,r),e.join("")}function XOe(t){return Math.round(Date.now()/1e3)+t}function eRe(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const _o=()=>typeof window<"u"&&typeof document<"u",Ld={tested:!1,writable:!1},hw=()=>{if(!_o())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ld.tested)return Ld.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ld.tested=!0,Ld.writable=!0}catch{Ld.tested=!0,Ld.writable=!1}return Ld.writable};function tRe(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const Iq=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Rn(async()=>{const{default:r}=await Promise.resolve().then(()=>Ey);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},nRe=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Tq=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},rE=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},sE=async(t,e)=>{await t.removeItem(e)};class aA{constructor(){this.promise=new aA.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}aA.promiseConstructor=Promise;function K2(t){const e=t.split(".");if(e.length!==3)throw new dw("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!jOe.test(e[r]))throw new dw("JWT not in base64url format");return{header:JSON.parse(i6(e[0])),payload:JSON.parse(i6(e[1])),signature:JOe(e[2]),raw:{header:e[0],payload:e[1]}}}async function rRe(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function sRe(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function iRe(t){return("0"+t.toString(16)).substr(-2)}function oRe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,iRe).join("")}async function aRe(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function cRe(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await aRe(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _p(t,e,n=!1){const r=oRe();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Tq(t,`${e}-code-verifier`,s);const i=await cRe(r);return[i,r===i?"plain":"s256"]}const lRe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function uRe(t){const e=t.headers.get(TP);if(!e||!e.match(lRe))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function dRe(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function hRe(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const fRe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function xp(t){if(!fRe.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var pRe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const qd=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),gRe=[502,503,504];async function o6(t){var e;if(!nRe(t))throw new NP(qd(t),0);if(gRe.includes(t.status))throw new NP(qd(t),t.status);let n;try{n=await t.json()}catch(i){throw new Aq(qd(i),i)}let r;const s=uRe(t);if(s&&s.getTime()>=Cq["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new n6(qd(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Hl}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new n6(qd(n),t.status,n.weak_password.reasons);throw new zOe(qd(n),t.status||500,r)}const mRe=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function ht(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[TP]||(i[TP]=Cq["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await yRe(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function yRe(t,e,n,r,s,i){const o=mRe(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(c){throw console.error(c),new NP(qd(c),0)}if(a.ok||await o6(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(c){await o6(c)}}function hc(t){var e;let n=null;ERe(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=XOe(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function a6(t){const e=hc(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ou(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function wRe(t){return{data:t,error:null}}function bRe(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=pRe(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function vRe(t){return t}function ERe(t){return t.access_token&&t.refresh_token&&t.expires_in}const Q2=["global","local","others"];var _Re=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class xRe{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Iq(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=Q2[0]){if(Q2.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Q2.join(", ")}`);try{return await ht(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ht(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ou})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=_Re(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await ht(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:bRe,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(nt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ht(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ou})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,c;try{const l={nextPage:null,lastPage:0,total:0},u=await ht(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:vRe});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);l[`${y}Page`]=g}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(nt(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){xp(e);try{return await ht(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ou})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){xp(e);try{return await ht(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:ou})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){xp(e);try{return await ht(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:ou})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){xp(e.userId);try{const{data:n,error:r}=await ht(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(nt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){xp(e.userId),xp(e.id);try{return{data:await ht(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}}}const CRe={getItem:t=>hw()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{hw()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{hw()&&globalThis.localStorage.removeItem(t)}};function c6(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function ARe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Cp={debug:!!(globalThis&&hw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Nq extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class SRe extends Nq{}async function IRe(t,e,n){Cp.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Cp.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Cp.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Cp.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Cp.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new SRe(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Cp.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}ARe();const TRe={url:BOe,storageKey:LOe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:MOe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function l6(t,e,n){return await n()}class Db{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Db.nextInstanceID,Db.nextInstanceID+=1,this.instanceID>0&&_o()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},TRe),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new xRe({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Iq(s.fetch),this.lock=s.lock||l6,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:_o()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=IRe:this.lock=l6,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:hw()?this.storage=CRe:(this.memoryStorage={},this.storage=c6(this.memoryStorage)):(this.memoryStorage={},this.storage=c6(this.memoryStorage)),_o()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${xq}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=tRe(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),_o()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),qOe(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return nt(n)?{error:n}:{error:new Aq("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:hc}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(nt(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await _p(this.storage,this.storageKey)),i=await ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:p},xform:hc})}else if("phone"in e){const{phone:u,password:d,options:h}=e;i=await ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:hc})}else throw new tE("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(nt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await ht(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:a6})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await ht(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:a6})}else throw new tE("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new eE}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(nt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,o,a,c,l,u,d,h,f;let p,g;if("message"in e)p=e.message,g=e.signature;else{const{chain:y,wallet:w,statement:v,options:b}=e;let x;if(_o())if(typeof w=="object")x=w;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))x=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=w}const _=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in x&&x.signIn){const C=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),v?{statement:v}:null));let S;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")S=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)S=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)p=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),g=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${_.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((d=(u=b==null?void 0:b.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...b.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const C=await x.signMessage(new TextEncoder().encode(p),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=C}}try{const{data:y,error:w}=await ht(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:ZOe(g)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:hc});if(w)throw w;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new eE}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:w})}catch(y){if(nt(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(e){const n=await rE(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await ht(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:hc});if(await sE(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new eE}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(nt(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await ht(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:hc}),{data:c,error:l}=a;return l?{data:{user:null,session:null},error:l}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new eE}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:l})}catch(n){if(nt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:c}=e;let l=null,u=null;this.flowType==="pkce"&&([l,u]=await _p(this.storage,this.storageKey));const{error:d}=await ht(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:c}=e,{data:l,error:u}=await ht(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new tE("You must provide either an email or phone number.")}catch(a){if(nt(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await ht(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:hc});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,l=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(s){if(nt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await _p(this.storage,this.storageKey)),await ht(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:wRe})}catch(i){if(nt(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Hl;const{error:s}=await ht(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(nt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await ht(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await ht(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new tE("You must provide either an email or phone number and a type")}catch(n){if(nt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await rE(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<G2:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,l,u)=>(!o&&l==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,l,u))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ht(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ou}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Hl}:await ht(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:ou})})}catch(n){if(nt(n))return WOe(n)&&(await this._removeSession(),await sE(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Hl;const o=s.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await _p(this.storage,this.storageKey));const{data:l,error:u}=await ht(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:ou});if(u)throw u;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Hl;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=K2(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(nt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Hl;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(nt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!_o())throw new nE("No browser detected.");if(e.error||e.error_description||e.error_code)throw new nE(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new t6("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new nE("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new t6("No code detected.");const{data:v,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:c,token_type:l}=e;if(!i||!a||!o||!l)throw new nE("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;c&&(h=parseInt(c));const f=h-u;f*1e3<=Rp&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const p=h-d;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,u);const{data:g,error:y}=await this._getUser(i);if(y)throw y;const w={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:h,refresh_token:o,token_type:l,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(r){if(nt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await rE(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(HOe(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await sE(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=eRe(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await _p(this.storage,this.storageKey,!0));try{return await ht(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(nt(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,c,l,u;const{data:d,error:h}=i;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ht(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return _o()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(nt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await ht(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(nt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await sRe(async s=>(s>0&&await rRe(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await ht(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:hc})),(s,i)=>{const o=200*Math.pow(2,s);return i&&V2(i)&&Date.now()+o-r<Rp})}catch(r){if(this._debug(n,"error",r),nt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),_o()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await rE(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<G2;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${G2}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),V2(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Hl;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new aA;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Hl;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),nt(i)){const o={session:null,error:i};return V2(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Tq(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await sE(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&_o()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Rp);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Rp);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Rp}ms, refresh threshold is ${IP} ticks`),s<=IP&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Nq)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_o()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await _p(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await ht(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(nt(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:l}=await ht(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(nt(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await ht(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(nt(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await ht(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(nt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=K2(s.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+FOe>Date.now()))return r;const{data:s,error:i}=await ht(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new dw("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new dw("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};r=f.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:c}}=K2(r);if(dRe(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:s,signature:o},error:null}}const l=hRe(s.alg),u=await this.fetchJwk(s.kid,n),d=await crypto.subtle.importKey("jwk",u,l,!0,["verify"]);if(!await crypto.subtle.verify(l,d,o,YOe(`${a}.${c}`)))throw new dw("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}}Db.nextInstanceID=0;const NRe=Db;class PRe extends NRe{constructor(e){super(e)}}var kRe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class ORe{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=$Oe(e),c=new URL(a);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const l=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:IOe,realtime:NOe,auth:Object.assign(Object.assign({},TOe),{storageKey:l}),global:SOe},d=UOe(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=ROe(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Qke(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new Ake(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new xOe(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return kRe(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:c},l,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new PRe({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new uOe(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ZR=(t,e,n)=>new ORe(t,e,n),RRe="6.14.4";function DRe(t,e,n){const r=e.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${n}`,s.value=t,s}async function cs(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,s,i)=>(r[e[i]]=s,r),{})}function Ge(t,e,n){for(let r in e){let s=e[r];const i=n?n[r]:null;i&&DRe(s,i,r),Object.defineProperty(t,r,{enumerable:!0,value:s,writable:!1})}}function Zp(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>Zp(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let s=0;s<t.length;s++)r+=n[t[s]>>4],r+=n[t[s]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return Zp(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${Zp(r,e)}: ${Zp(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Ir(t,e){return t&&t.code===e}function XR(t){return Ir(t,"CALL_EXCEPTION")}function pn(t,e,n){let r=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${Zp(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];i.push(o+"="+Zp(a))}}i.push(`code=${e}`),i.push(`version=${RRe}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return Ge(s,{code:e}),n&&Object.assign(s,n),s.shortMessage==null&&Ge(s,{shortMessage:r}),s}function ue(t,e,n,r){if(!t)throw pn(e,n,r)}function W(t,e,n,r){ue(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function Pq(t,e,n){n==null&&(n=""),n&&(n=": "+n),ue(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),ue(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");t.push(e)}catch{}return t},[]);function jv(t,e,n){if(n==null&&(n=""),t!==e){let r=n,s="new";n&&(r+=".",s+=" "+n),ue(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function kq(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(t.substring(s,s+2),16),s+=2;return r}W(!1,"invalid BytesLike value",e||"value",t)}function ct(t,e){return kq(t,e,!1)}function ds(t,e){return kq(t,e,!0)}function an(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function e3(t){return an(t,!0)||t instanceof Uint8Array}const u6="0123456789abcdef";function Ae(t){const e=ct(t);let n="0x";for(let r=0;r<e.length;r++){const s=e[r];n+=u6[(s&240)>>4]+u6[s&15]}return n}function kn(t){return"0x"+t.map(e=>Ae(e).substring(2)).join("")}function wg(t){return an(t,!0)?(t.length-2)/2:ct(t).length}function Tn(t,e,n){const r=ct(t);return n!=null&&n>r.length&&ue(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),Ae(r.slice(e??0,n??r.length))}function Oq(t,e,n){const r=ct(t);ue(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),n?s.set(r,e-r.length):s.set(r,0),Ae(s)}function xi(t,e){return Oq(t,e,!0)}function $Re(t,e){return Oq(t,e,!1)}const cA=BigInt(0),Wo=BigInt(1),Xp=9007199254740991;function gx(t,e){const n=lA(t,"value"),r=BigInt(it(e,"width"));if(ue(n>>r===cA,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-Wo){const s=(Wo<<r)-Wo;return-((~n&s)+Wo)}return n}function Rq(t,e){let n=Me(t,"value");const r=BigInt(it(e,"width")),s=Wo<<r-Wo;if(n<cA){n=-n,ue(n<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(Wo<<r)-Wo;return(~n&i)+Wo}else ue(n<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function mh(t,e){const n=lA(t,"value"),r=BigInt(it(e,"bits"));return n&(Wo<<r)-Wo}function Me(t,e){switch(typeof t){case"bigint":return t;case"number":return W(Number.isInteger(t),"underflow",e||"value",t),W(t>=-Xp&&t<=Xp,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){W(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}W(!1,"invalid BigNumberish value",e||"value",t)}function lA(t,e){const n=Me(t,e);return ue(n>=cA,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const d6="0123456789abcdef";function uA(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=d6[n>>4],e+=d6[n&15];return BigInt(e)}return Me(t)}function it(t,e){switch(typeof t){case"bigint":return W(t>=-Xp&&t<=Xp,"overflow",e||"value",t),Number(t);case"number":return W(Number.isInteger(t),"underflow",e||"value",t),W(t>=-Xp&&t<=Xp,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return it(BigInt(t),e)}catch(n){W(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}W(!1,"invalid numeric value",e||"value",t)}function URe(t){return it(uA(t))}function bd(t,e){let r=lA(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const s=it(e,"width");for(ue(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<s*2;)r="0"+r}return"0x"+r}function Xn(t){const e=lA(t,"value");if(e===cA)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(n.substring(i,i+2),16)}return r}function Fo(t){let e=Ae(e3(t)?t:Xn(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const h6="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const f6=BigInt(58);function BRe(t){const e=ct(t);let n=uA(e),r="";for(;n;)r=h6[Number(n%f6)]+r,n/=f6;for(let s=0;s<e.length&&!e[s];s++)r=h6[0]+r;return r}function LRe(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return ct(e)}function MRe(t){const e=ct(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var $g;class Dq{constructor(e,n,r){J(this,"filter");J(this,"emitter");H(this,$g);O(this,$g,n),Ge(this,{emitter:e,filter:r})}async removeListener(){E(this,$g)!=null&&await this.emitter.off(this.filter,E(this,$g))}}$g=new WeakMap;function jRe(t,e,n,r,s){W(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function $q(t,e,n,r,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)i++;return i}return t==="OVERRUN"?n.length-e-1:0}function FRe(t,e,n,r,s){return t==="OVERLONG"?(W(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),$q(t,e,n))}const zRe=Object.freeze({error:jRe,ignore:$q,replace:FRe});function HRe(t,e){e==null&&(e=zRe.error);const n=ct(t,"bytes"),r=[];let s=0;for(;s<n.length;){const i=n[s++];if(!(i>>7)){r.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,n,r):s+=e("BAD_PREFIX",s-1,n,r);continue}if(s-1+o>=n.length){s+=e("OVERRUN",s-1,n,r);continue}let c=i&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=n[s];if((u&192)!=128){s+=e("MISSING_CONTINUE",s,n,r),c=null;break}c=c<<6|u&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-o,n,r,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-o,n,r,c);continue}if(c<=a){s+=e("OVERLONG",s-1-o,n,r,c);continue}r.push(c)}}return r}function Vc(t,e){W(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(s&63|128);else if((s&64512)==55296){r++;const i=t.charCodeAt(r);W(r<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((s&1023)<<10)+(i&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128)}return new Uint8Array(n)}function WRe(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function mx(t,e){return WRe(HRe(t,e))}function Uq(t){async function e(n,r){ue(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=n.url.split(":")[0].toLowerCase();ue(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),ue(s==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=pn("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{i=pn("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let l;try{l=await fetch(n.url,c)}catch(f){throw clearTimeout(a),i||f}clearTimeout(a);const u={};l.headers.forEach((f,p)=>{u[p.toLowerCase()]=f});const d=await l.arrayBuffer(),h=d==null?null:new Uint8Array(d);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:h}}return e}const qRe=12,GRe=250;let p6=Uq();const VRe=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),KRe=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let J2=!1;async function Bq(t,e){try{const n=t.match(VRe);if(!n)throw new Error("invalid data");return new od(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?LRe(n[3]):JRe(n[3]))}catch{return new od(599,"BAD REQUEST (invalid data: URI)",{},null,new vd(t))}}function Lq(t){async function e(n,r){try{const s=n.match(KRe);if(!s)throw new Error("invalid link");return new vd(`${t}${s[2]}`)}catch{return new od(599,"BAD REQUEST (invalid IPFS URI)",{},null,new vd(n))}}return e}const iE={data:Bq,ipfs:Lq("https://gateway.ipfs.io/ipfs/")},Mq=new WeakMap;var Nh,yu;class QRe{constructor(e){H(this,Nh);H(this,yu);O(this,Nh,[]),O(this,yu,!1),Mq.set(e,()=>{if(!E(this,yu)){O(this,yu,!0);for(const n of E(this,Nh))setTimeout(()=>{n()},0);O(this,Nh,[])}})}addListener(e){ue(!E(this,yu),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),E(this,Nh).push(e)}get cancelled(){return E(this,yu)}checkSignal(){ue(!this.cancelled,"cancelled","CANCELLED",{})}}Nh=new WeakMap,yu=new WeakMap;function oE(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var Ug,Bg,Po,Cc,Lg,Mg,sr,fi,Ac,Ph,kh,Oh,_a,ko,wu,Rh,P0;const Nx=class Nx{constructor(e){H(this,Rh);H(this,Ug);H(this,Bg);H(this,Po);H(this,Cc);H(this,Lg);H(this,Mg);H(this,sr);H(this,fi);H(this,Ac);H(this,Ph);H(this,kh);H(this,Oh);H(this,_a);H(this,ko);H(this,wu);O(this,Mg,String(e)),O(this,Ug,!1),O(this,Bg,!0),O(this,Po,{}),O(this,Cc,""),O(this,Lg,3e5),O(this,ko,{slotInterval:GRe,maxAttempts:qRe}),O(this,wu,null)}get url(){return E(this,Mg)}set url(e){O(this,Mg,String(e))}get body(){return E(this,sr)==null?null:new Uint8Array(E(this,sr))}set body(e){if(e==null)O(this,sr,void 0),O(this,fi,void 0);else if(typeof e=="string")O(this,sr,Vc(e)),O(this,fi,"text/plain");else if(e instanceof Uint8Array)O(this,sr,e),O(this,fi,"application/octet-stream");else if(typeof e=="object")O(this,sr,Vc(JSON.stringify(e))),O(this,fi,"application/json");else throw new Error("invalid body")}hasBody(){return E(this,sr)!=null}get method(){return E(this,Cc)?E(this,Cc):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),O(this,Cc,String(e).toUpperCase())}get headers(){const e=Object.assign({},E(this,Po));return E(this,Ac)&&(e.authorization=`Basic ${MRe(Vc(E(this,Ac)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&E(this,fi)&&(e["content-type"]=E(this,fi)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){E(this,Po)[String(e).toLowerCase()]=String(n)}clearHeaders(){O(this,Po,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return E(this,Ac)||null}setCredentials(e,n){W(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),O(this,Ac,`${e}:${n}`)}get allowGzip(){return E(this,Bg)}set allowGzip(e){O(this,Bg,!!e)}get allowInsecureAuthentication(){return!!E(this,Ug)}set allowInsecureAuthentication(e){O(this,Ug,!!e)}get timeout(){return E(this,Lg)}set timeout(e){W(e>=0,"timeout must be non-zero","timeout",e),O(this,Lg,e)}get preflightFunc(){return E(this,Ph)||null}set preflightFunc(e){O(this,Ph,e)}get processFunc(){return E(this,kh)||null}set processFunc(e){O(this,kh,e)}get retryFunc(){return E(this,Oh)||null}set retryFunc(e){O(this,Oh,e)}get getUrlFunc(){return E(this,wu)||p6}set getUrlFunc(e){O(this,wu,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${E(this,sr)?Ae(E(this,sr)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(E(this,ko).slotInterval=e.slotInterval),e.maxAttempts!=null&&(E(this,ko).maxAttempts=e.maxAttempts)}send(){return ue(E(this,_a)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),O(this,_a,new QRe(this)),te(this,Rh,P0).call(this,0,g6()+this.timeout,0,this,new od(0,"",{},null,this))}cancel(){ue(E(this,_a)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=Mq.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();ue(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new Nx(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,O(s,Po,Object.assign({},E(this,Po))),E(this,sr)&&O(s,sr,new Uint8Array(E(this,sr))),O(s,fi,E(this,fi)),s}clone(){const e=new Nx(this.url);return O(e,Cc,E(this,Cc)),E(this,sr)&&O(e,sr,E(this,sr)),O(e,fi,E(this,fi)),O(e,Po,Object.assign({},E(this,Po))),O(e,Ac,E(this,Ac)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),O(e,Ph,E(this,Ph)),O(e,kh,E(this,kh)),O(e,Oh,E(this,Oh)),O(e,ko,Object.assign({},E(this,ko))),O(e,wu,E(this,wu)),e}static lockConfig(){J2=!0}static getGateway(e){return iE[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(J2)throw new Error("gateways locked");iE[e]=n}static registerGetUrl(e){if(J2)throw new Error("gateways locked");p6=e}static createGetUrlFunc(e){return Uq(e)}static createDataGateway(){return Bq}static createIpfsGatewayFunc(e){return Lq(e)}};Ug=new WeakMap,Bg=new WeakMap,Po=new WeakMap,Cc=new WeakMap,Lg=new WeakMap,Mg=new WeakMap,sr=new WeakMap,fi=new WeakMap,Ac=new WeakMap,Ph=new WeakMap,kh=new WeakMap,Oh=new WeakMap,_a=new WeakMap,ko=new WeakMap,wu=new WeakMap,Rh=new WeakSet,P0=async function(e,n,r,s,i){var u,d,h;if(e>=E(this,ko).maxAttempts)return i.makeServerError("exceeded maximum retry limit");ue(g6()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await YRe(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in iE){const f=await iE[a](o.url,oE(E(s,_a)));if(f instanceof od){let p=f;if(this.processFunc){oE(E(s,_a));try{p=await this.processFunc(o,p)}catch(g){(g.throttle==null||typeof g.stall!="number")&&p.makeServerError("error in post-processing function",g).assertOk()}}return p}o=f}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,oE(E(s,_a)));let l=new od(c.statusCode,c.statusMessage,c.headers,c.body,s);if(l.statusCode===301||l.statusCode===302){try{const f=l.headers.location||"";return te(u=o.redirect(f),Rh,P0).call(u,e+1,n,0,s,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,e))){const f=l.headers["retry-after"];let p=E(this,ko).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof f=="string"&&f.match(/^[1-9][0-9]*$/)&&(p=parseInt(f)),te(d=o.clone(),Rh,P0).call(d,e+1,n,p,s,l)}if(this.processFunc){oE(E(s,_a));try{l=await this.processFunc(o,l)}catch(f){(f.throttle==null||typeof f.stall!="number")&&l.makeServerError("error in post-processing function",f).assertOk();let p=E(this,ko).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return f.stall>=0&&(p=f.stall),te(h=o.clone(),Rh,P0).call(h,e+1,n,p,s,l)}}return l};let vd=Nx;var Jb,Yb,Zb,pi,jg,Dh;const w3=class w3{constructor(e,n,r,s,i){H(this,Jb);H(this,Yb);H(this,Zb);H(this,pi);H(this,jg);H(this,Dh);O(this,Jb,e),O(this,Yb,n),O(this,Zb,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),O(this,pi,s==null?null:new Uint8Array(s)),O(this,jg,i||null),O(this,Dh,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${E(this,pi)?Ae(E(this,pi)):"null"}>`}get statusCode(){return E(this,Jb)}get statusMessage(){return E(this,Yb)}get headers(){return Object.assign({},E(this,Zb))}get body(){return E(this,pi)==null?null:new Uint8Array(E(this,pi))}get bodyText(){try{return E(this,pi)==null?"":mx(E(this,pi))}catch{ue(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{ue(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new w3(599,r,this.headers,this.body,E(this,jg)||void 0);return O(s,Dh,{message:e,error:n}),s}throwThrottleError(e,n){n==null?n=-1:W(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw Ge(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return E(this,pi)!=null}get request(){return E(this,jg)}ok(){return E(this,Dh).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=E(this,Dh);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{E(this,pi)&&(s=mx(E(this,pi)))}catch{}ue(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};Jb=new WeakMap,Yb=new WeakMap,Zb=new WeakMap,pi=new WeakMap,jg=new WeakMap,Dh=new WeakMap;let od=w3;function g6(){return new Date().getTime()}function JRe(t){return Vc(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function YRe(t){return new Promise(e=>setTimeout(e,t))}const ZRe=BigInt(-1),Co=BigInt(0),eg=BigInt(1),XRe=BigInt(5),Ap={};let bg="0000";for(;bg.length<80;)bg+=bg;function Md(t){let e=bg;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function u0(t,e,n){const r=BigInt(e.width);if(e.signed){const s=eg<<r-eg;ue(n==null||t>=-s&&t<s,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t>Co?t=gx(mh(t,r),r):t=-gx(mh(-t,r),r)}else{const s=eg<<r;ue(n==null||t>=0&&t<s,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t=(t%s+s)%s&s-eg}return t}function Y2(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,n=128,r=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const i=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);W(i,"invalid fixed format","format",t),e=i[1]!=="u",n=parseInt(i[2]),r=parseInt(i[3])}}else if(t){const i=t,o=(a,c,l)=>i[a]==null?l:(W(typeof i[a]===c,"invalid fixed format ("+a+" not "+c+")","format."+a,i[a]),i[a]);e=o("signed","boolean",e),n=o("width","number",n),r=o("decimals","number",r)}W(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),W(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const s=(e?"":"u")+"fixed"+String(n)+"x"+String(r);return{signed:e,width:n,decimals:r,name:s}}function e3e(t,e){let n="";t<Co&&(n="-",t*=ZRe);let r=t.toString();if(e===0)return n+r;for(;r.length<=e;)r=bg+r;const s=r.length-e;for(r=r.substring(0,s)+"."+r.substring(s);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return n+r}var Oo,Qt,is,Ut,Gd,fc,PP,kP,OP,RP;const eu=class eu{constructor(e,n,r){H(this,Ut);J(this,"format");H(this,Oo);H(this,Qt);H(this,is);J(this,"_value");jv(e,Ap,"FixedNumber"),O(this,Qt,n),O(this,Oo,r);const s=e3e(n,r.decimals);Ge(this,{format:r.name,_value:s}),O(this,is,Md(r.decimals))}get signed(){return E(this,Oo).signed}get width(){return E(this,Oo).width}get decimals(){return E(this,Oo).decimals}get value(){return E(this,Qt)}addUnsafe(e){return te(this,Ut,PP).call(this,e)}add(e){return te(this,Ut,PP).call(this,e,"add")}subUnsafe(e){return te(this,Ut,kP).call(this,e)}sub(e){return te(this,Ut,kP).call(this,e,"sub")}mulUnsafe(e){return te(this,Ut,OP).call(this,e)}mul(e){return te(this,Ut,OP).call(this,e,"mul")}mulSignal(e){te(this,Ut,Gd).call(this,e);const n=E(this,Qt)*E(e,Qt);return ue(n%E(this,is)===Co,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),te(this,Ut,fc).call(this,n/E(this,is),"mulSignal")}divUnsafe(e){return te(this,Ut,RP).call(this,e)}div(e){return te(this,Ut,RP).call(this,e,"div")}divSignal(e){ue(E(e,Qt)!==Co,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),te(this,Ut,Gd).call(this,e);const n=E(this,Qt)*E(this,is);return ue(n%E(e,Qt)===Co,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),te(this,Ut,fc).call(this,n/E(e,Qt),"divSignal")}cmp(e){let n=this.value,r=e.value;const s=this.decimals-e.decimals;return s>0?r*=Md(s):s<0&&(n*=Md(-s)),n<r?-1:n>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=E(this,Qt);return E(this,Qt)<Co&&(e-=E(this,is)-eg),e=E(this,Qt)/E(this,is)*E(this,is),te(this,Ut,fc).call(this,e,"floor")}ceiling(){let e=E(this,Qt);return E(this,Qt)>Co&&(e+=E(this,is)-eg),e=E(this,Qt)/E(this,is)*E(this,is),te(this,Ut,fc).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const n=this.decimals-e,r=XRe*Md(n-1);let s=this.value+r;const i=Md(n);return s=s/i*i,u0(s,E(this,Oo),"round"),new eu(Ap,s,E(this,Oo))}isZero(){return E(this,Qt)===Co}isNegative(){return E(this,Qt)<Co}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return eu.fromString(this.toString(),e)}static fromValue(e,n,r){const s=n==null?0:it(n),i=Y2(r);let o=Me(e,"value");const a=s-i.decimals;if(a>0){const c=Md(a);ue(o%c===Co,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=c}else a<0&&(o*=Md(-a));return u0(o,i,"fromValue"),new eu(Ap,o,i)}static fromString(e,n){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);W(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const s=Y2(n);let i=r[2]||"0",o=r[3]||"";for(;o.length<s.decimals;)o+=bg;ue(o.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,s.decimals);const a=BigInt(r[1]+i+o);return u0(a,s,"fromString"),new eu(Ap,a,s)}static fromBytes(e,n){let r=uA(ct(e,"value"));const s=Y2(n);return s.signed&&(r=gx(r,s.width)),u0(r,s,"fromBytes"),new eu(Ap,r,s)}};Oo=new WeakMap,Qt=new WeakMap,is=new WeakMap,Ut=new WeakSet,Gd=function(e){W(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},fc=function(e,n){return e=u0(e,E(this,Oo),n),new eu(Ap,e,E(this,Oo))},PP=function(e,n){return te(this,Ut,Gd).call(this,e),te(this,Ut,fc).call(this,E(this,Qt)+E(e,Qt),n)},kP=function(e,n){return te(this,Ut,Gd).call(this,e),te(this,Ut,fc).call(this,E(this,Qt)-E(e,Qt),n)},OP=function(e,n){return te(this,Ut,Gd).call(this,e),te(this,Ut,fc).call(this,E(this,Qt)*E(e,Qt)/E(this,is),n)},RP=function(e,n){return ue(E(e,Qt)!==Co,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),te(this,Ut,Gd).call(this,e),te(this,Ut,fc).call(this,E(this,Qt)*E(this,is)/E(e,Qt),n)};let yx=eu;function t3e(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function m6(t,e,n){let r=0;for(let s=0;s<n;s++)r=r*256+t[e+s];return r}function y6(t,e,n,r){const s=[];for(;n<e+1+r;){const i=jq(t,n);s.push(i.result),n+=i.consumed,ue(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:s}}function jq(t,e){ue(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{ue(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const s=m6(t,e+1,r);return n(e+1+r+s),y6(t,e,e+1+r,r+s)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),y6(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const s=m6(t,e+1,r);n(e+1+r+s);const i=Ae(t.slice(e+1+r,e+1+r+s));return{consumed:1+r+s,result:i}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const s=Ae(t.slice(e+1,e+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:t3e(t[e])}}function Fv(t){const e=ct(t,"data"),n=jq(e,0);return W(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function w6(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function Fq(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(i){r=r.concat(Fq(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=w6(r.length);return s.unshift(247+s.length),s.concat(r)}const e=Array.prototype.slice.call(ct(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=w6(e.length);return n.unshift(183+n.length),n.concat(e)}const b6="0123456789abcdef";function Ed(t){let e="0x";for(const n of Fq(t))e+=b6[n>>4],e+=b6[n&15];return e}function n3e(t,e){let n=18;return n=it(e,"unit"),yx.fromValue(t,n,{decimals:n,width:512}).toString()}function r3e(t,e){W(typeof t=="string","value must be a string","value",t);let n=18;return n=it(e,"unit"),yx.fromString(t,{decimals:n,width:512}).value}function Z2(t){return n3e(t,18)}function v6(t){return r3e(t,18)}const hs=32,DP=new Uint8Array(hs),s3e=["then"],aE={},zq=new WeakMap;function Xd(t){return zq.get(t)}function E6(t,e){zq.set(t,e)}function d0(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function $P(t,e,n){return t.indexOf(null)>=0?e.map((r,s)=>r instanceof Wm?$P(Xd(r),r,n):r):t.reduce((r,s,i)=>{let o=e.getValue(s);return s in r||(n&&o instanceof Wm&&(o=$P(Xd(o),o,n)),r[s]=o),r},{})}var Fg;const tg=class tg extends Array{constructor(...n){const r=n[0];let s=n[1],i=(n[2]||[]).slice(),o=!0;r!==aE&&(s=n,i=[],o=!1);super(s.length);H(this,Fg);s.forEach((l,u)=>{this[u]=l});const a=i.reduce((l,u)=>(typeof u=="string"&&l.set(u,(l.get(u)||0)+1),l),new Map);if(E6(this,Object.freeze(s.map((l,u)=>{const d=i[u];return d!=null&&a.get(d)===1?d:null}))),O(this,Fg,[]),E(this,Fg)==null&&E(this,Fg),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(l,u,d)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const f=it(u,"%index");if(f<0||f>=this.length)throw new RangeError("out of result range");const p=l[f];return p instanceof Error&&d0(`index ${f}`,p),p}if(s3e.indexOf(u)>=0)return Reflect.get(l,u,d);const h=l[u];if(h instanceof Function)return function(...f){return h.apply(this===d?l:this,f)};if(!(u in l))return l.getValue.apply(this===d?l:this,[u])}return Reflect.get(l,u,d)}});return E6(c,Xd(this)),c}toArray(n){const r=[];return this.forEach((s,i)=>{s instanceof Error&&d0(`index ${i}`,s),n&&s instanceof tg&&(s=s.toArray(n)),r.push(s)}),r}toObject(n){const r=Xd(this);return r.reduce((s,i,o)=>(ue(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),$P(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=Xd(this),i=[],o=[];for(let a=n;a<r;a++)i.push(this[a]),o.push(s[a]);return new tg(aE,i,o)}filter(n,r){const s=Xd(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&d0(`index ${a}`,c),n.call(r,c,a,this)&&(i.push(c),o.push(s[a]))}return new tg(aE,i,o)}map(n,r){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&d0(`index ${i}`,o),s.push(n.call(r,o,i,this))}return s}getValue(n){const r=Xd(this).indexOf(n);if(r===-1)return;const s=this[r];return s instanceof Error&&d0(`property ${JSON.stringify(n)}`,s.error),s}static fromItems(n,r){return new tg(aE,n,r)}};Fg=new WeakMap;let Wm=tg;function _6(t){let e=Xn(t);return ue(e.length<=hs,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:hs,offset:e.length}),e.length!==hs&&(e=ds(kn([DP.slice(e.length%hs),e]))),e}class ul{constructor(e,n,r,s){J(this,"name");J(this,"type");J(this,"localName");J(this,"dynamic");Ge(this,{name:e,type:n,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){W(!1,e,this.localName,n)}}var Sc,$h,zg,VE;class UP{constructor(){H(this,zg);H(this,Sc);H(this,$h);O(this,Sc,[]),O(this,$h,0)}get data(){return kn(E(this,Sc))}get length(){return E(this,$h)}appendWriter(e){return te(this,zg,VE).call(this,ds(e.data))}writeBytes(e){let n=ds(e);const r=n.length%hs;return r&&(n=ds(kn([n,DP.slice(r)]))),te(this,zg,VE).call(this,n)}writeValue(e){return te(this,zg,VE).call(this,_6(e))}writeUpdatableValue(){const e=E(this,Sc).length;return E(this,Sc).push(DP),O(this,$h,E(this,$h)+hs),n=>{E(this,Sc)[e]=_6(n)}}}Sc=new WeakMap,$h=new WeakMap,zg=new WeakSet,VE=function(e){return E(this,Sc).push(e),O(this,$h,E(this,$h)+e.length),e.length};var Ls,gi,Uh,Bh,bu,kf,LP,Hq;const b3=class b3{constructor(e,n,r){H(this,kf);J(this,"allowLoose");H(this,Ls);H(this,gi);H(this,Uh);H(this,Bh);H(this,bu);Ge(this,{allowLoose:!!n}),O(this,Ls,ds(e)),O(this,Uh,0),O(this,Bh,null),O(this,bu,r??1024),O(this,gi,0)}get data(){return Ae(E(this,Ls))}get dataLength(){return E(this,Ls).length}get consumed(){return E(this,gi)}get bytes(){return new Uint8Array(E(this,Ls))}subReader(e){const n=new b3(E(this,Ls).slice(E(this,gi)+e),this.allowLoose,E(this,bu));return O(n,Bh,this),n}readBytes(e,n){let r=te(this,kf,Hq).call(this,0,e,!!n);return te(this,kf,LP).call(this,e),O(this,gi,E(this,gi)+r.length),r.slice(0,e)}readValue(){return uA(this.readBytes(hs))}readIndex(){return URe(this.readBytes(hs))}};Ls=new WeakMap,gi=new WeakMap,Uh=new WeakMap,Bh=new WeakMap,bu=new WeakMap,kf=new WeakSet,LP=function(e){var n;if(E(this,Bh))return te(n=E(this,Bh),kf,LP).call(n,e);O(this,Uh,E(this,Uh)+e),ue(E(this,bu)<1||E(this,Uh)<=E(this,bu)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${E(this,bu)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:ds(E(this,Ls)),offset:E(this,gi),length:e,info:{bytesRead:E(this,Uh),dataLength:this.dataLength}})},Hq=function(e,n,r){let s=Math.ceil(n/hs)*hs;return E(this,gi)+s>E(this,Ls).length&&(this.allowLoose&&r&&E(this,gi)+n<=E(this,Ls).length?s=n:ue(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:ds(E(this,Ls)),length:E(this,Ls).length,offset:E(this,gi)+s})),E(this,Ls).slice(E(this,gi),E(this,gi)+s)};let BP=b3;function wx(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function t3(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function i3e(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");wx(t.outputLen),wx(t.blockLen)}function qm(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Wq(t,e){t3(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const X2=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qq=t=>t instanceof Uint8Array,o3e=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),eI=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),ha=(t,e)=>t<<32-e|t>>>e,a3e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!a3e)throw new Error("Non little-endian hardware is not supported");function c3e(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function dA(t){if(typeof t=="string"&&(t=c3e(t)),!qq(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function l3e(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!qq(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class n3{clone(){return this._cloneInto()}}function r3(t){const e=r=>t().update(dA(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function u3e(t=32){if(X2&&typeof X2.getRandomValues=="function")return X2.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class Gq extends n3{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,i3e(e);const r=dA(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return qm(this),this.iHash.update(e),this}digestInto(e){qm(this),t3(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Vq=(t,e,n)=>new Gq(t,e).update(n).digest();Vq.create=(t,e)=>new Gq(t,e);function d3e(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}class Kq extends n3{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=eI(this.buffer)}update(e){qm(this);const{view:n,buffer:r,blockLen:s}=this;e=dA(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=eI(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){qm(this),Wq(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;d3e(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=eI(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const h3e=(t,e,n)=>t&e^~t&n,f3e=(t,e,n)=>t&e^t&n^e&n,p3e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ul=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Bl=new Uint32Array(64);class g3e extends Kq{constructor(){super(64,32,8,!1),this.A=Ul[0]|0,this.B=Ul[1]|0,this.C=Ul[2]|0,this.D=Ul[3]|0,this.E=Ul[4]|0,this.F=Ul[5]|0,this.G=Ul[6]|0,this.H=Ul[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Bl[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Bl[d-15],f=Bl[d-2],p=ha(h,7)^ha(h,18)^h>>>3,g=ha(f,17)^ha(f,19)^f>>>10;Bl[d]=g+Bl[d-7]+p+Bl[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=ha(a,6)^ha(a,11)^ha(a,25),f=u+h+h3e(a,c,l)+p3e[d]+Bl[d]|0,g=(ha(r,2)^ha(r,13)^ha(r,22))+f3e(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Bl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Qq=r3(()=>new g3e),cE=BigInt(2**32-1),MP=BigInt(32);function Jq(t,e=!1){return e?{h:Number(t&cE),l:Number(t>>MP&cE)}:{h:Number(t>>MP&cE)|0,l:Number(t&cE)|0}}function Yq(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=Jq(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const m3e=(t,e)=>BigInt(t>>>0)<<MP|BigInt(e>>>0),y3e=(t,e,n)=>t>>>n,w3e=(t,e,n)=>t<<32-n|e>>>n,b3e=(t,e,n)=>t>>>n|e<<32-n,v3e=(t,e,n)=>t<<32-n|e>>>n,E3e=(t,e,n)=>t<<64-n|e>>>n-32,_3e=(t,e,n)=>t>>>n-32|e<<64-n,x3e=(t,e)=>e,C3e=(t,e)=>t,Zq=(t,e,n)=>t<<n|e>>>32-n,Xq=(t,e,n)=>e<<n|t>>>32-n,eG=(t,e,n)=>e<<n-32|t>>>64-n,tG=(t,e,n)=>t<<n-32|e>>>64-n;function A3e(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const S3e=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),I3e=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,T3e=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),N3e=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,P3e=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),k3e=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,at={fromBig:Jq,split:Yq,toBig:m3e,shrSH:y3e,shrSL:w3e,rotrSH:b3e,rotrSL:v3e,rotrBH:E3e,rotrBL:_3e,rotr32H:x3e,rotr32L:C3e,rotlSH:Zq,rotlSL:Xq,rotlBH:eG,rotlBL:tG,add:A3e,add3L:S3e,add3H:I3e,add4L:T3e,add4H:N3e,add5H:k3e,add5L:P3e},[O3e,R3e]=at.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ll=new Uint32Array(80),Ml=new Uint32Array(80);class D3e extends Kq{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let b=0;b<16;b++,n+=4)Ll[b]=e.getUint32(n),Ml[b]=e.getUint32(n+=4);for(let b=16;b<80;b++){const x=Ll[b-15]|0,_=Ml[b-15]|0,C=at.rotrSH(x,_,1)^at.rotrSH(x,_,8)^at.shrSH(x,_,7),S=at.rotrSL(x,_,1)^at.rotrSL(x,_,8)^at.shrSL(x,_,7),T=Ll[b-2]|0,A=Ml[b-2]|0,P=at.rotrSH(T,A,19)^at.rotrBH(T,A,61)^at.shrSH(T,A,6),R=at.rotrSL(T,A,19)^at.rotrBL(T,A,61)^at.shrSL(T,A,6),j=at.add4L(S,R,Ml[b-7],Ml[b-16]),z=at.add4H(j,C,P,Ll[b-7],Ll[b-16]);Ll[b]=z|0,Ml[b]=j|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:y,Hh:w,Hl:v}=this;for(let b=0;b<80;b++){const x=at.rotrSH(d,h,14)^at.rotrSH(d,h,18)^at.rotrBH(d,h,41),_=at.rotrSL(d,h,14)^at.rotrSL(d,h,18)^at.rotrBL(d,h,41),C=d&f^~d&g,S=h&p^~h&y,T=at.add5L(v,_,S,R3e[b],Ml[b]),A=at.add5H(T,w,x,C,O3e[b],Ll[b]),P=T|0,R=at.rotrSH(r,s,28)^at.rotrBH(r,s,34)^at.rotrBH(r,s,39),j=at.rotrSL(r,s,28)^at.rotrBL(r,s,34)^at.rotrBL(r,s,39),z=r&i^r&a^i&a,K=s&o^s&c^o&c;w=g|0,v=y|0,g=f|0,y=p|0,f=d|0,p=h|0,{h:d,l:h}=at.add(l|0,u|0,A|0,P|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=at.add3L(P,j,K);r=at.add3H(I,A,R,z),s=I|0}({h:r,l:s}=at.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=at.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=at.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=at.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=at.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=at.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=at.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:w,l:v}=at.add(this.Hh|0,this.Hl|0,w|0,v|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,y,w,v)}roundClean(){Ll.fill(0),Ml.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const $3e=r3(()=>new D3e);function U3e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const x6=U3e();x6.crypto||x6.msCrypto;function B3e(t){switch(t){case"sha256":return Qq.create();case"sha512":return $3e.create()}W(!1,"invalid hashing algorithm name","algorithm",t)}const[nG,rG,sG]=[[],[],[]],L3e=BigInt(0),h0=BigInt(1),M3e=BigInt(2),j3e=BigInt(7),F3e=BigInt(256),z3e=BigInt(113);for(let t=0,e=h0,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],nG.push(2*(5*r+n)),rG.push((t+1)*(t+2)/2%64);let s=L3e;for(let i=0;i<7;i++)e=(e<<h0^(e>>j3e)*z3e)%F3e,e&M3e&&(s^=h0<<(h0<<BigInt(i))-h0);sG.push(s)}const[H3e,W3e]=Yq(sG,!0),C6=(t,e,n)=>n>32?eG(t,e,n):Zq(t,e,n),A6=(t,e,n)=>n>32?tG(t,e,n):Xq(t,e,n);function q3e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=C6(l,u,1)^n[a],h=A6(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=rG[o],c=C6(s,i,a),l=A6(s,i,a),u=nG[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=H3e[r],t[1]^=W3e[r]}n.fill(0)}class s3 extends n3{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,wx(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=o3e(this.state)}keccak(){q3e(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){qm(this);const{blockLen:n,state:r}=this;e=dA(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){qm(this,!1),t3(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return wx(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Wq(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new s3(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const G3e=(t,e,n)=>r3(()=>new s3(e,t,n)),V3e=G3e(1,136,256/8);let iG=!1;const oG=function(t){return V3e(t)};let aG=oG;function Wn(t){const e=ct(t,"data");return Ae(aG(e))}Wn._=oG;Wn.lock=function(){iG=!0};Wn.register=function(t){if(iG)throw new TypeError("keccak256 is locked");aG=t};Object.freeze(Wn);const cG=function(t){return B3e("sha256").update(t).digest()};let lG=cG,uG=!1;function xy(t){const e=ct(t,"data");return Ae(lG(e))}xy._=cG;xy.lock=function(){uG=!0};xy.register=function(t){if(uG)throw new Error("sha256 is locked");lG=t};Object.freeze(xy);Object.freeze(xy);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const dG=BigInt(0),hA=BigInt(1),K3e=BigInt(2),fA=t=>t instanceof Uint8Array,Q3e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Gm(t){if(!fA(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=Q3e[t[n]];return e}function hG(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function i3(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function Vm(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const s=r*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function nf(t){return i3(Gm(t))}function o3(t){if(!fA(t))throw new Error("Uint8Array expected");return i3(Gm(Uint8Array.from(t).reverse()))}function Km(t,e){return Vm(t.toString(16).padStart(e*2,"0"))}function a3(t,e){return Km(t,e).reverse()}function J3e(t){return Vm(hG(t))}function Io(t,e,n){let r;if(typeof e=="string")try{r=Vm(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(fA(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function $b(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!fA(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function Y3e(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Z3e(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function X3e(t){let e;for(e=0;t>dG;t>>=hA,e+=1);return e}function eDe(t,e){return t>>BigInt(e)&hA}const tDe=(t,e,n)=>t|(n?hA:dG)<<BigInt(e),c3=t=>(K3e<<BigInt(t-1))-hA,tI=t=>new Uint8Array(t),S6=t=>Uint8Array.from(t);function fG(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=tI(t),s=tI(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=tI())=>{s=a(S6([0]),d),r=a(),d.length!==0&&(s=a(S6([1]),d),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return $b(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const nDe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function zv(t,e,n={}){const r=(s,i,o)=>{const a=nDe[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const rDe=Object.freeze(Object.defineProperty({__proto__:null,bitGet:eDe,bitLen:X3e,bitMask:c3,bitSet:tDe,bytesToHex:Gm,bytesToNumberBE:nf,bytesToNumberLE:o3,concatBytes:$b,createHmacDrbg:fG,ensureBytes:Io,equalBytes:Y3e,hexToBytes:Vm,hexToNumber:i3,numberToBytesBE:Km,numberToBytesLE:a3,numberToHexUnpadded:hG,numberToVarBytesBE:J3e,utf8ToBytes:Z3e,validateObject:zv},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const dr=BigInt(0),Bn=BigInt(1),eh=BigInt(2),sDe=BigInt(3),jP=BigInt(4),I6=BigInt(5),T6=BigInt(8);BigInt(9);BigInt(16);function Ws(t,e){const n=t%e;return n>=dr?n:e+n}function iDe(t,e,n){if(n<=dr||e<dr)throw new Error("Expected power/modulo > 0");if(n===Bn)return dr;let r=Bn;for(;e>dr;)e&Bn&&(r=r*t%n),t=t*t%n,e>>=Bn;return r}function ji(t,e,n){let r=t;for(;e-- >dr;)r*=r,r%=n;return r}function FP(t,e){if(t===dr||e<=dr)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Ws(t,e),r=e,s=dr,i=Bn;for(;n!==dr;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Bn)throw new Error("invert: does not exist");return Ws(s,e)}function oDe(t){const e=(t-Bn)/eh;let n,r,s;for(n=t-Bn,r=0;n%eh===dr;n/=eh,r++);for(s=eh;s<t&&iDe(s,e,t)!==t-Bn;s++);if(r===1){const o=(t+Bn)/jP;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(n+Bn)/eh;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,s),n),d=a.pow(c,i),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(h);f<l&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const p=a.pow(u,Bn<<BigInt(l-f-1));u=a.sqr(p),d=a.mul(d,p),h=a.mul(h,u),l=f}return d}}function aDe(t){if(t%jP===sDe){const e=(t+Bn)/jP;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%T6===I6){const e=(t-I6)/T6;return function(r,s){const i=r.mul(s,eh),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,eh),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return oDe(t)}const cDe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function lDe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=cDe.reduce((r,s)=>(r[s]="function",r),e);return zv(t,n)}function uDe(t,e,n){if(n<dr)throw new Error("Expected power > 0");if(n===dr)return t.ONE;if(n===Bn)return e;let r=t.ONE,s=e;for(;n>dr;)n&Bn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Bn;return r}function dDe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function pG(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function hDe(t,e,n=!1,r={}){if(t<=dr)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=pG(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=aDe(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:c3(s),ZERO:dr,ONE:Bn,create:c=>Ws(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return dr<=c&&c<t},is0:c=>c===dr,isOdd:c=>(c&Bn)===Bn,neg:c=>Ws(-c,t),eql:(c,l)=>c===l,sqr:c=>Ws(c*c,t),add:(c,l)=>Ws(c+l,t),sub:(c,l)=>Ws(c-l,t),mul:(c,l)=>Ws(c*l,t),pow:(c,l)=>uDe(a,c,l),div:(c,l)=>Ws(c*FP(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>FP(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>dDe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?a3(c,i):Km(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?o3(c):nf(c)}});return Object.freeze(a)}function gG(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function mG(t){const e=gG(t);return e+Math.ceil(e/2)}function fDe(t,e,n=!1){const r=t.length,s=gG(e),i=mG(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=n?nf(t):o3(t),a=Ws(o,e-Bn)+Bn;return n?a3(a,s):Km(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pDe=BigInt(0),nI=BigInt(1);function gDe(t,e){const n=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>pDe;)i&nI&&(o=o.add(a)),a=a.double(),i>>=nI;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=r(i),c=[];let l=s,u=l;for(let d=0;d<o;d++){u=l,c.push(u);for(let h=1;h<a;h++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=r(s);let l=t.ZERO,u=t.BASE;const d=BigInt(2**s-1),h=2**s,f=BigInt(s);for(let p=0;p<a;p++){const g=p*c;let y=Number(o&d);o>>=f,y>c&&(y-=h,o+=nI);const w=g,v=g+Math.abs(y)-1,b=p%2!==0,x=y<0;y===0?u=u.add(n(b,i[w])):l=l.add(n(x,i[v]))}return{p:l,f:u}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function yG(t){return lDe(t.Fp),zv(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...pG(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function mDe(t){const e=yG(t);zv(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:yDe,hexToBytes:wDe}=rDe,yh={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=yh;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:yDe(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=yh,n=typeof t=="string"?wDe(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=yh._parseInt(n.subarray(2)),{d:o,l:a}=yh._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,o=s.length/2,a=n(i),c=n(o);return`30${n(o+i+4)}02${c}${s}02${a}${r}`}},Bc=BigInt(0),Zi=BigInt(1);BigInt(2);const N6=BigInt(3);BigInt(4);function bDe(t){const e=mDe(t),{Fp:n}=e,r=e.toBytes||((p,g,y)=>{const w=g.toAffine();return $b(Uint8Array.from([4]),n.toBytes(w.x),n.toBytes(w.y))}),s=e.fromBytes||(p=>{const g=p.subarray(1),y=n.fromBytes(g.subarray(0,n.BYTES)),w=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:y,y:w}});function i(p){const{a:g,b:y}=e,w=n.sqr(p),v=n.mul(w,p);return n.add(n.add(v,n.mul(p,g)),y)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&Bc<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:g,nByteLength:y,wrapPrivateKey:w,n:v}=e;if(g&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=Gm(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(y*2,"0")}let b;try{b=typeof p=="bigint"?p:nf(Io("private key",p,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof p}`)}return w&&(b=Ws(b,v)),a(b),b}const l=new Map;function u(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(g,y,w){if(this.px=g,this.py=y,this.pz=w,g==null||!n.isValid(g))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(w==null||!n.isValid(w))throw new Error("z required")}static fromAffine(g){const{x:y,y:w}=g||{};if(!g||!n.isValid(y)||!n.isValid(w))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const v=b=>n.eql(b,n.ZERO);return v(y)&&v(w)?d.ZERO:new d(y,w,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const y=n.invertBatch(g.map(w=>w.pz));return g.map((w,v)=>w.toAffine(y[v])).map(d.fromAffine)}static fromHex(g){const y=d.fromAffine(s(Io("pointHex",g)));return y.assertValidity(),y}static fromPrivateKey(g){return d.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y}=this.toAffine();if(!n.isValid(g)||!n.isValid(y))throw new Error("bad point: x or y not FE");const w=n.sqr(y),v=i(g);if(!n.eql(w,v))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:y,py:w,pz:v}=this,{px:b,py:x,pz:_}=g,C=n.eql(n.mul(y,_),n.mul(b,v)),S=n.eql(n.mul(w,_),n.mul(x,v));return C&&S}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:y}=e,w=n.mul(y,N6),{px:v,py:b,pz:x}=this;let _=n.ZERO,C=n.ZERO,S=n.ZERO,T=n.mul(v,v),A=n.mul(b,b),P=n.mul(x,x),R=n.mul(v,b);return R=n.add(R,R),S=n.mul(v,x),S=n.add(S,S),_=n.mul(g,S),C=n.mul(w,P),C=n.add(_,C),_=n.sub(A,C),C=n.add(A,C),C=n.mul(_,C),_=n.mul(R,_),S=n.mul(w,S),P=n.mul(g,P),R=n.sub(T,P),R=n.mul(g,R),R=n.add(R,S),S=n.add(T,T),T=n.add(S,T),T=n.add(T,P),T=n.mul(T,R),C=n.add(C,T),P=n.mul(b,x),P=n.add(P,P),T=n.mul(P,R),_=n.sub(_,T),S=n.mul(P,A),S=n.add(S,S),S=n.add(S,S),new d(_,C,S)}add(g){u(g);const{px:y,py:w,pz:v}=this,{px:b,py:x,pz:_}=g;let C=n.ZERO,S=n.ZERO,T=n.ZERO;const A=e.a,P=n.mul(e.b,N6);let R=n.mul(y,b),j=n.mul(w,x),z=n.mul(v,_),K=n.add(y,w),I=n.add(b,x);K=n.mul(K,I),I=n.add(R,j),K=n.sub(K,I),I=n.add(y,v);let N=n.add(b,_);return I=n.mul(I,N),N=n.add(R,z),I=n.sub(I,N),N=n.add(w,v),C=n.add(x,_),N=n.mul(N,C),C=n.add(j,z),N=n.sub(N,C),T=n.mul(A,I),C=n.mul(P,z),T=n.add(C,T),C=n.sub(j,T),T=n.add(j,T),S=n.mul(C,T),j=n.add(R,R),j=n.add(j,R),z=n.mul(A,z),I=n.mul(P,I),j=n.add(j,z),z=n.sub(R,z),z=n.mul(A,z),I=n.add(I,z),R=n.mul(j,I),S=n.add(S,R),R=n.mul(N,I),C=n.mul(K,C),C=n.sub(C,R),R=n.mul(K,j),T=n.mul(N,T),T=n.add(T,R),new d(C,S,T)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return f.wNAFCached(this,l,g,y=>{const w=n.invertBatch(y.map(v=>v.pz));return y.map((v,b)=>v.toAffine(w[b])).map(d.fromAffine)})}multiplyUnsafe(g){const y=d.ZERO;if(g===Bc)return y;if(a(g),g===Zi)return this;const{endo:w}=e;if(!w)return f.unsafeLadder(this,g);let{k1neg:v,k1:b,k2neg:x,k2:_}=w.splitScalar(g),C=y,S=y,T=this;for(;b>Bc||_>Bc;)b&Zi&&(C=C.add(T)),_&Zi&&(S=S.add(T)),T=T.double(),b>>=Zi,_>>=Zi;return v&&(C=C.negate()),x&&(S=S.negate()),S=new d(n.mul(S.px,w.beta),S.py,S.pz),C.add(S)}multiply(g){a(g);let y=g,w,v;const{endo:b}=e;if(b){const{k1neg:x,k1:_,k2neg:C,k2:S}=b.splitScalar(y);let{p:T,f:A}=this.wNAF(_),{p:P,f:R}=this.wNAF(S);T=f.constTimeNegate(x,T),P=f.constTimeNegate(C,P),P=new d(n.mul(P.px,b.beta),P.py,P.pz),w=T.add(P),v=A.add(R)}else{const{p:x,f:_}=this.wNAF(y);w=x,v=_}return d.normalizeZ([w,v])[0]}multiplyAndAddUnsafe(g,y,w){const v=d.BASE,b=(_,C)=>C===Bc||C===Zi||!_.equals(v)?_.multiplyUnsafe(C):_.multiply(C),x=b(this,y).add(b(g,w));return x.is0()?void 0:x}toAffine(g){const{px:y,py:w,pz:v}=this,b=this.is0();g==null&&(g=b?n.ONE:n.inv(v));const x=n.mul(y,g),_=n.mul(w,g),C=n.mul(v,g);if(b)return{x:n.ZERO,y:n.ZERO};if(!n.eql(C,n.ONE))throw new Error("invZ was invalid");return{x,y:_}}isTorsionFree(){const{h:g,isTorsionFree:y}=e;if(g===Zi)return!0;if(y)return y(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:y}=e;return g===Zi?this:y?y(d,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),r(d,this,g)}toHex(g=!0){return Gm(this.toRawBytes(g))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,f=gDe(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function vDe(t){const e=yG(t);return zv(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function EDe(t){const e=vDe(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(I){return Bc<I&&I<n.ORDER}function a(I){return Ws(I,r)}function c(I){return FP(I,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:h}=bDe({...e,toBytes(I,N,L){const U=N.toAffine(),$=n.toBytes(U.x),M=$b;return L?M(Uint8Array.from([N.hasEvenY()?2:3]),$):M(Uint8Array.from([4]),$,n.toBytes(U.y))},fromBytes(I){const N=I.length,L=I[0],U=I.subarray(1);if(N===s&&(L===2||L===3)){const $=nf(U);if(!o($))throw new Error("Point is not on curve");const M=d($);let G=n.sqrt(M);const X=(G&Zi)===Zi;return(L&1)===1!==X&&(G=n.neg(G)),{x:$,y:G}}else if(N===i&&L===4){const $=n.fromBytes(U.subarray(0,n.BYTES)),M=n.fromBytes(U.subarray(n.BYTES,2*n.BYTES));return{x:$,y:M}}else throw new Error(`Point of length ${N} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=I=>Gm(Km(I,e.nByteLength));function p(I){const N=r>>Zi;return I>N}function g(I){return p(I)?a(-I):I}const y=(I,N,L)=>nf(I.slice(N,L));class w{constructor(N,L,U){this.r=N,this.s=L,this.recovery=U,this.assertValidity()}static fromCompact(N){const L=e.nByteLength;return N=Io("compactSignature",N,L*2),new w(y(N,0,L),y(N,L,2*L))}static fromDER(N){const{r:L,s:U}=yh.toSig(Io("DER",N));return new w(L,U)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(N){return new w(this.r,this.s,N)}recoverPublicKey(N){const{r:L,s:U,recovery:$}=this,M=S(Io("msgHash",N));if($==null||![0,1,2,3].includes($))throw new Error("recovery id invalid");const G=$===2||$===3?L+e.n:L;if(G>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const X=$&1?"03":"02",ie=l.fromHex(X+f(G)),se=c(G),ce=a(-M*se),ye=a(U*se),Y=l.BASE.multiplyAndAddUnsafe(ie,ce,ye);if(!Y)throw new Error("point at infinify");return Y.assertValidity(),Y}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Vm(this.toDERHex())}toDERHex(){return yh.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Vm(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const v={isValidPrivateKey(I){try{return u(I),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const I=mG(e.n);return fDe(e.randomBytes(I),e.n)},precompute(I=8,N=l.BASE){return N._setWindowSize(I),N.multiply(BigInt(3)),N}};function b(I,N=!0){return l.fromPrivateKey(I).toRawBytes(N)}function x(I){const N=I instanceof Uint8Array,L=typeof I=="string",U=(N||L)&&I.length;return N?U===s||U===i:L?U===2*s||U===2*i:I instanceof l}function _(I,N,L=!0){if(x(I))throw new Error("first arg must be private key");if(!x(N))throw new Error("second arg must be public key");return l.fromHex(N).multiply(u(I)).toRawBytes(L)}const C=e.bits2int||function(I){const N=nf(I),L=I.length*8-e.nBitLength;return L>0?N>>BigInt(L):N},S=e.bits2int_modN||function(I){return a(C(I))},T=c3(e.nBitLength);function A(I){if(typeof I!="bigint")throw new Error("bigint expected");if(!(Bc<=I&&I<T))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Km(I,e.nByteLength)}function P(I,N,L=R){if(["recovered","canonical"].some(le=>le in L))throw new Error("sign() legacy options not supported");const{hash:U,randomBytes:$}=e;let{lowS:M,prehash:G,extraEntropy:X}=L;M==null&&(M=!0),I=Io("msgHash",I),G&&(I=Io("prehashed msgHash",U(I)));const ie=S(I),se=u(N),ce=[A(se),A(ie)];if(X!=null){const le=X===!0?$(n.BYTES):X;ce.push(Io("extraEntropy",le))}const ye=$b(...ce),Y=ie;function ne(le){const V=C(le);if(!h(V))return;const oe=c(V),Ie=l.BASE.multiply(V).toAffine(),de=a(Ie.x);if(de===Bc)return;const ge=a(oe*a(Y+de*se));if(ge===Bc)return;let Pe=(Ie.x===de?0:2)|Number(Ie.y&Zi),Ve=ge;return M&&p(ge)&&(Ve=g(ge),Pe^=1),new w(de,Ve,Pe)}return{seed:ye,k2sig:ne}}const R={lowS:e.lowS,prehash:!1},j={lowS:e.lowS,prehash:!1};function z(I,N,L=R){const{seed:U,k2sig:$}=P(I,N,L),M=e;return fG(M.hash.outputLen,M.nByteLength,M.hmac)(U,$)}l.BASE._setWindowSize(8);function K(I,N,L,U=j){var Ie;const $=I;if(N=Io("msgHash",N),L=Io("publicKey",L),"strict"in U)throw new Error("options.strict was renamed to lowS");const{lowS:M,prehash:G}=U;let X,ie;try{if(typeof $=="string"||$ instanceof Uint8Array)try{X=w.fromDER($)}catch(de){if(!(de instanceof yh.Err))throw de;X=w.fromCompact($)}else if(typeof $=="object"&&typeof $.r=="bigint"&&typeof $.s=="bigint"){const{r:de,s:ge}=$;X=new w(de,ge)}else throw new Error("PARSE");ie=l.fromHex(L)}catch(de){if(de.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(M&&X.hasHighS())return!1;G&&(N=e.hash(N));const{r:se,s:ce}=X,ye=S(N),Y=c(ce),ne=a(ye*Y),le=a(se*Y),V=(Ie=l.BASE.multiplyAndAddUnsafe(ie,ne,le))==null?void 0:Ie.toAffine();return V?a(V.x)===se:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:_,sign:z,verify:K,ProjectivePoint:l,Signature:w,utils:v}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function _De(t){return{hash:t,hmac:(e,...n)=>Vq(t,e,l3e(...n)),randomBytes:u3e}}function xDe(t,e){const n=r=>EDe({...t,..._De(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wG=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),P6=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),CDe=BigInt(1),zP=BigInt(2),k6=(t,e)=>(t+e/zP)/e;function ADe(t){const e=wG,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=ji(u,n,e)*u%e,h=ji(d,n,e)*u%e,f=ji(h,zP,e)*l%e,p=ji(f,s,e)*f%e,g=ji(p,i,e)*p%e,y=ji(g,a,e)*g%e,w=ji(y,c,e)*y%e,v=ji(w,a,e)*g%e,b=ji(v,n,e)*u%e,x=ji(b,o,e)*p%e,_=ji(x,r,e)*l%e,C=ji(_,zP,e);if(!HP.eql(HP.sqr(C),t))throw new Error("Cannot find square root");return C}const HP=hDe(wG,void 0,void 0,{sqrt:ADe}),Wl=xDe({a:BigInt(0),b:BigInt(7),Fp:HP,n:P6,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=P6,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-CDe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=k6(i*t,e),c=k6(-r*t,e);let l=Ws(t-a*n-c*s,e),u=Ws(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},Qq);BigInt(0);Wl.ProjectivePoint;const Ub="0x0000000000000000000000000000000000000000",O6="0x0000000000000000000000000000000000000000000000000000000000000000",R6=BigInt(0),D6=BigInt(1),$6=BigInt(2),U6=BigInt(27),B6=BigInt(28),lE=BigInt(35),Sp={};function L6(t){return xi(Xn(t),32)}var Hg,Wg,qg,Lh;const Ao=class Ao{constructor(e,n,r,s){H(this,Hg);H(this,Wg);H(this,qg);H(this,Lh);jv(e,Sp,"Signature"),O(this,Hg,n),O(this,Wg,r),O(this,qg,s),O(this,Lh,null)}get r(){return E(this,Hg)}set r(e){W(wg(e)===32,"invalid r","value",e),O(this,Hg,Ae(e))}get s(){return E(this,Wg)}set s(e){W(wg(e)===32,"invalid s","value",e);const n=Ae(e);W(parseInt(n.substring(0,3))<8,"non-canonical s","value",n),O(this,Wg,n)}get v(){return E(this,qg)}set v(e){const n=it(e,"value");W(n===27||n===28,"invalid v","v",e),O(this,qg,n)}get networkV(){return E(this,Lh)}get legacyChainId(){const e=this.networkV;return e==null?null:Ao.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=ct(this.s);return this.yParity&&(e[0]|=128),Ae(e)}get compactSerialized(){return kn([this.r,this.yParityAndS])}get serialized(){return kn([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Ao(Sp,this.r,this.s,this.v);return this.networkV&&O(e,Lh,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){const n=Me(e,"v");return n==U6||n==B6?R6:(W(n>=lE,"invalid EIP-155 v","v",e),(n-lE)/$6)}static getChainIdV(e,n){return Me(e)*$6+BigInt(35+n-27)}static getNormalizedV(e){const n=Me(e);return n===R6||n===U6?27:n===D6||n===B6?28:(W(n>=lE,"invalid v","v",e),n&D6?27:28)}static from(e){function n(l,u){W(l,u,"signature",e)}if(e==null)return new Ao(Sp,O6,O6,27);if(typeof e=="string"){const l=ct(e,"signature");if(l.length===64){const u=Ae(l.slice(0,32)),d=l.slice(32,64),h=d[0]&128?28:27;return d[0]&=127,new Ao(Sp,u,Ae(d),h)}if(l.length===65){const u=Ae(l.slice(0,32)),d=l.slice(32,64);n((d[0]&128)===0,"non-canonical s");const h=Ao.getNormalizedV(l[64]);return new Ao(Sp,u,Ae(d),h)}n(!1,"invalid raw signature length")}if(e instanceof Ao)return e.clone();const r=e.r;n(r!=null,"missing r");const s=L6(r),i=function(l,u){if(l!=null)return L6(l);if(u!=null){n(an(u,32),"invalid yParityAndS");const d=ct(u);return d[0]&=127,Ae(d)}n(!1,"missing s")}(e.s,e.yParityAndS);n((ct(i)[0]&128)==0,"non-canonical s");const{networkV:o,v:a}=function(l,u,d){if(l!=null){const h=Me(l);return{networkV:h>=lE?h:void 0,v:Ao.getNormalizedV(h)}}if(u!=null)return n(an(u,32),"invalid yParityAndS"),{v:ct(u)[0]&128?28:27};if(d!=null){switch(it(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new Ao(Sp,s,i,a);return o&&O(c,Lh,o),n(e.yParity==null||it(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};Hg=new WeakMap,Wg=new WeakMap,qg=new WeakMap,Lh=new WeakMap;let ti=Ao;var Ic;const th=class th{constructor(e){H(this,Ic);W(wg(e)===32,"invalid private key","privateKey","[REDACTED]"),O(this,Ic,Ae(e))}get privateKey(){return E(this,Ic)}get publicKey(){return th.computePublicKey(E(this,Ic))}get compressedPublicKey(){return th.computePublicKey(E(this,Ic),!0)}sign(e){W(wg(e)===32,"invalid digest length","digest",e);const n=Wl.sign(ds(e),ds(E(this,Ic)),{lowS:!0});return ti.from({r:bd(n.r,32),s:bd(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=th.computePublicKey(e);return Ae(Wl.getSharedSecret(ds(E(this,Ic)),ct(n),!1))}static computePublicKey(e,n){let r=ct(e,"key");if(r.length===32){const i=Wl.getPublicKey(r,!!n);return Ae(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=Wl.ProjectivePoint.fromHex(r);return Ae(s.toRawBytes(n))}static recoverPublicKey(e,n){W(wg(e)===32,"invalid digest length","digest",e);const r=ti.from(n);let s=Wl.Signature.fromCompact(ds(kn([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey(ds(e));return W(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,r){const s=Wl.ProjectivePoint.fromHex(th.computePublicKey(e).substring(2)),i=Wl.ProjectivePoint.fromHex(th.computePublicKey(n).substring(2));return"0x"+s.add(i).toHex(!!r)}};Ic=new WeakMap;let Bb=th;const SDe=BigInt(0),IDe=BigInt(36);function M6(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let s=0;s<40;s++)n[s]=e[s].charCodeAt(0);const r=ct(Wn(n));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const l3={};for(let t=0;t<10;t++)l3[String(t)]=String(t);for(let t=0;t<26;t++)l3[String.fromCharCode(65+t)]=String(10+t);const j6=15;function TDe(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>l3[r]).join("");for(;e.length>=j6;){let r=e.substring(0,j6);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const NDe=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function PDe(t){t=t.toLowerCase();let e=SDe;for(let n=0;n<t.length;n++)e=e*IDe+NDe[t[n]];return e}function Bt(t){if(W(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=M6(t);return W(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){W(t.substring(2,4)===TDe(t),"bad icap checksum","address",t);let e=PDe(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return M6("0x"+e)}W(!1,"invalid address","address",t)}function kDe(t){const e=Bt(t.from);let r=Me(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,Bt(Tn(Wn(Ed([e,r])),12))}function bG(t){return t&&typeof t.getAddress=="function"}async function rI(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(ue(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),W(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),Bt(n)}function fs(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?Bt(t):(ue(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),rI(t,e.resolveName(t)));if(bG(t))return rI(t,t.getAddress());if(t&&typeof t.then=="function")return rI(t,t);W(!1,"unsupported addressable value","target",t)}const mc={};function Ue(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new Zr(mc,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function Tt(t,e){return new Zr(mc,`bytes${e||""}`,t,{size:e})}const F6=Symbol.for("_ethers_typed");var Mh;const yc=class yc{constructor(e,n,r,s){J(this,"type");J(this,"value");H(this,Mh);J(this,"_typedSymbol");s==null&&(s=null),jv(mc,e,"Typed"),Ge(this,{_typedSymbol:F6,type:n,value:r}),O(this,Mh,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return E(this,Mh)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return E(this,Mh)===!0?-1:E(this,Mh)===!1?this.value.length:null}static from(e,n){return new yc(mc,e,n)}static uint8(e){return Ue(e,8)}static uint16(e){return Ue(e,16)}static uint24(e){return Ue(e,24)}static uint32(e){return Ue(e,32)}static uint40(e){return Ue(e,40)}static uint48(e){return Ue(e,48)}static uint56(e){return Ue(e,56)}static uint64(e){return Ue(e,64)}static uint72(e){return Ue(e,72)}static uint80(e){return Ue(e,80)}static uint88(e){return Ue(e,88)}static uint96(e){return Ue(e,96)}static uint104(e){return Ue(e,104)}static uint112(e){return Ue(e,112)}static uint120(e){return Ue(e,120)}static uint128(e){return Ue(e,128)}static uint136(e){return Ue(e,136)}static uint144(e){return Ue(e,144)}static uint152(e){return Ue(e,152)}static uint160(e){return Ue(e,160)}static uint168(e){return Ue(e,168)}static uint176(e){return Ue(e,176)}static uint184(e){return Ue(e,184)}static uint192(e){return Ue(e,192)}static uint200(e){return Ue(e,200)}static uint208(e){return Ue(e,208)}static uint216(e){return Ue(e,216)}static uint224(e){return Ue(e,224)}static uint232(e){return Ue(e,232)}static uint240(e){return Ue(e,240)}static uint248(e){return Ue(e,248)}static uint256(e){return Ue(e,256)}static uint(e){return Ue(e,256)}static int8(e){return Ue(e,-8)}static int16(e){return Ue(e,-16)}static int24(e){return Ue(e,-24)}static int32(e){return Ue(e,-32)}static int40(e){return Ue(e,-40)}static int48(e){return Ue(e,-48)}static int56(e){return Ue(e,-56)}static int64(e){return Ue(e,-64)}static int72(e){return Ue(e,-72)}static int80(e){return Ue(e,-80)}static int88(e){return Ue(e,-88)}static int96(e){return Ue(e,-96)}static int104(e){return Ue(e,-104)}static int112(e){return Ue(e,-112)}static int120(e){return Ue(e,-120)}static int128(e){return Ue(e,-128)}static int136(e){return Ue(e,-136)}static int144(e){return Ue(e,-144)}static int152(e){return Ue(e,-152)}static int160(e){return Ue(e,-160)}static int168(e){return Ue(e,-168)}static int176(e){return Ue(e,-176)}static int184(e){return Ue(e,-184)}static int192(e){return Ue(e,-192)}static int200(e){return Ue(e,-200)}static int208(e){return Ue(e,-208)}static int216(e){return Ue(e,-216)}static int224(e){return Ue(e,-224)}static int232(e){return Ue(e,-232)}static int240(e){return Ue(e,-240)}static int248(e){return Ue(e,-248)}static int256(e){return Ue(e,-256)}static int(e){return Ue(e,-256)}static bytes1(e){return Tt(e,1)}static bytes2(e){return Tt(e,2)}static bytes3(e){return Tt(e,3)}static bytes4(e){return Tt(e,4)}static bytes5(e){return Tt(e,5)}static bytes6(e){return Tt(e,6)}static bytes7(e){return Tt(e,7)}static bytes8(e){return Tt(e,8)}static bytes9(e){return Tt(e,9)}static bytes10(e){return Tt(e,10)}static bytes11(e){return Tt(e,11)}static bytes12(e){return Tt(e,12)}static bytes13(e){return Tt(e,13)}static bytes14(e){return Tt(e,14)}static bytes15(e){return Tt(e,15)}static bytes16(e){return Tt(e,16)}static bytes17(e){return Tt(e,17)}static bytes18(e){return Tt(e,18)}static bytes19(e){return Tt(e,19)}static bytes20(e){return Tt(e,20)}static bytes21(e){return Tt(e,21)}static bytes22(e){return Tt(e,22)}static bytes23(e){return Tt(e,23)}static bytes24(e){return Tt(e,24)}static bytes25(e){return Tt(e,25)}static bytes26(e){return Tt(e,26)}static bytes27(e){return Tt(e,27)}static bytes28(e){return Tt(e,28)}static bytes29(e){return Tt(e,29)}static bytes30(e){return Tt(e,30)}static bytes31(e){return Tt(e,31)}static bytes32(e){return Tt(e,32)}static address(e){return new yc(mc,"address",e)}static bool(e){return new yc(mc,"bool",!!e)}static bytes(e){return new yc(mc,"bytes",e)}static string(e){return new yc(mc,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new yc(mc,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===F6}static dereference(e,n){if(yc.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};Mh=new WeakMap;let Zr=yc;class ODe extends ul{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=Zr.dereference(n,"string");try{r=Bt(r)}catch(s){return this._throwError(s.message,n)}return e.writeValue(r)}decode(e){return Bt(bd(e.readValue(),20))}}class RDe extends ul{constructor(n){super(n.name,n.type,"_",n.dynamic);J(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function vG(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(l=>{const u=l.localName;return ue(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),ue(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),c[u]=!0,n[u]})}else W(!1,"invalid tuple value","tuple",n);W(e.length===r.length,"types/value length mismatch","tuple",n);let s=new UP,i=new UP,o=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let d=i.length;c.encode(i,u);let h=s.writeUpdatableValue();o.push(f=>{h(f+d)})}else c.encode(s,u)}),o.forEach(c=>{c(s.length)});let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function EG(t,e){let n=[],r=[],s=t.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=t.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(l){if(Ir(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(a){if(Ir(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");n.push(o),r.push(i.localName||null)}),Wm.fromItems(n,r)}class DDe extends ul{constructor(n,r,s){const i=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",i,s,o);J(this,"coder");J(this,"length");Ge(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(n);return r}encode(n,r){const s=Zr.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,n.writeValue(s.length)),Pq(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return vG(n,o,s)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),ue(r*hs<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*hs,length:n.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new RDe(this.coder));return EG(n,s)}}class $De extends ul{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=Zr.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class _G extends ul{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=ds(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class UDe extends _G{constructor(e){super("bytes",e)}decode(e){return Ae(super.decode(e))}}class BDe extends ul{constructor(n,r){let s="bytes"+String(n);super(s,s,r,!1);J(this,"size");Ge(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let s=ds(Zr.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(s)}decode(n){return Ae(n.readBytes(this.size))}}const LDe=new Uint8Array([]);class MDe extends ul{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(LDe)}decode(e){return e.readBytes(0),null}}const jDe=BigInt(0),FDe=BigInt(1),zDe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class HDe extends ul{constructor(n,r,s){const i=(r?"int":"uint")+n*8;super(i,i,s,!1);J(this,"size");J(this,"signed");Ge(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let s=Me(Zr.dereference(r,this.type)),i=mh(zDe,hs*8);if(this.signed){let o=mh(i,this.size*8-1);(s>o||s<-(o+FDe))&&this._throwError("value out-of-bounds",r),s=Rq(s,8*hs)}else(s<jDe||s>mh(i,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(s)}decode(n){let r=mh(n.readValue(),this.size*8);return this.signed&&(r=gx(r,this.size*8)),r}}class WDe extends _G{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,Vc(Zr.dereference(n,"string")))}decode(e){return mx(super.decode(e))}}class uE extends ul{constructor(n,r){let s=!1;const i=[];n.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,r,s);J(this,"coders");Ge(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(s=>{n.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[i]))}),Object.freeze(n)}encode(n,r){const s=Zr.dereference(r,"tuple");return vG(n,this.coders,s)}decode(n){return EG(n,this.coders)}}function sI(t,e){return{address:Bt(t),storageKeys:e.map((n,r)=>(W(an(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function Vf(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(W(n.length===2,"invalid slot set",`value[${r}]`,n),sI(n[0],n[1])):(W(n!=null&&typeof n=="object","invalid address-slot set","value",t),sI(n.address,n.storageKeys)));W(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((s,i)=>(s[i]=!0,s),{});return sI(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function xG(t){return{address:Bt(t.address),nonce:Me(t.nonce!=null?t.nonce:0),chainId:Me(t.chainId!=null?t.chainId:0),signature:ti.from(t.signature)}}function qDe(t){let e;return typeof t=="string"?e=Bb.computePublicKey(t,!1):e=t.publicKey,Bt(Wn("0x"+e.substring(4)).substring(26))}function GDe(t,e){return qDe(Bb.recoverPublicKey(t,e))}const ar=BigInt(0),VDe=BigInt(2),KDe=BigInt(27),QDe=BigInt(28),JDe=BigInt(35),YDe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),iI=4096*32;function ZDe(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return ct(t.blobToKzgCommitment(Ae(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return ct(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return ct(t.blobToKZGCommitment(Ae(r)));W(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return ct(t.computeBlobProof(Ae(r),Ae(s)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return ct(t.computeBlobKZGProof(Ae(r),Ae(s)));W(!1,"unsupported KZG library","kzg",t)}}}function z6(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=xy(e).substring(4),"0x"+n}function Cy(t){return t==="0x"?null:Bt(t)}function pA(t,e){try{return Vf(t)}catch(n){W(!1,n.message,e,t)}}function XDe(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const s=t[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);n.push({address:Cy(s[1]),nonce:Yt(s[2],"nonce"),chainId:Yt(s[0],"chainId"),signature:ti.from({yParity:Kf(s[3],"yParity"),r:xi(s[4],32),s:xi(s[5],32)})})}return n}catch(n){W(!1,n.message,e,t)}}function Kf(t,e){return t==="0x"?0:it(t,e)}function Yt(t,e){if(t==="0x")return ar;const n=Me(t,e);return W(n<=YDe,"value exceeds uint size",e,n),n}function wt(t,e){const n=Me(t,"value"),r=Xn(n);return W(r.length<=32,"value too large",`tx.${e}`,n),r}function gA(t){return Vf(t).map(e=>[e.address,e.storageKeys])}function e$e(t){return t.map(e=>[wt(e.chainId,"chainId"),e.address,wt(e.nonce,"nonce"),wt(e.signature.yParity,"yParity"),Xn(e.signature.r),Xn(e.signature.s)])}function t$e(t,e){W(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)W(an(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function n$e(t){const e=Fv(t);W(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:Kf(e[0],"nonce"),gasPrice:Yt(e[1],"gasPrice"),gasLimit:Yt(e[2],"gasLimit"),to:Cy(e[3]),value:Yt(e[4],"value"),data:Ae(e[5]),chainId:ar};if(e.length===6)return n;const r=Yt(e[6],"v"),s=Yt(e[7],"r"),i=Yt(e[8],"s");if(s===ar&&i===ar)n.chainId=r;else{let o=(r-JDe)/VDe;o<ar&&(o=ar),n.chainId=o,W(o!==ar||r===KDe||r===QDe,"non-canonical legacy v","v",e[6]),n.signature=ti.from({r:xi(e[7],32),s:xi(e[8],32),v:r})}return n}function r$e(t,e){const n=[wt(t.nonce,"nonce"),wt(t.gasPrice||0,"gasPrice"),wt(t.gasLimit,"gasLimit"),t.to||"0x",wt(t.value,"value"),t.data];let r=ar;if(t.chainId!=ar)r=Me(t.chainId,"tx.chainId"),W(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(r=i)}if(!e)return r!==ar&&(n.push(Xn(r)),n.push("0x"),n.push("0x")),Ed(n);let s=BigInt(27+e.yParity);return r!==ar?s=ti.getChainIdV(r,e.v):BigInt(e.v)!==s&&W(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(Xn(s)),n.push(Xn(e.r)),n.push(Xn(e.s)),Ed(n)}function mA(t,e){let n;try{if(n=Kf(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{W(!1,"invalid yParity","yParity",e[0])}const r=xi(e[1],32),s=xi(e[2],32),i=ti.from({r,s,yParity:n});t.signature=i}function s$e(t){const e=Fv(ct(t).slice(1));W(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Ae(t));const n={type:2,chainId:Yt(e[0],"chainId"),nonce:Kf(e[1],"nonce"),maxPriorityFeePerGas:Yt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Yt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Yt(e[4],"gasLimit"),to:Cy(e[5]),value:Yt(e[6],"value"),data:Ae(e[7]),accessList:pA(e[8],"accessList")};return e.length===9||mA(n,e.slice(9)),n}function i$e(t,e){const n=[wt(t.chainId,"chainId"),wt(t.nonce,"nonce"),wt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),wt(t.maxFeePerGas||0,"maxFeePerGas"),wt(t.gasLimit,"gasLimit"),t.to||"0x",wt(t.value,"value"),t.data,gA(t.accessList||[])];return e&&(n.push(wt(e.yParity,"yParity")),n.push(Xn(e.r)),n.push(Xn(e.s))),kn(["0x02",Ed(n)])}function o$e(t){const e=Fv(ct(t).slice(1));W(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Ae(t));const n={type:1,chainId:Yt(e[0],"chainId"),nonce:Kf(e[1],"nonce"),gasPrice:Yt(e[2],"gasPrice"),gasLimit:Yt(e[3],"gasLimit"),to:Cy(e[4]),value:Yt(e[5],"value"),data:Ae(e[6]),accessList:pA(e[7],"accessList")};return e.length===8||mA(n,e.slice(8)),n}function a$e(t,e){const n=[wt(t.chainId,"chainId"),wt(t.nonce,"nonce"),wt(t.gasPrice||0,"gasPrice"),wt(t.gasLimit,"gasLimit"),t.to||"0x",wt(t.value,"value"),t.data,gA(t.accessList||[])];return e&&(n.push(wt(e.yParity,"recoveryParam")),n.push(Xn(e.r)),n.push(Xn(e.s))),kn(["0x01",Ed(n)])}function c$e(t){let e=Fv(ct(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const i=e[1],o=e[2],a=e[3];W(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),W(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),W(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),W(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),W(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:i[c],commitment:o[c],proof:a[c]});e=e[0]}W(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",Ae(t));const s={type:3,chainId:Yt(e[0],"chainId"),nonce:Kf(e[1],"nonce"),maxPriorityFeePerGas:Yt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Yt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Yt(e[4],"gasLimit"),to:Cy(e[5]),value:Yt(e[6],"value"),data:Ae(e[7]),accessList:pA(e[8],"accessList"),maxFeePerBlobGas:Yt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(s.blobs=r),W(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),W(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<s.blobVersionedHashes.length;i++)W(an(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||mA(s,e.slice(11)),s}function l$e(t,e,n){const r=[wt(t.chainId,"chainId"),wt(t.nonce,"nonce"),wt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),wt(t.maxFeePerGas||0,"maxFeePerGas"),wt(t.gasLimit,"gasLimit"),t.to||Ub,wt(t.value,"value"),t.data,gA(t.accessList||[]),wt(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),t$e(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(wt(e.yParity,"yParity")),r.push(Xn(e.r)),r.push(Xn(e.s)),n)?kn(["0x03",Ed([r,n.map(s=>s.data),n.map(s=>s.commitment),n.map(s=>s.proof)])]):kn(["0x03",Ed(r)])}function u$e(t){const e=Fv(ct(t).slice(1));W(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Ae(t));const n={type:4,chainId:Yt(e[0],"chainId"),nonce:Kf(e[1],"nonce"),maxPriorityFeePerGas:Yt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Yt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Yt(e[4],"gasLimit"),to:Cy(e[5]),value:Yt(e[6],"value"),data:Ae(e[7]),accessList:pA(e[8],"accessList"),authorizationList:XDe(e[9],"authorizationList")};return e.length===10||mA(n,e.slice(10)),n}function d$e(t,e){const n=[wt(t.chainId,"chainId"),wt(t.nonce,"nonce"),wt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),wt(t.maxFeePerGas||0,"maxFeePerGas"),wt(t.gasLimit,"gasLimit"),t.to||"0x",wt(t.value,"value"),t.data,gA(t.accessList||[]),e$e(t.authorizationList||[])];return e&&(n.push(wt(e.yParity,"yParity")),n.push(Xn(e.r)),n.push(Xn(e.s))),kn(["0x04",Ed(n)])}var Ro,Gg,Vg,Kg,Qg,Jg,Yg,Zg,Xg,em,tm,nm,jh,vu,xa,Eu,rm,sm,KE;const ya=class ya{constructor(){H(this,sm);H(this,Ro);H(this,Gg);H(this,Vg);H(this,Kg);H(this,Qg);H(this,Jg);H(this,Yg);H(this,Zg);H(this,Xg);H(this,em);H(this,tm);H(this,nm);H(this,jh);H(this,vu);H(this,xa);H(this,Eu);H(this,rm);O(this,Ro,null),O(this,Gg,null),O(this,Kg,0),O(this,Qg,ar),O(this,Jg,null),O(this,Yg,null),O(this,Zg,null),O(this,Vg,"0x"),O(this,Xg,ar),O(this,em,ar),O(this,tm,null),O(this,nm,null),O(this,jh,null),O(this,vu,null),O(this,xa,null),O(this,Eu,null),O(this,rm,null)}get type(){return E(this,Ro)}set type(e){switch(e){case null:O(this,Ro,null);break;case 0:case"legacy":O(this,Ro,0);break;case 1:case"berlin":case"eip-2930":O(this,Ro,1);break;case 2:case"london":case"eip-1559":O(this,Ro,2);break;case 3:case"cancun":case"eip-4844":O(this,Ro,3);break;case 4:case"pectra":case"eip-7702":O(this,Ro,4);break;default:W(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=E(this,Gg);return e==null&&this.type===3?Ub:e}set to(e){O(this,Gg,e==null?null:Bt(e))}get nonce(){return E(this,Kg)}set nonce(e){O(this,Kg,it(e,"value"))}get gasLimit(){return E(this,Qg)}set gasLimit(e){O(this,Qg,Me(e))}get gasPrice(){const e=E(this,Jg);return e==null&&(this.type===0||this.type===1)?ar:e}set gasPrice(e){O(this,Jg,e==null?null:Me(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=E(this,Yg);return e??(this.type===2||this.type===3?ar:null)}set maxPriorityFeePerGas(e){O(this,Yg,e==null?null:Me(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=E(this,Zg);return e??(this.type===2||this.type===3?ar:null)}set maxFeePerGas(e){O(this,Zg,e==null?null:Me(e,"maxFeePerGas"))}get data(){return E(this,Vg)}set data(e){O(this,Vg,Ae(e))}get value(){return E(this,Xg)}set value(e){O(this,Xg,Me(e,"value"))}get chainId(){return E(this,em)}set chainId(e){O(this,em,Me(e))}get signature(){return E(this,tm)||null}set signature(e){O(this,tm,e==null?null:ti.from(e))}get accessList(){const e=E(this,nm)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){O(this,nm,e==null?null:Vf(e))}get authorizationList(){const e=E(this,rm)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){O(this,rm,e==null?null:e.map(n=>xG(n)))}get maxFeePerBlobGas(){const e=E(this,jh);return e==null&&this.type===3?ar:e}set maxFeePerBlobGas(e){O(this,jh,e==null?null:Me(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=E(this,vu);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){W(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)W(an(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}O(this,vu,e)}get blobs(){return E(this,Eu)==null?null:E(this,Eu).map(e=>Object.assign({},e))}set blobs(e){if(e==null){O(this,Eu,null);return}const n=[],r=[];for(let s=0;s<e.length;s++){const i=e[s];if(e3(i)){ue(E(this,xa),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=ct(i);if(W(o.length<=iI,"blob is too large",`blobs[${s}]`,i),o.length!==iI){const l=new Uint8Array(iI);l.set(o),o=l}const a=E(this,xa).blobToKzgCommitment(o),c=Ae(E(this,xa).computeBlobKzgProof(o,a));n.push({data:Ae(o),commitment:Ae(a),proof:c}),r.push(z6(1,a))}else{const o=Ae(i.commitment);n.push({data:Ae(i.data),commitment:o,proof:Ae(i.proof)}),r.push(z6(1,o))}}O(this,Eu,n),O(this,vu,r)}get kzg(){return E(this,xa)}set kzg(e){e==null?O(this,xa,null):O(this,xa,ZDe(e))}get hash(){return this.signature==null?null:Wn(te(this,sm,KE).call(this,!0,!1))}get unsignedHash(){return Wn(this.unsignedSerialized)}get from(){return this.signature==null?null:GDe(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:Bb.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return te(this,sm,KE).call(this,!0,!0)}get unsignedSerialized(){return te(this,sm,KE).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=E(this,jh)!=null||E(this,vu);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&ue(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),ue(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),ue(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return ya.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new ya;if(typeof e=="string"){const r=ct(e);if(r[0]>=127)return ya.from(n$e(r));switch(r[0]){case 1:return ya.from(o$e(r));case 2:return ya.from(s$e(r));case 3:return ya.from(c$e(r));case 4:return ya.from(u$e(r))}ue(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new ya;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=ti.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(W(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),W(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(W(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),W(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};Ro=new WeakMap,Gg=new WeakMap,Vg=new WeakMap,Kg=new WeakMap,Qg=new WeakMap,Jg=new WeakMap,Yg=new WeakMap,Zg=new WeakMap,Xg=new WeakMap,em=new WeakMap,tm=new WeakMap,nm=new WeakMap,jh=new WeakMap,vu=new WeakMap,xa=new WeakMap,Eu=new WeakMap,rm=new WeakMap,sm=new WeakSet,KE=function(e,n){ue(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return r$e(this,r);case 1:return a$e(this,r);case 2:return i$e(this,r);case 3:return l$e(this,r,n?this.blobs:null);case 4:return d$e(this,r)}ue(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let bx=ya;function If(t){return Wn(Vc(t))}var h$e="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const H6=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),W6=4;function f$e(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),s=1,i=[0,1];for(let _=1;_<r;_++)i.push(s+=n());let o=n(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const d=31,h=2**d,f=h>>>1,p=f>>1,g=h-1;let y=0;for(let _=0;_<d;_++)y=y<<1|u();let w=[],v=0,b=h;for(;;){let _=Math.floor(((y-v+1)*s-1)/b),C=0,S=r;for(;S-C>1;){let P=C+S>>>1;_<i[P]?S=P:C=P}if(C==0)break;w.push(C);let T=v+Math.floor(b*i[C]/s),A=v+Math.floor(b*i[C+1]/s)-1;for(;!((T^A)&f);)y=y<<1&g|u(),T=T<<1&g,A=A<<1&g|1;for(;T&~A&p;)y=y&f|y<<1&g>>>1|u(),T=T<<1^f,A=(A^f)<<1|f|1;v=T,b=1+A-T}let x=r-4;return w.map(_=>{switch(_-x){case 3:return x+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return x+256+(t[a++]<<8|t[a++]);case 1:return x+t[a++];default:return _-1}})}function p$e(t){let e=0;return()=>t[e++]}function CG(t){return p$e(f$e(g$e(t)))}function g$e(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let n=t.length,r=new Uint8Array(6*n>>3);for(let s=0,i=0,o=0,a=0;s<n;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(r[i++]=a>>(o-=8));return r}function m$e(t){return t&1?~t>>1:t>>1}function y$e(t,e){let n=Array(t);for(let r=0,s=0;r<t;r++)n[r]=s+=m$e(e());return n}function Lb(t,e=0){let n=[];for(;;){let r=t(),s=t();if(!s)break;e+=r;for(let i=0;i<s;i++)n.push(e+i);e+=s+1}return n}function AG(t){return Mb(()=>{let e=Lb(t);if(e.length)return e})}function SG(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(w$e(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(b$e(n,t))}return e.flat()}function Mb(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function IG(t,e,n){let r=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)y$e(t,n).forEach((i,o)=>r[o].push(i));return r}function w$e(t,e){let n=1+e(),r=e(),s=Mb(e);return IG(s.length,1+t,e).flatMap((o,a)=>{let[c,...l]=o;return Array(s[a]).fill().map((u,d)=>{let h=d*r;return[c+d*n,l.map(f=>f+h)]})})}function b$e(t,e){let n=1+e();return IG(n,1+t,e).map(s=>[s[0],s.slice(1)])}function v$e(t){let e=[],n=Lb(t);return s(r([]),[]),e;function r(i){let o=t(),a=Mb(()=>{let c=Lb(t).map(l=>n[l]);if(c.length)return r(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&e.push(a);for(let l of o)for(let u of l.Q)s(l,[...a,u],c)}}}function E$e(t){return t.toString(16).toUpperCase().padStart(2,"0")}function TG(t){return`{${E$e(t)}}`}function _$e(t){let e=[];for(let n=0,r=t.length;n<r;){let s=t.codePointAt(n);n+=s<65536?1:2,e.push(s)}return e}function Qm(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let s=0;s<n;)r.push(String.fromCodePoint(...t.slice(s,s+=4096)));return r.join("")}function x$e(t,e){let n=t.length,r=n-e.length;for(let s=0;r==0&&s<n;s++)r=t[s]-e[s];return r}var C$e="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const jb=44032,vx=4352,Ex=4449,_x=4519,NG=19,PG=21,Jm=28,xx=PG*Jm,A$e=NG*xx,S$e=jb+A$e,I$e=vx+NG,T$e=Ex+PG,N$e=_x+Jm;function k0(t){return t>>24&255}function kG(t){return t&16777215}let WP,q6,qP,QE;function P$e(){let t=CG(C$e);WP=new Map(AG(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),q6=new Set(Lb(t)),qP=new Map,QE=new Map;for(let[e,n]of SG(t)){if(!q6.has(e)&&n.length==2){let[r,s]=n,i=QE.get(r);i||(i=new Map,QE.set(r,i)),i.set(s,e)}qP.set(e,n.reverse())}}function OG(t){return t>=jb&&t<S$e}function k$e(t,e){if(t>=vx&&t<I$e&&e>=Ex&&e<T$e)return jb+(t-vx)*xx+(e-Ex)*Jm;if(OG(t)&&e>_x&&e<N$e&&(t-jb)%Jm==0)return t+(e-_x);{let n=QE.get(t);return n&&(n=n.get(e),n)?n:-1}}function RG(t){WP||P$e();let e=[],n=[],r=!1;function s(i){let o=WP.get(i);o&&(r=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(OG(i)){let o=i-jb,a=o/xx|0,c=o%xx/Jm|0,l=o%Jm;s(vx+a),s(Ex+c),l>0&&s(_x+l)}else{let o=qP.get(i);o?n.push(...o):s(i)}if(!n.length)break;i=n.pop()}if(r&&e.length>1){let i=k0(e[0]);for(let o=1;o<e.length;o++){let a=k0(e[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(i=k0(e[--c]),i<=a))break}i=k0(e[o])}}return e}function O$e(t){let e=[],n=[],r=-1,s=0;for(let i of t){let o=k0(i),a=kG(i);if(r==-1)o==0?r=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),s=o;else{let c=k$e(r,a);c>=0?r=c:s==0&&o==0?(e.push(r),r=a):(n.push(a),s=o)}}return r>=0&&e.push(r,...n),e}function DG(t){return RG(t).map(kG)}function R$e(t){return O$e(RG(t))}const G6=45,$G=".",UG=65039,BG=1,Cx=t=>Array.from(t);function Fb(t,e){return t.P.has(e)||t.Q.has(e)}class D$e extends Array{get is_emoji(){return!0}}let GP,LG,wh,VP,MG,vg,oI,Dp,Vd,V6,KP;function u3(){if(GP)return;let t=CG(h$e);const e=()=>Lb(t),n=()=>new Set(e()),r=(u,d)=>d.forEach(h=>u.add(h));GP=new Map(SG(t)),LG=n(),wh=e(),VP=new Set(e().map(u=>wh[u])),wh=new Set(wh),MG=n(),n();let s=AG(t),i=t();const o=()=>{let u=new Set;return e().forEach(d=>r(u,s[d])),r(u,e()),u};vg=Mb(u=>{let d=Mb(t).map(h=>h+96);if(d.length){let h=u>=i;d[0]-=32,d=Qm(d),h&&(d=`Restricted[${d}]`);let f=o(),p=o(),g=!t();return{N:d,P:f,Q:p,M:g,R:h}}}),oI=n(),Dp=new Map;let a=e().concat(Cx(oI)).sort((u,d)=>u-d);a.forEach((u,d)=>{let h=t(),f=a[d]=h?a[d-h]:{V:[],M:new Map};f.V.push(u),oI.has(u)||Dp.set(u,f)});for(let{V:u,M:d}of new Set(Dp.values())){let h=[];for(let p of u){let g=vg.filter(w=>Fb(w,p)),y=h.find(({G:w})=>g.some(v=>w.has(v)));y||(y={G:new Set,V:[]},h.push(y)),y.V.push(p),r(y.G,g)}let f=h.flatMap(p=>Cx(p.G));for(let{G:p,V:g}of h){let y=new Set(f.filter(w=>!p.has(w)));for(let w of g)d.set(w,y)}}Vd=new Set;let c=new Set;const l=u=>Vd.has(u)?c.add(u):Vd.add(u);for(let u of vg){for(let d of u.P)l(d);for(let d of u.Q)l(d)}for(let u of Vd)!Dp.has(u)&&!c.has(u)&&Dp.set(u,BG);r(Vd,DG(Vd)),V6=v$e(t).map(u=>D$e.from(u)).sort(x$e),KP=new Map;for(let u of V6){let d=[KP];for(let h of u){let f=d.map(p=>{let g=p.get(h);return g||(g=new Map,p.set(h,g)),g});h===UG?d.push(...f):d=f}for(let h of d)h.V=u}}function d3(t){return(jG(t)?"":`${h3(yA([t]))} `)+TG(t)}function h3(t){return`"${t}"‎`}function $$e(t){if(t.length>=4&&t[2]==G6&&t[3]==G6)throw new Error(`invalid label extension: "${Qm(t.slice(0,4))}"`)}function U$e(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function B$e(t){let e=t[0],n=H6.get(e);if(n)throw fw(`leading ${n}`);let r=t.length,s=-1;for(let i=1;i<r;i++){e=t[i];let o=H6.get(e);if(o){if(s==i)throw fw(`${n} + ${o}`);s=i+1,n=o}}if(s==r)throw fw(`trailing ${n}`)}function yA(t,e=1/0,n=TG){let r=[];L$e(t[0])&&r.push("◌"),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let o=0;o<i;o++){let a=t[o];jG(a)&&(r.push(Qm(t.slice(s,o))),r.push(n(a)),s=o+1)}return r.push(Qm(t.slice(s,i))),r.join("")}function L$e(t){return u3(),wh.has(t)}function jG(t){return u3(),MG.has(t)}function M$e(t){return H$e(j$e(t,R$e,G$e))}function j$e(t,e,n){if(!t)return[];u3();let r=0;return t.split($G).map(s=>{let i=_$e(s),o={input:i,offset:r};r+=i.length+1;try{let a=o.tokens=q$e(i,e,n),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(U$e(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(h=>h<128))$$e(u),l="ASCII";else{let h=a.flatMap(f=>f.is_emoji?[]:f);if(!h.length)l="Emoji";else{if(wh.has(u[0]))throw fw("leading combining mark");for(let g=1;g<c;g++){let y=a[g];if(!y.is_emoji&&wh.has(y[0]))throw fw(`emoji + combining mark: "${Qm(a[g-1])} + ${yA([y[0]])}"`)}B$e(u);let f=Cx(new Set(h)),[p]=z$e(f);W$e(p,h),F$e(p,f),l=p.N}}o.type=l}catch(a){o.error=a}return o})}function F$e(t,e){let n,r=[];for(let s of e){let i=Dp.get(s);if(i===BG)return;if(i){let o=i.M.get(s);if(n=n?n.filter(a=>o.has(a)):Cx(o),!n.length)return}else r.push(s)}if(n){for(let s of n)if(r.every(i=>Fb(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function z$e(t){let e=vg;for(let n of t){let r=e.filter(s=>Fb(s,n));if(!r.length)throw vg.some(s=>Fb(s,n))?zG(e[0],n):FG(n);if(e=r,r.length==1)break}return e}function H$e(t){return t.map(({input:e,error:n,output:r})=>{if(n){let s=n.message;throw new Error(t.length==1?s:`Invalid label ${h3(yA(e,63))}: ${s}`)}return Qm(r)}).join($G)}function FG(t){return new Error(`disallowed character: ${d3(t)}`)}function zG(t,e){let n=d3(e),r=vg.find(s=>s.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function fw(t){return new Error(`illegal placement: ${t}`)}function W$e(t,e){for(let n of e)if(!Fb(t,n))throw zG(t,n);if(t.M){let n=DG(e);for(let r=1,s=n.length;r<s;r++)if(VP.has(n[r])){let i=r+1;for(let o;i<s&&VP.has(o=n[i]);i++)for(let a=r;a<i;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${d3(o)}`);if(i-r>W6)throw new Error(`excessive non-spacing marks: ${h3(yA(n.slice(r-1,i)))} (${i-r}/${W6})`);r=i}}}function q$e(t,e,n){let r=[],s=[];for(t=t.slice().reverse();t.length;){let i=V$e(t);if(i)s.length&&(r.push(e(s)),s=[]),r.push(n(i));else{let o=t.pop();if(Vd.has(o))s.push(o);else{let a=GP.get(o);if(a)s.push(...a);else if(!LG.has(o))throw FG(o)}}}return s.length&&r.push(e(s)),r}function G$e(t){return t.filter(e=>e!=UG)}function V$e(t,e){let n=KP,r,s=t.length;for(;s&&(n=n.get(t[--s]),!!n);){let{V:i}=n;i&&(r=i,t.length=s)}return r}const HG=new Uint8Array(32);HG.fill(0);function K6(t){return W(t.length!==0,"invalid ENS name; empty component","comp",t),t}function WG(t){const e=Vc(K$e(t)),n=[];if(t.length===0)return n;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(n.push(K6(e.slice(r,s))),r=s+1);return W(r<e.length,"invalid ENS name; empty component","name",t),n.push(K6(e.slice(r))),n}function K$e(t){try{if(t.length===0)throw new Error("empty label");return M$e(t)}catch(e){W(!1,`invalid ENS name (${e.message})`,"name",t)}}function QP(t){W(typeof t=="string","invalid ENS name; not a string","name",t),W(t.length,"invalid ENS name (empty label)","name",t);let e=HG;const n=WG(t);for(;n.length;)e=Wn(kn([e,Wn(n.pop())]));return Ae(e)}function Q$e(t,e){const n=e;return W(n<=255,"DNS encoded label cannot exceed 255","length",n),Ae(kn(WG(t).map(r=>{W(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}const qG=new Uint8Array(32);qG.fill(0);const J$e=BigInt(-1),GG=BigInt(0),VG=BigInt(1),Y$e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Z$e(t){const e=ct(t),n=e.length%32;return n?kn([e,qG.slice(n)]):Ae(e)}const X$e=bd(VG,32),e8e=bd(GG,32),Q6={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},aI=["name","version","chainId","verifyingContract","salt"];function J6(t){return function(e){return W(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const t8e={name:J6("name"),version:J6("version"),chainId:function(t){const e=Me(t,"domain.chainId");return W(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):Fo(e)},verifyingContract:function(t){try{return Bt(t).toLowerCase()}catch{}W(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=ct(t,"domain.salt");return W(e.length===32,'invalid domain value "salt"',"domain.salt",t),Ae(e)}};function cI(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);W(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const s=mh(Y$e,n?r-1:r),i=n?(s+VG)*J$e:GG;return function(o){const a=Me(o,"value");return W(a>=i&&a<=s,`value out-of-bounds for ${t}`,"value",a),bd(n?Rq(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return W(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const s=ct(r);return W(s.length===n,`invalid length for ${t}`,"value",r),Z$e(r)}}}switch(t){case"address":return function(e){return xi(Bt(e),32)};case"bool":return function(e){return e?X$e:e8e};case"bytes":return function(e){return Wn(e)};case"string":return function(e){return If(e)}}return null}function Y6(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function dE(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var Xb,Tc,im,Px,KG;const Wi=class Wi{constructor(e){H(this,Px);J(this,"primaryType");H(this,Xb);H(this,Tc);H(this,im);O(this,Tc,new Map),O(this,im,new Map);const n=new Map,r=new Map,s=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:l,type:u})=>{let{base:d,index:h}=dE(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:l,type:d+(h||"")}}),n.set(c,new Set),r.set(c,[]),s.set(c,new Set)}),O(this,Xb,JSON.stringify(i));for(const c in i){const l=new Set;for(const u of i[c]){W(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const d=dE(u.type).base;W(d!==c,`circular type reference to ${JSON.stringify(d)}`,"types",e),!cI(d)&&(W(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),r.get(d).push(c),n.get(c).add(d))}}const o=Array.from(r.keys()).filter(c=>r.get(c).length===0);W(o.length!==0,"missing primary type","types",e),W(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),Ge(this,{primaryType:o[0]});function a(c,l){W(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of n.get(c))if(r.has(u)){a(u,l);for(const d of l)s.get(d).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of s){const u=Array.from(l);u.sort(),E(this,Tc).set(c,Y6(c,i[c])+u.map(d=>Y6(d,i[d])).join(""))}}get types(){return JSON.parse(E(this,Xb))}getEncoder(e){let n=E(this,im).get(e);return n||(n=te(this,Px,KG).call(this,e),E(this,im).set(e,n)),n}encodeType(e){const n=E(this,Tc).get(e);return W(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return Wn(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(cI(e))return r(e,n);const s=dE(e).array;if(s)return W(s.count===-1||s.count===n.length,`array length mismatch; expected length ${s.count}`,"value",n),n.map(o=>this._visit(s.prefix,o,r));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,n[a],r),o),{});W(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new Wi(e)}static getPrimaryType(e){return Wi.from(e).primaryType}static hashStruct(e,n,r){return Wi.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const s=Q6[r];W(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:s})}return n.sort((r,s)=>aI.indexOf(r.name)-aI.indexOf(s.name)),Wi.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return kn(["0x1901",Wi.hashDomain(e),Wi.from(n).hash(r)])}static hash(e,n,r){return Wn(Wi.encode(e,n,r))}static async resolveNames(e,n,r,s){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!an(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=Wi.from(n);o.visit(r,(a,c)=>(a==="address"&&!an(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:r}}static getPayload(e,n,r){Wi.hashDomain(e);const s={},i=[];aI.forEach(c=>{const l=e[c];l!=null&&(s[c]=t8e[c](l),i.push({name:c,type:Q6[c]}))});const o=Wi.from(n);n=o.types;const a=Object.assign({},n);return W(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=i,o.encode(r),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return Ae(ct(l));if(c.match(/^u?int/))return Me(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return W(typeof l=="string","invalid string","value",l),l}W(!1,"unsupported type","type",c)})}}};Xb=new WeakMap,Tc=new WeakMap,im=new WeakMap,Px=new WeakSet,KG=function(e){{const s=cI(e);if(s)return s}const n=dE(e).array;if(n){const s=n.prefix,i=this.getEncoder(s);return o=>{W(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(i);return E(this,Tc).has(s)&&(a=a.map(Wn)),Wn(kn(a))}}const r=this.types[e];if(r){const s=If(E(this,Tc).get(e));return i=>{const o=r.map(({name:a,type:c})=>{const l=this.getEncoder(c)(i[a]);return E(this,Tc).has(c)?Wn(l):l});return o.unshift(s),kn(o)}}W(!1,`unknown type: ${e}`,"type",e)};let Ax=Wi;function ps(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const n8e="external public payable override",r8e=ps(n8e.split(" ")),QG="constant external internal payable private public pure view override",s8e=ps(QG.split(" ")),JG="constructor error event fallback function receive struct",YG=ps(JG.split(" ")),ZG="calldata memory storage payable indexed",i8e=ps(ZG.split(" ")),o8e="tuple returns",a8e=[JG,ZG,o8e,QG].join(" "),c8e=ps(a8e.split(" ")),l8e={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},u8e=new RegExp("^(\\s*)"),d8e=new RegExp("^([0-9]+)"),h8e=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),XG=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),eV=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var xr,Do,ev,JP;const kx=class kx{constructor(e){H(this,ev);H(this,xr);H(this,Do);O(this,xr,0),O(this,Do,e.slice())}get offset(){return E(this,xr)}get length(){return E(this,Do).length-E(this,xr)}clone(){return new kx(E(this,Do))}reset(){O(this,xr,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=te(this,ev,JP).call(this,E(this,xr)+1,e.match+1);return O(this,xr,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;E(this,xr)<e.match-1;){const r=this.peek().linkNext;n.push(te(this,ev,JP).call(this,E(this,xr)+1,r)),O(this,xr,r)}return O(this,xr,e.match+1),n}peek(){if(E(this,xr)>=E(this,Do).length)throw new Error("out-of-bounds");return E(this,Do)[E(this,xr)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return ml(this,xr)._++,e}toString(){const e=[];for(let n=E(this,xr);n<E(this,Do).length;n++){const r=E(this,Do)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};xr=new WeakMap,Do=new WeakMap,ev=new WeakSet,JP=function(e=0,n=0){return new kx(E(this,Do).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let ta=kx;function Nd(t){const e=[],n=o=>{const a=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let r=[],s=[],i=0;for(;i<t.length;){let o=t.substring(i),a=o.match(u8e);a&&(i+=a[1].length,o=t.substring(i));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=l8e[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,l==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(l=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const d=e.pop().text;u=d+u,e[e.length-1].value=it(d)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(h8e),a){if(c.text=a[1],i+=c.text.length,c8e.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(eV)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(d8e),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new ta(e.map(o=>Object.freeze(o)))}function Z6(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function wA(t,e){if(e.peekKeyword(YG)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function ol(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function tV(t){let e=ol(t,s8e);return Z6(e,ps("constant payable nonpayable".split(" "))),Z6(e,ps("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Kc(t,e){return t.popParams().map(n=>Nr.from(n,e))}function nV(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Me(t.pop().text);throw new Error("invalid gas")}return null}function Tf(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const f8e=new RegExp(/^(.*)\[([0-9]*)\]$/);function X6(t){const e=t.match(eV);if(W(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);W(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);W(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const En={},ni=Symbol.for("_ethers_internal"),eB="_ParamTypeInternal",tB="_ErrorInternal",nB="_EventInternal",rB="_ConstructorInternal",sB="_FallbackInternal",iB="_FunctionInternal",oB="_StructInternal";var om,JE;const qi=class qi{constructor(e,n,r,s,i,o,a,c){H(this,om);J(this,"name");J(this,"type");J(this,"baseType");J(this,"indexed");J(this,"components");J(this,"arrayLength");J(this,"arrayChildren");if(jv(e,En,"ParamType"),Object.defineProperty(this,ni,{value:eB}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");Ge(this,{name:n,type:r,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(s=>r.arrayChildren.walk(s,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((s,i)=>r.components[i].walk(s,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],s=[e];return te(this,om,JE).call(this,r,e,n,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(e,n){if(qi.isParamType(e))return e;if(typeof e=="string")try{return qi.from(Nd(e),n)}catch{W(!1,"invalid param type","obj",e)}else if(e instanceof ta){let a="",c="",l=null;ol(e,ps(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(g=>qi.from(g)),a=`tuple(${l.map(g=>g.format()).join(",")})`):(a=X6(e.popType("TYPE")),c=a);let u=null,d=null;for(;e.length&&e.peekType("BRACKET");){const g=e.pop();u=new qi(En,"",a,c,null,l,d,u),d=g.value,a+=g.text,c="array",l=null}let h=null;if(ol(e,i8e).has("indexed")){if(!n)throw new Error("");h=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new qi(En,p,a,c,h,l,d,u)}const r=e.name;W(!r||typeof r=="string"&&r.match(XG),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(W(n,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(f8e);if(o){const a=parseInt(o[2]||"-1"),c=qi.from({type:o[1],components:e.components});return new qi(En,r||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(l=>qi.from(l)):null;return new qi(En,r||"",i,"tuple",s,a,null,null)}return i=X6(e.type),new qi(En,r||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[ni]===eB}};om=new WeakSet,JE=function(e,n,r,s){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((c,l)=>{var u;te(u=o,om,JE).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in n))throw new Error(`missing value for component ${c.name}`);return n[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{var u;te(u=o[l],om,JE).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}const i=r(this.type,n);i.then?e.push(async function(){s(await i)}()):s(i)};let Nr=qi;class Nf{constructor(e,n,r){J(this,"type");J(this,"inputs");jv(e,En,"Fragment"),r=Object.freeze(r.slice()),Ge(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{Nf.from(JSON.parse(e))}catch{}return Nf.from(Nd(e))}if(e instanceof ta)switch(e.peekKeyword(YG)){case"constructor":return Fc.from(e);case"error":return Vs.from(e);case"event":return $a.from(e);case"fallback":case"receive":return Ec.from(e);case"function":return Ua.from(e);case"struct":return rf.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Fc.from(e);case"error":return Vs.from(e);case"event":return $a.from(e);case"fallback":case"receive":return Ec.from(e);case"function":return Ua.from(e);case"struct":return rf.from(e)}ue(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}W(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Fc.isFragment(e)}static isError(e){return Vs.isFragment(e)}static isEvent(e){return $a.isFragment(e)}static isFunction(e){return Ua.isFragment(e)}static isStruct(e){return rf.isFragment(e)}}class bA extends Nf{constructor(n,r,s,i){super(n,r,i);J(this,"name");W(typeof s=="string"&&s.match(XG),"invalid identifier","name",s),i=Object.freeze(i.slice()),Ge(this,{name:s})}}function zb(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class Vs extends bA{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,ni,{value:tB})}get selector(){return If(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+zb(e,this.inputs)),n.join(" ")}static from(e){if(Vs.isFragment(e))return e;if(typeof e=="string")return Vs.from(Nd(e));if(e instanceof ta){const n=wA("error",e),r=Kc(e);return Tf(e),new Vs(En,n,r)}return new Vs(En,e.name,e.inputs?e.inputs.map(Nr.from):[])}static isFragment(e){return e&&e[ni]===tB}}class $a extends bA{constructor(n,r,s,i){super(n,"event",r,s);J(this,"anonymous");Object.defineProperty(this,ni,{value:nB}),Ge(this,{anonymous:i})}get topicHash(){return If(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+zb(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(i=>Nr.from(i)),new $a(En,n,r,!1).topicHash}static from(n){if($a.isFragment(n))return n;if(typeof n=="string")try{return $a.from(Nd(n))}catch{W(!1,"invalid event fragment","obj",n)}else if(n instanceof ta){const r=wA("event",n),s=Kc(n,!0),i=!!ol(n,ps(["anonymous"])).has("anonymous");return Tf(n),new $a(En,r,s,i)}return new $a(En,n.name,n.inputs?n.inputs.map(r=>Nr.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[ni]===nB}}class Fc extends Nf{constructor(n,r,s,i,o){super(n,r,s);J(this,"payable");J(this,"gas");Object.defineProperty(this,ni,{value:rB}),Ge(this,{payable:i,gas:o})}format(n){if(ue(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[`constructor${zb(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(Fc.isFragment(n))return n;if(typeof n=="string")try{return Fc.from(Nd(n))}catch{W(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof ta){ol(n,ps(["constructor"]));const r=Kc(n),s=!!ol(n,r8e).has("payable"),i=nV(n);return Tf(n),new Fc(En,"constructor",r,s,i)}return new Fc(En,"constructor",n.inputs?n.inputs.map(Nr.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[ni]===rB}}class Ec extends Nf{constructor(n,r,s){super(n,"fallback",r);J(this,"payable");Object.defineProperty(this,ni,{value:sB}),Ge(this,{payable:s})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(n){if(Ec.isFragment(n))return n;if(typeof n=="string")try{return Ec.from(Nd(n))}catch{W(!1,"invalid fallback fragment","obj",n)}else if(n instanceof ta){const r=n.toString(),s=n.peekKeyword(ps(["fallback","receive"]));if(W(s,"type must be fallback or receive","obj",r),n.popKeyword(ps(["fallback","receive"]))==="receive"){const c=Kc(n);return W(c.length===0,"receive cannot have arguments","obj.inputs",c),ol(n,ps(["payable"])),Tf(n),new Ec(En,[],!0)}let o=Kc(n);o.length?W(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[Nr.from("bytes")];const a=tV(n);if(W(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),ol(n,ps(["returns"])).has("returns")){const c=Kc(n);W(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(l=>l.format("minimal")).join(", "))}return Tf(n),new Ec(En,o,a==="payable")}if(n.type==="receive")return new Ec(En,[],!0);if(n.type==="fallback"){const r=[Nr.from("bytes")],s=n.stateMutability==="payable";return new Ec(En,r,s)}W(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[ni]===sB}}class Ua extends bA{constructor(n,r,s,i,o,a){super(n,"function",r,i);J(this,"constant");J(this,"outputs");J(this,"stateMutability");J(this,"payable");J(this,"gas");Object.defineProperty(this,ni,{value:iB}),o=Object.freeze(o.slice()),Ge(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return If(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n))),outputs:this.outputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+zb(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(zb(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(i=>Nr.from(i)),new Ua(En,n,"view",r,[],null).selector}static from(n){if(Ua.isFragment(n))return n;if(typeof n=="string")try{return Ua.from(Nd(n))}catch{W(!1,"invalid function fragment","obj",n)}else if(n instanceof ta){const s=wA("function",n),i=Kc(n),o=tV(n);let a=[];ol(n,ps(["returns"])).has("returns")&&(a=Kc(n));const c=nV(n);return Tf(n),new Ua(En,s,o,i,a,c)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new Ua(En,n.name,r,n.inputs?n.inputs.map(Nr.from):[],n.outputs?n.outputs.map(Nr.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[ni]===iB}}class rf extends bA{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,ni,{value:oB})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return rf.from(Nd(e))}catch{W(!1,"invalid struct fragment","obj",e)}else if(e instanceof ta){const n=wA("struct",e),r=Kc(e);return Tf(e),new rf(En,n,r)}return new rf(En,e.name,e.inputs?e.inputs.map(Nr.from):[])}static isFragment(e){return e&&e[ni]===oB}}const ia=new Map;ia.set(0,"GENERIC_PANIC");ia.set(1,"ASSERT_FALSE");ia.set(17,"OVERFLOW");ia.set(18,"DIVIDE_BY_ZERO");ia.set(33,"ENUM_RANGE_ERROR");ia.set(34,"BAD_STORAGE_DATA");ia.set(49,"STACK_UNDERFLOW");ia.set(50,"ARRAY_RANGE_ERROR");ia.set(65,"OUT_OF_MEMORY");ia.set(81,"UNINITIALIZED_FUNCTION_CALL");const p8e=new RegExp(/^bytes([0-9]*)$/),g8e=new RegExp(/^(u?int)([0-9]*)$/);let lI=null,aB=1024;function m8e(t,e,n,r){let s="missing revert data",i=null;const o=null;let a=null;if(n){s="execution reverted";const l=ct(n);if(n=Ae(n),l.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(Ae(l.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(Ae(l.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},i=`Panic due to ${ia.get(u)||"UNKNOWN"}(${u})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?Bt(e.to):null,data:e.data||"0x"};return e.from&&(c.from=Bt(e.from)),pn(s,"CALL_EXCEPTION",{action:t,data:n,reason:i,transaction:c,invocation:o,revert:a})}var _u,$p;const Ox=class Ox{constructor(){H(this,_u)}getDefaultValue(e){const n=e.map(s=>te(this,_u,$p).call(this,Nr.from(s)));return new uE(n,"_").defaultValue()}encode(e,n){Pq(n.length,e.length,"types/values length mismatch");const r=e.map(o=>te(this,_u,$p).call(this,Nr.from(o))),s=new uE(r,"_"),i=new UP;return s.encode(i,n),i.data}decode(e,n,r){const s=e.map(o=>te(this,_u,$p).call(this,Nr.from(o)));return new uE(s,"_").decode(new BP(n,r,aB))}static _setDefaultMaxInflation(e){W(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),aB=e}static defaultAbiCoder(){return lI==null&&(lI=new Ox),lI}static getBuiltinCallException(e,n,r){return m8e(e,n,r,Ox.defaultAbiCoder())}};_u=new WeakSet,$p=function(e){if(e.isArray())return new DDe(te(this,_u,$p).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new uE(e.components.map(r=>te(this,_u,$p).call(this,r)),e.name);switch(e.baseType){case"address":return new ODe(e.name);case"bool":return new $De(e.name);case"string":return new WDe(e.name);case"bytes":return new UDe(e.name);case"":return new MDe(e.name)}let n=e.type.match(g8e);if(n){let r=parseInt(n[2]||"256");return W(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new HDe(r/8,n[1]==="int",e.name)}if(n=e.type.match(p8e),n){let r=parseInt(n[1]);return W(r!==0&&r<=32,"invalid bytes length","param",e),new BDe(r,e.name)}W(!1,"invalid type","type",e.type)};let Hb=Ox;class y8e{constructor(e,n,r){J(this,"fragment");J(this,"name");J(this,"signature");J(this,"topic");J(this,"args");const s=e.name,i=e.format();Ge(this,{fragment:e,name:s,signature:i,topic:n,args:r})}}class w8e{constructor(e,n,r,s){J(this,"fragment");J(this,"name");J(this,"args");J(this,"signature");J(this,"selector");J(this,"value");const i=e.name,o=e.format();Ge(this,{fragment:e,name:i,args:r,signature:o,selector:n,value:s})}}class b8e{constructor(e,n,r){J(this,"fragment");J(this,"name");J(this,"args");J(this,"signature");J(this,"selector");const s=e.name,i=e.format();Ge(this,{fragment:e,name:s,args:r,signature:i,selector:n})}}class cB{constructor(e){J(this,"hash");J(this,"_isIndexed");Ge(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const lB={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},uB={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&lB[t.toString()]&&(e=lB[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var Ca,Aa,Sa,Kr,Wa,YE,ZE;const nh=class nh{constructor(e){H(this,Wa);J(this,"fragments");J(this,"deploy");J(this,"fallback");J(this,"receive");H(this,Ca);H(this,Aa);H(this,Sa);H(this,Kr);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,O(this,Sa,new Map),O(this,Ca,new Map),O(this,Aa,new Map);const r=[];for(const o of n)try{r.push(Nf.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}Ge(this,{fragments:Object.freeze(r)});let s=null,i=!1;O(this,Kr,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Ge(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(W(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=E(this,Sa);break;case"event":c=E(this,Aa);break;case"error":c=E(this,Ca);break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||Ge(this,{deploy:Fc.from("constructor()")}),Ge(this,{fallback:s,receive:i})}format(e){const n=e?"minimal":"full";return this.fragments.map(s=>s.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return Hb.defaultAbiCoder()}getFunctionName(e){const n=te(this,Wa,YE).call(this,e,null,!1);return W(n,"no matching function","key",e),n.name}hasFunction(e){return!!te(this,Wa,YE).call(this,e,null,!1)}getFunction(e,n){return te(this,Wa,YE).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(E(this,Sa).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(E(this,Sa).get(s),r)}}getEventName(e){const n=te(this,Wa,ZE).call(this,e,null,!1);return W(n,"no matching event","key",e),n.name}hasEvent(e){return!!te(this,Wa,ZE).call(this,e,null,!1)}getEvent(e,n){return te(this,Wa,ZE).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(E(this,Aa).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(E(this,Aa).get(s),r)}}getError(e,n){if(an(e)){const s=e.toLowerCase();if(uB[s])return Vs.from(uB[s].signature);for(const i of E(this,Ca).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of E(this,Ca))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?Vs.from("error Error(string)"):e==="Panic"?Vs.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");W(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=Vs.from(e).format(),e==="Error(string)")return Vs.from("error Error(string)");if(e==="Panic(uint256)")return Vs.from("error Panic(uint256)");const r=E(this,Ca).get(e);return r||null}forEachError(e){const n=Array.from(E(this,Ca).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(E(this,Ca).get(s),r)}}_decodeParams(e,n){return E(this,Kr).decode(e,n)}_encodeParams(e,n){return E(this,Kr).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);W(r,"unknown error","fragment",e),e=r}return W(Tn(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,Tn(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);W(r,"unknown error","fragment",e),e=r}return kn([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);W(r,"unknown function","fragment",e),e=r}return W(Tn(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,Tn(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);W(r,"unknown function","fragment",e),e=r}return kn([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const i=this.getFunction(e);W(i,"unknown function","fragment",e),e=i}let r="invalid length for result data";const s=ds(n);if(s.length%32===0)try{return E(this,Kr).decode(e.outputs,s)}catch{r="could not decode result data"}ue(!1,r,"BAD_DATA",{value:Ae(s),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=ct(e,"data"),s=Hb.getBuiltinCallException("call",n,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=Ae(r.slice(0,4)),c=this.getError(a);if(c)try{const l=E(this,Kr).decode(c.inputs,r.slice(4));s.revert={name:c.name,signature:c.format(),args:l},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);W(r,"unknown function","fragment",e),e=r}return Ae(E(this,Kr).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const i=this.getEvent(e);W(i,"unknown event","eventFragment",e),e=i}ue(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(i,o)=>i.type==="string"?If(o):i.type==="bytes"?Wn(Ae(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=bd(o):i.type.match(/^bytes/)?o=$Re(o,32):i.type==="address"&&E(this,Kr).encode(["address"],[o]),xi(Ae(o),32));for(n.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){W(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?W(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?r.push(i.map(c=>s(a,c))):r.push(s(a,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);W(o,"unknown event","eventFragment",e),e=o}const r=[],s=[],i=[];return e.anonymous||r.push(e.topicHash),W(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const c=n[a];if(o.indexed)if(o.type==="string")r.push(If(c));else if(o.type==="bytes")r.push(Wn(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(E(this,Kr).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:E(this,Kr).encode(s,i),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const f=this.getEvent(e);W(f,"unknown event","eventFragment",e),e=f}if(r!=null&&!e.anonymous){const f=e.topicHash;W(an(r[0],32)&&r[0].toLowerCase()===f,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((f,p)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(s.push(Nr.from({type:"bytes32",name:f.name})),o.push(!0)):(s.push(f),o.push(!1)):(i.push(f),o.push(!1))});const a=r!=null?E(this,Kr).decode(s,kn(r)):null,c=E(this,Kr).decode(i,n,!0),l=[],u=[];let d=0,h=0;return e.inputs.forEach((f,p)=>{let g=null;if(f.indexed)if(a==null)g=new cB(null);else if(o[p])g=new cB(a[h++]);else try{g=a[h++]}catch(y){g=y}else try{g=c[d++]}catch(y){g=y}l.push(g),u.push(f.name||null)}),Wm.fromItems(l,u)}parseTransaction(e){const n=ct(e.data,"tx.data"),r=Me(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(Ae(n.slice(0,4)));if(!s)return null;const i=E(this,Kr).decode(s.inputs,n.slice(4));return new w8e(s,s.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new y8e(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=Ae(e),r=this.getError(Tn(n,0,4));if(!r)return null;const s=E(this,Kr).decode(r.inputs,Tn(n,4));return new b8e(r,r.selector,s)}static from(e){return e instanceof nh?e:typeof e=="string"?new nh(JSON.parse(e)):typeof e.formatJson=="function"?new nh(e.formatJson()):typeof e.format=="function"?new nh(e.format("json")):new nh(e)}};Ca=new WeakMap,Aa=new WeakMap,Sa=new WeakMap,Kr=new WeakMap,Wa=new WeakSet,YE=function(e,n,r){if(an(e)){const i=e.toLowerCase();for(const o of E(this,Sa).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of E(this,Sa))o.split("(")[0]===e&&i.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,c=!0;Zr.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=i.length-1;l>=0;l--){const u=i[l].inputs.length;u!==a&&(!c||u!==a-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){const u=i[l].inputs;for(let d=0;d<n.length;d++)if(Zr.isTyped(n[d])){if(d>=u.length){if(n[d].type==="overrides")continue;i.splice(l,1);break}if(n[d].type!==u[d].baseType){i.splice(l,1);break}}}}if(i.length===1&&n&&n.length!==i[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");W(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=E(this,Sa).get(Ua.from(e).format());return s||null},ZE=function(e,n,r){if(an(e)){const i=e.toLowerCase();for(const o of E(this,Aa).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of E(this,Aa))o.split("(")[0]===e&&i.push(a);if(n){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<n.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<n.length;c++)if(Zr.isTyped(n[c])&&n[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");W(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=E(this,Aa).get($a.from(e).format());return s||null};let YP=nh;const rV=BigInt(0);function Eg(t){return t??null}function Dn(t){return t==null?null:t.toString()}class dB{constructor(e,n,r){J(this,"gasPrice");J(this,"maxFeePerGas");J(this,"maxPriorityFeePerGas");Ge(this,{gasPrice:Eg(e),maxFeePerGas:Eg(n),maxPriorityFeePerGas:Eg(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Dn(e),maxFeePerGas:Dn(n),maxPriorityFeePerGas:Dn(r)}}}function Sx(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=Ae(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=Me(t[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=it(t[s],`request.${s}`));return t.accessList&&(e.accessList=Vf(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>e3(s)?Ae(s):Object.assign({},s))),e}var Nc;class v8e{constructor(e,n){J(this,"provider");J(this,"number");J(this,"hash");J(this,"timestamp");J(this,"parentHash");J(this,"parentBeaconBlockRoot");J(this,"nonce");J(this,"difficulty");J(this,"gasLimit");J(this,"gasUsed");J(this,"stateRoot");J(this,"receiptsRoot");J(this,"blobGasUsed");J(this,"excessBlobGas");J(this,"miner");J(this,"prevRandao");J(this,"extraData");J(this,"baseFeePerGas");H(this,Nc);O(this,Nc,e.transactions.map(r=>typeof r!="string"?new Wb(r,n):r)),Ge(this,{provider:n,hash:Eg(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:Eg(e.prevRandao),extraData:e.extraData,baseFeePerGas:Eg(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return E(this,Nc).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=E(this,Nc).slice();return e.length===0?[]:(ue(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,timestamp:g,transactions:y}=this;return{_type:"Block",baseFeePerGas:Dn(e),difficulty:Dn(n),extraData:r,gasLimit:Dn(s),gasUsed:Dn(i),blobGasUsed:Dn(this.blobGasUsed),excessBlobGas:Dn(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,timestamp:g,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,transactions:y}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return E(this,Nc).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=E(this,Nc)[e];else{const r=e.toLowerCase();for(const s of E(this,Nc))if(typeof s=="string"){if(s!==r)continue;n=s;break}else{if(s.hash!==r)continue;n=s;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;W(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return E8e(this)}}Nc=new WeakMap;class Hv{constructor(e,n){J(this,"provider");J(this,"transactionHash");J(this,"blockHash");J(this,"blockNumber");J(this,"removed");J(this,"address");J(this,"data");J(this,"topics");J(this,"index");J(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());Ge(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return ue(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return ue(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return ue(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return _8e(this)}}var tv;class sV{constructor(e,n){J(this,"provider");J(this,"to");J(this,"from");J(this,"contractAddress");J(this,"hash");J(this,"index");J(this,"blockHash");J(this,"blockNumber");J(this,"logsBloom");J(this,"gasUsed");J(this,"blobGasUsed");J(this,"cumulativeGasUsed");J(this,"gasPrice");J(this,"blobGasPrice");J(this,"type");J(this,"status");J(this,"root");H(this,tv);O(this,tv,Object.freeze(e.logs.map(s=>new Hv(s,n))));let r=rV;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),Ge(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return E(this,tv)}toJSON(){const{to:e,from:n,contractAddress:r,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:Dn(this.cumulativeGasUsed),from:n,gasPrice:Dn(this.gasPrice),blobGasUsed:Dn(this.blobGasUsed),blobGasPrice:Dn(this.blobGasPrice),gasUsed:Dn(this.gasUsed),hash:s,index:i,logs:l,logsBloom:c,root:d,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return oV(this)}reorderedEvent(e){return ue(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),iV(this,e)}}tv=new WeakMap;var xu;const v3=class v3{constructor(e,n){J(this,"provider");J(this,"blockNumber");J(this,"blockHash");J(this,"index");J(this,"hash");J(this,"type");J(this,"to");J(this,"from");J(this,"nonce");J(this,"gasLimit");J(this,"gasPrice");J(this,"maxPriorityFeePerGas");J(this,"maxFeePerGas");J(this,"maxFeePerBlobGas");J(this,"data");J(this,"value");J(this,"chainId");J(this,"signature");J(this,"accessList");J(this,"blobVersionedHashes");J(this,"authorizationList");H(this,xu);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,O(this,xu,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:s,type:i,to:o,from:a,nonce:c,data:l,signature:u,accessList:d,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:n,blobVersionedHashes:h,chainId:Dn(this.chainId),data:l,from:a,gasLimit:Dn(this.gasLimit),gasPrice:Dn(this.gasPrice),hash:s,maxFeePerGas:Dn(this.maxFeePerGas),maxPriorityFeePerGas:Dn(this.maxPriorityFeePerGas),maxFeePerBlobGas:Dn(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:r,type:i,value:Dn(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await cs({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,s=n??0;let i=E(this,xu),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:h,nonce:f}=await cs({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(f<this.nonce){i=h;return}if(a)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(o===-1&&(o=i-3,o<E(this,xu)&&(o=E(this,xu)));o<=h;){if(a)return null;const g=await this.provider.getBlock(o,!0);if(g==null)return;for(const y of g)if(y===this.hash)return;for(let y=0;y<g.length;y++){const w=await g.getTransaction(y);if(w.from===this.from&&w.nonce===this.nonce){if(a)return null;const v=await this.provider.getTransactionReceipt(w.hash);if(v==null||h-v.blockNumber+1<r)return;let b="replaced";w.data===this.data&&w.to===this.to&&w.value===this.value?b="repriced":w.data==="0x"&&w.from===w.to&&w.value===rV&&(b="cancelled"),ue(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:b==="replaced"||b==="cancelled",reason:b,replacement:w.replaceableTransaction(i),hash:w.hash,receipt:v})}}o++}},l=h=>{if(h==null||h.status!==0)return h;ue(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:h.to,from:h.from,data:""},receipt:h})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return l(u);if(u){if(r===1||await u.confirmations()>=r)return l(u)}else if(await c(),r===0)return null;return await new Promise((h,f)=>{const p=[],g=()=>{p.forEach(w=>w())};if(p.push(()=>{a=!0}),s>0){const w=setTimeout(()=>{g(),f(pn("wait for transaction timeout","TIMEOUT"))},s);p.push(()=>{clearTimeout(w)})}const y=async w=>{if(await w.confirmations()>=r){g();try{h(l(w))}catch(v){f(v)}}};if(p.push(()=>{this.provider.off(this.hash,y)}),this.provider.on(this.hash,y),i>=0){const w=async()=>{try{await c()}catch(v){if(Ir(v,"TRANSACTION_REPLACED")){g(),f(v);return}}a||this.provider.once("block",w)};p.push(()=>{this.provider.off("block",w)}),this.provider.once("block",w)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return ue(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),oV(this)}reorderedEvent(e){return ue(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ue(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),iV(this,e)}replaceableTransaction(e){W(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new v3(this,this.provider);return O(n,xu,e),n}};xu=new WeakMap;let Wb=v3;function E8e(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function iV(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function oV(t){return{orphan:"drop-transaction",tx:t}}function _8e(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class f3 extends Hv{constructor(n,r,s){super(n,n.provider);J(this,"interface");J(this,"fragment");J(this,"args");const i=r.decodeEventLog(s,n.data,n.topics);Ge(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class aV extends Hv{constructor(n,r){super(n,n.provider);J(this,"error");Ge(this,{error:r})}}var am;class x8e extends sV{constructor(n,r,s){super(s,r);H(this,am);O(this,am,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?E(this,am).getEvent(n.topics[0]):null;if(r)try{return new f3(n,E(this,am),r)}catch(s){return new aV(n,s)}return n})}}am=new WeakMap;var nv;class p3 extends Wb{constructor(n,r,s){super(s,r);H(this,nv);O(this,nv,n)}async wait(n,r){const s=await super.wait(n,r);return s==null?null:new x8e(E(this,nv),this.provider,s)}}nv=new WeakMap;class cV extends Dq{constructor(n,r,s,i){super(n,r,s);J(this,"log");Ge(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class C8e extends cV{constructor(e,n,r,s,i){super(e,n,r,new f3(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);Ge(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const hB=BigInt(0);function lV(t){return t&&typeof t.call=="function"}function uV(t){return t&&typeof t.estimateGas=="function"}function vA(t){return t&&typeof t.resolveName=="function"}function dV(t){return t&&typeof t.sendTransaction=="function"}function hV(t){if(t!=null){if(vA(t))return t;if(t.provider)return t.provider}}var rv;class A8e{constructor(e,n,r){H(this,rv);J(this,"fragment");if(Ge(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const s=Pf(e.runner,"resolveName"),i=vA(s)?s:null;O(this,rv,async function(){const o=await Promise.all(n.inputs.map((a,c)=>r[c]==null?null:a.walkAsync(r[c],(u,d)=>u==="address"?Array.isArray(d)?Promise.all(d.map(h=>fs(h,i))):fs(d,i):d)));return e.interface.encodeFilterTopics(n,o)}())}getTopicFilter(){return E(this,rv)}}rv=new WeakMap;function Pf(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function bh(t){return t==null?null:t.provider||null}async function fV(t,e){const n=Zr.dereference(t,"overrides");W(typeof n=="object","invalid overrides parameter","overrides",t);const r=Sx(n);return W(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),W(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function S8e(t,e,n){const r=Pf(t,"resolveName"),s=vA(r)?r:null;return await Promise.all(e.map((i,o)=>i.walkAsync(n[o],(a,c)=>(c=Zr.dereference(c,a),a==="address"?fs(c,s):c))))}function I8e(t){const e=async function(o){const a=await fV(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await fs(a.from,hV(t.runner)));const c=t.interface,l=Me(a.value||hB,"overrides.value")===hB,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&W(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),W(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const d=c.receive||c.fallback&&c.fallback.payable;return W(d||l,"cannot send value to non-payable fallback","overrides.value",a.value),W(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=Pf(t.runner,"call");ue(lV(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(l){throw XR(l)&&l.data?t.interface.makeError(l.data,c):l}},r=async function(o){const a=t.runner;ue(dV(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),l=bh(t.runner);return new p3(t.interface,l,c)},s=async function(o){const a=Pf(t.runner,"estimateGas");return ue(uV(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await r(o);return Ge(i,{_contract:t,estimateGas:s,populateTransaction:e,send:r,staticCall:n}),i}function T8e(t,e){const n=function(...l){const u=t.interface.getFunction(e,l);return ue(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},r=async function(...l){const u=n(...l);let d={};if(u.inputs.length+1===l.length&&(d=await fV(l.pop()),d.from&&(d.from=await fs(d.from,hV(t.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const h=await S8e(t.runner,u.inputs,l);return Object.assign({},d,await cs({to:t.getAddress(),data:t.interface.encodeFunctionData(u,h)}))},s=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},i=async function(...l){const u=t.runner;ue(dV(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await u.sendTransaction(await r(...l)),h=bh(t.runner);return new p3(t.interface,h,d)},o=async function(...l){const u=Pf(t.runner,"estimateGas");return ue(uV(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...l))},a=async function(...l){const u=Pf(t.runner,"call");ue(lV(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...l);let h="0x";try{h=await u.call(d)}catch(p){throw XR(p)&&p.data?t.interface.makeError(p.data,d):p}const f=n(...l);return t.interface.decodeFunctionResult(f,h)},c=async(...l)=>n(...l).constant?await s(...l):await i(...l);return Ge(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=t.interface.getFunction(e);return ue(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function N8e(t,e){const n=function(...s){const i=t.interface.getEvent(e,s);return ue(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},r=function(...s){return new A8e(t,n(...s),s)};return Ge(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return ue(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}const Ix=Symbol.for("_ethersInternal_contract"),pV=new WeakMap;function P8e(t,e){pV.set(t[Ix],e)}function hi(t){return pV.get(t[Ix])}function k8e(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function g3(t,e){let n,r=null;if(Array.isArray(e)){const i=function(o){if(an(o,32))return o;const a=t.interface.getEvent(o);return W(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?n=[null]:typeof e=="string"?an(e,32)?n=[e]:(r=t.interface.getEvent(e),W(r,"unknown fragment","event",e),n=[r.topicHash]):k8e(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):W(!1,"unknown event name","event",e);n=n.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=n.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:n}}async function O0(t,e){const{subs:n}=hi(t);return n.get((await g3(t,e)).tag)||null}async function fB(t,e,n){const r=bh(t.runner);ue(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await g3(t,n),{addr:a,subs:c}=hi(t);let l=c.get(i);if(!l){const d={address:a||t,topics:o},h=y=>{let w=s;if(w==null)try{w=t.interface.getEvent(y.topics[0])}catch{}if(w){const v=w,b=s?t.interface.decodeEventLog(s,y.data,y.topics):[];XP(t,n,b,x=>new C8e(t,x,n,v,y))}else XP(t,n,[],v=>new cV(t,v,n,y))};let f=[];l={tag:i,listeners:[],start:()=>{f.length||f.push(r.on(d,h))},stop:async()=>{if(f.length==0)return;let y=f;f=[],await Promise.all(y),r.off(d,h)}},c.set(i,l)}return l}let ZP=Promise.resolve();async function O8e(t,e,n,r){await ZP;const s=await O0(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(n);r&&c.push(r(a?null:o));try{o.call(t,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),hi(t).subs.delete(s.tag)),i>0}async function XP(t,e,n,r){try{await ZP}catch{}const s=O8e(t,e,n,r);return ZP=s,await s}const hE=["then"];var LB;LB=Ix;const pw=class pw{constructor(e,n,r,s){J(this,"target");J(this,"interface");J(this,"runner");J(this,"filters");J(this,LB);J(this,"fallback");W(typeof e=="string"||bG(e),"invalid value for Contract target","target",e),r==null&&(r=null);const i=YP.from(n);Ge(this,{target:e,runner:r,interface:i}),Object.defineProperty(this,Ix,{value:{}});let o,a=null,c=null;if(s){const d=bh(r);c=new p3(this.interface,d,s)}let l=new Map;if(typeof e=="string")if(an(e))a=e,o=Promise.resolve(e);else{const d=Pf(r,"resolveName");if(!vA(d))throw pn("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(e).then(h=>{if(h==null)throw pn("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return hi(this).addr=h,h})}else o=e.getAddress().then(d=>{if(d==null)throw new Error("TODO");return hi(this).addr=d,d});P8e(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(d,h,f)=>{if(typeof h=="symbol"||hE.indexOf(h)>=0)return Reflect.get(d,h,f);try{return this.getEvent(h)}catch(p){if(!Ir(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>hE.indexOf(h)>=0?Reflect.has(d,h):Reflect.has(d,h)||this.interface.hasEvent(String(h))});return Ge(this,{filters:u}),Ge(this,{fallback:i.receive||i.fallback?I8e(this):null}),new Proxy(this,{get:(d,h,f)=>{if(typeof h=="symbol"||h in d||hE.indexOf(h)>=0)return Reflect.get(d,h,f);try{return d.getFunction(h)}catch(p){if(!Ir(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>typeof h=="symbol"||h in d||hE.indexOf(h)>=0?Reflect.has(d,h):d.interface.hasFunction(h)})}connect(e){return new pw(this.target,this.interface,e)}attach(e){return new pw(e,this.interface,this.runner)}async getAddress(){return await hi(this).addrPromise}async getDeployedCode(){const e=bh(this.runner);ue(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=bh(this.runner);return ue(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return hi(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),T8e(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),N8e(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=hi(this),o=s||await i,{fragment:a,topics:c}=await g3(this,e),l={address:o,topics:c,fromBlock:n,toBlock:r},u=bh(this.runner);return ue(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(d=>{let h=a;if(h==null)try{h=this.interface.getEvent(d.topics[0])}catch{}if(h)try{return new f3(d,this.interface,h)}catch(f){return new aV(d,f)}return new Hv(d,u)})}async on(e,n){const r=await fB(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await fB(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await XP(this,e,n,null)}async listenerCount(e){if(e){const s=await O0(this,e);return s?s.listeners.length:0}const{subs:n}=hi(this);let r=0;for(const{listeners:s}of n.values())r+=s.length;return r}async listeners(e){if(e){const s=await O0(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:n}=hi(this);let r=[];for(const{listeners:s}of n.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(e,n){const r=await O0(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(n==null||r.listeners.length===0)&&(r.stop(),hi(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await O0(this,e);if(!n)return this;n.stop(),hi(this).subs.delete(n.tag)}else{const{subs:n}=hi(this);for(const{tag:r,stop:s}of n.values())s(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends pw{constructor(s,i=null){super(s,e,i)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let ek=pw;function R8e(){return ek}class _g extends R8e(){}function uI(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):W(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class D8e{constructor(e){J(this,"name");Ge(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const gV=new RegExp("^(ipfs)://(.*)$","i"),pB=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),gV,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var Cu,Fh,Au,Up,Rx,mV;const ng=class ng{constructor(e,n,r){H(this,Au);J(this,"provider");J(this,"address");J(this,"name");H(this,Cu);H(this,Fh);Ge(this,{provider:e,address:n,name:r}),O(this,Cu,null),O(this,Fh,new _g(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return E(this,Cu)==null&&O(this,Cu,(async()=>{try{return await E(this,Fh).supportsInterface("0x9061b923")}catch(e){if(Ir(e,"CALL_EXCEPTION"))return!1;throw O(this,Cu,null),e}})()),await E(this,Cu)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await te(this,Au,Up).call(this,"addr(bytes32)");return i==null||i===Ub?null:i}catch(i){if(Ir(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await te(this,Au,Up).call(this,"addr(bytes32,uint)",[i]);if(an(o,20))return Bt(o)}let n=null;for(const i of this.provider.plugins)if(i instanceof D8e&&i.supportsCoinType(e)){n=i;break}if(n==null)return null;const r=await te(this,Au,Up).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const s=await n.decodeAddress(e,r);if(s!=null)return s;ue(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await te(this,Au,Up).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await te(this,Au,Up).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const s=n[1]==="e3010170"?"ipfs":"ipns",i=parseInt(n[4],16);if(n[5].length===i*2)return`${s}://${BRe("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;ue(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<pB.length;r++){const s=n.match(pB[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=uI(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const l=c[1],u=new _g(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const g=await u.ownerOf(l);if(a!==g)return e.push({type:"!owner",value:g}),{url:null,linkage:e};e.push({type:"owner",value:g})}else if(i==="erc1155"){const g=await u.balanceOf(a,l);if(!g)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:g.toString()})}let d=await u[o](l);if(d==null||d==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:d}),i==="erc1155"&&(d=d.replace("{id}",bd(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=uI(d)),e.push({type:"metadata-url",value:d});let h={};const f=await new vd(d).send();f.assertOk();try{h=f.bodyJson}catch{try{e.push({type:"!metadata",value:f.bodyText})}catch{const w=f.body;return w&&e.push({type:"!metadata",value:Ae(w)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!h)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(h)});let p=h.image;if(typeof p!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(gV)==null)return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=uI(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return ue(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var s;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const i=await te(s=ng,Rx,mV).call(s,e,r);if(i!=null){const o=new ng(e,i,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};Cu=new WeakMap,Fh=new WeakMap,Au=new WeakSet,Up=async function(e,n){n=(n||[]).slice();const r=E(this,Fh).interface;n.unshift(QP(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),ue(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[Q$e(this.name,255),r.encodeFunctionData(s,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const i=await E(this,Fh)[e](...n);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!Ir(i,"CALL_EXCEPTION"))throw i}return null},Rx=new WeakSet,mV=async function(e,n){const r=await ng.getEnsAddress(e);try{const i=await new _g(r,["function resolver(bytes32) view returns (address)"],e).resolver(QP(n),{enableCcipRead:!0});return i===Ub?null:i}catch(s){throw s}return null},H(ng,Rx);let Tx=ng;const gB=BigInt(0);function yt(t,e){return function(n){return n==null?e:t(n)}}function qb(t,e){return n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))}}function Wv(t,e){return n=>{const r={};for(const s in t){let i=s;if(e&&s in e&&!(i in n)){for(const o of e[s])if(o in n){i=o;break}}try{const o=t[s](n[i]);o!==void 0&&(r[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";ue(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:n})}}return r}}function $8e(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}W(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function Ym(t){return W(an(t,!0),"invalid data","value",t),t}function Sr(t){return W(an(t,32),"invalid hash","value",t),t}const U8e=Wv({address:Bt,blockHash:Sr,blockNumber:it,data:Ym,index:it,removed:yt($8e,!1),topics:qb(Sr),transactionHash:Sr,transactionIndex:it},{index:["logIndex"]});function B8e(t){return U8e(t)}const L8e=Wv({hash:yt(Sr),parentHash:Sr,parentBeaconBlockRoot:yt(Sr,null),number:it,timestamp:it,nonce:yt(Ym),difficulty:Me,gasLimit:Me,gasUsed:Me,stateRoot:yt(Sr,null),receiptsRoot:yt(Sr,null),blobGasUsed:yt(Me,null),excessBlobGas:yt(Me,null),miner:yt(Bt),prevRandao:yt(Sr,null),extraData:Ym,baseFeePerGas:yt(Me)},{prevRandao:["mixHash"]});function M8e(t){const e=L8e(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:yV(n)),e}const j8e=Wv({transactionIndex:it,blockNumber:it,transactionHash:Sr,address:Bt,topics:qb(Sr),data:Ym,index:it,blockHash:Sr},{index:["logIndex"]});function F8e(t){return j8e(t)}const z8e=Wv({to:yt(Bt,null),from:yt(Bt,null),contractAddress:yt(Bt,null),index:it,root:yt(Ae),gasUsed:Me,blobGasUsed:yt(Me,null),logsBloom:yt(Ym),blockHash:Sr,hash:Sr,logs:qb(F8e),blockNumber:it,cumulativeGasUsed:Me,effectiveGasPrice:yt(Me),blobGasPrice:yt(Me,null),status:yt(it),type:yt(it,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function H8e(t){return z8e(t)}function yV(t){t.to&&Me(t.to)===gB&&(t.to="0x0000000000000000000000000000000000000000");const e=Wv({hash:Sr,index:yt(it,void 0),type:n=>n==="0x"||n==null?0:it(n),accessList:yt(Vf,null),blobVersionedHashes:yt(qb(Sr,!0),null),authorizationList:yt(qb(n=>{let r;if(n.signature)r=n.signature;else{let s=n.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},n,{yParity:s})}return{address:Bt(n.address),chainId:Me(n.chainId),nonce:Me(n.nonce),signature:ti.from(r)}},!1),null),blockHash:yt(Sr,null),blockNumber:yt(it,null),transactionIndex:yt(it,null),from:Bt,gasPrice:yt(Me),maxPriorityFeePerGas:yt(Me),maxFeePerGas:yt(Me),maxFeePerBlobGas:yt(Me,null),gasLimit:Me,to:yt(Bt,null),value:Me,nonce:it,data:Ym,creates:yt(Bt,null),chainId:yt(Me,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=kDe(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=ti.from(t.signature):e.signature=ti.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&Me(e.blockHash)===gB&&(e.blockHash=null),e}const W8e="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class qv{constructor(e){J(this,"name");Ge(this,{name:e})}clone(){return new qv(this.name)}}class EA extends qv{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);J(this,"effectiveBlock");J(this,"txBase");J(this,"txCreate");J(this,"txDataZero");J(this,"txDataNonzero");J(this,"txAccessListStorageKey");J(this,"txAccessListAddress");const s={effectiveBlock:n};function i(o,a){let c=(r||{})[o];c==null&&(c=a),W(typeof c=="number",`invalud value for ${o}`,"costs",r),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),Ge(this,s)}clone(){return new EA(this.effectiveBlock,this)}}class _A extends qv{constructor(n,r){super("org.ethers.plugins.network.Ens");J(this,"address");J(this,"targetNetwork");Ge(this,{address:n||W8e,targetNetwork:r??1})}clone(){return new _A(this.address,this.targetNetwork)}}var sv,iv;class q8e extends qv{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");H(this,sv);H(this,iv);O(this,sv,n),O(this,iv,r)}get url(){return E(this,sv)}get processFunc(){return E(this,iv)}clone(){return this}}sv=new WeakMap,iv=new WeakMap;const dI=new Map;var cm,lm,Su;const rg=class rg{constructor(e,n){H(this,cm);H(this,lm);H(this,Su);O(this,cm,e),O(this,lm,Me(n)),O(this,Su,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return E(this,cm)}set name(e){O(this,cm,e)}get chainId(){return E(this,lm)}set chainId(e){O(this,lm,Me(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Me(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Me(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Me(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(E(this,Su).values())}attachPlugin(e){if(E(this,Su).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return E(this,Su).set(e.name,e.clone()),this}getPlugin(e){return E(this,Su).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new rg(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new EA;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const s=Vf(e.accessList);for(const i in s)r+=n.txAccessListAddress+n.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(e){if(G8e(),e==null)return rg.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=dI.get(e);if(n)return n();if(typeof e=="bigint")return new rg("unknown",e);W(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){W(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new rg(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new _A(e.ensAddress,e.ensNetwork)),n}W(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=dI.get(e);r&&W(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),dI.set(e,n)}};cm=new WeakMap,lm=new WeakMap,Su=new WeakMap;let Ba=rg;function mB(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function yB(t){return new q8e(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([r.send(),e()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:mB(a.maxFee,9),maxPriorityFeePerGas:mB(a.maxPriorityFee,9)}}catch(i){ue(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let wB=!1;function G8e(){if(wB)return;wB=!0;function t(e,n,r){const s=function(){const i=new Ba(e,n);return r.ensNetwork!=null&&i.attachPlugin(new _A(null,r.ensNetwork)),i.attachPlugin(new EA),(r.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Ba.register(e,s),Ba.register(n,s),r.altNames&&r.altNames.forEach(i=>{Ba.register(i,s)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[yB("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[yB("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function tk(t){return JSON.parse(JSON.stringify(t))}var Pc,Vi,Iu,Ia,um,XE;class V8e{constructor(e){H(this,um);H(this,Pc);H(this,Vi);H(this,Iu);H(this,Ia);O(this,Pc,e),O(this,Vi,null),O(this,Iu,4e3),O(this,Ia,-2)}get pollingInterval(){return E(this,Iu)}set pollingInterval(e){O(this,Iu,e)}start(){E(this,Vi)||(O(this,Vi,E(this,Pc)._setTimeout(te(this,um,XE).bind(this),E(this,Iu))),te(this,um,XE).call(this))}stop(){E(this,Vi)&&(E(this,Pc)._clearTimeout(E(this,Vi)),O(this,Vi,null))}pause(e){this.stop(),e&&O(this,Ia,-2)}resume(){this.start()}}Pc=new WeakMap,Vi=new WeakMap,Iu=new WeakMap,Ia=new WeakMap,um=new WeakSet,XE=async function(){try{const e=await E(this,Pc).getBlockNumber();if(E(this,Ia)===-2){O(this,Ia,e);return}if(e!==E(this,Ia)){for(let n=E(this,Ia)+1;n<=e;n++){if(E(this,Vi)==null)return;await E(this,Pc).emit("block",n)}O(this,Ia,e)}}catch{}E(this,Vi)!=null&&O(this,Vi,E(this,Pc)._setTimeout(te(this,um,XE).bind(this),E(this,Iu)))};var zh,Hh,Tu;class m3{constructor(e){H(this,zh);H(this,Hh);H(this,Tu);O(this,zh,e),O(this,Tu,!1),O(this,Hh,n=>{this._poll(n,E(this,zh))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){E(this,Tu)||(O(this,Tu,!0),E(this,Hh).call(this,-2),E(this,zh).on("block",E(this,Hh)))}stop(){E(this,Tu)&&(O(this,Tu,!1),E(this,zh).off("block",E(this,Hh)))}pause(e){this.stop()}resume(){this.start()}}zh=new WeakMap,Hh=new WeakMap,Tu=new WeakMap;var dm,kc;class K8e extends m3{constructor(n,r){super(n);H(this,dm);H(this,kc);O(this,dm,r),O(this,kc,-2)}pause(n){n&&O(this,kc,-2),super.pause(n)}async _poll(n,r){const s=await r.getBlock(E(this,dm));s!=null&&(E(this,kc)===-2?O(this,kc,s.number):s.number>E(this,kc)&&(r.emit(E(this,dm),s.number),O(this,kc,s.number)))}}dm=new WeakMap,kc=new WeakMap;var Dx;class Q8e extends m3{constructor(n,r){super(n);H(this,Dx);O(this,Dx,tk(r))}async _poll(n,r){throw new Error("@TODO")}}Dx=new WeakMap;var hm;class J8e extends m3{constructor(n,r){super(n);H(this,hm);O(this,hm,r)}async _poll(n,r){const s=await r.getTransactionReceipt(E(this,hm));s&&r.emit(E(this,hm),s)}}hm=new WeakMap;var Oc,fm,pm,Nu,Ki,$x,wV;class y3{constructor(e,n){H(this,$x);H(this,Oc);H(this,fm);H(this,pm);H(this,Nu);H(this,Ki);O(this,Oc,e),O(this,fm,tk(n)),O(this,pm,te(this,$x,wV).bind(this)),O(this,Nu,!1),O(this,Ki,-2)}start(){E(this,Nu)||(O(this,Nu,!0),E(this,Ki)===-2&&E(this,Oc).getBlockNumber().then(e=>{O(this,Ki,e)}),E(this,Oc).on("block",E(this,pm)))}stop(){E(this,Nu)&&(O(this,Nu,!1),E(this,Oc).off("block",E(this,pm)))}pause(e){this.stop(),e&&O(this,Ki,-2)}resume(){this.start()}}Oc=new WeakMap,fm=new WeakMap,pm=new WeakMap,Nu=new WeakMap,Ki=new WeakMap,$x=new WeakSet,wV=async function(e){if(E(this,Ki)===-2)return;const n=tk(E(this,fm));n.fromBlock=E(this,Ki)+1,n.toBlock=e;const r=await E(this,Oc).getLogs(n);if(r.length===0){E(this,Ki)<e-60&&O(this,Ki,e-60);return}for(const s of r)E(this,Oc).emit(E(this,fm),s),O(this,Ki,s.blockNumber)};const Y8e=BigInt(2),Z8e=10;function fE(t){return t&&typeof t.then=="function"}function e_(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,o)=>(i[o]=r[o],i),{})}return r})}class bV{constructor(e){J(this,"name");Ge(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function X8e(t){return JSON.parse(JSON.stringify(t))}function nk(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function hI(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(an(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:e_("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:e_("orphan",n),filter:X8e(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(s=>s==null?null:Array.isArray(s)?nk(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(n.address){const s=[],i=[],o=a=>{an(a)?s.push(a):i.push((async()=>{s.push(await fs(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),i.length&&await Promise.all(i),r.address=nk(s.map(a=>a.toLowerCase()))}return{filter:r,tag:e_("event",r),type:"event"}}W(!1,"unknown ProviderEvent","event",t)}function fI(){return new Date().getTime()}const e5e={cacheTimeout:250,pollingInterval:4e3};var Qr,Pu,Jr,gm,mi,Wh,ku,Rc,ov,Qi,mm,ym,dt,ui,rk,sk,R0,ik,D0,t_;class t5e{constructor(e,n){H(this,dt);H(this,Qr);H(this,Pu);H(this,Jr);H(this,gm);H(this,mi);H(this,Wh);H(this,ku);H(this,Rc);H(this,ov);H(this,Qi);H(this,mm);H(this,ym);if(O(this,ym,Object.assign({},e5e,n||{})),e==="any")O(this,Wh,!0),O(this,mi,null);else if(e){const r=Ba.from(e);O(this,Wh,!1),O(this,mi,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else O(this,Wh,!1),O(this,mi,null);O(this,Rc,-1),O(this,ku,new Map),O(this,Qr,new Map),O(this,Pu,new Map),O(this,Jr,null),O(this,gm,!1),O(this,ov,1),O(this,Qi,new Map),O(this,mm,!1)}get pollingInterval(){return E(this,ym).pollingInterval}get provider(){return this}get plugins(){return Array.from(E(this,Pu).values())}attachPlugin(e){if(E(this,Pu).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return E(this,Pu).set(e.name,e.connect(this)),this}getPlugin(e){return E(this,Pu).get(e)||null}get disableCcipRead(){return E(this,mm)}set disableCcipRead(e){O(this,mm,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const c=r[a],l=c.replace("{sender}",s).replace("{data}",i),u=new vd(l);c.indexOf("{data}")===-1&&(u.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let d="unknown error",h;try{h=await u.send()}catch(f){o.push(f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:f}});continue}try{const f=h.bodyJson;if(f.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:f}),f.data;f.message&&(d=f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:f})}catch{}ue(h.statusCode<400||h.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:d}}),o.push(d)}ue(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new v8e(M8e(e),this)}_wrapLog(e,n){return new Hv(B8e(e),this)}_wrapTransactionReceipt(e,n){return new sV(H8e(e),this)}_wrapTransactionResponse(e,n){return new Wb(yV(e),this)}_detectNetwork(){ue(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){ue(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=it(await te(this,dt,ui).call(this,{method:"getBlockNumber"}),"%response");return E(this,Rc)>=0&&O(this,Rc,e),e}_getAddress(e){return fs(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(an(e))return an(e,32)?e:Fo(e);if(typeof e=="bigint"&&(e=it(e,"blockTag")),typeof e=="number")return e>=0?Fo(e):E(this,Rc)>=0?Fo(E(this,Rc)+e):this.getBlockNumber().then(n=>Fo(n+e));W(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?nk(c.map(l=>l.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,s=(c,l,u)=>{let d;switch(c.length){case 0:break;case 1:d=c[0];break;default:c.sort(),d=c}if(r&&(l!=null||u!=null))throw new Error("invalid filter");const h={};return d&&(h.address=d),n.length&&(h.topics=n),l&&(h.fromBlock=l),u&&(h.toBlock=u),r&&(h.blockHash=r),h};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(e){const n=Sx(e),r=[];if(["to","from"].forEach(s=>{if(n[s]==null)return;const i=fs(n[s],this);fE(i)?r.push(async function(){n[s]=await i}()):n[s]=i}),n.blockTag!=null){const s=this._getBlockTag(n.blockTag);fE(s)?r.push(async function(){n.blockTag=await s}()):n.blockTag=s}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(E(this,mi)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw E(this,mi)===s&&O(this,mi,null),i}})();return O(this,mi,s),(await s).clone()}const e=E(this,mi),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(E(this,Wh)?(this.emit("network",r,n),E(this,mi)===e&&O(this,mi,Promise.resolve(r))):ue(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await cs({_block:te(this,dt,ik).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await te(this,dt,ui).call(this,{method:"getGasPrice"});return Me(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await te(this,dt,ui).call(this,{method:"getPriorityFee"});return Me(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(s,e);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*Y8e+c),new dB(i,a,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new vd(r.url),i=await r.processFunc(n,this,s);return new dB(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return fE(n)&&(n=await n),Me(await te(this,dt,ui).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await cs({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await te(this,dt,sk).call(this,te(this,dt,rk).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return Me(await te(this,dt,R0).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return it(await te(this,dt,R0).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return Ae(await te(this,dt,R0).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const s=Me(n,"position");return Ae(await te(this,dt,R0).call(this,{method:"getStorage",position:s},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:s}=await cs({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=bx.from(e);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:s}=await cs({network:this.getNetwork(),params:te(this,dt,ik).call(this,e,!!n)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(e){const{network:n,params:r}=await cs({network:this.getNetwork(),params:te(this,dt,ui).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await cs({network:this.getNetwork(),params:te(this,dt,ui).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await te(this,dt,ui).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await cs({network:this.getNetwork(),result:te(this,dt,ui).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:Ae(n)}async getLogs(e){let n=this._getFilter(e);fE(n)&&(n=await n);const{network:r,params:s}=await cs({network:this.getNetwork(),params:te(this,dt,ui).call(this,{method:"getLogs",filter:n})});return s.map(i=>this._wrapLog(i,r))}_getProvider(e){ue(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await Tx.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=Bt(e);const n=QP(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await Tx.getEnsAddress(this),i=await new _g(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(i==null||i===Ub)return null;const a=await new _g(i,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(Ir(r,"BAD_DATA")&&r.value==="0x"||Ir(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const s=n??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const c=async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=s){i(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(pn("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){ue(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=E(this,Qi).get(e);n&&(n.timer&&clearTimeout(n.timer),E(this,Qi).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=ml(this,ov)._++,s=()=>{E(this,Qi).delete(r),e()};if(this.paused)E(this,Qi).set(r,{timer:null,func:s,time:n});else{const i=setTimeout(s,n);E(this,Qi).set(r,{timer:i,func:s,time:fI()})}return r}_forEachSubscriber(e){for(const n of E(this,Qr).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new bV(e.type);case"block":{const n=new V8e(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new K8e(this,e.type);case"event":return new y3(this,e.filter);case"transaction":return new J8e(this,e.hash);case"orphan":return new Q8e(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of E(this,Qr).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),E(this,Jr)!=null&&n.pause(E(this,Jr));break}}async on(e,n){const r=await te(this,dt,t_).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,E(this,Jr)!=null&&r.subscriber.pause(E(this,Jr))),this}async once(e,n){const r=await te(this,dt,t_).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,E(this,Jr)!=null&&r.subscriber.pause(E(this,Jr))),this}async emit(e,...n){const r=await te(this,dt,D0).call(this,e,n);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:o})=>{const a=new Dq(this,o?null:i,e);try{i.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),E(this,Qr).delete(r.tag)),s>0}async listenerCount(e){if(e){const r=await te(this,dt,D0).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of E(this,Qr).values())n+=r.length;return n}async listeners(e){if(e){const r=await te(this,dt,D0).call(this,e);return r?r.listeners.map(({listener:s})=>s):[]}let n=[];for(const{listeners:r}of E(this,Qr).values())n=n.concat(r.map(({listener:s})=>s));return n}async off(e,n){const r=await te(this,dt,D0).call(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),E(this,Qr).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:s}=await te(this,dt,t_).call(this,e);r&&s.stop(),E(this,Qr).delete(n)}else for(const[n,{started:r,subscriber:s}]of E(this,Qr))r&&s.stop(),E(this,Qr).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return E(this,gm)}destroy(){this.removeAllListeners();for(const e of E(this,Qi).keys())this._clearTimeout(e);O(this,gm,!0)}get paused(){return E(this,Jr)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(O(this,Rc,-1),E(this,Jr)!=null){if(E(this,Jr)==!!e)return;ue(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),O(this,Jr,!!e);for(const n of E(this,Qi).values())n.timer&&clearTimeout(n.timer),n.time=fI()-n.time}resume(){if(E(this,Jr)!=null){this._forEachSubscriber(e=>e.resume()),O(this,Jr,null);for(const e of E(this,Qi).values()){let n=e.time;n<0&&(n=0),e.time=fI(),setTimeout(e.func,n)}}}}Qr=new WeakMap,Pu=new WeakMap,Jr=new WeakMap,gm=new WeakMap,mi=new WeakMap,Wh=new WeakMap,ku=new WeakMap,Rc=new WeakMap,ov=new WeakMap,Qi=new WeakMap,mm=new WeakMap,ym=new WeakMap,dt=new WeakSet,ui=async function(e){const n=E(this,ym).cacheTimeout;if(n<0)return await this._perform(e);const r=e_(e.method,e);let s=E(this,ku).get(r);return s||(s=this._perform(e),E(this,ku).set(r,s),setTimeout(()=>{E(this,ku).get(r)===s&&E(this,ku).delete(r)},n)),await s},rk=async function(e,n,r){ue(r<Z8e,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const s=Sx(e);try{return Ae(await this._perform({method:"call",transaction:s,blockTag:n}))}catch(i){if(!this.disableCcipRead&&XR(i)&&i.data&&r>=0&&n==="latest"&&s.to!=null&&Tn(i.data,0,4)==="0x556f1830"){const o=i.data,a=await fs(s.to,this);let c;try{c=o5e(Tn(i.data,4))}catch(d){ue(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}ue(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(s,c.calldata,c.urls);ue(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const u={to:a,data:kn([c.selector,i5e([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const d=await te(this,dt,rk).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:d}),d}}throw i}},sk=async function(e){const{value:n}=await cs({network:this.getNetwork(),value:e});return n},R0=async function(e,n,r){let s=this._getAddress(n),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await te(this,dt,sk).call(this,te(this,dt,ui).call(this,Object.assign(e,{address:s,blockTag:i})))},ik=async function(e,n){if(an(e,32))return await te(this,dt,ui).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await te(this,dt,ui).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},D0=async function(e,n){let r=await hI(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await hI({orphan:"drop-log",log:n[0]},this)),E(this,Qr).get(r.tag)||null},t_=async function(e){const n=await hI(e,this),r=n.tag;let s=E(this,Qr).get(r);return s||(s={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},E(this,Qr).set(r,s)),s};function n5e(t,e){try{const n=ok(t,e);if(n)return mx(n)}catch{}return null}function ok(t,e){if(t==="0x")return null;try{const n=it(Tn(t,e,e+32)),r=it(Tn(t,n,n+32));return Tn(t,n+32,n+32+r)}catch{}return null}function bB(t){const e=Xn(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function r5e(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const s5e=new Uint8Array([]);function i5e(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(s5e),n+=32;for(let r=0;r<t.length;r++){const s=ct(t[r]);e[r]=bB(n),e.push(bB(s.length)),e.push(r5e(s)),n+=32+Math.ceil(s.length/32)*32}return kn(e)}const vB="0x0000000000000000000000000000000000000000000000000000000000000000";function o5e(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};ue(wg(t)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=Tn(t,0,32);ue(Tn(n,0,12)===Tn(vB,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=Tn(n,12);try{const r=[],s=it(Tn(t,32,64)),i=it(Tn(t,s,s+32)),o=Tn(t,s+32);for(let a=0;a<i;a++){const c=n5e(o,a*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{ue(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=ok(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{ue(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}ue(Tn(t,100,128)===Tn(vB,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=Tn(t,96,100);try{const r=ok(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{ue(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function jd(t,e){if(t.provider)return t.provider;ue(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function EB(t,e){let n=Sx(e);if(n.to!=null&&(n.to=fs(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),fs(r,t)]).then(([s,i])=>(W(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else n.from=t.getAddress();return await cs(n)}class a5e{constructor(e){J(this,"provider");Ge(this,{provider:e||null})}async getNonce(e){return jd(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await EB(this,e)}async populateTransaction(e){const n=jd(this,"populateTransaction"),r=await EB(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const o=Me(r.chainId);W(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?W(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&i&&W(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();ue(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(ue(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):ue(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await cs(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await jd(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return jd(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return jd(this,"call").call(await this.populateCall(e))}async resolveName(e){return await jd(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=jd(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const s=bx.from(r);return await n.broadcastTransaction(await this.signTransaction(s))}authorize(e){ue(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function c5e(t){return JSON.parse(JSON.stringify(t))}var os,Ta,qh,Ou,Gh,wm,_d,ak,ck;class vV{constructor(e){H(this,_d);H(this,os);H(this,Ta);H(this,qh);H(this,Ou);H(this,Gh);H(this,wm);O(this,os,e),O(this,Ta,null),O(this,qh,te(this,_d,ak).bind(this)),O(this,Ou,!1),O(this,Gh,null),O(this,wm,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){E(this,Ou)||(O(this,Ou,!0),te(this,_d,ak).call(this,-2))}stop(){E(this,Ou)&&(O(this,Ou,!1),O(this,wm,!0),te(this,_d,ck).call(this),E(this,os).off("block",E(this,qh)))}pause(e){e&&te(this,_d,ck).call(this),E(this,os).off("block",E(this,qh))}resume(){this.start()}}os=new WeakMap,Ta=new WeakMap,qh=new WeakMap,Ou=new WeakMap,Gh=new WeakMap,wm=new WeakMap,_d=new WeakSet,ak=async function(e){try{E(this,Ta)==null&&O(this,Ta,this._subscribe(E(this,os)));let n=null;try{n=await E(this,Ta)}catch(i){if(!Ir(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(n==null){O(this,Ta,null),E(this,os)._recoverSubscriber(this,this._recover(E(this,os)));return}const r=await E(this,os).getNetwork();if(E(this,Gh)||O(this,Gh,r),E(this,Gh).chainId!==r.chainId)throw new Error("chaid changed");if(E(this,wm))return;const s=await E(this,os).send("eth_getFilterChanges",[n]);await this._emitResults(E(this,os),s)}catch(n){console.log("@TODO",n)}E(this,os).once("block",E(this,qh))},ck=function(){const e=E(this,Ta);e&&(O(this,Ta,null),e.then(n=>{E(this,os).destroyed||E(this,os).send("eth_uninstallFilter",[n])}))};var Vh;class l5e extends vV{constructor(n,r){super(n);H(this,Vh);O(this,Vh,c5e(r))}_recover(n){return new y3(n,E(this,Vh))}async _subscribe(n){return await n.send("eth_newFilter",[E(this,Vh)])}async _emitResults(n,r){for(const s of r)n.emit(E(this,Vh),n._wrapLog(s,n._network))}}Vh=new WeakMap;class u5e extends vV{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const d5e="bigint,boolean,function,number,string,symbol".split(/,/g);function n_(t){if(t==null||d5e.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(n_);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function h5e(t){return new Promise(e=>{setTimeout(e,t)})}function Ip(t){return t&&t.toLowerCase()}function _B(t){return t&&typeof t.pollingInterval=="number"}const EV={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class pI extends a5e{constructor(n,r){super(n);J(this,"address");r=Bt(r),Ge(this,{address:r})}connect(n){ue(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=n_(n),s=[];if(r.from){const o=r.from;s.push((async()=>{const a=await fs(o,this.provider);W(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;s.push((async()=>{r.to=await fs(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(n);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const l=async()=>{try{const u=await this.provider.getTransaction(s);if(u!=null){i(u.replaceableTransaction(r));return}}catch(u){if(Ir(u,"CANCELLED")||Ir(u,"BAD_DATA")||Ir(u,"NETWORK_ERROR")||Ir(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=s,o(u);return}if(Ir(u,"INVALID_ARGUMENT")&&(c++,u.info==null&&(u.info={}),u.info.sendTransactionHash=s,c>10)){o(u);return}this.provider.emit("error",pn("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{l()},a.pop()||4e3)};l()})}async signTransaction(n){const r=n_(n);if(r.from){const i=await fs(r.from,this.provider);W(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(n){const r=typeof n=="string"?Vc(n):n;return await this.provider.send("personal_sign",[Ae(r),this.address.toLowerCase()])}async signTypedData(n,r,s){const i=n_(s),o=await Ax.resolveNames(n,r,i,async a=>{const c=await fs(a);return W(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(Ax.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?Vc(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Ae(r)])}}var Kh,bm,Dc,Na,$o,Ji,Ms,av,lk;class f5e extends t5e{constructor(n,r){super(n,r);H(this,av);H(this,Kh);H(this,bm);H(this,Dc);H(this,Na);H(this,$o);H(this,Ji);H(this,Ms);O(this,bm,1),O(this,Kh,Object.assign({},EV,r||{})),O(this,Dc,[]),O(this,Na,null),O(this,Ji,null),O(this,Ms,null);{let i=null;const o=new Promise(a=>{i=a});O(this,$o,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(W(!s||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&n!=null&&O(this,Ji,Ba.from(n))):s&&(W(n==null||s.matches(n),"staticNetwork MUST match network object","options",r),O(this,Ji,s))}_getOption(n){return E(this,Kh)[n]}get _network(){return ue(E(this,Ji),"network is not available yet","NETWORK_ERROR"),E(this,Ji)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let s=n.transaction;if(s&&s.type!=null&&Me(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(E(this,Ji))return E(this,Ji)}else return n;return E(this,Ms)?await E(this,Ms):this.ready?(O(this,Ms,(async()=>{try{const r=Ba.from(Me(await this.send("eth_chainId",[])));return O(this,Ms,null),r}catch(r){throw O(this,Ms,null),r}})()),await E(this,Ms)):(O(this,Ms,(async()=>{const r={id:ml(this,bm)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],O(this,Ms,null)}catch(i){throw O(this,Ms,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Ba.from(Me(s.result));throw this.getRpcError(r,s)})()),await E(this,Ms))}_start(){E(this,$o)==null||E(this,$o).resolve==null||(E(this,$o).resolve(),O(this,$o,null),(async()=>{for(;E(this,Ji)==null&&!this.destroyed;)try{O(this,Ji,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",pn("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await h5e(1e3)}te(this,av,lk).call(this)})())}async _waitUntilReady(){if(E(this,$o)!=null)return await E(this,$o).promise}_getSubscriber(n){return n.type==="pending"?new u5e(this):n.type==="event"?this._getOption("polling")?new y3(this,n.filter):new l5e(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new bV("orphan"):super._getSubscriber(n)}get ready(){return E(this,$o)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(n[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=Fo(Me(n[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{n[s]!=null&&(r[s]=Ae(n[s]))}),n.accessList&&(r.accessList=Vf(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(s=>s.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(s=>{const i=xG(s);return{address:i.address,nonce:Fo(i.nonce),chainId:Fo(i.chainId),yParity:Fo(i.signature.yParity),r:Fo(i.signature.r),s:Fo(i.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Ip(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Ip(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[Ip(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Ip(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(Ip):n.filter.address=Ip(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:s}=n,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return pn("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:i}});if(c.match(/nonce/i)&&c.match(/too low/i))return pn("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=uk(i),l=Hb.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",n.params[0],c?c.data:null);return l.info={error:i,payload:n},l}const o=JSON.stringify(g5e(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return pn("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:n,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return pn("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return pn("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return pn("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return pn("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?pn("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:i,payload:n}}):pn("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(pn("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const s=ml(this,bm)._++,i=new Promise((o,a)=>{E(this,Dc).push({resolve:o,reject:a,payload:{method:n,params:r,id:s,jsonrpc:"2.0"}})});return te(this,av,lk).call(this),i}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const i=await r;if(n>=i.length)throw new Error("no such account");return new pI(this,i[n])}const{accounts:s}=await cs({network:this.getNetwork(),accounts:r});n=Bt(n);for(const i of s)if(Bt(i)===n)return new pI(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new pI(this,r))}destroy(){E(this,Na)&&(clearTimeout(E(this,Na)),O(this,Na,null));for(const{payload:n,reject:r}of E(this,Dc))r(pn("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));O(this,Dc,[]),super.destroy()}}Kh=new WeakMap,bm=new WeakMap,Dc=new WeakMap,Na=new WeakMap,$o=new WeakMap,Ji=new WeakMap,Ms=new WeakMap,av=new WeakSet,lk=function(){if(E(this,Na))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");O(this,Na,setTimeout(()=>{O(this,Na,null);const r=E(this,Dc);for(O(this,Dc,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==E(this,Kh).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(o=>o.payload)).length>E(this,Kh).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:l}of s){if(this.destroyed){c(pn("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const u=o.filter(d=>d.id===l.id)[0];if(u==null){const d=pn("missing response for request","BAD_DATA",{value:o,info:{payload:l}});this.emit("error",d),c(d);continue}if("error"in u){c(this.getRpcError(l,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},n))};var Ru;class p5e extends f5e{constructor(n,r){super(n,r);H(this,Ru);let s=this._getOption("pollingInterval");s==null&&(s=EV.pollingInterval),O(this,Ru,s)}_getSubscriber(n){const r=super._getSubscriber(n);return _B(r)&&(r.pollingInterval=E(this,Ru)),r}get pollingInterval(){return E(this,Ru)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");O(this,Ru,n),this._forEachSubscriber(r=>{_B(r)&&(r.pollingInterval=E(this,Ru))})}}Ru=new WeakMap;function uk(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&an(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=uk(t[e]);if(n)return n}return null}if(typeof t=="string")try{return uk(JSON.parse(t))}catch{}return null}function dk(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)dk(t[n],e);if(typeof t=="string")try{return dk(JSON.parse(t),e)}catch{}}}function g5e(t){const e=[];return dk(t,e),e}var vm,Em;const rh=class rh extends p5e{constructor(n,r,s){const i=Object.assign({},s??{},{batchMaxCount:1});W(n&&n.request,"invalid EIP-1193 provider","ethereum",n);super(r,i);H(this,vm);H(this,Em);O(this,Em,null),s&&s.providerInfo&&O(this,Em,s.providerInfo),O(this,vm,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const l=await n.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const u=new Error(l.message);throw u.code=l.code,u.data=l.data,u.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}})}get providerInfo(){return E(this,Em)}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){W(!Array.isArray(n),"EIP-1193 does not support batch request","payload",n);try{const r=await E(this,vm).call(this,n.method,n.params||[]);return[{id:n.id,result:r}]}catch(r){return[{id:n.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(n,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(n,r)}async hasSigner(n){n==null&&(n=0);const r=await this.send("eth_accounts",[]);return typeof n=="number"?r.length>n:(n=n.toLowerCase(),r.filter(s=>s.toLowerCase()===n).length!==0)}async getSigner(n){if(n==null&&(n=0),!await this.hasSigner(n))try{await E(this,vm).call(this,"eth_requestAccounts",[])}catch(r){const s=r.payload;throw this.getRpcError(s,{id:s.id,error:r})}return await super.getSigner(n)}static async discover(n){if(n==null&&(n={}),n.provider)return new rh(n.provider);const r=n.window?n.window:typeof window<"u"?window:null;if(r==null)return null;const s=n.anyProvider;if(s&&r.ethereum)return new rh(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const i=n.timeout?n.timeout:300;return i===0?null:await new Promise((o,a)=>{let c=[];const l=h=>{c.push(h.detail),s&&u()},u=()=>{if(clearTimeout(d),c.length)if(n&&n.filter){const h=n.filter(c.map(f=>Object.assign({},f.info)));if(h==null)o(null);else if(h instanceof rh)o(h);else{let f=null;if(h.uuid&&(f=c.filter(g=>h.uuid===g.info.uuid)[0]),f){const{provider:p,info:g}=f;o(new rh(p,void 0,{providerInfo:g}))}else a(pn("filter returned unknown info","UNSUPPORTED_OPERATION",{value:h}))}}else{const{provider:h,info:f}=c[0];o(new rh(h,void 0,{providerInfo:f}))}else o(null);r.removeEventListener("eip6963:announceProvider",l)},d=setTimeout(()=>{u()},i);r.addEventListener("eip6963:announceProvider",l),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};vm=new WeakMap,Em=new WeakMap;let hk=rh;const xB="0x3112AF5728520F52FD1C6710dD7bD52285a68e47",m5e="https://roxwocgknkiqnsgiojgz.supabase.co",y5e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJveHdvY2drbmtpcW5zZ2lvamd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzA3NjMxMTIsImV4cCI6MjA0NjMzOTExMn0.NbLMZom-gk7XYGdV4MtXYcgR8R1s8xthrIQ0hpQfx9Y",Rs=ZR(m5e,y5e),w5e=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],_V=()=>{const{address:t}=vv();Ere();const[e,n]=D.useState(null),[r,s]=D.useState(null),[i,o]=D.useState(null),[a,c]=D.useState(!1),[l,u]=D.useState([]),[d,h]=D.useState("Loading..."),[f,p]=D.useState(!1),[g,y]=D.useState(!1),[w,v]=D.useState("0.1"),[b,x]=D.useState(""),[_,C]=D.useState(!0),[S,T]=D.useState(!1),[A,P]=D.useState(""),[R,j]=D.useState(!1),z=D.useRef(null),K=D.useRef(0),I=D.useRef(null),N=D.useRef(null),L=D.useCallback(async()=>{try{if(!window.ethereum)return h("No wallet detected"),!1;const{chainId:V}=await window.ethereum.request({method:"eth_chainId"});if(V!=="0x7c8")try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x7c8"}]})}catch(oe){if(oe.code===4902)await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x7c8",chainName:"Sanko Testnet",rpcUrls:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"],nativeCurrency:{name:"tDMT",symbol:"tDMT",decimals:18},blockExplorerUrls:["https://explorer.testnet.sanko.xyz"]}]});else throw new Error("Please switch to Sanko Testnet")}return!0}catch(V){return console.error("Network switch failed:",V),h("Please switch to Sanko Testnet"),!1}},[]),U=D.useCallback(async()=>{try{if(!window.ethereum)return null;const oe=await new hk(window.ethereum).getSigner();return new _g(xB,["function playerToGame(address) view returns (bytes6)","function createGame(bytes6) payable","function joinGame(bytes6) payable","function endGame(bytes6, address)","function cancelGame(bytes6)","function games(bytes6) view returns (address, address, bool, address, bytes6, uint256)","function MIN_WAGER() view returns (uint256)","function MAX_WAGER() view returns (uint256)"],oe)}catch(V){return console.error("Failed to connect to contract:",V),null}},[]),$=D.useCallback(async(V=5,oe=1e3)=>{if(!t)return h("Please connect your wallet"),!1;if(Date.now()-K.current<1e3)return!1;K.current=Date.now();let Ie=1;for(;Ie<=V;){try{let de=null;const ge=await U();if(ge){if(await window.ethereum.request({method:"eth_chainId"})!=="0x7c8")return h("Please switch to Sanko Testnet"),!1;const Vt=await ge.playerToGame(t);Vt!=="0x000000000000"&&Vt!==""&&(de=Ae(Vt).slice(2).toUpperCase())}if(!de){const{data:ut,error:Vt}=await Rs.from("chess_games").select("game_id").eq("chain","sanko").eq("game_state","active").or(`blue_player_id.eq.${t},red_player_id.eq.${t}`);if(Vt)throw new Error(`Supabase error: ${Vt.message}`);if(!(ut!=null&&ut.length))return Y(),!1;de=ut[0].game_id}if(I.current===de)return!1;I.current=de;const{data:Pe,error:Ve}=await Rs.from("chess_games").select("*").eq("game_id",de).eq("chain","sanko").or(`blue_player_id.eq.${t},red_player_id.eq.${t}`).single();if(Ve)throw new Error(`Supabase query error: ${Ve.message}`);return Pe.game_state==="active"||Pe.game_state==="waiting"?(o(Pe),s(t===Pe.blue_player_id?"blue":"red"),n(de),c(Pe.game_state==="waiting"),h(ne(Pe)?"Your turn":"Opponent's turn"),de&&await se(de),!0):(Y(),!1)}catch(de){console.error(`checkPlayerGameState attempt ${Ie} failed:`,de.message),Ie<V?await new Promise(ge=>setTimeout(ge,oe*Math.pow(2,Ie-1))):h("Failed to load game. Please reconnect wallet.")}Ie++}return!1},[t,U]),M=D.useCallback(async()=>{const V=Math.random().toString(36).substring(2,8).toUpperCase(),{data:oe}=await Rs.from("chess_games").select("game_id").eq("game_id",V).single();return oe?M():V},[]),G=D.useCallback(async()=>{if(!R){j(!0),p(!0),h("Creating game...");try{if(!t)throw new Error("Wallet not connected");if(!await L())return;const V=await U();if(!V)throw new Error("Failed to connect to contract");const oe=Z2(await V.MIN_WAGER()),Ie=Z2(await V.MAX_WAGER());if(parseFloat(w)<parseFloat(oe)||parseFloat(w)>parseFloat(Ie))throw new Error(`Wager must be between ${oe} and ${Ie} tDMT`);let de=await V.playerToGame(t);if(de!=="0x000000000000"&&de!==""&&(await ce(),de=await V.playerToGame(t),de!=="0x000000000000"&&de!=="")){const bt=Ae(de).slice(2).toUpperCase(),yn=xi(Ae("0x"+bt.toLowerCase()),6);await V.cancelGame(yn),await ye(bt)}const ge=await M(),Pe=xi(Ae("0x"+ge.toLowerCase()),6),Ve=v6(w),{data:ut}=await Rs.from("chess_games").select("game_id").eq("game_id",ge).eq("game_state","waiting");if(ut!=null&&ut.length)throw new Error("Invite code already exists");const{data:Vt,error:Mt}=await Rs.from("chess_games").insert({game_id:ge,blue_player_id:t,red_player_id:null,board:{positions:JSON.parse(JSON.stringify(w5e)),piece_state:{}},current_player:"blue",game_state:"waiting",bet_amount:w,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),is_public:_,game_title:b||null,chain:"sanko",contract_address:xB}).select().single();if(Mt)throw new Error(`Supabase insert failed: ${Mt.message}`);return await V.createGame(Pe,{value:Ve}),n(ge),s("blue"),o(Vt),c(!0),P(ge),T(!0),y(!1),h("Waiting for opponent..."),await se(ge),await ie(),alert(`Game created with wager ${w} tDMT`),ge}catch(V){return console.error("Create game failed:",V.message),j(!1),c(!1),h(`Failed to create game: ${V.message}`),alert(`Failed to create game: ${V.message}`),!1}finally{p(!1)}}},[t,w,b,_,R,L,U,M]),X=D.useCallback(async V=>{p(!0),h("Joining game...");try{if(!t)throw new Error("Wallet not connected");if(!await L())return;const oe=await U();if(!oe)throw new Error("Failed to connect to contract");const{data:Ie,error:de}=await Rs.from("chess_games").select("bet_amount").eq("game_id",V).single();if(de)throw new Error(`Failed to fetch game: ${de.message}`);const ge=v6(Ie.bet_amount.toString()),Pe=xi(Ae("0x"+V.toLowerCase()),6);return await oe.joinGame(Pe,{value:ge}),await $(),h("Joined game successfully!"),!0}catch(oe){return console.error("Join game failed:",oe.message),h(`Failed to join game: ${oe.message}`),!1}finally{p(!1)}},[t,L,U,$]),ie=D.useCallback(async()=>{try{const{data:V,error:oe}=await Rs.from("chess_games").select("*").eq("chain","sanko").eq("game_state","waiting").eq("is_public",!0).order("created_at",{ascending:!1});if(oe){console.error("Error fetching games:",oe);return}u(V||[])}catch(V){console.error("Error fetching games:",V)}},[]),se=D.useCallback(async V=>{z.current&&Rs.removeChannel(z.current),z.current=Rs.channel(`chess_game_${V}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"chess_games",filter:`game_id=eq.${V}`},oe=>{const Ie=oe.new;Ie&&(o(Ie),c(Ie.game_state==="waiting"),h(ne(Ie)?"Your turn":"Opponent's turn"))}).subscribe()},[]),ce=D.useCallback(async()=>{try{if(e){const V=await U();if(V){const oe=xi(Ae("0x"+e.toLowerCase()),6);await V.cancelGame(oe)}await ye(e)}Y()}catch(V){console.error("Error leaving game:",V)}},[e,U]),ye=D.useCallback(async V=>{try{await Rs.from("chess_games").delete().eq("game_id",V).eq("game_state","waiting")}catch(oe){console.error(`Failed to delete stale game ${V}:`,oe)}},[]),Y=D.useCallback(()=>{n(null),s(null),o(null),c(!1),T(!1),P(""),j(!1),y(!1),h("Ready to play"),z.current&&(Rs.removeChannel(z.current),z.current=null)},[]),ne=D.useCallback(V=>!t||!r?!1:V.current_player.toLowerCase()===r,[t,r]),le=D.useCallback(V=>{try{return Z2(V)+" tDMT"}catch{return V+" wei"}},[]);return D.useEffect(()=>{t&&($(),ie())},[t,$,ie]),D.useEffect(()=>{const V=Rs.channel("chess_games_changes").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>{ie()}).subscribe();return()=>{Rs.removeChannel(V)}},[ie]),D.useEffect(()=>()=>{z.current&&Rs.removeChannel(z.current),N.current&&clearInterval(N.current)},[]),i&&!a?m.jsxs("div",{className:"chess-multiplayer-game",children:[m.jsxs("div",{className:"game-header",children:[m.jsxs("h2",{children:["Multiplayer Game - ",e]}),m.jsxs("div",{className:"game-info",children:[m.jsxs("span",{children:["You are: ",r]}),m.jsxs("span",{children:["Current: ",i.current_player]}),m.jsxs("span",{children:["Status: ",d]})]}),m.jsx("button",{onClick:ce,className:"leave-btn",children:"Leave Game"})]}),m.jsx("div",{className:"game-board",children:m.jsx("p",{children:"Game board implementation needed"})})]}):a?m.jsxs("div",{className:"chess-multiplayer-waiting",children:[m.jsx("h2",{children:"Waiting for Opponent"}),m.jsxs("div",{className:"game-code",children:[m.jsxs("p",{children:["Game Code: ",m.jsx("strong",{children:A})]}),m.jsx("p",{children:"Share this code with your opponent"})]}),m.jsxs("div",{className:"game-info",children:[m.jsxs("p",{children:["Wager: ",le((i==null?void 0:i.bet_amount)||"0")]}),m.jsxs("p",{children:["Status: ",d]})]}),m.jsx("button",{onClick:ce,className:"cancel-btn",children:"Cancel Game"})]}):m.jsxs("div",{className:"chess-multiplayer-lobby",children:[m.jsx("h2",{children:"🏁 Multiplayer Chess"}),m.jsx("div",{className:"status-bar",children:m.jsx("span",{children:d})}),g?m.jsxs("div",{className:"create-form",children:[m.jsx("h3",{children:"Create New Game"}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Wager Amount (tDMT):"}),m.jsx("input",{type:"number",min:"0.1",max:"1000",step:"0.1",value:w,onChange:V=>v(V.target.value),placeholder:"0.1"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Game Title (optional):"}),m.jsx("input",{type:"text",value:b,onChange:V=>x(V.target.value),placeholder:"Enter game title...",maxLength:50})]}),m.jsx("div",{className:"form-group",children:m.jsxs("label",{children:[m.jsx("input",{type:"checkbox",checked:_,onChange:V=>C(V.target.checked)}),"Public Game"]})}),m.jsxs("div",{className:"form-actions",children:[m.jsx("button",{onClick:G,disabled:f||!t,className:"create-confirm-btn",children:f?"Creating...":"Create Game"}),m.jsx("button",{onClick:()=>y(!1),disabled:f,className:"cancel-btn",children:"Cancel"})]})]}):m.jsxs("div",{className:"lobby-content",children:[m.jsxs("div",{className:"open-games",children:[m.jsxs("h3",{children:["Open Games (",l.length,")"]}),l.length===0?m.jsx("p",{children:"No open games available"}):m.jsx("div",{className:"games-list",children:l.map(V=>m.jsxs("div",{className:"game-item",children:[m.jsxs("div",{className:"game-info",children:[m.jsxs("span",{className:"game-id",children:["#",V.game_id]}),m.jsx("span",{className:"wager",children:le(V.bet_amount)}),V.game_title&&m.jsx("span",{className:"title",children:V.game_title})]}),m.jsx("button",{onClick:()=>X(V.game_id),disabled:f||!t,className:"join-btn",children:f?"Joining...":"Join"})]},V.game_id))})]}),m.jsx("div",{className:"actions",children:m.jsx("button",{onClick:()=>y(!0),disabled:f||!t,className:"create-btn",children:"Create New Game"})})]}),!t&&m.jsx("div",{className:"wallet-notice",children:"Please connect your wallet to play multiplayer chess"})]})},xV="https://roxwocgknkiqnsgiojgz.supabase.co",b5e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJveHdvY2drbmtpcW5zZ2lvamd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzA3NjMxMTIsImV4cCI6MjA0NjMzOTExMn0.NbLMZom-gk7XYGdV4MtXYcgR8R1s8xthrIQ0hpQfx9Y",v5e=ZR(xV,b5e),gI=ZR(xV,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJveHdvY2drbmtpcW5zZ2lvamd6Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTczMDc2MzExMiwiZXhwIjoyMDQ2MzM5MTEyfQ.US6YTQfWVWNAfmEopBpD580jsaevKv_Ev7dGFeqFptA"),E5e={AI:"ai"},pE={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},CB=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],_5e=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],x5e=()=>{const[t,e]=D.useState(!1),n=D.useRef(null),r=D.useRef(!1);D.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=document.createElement("script");a.src="/stockfish.js",a.onload=()=>{if(console.log("[DEBUG] LawbBot script loaded, initializing..."),typeof window<"u"&&window.Stockfish){const c=window.Stockfish;c().then(l=>{console.log("[DEBUG] LawbBot initialized successfully"),n.current=l,e(!0),r.current=!1,l.postMessage("setoption name Threads value 4"),l.postMessage("setoption name Hash value 128"),l.postMessage("setoption name MultiPV value 1")}).catch(l=>{console.error("[DEBUG] LawbBot initialization failed:",l),e(!1),r.current=!1})}else console.error("[DEBUG] LawbBot not found in window object"),e(!1),r.current=!1},a.onerror=c=>{console.error("[DEBUG] Failed to load LawbBot script:",c),e(!1),r.current=!1},document.head.appendChild(a)}catch(a){console.error("[DEBUG] Failed to create LawbBot script:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=D.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var f;console.log("[DEBUG] Stockfish message:",h),typeof h=="string"&&h.startsWith("bestmove ")&&(l=h.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(f=n.current)==null||f.removeMessageListener(d),c(l)))};try{n.current.addMessageListener(d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeMessageListener(d)}catch(g){console.warn("[DEBUG] Error removing message listener:",g)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=D.useCallback(async(o,a=4e3)=>{try{const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l="https://chess.lawb.xyz/api/stockfish";console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.move||null}else return console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},C5e=()=>{const[t,e]=D.useState(null),[n,r]=D.useState(!1),s=D.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=D.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},A5e=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r}=vv(),[s,i]=D.useState(E5e.AI),[o,a]=D.useState(()=>JSON.parse(JSON.stringify(CB))),[c,l]=D.useState("blue"),[u,d]=D.useState(null),[h,f]=D.useState("active"),[p,g]=D.useState("hard"),[y,w]=D.useState("Connect wallet to play"),[v,b]=D.useState([]),[x,_]=D.useState([]),[C,S]=D.useState([]),[T,A]=D.useState(null),[P,R]=D.useState(!1),[j,z]=D.useState(!1),[K,I]=D.useState(null),[N,L]=D.useState(null),[U]=D.useState(""),[$]=D.useState(.1),[M,G]=D.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),X=D.useRef(null),ie=D.useRef(!1),se=D.useRef(o),ce=D.useRef(null),ye=D.useRef(null),Y=D.useRef(!1),ne=D.useRef(!1),[le,V]=D.useState(!1),[oe,Ie]=D.useState(!1),[de,ge]=D.useState(!1),[Pe,Ve]=D.useState(()=>typeof window<"u"&&window.localStorage?window.localStorage.getItem("lawb_chess_dark_mode")==="true":!1),ut=()=>{Ve(F=>(typeof window<"u"&&window.localStorage&&window.localStorage.setItem("lawb_chess_dark_mode",String(!F)),!F))},{stockfishReady:Vt}=x5e(),{getOpeningData:Mt}=C5e(),[bt,yn]=D.useState("loading"),[$i,dl]=D.useState(!1),[hl,gr]=D.useState([]),[xs,fl]=D.useState(!1),[Ay,pl]=D.useState("/images/chessboard1.png"),Gv=()=>{const F=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],q=Math.floor(Math.random()*F.length),Q=F[q];return console.log("[DEBUG] Random chessboard selected:",Q,"(index:",q,")"),Q};D.useEffect(()=>{if(Vt)yn("ready");else{const F=window.setTimeout(()=>{Vt||(yn("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(F)}},[Vt]),D.useEffect(()=>{se.current=o},[o]),D.useEffect(()=>{r?w("Select game mode"):(w("Connect wallet to play"),R(!1))},[r]),D.useEffect(()=>(!X.current&&typeof Worker<"u"&&(X.current=new Worker("/aiWorker.js"),X.current.onmessage=F=>{console.log("[DEBUG] AI worker response received:",F.data);const{move:q,nodes:Q}=F.data;q&&ie.current&&h==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",q),console.log("[DEBUG] AI searched",Q,"nodes"),ie.current=!1,ye.current&&(window.clearTimeout(ye.current),ye.current=null),ce.current&&ce.current(q.from,q.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},X.current.onerror=F=>{console.error("[DEBUG] AI worker error:",F),w("AI worker error - using fallback mode"),ie.current=!1}),()=>{X.current&&(X.current.terminate(),X.current=null),ye.current&&(window.clearTimeout(ye.current),ye.current=null)}),[]),D.useEffect(()=>{E3()},[]);const E3=async()=>{try{const F=new Promise((ee,Z)=>window.setTimeout(()=>Z(new Error("Database timeout")),1e4)),q=v5e.from("leaderboard").select("*").order("points",{ascending:!1}),Q=await Promise.race([q,F]);if(Q.error)throw Q.error;Q.data&&_(Q.data),console.log("Leaderboard data loaded:",Q.data)}catch(F){w("Failed to load leaderboard"),console.error("Leaderboard error:",F)}},Sy=async F=>{if(console.log("[DEBUG] updateScore called with:",F),!r){console.log("[DEBUG] No wallet address, returning");return}try{const q=r.toLowerCase(),{data:Q}=await gI.from("leaderboard").select("*").eq("username",q).maybeSingle();console.log("[DEBUG] Existing record:",Q);const ee=Q!=null&&Q.wins?Number(Q.wins):0,Z=Q!=null&&Q.losses?Number(Q.losses):0,xe=Q!=null&&Q.draws?Number(Q.draws):0,Se=Q!=null&&Q.total_games?Number(Q.total_games):0,Fe=Q!=null&&Q.points?Number(Q.points):0;console.log("[DEBUG] Score calculation:",{currentWins:ee,currentLosses:Z,currentDraws:xe,currentTotalGames:Se,currentPoints:Fe,gameResult:F});const vt=ee+(F==="win"?1:0),Rt=Z+(F==="loss"?1:0),Mn=xe+(F==="draw"?1:0),jt=Se+1;let Iy=0;if(F==="win")switch(p){case"easy":Iy=10;break;default:Iy=1}else F==="draw"&&(Iy=1);const SA=Fe+Iy;if(console.log("[DEBUG] New values:",{newWins:vt,newLosses:Rt,newDraws:Mn,newTotalGames:jt,newPoints:SA,pointsToAdd:Iy}),Q){const{error:Ty}=await gI.from("leaderboard").update({wins:vt,losses:Rt,draws:Mn,total_games:jt,points:SA,updated_at:new Date().toISOString()}).eq("username",q);if(Ty){console.error("[DEBUG] Error updating leaderboard:",Ty);return}}else{const{error:Ty}=await gI.from("leaderboard").insert({username:q,chain_type:"ethereum",wins:vt,losses:Rt,draws:Mn,total_games:jt,points:SA,updated_at:new Date().toISOString()});if(Ty){console.error("[DEBUG] Error inserting leaderboard record:",Ty);return}}console.log("[DEBUG] Leaderboard updated successfully"),await E3()}catch(q){console.error("[DEBUG] Error in updateScore:",q)}},An=F=>F&&F===F.toUpperCase()?"red":"blue",_3=(F,q)=>F>=0&&F<8&&q>=0&&q<8,x3=(F,q)=>`${String.fromCharCode(97+q)}${8-F}`,gl=(F,q)=>{const Q=q==="blue"?"k":"K";let ee=null;for(let Se=0;Se<8;Se++){for(let Fe=0;Fe<8;Fe++)if(F[Se][Fe]===Q){ee={row:Se,col:Fe};break}if(ee)break}if(!ee)return console.log(`King not found for ${q}`),!1;const Z=q==="blue"?"red":"blue",xe=CV(ee.row,ee.col,Z,F);return console.log(`${q} king at ${ee.row},${ee.col} under attack: ${xe}`),xe},CV=(F,q,Q,ee)=>{for(let Z=0;Z<8;Z++)for(let xe=0;xe<8;xe++){const Se=ee[Z][xe];if(Se&&An(Se)===Q&&Pd(Se,Z,xe,F,q,!1,Q,ee,!0))return!0}return!1},AV=(F,q,Q,ee,Z,xe=o)=>{const Se=xe.map(vt=>[...vt]),Fe=Se[F][q];return Se[Q][ee]=Fe,Se[F][q]=null,gl(Se,Z)},SV=(F,q,Q,ee,Z,xe)=>{const Se=F==="blue"?-1:1,Fe=F==="blue"?6:1;if(!_3(ee,Z)||F==="blue"&&ee>=q||F==="red"&&ee<=q)return!1;const vt=Math.abs(ee-q),Rt=Math.abs(Z-Q);if((vt===1&&Rt===0||vt===2&&Rt===0&&q===Fe||vt===1&&Rt===1)&&vt<=2&&Rt<=1&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("[DEBUG] Pawn move check:",{color:F,from:`${q},${Q}`,to:`${ee},${Z}`}),Q===Z&&ee===q+Se)return xe[ee][Z]===null;if(Q===Z&&q===Fe&&ee===q+2*Se)return xe[q+Se][Q]===null&&xe[ee][Z]===null;if(Math.abs(Q-Z)===1&&ee===q+Se){const jt=xe[ee][Z];return jt!==null&&An(jt)!==F}if(Math.abs(Q-Z)===1&&ee===q+Se){const jt=xe[q][Z];if(jt&&An(jt)!==F&&jt.toLowerCase()==="p"&&M.lastPawnDoubleMove&&M.lastPawnDoubleMove.row===q&&M.lastPawnDoubleMove.col===Z)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},C3=(F,q,Q,ee,Z)=>F!==Q&&q!==ee?!1:S3(F,q,Q,ee,Z),IV=(F,q,Q,ee)=>{const Z=Math.abs(F-Q),xe=Math.abs(q-ee);return Z===2&&xe===1||Z===1&&xe===2},A3=(F,q,Q,ee,Z)=>Math.abs(F-Q)!==Math.abs(q-ee)?!1:S3(F,q,Q,ee,Z),TV=(F,q,Q,ee,Z)=>C3(F,q,Q,ee,Z)||A3(F,q,Q,ee,Z),NV=(F,q,Q,ee,Z)=>{const xe=Math.abs(q-ee),Se=Math.abs(Q-Z);if(xe<=1&&Se<=1)return!0;if(xe===0&&Se===2){if(F==="blue"&&!M.blueKingMoved){if(Z===6&&!M.blueRooksMove.right||Z===2&&!M.blueRooksMove.left)return!0}else if(F==="red"&&!M.redKingMoved&&(Z===6&&!M.redRooksMove.right||Z===2&&!M.redRooksMove.left))return!0}return!1},S3=(F,q,Q,ee,Z)=>{const xe=F===Q?0:(Q-F)/Math.abs(Q-F),Se=q===ee?0:(ee-q)/Math.abs(ee-q);let Fe=F+xe,vt=q+Se;for(;Fe!==Q||vt!==ee;){if(Z[Fe][vt]!==null)return!1;Fe+=xe,vt+=Se}return!0},Pd=(F,q,Q,ee,Z,xe=!0,Se=An(F),Fe=o,vt=!1)=>{if(!_3(ee,Z))return vt||console.log("[ILLEGAL MOVE] Out of board:",{piece:F,startRow:q,startCol:Q,endRow:ee,endCol:Z}),!1;const Rt=Fe[ee][Z];if(Rt&&An(Rt)===Se)return vt||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:F,startRow:q,startCol:Q,endRow:ee,endCol:Z}),!1;const Mn=F.toLowerCase();let jt=!1;switch(Mn){case"p":jt=SV(Se,q,Q,ee,Z,Fe);break;case"r":jt=C3(q,Q,ee,Z,Fe);break;case"n":jt=IV(q,Q,ee,Z);break;case"b":jt=A3(q,Q,ee,Z,Fe);break;case"q":jt=TV(q,Q,ee,Z,Fe);break;case"k":jt=NV(Se,q,Q,ee,Z);break}return jt?jt&&xe&&AV(q,Q,ee,Z,Se,Fe)?(vt||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:F,startRow:q,startCol:Q,endRow:ee,endCol:Z}),!1):jt:(vt||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:F,startRow:q,startCol:Q,endRow:ee,endCol:Z,playerColor:Se,pieceType:Mn,targetPiece:Fe[ee][Z],targetPieceColor:Fe[ee][Z]?An(Fe[ee][Z]):null}),!1)},Vv=(F,q=o,Q=c)=>{const ee=[],Z=q[F.row][F.col];if(!Z||An(Z)!==Q)return ee;const xe=Z.toLowerCase();if(xe==="p"){const Se=Q==="blue"?-1:1,Fe=Q==="blue"?6:1,vt=F.row+Se;if(vt>=0&&vt<8&&Pd(Z,F.row,F.col,vt,F.col,!0,Q,q,!0)&&ee.push({row:vt,col:F.col}),F.row===Fe){const Rt=F.row+2*Se;Rt>=0&&Rt<8&&Pd(Z,F.row,F.col,Rt,F.col,!0,Q,q,!0)&&ee.push({row:Rt,col:F.col})}for(const Rt of[-1,1]){const Mn=F.col+Rt,jt=F.row+Se;Mn>=0&&Mn<8&&jt>=0&&jt<8&&Pd(Z,F.row,F.col,jt,Mn,!0,Q,q,!0)&&ee.push({row:jt,col:Mn})}}else if(xe==="n"){const Se=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[Fe,vt]of Se){const Rt=F.row+Fe,Mn=F.col+vt;Rt>=0&&Rt<8&&Mn>=0&&Mn<8&&Pd(Z,F.row,F.col,Rt,Mn,!0,Q,q,!0)&&ee.push({row:Rt,col:Mn})}}else for(let Se=0;Se<8;Se++)for(let Fe=0;Fe<8;Fe++)Pd(Z,F.row,F.col,Se,Fe,!0,Q,q,!0)&&ee.push({row:Se,col:Fe});return ee},PV=(F,q=o)=>{if(!gl(q,F))return!1;for(let Q=0;Q<8;Q++)for(let ee=0;ee<8;ee++){const Z=q[Q][ee];if(Z&&An(Z)===F&&Vv({row:Q,col:ee},q,F).length>0)return!1}return!0},kV=(F,q=o)=>{if(gl(q,F))return!1;for(let Q=0;Q<8;Q++)for(let ee=0;ee<8;ee++){const Z=q[Q][ee];if(Z&&An(Z)===F&&Vv({row:Q,col:ee},q,F).length>0)return!1}return!0},OV=(F,q)=>{if(h!=="active"||ie.current)return;const Q=o[F][q],ee=Q?An(Q):null;if(u&&C.some(Z=>Z.row===F&&Z.col===q)){Kv(u,{row:F,col:q});return}if(Q&&ee===c){const Z=Vv({row:F,col:q});d({row:F,col:q}),S(Z);return}d(null),S([])},Kv=(F,q,Q=!1)=>{const ee=o[F.row][F.col];if(console.log("[MOVE ATTEMPT]",{from:F,to:q,piece:ee,isAIMove:Q,board:JSON.parse(JSON.stringify(o)),moveHistory:v}),!!ee){if(ee.toLowerCase()==="p"&&(An(ee)==="blue"&&q.row===0||An(ee)==="red"&&q.row===7)){I({from:F,to:q}),z(!0);return}k3(F,q,"q",Q)}};ce.current=Kv;const I3=D.useCallback((F,q,Q=!1)=>{fl(!0);const ee=o.map(Se=>[...Se]),Z=ee[F.row][F.col];if(!Z)return;ee[q.row][q.col]=Z,ee[F.row][F.col]=null,FV(ee,F,q,Z);const xe=zV(F,q);if(b(Se=>{const Fe=[...Se,xe];return console.log("[MOVE HISTORY UPDATED]",Fe),Fe}),A({from:F,to:q}),d(null),S([]),v.length<10&&!Q){const Se=AB(ee,c==="blue"?"red":"blue");Mt(Se).then(Fe=>{Fe&&Fe.moves&&Fe.moves.length>0&&(gr(Fe.moves.slice(0,3)),dl(!0),setTimeout(()=>dl(!1),5e3))})}HV(F,q,Z),l(Se=>{const Fe=Se==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",Fe),T3(ee,Fe),Fe}),T3(ee,c==="blue"?"red":"blue"),a(ee),ie.current=!1,Y.current=!1,ne.current=!1,fl(!1)},[o,c,v,Mt]);D.useEffect(()=>{if(!ie.current&&s==="ai"&&c==="red"&&!Y.current&&!xs)if(ie.current=!0,p==="easy")setTimeout(()=>{const F=RV(o);F?Kv(F.from,F.to,!0):ie.current=!1},600);else{w("AI is calculating...");const F=AB(o,c);if(ne.current)return;ne.current=!0,fetch("https://chess.lawb.xyz/api/stockfish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:F,difficulty:p,movetime:3e3})}).then(Q=>{if(Q.ok)return Q.json();throw new Error("API call failed")}).then(Q=>{const ee=Q.bestmove||Q.move;if(ee&&ee!=="(none)"&&ee.length===4){const Z=ee.charCodeAt(0)-97,xe=parseInt(ee[1]),Se=ee.charCodeAt(2)-97,Fe=parseInt(ee[3]),vt=8-xe,Rt=8-Fe;if(Z>=0&&Z<8&&vt>=0&&vt<8&&Se>=0&&Se<8&&Rt>=0&&Rt<8){const Mn={from:{row:vt,col:Z},to:{row:Rt,col:Se}},jt=o[vt][Z];jt&&An(jt)==="red"&&Pd(jt,vt,Z,Rt,Se,!0,"red",o)?Kv(Mn.from,Mn.to,!0):(ie.current=!1,ne.current=!1)}else ie.current=!1,ne.current=!1}else ie.current=!1,ne.current=!1}).catch(()=>{w("AI error. Please try again."),ie.current=!1,ne.current=!1})}},[c,s,p,o,M,Vt]);const T3=(F,q)=>{console.log("Checking game end for player:",q);const Q=F.some(Z=>Z.some(xe=>xe==="k")),ee=F.some(Z=>Z.some(xe=>xe==="K"));if(!Q)return console.log("[GAME END] KING CAPTURED - Red wins!"),f("checkmate"),w("King captured! Red wins!"),Sy("loss"),ge(!0),setTimeout(()=>ge(!1),3e3),"checkmate";if(!ee)return console.log("[GAME END] KING CAPTURED - Blue wins!"),f("checkmate"),w("King captured! You win!"),Sy("win"),ge(!0),setTimeout(()=>ge(!1),3e3),"checkmate";if(console.log("Is king in check:",gl(F,q)),PV(q,F)){console.log("[GAME END] CHECKMATE",{winner:q==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(F)),moveHistory:v}),f("checkmate");const Z=q==="blue"?"red":"blue";return Z==="blue"?(w("Checkmate! You win!"),Qf("checkmate"),D3(!0),qV(),Sy("win"),ge(!0),setTimeout(()=>ge(!1),3e3)):(w(`Checkmate! ${Z==="red"?"AI":"Opponent"} wins!`),Qf("checkmate"),$3(!0),Sy("loss"),ge(!0),setTimeout(()=>ge(!1),3e3)),"checkmate"}return kV(q,F)?(console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(F)),moveHistory:v}),f("stalemate"),w("Stalemate! Game is a draw."),Sy("draw"),ge(!0),setTimeout(()=>ge(!1),3e3),"stalemate"):(gl(F,q)?(console.log("CHECK detected!"),Qf("check"),w(`${q==="blue"?"Blue":"Red"} is in check!`)):w("Your turn"),null)},RV=F=>{const q=[];for(let Z=0;Z<8;Z++)for(let xe=0;xe<8;xe++){const Se=F[Z][xe];Se&&An(Se)==="red"&&q.push({row:Z,col:xe})}for(let Z=q.length-1;Z>0;Z--){const xe=Math.floor(Math.random()*(Z+1));[q[Z],q[xe]]=[q[xe],q[Z]]}const Q=[],ee=[];for(const Z of q){const xe=Vv(Z,F,"red");for(const Se of xe){const Fe=F[Se.row][Se.col];if(Fe&&An(Fe)==="blue"){const Rt={p:100,n:320,b:330,r:500,q:900,k:2e4}[Fe.toLowerCase()]||0;Q.push({from:Z,to:Se,value:Rt})}else ee.push({from:Z,to:Se})}}if(Q.length>0&&Math.random()<.3){Q.sort((Z,xe)=>Z.value-xe.value);for(const Z of Q){const xe=F.map(Fe=>[...Fe]),Se=xe[Z.from.row][Z.from.col];if(xe[Z.to.row][Z.to.col]=Se,xe[Z.from.row][Z.from.col]=null,!gl(xe,"red"))return{from:Z.from,to:Z.to}}}for(const Z of ee){const xe=F.map(Fe=>[...Fe]),Se=xe[Z.from.row][Z.from.col];if(xe[Z.to.row][Z.to.col]=Se,xe[Z.from.row][Z.from.col]=null,!gl(xe,"red"))return Z}Q.sort((Z,xe)=>Z.value-xe.value);for(const Z of Q){const xe=F.map(Fe=>[...Fe]),Se=xe[Z.from.row][Z.from.col];if(xe[Z.to.row][Z.to.col]=Se,xe[Z.from.row][Z.from.col]=null,!gl(xe,"red"))return{from:Z.from,to:Z.to}}return null},DV=()=>{a(JSON.parse(JSON.stringify(CB))),l("blue"),d(null),f("active"),b([]),S([]),A(null),R(!1),w("Select game mode"),G({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),pl(Gv()),ie.current&&(ie.current=!1)},$V=()=>{if(KV(),console.log("[DEBUG] startGame called, difficulty:",p,"gameMode:",s),s==="online"){R(!1),V(!1);return}R(!0),V(!1),w("Game started! Your turn");const F=Gv();pl(F),console.log("[DEBUG] Game started with chessboard:",F)},N3=F=>`${F.slice(0,6)}...${F.slice(-4)}`,UV=(F,q)=>{const Q=o[F][q],ee=(u==null?void 0:u.row)===F&&(u==null?void 0:u.col)===q,Z=C.some(Se=>Se.row===F&&Se.col===q),xe=T&&(T.from.row===F&&T.from.col===q||T.to.row===F&&T.to.col===q);return m.jsxs("div",{className:`square ${ee?"selected":""} ${Z?"legal-move":""} ${xe?"last-move":""}`,onClick:()=>OV(F,q),children:[Q&&m.jsx("div",{className:"piece",style:{backgroundImage:pE[Q]?`url(${pE[Q]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),Z&&m.jsx("div",{className:"legal-move-indicator"})]},`${F}-${q}`)},BV=()=>{if(!j||!K)return null;const F=c==="blue"?["q","r","b","n"]:["Q","R","B","N"];return m.jsx("div",{className:"promotion-dialog",children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",children:F.map(q=>m.jsx("div",{className:"promotion-piece",onClick:()=>{k3(K.from,K.to,q),z(!1),I(null)},style:{backgroundImage:pE[q]?`url(${pE[q]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},q))})]})})},[LV,MV]=D.useState(null),P3=(F=!1,q="Click a piece to learn more about it.")=>m.jsxs("div",{className:`piece-gallery${F?" piece-gallery-sm":""}`,children:[m.jsx("h3",{children:"Lawbstation Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:_5e.map(Q=>m.jsxs("div",{className:"piece-gallery-item",onClick:()=>MV(Q.key),children:[m.jsx("img",{src:Q.img,alt:Q.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:Q.name}),LV===Q.key&&m.jsx("div",{className:"piece-gallery-desc",children:Q.desc})]},Q.key))}),m.jsx("div",{className:"piece-gallery-tip",children:q})]}),jV=()=>m.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:m.jsx("div",{className:"difficulty-controls-col",children:m.jsxs("div",{className:"difficulty-selection-panel",style:{background:"#fff",borderRadius:12,padding:"32px 24px",boxShadow:"0 4px 32px rgba(0,0,0,0.12)",textAlign:"center"},children:[m.jsx("h2",{style:{fontWeight:700,letterSpacing:1,fontSize:"2rem",color:"#0a2a7a",marginBottom:16},children:"Start a New Game"}),m.jsxs("p",{style:{fontSize:"1.1rem",color:"#333",marginBottom:24},children:["Challenge the LawbBot AI to a chess match.",m.jsx("br",{}),"Good luck, have fun!"]}),m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24},children:[m.jsx("button",{className:`difficulty-btn${p==="easy"?" selected":""}`,style:{background:p==="easy"?"#44c0ff":"#eee",color:p==="easy"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="easy"?"0 2px 8px #44c0ff44":"none"},onClick:()=>g("easy"),children:"Easy"}),m.jsx("button",{className:`difficulty-btn${p==="hard"?" selected":""}`,style:{background:p==="hard"?"#0a2a7a":"#eee",color:p==="hard"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="hard"?"0 2px 8px #0a2a7a44":"none"},onClick:()=>g("hard"),children:"Hard"})]}),m.jsxs("button",{className:"difficulty-btn start-btn",onClick:()=>{$V()},style:{background:"linear-gradient(90deg, #0a2a7a 0%, #44c0ff 100%)",color:"white",fontWeight:"bold",fontSize:"1.3em",padding:"18px 48px",borderRadius:8,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",border:"none",cursor:"pointer",letterSpacing:1,marginBottom:8},children:[m.jsx("span",{role:"img","aria-label":"chess",children:"♟️"})," Start Game"]})]})})}),FV=(F,q,Q,ee)=>{if(ee.toLowerCase()==="p"&&(An(ee)==="blue"&&Q.row===0||An(ee)==="red"&&Q.row===7)){const Z=An(ee)==="blue"?"q":"Q";F[Q.row][Q.col]=Z}ee.toLowerCase()==="k"&&Math.abs(q.col-Q.col)===2&&(Q.col===6?(F[q.row][7]=null,F[q.row][5]=An(ee)==="blue"?"r":"R"):Q.col===2&&(F[q.row][0]=null,F[q.row][3]=An(ee)==="blue"?"r":"R"))},zV=(F,q,Q,ee)=>{const Z=x3(F.row,F.col),xe=x3(q.row,q.col);return`${Z}-${xe}`},HV=(F,q,Q)=>{const ee={...M};Q.toLowerCase()==="k"?An(Q)==="blue"?ee.blueKingMoved=!0:ee.redKingMoved=!0:Q.toLowerCase()==="r"&&(An(Q)==="blue"?(F.col===0&&(ee.blueRooksMove.left=!0),F.col===7&&(ee.blueRooksMove.right=!0)):(F.col===0&&(ee.redRooksMove.left=!0),F.col===7&&(ee.redRooksMove.right=!0))),Q.toLowerCase()==="p"&&Math.abs(F.row-q.row)===2?ee.lastPawnDoubleMove={row:q.row,col:q.col}:ee.lastPawnDoubleMove=null,G(ee)},k3=(F,q,Q="q",ee=!1)=>{o[F.row][F.col];const xe=o[q.row][q.col]!==null;if(Qf(xe?"capture":"move"),xe){L({row:q.row,col:q.col,show:!0}),setTimeout(()=>{I3(F,q,ee),L(null)},500);return}I3(F,q,ee)},[O3,WV]=D.useState(!0),[xA,R3]=D.useState(!1),Qf=F=>{if(!O3)return;let q="";switch(F){case"move":q="/images/move.mp3";break;case"capture":q="/images/capture.mp3";break;case"check":q="/images/play.mp3";break;case"checkmate":q="/images/victory.mp3";break;case"victory":q="/images/victory.mp3";break;default:q="/images/move.mp3"}new Audio(q).play().catch(()=>{})},qV=()=>{if(xA){Qf("victory");for(let F=0;F<50;F++)setTimeout(()=>{const q=document.createElement("div");q.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(q),setTimeout(()=>q.remove(),3e3)},F*100);setTimeout(()=>R3(!1),5e3)}},[GV,D3]=D.useState(!1),[VV,$3]=D.useState(!1),U3=()=>{D3(!1),$3(!1)},CA=()=>{U3(),DV()},AA=()=>{U3(),R(!1)},KV=()=>{new Audio("/images/start.mp3").play().catch(()=>{})},QV=s==="online";return m.jsxs("div",{className:`chess-game${n?" fullscreen":""}${Pe?" chess-dark-mode":""}`,children:[!n&&m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"Lawb Chess"}),m.jsxs("div",{className:"chess-controls",children:[e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:"×"}),m.jsx("button",{className:"dark-mode-toggle",onClick:ut,title:Pe?"Switch to light mode":"Switch to dark mode","aria-label":Pe?"Switch to light mode":"Switch to dark mode",style:{marginLeft:12},children:Pe?"☀️":"🌙"})]})]}),m.jsxs("div",{className:"game-stable-layout",children:[m.jsxs("div",{className:"left-sidebar",children:[P&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"move-history-status",children:y}),m.jsxs("div",{className:"move-history",children:[m.jsx("div",{className:"move-history-title",children:"Move History"}),m.jsx("ul",{className:"move-history-list",children:v.slice().reverse().map((F,q)=>m.jsx("li",{children:F},v.length-1-q))})]})]}),!P&&m.jsxs("div",{className:"leaderboard",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Points"})]})}),m.jsx("tbody",{children:Array.isArray(x)&&x.slice(0,10).map((F,q)=>{if(typeof F=="object"&&F!==null&&"username"in F&&"wins"in F&&"losses"in F&&"draws"in F&&"points"in F){const Q=F;return m.jsxs("tr",{children:[m.jsx("td",{children:q+1}),m.jsx("td",{children:N3(Q.username)}),m.jsx("td",{children:Q.wins}),m.jsx("td",{children:Q.losses}),m.jsx("td",{children:Q.draws}),m.jsx("td",{children:Q.points})]},Q.username)}return null})})]})})]})]}),m.jsxs("div",{className:"center-area",children:[m.jsx("div",{className:"game-info",children:m.jsxs("div",{className:"game-info-bar",children:[m.jsxs("span",{className:c==="blue"?"current-blue":"current-red",children:["Current: ",c==="blue"?"Blue":"Red"]}),m.jsx("span",{className:"wager-label",children:"Wager:"})," ",m.jsx("span",{children:s==="ai"?"NA":`${$} ETH`}),P&&!le&&m.jsxs("span",{className:"mode-play",children:["Mode: ",p==="easy"?"Easy":"Hard"]}),p==="easy"&&m.jsxs("span",{className:`stockfish-status ${bt}`,children:["LawbBot: ",bt==="loading"?"Loading...":bt==="ready"?"Ready":"Failed"]}),p==="hard"&&m.jsxs("span",{className:`stockfish-status ${bt}`,children:["LawbBot: ",bt==="loading"?"Loading...":bt==="ready"?"Ready":"Failed"]}),$i&&hl.length>0&&m.jsxs("div",{className:"opening-suggestions",children:[m.jsx("span",{className:"opening-label",children:"Opening:"}),hl.map((F,q)=>m.jsxs("span",{className:"opening-move",children:[F.san," (",Math.round(F.white+F.draws+F.black)," games)"]},q))]})]})}),P?m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${Ay})`},children:[Array.from({length:8},(F,q)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(Q,ee)=>UV(q,ee))},q)),N&&N.show&&m.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${N.row*12.5}%`,left:`${N.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:m.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),m.jsxs("div",{className:"game-controls",children:[m.jsx("button",{onClick:()=>Ie(!0),children:"Chess Piece Info"}),m.jsx("button",{onClick:CA,children:"New Game"}),m.jsx("button",{onClick:AA,children:"Back to Menu"})]}),m.jsxs("div",{className:"epic-controls",children:[m.jsxs("div",{className:"epic-toggle",children:[m.jsx("input",{type:"checkbox",id:"sound-toggle",checked:O3,onChange:F=>WV(F.target.checked)}),m.jsx("label",{htmlFor:"sound-toggle",children:"🎵 Sound Effects"})]}),m.jsxs("div",{className:"epic-toggle",children:[m.jsx("input",{type:"checkbox",id:"victory-toggle",checked:xA,onChange:F=>R3(F.target.checked)}),m.jsx("label",{htmlFor:"victory-toggle",children:"🎉 Victory Celebration"})]})]})]}):le?jV():s==="online"?m.jsx(_V,{}):m.jsxs("div",{className:"game-mode-panel",children:[m.jsx("h3",{className:"game-mode-title",children:"Select Game Mode"}),m.jsx("button",{className:`mode-btn ${s==="ai"?"selected":""}`,onClick:()=>i("ai"),children:"VS THE HOUSE"}),m.jsxs("div",{className:"pvp-section",children:[m.jsx("button",{className:`mode-btn ${QV?"selected":""}`,onClick:()=>i("online"),children:"PvP"}),m.jsx("img",{src:"/images/chessboard4.png",alt:"Chessboard",style:{display:"block",margin:"16px auto 0 auto",width:"180px",maxWidth:"90%"}})]}),m.jsx("button",{className:"start-btn continue-btn",onClick:()=>V(!0),children:"Continue"}),m.jsxs("div",{className:"how-to-section",children:[m.jsx("h4",{children:"How to Play"}),m.jsxs("div",{className:"how-to-content",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Chess Basics:"})," Move pieces to capture your opponent's king. Each piece moves differently - pawns forward, knights in L-shapes, bishops diagonally, rooks horizontally/vertically, queens in all directions, kings one square at a time."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Wallet Connection:"})," Connect your wallet to track your progress and compete on the leaderboard. Your wallet address serves as your username."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Points System:"})," Win points by defeating the AI. 1 win = 10pts. 1 draw = 1 point."]})]})]})]})]}),m.jsx("div",{className:"right-sidebar",children:P?m.jsxs("div",{className:"leaderboard",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Points"})]})}),m.jsx("tbody",{children:Array.isArray(x)&&x.slice(0,10).map((F,q)=>{if(typeof F=="object"&&F!==null&&"username"in F&&"wins"in F&&"losses"in F&&"draws"in F&&"points"in F){const Q=F;return m.jsxs("tr",{children:[m.jsx("td",{children:q+1}),m.jsx("td",{children:N3(Q.username)}),m.jsx("td",{children:Q.wins}),m.jsx("td",{children:Q.losses}),m.jsx("td",{children:Q.draws}),m.jsx("td",{children:Q.points})]},Q.username)}return null})})]})})]}):m.jsx("div",{className:"piece-gallery-panel",children:P3(!1)})})]}),oe&&m.jsx("div",{className:"gallery-modal-overlay",onClick:()=>Ie(!1),children:m.jsxs("div",{className:"gallery-modal",onClick:F=>F.stopPropagation(),children:[m.jsx("button",{className:"close-modal-btn",onClick:()=>Ie(!1),children:"×"}),P3(!1)]})}),BV(),de&&m.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"}),GV&&xA&&m.jsxs("div",{className:"victory-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)"},children:[m.jsx("div",{className:"balloons-container"}),m.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:"320px",height:"auto",zIndex:2}}),m.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24},children:[m.jsx("button",{onClick:CA,children:"New Game"}),m.jsx("button",{onClick:AA,children:"Back to Menu"})]})]}),VV&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"blood-overlay",children:[0,1,2,3,4,5].map(F=>m.jsx("div",{className:"blood-drip",style:{left:`${10+F*14}%`,animationDelay:`${.5+F*.3}s`,background:"linear-gradient(to bottom, #a80000 0%, #d10000 80%, #5a0000 100%)",width:`${14+Math.random()*10}px`,height:`${50+Math.random()*30}px`,opacity:.85+Math.random()*.1}},F))}),m.jsxs("div",{className:"defeat-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)",pointerEvents:"none"},children:[m.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:"320px",height:"auto",zIndex:2}}),m.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24,pointerEvents:"none"},children:[m.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:CA,children:"New Game"}),m.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:AA,children:"Back to Menu"})]})]})]})]})};function AB(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const SB=()=>{const[t,e]=D.useState("singleplayer");return m.jsxs("div",{className:"chess-page",children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h1",{children:"♔ Chess"}),m.jsxs("div",{className:"mode-toggle",children:[m.jsx("button",{className:`mode-btn ${t==="singleplayer"?"active":""}`,onClick:()=>e("singleplayer"),children:"Single Player"}),m.jsx("button",{className:`mode-btn ${t==="multiplayer"?"active":""}`,onClick:()=>e("multiplayer"),children:"Multiplayer"})]})]}),m.jsx("div",{className:"chess-content",children:t==="singleplayer"?m.jsx(A5e,{onClose:()=>{}}):m.jsx(_V,{})})]})},S5e=new qne,I5e=typeof window<"u"&&window.location.hostname.startsWith("chess."),T5e=()=>hke("(max-width: 768px)")?m.jsx(dke,{}):m.jsx(rke,{});mI.createRoot(document.getElementById("root")).render(m.jsx(Ci.StrictMode,{children:m.jsx(sne,{config:iq.wagmiConfig,children:m.jsx(ire,{client:S5e,children:m.jsx(tke,{children:m.jsx(ZPe,{children:I5e?m.jsx(GE,{path:"/*",element:m.jsx(SB,{})}):m.jsxs(m.Fragment,{children:[m.jsx(GE,{path:"/",element:m.jsx(T5e,{})}),m.jsx(GE,{path:"/chess",element:m.jsx(SB,{})})]})})})})})}));export{GUe as $,Ee as A,qe as B,Ce as C,Rr as D,K0 as E,Or as F,ze as G,wN as H,_0 as I,jo as J,Aue as K,Jt as L,$t as M,Eue as N,pe as O,wi as P,HE as Q,Ke as R,Ho as S,Fs as T,ob as U,mb as V,fr as W,YUe as X,wP as Y,ide as Z,sw as _,qE as a,ry as a$,lr as a0,Of as a1,Pn as a2,KUe as a3,UW as a4,bP as a5,Fm as a6,Rn as a7,K5e as a8,Uu as a9,gF as aA,pF as aB,ud as aC,W0 as aD,el as aE,M5e as aF,eY as aG,df as aH,L5e as aI,j5e as aJ,T_ as aK,z5e as aL,xZ as aM,uj as aN,B5e as aO,iC as aP,Ow as aQ,N_ as aR,Ux as aS,H5e as aT,CZ as aU,V$ as aV,Gte as aW,Coe as aX,uo as aY,Fee as aZ,jee as a_,Ga as aa,Zw as ab,Ye as ac,Kn as ad,Vl as ae,bF as af,uC as ag,P_ as ah,xO as ai,ld as aj,$5e as ak,lC as al,CO as am,D5e as an,R5e as ao,xj as ap,rC as aq,I_ as ar,jJ as as,qJ as at,q5e as au,MX as av,he as aw,mO as ax,ms as ay,FX as az,zt as b,uf as b0,eC as b1,bs as b2,Ln as b3,wv as b4,ae as c,je as d,B as e,Ht as f,jc as g,JUe as h,mg as i,vi as j,De as k,hn as l,bNe as m,Fn as n,vNe as o,_e as p,wn as q,QUe as r,Ot as s,m7 as t,cn as u,ede as v,Di as w,qUe as x,rR as y,w7 as z};
